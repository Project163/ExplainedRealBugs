<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:35:01 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[OAK-101] implement identifier handling (byUUID, byIdentifier, etc)</title>
                <link>https://issues.apache.org/jira/browse/OAK-101</link>
                <project id="12313221" key="OAK">Jackrabbit Oak</project>
                    <description></description>
                <environment></environment>
        <key id="12555134">OAK-101</key>
            <summary>implement identifier handling (byUUID, byIdentifier, etc)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mduerig">Michael D&#252;rig</assignee>
                                    <reporter username="reschke">Julian Reschke</reporter>
                        <labels>
                    </labels>
                <created>Mon, 14 May 2012 13:46:07 +0000</created>
                <updated>Mon, 13 Jan 2014 13:05:52 +0000</updated>
                            <resolved>Wed, 11 Dec 2013 15:11:36 +0000</resolved>
                                                    <fixVersion>0.14</fixVersion>
                                    <component>jcr</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                                                            <comments>
                            <comment id="13285663" author="reschke" created="Wed, 30 May 2012 13:49:26 +0000"  >&lt;p&gt;The current status of identifier handling is:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;the identifier of nodes that seem to be referenceable (weak node type check...) is the value of their &lt;tt&gt;jcr:uuid&lt;/tt&gt; property&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;otherwise the identifier is the OAK path&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;This means that identifiers of non-referenceable nodes currently are unstable (they change on rename/move) operations, and the &lt;tt&gt;IDENTIFIER_STABILITY&lt;/tt&gt; repository descriptor should reflect that.&lt;/p&gt;

&lt;p&gt;Lookup is done by inspecting the identifier value, and getting the node by OAK path (for identifiers that look like an absolute path), and using a OAK query for the &lt;tt&gt;jcr:uuid&lt;/tt&gt; otherwise.&lt;/p&gt;
</comment>
                            <comment id="13285670" author="reschke" created="Wed, 30 May 2012 13:59:53 +0000"  >&lt;p&gt;We discussed the current handling at the Hamburg Oakathon; in theory it&apos;s desirable to have identifiers that are more stable. One way to achieve this would be to make them relative to the closest referenceable parent node. The downside is that the information needed for this computation may be access-restricted, and thus may not be available to any caller.&lt;/p&gt;

&lt;p&gt;To deal with this we talked about two different approaches:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;Expose OAK nodes in a way that they can be traversed for name resolution even though they may not be readable&lt;/li&gt;
	&lt;li&gt;Push down identifier computation and lookup to oak-core.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;In the end we decided &lt;b&gt;not&lt;/b&gt; to deal with this right now, as it&apos;s not clear that the stability of these identifiers really is a problem. We may have to revisit this if we get to support of multiple workspaces.&lt;/p&gt;</comment>
                            <comment id="13438812" author="mduerig" created="Tue, 21 Aug 2012 15:49:56 +0000"  >&lt;p&gt;In revision 1375620 there is initial support for the &lt;tt&gt;Node.getReferences()&lt;/tt&gt; and &lt;tt&gt;Node.getWeakReferences()&lt;/tt&gt; APIs. &lt;/p&gt;

&lt;p&gt;There is an open question with regard to &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-220&quot; title=&quot;PropertyState can only be accessed from parent tree&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-220&quot;&gt;&lt;del&gt;OAK-220&lt;/del&gt;&lt;/a&gt;: the query only returns nodes. In order to return properties these need to be resolved against their parent which might not be accessible due to permissions. &lt;/p&gt;</comment>
                            <comment id="13438817" author="mduerig" created="Tue, 21 Aug 2012 15:58:44 +0000"  >&lt;p&gt;Fixed at revision 1375620&lt;/p&gt;</comment>
                            <comment id="13438819" author="anchela" created="Tue, 21 Aug 2012 16:03:56 +0000"  >&lt;p&gt;reopening: &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;the mentioned issue with property access&lt;/li&gt;
	&lt;li&gt;identifiers of non-referenceable nodes is still the path instead of&lt;br/&gt;
  the most-stable identifier.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13439318" author="reschke" created="Wed, 22 Aug 2012 06:57:54 +0000"  >&lt;p&gt;Angela:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;not sure what you mean by &quot;issue with property access&quot;&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;why discused the identifiers for non-referenceable nodes in Hamburg; if you feel the outcome is not good enough, I would recommend to open a separate issue for that&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13439338" author="anchela" created="Wed, 22 Aug 2012 07:50:54 +0000"  >&lt;p&gt;i was referring to &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-220&quot; title=&quot;PropertyState can only be accessed from parent tree&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-220&quot;&gt;&lt;del&gt;OAK-220&lt;/del&gt;&lt;/a&gt; as in my option the (weak)reference resolution is&lt;br/&gt;
not correct without having &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-220&quot; title=&quot;PropertyState can only be accessed from parent tree&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-220&quot;&gt;&lt;del&gt;OAK-220&lt;/del&gt;&lt;/a&gt; addressed.&lt;/p&gt;

&lt;p&gt;second: i am fine with the hamburg resolution as a temporary workaround. but&lt;br/&gt;
i don&apos;t want this issue to be resolved as long as this TODO isn&apos;t addressed.&lt;/p&gt;</comment>
                            <comment id="13439342" author="reschke" created="Wed, 22 Aug 2012 08:00:43 +0000"  >&lt;p&gt;The point being that the identifier handling as implemented is per spec (as far as I can tell), it&apos;s just not very useful for non-referenceable nodes.&lt;/p&gt;

&lt;p&gt;If we believe this is insufficient (in which case I&apos;d like to understand why) we should indeed leave this issue open. Otherwise, we should close it and open a new ticket once we decide we need stronger stability for these identifiers.&lt;/p&gt;</comment>
                            <comment id="13439355" author="anchela" created="Wed, 22 Aug 2012 08:24:06 +0000"  >&lt;p&gt;my understand of the discussion in hamburg was that we just use that as&lt;br/&gt;
temporary workaround. imo the &quot;not very useful&quot; identifier is insufficient&lt;br/&gt;
as we rely on a reasonable identifier stability in our products.&lt;/p&gt;

&lt;p&gt;and as i said: i don&apos;t think we can resolve this issue as long as &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-220&quot; title=&quot;PropertyState can only be accessed from parent tree&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-220&quot;&gt;&lt;del&gt;OAK-220&lt;/del&gt;&lt;/a&gt; and &lt;br/&gt;
the query issues are not addressed.&lt;/p&gt;</comment>
                            <comment id="13461795" author="alex.parvulescu" created="Mon, 24 Sep 2012 13:54:14 +0000"  >&lt;p&gt;removed &quot;fix-version: 0.5&quot;&lt;/p&gt;</comment>
                            <comment id="13590737" author="mduerig" created="Fri, 1 Mar 2013 17:22:38 +0000"  >&lt;p&gt;At revision 1446301 I implemented &quot;most stable identifiers&quot; as described in &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-271&quot; title=&quot;make identifiers for non-referenceable nodes more stable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-271&quot;&gt;&lt;del&gt;OAK-271&lt;/del&gt;&lt;/a&gt;. &lt;/p&gt;</comment>
                            <comment id="13595687" author="mduerig" created="Thu, 7 Mar 2013 08:47:15 +0000"  >&lt;p&gt;Patched for tracking referenceable nodes across moves&lt;/p&gt;</comment>
                            <comment id="13595698" author="mduerig" created="Thu, 7 Mar 2013 09:02:08 +0000"  >&lt;p&gt;The main thing left to do on this issue is tracking node instances of referenceable nodes across transient move operations. I implemented 3 variants for doing so:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;Track &lt;b&gt;all&lt;/b&gt; nodes (not only referenceable ones) across moves. See &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-664&quot; title=&quot;Track Tree instance across moves&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-664&quot;&gt;&lt;del&gt;OAK-664&lt;/del&gt;&lt;/a&gt; for a patch. This has the drawback of adding additional complexity in &lt;tt&gt;TreeImpl&lt;/tt&gt;. Also it adds some additional processing overhead since each tree needs to check for - and possibly resolve -  pending moves for all of its ancestors and for itself.&lt;/li&gt;
	&lt;li&gt;Track &lt;b&gt;only referenceable&lt;/b&gt; nodes across moves. This depends on the fix in &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-679&quot; title=&quot;Allow read access to disconnected node builders&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-679&quot;&gt;&lt;del&gt;OAK-679&lt;/del&gt;&lt;/a&gt; since we need to be able to reflect transiently assigned uuids across node instances. See &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-101&quot; title=&quot;implement identifier handling (byUUID, byIdentifier, etc)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-101&quot;&gt;&lt;del&gt;OAK-101&lt;/del&gt;&lt;/a&gt;.patch. This has the drawback of the change in &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-679&quot; title=&quot;Allow read access to disconnected node builders&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-679&quot;&gt;&lt;del&gt;OAK-679&lt;/del&gt;&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-679?focusedCommentId=13595050&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-13595050&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;masking some programming errors &lt;/a&gt;.&lt;/li&gt;
	&lt;li&gt;Track only only referenceable nodes with a *persisted uuid&quot;. See &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-101&quot; title=&quot;implement identifier handling (byUUID, byIdentifier, etc)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-101&quot;&gt;&lt;del&gt;OAK-101&lt;/del&gt;&lt;/a&gt;-1.patch. This causes org.apache.jackrabbit.oak.jcr.MoveTest#testMoveNewReferenceable to fail since only persisted identifiers are tracked.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Given these variants, I&apos;d opt for going with 1) for now. If it turns out that the additional complexity and performance hit can&apos;t be handled we can always revert and use 2) or even 3).&lt;/p&gt;

</comment>
                            <comment id="13595704" author="jukkaz" created="Thu, 7 Mar 2013 09:14:09 +0000"  >&lt;p&gt;I&apos;d go with option 3, as the spec explicitly allows us to do that (identifiers are not required to be stable before save) and it&apos;s the easiest thing to do with the least extra overhead and complexity. Thus in the interest of YAGNI, I&apos;d keep options 1 and 2 as fallbacks in case we run into cases where such tracking of transient moves is indeed needed.&lt;/p&gt;</comment>
                            <comment id="13595708" author="mduerig" created="Thu, 7 Mar 2013 09:22:20 +0000"  >&lt;p&gt;Not sure about YAGNI. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anchela&quot; class=&quot;user-hover&quot; rel=&quot;anchela&quot;&gt;anchela&lt;/a&gt; what was the use case for &lt;tt&gt;org.apache.jackrabbit.oak.jcr.MoveTest#testMoveNewReferenceable&lt;/tt&gt;? Do we need that? Can we live with the modified versions of the test cases in &lt;tt&gt;MoveTest&lt;/tt&gt; in &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-101&quot; title=&quot;implement identifier handling (byUUID, byIdentifier, etc)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-101&quot;&gt;&lt;del&gt;OAK-101&lt;/del&gt;&lt;/a&gt;-1.patch?&lt;/p&gt;</comment>
                            <comment id="13595747" author="anchela" created="Thu, 7 Mar 2013 10:24:52 +0000"  >&lt;p&gt;my preference was 1) as well unless it comes with unbearable drawback.&lt;/p&gt;

&lt;p&gt;regarding the test: i don&apos;t have a concrete use-case behind that test but it&apos;s this kind&lt;br/&gt;
of incompatibilities that will be extremely hard to track. already the most-prominent change&lt;br/&gt;
from jr to oak (non-auto-refresh) was in the end very hard to be identified from a simple&lt;br/&gt;
test-failure. IMO these things are much more cumbersome that it might look like at a first&lt;br/&gt;
glace and for sure much more of a problem than just throwing not-implemented.&lt;/p&gt;

&lt;p&gt;IMO we should do whatever we can with reasonable and justifiable effort to prevent us (and &lt;br/&gt;
anybody else) wasting time running after incompatibilities through the whole stack. &lt;/p&gt;</comment>
                            <comment id="13595822" author="mduerig" created="Thu, 7 Mar 2013 12:37:17 +0000"  >&lt;p&gt;Minimal consensus so far is not to go with 2). I&apos;ll revert the changes in &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-679&quot; title=&quot;Allow read access to disconnected node builders&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-679&quot;&gt;&lt;del&gt;OAK-679&lt;/del&gt;&lt;/a&gt; thus.&lt;/p&gt;</comment>
                            <comment id="13595863" author="reschke" created="Thu, 7 Mar 2013 13:09:54 +0000"  >&lt;p&gt;I sympathize with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anchela&quot; class=&quot;user-hover&quot; rel=&quot;anchela&quot;&gt;anchela&lt;/a&gt;&apos;s point of view. On the other hand, code that fails because of this will fail on other implementations as well, such as SPI-based ones. So maybe it would be actually &lt;b&gt;good&lt;/b&gt; to break this code. &lt;/p&gt;</comment>
                            <comment id="13595934" author="mduerig" created="Thu, 7 Mar 2013 14:46:41 +0000"  >&lt;p&gt;At revision 1453897 I took the liberty to apply the patch for 1) since&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;it has a more uniform way of handling nodes across transient moves,&lt;/li&gt;
	&lt;li&gt;it is backwards compatible with JR2 re. tracking of nodes across transient moves,&lt;/li&gt;
	&lt;li&gt;it is backwards compatible with JR2 re. the time when an identifier is assigned to a referenceable node.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;We can still revisit this decision later on should it become necessary.&lt;/p&gt;</comment>
                            <comment id="13598678" author="alex.parvulescu" created="Mon, 11 Mar 2013 10:06:40 +0000"  >&lt;p&gt;fyi, there&apos;s a warning in the oak-core build due to uncleaned osgi package exports &lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;.&lt;/p&gt;

&lt;p&gt;I see the &lt;em&gt;org.apache.jackrabbit.oak.plugins.identifier&lt;/em&gt; package is empty, so probably removing it both physically and from the osgi exports would be a good idea once the issue is resolved.&lt;/p&gt;


&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;[WARNING] Bundle org.apache.jackrabbit:oak-core:bundle:0.7-SNAPSHOT : Instructions in Export-Package that are never used: org\.apache\.jackrabbit\.oak\.plugins\.identifier
[WARNING] Bundle org.apache.jackrabbit:oak-core:bundle:0.7-SNAPSHOT : Superfluous export-&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; instructions: [org.apache.jackrabbit.oak.plugins.identifier]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13598720" author="mduerig" created="Mon, 11 Mar 2013 11:04:35 +0000"  >&lt;p&gt;I removed the dangling package export at revision 1455091. The identifier package has physically gone in my checkout. &lt;/p&gt;</comment>
                            <comment id="13845466" author="mduerig" created="Wed, 11 Dec 2013 15:11:36 +0000"  >&lt;p&gt;All sub tasks resolved. Resolving thus.&lt;/p&gt;</comment>
                            <comment id="13869471" author="alex.parvulescu" created="Mon, 13 Jan 2014 13:05:52 +0000"  >&lt;p&gt;bulk close for the 0.14 release&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="12601196">OAK-220</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12604066">OAK-261</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12572506" name="OAK-101-1.patch" size="8372" author="mduerig" created="Thu, 7 Mar 2013 08:47:15 +0000"/>
                            <attachment id="12572507" name="OAK-101.patch" size="6290" author="mduerig" created="Thu, 7 Mar 2013 08:47:15 +0000"/>
                    </attachments>
                <subtasks>
                            <subtask id="12604353">OAK-271</subtask>
                            <subtask id="12635812">OAK-685</subtask>
                            <subtask id="12604344">OAK-270</subtask>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>239384</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 44 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i14aan:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>233131</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>