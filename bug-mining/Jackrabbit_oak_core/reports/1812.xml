<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:54:03 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[OAK-8218] ReadOnlyNodeTypeManager.isNodeType prone to NPE</title>
                <link>https://issues.apache.org/jira/browse/OAK-8218</link>
                <project id="12313221" key="OAK">Jackrabbit Oak</project>
                    <description>&lt;p&gt;in the light of &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-8216&quot; title=&quot;Consistently add nullability annotations with spi.nodetype package and implementation&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-8216&quot;&gt;&lt;del&gt;OAK-8216&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-8212&quot; title=&quot;ImporterImpl.importProperties prone to NPE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-8212&quot;&gt;&lt;del&gt;OAK-8212&lt;/del&gt;&lt;/a&gt; i spotted a potential NPE in all variants of &lt;tt&gt;ReadOnlyNodeTypeManager.isNodeType&lt;/tt&gt;: these methods pass the value of &lt;tt&gt;getTypes()&lt;/tt&gt;, which might return &lt;tt&gt;null&lt;/tt&gt;, to &lt;tt&gt;isa(Tree types, String typeName, String superName)&lt;/tt&gt;, which does not check for the &lt;tt&gt;types&lt;/tt&gt; parameter to be &lt;tt&gt;null&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;i checked most extensions of &lt;tt&gt;ReadOnlyNodeTypeManager&lt;/tt&gt; and non of them ever returns &lt;tt&gt;null&lt;/tt&gt; because the usually just retrieve the tree at the node-types paths, which may or may not exist but &lt;tt&gt;Root.getTree&lt;/tt&gt; never returns &lt;tt&gt;null&lt;/tt&gt; (maybe it did in the early days of oak). anyway, this leaves me with the feeling that the &apos;nullable&apos; annotation with &lt;tt&gt;ReadOnlyNodeTypeManager.isNodeType&lt;/tt&gt; is wrong with  and should be &apos;notnull&apos; instead. this would allow to annotate &lt;tt&gt;isa(Tree types, String typeName, String superName)&lt;/tt&gt;&lt;br/&gt;
with notnull and avoid the extra check for null.... but at the end i would also be find with just adding a check for null in the &lt;tt&gt;isa&lt;/tt&gt; method and mark the types param as nullable.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=reschke&quot; class=&quot;user-hover&quot; rel=&quot;reschke&quot;&gt;reschke&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mreutegg&quot; class=&quot;user-hover&quot; rel=&quot;mreutegg&quot;&gt;mreutegg&lt;/a&gt;, since you have been touching the &lt;tt&gt;ReadOnlyNodeTypeManager&lt;/tt&gt; in the past, do you have any preference?&lt;/p&gt;</description>
                <environment></environment>
        <key id="13227205">OAK-8218</key>
            <summary>ReadOnlyNodeTypeManager.isNodeType prone to NPE</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mreutegg">Marcel Reutegger</assignee>
                                    <reporter username="angela">Angela Schreiber</reporter>
                        <labels>
                    </labels>
                <created>Wed, 10 Apr 2019 14:46:19 +0000</created>
                <updated>Tue, 11 Jun 2019 10:51:46 +0000</updated>
                            <resolved>Thu, 11 Apr 2019 09:38:05 +0000</resolved>
                                                    <fixVersion>1.14.0</fixVersion>
                                    <component>authorization-cug</component>
                    <component>core</component>
                    <component>jcr</component>
                    <component>search</component>
                    <component>upgrade</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16814516" author="reschke" created="Wed, 10 Apr 2019 14:53:20 +0000"  >&lt;p&gt;My only activity here was purely mechanical (for &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-7511&quot; title=&quot;get rid of JSR 305 dependency - use jetbrains nullability annotations instead&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-7511&quot;&gt;&lt;del&gt;OAK-7511&lt;/del&gt;&lt;/a&gt;), so I can&apos;t offer any insights...&lt;/p&gt;</comment>
                            <comment id="16814529" author="anchela" created="Wed, 10 Apr 2019 15:09:06 +0000"  >&lt;p&gt;proposed patch with the easy way out: &lt;tt&gt;isa&lt;/tt&gt; deals with types potentially being null.&lt;/p&gt;</comment>
                            <comment id="16815150" author="mreutegg" created="Thu, 11 Apr 2019 07:35:19 +0000"  >&lt;p&gt;I would rather change the contract and of &lt;tt&gt;ReadOnlyNodeTypeManager.getTypes()&lt;/tt&gt; to return a &lt;tt&gt;NotNull&lt;/tt&gt; value. It is in my view the cleaner solution and doesn&apos;t break existing code that still checks for &lt;tt&gt;null&lt;/tt&gt;. Though, client code should be updated as well.&lt;/p&gt;</comment>
                            <comment id="16815192" author="anchela" created="Thu, 11 Apr 2019 08:28:52 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mreutegg&quot; class=&quot;user-hover&quot; rel=&quot;mreutegg&quot;&gt;mreutegg&lt;/a&gt;, fine with me. in the meantime i spotted one usage in &lt;em&gt;oak-search&lt;/em&gt; that might actually return &lt;tt&gt;null&lt;/tt&gt; for &lt;tt&gt;getTypes&lt;/tt&gt;.... but that one could be improved by actually creating a &lt;tt&gt;Root&lt;/tt&gt; from the root-state and then simply calling &lt;tt&gt;Root.getTree&lt;/tt&gt;.... see attached patch &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-8218&quot; title=&quot;ReadOnlyNodeTypeManager.isNodeType prone to NPE&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-8218&quot;&gt;&lt;del&gt;OAK-8218&lt;/del&gt;&lt;/a&gt;-IndexDefinition.patch&lt;/p&gt;</comment>
                            <comment id="16815215" author="mreutegg" created="Thu, 11 Apr 2019 08:48:00 +0000"  >&lt;p&gt;Thanks for the patch.&lt;/p&gt;

&lt;p&gt;The proposed changes, including all dependent modules, are &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12965568/12965568_OAK-8218-2.patch&quot; title=&quot;OAK-8218-2.patch attached to OAK-8218&quot;&gt;OAK-8218-2.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;.&lt;/p&gt;</comment>
                            <comment id="16815257" author="mreutegg" created="Thu, 11 Apr 2019 09:38:05 +0000"  >&lt;p&gt;Applied patch to trunk: &lt;a href=&quot;http://svn.apache.org/r1857304&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1857304&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16860870" author="edivad" created="Tue, 11 Jun 2019 10:51:46 +0000"  >&lt;p&gt;bulk close 1.14.0&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13227123">OAK-8212</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13227202">OAK-8216</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12965568" name="OAK-8218-2.patch" size="11591" author="mreutegg" created="Thu, 11 Apr 2019 08:45:31 +0000"/>
                            <attachment id="12965562" name="OAK-8218-IndexDefinition.patch" size="2308" author="angela" created="Thu, 11 Apr 2019 08:29:03 +0000"/>
                            <attachment id="12965467" name="OAK-8218.patch" size="998" author="angela" created="Wed, 10 Apr 2019 15:08:10 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 22 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z01n6g:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>