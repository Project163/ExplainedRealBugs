<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:53:40 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[OAK-4401] Excerpt Highlighting for a property is not correct </title>
                <link>https://issues.apache.org/jira/browse/OAK-4401</link>
                <project id="12313221" key="OAK">Jackrabbit Oak</project>
                    <description>&lt;p&gt;if we have following text at property &lt;/p&gt;

&lt;p&gt;/jcr:content/text&lt;/p&gt;

&lt;p&gt;===&lt;br/&gt;
A state agency&#8217;s Conflict of Interest Code must reflect the current structure of the organization and properly identify officials andemployees&lt;br/&gt;
=====&lt;/p&gt;

&lt;p&gt;and if rep:excerpt(/jcr:content/text) is been calling after search then &lt;/p&gt;

&lt;p&gt;==============&lt;br/&gt;
&amp;lt;strong&amp;gt;of&amp;lt;/strong&amp;gt;ficials will be in output , which is incorrect.&lt;br/&gt;
==============&lt;/p&gt;</description>
                <environment></environment>
        <key id="12972672">OAK-4401</key>
            <summary>Excerpt Highlighting for a property is not correct </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="catholicon">Vikas Saurabh</assignee>
                                    <reporter username="anagarwa">Ankit Agarwal</reporter>
                        <labels>
                    </labels>
                <created>Wed, 25 May 2016 10:24:22 +0000</created>
                <updated>Tue, 8 Oct 2019 15:21:40 +0000</updated>
                            <resolved>Tue, 16 Jan 2018 22:05:31 +0000</resolved>
                                    <version>1.5.2</version>
                                    <fixVersion>1.9.0</fixVersion>
                    <fixVersion>1.10.0</fixVersion>
                    <fixVersion>1.4.20</fixVersion>
                    <fixVersion>1.8.1</fixVersion>
                    <fixVersion>1.6.9</fixVersion>
                    <fixVersion>1.2.29</fixVersion>
                                    <component>query</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15299828" author="anagarwa" created="Wed, 25 May 2016 10:29:03 +0000"  >&lt;p&gt;this is because in the function at here &lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/jackrabbit-oak/blob/trunk/oak-core/src/main/java/org/apache/jackrabbit/oak/query/fulltext/SimpleExcerptProvider.java#L223&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jackrabbit-oak/blob/trunk/oak-core/src/main/java/org/apache/jackrabbit/oak/query/fulltext/SimpleExcerptProvider.java#L223&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;there must be checked that complete word is being matched before highlighting bits are set. &lt;/p&gt;

&lt;p&gt;cc: &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=amitgupt&quot; class=&quot;user-hover&quot; rel=&quot;amitgupt&quot;&gt;amitgupt&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;thanks,&lt;/p&gt;</comment>
                            <comment id="15299847" author="catholicon" created="Wed, 25 May 2016 10:42:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=teofili&quot; class=&quot;user-hover&quot; rel=&quot;teofili&quot;&gt;teofili&lt;/a&gt;, I wonder if we could utilize excerpt on properties too using lucene&apos;s highlighting!&lt;/p&gt;</comment>
                            <comment id="15299857" author="teofili" created="Wed, 25 May 2016 10:49:34 +0000"  >&lt;p&gt;of course we can, the problem here is that typically you have that:&lt;br/&gt;
1. a query is fired with something like &lt;em&gt;select &lt;span class=&quot;error&quot;&gt;&amp;#91;jcr:path&amp;#93;&lt;/span&gt;,&lt;span class=&quot;error&quot;&gt;&amp;#91;rep:excerpt&amp;#93;&lt;/span&gt; from &lt;span class=&quot;error&quot;&gt;&amp;#91;nt:base&amp;#93;&lt;/span&gt; where ...&lt;/em&gt;&lt;br/&gt;
2. then client code does something like &lt;em&gt;row.getValue(&quot;rep:excerpt(&apos;text&apos;)&quot;);&lt;/em&gt; &lt;br/&gt;
so that at point 1 you don&apos;t know yet on which properties excerpt will be retrieved, potentially requiring to return excerpt for all properties / fields contained in the result set.&lt;br/&gt;
We can find a solution but that&apos;s why that&apos;s not currently supported yet.&lt;/p&gt;</comment>
                            <comment id="15299863" author="catholicon" created="Wed, 25 May 2016 10:54:11 +0000"  >&lt;p&gt;I don&apos;t know excerpt syntax on xpath or sql2 - but I wonder if it&apos;s a valid work-around to have a query to look like&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;select [jcr:path], [rep:excerpt(text)] from [nt:base] where...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If that&apos;s already supported, then I think we should close this specifying the &quot;better&quot; way to use it. WDYT?&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anagarwa&quot; class=&quot;user-hover&quot; rel=&quot;anagarwa&quot;&gt;anagarwa&lt;/a&gt;, would this type of work-around be ok for you?&lt;/p&gt;</comment>
                            <comment id="15299930" author="anagarwa" created="Wed, 25 May 2016 11:49:14 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=catholicon&quot; class=&quot;user-hover&quot; rel=&quot;catholicon&quot;&gt;catholicon&lt;/a&gt; we decide for which property we need excerpts after getting result,  based on result row. So providing relative path in query itself is not possible.&lt;/p&gt;

&lt;p&gt;thanks,&lt;/p&gt;</comment>
                            <comment id="15300190" author="anagarwa" created="Wed, 25 May 2016 15:09:06 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=teofili&quot; class=&quot;user-hover&quot; rel=&quot;teofili&quot;&gt;teofili&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=catholicon&quot; class=&quot;user-hover&quot; rel=&quot;catholicon&quot;&gt;catholicon&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Attaching Patch file with additional TestCase which IMO should fix the bug. &lt;br/&gt;
Also if we all agree that highlighting &quot;of&quot; from word &quot;official&quot; (&quot;&amp;lt;strong&amp;gt;of&amp;lt;/strong&amp;gt;ficial&quot;) is incorrect then test case mentioned at &lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; will be incorrect. &lt;br/&gt;
Could not create pull req as this test case at &lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; is failing after the changes&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/apache/jackrabbit-oak/blob/ca05fd06f97e4ea2be08b58204c3be060d71e7f0/oak-core/src/test/java/org/apache/jackrabbit/oak/query/fulltext/SimpleExcerptProviderTest.java#L54&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jackrabbit-oak/blob/ca05fd06f97e4ea2be08b58204c3be060d71e7f0/oak-core/src/test/java/org/apache/jackrabbit/oak/query/fulltext/SimpleExcerptProviderTest.java#L54&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;cc; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=amitgupt&quot; class=&quot;user-hover&quot; rel=&quot;amitgupt&quot;&gt;amitgupt&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16327889" author="catholicon" created="Tue, 16 Jan 2018 22:05:31 +0000"  >&lt;p&gt;Fixed on trunk at &lt;a href=&quot;https://svn.apache.org/r1821325&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1821325&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thomasm&quot; class=&quot;user-hover&quot; rel=&quot;thomasm&quot;&gt;thomasm&lt;/a&gt;, can you please take a quick look. I would backport to 1.8 branch after you review it.&lt;/p&gt;</comment>
                            <comment id="16328702" author="teofili" created="Wed, 17 Jan 2018 12:49:19 +0000"  >&lt;p&gt;+1 LGTM&lt;/p&gt;</comment>
                            <comment id="16330388" author="catholicon" created="Thu, 18 Jan 2018 11:09:08 +0000"  >&lt;p&gt;Talked to &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thomasm&quot; class=&quot;user-hover&quot; rel=&quot;thomasm&quot;&gt;thomasm&lt;/a&gt; offline and we discussed that we should expand delimeters beyond just whitespaces. It seemed we can utilize &lt;tt&gt;getType(int)&lt;/tt&gt; [0] and consider all non-LETTERS and non-NUMBERS as delimeters.&lt;/p&gt;

&lt;p&gt;[0]: &lt;a href=&quot;https://docs.oracle.com/javase/7/docs/api/java/lang/Character.html#getType(int&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://docs.oracle.com/javase/7/docs/api/java/lang/Character.html#getType(int&lt;/a&gt;)&lt;/p&gt;</comment>
                            <comment id="16330663" author="catholicon" created="Thu, 18 Jan 2018 15:54:23 +0000"  >&lt;p&gt;Updated earlier impl in trunk at &lt;a href=&quot;https://svn.apache.org/r1821516&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1821516&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Backported to 1.8 branch in &lt;a href=&quot;https://svn.apache.org/r1821521&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1821521&lt;/a&gt;.&lt;br/&gt;
Backported to 1.6 branch in &lt;a href=&quot;https://svn.apache.org/r1822592&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1822592&lt;/a&gt;.&lt;br/&gt;
Backported to 1.4 branch in &lt;a href=&quot;https://svn.apache.org/r1822593&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1822593&lt;/a&gt;.&lt;br/&gt;
Backported to 1.2 branch in &lt;a href=&quot;https://svn.apache.org/r1822594&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1822594&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;So, trunk (&lt;a href=&quot;https://svn.apache.org/r1821325&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1821325&lt;/a&gt;, &lt;a href=&quot;https://svn.apache.org/r1821516&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1821516&lt;/a&gt;), 1.8 (&lt;a href=&quot;https://svn.apache.org/r1821521&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1821521&lt;/a&gt;, 1.6 (&lt;a href=&quot;https://svn.apache.org/r1822592&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1822592&lt;/a&gt;), 1.4 (&lt;a href=&quot;https://svn.apache.org/r1822593&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1822593&lt;/a&gt;), 1.2 (&lt;a href=&quot;https://svn.apache.org/r1822594&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1822594&lt;/a&gt;))&lt;/p&gt;</comment>
                            <comment id="16340859" author="edivad" created="Fri, 26 Jan 2018 10:15:30 +0000"  >&lt;p&gt;Bulk close 1.8.1&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12910051">OAK-3580</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310040">
                    <name>Required</name>
                                                                <inwardlinks description="is required by">
                                        <issuelink>
            <issuekey id="13130791">OAK-7151</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12806141" name="0001-OAK-4401-Excerpt-Highlighting-for-a-property-is-not-.patch" size="4000" author="anagarwa" created="Wed, 25 May 2016 15:09:06 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 42 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2yh1b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>