<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:48:39 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[OAK-3234] LIRS cache: possible deadlock while loading an entry</title>
                <link>https://issues.apache.org/jira/browse/OAK-3234</link>
                <project id="12313221" key="OAK">Jackrabbit Oak</project>
                    <description>&lt;p&gt;If multiple threads concurrently load entries while they are already loading entries (using a cache loader or callable), then it is possible to get into a deadlock. For example:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Thread 1 loads entry A, so it is calling the loader...&lt;/li&gt;
	&lt;li&gt;Thread 2 loads entry B, so it is calling the loader...&lt;/li&gt;
	&lt;li&gt;Thread 1 (within the loader) tries to load entry B, so it waits for thread 2...&lt;/li&gt;
	&lt;li&gt;Thread 2 (within the loader) tries to load entry A, so it waits for thread 1...&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;One solution is to detect the case that the current thread is already loading an entry, and then instead of waiting for the other thread, it can also load the entry. A small optimization for that is to only load the entry (not waiting for the other thread) if the hash code of the key is smaller or equal the entry that this thread is loading. So that there is a clear order.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12856165">OAK-3234</key>
            <summary>LIRS cache: possible deadlock while loading an entry</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="thomasm">Thomas Mueller</assignee>
                                    <reporter username="thomasm">Thomas Mueller</reporter>
                        <labels>
                    </labels>
                <created>Fri, 14 Aug 2015 13:55:54 +0000</created>
                <updated>Tue, 16 Feb 2021 09:53:08 +0000</updated>
                            <resolved>Fri, 14 Aug 2015 14:01:51 +0000</resolved>
                                                    <fixVersion>1.3.4</fixVersion>
                    <fixVersion>1.4</fixVersion>
                                    <component>core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14697052" author="tmueller" created="Fri, 14 Aug 2015 14:01:51 +0000"  >&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/r1695917&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1695917&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14706652" author="edivad" created="Fri, 21 Aug 2015 12:13:06 +0000"  >&lt;p&gt;Bulk close for 1.3.4&lt;/p&gt;</comment>
                            <comment id="15163031" author="tomek.rekawek" created="Wed, 24 Feb 2016 14:04:08 +0000"  >&lt;p&gt;Attached patch backported for 1.0 and 1.2. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thomasm&quot; class=&quot;user-hover&quot; rel=&quot;thomasm&quot;&gt;thomasm&lt;/a&gt;, could you apply it? There are Oak 1.0 customers suffering from this deadlock.&lt;/p&gt;</comment>
                            <comment id="15163065" author="alex.parvulescu" created="Wed, 24 Feb 2016 14:27:28 +0000"  >&lt;p&gt;FWIW we don&apos;t usually apply backported patches on branches, we do &lt;tt&gt;svn merge&lt;/tt&gt; on the trunk commits so the svn history is clearer.&lt;/p&gt;</comment>
                            <comment id="15163184" author="tomek.rekawek" created="Wed, 24 Feb 2016 15:26:44 +0000"  >&lt;p&gt;Thanks Alex, I didn&apos;t know this. For me (as a non-committer) preparing such patch aligned to the historic branches is all I can do &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12789564" name="OAK-3234-backported.patch" size="3719" author="tomek.rekawek" created="Wed, 24 Feb 2016 14:03:52 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 38 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ixgf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>