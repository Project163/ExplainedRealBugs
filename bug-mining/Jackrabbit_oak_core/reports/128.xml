<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:35:49 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[OAK-403] PropertyIndexLookup does not find indexes</title>
                <link>https://issues.apache.org/jira/browse/OAK-403</link>
                <project id="12313221" key="OAK">Jackrabbit Oak</project>
                    <description>&lt;p&gt;The PropertyIndexLookup tries to locate the index by child node name instead of matching the name of the property with the values of the &apos;propertyNames&apos; property on the index node.&lt;/p&gt;

&lt;p&gt;In addition the paths returned by the find() method are not absolute. This will result in an IllegalArgumentException when the path is turned into a Tree.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12613486">OAK-403</key>
            <summary>PropertyIndexLookup does not find indexes</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mreutegg">Marcel Reutegger</assignee>
                                    <reporter username="mreutegg">Marcel Reutegger</reporter>
                        <labels>
                    </labels>
                <created>Thu, 25 Oct 2012 13:38:44 +0000</created>
                <updated>Mon, 6 May 2013 15:49:13 +0000</updated>
                            <resolved>Tue, 30 Oct 2012 13:28:31 +0000</resolved>
                                    <version>0.5</version>
                                    <fixVersion>0.6</fixVersion>
                                    <component>core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13486019" author="mreutegg" created="Mon, 29 Oct 2012 13:54:50 +0000"  >&lt;p&gt;Attached patch is a work in progress.&lt;/p&gt;

&lt;p&gt;Tests pass, except for some order by related tests in the JCR TCK.&lt;/p&gt;</comment>
                            <comment id="13486712" author="mreutegg" created="Tue, 30 Oct 2012 07:44:34 +0000"  >&lt;p&gt;All tests pass with this updated patch.&lt;/p&gt;</comment>
                            <comment id="13486738" author="jukkaz" created="Tue, 30 Oct 2012 08:34:32 +0000"  >&lt;p&gt;+1 Though it would be good if the &lt;tt&gt;getIndexDefinitionNode&lt;/tt&gt; code could somehow be shared between the indexing and the lookup code.&lt;/p&gt;

&lt;p&gt;And somewhat outside the scope of this issue, I&apos;m not sure why the &lt;tt&gt;find()&lt;/tt&gt; method skips multi-valued properties when the else clause already handles also that case. Same for the TODO on mvp.&lt;/p&gt;</comment>
                            <comment id="13486739" author="jukkaz" created="Tue, 30 Oct 2012 08:36:29 +0000"  >&lt;p&gt;Also, do we need the &lt;tt&gt;reindex = true&lt;/tt&gt; settings in the initial content? The indexing hook should (or at least could) be smart enough to automatically trigger initial indexing when a new index definition is added.&lt;/p&gt;</comment>
                            <comment id="13486758" author="alex.parvulescu" created="Tue, 30 Oct 2012 09:12:11 +0000"  >&lt;p&gt;&amp;gt; do we need the reindex = true settings in the initial content?&lt;br/&gt;
I think the problem is the index def is added on the initial content at a moment when there are no IndexHooks available yet. I think it&apos;s safer to mark as &apos;reindex required&apos; to go around this initialization issue.&lt;/p&gt;

&lt;p&gt;&amp;gt; The indexing hook should (or at least could) be smart enough to automatically trigger initial indexing when a new index definition is added.&lt;br/&gt;
It already does that (by marking the reindex=true on the new definitions so they can be picked-up for reindexing), but this does not cover the small window at startup when there are no OndexHoosk available yet (see above).&lt;/p&gt;</comment>
                            <comment id="13486763" author="jukkaz" created="Tue, 30 Oct 2012 09:22:33 +0000"  >&lt;blockquote&gt;&lt;p&gt;I think the problem is the index def is added on the initial content at a moment when there are no IndexHooks available yet.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Good point. Sounds like we should have the indexing hook in place already before initial content gets installed. I&apos;ll follow up in a separate issue.&lt;/p&gt;</comment>
                            <comment id="13486772" author="alex.parvulescu" created="Tue, 30 Oct 2012 09:52:59 +0000"  >&lt;p&gt;bq And somewhat outside the scope of this issue, I&apos;m not sure why the find() method skips multi-valued properties when the else clause already handles also that case. Same for the TODO on mvp.&lt;/p&gt;

&lt;p&gt;Isn&apos;t that one and the same issue? &lt;br/&gt;
I see the TODO on the find() about mvps and it can effectively be removed by aggregating the results, so I&apos;ll do that.&lt;br/&gt;
Where is the second one about skipping multi-valued properties?&lt;/p&gt;</comment>
                            <comment id="13486779" author="alex.parvulescu" created="Tue, 30 Oct 2012 10:19:20 +0000"  >&lt;p&gt;committed with rev 1403651.&lt;/p&gt;

&lt;p&gt;I&apos;ll still leave the issue open for a bit to clarify if we can tackle the mvn thing.&lt;/p&gt;</comment>
                            <comment id="13486834" author="mreutegg" created="Tue, 30 Oct 2012 12:34:55 +0000"  >&lt;p&gt;I&apos;d rather close this issue and create a new one about the multi-valued property thing.&lt;/p&gt;

&lt;p&gt;We are already mixing various issues here...&lt;/p&gt;</comment>
                            <comment id="13486860" author="alex.parvulescu" created="Tue, 30 Oct 2012 13:28:31 +0000"  >&lt;p&gt;agreed. marking as resolved.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12551317" name="OAK-403.patch" size="8694" author="mreutegg" created="Tue, 30 Oct 2012 07:44:34 +0000"/>
                            <attachment id="12551188" name="OAK-403.patch" size="6625" author="mreutegg" created="Mon, 29 Oct 2012 13:54:50 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>251024</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 3 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0b3bz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>62652</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>