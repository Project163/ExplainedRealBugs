<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:35:00 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[OAK-221] Clarify nature of &apos;path&apos; parameter in oak-api</title>
                <link>https://issues.apache.org/jira/browse/OAK-221</link>
                <project id="12313221" key="OAK">Jackrabbit Oak</project>
                    <description>&lt;p&gt;imo the oak-api should be more specific about the nature of the&lt;br/&gt;
path parameter that is passed to methods like Root#getTree, #move, #copy&lt;br/&gt;
and that is returned by methods like Tree#getPath.&lt;/p&gt;

&lt;p&gt;The api documentation consistently states that those paths are &quot;relative to&lt;br/&gt;
the &apos;root&apos; but when looking at the code i rather get the impression that&lt;br/&gt;
they are absolute paths such as defined by the JCR API.&lt;/p&gt;

&lt;p&gt;for example:&lt;br/&gt;
SessionDelegate#getNode(String path) just passes the path to the oak-api&lt;br/&gt;
without making it &apos;relative to the root&apos;. &lt;br/&gt;
on the other hand SessionDelegate#getRoot() passes an &quot;&quot;-path to Root#getTree.&lt;/p&gt;

&lt;p&gt;another example:&lt;br/&gt;
SessionDelegate#getNodeByIdentifier starts like follows:&lt;/p&gt;

&lt;p&gt;  if (id.startsWith(&quot;/&quot;)) {&lt;br/&gt;
     Tree tree = getTree(id);&lt;br/&gt;
     &lt;span class=&quot;error&quot;&gt;&amp;#91;...&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;so, again the absolute jcr path is passed into the oak-api.&lt;/p&gt;

&lt;p&gt;requested action:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;clarify oak-api&lt;/li&gt;
	&lt;li&gt;check all usages of oak-api and make api calls consistent&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="12601207">OAK-221</key>
            <summary>Clarify nature of &apos;path&apos; parameter in oak-api</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mduerig">Michael D&#252;rig</assignee>
                                    <reporter username="angela">Angela Schreiber</reporter>
                        <labels>
                    </labels>
                <created>Thu, 2 Aug 2012 11:45:46 +0000</created>
                <updated>Mon, 1 Oct 2012 11:40:44 +0000</updated>
                            <resolved>Mon, 20 Aug 2012 13:40:07 +0000</resolved>
                                                    <fixVersion>0.5</fixVersion>
                                    <component>core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                                                            <comments>
                            <comment id="13427324" author="anchela" created="Thu, 2 Aug 2012 13:53:39 +0000"  >&lt;p&gt;one more example that confused me:&lt;/p&gt;

&lt;p&gt;NamePathMapperImpl#getOakPath(String jcrPath) contains the following shortcut:&lt;/p&gt;

&lt;p&gt;  if (&quot;/&quot;.equals(jcrPath)) &lt;/p&gt;
{
     // avoid the need to special case the root path later on
     return &quot;/&quot;;
  }

&lt;p&gt;IMO that doesn&apos;t match the path exposed on Tree#getPath for the root node and&lt;br/&gt;
the example mentioned above where &quot;&quot; is used as path to access the root tree.&lt;/p&gt;</comment>
                            <comment id="13427382" author="anchela" created="Thu, 2 Aug 2012 15:21:40 +0000"  >&lt;p&gt;and again:&lt;/p&gt;

&lt;p&gt;the RootImplTest always uses &quot;/&quot; to access the tree associated with the root node, while the path&lt;br/&gt;
exposed by the corresponding Tree-object then reveals &quot;&quot;.&lt;/p&gt;</comment>
                            <comment id="13431705" author="anchela" created="Thu, 9 Aug 2012 09:24:12 +0000"  >&lt;p&gt;similarly in NodeTypeManagerImpl (couldn&apos;t create subtask due runtimeexception in jira):&lt;/p&gt;

&lt;p&gt;Tree system = root.getTree(&quot;/jcr:system&quot;);&lt;br/&gt;
            if (system == null) &lt;/p&gt;
{
                system = root.getTree(&quot;/&quot;).addChild(JCR_SYSTEM);
            }</comment>
                            <comment id="13435257" author="mduerig" created="Wed, 15 Aug 2012 16:24:21 +0000"  >&lt;p&gt;OAK API paths currently behave as follows:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Paths are always absolute. There is no notion of relative paths&lt;/li&gt;
	&lt;li&gt;A path is a string consisting of names separated by forward slashes&lt;/li&gt;
	&lt;li&gt;The root path is denoted by the empty string&lt;/li&gt;
	&lt;li&gt;A single leading slash is ignored&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;This was documented once in my initial path mapper implementation but must have gotten lost in the process of re-factoring. &lt;/p&gt;



</comment>
                            <comment id="13435269" author="anchela" created="Wed, 15 Aug 2012 16:35:57 +0000"  >&lt;p&gt;ok... i don&apos;t have any strong feelings regarding absolute or not.&lt;br/&gt;
but i do think it is important to have it consistent throughout the&lt;br/&gt;
code base, in particular as it grows quite fast. since Tree#getPath doesn&apos;t &lt;br/&gt;
return an absolute path i thought this was the way to go and started to&lt;br/&gt;
use non-absolute path all over the place... let&apos;s make an effort to&lt;br/&gt;
clean that up next week during the oakathon.&lt;/p&gt;</comment>
                            <comment id="13435295" author="mduerig" created="Wed, 15 Aug 2012 16:56:41 +0000"  >&lt;p&gt;To clarify further: &lt;tt&gt;Tree.getPath()&lt;/tt&gt; returns an absolute path (All paths are absolute in oak-core). The leading slash is just not significant and left out so it &lt;b&gt;looks&lt;/b&gt; like a relative path. I agree that this is confusing and we should clean it up. Best thing to do IMO is to require all paths in oak-core to start with a slash and update all relevant code accordingly. &lt;/p&gt;</comment>
                            <comment id="13437858" author="mduerig" created="Mon, 20 Aug 2012 13:40:07 +0000"  >&lt;p&gt;Fixed at revision 1373889&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                            <subtask id="12601319">OAK-228</subtask>
                            <subtask id="12601320">OAK-229</subtask>
                            <subtask id="12601321">OAK-230</subtask>
                            <subtask id="12603612">OAK-248</subtask>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>294795</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 13 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0yl5z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>199899</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>