<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:38:45 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[OAK-212] Tree#getPropertyStatus requires tree to exist</title>
                <link>https://issues.apache.org/jira/browse/OAK-212</link>
                <project id="12313221" key="OAK">Jackrabbit Oak</project>
                    <description>&lt;p&gt;Currently the status of a property is retrieved from the parent tree object.&lt;br/&gt;
With access control being enforced a property may be accessible even if the&lt;br/&gt;
parent tree isn&apos;t.&lt;/p&gt;

&lt;p&gt;IMO the status should therefore be retrieved from the PropertyState instead&lt;br/&gt;
of calling Tree#getPropertyStatus.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12600833">OAK-212</key>
            <summary>Tree#getPropertyStatus requires tree to exist</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="angela">Angela Schreiber</reporter>
                        <labels>
                    </labels>
                <created>Tue, 31 Jul 2012 12:51:20 +0000</created>
                <updated>Fri, 20 Sep 2013 07:01:40 +0000</updated>
                            <resolved>Fri, 26 Jul 2013 14:53:13 +0000</resolved>
                                                    <fixVersion>0.9</fixVersion>
                                    <component>core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="13427171" author="jukkaz" created="Thu, 2 Aug 2012 08:27:59 +0000"  >&lt;blockquote&gt;&lt;p&gt;a property may be accessible even if the parent tree isn&apos;t&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Is this a real use case, i.e. does anyone use such access control settings in practice? If not, I think we should explicitly declare that in Oak properties can not be accessed without access to the containing node.&lt;/p&gt;

&lt;p&gt;The rationale is that for simplicity, performance and memory reasons it would be better if we didn&apos;t have to track each property as a standalone object with its own state. Instead it should be possible to reuse common PropertyState instances like &quot;jcr:primaryType=nt:resource&quot;.&lt;/p&gt;</comment>
                            <comment id="13427898" author="anchela" created="Fri, 3 Aug 2012 08:05:08 +0000"  >&lt;p&gt;i don&apos;t know how common this is as a use case but i am concerned about breaking backwards&lt;br/&gt;
compatibility in this respect because this was something that cannot be fixed once&lt;br/&gt;
the oak-api is finalized.&lt;/p&gt;

&lt;p&gt;as discussed offline i can live with the property &lt;b&gt;status&lt;/b&gt; being undetermined or not perfectly&lt;br/&gt;
reliable in these cases but looking at the current code i have the impression that this not&lt;br/&gt;
only affects the status of the property but also&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;access a single property (&lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-220&quot; title=&quot;PropertyState can only be accessed from parent tree&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-220&quot;&gt;&lt;del&gt;OAK-220&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-218&quot; title=&quot;Session methods rely on accessibility of root node&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-218&quot;&gt;&lt;del&gt;OAK-218&lt;/del&gt;&lt;/a&gt;)&lt;/li&gt;
	&lt;li&gt;retrieving the path of a property (&lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-226&quot; title=&quot;Property#getPath() relies on accessibility of the parent node&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-226&quot;&gt;&lt;del&gt;OAK-226&lt;/del&gt;&lt;/a&gt;)&lt;/li&gt;
	&lt;li&gt;retrieving the parent of a property (&lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-214&quot; title=&quot;PropertyImpl#getParent violates JCR API&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-214&quot;&gt;&lt;del&gt;OAK-214&lt;/del&gt;&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;imo these issues all fall back to the fact that oak-api mandates that a property is&lt;br/&gt;
only accessed from the parent node and that parent node is accessible if the property is.&lt;/p&gt;</comment>
                            <comment id="13427982" author="jukkaz" created="Fri, 3 Aug 2012 10:43:07 +0000"  >&lt;p&gt;I think we could even come up with some way to track the status of such properties. However, just like we don&apos;t have a &lt;tt&gt;setValue()&lt;/tt&gt; method on &lt;tt&gt;PropertyState&lt;/tt&gt; (the instances are supposed to be immutable), the status of a property shouldn&apos;t be available from the &lt;tt&gt;PropertyState&lt;/tt&gt; instance itself.&lt;/p&gt;

&lt;p&gt;Instead, for handling cases like &lt;tt&gt;session.getProperty(&quot;/path/to/property&quot;)&lt;/tt&gt; when faced with such access controls we might need methods like &lt;tt&gt;Root.getProperty(String path)&lt;/tt&gt;, &lt;tt&gt;Root.setProperty(String path, ...)&lt;/tt&gt; and &lt;tt&gt;Root.getPropertyStatus(String path)&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;Normal cases where a property is accessed with &lt;tt&gt;node.getProperty(&quot;property&quot;)&lt;/tt&gt; should ideally still use the already existing property access methods on &lt;tt&gt;Tree&lt;/tt&gt; to avoid the extra path lookups on each access.&lt;/p&gt;</comment>
                            <comment id="13431087" author="anchela" created="Wed, 8 Aug 2012 12:42:32 +0000"  >&lt;p&gt;that&apos;s fine with me... from an API point of view i would rather prefer if&lt;br/&gt;
there was just a single way of getting the status, etc.... maybe just &lt;br/&gt;
for the sake of simplicity or beauty, don&apos;t know exactly &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;would you mind adding those?&lt;br/&gt;
and while we are at it: what about the property path?&lt;/p&gt;</comment>
                            <comment id="13441245" author="mduerig" created="Fri, 24 Aug 2012 15:26:31 +0000"  >&lt;p&gt;This should be solvable/fixed with &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-275&quot; title=&quot;Introduce TreeLocation interface&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-275&quot;&gt;&lt;del&gt;OAK-275&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13720821" author="anchela" created="Fri, 26 Jul 2013 14:15:26 +0000"  >&lt;p&gt;just create a quick test and it seems that this is not yet fixed. the culprit seems to be the check for existence of the parent tree while calling getStatus().&lt;/p&gt;

&lt;p&gt;the proposed patch (see attachement) seems to solve the issue with the property status (test on JCR API and on OAK API), but causes an observation event to fail: &lt;/p&gt;

&lt;p&gt;Failed tests:   observation2&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;(org.apache.jackrabbit.oak.jcr.observation.ObservationTest): Unexpected events: &lt;span class=&quot;error&quot;&gt;&amp;#91;EventImpl{type=2, jcrPath=&amp;#39;/test_node/n2&amp;#39;, userID=&amp;#39;oak:unknown&amp;#39;, identifier=&amp;#39;/test_node/n2&amp;#39;, info={}, date=0, userData=null, external=true}, EventImpl{type=8, jcrPath=&amp;#39;/test_node/n2/jcr:primaryType&amp;#39;, userID=&amp;#39;oak:unknown&amp;#39;, identifier=&amp;#39;/test_node/n2&amp;#39;, info={}, date=0, userData=null, external=true}, EventImpl{type=1, jcrPath=&amp;#39;/test_node/n1&amp;#39;, userID=&amp;#39;oak:unknown&amp;#39;, identifier=&amp;#39;/test_node/n1&amp;#39;, info={}, date=0, userData=null, external=true}, EventImpl{type=4, jcrPath=&amp;#39;/test_node/n1/jcr:primaryType&amp;#39;, userID=&amp;#39;oak:unknown&amp;#39;, identifier=&amp;#39;/test_node/n1&amp;#39;, info={}, date=0, userData=null, external=true}, EventImpl{type=2, jcrPath=&amp;#39;/test_node/n1&amp;#39;, userID=&amp;#39;admin&amp;#39;, identifier=&amp;#39;/test_node/n1&amp;#39;, info={}, date=1374847713707, userData=null, external=false}, EventImpl{type=8, jcrPath=&amp;#39;/test_node/n1/jcr:primaryType&amp;#39;, userID=&amp;#39;admin&amp;#39;, identifier=&amp;#39;/test_node/n1&amp;#39;, info={}, date=1374847713707, userData=null, external=false}, EventImpl{type=1, jcrPath=&amp;#39;/test_node/n2&amp;#39;, userID=&amp;#39;admin&amp;#39;, identifier=&amp;#39;/test_node/n2&amp;#39;, info={}, date=1374847713707, userData=null, external=false}, EventImpl{type=4, jcrPath=&amp;#39;/test_node/n2/jcr:primaryType&amp;#39;, userID=&amp;#39;admin&amp;#39;, identifier=&amp;#39;/test_node/n2&amp;#39;, info={}, date=1374847713707, userData=null, external=false}&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mduerig&quot; class=&quot;user-hover&quot; rel=&quot;mduerig&quot;&gt;mduerig&lt;/a&gt;, i would be glad if you could take a look... &lt;/p&gt;
</comment>
                            <comment id="13720834" author="anchela" created="Fri, 26 Jul 2013 14:31:42 +0000"  >&lt;p&gt;adjusted subject as with the introduction of Tree#exists we can leave the #getPropertyStatus on the Tree interface&lt;br/&gt;
but just have to fix the implementation.&lt;/p&gt;</comment>
                            <comment id="13720850" author="anchela" created="Fri, 26 Jul 2013 14:53:05 +0000"  >&lt;p&gt;hm... worked for michi and i can&apos;t reproduce the failure.&lt;br/&gt;
committed fix at revision 1507339&lt;/p&gt;</comment>
                            <comment id="13720861" author="mduerig" created="Fri, 26 Jul 2013 15:02:07 +0000"  >&lt;blockquote&gt;&lt;p&gt;Failed tests: observation2&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;...&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Might be a transient issue due to timing in the test expectations. Let&apos;s keep an eye open for such failures. &lt;/p&gt;</comment>
                            <comment id="13772781" author="alex.parvulescu" created="Fri, 20 Sep 2013 07:01:40 +0000"  >&lt;p&gt;Bulk close for the 0.9 release&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12601196">OAK-220</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12594402" name="OAK-212.patch" size="5568" author="angela" created="Fri, 26 Jul 2013 14:16:01 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>296573</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 9 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i14aaf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>233130</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>