<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:49:27 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[OAK-1648] Creating multiple checkpoint on same head revision overwrites previous entries</title>
                <link>https://issues.apache.org/jira/browse/OAK-1648</link>
                <project id="12313221" key="OAK">Jackrabbit Oak</project>
                    <description>&lt;p&gt;Currently when a checkpoint is created in DocumentNodeStore then it is saved in form of currentHeadRev=&amp;gt;expiryTime. Now if multiple checkpoints are created where head revision has not changed then only the last one would be saved and previous entries would be overridden as revision is used as key&lt;/p&gt;

&lt;p&gt;One fix would be to change the expiry time only if the new expiry time is greater than previous entry. However doing that safely in a cluster (check then save) is currently not possible with DocumentStore API as the modCount check if only supported for Nodes.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12705591">OAK-1648</key>
            <summary>Creating multiple checkpoint on same head revision overwrites previous entries</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mreutegg">Marcel Reutegger</assignee>
                                    <reporter username="chetanm">Chetan Mehrotra</reporter>
                        <labels>
                            <label>resilience</label>
                    </labels>
                <created>Mon, 31 Mar 2014 07:13:16 +0000</created>
                <updated>Mon, 4 Jul 2016 13:34:40 +0000</updated>
                            <resolved>Wed, 7 Oct 2015 16:13:33 +0000</resolved>
                                                    <fixVersion>1.0.32</fixVersion>
                    <fixVersion>1.2.10</fixVersion>
                    <fixVersion>1.3.8</fixVersion>
                    <fixVersion>1.4</fixVersion>
                                    <component>mongomk</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14362892" author="mreutegg" created="Mon, 16 Mar 2015 07:41:23 +0000"  >&lt;p&gt;Moved to 1.3 because this is only a minor issue and we currently only have a single client for the checkpoint functionality. The async index update always created a checkpoint with a fixed time-to-live.&lt;/p&gt;

&lt;p&gt;An optimistic update in a cluster is still possible, even without the _modCount. The update would simply include a check on the expiryTime.&lt;/p&gt;</comment>
                            <comment id="14576953" author="edivad" created="Mon, 8 Jun 2015 09:48:48 +0000"  >&lt;p&gt;Bulk move to 1.3.1&lt;/p&gt;</comment>
                            <comment id="14595696" author="edivad" created="Mon, 22 Jun 2015 09:47:15 +0000"  >&lt;p&gt;Bulk move to 1.3.2&lt;/p&gt;</comment>
                            <comment id="14610091" author="edivad" created="Wed, 1 Jul 2015 13:05:08 +0000"  >&lt;p&gt;Bulk move to 1.3.3.&lt;/p&gt;</comment>
                            <comment id="14633300" author="edivad" created="Mon, 20 Jul 2015 10:04:56 +0000"  >&lt;p&gt;Bulk move to 1.3.4&lt;/p&gt;</comment>
                            <comment id="14947115" author="mreutegg" created="Wed, 7 Oct 2015 16:13:33 +0000"  >&lt;p&gt;Fixed in trunk: &lt;a href=&quot;http://svn.apache.org/r1707331&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1707331&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Changed the return value of the checkpoint() method within the bounds of the contract. Previously the method returned the exact head revision as currently set in the DocumentNodeStore. Now the method returns a unique revision which represents a state of the repository between the time when the method was called and when it returns.&lt;/p&gt;</comment>
                            <comment id="14958654" author="edivad" created="Thu, 15 Oct 2015 10:11:25 +0000"  >&lt;p&gt;Bulk close for 1.3.8&lt;/p&gt;</comment>
                            <comment id="15105311" author="mreutegg" created="Mon, 18 Jan 2016 13:59:12 +0000"  >&lt;p&gt;Merged into 1.2 branch: &lt;a href=&quot;http://svn.apache.org/r1725274&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1725274&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15361324" author="chetanm" created="Mon, 4 Jul 2016 13:34:40 +0000"  >&lt;p&gt;Merged to 1.0 with 1751284. This was required for tests of &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-3436&quot; title=&quot;Prevent missing checkpoint due to unstable topology from causing complete reindexing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-3436&quot;&gt;&lt;del&gt;OAK-3436&lt;/del&gt;&lt;/a&gt; to pass on Mongo&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12895331">OAK-3436</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311120" key="com.pyxis.greenhopper.jira:gh-epic-link">
                        <customfieldname>Epic Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>OAK-3270</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>383920</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 19 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1u53z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>384188</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>