<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:44:42 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[OAK-1903] PropertyIndex applies 10x penalty to is not null queries even when the node count is known</title>
                <link>https://issues.apache.org/jira/browse/OAK-1903</link>
                <project id="12313221" key="OAK">Jackrabbit Oak</project>
                    <description>&lt;p&gt;ContentMirrorStoreStrategy has a bit of code which multiples the cost of a &quot;is not null&quot; query by 10. This code was added in r1501746, but there&apos;s nothing in the related JIRA (&lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-894&quot; title=&quot;Query: better cost estimates for indexes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-894&quot;&gt;&lt;del&gt;OAK-894&lt;/del&gt;&lt;/a&gt;) which mentions this change.&lt;/p&gt;

&lt;p&gt;It appears to me that this multiplier should only take effect &lt;b&gt;if&lt;/b&gt; the maximum node count has been reached. Otherwise, this code vastly overstates the cost of a query.&lt;/p&gt;

&lt;p&gt;In a recent test, a property on 45 nodes generated a cost of 452.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12722390">OAK-1903</key>
            <summary>PropertyIndex applies 10x penalty to is not null queries even when the node count is known</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="thomasm">Thomas Mueller</assignee>
                                    <reporter username="justinedelson">Justin Edelson</reporter>
                        <labels>
                    </labels>
                <created>Thu, 19 Jun 2014 00:55:38 +0000</created>
                <updated>Tue, 8 Oct 2019 15:22:19 +0000</updated>
                            <resolved>Mon, 23 Jun 2014 16:37:44 +0000</resolved>
                                    <version>1.0</version>
                    <version>1.0.1</version>
                                    <fixVersion>1.0.2</fixVersion>
                                    <component>query</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14036792" author="justinedelson" created="Thu, 19 Jun 2014 01:27:51 +0000"  >&lt;p&gt;proposed patch&lt;/p&gt;</comment>
                            <comment id="14040642" author="tmueller" created="Mon, 23 Jun 2014 11:29:51 +0000"  >&lt;p&gt;I think it should be &quot;if (count &amp;gt;= max) {&quot; instead of &quot;if (count &amp;gt; max) {&quot;.&lt;/p&gt;</comment>
                            <comment id="14040847" author="justinedelson" created="Mon, 23 Jun 2014 15:27:30 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thomasm&quot; class=&quot;user-hover&quot; rel=&quot;thomasm&quot;&gt;thomasm&lt;/a&gt; AFAICT, `count` will never be `max` in that code path, but I&apos;m fine with using `&amp;gt;=`. &lt;/p&gt;</comment>
                            <comment id="14040866" author="tmueller" created="Mon, 23 Jun 2014 15:46:09 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=justinedelson&quot; class=&quot;user-hover&quot; rel=&quot;justinedelson&quot;&gt;justinedelson&lt;/a&gt; you are right, I couldn&apos;t get the value to be &quot;max&quot;, but I guess that&apos;s an implementation detail of getEstimatedCount(). I will use &quot;&amp;gt;=&quot; for now. I will also add a test case.&lt;/p&gt;</comment>
                            <comment id="14040938" author="tmueller" created="Mon, 23 Jun 2014 16:37:14 +0000"  >&lt;p&gt;Revision 1604849 (trunk)&lt;br/&gt;
Revision 1604870 (1.0 branch)&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12651341" name="OAK-1903.patch" size="927" author="justinedelson" created="Thu, 19 Jun 2014 01:27:51 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>400581</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 21 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1wyf3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>400675</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>