<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:45:44 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[OAK-2093] RDBBlobStore failure because of missing lastmod column on datastore_data table</title>
                <link>https://issues.apache.org/jira/browse/OAK-2093</link>
                <project id="12313221" key="OAK">Jackrabbit Oak</project>
                    <description>&lt;p&gt;Revision 1571268 introduced a lastmod check on deleteChunks (see &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-377&quot; title=&quot;Data store garbage collection&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-377&quot;&gt;&lt;del&gt;OAK-377&lt;/del&gt;&lt;/a&gt;). It is applied to both tables, however only _meta has it.&lt;/p&gt;

&lt;p&gt;We either need to add the column (and maintain it), or change the code in deleteChunks.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tmueller&quot; class=&quot;user-hover&quot; rel=&quot;tmueller&quot;&gt;tmueller&lt;/a&gt; feedback appreciated&lt;/p&gt;</description>
                <environment></environment>
        <key id="12740801">OAK-2093</key>
            <summary>RDBBlobStore failure because of missing lastmod column on datastore_data table</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="reschke">Julian Reschke</reporter>
                        <labels>
                    </labels>
                <created>Thu, 11 Sep 2014 14:49:56 +0000</created>
                <updated>Thu, 1 Jun 2017 14:20:56 +0000</updated>
                            <resolved>Wed, 1 Apr 2015 18:42:46 +0000</resolved>
                                                    <fixVersion>1.1.4</fixVersion>
                                    <component>blob</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14133874" author="tmueller" created="Mon, 15 Sep 2014 13:21:00 +0000"  >&lt;p&gt;I think we should have a test case, and fix the deleteChunks then, for example using a statement like this:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;delete from &amp;lt;dataTable&amp;gt; where id in (&amp;lt;...&amp;gt;) and not exists(
select * from &amp;lt;metaTable&amp;gt; m where id = m.id and m.lastMod &amp;lt;= ?)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I think this statement should work with all databases, should be quite fast, and would be transactionally safe (no race condition possible). The statement would need to be tested on common databases.&lt;/p&gt;</comment>
                            <comment id="14133989" author="reschke" created="Mon, 15 Sep 2014 15:07:09 +0000"  >&lt;p&gt;not fully tested&lt;/p&gt;</comment>
                            <comment id="14135297" author="reschke" created="Tue, 16 Sep 2014 11:16:59 +0000"  >&lt;p&gt;I have applied the patch (which appears to work in DB2 and Postgres), but we really need test coverage for this (thus leaving the bug open)&lt;/p&gt;</comment>
                            <comment id="16033051" author="alex.parvulescu" created="Thu, 1 Jun 2017 14:20:56 +0000"  >&lt;p&gt;Seems this issue was left behind during the release, so I&apos;m closing it.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="12611795">OAK-377</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12668777" name="OAK-2093.diff" size="1529" author="reschke" created="Mon, 15 Sep 2014 15:07:09 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 24 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1zxjj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>