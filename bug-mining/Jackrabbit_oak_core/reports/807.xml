<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:43:27 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[OAK-1622] Duplicate configuration services (regression of OAK-1476)</title>
                <link>https://issues.apache.org/jira/browse/OAK-1622</link>
                <project id="12313221" key="OAK">Jackrabbit Oak</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chetanm&quot; class=&quot;user-hover&quot; rel=&quot;chetanm&quot;&gt;chetanm&lt;/a&gt;, i just was trying to fix an issue with the token configuration options and found that in the OSGI setup the token and principal configuration service is present twice. i think this is caused by the changes you made for &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-1476&quot; title=&quot;Hardcoded SecurityProvider implementation in oak-jcr Activator&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-1476&quot;&gt;&lt;del&gt;OAK-1476&lt;/del&gt;&lt;/a&gt; introduced a regression with the principal and token configuration, namely the following lines:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;[...]
compositePrincipalConfiguration.addConfiguration(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PrincipalConfigurationImpl(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;));
[...]
compositeTokenConfiguration.addConfiguration(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; TokenConfigurationImpl(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;wdyt?&lt;/p&gt;

</description>
                <environment></environment>
        <key id="12703769">OAK-1622</key>
            <summary>Duplicate configuration services (regression of OAK-1476)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="angela">Angela Schreiber</assignee>
                                    <reporter username="angela">Angela Schreiber</reporter>
                        <labels>
                    </labels>
                <created>Wed, 26 Mar 2014 17:55:56 +0000</created>
                <updated>Tue, 8 Apr 2014 12:47:21 +0000</updated>
                            <resolved>Thu, 27 Mar 2014 13:21:26 +0000</resolved>
                                                    <fixVersion>0.20</fixVersion>
                                    <component>core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13949031" author="chetanm" created="Thu, 27 Mar 2014 08:28:58 +0000"  >&lt;p&gt;Did a fix in &lt;a href=&quot;http://svn.apache.org/r1582216&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1582216&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=angela&quot; class=&quot;user-hover&quot; rel=&quot;angela&quot;&gt;angela&lt;/a&gt; Can you check if this resolves the issue for you&lt;/p&gt;</comment>
                            <comment id="13949032" author="anchela" created="Thu, 27 Mar 2014 08:35:36 +0000"  >&lt;p&gt;making this a blocker as with the current setup it will prevents the corresponding OSGI configuration (e.g. token expiration) from taking effect.&lt;/p&gt;

&lt;p&gt;as a short term fix with minimal risk i will change the setup such that composite will have a default value instead of populating the internal collection of services.&lt;/p&gt;</comment>
                            <comment id="13949051" author="anchela" created="Thu, 27 Mar 2014 08:57:19 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chetanm&quot; class=&quot;user-hover&quot; rel=&quot;chetanm&quot;&gt;chetanm&lt;/a&gt; IMHO this doesn&apos;t not work. i will revert your changes.&lt;/p&gt;</comment>
                            <comment id="13949098" author="chetanm" created="Thu, 27 Mar 2014 09:45:10 +0000"  >&lt;p&gt;What is the issue you see with the fix.&lt;/p&gt;

&lt;p&gt;&amp;#8211; For non OSGi case it would use the TokenConfigurationImpl&lt;br/&gt;
&amp;#8211; For OSGi case compositeTokenConfiguration would be used&lt;/p&gt;

&lt;p&gt;So that should fix the duplicate issue which was getting cause because earlier the default constructor call add a default TokenConfigurationImpl. And that would not happen now&lt;/p&gt;</comment>
                            <comment id="13949116" author="anchela" created="Thu, 27 Mar 2014 10:11:19 +0000"  >&lt;p&gt;the method get Configurations and getConfiguration will never return the composite configurations with your fix.... i.e. they will never be used.&lt;/p&gt;

&lt;p&gt;i assigned the issue to myself and will fix it&lt;/p&gt;</comment>
                            <comment id="13949122" author="chetanm" created="Thu, 27 Mar 2014 10:24:57 +0000"  >&lt;blockquote&gt;&lt;p&gt;the method get Configurations and getConfiguration will never return the composite configurations with your fix.... i.e. they will never be used.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;hmm not sure. I assign the compositePrincipalConfiguration to principalConfiguration in initializeConfigurations which is called from activate in OSGi env. So they would be returned&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;i assigned the issue to myself and will fix it&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Okie&lt;/p&gt;</comment>
                            <comment id="13949176" author="anchela" created="Thu, 27 Mar 2014 11:23:19 +0000"  >&lt;p&gt;ah right... i missed that one... but the aim of your original changes was to avoid relying on available of the various services. so, that would change now and i am not sure if that wouldn&apos;t cause regressions. i&apos;d rather go for the default in the composite cases. this will also be needed once we have composite authorization setup.&lt;/p&gt;</comment>
                            <comment id="13949181" author="chetanm" created="Thu, 27 Mar 2014 11:34:04 +0000"  >&lt;blockquote&gt;&lt;p&gt;aim of your original changes was to avoid relying on available of the various services. so, that would change now and i am not sure if that wouldn&apos;t cause regressions.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The aim of the original changes was to ensure that SecurityProvider gets activate donly &lt;b&gt;after&lt;/b&gt; the dependent configurations are available. So that would not change with this &lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;i&apos;d rather go for the default in the composite cases. this will also be needed once we have composite authorization setup.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Okie&lt;/p&gt;</comment>
                            <comment id="13949287" author="anchela" created="Thu, 27 Mar 2014 13:21:26 +0000"  >&lt;p&gt;rev. 1582295&lt;/p&gt;</comment>
                            <comment id="13962856" author="alex.parvulescu" created="Tue, 8 Apr 2014 12:47:21 +0000"  >&lt;p&gt;bulk close for the 0.20.0 release&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>382103</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 32 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1ttxz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>382378</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>