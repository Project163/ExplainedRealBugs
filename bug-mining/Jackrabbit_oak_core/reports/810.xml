<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:43:30 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[OAK-1624] Item names with trailing spaces should not be allowed</title>
                <link>https://issues.apache.org/jira/browse/OAK-1624</link>
                <project id="12313221" key="OAK">Jackrabbit Oak</project>
                    <description>&lt;p&gt;the following should fail:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        Node hello = session.getRootNode().addNode(&lt;span class=&quot;code-quote&quot;&gt;&quot;hello&quot;&lt;/span&gt;);
        session.save();

        Node illegal = hello.addNode(&lt;span class=&quot;code-quote&quot;&gt;&quot;test &quot;&lt;/span&gt;); &amp;lt;-- here
        session.save();

        assertEquals(&lt;span class=&quot;code-quote&quot;&gt;&quot;/hello/test &quot;&lt;/span&gt;, illegal.getPath()); &amp;lt;-- and here

        Node other = session.getNode(&lt;span class=&quot;code-quote&quot;&gt;&quot;/hello/test &quot;&lt;/span&gt;); &amp;lt;-- and here
        assertTrue(other.isSame(illegal));
        assertTrue(session.nodeExists(&lt;span class=&quot;code-quote&quot;&gt;&quot;/hello/test &quot;&lt;/span&gt;)); &amp;lt;-- and here
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12703832">OAK-1624</key>
            <summary>Item names with trailing spaces should not be allowed</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="tripod">Tobias Bocanegra</reporter>
                        <labels>
                    </labels>
                <created>Wed, 26 Mar 2014 21:25:37 +0000</created>
                <updated>Mon, 23 Jun 2014 10:39:20 +0000</updated>
                            <resolved>Thu, 27 Mar 2014 20:36:59 +0000</resolved>
                                                    <fixVersion>0.20</fixVersion>
                                    <component>core</component>
                    <component>jcr</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="13949072" author="mduerig" created="Thu, 27 Mar 2014 09:16:51 +0000"  >&lt;p&gt;This is yet another instance of &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-1174&quot; title=&quot;Inconsistent handling of invalid names/paths&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-1174&quot;&gt;&lt;del&gt;OAK-1174&lt;/del&gt;&lt;/a&gt;: adding a session scoped namespace remapping changes the behaviour disallowing trailing spaces. I.e. with&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        session.setNamespacePrefix(&lt;span class=&quot;code-quote&quot;&gt;&quot;foo&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//foo.bar&quot;&lt;/span&gt;);&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I get&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.lang.IllegalArgumentException: &apos;/hello/test &apos; is not a valid path: Trailing slashes not allowed in prefixes and names.
	at org.apache.jackrabbit.oak.namepath.NamePathMapperImpl$1.error(NamePathMapperImpl.java:112)
	at org.apache.jackrabbit.oak.namepath.JcrPathParser.parse(JcrPathParser.java:104)
	at org.apache.jackrabbit.oak.namepath.NamePathMapperImpl.getJcrPath(NamePathMapperImpl.java:127)
	at org.apache.jackrabbit.oak.jcr.session.SessionContext.getJcrPath(SessionContext.java:317)
	at org.apache.jackrabbit.oak.jcr.session.ItemImpl.toJcrPath(ItemImpl.java:339)
	at org.apache.jackrabbit.oak.jcr.session.ItemImpl.getPath(ItemImpl.java:153)
	at org.apache.jackrabbit.oak.jcr.session.NodeImpl.getPath(NodeImpl.java:99)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This is most likely also caused by the (apparently still shaky) parsing heuristics in &lt;tt&gt;org.apache.jackrabbit.oak.namepath.NamePathMapperImpl#needsFullMapping&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="13949679" author="anchela" created="Thu, 27 Mar 2014 17:40:04 +0000"  >&lt;p&gt;proposed fix. review is mandatory &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13949721" author="jukkaz" created="Thu, 27 Mar 2014 18:06:10 +0000"  >&lt;p&gt;IMO the path mapper is the wrong place for validation like this. Instead a better place to guard against such names would be in the &lt;tt&gt;NameValidator&lt;/tt&gt; class.&lt;/p&gt;</comment>
                            <comment id="13949754" author="tripod" created="Thu, 27 Mar 2014 18:30:00 +0000"  >&lt;blockquote&gt;&lt;p&gt;proposed fix&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;A whitespace &quot;in&quot; the name is valid. eg: &quot;jcr:con\tent&quot;&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;IMO the path mapper is the wrong place for validation like this. Instead a better place to guard against such names would be in the NameValidator class.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;IIUC, the NameValidator is only used on commit. But IMO all &apos;reading&apos; methods should also throw a IllegalNameException (e.g. &lt;tt&gt;session.nodeExists(&quot;/content &quot;)&lt;/tt&gt; )&lt;/p&gt;</comment>
                            <comment id="13949837" author="jukkaz" created="Thu, 27 Mar 2014 19:35:44 +0000"  >&lt;blockquote&gt;&lt;p&gt;But IMO all &apos;reading&apos; methods should also throw a IllegalNameException (e.g. session.nodeExists(&quot;/content &quot;))&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Strictly speaking the name is legal according to the spec. The repository implementation would just refuses to store content with such names (as the spec allows), which is why a &lt;tt&gt;PathNotFoundException&lt;/tt&gt; would IMHO be more appropriate here. More specifically, JCR 2.0 section 3.2.4 says: &quot;A writable repository may enforce any implementation-specific constraint by causing an exception to be thrown on an invalid JCR write method call.&quot;&lt;/p&gt;</comment>
                            <comment id="13949857" author="jukkaz" created="Thu, 27 Mar 2014 19:57:57 +0000"  >&lt;p&gt;I added (write) protection against names with either leading or trailing whitespace in revision 1582450.&lt;/p&gt;</comment>
                            <comment id="13949896" author="tripod" created="Thu, 27 Mar 2014 20:36:59 +0000"  >&lt;p&gt;ok, I agree.&lt;/p&gt;

&lt;p&gt;thanks jukka. I think this solves the problem.&lt;/p&gt;</comment>
                            <comment id="13950493" author="anchela" created="Fri, 28 Mar 2014 08:34:07 +0000"  >&lt;p&gt;but it doesn&apos;t solve the issue that the name validation is still inconsistent depending on whether namespace mappings are present or not. i will reopen &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-1174&quot; title=&quot;Inconsistent handling of invalid names/paths&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-1174&quot;&gt;&lt;del&gt;OAK-1174&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13962870" author="alex.parvulescu" created="Tue, 8 Apr 2014 12:47:23 +0000"  >&lt;p&gt;bulk close for the 0.20.0 release&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12678968">OAK-1174</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12721131">OAK-1891</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12637200" name="OAK-1624.patch" size="4665" author="angela" created="Thu, 27 Mar 2014 17:40:04 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>382166</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 32 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1tubb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>382438</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>