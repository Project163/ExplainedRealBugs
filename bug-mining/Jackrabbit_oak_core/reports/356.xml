<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:38:32 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[OAK-878] IllegalArgumentException while adding/removing read permission to user/group</title>
                <link>https://issues.apache.org/jira/browse/OAK-878</link>
                <project id="12313221" key="OAK">Jackrabbit Oak</project>
                    <description>&lt;p&gt;while adding/removing read permission to user/group I have encountered an IllegalArgumentException&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;java.lang.IllegalArgumentException: Duplicate keys in mappings org.apache.jackrabbit.oak.security.authorization.permission.CompiledPermissionImpl$Key@ecb8851f=org.apache.jackrabbit.oak.security.authorization.permission.CompiledPermissionImpl$PermissionEntry@2f7fc44f and org.apache.jackrabbit.oak.security.authorization.permission.CompiledPermissionImpl$Key@ecb8851f=org.apache.jackrabbit.oak.security.authorization.permission.CompiledPermissionImpl$PermissionEntry@6d3136e5
	at com.google.common.collect.ImmutableSortedMap.validateEntries(ImmutableSortedMap.java:304)
	at com.google.common.collect.ImmutableSortedMap.access$100(ImmutableSortedMap.java:61)
	at com.google.common.collect.ImmutableSortedMap$Builder.build(ImmutableSortedMap.java:426)
	at org.apache.jackrabbit.oak.security.authorization.permission.CompiledPermissionImpl$EntriesBuilder.getEntries(CompiledPermissionImpl.java:454)
	at org.apache.jackrabbit.oak.security.authorization.permission.CompiledPermissionImpl$EntriesBuilder.getUserEntries(CompiledPermissionImpl.java:446)
	at org.apache.jackrabbit.oak.security.authorization.permission.CompiledPermissionImpl$EntriesBuilder.access$3(CompiledPermissionImpl.java:445)
	at org.apache.jackrabbit.oak.security.authorization.permission.CompiledPermissionImpl.buildEntries(CompiledPermissionImpl.java:184)
	at org.apache.jackrabbit.oak.security.authorization.permission.CompiledPermissionImpl.refresh(CompiledPermissionImpl.java:114)
	at org.apache.jackrabbit.oak.security.authorization.permission.PermissionProviderImpl.refresh(PermissionProviderImpl.java:97)
	at org.apache.jackrabbit.oak.core.RootImpl.refresh(RootImpl.java:237)
	at org.apache.jackrabbit.oak.jcr.delegate.SessionDelegate.refresh(SessionDelegate.java:204)
	at org.apache.jackrabbit.oak.jcr.SessionImpl.refresh(SessionImpl.java:372)
	at org.apache.jackrabbit.oak.jcr.security.authorization.AbstractEvaluationTest.modify(AbstractEvaluationTest.java:233)
	at org.apache.jackrabbit.oak.jcr.security.authorization.AbstractEvaluationTest.allow(AbstractEvaluationTest.java:256)
	at org.apache.jackrabbit.oak.jcr.security.authorization.ReadTest.testAllowDenyUserGroup(ReadTest.java:45)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at junit.framework.TestCase.runTest(TestCase.java:168)
	at junit.framework.TestCase.runBare(TestCase.java:134)
	at junit.framework.TestResult$1.protect(TestResult.java:110)
	at junit.framework.TestResult.runProtected(TestResult.java:128)
	at junit.framework.TestResult.run(TestResult.java:113)
	at junit.framework.TestCase.run(TestCase.java:124)
	at org.apache.jackrabbit.test.AbstractJCRTest.run(AbstractJCRTest.java:464)
	at junit.framework.TestSuite.runTest(TestSuite.java:243)
	at junit.framework.TestSuite.run(TestSuite.java:238)
	at org.junit.internal.runners.JUnit38ClassRunner.run(JUnit38ClassRunner.java:83)
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:49)
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Test to follow&lt;/p&gt;</description>
                <environment></environment>
        <key id="12654690">OAK-878</key>
            <summary>IllegalArgumentException while adding/removing read permission to user/group</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="angela">Angela Schreiber</assignee>
                                    <reporter username="asanso">Antonio Sanso</reporter>
                        <labels>
                    </labels>
                <created>Tue, 25 Jun 2013 09:29:33 +0000</created>
                <updated>Fri, 20 Sep 2013 07:01:23 +0000</updated>
                            <resolved>Thu, 27 Jun 2013 15:25:07 +0000</resolved>
                                                    <fixVersion>0.9</fixVersion>
                                    <component>core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13692888" author="asanso" created="Tue, 25 Jun 2013 09:31:08 +0000"  >&lt;p&gt;Test to add in the org.apache.jackrabbit.oak.jcr.security.authorization.ReadTest class&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testAllowDenyUserGroup() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception{
        allow(path, testUser.getPrincipal(), readPrivileges);
        allow(path, getTestGroup().getPrincipal(), readPrivileges);		
        deny(path, testUser.getPrincipal(), readPrivileges);
        deny(path, getTestGroup().getPrincipal(), readPrivileges);		
        allow(path, testUser.getPrincipal(), readPrivileges);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13694712" author="anchela" created="Thu, 27 Jun 2013 13:36:44 +0000"  >&lt;p&gt;the error i caused during the second &apos;deny&apos; call due to the fact that &lt;br/&gt;
it&apos;s not detected that the deny entry for the principal of testUser &lt;br/&gt;
has moved from position 1 to 0.&lt;/p&gt;</comment>
                            <comment id="13694791" author="anchela" created="Thu, 27 Jun 2013 15:25:07 +0000"  >&lt;p&gt;Committed revision 1497394.&lt;/p&gt;</comment>
                            <comment id="13772692" author="alex.parvulescu" created="Fri, 20 Sep 2013 07:01:23 +0000"  >&lt;p&gt;Bulk close for the 0.9 release&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>334967</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 9 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1ls47:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>335291</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>