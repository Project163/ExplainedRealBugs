<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:52:27 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[OAK-5621] Warn traversal queries: false positives for joins and SQL-2 queries using &quot;or&quot;</title>
                <link>https://issues.apache.org/jira/browse/OAK-5621</link>
                <project id="12313221" key="OAK">Jackrabbit Oak</project>
                    <description>&lt;p&gt;The following query logs that the query doesn&apos;t use an index:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;/jcr:root/content//*/jcr:content[@jcr:uuid = &apos;03b6fd98-e5f1-4674-9bce-d02c9b17cecd&apos;]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The query correctly uses the uuid index to locate the node, and then traverses the parent nodes to verify the path constraint matches. So, strictly speaking this is traversal, but only traversal to the parent nodes, and not traversal down the tree. Traversal to the parent nodes is not problematic, so no message should be logged.&lt;/p&gt;

&lt;p&gt;A workaround it to change the query by appending &lt;tt&gt;option(traversal ok)&lt;/tt&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13041691">OAK-5621</key>
            <summary>Warn traversal queries: false positives for joins and SQL-2 queries using &quot;or&quot;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="thomasm">Thomas Mueller</assignee>
                                    <reporter username="thomasm">Thomas Mueller</reporter>
                        <labels>
                    </labels>
                <created>Thu, 9 Feb 2017 12:58:34 +0000</created>
                <updated>Mon, 6 Mar 2017 13:51:10 +0000</updated>
                            <resolved>Fri, 10 Feb 2017 14:02:48 +0000</resolved>
                                                    <fixVersion>1.6.1</fixVersion>
                    <fixVersion>1.8.0</fixVersion>
                                    <component>query</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15859627" author="tmueller" created="Thu, 9 Feb 2017 15:06:54 +0000"  >&lt;p&gt;The problem is not actually related to parent node traversal. Instead, the problem is that there are multiple possible join plans, because there are two possible join orders. For that case, the warning is logged if there is (at least) one possible plan that needs to use traversal. That logic is not correct. The warning should only be logged if &lt;em&gt;all&lt;/em&gt; possible plans need to use traversal.&lt;/p&gt;

&lt;p&gt;The problem is not limited to joins: the same problem can occur for SQL-2 queries with &quot;or&quot; conditions. In that case, there are multiple possible queries (or query with &quot;or&quot;, and one query using &quot;union&quot; instead).&lt;/p&gt;</comment>
                            <comment id="15861086" author="tmueller" created="Fri, 10 Feb 2017 10:45:13 +0000"  >&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/r1782447&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1782447&lt;/a&gt; (trunk)&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Added tests&lt;/li&gt;
	&lt;li&gt;Move the verification logic away from the &quot;prepare&quot; phase into a separate method&lt;/li&gt;
	&lt;li&gt;For both joins and SQL-2 queries using &quot;or&quot;, verification is only needed if &lt;em&gt;all&lt;/em&gt; possible path use traversal&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15861308" author="tmueller" created="Fri, 10 Feb 2017 14:02:41 +0000"  >&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/r1782471&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1782471&lt;/a&gt; (1.6 branch)&lt;/p&gt;</comment>
                            <comment id="15897298" author="edivad" created="Mon, 6 Mar 2017 13:51:10 +0000"  >&lt;p&gt;Bulk close for 1.6.1&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13015732">OAK-5018</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 36 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i39ufj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>