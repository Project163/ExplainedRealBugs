<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:46:10 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[OAK-2232] External events incomplete</title>
                <link>https://issues.apache.org/jira/browse/OAK-2232</link>
                <project id="12313221" key="OAK">Jackrabbit Oak</project>
                    <description>&lt;p&gt;External events for changes from other cluster nodes are sometimes incomplete when running on MongoMK.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12751052">OAK-2232</key>
            <summary>External events incomplete</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mreutegg">Marcel Reutegger</assignee>
                                    <reporter username="mreutegg">Marcel Reutegger</reporter>
                        <labels>
                    </labels>
                <created>Tue, 28 Oct 2014 10:50:23 +0000</created>
                <updated>Tue, 4 Nov 2014 08:54:36 +0000</updated>
                            <resolved>Wed, 29 Oct 2014 22:22:30 +0000</resolved>
                                    <version>1.0</version>
                                    <fixVersion>1.0.8</fixVersion>
                    <fixVersion>1.1.2</fixVersion>
                                    <component>core</component>
                    <component>jcr</component>
                    <component>mongomk</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14186692" author="mreutegg" created="Tue, 28 Oct 2014 10:57:18 +0000"  >&lt;p&gt;Committed a test to reproduce the issue: &lt;a href=&quot;http://svn.apache.org/r1634841&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1634841&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Local events are complete, but roughly 20% of the external events are usually missing.&lt;/p&gt;</comment>
                            <comment id="14188178" author="mreutegg" created="Wed, 29 Oct 2014 09:37:16 +0000"  >&lt;p&gt;Added a simpler test in oak-core to reproduce the issue. The problem is with the DocumentNodeStore.diffManyChildren() method. It performs a query on the children of a given node with a constraint on the _modified field derived from the from and to Revisions of the diff. Changes from other cluster nodes are visible with a delay and their revisions have a timestamp slightly in the past. This causes an incomplete diff for external changes.&lt;/p&gt;

&lt;p&gt;The preliminary fix takes this time shift into account and translates the minimal timestamp across all known cluster nodes. &lt;a href=&quot;http://svn.apache.org/r1635077&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1635077&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The tests now pass, but the fix is not yet complete because it may cause many more reads than necessary if a cluster node is shutdown or changes its cluster id. Without updates of the _lastRev on the root document for a clusterId, the revision history within the RevisionComparator will point back to old revisions and will cause minimal timestamps calculated older than necessary.&lt;/p&gt;</comment>
                            <comment id="14188638" author="mreutegg" created="Wed, 29 Oct 2014 17:33:22 +0000"  >&lt;p&gt;Remaining part of the fix implemented and tests added in &lt;a href=&quot;http://svn.apache.org/r1635218&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1635218&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14189131" author="mreutegg" created="Wed, 29 Oct 2014 22:22:30 +0000"  >&lt;p&gt;Merged into 1.0 branch in revision &lt;a href=&quot;http://svn.apache.org/r1635315&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1635315&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14195909" author="alex.parvulescu" created="Tue, 4 Nov 2014 08:54:36 +0000"  >&lt;p&gt;Bulk close for 1.0.8&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 2 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i21nw7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>