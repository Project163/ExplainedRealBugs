<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:52:29 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[OAK-5703] The replica set info gets invalid cluster id</title>
                <link>https://issues.apache.org/jira/browse/OAK-5703</link>
                <project id="12313221" key="OAK">Jackrabbit Oak</project>
                    <description>&lt;p&gt;A part of the replica set info provider (namely, the LocalChanges), uses the instance cluster id to find out whether Oak is being run in cluster.&lt;/p&gt;

&lt;p&gt;However, the way in which MongoDocumentStore provides this clusterId to the LocalChanges class is not correct. It&apos;s taken from the DocumentMK.Builder, which works only for the case when it&apos;s being set explicitly in the configuration and doesn&apos;t work if Oak gets its clusterId automatically.&lt;/p&gt;

&lt;p&gt;As a result, if the clusterId isn&apos;t set in the configuration, the LocalChanges class remains disabled and doesn&apos;t allow to use the secondary Mongo instances for find() and query() requests.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13043972">OAK-5703</key>
            <summary>The replica set info gets invalid cluster id</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="tomek.rekawek">Tomek R&#281;kawek</reporter>
                        <labels>
                    </labels>
                <created>Fri, 17 Feb 2017 12:22:02 +0000</created>
                <updated>Mon, 6 Mar 2017 13:51:20 +0000</updated>
                            <resolved>Fri, 17 Feb 2017 14:05:36 +0000</resolved>
                                    <version>1.6.0</version>
                                    <fixVersion>1.7.0</fixVersion>
                    <fixVersion>1.6.1</fixVersion>
                    <fixVersion>1.8.0</fixVersion>
                                    <component>core</component>
                    <component>mongomk</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15871861" author="tomek.rekawek" created="Fri, 17 Feb 2017 13:32:53 +0000"  >&lt;p&gt;Patch attached. In postpones the LocalChanges initialization until we have the true cluster id.&lt;/p&gt;

&lt;p&gt;In order to get the cluster id, the RevisionListener interface was modified to include the clusterId in the updateAccessedRevision() method. That&apos;s why all the other DocumentStore wrappers had to be updated as well.&lt;/p&gt;</comment>
                            <comment id="15871900" author="tomek.rekawek" created="Fri, 17 Feb 2017 14:05:31 +0000"  >&lt;p&gt;Fixed for trunk in &lt;a href=&quot;https://svn.apache.org/r1783406&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1783406&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="15874387" author="tomek.rekawek" created="Mon, 20 Feb 2017 11:15:32 +0000"  >&lt;p&gt;Backported to 1.6 in &lt;a href=&quot;https://svn.apache.org/r1783743&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1783743&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15897330" author="edivad" created="Mon, 6 Mar 2017 13:51:20 +0000"  >&lt;p&gt;Bulk close for 1.6.1&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12853265" name="OAK-5703.patch" size="10887" author="tomek.rekawek" created="Fri, 17 Feb 2017 13:30:04 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 36 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3a8hz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>