<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:50:01 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[OAK-1550] Incorrect handling of addExistingNode conflict in NodeStore</title>
                <link>https://issues.apache.org/jira/browse/OAK-1550</link>
                <project id="12313221" key="OAK">Jackrabbit Oak</project>
                    <description>&lt;p&gt;&lt;tt&gt;MicroKernel.rebase&lt;/tt&gt; says: &quot;addExistingNode: node has been added that is different from a node of them same name that has been added to the trunk.&quot;&lt;/p&gt;

&lt;p&gt;However, the &lt;tt&gt;NodeStore&lt;/tt&gt; implementation&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;throws a &lt;tt&gt;CommitFailedException&lt;/tt&gt; itself instead of annotating the conflict,&lt;/li&gt;
	&lt;li&gt;also treats the equal childs with the same name as a conflict.&lt;/li&gt;
&lt;/ol&gt;
</description>
                <environment></environment>
        <key id="12701867">OAK-1550</key>
            <summary>Incorrect handling of addExistingNode conflict in NodeStore</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="mreutegg">Marcel Reutegger</assignee>
                                    <reporter username="mduerig">Michael D&#252;rig</reporter>
                        <labels>
                            <label>concurrency</label>
                            <label>observation</label>
                            <label>technical_debt</label>
                    </labels>
                <created>Mon, 17 Mar 2014 10:53:23 +0000</created>
                <updated>Tue, 20 Oct 2015 15:00:17 +0000</updated>
                                                                            <component>mongomk</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                                                            <comments>
                            <comment id="13937660" author="mduerig" created="Mon, 17 Mar 2014 10:58:02 +0000"  >&lt;p&gt;Test case at &lt;a href=&quot;http://svn.apache.org/r1578295&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1578295&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13940947" author="mreutegg" created="Wed, 19 Mar 2014 20:32:17 +0000"  >&lt;p&gt;The missing conflict annotation part is already tracked with &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-1185&quot; title=&quot;DocumentNodeStore: annotate conflicts&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-1185&quot;&gt;OAK-1185&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14298278" author="chetanm" created="Fri, 30 Jan 2015 06:41:36 +0000"  >&lt;p&gt;Probably we can special case resolution for conflicts under &lt;tt&gt;oak:index/:data&lt;/tt&gt; paths as those paths are hidden and no observation events need to be generated for them. This would help in avoid performance degradation while using property indexes in a multi node deployments&lt;/p&gt;</comment>
                            <comment id="14299185" author="mduerig" created="Fri, 30 Jan 2015 20:28:54 +0000"  >&lt;p&gt;I don&apos;t think we should special case this at such a low layer as it causes divergence from other MKs. We should rather fix &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-1185&quot; title=&quot;DocumentNodeStore: annotate conflicts&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-1185&quot;&gt;OAK-1185&lt;/a&gt;. With that you we could easily inject special conflict handling logic through my recent work on &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-2387&quot; title=&quot;Simplify injection of conflict handlers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-2387&quot;&gt;&lt;del&gt;OAK-2387&lt;/del&gt;&lt;/a&gt;. &lt;/p&gt;</comment>
                            <comment id="14300993" author="mreutegg" created="Mon, 2 Feb 2015 08:21:39 +0000"  >&lt;p&gt;I also prefer a solution without special casing and I think it is not necessary. For observation it simply means multiple cluster nodes see local events for the node they created simultaneously. Later when external events are generated, the diff will see no changes from the other node because the node already exists.&lt;/p&gt;</comment>
                            <comment id="14379987" author="catholicon" created="Wed, 25 Mar 2015 14:45:26 +0000"  >&lt;p&gt;After talking offline with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mreutegg&quot; class=&quot;user-hover&quot; rel=&quot;mreutegg&quot;&gt;mreutegg&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chetanm&quot; class=&quot;user-hover&quot; rel=&quot;chetanm&quot;&gt;chetanm&lt;/a&gt;, I&apos;ve opened &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-2673&quot; title=&quot;Resolve add-add, delete-delete merge conflict for empty hidden docs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-2673&quot;&gt;&lt;del&gt;OAK-2673&lt;/del&gt;&lt;/a&gt; which also has a patch to resolve same name empty internal node conflicts for add-add and delete-delete cases.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12701387">OAK-1541</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="12679183">OAK-1185</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                            <subtask id="12785488">OAK-2673</subtask>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311120" key="com.pyxis.greenhopper.jira:gh-epic-link">
                        <customfieldname>Epic Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>OAK-3340</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>380207</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 34 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1tidb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>380491</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>