<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:48:02 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[OAK-2962] SegmentNodeStoreService fails to handle empty strings in the OSGi configuration</title>
                <link>https://issues.apache.org/jira/browse/OAK-2962</link>
                <project id="12313221" key="OAK">Jackrabbit Oak</project>
                    <description>&lt;p&gt;When an OSGi configuration property is removed from the dictionary associated to a component, the default value assigned to it is an empty string.&lt;/p&gt;

&lt;p&gt;When such an empty string is processed by &lt;tt&gt;SegmentNodeStoreService#lookup&lt;/tt&gt;, it is returned to its caller as a valid configuration value. The callers of &lt;tt&gt;SegmentNodeStoreService#lookup&lt;/tt&gt;, instead, expect &lt;tt&gt;null&lt;/tt&gt; when such an empty value is found.&lt;/p&gt;

&lt;p&gt;The method &lt;tt&gt;SegmentNodeStoreService#lookup&lt;/tt&gt; should check for empty strings in the OSGi configuration, and treat them as &lt;tt&gt;null&lt;/tt&gt; values.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12835724">OAK-2962</key>
            <summary>SegmentNodeStoreService fails to handle empty strings in the OSGi configuration</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="amitjain">Amit Jain</assignee>
                                    <reporter username="frm">Francesco Mari</reporter>
                        <labels>
                    </labels>
                <created>Fri, 5 Jun 2015 13:57:46 +0000</created>
                <updated>Tue, 16 Feb 2021 09:53:20 +0000</updated>
                            <resolved>Wed, 24 Jun 2015 04:26:40 +0000</resolved>
                                                    <fixVersion>1.3.2</fixVersion>
                    <fixVersion>1.4</fixVersion>
                                    <component>segmentmk</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14574524" author="frm" created="Fri, 5 Jun 2015 14:01:26 +0000"  >&lt;p&gt;The attached patch implements the desired behaviour.&lt;/p&gt;</comment>
                            <comment id="14576880" author="edivad" created="Mon, 8 Jun 2015 09:47:49 +0000"  >&lt;p&gt;Bulk move to 1.3.1&lt;/p&gt;</comment>
                            <comment id="14581998" author="frm" created="Thu, 11 Jun 2015 14:38:01 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=amitjain&quot; class=&quot;user-hover&quot; rel=&quot;amitjain&quot;&gt;amitjain&lt;/a&gt;, can you have a look at the patch? It should still be applicable on the latest trunk.&lt;/p&gt;</comment>
                            <comment id="14585751" author="amitjain" created="Mon, 15 Jun 2015 10:26:44 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=frm&quot; class=&quot;user-hover&quot; rel=&quot;frm&quot;&gt;frm&lt;/a&gt; Is it possible to add a test for this using the test you created for &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-2883&quot; title=&quot;Tests for SegmentNodeStoreService&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-2883&quot;&gt;&lt;del&gt;OAK-2883&lt;/del&gt;&lt;/a&gt;? &lt;/p&gt;</comment>
                            <comment id="14585753" author="frm" created="Mon, 15 Jun 2015 10:28:34 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=amitjain&quot; class=&quot;user-hover&quot; rel=&quot;amitjain&quot;&gt;amitjain&lt;/a&gt;, sure, I will add some tests and submit a new patch.&lt;/p&gt;</comment>
                            <comment id="14585755" author="frm" created="Mon, 15 Jun 2015 10:29:21 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=amitjain&quot; class=&quot;user-hover&quot; rel=&quot;amitjain&quot;&gt;amitjain&lt;/a&gt;, can you assign the issue to me, so I don&apos;t lose track of it? I&apos;m not able to do it.&lt;/p&gt;</comment>
                            <comment id="14591506" author="frm" created="Thu, 18 Jun 2015 08:54:24 +0000"  >&lt;p&gt;In &lt;tt&gt;OAK&amp;#45;2962-02.patch&lt;/tt&gt; I extracted the &lt;tt&gt;lookup()&lt;/tt&gt; method into a utility class. &lt;tt&gt;SegmentNodeStoreService&lt;/tt&gt; now uses this utility method. I also added some unit tests. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=amitjain&quot; class=&quot;user-hover&quot; rel=&quot;amitjain&quot;&gt;amitjain&lt;/a&gt;, can you take a look at the patch?&lt;/p&gt;</comment>
                            <comment id="14595666" author="edivad" created="Mon, 22 Jun 2015 09:46:51 +0000"  >&lt;p&gt;Bulk move to 1.3.2&lt;/p&gt;</comment>
                            <comment id="14595789" author="amitjain" created="Mon, 22 Jun 2015 11:21:21 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=frm&quot; class=&quot;user-hover&quot; rel=&quot;frm&quot;&gt;frm&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;While the patch looks good to me, couple of things:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Is it possible to add a test specifically for testing out on SegmentNodeStoreService to demonstrate the problem there.&lt;/li&gt;
	&lt;li&gt;Could you please check DocumentNodeStoreService also? It also needs to change similarly.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14595806" author="frm" created="Mon, 22 Jun 2015 11:38:56 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=amitjain&quot; class=&quot;user-hover&quot; rel=&quot;amitjain&quot;&gt;amitjain&lt;/a&gt;,&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Is it possible to add a test specifically for testing out on SegmentNodeStoreService to demonstrate the problem there.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;In the current form, it is not possible to test the &lt;tt&gt;SegmentNodeStoreService&lt;/tt&gt; to directly demonstrate the problem. It would be easier if there would be package-scoped getters to expose the configuration values as seen by the component during its lifecycle. Anyway, since the change in the patch is really trivial, I don&apos;t think that going through this small refactoring is really worth it. This may be the scope of another issue, if really needed.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Could you please check DocumentNodeStoreService also? It also needs to change similarly.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Sure, I can. Is there already an issue for it?&lt;/p&gt;</comment>
                            <comment id="14597173" author="amitjain" created="Tue, 23 Jun 2015 05:00:37 +0000"  >&lt;p&gt;No.&lt;/p&gt;</comment>
                            <comment id="14597333" author="frm" created="Tue, 23 Jun 2015 08:22:52 +0000"  >&lt;p&gt;I created &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-3022&quot; title=&quot;DocumentNodeStoreService fails to handle empty strings in the OSGi configuration&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-3022&quot;&gt;&lt;del&gt;OAK-3022&lt;/del&gt;&lt;/a&gt; for DocumentNodeStoreService.&lt;/p&gt;</comment>
                            <comment id="14598852" author="amitjain" created="Wed, 24 Jun 2015 04:26:41 +0000"  >&lt;p&gt;Committed in trunk with &lt;a href=&quot;http://svn.apache.org/r1687171&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1687171&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14614746" author="edivad" created="Mon, 6 Jul 2015 09:12:03 +0000"  >&lt;p&gt;Bulk close for 1.3.2&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="12839780">OAK-3022</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12737951" name="OAK-2962-01.patch" size="1588" author="frm" created="Fri, 5 Jun 2015 14:01:26 +0000"/>
                            <attachment id="12740347" name="OAK-2962-02.patch" size="17788" author="frm" created="Thu, 18 Jun 2015 08:54:24 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 19 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2folj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>