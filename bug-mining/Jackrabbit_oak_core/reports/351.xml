<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:38:29 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[OAK-880] ChangeProcessor causes IllegalArgumentException when path filter ends with a slash</title>
                <link>https://issues.apache.org/jira/browse/OAK-880</link>
                <project id="12313221" key="OAK">Jackrabbit Oak</project>
                    <description>&lt;p&gt;While we could argue that the path is an invalid absolute path if it ends with a slash, the backward compatibility problem remains. Jackrabbit accepts these kind of paths and strips off a trailing slash. I think Oak should behave the same.&lt;/p&gt;

&lt;p&gt;The exception stack trace looks like this when &apos;/foo/bar/&apos; is used to register the event listener:&lt;br/&gt;
25.06.2013 16:46:21.158 &lt;b&gt;ERROR&lt;/b&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;pool-6-thread-4&amp;#93;&lt;/span&gt; org.apache.jackrabbit.oak.plugins.observation.ChangeProcessor Unable to generate or send events java.lang.IllegalArgumentException: &apos;/foo/bar//bla&apos; is not a valid path. double slash &apos;//&apos; not allowed.&lt;br/&gt;
        at org.apache.jackrabbit.oak.namepath.NamePathMapperImpl$1.error(NamePathMapperImpl.java:104)&lt;br/&gt;
        at org.apache.jackrabbit.oak.namepath.JcrPathParser.parse(JcrPathParser.java:92)&lt;br/&gt;
        at org.apache.jackrabbit.oak.namepath.NamePathMapperImpl.getJcrPath(NamePathMapperImpl.java:119)&lt;br/&gt;
        at org.apache.jackrabbit.oak.plugins.observation.ChangeProcessor$EventGeneratingNodeStateDiff.jcrPath(ChangeProcessor.java:234)&lt;br/&gt;
        at org.apache.jackrabbit.oak.plugins.observation.ChangeProcessor$EventGeneratingNodeStateDiff.createChildDiff(ChangeProcessor.java:295)&lt;br/&gt;
        at org.apache.jackrabbit.oak.spi.state.VisibleDiff.createChildDiff(VisibleDiff.java:109)&lt;br/&gt;
        at org.apache.jackrabbit.oak.plugins.observation.SecurableNodeStateDiff$1.call(SecurableNodeStateDiff.java:116)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12654749">OAK-880</key>
            <summary>ChangeProcessor causes IllegalArgumentException when path filter ends with a slash</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mduerig">Michael D&#252;rig</assignee>
                                    <reporter username="mreutegg">Marcel Reutegger</reporter>
                        <labels>
                    </labels>
                <created>Tue, 25 Jun 2013 15:10:19 +0000</created>
                <updated>Fri, 20 Sep 2013 07:01:23 +0000</updated>
                            <resolved>Wed, 26 Jun 2013 08:44:28 +0000</resolved>
                                    <version>0.8</version>
                                    <fixVersion>0.9</fixVersion>
                                    <component>core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13693121" author="mduerig" created="Tue, 25 Jun 2013 15:14:39 +0000"  >&lt;p&gt;Since &lt;tt&gt;ChangeProcessor&lt;/tt&gt; uses &quot;standard&quot; Jcr to Oak path mapping we need to deicide whether trailing slashes are generally allowed or whether we want to special case this for observation. &lt;/p&gt;</comment>
                            <comment id="13693126" author="mreutegg" created="Tue, 25 Jun 2013 15:27:54 +0000"  >&lt;p&gt;My testing shows that Jackrabbit allows you to pass absolute paths with a trailing slash also to other methods. E.g. Session.getNode(String absPath). I&apos;d therefore opt for a more general solution.&lt;/p&gt;</comment>
                            <comment id="13693128" author="mduerig" created="Tue, 25 Jun 2013 15:35:18 +0000"  >&lt;p&gt;Hmm &lt;tt&gt;NamePathMapperImpl&lt;/tt&gt; handles trailing slashes already. Will check what&apos;s the problem with &lt;tt&gt;ChangeProcessor&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="13693134" author="mduerig" created="Tue, 25 Jun 2013 15:49:50 +0000"  >&lt;p&gt;Attached path should fix this. No test case yet to assert this though.&lt;/p&gt;</comment>
                            <comment id="13693143" author="mduerig" created="Tue, 25 Jun 2013 16:11:10 +0000"  >&lt;p&gt;I committed the patch at revision 1496525. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mreutegg&quot; class=&quot;user-hover&quot; rel=&quot;mreutegg&quot;&gt;mreutegg&lt;/a&gt; could you check whether this fixes your problem and optimally add a regression test?&lt;/p&gt;</comment>
                            <comment id="13693677" author="mreutegg" created="Wed, 26 Jun 2013 06:11:07 +0000"  >&lt;p&gt;In revision 1496759 I added a test to reproduce the issue. The test still fails, even with your recent changes.&lt;/p&gt;</comment>
                            <comment id="13693836" author="mduerig" created="Wed, 26 Jun 2013 08:44:28 +0000"  >&lt;p&gt;Fixed at revision 1496827&lt;/p&gt;</comment>
                            <comment id="13772689" author="alex.parvulescu" created="Fri, 20 Sep 2013 07:01:23 +0000"  >&lt;p&gt;Bulk close for the 0.9 release&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12589617" name="OAK-880.patch" size="1116" author="mduerig" created="Tue, 25 Jun 2013 15:49:50 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>335026</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 9 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1lshb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>335350</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>