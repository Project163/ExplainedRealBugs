<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:48:56 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[OAK-2929] Parent of unseen children must not be removable</title>
                <link>https://issues.apache.org/jira/browse/OAK-2929</link>
                <project id="12313221" key="OAK">Jackrabbit Oak</project>
                    <description>&lt;p&gt;With &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-2673&quot; title=&quot;Resolve add-add, delete-delete merge conflict for empty hidden docs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-2673&quot;&gt;&lt;del&gt;OAK-2673&lt;/del&gt;&lt;/a&gt;, it&apos;s now possible to have hidden intermediate nodes created concurrently.&lt;br/&gt;
So, a scenario like:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;start -&amp;gt; /:hidden
N1 creates /:hiddent/parent/node1
N2 creates /:hidden/parent/node2
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;is allowed.&lt;/p&gt;

&lt;p&gt;But, if N2&apos;s creation of &lt;tt&gt;parent&lt;/tt&gt; got persisted later than that on N1, then N2 is currently able to delete &lt;tt&gt;parent&lt;/tt&gt; even though there&apos;s &lt;tt&gt;node1&lt;/tt&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12833670">OAK-2929</key>
            <summary>Parent of unseen children must not be removable</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mreutegg">Marcel Reutegger</assignee>
                                    <reporter username="catholicon">Vikas Saurabh</reporter>
                        <labels>
                            <label>concurrency</label>
                            <label>technical_debt</label>
                    </labels>
                <created>Fri, 29 May 2015 04:59:11 +0000</created>
                <updated>Wed, 2 Mar 2016 14:29:06 +0000</updated>
                            <resolved>Tue, 29 Sep 2015 14:59:27 +0000</resolved>
                                    <version>1.0.13</version>
                    <version>1.2</version>
                                    <fixVersion>1.0.22</fixVersion>
                    <fixVersion>1.2.7</fixVersion>
                    <fixVersion>1.3.8</fixVersion>
                    <fixVersion>1.4</fixVersion>
                                    <component>core</component>
                    <component>mongomk</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14564278" author="catholicon" created="Fri, 29 May 2015 06:26:24 +0000"  >&lt;p&gt;Attaching &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12736060/12736060_IgnoredTestCase.patch&quot; title=&quot;IgnoredTestCase.patch attached to OAK-2929&quot;&gt;patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; which asserts case mentioned in description and couple more tests for a other combinations.&lt;/p&gt;</comment>
                            <comment id="14576855" author="edivad" created="Mon, 8 Jun 2015 09:47:33 +0000"  >&lt;p&gt;Bulk move to 1.3.1&lt;/p&gt;</comment>
                            <comment id="14610176" author="edivad" created="Wed, 1 Jul 2015 13:05:22 +0000"  >&lt;p&gt;Bulk move to 1.3.3.&lt;/p&gt;</comment>
                            <comment id="14633327" author="edivad" created="Mon, 20 Jul 2015 10:05:01 +0000"  >&lt;p&gt;Bulk move to 1.3.4&lt;/p&gt;</comment>
                            <comment id="14734854" author="mreutegg" created="Tue, 8 Sep 2015 14:08:12 +0000"  >&lt;p&gt;It turns out this is not just a problem for hidden nodes when &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-2673&quot; title=&quot;Resolve add-add, delete-delete merge conflict for empty hidden docs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-2673&quot;&gt;&lt;del&gt;OAK-2673&lt;/del&gt;&lt;/a&gt; feature is enable. A DocumentNodeStore may apply a conflicting change on visible nodes even when &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-2673&quot; title=&quot;Resolve add-add, delete-delete merge conflict for empty hidden docs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-2673&quot;&gt;&lt;del&gt;OAK-2673&lt;/del&gt;&lt;/a&gt; is disabled, which is the default.&lt;/p&gt;</comment>
                            <comment id="14734912" author="mreutegg" created="Tue, 8 Sep 2015 14:40:44 +0000"  >&lt;p&gt;Added Vikas&apos; test and an additional one with visible nodes: &lt;a href=&quot;http://svn.apache.org/r1701810&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1701810&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Both are currently ignored.&lt;/p&gt;</comment>
                            <comment id="14736455" author="mreutegg" created="Wed, 9 Sep 2015 08:37:33 +0000"  >&lt;p&gt;I have a potential fix, but then the test &lt;tt&gt;mergeInternalDocAcrossCluster()&lt;/tt&gt; fails. AFAICS this is expected and the test should be changed. The test simulates a two node cluster and does the following:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;on store1 add /:dynHidden and /:dynHidden/c node, merge but do not run background ops&lt;/li&gt;
	&lt;li&gt;on store2 add /:dynHidden and merge. this succeeds because the test enables &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-2673&quot; title=&quot;Resolve add-add, delete-delete merge conflict for empty hidden docs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-2673&quot;&gt;&lt;del&gt;OAK-2673&lt;/del&gt;&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;on store2 add /:dynHidden/b and try to merge.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The last step fails with my fix, whereas it succeeds currently. I think the merge should fail already now because adding the &apos;b&apos; child node causes a modification on /:dynHidden, which conflicts with the not yet visible add node operation for /:dynHidden of store1. &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-2673&quot; title=&quot;Resolve add-add, delete-delete merge conflict for empty hidden docs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-2673&quot;&gt;&lt;del&gt;OAK-2673&lt;/del&gt;&lt;/a&gt; only allows some combinations of operations to proceed concurrently.&lt;/p&gt;</comment>
                            <comment id="14736531" author="catholicon" created="Wed, 9 Sep 2015 09:21:21 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mreutegg&quot; class=&quot;user-hover&quot; rel=&quot;mreutegg&quot;&gt;mreutegg&lt;/a&gt;, I think the real test should be to just do step1 and step3 (step2 isn&apos;t probably required to march the real world scenario of property indices hierarchy creation merges). Does the test fail even then (if we skip step2)?&lt;/p&gt;</comment>
                            <comment id="14736546" author="mreutegg" created="Wed, 9 Sep 2015 09:35:34 +0000"  >&lt;p&gt;This is also what I tried already and the test succeeds.&lt;/p&gt;

&lt;p&gt;I committed the fix to trunk and enabled tests: &lt;a href=&quot;http://svn.apache.org/r1701955&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1701955&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I will run a couple of benchmark tests to assess the performance impact of the fix before I resolve this issue...&lt;/p&gt;</comment>
                            <comment id="14736718" author="mreutegg" created="Wed, 9 Sep 2015 11:55:50 +0000"  >&lt;p&gt;The benchmarks I checked look fine.&lt;/p&gt;

&lt;p&gt;Resolving as fixed.&lt;/p&gt;</comment>
                            <comment id="14736804" author="mreutegg" created="Wed, 9 Sep 2015 13:03:36 +0000"  >&lt;p&gt;Merged into 1.2 branch: &lt;a href=&quot;http://svn.apache.org/r1701987&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1701987&lt;/a&gt; and 1.0 branch: &lt;a href=&quot;http://svn.apache.org/r1701995&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1701995&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14790595" author="mreutegg" created="Wed, 16 Sep 2015 15:56:00 +0000"  >&lt;p&gt;This fix introduced a regression. See &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-3411&quot; title=&quot;Inconsistent read on DocumentNodeStore startup&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-3411&quot;&gt;&lt;del&gt;OAK-3411&lt;/del&gt;&lt;/a&gt;. Depending on the release vote, I will either re-open this issue or create a new one for the proper fix.&lt;/p&gt;</comment>
                            <comment id="14791700" author="mreutegg" created="Thu, 17 Sep 2015 07:13:53 +0000"  >&lt;p&gt;Re-opening issue because the fix introduced another problem: &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-3411&quot; title=&quot;Inconsistent read on DocumentNodeStore startup&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-3411&quot;&gt;&lt;del&gt;OAK-3411&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14935288" author="mreutegg" created="Tue, 29 Sep 2015 14:59:27 +0000"  >&lt;p&gt;Tests for this issue have been enabled again together with the fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-3388&quot; title=&quot;Inconsistent read in cluster with clock differences&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-3388&quot;&gt;&lt;del&gt;OAK-3388&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Resolving as fixed again.&lt;/p&gt;</comment>
                            <comment id="14939812" author="mreutegg" created="Thu, 1 Oct 2015 13:34:27 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-3388&quot; title=&quot;Inconsistent read in cluster with clock differences&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-3388&quot;&gt;&lt;del&gt;OAK-3388&lt;/del&gt;&lt;/a&gt; was merged into 1.0 and 1.2 branches and tests for this issue are now enabled on branches as well.&lt;/p&gt;</comment>
                            <comment id="14948317" author="edivad" created="Thu, 8 Oct 2015 08:54:00 +0000"  >&lt;p&gt;Bulk close for 1.0.22&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12785488">OAK-2673</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12869387">OAK-3411</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12919515">OAK-3733</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12736060" name="IgnoredTestCase.patch" size="8025" author="catholicon" created="Fri, 29 May 2015 06:26:23 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311120" key="com.pyxis.greenhopper.jira:gh-epic-link">
                        <customfieldname>Epic Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>OAK-3270</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 6 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2fd07:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>