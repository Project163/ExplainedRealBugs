<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:45:32 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[OAK-2059] Reindexing can include hidden nodes in the index</title>
                <link>https://issues.apache.org/jira/browse/OAK-2059</link>
                <project id="12313221" key="OAK">Jackrabbit Oak</project>
                    <description>&lt;p&gt;The Lucene index seems to return hidden nodes (in the property index content). This area shouldn&apos;t be indexed, but also the query engine shouldn&apos;t return those hidden nodes.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12737481">OAK-2059</key>
            <summary>Reindexing can include hidden nodes in the index</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stillalex">Alex Deparvu</assignee>
                                    <reporter username="thomasm">Thomas Mueller</reporter>
                        <labels>
                    </labels>
                <created>Thu, 28 Aug 2014 15:56:53 +0000</created>
                <updated>Wed, 1 Oct 2014 13:03:55 +0000</updated>
                            <resolved>Thu, 28 Aug 2014 20:36:13 +0000</resolved>
                                    <version>1.0</version>
                    <version>1.0.1</version>
                    <version>1.0.2</version>
                    <version>1.0.3</version>
                    <version>1.0.4</version>
                    <version>1.0.5</version>
                                    <fixVersion>1.0.6</fixVersion>
                    <fixVersion>1.1.0</fixVersion>
                                    <component>core</component>
                    <component>query</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14114302" author="alex.parvulescu" created="Thu, 28 Aug 2014 20:35:55 +0000"  >&lt;p&gt;This affects any reindexed index, but mostly the async ones: lucene &amp;amp; property index (those are more affected by the reindex operation). If the reindex flag is set to true, all of the hidden content will be included.&lt;br/&gt;
I don&apos;t see this as a query engine issue, the hidden content should simply not be there. Thomas, if you think the Query Engine needs a change too, please reopen.&lt;/p&gt;

&lt;p&gt;Fixed with &lt;a href=&quot;http://svn.apache.org/r1621201&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1621201&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14114999" author="alex.parvulescu" created="Fri, 29 Aug 2014 07:54:25 +0000"  >&lt;p&gt;merged to 1.0 with rev 1621256&lt;/p&gt;</comment>
                            <comment id="14125436" author="tmueller" created="Mon, 8 Sep 2014 12:05:55 +0000"  >&lt;p&gt;FYI this issue could also cause exceptions while running queries, for example:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;javax.jcr.RepositoryException: Node
/oak:index/uuid/:index/044876c6-2aa4-4e59-8c98-a98c43a406a7 doesn&apos;t have
primary type set.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14125446" author="alex.parvulescu" created="Mon, 8 Sep 2014 12:12:55 +0000"  >&lt;p&gt;ouch, so do you think we need to address this at the query engine level too?&lt;br/&gt;
although this is a good indication that the index contains a lot of garbage and needs to be rebuilt, even if in some cases this is not an easy option.&lt;/p&gt;</comment>
                            <comment id="14126808" author="tmueller" created="Tue, 9 Sep 2014 10:00:45 +0000"  >&lt;p&gt;&amp;gt; ouch, so do you think we need to address this at the query engine level too?&lt;/p&gt;

&lt;p&gt;Yes, I think that would be good (together with a warning in the log for example, but not too many warnings...).&lt;/p&gt;

&lt;p&gt;I will create a new issue for that.&lt;/p&gt;</comment>
                            <comment id="14126811" author="tmueller" created="Tue, 9 Sep 2014 10:05:35 +0000"  >&lt;p&gt;I created &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-2084&quot; title=&quot;The query engine should not return hidden nodes&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-2084&quot;&gt;&lt;del&gt;OAK-2084&lt;/del&gt;&lt;/a&gt;. For Oak 1.0.7 right now, or do you think this should be for Oak 1.0.6 as well?&lt;/p&gt;</comment>
                            <comment id="14147425" author="amitjain" created="Thu, 25 Sep 2014 05:37:17 +0000"  >&lt;p&gt;Bulk close for 1.0.6&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12727652">OAK-1973</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12740098">OAK-2084</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 8 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1zg13:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>