<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:53:45 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[OAK-7856] PrincipalPermissionEntries: non-accesscontrolled path must be ignored for fullyLoaded flag</title>
                <link>https://issues.apache.org/jira/browse/OAK-7856</link>
                <project id="12313221" key="OAK">Jackrabbit Oak</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stillalex&quot; class=&quot;user-hover&quot; rel=&quot;stillalex&quot;&gt;stillalex&lt;/a&gt; spotted an issue with the calculation of the &apos;fullyLoaded&apos; flag inside &lt;tt&gt;PrincipalPermissionEntries&lt;/tt&gt;: since lookup non-accesscontrolled paths is also remembered the fullyLoaded flag may be mistakenly flipped to &lt;tt&gt;true&lt;/tt&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13193497">OAK-7856</key>
            <summary>PrincipalPermissionEntries: non-accesscontrolled path must be ignored for fullyLoaded flag</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="angela">Angela Schreiber</assignee>
                                    <reporter username="angela">Angela Schreiber</reporter>
                        <labels>
                    </labels>
                <created>Tue, 23 Oct 2018 09:11:41 +0000</created>
                <updated>Tue, 6 Nov 2018 10:28:27 +0000</updated>
                            <resolved>Tue, 23 Oct 2018 13:17:50 +0000</resolved>
                                                    <fixVersion>1.10.0</fixVersion>
                    <fixVersion>1.9.10</fixVersion>
                                    <component>core</component>
                    <component>security</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16660421" author="anchela" created="Tue, 23 Oct 2018 10:41:30 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stillalex&quot; class=&quot;user-hover&quot; rel=&quot;stillalex&quot;&gt;stillalex&lt;/a&gt;, proposed patch attached. i would appreciate if you could review it. &lt;/p&gt;</comment>
                            <comment id="16660573" author="alex.parvulescu" created="Tue, 23 Oct 2018 12:35:10 +0000"  >&lt;p&gt;+1 looks good!&lt;/p&gt;</comment>
                            <comment id="16660613" author="alex.parvulescu" created="Tue, 23 Oct 2018 12:57:48 +0000"  >&lt;p&gt;On second thought, I think maybe &lt;tt&gt;putEntriesByPath&lt;/tt&gt; should check for empty &lt;tt&gt;pathEntries&lt;/tt&gt; param and treat it as an empty path if needed (that was my local patch). what do you think?&lt;/p&gt;</comment>
                            <comment id="16660634" author="anchela" created="Tue, 23 Oct 2018 13:17:50 +0000"  >&lt;p&gt;Committed revision 1844648.&lt;/p&gt;</comment>
                            <comment id="16660648" author="anchela" created="Tue, 23 Oct 2018 13:29:15 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stillalex&quot; class=&quot;user-hover&quot; rel=&quot;stillalex&quot;&gt;stillalex&lt;/a&gt;, ooops... didn&apos;t refresh the issue and missed your follow up comment... that was my first approach as well but then i felt that it would be better to clearly separate access controlled paths (even if there was no entry) from those that are not. maybe it&apos;s a theoretical issue but my point was as follows: if in the permission store the path-based structure was not removed upon removal of the last entry, the result from reading from the store would be an empty entry-collection, which is different from that node is not access controlled at all for the given principal (returning &apos;null&apos;). for this very reason i also slightly modified the store to reflect that difference.&lt;/p&gt;</comment>
                            <comment id="16660676" author="alex.parvulescu" created="Tue, 23 Oct 2018 13:50:10 +0000"  >&lt;blockquote&gt;&lt;p&gt;if in the permission store the path-based structure was not removed upon removal of the last entry, the result from reading from the store would be an empty entry-collection&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;I agree with this part. but there&apos;s still room to re-introduce the bug if the called of the method passes in an empty set and the size of the map would still increase by one. even in the case the cleanup didn&apos;t happen, expected size should reflect the real number of entries, so pushing empty sets should not increase the internal counter.&lt;/p&gt;</comment>
                            <comment id="16660706" author="anchela" created="Tue, 23 Oct 2018 14:06:53 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stillalex&quot; class=&quot;user-hover&quot; rel=&quot;stillalex&quot;&gt;stillalex&lt;/a&gt;, no sure i can follow you here. the cnt reflects the number of access controlled paths stored below the given principals e.g. the number of nodes with an &apos;rep:accessControlledPath&apos; property. if one was left (without any entries underneath) the resulting entry-set would be empty but the accesscontrolled-paths-counter would still reflect the fact that entries for this path have been loaded. if no &apos;node&apos; is present for a given path (not access controlled), null is returned instead of a collection in which case we only remember that we checked that path.&lt;/p&gt;</comment>
                            <comment id="16660735" author="alex.parvulescu" created="Tue, 23 Oct 2018 14:29:58 +0000"  >&lt;p&gt;right, thanks for clarifying angela. as long as this is consistent with the counter, it sounds good to me.&lt;/p&gt;</comment>
                            <comment id="16676560" author="edivad" created="Tue, 6 Nov 2018 10:28:27 +0000"  >&lt;p&gt;Bulk close 1.9.10&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13145333">OAK-7343</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12945192" name="OAK-7856.patch" size="10596" author="angela" created="Tue, 23 Oct 2018 10:40:58 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 1 week, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3zivr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>