<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:35:28 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[OAK-347] QueryEngine &apos;like&apos; interpretation error for paths</title>
                <link>https://issues.apache.org/jira/browse/OAK-347</link>
                <project id="12313221" key="OAK">Jackrabbit Oak</project>
                    <description>&lt;p&gt;This is not a parsing error, it affects the Query string -&amp;gt; Query transformation mechanism.&lt;br/&gt;
Currently there is no &apos;like&apos; support in the FilterImpl &lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; and the conditions get turned into invalid string range conditions &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;.&lt;/p&gt;

&lt;p&gt;It would appear that &lt;br/&gt;
{{ WHERE jcr:path LIKE &apos;testroot/%&apos;}}&lt;br/&gt;
gets transformed into the following query filter condition:&lt;br/&gt;
{{ jcr:path has to be between /testroot/ and /testroot0 inclusive }}&lt;br/&gt;
which has no way of working &lt;br/&gt;
(except for the internal LikePattern implementation which apparently knows all the tricks).&lt;/p&gt;


&lt;p&gt;The failing test case is FulltextQueryTest#testFulltextSimpleSQL1&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://svn.apache.org/viewvc/jackrabbit/oak/trunk/oak-core/src/main/java/org/apache/jackrabbit/oak/query/index/FilterImpl.java?view=markup#l220&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc/jackrabbit/oak/trunk/oak-core/src/main/java/org/apache/jackrabbit/oak/query/index/FilterImpl.java?view=markup#l220&lt;/a&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://svn.apache.org/viewvc/jackrabbit/oak/trunk/oak-core/src/main/java/org/apache/jackrabbit/oak/query/ast/ComparisonImpl.java?view=markup#l131&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc/jackrabbit/oak/trunk/oak-core/src/main/java/org/apache/jackrabbit/oak/query/ast/ComparisonImpl.java?view=markup#l131&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12609379">OAK-347</key>
            <summary>QueryEngine &apos;like&apos; interpretation error for paths</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="thomasm">Thomas Mueller</assignee>
                                    <reporter username="stillalex">Alex Deparvu</reporter>
                        <labels>
                    </labels>
                <created>Thu, 27 Sep 2012 10:52:23 +0000</created>
                <updated>Mon, 6 May 2013 15:48:58 +0000</updated>
                            <resolved>Wed, 24 Oct 2012 14:55:21 +0000</resolved>
                                                    <fixVersion>0.6</fixVersion>
                                    <component>core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13468487" author="alex.parvulescu" created="Wed, 3 Oct 2012 11:22:26 +0000"  >&lt;p&gt;first draft in with revision 1393400.&lt;/p&gt;</comment>
                            <comment id="13469261" author="alex.parvulescu" created="Thu, 4 Oct 2012 10:11:59 +0000"  >&lt;p&gt;from what I see via the jcr tests, this is good now&lt;/p&gt;</comment>
                            <comment id="13476156" author="tmueller" created="Mon, 15 Oct 2012 14:10:35 +0000"  >&lt;p&gt;Looking at revision 1393400 it seems the issue isn&apos;t fully resolved yet (ComparisonImpl contains a TODO). I see the old implementation was problematic if the path is interpreted in a special way in an index, but for other regular properties the transformation was correct as far as I see.&lt;/p&gt;

&lt;p&gt;Anyway, let me look at this issue, I&apos;m sure we find a solution.&lt;/p&gt;</comment>
                            <comment id="13476162" author="tmueller" created="Mon, 15 Oct 2012 14:17:16 +0000"  >&lt;p&gt;&amp;gt; &lt;tt&gt;WHERE jcr:path LIKE &apos;testroot/%&apos;&lt;/tt&gt;&lt;br/&gt;
&amp;gt; gets transformed into the following query filter condition:&lt;br/&gt;
&amp;gt; {{ jcr:path has to be between /testroot/ and /testroot0 inclusive }}&lt;br/&gt;
&amp;gt; which has no way of working &lt;/p&gt;

&lt;p&gt;As far as I understand, if the path is interpreted as a java.lang.String and path.compareTo(..) is used, then that&apos;s the correct transformation. It&apos;s only a problem if the index implementation threats a path specially (not as a java.lang.String).&lt;/p&gt;
</comment>
                            <comment id="13483288" author="tmueller" created="Wed, 24 Oct 2012 14:54:56 +0000"  >&lt;p&gt;Revision 1401716 and revision 1401717 (test case)&lt;/p&gt;</comment>
                            <comment id="13483289" author="tmueller" created="Wed, 24 Oct 2012 14:55:21 +0000"  >&lt;p&gt;Should be fixed now, please reopen if there are problems.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12602445">OAK-237</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>240225</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 4 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i00ylb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3537</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>