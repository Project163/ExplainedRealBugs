<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:47:16 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[OAK-2562] DiffCache is inefficient</title>
                <link>https://issues.apache.org/jira/browse/OAK-2562</link>
                <project id="12313221" key="OAK">Jackrabbit Oak</project>
                    <description>&lt;p&gt;The diffCache in DocumentNodeStore can be quite inefficient in some cases. It may become ineffective even for rather recent commits.&lt;/p&gt;

&lt;p&gt;The diffCache contains entries for changes of a commit. E.g. it may have an entry that says between revision r7-0-1 and r8-0-1 the following happened under /foo: &apos;bar&apos; was modified, &apos;baz&apos; was added, etc. The problem now is, that the revision range in the diffCache refers to the revision of the commit and its base version, whereas on runtime, the diff calls may likely happen for other revision ranges. The further down the tree the node state comparison happens, the more likely it is that the base state has a different revision than the entry in the cache. The DocumentNodeStore attempts to &apos;link&apos; node states back in time to avoid reading the complete tree at a different revision after each commit.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12778973">OAK-2562</key>
            <summary>DiffCache is inefficient</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mreutegg">Marcel Reutegger</assignee>
                                    <reporter username="mreutegg">Marcel Reutegger</reporter>
                        <labels>
                    </labels>
                <created>Tue, 3 Mar 2015 07:51:23 +0000</created>
                <updated>Thu, 28 Jul 2016 14:05:03 +0000</updated>
                            <resolved>Tue, 10 Mar 2015 15:42:34 +0000</resolved>
                                    <version>1.0</version>
                                    <fixVersion>1.0.13</fixVersion>
                    <fixVersion>1.1.8</fixVersion>
                                    <component>core</component>
                    <component>mongomk</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="14344793" author="mreutegg" created="Tue, 3 Mar 2015 09:19:24 +0000"  >&lt;p&gt;Added a test to reproduce the problem: &lt;a href=&quot;http://svn.apache.org/r1663565&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1663565&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14345218" author="mreutegg" created="Tue, 3 Mar 2015 15:35:35 +0000"  >&lt;p&gt;Implemented a fix in trunk: &lt;a href=&quot;http://svn.apache.org/r1663705&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1663705&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The read revision of nodes passed to the NodeStateDiff is now controlled by the DocumentNodeStore.compare() method. If it finds a corresponding diff, the read revision of the child nodes will not be changed to the lastModified revision of the parent. This guarantees a better hit rate on the diffCache, because the the diff on the child state will again match existing entries in the diffCache.&lt;/p&gt;

&lt;p&gt;All tests pass, but this change needs more performance tests to verify the fix.&lt;/p&gt;</comment>
                            <comment id="14346899" author="mreutegg" created="Wed, 4 Mar 2015 14:05:07 +0000"  >&lt;p&gt;Merged changes into the 1.0 branch: &lt;a href=&quot;http://svn.apache.org/r1663982&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1663982&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14355091" author="mreutegg" created="Tue, 10 Mar 2015 15:42:34 +0000"  >&lt;p&gt;Looks stable. Resolving as fixed.&lt;/p&gt;</comment>
                            <comment id="14502825" author="edivad" created="Mon, 20 Apr 2015 13:45:16 +0000"  >&lt;p&gt;Bulk close for 1.0.13&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12785632">OAK-2683</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311120" key="com.pyxis.greenhopper.jira:gh-epic-link">
                        <customfieldname>Epic Link</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>OAK-4614</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 30 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i269zb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>