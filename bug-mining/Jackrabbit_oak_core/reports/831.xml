<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:43:40 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[OAK-1415] OOME when moving large subtree </title>
                <link>https://issues.apache.org/jira/browse/OAK-1415</link>
                <project id="12313221" key="OAK">Jackrabbit Oak</project>
                    <description>&lt;p&gt;Running &lt;tt&gt;org.apache.jackrabbit.oak.jcr.LargeOperationIT#largeMove&lt;/tt&gt;, which moves large trees causes an OOME on the document node store:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;DocumentNodeStore background thread&quot;&lt;/span&gt; java.lang.OutOfMemoryError: Java heap space
	at org.bson.io.PoolOutputBuffer.&amp;lt;init&amp;gt;(PoolOutputBuffer.java:224)
	at org.bson.BasicBSONDecoder.&amp;lt;init&amp;gt;(BasicBSONDecoder.java:499)
	at com.mongodb.DefaultDBDecoder.&amp;lt;init&amp;gt;(DefaultDBDecoder.java:43)
	at com.mongodb.DefaultDBDecoder$DefaultFactory.create(DefaultDBDecoder.java:32)
	at com.mongodb.DB.command(DB.java:262)
	at com.mongodb.DB.command(DB.java:244)
	at com.mongodb.DB.command(DB.java:301)
	at com.mongodb.DB.command(DB.java:199)
	at com.mongodb.DBCollection.findAndModify(DBCollection.java:392)
	at org.apache.jackrabbit.oak.plugins.document.mongo.MongoDocumentStore.findAndModify(MongoDocumentStore.java:411)
	at org.apache.jackrabbit.oak.plugins.document.mongo.MongoDocumentStore.createOrUpdate(MongoDocumentStore.java:433)
	at org.apache.jackrabbit.oak.plugins.document.ClusterNodeInfo.renewLease(ClusterNodeInfo.java:247)
	at org.apache.jackrabbit.oak.plugins.document.DocumentNodeStore.backgroundRenewClusterIdLease(DocumentNodeStore.java:1241)
	at org.apache.jackrabbit.oak.plugins.document.DocumentNodeStore.runBackgroundOperations(DocumentNodeStore.java:1214)
	at org.apache.jackrabbit.oak.plugins.document.DocumentNodeStore$BackgroundOperation.run(DocumentNodeStore.java:1570)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:695)
Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;Attach Listener&quot;&lt;/span&gt; java.lang.reflect.InvocationTargetException
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at sun.instrument.InstrumentationImpl.loadClassAndStartAgent(InstrumentationImpl.java:325)
	at sun.instrument.InstrumentationImpl.loadClassAndCallAgentmain(InstrumentationImpl.java:348)
Caused by: java.lang.OutOfMemoryError: Java heap space
	at sun.misc.VMSupport.initAgentProperties(Native Method)
	at sun.misc.VMSupport.getAgentProperties(VMSupport.java:29)
	at sun.management.Agent.startAgent(Agent.java:130)
	at sun.management.Agent.agentmain(Agent.java:95)
	... 6 more
Agent failed to start!
Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;TarMK flush thread: target/tar.1392132190842974000&quot;&lt;/span&gt; java.lang.OutOfMemoryError: Java heap space
	at java.util.Arrays.copyOf(Arrays.java:2734)
	at java.util.ArrayList.ensureCapacity(ArrayList.java:167)
	at java.util.ArrayList.add(ArrayList.java:351)
	at org.apache.jackrabbit.oak.cache.CacheLIRS.values(CacheLIRS.java:471)
	at org.apache.jackrabbit.oak.cache.CacheLIRS$1.values(CacheLIRS.java:1445)
	at org.apache.jackrabbit.oak.plugins.segment.file.FileStore.flush(FileStore.java:206)
	at org.apache.jackrabbit.oak.plugins.segment.file.FileStore$1.run(FileStore.java:165)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:695)

java.lang.OutOfMemoryError: Java heap space
	at java.nio.CharBuffer.wrap(CharBuffer.java:350)
	at java.nio.CharBuffer.wrap(CharBuffer.java:373)
	at java.lang.StringCoding$StringDecoder.decode(StringCoding.java:138)
	at java.lang.StringCoding.decode(StringCoding.java:173)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;.&amp;lt;init&amp;gt;(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;.java:443)
	at org.bson.BasicBSONDecoder$BSONInput.readUTF8String(BasicBSONDecoder.java:455)
	at org.bson.BasicBSONDecoder.decodeElement(BasicBSONDecoder.java:155)
	at org.bson.BasicBSONDecoder.decodeElement(BasicBSONDecoder.java:206)
	at org.bson.BasicBSONDecoder._decode(BasicBSONDecoder.java:79)
	at org.bson.BasicBSONDecoder.decode(BasicBSONDecoder.java:57)
	at com.mongodb.DefaultDBDecoder.decode(DefaultDBDecoder.java:61)
	at com.mongodb.Response.&amp;lt;init&amp;gt;(Response.java:83)
	at com.mongodb.DBPort.go(DBPort.java:142)
	at com.mongodb.DBPort.call(DBPort.java:92)
	at com.mongodb.DBTCPConnector.innerCall(DBTCPConnector.java:244)
	at com.mongodb.DBTCPConnector.call(DBTCPConnector.java:216)
	at com.mongodb.DBApiLayer$MyCollection.__find(DBApiLayer.java:288)
	at com.mongodb.DBApiLayer$MyCollection.__find(DBApiLayer.java:273)
	at com.mongodb.DBCursor._check(DBCursor.java:368)
	at com.mongodb.DBCursor._hasNext(DBCursor.java:459)
	at com.mongodb.DBCursor.hasNext(DBCursor.java:484)
	at org.apache.jackrabbit.oak.plugins.document.mongo.MongoDocumentStore.query(MongoDocumentStore.java:311)
	at org.apache.jackrabbit.oak.plugins.document.mongo.MongoDocumentStore.query(MongoDocumentStore.java:286)
	at org.apache.jackrabbit.oak.plugins.document.DocumentNodeStore.readChildDocs(DocumentNodeStore.java:681)
	at org.apache.jackrabbit.oak.plugins.document.DocumentNodeStore.readChildren(DocumentNodeStore.java:617)
	at org.apache.jackrabbit.oak.plugins.document.DocumentNodeStore$3.call(DocumentNodeStore.java:582)
	at org.apache.jackrabbit.oak.plugins.document.DocumentNodeStore$3.call(DocumentNodeStore.java:579)
	at org.apache.jackrabbit.oak.cache.CacheLIRS$Segment.get(CacheLIRS.java:841)
	at org.apache.jackrabbit.oak.cache.CacheLIRS.get(CacheLIRS.java:212)
	at org.apache.jackrabbit.oak.plugins.document.DocumentNodeStore.getChildren(DocumentNodeStore.java:579)
	at org.apache.jackrabbit.oak.plugins.document.DocumentNodeStore.getChildNodes(DocumentNodeStore.java:741)
	at org.apache.jackrabbit.oak.plugins.document.DocumentNodeState.getChildNodeEntries(DocumentNodeState.java:329)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12694524">OAK-1415</key>
            <summary>OOME when moving large subtree </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mreutegg">Marcel Reutegger</assignee>
                                    <reporter username="mduerig">Michael D&#252;rig</reporter>
                        <labels>
                    </labels>
                <created>Tue, 11 Feb 2014 16:33:52 +0000</created>
                <updated>Tue, 8 Apr 2014 12:47:31 +0000</updated>
                            <resolved>Thu, 3 Apr 2014 20:09:26 +0000</resolved>
                                                    <fixVersion>0.20</fixVersion>
                                    <component>mongomk</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13920925" author="mmarth" created="Wed, 5 Mar 2014 14:57:50 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mduerig&quot; class=&quot;user-hover&quot; rel=&quot;mduerig&quot;&gt;mduerig&lt;/a&gt;, can you pls check if that still occurs?&lt;/p&gt;</comment>
                            <comment id="13922652" author="mduerig" created="Thu, 6 Mar 2014 15:34:46 +0000"  >&lt;p&gt;With &lt;tt&gt;-Xmx1024M&lt;/tt&gt; this still happens.&lt;/p&gt;</comment>
                            <comment id="13954412" author="mreutegg" created="Sat, 29 Mar 2014 19:36:12 +0000"  >&lt;p&gt;This is mostly caused by &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-1056&quot; title=&quot;Transient changes contributed by commit hooks are kept in memory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-1056&quot;&gt;&lt;del&gt;OAK-1056&lt;/del&gt;&lt;/a&gt;, because moving the large test tree requires updates on the index. Those updates are done in the commit hook and are currently kept in memory.&lt;/p&gt;</comment>
                            <comment id="13958846" author="mreutegg" created="Thu, 3 Apr 2014 14:11:01 +0000"  >&lt;p&gt;Patch with changes to resolve this issue.&lt;/p&gt;

&lt;p&gt;svn.apache.org does not accept commits at the moment...&lt;/p&gt;</comment>
                            <comment id="13959145" author="alex.parvulescu" created="Thu, 3 Apr 2014 20:09:26 +0000"  >&lt;p&gt;applied the patch in rev &lt;a href=&quot;http://svn.apache.org/r1584369&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1584369&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13962911" author="alex.parvulescu" created="Tue, 8 Apr 2014 12:47:31 +0000"  >&lt;p&gt;bulk close for the 0.20.0 release&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="12671377">OAK-1056</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12694454">OAK-1413</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12638482" name="OAK-1415.patch" size="3452" author="mreutegg" created="Thu, 3 Apr 2014 14:11:00 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>373032</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 32 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1saav:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>373334</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>