<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:45:47 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[OAK-2118] Aggregation cursor introduces doubles in the result set</title>
                <link>https://issues.apache.org/jira/browse/OAK-2118</link>
                <project id="12313221" key="OAK">Jackrabbit Oak</project>
                    <description>&lt;p&gt;In some cases (double aggregation) the aggregation cursor in some cases will introduce doubles in the result set by replacing some good results.&lt;br/&gt;
This makes the result set look like (for the attached test case):&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-quote&quot;&gt;&quot;/myFolder&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;/myFolder&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;/myFolder/myFile/jcr:content&quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;instead of &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-quote&quot;&gt;&quot;/myFolder&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;/myFolder/myFile&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;/myFolder/myFile/jcr:content&quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;What actually happens is the cursor will replace the current row value with the new one (&quot;/myFolder/myFile&quot; will turn into &quot;/myFolder&quot;) in the #next call. Not only this replaces the good value with the double, but it also skips the de-duplication bits, resulting in an incomplete result set with doubles sprinkled in.&lt;/p&gt;


</description>
                <environment></environment>
        <key id="12743165">OAK-2118</key>
            <summary>Aggregation cursor introduces doubles in the result set</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stillalex">Alex Deparvu</assignee>
                                    <reporter username="stillalex">Alex Deparvu</reporter>
                        <labels>
                    </labels>
                <created>Mon, 22 Sep 2014 12:16:45 +0000</created>
                <updated>Mon, 13 Oct 2014 09:20:43 +0000</updated>
                            <resolved>Mon, 22 Sep 2014 13:28:50 +0000</resolved>
                                    <version>1.0</version>
                    <version>1.1.0</version>
                                    <fixVersion>1.0.7</fixVersion>
                    <fixVersion>1.1.0</fixVersion>
                                    <component>core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14143140" author="alex.parvulescu" created="Mon, 22 Sep 2014 12:18:28 +0000"  >&lt;p&gt;attaching patch that contains a test + a fix. I remember this was also an issue of the intersection cursor and we fixed it a while back.&lt;/p&gt;</comment>
                            <comment id="14143142" author="alex.parvulescu" created="Mon, 22 Sep 2014 12:18:54 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=edivad&quot; class=&quot;user-hover&quot; rel=&quot;edivad&quot;&gt;edivad&lt;/a&gt; feedback?&lt;/p&gt;</comment>
                            <comment id="14143189" author="edivad" created="Mon, 22 Sep 2014 13:25:31 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=alex.parvulescu&quot; class=&quot;user-hover&quot; rel=&quot;alex.parvulescu&quot;&gt;alex.parvulescu&lt;/a&gt; looks good to me. I remember having seen as well while digging the code some operations to avoid dups during inserts but I can&apos;t remember right now where exactly.&lt;/p&gt;</comment>
                            <comment id="14143193" author="alex.parvulescu" created="Mon, 22 Sep 2014 13:28:50 +0000"  >&lt;p&gt;fixed with rev 1626770.&lt;/p&gt;</comment>
                            <comment id="14143264" author="alex.parvulescu" created="Mon, 22 Sep 2014 14:49:59 +0000"  >&lt;p&gt;merged to 1.0 with rev 1626795.&lt;/p&gt;</comment>
                            <comment id="14169124" author="mreutegg" created="Mon, 13 Oct 2014 09:20:43 +0000"  >&lt;p&gt;Bulk close for Oak 1.0.7&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12670409" name="OAK-2118.patch" size="1421" author="stillalex" created="Mon, 22 Sep 2014 12:18:28 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 5 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i20by7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>