<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:53:19 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[OAK-6656] OrderedPropertyIndexEditorProvider does not return Editor to IndexUpdate leading to &quot;ordered&quot; being marked as missing type</title>
                <link>https://issues.apache.org/jira/browse/OAK-6656</link>
                <project id="12313221" key="OAK">Jackrabbit Oak</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-3768&quot; title=&quot;Remove OrderedPropertyIndex support from trunk&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-3768&quot;&gt;&lt;del&gt;OAK-3768&lt;/del&gt;&lt;/a&gt; removed support for &lt;tt&gt;ordered&lt;/tt&gt; property index but the intention of the removal was that presence of ordered index should only log a WARN every now and then (10k times on invocation of EditorProvider).&lt;/p&gt;

&lt;p&gt;But, it returns &lt;tt&gt;null&lt;/tt&gt; editor which is takes as there is no provider of ordered index. Which, in turn, as the config be, can fail commits (or async indexing if index was async).&lt;/p&gt;

&lt;p&gt;We should handle this gracefully.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13101691">OAK-6656</key>
            <summary>OrderedPropertyIndexEditorProvider does not return Editor to IndexUpdate leading to &quot;ordered&quot; being marked as missing type</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="catholicon">Vikas Saurabh</assignee>
                                    <reporter username="catholicon">Vikas Saurabh</reporter>
                        <labels>
                    </labels>
                <created>Tue, 12 Sep 2017 15:49:17 +0000</created>
                <updated>Fri, 29 Sep 2017 10:09:34 +0000</updated>
                            <resolved>Tue, 12 Sep 2017 19:00:18 +0000</resolved>
                                    <version>1.7.7</version>
                    <version>1.4.18</version>
                    <version>1.6.5</version>
                                    <fixVersion>1.7.8</fixVersion>
                    <fixVersion>1.6.6</fixVersion>
                    <fixVersion>1.4.19</fixVersion>
                    <fixVersion>1.8.0</fixVersion>
                                    <component>indexing</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16163156" author="catholicon" created="Tue, 12 Sep 2017 15:57:52 +0000"  >&lt;p&gt;Added ignored test at &lt;a href=&quot;https://svn.apache.org/r1808128&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1808128&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chetanm&quot; class=&quot;user-hover&quot; rel=&quot;chetanm&quot;&gt;chetanm&lt;/a&gt;, while a very simple fix [0] is add &lt;tt&gt;ordered&lt;/tt&gt; to &lt;tt&gt;MissingIndexProviderStrategy#ignore&lt;/tt&gt; set. While that works as intended but the log message isn&apos;t descriptive enough - basically there&apos;s no information about which definition is being complained about. Inside the provider we do have definition NodeState which we can log - that can be &apos;hint&apos; enough to find which index is being talked about. But, I was wondering if we can somehow get the path information there. Any ideas?&lt;/p&gt;

&lt;p&gt;[0]:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;diff --git a/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/IndexUpdate.java b/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/IndexUpdate.java
index 4d93bc6d4e..6805fe5f03 100644
--- a/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/IndexUpdate.java
+++ b/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/IndexUpdate.java
@@ -472,7 +472,7 @@ public class IndexUpdate implements Editor, PathSource {
         private boolean failOnMissingIndexProvider = Boolean
                 .getBoolean(&quot;oak.indexUpdate.failOnMissingIndexProvider&quot;);
 
-        private final Set&amp;lt;String&amp;gt; ignore = newHashSet(&quot;disabled&quot;);
+        private final Set&amp;lt;String&amp;gt; ignore = newHashSet(&quot;disabled&quot;, &quot;ordered&quot;);
 
         public void onMissingIndex(String type, NodeBuilder definition, String indexPath)
                 throws CommitFailedException {
diff --git a/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/property/OrderedIndex.java b/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/property/OrderedIndex.java
index c8d5ec489e..e2ccb2e0d2 100644
--- a/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/property/OrderedIndex.java
+++ b/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/property/OrderedIndex.java
@@ -33,7 +33,7 @@ public interface OrderedIndex {
      */
     String DEPRECATION_MESSAGE = 
         &quot;Ordered Index has been deprecated since Oak 1.1.8. &quot; +
-        &quot;Please replace the index definitions with Lucene Property index &quot; +
+        &quot;Please replace the index definition ({}) with Lucene Property index &quot; +
         &quot;and remove the index providers from the repository. &quot; + 
         &quot;See docs at http://jackrabbit.apache.org/oak/docs&quot;;
 
diff --git a/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/property/OrderedPropertyIndexEditorProvider.java b/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/property/OrderedPropertyIndexEditorProvider.java
index 3c9270dade..c64adf522a 100644
--- a/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/property/OrderedPropertyIndexEditorProvider.java
+++ b/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/property/OrderedPropertyIndexEditorProvider.java
@@ -46,7 +46,7 @@ public class OrderedPropertyIndexEditorProvider implements IndexEditorProvider,
                                 @Nonnull IndexUpdateCallback callback) throws CommitFailedException {
         if (OrderedIndex.TYPE.equals(type)) {
             if (hit() % threshold == 0) {
-                LOG.warn(OrderedIndex.DEPRECATION_MESSAGE);                
+                LOG.warn(OrderedIndex.DEPRECATION_MESSAGE, definition);
             }
         }
         return null;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16163492" author="catholicon" created="Tue, 12 Sep 2017 19:00:18 +0000"  >&lt;p&gt;Fixed in trunk at &lt;a href=&quot;https://svn.apache.org/r1808142&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1808142&lt;/a&gt;. Thanks to &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chetanm&quot; class=&quot;user-hover&quot; rel=&quot;chetanm&quot;&gt;chetanm&lt;/a&gt; for hinting that &lt;tt&gt;ContextAwareCallback&lt;/tt&gt; could be utilized to get index path.&lt;/p&gt;</comment>
                            <comment id="16165275" author="catholicon" created="Wed, 13 Sep 2017 21:01:35 +0000"  >&lt;p&gt;Backported to 1.6 branch in &lt;a href=&quot;https://svn.apache.org/r1808278&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1808278&lt;/a&gt;.&lt;br/&gt;
Backported to 1.4 branch in &lt;a href=&quot;https://svn.apache.org/r1808288&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1808288&lt;/a&gt;. This backport required a bit of fumbling with impl and quite a bit for test due to missing &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-3642&quot; title=&quot;Enable failing of commit upon Missing IndexEditor implementation by default&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-3642&quot;&gt;&lt;del&gt;OAK-3642&lt;/del&gt;&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-4642&quot; title=&quot;Provide a way to pass indexing related state to IndexEditorProvider&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-4642&quot;&gt;&lt;del&gt;OAK-4642&lt;/del&gt;&lt;/a&gt; in 1.4 branch.&lt;/p&gt;</comment>
                            <comment id="16185600" author="edivad" created="Fri, 29 Sep 2017 10:09:34 +0000"  >&lt;p&gt;Bulk close for 1.7.8&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="12921033">OAK-3768</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 7 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3jz33:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310921" key="com.pyxis.greenhopper.jira:gh-sprint">
                        <customfieldname>Sprint</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="311">L11</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>