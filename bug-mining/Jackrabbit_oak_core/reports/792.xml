<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:43:18 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[OAK-1604] Support for signed references in Blob</title>
                <link>https://issues.apache.org/jira/browse/OAK-1604</link>
                <project id="12313221" key="OAK">Jackrabbit Oak</project>
                    <description>&lt;p&gt;As part of &lt;a href=&quot;https://issues.apache.org/jira/browse/JCR-3534&quot; title=&quot;Efficient copying of binaries across repositories with the same data store&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JCR-3534&quot;&gt;&lt;del&gt;JCR-3534&lt;/del&gt;&lt;/a&gt; Jackrabbit has introduced support for signed references for securely transferring binary references across repositories sharing the DataStore&lt;/p&gt;

&lt;p&gt;Support for FileDataStore was added as part of &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-805&quot; title=&quot;Support for existing Jackrabbit 2.x DataStores&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-805&quot;&gt;&lt;del&gt;OAK-805&lt;/del&gt;&lt;/a&gt;. However support for signed references is missing. &lt;/p&gt;

&lt;p&gt;As a fix signed references should be supported&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;org.apache.jackrabbit.oak.plugins.blob.BlobStoreBlob#getReference - It should probably delegate to org.apache.jackrabbit.core.data.AbstractDataRecord#getReference if the underlying BlobStore is based on DataStore&lt;/li&gt;
	&lt;li&gt;It should be possible to specify the signing key using OSGi config&lt;/li&gt;
&lt;/ol&gt;
</description>
                <environment></environment>
        <key id="12703410">OAK-1604</key>
            <summary>Support for signed references in Blob</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="chetanm">Chetan Mehrotra</assignee>
                                    <reporter username="chetanm">Chetan Mehrotra</reporter>
                        <labels>
                    </labels>
                <created>Tue, 25 Mar 2014 07:28:41 +0000</created>
                <updated>Tue, 8 Apr 2014 12:47:23 +0000</updated>
                            <resolved>Wed, 26 Mar 2014 16:47:26 +0000</resolved>
                                                    <fixVersion>0.20</fixVersion>
                                    <component>core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13946252" author="chetanm" created="Tue, 25 Mar 2014 07:29:50 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=teofili&quot; class=&quot;user-hover&quot; rel=&quot;teofili&quot;&gt;teofili&lt;/a&gt; Can you have a look at this as this feature is probably required for binary less replication. Otherwise let me know what all needs to be done here&lt;/p&gt;</comment>
                            <comment id="13946278" author="teofili" created="Tue, 25 Mar 2014 08:07:04 +0000"  >&lt;blockquote&gt;&lt;p&gt;org.apache.jackrabbit.oak.plugins.blob.BlobStoreBlob#getReference - It should probably delegate to org.apache.jackrabbit.core.data.AbstractDataRecord#getReference if the underlying BlobStore is based on DataStore&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;right&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;It should be possible to specify the signing key using OSGi config&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;in FileDataStore the reference key is randomly generated and put into a file so that if two installation point to the same file datastore they also share the key as it&apos;s in a specific file (IIRC reference.key).&lt;br/&gt;
Generally speaking, currently, the reference key is generated by org.apache.jackrabbit.core.data.AbstractDataStore#getOrCreateReferenceKey which can be overridden in subclasses to have an implementation specific way of generating it; as far as I know FileDataStore behaves as explained, S3DataStore reads a parameter from the repository.xml.&lt;br/&gt;
It&apos;d be nice if we could set the key via OSGi, just we need to decide how to deal with the default implementation specific key generation mechanism.&lt;/p&gt;</comment>
                            <comment id="13946308" author="chetanm" created="Tue, 25 Mar 2014 08:55:03 +0000"  >&lt;p&gt;One more thing missing is whena ReferenceBinary is imported how to obtain the backing plain identifier. Currently the logic of import is broken for both NodeStore&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;org.apache.jackrabbit.oak.plugins.segment.SegmentWriter#writeBlob - It writes the reference directly.&lt;/li&gt;
	&lt;li&gt;org.apache.jackrabbit.oak.kernel.BlobSerializer - Used in DocumentNodeStore currently does not handle references in any form. So I doubt that binary less replication would work for non signed references also&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Probably we need a method on BlobStore similar to org.apache.jackrabbit.core.data.DataStore#getRecordFromReference&lt;/p&gt;</comment>
                            <comment id="13947730" author="chetanm" created="Wed, 26 Mar 2014 09:37:43 +0000"  >&lt;p&gt;Added support for signed references. &lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Quite a bit of Oak code was using Blob#reference as blobId. Hence the fix involved changes in quite a bit of logic&lt;/li&gt;
	&lt;li&gt;AbstractBlobStore - It now expose a referenceKey property which is used to encrypt the blobId as reference&lt;/li&gt;
	&lt;li&gt;DataStoreBlobStore - It delegates to DataStore for reference related call&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13962872" author="alex.parvulescu" created="Tue, 8 Apr 2014 12:47:23 +0000"  >&lt;p&gt;bulk close for the 0.20.0 release&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>381748</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 32 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1trrj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>382023</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>