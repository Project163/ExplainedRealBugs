<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:54:14 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[OAK-260] Avoid the &quot;Turkish Locale Problem&quot;</title>
                <link>https://issues.apache.org/jira/browse/OAK-260</link>
                <project id="12313221" key="OAK">Jackrabbit Oak</project>
                    <description>&lt;p&gt;We currently use String.toUpperCase() and String.toLowerCase() and in some cases where it is not appropriate. When running using the Turkish profile, this will not work as expected. See also &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://mattryall.net/blog/2009/02/the-infamous-turkish-locale-bug&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://mattryall.net/blog/2009/02/the-infamous-turkish-locale-bug&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Problematic are String.toUpperCase(), String.toLowerCase(). String.equalsIgnoreCase(..) isn&apos;t a problem.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12604056">OAK-260</key>
            <summary>Avoid the &quot;Turkish Locale Problem&quot;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="4">Incomplete</resolution>
                                        <assignee username="thomasm">Thomas Mueller</assignee>
                                    <reporter username="thomasm">Thomas Mueller</reporter>
                        <labels>
                    </labels>
                <created>Mon, 20 Aug 2012 13:48:45 +0000</created>
                <updated>Wed, 3 Jul 2019 13:03:21 +0000</updated>
                            <resolved>Thu, 22 Oct 2015 07:39:25 +0000</resolved>
                                                    <fixVersion>1.4</fixVersion>
                                    <component>core</component>
                    <component>jcr</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13437877" author="tmueller" created="Mon, 20 Aug 2012 14:04:39 +0000"  >&lt;p&gt;The main problems should be fixed in r1375026, r1375028, and r1375030. However, we should have a way to ensure no new such bugs are introduced. One option is to run the test case using the Turkish locale, another might be to configure Checkstyle to detect such problems.&lt;/p&gt;</comment>
                            <comment id="13438038" author="reschke" created="Mon, 20 Aug 2012 17:56:03 +0000"  >&lt;p&gt;For the record, the contract for equalsIgnoreCase:&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#equalsIgnoreCase%28java.lang.String%29&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#equalsIgnoreCase%28java.lang.String%29&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This may do the right thing for the Turkish locale, but I&apos;m not totally convinced it couldn&apos;t fail with other fancy locales. It&apos;s probably better to always specify the locale.&lt;/p&gt;</comment>
                            <comment id="13879995" author="tmueller" created="Thu, 23 Jan 2014 15:42:20 +0000"  >&lt;p&gt;There are currently 3 usages of String.toUpperCase in oak-core:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;PropertyDefinitionTemplateImpl.java (probably the English locale should be used)&lt;/li&gt;
	&lt;li&gt;UpperCaseImpl (for the query condition &quot;upper(...)&quot;)&lt;/li&gt;
	&lt;li&gt;xpath Expression (equalsIgnoreCase can be used)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I think I&apos;ll keep it open and try to fix / document those cases.&lt;/p&gt;</comment>
                            <comment id="13883912" author="tmueller" created="Tue, 28 Jan 2014 08:45:28 +0000"  >&lt;p&gt;Revision 1562006&lt;/p&gt;</comment>
                            <comment id="13989464" author="tmueller" created="Mon, 5 May 2014 12:33:38 +0000"  >&lt;p&gt;There are still a few cases:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;grep -R --include=*.java &quot;toLowerCase()&quot; .
./oak-core/src/main/java/org/apache/jackrabbit/oak/query/ast/LowerCaseImpl.java:        
  // TODO toLowerCase(): document the Turkish locale problem
./oak-core/src/main/java/org/apache/jackrabbit/oak/query/ast/LowerCaseImpl.java:        
  return PropertyValues.newString(value.toLowerCase());
./oak-core/src/main/java/org/apache/jackrabbit/oak/query/fulltext/FullTextTerm.java:           
  this.filteredText = buff.toString().toLowerCase();
./oak-core/src/main/java/org/apache/jackrabbit/oak/query/fulltext/FullTextTerm.java:        
  value = value.toLowerCase();
./oak-core/src/main/java/org/apache/jackrabbit/oak/security/user/AuthorizableBaseProvider.java:       
  return generateUUID(authorizableId.toLowerCase());
./oak-jcr/src/test/java/org/apache/jackrabbit/oak/jcr/security/user/UserImportTest.java:       
  assertTrue(pwValue.toLowerCase().startsWith(&quot;{sha&quot;));
./oak-mk-remote/src/main/java/org/apache/jackrabbit/mk/server/Request.java:               
  headers.put(parts[0].trim().toLowerCase(), parts[1].trim());

grep -R --include=*.java &quot;toUpperCase()&quot; .
./oak-core/src/main/java/org/apache/jackrabbit/oak/query/ast/UpperCaseImpl.java:        
  return PropertyValues.newString(value.toUpperCase());
./oak-jcr/src/test/java/org/apache/jackrabbit/oak/jcr/JackrabbitNodeTest.java:                
  node.rename(name.toUpperCase());
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14111375" author="hossman" created="Tue, 26 Aug 2014 21:33:10 +0000"  >&lt;p&gt;FWIW: Locale.ROOT and the non-platform default methods can help you avoid this type of problem.&lt;/p&gt;

&lt;p&gt;And the forbidden-apis checker can help ensure that you only use the non-platform default methods...&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://blog.thetaphi.de/2012/07/default-locales-default-charsets-and.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://blog.thetaphi.de/2012/07/default-locales-default-charsets-and.html&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://code.google.com/p/forbidden-apis/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://code.google.com/p/forbidden-apis/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14638564" author="tmueller" created="Thu, 23 Jul 2015 09:39:46 +0000"  >&lt;p&gt;Locale.ROOT: that&apos;s interesting, I didn&apos;t know about that.&lt;/p&gt;

&lt;p&gt;Closing this issue now, even thought the locale dependent methods are still used in the same places.&lt;/p&gt;</comment>
                            <comment id="15175946" author="edivad" created="Wed, 2 Mar 2016 16:48:06 +0000"  >&lt;p&gt;Bulk closing for 1.4. &lt;/p&gt;

&lt;p&gt;Issues that have never been closed during the 1.3.x DLC&lt;/p&gt;</comment>
                            <comment id="16877821" author="tmueller" created="Wed, 3 Jul 2019 13:03:21 +0000"  >&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/r1862464&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1862464&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>308838</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 19 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1ldzn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>284608</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>