<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:44:40 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[OAK-1899] Ordered index fails with old index content</title>
                <link>https://issues.apache.org/jira/browse/OAK-1899</link>
                <project id="12313221" key="OAK">Jackrabbit Oak</project>
                    <description>&lt;p&gt;With the latest changes, the ordered index no longer works with old index data. When running the latest Oak 1.0.2 snapshot run against an Oak 1.0.0 repository with an existing ordered index, the index fails with the exception below.&lt;/p&gt;

&lt;p&gt;As a workaround, the ordered index can be manually re-built. Either the index re-build needs to be automatic, or the ordered index needs to work with the old index content.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.lang.IndexOutOfBoundsException: index (3) must be less than size (1)
    at com.google.common.base.Preconditions.checkElementIndex(Preconditions.java:306)
    at com.google.common.base.Preconditions.checkElementIndex(Preconditions.java:285)
    at org.apache.jackrabbit.oak.plugins.segment.SegmentPropertyState.getValue(SegmentPropertyState.java:157)
    at org.apache.jackrabbit.oak.plugins.index.property.strategy.OrderedContentMirrorStoreStrategy.getPropertyNext(OrderedContentMirrorStoreStrategy.java:1024)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12721844">OAK-1899</key>
            <summary>Ordered index fails with old index content</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="edivad">Davide Giannella</assignee>
                                    <reporter username="thomasm">Thomas Mueller</reporter>
                        <labels>
                    </labels>
                <created>Wed, 18 Jun 2014 05:59:52 +0000</created>
                <updated>Tue, 8 Oct 2019 15:21:28 +0000</updated>
                            <resolved>Fri, 20 Jun 2014 15:00:54 +0000</resolved>
                                                    <fixVersion>1.0.2</fixVersion>
                    <fixVersion>1.1.0</fixVersion>
                                    <component>query</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14034886" author="edivad" created="Wed, 18 Jun 2014 06:42:34 +0000"  >&lt;p&gt;I would say without looking at the code that it&apos;s definitely the&lt;br/&gt;
implementation of the skiplist that expects an array (multi-value&lt;br/&gt;
property) of 4 elements (lanes) as &lt;tt&gt;:next&lt;/tt&gt; property while the&lt;br/&gt;
previous implementation had only a &lt;tt&gt;String&lt;/tt&gt; type for &lt;tt&gt;:next&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;Workaround: rebuild the index.&lt;/p&gt;
</comment>
                            <comment id="14034970" author="edivad" created="Wed, 18 Jun 2014 07:45:43 +0000"  >&lt;p&gt;Attaching a proposal patch. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thomasm&quot; class=&quot;user-hover&quot; rel=&quot;thomasm&quot;&gt;thomasm&lt;/a&gt; could you please give a look? If ok I&apos;ll commit it.&lt;/p&gt;
</comment>
                            <comment id="14035627" author="edivad" created="Wed, 18 Jun 2014 12:13:52 +0000"  >&lt;p&gt;Spoke with Thomas offline and attaching a second version with some improvements.&lt;/p&gt;</comment>
                            <comment id="14035669" author="edivad" created="Wed, 18 Jun 2014 13:07:09 +0000"  >&lt;p&gt;committed a slightly modified version in &lt;a href=&quot;http://svn.apache.org/r1603441&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1603441&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14035678" author="edivad" created="Wed, 18 Jun 2014 13:14:04 +0000"  >&lt;p&gt;merged in 1.0 at &lt;a href=&quot;http://svn.apache.org/r1603447&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1603447&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14038686" author="edivad" created="Fri, 20 Jun 2014 11:19:20 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;java.lang.ArrayIndexOutOfBoundsException: 3
        at org.apache.jackrabbit.oak.plugins.index.property.strategy.OrderedContentMirrorStoreStrategy.setPropertyNext(OrderedContentMirrorStoreStrategy.java:1001)
        at org.apache.jackrabbit.oak.plugins.index.property.strategy.OrderedContentMirrorStoreStrategy.prune(OrderedContentMirrorStoreStrategy.java:174)
        at org.apache.jackrabbit.oak.plugins.index.property.strategy.ContentMirrorStoreStrategy.remove(ContentMirrorStoreStrategy.java:103)
        at org.apache.jackrabbit.oak.plugins.index.property.strategy.ContentMirrorStoreStrategy.update(ContentMirrorStoreStrategy.java:77)
        at org.apache.jackrabbit.oak.plugins.index.property.PropertyIndexEditor.leave(PropertyIndexEditor.java:261)
        at org.apache.jackrabbit.oak.plugins.index.property.OrderedPropertyIndexEditor.leave(OrderedPropertyIndexEditor.java:42)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Reopening. Sorry about that&lt;/p&gt;</comment>
                            <comment id="14038751" author="edivad" created="Fri, 20 Jun 2014 12:50:56 +0000"  >&lt;p&gt;fixed &lt;tt&gt;setPropertyNext&lt;/tt&gt; in trunk at &lt;a href=&quot;http://svn.apache.org/r1604166&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1604166&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14038774" author="edivad" created="Fri, 20 Jun 2014 13:24:09 +0000"  >&lt;p&gt;merged into 1.0 branch at &lt;a href=&quot;http://svn.apache.org/r1604169&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1604169&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12651116" name="OAK-1899-r2.patch" size="3435" author="edivad" created="Wed, 18 Jun 2014 12:13:52 +0000"/>
                            <attachment id="12650994" name="OAK-1899.patch" size="3313" author="edivad" created="Wed, 18 Jun 2014 07:45:43 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>400040</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 22 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1wv4n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>400140</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>