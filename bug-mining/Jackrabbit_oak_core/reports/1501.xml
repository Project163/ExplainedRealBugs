<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:50:51 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[OAK-4503] Update count increases with rebase</title>
                <link>https://issues.apache.org/jira/browse/OAK-4503</link>
                <project id="12313221" key="OAK">Jackrabbit Oak</project>
                    <description>&lt;p&gt;The update count in &lt;tt&gt;DocumentRootBuilder&lt;/tt&gt; increases with the number of changes in memory when &lt;tt&gt;rebase()&lt;/tt&gt; is called. The update count should stay the same because a rebase does not affect the number of in-memory changes.&lt;/p&gt;

&lt;p&gt;This may lead to premature creation of a branch when pending changes are rebased too often. E.g. when Node.isLocked() is called frequently.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12982581">OAK-4503</key>
            <summary>Update count increases with rebase</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mreutegg">Marcel Reutegger</assignee>
                                    <reporter username="mreutegg">Marcel Reutegger</reporter>
                        <labels>
                    </labels>
                <created>Fri, 24 Jun 2016 06:29:16 +0000</created>
                <updated>Wed, 2 Nov 2016 11:13:31 +0000</updated>
                            <resolved>Tue, 28 Jun 2016 14:47:01 +0000</resolved>
                                    <version>1.0</version>
                    <version>1.2</version>
                    <version>1.4</version>
                                    <fixVersion>1.0.33</fixVersion>
                    <fixVersion>1.2.18</fixVersion>
                    <fixVersion>1.4.6</fixVersion>
                    <fixVersion>1.5.5</fixVersion>
                    <fixVersion>1.6.0</fixVersion>
                                    <component>core</component>
                    <component>documentmk</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15348044" author="catholicon" created="Fri, 24 Jun 2016 09:18:00 +0000"  >&lt;blockquote&gt;&lt;p&gt;The update count should stay the same because a rebase does not affect the number of in-memory changes.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Actually, I think rebase() does change in-memory count ... the only example I can think of is creation of intermediate nodes under property indices. So, maybe, we should reset to 0 on rebase() and count again.&lt;/p&gt;</comment>
                            <comment id="15348045" author="mreutegg" created="Fri, 24 Jun 2016 09:18:26 +0000"  >&lt;p&gt;Added ignored test to trunk: &lt;a href=&quot;http://svn.apache.org/r1750052&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1750052&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15348049" author="mreutegg" created="Fri, 24 Jun 2016 09:20:51 +0000"  >&lt;blockquote&gt;&lt;p&gt;So, maybe, we should reset to 0 on rebase() and count again.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes, I think that&apos;s the correct fix. In-memory changes are re-applied with &lt;tt&gt;ConflictAnnotatingRebaseDiff&lt;/tt&gt; and the update count will then be updated accordingly.&lt;/p&gt;</comment>
                            <comment id="15348082" author="reschke" created="Fri, 24 Jun 2016 09:55:18 +0000"  >&lt;p&gt;If we fix this, do we need to alert users that changing the default limit through the system property can then lead to a major change with respect to how much memory might be needed?&lt;/p&gt;</comment>
                            <comment id="15350466" author="mreutegg" created="Mon, 27 Jun 2016 06:20:43 +0000"  >&lt;p&gt;In some cases, like the one with frequent lock() calls, the memory usage will indeed go up. Without rebase() calls, either explicitly or by some other JCR calls, the memory usage will still be the same. I&apos;ll add a sentence in the release notes about this when I commit the fix.&lt;/p&gt;</comment>
                            <comment id="15353115" author="mreutegg" created="Tue, 28 Jun 2016 14:47:01 +0000"  >&lt;p&gt;Fixed in trunk: &lt;a href=&quot;http://svn.apache.org/r1750462&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1750462&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15364275" author="catholicon" created="Wed, 6 Jul 2016 13:08:26 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mreutegg&quot; class=&quot;user-hover&quot; rel=&quot;mreutegg&quot;&gt;mreutegg&lt;/a&gt;, is it ok if I backport this? Do we want &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-4536&quot; title=&quot;Avoid premature branch&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-4536&quot;&gt;&lt;del&gt;OAK-4536&lt;/del&gt;&lt;/a&gt; as well?&lt;/p&gt;</comment>
                            <comment id="15370675" author="dominique.jaeggi" created="Mon, 11 Jul 2016 12:42:40 +0000"  >&lt;p&gt;bulk close after 1.5.5 release&lt;/p&gt;</comment>
                            <comment id="15395576" author="catholicon" created="Wed, 27 Jul 2016 12:29:00 +0000"  >&lt;p&gt;Backported &lt;a href=&quot;https://svn.apache.org/r1750052&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1750052&lt;/a&gt; and &lt;a href=&quot;https://svn.apache.org/r1750462&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1750462&lt;/a&gt; to 1.4 (&lt;a href=&quot;http://svn.apache.org/r1754259&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1754259&lt;/a&gt;), 1.2 (&lt;a href=&quot;https://svn.apache.org/r1754266&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1754266&lt;/a&gt;) and 1.0 (&lt;a href=&quot;https://svn.apache.org/r1754269&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;r1754269&lt;/a&gt;).&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12840750">OAK-3036</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12986818">OAK-4536</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 16 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i300l3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>