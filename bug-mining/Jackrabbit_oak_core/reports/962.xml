<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:45:07 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[OAK-1972] Async property index update may fail on DocumentMK with more than 100 index changes</title>
                <link>https://issues.apache.org/jira/browse/OAK-1972</link>
                <project id="12313221" key="OAK">Jackrabbit Oak</project>
                    <description>&lt;p&gt;The &lt;tt&gt;AsyncUpdateCallback&lt;/tt&gt; gets notified whenever an editor updates the index via &lt;tt&gt;indexUpdate()&lt;/tt&gt;. After every 100 changes the callback checks the lease time and extends the lease if necessary. In combination with &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-1968&quot; title=&quot;Wrong time unit for async index lease time&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-1968&quot;&gt;&lt;del&gt;OAK-1968&lt;/del&gt;&lt;/a&gt; and more than 100 index changes, this will likely lead to an async-lease update in a separate commit from within the commit editor. Because of the way how &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-1056&quot; title=&quot;Transient changes contributed by commit hooks are kept in memory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-1056&quot;&gt;&lt;del&gt;OAK-1056&lt;/del&gt;&lt;/a&gt; was fixed, this commit is mixed with the surrounding commit and may lead to a conflict or otherwise fail the commit.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12727610">OAK-1972</key>
            <summary>Async property index update may fail on DocumentMK with more than 100 index changes</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mreutegg">Marcel Reutegger</assignee>
                                    <reporter username="mreutegg">Marcel Reutegger</reporter>
                        <labels>
                    </labels>
                <created>Wed, 16 Jul 2014 08:24:52 +0000</created>
                <updated>Wed, 1 Oct 2014 13:09:57 +0000</updated>
                            <resolved>Thu, 17 Jul 2014 08:09:05 +0000</resolved>
                                    <version>1.0.1</version>
                    <version>1.0.2</version>
                                    <fixVersion>1.0.3</fixVersion>
                    <fixVersion>1.1.0</fixVersion>
                                    <component>core</component>
                    <component>mongomk</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="14063594" author="mreutegg" created="Wed, 16 Jul 2014 15:14:39 +0000"  >&lt;p&gt;Turns out the described nested commit is not the root cause for the index update failure I saw.&lt;/p&gt;

&lt;p&gt;What actually happens is, that the frequent async-lease update triggered a document split and reading on an older revision on the split document returns an outdated property.&lt;/p&gt;</comment>
                            <comment id="14063597" author="mreutegg" created="Wed, 16 Jul 2014 15:18:19 +0000"  >&lt;p&gt;Added a test (currently ignored) to reproduce the issue: &lt;a href=&quot;http://svn.apache.org/r1611041&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1611041&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14064693" author="mreutegg" created="Thu, 17 Jul 2014 08:09:05 +0000"  >&lt;p&gt;Fixed in trunk: &lt;a href=&quot;http://svn.apache.org/r1611277&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1611277&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14064715" author="mreutegg" created="Thu, 17 Jul 2014 08:39:38 +0000"  >&lt;p&gt;Merged test and fix into 1.0 branch in &lt;a href=&quot;http://svn.apache.org/r1611285&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1611285&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>405716</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 18 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1xthz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>405738</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>