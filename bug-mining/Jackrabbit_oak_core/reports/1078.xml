<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:46:25 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[OAK-2322] Compaction estimation includes all data segments</title>
                <link>https://issues.apache.org/jira/browse/OAK-2322</link>
                <project id="12313221" key="OAK">Jackrabbit Oak</project>
                    <description>&lt;p&gt;The original design of the compaction estimator was to only focus on binary segments when computing the amount of garbage that can be collected.&lt;br/&gt;
This has a flaw when it runs on systems with external data stores configured as there will be almost no binary segments and the estimation will always be &lt;em&gt;0&lt;/em&gt;, no need for compaction.&lt;/p&gt;

&lt;p&gt;The change to include all segments is not big, the &lt;em&gt;uuids&lt;/em&gt; bloomfilter is already initialized with the total number of segments, and the segment collection already loads everything in memory.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12759635">OAK-2322</key>
            <summary>Compaction estimation includes all data segments</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stillalex">Alex Deparvu</assignee>
                                    <reporter username="stillalex">Alex Deparvu</reporter>
                        <labels>
                            <label>compaction</label>
                            <label>gc</label>
                    </labels>
                <created>Fri, 5 Dec 2014 09:09:58 +0000</created>
                <updated>Thu, 15 Jan 2015 14:48:35 +0000</updated>
                            <resolved>Mon, 8 Dec 2014 10:11:44 +0000</resolved>
                                                    <fixVersion>1.0.9</fixVersion>
                    <fixVersion>1.1.3</fixVersion>
                                    <component>core</component>
                    <component>segmentmk</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14235291" author="alex.parvulescu" created="Fri, 5 Dec 2014 09:12:08 +0000"  >&lt;p&gt;More to the point, where there are cleared checkpoints in a system with external data store, those will never get reported as garbage.&lt;/p&gt;</comment>
                            <comment id="14235298" author="alex.parvulescu" created="Fri, 5 Dec 2014 09:22:07 +0000"  >&lt;p&gt;proposed patch. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mduerig&quot; class=&quot;user-hover&quot; rel=&quot;mduerig&quot;&gt;mduerig&lt;/a&gt; feedback?&lt;/p&gt;</comment>
                            <comment id="14236067" author="mduerig" created="Fri, 5 Dec 2014 20:35:28 +0000"  >&lt;p&gt;Looks good. Just a bit of nitpicking: &lt;tt&gt;collectBulkSegments&lt;/tt&gt; should probably be renamed to &lt;tt&gt;collectSegments&lt;/tt&gt; because this is about all segments now. Any reason for making the class public?&lt;/p&gt;</comment>
                            <comment id="14237717" author="alex.parvulescu" created="Mon, 8 Dec 2014 10:11:44 +0000"  >&lt;p&gt;fixed in trunk &lt;a href=&quot;http://svn.apache.org/r1643774&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1643774&lt;/a&gt;&lt;br/&gt;
on 1.0 with r1643775, r1643776&lt;/p&gt;</comment>
                            <comment id="14244335" author="edivad" created="Fri, 12 Dec 2014 16:05:58 +0000"  >&lt;p&gt;Bulk close for 1.1.3&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12748055">OAK-2192</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12685290" name="OAK-2322.patch" size="2746" author="stillalex" created="Fri, 5 Dec 2014 09:22:07 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 49 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i233b3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>