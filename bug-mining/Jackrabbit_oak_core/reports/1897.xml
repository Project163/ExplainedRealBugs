<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:54:49 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[OAK-10451] UserPrincipalProvider may cause many conflicts when under load</title>
                <link>https://issues.apache.org/jira/browse/OAK-10451</link>
                <project id="12313221" key="OAK">Jackrabbit Oak</project>
                    <description>&lt;p&gt;UserPrincipalProvider can be configured to periodically cache group membership by writing group principals on a rep:cache node. This will result in thundering herd problem when the system is under load and the expiration time for the cache is reached. Incoming requests that authenticate concurrently will all try to refresh the cache and cause conflicts because each request tries to set a new expiration time that is slightly different from the others.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13551515">OAK-10451</key>
            <summary>UserPrincipalProvider may cause many conflicts when under load</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="nscendoni">Nicola Scendoni</reporter>
                        <labels>
                    </labels>
                <created>Thu, 21 Sep 2023 10:22:17 +0000</created>
                <updated>Thu, 11 Jul 2024 03:31:39 +0000</updated>
                            <resolved>Mon, 1 Jul 2024 14:28:46 +0000</resolved>
                                                    <fixVersion>1.66.0</fixVersion>
                                    <component>core</component>
                    <component>security</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                                                            <comments>
                            <comment id="17771830" author="anchela" created="Wed, 4 Oct 2023 11:48:19 +0000"  >&lt;p&gt;hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nscendoni&quot; class=&quot;user-hover&quot; rel=&quot;nscendoni&quot;&gt;nscendoni&lt;/a&gt;, thanks for reporting this ticket. since have been working on this i added you to the contributors list and assigned the ticket to you. hope that is ok for you.&lt;/p&gt;</comment>
                            <comment id="17773734" author="nscendoni" created="Tue, 10 Oct 2023 15:45:27 +0000"  >&lt;p&gt;PR:&#160;&lt;a href=&quot;https://github.com/apache/jackrabbit-oak/pull/1128&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jackrabbit-oak/pull/1128/files&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17825231" author="reschke" created="Mon, 11 Mar 2024 09:20:18 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nscendoni&quot; class=&quot;user-hover&quot; rel=&quot;nscendoni&quot;&gt;nscendoni&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=angela&quot; class=&quot;user-hover&quot; rel=&quot;angela&quot;&gt;angela&lt;/a&gt;:&lt;/p&gt;

&lt;p&gt;Was this bug fixed? If so, is fixVersion of 1.62.0 correct? I assume no?&lt;/p&gt;</comment>
                            <comment id="17825248" author="nscendoni" created="Mon, 11 Mar 2024 10:22:56 +0000"  >&lt;p&gt;It looks that the issue was resolved by &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-10471&quot; title=&quot;Implement ConflictHandler for UserPrincipalProvider Cache&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-10471&quot;&gt;&lt;del&gt;OAK-10471&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I close this ticket without merging the linked PR.&lt;/p&gt;</comment>
                            <comment id="17854326" author="reschke" created="Wed, 12 Jun 2024 08:54:07 +0000"  >&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[WARNING] Files with unapproved licenses:
  /home/jenkins/jenkins-agent/workspace/Jackrabbit/jackrabbit-oak-trunk/oak-core/src/test/java/org/apache/jackrabbit/oak/security/user/PrincipalMembershipReaderTest.java
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17854649" author="anchela" created="Thu, 13 Jun 2024 07:10:00 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=reschke&quot; class=&quot;user-hover&quot; rel=&quot;reschke&quot;&gt;reschke&lt;/a&gt;, sorry for that. i fixed it yesterday.&lt;/p&gt;</comment>
                            <comment id="17861062" author="reschke" created="Mon, 1 Jul 2024 05:00:24 +0000"  >&lt;p&gt;CachedPrincipalMembershipReaderTest seems to fail on Java 17: &lt;a href=&quot;https://ci-builds.apache.org/job/Jackrabbit/job/jackrabbit-oak-trunk-java17/org.apache.jackrabbit$oak-core/35/testReport/org.apache.jackrabbit.oak.security.user/CachedPrincipalMembershipReaderTest/testReadMembershipForNonUser_name_Cache_Max_Stale___10000_/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-builds.apache.org/job/Jackrabbit/job/jackrabbit-oak-trunk-java17/org.apache.jackrabbit$oak-core/35/testReport/org.apache.jackrabbit.oak.security.user/CachedPrincipalMembershipReaderTest/testReadMembershipForNonUser_name_Cache_Max_Stale___10000_/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nscendoni&quot; class=&quot;user-hover&quot; rel=&quot;nscendoni&quot;&gt;nscendoni&lt;/a&gt; - could you please have a look?&lt;/p&gt;

&lt;p&gt;(re-opened)&lt;/p&gt;

&lt;p&gt;Seems that is used to overwrite the logger for the tested class; this is entirely unneeded because we have &lt;tt&gt;LogCustomizer&lt;/tt&gt; for that.&lt;/p&gt;</comment>
                            <comment id="17861182" author="baedke" created="Mon, 1 Jul 2024 14:28:14 +0000"  >&lt;p&gt;Fixed CachedPrincipalMembershipReaderTest: &lt;a href=&quot;https://github.com/apache/jackrabbit-oak/commit/50112fc0c7087cfdc68285d115baa0de4f602e29&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;50112fc0&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310660">
                    <name>Completes</name>
                                                                <inwardlinks description="is fixed by">
                                        <issuelink>
            <issuekey id="13553082">OAK-10471</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                            <outwardlinks description="incorporates">
                                        <issuelink>
            <issuekey id="13553082">OAK-10471</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="13063459" name="LoginTest_20231010_172626_with_patch.csv" size="597" author="nscendoni" created="Tue, 10 Oct 2023 15:43:10 +0000"/>
                            <attachment id="13063458" name="LoginTest_20231010_173013_without_patch.csv" size="597" author="nscendoni" created="Tue, 10 Oct 2023 15:43:10 +0000"/>
                    </attachments>
                <subtasks>
                            <subtask id="13553858">OAK-10488</subtask>
                            <subtask id="13557063">OAK-10540</subtask>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 18 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1ki3s:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>