<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:54:51 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[OAK-11529] Infinite recursion in AstElement (for some platforms and configs)</title>
                <link>https://issues.apache.org/jira/browse/OAK-11529</link>
                <project id="12313221" key="OAK">Jackrabbit Oak</project>
                    <description>&lt;p&gt;Seen in&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://ci-builds.apache.org/job/Jackrabbit/job/jackrabbit-oak-trunk-derby-ibm-java21/90/org.apache.jackrabbit$oak-jcr/testReport/junit/org.apache.jackrabbit.oak.jcr.document/GetMixinNodeTypesTest/getMixinNodeTypes/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-builds.apache.org/job/Jackrabbit/job/jackrabbit-oak-trunk-derby-ibm-java21/90/org.apache.jackrabbit$oak-jcr/testReport/junit/org.apache.jackrabbit.oak.jcr.document/GetMixinNodeTypesTest/getMixinNodeTypes/&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Fehlermeldung

Stack overflow during pattern compilation
]

Stacktrace

java.util.regex.PatternSyntaxException: 
Stack overflow during pattern compilation
]
	at java.base/java.util.regex.Pattern.error(Pattern.java:2204)
	at java.base/java.util.regex.Pattern.&amp;lt;init&amp;gt;(Pattern.java:1578)
	at java.base/java.util.regex.Pattern.compile(Pattern.java:1101)
	at java.base/java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;.replaceAll(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;.java:3837)
	at org.apache.jackrabbit.oak.query.ast.AstElement.quote(AstElement.java:45)
	at org.apache.jackrabbit.oak.query.ast.SelectorImpl.toString(SelectorImpl.java:261)
	at java.base/java.lang.StringConcatHelper.stringOf(StringConcatHelper.java:467)
	at org.apache.jackrabbit.oak.query.ast.SelectorImpl.toString(SelectorImpl.java:261)
	at java.base/java.lang.StringConcatHelper.stringOf(StringConcatHelper.java:467)
	at org.apache.jackrabbit.oak.query.ast.SelectorImpl.toString(SelectorImpl.java:261)
	at java.base/java.lang.StringConcatHelper.stringOf(StringConcatHelper.java:467)
...
	at java.base/java.lang.StringConcatHelper.stringOf(StringConcatHelper.java:467)
	at org.apache.jackrabbit.oak.query.ast.SelectorImpl.toString(SelectorImpl.java:261)
	at org.apache.jackrabbit.oak.query.ast.SelectorImpl.getPlan(SelectorImpl.java:414)
	at org.apache.jackrabbit.oak.query.QueryImpl.getPlan(QueryImpl.java:708)
	at org.apache.jackrabbit.oak.query.QueryImpl.getRows(QueryImpl.java:615)
	at org.apache.jackrabbit.oak.query.ResultImpl$1.iterator(ResultImpl.java:72)
	at org.apache.jackrabbit.oak.plugins.identifier.IdentifierManager.resolveUUIDToTree(IdentifierManager.java:353)
	at org.apache.jackrabbit.oak.plugins.identifier.IdentifierManager.getTree(IdentifierManager.java:135)
	at org.apache.jackrabbit.oak.security.user.AuthorizableBaseProvider.getByContentID(AuthorizableBaseProvider.java:59)
	at org.apache.jackrabbit.oak.security.user.AuthorizableBaseProvider.getByID(AuthorizableBaseProvider.java:54)
	at org.apache.jackrabbit.oak.security.user.UserProvider.getAuthorizable(UserProvider.java:209)
	at org.apache.jackrabbit.oak.security.user.UserManagerImpl.getAuthorizable(UserManagerImpl.java:125)
	at org.apache.jackrabbit.oak.security.user.UserInitializer.initialize(UserInitializer.java:141)
	at org.apache.jackrabbit.oak.OakInitializer.initialize(OakInitializer.java:59)
	at org.apache.jackrabbit.oak.Oak.initialContent(Oak.java:715)
	at org.apache.jackrabbit.oak.Oak.createNewContentRepository(Oak.java:745)

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13609832">OAK-11529</key>
            <summary>Infinite recursion in AstElement (for some platforms and configs)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="reschke">Julian Reschke</reporter>
                        <labels>
                    </labels>
                <created>Wed, 26 Feb 2025 08:56:27 +0000</created>
                <updated>Mon, 7 Apr 2025 21:26:28 +0000</updated>
                            <resolved>Thu, 27 Feb 2025 12:19:25 +0000</resolved>
                                    <version>1.76.0</version>
                                    <fixVersion>1.78.0</fixVersion>
                                    <component>query</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17930603" author="reschke" created="Wed, 26 Feb 2025 08:59:07 +0000"  >&lt;p&gt;Note that this only seems to happen on Apache Jenkins CI with IBM JDK  21 and Derby profile.&lt;/p&gt;

&lt;p&gt;The test however only uses MemoryDocumentStore.&lt;/p&gt;

&lt;p&gt;I tried to repro this locally with IBM JDK 21 and was not able to.&lt;/p&gt;

&lt;p&gt;Last successful run on Apache Jenkins around early January.&lt;/p&gt;

&lt;p&gt;How do we debug this?&lt;/p&gt;</comment>
                            <comment id="17930604" author="reschke" created="Wed, 26 Feb 2025 09:06:41 +0000"  >&lt;p&gt;Created&lt;/p&gt;

&lt;p&gt; &lt;a href=&quot;https://ci-builds.apache.org/job/Jackrabbit/job/Apache%20Jackrabbit%20Oak%20Jenkins%20job%20(IBM%20Java%2021)/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-builds.apache.org/job/Jackrabbit/job/Apache%20Jackrabbit%20Oak%20Jenkins%20job%20(IBM%20Java%2021)/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;to test with &quot;regular&quot; repo.&lt;/p&gt;</comment>
                            <comment id="17930642" author="tmueller" created="Wed, 26 Feb 2025 10:22:40 +0000"  >&lt;p&gt;Hm, I don&apos;t understand how this could result in a recursion... I am reluctant to say this, but it looks like a JVM issue to me.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;    protected String quote(String pathOrName) {
        pathOrName = pathOrName.replaceAll(&quot;]&quot;, &quot;]]&quot;);  &amp;lt;== AstElement.java:45
        return &apos;[&apos; + pathOrName + &apos;]&apos;;
    }

    @Override
    public String toString() {
        return quote(nodeTypeName) + &quot; as &quot; + quote(selectorName); &amp;lt;== SelectorImpl.java:261
    }

    @Override
    public String getPlan(NodeState rootState) {
        StringBuilder buff = new StringBuilder();
        buff.append(toString()); &amp;lt;== SelectorImpl.java:414


StringConcatHelper.stringOf
    static String stringOf(Object value) {
        String s;
        return (value == null || (s = value.toString()) == null) ? &quot;null&quot; : s;
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17930662" author="baedke" created="Wed, 26 Feb 2025 12:32:58 +0000"  >&lt;p&gt;Yes, I also think that it&apos;s a JDK issue: &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
SelectorImpl#toString() -&amp;gt; SelectorImpl.quote(): uses string concatenation -&amp;gt; StringConcatHelper#stringOf(&amp;lt;SelectorImpl object&amp;gt;) -&amp;gt; SelectorImpl#toString(). 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Then it should always happen with Java21, if DEBUG logging ist enabled (because it calls #getPlan()). No idea why it&apos;s enabled here, btw.&lt;/p&gt;</comment>
                            <comment id="17930682" author="tmueller" created="Wed, 26 Feb 2025 13:26:55 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/jackrabbit-oak/pull/2120&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jackrabbit-oak/pull/2120&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17931138" author="reschke" created="Thu, 27 Feb 2025 12:19:25 +0000"  >&lt;p&gt;Closing this as &quot;fixed&quot; for now.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            36 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1ug08:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>