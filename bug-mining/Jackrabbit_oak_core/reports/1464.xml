<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:50:30 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[OAK-4039] The package o.a.j.o.query exposes multiple classes from unexported packages</title>
                <link>https://issues.apache.org/jira/browse/OAK-4039</link>
                <project id="12313221" key="OAK">Jackrabbit Oak</project>
                    <description>&lt;p&gt;Multiple exported classes in &lt;tt&gt;org.apache.jackrabbit.oak.query&lt;/tt&gt; use in their public API other classes from unexported packages. &lt;tt&gt;org.apache.jackrabbit.oak.query.plan.SelectorExecutionPlan&lt;/tt&gt;, &lt;tt&gt;org.apache.jackrabbit.oak.query.index.FilterImpl&lt;/tt&gt;, and multiple classes from &lt;tt&gt;org.apache.jackrabbit.oak.query.ast&lt;/tt&gt; are used in the public APIs of many other classes from &lt;tt&gt;org.apache.jackrabbit.oak.query&lt;/tt&gt; but they are not exported by their relative packages.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12941337">OAK-4039</key>
            <summary>The package o.a.j.o.query exposes multiple classes from unexported packages</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="thomasm">Thomas Mueller</assignee>
                                    <reporter username="frm">Francesco Mari</reporter>
                        <labels>
                    </labels>
                <created>Tue, 23 Feb 2016 09:14:04 +0000</created>
                <updated>Tue, 8 Oct 2019 15:21:25 +0000</updated>
                            <resolved>Thu, 10 Nov 2016 09:19:45 +0000</resolved>
                                                                    <component>core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="15167086" author="tmueller" created="Thu, 25 Feb 2016 11:09:19 +0000"  >&lt;p&gt;It looks like I have exported the package by mistake for &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-382&quot; title=&quot;JMX service to configure auto-cancel or long running queries&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-382&quot;&gt;&lt;del&gt;OAK-382&lt;/del&gt;&lt;/a&gt;. The class QueryEngineSettings doesn&apos;t actually need to be exported; it implements the interface org.apache.jackrabbit.oak.api.jmx.QueryEngineSettingsMBean which is exported.&lt;/p&gt;</comment>
                            <comment id="15167087" author="tmueller" created="Thu, 25 Feb 2016 11:10:53 +0000"  >&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/r1732286&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1732286&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15167332" author="alex.parvulescu" created="Thu, 25 Feb 2016 15:43:08 +0000"  >&lt;p&gt;I assume this is responsible for the following errors in &lt;tt&gt;oak-it-osgi&lt;/tt&gt;?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Running org.apache.jackrabbit.oak.osgi.OSGiIT
ERROR: Bundle org.apache.jackrabbit.oak-jcr [28] Error starting file:oak-it-osgi/target/test-bundles/oak-jcr.jar (org.osgi.framework.BundleException: Unresolved constraint in bundle org.apache.jackrabbit.oak-jcr [28]: Unable to resolve 28.0: missing requirement [28.0] osgi.wiring.&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt;; (osgi.wiring.&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt;=org.apache.jackrabbit.oak.query))
org.osgi.framework.BundleException: Unresolved constraint in bundle org.apache.jackrabbit.oak-jcr [28]: Unable to resolve 28.0: missing requirement [28.0] osgi.wiring.&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt;; (osgi.wiring.&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt;=org.apache.jackrabbit.oak.query)
	at org.apache.felix.framework.Felix.resolveBundleRevision(Felix.java:3974)
	at org.apache.felix.framework.Felix.startBundle(Felix.java:2037)
	at org.apache.felix.framework.Felix.setActiveStartLevel(Felix.java:1291)
	at org.apache.felix.framework.FrameworkStartLevelImpl.run(FrameworkStartLevelImpl.java:304)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:744)
ERROR: Bundle org.apache.jackrabbit.oak-lucene [29] Error starting file:oak-it-osgi/target/test-bundles/oak-lucene.jar (org.osgi.framework.BundleException: Unresolved constraint in bundle org.apache.jackrabbit.oak-lucene [29]: Unable to resolve 29.0: missing requirement [29.0] osgi.wiring.&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt;; (osgi.wiring.&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt;=org.apache.jackrabbit.oak.query))
org.osgi.framework.BundleException: Unresolved constraint in bundle org.apache.jackrabbit.oak-lucene [29]: Unable to resolve 29.0: missing requirement [29.0] osgi.wiring.&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt;; (osgi.wiring.&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt;=org.apache.jackrabbit.oak.query)
	at org.apache.felix.framework.Felix.resolveBundleRevision(Felix.java:3974)
	at org.apache.felix.framework.Felix.startBundle(Felix.java:2037)
	at org.apache.felix.framework.Felix.setActiveStartLevel(Felix.java:1291)
	at org.apache.felix.framework.FrameworkStartLevelImpl.run(FrameworkStartLevelImpl.java:304)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:744)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15171606" author="frm" created="Mon, 29 Feb 2016 09:03:35 +0000"  >&lt;p&gt;Removing the export statement for &lt;tt&gt;org.apache.jackrabbit.oak.query&lt;/tt&gt; breaks &lt;tt&gt;oak-jcr&lt;/tt&gt;, &lt;tt&gt;oak-lucene&lt;/tt&gt; and &lt;tt&gt;oak-solr-osgi&lt;/tt&gt;. The classes most frequently used are &lt;tt&gt;QueryEngineSettings&lt;/tt&gt; for &lt;tt&gt;oak-jcr&lt;/tt&gt;, and &lt;tt&gt;QueryImpl&lt;/tt&gt; for the other bundles.&lt;/p&gt;</comment>
                            <comment id="15171810" author="edivad" created="Mon, 29 Feb 2016 12:23:40 +0000"  >&lt;p&gt;This is breaking the build and currently blocking the 1.4.0 release. Shall we revert the commit? what are the implications of releasing 1.4 with these wrong package export? In the end we already delivered 1.2 and 1.0 with such as far as I understood.&lt;/p&gt;
</comment>
                            <comment id="15172120" author="edivad" created="Mon, 29 Feb 2016 16:46:05 +0000"  >&lt;p&gt;I can confirm that by reverting this single commit, the build gets green again (on my local). By looking at the time of the day I think it&apos;s better to wait for &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thomasm&quot; class=&quot;user-hover&quot; rel=&quot;thomasm&quot;&gt;thomasm&lt;/a&gt; and see if he can see a proper fix in a reasonable time.&lt;/p&gt;</comment>
                            <comment id="15173498" author="edivad" created="Tue, 1 Mar 2016 09:35:47 +0000"  >&lt;p&gt;By looking at oak-jcr it looks like it&apos;s currently not possible to not export &lt;/p&gt;
{org.apache.jackrabbit.oak.query}
&lt;p&gt; from oak-core as it&apos;s being used from both the &lt;tt&gt;main&lt;/tt&gt; as well as &lt;tt&gt;test&lt;/tt&gt;.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;$ find . -name *.java -exec grep -H &apos;org.apache.jackrabbit.oak.query&apos; {} \;
./src/main/java/org/apache/jackrabbit/oak/jcr/Jcr.java:import org.apache.jackrabbit.oak.query.QueryEngineSettings;
./src/test/java/org/apache/jackrabbit/oak/jcr/AbstractRepositoryTest.java:import org.apache.jackrabbit.oak.query.QueryEngineSettings;
./src/test/java/org/apache/jackrabbit/oak/jcr/OakDocumentRDBRepositoryStub.java:import org.apache.jackrabbit.oak.query.QueryEngineSettings;
./src/test/java/org/apache/jackrabbit/oak/jcr/OakMongoNSRepositoryStub.java:import org.apache.jackrabbit.oak.query.QueryEngineSettings;
./src/test/java/org/apache/jackrabbit/oak/jcr/OakTarMKRepositoryStub.java:import org.apache.jackrabbit.oak.query.QueryEngineSettings;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=frm&quot; class=&quot;user-hover&quot; rel=&quot;frm&quot;&gt;frm&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thomasm&quot; class=&quot;user-hover&quot; rel=&quot;thomasm&quot;&gt;thomasm&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chetanm&quot; class=&quot;user-hover&quot; rel=&quot;chetanm&quot;&gt;chetanm&lt;/a&gt; did I get this right?&lt;/p&gt;</comment>
                            <comment id="15173512" author="chetanm" created="Tue, 1 Mar 2016 09:51:07 +0000"  >&lt;blockquote&gt;&lt;p&gt;In the end we already delivered 1.2 and 1.0 with such as far as I understood.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;In such a case we should look into this post 1.4 unless some simpler fix can be determined. For now lets continue with the export&lt;/p&gt;</comment>
                            <comment id="15173523" author="edivad" created="Tue, 1 Mar 2016 10:01:58 +0000"  >&lt;p&gt;reverted commit with &lt;a href=&quot;http://svn.apache.org/r1733022&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1733022&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15173627" author="tmueller" created="Tue, 1 Mar 2016 11:24:59 +0000"  >&lt;p&gt;I see. It looks like QueryEngineSettings, and the constants in QueryImpl, needs to be moved to another package. For example org.apache.jackrabbit.oak.query.api. Is it a good idea to do that &lt;em&gt;after&lt;/em&gt; Oak 1.4?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 37 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2t7ev:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>