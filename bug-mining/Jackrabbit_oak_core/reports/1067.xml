<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:46:18 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[OAK-2077] Improve the resilence of the OrderedIndex for dangling links</title>
                <link>https://issues.apache.org/jira/browse/OAK-2077</link>
                <project id="12313221" key="OAK">Jackrabbit Oak</project>
                    <description>&lt;p&gt;It could happens that along the various lanes of the SkipList&lt;br/&gt;
implemented by the OrderedIndex we encounter dangling links to nodes&lt;br/&gt;
that has been previously removed.&lt;/p&gt;

&lt;p&gt;While it&apos;s not clear yet how to reproduce it on the &lt;tt&gt;prune()&lt;/tt&gt; side&lt;br/&gt;
we could improve the &lt;tt&gt;seek()&lt;/tt&gt; and maybe &lt;tt&gt;fetchKeyNode()&lt;/tt&gt; method&lt;br/&gt;
for considering the use case and optionally clean-up after it.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12739497">OAK-2077</key>
            <summary>Improve the resilence of the OrderedIndex for dangling links</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="edivad">Davide Giannella</assignee>
                                    <reporter username="edivad">Davide Giannella</reporter>
                        <labels>
                    </labels>
                <created>Fri, 5 Sep 2014 15:11:30 +0000</created>
                <updated>Tue, 7 Apr 2015 20:24:40 +0000</updated>
                            <resolved>Fri, 28 Nov 2014 16:04:56 +0000</resolved>
                                                    <fixVersion>1.0.9</fixVersion>
                    <fixVersion>1.1.3</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14224434" author="edivad" created="Tue, 25 Nov 2014 11:46:36 +0000"  >&lt;p&gt;Linking &lt;a href=&quot;https://issues.apache.org/jira/browse/OAK-2202&quot; title=&quot;OrderedIndex should not return the whole index on property=$value statement&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OAK-2202&quot;&gt;&lt;del&gt;OAK-2202&lt;/del&gt;&lt;/a&gt; as in case of backport it will have to backported as well.&lt;/p&gt;</comment>
                            <comment id="14228361" author="edivad" created="Fri, 28 Nov 2014 16:04:56 +0000"  >&lt;ul&gt;
	&lt;li&gt;trunk @ &lt;a href=&quot;http://svn.apache.org/r1642285&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1642285&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;1.0 @ &lt;a href=&quot;http://svn.apache.org/r1642315&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1642315&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;h3&gt;&lt;a name=&quot;howitworks&quot;&gt;&lt;/a&gt;how it works&lt;/h3&gt;

&lt;p&gt;When walking the skiplist if it encounter a dangling link it will&lt;br/&gt;
track a warning like&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;09:17:03.836 [main] WARN  o.a.j.o.p.i.p.s.OrderedContentMirrorStoreStrategy - Dangling link to &apos;value0021&apos; found on lane &apos;0&apos; for key &apos;value0003&apos;. Trying to clean it up. You may consider a reindex
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It will attempt to fix at most &lt;tt&gt;OrderedIndex.LANES+1&lt;/tt&gt; times for each&lt;br/&gt;
&lt;tt&gt;seek()&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;When encountering it while insert or pruning, that we have a&lt;br/&gt;
&lt;tt&gt;NodeBuilder&lt;/tt&gt; it will reset the wrong property setting it to&lt;br/&gt;
empty. This will truncate the list at the interested lane.&lt;/p&gt;

&lt;p&gt;Instead if it will be encountered while querying it will simply track&lt;br/&gt;
the warning message.&lt;/p&gt;
</comment>
                            <comment id="14244342" author="edivad" created="Fri, 12 Dec 2014 16:06:05 +0000"  >&lt;p&gt;Bulk close for 1.1.3&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12757085">OAK-2285</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12758357">OAK-2305</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310040">
                    <name>Required</name>
                                            <outwardlinks description="requires">
                                        <issuelink>
            <issuekey id="12748531">OAK-2202</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 49 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1zq7r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>