<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:48:39 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[OAK-3231] Change default maxCachedBinarySize to match lucene DEFAULT_BLOB_SIZE </title>
                <link>https://issues.apache.org/jira/browse/OAK-3231</link>
                <project id="12313221" key="OAK">Jackrabbit Oak</project>
                    <description>&lt;p&gt;The default for &lt;tt&gt;DataStoreBlobStore#maxCachedBinarySize&lt;/tt&gt; was supposed to be equal or greater than OakDirectory#DEFAULT_BLOB_SIZE. That default was increased to 32 * 1024 while here the default is still set to 17 * 1024. Also, there the newer lucene files uses IndexDefinition#DEFAULT_BLOB_SIZE which is 1024*1024 -1024.&lt;br/&gt;
We should increase the default to 1024 * 1024 i.e. 1MB &lt;/p&gt;</description>
                <environment></environment>
        <key id="12856089">OAK-3231</key>
            <summary>Change default maxCachedBinarySize to match lucene DEFAULT_BLOB_SIZE </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="amitjain">Amit Jain</assignee>
                                    <reporter username="amitjain">Amit Jain</reporter>
                        <labels>
                    </labels>
                <created>Fri, 14 Aug 2015 07:46:45 +0000</created>
                <updated>Wed, 2 Mar 2016 12:00:14 +0000</updated>
                            <resolved>Mon, 17 Aug 2015 07:23:31 +0000</resolved>
                                                    <fixVersion>1.0.19</fixVersion>
                    <fixVersion>1.2.4</fixVersion>
                    <fixVersion>1.3.4</fixVersion>
                    <fixVersion>1.4</fixVersion>
                                    <component>blob</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14696670" author="chetanm" created="Fri, 14 Aug 2015 07:58:53 +0000"  >&lt;p&gt;The new default is org.apache.jackrabbit.oak.plugins.index.lucene.IndexDefinition#DEFAULT_BLOB_SIZE 1024*1024-1024&lt;/p&gt;</comment>
                            <comment id="14696680" author="amitjain" created="Fri, 14 Aug 2015 08:09:34 +0000"  >&lt;p&gt;Ok, I thought that was just a configuration. So, should we change this also then OakDirectory#DEFAULT_BLOB_SIZE?&lt;/p&gt;</comment>
                            <comment id="14696713" author="chetanm" created="Fri, 14 Aug 2015 08:44:13 +0000"  >&lt;p&gt;OakDirectory#DEFAULT_BLOB_SIZE - Changing that was tricky as this change of size was meant to be gradual. Before this change the size was hardcoded and this change made it configurable. So the intention was that in absence of that config code would use OakDirectory#DEFAULT_BLOB_SIZE. Now with current code the blobSize is always sets as a property on the node. Lets keep it as is&lt;/p&gt;</comment>
                            <comment id="14696715" author="amitjain" created="Fri, 14 Aug 2015 08:47:19 +0000"  >&lt;p&gt;So, where will this be needed if its always set on the node?&lt;/p&gt;</comment>
                            <comment id="14696731" author="chetanm" created="Fri, 14 Aug 2015 09:01:03 +0000"  >&lt;p&gt;This needs to be set at IndexDefinition level. Once set any new index file that gets created would make use of the new size otherwise it uses the default size as defined in IndexDefinition&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.blobSize = getOptionalValue(defn, BLOB_SIZE, DEFAULT_BLOB_SIZE);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And then in OakDirectory while creating any new index file logic checks for the default value from &lt;tt&gt;IndexDefinition&lt;/tt&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    @Override
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; IndexOutput createOutput(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; name, IOContext context)
            &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
        checkArgument(!readOnly, &lt;span class=&quot;code-quote&quot;&gt;&quot;Read only directory&quot;&lt;/span&gt;);
        NodeBuilder file;
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!directoryBuilder.hasChildNode(name)) {
            file = directoryBuilder.child(name);
            file.setProperty(PROP_BLOB_SIZE, definition.getBlobSize());
        } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
            file = directoryBuilder.child(name);
        }
        fileNames.add(name);
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; OakIndexOutput(name, file);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14696748" author="amitjain" created="Fri, 14 Aug 2015 09:15:14 +0000"  >&lt;p&gt;Ok got it. So, the new index definition config does not apply to any older indexes configured.&lt;/p&gt;</comment>
                            <comment id="14699114" author="amitjain" created="Mon, 17 Aug 2015 07:23:31 +0000"  >&lt;p&gt;Committed :&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;1.0 - &lt;a href=&quot;http://svn.apache.org/r1696198&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1696198&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;1.2 - &lt;a href=&quot;http://svn.apache.org/r1696195&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1696195&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;trunk - &lt;a href=&quot;http://svn.apache.org/r1696194&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1696194&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14706594" author="edivad" created="Fri, 21 Aug 2015 12:12:55 +0000"  >&lt;p&gt;Bulk close for 1.3.4&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 13 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2iwzj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>