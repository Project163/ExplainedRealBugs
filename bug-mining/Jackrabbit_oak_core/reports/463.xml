<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:39:58 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[OAK-950] Remove org.apache.jackrabbit.oak.core from package-export</title>
                <link>https://issues.apache.org/jira/browse/OAK-950</link>
                <project id="12313221" key="OAK">Jackrabbit Oak</project>
                    <description>&lt;p&gt;IMO the package org.apache.jackrabbit.oak.core is the implementation of the&lt;br/&gt;
oak api and should therefore only be used internally. exporting that package&lt;br/&gt;
in the maven-bundle-plugin configuration is from my point of view a major bug.&lt;br/&gt;
if it&apos;s needed it indicates that the package contains classes that are misplaced.&lt;/p&gt;

&lt;p&gt;a quick search showed that the following references to the core package are present:&lt;/p&gt;

&lt;p&gt;oak-solr:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;AbstractRoot used by&lt;br/&gt;
  &amp;gt; SolrBaseTest&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;oak-jcr:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;IdentifierManager used by&lt;br/&gt;
  &amp;gt; NodeImpl, &lt;br/&gt;
  &amp;gt; NodeDelegate, &lt;br/&gt;
  &amp;gt; SessionDelegate, &lt;br/&gt;
  &amp;gt; ChangeProcessor,&lt;br/&gt;
  &amp;gt; ImporterImpl&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;ImmutableRoot used by&lt;br/&gt;
  &amp;gt; ChangeProcessor&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;ImmutableTree used by&lt;br/&gt;
  &amp;gt; ChangeProcessor&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;to me that indicates that the IdentifierManager should be moved to package&lt;br/&gt;
space that is really public (API, SPI or plugins). &lt;/p&gt;

&lt;p&gt;as far as the ChangeProcessor is concerned it seems that this was itself a&lt;br/&gt;
candidate for being moved from oak-jcr to oak-core.&lt;/p&gt;

&lt;p&gt;and finally the SolrTest: i think the test should be refactored to obtain the root from a regular OAK repository setup instead of relying on an specific implementation.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12662581">OAK-950</key>
            <summary>Remove org.apache.jackrabbit.oak.core from package-export</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="angela">Angela Schreiber</assignee>
                                    <reporter username="angela">Angela Schreiber</reporter>
                        <labels>
                    </labels>
                <created>Thu, 8 Aug 2013 10:01:10 +0000</created>
                <updated>Wed, 9 Oct 2013 15:29:40 +0000</updated>
                            <resolved>Mon, 30 Sep 2013 15:45:24 +0000</resolved>
                                                    <fixVersion>0.10</fixVersion>
                                    <component>core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13777979" author="anchela" created="Wed, 25 Sep 2013 19:29:29 +0000"  >&lt;p&gt;initial proposal on how to address this (except for the SolrBaseTest).&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;move IdManager to a new plugins package&lt;/li&gt;
	&lt;li&gt;move obs-part using Immutable* to plugins/observation&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;since IdManager used the package private method AbstractTree#getIdentifier and i didn&apos;t want to move all the AbstractTree, i made this method part of the Tree interface. that&apos;s a simplistic approach to get a patch and i am sure this will cause some discussion, because it tends to render the IdManager superfluous &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;so, please review it and comment.&lt;br/&gt;
to me the fact that we have to export the internal core-package indicates that we have problem that should be discussed and - hopefully - addressed before we officially release oak.&lt;/p&gt;</comment>
                            <comment id="13778131" author="mduerig" created="Wed, 25 Sep 2013 21:49:52 +0000"  >&lt;blockquote&gt;&lt;p&gt;i made this method &lt;span class=&quot;error&quot;&gt;&amp;#91;getIdentifier()&amp;#93;&lt;/span&gt; part of the Tree interface.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Why not implement identifier calculation directly in &lt;tt&gt;IdentifierManager&lt;/tt&gt; instead? Something like:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; getIdentifier(Tree tree) {
        PropertyState property = tree.getProperty(JcrConstants.JCR_UUID);
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (property != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; property.getValue(STRING);
        } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (tree.isRoot()) {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;/&quot;&lt;/span&gt;;
        } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
            &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; parentId = getIdentifier(tree.getParent());
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; PathUtils.concat(parentId, tree.getName());
        }
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13778528" author="anchela" created="Thu, 26 Sep 2013 06:56:21 +0000"  >&lt;p&gt;if AbstractTree#getIdentifier is only used by the id manager, that would definitely be better.&lt;br/&gt;
let me check if that would work.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mduerig&quot; class=&quot;user-hover&quot; rel=&quot;mduerig&quot;&gt;mduerig&lt;/a&gt; what&apos;s your opinion regarding the observation classes? afaik you did most of the work there.&lt;br/&gt;
moving them was just an easy way out... but maybe some more refactoring would be required to&lt;br/&gt;
leave the jcr-event part in oak-jcr and just keep the reference to immutabletree/root in oak-core.&lt;/p&gt;</comment>
                            <comment id="13778564" author="anchela" created="Thu, 26 Sep 2013 08:09:15 +0000"  >&lt;p&gt;updated patch that removes AbstractTree#getIdentifier() as suggested by michael&lt;/p&gt;</comment>
                            <comment id="13778631" author="teofili" created="Thu, 26 Sep 2013 10:10:58 +0000"  >&lt;p&gt;working on removing the &lt;em&gt;AbstractRoot&lt;/em&gt; usage from &lt;em&gt;SolrBaseTest&lt;/em&gt;&lt;/p&gt;</comment>
                            <comment id="13778727" author="teofili" created="Thu, 26 Sep 2013 12:44:51 +0000"  >&lt;p&gt;here&apos;s an updated version of the patch which removes dependency of &lt;em&gt;SolrBaseTest&lt;/em&gt; from &lt;em&gt;AbstractRoot&lt;/em&gt;&lt;/p&gt;</comment>
                            <comment id="13779782" author="mduerig" created="Fri, 27 Sep 2013 09:09:37 +0000"  >&lt;p&gt;bw. what&apos;s your opinion regarding the observation classes&lt;/p&gt;

&lt;p&gt;It would be nice to have them in oak-jcr but I&apos;m fine with moving them for the time being to get this issue resolved, which I think is more pressing. &lt;/p&gt;</comment>
                            <comment id="13790501" author="alex.parvulescu" created="Wed, 9 Oct 2013 15:29:40 +0000"  >&lt;p&gt;bulk close for 0.10 release&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12605086" name="OAK-950.patch" size="37948" author="angela" created="Wed, 25 Sep 2013 19:29:29 +0000"/>
                            <attachment id="12605210" name="OAK-950_2.patch" size="42013" author="angela" created="Thu, 26 Sep 2013 08:09:15 +0000"/>
                            <attachment id="12605248" name="OAK-950_3.patch" size="50024" author="teofili" created="Thu, 26 Sep 2013 12:44:51 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>342584</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 6 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1n2xz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>342888</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>