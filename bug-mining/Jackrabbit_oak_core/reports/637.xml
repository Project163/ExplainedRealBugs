<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:41:46 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[OAK-1354] Valid Query for mixin Type in JCR 2.x fails in Oak</title>
                <link>https://issues.apache.org/jira/browse/OAK-1354</link>
                <project id="12313221" key="OAK">Jackrabbit Oak</project>
                    <description>&lt;p&gt;In a Sling based environment running on Oak 0.12.0.r1548152b I&apos;m facing an issue resulting in a 500 error in Sling due to a repository exception when executing the following query through the Sling Resource Resolve &lt;br/&gt;
that did work in the equivalent JCR 2 based environment.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;resolver.findResources(&lt;span class=&quot;code-quote&quot;&gt;&quot;SELECT * FROM [my:custommixin]&quot;&lt;/span&gt;, Query.JCR_SQL2)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The custom mixing was added to the reqo via vlt package (mvn-vlt plugin by Adobe) and results (as well as the corresponding XPATH version in the following stackstrace:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;javax.jcr.RepositoryException: Query contains more than one selector: []
	at org.apache.jackrabbit.oak.jcr.query.QueryResultImpl.getNodes(QueryResultImpl.java:163)
	at org.apache.sling.jcr.resource.internal.helper.jcr.JcrResourceProvider.findResources(JcrResourceProvider.java:261)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The further stacktrace seems irrelevant, but I can provide more if required.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12691058">OAK-1354</key>
            <summary>Valid Query for mixin Type in JCR 2.x fails in Oak</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stillalex">Alex Deparvu</assignee>
                                    <reporter username="dsuess">Dominik S&#252;&#223;</reporter>
                        <labels>
                    </labels>
                <created>Fri, 24 Jan 2014 15:47:49 +0000</created>
                <updated>Mon, 10 Feb 2014 13:51:24 +0000</updated>
                            <resolved>Mon, 27 Jan 2014 16:16:29 +0000</resolved>
                                    <version>0.11</version>
                                    <fixVersion>0.16</fixVersion>
                                    <component>query</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="13881072" author="jukkaz" created="Fri, 24 Jan 2014 15:55:06 +0000"  >&lt;p&gt;The &quot;more than one selector&quot; error is a bit misleading here, the problem is that the &lt;tt&gt;getColumnSelectorNames()&lt;/tt&gt; method used by &lt;tt&gt;getNodes()&lt;/tt&gt; seems to return an empty set of names. The correct &lt;tt&gt;getColumnSelectorNames()&lt;/tt&gt; return value should be &quot;my:custommixin&quot; for a query like this, which should avoid the exception.&lt;/p&gt;</comment>
                            <comment id="13882878" author="alex.parvulescu" created="Mon, 27 Jan 2014 15:19:51 +0000"  >&lt;blockquote&gt;&lt;p&gt;getColumnSelectorNames() method used by getNodes() seems to return an empty set of names&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;It looks like this comes from the fact that registering a custom mixin will leave the &apos;rep:namedSingleValuedProperties&apos; empty &lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;&lt;br/&gt;
I&apos;m now trying to inject the selector name to see if it will work.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/apache/jackrabbit-oak/blob/trunk/oak-core/src/main/java/org/apache/jackrabbit/oak/query/ast/SelectorImpl.java#L172&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/jackrabbit-oak/blob/trunk/oak-core/src/main/java/org/apache/jackrabbit/oak/query/ast/SelectorImpl.java#L172&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13882925" author="alex.parvulescu" created="Mon, 27 Jan 2014 16:16:29 +0000"  >&lt;p&gt;the tests pass, looking good. marking this as fixed&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/r1561719&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1561719&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13896528" author="alex.parvulescu" created="Mon, 10 Feb 2014 13:51:24 +0000"  >&lt;p&gt;bulk close for the 0.16 release&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>369801</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 40 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1rqj3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>370103</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>