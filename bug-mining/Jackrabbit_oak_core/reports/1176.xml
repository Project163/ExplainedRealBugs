<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:47:28 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[OAK-1589] MongoDocumentStore fails to report error for keys that are too long</title>
                <link>https://issues.apache.org/jira/browse/OAK-1589</link>
                <project id="12313221" key="OAK">Jackrabbit Oak</project>
                    <description>&lt;p&gt;The MongoDocumentStore fails to report an error when the key length exceeds the allowable width in MongoDB.&lt;/p&gt;

&lt;p&gt;This can be fixed by using a newer version of MongoDB (mongodb 2.5.5  &amp;#8211; see &lt;a href=&quot;https://jira.mongodb.org/browse/SERVER-5290&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://jira.mongodb.org/browse/SERVER-5290&lt;/a&gt;)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12702863">OAK-1589</key>
            <summary>MongoDocumentStore fails to report error for keys that are too long</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="reschke">Julian Reschke</assignee>
                                    <reporter username="reschke">Julian Reschke</reporter>
                        <labels>
                    </labels>
                <created>Fri, 21 Mar 2014 13:29:07 +0000</created>
                <updated>Tue, 8 Oct 2019 15:22:15 +0000</updated>
                            <resolved>Wed, 18 Mar 2015 15:35:06 +0000</resolved>
                                                    <fixVersion>1.0.13</fixVersion>
                    <fixVersion>1.1.8</fixVersion>
                                    <component>mongomk</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13955218" author="reschke" created="Mon, 31 Mar 2014 14:32:23 +0000"  >&lt;p&gt;Note that if testMaxId() doesn&apos;t attempt to read back the document, the reported size is 32767 (the maximum)&lt;/p&gt;</comment>
                            <comment id="13955306" author="tmueller" created="Mon, 31 Mar 2014 15:39:34 +0000"  >&lt;p&gt;This test uses UpdateOp directly, it does not use org.apache.jackrabbit.oak.plugins.document.util.Utils.getIdFromPath like the DocumentStore does. There is a check in the getIdFromPath method that should prevent such long ids.&lt;/p&gt;</comment>
                            <comment id="13958789" author="reschke" created="Thu, 3 Apr 2014 13:04:48 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thomasm&quot; class=&quot;user-hover&quot; rel=&quot;thomasm&quot;&gt;thomasm&lt;/a&gt; the test runs on the DocumentStore API, and I believe it is correct. It may be true that the DocumentMK usually won&apos;t use keys of excessive length, but the behavior still should be consistent. I&apos;d also propose to wire the 512-octet limit into the code so that we see potential failures early on.&lt;/p&gt;</comment>
                            <comment id="13986449" author="mreutegg" created="Thu, 1 May 2014 08:33:25 +0000"  >&lt;blockquote&gt;&lt;p&gt;There is a check in the getIdFromPath method that should prevent such long ids.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This does not seem to work. I added a test on the NodeStore level in revision &lt;a href=&quot;http://svn.apache.org/r1591559&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1591559&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The long id is not prevented and with MongoDB 2.4.x the merge succeeds even though the document could not be added. As noted earlier by Julian, MongoDB 2.6 fixes this and now correctly fails the insert/update.&lt;/p&gt;</comment>
                            <comment id="13989542" author="tmueller" created="Mon, 5 May 2014 14:13:25 +0000"  >&lt;p&gt;Revision 1592535&lt;/p&gt;</comment>
                            <comment id="13989583" author="reschke" created="Mon, 5 May 2014 15:00:56 +0000"  >&lt;p&gt;This change doesn&apos;t affect the actual DocumentStore application, thus BasicDocumentStore.testMaxId still fails.&lt;/p&gt;

&lt;p&gt;I believe the checks really should be done in the DS implementation.&lt;/p&gt;</comment>
                            <comment id="13996392" author="mreutegg" created="Tue, 13 May 2014 13:36:26 +0000"  >&lt;p&gt;I now also see TCK test failures. E.g.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Running org.apache.jackrabbit.oak.jcr.tck.ApiIT
Tests run: 1410, Failures: 0, Errors: 2, Skipped: 0, Time elapsed: 97.902 sec &amp;lt;&amp;lt;&amp;lt; FAILURE!
testAddNonExisting(org.apache.jackrabbit.test.api.NodeAddMixinTest)  Time elapsed: 0.016 sec  &amp;lt;&amp;lt;&amp;lt; ERROR!
com.google.common.util.concurrent.UncheckedExecutionException: java.lang.IllegalArgumentException: Node name is too long: /jcr:system/jcr:nodeTypes/XmixcreatedmixetagmixlanguagemixlastModifiedmixlifecyclemixlockablemixmimeTypemixreferenceablemixshareablemixsimpleVersionablemixtitlemixversionablerepAccessControllablerepImpersonatablerepMergeConflictrepRepoAccessControllablerepRetentionManageablerepVersionReferencerepVersionablePathstestmimeType
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Also seen on travis: &lt;a href=&quot;https://travis-ci.org/apache/jackrabbit-oak/builds/25052775&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://travis-ci.org/apache/jackrabbit-oak/builds/25052775&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I think the implementation should not fail with an exception when an attempt is made to read an item with a too long name.&lt;/p&gt;</comment>
                            <comment id="13996434" author="mreutegg" created="Tue, 13 May 2014 14:26:33 +0000"  >&lt;p&gt;Thomas, I reverted your fix in &lt;a href=&quot;http://svn.apache.org/r1594236&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1594236&lt;/a&gt; to make the TCK tests pass again.&lt;/p&gt;</comment>
                            <comment id="14362915" author="mreutegg" created="Mon, 16 Mar 2015 08:09:14 +0000"  >&lt;p&gt;Postponing to 1.3 since Oak requires MongoDB 2.6.x anyway.&lt;/p&gt;</comment>
                            <comment id="14367327" author="reschke" created="Wed, 18 Mar 2015 15:35:06 +0000"  >&lt;p&gt;Tests pass with Mongo 2.6. Re-enabled tests.&lt;/p&gt;</comment>
                            <comment id="14502843" author="edivad" created="Mon, 20 Apr 2015 13:45:21 +0000"  >&lt;p&gt;Bulk close for 1.0.13&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12608656">OAK-333</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12845510">OAK-3111</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>381200</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 30 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1toen:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>381476</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>