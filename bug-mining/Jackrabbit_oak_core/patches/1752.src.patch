diff --git a/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/upgrade/IndexDisabler.java b/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/upgrade/IndexDisabler.java
index a91c56a941..a322758e7e 100644
--- a/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/upgrade/IndexDisabler.java
+++ b/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/upgrade/IndexDisabler.java
@@ -107,7 +107,8 @@ public class IndexDisabler {
         }
 
         //Skip disabling for the cycle where reindexing just got completed
-        if (idxBuilder.isReplaced(DISABLE_INDEXES_ON_NEXT_CYCLE)){
+        //i.e. baseState should not have DISABLE_INDEXES_ON_NEXT_CYCLE set to false
+        if (!idxBuilder.getBaseState().getBoolean(DISABLE_INDEXES_ON_NEXT_CYCLE)){
             return emptyList();
         }
 
diff --git a/oak-core/src/test/java/org/apache/jackrabbit/oak/plugins/index/upgrade/IndexDisablerTest.java b/oak-core/src/test/java/org/apache/jackrabbit/oak/plugins/index/upgrade/IndexDisablerTest.java
index 4bb1019970..0cec38a9c6 100644
--- a/oak-core/src/test/java/org/apache/jackrabbit/oak/plugins/index/upgrade/IndexDisablerTest.java
+++ b/oak-core/src/test/java/org/apache/jackrabbit/oak/plugins/index/upgrade/IndexDisablerTest.java
@@ -60,6 +60,8 @@ public class IndexDisablerTest {
         builder.setProperty(IndexConstants.SUPERSEDED_INDEX_PATHS,
                 asList("/oak:index/fooIndex", "/oak:index/barIndex"), Type.STRINGS);
 
+        refreshBuilder();
+
         List<String> disabledIndexes = disabler.disableOldIndexes("/oak:index/foo", builder);
         assertThat(disabledIndexes, containsInAnyOrder("/oak:index/fooIndex"));
         assertFalse(builder.getBoolean(IndexConstants.DISABLE_INDEXES_ON_NEXT_CYCLE));
@@ -69,11 +71,15 @@ public class IndexDisablerTest {
         //Check no node created for non existing node
         assertFalse(rootBuilder.getChildNode("oak:index").getChildNode("barIndex").exists());
 
-        builder = builder.getNodeState().builder();
+        refreshBuilder();
         List<String> disabledIndexes2 = disabler.disableOldIndexes("/oak:index/foo", builder);
         assertTrue(disabledIndexes2.isEmpty());
     }
 
+    private void refreshBuilder() {
+        builder = builder.getNodeState().builder();
+    }
+
     /**
      * Test that indexes are not disabled in same cycle
      * as when reindexing is done
@@ -86,8 +92,6 @@ public class IndexDisablerTest {
         builder.setProperty(IndexConstants.SUPERSEDED_INDEX_PATHS,
                 asList("/oak:index/fooIndex", "/oak:index/barIndex"), Type.STRINGS);
 
-        builder = builder.getNodeState().builder();
-
         List<String> disabledIndexes = disabler.disableOldIndexes("/oak:index/foo", builder);
         assertTrue(disabledIndexes.isEmpty());
     }
@@ -97,6 +101,9 @@ public class IndexDisablerTest {
         builder.setProperty(IndexConstants.DISABLE_INDEXES_ON_NEXT_CYCLE, true);
         builder.setProperty(IndexConstants.SUPERSEDED_INDEX_PATHS,
                 asList("/oak:index/fooIndex/@bar"), Type.STRINGS);
+
+        refreshBuilder();
+
         List<String> disabledIndexes = disabler.disableOldIndexes("/oak:index/foo", builder);
         assertTrue(disabledIndexes.isEmpty());
     }
@@ -107,6 +114,9 @@ public class IndexDisablerTest {
         rootBuilder.child("oak:index").child("fooIndex");
         builder.setProperty(IndexConstants.SUPERSEDED_INDEX_PATHS,
                 asList("/oak:index/fooIndex/@bar"), Type.STRINGS);
+
+        refreshBuilder();
+
         List<String> disabledIndexes = disabler.disableOldIndexes("/oak:index/foo", builder);
         assertTrue(disabledIndexes.isEmpty());
     }
@@ -118,6 +128,9 @@ public class IndexDisablerTest {
         builder.setProperty(IndexConstants.DISABLE_INDEXES_ON_NEXT_CYCLE, true);
         builder.setProperty(IndexConstants.SUPERSEDED_INDEX_PATHS,
                 asList("/oak:index/fooIndex/@oak:BarType"), Type.STRINGS);
+
+        refreshBuilder();
+
         List<String> disabledIndexes = disabler.disableOldIndexes("/oak:index/foo", builder);
         assertTrue(disabledIndexes.isEmpty());
     }
@@ -130,6 +143,9 @@ public class IndexDisablerTest {
         builder.setProperty(IndexConstants.DISABLE_INDEXES_ON_NEXT_CYCLE, true);
         builder.setProperty(IndexConstants.SUPERSEDED_INDEX_PATHS,
                 asList("/oak:index/fooIndex/@oak:BarType"), Type.STRINGS);
+
+        refreshBuilder();
+
         List<String> disabledIndexes = disabler.disableOldIndexes("/oak:index/foo", builder);
         assertThat(disabledIndexes, containsInAnyOrder("/oak:index/fooIndex/@oak:BarType"));
         assertFalse(builder.getBoolean(IndexConstants.DISABLE_INDEXES_ON_NEXT_CYCLE));
