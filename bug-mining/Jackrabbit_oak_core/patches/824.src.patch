diff --git a/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/document/Revision.java b/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/document/Revision.java
index 41bd4e64e6..9f0dd4af2d 100644
--- a/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/document/Revision.java
+++ b/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/document/Revision.java
@@ -72,6 +72,9 @@ public class Revision {
      */
     static void setClock(Clock c) {
         clock = c;
+        if (c == null) {
+            lastTimestamp = System.currentTimeMillis();
+        }
     }
     public Revision(long timestamp, int counter, int clusterId) {
         this(timestamp, counter, clusterId, false);
