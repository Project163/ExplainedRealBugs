diff --git a/oak-core/src/main/java/org/apache/jackrabbit/oak/cache/CacheLIRS.java b/oak-core/src/main/java/org/apache/jackrabbit/oak/cache/CacheLIRS.java
index 9b1c9634fb..d1e23dbaca 100644
--- a/oak-core/src/main/java/org/apache/jackrabbit/oak/cache/CacheLIRS.java
+++ b/oak-core/src/main/java/org/apache/jackrabbit/oak/cache/CacheLIRS.java
@@ -1527,7 +1527,7 @@ public class CacheLIRS<K, V> implements LoadingCache<K, V> {
             return this;
         }
 
-        public Builder<K, V> maximumSize(int maxSize) {
+        public Builder<K, V> maximumSize(long maxSize) {
             this.maxWeight = maxSize;
             this.averageWeight = 1;
             return this;
diff --git a/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/DataStoreBlobStore.java b/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/DataStoreBlobStore.java
index 25a79babfa..7a10c5f510 100644
--- a/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/DataStoreBlobStore.java
+++ b/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/blob/datastore/DataStoreBlobStore.java
@@ -109,7 +109,7 @@ public class DataStoreBlobStore implements DataStore, SharedDataStore, BlobStore
 
         this.cache = CacheLIRS.<String, byte[]>newBuilder()
                 .module("DataStoreBlobStore")
-                .maximumWeight(cacheSizeInMB * FileUtils.ONE_MB)
+                .maximumWeight((long) cacheSizeInMB * FileUtils.ONE_MB)
                 .weigher(new Weigher<String, byte[]>() {
                     @Override
                     public int weigh(@Nonnull String key, @Nonnull byte[] value) {
diff --git a/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/segment/SegmentTracker.java b/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/segment/SegmentTracker.java
index 3dd2ad8412..e16a89ee24 100644
--- a/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/segment/SegmentTracker.java
+++ b/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/segment/SegmentTracker.java
@@ -120,13 +120,12 @@ public class SegmentTracker {
         if (DISABLE_STRING_CACHE) {
             c = null;
         } else {
-            int stringCacheSize = (int) Math.min(Integer.MAX_VALUE, cacheSizeMB * MB);
-            c = new StringCache(stringCacheSize);
+            c = new StringCache((long) cacheSizeMB * MB);
         }
         stringCache = c;
         segmentCache = CacheLIRS.<SegmentId, Segment>newBuilder()
             .module("SegmentTracker")
-            .maximumSize((int) Math.min(Integer.MAX_VALUE, cacheSizeMB * MB))
+            .maximumWeight((long) cacheSizeMB * MB)
             .averageWeight(Segment.MAX_SEGMENT_SIZE/2)
             .evictionCallback(new EvictionCallback<SegmentId, Segment>() {
                 @Override
diff --git a/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/segment/StringCache.java b/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/segment/StringCache.java
index 7394471d49..97edba1ed8 100644
--- a/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/segment/StringCache.java
+++ b/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/segment/StringCache.java
@@ -48,10 +48,10 @@ public class StringCache {
      *
      * @param maxSize the maximum memory in bytes.
      */
-    StringCache(int maxSize) {
+    StringCache(long maxSize) {
         cache = CacheLIRS.<StringCacheEntry, String>newBuilder()
                 .module("StringCache")
-                .maximumSize(maxSize)
+                .maximumWeight(maxSize)
                 .averageWeight(100)
                 .build();
     }
