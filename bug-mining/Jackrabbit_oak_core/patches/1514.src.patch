diff --git a/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/document/JournalEntry.java b/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/document/JournalEntry.java
index 6827e7593a..4669f02677 100644
--- a/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/document/JournalEntry.java
+++ b/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/document/JournalEntry.java
@@ -135,6 +135,9 @@ public final class JournalEntry extends Document {
                 // add parent to the diff entry
                 entry.append(node.getPath(), getChanges(node));
                 deDuplicatedCnt++;
+                // clean up the hierarchy when we are done with this
+                // part of the tree to avoid excessive memory usage
+                node.children = TreeNode.NO_CHILDREN;
                 node = node.parent;
             }
 
