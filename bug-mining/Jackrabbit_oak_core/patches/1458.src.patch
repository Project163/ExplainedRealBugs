diff --git a/oak-core/src/main/java/org/apache/jackrabbit/oak/query/xpath/Expression.java b/oak-core/src/main/java/org/apache/jackrabbit/oak/query/xpath/Expression.java
index 34d2fafb2f..edc3e96b83 100644
--- a/oak-core/src/main/java/org/apache/jackrabbit/oak/query/xpath/Expression.java
+++ b/oak-core/src/main/java/org/apache/jackrabbit/oak/query/xpath/Expression.java
@@ -379,19 +379,15 @@ abstract class Expression {
                 in = new InCondition(in.getLeft(), in.list);
                 return in;
             }
+            Expression le = left.getLeft();
             if (XPathToSQL2Converter.NODETYPE_UNION) {
-                if (left instanceof Condition) {
-                    Condition c = (Condition) left;
-                    if (c.left instanceof Property && 
-                        "jcr:primaryType".equals(((Property) c.left).name)) {
-                        return this;
-                    }
+                if (commonLeft.endsWith("[jcr:primaryType]")) {
+                    return this;
                 }
             }
             ArrayList<Expression> list = new ArrayList<Expression>();
             list.addAll(left.getRight());
             list.addAll(right.getRight());
-            Expression le = left.getLeft();
             InCondition in = new InCondition(le, list);
             return in;
         }
diff --git a/oak-core/src/test/resources/org/apache/jackrabbit/oak/query/xpath.txt b/oak-core/src/test/resources/org/apache/jackrabbit/oak/query/xpath.txt
index 5db054da1b..a8fc1ca441 100644
--- a/oak-core/src/test/resources/org/apache/jackrabbit/oak/query/xpath.txt
+++ b/oak-core/src/test/resources/org/apache/jackrabbit/oak/query/xpath.txt
@@ -105,6 +105,18 @@ select [jcr:path], [jcr:score], *
   /* xpath ... */
 
 # single primary type
+xpath2sql //*[(@jcr:primaryType = 'a' or @jcr:primaryType = 'b' or @jcr:primaryType = 'c')]
+select [jcr:path], [jcr:score], *
+  from [a] as a
+  where [jcr:primaryType] = 'a'
+  union select [jcr:path], [jcr:score], *
+  from [b] as a
+  where [jcr:primaryType] = 'b'
+  union select [jcr:path], [jcr:score], *
+  from [c] as a
+  where [jcr:primaryType] = 'c'
+  /* xpath ... */
+
 xpath2sql /jcr:root/content//*[jcr:contains(., 'abc') and @jcr:primaryType = 'page']
 select [jcr:path], [jcr:score], *
   from [page] as a
