diff --git a/oak-core/src/main/java/org/apache/jackrabbit/oak/query/xpath/XPathToSQL2Converter.java b/oak-core/src/main/java/org/apache/jackrabbit/oak/query/xpath/XPathToSQL2Converter.java
index 91a257bffa..3cf0717291 100644
--- a/oak-core/src/main/java/org/apache/jackrabbit/oak/query/xpath/XPathToSQL2Converter.java
+++ b/oak-core/src/main/java/org/apache/jackrabbit/oak/query/xpath/XPathToSQL2Converter.java
@@ -516,7 +516,7 @@ public class XPathToSQL2Converter {
         boolean isPath = false;
         while (true) {
             if (currentTokenType == IDENTIFIER) {
-                String name = readIdentifier();
+                String name = readPathSegment();
                 buff.append(name);
             } else if (readIf("*")) {
                 // any node
@@ -533,7 +533,7 @@ public class XPathToSQL2Converter {
                     // xpath supports @*, even thought jackrabbit may not
                     buff.append('*');
                 } else {
-                    buff.append(readIdentifier());
+                    buff.append(readPathSegment());
                 }
                 return new Expression.Property(currentSelector, buff.toString());
             } else {
@@ -649,7 +649,7 @@ public class XPathToSQL2Converter {
         if (readIf("*")) {
             return new Expression.Property(currentSelector, "*");
         }
-        return new Expression.Property(currentSelector, readIdentifier());
+        return new Expression.Property(currentSelector, readPathSegment());
     }
     
     private void readExcerpt() throws ParseException {
diff --git a/oak-core/src/test/resources/org/apache/jackrabbit/oak/query/xpath.txt b/oak-core/src/test/resources/org/apache/jackrabbit/oak/query/xpath.txt
index e936e8177e..1b37978bf2 100644
--- a/oak-core/src/test/resources/org/apache/jackrabbit/oak/query/xpath.txt
+++ b/oak-core/src/test/resources/org/apache/jackrabbit/oak/query/xpath.txt
@@ -23,6 +23,11 @@
 # * new tests are typically be added on top, after the syntax docs
 # * use ascii character only
 
+# de-escape _x00.._
+
+xpath2sql /jcr:root//_x002e_test/element(*,rep:User)[_x002e_tokens/@jcr:primaryType]
+select b.[jcr:path] as [jcr:path], b.[jcr:score] as [jcr:score], b.* from [nt:base] as a inner join [rep:User] as b on ischildnode(b, a) where name(a) = '.test' and isdescendantnode(a, '/') and b.[.tokens/jcr:primaryType] is not null /* xpath: /jcr:root//_x002e_test/element(*,rep:User)[_x002e_tokens/@jcr:primaryType] */
+
 # union and in(..)
 
 xpath2sql //*[@x = 1 or @x = 2]
