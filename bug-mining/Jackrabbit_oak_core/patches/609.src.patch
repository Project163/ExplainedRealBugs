diff --git a/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/reference/ReferenceEditor.java b/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/reference/ReferenceEditor.java
index d0d8079f37..08512fd0c0 100644
--- a/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/reference/ReferenceEditor.java
+++ b/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/reference/ReferenceEditor.java
@@ -329,13 +329,13 @@ class ReferenceEditor extends DefaultEditor implements IndexEditor {
             Set<String> add, Set<String> rm) {
         NodeBuilder index = child.child(name);
         Set<String> empty = of();
+        for (String p : rm) {
+            STORE.update(index, p, of(key), empty);
+        }
         for (String p : add) {
             // TODO do we still need to encode the values?
             STORE.update(index, p, empty, of(key));
         }
-        for (String p : rm) {
-            STORE.update(index, p, of(key), empty);
-        }
     }
 
     private static boolean check(NodeState definition, String name, String key) {
