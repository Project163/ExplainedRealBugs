diff --git a/oak-core/src/test/java/org/apache/jackrabbit/oak/plugins/index/lucene/LuceneIndexQueryTest.java b/oak-core/src/test/java/org/apache/jackrabbit/oak/plugins/index/lucene/LuceneIndexQueryTest.java
index dea481b9dc..c461174663 100644
--- a/oak-core/src/test/java/org/apache/jackrabbit/oak/plugins/index/lucene/LuceneIndexQueryTest.java
+++ b/oak-core/src/test/java/org/apache/jackrabbit/oak/plugins/index/lucene/LuceneIndexQueryTest.java
@@ -26,6 +26,7 @@ import org.apache.jackrabbit.oak.spi.commit.CommitHook;
 import org.apache.jackrabbit.oak.spi.commit.CompositeHook;
 import org.apache.jackrabbit.oak.spi.query.CompositeQueryIndexProvider;
 import org.apache.jackrabbit.oak.spi.query.QueryIndexProvider;
+import org.apache.jackrabbit.oak.spi.security.OpenSecurityProvider;
 
 /**
  * Tests the query engine using the default index implementation: the
@@ -50,7 +51,7 @@ public class LuceneIndexQueryTest extends AbstractQueryTest implements
                         TEST_INDEX_HOME));
         MicroKernel mk = new MicroKernelImpl();
         createDefaultKernelTracker().available(mk);
-        return new Oak(mk).with(qip).with(ch).with(getSecurityProvider()).createContentRepository();
+        return new Oak(mk).with(qip).with(ch).with(new OpenSecurityProvider()).createContentRepository();
     }
 
 }
\ No newline at end of file
diff --git a/oak-core/src/test/java/org/apache/jackrabbit/oak/plugins/index/old/QueryTest.java b/oak-core/src/test/java/org/apache/jackrabbit/oak/plugins/index/old/QueryTest.java
index bca6834fe9..f2779d4f23 100644
--- a/oak-core/src/test/java/org/apache/jackrabbit/oak/plugins/index/old/QueryTest.java
+++ b/oak-core/src/test/java/org/apache/jackrabbit/oak/plugins/index/old/QueryTest.java
@@ -21,6 +21,7 @@ import org.apache.jackrabbit.oak.query.AbstractQueryTest;
 import org.apache.jackrabbit.oak.spi.commit.CompositeHook;
 import org.apache.jackrabbit.oak.spi.query.CompositeQueryIndexProvider;
 import org.apache.jackrabbit.oak.spi.query.QueryIndexProvider;
+import org.apache.jackrabbit.oak.spi.security.OpenSecurityProvider;
 import org.junit.Ignore;
 import org.junit.Test;
 
@@ -44,7 +45,7 @@ public class QueryTest extends AbstractQueryTest {
         QueryIndexProvider qip = new CompositeQueryIndexProvider(pi);
         CompositeHook hook = new CompositeHook(pi);
         createDefaultKernelTracker().available(mk);
-        return new Oak(mk).with(qip).with(hook).with(getSecurityProvider()).createContentRepository();
+        return new Oak(mk).with(qip).with(hook).with(new OpenSecurityProvider()).createContentRepository();
     }
 
     @Test
diff --git a/oak-core/src/test/java/org/apache/jackrabbit/oak/plugins/index/property/PropertyIndexQueryTest.java b/oak-core/src/test/java/org/apache/jackrabbit/oak/plugins/index/property/PropertyIndexQueryTest.java
index b59a44f4c2..7ebcd40f6b 100644
--- a/oak-core/src/test/java/org/apache/jackrabbit/oak/plugins/index/property/PropertyIndexQueryTest.java
+++ b/oak-core/src/test/java/org/apache/jackrabbit/oak/plugins/index/property/PropertyIndexQueryTest.java
@@ -25,6 +25,7 @@ import org.apache.jackrabbit.oak.spi.commit.CommitHook;
 import org.apache.jackrabbit.oak.spi.commit.CompositeHook;
 import org.apache.jackrabbit.oak.spi.query.CompositeQueryIndexProvider;
 import org.apache.jackrabbit.oak.spi.query.QueryIndexProvider;
+import org.apache.jackrabbit.oak.spi.security.OpenSecurityProvider;
 
 /**
  * Tests the query engine using the default index implementation: the
@@ -39,7 +40,7 @@ public class PropertyIndexQueryTest extends AbstractQueryTest {
         CommitHook ch = new CompositeHook(new PropertyIndexHook());
         MicroKernel mk = new MicroKernelImpl();
         createDefaultKernelTracker().available(mk);
-        return new Oak(mk).with(qip).with(ch).with(getSecurityProvider()).createContentRepository();
+        return new Oak(mk).with(qip).with(ch).with(new OpenSecurityProvider()).createContentRepository();
     }
 
 }
\ No newline at end of file
diff --git a/oak-core/src/test/java/org/apache/jackrabbit/oak/query/index/TraversingIndexQueryTest.java b/oak-core/src/test/java/org/apache/jackrabbit/oak/query/index/TraversingIndexQueryTest.java
index 71e5526c12..8584eebdab 100644
--- a/oak-core/src/test/java/org/apache/jackrabbit/oak/query/index/TraversingIndexQueryTest.java
+++ b/oak-core/src/test/java/org/apache/jackrabbit/oak/query/index/TraversingIndexQueryTest.java
@@ -18,6 +18,7 @@ import org.apache.jackrabbit.mk.core.MicroKernelImpl;
 import org.apache.jackrabbit.oak.Oak;
 import org.apache.jackrabbit.oak.api.ContentRepository;
 import org.apache.jackrabbit.oak.query.AbstractQueryTest;
+import org.apache.jackrabbit.oak.spi.security.OpenSecurityProvider;
 
 /**
  * Tests the query engine using the default index implementation: the
@@ -29,7 +30,7 @@ public class TraversingIndexQueryTest extends AbstractQueryTest {
     protected ContentRepository createRepository() {
         MicroKernel mk = new MicroKernelImpl();
         createDefaultKernelTracker().available(mk);
-        return new Oak(mk).with(getSecurityProvider()).createContentRepository();
+        return new Oak(mk).with(new OpenSecurityProvider()).createContentRepository();
     }
 
 }
