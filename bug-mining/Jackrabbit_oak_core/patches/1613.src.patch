diff --git a/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/document/CommitQueue.java b/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/document/CommitQueue.java
index accadf6fcd..d0956b26fe 100644
--- a/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/document/CommitQueue.java
+++ b/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/document/CommitQueue.java
@@ -233,14 +233,17 @@ final class CommitQueue {
             LOG.debug("not head: {}, waiting...", rev);
             commitEntry.await();
         }
-        c.headOfQueue(rev);
-        synchronized (this) {
-            commits.remove(rev);
-            try {
-                LOG.debug("removed {}, head is now {}", rev, commits.isEmpty() ? null : commits.firstKey());
-            } finally {
-                // notify next if there is any
-                notifyHead();
+        try {
+            c.headOfQueue(rev);
+        } finally {
+            synchronized (this) {
+                commits.remove(rev);
+                try {
+                    LOG.debug("removed {}, head is now {}", rev, commits.isEmpty() ? null : commits.firstKey());
+                } finally {
+                    // notify next if there is any
+                    notifyHead();
+                }
             }
         }
     }
diff --git a/oak-core/src/test/java/org/apache/jackrabbit/oak/plugins/document/DocumentNodeStoreTest.java b/oak-core/src/test/java/org/apache/jackrabbit/oak/plugins/document/DocumentNodeStoreTest.java
index e43ec92053..bb6ccf34cb 100644
--- a/oak-core/src/test/java/org/apache/jackrabbit/oak/plugins/document/DocumentNodeStoreTest.java
+++ b/oak-core/src/test/java/org/apache/jackrabbit/oak/plugins/document/DocumentNodeStoreTest.java
@@ -2703,7 +2703,6 @@ public class DocumentNodeStoreTest {
         assertTrue(parent.hasChildNode("baz"));
     }
 
-    @Ignore("OAK-4687")
     @Test
     public void exceptionHandlingInCommit() throws Exception{
         DocumentNodeStore ns = builderProvider.newBuilder().getNodeStore();
@@ -2718,7 +2717,6 @@ public class DocumentNodeStoreTest {
             }
         });
 
-
         NodeBuilder b1 = ns.getRoot().builder();
         b1.child("parent");
         failCommit.set(true);
