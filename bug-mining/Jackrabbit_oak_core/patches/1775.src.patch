diff --git a/oak-core/src/main/java/org/apache/jackrabbit/oak/security/internal/ConfigurationInitializer.java b/oak-core/src/main/java/org/apache/jackrabbit/oak/security/internal/ConfigurationInitializer.java
index 3b7efebdd6..bb14fda83f 100644
--- a/oak-core/src/main/java/org/apache/jackrabbit/oak/security/internal/ConfigurationInitializer.java
+++ b/oak-core/src/main/java/org/apache/jackrabbit/oak/security/internal/ConfigurationInitializer.java
@@ -48,7 +48,7 @@ final class ConfigurationInitializer {
         return configuration;
     }
 
-    static void initializeConfigurations(@Nonnull CompositeConfiguration configuration, @Nonnull SecurityProvider securityProvider,
+    static <T extends SecurityConfiguration> void initializeConfigurations(@Nonnull CompositeConfiguration<T> configuration, @Nonnull SecurityProvider securityProvider,
                                          @Nonnull ConfigurationParameters parameters,
                                          @Nonnull RootProvider rootProvider,
                                          @Nonnull TreeProvider treeProvider) {
@@ -56,8 +56,8 @@ final class ConfigurationInitializer {
         configuration.setRootProvider(rootProvider);
         configuration.setTreeProvider(treeProvider);
 
-        List<? extends SecurityConfiguration> configs = configuration.getConfigurations();
-        for (SecurityConfiguration config : configs) {
+        List<T> configs = configuration.getConfigurations();
+        for (T config : configs) {
             initializeConfiguration(config, securityProvider, parameters, rootProvider, treeProvider);
         }
     }
diff --git a/oak-core/src/main/java/org/apache/jackrabbit/oak/security/internal/SecurityProviderBuilder.java b/oak-core/src/main/java/org/apache/jackrabbit/oak/security/internal/SecurityProviderBuilder.java
index 95f80684dd..eff91d27e3 100644
--- a/oak-core/src/main/java/org/apache/jackrabbit/oak/security/internal/SecurityProviderBuilder.java
+++ b/oak-core/src/main/java/org/apache/jackrabbit/oak/security/internal/SecurityProviderBuilder.java
@@ -94,7 +94,7 @@ public class SecurityProviderBuilder {
             userParams = configuration.getConfigValue(UserConfiguration.NAME, EMPTY);
         } else {
             AuthorizableActionProvider authorizableActionProvider = new DefaultAuthorizableActionProvider();
-            AuthorizableNodeName authorizableNodeName = new RandomAuthorizableNodeName();
+            AuthorizableNodeName authorizableNodeName = AuthorizableNodeName.DEFAULT;
             UserAuthenticationFactory userAuthenticationFactory = UserConfigurationImpl
                     .getDefaultAuthenticationFactory();
 
@@ -182,7 +182,8 @@ public class SecurityProviderBuilder {
         // authorization
         if (authorizationConfiguration == null) {
             authorizationConfiguration = new CompositeAuthorizationConfiguration();
-            authorizationConfiguration.setDefaultConfig(new AuthorizationConfigurationImpl());
+            authorizationConfiguration.setDefaultConfig(initializeConfiguration(new AuthorizationConfigurationImpl(),
+                    securityProvider, rootProvider, treeProvider));
         }
         initializeConfigurations(authorizationConfiguration, securityProvider, authorizationParams, rootProvider,
                 treeProvider);
@@ -191,7 +192,8 @@ public class SecurityProviderBuilder {
         // principal
         if (principalConfiguration == null) {
             principalConfiguration = new CompositePrincipalConfiguration();
-            principalConfiguration.setDefaultConfig(new PrincipalConfigurationImpl());
+            principalConfiguration.setDefaultConfig(initializeConfiguration(new PrincipalConfigurationImpl(),
+                    securityProvider, rootProvider, treeProvider));
         }
         initializeConfigurations(principalConfiguration, securityProvider, principalParams, rootProvider, treeProvider);
         securityProvider.setPrincipalConfiguration(principalConfiguration);
@@ -199,12 +201,13 @@ public class SecurityProviderBuilder {
         // token
         if (tokenConfiguration == null) {
             tokenConfiguration = new CompositeTokenConfiguration();
-            tokenConfiguration.setDefaultConfig(new TokenConfigurationImpl());
+            tokenConfiguration.setDefaultConfig(initializeConfiguration(new TokenConfigurationImpl(), securityProvider,
+                    rootProvider, treeProvider));
         }
-
         initializeConfigurations(tokenConfiguration, securityProvider, tokenParams, rootProvider, treeProvider);
         securityProvider.setTokenConfiguration(tokenConfiguration);
 
+        // whiteboard
         if (whiteboard != null) {
             securityProvider.setWhiteboard(whiteboard);
         }
