diff --git a/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/segment/SegmentWriter.java b/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/segment/SegmentWriter.java
index b72131cb05..bd0bec0f9c 100644
--- a/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/segment/SegmentWriter.java
+++ b/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/segment/SegmentWriter.java
@@ -230,7 +230,7 @@ public class SegmentWriter {
         int segmentSize = headerSize + refCount * 16 + recordSize + length;
         if (segmentSize > buffer.length - 1
                 || rootCount > 0xffff
-                || refCount > Segment.SEGMENT_REFERENCE_LIMIT) {
+                || refCount >= Segment.SEGMENT_REFERENCE_LIMIT) {
             flush();
         }
 
