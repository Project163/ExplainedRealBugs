diff --git a/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/nodetype/write/PropertyDefinitionTemplateImpl.java b/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/nodetype/write/PropertyDefinitionTemplateImpl.java
index 1187dc4b9a..927d681d11 100644
--- a/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/nodetype/write/PropertyDefinitionTemplateImpl.java
+++ b/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/nodetype/write/PropertyDefinitionTemplateImpl.java
@@ -27,6 +27,7 @@ import static org.apache.jackrabbit.oak.plugins.nodetype.NodeTypeConstants.JCR_I
 import static org.apache.jackrabbit.oak.plugins.nodetype.NodeTypeConstants.RESIDUAL_NAME;
 
 import java.util.Arrays;
+import java.util.Locale;
 
 import javax.jcr.PropertyType;
 import javax.jcr.RepositoryException;
@@ -99,7 +100,7 @@ class PropertyDefinitionTemplateImpl extends ItemDefinitionTemplate
 
         tree.setProperty(
                 JCR_REQUIREDTYPE,
-                PropertyType.nameFromValue(requiredType).toUpperCase());
+                PropertyType.nameFromValue(requiredType).toUpperCase(Locale.ENGLISH));
         tree.setProperty(JCR_MULTIPLE, isMultiple);
         tree.setProperty(JCR_IS_FULLTEXT_SEARCHABLE, fullTextSearchable);
         tree.setProperty(JCR_IS_QUERY_ORDERABLE, queryOrderable);
diff --git a/oak-core/src/main/java/org/apache/jackrabbit/oak/query/xpath/Expression.java b/oak-core/src/main/java/org/apache/jackrabbit/oak/query/xpath/Expression.java
index c086a1a569..a4bc876617 100644
--- a/oak-core/src/main/java/org/apache/jackrabbit/oak/query/xpath/Expression.java
+++ b/oak-core/src/main/java/org/apache/jackrabbit/oak/query/xpath/Expression.java
@@ -191,7 +191,7 @@ abstract class Expression {
                     String decoded = ISO9075.decode(raw);
                     String encoded = ISO9075.encode(decoded);
                     rightExpr = SQL2Parser.escapeStringLiteral(decoded);
-                    if (!encoded.toUpperCase().equals(raw.toUpperCase())) {
+                    if (!encoded.equalsIgnoreCase(raw)) {
                         // nothing can potentially match
                         impossible = true;
                     }
