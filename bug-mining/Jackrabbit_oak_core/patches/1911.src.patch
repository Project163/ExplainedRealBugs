diff --git a/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/IndexName.java b/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/IndexName.java
index 6ad2005a56..3597079d28 100644
--- a/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/IndexName.java
+++ b/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/IndexName.java
@@ -210,7 +210,7 @@ public class IndexName implements Comparable<IndexName> {
      * @return the filtered list
      */
     public static Collection<String> filterReplacedIndexes(Collection<String> indexPaths, NodeState rootState, boolean checkIsActive) {
-        HashMap<String, IndexName> latestVersions = new HashMap<String, IndexName>();
+        HashMap<String, IndexName> latestVersions = new HashMap<>();
         for (String p : indexPaths) {
             IndexName indexName = IndexName.parse(p);
             if (indexName.isVersioned && checkIsActive) {
diff --git a/oak-core/src/main/java/org/apache/jackrabbit/oak/query/QueryImpl.java b/oak-core/src/main/java/org/apache/jackrabbit/oak/query/QueryImpl.java
index 397e1c201b..35ada0ad68 100644
--- a/oak-core/src/main/java/org/apache/jackrabbit/oak/query/QueryImpl.java
+++ b/oak-core/src/main/java/org/apache/jackrabbit/oak/query/QueryImpl.java
@@ -1132,7 +1132,8 @@ public class QueryImpl implements Query {
                         String msg = String.format("cost for [%s] of type (%s) with plan [%s] is %1.2f", p.getPlanName(), indexName, plan, c);
                         logDebug(msg);
                     }
-                    if (c < bestCost) {
+                    // In case of cost being the same, chose the index with the lowest name by alphabetic order
+                    if (c < bestCost || (c == bestCost && bestPlan != null && p.getPlanName().compareTo(bestPlan.getPlanName()) < 0 )) {
                         almostBestCost = bestCost;
                         almostBestIndex = bestIndex;
                         almostBestPlan = bestPlan;
