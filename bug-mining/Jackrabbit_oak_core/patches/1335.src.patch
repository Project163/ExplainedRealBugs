diff --git a/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/document/DocumentNodeStore.java b/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/document/DocumentNodeStore.java
index b4aae75506..2c72ff48cc 100644
--- a/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/document/DocumentNodeStore.java
+++ b/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/document/DocumentNodeStore.java
@@ -2084,9 +2084,9 @@ public final class DocumentNodeStore
     BackgroundWriteStats backgroundWrite() {
         return unsavedLastRevisions.persist(this, new UnsavedModifications.Snapshot() {
             @Override
-            public void acquiring() {
+            public void acquiring(Revision mostRecent) {
                 if (store.create(JOURNAL,
-                        singletonList(changes.asUpdateOp(getHeadRevision())))) {
+                        singletonList(changes.asUpdateOp(mostRecent)))) {
                     changes = JOURNAL.newDocument(getDocumentStore());
                 }
             }
diff --git a/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/document/LastRevRecoveryAgent.java b/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/document/LastRevRecoveryAgent.java
index 69e8fe7a6a..25f0390949 100644
--- a/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/document/LastRevRecoveryAgent.java
+++ b/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/document/LastRevRecoveryAgent.java
@@ -235,7 +235,7 @@ public class LastRevRecoveryAgent {
             unsaved.persist(nodeStore, new UnsavedModifications.Snapshot() {
 
                 @Override
-                public void acquiring() {
+                public void acquiring(Revision mostRecent) {
                     if (lastRootRev == null) {
                         // this should never happen - when unsaved has no changes
                         // that is reflected in the 'map' to be empty - in that
diff --git a/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/document/UnsavedModifications.java b/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/document/UnsavedModifications.java
index d5f6c1edd9..1d06fa73b4 100644
--- a/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/document/UnsavedModifications.java
+++ b/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/document/UnsavedModifications.java
@@ -159,7 +159,7 @@ class UnsavedModifications {
         time = clock.getTime();
         Map<String, Revision> pending;
         try {
-            snapshot.acquiring();
+            snapshot.acquiring(getMostRecentRevision());
             pending = Maps.newTreeMap(PathComparator.INSTANCE);
             pending.putAll(map);
         } finally {
@@ -234,14 +234,26 @@ class UnsavedModifications {
         return map.toString();
     }
 
+    private Revision getMostRecentRevision() {
+        // use revision of root document
+        Revision rev = map.get("/");
+        // otherwise find most recent
+        if (rev == null) {
+            for (Revision r : map.values()) {
+                rev = Utils.max(rev, r);
+            }
+        }
+        return rev;
+    }
+
     public interface Snapshot {
 
         Snapshot IGNORE = new Snapshot() {
             @Override
-            public void acquiring() {
+            public void acquiring(Revision mostRecent) {
             }
         };
 
-        void acquiring();
+        void acquiring(Revision mostRecent);
     }
 }
diff --git a/oak-core/src/test/java/org/apache/jackrabbit/oak/plugins/document/JournalTest.java b/oak-core/src/test/java/org/apache/jackrabbit/oak/plugins/document/JournalTest.java
index b703f64bb6..6cb89ecd08 100644
--- a/oak-core/src/test/java/org/apache/jackrabbit/oak/plugins/document/JournalTest.java
+++ b/oak-core/src/test/java/org/apache/jackrabbit/oak/plugins/document/JournalTest.java
@@ -444,6 +444,31 @@ public class JournalTest extends AbstractJournalTest {
         }
     }
 
+    // OAK-3433
+    @Test
+    public void journalEntryKey() throws Exception {
+        DocumentNodeStore ns1 = createMK(1, 0).getNodeStore();
+        DocumentNodeStore ns2 = createMK(2, 0).getNodeStore();
+
+        NodeBuilder b1 = ns1.getRoot().builder();
+        b1.child("foo");
+        ns1.merge(b1, EmptyHook.INSTANCE, CommitInfo.EMPTY);
+        ns1.runBackgroundOperations();
+
+        NodeBuilder b2 = ns2.getRoot().builder();
+        b2.child("bar");
+        ns2.merge(b2, EmptyHook.INSTANCE, CommitInfo.EMPTY);
+        Revision h2 = ns2.getHeadRevision();
+
+        ns2.runBackgroundReadOperations();
+
+        ns2.runBackgroundOperations();
+
+        String id = JournalEntry.asId(h2);
+        assertTrue("Background update did not create a journal entry with id " + id,
+                ns1.getDocumentStore().find(Collection.JOURNAL, id) != null);
+    }
+
     private DocumentMK createMK(int clusterId, int asyncDelay) {
         if (ds == null) {
             ds = new MemoryDocumentStore();
diff --git a/oak-core/src/test/java/org/apache/jackrabbit/oak/plugins/document/mongo/ClusterConflictTest.java b/oak-core/src/test/java/org/apache/jackrabbit/oak/plugins/document/mongo/ClusterConflictTest.java
index 46eecdccb3..e711a40ae5 100644
--- a/oak-core/src/test/java/org/apache/jackrabbit/oak/plugins/document/mongo/ClusterConflictTest.java
+++ b/oak-core/src/test/java/org/apache/jackrabbit/oak/plugins/document/mongo/ClusterConflictTest.java
@@ -32,10 +32,8 @@ import org.apache.jackrabbit.oak.spi.commit.EmptyHook;
 import org.apache.jackrabbit.oak.spi.state.NodeBuilder;
 import org.apache.jackrabbit.oak.spi.state.NodeState;
 import org.apache.jackrabbit.oak.spi.state.NodeStore;
-import org.junit.Ignore;
 import org.junit.Test;
 
-import static org.junit.Assert.assertFalse;
 import static org.junit.Assert.assertTrue;
 import static org.junit.Assert.fail;
 
@@ -61,7 +59,6 @@ public class ClusterConflictTest extends AbstractMongoConnectionTest {
     }
 
     // OAK-3433
-    @Ignore
     @Test
     public void mergeRetryWhileBackgroundRead() throws Exception {
         DocumentNodeStore ns1 = mk.getNodeStore();
@@ -100,7 +97,7 @@ public class ClusterConflictTest extends AbstractMongoConnectionTest {
         // because /a/b/c is seen as changed in the future
         // without the fix for OAK-3433:
         // the second merge attempt succeeds because now the
-        // /a/b/c change is visible and happened before the commit
+        // /a/b/c change revision is visible and happened before the commit
         // revision but before the base revision
         b2 = ns2.getRoot().builder();
         b2.child("z").setProperty("q", "v");
@@ -115,13 +112,18 @@ public class ClusterConflictTest extends AbstractMongoConnectionTest {
                     runBackgroundRead(ns2);
 
                     NodeBuilder builder = after.builder();
-                    builder.child("a").child("b").child("c").child("bar");
+                    if (builder.getChildNode("a").getChildNode("b").hasChildNode("c")) {
+                        builder.child("a").child("b").child("c").child("bar");
+                    } else {
+                        throw new CommitFailedException(
+                                CommitFailedException.OAK, 0,
+                                "/a/b/c does not exist anymore");
+                    }
                     return builder.getNodeState();
                 }
             }, CommitInfo.EMPTY);
             fail("Merge must fail with CommitFailedException");
         } catch (CommitFailedException e) {
-            e.printStackTrace();
             // expected
         }
     }
