diff --git a/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/identifier/ClusterRepositoryInfo.java b/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/identifier/ClusterRepositoryInfo.java
index 7b5f4da5fd..d2755eb335 100644
--- a/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/identifier/ClusterRepositoryInfo.java
+++ b/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/identifier/ClusterRepositoryInfo.java
@@ -23,8 +23,11 @@ import org.apache.jackrabbit.oak.api.Type;
 import org.apache.jackrabbit.oak.spi.commit.CommitInfo;
 import org.apache.jackrabbit.oak.spi.commit.EmptyHook;
 import org.apache.jackrabbit.oak.spi.state.NodeBuilder;
+import org.apache.jackrabbit.oak.spi.state.NodeState;
 import org.apache.jackrabbit.oak.spi.state.NodeStore;
 
+import javax.annotation.CheckForNull;
+
 /**
  * Utility class to manage a unique cluster/repository id for the cluster.
  */
@@ -57,8 +60,13 @@ public class ClusterRepositoryInfo {
      * @param store the NodeStore instance
      * @return the repository id
      */
+    @CheckForNull
     public static String getId(NodeStore store) {
-        return store.getRoot().getChildNode(CLUSTER_CONFIG_NODE).getProperty(CLUSTER_ID_PROP).getValue(Type.STRING);
+        NodeState state = store.getRoot().getChildNode(CLUSTER_CONFIG_NODE);
+        if (state.hasProperty(CLUSTER_ID_PROP)) {
+            return state.getProperty(CLUSTER_ID_PROP).getValue(Type.STRING);
+        }
+        return null;
     }
 }
 
diff --git a/oak-core/src/test/java/org/apache/jackrabbit/oak/plugins/blob/ClusterRepositoryInfoTest.java b/oak-core/src/test/java/org/apache/jackrabbit/oak/plugins/blob/ClusterRepositoryInfoTest.java
index 98c37c0d89..eb27670bce 100644
--- a/oak-core/src/test/java/org/apache/jackrabbit/oak/plugins/blob/ClusterRepositoryInfoTest.java
+++ b/oak-core/src/test/java/org/apache/jackrabbit/oak/plugins/blob/ClusterRepositoryInfoTest.java
@@ -93,6 +93,19 @@ public class ClusterRepositoryInfoTest {
         Assert.assertEquals(repoId1, repoId2);
     }
 
+    @Test
+    public void checkGetIdWhenNotRegistered() {
+        MemoryDocumentStore store = new MemoryDocumentStore();
+        DocumentNodeStore ds1 = new DocumentMK.Builder()
+            .setAsyncDelay(0)
+            .setDocumentStore(store)
+            .setClusterId(1)
+            .getNodeStore();
+        // Should be null and no NPE
+        String id = ClusterRepositoryInfo.getId(ds1);
+        Assert.assertNull(id);
+    }
+
     @After
     public void close() throws IOException {
         FileUtils.cleanDirectory(new File(DataStoreUtils.getHomeDir()));
