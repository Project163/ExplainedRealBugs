diff --git a/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/document/DocumentNodeStore.java b/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/document/DocumentNodeStore.java
index d57f8759b9..35a5f773ec 100644
--- a/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/document/DocumentNodeStore.java
+++ b/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/document/DocumentNodeStore.java
@@ -589,6 +589,10 @@ public final class DocumentNodeStore
         return docChildrenCacheStats;
     }
 
+    void invalidateDocChildrenCache() {
+        docChildrenCache.invalidateAll();
+    }
+
     public int getPendingWriteCount() {
         return unsavedLastRevisions.getPaths().size();
     }
diff --git a/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/document/VersionGarbageCollector.java b/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/document/VersionGarbageCollector.java
index e671b66d0d..885f7218c5 100644
--- a/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/document/VersionGarbageCollector.java
+++ b/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/document/VersionGarbageCollector.java
@@ -121,6 +121,7 @@ public class VersionGarbageCollector {
             log.debug(sb.toString());
         }
         nodeStore.getDocumentStore().remove(Collection.NODES, docIdsToDelete);
+        nodeStore.invalidateDocChildrenCache();
         stats.deletedDocGCCount += docIdsToDelete.size();
     }
 
diff --git a/oak-core/src/test/java/org/apache/jackrabbit/oak/plugins/document/VersionGarbageCollectorTest.java b/oak-core/src/test/java/org/apache/jackrabbit/oak/plugins/document/VersionGarbageCollectorTest.java
index 68b5ee1bef..d98fa5d8a1 100644
--- a/oak-core/src/test/java/org/apache/jackrabbit/oak/plugins/document/VersionGarbageCollectorTest.java
+++ b/oak-core/src/test/java/org/apache/jackrabbit/oak/plugins/document/VersionGarbageCollectorTest.java
@@ -23,6 +23,7 @@ import java.io.IOException;
 import java.util.Collection;
 import java.util.List;
 import java.util.Map;
+import java.util.Set;
 import java.util.concurrent.TimeUnit;
 
 import static org.apache.jackrabbit.oak.plugins.document.Collection.NODES;
@@ -38,9 +39,12 @@ import static org.junit.Assert.assertTrue;
 
 import com.google.common.collect.ImmutableList;
 import com.google.common.collect.Lists;
+import com.google.common.collect.Sets;
+
 import org.apache.jackrabbit.oak.plugins.document.util.Utils;
 import org.apache.jackrabbit.oak.spi.commit.CommitInfo;
 import org.apache.jackrabbit.oak.spi.commit.EmptyHook;
+import org.apache.jackrabbit.oak.spi.state.ChildNodeEntry;
 import org.apache.jackrabbit.oak.spi.state.NodeBuilder;
 import org.apache.jackrabbit.oak.stats.Clock;
 import org.junit.After;
@@ -257,6 +261,43 @@ public class VersionGarbageCollectorTest {
         assertNotNull(test);
     }
 
+    // OAK-1779
+    @Test
+    public void cacheConsistency() throws Exception {
+        long maxAge = 1; //hrs
+        long delta = TimeUnit.MINUTES.toMillis(10);
+
+        Set<String> names = Sets.newHashSet();
+        NodeBuilder b1 = store.getRoot().builder();
+        for (int i = 0; i < 10; i++) {
+            String name = "test-" + i;
+            b1.child(name);
+            names.add(name);
+        }
+        store.merge(b1, EmptyHook.INSTANCE, CommitInfo.EMPTY);
+
+        for (ChildNodeEntry entry : store.getRoot().getChildNodeEntries()) {
+            entry.getNodeState();
+        }
+
+        b1 = store.getRoot().builder();
+        b1.getChildNode("test-7").remove();
+        names.remove("test-7");
+
+        store.merge(b1, EmptyHook.INSTANCE, CommitInfo.EMPTY);
+
+        clock.waitUntil(clock.getTime() + TimeUnit.HOURS.toMillis(maxAge) + delta);
+
+        VersionGCStats stats = gc.gc(maxAge, TimeUnit.HOURS);
+        assertEquals(1, stats.deletedDocGCCount);
+
+        Set<String> children = Sets.newHashSet();
+        for (ChildNodeEntry entry : store.getRoot().getChildNodeEntries()) {
+            children.add(entry.getName());
+        }
+        assertEquals(names, children);
+    }
+
     private NodeDocument getDoc(String path){
         return store.getDocumentStore().find(NODES, Utils.getIdFromPath(path), 0);
     }
