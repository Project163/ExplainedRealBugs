diff --git a/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/progress/NodeCounterMBeanEstimator.java b/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/progress/NodeCounterMBeanEstimator.java
index 54927f740d..a3d4706117 100644
--- a/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/progress/NodeCounterMBeanEstimator.java
+++ b/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/progress/NodeCounterMBeanEstimator.java
@@ -25,6 +25,7 @@ import java.util.Set;
 import org.apache.jackrabbit.guava.common.collect.Iterables;
 import org.apache.jackrabbit.oak.commons.PathUtils;
 import org.apache.jackrabbit.oak.plugins.index.counter.jmx.NodeCounter;
+import org.apache.jackrabbit.oak.spi.filter.PathFilter;
 import org.apache.jackrabbit.oak.spi.state.NodeState;
 import org.apache.jackrabbit.oak.spi.state.NodeStateUtils;
 import org.apache.jackrabbit.oak.spi.state.NodeStore;
@@ -86,14 +87,13 @@ public class NodeCounterMBeanEstimator implements NodeCountEstimator {
                 NodeState idxState = NodeStateUtils.getNode(root, indexPath);
 
                 //No include exclude specified so include all
-                if (!idxState.hasProperty(PROP_INCLUDED_PATHS)
-                        && !idxState.hasProperty(PROP_EXCLUDED_PATHS)) {
+                if (!idxState.hasProperty(PROP_INCLUDED_PATHS) && !idxState.hasProperty(PROP_EXCLUDED_PATHS)) {
                     includeAll = true;
                     return;
                 }
 
-                Iterables.addAll(includes, idxState.getStrings(PROP_INCLUDED_PATHS));
-                Iterables.addAll(excludes, idxState.getStrings(PROP_EXCLUDED_PATHS));
+                Iterables.addAll(includes, PathFilter.getStrings(idxState.getProperty(PROP_INCLUDED_PATHS), Set.of()));
+                Iterables.addAll(excludes, PathFilter.getStrings(idxState.getProperty(PROP_EXCLUDED_PATHS), Set.of()));
             }
 
             if (includes.isEmpty()) {
diff --git a/oak-core/src/test/java/org/apache/jackrabbit/oak/plugins/index/importer/JsonDeserializationTest.java b/oak-core/src/test/java/org/apache/jackrabbit/oak/plugins/index/importer/JsonDeserializationTest.java
index e3715bb963..e92c071798 100644
--- a/oak-core/src/test/java/org/apache/jackrabbit/oak/plugins/index/importer/JsonDeserializationTest.java
+++ b/oak-core/src/test/java/org/apache/jackrabbit/oak/plugins/index/importer/JsonDeserializationTest.java
@@ -29,6 +29,7 @@ import org.apache.jackrabbit.oak.json.BlobSerializer;
 import org.apache.jackrabbit.oak.json.JsonDeserializer;
 import org.apache.jackrabbit.oak.json.JsonSerializer;
 import org.apache.jackrabbit.oak.plugins.tree.factories.TreeFactory;
+import org.apache.jackrabbit.oak.spi.filter.PathFilter;
 import org.apache.jackrabbit.oak.spi.state.EqualsDiff;
 import org.apache.jackrabbit.oak.spi.state.NodeBuilder;
 import org.apache.jackrabbit.oak.spi.state.NodeState;
@@ -40,7 +41,7 @@ import static org.junit.Assert.assertTrue;
 public class JsonDeserializationTest {
 
     @Test
-    public void deserialize() throws Exception{
+    public void deserialize() {
         String json = "{\n" +
                 "    \"evaluatePathRestrictions\": true,\n" +
                 "    \"compatVersion\": 2,\n" +
@@ -86,8 +87,8 @@ public class JsonDeserializationTest {
         tree.setProperty("evaluatePathRestrictions", true);
         tree.setProperty("compatVersion", 2);
         tree.setProperty("type", "lucene");
-        tree.setProperty("includedPaths", Collections.singletonList("/content"), Type.STRINGS);
-        tree.setProperty("excludedPaths", Collections.singletonList("/jcr:system"), Type.STRINGS);
+        tree.setProperty(PathFilter.PROP_INCLUDED_PATHS, Collections.singletonList("/content"), Type.STRINGS);
+        tree.setProperty(PathFilter.PROP_EXCLUDED_PATHS, Collections.singletonList("/jcr:system"), Type.STRINGS);
         tree.setProperty("async", "async");
         tree.setProperty("jcr:primaryType", "oak:QueryIndexDefinition", Type.NAME);
 
