diff --git a/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/document/MergeCommit.java b/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/document/MergeCommit.java
index f66e1e5b32..3583e66e6b 100644
--- a/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/document/MergeCommit.java
+++ b/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/document/MergeCommit.java
@@ -36,4 +36,9 @@ class MergeCommit extends Commit {
     SortedSet<Revision> getMergeRevisions() {
         return mergeRevs;
     }
+
+    @Override
+    public void applyToCache(Revision before, boolean isBranchCommit) {
+        // do nothing for a merge commit
+    }
 }
diff --git a/oak-core/src/test/java/org/apache/jackrabbit/oak/plugins/document/DocumentMKDiffTest.java b/oak-core/src/test/java/org/apache/jackrabbit/oak/plugins/document/DocumentMKDiffTest.java
index 4b6ab85c96..ed914a702e 100644
--- a/oak-core/src/test/java/org/apache/jackrabbit/oak/plugins/document/DocumentMKDiffTest.java
+++ b/oak-core/src/test/java/org/apache/jackrabbit/oak/plugins/document/DocumentMKDiffTest.java
@@ -22,6 +22,7 @@ import org.json.simple.JSONObject;
 import org.junit.Ignore;
 import org.junit.Test;
 
+import static org.junit.Assert.assertEquals;
 import static org.junit.Assert.assertFalse;
 import static org.junit.Assert.assertNotNull;
 import static org.junit.Assert.assertTrue;
@@ -324,4 +325,17 @@ public class DocumentMKDiffTest extends AbstractMongoConnectionTest {
         jsop = mk.diff(rev5, rev6, "/", 0);
         assertTrue(jsop, jsop.contains("^\"/node-new\""));
     }
+
+    @Test
+    public void diffMergedRevision() {
+        mk.commit("/", "+\"test\":{}", null, null);
+        String before = mk.getHeadRevision();
+
+        String b = mk.branch(null);
+        b = mk.commit("/test", "^\"p\":1", b, null);
+        String after = mk.merge(b, null);
+
+        String jsop = mk.diff(before, after, "/", 0).trim();
+        assertEquals("^\"/test\":{}", jsop);
+    }
 }
\ No newline at end of file
