diff --git a/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/property/OrderedPropertyIndexLookup.java b/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/property/OrderedPropertyIndexLookup.java
index be1566fd31..a7dfa7c69e 100644
--- a/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/property/OrderedPropertyIndexLookup.java
+++ b/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/property/OrderedPropertyIndexLookup.java
@@ -266,24 +266,19 @@ public class OrderedPropertyIndexLookup {
         String propertyName = PathUtils.getName(pr.propertyName);
         NodeState definition = getIndexNode(root, propertyName, filter);
         if (definition != null) {
-            PropertyValue value = null;
             boolean createPlan = false;
-            if (pr.isNotNullRestriction()) {
+            if (pr.isNotNullRestriction() || pr.list != null) {
                 // open query: [property] is not null
-                value = null;
                 createPlan = true;
             } else if (pr.first != null && pr.first.equals(pr.last) && pr.firstIncluding
                     && pr.lastIncluding) {
                 // [property]=[value]
-                value = pr.first;
                 createPlan = true;
             } else if (pr.first != null && !pr.first.equals(pr.last)) {
                 // '>' & '>=' use cases
-                value = pr.first;
                 createPlan = true;
             } else if (pr.last != null && !pr.last.equals(pr.first)) {
                 // '<' & '<='
-                value = pr.last;
                 createPlan = true;
             }
             if (createPlan) {
diff --git a/oak-core/src/main/java/org/apache/jackrabbit/oak/spi/query/Filter.java b/oak-core/src/main/java/org/apache/jackrabbit/oak/spi/query/Filter.java
index 07f5d0ccb6..9272346e9c 100644
--- a/oak-core/src/main/java/org/apache/jackrabbit/oak/spi/query/Filter.java
+++ b/oak-core/src/main/java/org/apache/jackrabbit/oak/spi/query/Filter.java
@@ -227,11 +227,11 @@ public interface Filter {
         public int propertyType = PropertyType.UNDEFINED;
         
         public boolean isNullRestriction() {
-            return first == null && last == null && lastIncluding && firstIncluding;
+            return first == null && last == null && list == null && lastIncluding && firstIncluding;
         }
         
         public boolean isNotNullRestriction() {
-            return first == null && last == null && !lastIncluding && !firstIncluding;
+            return first == null && last == null && list == null && !lastIncluding && !firstIncluding;
         }
 
         @Override
