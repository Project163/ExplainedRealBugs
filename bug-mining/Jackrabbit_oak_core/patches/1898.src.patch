diff --git a/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/property/ValuePatternUtil.java b/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/property/ValuePatternUtil.java
index 692455bcb9..8234342192 100644
--- a/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/property/ValuePatternUtil.java
+++ b/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/index/property/ValuePatternUtil.java
@@ -46,6 +46,14 @@ public final class ValuePatternUtil {
         List<String> list = new ArrayList<>();
         for(PropertyRestriction p : filter.getPropertyRestrictions(property)) {
             if (p.isLike) {
+                String prefixForLike = getPrefixForLikeRestriction(p.first.getValue(Type.STRING));
+                if (prefixForLike != null) {
+                    list.add(prefixForLike);
+                    // Set first and last to true to make sure if there is only 1 property restriction, which is like -
+                    // the value for same gets evaluated for calculating the longest prefix.
+                    first = true;
+                    last = true;
+                }
                 continue;
             }
             if (p.first != null) {
@@ -78,6 +86,41 @@ public final class ValuePatternUtil {
         return prefix;
     }
 
+    private static String getPrefixForLikeRestriction(String likeRestrictionValue) {
+        //"like 'abc%'"  => prefix 'abc'
+        //"like 'abcdef' => prefix 'abcdef'
+        //"like 'abc_def' => prefix 'abc'
+        //"like '%abc' => no prefix
+        //"like 'abc\%'"  => prefix 'abc%'  (because \ is the escape char to search for the character % explicitly)
+        //"like 'abc\_def%' => prefix 'abc_def'
+        // the wildcards characters for like values are _ (any one character) and % (any characters).
+        // An index is used, except if the operand starts with a wildcard. To search for the characters % and _,
+        // the characters need to be escaped using \ (backslash).
+
+        // if the value starts with a wildcard, then there is no prefix
+        if (likeRestrictionValue.startsWith("%") || likeRestrictionValue.startsWith("_")) {
+            return null;
+        } else {
+            // if the value contains a wildcard, then the prefix is the value up to the first of the 2 wildcards % or _
+            // Logic also handles escape using \ (backslash).
+            StringBuilder prefix = new StringBuilder();
+            boolean escape = false;
+            for (int i = 0; i < likeRestrictionValue.length(); i++) {
+                char c = likeRestrictionValue.charAt(i);
+                if (c == '\\' && !escape) {
+                    escape = true;
+                } else {
+                    if (!escape && (c == '%' || c == '_')) {
+                        break;
+                    }
+                    prefix.append(c);
+                    escape = false;
+                }
+            }
+            return prefix.toString();
+        }
+    }
+
     @Nullable
     public static Set<String> getAllValues(PropertyRestriction restriction){
         return getValues(restriction, ValuePattern.MATCH_ALL);
diff --git a/oak-core/src/test/java/org/apache/jackrabbit/oak/plugins/index/property/ValuePatternTest.java b/oak-core/src/test/java/org/apache/jackrabbit/oak/plugins/index/property/ValuePatternTest.java
index 3209e0ebd6..02e0e104a9 100644
--- a/oak-core/src/test/java/org/apache/jackrabbit/oak/plugins/index/property/ValuePatternTest.java
+++ b/oak-core/src/test/java/org/apache/jackrabbit/oak/plugins/index/property/ValuePatternTest.java
@@ -236,6 +236,41 @@ public class ValuePatternTest {
         filter = new FilterImpl(null, null, null);
         filter.restrictProperty("x", Operator.LIKE, 
                 PropertyValues.newString("hello%"));
+        assertEquals("hello", getLongestPrefix(filter, "x"));
+
+        filter = new FilterImpl(null, null, null);
+        filter.restrictProperty("x", Operator.LIKE,
+                PropertyValues.newString("helloworld"));
+        assertEquals("helloworld", getLongestPrefix(filter, "x"));
+
+        filter = new FilterImpl(null, null, null);
+        filter.restrictProperty("x", Operator.LIKE,
+                PropertyValues.newString("hello_orld"));
+        assertEquals("hello", getLongestPrefix(filter, "x"));
+
+        filter = new FilterImpl(null, null, null);
+        filter.restrictProperty("x", Operator.LIKE,
+                PropertyValues.newString("%hello"));
+        assertNull(getLongestPrefix(filter, "x"));
+
+        filter = new FilterImpl(null, null, null);
+        filter.restrictProperty("x", Operator.LIKE,
+                PropertyValues.newString("hello\\%"));
+        assertEquals("hello%", getLongestPrefix(filter, "x"));
+
+        filter = new FilterImpl(null, null, null);
+        filter.restrictProperty("x", Operator.LIKE,
+                PropertyValues.newString("hello\\_world%"));
+        assertEquals("hello_world", getLongestPrefix(filter, "x"));
+
+        filter = new FilterImpl(null, null, null);
+        filter.restrictProperty("x", Operator.LIKE,
+                PropertyValues.newString("hello_world%"));
+        assertEquals("hello", getLongestPrefix(filter, "x"));
+
+        filter = new FilterImpl(null, null, null);
+        filter.restrictProperty("x", Operator.LIKE,
+                PropertyValues.newString("_hello_world%"));
         assertNull(getLongestPrefix(filter, "x"));
 
         filter = new FilterImpl(null, null, null);
