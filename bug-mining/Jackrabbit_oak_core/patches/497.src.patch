diff --git a/oak-core/src/main/java/org/apache/jackrabbit/oak/query/QueryImpl.java b/oak-core/src/main/java/org/apache/jackrabbit/oak/query/QueryImpl.java
index 2bcaac34ae..bbde54e3c9 100644
--- a/oak-core/src/main/java/org/apache/jackrabbit/oak/query/QueryImpl.java
+++ b/oak-core/src/main/java/org/apache/jackrabbit/oak/query/QueryImpl.java
@@ -424,6 +424,16 @@ public class QueryImpl implements Query {
         prepared = true;
         source.prepare();
     }
+ 
+    /**
+     * <b>!Test purpose only! <b>
+     * 
+     * this creates a filter for the given query
+     * 
+     */
+    Filter createFilter(boolean preparing) {
+        return source.createFilter(preparing);
+    }
 
     /**
      * An iterator over result rows.
diff --git a/oak-core/src/main/java/org/apache/jackrabbit/oak/query/ast/JoinImpl.java b/oak-core/src/main/java/org/apache/jackrabbit/oak/query/ast/JoinImpl.java
index 8ad8a00913..b7d0f1aa9d 100644
--- a/oak-core/src/main/java/org/apache/jackrabbit/oak/query/ast/JoinImpl.java
+++ b/oak-core/src/main/java/org/apache/jackrabbit/oak/query/ast/JoinImpl.java
@@ -14,6 +14,7 @@
 package org.apache.jackrabbit.oak.query.ast;
 
 import org.apache.jackrabbit.oak.query.QueryImpl;
+import org.apache.jackrabbit.oak.spi.query.Filter;
 import org.apache.jackrabbit.oak.spi.state.NodeState;
 
 /**
@@ -139,6 +140,12 @@ public class JoinImpl extends SourceImpl {
         end = false;
     }
 
+    @Override
+    public Filter createFilter(boolean preparing) {
+        // TODO is a join filter needed?
+        return left.createFilter(preparing);
+    }
+
     @Override
     public boolean next() {
         if (end) {
diff --git a/oak-core/src/main/java/org/apache/jackrabbit/oak/query/ast/SelectorImpl.java b/oak-core/src/main/java/org/apache/jackrabbit/oak/query/ast/SelectorImpl.java
index 196edbe0fa..ae1a8bbb60 100644
--- a/oak-core/src/main/java/org/apache/jackrabbit/oak/query/ast/SelectorImpl.java
+++ b/oak-core/src/main/java/org/apache/jackrabbit/oak/query/ast/SelectorImpl.java
@@ -228,7 +228,8 @@ public class SelectorImpl extends SourceImpl {
      * @param preparing whether a filter for the prepare phase should be made 
      * @return the filter
      */
-    private Filter createFilter(boolean preparing) {
+    @Override
+    public Filter createFilter(boolean preparing) {
         FilterImpl f = new FilterImpl(this, query.getStatement());
         f.setPreparing(preparing);
         if (joinCondition != null) {
diff --git a/oak-core/src/main/java/org/apache/jackrabbit/oak/query/ast/SourceImpl.java b/oak-core/src/main/java/org/apache/jackrabbit/oak/query/ast/SourceImpl.java
index d1964a6529..7b95deced0 100644
--- a/oak-core/src/main/java/org/apache/jackrabbit/oak/query/ast/SourceImpl.java
+++ b/oak-core/src/main/java/org/apache/jackrabbit/oak/query/ast/SourceImpl.java
@@ -21,6 +21,7 @@ package org.apache.jackrabbit.oak.query.ast;
 import java.util.ArrayList;
 
 import org.apache.jackrabbit.oak.query.QueryImpl;
+import org.apache.jackrabbit.oak.spi.query.Filter;
 import org.apache.jackrabbit.oak.spi.state.NodeState;
 
 /**
@@ -170,4 +171,12 @@ public abstract class SourceImpl extends AstElement {
 
     abstract void setParent(JoinConditionImpl joinCondition);
 
+    /**
+     * <b>!Test purpose only! <b>
+     * 
+     * this creates a filter for the given query
+     * 
+     */
+    abstract public Filter createFilter(boolean preparing);
+
 }
diff --git a/oak-core/src/test/java/org/apache/jackrabbit/oak/query/FilterTest.java b/oak-core/src/test/java/org/apache/jackrabbit/oak/query/FilterTest.java
new file mode 100644
index 0000000000..0e9c5cccd6
--- /dev/null
+++ b/oak-core/src/test/java/org/apache/jackrabbit/oak/query/FilterTest.java
@@ -0,0 +1,54 @@
+/*
+ * Licensed to the Apache Software Foundation (ASF) under one or more
+ * contributor license agreements.  See the NOTICE file distributed with
+ * this work for additional information regarding copyright ownership.
+ * The ASF licenses this file to You under the Apache License, Version 2.0
+ * (the "License"); you may not use this file except in compliance with
+ * the License.  You may obtain a copy of the License at
+ *
+ *      http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+
+package org.apache.jackrabbit.oak.query;
+
+import static junit.framework.Assert.assertFalse;
+import static org.apache.jackrabbit.JcrConstants.JCR_SYSTEM;
+import static org.apache.jackrabbit.oak.plugins.nodetype.NodeTypeConstants.JCR_NODE_TYPES;
+import static org.apache.jackrabbit.oak.plugins.nodetype.write.InitialContent.INITIAL_CONTENT;
+
+import java.text.ParseException;
+
+import org.apache.jackrabbit.oak.query.xpath.XPathToSQL2Converter;
+import org.apache.jackrabbit.oak.spi.query.Filter;
+import org.apache.jackrabbit.oak.spi.state.NodeState;
+import org.junit.Ignore;
+import org.junit.Test;
+
+public class FilterTest {
+
+    private final NodeState types = INITIAL_CONTENT.getChildNode(JCR_SYSTEM)
+            .getChildNode(JCR_NODE_TYPES);
+
+    private final SQL2Parser p = new SQL2Parser(types);
+
+    private Filter createFilter(String xpath) throws ParseException {
+        String sql = new XPathToSQL2Converter().convert(xpath);
+        QueryImpl q = (QueryImpl) p.parse(sql);
+        return q.createFilter(true);
+    }
+
+    @Test
+    @Ignore("OAK-1108")
+    public void mvp() throws Exception {
+        // this can refer to a multi-valued property
+        Filter f = createFilter("//*[(@prop = 'aaa' and @prop = 'bbb' and @prop = 'ccc')]");
+        assertFalse(f.isAlwaysFalse());
+    }
+
+}
