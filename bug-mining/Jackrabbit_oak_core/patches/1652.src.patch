diff --git a/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/document/JournalEntry.java b/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/document/JournalEntry.java
index ff56622ea1..793e1f6034 100644
--- a/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/document/JournalEntry.java
+++ b/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/document/JournalEntry.java
@@ -69,7 +69,7 @@ public final class JournalEntry extends Document {
 
     private static final String CHANGE_SET = "_cs";
 
-    private static final String BRANCH_COMMITS = "_bc";
+    static final String BRANCH_COMMITS = "_bc";
 
     public static final String MODIFIED = "_modified";
 
@@ -393,6 +393,9 @@ public final class JournalEntry extends Document {
     }
 
     void branchCommit(@Nonnull Iterable<Revision> revisions) {
+        if (!revisions.iterator().hasNext()) {
+            return;
+        }
         String branchCommits = (String) get(BRANCH_COMMITS);
         if (branchCommits == null) {
             branchCommits = "";
@@ -469,7 +472,9 @@ public final class JournalEntry extends Document {
         String bc = (String) get(BRANCH_COMMITS);
         if (bc != null) {
             for (String id : bc.split(",")) {
-                ids.add(id);
+                if (id.length() != 0) {
+                    ids.add(id);
+                }
             }
         }
         return new Iterable<JournalEntry>() {
diff --git a/oak-core/src/test/java/org/apache/jackrabbit/oak/plugins/document/JournalDiffLoaderTest.java b/oak-core/src/test/java/org/apache/jackrabbit/oak/plugins/document/JournalDiffLoaderTest.java
index 981cf073a3..fdc53a9894 100644
--- a/oak-core/src/test/java/org/apache/jackrabbit/oak/plugins/document/JournalDiffLoaderTest.java
+++ b/oak-core/src/test/java/org/apache/jackrabbit/oak/plugins/document/JournalDiffLoaderTest.java
@@ -38,7 +38,6 @@ import org.apache.jackrabbit.oak.spi.state.NodeStore;
 import org.apache.jackrabbit.oak.stats.Clock;
 import org.junit.After;
 import org.junit.Before;
-import org.junit.Ignore;
 import org.junit.Rule;
 import org.junit.Test;
 
@@ -327,7 +326,6 @@ public class JournalDiffLoaderTest {
                 journalQueryCounter.get() > 0);
     }
 
-    @Ignore("OAK-5651")
     @Test
     public void emptyBranchCommit() throws Exception {
         DocumentNodeStore ns = builderProvider.newBuilder()
diff --git a/oak-core/src/test/java/org/apache/jackrabbit/oak/plugins/document/JournalEntryTest.java b/oak-core/src/test/java/org/apache/jackrabbit/oak/plugins/document/JournalEntryTest.java
index 409a1cb639..70d366dc40 100644
--- a/oak-core/src/test/java/org/apache/jackrabbit/oak/plugins/document/JournalEntryTest.java
+++ b/oak-core/src/test/java/org/apache/jackrabbit/oak/plugins/document/JournalEntryTest.java
@@ -32,7 +32,6 @@ import org.apache.jackrabbit.oak.commons.json.JsopReader;
 import org.apache.jackrabbit.oak.commons.json.JsopTokenizer;
 import org.apache.jackrabbit.oak.commons.sort.StringSort;
 import org.apache.jackrabbit.oak.plugins.document.memory.MemoryDocumentStore;
-import org.junit.Ignore;
 import org.junit.Test;
 
 import static org.apache.jackrabbit.oak.plugins.document.Collection.JOURNAL;
@@ -357,7 +356,6 @@ public class JournalEntryTest {
         assertTrue("Incorrect hasChanges", entry.hasChanges());
     }
 
-    @Ignore("OAK-5651")
     @Test
     public void emptyBranchCommit() {
         DocumentStore store = new MemoryDocumentStore();
@@ -365,6 +363,7 @@ public class JournalEntryTest {
 
         entry.branchCommit(Collections.<Revision>emptyList());
         assertFalse(entry.getBranchCommits().iterator().hasNext());
+        assertNull(entry.get(JournalEntry.BRANCH_COMMITS));
     }
 
     private static void addRandomPaths(java.util.Collection<String> paths) throws IOException {
