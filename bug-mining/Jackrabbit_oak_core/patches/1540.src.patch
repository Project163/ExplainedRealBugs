diff --git a/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/document/NodeDocument.java b/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/document/NodeDocument.java
index 2449866218..96e441d008 100644
--- a/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/document/NodeDocument.java
+++ b/oak-core/src/main/java/org/apache/jackrabbit/oak/plugins/document/NodeDocument.java
@@ -1962,8 +1962,10 @@ public final class NodeDocument extends Document implements CachedNodeDocument{
             }
         } else {
             // branch commit (not merged)
-            Revision branchCommit = Revision.fromString(commitValue);
-            if (branchCommit.getClusterId() != context.getClusterId()) {
+            // read as RevisionVector, even though this should be
+            // a Revision only. See OAK-4840
+            RevisionVector branchCommit = RevisionVector.fromString(commitValue);
+            if (branchCommit.getBranchRevision().getClusterId() != context.getClusterId()) {
                 // this is an unmerged branch commit from another cluster node,
                 // hence never visible to us
                 return false;
