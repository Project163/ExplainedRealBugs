<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:52:43 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[DIGESTER-133] Class fields are not set if class is inherited from HashMap if commons-beanutils-1.8.0 is used</title>
                <link>https://issues.apache.org/jira/browse/DIGESTER-133</link>
                <project id="12310471" key="DIGESTER">Commons Digester</project>
                    <description>&lt;p&gt;Class fields are not set if class is inherited from HashMap, value is put in HashMap instead.&lt;br/&gt;
I tried this simple test with  Digester 1.6, 1.7, 1.8 and 2.0. It works with commons-beanutils-1.7.0, but does not work with commons-beanutils-1.8.0. JUnit 4.4 was used for testing.&lt;/p&gt;

&lt;p&gt;================ Class to be instantiated from XML ==========================&lt;br/&gt;
import java.util.HashMap;&lt;/p&gt;


&lt;p&gt;public class MyClass extends HashMap&amp;lt;String, String&amp;gt; {&lt;br/&gt;
	private boolean flag = false;&lt;/p&gt;

&lt;p&gt;	public boolean isFlag()&lt;/p&gt;
	{
		return flag;
	}

&lt;p&gt;	public void setFlag(boolean flag)&lt;/p&gt;
	{
		this.flag = flag;
	}
&lt;p&gt;}&lt;/p&gt;

&lt;p&gt;================= Test ===================&lt;br/&gt;
import static org.junit.Assert.assertTrue;&lt;/p&gt;

&lt;p&gt;import java.io.ByteArrayInputStream;&lt;br/&gt;
import java.io.IOException;&lt;/p&gt;

&lt;p&gt;import org.apache.commons.digester.Digester;&lt;br/&gt;
import org.junit.Test;&lt;br/&gt;
import org.xml.sax.SAXException;&lt;/p&gt;



&lt;p&gt;public class TestDigester {&lt;/p&gt;

&lt;p&gt;	@Test&lt;br/&gt;
	public void testDigester() throws IOException, SAXException &lt;/p&gt;
{
		final String xml = &quot;&amp;lt;myclass flag=&apos;true&apos;/&amp;gt;&quot;;
		
		final Digester digester = new Digester();
		digester.addObjectCreate(&quot;myclass&quot;, MyClass.class);
		digester.addSetProperties(&quot;myclass&quot;);
		
		final MyClass res = (MyClass) digester.parse(new ByteArrayInputStream(xml.getBytes()));
		assertTrue(res.isFlag());
	}
&lt;p&gt;}&lt;/p&gt;</description>
                <environment>&lt;p&gt;OS: Kubuntu 8.0.4, Java version is 1.5.0_15&lt;br/&gt;
Windows XP, Java version 1.5.0_11-b03&lt;/p&gt;</environment>
        <key id="12412578">DIGESTER-133</key>
            <summary>Class fields are not set if class is inherited from HashMap if commons-beanutils-1.8.0 is used</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="simone.tripodi">Simone Tripodi</assignee>
                                    <reporter username="shurick">Alexander Kovalenko</reporter>
                        <labels>
                    </labels>
                <created>Fri, 16 Jan 2009 09:41:20 +0000</created>
                <updated>Wed, 6 Jul 2011 11:54:01 +0000</updated>
                            <resolved>Mon, 27 Jun 2011 13:32:57 +0000</resolved>
                                    <version>1.6</version>
                    <version>1.7</version>
                    <version>1.8</version>
                    <version>2.0</version>
                                    <fixVersion>3.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12664671" author="niallp" created="Fri, 16 Jan 2009 20:56:07 +0000"  >&lt;p&gt;The problem in BeanUtils was that the behaviour towards Maps that also have properties was inconsistent and the decision was taken to make everything consistent with the principle that &quot;Maps are always treated as Maps&quot;. See &lt;a href=&quot;https://issues.apache.org/jira/browse/BEANUTILS-162&quot; title=&quot;PropertyUtils.getNestedProperty() doesn&amp;#39;t allow getXxxx on Map-Instances any longer&quot; class=&quot;issue-link&quot; data-issue-key=&quot;BEANUTILS-162&quot;&gt;&lt;del&gt;BEANUTILS-162&lt;/del&gt;&lt;/a&gt; for a full discussion on this.&lt;/p&gt;

&lt;p&gt;As part of fixing that issue two methods were added to PropertyUtilsBean to make it easier for people to change this behaviour with their own custom implementation of PropertyUtilsBean:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;getPropertyOfMapBean()  - See &lt;a href=&quot;http://tinyurl.com/9jvjec&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://tinyurl.com/9jvjec&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;setPropertyOfMapBean() - See &lt;a href=&quot;http://tinyurl.com/7d9ynj&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://tinyurl.com/7d9ynj&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;So you can create your own PropertyUtilsBean implementation, something like the following&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; org.myco.myproj;

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.lang.reflect.InvocationTargetException;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.util.Map;

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.beanutils.BeanUtilsBean;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.beanutils.ConvertUtilsBean;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.beanutils.PropertyUtilsBean;

&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;MyPropertyUtilsBean &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; PropertyUtilsBean {

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void initMyPropertyUtilsBean() {
        PropertyUtilsBean propertyUtils = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; MyPropertyUtilsBean();
        ConvertUtilsBean convertUtils = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ConvertUtilsBean();
        BeanUtilsBean beanUtils = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; BeanUtilsBean(convertUtils, propertyUtils);
        BeanUtilsBean.setInstance(beanUtils);
    }

    &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; getPropertyOfMapBean(Map bean, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; name)
        &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IllegalArgumentException, IllegalAccessException,
        InvocationTargetException, NoSuchMethodException {

        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (isReadable(bean, name)) {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; getSimpleProperty(bean, name);
        } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;.getPropertyOfMapBean(bean, name);
        }
    }

    &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; void setPropertyOfMapBean(Map bean, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; name, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; value)
        &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IllegalArgumentException, IllegalAccessException,
               InvocationTargetException, NoSuchMethodException {
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (isWriteable(bean, name)) {
            setSimpleProperty(bean, name, value);
        } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
            &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;.setPropertyOfMapBean(bean, name, value);
        }
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I included a static method in the above to register your custom PropertyUtilsBean implementation&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;MyPropertyUtilsBean.initMyPropertyUtilsBean();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Then both BeanUtils and PropertyUtils should both delegate to your custom bean and get the behaviour you want.&lt;/p&gt;</comment>
                            <comment id="13055537" author="simone.tripodi" created="Mon, 27 Jun 2011 13:32:57 +0000"  >&lt;p&gt;Niall&apos;s hint works, please see committed &lt;a href=&quot;http://svn.apache.org/viewvc/commons/proper/digester/trunk/src/test/java/org/apache/commons/digester3/Digester133TestCase.java?view=markup&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Digester133TestCase&lt;/a&gt; on Digester3&lt;/p&gt;</comment>
                            <comment id="13060514" author="simone.tripodi" created="Wed, 6 Jul 2011 11:54:01 +0000"  >&lt;p&gt;included in Apache Commons Digester 3.0 release&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12341033">BEANUTILS-162</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>51028</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 20 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0d4mn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>74526</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>