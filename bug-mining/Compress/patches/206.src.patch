diff --git a/src/main/java/org/apache/commons/compress/archivers/sevenz/SevenZFile.java b/src/main/java/org/apache/commons/compress/archivers/sevenz/SevenZFile.java
index 3e2113df5..10568407e 100644
--- a/src/main/java/org/apache/commons/compress/archivers/sevenz/SevenZFile.java
+++ b/src/main/java/org/apache/commons/compress/archivers/sevenz/SevenZFile.java
@@ -899,6 +899,9 @@ public int read() throws IOException {
     }
     
     private InputStream getCurrentStream() throws IOException {
+        if (archive.files[currentEntryIndex].getSize() == 0) {
+            return new ByteArrayInputStream(new byte[0]);
+        }
         if (deferredBlockStreams.isEmpty()) {
             throw new IllegalStateException("No current 7z entry (call getNextEntry() first).");
         }
diff --git a/src/test/java/org/apache/commons/compress/archivers/sevenz/SevenZFileTest.java b/src/test/java/org/apache/commons/compress/archivers/sevenz/SevenZFileTest.java
index 1c514d8cf..beb0d7f70 100644
--- a/src/test/java/org/apache/commons/compress/archivers/sevenz/SevenZFileTest.java
+++ b/src/test/java/org/apache/commons/compress/archivers/sevenz/SevenZFileTest.java
@@ -259,6 +259,31 @@ public void getEntriesOfUnarchiveTest() throws IOException {
             sevenZFile.close();
         }
     }
+
+    /**
+     * @see "https://issues.apache.org/jira/browse/COMPRESS-348"
+     */
+    @Test
+    public void readEntriesOfSize0() throws IOException {
+        final SevenZFile sevenZFile = new SevenZFile(getFile("COMPRESS-348.7z"));
+        try {
+            int entries = 0;
+            SevenZArchiveEntry entry = sevenZFile.getNextEntry();
+            while (entry != null) {
+                entries++;
+                int b = sevenZFile.read();
+                if ("2.txt".equals(entry.getName()) || "5.txt".equals(entry.getName())) {
+                    assertEquals(-1, b);
+                } else {
+                    assertNotEquals(-1, b);
+                }
+                entry = sevenZFile.getNextEntry();
+            }
+            assertEquals(5, entries);
+        } finally {
+            sevenZFile.close();
+        }
+    }
     
     private void test7zUnarchive(final File f, final SevenZMethod m, final byte[] password) throws Exception {
         final SevenZFile sevenZFile = new SevenZFile(f, password);
diff --git a/src/test/resources/COMPRESS-348.7z b/src/test/resources/COMPRESS-348.7z
new file mode 100644
index 000000000..8fb26c2b0
Binary files /dev/null and b/src/test/resources/COMPRESS-348.7z differ
