diff --git a/src/changes/changes.xml b/src/changes/changes.xml
index 7d66d0477..2eac5a915 100644
--- a/src/changes/changes.xml
+++ b/src/changes/changes.xml
@@ -164,6 +164,10 @@ The <action> type attribute can be add,update,fix,remove.
           Fixed a potential ArrayIndexOutOfBoundsException when
           reading STORED entries from ZipArchiveInputStream.
         </action>
+        <action type="fix" date="2013-03-07" issue="COMPRESS-221">
+          CompressorStreamFactory can now be used without XZ for Java
+          being available.
+        </action>
     </release>
     <release version="1.4.1" date="2012-05-23"
              description="Release 1.4.1">
diff --git a/src/main/java/org/apache/commons/compress/compressors/CompressorStreamFactory.java b/src/main/java/org/apache/commons/compress/compressors/CompressorStreamFactory.java
index b6332b5b5..bea91bcd2 100644
--- a/src/main/java/org/apache/commons/compress/compressors/CompressorStreamFactory.java
+++ b/src/main/java/org/apache/commons/compress/compressors/CompressorStreamFactory.java
@@ -28,6 +28,7 @@
 import org.apache.commons.compress.compressors.gzip.GzipCompressorOutputStream;
 import org.apache.commons.compress.compressors.xz.XZCompressorInputStream;
 import org.apache.commons.compress.compressors.xz.XZCompressorOutputStream;
+import org.apache.commons.compress.compressors.xz.XZUtils;
 import org.apache.commons.compress.compressors.pack200.Pack200CompressorInputStream;
 import org.apache.commons.compress.compressors.pack200.Pack200CompressorOutputStream;
 
@@ -117,7 +118,8 @@ public CompressorInputStream createCompressorInputStream(final InputStream in)
                 return new GzipCompressorInputStream(in);
             }
 
-            if (XZCompressorInputStream.matches(signature, signatureLength)) {
+            if (XZUtils.isXZCompressionAvailable() &&
+                XZCompressorInputStream.matches(signature, signatureLength)) {
                 return new XZCompressorInputStream(in);
             }
 
diff --git a/src/main/java/org/apache/commons/compress/compressors/xz/XZUtils.java b/src/main/java/org/apache/commons/compress/compressors/xz/XZUtils.java
index 6d23ae1d5..71101a2d7 100644
--- a/src/main/java/org/apache/commons/compress/compressors/xz/XZUtils.java
+++ b/src/main/java/org/apache/commons/compress/compressors/xz/XZUtils.java
@@ -43,6 +43,19 @@ public class XZUtils {
     private XZUtils() {
     }
 
+    /**
+     * Are the classes required to support XZ compression available?
+     * @since Commons Compress 1.5
+     */
+    public static boolean isXZCompressionAvailable() {
+        try {
+            XZCompressorInputStream.matches(null, 0);
+            return true;
+        } catch (NoClassDefFoundError error) {
+            return false;
+        }
+    }
+
     /**
      * Detects common xz suffixes in the given filename.
      *
