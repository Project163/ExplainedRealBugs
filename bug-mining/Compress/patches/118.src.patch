diff --git a/src/test/java/org/apache/commons/compress/archivers/zip/ZipFileTest.java b/src/test/java/org/apache/commons/compress/archivers/zip/ZipFileTest.java
index d06355e6d..967e71d17 100644
--- a/src/test/java/org/apache/commons/compress/archivers/zip/ZipFileTest.java
+++ b/src/test/java/org/apache/commons/compress/archivers/zip/ZipFileTest.java
@@ -204,46 +204,16 @@ public void testUnixSymlinkSampleFile() throws Exception {
         }
     }
 
+    /**
+     * @see https://issues.apache.org/jira/browse/COMPRESS-227
+     */
     public void testDuplicateEntry() throws Exception {
-        File f = File.createTempFile("commons-compress-zipfiletest", ".zip");
-        f.deleteOnExit();
-        File f2 = File.createTempFile("commons-compress-zipfiletest", ".txt");
-        f2.deleteOnExit();
-
-        OutputStream o = null;
-        try {
-            o = new FileOutputStream(f);
-            ZipArchiveOutputStream zo = new ZipArchiveOutputStream(o);
-            // simple way to ensure entries have extra data
-            zo.setUseZip64(Zip64Mode.Always);
-
-            // add the same file twice
-            ZipArchiveEntry ze = new ZipArchiveEntry(f2, "foo");
-            zo.putArchiveEntry(ze);
-            zo.write(new byte[0]);
-            zo.closeArchiveEntry();
-            ze = new ZipArchiveEntry(f2, "foo");
-            zo.putArchiveEntry(ze);
-            zo.write(new byte[0]);
-            zo.closeArchiveEntry();
-            zo.close();
-
-            o.close();
-            o = null;
+        File archive = getFile("COMPRESS-227.zip");
+        zf = new ZipFile(archive);
 
-            System.err.println("-------------------vvvvvvvvvvvvvvvvvvvvvvv-----------");
-            zf = new ZipFile(f);
-            ze = zf.getEntry("foo");
-            assertNotNull(ze);
-            assertNotNull(zf.getInputStream(ze));
-        } finally {
-            System.err.println("-------------------^^^^^^^^^^^^^^^^^^^^^^^-----------");
-            if (o != null) {
-                o.close();
-            }
-            f.delete();
-            f2.delete();
-        }
+        ZipArchiveEntry ze = zf.getEntry("test1.txt");
+        assertNotNull(ze);
+        assertNotNull(zf.getInputStream(ze));
     }
 
     /*
diff --git a/src/test/resources/COMPRESS-227.zip b/src/test/resources/COMPRESS-227.zip
new file mode 100644
index 000000000..2f54ca636
Binary files /dev/null and b/src/test/resources/COMPRESS-227.zip differ
