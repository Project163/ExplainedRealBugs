<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:32:49 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[COMPRESS-432] Permanent Hang creating ZipFile(File)</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-432</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;While using Tika-1.15 and 1.17 to detect file types, it hangs when creating an instance of ZipFile with the attached corrupted zip file. Taking a thread dump shows the app is looping at the following point:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: RUNNABLE
        at org.apache.commons.compress.archivers.zip.X0017_StrongEncryptionHeader.parseCentralDirectoryFormat(X0017_StrongEncryptionHeader.java:313)
        at org.apache.commons.compress.archivers.zip.X0017_StrongEncryptionHeader.parseFromCentralDirectoryData(X0017_StrongEncryptionHeader.java:380)
        at org.apache.commons.compress.archivers.zip.ExtraFieldUtils.parse(ExtraFieldUtils.java:181)
        at org.apache.commons.compress.archivers.zip.ZipArchiveEntry.setCentralDirectoryExtra(ZipArchiveEntry.java:598)
        at org.apache.commons.compress.archivers.zip.ZipFile.readCentralDirectoryEntry(ZipFile.java:706)
        at org.apache.commons.compress.archivers.zip.ZipFile.populateFromCentralDirectory(ZipFile.java:618)
        at org.apache.commons.compress.archivers.zip.ZipFile.&amp;lt;init&amp;gt;(ZipFile.java:290)
        at org.apache.commons.compress.archivers.zip.ZipFile.&amp;lt;init&amp;gt;(ZipFile.java:213)
        at org.apache.commons.compress.archivers.zip.ZipFile.&amp;lt;init&amp;gt;(ZipFile.java:196)
        at org.apache.commons.compress.archivers.zip.ZipFile.&amp;lt;init&amp;gt;(ZipFile.java:157)
        at org.apache.tika.parser.pkg.ZipContainerDetector.detectZipFormat(ZipContainerDetector.java:132)
        at org.apache.tika.parser.pkg.ZipContainerDetector.detect(ZipContainerDetector.java:88)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>&lt;p&gt;Windows 10 x64, jre 1.8.0_151&lt;/p&gt;</environment>
        <key id="13125952">COMPRESS-432</key>
            <summary>Permanent Hang creating ZipFile(File)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="lfcnassif">Lu&#237;s Filipe Nassif</reporter>
                        <labels>
                    </labels>
                <created>Tue, 19 Dec 2017 15:53:18 +0000</created>
                <updated>Fri, 16 Mar 2018 08:48:12 +0000</updated>
                            <resolved>Wed, 27 Dec 2017 14:17:29 +0000</resolved>
                                    <version>1.14</version>
                                    <fixVersion>1.16</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16296998" author="lfcnassif" created="Tue, 19 Dec 2017 15:57:27 +0000"  >&lt;p&gt;Problematic file&lt;/p&gt;</comment>
                            <comment id="16301761" author="bodewig" created="Fri, 22 Dec 2017 18:22:52 +0000"  >&lt;p&gt;The archive most likely is corrupt as InfoZIP&apos;s unzip says all of the entries have got CRC mismatches. Of course ZipFile shouldn&apos;t hang but rather detect the corruption. Am looking into it.&lt;/p&gt;</comment>
                            <comment id="16301788" author="bodewig" created="Fri, 22 Dec 2017 18:39:49 +0000"  >&lt;p&gt;git commit 2a2f1dc4 fixes the problem (the loop variable was an int, but the the upper bound was a long so the loop wouldn&apos;t terminate if the upper bound was bigger than MAX_INT).&lt;/p&gt;

&lt;p&gt;Now reading the archive dies with an &lt;tt&gt;ArrayIndexOutOfBoundsException&lt;/tt&gt; in &lt;tt&gt;parseFileFormat&lt;/tt&gt; as the &quot;ivSize&quot; is too big. I&apos;d prefer to turn this into a more useful exception but the method is public and declares no checked exception, so &lt;tt&gt;ZipException&lt;/tt&gt; cannot be used. I&apos;m not sure which RuntimeException would be more appropriate - if any.&lt;/p&gt;</comment>
                            <comment id="16301814" author="garydgregory" created="Fri, 22 Dec 2017 18:59:17 +0000"  >&lt;p&gt;An &lt;tt&gt;IllegalStateException&lt;/tt&gt; sounds good since the state of the zip is bad.&lt;/p&gt;</comment>
                            <comment id="16301840" author="lfcnassif" created="Fri, 22 Dec 2017 19:20:12 +0000"  >&lt;p&gt;Thanks, Stefan!&lt;/p&gt;</comment>
                            <comment id="16304564" author="bodewig" created="Wed, 27 Dec 2017 14:17:29 +0000"  >&lt;p&gt;I don&apos;t think &lt;tt&gt;IllegalStateException&lt;/tt&gt; is really correct here as it&apos;s not a matter of state of the stream or the field but rather a function of the input. I think leaving things at &lt;tt&gt;ArrayIndexOutOufBounds&lt;/tt&gt; is good for now.&lt;/p&gt;</comment>
                            <comment id="16401602" author="bodewig" created="Fri, 16 Mar 2018 08:48:12 +0000"  >&lt;p&gt;It was later realized this issue can be used to mount a denial of service attack against services using Commons Compress which then became CVE-2018-1324&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12902889" name="difflist_fsbwserver.f-secure.com_80_583109529_2.zip" size="416772" author="lfcnassif" created="Tue, 19 Dec 2017 15:56:49 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 35 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3o2pb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>