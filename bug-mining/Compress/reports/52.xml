<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:29:33 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[COMPRESS-114] TarUtils.parseName does not properly handle characters outside the range 0-127</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-114</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;if a tarfile contains files with special characters, the names of the tar entries are wrong.&lt;/p&gt;

&lt;p&gt;example:&lt;br/&gt;
correct name: 0302-0601-3&#177;&#177;&#177;F06&#177;W220&#177;ZB&#177;LALALA&#177;&#177;&#177;&#177;&#177;&#177;&#177;&#177;&#177;&#177;CAN&#177;&#177;DC&#177;&#177;&#177;04&#177;060302&#177;MOE.model&lt;br/&gt;
name resolved by TarUtils.parseName: 0302-0101-3&#65457;&#65457;&#65457;F06&#65457;W220&#65457;ZB&#65457;HECKMODUL&#65457;&#65457;&#65457;&#65457;&#65457;&#65457;&#65457;&#65457;&#65457;&#65457;ECE&#65457;&#65457;DC&#65457;&#65457;&#65457;07&#65457;060302&#65457;DOERN.model&lt;/p&gt;

&lt;p&gt;please use: &lt;br/&gt;
result.append(new String(new byte[] &lt;/p&gt;
{ buffer[i] }
&lt;p&gt;));&lt;/p&gt;

&lt;p&gt;instead of: &lt;br/&gt;
result.append((char) buffer&lt;span class=&quot;error&quot;&gt;&amp;#91;i&amp;#93;&lt;/span&gt;);&lt;/p&gt;

&lt;p&gt;to solve this encoding problem.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows/Suse&lt;/p&gt;</environment>
        <key id="12464672">COMPRESS-114</key>
            <summary>TarUtils.parseName does not properly handle characters outside the range 0-127</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="hminst">Helmut Minst</reporter>
                        <labels>
                    </labels>
                <created>Mon, 17 May 2010 12:05:11 +0000</created>
                <updated>Thu, 5 Aug 2010 08:04:41 +0000</updated>
                            <resolved>Mon, 17 May 2010 15:10:06 +0000</resolved>
                                    <version>1.0</version>
                                    <fixVersion>1.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12868206" author="sebb@apache.org" created="Mon, 17 May 2010 12:52:28 +0000"  >&lt;p&gt;Could you provide a small sample tar file containing some files with the special names?&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;Perhaps the file contents could be the expected name&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;We can then add the file to the test cases.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="12868211" author="sebb@apache.org" created="Mon, 17 May 2010 12:56:21 +0000"  >&lt;p&gt;Forgot to mention:&lt;/p&gt;

&lt;p&gt;The &quot;String(byte[])&quot; constructor depends on the default charset encoding, which might not always be what is wanted.&lt;/p&gt;</comment>
                            <comment id="12868212" author="hminst" created="Mon, 17 May 2010 13:02:50 +0000"  >&lt;p&gt;tarfile which includes such files with a filename containing special characters&lt;/p&gt;</comment>
                            <comment id="12868217" author="hminst" created="Mon, 17 May 2010 13:25:11 +0000"  >&lt;p&gt;that&apos;s right, but the cast from byte to char is not a beautiful way.&lt;/p&gt;

&lt;p&gt;String charsetName = &quot;ISO-8859-1&quot;;&lt;br/&gt;
                try {&lt;br/&gt;
                    result.append(new String(new byte[] &lt;/p&gt;
{ buffer[i] }, charsetName));&lt;br/&gt;
                } catch (UnsupportedEncodingException e) {&lt;br/&gt;
                    result.append(new String(new byte[] { buffer[i] }
&lt;p&gt;));&lt;br/&gt;
                }&lt;/p&gt;

&lt;p&gt;where charsetName may be set via a system property or sth else by the customer of commons compress.&lt;/p&gt;
</comment>
                            <comment id="12868219" author="hminst" created="Mon, 17 May 2010 13:36:05 +0000"  >&lt;p&gt;example where charset may be set by a setter in TarArchiveInpustream.&lt;br/&gt;
if an UnsupportedEncodingException occurs, the default charset of the system&lt;br/&gt;
is used.&lt;/p&gt;

&lt;p&gt;Please have a look. Hope this helps to solve the problem.&lt;/p&gt;</comment>
                            <comment id="12868220" author="sebb@apache.org" created="Mon, 17 May 2010 13:42:08 +0000"  >&lt;p&gt;Thanks for the test case - unfortunately you did not grant a license to the ASF to use it.&lt;br/&gt;
Could you re-attach it with the option selected please?&lt;/p&gt;</comment>
                            <comment id="12868222" author="hminst" created="Mon, 17 May 2010 13:46:37 +0000"  >&lt;p&gt;same file, but now the license is available&lt;/p&gt;</comment>
                            <comment id="12868225" author="sebb@apache.org" created="Mon, 17 May 2010 13:57:02 +0000"  >&lt;p&gt;As to how to determine the charset, it looks as though &quot;ASCII&quot; or &quot;ISO-8859-1&quot; are suitable as the default.&lt;br/&gt;
Gnu docs mention &quot;local variant of ASCII&quot;.&lt;/p&gt;</comment>
                            <comment id="12868232" author="hminst" created="Mon, 17 May 2010 14:25:08 +0000"  >&lt;p&gt;yes, i think &quot;ISO-8859-1&quot; seems to be the suitable default value for the charset, too.&lt;/p&gt;

&lt;p&gt;i&apos;ve tested it with several special characters&lt;/p&gt;

&lt;p&gt;&#228;&#246;&#252; in german for example&lt;/p&gt;</comment>
                            <comment id="12868238" author="sebb@apache.org" created="Mon, 17 May 2010 14:32:40 +0000"  >&lt;p&gt;I think there may also be a problem with the TarUtils.formatNameBytes() method, which assumes that String.charAt() can be stored in a byte.&lt;/p&gt;

&lt;p&gt;I&apos;ll add some round-trip tests for formatNameBytes() / parseName()&lt;/p&gt;</comment>
                            <comment id="12868244" author="sebb@apache.org" created="Mon, 17 May 2010 14:54:56 +0000"  >&lt;p&gt;Turned out to be easy to fix the round-trip problem - just ensure that the byte entries are treated as unsigned.&lt;br/&gt;
So no need to worry about charsets.&lt;/p&gt;

&lt;p&gt;Still need to check that this works OK when reading from the test tar file.&lt;/p&gt;</comment>
                            <comment id="12868248" author="sebb@apache.org" created="Mon, 17 May 2010 15:10:06 +0000"  >&lt;p&gt;Now fixed; the test tar file reads OK&lt;/p&gt;</comment>
                            <comment id="12868256" author="hminst" created="Mon, 17 May 2010 15:47:25 +0000"  >&lt;p&gt;I&apos;ve had a look on your solution. This is a better way to solve this Problem. &lt;br/&gt;
Thanks a lot!&lt;/p&gt;</comment>
                            <comment id="12895204" author="partysan" created="Wed, 4 Aug 2010 10:18:22 +0000"  >&lt;p&gt;Hello,&lt;/p&gt;


&lt;p&gt;I&apos;ve checked out the trunk from &lt;a href=&quot;http://svn.apache.org/repos/asf/commons/proper/compress&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/repos/asf/commons/proper/compress&lt;/a&gt; and run the testRoundTripNames() test from TarUtilsTest. It failed (the last checkName() call with spec. characters). The test was performed on Ubuntu 8.10.&lt;/p&gt;

&lt;p&gt;Has the fix been tested on Linux? In which version can find the final fix to this special characters problem?&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;


</comment>
                            <comment id="12895219" author="bodewig" created="Wed, 4 Aug 2010 11:07:28 +0000"  >&lt;p&gt;The test passes for me using Ubuntu 10.4 and OpenJDK 6 - I guess it may even more depend on the Java VM than the OS.  Which flavor of Java are you using, Pavel?&lt;/p&gt;</comment>
                            <comment id="12895228" author="partysan" created="Wed, 4 Aug 2010 11:59:44 +0000"  >&lt;p&gt;Stefan, thanks for a swift reply,&lt;/p&gt;

&lt;p&gt;I&apos;m using Sun JDK 1.6.0_14_b08, but I&apos;ve just tried it with OpenJDK 1.6.0_0-b12 and have the same result... &lt;/p&gt;

&lt;p&gt;In case it helps: I&apos;ve checked out the trunc using Eclipse 3.6 (Subversive plugin) and build it using Maven2 plugin&lt;/p&gt;

&lt;p&gt;Do you know where I can get a commons-compress.jar (1.1) distro?&lt;/p&gt;

&lt;p&gt;thx&lt;/p&gt;</comment>
                            <comment id="12895379" author="bodewig" created="Wed, 4 Aug 2010 19:34:22 +0000"  >&lt;p&gt;A snapshot I compiled myself can be found at &lt;a href=&quot;http://people.apache.org/~bodewig/commons-compress-1.1-SNAPSHOT.jar&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://people.apache.org/~bodewig/commons-compress-1.1-SNAPSHOT.jar&lt;/a&gt; and I&apos;ll remove it once 1.1 has been released.&lt;/p&gt;

&lt;p&gt;The unit tests pass for me on my Ubuntu system and it&apos;s pretty likely it is more of an environment setting thing.  I may also note that the tests pass in the Apache Gump builds both on Linux (Ubuntu 8.4) and Solaris 10.&lt;/p&gt;

&lt;p&gt;Returning to the original problem, commons-compress really doesn&apos;t implement POSIX tar or even comes close to it.  It mostly lives at the least common denominator of all tar dialects, ustar.  And this means the only characters that are really supported come from the seven bit ASCII set - with anything else you can only hope it works.&lt;/p&gt;
</comment>
                            <comment id="12895608" author="hminst" created="Thu, 5 Aug 2010 08:03:20 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;I&apos;ve tested it at the time when the bug was fixed by Sebb on following OS:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Ubuntu&lt;/li&gt;
	&lt;li&gt;Windows&lt;/li&gt;
	&lt;li&gt;Mac&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;and the solution worked fine.&lt;/p&gt;

&lt;p&gt;grz&lt;/p&gt;</comment>
                            <comment id="12895609" author="hminst" created="Thu, 5 Aug 2010 08:04:41 +0000"  >&lt;p&gt;see last comment. issue was tested on several OS&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12444673" name="TarArchiveEntry.java" size="20320" author="hminst" created="Mon, 17 May 2010 13:36:05 +0000"/>
                            <attachment id="12444674" name="TarArchiveInputStream.java" size="11593" author="hminst" created="Mon, 17 May 2010 13:36:05 +0000"/>
                            <attachment id="12444675" name="TarUtils.java" size="9472" author="hminst" created="Mon, 17 May 2010 13:36:05 +0000"/>
                            <attachment id="12444676" name="plusMinusForJIRAwithLicense.tar" size="10240" author="hminst" created="Mon, 17 May 2010 13:46:37 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>49549</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 16 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0b4if:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>62843</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>