<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:31:03 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[COMPRESS-278] Incorrect handling of NUL username and group Tar.gz entries</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-278</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;With version 1.8 of commons-compress it&apos;s no longer possible to decompress  files from an archive if the archive contains entries having null (or being empty?) set as username and/or usergroup. With version 1.7 this still worked now I get this exception:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;java.io.IOException: Error detected parsing the header
	at org.apache.commons.compress.archivers.tar.TarArchiveInputStream.getNextTarEntry(TarArchiveInputStream.java:249)
	at TestBed.AppTest.extractNoFileOwner(AppTest.java:30)
Caused by: java.lang.IllegalArgumentException: Invalid &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt; 32 at offset 7 in &lt;span class=&quot;code-quote&quot;&gt;&apos;       {NUL}&apos;&lt;/span&gt; len=8
	at org.apache.commons.compress.archivers.tar.TarUtils.parseOctal(TarUtils.java:134)
	at org.apache.commons.compress.archivers.tar.TarUtils.parseOctalOrBinary(TarUtils.java:173)
	at org.apache.commons.compress.archivers.tar.TarArchiveEntry.parseTarHeader(TarArchiveEntry.java:953)
	at org.apache.commons.compress.archivers.tar.TarArchiveEntry.parseTarHeader(TarArchiveEntry.java:940)
	at org.apache.commons.compress.archivers.tar.TarArchiveEntry.&amp;lt;init&amp;gt;(TarArchiveEntry.java:324)
	at org.apache.commons.compress.archivers.tar.TarArchiveInputStream.getNextTarEntry(TarArchiveInputStream.java:247)
	... 27 more

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This exception leads to my suspision that the regression was introduced with the fix for this ticket &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-262&quot; title=&quot;TarArchiveInputStream fails to read entry with big user-id value&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-262&quot;&gt;&lt;del&gt;COMPRESS-262&lt;/del&gt;&lt;/a&gt;, which has a nearly identical exception provided.&lt;/p&gt;

&lt;p&gt;Some test code you can run to verify it:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; TestBed;

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.io.File;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.io.FileInputStream;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.io.FileNotFoundException;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.io.IOException;

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.compress.archivers.tar.TarArchiveEntry;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.compress.archivers.tar.TarArchiveInputStream;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.compress.compressors.gzip.GzipCompressorInputStream;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.junit.Test;

/**
 * Unit test &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; simple App.
 */
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;AppTest
{

    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void extractNoFileOwner()
    {
        TarArchiveInputStream tarInputStream = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;

        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt;
        {
            tarInputStream =
                &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; TarArchiveInputStream( &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; GzipCompressorInputStream( &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileInputStream( &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(
                    &lt;span class=&quot;code-quote&quot;&gt;&quot;/home/pknobel/redis-dist-2.8.3_1-linux.tar.gz&quot;&lt;/span&gt; ) ) ) );
            TarArchiveEntry entry;
            &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; ( ( entry = tarInputStream.getNextTarEntry() ) != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; )
            {
                &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println( entry.getName() );
                &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(entry.getUserName()+&lt;span class=&quot;code-quote&quot;&gt;&quot;/&quot;&lt;/span&gt;+entry.getGroupName());
            }

        }
        &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; ( FileNotFoundException e )
        {
            e.printStackTrace();
        }
        &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; ( IOException e )
        {
            e.printStackTrace();
        }
    }

}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;With 1.7 the TestCase outputed this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;redis-dist-2.8.3_1/bin/
/
redis-dist-2.8.3_1/bin/redis-server
jenkins/jenkins
redis-dist-2.8.3_1/bin/redis-cli
jenkins/jenkins
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;With 1.8 it&apos;s failing once it reaches the null valued entry, which is the first. The archive is created using maven assembly plugin, and I tried the same with maven ant task. Both generating an archive with not set username and groups for at least some entries.&lt;/p&gt;

&lt;p&gt;You can download the archive from &lt;a href=&quot;http://heli0s.darktech.org/redis/2.8.3_1/redis-dist-2.8.3_1-linux.tar.gz&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://heli0s.darktech.org/redis/2.8.3_1/redis-dist-2.8.3_1-linux.tar.gz&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;If you run a tar -tvzf on the file you see this report:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;drwxr-xr-x 0/0               0 2014-04-18 09:43 redis-dist-2.8.3_1-SNAPSHOT/bin/
-rwxr-xr-x pknobel/pknobel 3824588 2014-01-02 14:58 redis-dist-2.8.3_1-SNAPSHOT/bin/redis-cli
-rwxr-xr-x pknobel/pknobel 5217234 2014-01-02 14:58 redis-dist-2.8.3_1-SNAPSHOT/bin/redis-server
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The user 0/0 probably indicates that it&apos;s not set although it&apos;s the root user id. A correctly root user file would show up as root/root&lt;/p&gt;</description>
                <environment></environment>
        <key id="12709292">COMPRESS-278</key>
            <summary>Incorrect handling of NUL username and group Tar.gz entries</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="pknobel">Philipp Knobel</reporter>
                        <labels>
                            <label>tar</label>
                    </labels>
                <created>Fri, 18 Apr 2014 16:09:05 +0000</created>
                <updated>Sat, 28 Feb 2015 01:56:46 +0000</updated>
                            <resolved>Sat, 19 Apr 2014 06:01:10 +0000</resolved>
                                    <version>1.8</version>
                                    <fixVersion>1.8.1</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13974745" author="bodewig" created="Sat, 19 Apr 2014 06:01:10 +0000"  >&lt;p&gt;you are correct &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-262&quot; title=&quot;TarArchiveInputStream fails to read entry with big user-id value&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-262&quot;&gt;&lt;del&gt;COMPRESS-262&lt;/del&gt;&lt;/a&gt; introduced the change.&lt;/p&gt;

&lt;p&gt;Should be fixed with svn revision 1588618&lt;/p&gt;</comment>
                            <comment id="14039700" author="bodewig" created="Sat, 21 Jun 2014 05:08:46 +0000"  >&lt;p&gt;see also &lt;a href=&quot;https://issues.apache.org/bugzilla/show_bug.cgi?id=56641&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://issues.apache.org/bugzilla/show_bug.cgi?id=56641&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12701520" name="uzhos.tar.gz" size="29" author="nvamelichev" created="Sat, 28 Feb 2015 01:56:16 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>387614</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 22 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1urtb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>387876</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>