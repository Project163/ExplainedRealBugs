<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:36:07 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[COMPRESS-681] SevenZFile can&apos;t open 7z files containing ArchiveProperties</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-681</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;I added archive properies based on the example provided in the official 7zip code and was able to decompress it properly using the 7zip tool, but when I decompress it using commons-compress I get the following error(The COMMPRESS-681.7z is in attachment):&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
code:
 &#160; &#160;SevenZFile.builder().setPath(Paths.get((&lt;span class=&quot;code-quote&quot;&gt;&quot;COMPRESS-681.7z&quot;&lt;/span&gt;))).get();

Below is the output I receive:

java.io.IOException: invalid property size
&#160; &#160; at org.apache.commons.compress.archivers.sevenz.SevenZFile.sanityCheckArchiveProperties(SevenZFile.java:1746)
&#160; &#160; at org.apache.commons.compress.archivers.sevenz.SevenZFile.sanityCheckAndCollectStatistics(SevenZFile.java:1715)
&#160; &#160; at org.apache.commons.compress.archivers.sevenz.SevenZFile.readHeader(SevenZFile.java:1437)
&#160; &#160; at org.apache.commons.compress.archivers.sevenz.SevenZFile.initializeArchive(SevenZFile.java:1081)
&#160; &#160; at org.apache.commons.compress.archivers.sevenz.SevenZFile.readHeaders(SevenZFile.java:1499)
&#160; &#160; at org.apache.commons.compress.archivers.sevenz.SevenZFile.&amp;lt;init&amp;gt;(SevenZFile.java:619)
&#160; &#160; at org.apache.commons.compress.archivers.sevenz.SevenZFile.&amp;lt;init&amp;gt;(SevenZFile.java:83) &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Example of writing to an archive file from the official 7zip source code, 7zOut.cpp:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 /*
&#160; {
&#160; &#160; &lt;span class=&quot;code-comment&quot;&gt;// It&apos;s example &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; per archive properies writing
&lt;/span&gt;&#160;
&#160; &#160; WriteByte(NID::kArchiveProperties);
&#160; &#160; &lt;span class=&quot;code-comment&quot;&gt;// you must use random 40-bit number that will identify you
&lt;/span&gt;&#160; &#160; &lt;span class=&quot;code-comment&quot;&gt;// then you can use same kDeveloperID &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; any properties and methods
&lt;/span&gt;&#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt; UInt64 kDeveloperID = 0x123456789A; &lt;span class=&quot;code-comment&quot;&gt;// change that value to real random 40-bit number
&lt;/span&gt;&#160; &#160; #define GENERATE_7Z_ID(developerID, subID) (((UInt64)0x3F &amp;lt;&amp;lt; 56) | ((UInt64)developerID &amp;lt;&amp;lt; 16) | subID)
&#160; &#160;
{ &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt; UInt64 kSubID = 0x1; &lt;span class=&quot;code-comment&quot;&gt;// you can use small number &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; subID &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt; UInt64 kID = GENERATE_7Z_ID(kDeveloperID, kSubID); &#160; &#160; &#160; WriteNumber(kID); &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt; unsigned kPropsSize = 3; // it&apos;s example size &#160; &#160; &#160; WriteNumber(kPropsSize); &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (unsigned i = 0; i &amp;lt; kPropsSize; i++) &#160; &#160; &#160; &#160; WriteByte((&lt;span class=&quot;code-object&quot;&gt;Byte&lt;/span&gt;)(i &amp;amp; 0xFF)); &#160; &#160; }
&lt;/span&gt;&#160; &#160;
{ &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt; UInt64 kSubID = 0x2; &lt;span class=&quot;code-comment&quot;&gt;// you can use small number &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; subID &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt; UInt64 kID = GENERATE_7Z_ID(kDeveloperID, kSubID); &#160; &#160; &#160; WriteNumber(kID); &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;const&lt;/span&gt; unsigned kPropsSize = 5; // it&apos;s example size &#160; &#160; &#160; WriteNumber(kPropsSize); &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (unsigned i = 0; i &amp;lt; kPropsSize; i++) &#160; &#160; &#160; &#160; WriteByte((&lt;span class=&quot;code-object&quot;&gt;Byte&lt;/span&gt;)(i + 16)); &#160; &#160; }
&lt;/span&gt;&#160; &#160; WriteByte(NID::kEnd);
&#160; }
&#160; */ &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13584123">COMPRESS-681</key>
            <summary>SevenZFile can&apos;t open 7z files containing ArchiveProperties</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jokerni53">johnikezheng</reporter>
                        <labels>
                    </labels>
                <created>Fri, 28 Jun 2024 02:38:39 +0000</created>
                <updated>Tue, 2 Jul 2024 17:03:23 +0000</updated>
                            <resolved>Fri, 28 Jun 2024 14:01:35 +0000</resolved>
                                    <version>1.26.2</version>
                                    <fixVersion>1.27.0</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17860824" author="garydgregory" created="Fri, 28 Jun 2024 14:08:41 +0000"  >&lt;p&gt;TY &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jokerni53&quot; class=&quot;user-hover&quot; rel=&quot;jokerni53&quot;&gt;jokerni53&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;I merged the PR. The change is also available in snapshot builds.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13069837" name="COMPRESS-681.7z" size="226" author="jokerni53" created="Fri, 28 Jun 2024 03:12:39 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 19 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1q1vk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>