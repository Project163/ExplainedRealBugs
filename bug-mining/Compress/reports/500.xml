<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:36:24 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[COMPRESS-699] ArchiveStreamFactory.detect(inputStream) ArchiveException for TAR regression</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-699</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;Prior to version 1.26.1, calling ArchiveStreamFactory.detect on the attached TAR file identifies it as a TAR file properly but now throws an ArchiveException. It seems related to the changes to address &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-644&quot; title=&quot;ArchiveStreamFactory.detect(InputStream) returns TAR for ICO file&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-644&quot;&gt;&lt;del&gt;COMPRESS-644&lt;/del&gt;&lt;/a&gt;, specifically the the entry.getSize() &amp;gt; 0 check on line 288 of ArchiveStreamFactory.java.&lt;/p&gt;

&lt;p&gt;Below is some sample code to reproduce the error (the below code runs without errors when tested on 1.26.0):&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.compress.archivers.ArchiveStreamFactory;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.io.FileUtils;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.junit.Test;

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.io.BufferedInputStream;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.io.File;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.nio.file.Files;

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; com.sonatype.data.testing.utils.ResourcesUtils.getResourceAsInputStream;

&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;TarArchiveTest
{
  @Test
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testTarArchive() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
    &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; fileToTest = &lt;span class=&quot;code-quote&quot;&gt;&quot;icure_medical_device_dart_sdk-1.2.10.tar&quot;&lt;/span&gt;;
    File sourceFile = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(fileToTest);
    FileUtils.copyInputStreamToFile(getResourceAsInputStream(fileToTest), sourceFile);

    BufferedInputStream fileInputStream = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; BufferedInputStream(Files.newInputStream(sourceFile.toPath()));
    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;Detected archive type: &quot;&lt;/span&gt; + ArchiveStreamFactory.detect(fileInputStream));
  }
} &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13619663">COMPRESS-699</key>
            <summary>ArchiveStreamFactory.detect(inputStream) ArchiveException for TAR regression</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ggregory">Gary D. Gregory</assignee>
                                    <reporter username="mxnguyen">Michael Nguyen</reporter>
                        <labels>
                    </labels>
                <created>Fri, 30 May 2025 12:09:48 +0000</created>
                <updated>Fri, 30 May 2025 21:01:07 +0000</updated>
                            <resolved>Fri, 30 May 2025 20:55:47 +0000</resolved>
                                    <version>1.26.1</version>
                    <version>1.26.2</version>
                    <version>1.27.0</version>
                    <version>1.27.1</version>
                                    <fixVersion>1.28.0</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17955212" author="garydgregory" created="Fri, 30 May 2025 13:05:13 +0000"  >&lt;p&gt;Hello &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mxnguyen&quot; class=&quot;user-hover&quot; rel=&quot;mxnguyen&quot;&gt;mxnguyen&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;Thank you for your report.&lt;/p&gt;

&lt;p&gt;How was this TAR file created?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17955215" author="JIRAUSER309817" created="Fri, 30 May 2025 13:13:03 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ggregory&quot; class=&quot;user-hover&quot; rel=&quot;ggregory&quot;&gt;ggregory&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;Thanks for your response.&lt;br/&gt;
I don&apos;t know how these tar files were created, but I encountered this issue with a couple of tar archives uploaded to pub.dev, Dart&apos;s package repo.&lt;/p&gt;


&lt;p&gt;Examples:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://pub.dev/packages/icure_medical_device_dart_sdk/versions/1.2.10&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://pub.dev/packages/icure_medical_device_dart_sdk/versions/1.2.10&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://pub.dev/packages/chat_gpt_sdk/versions/2.2.2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://pub.dev/packages/chat_gpt_sdk/versions/2.2.2&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17955229" author="garydgregory" created="Fri, 30 May 2025 13:55:17 +0000"  >&lt;p&gt;This is fixed in git master and in the Maven snapshot repository at &lt;a href=&quot;https://repository.apache.org/content/repositories/snapshots/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/repositories/snapshots/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Please verify and close this ticket if your use case works.&lt;/p&gt;

&lt;p&gt;TY&lt;/p&gt;</comment>
                            <comment id="17955293" author="JIRAUSER309817" created="Fri, 30 May 2025 19:02:24 +0000"  >&lt;p&gt;Thanks for the fast response! The fix worked for several tars I tested it with, but for one tar from pub repo, it still unfortunately throws the ArchiveException. &lt;br/&gt;
I&apos;ve attached the example below. It throws the exception when passed through detect on the master branch but returns tar on 1.26.0.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/13076778/13076778_flutter_awesome_buttons-0.1.0.tar&quot; title=&quot;flutter_awesome_buttons-0.1.0.tar attached to COMPRESS-699&quot;&gt;flutter_awesome_buttons-0.1.0.tar&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="17955308" author="garydgregory" created="Fri, 30 May 2025 19:57:43 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mxnguyen&quot; class=&quot;user-hover&quot; rel=&quot;mxnguyen&quot;&gt;mxnguyen&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;The file &lt;em&gt;flutter_awesome_buttons-0.1.0.tar&lt;/em&gt;&apos;s first entry is &quot;build/app.dll&quot;, a file of size 0, which doesn&apos;t make sense for a DLL, and I imagine this is supposed to be a Windows DLL, right?&lt;/p&gt;

&lt;p&gt;What is also odd is that in the TAR entry for this file the magic and version fields are both empty, which is unusual IMO. Usually the magic field is a string like &quot;ustar&quot;.&lt;/p&gt;

&lt;p&gt;After this file, our code can&apos;t read the next entry.&lt;/p&gt;

&lt;p&gt;Do you know this TAR file was built?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17955315" author="JIRAUSER309817" created="Fri, 30 May 2025 20:49:30 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ggregory&quot; class=&quot;user-hover&quot; rel=&quot;ggregory&quot;&gt;ggregory&lt;/a&gt;, thanks the detailed response.&lt;br/&gt;
This TAR file is from this tar-gzipped file hosted on pub.repo. Other than that, I have no information no how else it was built. It sounds like it&apos;s the fault of the package uploader. I would be happy to close this issue if you believe there&apos;s no proper fix/the file is malformed as the other problematic files are fine on the master branch.&lt;br/&gt;
&lt;a href=&quot;https://pub.dev/packages/flutter_awesome_buttons/versions/0.1.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://pub.dev/packages/flutter_awesome_buttons/versions/0.1.0&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17955316" author="garydgregory" created="Fri, 30 May 2025 20:55:47 +0000"  >&lt;p&gt;This is a different issue, so I created &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-700&quot; title=&quot;Can&amp;#39;t detect file flutter_awesome_buttons-0.1.0.tar as a TAR file&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-700&quot;&gt;&lt;del&gt;COMPRESS-700&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17955320" author="JIRAUSER309817" created="Fri, 30 May 2025 21:01:07 +0000"  >&lt;p&gt;Thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ggregory&quot; class=&quot;user-hover&quot; rel=&quot;ggregory&quot;&gt;ggregory&lt;/a&gt;! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10020">
                    <name>Cloners</name>
                                                                <inwardlinks description="is cloned by">
                                        <issuelink>
            <issuekey id="13619723">COMPRESS-700</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="13076778" name="flutter_awesome_buttons-0.1.0.tar" size="284160" author="mxnguyen" created="Fri, 30 May 2025 18:49:03 +0000"/>
                            <attachment id="13076768" name="icure_medical_device_dart_sdk-1.2.10.tar" size="936448" author="mxnguyen" created="Fri, 30 May 2025 12:06:39 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            23 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1w48g:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>