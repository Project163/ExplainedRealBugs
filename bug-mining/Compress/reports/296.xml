<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:33:06 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[COMPRESS-456] Missing OSGI Import-Package</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-456</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;The configuration of the maven-bundle-plugin overrides the &amp;lt;Import-Package&amp;gt; directive : &quot;*&quot; is not present anymore, and severals packages do not resolve correctly.&lt;/p&gt;

&lt;p&gt;For example, &quot;javax.crypto&quot;, which is used by 7z encryption, is not resolved and using&#160;this feature&#160;fails with a ClassNotFoundException on javax.crypto.SecretKey.&lt;/p&gt;

&lt;p&gt;ahma I think that the correct Import-Package directive should be :&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;Import-Package&amp;gt;*;resolution:=optional&amp;lt;/Import-Package&amp;gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;this directive will import everything commons-compress depends on, but with an optional resolution (and so every dependencies will be optionals)&lt;/p&gt;</description>
                <environment></environment>
        <key id="13166763">COMPRESS-456</key>
            <summary>Missing OSGI Import-Package</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jeremie.brebec">J&#233;r&#233;mie Br&#233;bec</reporter>
                        <labels>
                    </labels>
                <created>Mon, 18 Jun 2018 18:20:47 +0000</created>
                <updated>Tue, 19 Jun 2018 17:21:22 +0000</updated>
                            <resolved>Tue, 19 Jun 2018 09:47:13 +0000</resolved>
                                    <version>1.17</version>
                                    <fixVersion>1.18</fixVersion>
                                    <component>Build</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16516877" author="bodewig" created="Tue, 19 Jun 2018 09:39:43 +0000"  >&lt;p&gt;Many thanks.&lt;/p&gt;

&lt;p&gt;It looks as if we have &quot;broken&quot; this Import-Package back when we started adding any optional dependencies and if I now change it to what you suggest I get all the other external dependencies without having to specify them explicitly. Given how often we&apos;ve broken the bundle by making honest mistakes fiddling with Import-Package it is a pity nobody told us to use &lt;tt&gt;*;resolution:=optional&lt;/tt&gt; before.&lt;/p&gt;

&lt;p&gt;I&apos;ll try to see whether we can reuse more of the parent POM&apos;s configuration but will change the settings in either case.&lt;/p&gt;

&lt;p&gt;In a way I wonder why this has never come up before. Has &lt;tt&gt;javax.crypto&lt;/tt&gt; moved out of the classlib so tat it used to work before or are you the first one trying to use encrypted 7z archives and OSGi at the same time?&lt;/p&gt;</comment>
                            <comment id="16516883" author="bodewig" created="Tue, 19 Jun 2018 09:47:14 +0000"  >&lt;p&gt;fixed with commit f5571df0 - thanks again.&lt;/p&gt;</comment>
                            <comment id="16517203" author="oliver.heger@t-online.de" created="Tue, 19 Jun 2018 15:03:19 +0000"  >&lt;p&gt;Making all imports optional is not very OSGi-like, as some of them are for sure required.&lt;/p&gt;

&lt;p&gt;It is possible to define a number of package imports as optional and use the &apos;*&apos; als fallback to automatically import all other referenced packages.&#160; &lt;span class=&quot;error&quot;&gt;&amp;#91;Configuration&amp;#93;&lt;/span&gt; does this, which also has a number of optional dependencies. In the &lt;em&gt;&amp;lt;properties&amp;gt;&lt;/em&gt; section of the pom, there is the following declaration:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;
&#160;&#160;&#160; &lt;span class=&quot;code-tag&quot;&gt;&lt;span class=&quot;code-comment&quot;&gt;&amp;lt;!-- Explicitly declare optional dependencies for the OSGi manifest. --&amp;gt;&lt;/span&gt;&lt;/span&gt;
&#160;&#160;&#160; &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;commons.osgi.import&amp;gt;&lt;/span&gt;
&#160;&#160;&#160;&#160;&#160; org.apache.commons.beanutils.*;resolution:=optional,
&#160;&#160;&#160;&#160;&#160; org.apache.commons.codec.*;resolution:=optional,
&#160;&#160;&#160;&#160;&#160; org.apache.commons.jxpath.*;resolution:=optional,
&#160;&#160;&#160;&#160;&#160; org.apache.xml.resolver.*;resolution:=optional,
&#160;&#160;&#160;&#160;&#160; javax.servlet.*;resolution:=optional,
&#160;&#160;&#160;&#160;&#160; org.apache.commons.jexl2.*;resolution:=optional,
&#160;&#160;&#160;&#160;&#160; org.apache.commons.vfs2.*;resolution:=optional,
&#160;&#160;&#160;&#160;&#160; org.springframework.*;resolution:=optional,
&#160;&#160;&#160;&#160;&#160; com.fasterxml.jackson.*;resolution:=optional,
&#160;&#160;&#160;&#160;&#160; org.yaml.snakeyaml.*;resolution:=optional,
&#160;&#160;&#160;&#160;&#160; *
&#160;&#160;&#160; &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/commons.osgi.import&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16517221" author="bodewig" created="Tue, 19 Jun 2018 15:19:29 +0000"  >&lt;p&gt;Hmm, I&apos;m more or less clueless when it comes to OSGi (and prefer to stay that way &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;). In Compress&apos; case the&#160;&lt;tt&gt;javax.crypto&lt;/tt&gt; dependencies are in fact optional they have just never been specified - you only need them when you want to use decryption of 7z right now. But you are correct, it is probably better to be explicit with optional dependencies.&lt;/p&gt;

&lt;p&gt;Commit 8ed5daaa probably is the cleaner solution.&lt;/p&gt;

&lt;p&gt;Thanks, Oliver.&lt;/p&gt;</comment>
                            <comment id="16517338" author="jeremie.brebec" created="Tue, 19 Jun 2018 17:21:22 +0000"  >&lt;p&gt;I agree with Oliver, it&apos;s better to explicitly declares dependencies and optional dependencies.&lt;/p&gt;

&lt;p&gt;However, it&apos;s look like the guys behind commons-compress doesn&apos;t use osgi or are not used to it &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&#160;Then&#160;every times a new dependency is added, if the Import-Package directive is not modified, this dependency will be mandatory&#160;and the bundle will not deploy on osgi. This will probably&#160;end&#160;with new Jira issue for each new dependency..&lt;/p&gt;

&lt;p&gt;That&apos;s why for this kind of project, I personnaly prefer to explicitly declare mandatory dependencies, and let everything else be optional.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 21 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3uzdz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>