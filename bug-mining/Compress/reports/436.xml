<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:35:01 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[COMPRESS-619] Large SevenZFile fails When Next Header Size is Greater than Max Int</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-619</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;When reading a large file (42GB) the following stack trace is produced:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java.io.IOException: Cannot handle nextHeaderSize 4102590414
&#160; &#160; at org.apache.commons.compress.archivers.sevenz.SevenZFile.assertFitsIntoNonNegativeInt(SevenZFile.java:2076) ~[classes/:?]
&#160; &#160; at org.apache.commons.compress.archivers.sevenz.SevenZFile.initializeArchive(SevenZFile.java:528) ~[classes/:?]
&#160; &#160; at org.apache.commons.compress.archivers.sevenz.SevenZFile.readHeaders(SevenZFile.java:474) ~[classes/:?]
&#160; &#160; at org.apache.commons.compress.archivers.sevenz.SevenZFile.&amp;lt;init&amp;gt;(SevenZFile.java:343) ~[classes/:?]
&#160; &#160; at org.apache.commons.compress.archivers.sevenz.SevenZFile.&amp;lt;init&amp;gt;(SevenZFile.java:136) ~[classes/:?]
&#160; &#160; at org.apache.commons.compress.archivers.sevenz.SevenZFile.&amp;lt;init&amp;gt;(SevenZFile.java:376) ~[classes/:?]
&#160; &#160; at org.apache.commons.compress.archivers.sevenz.SevenZFile.&amp;lt;init&amp;gt;(SevenZFile.java:364) ~[classes/:?] &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;The file was produced using the SevenZOutputFile class and contains a large number of very small files all inserted using copy compression. It passes the 7z tests and has the following statistics:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Files: 40872560
Size: &#160; &#160; &#160; 43708874326
Compressed: 47811464772
 &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;It is failing because a ByteBuffer can&apos;t be created that is large enough with something over max integer in size to do the CRC check.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13441231">COMPRESS-619</key>
            <summary>Large SevenZFile fails When Next Header Size is Greater than Max Int</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="ggregory">Gary D. Gregory</assignee>
                                    <reporter username="bfmyr4">Brian Miller</reporter>
                        <labels>
                    </labels>
                <created>Fri, 22 Apr 2022 21:27:32 +0000</created>
                <updated>Fri, 17 Mar 2023 18:15:49 +0000</updated>
                                            <version>1.21</version>
                                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17528149" author="JIRAUSER288490" created="Tue, 26 Apr 2022 12:50:32 +0000"  >&lt;p&gt;It seems like doing something that the PR for &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-514&quot; title=&quot;SevenZFile fails with encoded header over 2GiB&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-514&quot;&gt;COMPRESS-514&lt;/a&gt; is doing would allow the header to be read.&lt;/p&gt;</comment>
                            <comment id="17532856" author="garydgregory" created="Fri, 6 May 2022 13:19:17 +0000"  >&lt;p&gt;Hi All,&lt;/p&gt;

&lt;p&gt;In git master, I reimplemented CRC-32 computation of NextHeader in SevenZFile.initializeArchive(StartHeader, byte[], boolean) as streaming but... to-do is to implement streaming for the rest of the method, which is less simple.&lt;/p&gt;

&lt;p&gt;All of that to say, that this problem is still present because the buffer is still read in full, just later in the method...&lt;/p&gt;</comment>
                            <comment id="17532914" author="garydgregory" created="Fri, 6 May 2022 15:05:04 +0000"  >&lt;p&gt;Is there a way to manufacture a test fixture we can use in unit tests? Without having to store a giant file in git or create a huge temp file? Maybe a hacked file?&lt;/p&gt;</comment>
                            <comment id="17701932" author="garydgregory" created="Fri, 17 Mar 2023 18:15:49 +0000"  >&lt;p&gt;ping?&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13303721">COMPRESS-514</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 34 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z11q94:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>