<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:31:42 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[COMPRESS-356] PAX header entry name ending with / causes problems</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-356</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;There seems to be a problem when a PAX header entry (link flag is &apos;x&apos;) has a name ending with &quot;/&quot;. The &lt;tt&gt;TarArchiveEntry.isDirectory()&lt;/tt&gt; check ends up returning &lt;tt&gt;true&lt;/tt&gt; because of the trailing slash which means no content can be read from the entry. PAX header parsing effectively finds nothing and the stream is not advanced; this leaves the stream in a bad state as the next entry&apos;s header is actually read from the header contents.&lt;/p&gt;

&lt;p&gt;If the name is modified to remove the trailing slash when the link flag indicates a PAX header everything seems to work fine. That would be one potential fix in &lt;tt&gt;parseTarHeader&lt;/tt&gt;. Changing &lt;tt&gt;isDirectory&lt;/tt&gt; to return &lt;tt&gt;false&lt;/tt&gt; if &lt;tt&gt;isPaxHeader&lt;/tt&gt; is &lt;tt&gt;true&lt;/tt&gt; (before the trailing &quot;/&quot; check) would probably also fix the issue (though I can&apos;t verify that in the debugger like I can with changing the name).&lt;/p&gt;

&lt;p&gt;So far I have only seen this when using Docker to save images that contain a yum database. For example:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;docker pull centos:latest &amp;amp;&amp;amp; docker save centos:latest | tar x --include &quot;*/layer.tar&quot;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Will produce at least one &quot;layer.tar&quot; that exhibits this issue. If I come across a smaller TAR for testing I will attach it.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12971001">COMPRESS-356</key>
            <summary>PAX header entry name ending with / causes problems</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jgustie">Jeremy Gustie</reporter>
                        <labels>
                    </labels>
                <created>Thu, 19 May 2016 03:22:41 +0000</created>
                <updated>Fri, 20 May 2016 16:45:41 +0000</updated>
                            <resolved>Fri, 20 May 2016 16:45:41 +0000</resolved>
                                    <version>1.11</version>
                                    <fixVersion>1.12</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15291470" author="jgustie" created="Thu, 19 May 2016 16:39:21 +0000"  >&lt;p&gt;I can confirm the fix &lt;a href=&quot;https://github.com/apache/commons-compress/compare/master...blackducksoftware:bug/COMPRESS-356-pax-header-trailing-slash-name&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt; works (alas, no tests).&lt;/p&gt;</comment>
                            <comment id="15293683" author="bodewig" created="Fri, 20 May 2016 16:45:41 +0000"  >&lt;p&gt;Thanks a lot.&lt;/p&gt;

&lt;p&gt;Commit 823cdee contains a slightly modified version of your patch. If manually created an archive for the test case - Emacs hexl-mode to the rescue &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 26 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2y6qn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>