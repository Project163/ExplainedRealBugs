<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:30:12 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[COMPRESS-199] Introduction of XZ breaks OSGi support</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-199</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;The introduction of XZ seems to break the OSGi support for the compress bundle.&lt;/p&gt;

&lt;p&gt;The XZ component doesn&apos;t seem to be included or referred to (dependency).&lt;/p&gt;

&lt;p&gt;!ENTRY org.apache.commons.compress 4 0 2012-08-20 17:06:19.339&lt;br/&gt;
!MESSAGE FrameworkEvent ERROR&lt;br/&gt;
!STACK 0&lt;br/&gt;
org.osgi.framework.BundleException: The bundle &quot;org.apache.commons.compress_1.4.1 &lt;span class=&quot;error&quot;&gt;&amp;#91;20&amp;#93;&lt;/span&gt;&quot; could not be resolved. Reason: Missing Constraint: Import-Package: org.tukaani.xz; version=&quot;0.0.0&quot;&lt;br/&gt;
        at org.eclipse.osgi.framework.internal.core.AbstractBundle.getResolverError(AbstractBundle.java:1327)&lt;br/&gt;
        at org.eclipse.osgi.framework.internal.core.AbstractBundle.getResolutionFailureException(AbstractBundle.java:1311)&lt;br/&gt;
        at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:323)&lt;br/&gt;
        at org.eclipse.osgi.framework.internal.core.AbstractBundle.resume(AbstractBundle.java:389)&lt;br/&gt;
        at org.eclipse.osgi.framework.internal.core.Framework.resumeBundle(Framework.java:1131)&lt;br/&gt;
        at org.eclipse.osgi.framework.internal.core.StartLevelManager.resumeBundles(StartLevelManager.java:559)&lt;br/&gt;
        at org.eclipse.osgi.framework.internal.core.StartLevelManager.resumeBundles(StartLevelManager.java:544)&lt;br/&gt;
        at org.eclipse.osgi.framework.internal.core.StartLevelManager.incFWSL(StartLevelManager.java:457)&lt;br/&gt;
        at org.eclipse.osgi.framework.internal.core.StartLevelManager.doSetStartLevel(StartLevelManager.java:243)&lt;br/&gt;
        at org.eclipse.osgi.framework.internal.core.StartLevelManager.dispatchEvent(StartLevelManager.java:438)&lt;br/&gt;
        at org.eclipse.osgi.framework.internal.core.StartLevelManager.dispatchEvent(StartLevelManager.java:1)&lt;br/&gt;
        at org.eclipse.osgi.framework.eventmgr.EventManager.dispatchEvent(EventManager.java:230)&lt;br/&gt;
        at org.eclipse.osgi.framework.eventmgr.EventManager$EventThread.run(EventManager.java:340)&lt;/p&gt;

&lt;p&gt;Included in my project by maven and&lt;br/&gt;
&amp;lt;dependency&amp;gt;&lt;br/&gt;
	&amp;lt;groupId&amp;gt;org.apache.commons&amp;lt;/groupId&amp;gt;&lt;br/&gt;
	&amp;lt;artifactId&amp;gt;commons-compress&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
	&amp;lt;version&amp;gt;1.4.1&amp;lt;/version&amp;gt;&lt;br/&gt;
&amp;lt;/dependency&amp;gt;&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows Vista &amp;amp; RHEL 6.2, Java 1.6.0_33, Equinox  org.eclipse.osgi_3.7.2.v20120110-1415.jar.&lt;/p&gt;</environment>
        <key id="12604080">COMPRESS-199</key>
            <summary>Introduction of XZ breaks OSGi support</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="gertoft">Niklas Gertoft</reporter>
                        <labels>
                            <label>osgi</label>
                    </labels>
                <created>Mon, 20 Aug 2012 17:04:15 +0000</created>
                <updated>Tue, 5 Mar 2013 05:20:15 +0000</updated>
                            <resolved>Thu, 27 Dec 2012 18:29:05 +0000</resolved>
                                    <version>1.4.1</version>
                                    <fixVersion>1.5</fixVersion>
                                    <component>Compressors</component>
                        <due></due>
                            <votes>2</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="13452971" author="andreas.aronsson" created="Tue, 11 Sep 2012 12:29:24 +0000"  >&lt;p&gt;It appears to me that the org.tukaani.xz does not have the correct entries in the MANIFEST.MF to allow it to be used as a bundle. &lt;/p&gt;</comment>
                            <comment id="13453000" author="gertoft" created="Tue, 11 Sep 2012 13:21:39 +0000"  >&lt;p&gt;That was also my guess. What is the requirement on commons projects, must they stay OSGi compliant?&lt;/p&gt;

&lt;p&gt;If so that gives that either (push for an) update (of) org.tukaani.xz, or removing the support as implemented today until an OSGi compliant version is possible!?&lt;/p&gt;</comment>
                            <comment id="13453035" author="andreas.aronsson" created="Tue, 11 Sep 2012 14:02:01 +0000"  >&lt;p&gt;Yes that would be the options available AFAICT. I could not find any references to bundle information in the build.xml of the git repo for tukaani so they would need a patch too before a possible new release with the required metadata. &lt;/p&gt;</comment>
                            <comment id="13536662" author="jukkaz" created="Thu, 20 Dec 2012 01:15:51 +0000"  >&lt;p&gt;The following patch implements an alternative solution by marking the xz dependency as optional when working with OSGi.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;diff --git a/pom.xml b/pom.xml
index 110e618..f51d628 100644
--- a/pom.xml
+++ b/pom.xml
@@ -151,6 +151,15 @@ These include: bzip2, gzip, pack200, xz and ar, cpio, jar,
           &amp;lt;/archive&amp;gt;
         &amp;lt;/configuration&amp;gt;
       &amp;lt;/plugin&amp;gt;
+      &amp;lt;plugin&amp;gt;
+        &amp;lt;groupId&amp;gt;org.apache.felix&amp;lt;/groupId&amp;gt;
+        &amp;lt;artifactId&amp;gt;maven-bundle-plugin&amp;lt;/artifactId&amp;gt;
+        &amp;lt;configuration&amp;gt;
+          &amp;lt;instructions&amp;gt;
+            &amp;lt;Import-Package&amp;gt;org.tukaani.xz;resolution:=optional&amp;lt;/Import-Package
+          &amp;lt;/instructions&amp;gt;
+        &amp;lt;/configuration&amp;gt;
+      &amp;lt;/plugin&amp;gt;
     &amp;lt;/plugins&amp;gt;
   &amp;lt;/build&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13540089" author="bodewig" created="Thu, 27 Dec 2012 18:21:22 +0000"  >&lt;p&gt;AFAIU people who use Compress as OSGi bundle wouldn&apos;t be able to use XZ compression as long as XZ for Java doesn&apos;t provide a bundle anyway - so marking it optional seems like a wonderful approach.  I&apos;ll commit Jukka&apos;s patch and reach out to Lasse to see whether there is an easy way for him to turn the next XZ for Java releases into bundles as well.&lt;/p&gt;</comment>
                            <comment id="13540093" author="bodewig" created="Thu, 27 Dec 2012 18:29:05 +0000"  >&lt;p&gt;applied Jukka&apos;s patch with svn revision 1426283&lt;/p&gt;</comment>
                            <comment id="13567662" author="bodewig" created="Thu, 31 Jan 2013 14:22:21 +0000"  >&lt;p&gt;XZ for Java 1.2 has just been released which provides a proper OSGi bundle.  I&apos;ve upgraded the dependency but using this one in an OSGi context might be a good workaround until Compress 1.5 is out.&lt;/p&gt;</comment>
                            <comment id="13592930" author="mquigley" created="Tue, 5 Mar 2013 01:50:46 +0000"  >&lt;p&gt;So will we be able to use Compress &lt;em&gt;without&lt;/em&gt; XZ after this patch is applied?  This is unnecessarily bloating my Android project, which does &lt;em&gt;not&lt;/em&gt; need XZ support but Compress crashes when the xz-lib is not bundled.&lt;/p&gt;</comment>
                            <comment id="13593081" author="bodewig" created="Tue, 5 Mar 2013 05:20:15 +0000"  >&lt;p&gt;As far as I understand it, yes.  The dependency is marked optional so it should be possible to use Compress in an OSGi context without XZ being present.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>244874</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 37 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i05ui7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>32039</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>