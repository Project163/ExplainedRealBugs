<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:36:21 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[COMPRESS-690] CpioArchiveEntry is missing getLinkName</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-690</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;When trying to extract a cpio file that contains a symbolic link, there is a method to check if&#160;&lt;br/&gt;
CpioArchiveEntry is a symbolic link (entry.isSymbolicLink()), but there is no entry.getLinkName. There is a getName, but we cannot create a symlink without the target link.&lt;br/&gt;
&#160;&lt;br/&gt;
I&apos;m &lt;font color=&quot;#FF0000&quot;&gt;&lt;b&gt;hoping&lt;/b&gt;&lt;/font&gt; I can write a code to extract symlink from a cpio like below code snippets&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void extractCpioSymbolicLink(File archiveFile, File targetDirectory) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
    &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; (CpioArchiveInputStream cpioInputStream = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; CpioArchiveInputStream(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileInputStream(archiveFile))) {
        CpioArchiveEntry entry;
        &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; ((entry = cpioInputStream.getNextEntry()) != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (entry.isSymbolicLink()) {
                &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; linkTarget = entry.getLinkName(); &lt;span class=&quot;code-comment&quot;&gt;// Get the link target
&lt;/span&gt;                File linkFile = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(targetDirectory, entry.getName()); 
                &lt;span class=&quot;code-comment&quot;&gt;// Create the symbolic link using the linkTarget on the target system
&lt;/span&gt;                Files.createSymbolicLink(linkFile.toPath(), Paths.get(linkTarget)); 
            } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
                &lt;span class=&quot;code-comment&quot;&gt;// Handle other file types (regular files, directories) as needed
&lt;/span&gt;            }
        }
    }
} &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13601311">COMPRESS-690</key>
            <summary>CpioArchiveEntry is missing getLinkName</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="10008">Information Provided</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ahmadin">Ahmadin Badruddin</reporter>
                        <labels>
                    </labels>
                <created>Mon, 9 Dec 2024 04:08:08 +0000</created>
                <updated>Tue, 4 Feb 2025 19:04:06 +0000</updated>
                            <resolved>Tue, 4 Feb 2025 19:04:06 +0000</resolved>
                                    <version>1.27.1</version>
                                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17904784" author="garydgregory" created="Wed, 11 Dec 2024 12:34:22 +0000"  >&lt;p&gt;Hello &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ahmadin&quot; class=&quot;user-hover&quot; rel=&quot;ahmadin&quot;&gt;ahmadin&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;In CPIO, the link is the file body, see CpioTest.testSymbolicLinkFileEntry():&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    /**
     * Tests COMPRESS-690.
     */
    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testSymbolicLinkFileEntry() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; File tmp = createTempFile();
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; File archive = createTempFile(&lt;span class=&quot;code-quote&quot;&gt;&quot;test.&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;.cpio&quot;&lt;/span&gt;);
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; name = &lt;span class=&quot;code-quote&quot;&gt;&quot;EntryName&quot;&lt;/span&gt;;
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; nameLink = &lt;span class=&quot;code-quote&quot;&gt;&quot;LinkName&quot;&lt;/span&gt;;
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Charset charset = StandardCharsets.UTF_8;
        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; (CpioArchiveOutputStream tos = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; CpioArchiveOutputStream(Files.newOutputStream(archive.toPath()))) {
            &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; CpioArchiveEntry entry = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; CpioArchiveEntry(name);
            entry.setTime(tmp.lastModified() / 1000);
            entry.setSize(nameLink.length());
            entry.setMode(CpioConstants.C_ISLNK);
            assertTrue(entry.isSymbolicLink());
            tos.putArchiveEntry(entry);
            tos.write(nameLink.getBytes(charset));
            tos.closeArchiveEntry();
        }
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; CpioArchiveEntry entry;
        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; (CpioArchiveInputStream tis = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; CpioArchiveInputStream(Files.newInputStream(archive.toPath()))) {
            entry = tis.getNextEntry();
            assertEquals(nameLink, IOUtils.toString(tis, charset));
        }
        assertNotNull(entry);
        assertEquals(name, entry.getName());
        assertTrue(entry.isSymbolicLink());
        assertEquals(nameLink.length(), entry.getSize());
        assertEquals(tmp.lastModified() / 1000, entry.getLastModifiedDate().getTime() / 1000);
        assertFalse(entry.isDirectory());
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I don&apos;t know if CPIO specifies the byte encoding, probably ASCII but UTF-8 in the test above.&lt;/p&gt;

&lt;p&gt;See &lt;a href=&quot;https://people.freebsd.org/~kientzle/libarchive/man/cpio.5.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://people.freebsd.org/~kientzle/libarchive/man/cpio.5.txt&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;0120000  File type value for symbolic links.  For symbolic links, the link body is stored as file data.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17905856" author="JIRAUSER303013" created="Mon, 16 Dec 2024 01:27:59 +0000"  >&lt;p&gt;Thanks, Gary. I didn&apos;t realize cpio link is in the file content, not the same as other archives.&lt;/p&gt;</comment>
                            <comment id="17906053" author="garydgregory" created="Mon, 16 Dec 2024 13:47:41 +0000"  >&lt;p&gt;Yeah, each archive format is its own little world.&lt;/p&gt;</comment>
                            <comment id="17923708" author="garydgregory" created="Tue, 4 Feb 2025 13:40:58 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ahmadin&quot; class=&quot;user-hover&quot; rel=&quot;ahmadin&quot;&gt;ahmadin&lt;/a&gt;&lt;br/&gt;
Are you OK to close this ticket?&lt;/p&gt;</comment>
                            <comment id="17923799" author="JIRAUSER303013" created="Tue, 4 Feb 2025 18:37:43 +0000"  >&lt;p&gt;Yes. Thanks, Gary!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            39 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1szjc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>