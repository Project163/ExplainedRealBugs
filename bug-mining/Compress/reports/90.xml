<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:30:08 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[COMPRESS-187] ZipArchiveInputStream and ZipFile don&apos;t produce equals ZipArchiveEntry instances</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-187</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;I&apos;m trying to use a ZipArchiveEntry coming from ZipArchiveInputStream that I stored somwhere for later with a ZipFile and it does not work.&lt;/p&gt;

&lt;p&gt;The reason is that it can&apos;t find the ZipArchiveEntry in the ZipFile entries map. It is exactly the same zip file but both entries are not equals so the Map#get fail.&lt;/p&gt;

&lt;p&gt;As far as I can see the main difference is that &lt;tt&gt;comment&lt;/tt&gt; is null in ZipArchiveInputStream while it&apos;s en empty string in ZipFile. I looked at ZipArchiveInputStream and it looks like the comment (whatever it is) is simply not parsed while I can find some code related to the comment at the end of ZIipFile#readCentralDirectoryEntry.&lt;/p&gt;

&lt;p&gt;Note that java.util.zip does not have this issue. Did not checked what they do but the zip entries are equals.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12557005">COMPRESS-187</key>
            <summary>ZipArchiveInputStream and ZipFile don&apos;t produce equals ZipArchiveEntry instances</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="tmortagne">Thomas Mortagne</reporter>
                        <labels>
                    </labels>
                <created>Wed, 23 May 2012 14:00:58 +0000</created>
                <updated>Sun, 3 Jun 2012 15:31:14 +0000</updated>
                            <resolved>Sun, 3 Jun 2012 15:31:13 +0000</resolved>
                                    <version>1.4</version>
                                    <fixVersion>1.5</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13288177" author="bodewig" created="Sun, 3 Jun 2012 15:15:17 +0000"  >&lt;p&gt;The ZIP structure holds information about entries in two places.  First it contains all entries sequentially with some metadata attached to it and at the end it holds the so called central directory which holds all the metadata - including comments - for all entries.  The central directory is the real authority, any entry not listed there is not really part of the archive.&lt;/p&gt;

&lt;p&gt;ZipFile implements parsing ZIP archives correctly, it reads the central directory and from there calculates all necessary data to find the offset of a data entry when it comes to reading an entry.  ZipArchiveInputStream is forced to rely on the subset of metadata that is available with the entires themselves (the so called local file header) - it is supposed to work in streaming mode andcannot wait or the central directory to show up before returning the first result.&lt;/p&gt;

&lt;p&gt;I don&apos;t think java.util.zip works any different from Commons Compress.  In fact ZipEntry doesn&apos;t even override equals so I wouldn&apos;t excpect two ZipEntries to ever be the same, strange.&lt;/p&gt;

&lt;p&gt;We can change the code in equals to make empty comments and null comments compare to equal.  This may work for your particular case but won&apos;t work in general as metadata in local file header and central directory may be different for other fields as well.&lt;/p&gt;</comment>
                            <comment id="13288181" author="bodewig" created="Sun, 3 Jun 2012 15:31:13 +0000"  >&lt;p&gt;should be fixed with svn revision 1345687&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>251092</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 24 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0b49j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>62803</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>