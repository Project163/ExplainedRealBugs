<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:30:57 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[COMPRESS-270] TarArchiveInputStream fails to read PAX header from InputStream</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-270</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;We have a scenario with a &quot;slow&quot; &lt;tt&gt;InputStream&lt;/tt&gt; and are facing &lt;tt&gt;IOExceptions&lt;/tt&gt; with &lt;tt&gt;TarArchiveEntry#getNextTarEntry()&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;If the &lt;tt&gt;InputStream&lt;/tt&gt; does not deliver fast enough, &lt;tt&gt;TarArchiveEntry#parsePaxHeaders(InputStream i)&lt;/tt&gt; fails at this location:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;border-bottom-style: solid;&quot;&gt;&lt;b&gt;TarArchiveInputStream.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-comment&quot;&gt;// Get &lt;span class=&quot;code-keyword&quot;&gt;rest&lt;/span&gt; of entry
&lt;/span&gt;&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] &lt;span class=&quot;code-keyword&quot;&gt;rest&lt;/span&gt; = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[len - read];
&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; got = i.read(&lt;span class=&quot;code-keyword&quot;&gt;rest&lt;/span&gt;);
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (got != len - read){
	&lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IOException(&lt;span class=&quot;code-quote&quot;&gt;&quot;Failed to read &quot;&lt;/span&gt;
		+ &lt;span class=&quot;code-quote&quot;&gt;&quot;Paxheader. Expected &quot;&lt;/span&gt;
		+ (len - read)
		+ &lt;span class=&quot;code-quote&quot;&gt;&quot; bytes, read &quot;&lt;/span&gt;
		+ got);
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;We would suggest to change the code to something like this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;border-bottom-style: solid;&quot;&gt;&lt;b&gt;TarArchiveInputStream.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-comment&quot;&gt;// Get &lt;span class=&quot;code-keyword&quot;&gt;rest&lt;/span&gt; of entry
&lt;/span&gt;&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] &lt;span class=&quot;code-keyword&quot;&gt;rest&lt;/span&gt; = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[len - read];
&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; got = 0;
&lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt;((ch = i.read()) != -1) {
	&lt;span class=&quot;code-keyword&quot;&gt;rest&lt;/span&gt;[got] = (&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;) ch;
	got++;
	&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(got == len - read) {
		&lt;span class=&quot;code-keyword&quot;&gt;break&lt;/span&gt;;
	}
}
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (got != len - read){
	&lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IOException(&lt;span class=&quot;code-quote&quot;&gt;&quot;Failed to read &quot;&lt;/span&gt;
		+ &lt;span class=&quot;code-quote&quot;&gt;&quot;Paxheader. Expected &quot;&lt;/span&gt;
		+ (len - read)
		+ &lt;span class=&quot;code-quote&quot;&gt;&quot; bytes, read &quot;&lt;/span&gt;
		+ got);
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This would make sure, that it gets all bytes of the PAX header value.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12703935">COMPRESS-270</key>
            <summary>TarArchiveInputStream fails to read PAX header from InputStream</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="paburk">Patrik Burkhalter</reporter>
                        <labels>
                            <label>tar</label>
                    </labels>
                <created>Thu, 27 Mar 2014 09:49:24 +0000</created>
                <updated>Wed, 7 May 2014 15:37:13 +0000</updated>
                            <resolved>Fri, 28 Mar 2014 16:29:53 +0000</resolved>
                                    <version>1.8</version>
                                    <fixVersion>1.8.1</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13950378" author="bodewig" created="Fri, 28 Mar 2014 05:05:34 +0000"  >&lt;p&gt;there is IOUtils#readFully and I had hoped I had caught all places where we expected read to succeed by now.  Obviously not.  Sorry.&lt;/p&gt;

&lt;p&gt;This case is fixed with svn revision 1582594 but I&apos;ll leave this issue open as a reminder to scan through the code base once again.&lt;/p&gt;</comment>
                            <comment id="13950979" author="bodewig" created="Fri, 28 Mar 2014 16:29:53 +0000"  >&lt;p&gt;found two more cases inside the snappy and the ar package&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>382269</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 34 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1tuxz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>382540</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>