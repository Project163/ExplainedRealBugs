<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:31:05 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[COMPRESS-279] TarArchiveInputStream silently finished when unexpected EOF occured</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-279</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;I just found the following test case didn&apos;t raise an IOException as it used to be for a &lt;b&gt;tar trimmed on purpose&lt;/b&gt; &lt;/p&gt;

&lt;p&gt;@Test&lt;br/&gt;
  public void testCorruptedBzip2() throws IOException {&lt;br/&gt;
    String archivePath = PathUtil.join(testdataDir, &quot;test.tar.bz2&quot;);&lt;br/&gt;
    TarArchiveInputStream input = null;&lt;br/&gt;
    input = new TarArchiveInputStream(new BZip2CompressorInputStream(&lt;br/&gt;
        GoogleFile.SYSTEM.newInputStream(archivePath), true));&lt;br/&gt;
    ArchiveEntry nextMatchedEntry = input.getNextEntry();&lt;br/&gt;
    while (nextMatchedEntry != null) &lt;/p&gt;
{
      logger.infofmt(&quot;Extracting %s&quot;, nextMatchedEntry.getName());
      String outputPath = PathUtil.join(&quot;/tmp/&quot;, nextMatchedEntry.getName());
      OutputStream out = new FileOutputStream(outputPath);
      ByteStreams.copy(input, out);
      out.close();
      nextMatchedEntry = input.getNextEntry();
    }
&lt;p&gt;  }&lt;/p&gt;</description>
                <environment>&lt;p&gt;Common Compress 1.7 + openJDK 1.7&lt;/p&gt;</environment>
        <key id="12709965">COMPRESS-279</key>
            <summary>TarArchiveInputStream silently finished when unexpected EOF occured</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="itspeter">PeterL in</reporter>
                        <labels>
                            <label>regression</label>
                            <label>tar</label>
                    </labels>
                <created>Wed, 23 Apr 2014 08:11:16 +0000</created>
                <updated>Wed, 7 May 2014 15:37:14 +0000</updated>
                            <resolved>Sun, 27 Apr 2014 09:16:34 +0000</resolved>
                                    <version>1.7</version>
                    <version>1.8</version>
                                    <fixVersion>1.8.1</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13977980" author="itspeter" created="Wed, 23 Apr 2014 08:20:44 +0000"  >&lt;p&gt;The complete.tar (golden) will generate:&lt;br/&gt;
LICENSE.txt 11357&lt;br/&gt;
NOTICE.txt 433&lt;br/&gt;
README.txt 1632&lt;br/&gt;
RELEASE-NOTES.txt &lt;b&gt;2648&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;The command tar xf trim.tar will generate:&lt;br/&gt;
LICENSE.txt 11357&lt;br/&gt;
NOTICE.txt 433&lt;br/&gt;
README.txt 1632&lt;br/&gt;
RELEASE-NOTES.txt &lt;b&gt;2560&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;Using the code above will generate:&lt;br/&gt;
LICENSE.txt 11357&lt;br/&gt;
NOTICE.txt 433&lt;br/&gt;
README.txt 1632&lt;br/&gt;
RELEASE-NOTES.txt &lt;b&gt;2616&lt;/b&gt;&lt;/p&gt;</comment>
                            <comment id="13979765" author="bodewig" created="Thu, 24 Apr 2014 14:14:52 +0000"  >&lt;p&gt;do you recall which version of Compress used to raise an exception?&lt;/p&gt;</comment>
                            <comment id="13979797" author="bodewig" created="Thu, 24 Apr 2014 14:48:48 +0000"  >&lt;p&gt;I ask when it ever worked because I confirm it doesn&apos;t throw an IOException now but wonder why it should ever have done so.&lt;/p&gt;</comment>
                            <comment id="13980530" author="itspeter" created="Fri, 25 Apr 2014 00:14:31 +0000"  >&lt;p&gt;Hi Stefan,&lt;/p&gt;

&lt;p&gt;I saw this behavior on v1.4. However, I think it is the correct behavior. If you try to use command line &apos;tar&apos; it will throw the following message:&lt;/p&gt;

&lt;p&gt;tar xvf trim.tar &lt;br/&gt;
LICENSE.txt&lt;br/&gt;
NOTICE.txt&lt;br/&gt;
README.txt&lt;br/&gt;
RELEASE-NOTES.txt&lt;br/&gt;
tar: Unexpected EOF in archive&lt;br/&gt;
tar: Unexpected EOF in archive&lt;br/&gt;
tar: Error is not recoverable: exiting now&lt;/p&gt;

&lt;p&gt;Don&apos;t you think the Java version should at least indicate something is wrong maybe with a flag to turn it silent or so..&lt;/p&gt;</comment>
                            <comment id="13980631" author="belugabehr" created="Fri, 25 Apr 2014 02:26:06 +0000"  >&lt;p&gt;Surprisingly simple (unless I&apos;m over-looking something) fix.  Patch included.&lt;/p&gt;

&lt;p&gt;Note that calling IOUtils#skip (Compress-277) on the stream will have the effect of skipping until EOL, then when it finishes by calling read, it will trigger this exception.&lt;/p&gt;

&lt;p&gt;There are no unit tests in the suite that trigger this though.&lt;/p&gt;</comment>
                            <comment id="13980853" author="bodewig" created="Fri, 25 Apr 2014 10:05:09 +0000"  >&lt;p&gt;I see how my &quot;should ever have done so&quot; can be misunderstood.  What I meant to say is: of course there should be an exception but I don&apos;t see why the code has ever thrown an exception.  I.e. I don&apos;t see where the regression has been introduced.&lt;/p&gt;

&lt;p&gt;I&apos;ll look into this over the weekend, I&apos;ve already added a unit test and it doesn&apos;t throw any exception in trunk - so the changed skip alone won&apos;t help.  &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=belugabehr&quot; class=&quot;user-hover&quot; rel=&quot;belugabehr&quot;&gt;belugabehr&lt;/a&gt;: on first glance your patch looks good, thanks.&lt;/p&gt;</comment>
                            <comment id="13980933" author="belugabehr" created="Fri, 25 Apr 2014 12:06:34 +0000"  >&lt;p&gt;It was probably in the TarBuffer class that I lopped out.&lt;/p&gt;</comment>
                            <comment id="13982269" author="bodewig" created="Sun, 27 Apr 2014 09:16:34 +0000"  >&lt;p&gt;fixed with svn revision 1590361&lt;/p&gt;

&lt;p&gt;I used a smaller modification than the proposed patch but it&apos;s similar in spirit - thanks!&lt;/p&gt;</comment>
                            <comment id="13982318" author="belugabehr" created="Sun, 27 Apr 2014 13:38:30 +0000"  >&lt;p&gt;Even better.  Thanks.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12641860" name="TarArchiveInputStream.java.patch" size="877" author="belugabehr" created="Fri, 25 Apr 2014 02:23:53 +0000"/>
                            <attachment id="12641426" name="complete.tar" size="20480" author="itspeter" created="Wed, 23 Apr 2014 08:20:44 +0000"/>
                            <attachment id="12641428" name="trim.tar" size="19000" author="itspeter" created="Wed, 23 Apr 2014 08:20:44 +0000"/>
                            <attachment id="12641427" name="trim.tar.bz2" size="5712" author="itspeter" created="Wed, 23 Apr 2014 08:20:44 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>388287</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 29 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1uvxb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>388542</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>