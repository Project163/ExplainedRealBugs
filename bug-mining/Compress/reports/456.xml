<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:35:20 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[COMPRESS-653] ZipArchiveOutputStream multi archive updates metadata in incorrect file</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-653</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;`ZipArchiveOutputStream` fails to update metadata (compressed size, CRC) when file is split into multiple archives.&#160; The original stream is closed and the metadata is written into currently open channel instead.&lt;/p&gt;

&lt;p&gt;Such archive is then not possible to process with regular zip utility as metadata is incorrect and the data stream may be broken because of incorrectly overwritten content by metadata.&lt;/p&gt;

&lt;p&gt;The issue is in `rewriteSizesAndCrc()` function which uses currently open channel.&lt;/p&gt;

&lt;p&gt;When `addRawArchiveEntry()` and metadata is populated in advance, the produced archive is correct.&lt;/p&gt;

&lt;p&gt;Full fix is more complicated as the archiver needs to keep multiple channels open.&#160; As a quick fix, throwing unsupported operation exception may be sufficient to avoid silent failure.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13558945">COMPRESS-653</key>
            <summary>ZipArchiveOutputStream multi archive updates metadata in incorrect file</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ggregory">Gary D. Gregory</assignee>
                                    <reporter username="kvr">Zbynek Vyskovsky</reporter>
                        <labels>
                    </labels>
                <created>Wed, 22 Nov 2023 00:44:47 +0000</created>
                <updated>Mon, 15 Jan 2024 16:31:58 +0000</updated>
                            <resolved>Mon, 15 Jan 2024 15:53:34 +0000</resolved>
                                    <version>1.25.0</version>
                                    <fixVersion>1.26.0</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17789454" author="garydgregory" created="Fri, 24 Nov 2023 13:28:54 +0000"  >&lt;p&gt;Hello &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kvr&quot; class=&quot;user-hover&quot; rel=&quot;kvr&quot;&gt;kvr&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;Thank you for taking the time to write this report.&lt;/p&gt;

&lt;p&gt;Feel free to provide a PR on GitHub with a matching test or tests.&lt;/p&gt;</comment>
                            <comment id="17800859" author="kvr" created="Wed, 27 Dec 2023 19:47:57 +0000"  >&lt;p&gt;Added a full fix for this, including ZipArchiveOutputStream and ZipFile access implementations.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;The ZipFile is questionable, as I introduced automatic detection of multi-archive.&#160; It&apos;s possible to add another explicit parameter to detect multi-archive but it&apos;s probably better to introduce ZipOpenConfig (builder) class which would wrap all optional parameters by their names.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17800896" author="garydgregory" created="Thu, 28 Dec 2023 00:27:10 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kvr&quot; class=&quot;user-hover&quot; rel=&quot;kvr&quot;&gt;kvr&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This PR breaks binary compatibility.&lt;/p&gt;

&lt;p&gt;Run &lt;tt&gt;mvn&lt;/tt&gt; (which invokes the default Maven goal) before you push to catch all build errors locally.&lt;/p&gt;</comment>
                            <comment id="17800904" author="kvr" created="Thu, 28 Dec 2023 02:08:31 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ggregory&quot; class=&quot;user-hover&quot; rel=&quot;ggregory&quot;&gt;ggregory&lt;/a&gt; , good to have such catch!&lt;/p&gt;

&lt;p&gt;I fixed this, there are still some style issues I have to look at.&lt;/p&gt;</comment>
                            <comment id="17806899" author="garydgregory" created="Mon, 15 Jan 2024 16:31:47 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kvr&quot; class=&quot;user-hover&quot; rel=&quot;kvr&quot;&gt;kvr&lt;/a&gt;&lt;br/&gt;
Thank you for your PR and patience. The code is now in git master and snapshot builds for 1.26.0: &lt;a href=&quot;https://repository.apache.org/content/repositories/snapshots/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/repositories/snapshots/&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12314421" key="com.atlassian.jira.plugin.system.customfieldtypes:labels">
                        <customfieldname>Language</customfieldname>
                        <customfieldvalues>
                                        <label>Java</label>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 42 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1lrl4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>