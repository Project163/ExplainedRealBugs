<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:36:35 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[COMPRESS-705] GZip IOException: Extra subfield lenght exceeds remaining bytes in extra field</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-705</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;We try to read the content of a helm chart via a method like this:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;$ helm repo add grafana https://grafana.github.io/helm-charts &amp;amp;&amp;amp; helm repo update grafana
$ cd /tmp &amp;amp;&amp;amp; helm pull grafana/grafana --version 9.2.9&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160; &#160;&#160;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;import org.apache.commons.compress.archivers.tar.TarArchiveInputStream;
import org.apache.commons.compress.archivers.tar.TarArchiveEntry;
import org.apache.commons.compress.compressors.gzip.GzipCompressorInputStream;

import java.io.IOException;
import java.nio.file.Files;
import java.io.File;
import java.util.ArrayList;
import java.util.List;

public class Main {

    public static void main(String[] args) throws IOException {
        var tarZippedArchive = new File(&quot;/tmp/grafana-9.2.9.tgz&quot;);
        var fileNames = getFileNamesFromTarGz(tarZippedArchive);
        fileNames.forEach(System.out::println);
    }

    private static List&amp;lt;String&amp;gt; getFileNamesFromTarGz(File tarZippedArchive) throws IOException {
        var fileNames = new ArrayList&amp;lt;String&amp;gt;();
        var input = Files.newInputStream(tarZippedArchive.toPath());

        try (TarArchiveInputStream tar = new TarArchiveInputStream(new GzipCompressorInputStream(input))) {
            TarArchiveEntry entry;
            while ((entry = tar.getNextEntry()) != null) {
                fileNames.add(entry.getName());
            }
        }
        return fileNames;
    }
} &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;and get this error:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Exception in thread &quot;main&quot; java.io.IOException: Extra subfield lenght exceeds remaining bytes in extra: 21064 &amp;gt; 37
	at org.apache.commons.compress.compressors.gzip.ExtraField.fromBytes(ExtraField.java:154)
	at org.apache.commons.compress.compressors.gzip.GzipCompressorInputStream.init(GzipCompressorInputStream.java:388)
	at org.apache.commons.compress.compressors.gzip.GzipCompressorInputStream.&amp;lt;init&amp;gt;(GzipCompressorInputStream.java:273)
	at org.apache.commons.compress.compressors.gzip.GzipCompressorInputStream.&amp;lt;init&amp;gt;(GzipCompressorInputStream.java:286)
	at Main.getFileNamesFromTarGz(Main.java:23)
	at Main.main(Main.java:15)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The same was working with version 1.27.1, so it is a regression. Command-line utilities like `tar` can handle this archive without problems.&lt;br/&gt;
&#160;&lt;/p&gt;

&lt;p&gt;Also note the typo in the exception message lenght &amp;gt; length &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</description>
                <environment>&lt;p&gt;$ sw_vers&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;&#160;&lt;br/&gt;
ProductName: &#160; &#160; &#160; &#160;macOS&lt;br/&gt;
ProductVersion: &#160; &#160; &#160; &#160;15.6&lt;br/&gt;
BuildVersion: &#160; &#160; &#160; &#160;24G84&lt;/p&gt;

&lt;p&gt;$ java -version&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;&#160;&lt;br/&gt;
java version &quot;24.0.1&quot; 2025-04-15&lt;br/&gt;
Java(TM) SE Runtime Environment Oracle GraalVM 24.0.1+9.1 (build 24.0.1+9-jvmci-b01)&lt;br/&gt;
Java HotSpot(TM) 64-Bit Server VM Oracle GraalVM 24.0.1+9.1 (build 24.0.1+9-jvmci-b01, mixed mode, sharing)&lt;/p&gt;</environment>
        <key id="13625770">COMPRESS-705</key>
            <summary>GZip IOException: Extra subfield lenght exceeds remaining bytes in extra field</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="mfredenhagen">Mario Fredenhagen</reporter>
                        <labels>
                    </labels>
                <created>Thu, 7 Aug 2025 10:44:18 +0000</created>
                <updated>Sat, 9 Aug 2025 09:59:12 +0000</updated>
                            <resolved>Fri, 8 Aug 2025 15:27:20 +0000</resolved>
                                    <version>1.28.0</version>
                                    <fixVersion>1.29.0</fixVersion>
                                    <component>Compressors</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="18012697" author="garydgregory" created="Thu, 7 Aug 2025 21:50:56 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mfredenhagen&quot; class=&quot;user-hover&quot; rel=&quot;mfredenhagen&quot;&gt;mfredenhagen&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;Thank you for your report.&lt;/p&gt;

&lt;p&gt;I need a file I can test. I don&apos;t want to install a bunch of infra/stuff to get a file. Do you have a URL to a file, or a file I can use?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="18012778" author="JIRAUSER310666" created="Fri, 8 Aug 2025 07:05:12 +0000"  >&lt;p&gt;Hi Gary,&lt;/p&gt;

&lt;p&gt;I can attach the mentioned file so you don&apos;t have to download it by yourself.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/13077895/13077895_grafana-9.2.9.tgz&quot; title=&quot;grafana-9.2.9.tgz attached to COMPRESS-705&quot;&gt;grafana-9.2.9.tgz&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;I hope this helps.&lt;/p&gt;</comment>
                            <comment id="18012887" author="garydgregory" created="Fri, 8 Aug 2025 15:27:20 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mfredenhagen&quot; class=&quot;user-hover&quot; rel=&quot;mfredenhagen&quot;&gt;mfredenhagen&lt;/a&gt;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;commit 7ef0f5be9feded9075fbf04d27d1b1bf1d1734de&lt;/li&gt;
	&lt;li&gt;The extra field parsing added in version 1.28.0 doesn&apos;t behave by default as gzip, which ignores this field and its subfields.&lt;/li&gt;
	&lt;li&gt;This causes parsing failures for existing applications.&lt;/li&gt;
	&lt;li&gt;This change reverts the default behavior to avoid extra field parsing of subfields&lt;/li&gt;
	&lt;li&gt;This change adds a new option to enable parsing an extra field&apos;s subfields: GzipCompressorInputStream.Builder.setIgnoreExtraField(boolean)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Please test git master or a &lt;tt&gt;1.29.0-SNAPSHOT&lt;/tt&gt; build from the Maven snapshot repository at &lt;a href=&quot;https://repository.apache.org/content/repositories/snapshots/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/repositories/snapshots/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;TY!&lt;/p&gt;</comment>
                            <comment id="18012969" author="JIRAUSER310666" created="Sat, 9 Aug 2025 09:24:47 +0000"  >&lt;p&gt;I&apos;ve tested 1.29.0-SNAPSHOT in our codebase, and it is working again. Thank you.&lt;/p&gt;

&lt;p&gt;When can we expect the 1.29.0 release?&#160;&lt;/p&gt;</comment>
                            <comment id="18012971" author="garydgregory" created="Sat, 9 Aug 2025 09:59:12 +0000"  >&lt;p&gt;Sooner rather than later but there a few other changes we need to do so it might be a week, two weeks, or a bit more.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13077895" name="grafana-9.2.9.tgz" size="47968" author="mfredenhagen" created="Fri, 8 Aug 2025 07:04:17 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1x5hs:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>