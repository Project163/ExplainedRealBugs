<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:36:17 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[COMPRESS-687] org.apache.commons.compress.harmony.unpack200.Archive.unpack() should not log to system out (the console)</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-687</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;Hello,&lt;/p&gt;

&lt;p&gt;Consider the following class:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Foo {

	&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;... args) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
		&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;start&quot;&lt;/span&gt;);
		&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; inputStream = Foo.&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;getClassLoader().getResourceAsStream(&lt;span class=&quot;code-quote&quot;&gt;&quot;foo.pack&quot;&lt;/span&gt;)) {
			&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; compressInputStream = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Pack200CompressorInputStream(inputStream)) {
				compressInputStream.transferTo(&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out);
			}
		}
		&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;end&quot;&lt;/span&gt;); &lt;span class=&quot;code-comment&quot;&gt;// never reached
&lt;/span&gt;	}
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Running it using Java 22, and the `--add-opens=java.base/java.io=ALL-UNNAMED` VM option, the result is:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;start

Process finished with exit code 0
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The process is interrupted without any error.&lt;/p&gt;

&lt;p&gt;I have attached files.&lt;/p&gt;

&lt;p&gt;Thank you in advance.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13592035">COMPRESS-687</key>
            <summary>org.apache.commons.compress.harmony.unpack200.Archive.unpack() should not log to system out (the console)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ggregory">Gary D. Gregory</assignee>
                                    <reporter username="alexisj">Alexis Jehan</reporter>
                        <labels>
                    </labels>
                <created>Fri, 13 Sep 2024 09:04:08 +0000</created>
                <updated>Thu, 17 Apr 2025 16:38:16 +0000</updated>
                            <resolved>Thu, 17 Apr 2025 16:08:00 +0000</resolved>
                                    <version>1.27.1</version>
                                    <fixVersion>1.28.0</fixVersion>
                                    <component>Compressors</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17881858" author="garydgregory" created="Sun, 15 Sep 2024 15:17:53 +0000"  >&lt;p&gt;I added a new test to git master&#160;&lt;tt&gt;org.apache.commons.compress.compressors.pack200.Compress687Test&lt;/tt&gt; which passes locally for me on macOS 23.6.0 Darwin Kernel Version 23.6.0 using Java 8 and 22.&lt;/p&gt;

&lt;p&gt;The tests also pass on GitHub on macOS, Windows, Ubuntu using Java 8, 11, 17, 21, 22.&lt;/p&gt;

&lt;p&gt;The issue must be on your end unless you can provide a failing unit test.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17945432" author="alexisj" created="Thu, 17 Apr 2025 15:12:59 +0000"  >&lt;p&gt;After some months, I took the time to investigate the issue.&lt;/p&gt;

&lt;p&gt;I found out that `System.out` does not print anything anymore after calling `new Pack200CompressorInputStream`.&lt;/p&gt;

&lt;p&gt;I temporary fixed it using this code:&lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Foo {

	&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;... args) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
		&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;start&quot;&lt;/span&gt;);
		&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; out = &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out;
		&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.setOut(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PrintStream(OutputStream.nullOutputStream()));
		&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; inputStream = Foo.&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;getClassLoader().getResourceAsStream(&lt;span class=&quot;code-quote&quot;&gt;&quot;foo.pack&quot;&lt;/span&gt;)) {
			&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; compressInputStream = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Pack200CompressorInputStream(inputStream)) {
				compressInputStream.transferTo(OutputStream.nullOutputStream());
			}
		}
		&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.setOut(out);
		&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;end&quot;&lt;/span&gt;); &lt;span class=&quot;code-comment&quot;&gt;// now reached
&lt;/span&gt;	}
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The library should not alter `System.out`. The fix should be applied here:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;	at org.apache.commons.compress.harmony.unpack200.Segment.setLogStream(Segment.java:456)
	at org.apache.commons.compress.harmony.unpack200.Archive.unpack(Archive.java:207)
	at org.apache.commons.compress.harmony.unpack200.Pack200UnpackerAdapter.unpack(Pack200UnpackerAdapter.java:186)
	at org.apache.commons.compress.compressors.pack200.Pack200CompressorInputStream.&amp;lt;init&amp;gt;(Pack200CompressorInputStream.java:140)
	at org.apache.commons.compress.compressors.pack200.Pack200CompressorInputStream.&amp;lt;init&amp;gt;(Pack200CompressorInputStream.java:174)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17945446" author="garydgregory" created="Thu, 17 Apr 2025 16:08:00 +0000"  >&lt;p&gt;Hello &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=alexisj&quot; class=&quot;user-hover&quot; rel=&quot;alexisj&quot;&gt;alexisj&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;This is now fixed in git master. Please review and try a local build of git master or a snapshot build from:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://repository.apache.org/content/repositories/snapshots/org/apache/commons/commons-compress/1.28.0-SNAPSHOT/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/repositories/snapshots/org/apache/commons/commons-compress/1.28.0-SNAPSHOT/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;TY!&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17945452" author="alexisj" created="Thu, 17 Apr 2025 16:38:16 +0000"  >&lt;p&gt;I just tested, I confirm this is fixed now.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13071542" name="test-issue.7z" size="1008" author="alexisj" created="Fri, 13 Sep 2024 09:03:24 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            29 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1renc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>