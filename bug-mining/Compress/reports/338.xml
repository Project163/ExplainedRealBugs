<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:33:41 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[COMPRESS-505] Multiple Reads of One SevenZArchiveEntry Fails</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-505</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;I&apos;ve run into a bug which occurs when attempting to read the same&#160;SevenZArchiveEntry stream multiple times. The following code illustrates the problem.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
File archive = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(&lt;span class=&quot;code-quote&quot;&gt;&quot;CC0 Images.7z&quot;&lt;/span&gt;);
&lt;span class=&quot;code-object&quot;&gt;char&lt;/span&gt;[] password = &lt;span class=&quot;code-quote&quot;&gt;&quot;password&quot;&lt;/span&gt;.toCharArray();
&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; (SevenZFile f = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SevenZFile(archive, password))
{
  SevenZArchiveEntry entry = StreamSupport.stream(f.getEntries().spliterator(), &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;)
    .filter(e -&amp;gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;alberta-amazing-attraction-banff-417074.jpg&quot;&lt;/span&gt;.equals(e.getName()))
    .findFirst().orElseGet(&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
  &lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; entry != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
  &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i = 0; i &amp;lt; 100; i++)
  {
    InputStream is = f.getInputStream(entry);
    BufferedImage img = ImageIO.read(is);
    &lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; img != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;Succeeded &quot;&lt;/span&gt; + (i + 1) + &lt;span class=&quot;code-quote&quot;&gt;&quot; times&quot;&lt;/span&gt;);
  }
}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Below is the output I receive on version 1.20&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Succeeded 1 times
Succeeded 2 times
Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; java.io.IOException: Checksum verification failed
    at org.apache.commons.compress.utils.ChecksumVerifyingInputStream.read(ChecksumVerifyingInputStream.java:61)
    at org.apache.commons.compress.utils.ChecksumVerifyingInputStream.skip(ChecksumVerifyingInputStream.java:102)
    at org.apache.commons.compress.utils.IOUtils.skip(IOUtils.java:113)
    at org.apache.commons.compress.archivers.sevenz.SevenZFile.getCurrentStream(SevenZFile.java:1318)
    at org.apache.commons.compress.archivers.sevenz.SevenZFile.getInputStream(SevenZFile.java:1354)
    at org.abitoff.dmav.Test.main(Test.java:11)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13287588">COMPRESS-505</key>
            <summary>Multiple Reads of One SevenZArchiveEntry Fails</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="peterlee">Peter Lee</assignee>
                                    <reporter username="acid1103">Steven Fontaine</reporter>
                        <labels>
                    </labels>
                <created>Tue, 25 Feb 2020 20:00:57 +0000</created>
                <updated>Wed, 25 Mar 2020 07:12:18 +0000</updated>
                            <resolved>Wed, 25 Mar 2020 07:12:18 +0000</resolved>
                                    <version>1.20</version>
                                    <fixVersion>1.21</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="2400">40m</timespent>
                                <comments>
                            <comment id="17050990" author="peter alfred lee" created="Wed, 4 Mar 2020 08:19:29 +0000"  >&lt;p&gt;This is a problem caused by the random access of 7z(which was published by me).&lt;/p&gt;

&lt;p&gt;I&apos;m working on this. I&apos;ll push a PR on github and update this issue.&lt;/p&gt;</comment>
                            <comment id="17051863" author="peter alfred lee" created="Thu, 5 Mar 2020 07:47:30 +0000"  >&lt;p&gt;I investigated into the code and realized I made some mistakes in the original code. Sorry about my careless. The fix for it has already been pushed with PR #95.&lt;/p&gt;

&lt;p&gt;I can run the test code in this issue successfully with the new fix.&lt;/p&gt;

&lt;p&gt;I believe there would be no exceptions if you do not read a sing file multiple time, or you can just using the sequential access(by calling SevenZFile.getNextEntry and SevenZFile.read)&lt;/p&gt;

&lt;p&gt;But it seems you got to wait another release of commons compress if you really need to do this using SevenZFile.getInputStream.&lt;/p&gt;</comment>
                            <comment id="17066446" author="peterlee" created="Wed, 25 Mar 2020 07:12:18 +0000"  >&lt;p&gt;Fixed&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12994582" name="CC0 Images.7z" size="30822201" author="acid1103" created="Tue, 25 Feb 2020 20:06:32 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 33 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0bvqw:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>