<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:35:28 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[COMPRESS-666] Multithreaded access to Tar archive throws java.util.zip.ZipException: Corrupt GZIP trailer</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-666</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;Something in &lt;a href=&quot;https://github.com/apache/commons-compress/compare/rel/commons-compress-1.25.0...master&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-compress/compare/rel/commons-compress-1.25.0...master&lt;/a&gt; seems to make iterating through the tar entries of multiple&#160;&lt;br/&gt;
TarArchiveInputStreams throw Corrupted TAR archive:&lt;br/&gt;
&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@Test
void bla() {
    ExecutorService executorService = Executors.newFixedThreadPool(10);
    List&amp;lt;CompletableFuture&amp;lt;&lt;span class=&quot;code-object&quot;&gt;Void&lt;/span&gt;&amp;gt;&amp;gt; tasks = IntStream.range(0, 200)
            .mapToObj(_idx -&amp;gt; CompletableFuture.runAsync(
                    () -&amp;gt; {
                        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; (InputStream inputStream = &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.getClass()
                                        .getResourceAsStream(
                                                &lt;span class=&quot;code-quote&quot;&gt;&quot;/&amp;lt;your favourite tar tgz&amp;gt;&quot;&lt;/span&gt;);
                                TarArchiveInputStream tarInputStream =
                                        &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; TarArchiveInputStream(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; GZIPInputStream(inputStream))) {
                            TarArchiveEntry tarEntry;
                            &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; ((tarEntry = tarInputStream.getNextTarEntry()) != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
                                &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;Reading entry %s with size %d&quot;&lt;/span&gt;
                                        .formatted(tarEntry.getName(), tarEntry.getSize()));
                            }
                        } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Exception ex) {
                            &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; RuntimeException(ex);
                        }
                    },
                    executorService))
            .toList();
    Futures.getUnchecked(CompletableFuture.allOf(tasks.toArray(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; CompletableFuture&amp;lt;?&amp;gt;[0])));
} &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Although TarArchiveInputStream is marked as not thread safe, I am not reusing objects here. Those are in fact separate objects, presumably all with their own position tracking info.&lt;br/&gt;
&#160;&lt;br/&gt;
The stacktrace here looks like:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Caused by: java.io.IOException: Corrupted TAR archive.
&#160; &#160; at org.apache.commons.compress.archivers.tar.TarArchiveEntry.parseTarHeader(TarArchiveEntry.java:1480)
&#160; &#160; at org.apache.commons.compress.archivers.tar.TarArchiveEntry.&amp;lt;init&amp;gt;(TarArchiveEntry.java:534)
&#160; &#160; at org.apache.commons.compress.archivers.tar.TarArchiveInputStream.getNextTarEntry(TarArchiveInputStream.java:431)
&#160; &#160; at
Caused by: java.lang.IllegalArgumentException: Invalid &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt; 100 at offset 0 in &lt;span class=&quot;code-quote&quot;&gt;&apos;dddddddddddd&apos;&lt;/span&gt; len=12
&#160; &#160; at org.apache.commons.compress.archivers.tar.TarUtils.parseOctal(TarUtils.java:516)
&#160; &#160; at org.apache.commons.compress.archivers.tar.TarUtils.parseOctalOrBinary(TarUtils.java:540)
&#160; &#160; at org.apache.commons.compress.archivers.tar.TarArchiveEntry.parseTarHeaderUnwrapped(TarArchiveEntry.java:1496)
&#160; &#160; at org.apache.commons.compress.archivers.tar.TarArchiveEntry.parseTarHeader(TarArchiveEntry.java:1478)
&#160; &#160; ... 7 more
 &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;That code shows that occasionally the header is wrong (the tar entry name contains gibberish bits) which makes me think that `getNextTarEntry()` can be faulty.&lt;br/&gt;
&#160;&lt;br/&gt;
Running that code with commons compress 1.25.0 works as expected. So it&apos;s probably something added since November. Note that this is something related to parallelism - using an executor service with a single thread doesn&apos;t suffer from the same error. The tgz to decompress doesn&apos;t really matter - you can use a manually created one worth a few KBs.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Commons compress 1.26.0 to get a failure. Any tar tgz.&lt;/p&gt;</environment>
        <key id="13569740">COMPRESS-666</key>
            <summary>Multithreaded access to Tar archive throws java.util.zip.ZipException: Corrupt GZIP trailer</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ggregory">Gary D. Gregory</assignee>
                                    <reporter username="cosmin79">Cosmin Carabet</reporter>
                        <labels>
                    </labels>
                <created>Sat, 24 Feb 2024 18:38:39 +0000</created>
                <updated>Mon, 4 Aug 2025 06:15:30 +0000</updated>
                            <resolved>Fri, 1 Mar 2024 23:27:41 +0000</resolved>
                                    <version>1.26.0</version>
                                    <fixVersion>1.26.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17820416" author="garydgregory" created="Sat, 24 Feb 2024 20:30:50 +0000"  >&lt;p&gt;Hello &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cosmin79&quot; class=&quot;user-hover&quot; rel=&quot;cosmin79&quot;&gt;cosmin79&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;Thank you for your report.&lt;/p&gt;

&lt;p&gt;The example you provided does not compile. Note that you must use Java 8. If you can provide something we can run on Java 8, we can debug it.&lt;/p&gt;

&lt;p&gt;Your best bet is to provide a PR on GitHub.&lt;/p&gt;</comment>
                            <comment id="17820419" author="JIRAUSER304399" created="Sat, 24 Feb 2024 20:49:50 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@Test
void bla() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; ExecutionException, InterruptedException {
    ExecutorService executorService = Executors.newFixedThreadPool(10);
    List&amp;lt;Future&amp;lt;?&amp;gt;&amp;gt; tasks = IntStream.range(0, 200)
            .mapToObj(_idx -&amp;gt; executorService.submit(() -&amp;gt; {
                &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; (InputStream inputStream = &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.getClass()
                                .getResourceAsStream(&lt;span class=&quot;code-quote&quot;&gt;&quot;/&amp;lt;your favourite tar tgz&amp;gt;&quot;&lt;/span&gt;);
                        TarArchiveInputStream tarInputStream =
                                &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; TarArchiveInputStream(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; GZIPInputStream(inputStream))) {
                    TarArchiveEntry tarEntry;
                    &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; ((tarEntry = tarInputStream.getNextTarEntry()) != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
                        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.printf(
                                &lt;span class=&quot;code-quote&quot;&gt;&quot;Reading entry %s with size %d\n&quot;&lt;/span&gt;, tarEntry.getName(), tarEntry.getSize());
                    }
                } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Exception ex) {
                    &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; RuntimeException(ex);
                }
            }))
            .collect(Collectors.toList());
    &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (Future&amp;lt;?&amp;gt; &lt;span class=&quot;code-keyword&quot;&gt;future&lt;/span&gt; : tasks) {
        &lt;span class=&quot;code-keyword&quot;&gt;future&lt;/span&gt;.get();
    }
} &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Hey. Thanks for taking a look. I think the issue there is that I was using guava Futures. I believe the above only uses Java 8 and no further deps.&lt;/p&gt;</comment>
                            <comment id="17820426" author="JIRAUSER304399" created="Sat, 24 Feb 2024 21:32:25 +0000"  >&lt;p&gt;The following compiles for me with Java8 &lt;a href=&quot;https://github.com/apache/commons-compress/pull/488&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-compress/pull/488&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;It looks like CI doesn&apos;t run for forks. But hopefully, you can use this as a starting point&lt;/p&gt;</comment>
                            <comment id="17821452" author="garydgregory" created="Tue, 27 Feb 2024 23:32:18 +0000"  >&lt;p&gt;Thank you for your PR. I merged it as a disabled test. I do not see the same failure though, which is interesting (I don&apos;t have a nested exception for &quot;Invalid byte 100 at offset 0 in &apos;dddddddddddd&apos; len=12&quot;).&lt;/p&gt;</comment>
                            <comment id="17821455" author="JIRAUSER304399" created="Tue, 27 Feb 2024 23:37:37 +0000"  >&lt;p&gt;Thanks for looking into this. I think the exact offset message may differ. The consistent behavior is the &quot;Corrupted GZIP trailer&quot; behavior. I&apos;ve also noticed it in the Github CI for the project &lt;a href=&quot;https://github.com/apache/commons-compress/actions/runs/8033321415/job/22052907814#step:5:2460&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-compress/actions/runs/8033321415/job/22052907814#step:5:2460&lt;/a&gt; . Are you not getting a &quot;Corrupted GZIP trailer&quot; error when running it locally ?&#160;&lt;/p&gt;</comment>
                            <comment id="17821707" author="garydgregory" created="Wed, 28 Feb 2024 15:04:22 +0000"  >&lt;p&gt;Hello &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cosmin79&quot; class=&quot;user-hover&quot; rel=&quot;cosmin79&quot;&gt;cosmin79&lt;/a&gt;,&lt;br/&gt;
Yes, this is what I get locally:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.opentest4j.AssertionFailedError
	at org.junit.jupiter.api.AssertionUtils.fail(AssertionUtils.java:46)
	at org.junit.jupiter.api.Assertions.fail(Assertions.java:161)
	at org.apache.commons.compress.compressors.GZipTest.testCompress666(GZipTest.java:88)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at java.util.ArrayList.forEach(ArrayList.java:1259)
	at java.util.ArrayList.forEach(ArrayList.java:1259)
Caused by: java.util.concurrent.ExecutionException: org.opentest4j.AssertionFailedError: org.apache.commons.compress.archivers.tar.TarArchiveEntry@101289c2
	at java.util.concurrent.FutureTask.report(FutureTask.java:122)
	at java.util.concurrent.FutureTask.get(FutureTask.java:192)
	at org.apache.commons.compress.compressors.GZipTest.testCompress666(GZipTest.java:81)
	... 3 more
Caused by: org.opentest4j.AssertionFailedError: org.apache.commons.compress.archivers.tar.TarArchiveEntry@101289c2
	at org.junit.jupiter.api.AssertionUtils.fail(AssertionUtils.java:42)
	at org.junit.jupiter.api.Assertions.fail(Assertions.java:150)
	at org.apache.commons.compress.compressors.GZipTest.lambda$1(GZipTest.java:75)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.run(FutureTask.java:266)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:750)
Caused by: java.util.zip.ZipException: Corrupt GZIP trailer
	at java.util.zip.GZIPInputStream.readTrailer(GZIPInputStream.java:225)
	at java.util.zip.GZIPInputStream.read(GZIPInputStream.java:119)
	at org.apache.commons.io.IOUtils.skip(IOUtils.java:2422)
	at org.apache.commons.io.IOUtils.skip(IOUtils.java:2380)
	at org.apache.commons.compress.archivers.tar.TarArchiveInputStream.consumeRemainderOfLastBlock(TarArchiveInputStream.java:320)
	at org.apache.commons.compress.archivers.tar.TarArchiveInputStream.getRecord(TarArchiveInputStream.java:505)
	at org.apache.commons.compress.archivers.tar.TarArchiveInputStream.getNextTarEntry(TarArchiveInputStream.java:418)
	at org.apache.commons.compress.archivers.tar.TarArchiveInputStream.getNextEntry(TarArchiveInputStream.java:392)
	at org.apache.commons.compress.compressors.GZipTest.lambda$1(GZipTest.java:71)
	... 5 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17821721" author="JIRAUSER304399" created="Wed, 28 Feb 2024 15:26:45 +0000"  >&lt;p&gt;Ah, I see. You&apos;re still getting the &quot;Corrupt GZIP trailer&quot; behaviour though, which is good. I&apos;m getting the &quot;Invalid byte 100 at offset 0 in &apos;dddddddddddd&apos; len=12&quot; error on MacOS for what it&apos;s worth. I believe what you&apos;re getting is closer to what I initially saw on one of my services running in Linux (I first it observed in there and then wrote a test to reproduce it locally). In any case, I wouldn&apos;t over-index on the &quot;invalid byte&quot; part, but rather on the `readTrailer() -&amp;gt; Corrupt GZIP trailer` behaviour, which is consistent.&lt;/p&gt;

&lt;p&gt;For what it&apos;s worth, if you cherry pick that test on top of 1.25.0, it works correctly. That&apos;s why I basically suggested it&apos;s likely something which came in between those 2 versions (1.25.0 - 1.26.0)&lt;/p&gt;</comment>
                            <comment id="17821807" author="garydgregory" created="Wed, 28 Feb 2024 18:29:17 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cosmin79&quot; class=&quot;user-hover&quot; rel=&quot;cosmin79&quot;&gt;cosmin79&lt;/a&gt;&lt;br/&gt;
The simplest solution is to buffer the GZIP input stream:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
TarArchiveInputStream tarInputStream = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; TarArchiveInputStream(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; BufferedInputStream(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; GZIPInputStream(inputStream)),
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;See &lt;tt&gt;GZipTest.testCompress666()&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="17821864" author="JIRAUSER304399" created="Wed, 28 Feb 2024 20:39:16 +0000"  >&lt;p&gt;Hey Gary,&lt;/p&gt;

&lt;p&gt;Thanks for looking into this. That does indeed seem to fix that test for me. Do you have a feel for what changes? Wondering whether the buffering behaviour fixes it vs making some sort of race condition less likely to occur.&lt;/p&gt;</comment>
                            <comment id="17821865" author="JIRAUSER304399" created="Wed, 28 Feb 2024 20:51:14 +0000"  >&lt;p&gt;I did actually make the error happen again on a much larger tar. It happens more intermittently, but still happens. I don&apos;t think this fixes it.&lt;/p&gt;</comment>
                            <comment id="17821879" author="garydgregory" created="Wed, 28 Feb 2024 22:05:43 +0000"  >&lt;p&gt;Hello &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cosmin79&quot; class=&quot;user-hover&quot; rel=&quot;cosmin79&quot;&gt;cosmin79&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;What happens if you change the &lt;tt&gt;TarArchiveInputStream&lt;/tt&gt; constructor to use the smallest buffers:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&#160;TarArchiveInputStream tarInputStream = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; TarArchiveInputStream(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; BufferedInputStream(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; GZIPInputStream(inputStream)),
TarConstants.DEFAULT_RCDSIZE, TarConstants.DEFAULT_RCDSIZE)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;?&lt;/p&gt;

&lt;p&gt;Note that our constants are misnamed. If you look at the tar.h file, you&apos;ll see a constant called &lt;tt&gt;BLOCKSIZE&lt;/tt&gt; defined as &lt;tt&gt;512&lt;/tt&gt;, but in our code we call this &lt;tt&gt;DEFAULT_RCDSIZE&lt;/tt&gt; and we have a &lt;tt&gt;DEFAULT_BLKSIZE&lt;/tt&gt; defined as &lt;tt&gt;DEFAULT_RCDSIZE * 20&lt;/tt&gt;. See &lt;tt&gt;TarConstants&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;What might be happening is that this test surfaces (maybe) an issue that&apos;s been there all along and that we are only now seeing. Either due to the above confusion or perhaps something like this: Under more load, the underlying input stream serves fewer (or more) bytes into buffers and this issue only happens when input is &quot;chunked&quot; into unlucky groups. Recall that when you ask a given number of bytes from an input stream, you are not guaranteed to get all bytes in one call. All this code is very much dependent on reading groups of bytes of certain size, skipping some regions, and then expecting data to be layed out a specific way.&lt;br/&gt;
&#160;&lt;/p&gt;</comment>
                            <comment id="17821892" author="garydgregory" created="Wed, 28 Feb 2024 23:23:39 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cosmin79&quot; class=&quot;user-hover&quot; rel=&quot;cosmin79&quot;&gt;cosmin79&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;BTW how big is the new file that has an issue?&lt;/p&gt;</comment>
                            <comment id="17822626" author="JIRAUSER304399" created="Fri, 1 Mar 2024 16:02:10 +0000"  >&lt;p&gt;That&apos;s an interesting theory. So with the above, the block size becomes 512, which divides the default buffer size for&#160;BufferedInputStream (8192). Unfortunately, I&apos;ve just tried it out and I&apos;m hitting the same issue. It&apos;s a tgz around 10MB in size.&lt;/p&gt;

&lt;p&gt;Given that I&apos;m creating new TarArchiveInputStream objects every time, I wouldn&apos;t expect any contention on those buffers actually. Is there some sort of shared state between objects by default ? Similarly, with the larger tar, things work correctly on 1.25.0&lt;/p&gt;</comment>
                            <comment id="17822634" author="garydgregory" created="Fri, 1 Mar 2024 16:23:20 +0000"  >&lt;p&gt;I don&apos;t see any shared state, aside from constants obviously, but that would be read-only anyway. I&apos;d like to figure this out before I prepare a release candidate for 1.26.1...&lt;/p&gt;</comment>
                            <comment id="17822644" author="JIRAUSER304399" created="Fri, 1 Mar 2024 16:44:37 +0000"  >&lt;p&gt;I&apos;ve done a binary search on the master branch for the first commit where my test fails. Looks like it&apos;s this one &lt;a href=&quot;https://github.com/apache/commons-compress/commit/856a540d3eeb463527c509853f4d205f4adc272f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-compress/commit/856a540d3eeb463527c509853f4d205f4adc272f&lt;/a&gt; . If my test is run on the commit just before it, it passes. From that, it starts failing.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I&apos;ve just played a bit more on that commit linked above where things starting failing. If I revert changes to the following 2 files, my test passes:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
git checkout 0c9f16e43 -- src/main/java/org/apache/commons/compress/archivers/tar/TarArchiveInputStream.java
git checkout 0c9f16e43 -- src/main/java/org/apache/commons/compress/utils/IOUtils.java &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;From reading the code, it looks like maybe there are some differences between the commons.io `IOUtils.skip()` and the previous utils implementation. Looks like there are some static buffers in both implementations - although I&apos;m not sure what are the intended semantics for them.&lt;/p&gt;</comment>
                            <comment id="17822697" author="garydgregory" created="Fri, 1 Mar 2024 19:38:35 +0000"  >&lt;p&gt;Thank your &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cosmin79&quot; class=&quot;user-hover&quot; rel=&quot;cosmin79&quot;&gt;cosmin79&lt;/a&gt;&#160;I&apos;ll take a look.&lt;/p&gt;</comment>
                            <comment id="17822725" author="garydgregory" created="Fri, 1 Mar 2024 23:27:41 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cosmin79&quot; class=&quot;user-hover&quot; rel=&quot;cosmin79&quot;&gt;cosmin79&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;Thank you for your help on this one! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Fixed in git master and snapshot builds in &lt;a href=&quot;https://repository.apache.org/content/repositories/snapshots/org/apache/commons/commons-compress/1.26.1-SNAPSHOT/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/repositories/snapshots/org/apache/commons/commons-compress/1.26.1-SNAPSHOT/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Please verify git master or a snapshot build.&lt;/p&gt;

&lt;p&gt;I should be able to create a release candidate tomorrow or the next day (over the weekend basically).&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17822726" author="JIRAUSER304399" created="Fri, 1 Mar 2024 23:39:34 +0000"  >&lt;p&gt;Hey. The master branch looks very promising, thanks. I&apos;ll keep an eye out for the release.&lt;/p&gt;</comment>
                            <comment id="17823583" author="wilx" created="Tue, 5 Mar 2024 12:10:39 +0000"  >&lt;p&gt;This defect is a real pain. We had to downgrade the component to work around it. I hope new release is coming soon.&lt;/p&gt;</comment>
                            <comment id="17823589" author="garydgregory" created="Tue, 5 Mar 2024 12:27:21 +0000"  >&lt;p&gt;Hello &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=wilx&quot; class=&quot;user-hover&quot; rel=&quot;wilx&quot;&gt;wilx&lt;/a&gt;&lt;br/&gt;
I could create a release candidate now but I would prefer to get a unit test for &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-661&quot; title=&quot;ArchiveInputStream markSupported should always return false&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-661&quot;&gt;&lt;del&gt;COMPRESS-661&lt;/del&gt;&lt;/a&gt; to see if I can fix it without creating a regression. &lt;/p&gt;</comment>
                            <comment id="17824836" author="JIRAUSER304547" created="Fri, 8 Mar 2024 16:56:57 +0000"  >&lt;p&gt;hello!&lt;/p&gt;

&lt;p&gt;I can see &lt;a href=&quot;https://github.com/apache/commons-compress/releases/tag/commons-compress-1.26.1-RC1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;1.26.1-RC1&lt;/a&gt; was released 3 days ago; is there a date for the general availability of 1.26.1 ?&lt;/p&gt;

&lt;p&gt;Thank you!&lt;/p&gt;</comment>
                            <comment id="17824839" author="garydgregory" created="Fri, 8 Mar 2024 17:41:09 +0000"  >&lt;p&gt;See &lt;a href=&quot;https://lists.apache.org/thread/ymqbqxvft9j209j93l3cgw4z83f2pkr8&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://lists.apache.org/thread/ymqbqxvft9j209j93l3cgw4z83f2pkr8&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 35 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1nloo:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>