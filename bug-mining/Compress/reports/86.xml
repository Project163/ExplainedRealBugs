<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:30:06 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[COMPRESS-181] Tar files created by AIX native tar, and which contain symlinks, cannot be read by TarArchiveInputStream</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-181</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;A simple tar file created on AIX using the native (&lt;tt&gt;/usr/bin/tar&lt;/tt&gt; tar utility) &lt;b&gt;and&lt;/b&gt; which contains a symbolic link, cannot be loaded by TarArchiveInputStream:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.io.IOException: Error detected parsing the header
	at org.apache.commons.compress.archivers.tar.TarArchiveInputStream.getNextTarEntry(TarArchiveInputStream.java:201)
	at Extractor.extract(Extractor.java:13)
	at Extractor.main(Extractor.java:28)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.apache.tools.ant.taskdefs.ExecuteJava.run(ExecuteJava.java:217)
	at org.apache.tools.ant.taskdefs.ExecuteJava.execute(ExecuteJava.java:152)
	at org.apache.tools.ant.taskdefs.Java.run(Java.java:771)
	at org.apache.tools.ant.taskdefs.Java.executeJava(Java.java:221)
	at org.apache.tools.ant.taskdefs.Java.executeJava(Java.java:135)
	at org.apache.tools.ant.taskdefs.Java.execute(Java.java:108)
	at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
	at org.apache.tools.ant.Task.perform(Task.java:348)
	at org.apache.tools.ant.Target.execute(Target.java:390)
	at org.apache.tools.ant.Target.performTasks(Target.java:411)
	at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1399)
	at org.apache.tools.ant.Project.executeTarget(Project.java:1368)
	at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)
	at org.apache.tools.ant.Project.executeTargets(Project.java:1251)
	at org.apache.tools.ant.Main.runBuild(Main.java:809)
	at org.apache.tools.ant.Main.startAnt(Main.java:217)
	at org.apache.tools.ant.launch.Launcher.run(Launcher.java:280)
	at org.apache.tools.ant.launch.Launcher.main(Launcher.java:109)
Caused by: java.lang.IllegalArgumentException: Invalid byte 0 at offset 0 in &apos;{NUL}1722000726 &apos; len=12
	at org.apache.commons.compress.archivers.tar.TarUtils.parseOctal(TarUtils.java:99)
	at org.apache.commons.compress.archivers.tar.TarArchiveEntry.parseTarHeader(TarArchiveEntry.java:819)
	at org.apache.commons.compress.archivers.tar.TarArchiveEntry.&amp;lt;init&amp;gt;(TarArchiveEntry.java:314)
	at org.apache.commons.compress.archivers.tar.TarArchiveInputStream.getNextTarEntry(TarArchiveInputStream.java:199)
	... 29 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Tested with 1.2 and the 1.4 nightly build from Feb 23 (&lt;tt&gt;Implementation-Build: trunk@r1292625; 2012-02-23 03:20:30+0000&lt;/tt&gt;)&lt;/p&gt;</description>
                <environment>&lt;p&gt;AIX 5.3&lt;/p&gt;</environment>
        <key id="12544283">COMPRESS-181</key>
            <summary>Tar files created by AIX native tar, and which contain symlinks, cannot be read by TarArchiveInputStream</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="rjclark">Robert Clark</reporter>
                        <labels>
                    </labels>
                <created>Mon, 27 Feb 2012 17:48:12 +0000</created>
                <updated>Fri, 2 Mar 2012 20:01:49 +0000</updated>
                            <resolved>Fri, 2 Mar 2012 20:01:49 +0000</resolved>
                                    <version>1.2</version>
                    <version>1.3</version>
                                    <fixVersion>1.4</fixVersion>
                                    <component>Archivers</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13217327" author="rjclark" created="Mon, 27 Feb 2012 17:49:28 +0000"  >&lt;p&gt;An example tar file, containing a symbolic link, created by the AIX native tar utility&lt;/p&gt;</comment>
                            <comment id="13217827" author="sebb@apache.org" created="Tue, 28 Feb 2012 02:06:02 +0000"  >&lt;p&gt;The problem field is the modification time for the symbolic link, which Compress expects to be either all null or valid octal with trailing null/space.&lt;/p&gt;

&lt;p&gt;Note: 7zip reads the file OK but complains that there is data after the end of the archive.&lt;br/&gt;
It treats the link field as having no mtime.&lt;/p&gt;

&lt;p&gt;I&apos;ve yet to find any documentation that says a leading null is allowed.&lt;br/&gt;
Perhaps AIX tar is being lazy and failing to null the whole mtime field (which Compress could handle).&lt;/p&gt;</comment>
                            <comment id="13218073" author="bodewig" created="Tue, 28 Feb 2012 11:19:23 +0000"  >&lt;p&gt;GNU tar extracts it with a date/time of 1978-02-15 08:55 - which more or less looks as if it had translated the leading null to an ASCII 0 (and it looks as if that was supposed to be an ASCII 1 to match the timestamp of the dir).&lt;/p&gt;
</comment>
                            <comment id="13218093" author="bodewig" created="Tue, 28 Feb 2012 12:28:13 +0000"  >&lt;p&gt;GNU tar from_header in list.c contains a workaround for this case:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;  /* Accommodate buggy tar of unknown vintage, which outputs leading
     NUL if the previous field overflows.  */
  where += !*where;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;this basically skips the first byte if it is a binary 0.&lt;/p&gt;</comment>
                            <comment id="13218133" author="sebb@apache.org" created="Tue, 28 Feb 2012 13:05:57 +0000"  >&lt;p&gt;I don&apos;t think the previous field has overflowed in this case - it&apos;s all ascii &apos;0&apos;.&lt;/p&gt;

&lt;p&gt;Not sure that the GNU tar approach is sensible as the time value is then meaningless.&lt;br/&gt;
I think it would be better to skip the entire field.&lt;/p&gt;

&lt;p&gt;But do we just skip the field (as if it were all null), or skip it only on &quot;non-strict&quot; mode, or perhaps generate some kind of warning?&lt;/p&gt;</comment>
                            <comment id="13218198" author="bodewig" created="Tue, 28 Feb 2012 14:09:20 +0000"  >&lt;p&gt;It doesn&apos;t look like an overflow was the reason but if you look at the timestamp it certainly reads as if the first byte was a binary 0 by accident (if you put an ASCII 1 in there it is identical to the timestamp of the directory).&lt;/p&gt;

&lt;p&gt;In any case the resulting timestamp is not what it used to be, so using any other timestamp would be as valid as trying to parse the rest.&lt;/p&gt;</comment>
                            <comment id="13218225" author="sebb@apache.org" created="Tue, 28 Feb 2012 14:34:12 +0000"  >&lt;p&gt;I agree - it looks like the first byte was set to null accidentally, or possibly the intention was to invalidate the stamp.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;In any case the resulting timestamp is not what it used to be, so using any other timestamp would be as valid as trying to parse the rest.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Sorry, I don&apos;t follow.&lt;/p&gt;

&lt;p&gt;I&apos;m suggesting that using the corrupted timestamp is worse than ignoring it by treating it as all nulls.&lt;/p&gt;</comment>
                            <comment id="13218245" author="bodewig" created="Tue, 28 Feb 2012 14:54:07 +0000"  >&lt;p&gt;We don&apos;t really have an option to ignore a timestamp unless we allow ArchiveEntry#getLastModifiedDate to return null.&lt;/p&gt;

&lt;p&gt;What I was trying to say is it doesn&apos;t matter much which timestamp we return as any choice is wrong.  Returning the equivalent of a 0 timestamp is fine with me.  Unfortunately we don&apos;t have an infrastructure for warnings (would have been good for &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-176&quot; title=&quot;ArchiveInputStream#getNextEntry(): Problems with WinZip directories with Umlauts&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-176&quot;&gt;&lt;del&gt;COMPRESS-176&lt;/del&gt;&lt;/a&gt; as well), something for an API redesign in 2.0, I guess.&lt;/p&gt;</comment>
                            <comment id="13218258" author="sebb@apache.org" created="Tue, 28 Feb 2012 15:12:03 +0000"  >&lt;p&gt;OK, let&apos;s return the timestamp as 0.&lt;br/&gt;
This will presumably display as 1970-01-01 00:00.&lt;/p&gt;</comment>
                            <comment id="13219982" author="bodewig" created="Thu, 1 Mar 2012 12:03:32 +0000"  >&lt;p&gt;Robert, could you delete and re-add the attachment, granting the ASF a license to include it this time?  That way we could add the tar to our testsuite.&lt;/p&gt;</comment>
                            <comment id="13220409" author="rjclark" created="Thu, 1 Mar 2012 21:57:26 +0000"  >&lt;p&gt;Re-uploaded example archive, with license grant so it can be included in the tests for the project.&lt;/p&gt;</comment>
                            <comment id="13221223" author="bodewig" created="Fri, 2 Mar 2012 20:01:49 +0000"  >&lt;p&gt;fixed with svn revision 1296420&lt;/p&gt;

&lt;p&gt;Thanks for the testcase&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12544770">COMPRESS-182</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12516740" name="simple-aix-native-tar.tar" size="10240" author="rjclark" created="Thu, 1 Mar 2012 21:57:26 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>229520</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 38 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0b4an:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>62808</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>