<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:29:04 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[COMPRESS-11] Ar doesn&apos;t delete correct</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-11</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;When working on the Testcases i figured out that a deletion from an Ar Archive is not as successful as it look at first glance.&lt;br/&gt;
For example: my bla.ar file contains test1.xml and test2.xml. I delete test2.xml&lt;/p&gt;

&lt;p&gt;The &quot;getNextEntry&quot; Method just delivers test1.xml. Looks correct.&lt;/p&gt;

&lt;p&gt;But checking the result file at commandline brings the following:&lt;/p&gt;

&lt;p&gt;$&amp;gt; ar -t /tmp/dir26673/bla.ar&lt;br/&gt;
test1.xml&lt;br/&gt;
test2.xml&lt;/p&gt;

&lt;p&gt;vi shows me that there is still the test2.xml entry in the archive,&lt;br/&gt;
even when getNextEntry returns null.&lt;/p&gt;

&lt;p&gt;Deleting test2.xml and adding test.txt afterward brings the following:&lt;/p&gt;

&lt;p&gt;$&amp;gt; ar -t /tmp/dir24825/bla.ar&lt;br/&gt;
test.txt&lt;br/&gt;
ar: /tmp/dir24825/bla.ar: Inappropriate file type or format&lt;/p&gt;</description>
                <environment></environment>
        <key id="12415978">COMPRESS-11</key>
            <summary>Ar doesn&apos;t delete correct</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bodewig">Stefan Bodewig</assignee>
                                    <reporter username="grobmeier">Christian Grobmeier</reporter>
                        <labels>
                    </labels>
                <created>Tue, 3 Mar 2009 07:10:25 +0000</created>
                <updated>Tue, 2 May 2023 17:11:26 +0000</updated>
                            <resolved>Mon, 30 Mar 2009 16:34:34 +0000</resolved>
                                                    <fixVersion>1.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12690107" author="tcurdt" created="Fri, 27 Mar 2009 21:16:25 +0000"  >&lt;p&gt;Problem is that with&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;aos.putArchiveEntry(entry);
IOUtils.copy(ais, aos);
aos.closeArchiveEntry();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;the copy does not stop at the entry boundary. So the above also copies other entries.&lt;/p&gt;</comment>
                            <comment id="12690163" author="sebb@apache.org" created="Sat, 28 Mar 2009 02:42:20 +0000"  >&lt;p&gt;Just to expand on the previous comment: &lt;/p&gt;

&lt;p&gt;The problem is that the ArArchiveInputStream does not break the stream into chunks - the read() methods should report EOF for each entry; getNextEntry() then allows read() to continue to the end of the new entry.&lt;/p&gt;

&lt;p&gt;BTW, all three read() methods update the &quot;offset&quot; variable - it looks like this is a mistake.&lt;/p&gt;</comment>
                            <comment id="12693430" author="grobmeier" created="Sat, 28 Mar 2009 12:34:28 +0000"  >&lt;p&gt;Here is a patch which respects the chunks.&lt;br/&gt;
Its not perfect, but the Ar-Testcase runs. However, there is still an error in ChangeSetTestCase, but this can happen due to a TestCase problem.&lt;/p&gt;

&lt;p&gt;I will apply this when I have my account. Please have a review here&lt;/p&gt;

&lt;p&gt;Cheers,&lt;/p&gt;</comment>
                            <comment id="12693441" author="sebb@apache.org" created="Sat, 28 Mar 2009 14:05:42 +0000"  >&lt;p&gt;The method public int read(byte b[]) could now be deleted, as it now just does what the parent method does.&lt;/p&gt;

&lt;p&gt;The method read() does not do any checking for end of entry; probably best to replace it with a call to read(byte[] b, int off, int len);&lt;/p&gt;</comment>
                            <comment id="12693827" author="bodewig" created="Mon, 30 Mar 2009 16:34:34 +0000"  >&lt;p&gt;svn revision #760032&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12404053" name="patch-ar-improvement.txt" size="6291" author="cgrobmeier" created="Sat, 28 Mar 2009 12:34:28 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>110540</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 34 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0tfqf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>169858</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>