<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:29:57 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[COMPRESS-163] Unable to extract a file larger than 8GB from a Posix-format tar archive</title>
                <link>https://issues.apache.org/jira/browse/COMPRESS-163</link>
                <project id="12310904" key="COMPRESS">Commons Compress</project>
                    <description>&lt;p&gt;An attempt to read a posix-format tar archive containing a file in excess of 8^11 bytes in size will fail with a &quot;Size out of range&quot; illegal argument exception.&lt;/p&gt;</description>
                <environment>&lt;p&gt;The tar archive used for testing was created by GNU tar, but the problem will occur with any Posix-formatted tar file containing files over 8GB in size.&lt;/p&gt;</environment>
        <key id="12533737">COMPRESS-163</key>
            <summary>Unable to extract a file larger than 8GB from a Posix-format tar archive</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="kodis">John Kodis</reporter>
                        <labels>
                    </labels>
                <created>Sat, 3 Dec 2011 16:56:26 +0000</created>
                <updated>Thu, 8 Dec 2011 14:08:10 +0000</updated>
                            <resolved>Wed, 7 Dec 2011 11:36:39 +0000</resolved>
                                    <version>1.3</version>
                                    <fixVersion>1.4</fixVersion>
                                    <component>Compressors</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="86400">24h</timeoriginalestimate>
                            <timeestimate seconds="86400">24h</timeestimate>
                                        <comments>
                            <comment id="13162179" author="kodis" created="Sat, 3 Dec 2011 16:59:36 +0000"  >&lt;p&gt;An attempt to read a posix-format tar archive containing a file in excess of 8^11 bytes in size will fail with a &quot;Size out of range&quot; illegal argument exception.  We correct this by dropping the test for a too-large value in the TarArchiveEntry.setSize method, and making the corresponding modifications to the testMaxFileSize() junit test.&lt;/p&gt;

&lt;p&gt;Finally, in the getNextTarEntry method, we set the entrySize instance variable an additional time to pick up any larger size that may have been obtained as a result of processing any Posix Pax headers.&lt;/p&gt;</comment>
                            <comment id="13163640" author="bodewig" created="Tue, 6 Dec 2011 15:22:16 +0000"  >&lt;p&gt;I may be missing it, but is the code that actaully reads the PAX header and applies the size read available as well?&lt;/p&gt;</comment>
                            <comment id="13163674" author="kodis" created="Tue, 6 Dec 2011 16:19:06 +0000"  >&lt;p&gt;Yes, the Pax headers are read in TarArchiveInputStream.paxHeaders.  The pax header keyword=value pairs are first read into a hash table, and the table is subsequently scanned for values (namely, path, linkpath, uid, uname, gid, gname, and size) which are contained in a TarArchiveEntry.  If found, the values in the Pax header hash table are used to supersede those in the current TarArchiveEntry.&lt;/p&gt;

&lt;p&gt;Also, on reviewing this section of code, I noticed that there&apos;s a minor error.  The fields in the Pax header are stored as a length, a space character, the field name, an equals sign, the field value, and a newline character.  So, for example &quot;30 atime=1321711775.972059463\n&quot;.  The code which extracts the keyword=value pairs ignores the length field and instead looks for the newline character to mark the end of the value field.  This is okay for numeric values, but means that any path or linkpath values which contain a newline character will be misinterpreted.  So although the code isn&apos;t strictly correct, it&apos;s unlikely to cause a problem in practice. &lt;/p&gt;</comment>
                            <comment id="13163814" author="bodewig" created="Tue, 6 Dec 2011 20:36:27 +0000"  >&lt;p&gt;Sorry, I somehow missed the fact that we already had code that was parsing PAX headers.&lt;/p&gt;

&lt;p&gt;I agree the code should be corrected.&lt;/p&gt;</comment>
                            <comment id="13164333" author="bodewig" created="Wed, 7 Dec 2011 11:36:39 +0000"  >&lt;p&gt;The setSize Method is also used when creating entries prior to writing them and as long as Compress is unable to write archives with entries bigger than 8GiB it is better to keep the exception.&lt;/p&gt;

&lt;p&gt;Therefore I opted to add a new setter method with svn revision 1211393&lt;/p&gt;</comment>
                            <comment id="13165222" author="bodewig" created="Thu, 8 Dec 2011 14:08:10 +0000"  >&lt;p&gt;After applying John&apos;s other patches from &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-16&quot; title=&quot;unable to extract a TAR file that contains an entry which is 10 GB in size&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-16&quot;&gt;&lt;del&gt;COMPRESS-16&lt;/del&gt;&lt;/a&gt; with 1211892 for &lt;a href=&quot;https://issues.apache.org/jira/browse/COMPRESS-165&quot; title=&quot;Support writing entries &amp;gt; 8GiB in tar&quot; class=&quot;issue-link&quot; data-issue-key=&quot;COMPRESS-165&quot;&gt;&lt;del&gt;COMPRESS-165&lt;/del&gt;&lt;/a&gt; it now is the output stream that throws if a big file is added (and star extensions haven&apos;t been enabled).  So I&apos;ve removed the adjustSize again and changed setSize as this patch suggested.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12505998" name="0003-Allow-reading-large-files-from-Posix-tar-archives.patch" size="3387" author="kodis" created="Sat, 3 Dec 2011 16:59:35 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>219464</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 50 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0b4cn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>62817</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>