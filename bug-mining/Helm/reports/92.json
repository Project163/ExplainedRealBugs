{"url":"https://api.github.com/repos/helm/helm/issues/10428","repository_url":"https://api.github.com/repos/helm/helm","labels_url":"https://api.github.com/repos/helm/helm/issues/10428/labels{/name}","comments_url":"https://api.github.com/repos/helm/helm/issues/10428/comments","events_url":"https://api.github.com/repos/helm/helm/issues/10428/events","html_url":"https://github.com/helm/helm/issues/10428","id":1070580661,"node_id":"I_kwDOApspmc4_z8O1","number":10428,"title":"Passing json objects/arrays as values through --set","user":{"login":"lucadirocco","id":44836068,"node_id":"MDQ6VXNlcjQ0ODM2MDY4","avatar_url":"https://avatars.githubusercontent.com/u/44836068?v=4","gravatar_id":"","url":"https://api.github.com/users/lucadirocco","html_url":"https://github.com/lucadirocco","followers_url":"https://api.github.com/users/lucadirocco/followers","following_url":"https://api.github.com/users/lucadirocco/following{/other_user}","gists_url":"https://api.github.com/users/lucadirocco/gists{/gist_id}","starred_url":"https://api.github.com/users/lucadirocco/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lucadirocco/subscriptions","organizations_url":"https://api.github.com/users/lucadirocco/orgs","repos_url":"https://api.github.com/users/lucadirocco/repos","events_url":"https://api.github.com/users/lucadirocco/events{/privacy}","received_events_url":"https://api.github.com/users/lucadirocco/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":562687520,"node_id":"MDU6TGFiZWw1NjI2ODc1MjA=","url":"https://api.github.com/repos/helm/helm/labels/feature","name":"feature","color":"0052cc","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/helm/helm/milestones/120","html_url":"https://github.com/helm/helm/milestone/120","labels_url":"https://api.github.com/repos/helm/helm/milestones/120/labels","id":7973916,"node_id":"MI_kwDOApspmc4Aeawc","number":120,"title":"3.10.0","description":"","creator":{"login":"mattfarina","id":62991,"node_id":"MDQ6VXNlcjYyOTkx","avatar_url":"https://avatars.githubusercontent.com/u/62991?v=4","gravatar_id":"","url":"https://api.github.com/users/mattfarina","html_url":"https://github.com/mattfarina","followers_url":"https://api.github.com/users/mattfarina/followers","following_url":"https://api.github.com/users/mattfarina/following{/other_user}","gists_url":"https://api.github.com/users/mattfarina/gists{/gist_id}","starred_url":"https://api.github.com/users/mattfarina/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mattfarina/subscriptions","organizations_url":"https://api.github.com/users/mattfarina/orgs","repos_url":"https://api.github.com/users/mattfarina/repos","events_url":"https://api.github.com/users/mattfarina/events{/privacy}","received_events_url":"https://api.github.com/users/mattfarina/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":1,"closed_issues":25,"state":"closed","created_at":"2022-05-12T16:52:50Z","updated_at":"2025-06-05T15:04:31Z","due_on":"2022-09-14T07:00:00Z","closed_at":"2022-10-03T13:31:46Z"},"comments":11,"created_at":"2021-12-03T13:15:20Z","updated_at":"2022-08-31T20:40:21Z","closed_at":"2022-08-31T20:40:21Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"I would like to set  json objects/arrays as values through --set.\r\nAccording to https://helm.sh/docs/intro/using_helm/#the-format-and-limitations-of---set\r\ncurrently that is not possible (with the exception of arrays of scalar types) \r\n\r\nAs example, let's  take the following excerpt from my values.yaml file:\r\n\r\n```\r\nspec:\r\n  ....\r\n  sNssaiUpfInfoList:\r\n  - sNssai:\r\n      sd: 0002f0\r\n      sst: 1\r\n    dnnUpfInfoList:\r\n    - dnn: intranet\r\n      ipv4AddressRanges:\r\n      - end: 9.9.9.94\r\n        start: 9.9.9.65\r\n  ....\r\n```\r\n\r\nIn the template there is all the \"range\" based logic for slices and maps, to correctly render sNssaiUpfInfoList from .Values.spec.sNssaiUpfInfoList, so further elements could be added to each of the above arrays and they would appear in the final manifest generated by helm.\r\n\r\nIn order to set sNssaiUpfInfoList above, currently I have to set the individual leaf attributes of the data structure, by providing the following with --set  on command line:\r\n\r\n`'spec.sNssaiUpfInfoList[0].sNssai.sd=0002f0,spec.sNssaiUpfInfoList[0].sNssai.sst=1,spec.sNssaiUpfInfoList[0].dnnUpfInfoList[0].dnn=intranet, spec.sNssaiUpfInfoList[0].dnnUpfInfoList[0].ipv4AddressRanges[0].end=9.9.9.94, spec.sNssaiUpfInfoList[0].dnnUpfInfoList[0].ipv4AddressRanges[0].start=9.9.9.65'\r\n`\r\n\r\nThis is not very flexible because extra logic is required to translate the data structure into individual key=val for each of its leaf attributes. Moreover, the arrays are dynamic, and quite a long list of key=val could be generated.\r\n\r\nI think it would be much simpler if we had an option to set a complete json array/object on the command line.  \r\nFor example, to set sNssaiUpfInfoList above, we could use something like:\r\n\r\n`--set-json  'spec.sNssaiUpfInfoList=[{\"sNssai\":{\"sd\":\"0002f0\",\"sst\":1},\"dnnUpfInfoList\":[{\"dnn\":\"intranet\",\"ipv4AddressRanges\":[{\"end\":\"9.9.9.94\",\"start\":\"9.9.9.65\"}]}]}]'\r\n`\r\n\r\nIs it possible to add this option to helm?\r\n\r\n","closed_by":{"login":"hickeyma","id":14892004,"node_id":"MDQ6VXNlcjE0ODkyMDA0","avatar_url":"https://avatars.githubusercontent.com/u/14892004?v=4","gravatar_id":"","url":"https://api.github.com/users/hickeyma","html_url":"https://github.com/hickeyma","followers_url":"https://api.github.com/users/hickeyma/followers","following_url":"https://api.github.com/users/hickeyma/following{/other_user}","gists_url":"https://api.github.com/users/hickeyma/gists{/gist_id}","starred_url":"https://api.github.com/users/hickeyma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hickeyma/subscriptions","organizations_url":"https://api.github.com/users/hickeyma/orgs","repos_url":"https://api.github.com/users/hickeyma/repos","events_url":"https://api.github.com/users/hickeyma/events{/privacy}","received_events_url":"https://api.github.com/users/hickeyma/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/helm/helm/issues/10428/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/helm/helm/issues/10428/timeline","performed_via_github_app":null,"state_reason":"completed"}