{"url":"https://api.github.com/repos/helm/helm/issues/7748","repository_url":"https://api.github.com/repos/helm/helm","labels_url":"https://api.github.com/repos/helm/helm/issues/7748/labels{/name}","comments_url":"https://api.github.com/repos/helm/helm/issues/7748/comments","events_url":"https://api.github.com/repos/helm/helm/issues/7748/events","html_url":"https://github.com/helm/helm/issues/7748","id":577856704,"node_id":"MDU6SXNzdWU1Nzc4NTY3MDQ=","number":7748,"title":"helm v3 packaging charts differently on windows and linux (breaks artifactory)","user":{"login":"meurig","id":507747,"node_id":"MDQ6VXNlcjUwNzc0Nw==","avatar_url":"https://avatars.githubusercontent.com/u/507747?v=4","gravatar_id":"","url":"https://api.github.com/users/meurig","html_url":"https://github.com/meurig","followers_url":"https://api.github.com/users/meurig/followers","following_url":"https://api.github.com/users/meurig/following{/other_user}","gists_url":"https://api.github.com/users/meurig/gists{/gist_id}","starred_url":"https://api.github.com/users/meurig/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/meurig/subscriptions","organizations_url":"https://api.github.com/users/meurig/orgs","repos_url":"https://api.github.com/users/meurig/repos","events_url":"https://api.github.com/users/meurig/events{/privacy}","received_events_url":"https://api.github.com/users/meurig/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":778135666,"node_id":"MDU6TGFiZWw3NzgxMzU2NjY=","url":"https://api.github.com/repos/helm/helm/labels/bug","name":"bug","color":"e11d21","default":true,"description":"Categorizes issue or PR as related to a bug."},{"id":926755770,"node_id":"MDU6TGFiZWw5MjY3NTU3NzA=","url":"https://api.github.com/repos/helm/helm/labels/v3.x","name":"v3.x","color":"e82969","default":false,"description":"Issues and Pull Requests related to the major version v3"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2020-03-09T12:04:14Z","updated_at":"2020-03-12T14:20:00Z","closed_at":"2020-03-12T14:20:00Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"I'm trying to package a helm chart and deploy it to a private helm repo on artifactory 6.18.0.\r\n\r\nThis works fine if I package the chart on linux, but fails if the chart is packaged on windows.\r\n\r\nIt also works fine with charts packaged on windows with a v2 helm client, so it appears to be an issue introduced in helm v3.\r\n\r\nI can also see that the resultant tgz files are different by listing their contents with tar (note the backslashes):\r\n\r\nGood (linux or windows v2):\r\n```\r\n$ tar -tvf tds-proxy-1.0.0.tgz\r\n-rwxr-xr-x 0/0             129 2020-03-09 11:47 tds-proxy/Chart.yaml\r\n-rwxr-xr-x 0/0             195 2020-03-09 11:47 tds-proxy/values.yaml\r\n-rwxr-xr-x 0/0            1033 2020-03-09 11:47 tds-proxy/templates/deployment.yaml\r\n-rwxr-xr-x 0/0             547 2020-03-09 11:47 tds-proxy/templates/service.yaml\r\n-rwxr-xr-x 0/0             364 2020-03-09 11:47 tds-proxy/.helmignore\r\n```\r\n\r\nBad (helm v3 on windows):\r\n```\r\n$ tar -tvf tds-proxy-1.0.0.tgz\r\n-rw-r--r-- 0/0             129 2020-03-09 11:57 tds-proxy\\\\Chart.yaml\r\n-rw-r--r-- 0/0             195 2020-03-09 11:57 tds-proxy\\\\values.yaml\r\n-rw-r--r-- 0/0            1033 2020-03-09 11:57 tds-proxy\\\\templates\\\\deployment.yaml\r\n-rw-r--r-- 0/0             547 2020-03-09 11:57 tds-proxy\\\\templates\\\\service.yaml\r\n-rw-r--r-- 0/0             364 2020-03-09 11:57 tds-proxy\\\\.helmignore\r\n```\r\n\r\nThis has been [raised as an issue with artifactory](https://www.jfrog.com/jira/browse/RTFACT-21145), but I feel it's up to helm to package consistently irrespective of where helm package is run. This looks like a bug in the helm v3 windows client.\r\n\r\nOutput of `helm version`:\r\n`version.BuildInfo{Version:\"v3.1.1\", GitCommit:\"afe70585407b420d0097d07b21c47dc511525ac8\", GitTreeState:\"clean\", GoVersion:\"go1.13.8\"}`\r\n\r\nOutput of `kubectl version`:\r\n```\r\nClient Version: version.Info{Major:\"1\", Minor:\"17\", GitVersion:\"v1.17.2\", GitCommit:\"59603c6e503c87169aea6106f57b9f242f64df89\", GitTreeState:\"clean\", BuildDate:\"2020-01-18T23:30:10Z\", GoVersion:\"go1.13.5\", Compiler:\"gc\", Platform:\"windows/amd64\"}\r\nServer Version: version.Info{Major:\"1\", Minor:\"17\", GitVersion:\"v1.17.2\", GitCommit:\"59603c6e503c87169aea6106f57b9f242f64df89\", GitTreeState:\"clean\", BuildDate:\"2020-01-18T23:22:30Z\", GoVersion:\"go1.13.5\", Compiler:\"gc\", Platform:\"linux/amd64\"}\r\n```\r\n\r\nCloud Provider/Platform (AKS, GKE, Minikube etc.): \r\nnot relevant (bare metal ish)\r\n\r\n","closed_by":{"login":"mattfarina","id":62991,"node_id":"MDQ6VXNlcjYyOTkx","avatar_url":"https://avatars.githubusercontent.com/u/62991?v=4","gravatar_id":"","url":"https://api.github.com/users/mattfarina","html_url":"https://github.com/mattfarina","followers_url":"https://api.github.com/users/mattfarina/followers","following_url":"https://api.github.com/users/mattfarina/following{/other_user}","gists_url":"https://api.github.com/users/mattfarina/gists{/gist_id}","starred_url":"https://api.github.com/users/mattfarina/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mattfarina/subscriptions","organizations_url":"https://api.github.com/users/mattfarina/orgs","repos_url":"https://api.github.com/users/mattfarina/repos","events_url":"https://api.github.com/users/mattfarina/events{/privacy}","received_events_url":"https://api.github.com/users/mattfarina/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/helm/helm/issues/7748/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/helm/helm/issues/7748/timeline","performed_via_github_app":null,"state_reason":"completed"}