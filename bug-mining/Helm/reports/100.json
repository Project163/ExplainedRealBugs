{"url":"https://api.github.com/repos/helm/helm/issues/11712","repository_url":"https://api.github.com/repos/helm/helm","labels_url":"https://api.github.com/repos/helm/helm/issues/11712/labels{/name}","comments_url":"https://api.github.com/repos/helm/helm/issues/11712/comments","events_url":"https://api.github.com/repos/helm/helm/issues/11712/events","html_url":"https://github.com/helm/helm/issues/11712","id":1528850356,"node_id":"I_kwDOApspmc5bIGe0","number":11712,"title":"Broken Helm Rollback Command in v3.11.0-rc.1","user":{"login":"bschoenbach","id":58217025,"node_id":"MDQ6VXNlcjU4MjE3MDI1","avatar_url":"https://avatars.githubusercontent.com/u/58217025?v=4","gravatar_id":"","url":"https://api.github.com/users/bschoenbach","html_url":"https://github.com/bschoenbach","followers_url":"https://api.github.com/users/bschoenbach/followers","following_url":"https://api.github.com/users/bschoenbach/following{/other_user}","gists_url":"https://api.github.com/users/bschoenbach/gists{/gist_id}","starred_url":"https://api.github.com/users/bschoenbach/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bschoenbach/subscriptions","organizations_url":"https://api.github.com/users/bschoenbach/orgs","repos_url":"https://api.github.com/users/bschoenbach/repos","events_url":"https://api.github.com/users/bschoenbach/events{/privacy}","received_events_url":"https://api.github.com/users/bschoenbach/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":778135666,"node_id":"MDU6TGFiZWw3NzgxMzU2NjY=","url":"https://api.github.com/repos/helm/helm/labels/bug","name":"bug","color":"e11d21","default":true,"description":"Categorizes issue or PR as related to a bug."}],"state":"closed","locked":false,"assignee":{"login":"mattfarina","id":62991,"node_id":"MDQ6VXNlcjYyOTkx","avatar_url":"https://avatars.githubusercontent.com/u/62991?v=4","gravatar_id":"","url":"https://api.github.com/users/mattfarina","html_url":"https://github.com/mattfarina","followers_url":"https://api.github.com/users/mattfarina/followers","following_url":"https://api.github.com/users/mattfarina/following{/other_user}","gists_url":"https://api.github.com/users/mattfarina/gists{/gist_id}","starred_url":"https://api.github.com/users/mattfarina/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mattfarina/subscriptions","organizations_url":"https://api.github.com/users/mattfarina/orgs","repos_url":"https://api.github.com/users/mattfarina/repos","events_url":"https://api.github.com/users/mattfarina/events{/privacy}","received_events_url":"https://api.github.com/users/mattfarina/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"mattfarina","id":62991,"node_id":"MDQ6VXNlcjYyOTkx","avatar_url":"https://avatars.githubusercontent.com/u/62991?v=4","gravatar_id":"","url":"https://api.github.com/users/mattfarina","html_url":"https://github.com/mattfarina","followers_url":"https://api.github.com/users/mattfarina/followers","following_url":"https://api.github.com/users/mattfarina/following{/other_user}","gists_url":"https://api.github.com/users/mattfarina/gists{/gist_id}","starred_url":"https://api.github.com/users/mattfarina/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mattfarina/subscriptions","organizations_url":"https://api.github.com/users/mattfarina/orgs","repos_url":"https://api.github.com/users/mattfarina/repos","events_url":"https://api.github.com/users/mattfarina/events{/privacy}","received_events_url":"https://api.github.com/users/mattfarina/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/helm/helm/milestones/124","html_url":"https://github.com/helm/helm/milestone/124","labels_url":"https://api.github.com/repos/helm/helm/milestones/124/labels","id":8452042,"node_id":"MI_kwDOApspmc4AgPfK","number":124,"title":"3.11.0","description":"","creator":{"login":"hickeyma","id":14892004,"node_id":"MDQ6VXNlcjE0ODkyMDA0","avatar_url":"https://avatars.githubusercontent.com/u/14892004?v=4","gravatar_id":"","url":"https://api.github.com/users/hickeyma","html_url":"https://github.com/hickeyma","followers_url":"https://api.github.com/users/hickeyma/followers","following_url":"https://api.github.com/users/hickeyma/following{/other_user}","gists_url":"https://api.github.com/users/hickeyma/gists{/gist_id}","starred_url":"https://api.github.com/users/hickeyma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hickeyma/subscriptions","organizations_url":"https://api.github.com/users/hickeyma/orgs","repos_url":"https://api.github.com/users/hickeyma/repos","events_url":"https://api.github.com/users/hickeyma/events{/privacy}","received_events_url":"https://api.github.com/users/hickeyma/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":23,"state":"closed","created_at":"2022-09-23T10:08:36Z","updated_at":"2023-01-18T17:53:21Z","due_on":"2023-01-18T08:00:00Z","closed_at":"2023-01-18T17:53:21Z"},"comments":7,"created_at":"2023-01-11T11:11:27Z","updated_at":"2023-11-01T12:41:06Z","closed_at":"2023-01-13T16:57:37Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Output of  `helm version`: \r\nversion.BuildInfo{Version:\"v3.11.0-rc.1\", GitCommit:\"9d8fee155bd7e7d3c1390f4076d9271a1147dce5\", GitTreeState:\"clean\", GoVersion:\"go1.18.9\"}\r\n\r\nOutput of `kubectl version`:\r\nClient Version: version.Info{Major:\"1\", Minor:\"21\", GitVersion:\"v1.21.0\", GitCommit:\"cb303e613a121a29364f75cc67d3d580833a7479\", GitTreeState:\"clean\", BuildDate:\"2021-04-08T16:31:21Z\", GoVersion:\"go1.16.1\", Compiler:\"gc\", Platform:\"linux/amd64\"}\r\nServer Version: version.Info{Major:\"1\", Minor:\"23\", GitVersion:\"v1.23.12\", GitCommit:\"c6939792865ef0f70f92006081690d77411c8ed5\", GitTreeState:\"clean\", BuildDate:\"2022-09-21T12:13:07Z\", GoVersion:\"go1.17.13\", Compiler:\"gc\", Platform:\"linux/amd64\"}\r\n\r\nCloud Provider/Platform (AKS, GKE, Minikube etc.): On-Premise nutanix hardware\r\n\r\n**_Problem:_**\r\nhelm rollback cmd to latest release breaks the deployment. Hence, corresponding deployments are deleted...everythins is gone after rollback. Using older helm version v3.10.3 works picture perfect.....Below you will find the trerminal output\r\n\r\n--------------------------------\r\n1. BEFORE Rollback:\r\n--------------------------------\r\n/$:~/helm_3.11/linux-amd64$ helm history rost-webui -n dns\r\nREVISION\tUPDATED                 \tSTATUS    \tCHART           \tAPP VERSION            \tDESCRIPTION    \r\n...\r\n258     \tWed Jan 11 09:28:02 2023\tsuperseded\trost-webui-0.1.0\tprod-8f7e8a0e-742694699\tUpgrade complete\r\n\r\n/$ kubectl get pods -n dns\r\nNAME                                              READY   STATUS    RESTARTS      AGE\r\nrost-webui-764f4d6c84-6xdkx                       1/1     Running   0             9m1s\r\n\r\n--------------------------------\r\n2. PERFORM Rollback\r\n--------------------------------\r\n/$:~/helm_3.11/linux-amd64$ ./helm rollback rost-webui 258 -n dns\r\nRollback was a success! Happy Helming!\r\n\r\n--------------------------------\r\n3. AFTER Rollback:\r\n-------------------------------\r\n/$:~/helm_3.11/linux-amd64$ helm history rost-webui -n dns\r\nREVISION\tUPDATED                 \tSTATUS    \tCHART           \tAPP VERSION            \tDESCRIPTION\r\n...\r\n258     \tWed Jan 11 09:28:02 2023\tsuperseded\trost-webui-0.1.0\tprod-8f7e8a0e-742694699\tUpgrade complete\r\n259     \tWed Jan 11 09:34:07 1025\tsuperseded\trost-webui-0.1.0\tprod-8f7e8a0e-742694699\tRollback to 258\r\n\r\n/$ kubectl get pods -n dns\r\nNo resources found in dns namespace.\r\n\r\n","closed_by":{"login":"mattfarina","id":62991,"node_id":"MDQ6VXNlcjYyOTkx","avatar_url":"https://avatars.githubusercontent.com/u/62991?v=4","gravatar_id":"","url":"https://api.github.com/users/mattfarina","html_url":"https://github.com/mattfarina","followers_url":"https://api.github.com/users/mattfarina/followers","following_url":"https://api.github.com/users/mattfarina/following{/other_user}","gists_url":"https://api.github.com/users/mattfarina/gists{/gist_id}","starred_url":"https://api.github.com/users/mattfarina/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mattfarina/subscriptions","organizations_url":"https://api.github.com/users/mattfarina/orgs","repos_url":"https://api.github.com/users/mattfarina/repos","events_url":"https://api.github.com/users/mattfarina/events{/privacy}","received_events_url":"https://api.github.com/users/mattfarina/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/helm/helm/issues/11712/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/helm/helm/issues/11712/timeline","performed_via_github_app":null,"state_reason":"completed"}