{"url":"https://api.github.com/repos/helm/helm/issues/6116","repository_url":"https://api.github.com/repos/helm/helm","labels_url":"https://api.github.com/repos/helm/helm/issues/6116/labels{/name}","comments_url":"https://api.github.com/repos/helm/helm/issues/6116/comments","events_url":"https://api.github.com/repos/helm/helm/issues/6116/events","html_url":"https://github.com/helm/helm/issues/6116","id":474624749,"node_id":"MDU6SXNzdWU0NzQ2MjQ3NDk=","number":6116,"title":"Helm template throws stack overflow error","user":{"login":"dimitarKiryakov","id":20355672,"node_id":"MDQ6VXNlcjIwMzU1Njcy","avatar_url":"https://avatars.githubusercontent.com/u/20355672?v=4","gravatar_id":"","url":"https://api.github.com/users/dimitarKiryakov","html_url":"https://github.com/dimitarKiryakov","followers_url":"https://api.github.com/users/dimitarKiryakov/followers","following_url":"https://api.github.com/users/dimitarKiryakov/following{/other_user}","gists_url":"https://api.github.com/users/dimitarKiryakov/gists{/gist_id}","starred_url":"https://api.github.com/users/dimitarKiryakov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dimitarKiryakov/subscriptions","organizations_url":"https://api.github.com/users/dimitarKiryakov/orgs","repos_url":"https://api.github.com/users/dimitarKiryakov/repos","events_url":"https://api.github.com/users/dimitarKiryakov/events{/privacy}","received_events_url":"https://api.github.com/users/dimitarKiryakov/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":778135666,"node_id":"MDU6TGFiZWw3NzgxMzU2NjY=","url":"https://api.github.com/repos/helm/helm/labels/bug","name":"bug","color":"e11d21","default":true,"description":"Categorizes issue or PR as related to a bug."},{"id":926755770,"node_id":"MDU6TGFiZWw5MjY3NTU3NzA=","url":"https://api.github.com/repos/helm/helm/labels/v3.x","name":"v3.x","color":"e82969","default":false,"description":"Issues and Pull Requests related to the major version v3"},{"id":1580151847,"node_id":"MDU6TGFiZWwxNTgwMTUxODQ3","url":"https://api.github.com/repos/helm/helm/labels/v2.x","name":"v2.x","color":"8c49d8","default":false,"description":"Issues and Pull Requests related to the major version v2"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2019-07-30T14:37:43Z","updated_at":"2020-07-07T18:19:03Z","closed_at":"2020-07-07T18:19:03Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"**Describe the bug**\r\nWe have the following example values.yaml file for helm chart:\r\n```\r\ndashboards:\r\n clustersmonitoringjson:\r\n   {\r\n\r\n         \"select\": [\r\n            [\r\n              {\r\n                \"params\": [\r\n                  \"status\"\r\n                ],\r\n                \"type\": \"field\"\r\n              }\r\n            ]\r\n         ]\r\n    }\r\n```\r\nIf I want to pass them through `helm template  --set` command stack overflow error is thrown.\r\n\r\nHelm command:\r\n```\r\nhelm template . --namespace default --set dashboards.clustersmonitoringjson.select[0][0].params[0]=status --set dashboards.clustersmonitoringjson.select[0][0].type=field --name helmguestbook\r\n```\r\nError thrown:\r\n\r\n```\r\nruntime: goroutine stack exceeds 1000000000-byte limit\\nfatal error: stack overflow\\n\\nruntime stack:\\nruntime.throw(0x16a2c72, 0xe)\\n\\t/usr/local/go/src/runtime/panic.go:608 +0x72\\nruntime.newstack()\\n\\t/usr/local/go/src/runtime/stack.go:1008 +0x729\\nruntime.morestack()\\n\\t/usr/local/go/src/runtime/asm_amd64.s:429 +0x8f\\n\\ngoroutine 1 [running]:\\nruntime.efaceeq(0x1660160, 0x141ad00, 0x141ad00, 0x0)\\n\\t/usr/local/go/src/runtime/alg.go:218 +0x131 fp=0xc0209b0358 sp=0xc0209b0350 pc=0x403631\\nruntime.nilinterequal(0xc0209b0448, 0xc00047e848, 0xc5b27c6c1b7408fc)\\n\\t/usr/local/go/src/runtime/alg.go:216 +0x5d fp=0xc0209b0388 sp=0xc0209b0358 pc=0x4034ed\\nruntime.mapaccess2(0x14a80a0, 0xc000509530, 0xc0209b0448, 0x0, 0x0)\\n\\t/usr/local/go/src/runtime/map.go:479 +0x146 fp=0xc0209b03d0 sp=0xc0209b0388 pc=0x40d646\\nsync.(*Map).Load(0x2729c00, 0x1660160, 0x141ad\r\n```\r\n\r\nIt can be tested with any chart. This error does not depend on the chart itself.\r\nThe issue is not reproducible if parameters are separated by commas in one --set parameters. \r\n\r\n","closed_by":{"login":"bacongobbler","id":1360539,"node_id":"MDQ6VXNlcjEzNjA1Mzk=","avatar_url":"https://avatars.githubusercontent.com/u/1360539?v=4","gravatar_id":"","url":"https://api.github.com/users/bacongobbler","html_url":"https://github.com/bacongobbler","followers_url":"https://api.github.com/users/bacongobbler/followers","following_url":"https://api.github.com/users/bacongobbler/following{/other_user}","gists_url":"https://api.github.com/users/bacongobbler/gists{/gist_id}","starred_url":"https://api.github.com/users/bacongobbler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bacongobbler/subscriptions","organizations_url":"https://api.github.com/users/bacongobbler/orgs","repos_url":"https://api.github.com/users/bacongobbler/repos","events_url":"https://api.github.com/users/bacongobbler/events{/privacy}","received_events_url":"https://api.github.com/users/bacongobbler/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/helm/helm/issues/6116/reactions","total_count":4,"+1":4,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/helm/helm/issues/6116/timeline","performed_via_github_app":null,"state_reason":"completed"}