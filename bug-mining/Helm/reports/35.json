{"url":"https://api.github.com/repos/helm/helm/issues/7182","repository_url":"https://api.github.com/repos/helm/helm","labels_url":"https://api.github.com/repos/helm/helm/issues/7182/labels{/name}","comments_url":"https://api.github.com/repos/helm/helm/issues/7182/comments","events_url":"https://api.github.com/repos/helm/helm/issues/7182/events","html_url":"https://github.com/helm/helm/issues/7182","id":534296897,"node_id":"MDU6SXNzdWU1MzQyOTY4OTc=","number":7182,"title":"Helm fetch untar needs conflict management","user":{"login":"clintmoyer","id":19230462,"node_id":"MDQ6VXNlcjE5MjMwNDYy","avatar_url":"https://avatars.githubusercontent.com/u/19230462?v=4","gravatar_id":"","url":"https://api.github.com/users/clintmoyer","html_url":"https://github.com/clintmoyer","followers_url":"https://api.github.com/users/clintmoyer/followers","following_url":"https://api.github.com/users/clintmoyer/following{/other_user}","gists_url":"https://api.github.com/users/clintmoyer/gists{/gist_id}","starred_url":"https://api.github.com/users/clintmoyer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/clintmoyer/subscriptions","organizations_url":"https://api.github.com/users/clintmoyer/orgs","repos_url":"https://api.github.com/users/clintmoyer/repos","events_url":"https://api.github.com/users/clintmoyer/events{/privacy}","received_events_url":"https://api.github.com/users/clintmoyer/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":778135666,"node_id":"MDU6TGFiZWw3NzgxMzU2NjY=","url":"https://api.github.com/repos/helm/helm/labels/bug","name":"bug","color":"e11d21","default":true,"description":"Categorizes issue or PR as related to a bug."},{"id":926755770,"node_id":"MDU6TGFiZWw5MjY3NTU3NzA=","url":"https://api.github.com/repos/helm/helm/labels/v3.x","name":"v3.x","color":"e82969","default":false,"description":"Issues and Pull Requests related to the major version v3"},{"id":1580151847,"node_id":"MDU6TGFiZWwxNTgwMTUxODQ3","url":"https://api.github.com/repos/helm/helm/labels/v2.x","name":"v2.x","color":"8c49d8","default":false,"description":"Issues and Pull Requests related to the major version v2"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":10,"created_at":"2019-12-06T22:57:19Z","updated_at":"2021-04-07T21:19:24Z","closed_at":"2020-01-10T15:02:00Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Fetching and extracting charts to the local system does not currently warn the user when the chart name conflicts with an existing file or directory. Instead it has ambiguous behavior depending on the conflict.\r\n\r\nTwo ambiguous conflicts:\r\n\r\n1. File exists in `$PWD` with same name\r\n\r\n   Download fails with error message\r\n   ```\r\n   $ echo test > velero\r\n   $ helm fetch stable/velero --untar\r\n   Error: open velero/Chart.yaml: not a directory\r\n   $ cat velero \r\n   test\r\n   ``` \r\n\r\n2. Directory exists in `$PWD` with same name\r\n\r\n   Download succeeds but gets merged into existing directory\r\n\r\n   ```\r\n   $ mkdir velero\r\n   $ echo test > velero/test.txt\r\n   $ helm fetch stable/velero --untar\r\n   $ ls velero/\r\n   Chart.yaml\tOWNERS\t\tREADME.md\tci\t\tcrds\t\ttemplates\ttest.txt\tvalues.yaml\r\n   $ cat velero/test.txt \r\n   test\r\n   ```\r\n\r\nOutput of `helm version`:\r\n\r\n```\r\n$ helm version --client\r\nClient: &version.Version{SemVer:\"v2.11.0\", GitCommit:\"2e55dbe1fdb5fdb96b75ff144a339489417b146b\", GitTreeState:\"clean\"}\r\n```\r\n\r\nOutput of `kubectl version`:\r\n\r\n```\r\n$ kubectl version --client\r\nClient Version: version.Info{Major:\"1\", Minor:\"14\", GitVersion:\"v1.14.8\", GitCommit:\"211047e9a1922595eaa3a1127ed365e9299a6c23\", GitTreeState:\"clean\", BuildDate:\"2019-10-15T12:11:03Z\", GoVersion:\"go1.12.10\", Compiler:\"gc\", Platform:\"darwin/amd64\"}\r\n```\r\n\r\nCloud Provider/Platform (AKS, GKE, Minikube etc.): \r\n\r\nAWS\r\n","closed_by":{"login":"hickeyma","id":14892004,"node_id":"MDQ6VXNlcjE0ODkyMDA0","avatar_url":"https://avatars.githubusercontent.com/u/14892004?v=4","gravatar_id":"","url":"https://api.github.com/users/hickeyma","html_url":"https://github.com/hickeyma","followers_url":"https://api.github.com/users/hickeyma/followers","following_url":"https://api.github.com/users/hickeyma/following{/other_user}","gists_url":"https://api.github.com/users/hickeyma/gists{/gist_id}","starred_url":"https://api.github.com/users/hickeyma/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hickeyma/subscriptions","organizations_url":"https://api.github.com/users/hickeyma/orgs","repos_url":"https://api.github.com/users/hickeyma/repos","events_url":"https://api.github.com/users/hickeyma/events{/privacy}","received_events_url":"https://api.github.com/users/hickeyma/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/helm/helm/issues/7182/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/helm/helm/issues/7182/timeline","performed_via_github_app":null,"state_reason":"completed"}