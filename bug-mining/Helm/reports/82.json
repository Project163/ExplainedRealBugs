{"url":"https://api.github.com/repos/helm/helm/issues/9940","repository_url":"https://api.github.com/repos/helm/helm","labels_url":"https://api.github.com/repos/helm/helm/issues/9940/labels{/name}","comments_url":"https://api.github.com/repos/helm/helm/issues/9940/comments","events_url":"https://api.github.com/repos/helm/helm/issues/9940/events","html_url":"https://github.com/helm/helm/issues/9940","id":943604900,"node_id":"MDU6SXNzdWU5NDM2MDQ5MDA=","number":9940,"title":"Value files precedence behaviour changes when custom values file is used","user":{"login":"ankitabhopatkar13","id":22163931,"node_id":"MDQ6VXNlcjIyMTYzOTMx","avatar_url":"https://avatars.githubusercontent.com/u/22163931?v=4","gravatar_id":"","url":"https://api.github.com/users/ankitabhopatkar13","html_url":"https://github.com/ankitabhopatkar13","followers_url":"https://api.github.com/users/ankitabhopatkar13/followers","following_url":"https://api.github.com/users/ankitabhopatkar13/following{/other_user}","gists_url":"https://api.github.com/users/ankitabhopatkar13/gists{/gist_id}","starred_url":"https://api.github.com/users/ankitabhopatkar13/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ankitabhopatkar13/subscriptions","organizations_url":"https://api.github.com/users/ankitabhopatkar13/orgs","repos_url":"https://api.github.com/users/ankitabhopatkar13/repos","events_url":"https://api.github.com/users/ankitabhopatkar13/events{/privacy}","received_events_url":"https://api.github.com/users/ankitabhopatkar13/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":778135666,"node_id":"MDU6TGFiZWw3NzgxMzU2NjY=","url":"https://api.github.com/repos/helm/helm/labels/bug","name":"bug","color":"e11d21","default":true,"description":"Categorizes issue or PR as related to a bug."}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":13,"created_at":"2021-07-13T16:22:13Z","updated_at":"2022-04-12T15:08:34Z","closed_at":"2022-04-12T15:08:34Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"<!-- If you need help or think you have found a bug, please help us with your issue by entering the following information (otherwise you can delete this text): -->\r\n\r\nEdit: The issue can be reproduced and outputs can be seen here - https://github.com/ankitabhopatkar13/helm-values-issue\r\n\r\nOutput of `helm version`: `version.BuildInfo{Version:\"v3.6.1\", GitCommit:\"61d8e8c4a6f95540c15c6a65f36a6dd0a45e7a2f\", GitTreeState:\"dirty\", GoVersion:\"go1.16.5\"}`\r\n\r\nI have 3 kind of charts -\r\n\r\n- Library Chart\r\n- App Chart (Uses Library Chart as dependecy)\r\n- Umbrella Chart (Has all the app charts as dependencies)\r\n\r\nLibrary chart has value structure like -\r\n----- templates/\r\n----- values.yaml\r\n```\r\n- exports:\r\n     service:\r\n       type: ClusterIP\r\n       port: 9090\r\n```\r\n\r\nApp Chart has value structure like -\r\n----- templates/\r\n----- values.yaml\r\n```\r\nservice:\r\n  type: ClusterIP\r\n  port: 1234\r\n```\r\n\r\nUmbrella Chart has value structure like -\r\n----- values/\r\n------- aws/\r\n--------- test.yaml\r\n--------- accp.yaml\r\n              \r\n`helm upgrade --install release release --values aws/test.yaml`, the service port is still used as 9090 and not 1234.\r\n\r\nBut if I don't pass the custom values file and just use values.yaml in the umbrella chart, the port is getting set to 1234 which is what should be the case even when custom values file(test.yaml) is used.","closed_by":{"login":"mattfarina","id":62991,"node_id":"MDQ6VXNlcjYyOTkx","avatar_url":"https://avatars.githubusercontent.com/u/62991?v=4","gravatar_id":"","url":"https://api.github.com/users/mattfarina","html_url":"https://github.com/mattfarina","followers_url":"https://api.github.com/users/mattfarina/followers","following_url":"https://api.github.com/users/mattfarina/following{/other_user}","gists_url":"https://api.github.com/users/mattfarina/gists{/gist_id}","starred_url":"https://api.github.com/users/mattfarina/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mattfarina/subscriptions","organizations_url":"https://api.github.com/users/mattfarina/orgs","repos_url":"https://api.github.com/users/mattfarina/repos","events_url":"https://api.github.com/users/mattfarina/events{/privacy}","received_events_url":"https://api.github.com/users/mattfarina/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/helm/helm/issues/9940/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/helm/helm/issues/9940/timeline","performed_via_github_app":null,"state_reason":"completed"}