{"url":"https://api.github.com/repos/helm/helm/issues/8596","repository_url":"https://api.github.com/repos/helm/helm","labels_url":"https://api.github.com/repos/helm/helm/issues/8596/labels{/name}","comments_url":"https://api.github.com/repos/helm/helm/issues/8596/comments","events_url":"https://api.github.com/repos/helm/helm/issues/8596/events","html_url":"https://github.com/helm/helm/issues/8596","id":679039493,"node_id":"MDU6SXNzdWU2NzkwMzk0OTM=","number":8596,"title":"Helm lint throws an error where a warning should be thrown instead","user":{"login":"kofan","id":4638248,"node_id":"MDQ6VXNlcjQ2MzgyNDg=","avatar_url":"https://avatars.githubusercontent.com/u/4638248?v=4","gravatar_id":"","url":"https://api.github.com/users/kofan","html_url":"https://github.com/kofan","followers_url":"https://api.github.com/users/kofan/followers","following_url":"https://api.github.com/users/kofan/following{/other_user}","gists_url":"https://api.github.com/users/kofan/gists{/gist_id}","starred_url":"https://api.github.com/users/kofan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kofan/subscriptions","organizations_url":"https://api.github.com/users/kofan/orgs","repos_url":"https://api.github.com/users/kofan/repos","events_url":"https://api.github.com/users/kofan/events{/privacy}","received_events_url":"https://api.github.com/users/kofan/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":778135666,"node_id":"MDU6TGFiZWw3NzgxMzU2NjY=","url":"https://api.github.com/repos/helm/helm/labels/bug","name":"bug","color":"e11d21","default":true,"description":"Categorizes issue or PR as related to a bug."}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":19,"created_at":"2020-08-14T09:45:13Z","updated_at":"2021-01-05T23:05:33Z","closed_at":"2021-01-05T23:05:33Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"As a result of these 2 PRs:\r\n\r\n1. **https://github.com/helm/helm/pull/7986 - feat: implement deprecation warnings in helm lint**\r\n1. **https://github.com/helm/helm/pull/8011 - feat: lint the names of templated resources**\r\n\r\nnow `helm lint` validates  whether resource `metadata.name` complies Kubernetes naming rules and whether the `apiVersion` is up to date. And these are great features, thank you for implementing them! \r\n\r\nHowever, these rules are having ERROR severity instead of WARNING. These should be warnings because these are NOT errors from the Kubernetes perspective - Kubernetes API still accepts resources with deprecated API versions as well as resources with metadata names that, for example, contain `:` in them. If these are warnings instead of errors, then it will be up to a client to decide whether he wants to fail lint (via using `--strict` flag for `helm lint` command) or not.\r\n\r\nSetting the error severity level for these issues also complicates the migration of automated deployments \r\n to helm 3.3, especially form Helm 2.x.\r\n\r\n_How to fix?_ - I believe [these lines](https://github.com/technosophos/k8s-helm/blob/2d1ce6d7866e1edc2431eb637864f0bdc7e6a0a7/pkg/lint/rules/template.go#L133-L134) of code should be rewritten to:\r\n\r\n```go\r\nlinter.RunLinterRule(support.WarningSev, path, validateMetadataName(&yamlStruct))\r\nlinter.RunLinterRule(support.WarningSev, path, validateNoDeprecations(&yamlStruct))\r\n```","closed_by":{"login":"technosophos","id":89193,"node_id":"MDQ6VXNlcjg5MTkz","avatar_url":"https://avatars.githubusercontent.com/u/89193?v=4","gravatar_id":"","url":"https://api.github.com/users/technosophos","html_url":"https://github.com/technosophos","followers_url":"https://api.github.com/users/technosophos/followers","following_url":"https://api.github.com/users/technosophos/following{/other_user}","gists_url":"https://api.github.com/users/technosophos/gists{/gist_id}","starred_url":"https://api.github.com/users/technosophos/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/technosophos/subscriptions","organizations_url":"https://api.github.com/users/technosophos/orgs","repos_url":"https://api.github.com/users/technosophos/repos","events_url":"https://api.github.com/users/technosophos/events{/privacy}","received_events_url":"https://api.github.com/users/technosophos/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/helm/helm/issues/8596/reactions","total_count":19,"+1":19,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/helm/helm/issues/8596/timeline","performed_via_github_app":null,"state_reason":"completed"}