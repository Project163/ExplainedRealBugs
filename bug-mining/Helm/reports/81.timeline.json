[{"url":"https://api.github.com/repos/helm/helm/issues/comments/909157825","html_url":"https://github.com/helm/helm/issues/10082#issuecomment-909157825","issue_url":"https://api.github.com/repos/helm/helm/issues/10082","id":909157825,"node_id":"IC_kwDOApspmc42MKXB","user":{"login":"sathieu","id":741106,"node_id":"MDQ6VXNlcjc0MTEwNg==","avatar_url":"https://avatars.githubusercontent.com/u/741106?v=4","gravatar_id":"","url":"https://api.github.com/users/sathieu","html_url":"https://github.com/sathieu","followers_url":"https://api.github.com/users/sathieu/followers","following_url":"https://api.github.com/users/sathieu/following{/other_user}","gists_url":"https://api.github.com/users/sathieu/gists{/gist_id}","starred_url":"https://api.github.com/users/sathieu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sathieu/subscriptions","organizations_url":"https://api.github.com/users/sathieu/orgs","repos_url":"https://api.github.com/users/sathieu/repos","events_url":"https://api.github.com/users/sathieu/events{/privacy}","received_events_url":"https://api.github.com/users/sathieu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-31T11:41:35Z","updated_at":"2021-08-31T11:41:35Z","body":"(updated description, with more minimal testcase - no subchart needed).","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/helm/helm/issues/comments/909157825/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sathieu","id":741106,"node_id":"MDQ6VXNlcjc0MTEwNg==","avatar_url":"https://avatars.githubusercontent.com/u/741106?v=4","gravatar_id":"","url":"https://api.github.com/users/sathieu","html_url":"https://github.com/sathieu","followers_url":"https://api.github.com/users/sathieu/followers","following_url":"https://api.github.com/users/sathieu/following{/other_user}","gists_url":"https://api.github.com/users/sathieu/gists{/gist_id}","starred_url":"https://api.github.com/users/sathieu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sathieu/subscriptions","organizations_url":"https://api.github.com/users/sathieu/orgs","repos_url":"https://api.github.com/users/sathieu/repos","events_url":"https://api.github.com/users/sathieu/events{/privacy}","received_events_url":"https://api.github.com/users/sathieu/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":5232602240,"node_id":"MDEyOkxhYmVsZWRFdmVudDUyMzI2MDIyNDA=","url":"https://api.github.com/repos/helm/helm/issues/events/5232602240","actor":{"login":"mattfarina","id":62991,"node_id":"MDQ6VXNlcjYyOTkx","avatar_url":"https://avatars.githubusercontent.com/u/62991?v=4","gravatar_id":"","url":"https://api.github.com/users/mattfarina","html_url":"https://github.com/mattfarina","followers_url":"https://api.github.com/users/mattfarina/followers","following_url":"https://api.github.com/users/mattfarina/following{/other_user}","gists_url":"https://api.github.com/users/mattfarina/gists{/gist_id}","starred_url":"https://api.github.com/users/mattfarina/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mattfarina/subscriptions","organizations_url":"https://api.github.com/users/mattfarina/orgs","repos_url":"https://api.github.com/users/mattfarina/repos","events_url":"https://api.github.com/users/mattfarina/events{/privacy}","received_events_url":"https://api.github.com/users/mattfarina/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2021-08-31T13:31:27Z","label":{"name":"bug","color":"e11d21"},"performed_via_github_app":null},{"id":5232602516,"node_id":"MDE1Ok1pbGVzdG9uZWRFdmVudDUyMzI2MDI1MTY=","url":"https://api.github.com/repos/helm/helm/issues/events/5232602516","actor":{"login":"mattfarina","id":62991,"node_id":"MDQ6VXNlcjYyOTkx","avatar_url":"https://avatars.githubusercontent.com/u/62991?v=4","gravatar_id":"","url":"https://api.github.com/users/mattfarina","html_url":"https://github.com/mattfarina","followers_url":"https://api.github.com/users/mattfarina/followers","following_url":"https://api.github.com/users/mattfarina/following{/other_user}","gists_url":"https://api.github.com/users/mattfarina/gists{/gist_id}","starred_url":"https://api.github.com/users/mattfarina/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mattfarina/subscriptions","organizations_url":"https://api.github.com/users/mattfarina/orgs","repos_url":"https://api.github.com/users/mattfarina/repos","events_url":"https://api.github.com/users/mattfarina/events{/privacy}","received_events_url":"https://api.github.com/users/mattfarina/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"milestoned","commit_id":null,"commit_url":null,"created_at":"2021-08-31T13:31:30Z","milestone":{"title":"3.7.0"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/helm/helm/issues/comments/909241161","html_url":"https://github.com/helm/helm/issues/10082#issuecomment-909241161","issue_url":"https://api.github.com/repos/helm/helm/issues/10082","id":909241161,"node_id":"IC_kwDOApspmc42MetJ","user":{"login":"mattfarina","id":62991,"node_id":"MDQ6VXNlcjYyOTkx","avatar_url":"https://avatars.githubusercontent.com/u/62991?v=4","gravatar_id":"","url":"https://api.github.com/users/mattfarina","html_url":"https://github.com/mattfarina","followers_url":"https://api.github.com/users/mattfarina/followers","following_url":"https://api.github.com/users/mattfarina/following{/other_user}","gists_url":"https://api.github.com/users/mattfarina/gists{/gist_id}","starred_url":"https://api.github.com/users/mattfarina/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mattfarina/subscriptions","organizations_url":"https://api.github.com/users/mattfarina/orgs","repos_url":"https://api.github.com/users/mattfarina/repos","events_url":"https://api.github.com/users/mattfarina/events{/privacy}","received_events_url":"https://api.github.com/users/mattfarina/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-31T13:31:50Z","updated_at":"2021-08-31T13:31:50Z","body":"It looks like we have a regression. Thanks for providing the details and an example case.","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/helm/helm/issues/comments/909241161/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mattfarina","id":62991,"node_id":"MDQ6VXNlcjYyOTkx","avatar_url":"https://avatars.githubusercontent.com/u/62991?v=4","gravatar_id":"","url":"https://api.github.com/users/mattfarina","html_url":"https://github.com/mattfarina","followers_url":"https://api.github.com/users/mattfarina/followers","following_url":"https://api.github.com/users/mattfarina/following{/other_user}","gists_url":"https://api.github.com/users/mattfarina/gists{/gist_id}","starred_url":"https://api.github.com/users/mattfarina/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mattfarina/subscriptions","organizations_url":"https://api.github.com/users/mattfarina/orgs","repos_url":"https://api.github.com/users/mattfarina/repos","events_url":"https://api.github.com/users/mattfarina/events{/privacy}","received_events_url":"https://api.github.com/users/mattfarina/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/helm/helm/issues/comments/909255445","html_url":"https://github.com/helm/helm/issues/10082#issuecomment-909255445","issue_url":"https://api.github.com/repos/helm/helm/issues/10082","id":909255445,"node_id":"IC_kwDOApspmc42MiMV","user":{"login":"mattfarina","id":62991,"node_id":"MDQ6VXNlcjYyOTkx","avatar_url":"https://avatars.githubusercontent.com/u/62991?v=4","gravatar_id":"","url":"https://api.github.com/users/mattfarina","html_url":"https://github.com/mattfarina","followers_url":"https://api.github.com/users/mattfarina/followers","following_url":"https://api.github.com/users/mattfarina/following{/other_user}","gists_url":"https://api.github.com/users/mattfarina/gists{/gist_id}","starred_url":"https://api.github.com/users/mattfarina/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mattfarina/subscriptions","organizations_url":"https://api.github.com/users/mattfarina/orgs","repos_url":"https://api.github.com/users/mattfarina/repos","events_url":"https://api.github.com/users/mattfarina/events{/privacy}","received_events_url":"https://api.github.com/users/mattfarina/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-31T13:48:18Z","updated_at":"2021-08-31T13:48:18Z","body":"I think it was #9957 that caused this.","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/helm/helm/issues/comments/909255445/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mattfarina","id":62991,"node_id":"MDQ6VXNlcjYyOTkx","avatar_url":"https://avatars.githubusercontent.com/u/62991?v=4","gravatar_id":"","url":"https://api.github.com/users/mattfarina","html_url":"https://github.com/mattfarina","followers_url":"https://api.github.com/users/mattfarina/followers","following_url":"https://api.github.com/users/mattfarina/following{/other_user}","gists_url":"https://api.github.com/users/mattfarina/gists{/gist_id}","starred_url":"https://api.github.com/users/mattfarina/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mattfarina/subscriptions","organizations_url":"https://api.github.com/users/mattfarina/orgs","repos_url":"https://api.github.com/users/mattfarina/repos","events_url":"https://api.github.com/users/mattfarina/events{/privacy}","received_events_url":"https://api.github.com/users/mattfarina/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":5232975614,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDUyMzI5NzU2MTQ=","url":"https://api.github.com/repos/helm/helm/issues/events/5232975614","actor":{"login":"mattfarina","id":62991,"node_id":"MDQ6VXNlcjYyOTkx","avatar_url":"https://avatars.githubusercontent.com/u/62991?v=4","gravatar_id":"","url":"https://api.github.com/users/mattfarina","html_url":"https://github.com/mattfarina","followers_url":"https://api.github.com/users/mattfarina/followers","following_url":"https://api.github.com/users/mattfarina/following{/other_user}","gists_url":"https://api.github.com/users/mattfarina/gists{/gist_id}","starred_url":"https://api.github.com/users/mattfarina/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mattfarina/subscriptions","organizations_url":"https://api.github.com/users/mattfarina/orgs","repos_url":"https://api.github.com/users/mattfarina/repos","events_url":"https://api.github.com/users/mattfarina/events{/privacy}","received_events_url":"https://api.github.com/users/mattfarina/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"f895948ae21e30ef9392201ca4d5f55525cafb62","commit_url":"https://api.github.com/repos/mattfarina/helm/commits/f895948ae21e30ef9392201ca4d5f55525cafb62","created_at":"2021-08-31T14:26:35Z","performed_via_github_app":null},{"actor":{"login":"mattfarina","id":62991,"node_id":"MDQ6VXNlcjYyOTkx","avatar_url":"https://avatars.githubusercontent.com/u/62991?v=4","gravatar_id":"","url":"https://api.github.com/users/mattfarina","html_url":"https://github.com/mattfarina","followers_url":"https://api.github.com/users/mattfarina/followers","following_url":"https://api.github.com/users/mattfarina/following{/other_user}","gists_url":"https://api.github.com/users/mattfarina/gists{/gist_id}","starred_url":"https://api.github.com/users/mattfarina/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mattfarina/subscriptions","organizations_url":"https://api.github.com/users/mattfarina/orgs","repos_url":"https://api.github.com/users/mattfarina/repos","events_url":"https://api.github.com/users/mattfarina/events{/privacy}","received_events_url":"https://api.github.com/users/mattfarina/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-08-31T14:28:41Z","updated_at":"2021-08-31T14:28:41Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/helm/helm/issues/10084","repository_url":"https://api.github.com/repos/helm/helm","labels_url":"https://api.github.com/repos/helm/helm/issues/10084/labels{/name}","comments_url":"https://api.github.com/repos/helm/helm/issues/10084/comments","events_url":"https://api.github.com/repos/helm/helm/issues/10084/events","html_url":"https://github.com/helm/helm/pull/10084","id":983929542,"node_id":"MDExOlB1bGxSZXF1ZXN0NzIzNDMxNjU0","number":10084,"title":"Fixing issue with non-existant .Template when using tpl function","user":{"login":"mattfarina","id":62991,"node_id":"MDQ6VXNlcjYyOTkx","avatar_url":"https://avatars.githubusercontent.com/u/62991?v=4","gravatar_id":"","url":"https://api.github.com/users/mattfarina","html_url":"https://github.com/mattfarina","followers_url":"https://api.github.com/users/mattfarina/followers","following_url":"https://api.github.com/users/mattfarina/following{/other_user}","gists_url":"https://api.github.com/users/mattfarina/gists{/gist_id}","starred_url":"https://api.github.com/users/mattfarina/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mattfarina/subscriptions","organizations_url":"https://api.github.com/users/mattfarina/orgs","repos_url":"https://api.github.com/users/mattfarina/repos","events_url":"https://api.github.com/users/mattfarina/events{/privacy}","received_events_url":"https://api.github.com/users/mattfarina/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":676261325,"node_id":"MDU6TGFiZWw2NzYyNjEzMjU=","url":"https://api.github.com/repos/helm/helm/labels/size/XS","name":"size/XS","color":"009900","default":false,"description":"Denotes a PR that changes 0-9 lines, ignoring generated files."},{"id":778135666,"node_id":"MDU6TGFiZWw3NzgxMzU2NjY=","url":"https://api.github.com/repos/helm/helm/labels/bug","name":"bug","color":"e11d21","default":true,"description":"Categorizes issue or PR as related to a bug."}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/helm/helm/milestones/111","html_url":"https://github.com/helm/helm/milestone/111","labels_url":"https://api.github.com/repos/helm/helm/milestones/111/labels","id":6767242,"node_id":"MDk6TWlsZXN0b25lNjc2NzI0Mg==","number":111,"title":"3.7.0","description":"","creator":{"login":"mattfarina","id":62991,"node_id":"MDQ6VXNlcjYyOTkx","avatar_url":"https://avatars.githubusercontent.com/u/62991?v=4","gravatar_id":"","url":"https://api.github.com/users/mattfarina","html_url":"https://github.com/mattfarina","followers_url":"https://api.github.com/users/mattfarina/followers","following_url":"https://api.github.com/users/mattfarina/following{/other_user}","gists_url":"https://api.github.com/users/mattfarina/gists{/gist_id}","starred_url":"https://api.github.com/users/mattfarina/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mattfarina/subscriptions","organizations_url":"https://api.github.com/users/mattfarina/orgs","repos_url":"https://api.github.com/users/mattfarina/repos","events_url":"https://api.github.com/users/mattfarina/events{/privacy}","received_events_url":"https://api.github.com/users/mattfarina/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":38,"state":"closed","created_at":"2021-05-17T20:51:09Z","updated_at":"2021-09-15T19:47:52Z","due_on":"2021-09-08T07:00:00Z","closed_at":"2021-09-15T19:47:52Z"},"comments":2,"created_at":"2021-08-31T14:28:41Z","updated_at":"2021-09-16T15:20:34Z","closed_at":"2021-08-31T20:34:13Z","author_association":"COLLABORATOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":43723161,"node_id":"MDEwOlJlcG9zaXRvcnk0MzcyMzE2MQ==","name":"helm","full_name":"helm/helm","private":false,"owner":{"login":"helm","id":15859888,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE1ODU5ODg4","avatar_url":"https://avatars.githubusercontent.com/u/15859888?v=4","gravatar_id":"","url":"https://api.github.com/users/helm","html_url":"https://github.com/helm","followers_url":"https://api.github.com/users/helm/followers","following_url":"https://api.github.com/users/helm/following{/other_user}","gists_url":"https://api.github.com/users/helm/gists{/gist_id}","starred_url":"https://api.github.com/users/helm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/helm/subscriptions","organizations_url":"https://api.github.com/users/helm/orgs","repos_url":"https://api.github.com/users/helm/repos","events_url":"https://api.github.com/users/helm/events{/privacy}","received_events_url":"https://api.github.com/users/helm/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/helm/helm","description":"The Kubernetes Package Manager","fork":false,"url":"https://api.github.com/repos/helm/helm","forks_url":"https://api.github.com/repos/helm/helm/forks","keys_url":"https://api.github.com/repos/helm/helm/keys{/key_id}","collaborators_url":"https://api.github.com/repos/helm/helm/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/helm/helm/teams","hooks_url":"https://api.github.com/repos/helm/helm/hooks","issue_events_url":"https://api.github.com/repos/helm/helm/issues/events{/number}","events_url":"https://api.github.com/repos/helm/helm/events","assignees_url":"https://api.github.com/repos/helm/helm/assignees{/user}","branches_url":"https://api.github.com/repos/helm/helm/branches{/branch}","tags_url":"https://api.github.com/repos/helm/helm/tags","blobs_url":"https://api.github.com/repos/helm/helm/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/helm/helm/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/helm/helm/git/refs{/sha}","trees_url":"https://api.github.com/repos/helm/helm/git/trees{/sha}","statuses_url":"https://api.github.com/repos/helm/helm/statuses/{sha}","languages_url":"https://api.github.com/repos/helm/helm/languages","stargazers_url":"https://api.github.com/repos/helm/helm/stargazers","contributors_url":"https://api.github.com/repos/helm/helm/contributors","subscribers_url":"https://api.github.com/repos/helm/helm/subscribers","subscription_url":"https://api.github.com/repos/helm/helm/subscription","commits_url":"https://api.github.com/repos/helm/helm/commits{/sha}","git_commits_url":"https://api.github.com/repos/helm/helm/git/commits{/sha}","comments_url":"https://api.github.com/repos/helm/helm/comments{/number}","issue_comment_url":"https://api.github.com/repos/helm/helm/issues/comments{/number}","contents_url":"https://api.github.com/repos/helm/helm/contents/{+path}","compare_url":"https://api.github.com/repos/helm/helm/compare/{base}...{head}","merges_url":"https://api.github.com/repos/helm/helm/merges","archive_url":"https://api.github.com/repos/helm/helm/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/helm/helm/downloads","issues_url":"https://api.github.com/repos/helm/helm/issues{/number}","pulls_url":"https://api.github.com/repos/helm/helm/pulls{/number}","milestones_url":"https://api.github.com/repos/helm/helm/milestones{/number}","notifications_url":"https://api.github.com/repos/helm/helm/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/helm/helm/labels{/name}","releases_url":"https://api.github.com/repos/helm/helm/releases{/id}","deployments_url":"https://api.github.com/repos/helm/helm/deployments","created_at":"2015-10-06T01:07:32Z","updated_at":"2025-11-09T19:00:10Z","pushed_at":"2025-11-09T12:57:10Z","git_url":"git://github.com/helm/helm.git","ssh_url":"git@github.com:helm/helm.git","clone_url":"https://github.com/helm/helm.git","svn_url":"https://github.com/helm/helm","homepage":"https://helm.sh","size":25851,"stargazers_count":28930,"watchers_count":28930,"language":"Go","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":7393,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":448,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":true,"topics":["chart","charts","cncf","helm","kubernetes"],"visibility":"public","forks":7393,"open_issues":448,"watchers":28930,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/helm/helm/pulls/10084","html_url":"https://github.com/helm/helm/pull/10084","diff_url":"https://github.com/helm/helm/pull/10084.diff","patch_url":"https://github.com/helm/helm/pull/10084.patch","merged_at":"2021-08-31T20:34:12Z"},"body":"This is a regression accidently introduced in #9957.\r\n\r\nA delete call had been used on the Template key of vals. This caused\r\na condition where Template was not available when rendering via tpl.\r\nThe delete happened after ExecuteTemplate so the issue is surpsising.\r\nIt may possibly be a race condition. Existing tests did not catch it.\r\nI tried to create a test that directly tested the issue and was\r\nunable to replicate the error seen with real charts. This leads me\r\nto believe it is a race condition in the underlying Go template\r\npackage.\r\n\r\nThe delete call was not there before #9957. It should be safe to\r\nremove and keep that information.\r\n\r\nCloses #10082\r\n\r\n<!--  Thanks for sending a pull request!  Here are some tips for you:\r\n1. Make sure to read the Contributing Guide before submitting your PR: https://github.com/helm/helm/blob/main/CONTRIBUTING.md\r\n2. If this PR closes another issue, add 'closes #<issue number>' somewhere in the PR summary. GitHub will automatically close that issue when this PR gets merged. Alternatively, adding 'refs #<issue number>' will not close the issue, but help provide the reviewer more context.-->\r\n\r\n**What this PR does / why we need it**:\r\n\r\nA regression was accidentally introduced. This fixes the regression.\r\n\r\n**Special notes for your reviewer**:\r\n\r\nThe lack of tests is because this is difficult to test. Existing tests should have caught the issue and new tests failed to catch it. My current best guess is that this is due to a race condition somewhere in the Go template package.\r\n\r\n**If applicable**:\r\n- [ ] this PR contains documentation\r\n- [ ] this PR contains unit tests\r\n- [x] this PR has been tested for backwards compatibility\r\n","reactions":{"url":"https://api.github.com/repos/helm/helm/issues/10084/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/helm/helm/issues/10084/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":5235061857,"node_id":"MDExOkNsb3NlZEV2ZW50NTIzNTA2MTg1Nw==","url":"https://api.github.com/repos/helm/helm/issues/events/5235061857","actor":{"login":"mattfarina","id":62991,"node_id":"MDQ6VXNlcjYyOTkx","avatar_url":"https://avatars.githubusercontent.com/u/62991?v=4","gravatar_id":"","url":"https://api.github.com/users/mattfarina","html_url":"https://github.com/mattfarina","followers_url":"https://api.github.com/users/mattfarina/followers","following_url":"https://api.github.com/users/mattfarina/following{/other_user}","gists_url":"https://api.github.com/users/mattfarina/gists{/gist_id}","starred_url":"https://api.github.com/users/mattfarina/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mattfarina/subscriptions","organizations_url":"https://api.github.com/users/mattfarina/orgs","repos_url":"https://api.github.com/users/mattfarina/repos","events_url":"https://api.github.com/users/mattfarina/events{/privacy}","received_events_url":"https://api.github.com/users/mattfarina/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2021-08-31T20:34:13Z","state_reason":null,"performed_via_github_app":null},{"id":5235124717,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDUyMzUxMjQ3MTc=","url":"https://api.github.com/repos/helm/helm/issues/events/5235124717","actor":{"login":"mattfarina","id":62991,"node_id":"MDQ6VXNlcjYyOTkx","avatar_url":"https://avatars.githubusercontent.com/u/62991?v=4","gravatar_id":"","url":"https://api.github.com/users/mattfarina","html_url":"https://github.com/mattfarina","followers_url":"https://api.github.com/users/mattfarina/followers","following_url":"https://api.github.com/users/mattfarina/following{/other_user}","gists_url":"https://api.github.com/users/mattfarina/gists{/gist_id}","starred_url":"https://api.github.com/users/mattfarina/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mattfarina/subscriptions","organizations_url":"https://api.github.com/users/mattfarina/orgs","repos_url":"https://api.github.com/users/mattfarina/repos","events_url":"https://api.github.com/users/mattfarina/events{/privacy}","received_events_url":"https://api.github.com/users/mattfarina/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"4a7c306aa9dcbdeecf79c7517851921a21b72e56","commit_url":"https://api.github.com/repos/helm/helm/commits/4a7c306aa9dcbdeecf79c7517851921a21b72e56","created_at":"2021-08-31T20:48:08Z","performed_via_github_app":null},{"actor":{"login":"Kytech","id":2079386,"node_id":"MDQ6VXNlcjIwNzkzODY=","avatar_url":"https://avatars.githubusercontent.com/u/2079386?v=4","gravatar_id":"","url":"https://api.github.com/users/Kytech","html_url":"https://github.com/Kytech","followers_url":"https://api.github.com/users/Kytech/followers","following_url":"https://api.github.com/users/Kytech/following{/other_user}","gists_url":"https://api.github.com/users/Kytech/gists{/gist_id}","starred_url":"https://api.github.com/users/Kytech/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Kytech/subscriptions","organizations_url":"https://api.github.com/users/Kytech/orgs","repos_url":"https://api.github.com/users/Kytech/repos","events_url":"https://api.github.com/users/Kytech/events{/privacy}","received_events_url":"https://api.github.com/users/Kytech/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-20T22:29:57Z","updated_at":"2022-07-20T22:29:57Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/helm/helm/issues/11168","repository_url":"https://api.github.com/repos/helm/helm","labels_url":"https://api.github.com/repos/helm/helm/issues/11168/labels{/name}","comments_url":"https://api.github.com/repos/helm/helm/issues/11168/comments","events_url":"https://api.github.com/repos/helm/helm/issues/11168/events","html_url":"https://github.com/helm/helm/issues/11168","id":1312042843,"node_id":"I_kwDOApspmc5ONC9b","number":11168,"title":"tpl fails when called in a template rendered in the subchart context","user":{"login":"Kytech","id":2079386,"node_id":"MDQ6VXNlcjIwNzkzODY=","avatar_url":"https://avatars.githubusercontent.com/u/2079386?v=4","gravatar_id":"","url":"https://api.github.com/users/Kytech","html_url":"https://github.com/Kytech","followers_url":"https://api.github.com/users/Kytech/followers","following_url":"https://api.github.com/users/Kytech/following{/other_user}","gists_url":"https://api.github.com/users/Kytech/gists{/gist_id}","starred_url":"https://api.github.com/users/Kytech/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Kytech/subscriptions","organizations_url":"https://api.github.com/users/Kytech/orgs","repos_url":"https://api.github.com/users/Kytech/repos","events_url":"https://api.github.com/users/Kytech/events{/privacy}","received_events_url":"https://api.github.com/users/Kytech/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":778135666,"node_id":"MDU6TGFiZWw3NzgxMzU2NjY=","url":"https://api.github.com/repos/helm/helm/labels/bug","name":"bug","color":"e11d21","default":true,"description":"Categorizes issue or PR as related to a bug."},{"id":2290444626,"node_id":"MDU6TGFiZWwyMjkwNDQ0NjI2","url":"https://api.github.com/repos/helm/helm/labels/Stale","name":"Stale","color":"ededed","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":17,"created_at":"2022-07-20T22:29:57Z","updated_at":"2024-06-27T00:14:42Z","closed_at":"2024-06-27T00:14:42Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":43723161,"node_id":"MDEwOlJlcG9zaXRvcnk0MzcyMzE2MQ==","name":"helm","full_name":"helm/helm","private":false,"owner":{"login":"helm","id":15859888,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE1ODU5ODg4","avatar_url":"https://avatars.githubusercontent.com/u/15859888?v=4","gravatar_id":"","url":"https://api.github.com/users/helm","html_url":"https://github.com/helm","followers_url":"https://api.github.com/users/helm/followers","following_url":"https://api.github.com/users/helm/following{/other_user}","gists_url":"https://api.github.com/users/helm/gists{/gist_id}","starred_url":"https://api.github.com/users/helm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/helm/subscriptions","organizations_url":"https://api.github.com/users/helm/orgs","repos_url":"https://api.github.com/users/helm/repos","events_url":"https://api.github.com/users/helm/events{/privacy}","received_events_url":"https://api.github.com/users/helm/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/helm/helm","description":"The Kubernetes Package Manager","fork":false,"url":"https://api.github.com/repos/helm/helm","forks_url":"https://api.github.com/repos/helm/helm/forks","keys_url":"https://api.github.com/repos/helm/helm/keys{/key_id}","collaborators_url":"https://api.github.com/repos/helm/helm/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/helm/helm/teams","hooks_url":"https://api.github.com/repos/helm/helm/hooks","issue_events_url":"https://api.github.com/repos/helm/helm/issues/events{/number}","events_url":"https://api.github.com/repos/helm/helm/events","assignees_url":"https://api.github.com/repos/helm/helm/assignees{/user}","branches_url":"https://api.github.com/repos/helm/helm/branches{/branch}","tags_url":"https://api.github.com/repos/helm/helm/tags","blobs_url":"https://api.github.com/repos/helm/helm/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/helm/helm/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/helm/helm/git/refs{/sha}","trees_url":"https://api.github.com/repos/helm/helm/git/trees{/sha}","statuses_url":"https://api.github.com/repos/helm/helm/statuses/{sha}","languages_url":"https://api.github.com/repos/helm/helm/languages","stargazers_url":"https://api.github.com/repos/helm/helm/stargazers","contributors_url":"https://api.github.com/repos/helm/helm/contributors","subscribers_url":"https://api.github.com/repos/helm/helm/subscribers","subscription_url":"https://api.github.com/repos/helm/helm/subscription","commits_url":"https://api.github.com/repos/helm/helm/commits{/sha}","git_commits_url":"https://api.github.com/repos/helm/helm/git/commits{/sha}","comments_url":"https://api.github.com/repos/helm/helm/comments{/number}","issue_comment_url":"https://api.github.com/repos/helm/helm/issues/comments{/number}","contents_url":"https://api.github.com/repos/helm/helm/contents/{+path}","compare_url":"https://api.github.com/repos/helm/helm/compare/{base}...{head}","merges_url":"https://api.github.com/repos/helm/helm/merges","archive_url":"https://api.github.com/repos/helm/helm/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/helm/helm/downloads","issues_url":"https://api.github.com/repos/helm/helm/issues{/number}","pulls_url":"https://api.github.com/repos/helm/helm/pulls{/number}","milestones_url":"https://api.github.com/repos/helm/helm/milestones{/number}","notifications_url":"https://api.github.com/repos/helm/helm/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/helm/helm/labels{/name}","releases_url":"https://api.github.com/repos/helm/helm/releases{/id}","deployments_url":"https://api.github.com/repos/helm/helm/deployments","created_at":"2015-10-06T01:07:32Z","updated_at":"2025-11-09T19:00:10Z","pushed_at":"2025-11-09T12:57:10Z","git_url":"git://github.com/helm/helm.git","ssh_url":"git@github.com:helm/helm.git","clone_url":"https://github.com/helm/helm.git","svn_url":"https://github.com/helm/helm","homepage":"https://helm.sh","size":25851,"stargazers_count":28930,"watchers_count":28930,"language":"Go","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":7393,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":448,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":true,"topics":["chart","charts","cncf","helm","kubernetes"],"visibility":"public","forks":7393,"open_issues":448,"watchers":28930,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"When calling `tpl` from a template being rendered in the context of a subchart (using `{{ include \"common.configmap\" .Subcharts.common }}` as detailed in PR #9957, which introduced the `.Subcharts` object to support such a use case), the following error occurs:\r\n\r\n```\r\nerror calling include: template: prometheus/charts/common/templates/_configmap.yaml:39:8: executing \"common.configmap.tpl\" at <tpl (toYaml $configs) .>: error calling tpl: cannot retrieve Template.Basepath from values inside tpl function\r\n```\r\n\r\nIt appears that a similar issue ([#10082](https://github.com/helm/helm/issues/10082)) occurred before due to `.Template` being removed from the scope at one point in time and it seems that `.Template` has been available in the subchart scope previously based on [this comment in PR #10084](https://github.com/helm/helm/pull/10084#issuecomment-920998122) and the change made in that PR.\r\n\r\nI am able to work around this by copying `.Template` to `.Subcharts.common` before rendering the subchart-provided template, which seems to indicate that this is indeed the cause of the problem. I'm thinking that this is a regression since PR [#10084](https://github.com/helm/helm/pull/10084) would have resulted in `.Template` being exposed under `.Subcharts.<name>.Template` as well.\r\n\r\n---\r\n\r\nOutput of `helm version`:\r\n```\r\nversion.BuildInfo{Version:\"v3.9.1\", GitCommit:\"a7c043acb5ff905c261cfdc923a35776ba5e66e4\", GitTreeState:\"clean\", GoVersion:\"go1.18.4\"}\r\n```\r\n\r\nOutput of `kubectl version`: \r\n```\r\nClient Version: version.Info{Major:\"1\", Minor:\"22\", GitVersion:\"v1.22.12\", GitCommit:\"b058e1760c79f46a834ba59bd7a3486ecf28237d\", GitTreeState:\"clean\", BuildDate:\"2022-07-13T14:52:41Z\", GoVersion:\"go1.16.15\", Compiler:\"gc\", Platform:\"darwin/amd64\"}\r\nUnable to connect to the server: net/http: TLS handshake timeout\r\n```\r\n\r\nCloud Provider/Platform (AKS, GKE, Minikube etc.): k8s\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/helm/helm/issues/11168/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/helm/helm/issues/11168/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"id":8315983410,"node_id":"REFE_lADOApspmc46oXLazwAAAAHvq9Yy","url":"https://api.github.com/repos/helm/helm/issues/events/8315983410","actor":{"login":"zak905","id":6265563,"node_id":"MDQ6VXNlcjYyNjU1NjM=","avatar_url":"https://avatars.githubusercontent.com/u/6265563?v=4","gravatar_id":"","url":"https://api.github.com/users/zak905","html_url":"https://github.com/zak905","followers_url":"https://api.github.com/users/zak905/followers","following_url":"https://api.github.com/users/zak905/following{/other_user}","gists_url":"https://api.github.com/users/zak905/gists{/gist_id}","starred_url":"https://api.github.com/users/zak905/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zak905/subscriptions","organizations_url":"https://api.github.com/users/zak905/orgs","repos_url":"https://api.github.com/users/zak905/repos","events_url":"https://api.github.com/users/zak905/events{/privacy}","received_events_url":"https://api.github.com/users/zak905/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"037edb7adfbe50ca0896bf93c0e6553f5e673c82","commit_url":"https://api.github.com/repos/zak905/helm/commits/037edb7adfbe50ca0896bf93c0e6553f5e673c82","created_at":"2023-01-19T20:38:54Z","performed_via_github_app":null}]