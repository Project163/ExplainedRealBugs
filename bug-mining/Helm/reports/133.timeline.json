[{"url":"https://api.github.com/repos/helm/helm/issues/comments/748306623","html_url":"https://github.com/helm/helm/issues/9150#issuecomment-748306623","issue_url":"https://api.github.com/repos/helm/helm/issues/9150","id":748306623,"node_id":"MDEyOklzc3VlQ29tbWVudDc0ODMwNjYyMw==","user":{"login":"sbose78","id":545280,"node_id":"MDQ6VXNlcjU0NTI4MA==","avatar_url":"https://avatars.githubusercontent.com/u/545280?v=4","gravatar_id":"","url":"https://api.github.com/users/sbose78","html_url":"https://github.com/sbose78","followers_url":"https://api.github.com/users/sbose78/followers","following_url":"https://api.github.com/users/sbose78/following{/other_user}","gists_url":"https://api.github.com/users/sbose78/gists{/gist_id}","starred_url":"https://api.github.com/users/sbose78/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sbose78/subscriptions","organizations_url":"https://api.github.com/users/sbose78/orgs","repos_url":"https://api.github.com/users/sbose78/repos","events_url":"https://api.github.com/users/sbose78/events{/privacy}","received_events_url":"https://api.github.com/users/sbose78/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-18T20:36:26Z","updated_at":"2020-12-18T20:36:26Z","body":"Hi @dastrobu, thank you for reporting this, I've been able to reproduce this issue!\r\n\r\nIn fact, I've tried aliasing further and I still see only one grandchild being returned.\r\n\r\n```\r\nfoo:\r\n  grandchild:\r\n    from: foo\r\n\r\nbar:\r\n  grandchild:\r\n    from: bar\r\n\r\nanother:\r\n  grandchild:\r\n    from: another\r\n```","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/helm/helm/issues/comments/748306623/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sbose78","id":545280,"node_id":"MDQ6VXNlcjU0NTI4MA==","avatar_url":"https://avatars.githubusercontent.com/u/545280?v=4","gravatar_id":"","url":"https://api.github.com/users/sbose78","html_url":"https://github.com/sbose78","followers_url":"https://api.github.com/users/sbose78/followers","following_url":"https://api.github.com/users/sbose78/following{/other_user}","gists_url":"https://api.github.com/users/sbose78/gists{/gist_id}","starred_url":"https://api.github.com/users/sbose78/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sbose78/subscriptions","organizations_url":"https://api.github.com/users/sbose78/orgs","repos_url":"https://api.github.com/users/sbose78/repos","events_url":"https://api.github.com/users/sbose78/events{/privacy}","received_events_url":"https://api.github.com/users/sbose78/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":4131386345,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDEzMTM4NjM0NQ==","url":"https://api.github.com/repos/helm/helm/issues/events/4131386345","actor":{"login":"dastrobu","id":1847260,"node_id":"MDQ6VXNlcjE4NDcyNjA=","avatar_url":"https://avatars.githubusercontent.com/u/1847260?v=4","gravatar_id":"","url":"https://api.github.com/users/dastrobu","html_url":"https://github.com/dastrobu","followers_url":"https://api.github.com/users/dastrobu/followers","following_url":"https://api.github.com/users/dastrobu/following{/other_user}","gists_url":"https://api.github.com/users/dastrobu/gists{/gist_id}","starred_url":"https://api.github.com/users/dastrobu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dastrobu/subscriptions","organizations_url":"https://api.github.com/users/dastrobu/orgs","repos_url":"https://api.github.com/users/dastrobu/repos","events_url":"https://api.github.com/users/dastrobu/events{/privacy}","received_events_url":"https://api.github.com/users/dastrobu/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-12-18T20:36:26Z","performed_via_github_app":null},{"id":4131386353,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQxMzEzODYzNTM=","url":"https://api.github.com/repos/helm/helm/issues/events/4131386353","actor":{"login":"dastrobu","id":1847260,"node_id":"MDQ6VXNlcjE4NDcyNjA=","avatar_url":"https://avatars.githubusercontent.com/u/1847260?v=4","gravatar_id":"","url":"https://api.github.com/users/dastrobu","html_url":"https://github.com/dastrobu","followers_url":"https://api.github.com/users/dastrobu/followers","following_url":"https://api.github.com/users/dastrobu/following{/other_user}","gists_url":"https://api.github.com/users/dastrobu/gists{/gist_id}","starred_url":"https://api.github.com/users/dastrobu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dastrobu/subscriptions","organizations_url":"https://api.github.com/users/dastrobu/orgs","repos_url":"https://api.github.com/users/dastrobu/repos","events_url":"https://api.github.com/users/dastrobu/events{/privacy}","received_events_url":"https://api.github.com/users/dastrobu/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-12-18T20:36:26Z","performed_via_github_app":null},{"id":4136271892,"node_id":"MDEyOkxhYmVsZWRFdmVudDQxMzYyNzE4OTI=","url":"https://api.github.com/repos/helm/helm/issues/events/4136271892","actor":{"login":"mattfarina","id":62991,"node_id":"MDQ6VXNlcjYyOTkx","avatar_url":"https://avatars.githubusercontent.com/u/62991?v=4","gravatar_id":"","url":"https://api.github.com/users/mattfarina","html_url":"https://github.com/mattfarina","followers_url":"https://api.github.com/users/mattfarina/followers","following_url":"https://api.github.com/users/mattfarina/following{/other_user}","gists_url":"https://api.github.com/users/mattfarina/gists{/gist_id}","starred_url":"https://api.github.com/users/mattfarina/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mattfarina/subscriptions","organizations_url":"https://api.github.com/users/mattfarina/orgs","repos_url":"https://api.github.com/users/mattfarina/repos","events_url":"https://api.github.com/users/mattfarina/events{/privacy}","received_events_url":"https://api.github.com/users/mattfarina/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2020-12-21T14:46:09Z","label":{"name":"bug","color":"e11d21"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/helm/helm/issues/comments/749010084","html_url":"https://github.com/helm/helm/issues/9150#issuecomment-749010084","issue_url":"https://api.github.com/repos/helm/helm/issues/9150","id":749010084,"node_id":"MDEyOklzc3VlQ29tbWVudDc0OTAxMDA4NA==","user":{"login":"mattfarina","id":62991,"node_id":"MDQ6VXNlcjYyOTkx","avatar_url":"https://avatars.githubusercontent.com/u/62991?v=4","gravatar_id":"","url":"https://api.github.com/users/mattfarina","html_url":"https://github.com/mattfarina","followers_url":"https://api.github.com/users/mattfarina/followers","following_url":"https://api.github.com/users/mattfarina/following{/other_user}","gists_url":"https://api.github.com/users/mattfarina/gists{/gist_id}","starred_url":"https://api.github.com/users/mattfarina/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mattfarina/subscriptions","organizations_url":"https://api.github.com/users/mattfarina/orgs","repos_url":"https://api.github.com/users/mattfarina/repos","events_url":"https://api.github.com/users/mattfarina/events{/privacy}","received_events_url":"https://api.github.com/users/mattfarina/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-21T14:46:38Z","updated_at":"2020-12-21T14:46:38Z","body":"@dastrobu Thanks for providing an easy way to reproduce this situation.","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/helm/helm/issues/comments/749010084/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mattfarina","id":62991,"node_id":"MDQ6VXNlcjYyOTkx","avatar_url":"https://avatars.githubusercontent.com/u/62991?v=4","gravatar_id":"","url":"https://api.github.com/users/mattfarina","html_url":"https://github.com/mattfarina","followers_url":"https://api.github.com/users/mattfarina/followers","following_url":"https://api.github.com/users/mattfarina/following{/other_user}","gists_url":"https://api.github.com/users/mattfarina/gists{/gist_id}","starred_url":"https://api.github.com/users/mattfarina/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mattfarina/subscriptions","organizations_url":"https://api.github.com/users/mattfarina/orgs","repos_url":"https://api.github.com/users/mattfarina/repos","events_url":"https://api.github.com/users/mattfarina/events{/privacy}","received_events_url":"https://api.github.com/users/mattfarina/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":4136273810,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDEzNjI3MzgxMA==","url":"https://api.github.com/repos/helm/helm/issues/events/4136273810","actor":{"login":"dastrobu","id":1847260,"node_id":"MDQ6VXNlcjE4NDcyNjA=","avatar_url":"https://avatars.githubusercontent.com/u/1847260?v=4","gravatar_id":"","url":"https://api.github.com/users/dastrobu","html_url":"https://github.com/dastrobu","followers_url":"https://api.github.com/users/dastrobu/followers","following_url":"https://api.github.com/users/dastrobu/following{/other_user}","gists_url":"https://api.github.com/users/dastrobu/gists{/gist_id}","starred_url":"https://api.github.com/users/dastrobu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dastrobu/subscriptions","organizations_url":"https://api.github.com/users/dastrobu/orgs","repos_url":"https://api.github.com/users/dastrobu/repos","events_url":"https://api.github.com/users/dastrobu/events{/privacy}","received_events_url":"https://api.github.com/users/dastrobu/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-12-21T14:46:38Z","performed_via_github_app":null},{"id":4136273815,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQxMzYyNzM4MTU=","url":"https://api.github.com/repos/helm/helm/issues/events/4136273815","actor":{"login":"dastrobu","id":1847260,"node_id":"MDQ6VXNlcjE4NDcyNjA=","avatar_url":"https://avatars.githubusercontent.com/u/1847260?v=4","gravatar_id":"","url":"https://api.github.com/users/dastrobu","html_url":"https://github.com/dastrobu","followers_url":"https://api.github.com/users/dastrobu/followers","following_url":"https://api.github.com/users/dastrobu/following{/other_user}","gists_url":"https://api.github.com/users/dastrobu/gists{/gist_id}","starred_url":"https://api.github.com/users/dastrobu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dastrobu/subscriptions","organizations_url":"https://api.github.com/users/dastrobu/orgs","repos_url":"https://api.github.com/users/dastrobu/repos","events_url":"https://api.github.com/users/dastrobu/events{/privacy}","received_events_url":"https://api.github.com/users/dastrobu/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-12-21T14:46:38Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/helm/helm/issues/comments/750319274","html_url":"https://github.com/helm/helm/issues/9150#issuecomment-750319274","issue_url":"https://api.github.com/repos/helm/helm/issues/9150","id":750319274,"node_id":"MDEyOklzc3VlQ29tbWVudDc1MDMxOTI3NA==","user":{"login":"dastrobu","id":1847260,"node_id":"MDQ6VXNlcjE4NDcyNjA=","avatar_url":"https://avatars.githubusercontent.com/u/1847260?v=4","gravatar_id":"","url":"https://api.github.com/users/dastrobu","html_url":"https://github.com/dastrobu","followers_url":"https://api.github.com/users/dastrobu/followers","following_url":"https://api.github.com/users/dastrobu/following{/other_user}","gists_url":"https://api.github.com/users/dastrobu/gists{/gist_id}","starred_url":"https://api.github.com/users/dastrobu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dastrobu/subscriptions","organizations_url":"https://api.github.com/users/dastrobu/orgs","repos_url":"https://api.github.com/users/dastrobu/repos","events_url":"https://api.github.com/users/dastrobu/events{/privacy}","received_events_url":"https://api.github.com/users/dastrobu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-23T14:16:54Z","updated_at":"2020-12-23T14:16:54Z","body":"Took a look at the code. I think the issue is in https://github.com/helm/helm/blob/59d5b94d35b24a500e30839a7c69f05d9ff077e2/pkg/chart/chart.go#L85 where the parent is set to the sub-chart. On loading the charts, the `grandchild` chart is loaded only once and the reference to the chart is shared between the two alias charts `foo` and `bar`, see https://github.com/helm/helm/blob/a374fffdd94242bfc514ad7dd4211997e1ce80ec/pkg/chart/loader/load.go#L196\r\nSo the last loaded sub-chart overrides the parent of `grandchild` and only this one will be rendered in https://github.com/helm/helm/blob/319240841575d97bbac0cc274c18fdb162b72919/pkg/engine/engine.go#L358\r\n\r\nThere might be several ways to fix this. If I have a good idea how, I'll provide a PR. ","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/helm/helm/issues/comments/750319274/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dastrobu","id":1847260,"node_id":"MDQ6VXNlcjE4NDcyNjA=","avatar_url":"https://avatars.githubusercontent.com/u/1847260?v=4","gravatar_id":"","url":"https://api.github.com/users/dastrobu","html_url":"https://github.com/dastrobu","followers_url":"https://api.github.com/users/dastrobu/followers","following_url":"https://api.github.com/users/dastrobu/following{/other_user}","gists_url":"https://api.github.com/users/dastrobu/gists{/gist_id}","starred_url":"https://api.github.com/users/dastrobu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dastrobu/subscriptions","organizations_url":"https://api.github.com/users/dastrobu/orgs","repos_url":"https://api.github.com/users/dastrobu/repos","events_url":"https://api.github.com/users/dastrobu/events{/privacy}","received_events_url":"https://api.github.com/users/dastrobu/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":4144650794,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDQxNDQ2NTA3OTQ=","url":"https://api.github.com/repos/helm/helm/issues/events/4144650794","actor":{"login":"dastrobu","id":1847260,"node_id":"MDQ6VXNlcjE4NDcyNjA=","avatar_url":"https://avatars.githubusercontent.com/u/1847260?v=4","gravatar_id":"","url":"https://api.github.com/users/dastrobu","html_url":"https://github.com/dastrobu","followers_url":"https://api.github.com/users/dastrobu/followers","following_url":"https://api.github.com/users/dastrobu/following{/other_user}","gists_url":"https://api.github.com/users/dastrobu/gists{/gist_id}","starred_url":"https://api.github.com/users/dastrobu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dastrobu/subscriptions","organizations_url":"https://api.github.com/users/dastrobu/orgs","repos_url":"https://api.github.com/users/dastrobu/repos","events_url":"https://api.github.com/users/dastrobu/events{/privacy}","received_events_url":"https://api.github.com/users/dastrobu/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"72fb27a4b0d146d5a14cc24b3c8df18da993deec","commit_url":"https://api.github.com/repos/dastrobu/helm/commits/72fb27a4b0d146d5a14cc24b3c8df18da993deec","created_at":"2020-12-23T15:41:40Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/helm/helm/issues/comments/750399370","html_url":"https://github.com/helm/helm/issues/9150#issuecomment-750399370","issue_url":"https://api.github.com/repos/helm/helm/issues/9150","id":750399370,"node_id":"MDEyOklzc3VlQ29tbWVudDc1MDM5OTM3MA==","user":{"login":"dastrobu","id":1847260,"node_id":"MDQ6VXNlcjE4NDcyNjA=","avatar_url":"https://avatars.githubusercontent.com/u/1847260?v=4","gravatar_id":"","url":"https://api.github.com/users/dastrobu","html_url":"https://github.com/dastrobu","followers_url":"https://api.github.com/users/dastrobu/followers","following_url":"https://api.github.com/users/dastrobu/following{/other_user}","gists_url":"https://api.github.com/users/dastrobu/gists{/gist_id}","starred_url":"https://api.github.com/users/dastrobu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dastrobu/subscriptions","organizations_url":"https://api.github.com/users/dastrobu/orgs","repos_url":"https://api.github.com/users/dastrobu/repos","events_url":"https://api.github.com/users/dastrobu/events{/privacy}","received_events_url":"https://api.github.com/users/dastrobu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-23T17:29:06Z","updated_at":"2020-12-23T17:29:06Z","body":"Fixing this seems to be harder than I expected. My first thought was to copy dependencies on resolving aliases, see https://github.com/dastrobu/helm/blob/72fb27a4b0d146d5a14cc24b3c8df18da993deec/pkg/chartutil/dependencies.go#L112\r\nHowever, this has the side effect that `ChartFullPath` of the dependencies will no longer return the file path of the referenced file (e.g. `parent/charts/child/charts/grandchild/templates/dummy.yaml`), instead it will contain the alias name (e.g. `parent/charts/foo/charts/grandchild/templates/dummy.yaml`), which is not a file path that can be resolved. \r\n\r\nSo I thought about keeping the chart data structures with the shared reference as is and don't rely on the `ChartFullPath` to create a parent id in https://github.com/helm/helm/blob/319240841575d97bbac0cc274c18fdb162b72919/pkg/engine/engine.go#L358. \r\nIt is relatively easy to create an id which respects the aliases without relying on the `ChartFullPath`. The issue is, when returning a map with keys other than file names from https://github.com/helm/helm/blob/319240841575d97bbac0cc274c18fdb162b72919/pkg/engine/engine.go#L330, this would also require to change keys of the `rendered` map in https://github.com/helm/helm/blob/319240841575d97bbac0cc274c18fdb162b72919/pkg/engine/engine.go#L260 (since there may be more than one rendering of a given template file). \r\nThere are multiple places relying on file paths as keys, see \r\nhttps://github.com/helm/helm/blob/dfb5a5e8ccc2ae41c50159e8cdcf5066b63ec931/pkg/lint/rules/template.go#L118, https://github.com/helm/helm/blob/ed5fba5142fa5a2366df143616e9161ff866a53d/pkg/action/action.go#L148 ff. \r\n\r\nIn general I guess it would make sense to separate ids for a template instance and file paths pointing to the template definition. Getting this right seems to be a bit more work than I expected. I could try to move on with this approach if this is the right direction. ","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/helm/helm/issues/comments/750399370/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dastrobu","id":1847260,"node_id":"MDQ6VXNlcjE4NDcyNjA=","avatar_url":"https://avatars.githubusercontent.com/u/1847260?v=4","gravatar_id":"","url":"https://api.github.com/users/dastrobu","html_url":"https://github.com/dastrobu","followers_url":"https://api.github.com/users/dastrobu/followers","following_url":"https://api.github.com/users/dastrobu/following{/other_user}","gists_url":"https://api.github.com/users/dastrobu/gists{/gist_id}","starred_url":"https://api.github.com/users/dastrobu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dastrobu/subscriptions","organizations_url":"https://api.github.com/users/dastrobu/orgs","repos_url":"https://api.github.com/users/dastrobu/repos","events_url":"https://api.github.com/users/dastrobu/events{/privacy}","received_events_url":"https://api.github.com/users/dastrobu/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":4144988506,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDQxNDQ5ODg1MDY=","url":"https://api.github.com/repos/helm/helm/issues/events/4144988506","actor":{"login":"dastrobu","id":1847260,"node_id":"MDQ6VXNlcjE4NDcyNjA=","avatar_url":"https://avatars.githubusercontent.com/u/1847260?v=4","gravatar_id":"","url":"https://api.github.com/users/dastrobu","html_url":"https://github.com/dastrobu","followers_url":"https://api.github.com/users/dastrobu/followers","following_url":"https://api.github.com/users/dastrobu/following{/other_user}","gists_url":"https://api.github.com/users/dastrobu/gists{/gist_id}","starred_url":"https://api.github.com/users/dastrobu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dastrobu/subscriptions","organizations_url":"https://api.github.com/users/dastrobu/orgs","repos_url":"https://api.github.com/users/dastrobu/repos","events_url":"https://api.github.com/users/dastrobu/events{/privacy}","received_events_url":"https://api.github.com/users/dastrobu/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"7830c95814ff31fd910de7bdb929cb107c6a603a","commit_url":"https://api.github.com/repos/dastrobu/helm/commits/7830c95814ff31fd910de7bdb929cb107c6a603a","created_at":"2020-12-23T17:30:32Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/helm/helm/issues/comments/750905208","html_url":"https://github.com/helm/helm/issues/9150#issuecomment-750905208","issue_url":"https://api.github.com/repos/helm/helm/issues/9150","id":750905208,"node_id":"MDEyOklzc3VlQ29tbWVudDc1MDkwNTIwOA==","user":{"login":"dastrobu","id":1847260,"node_id":"MDQ6VXNlcjE4NDcyNjA=","avatar_url":"https://avatars.githubusercontent.com/u/1847260?v=4","gravatar_id":"","url":"https://api.github.com/users/dastrobu","html_url":"https://github.com/dastrobu","followers_url":"https://api.github.com/users/dastrobu/followers","following_url":"https://api.github.com/users/dastrobu/following{/other_user}","gists_url":"https://api.github.com/users/dastrobu/gists{/gist_id}","starred_url":"https://api.github.com/users/dastrobu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dastrobu/subscriptions","organizations_url":"https://api.github.com/users/dastrobu/orgs","repos_url":"https://api.github.com/users/dastrobu/repos","events_url":"https://api.github.com/users/dastrobu/events{/privacy}","received_events_url":"https://api.github.com/users/dastrobu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-24T15:01:30Z","updated_at":"2020-12-24T15:01:30Z","body":"as it turns out there are a number of issue with aliases as subcharts: #2993, #3457, #3909, #4300, #4390, #7061, #7093, #7413, #7729. Not heaving read through all of them I assume some of them are related to the code analysis above. \r\nAnother idea to solve this would be to store charts under the alias name when downloaded, as proposed in https://github.com/helm/helm/issues/7413#issuecomment-575251655. That would make the dependency handling in Helm a bit easier. On the other side it would be a breaking change and many packed charts could break on implementing this change. Additionally, if someone maintains an umbrella chart with an unpacked subchart which he would like to instantiate several times via aliases, it would be required to copy the entire umpacked chart, which is not ideal. \r\nSo I guess we should keep the structure helm stores charts and handle aliases correctly. \r\nFor Helm 4, though, it should be considered to change the way charts are stored to handle name clashes from charts of different repos, references to the same chart but different versions and aliases to reference the same chart more than once. ","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/helm/helm/issues/comments/750905208/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dastrobu","id":1847260,"node_id":"MDQ6VXNlcjE4NDcyNjA=","avatar_url":"https://avatars.githubusercontent.com/u/1847260?v=4","gravatar_id":"","url":"https://api.github.com/users/dastrobu","html_url":"https://github.com/dastrobu","followers_url":"https://api.github.com/users/dastrobu/followers","following_url":"https://api.github.com/users/dastrobu/following{/other_user}","gists_url":"https://api.github.com/users/dastrobu/gists{/gist_id}","starred_url":"https://api.github.com/users/dastrobu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dastrobu/subscriptions","organizations_url":"https://api.github.com/users/dastrobu/orgs","repos_url":"https://api.github.com/users/dastrobu/repos","events_url":"https://api.github.com/users/dastrobu/events{/privacy}","received_events_url":"https://api.github.com/users/dastrobu/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"dastrobu","id":1847260,"node_id":"MDQ6VXNlcjE4NDcyNjA=","avatar_url":"https://avatars.githubusercontent.com/u/1847260?v=4","gravatar_id":"","url":"https://api.github.com/users/dastrobu","html_url":"https://github.com/dastrobu","followers_url":"https://api.github.com/users/dastrobu/followers","following_url":"https://api.github.com/users/dastrobu/following{/other_user}","gists_url":"https://api.github.com/users/dastrobu/gists{/gist_id}","starred_url":"https://api.github.com/users/dastrobu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dastrobu/subscriptions","organizations_url":"https://api.github.com/users/dastrobu/orgs","repos_url":"https://api.github.com/users/dastrobu/repos","events_url":"https://api.github.com/users/dastrobu/events{/privacy}","received_events_url":"https://api.github.com/users/dastrobu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-24T15:11:05Z","updated_at":"2020-12-24T15:11:05Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/helm/helm/issues/9169","repository_url":"https://api.github.com/repos/helm/helm","labels_url":"https://api.github.com/repos/helm/helm/issues/9169/labels{/name}","comments_url":"https://api.github.com/repos/helm/helm/issues/9169/comments","events_url":"https://api.github.com/repos/helm/helm/issues/9169/events","html_url":"https://github.com/helm/helm/issues/9169","id":774483170,"node_id":"MDU6SXNzdWU3NzQ0ODMxNzA=","number":9169,"title":"dependency name (and alias) clashes should be reported as errors","user":{"login":"dastrobu","id":1847260,"node_id":"MDQ6VXNlcjE4NDcyNjA=","avatar_url":"https://avatars.githubusercontent.com/u/1847260?v=4","gravatar_id":"","url":"https://api.github.com/users/dastrobu","html_url":"https://github.com/dastrobu","followers_url":"https://api.github.com/users/dastrobu/followers","following_url":"https://api.github.com/users/dastrobu/following{/other_user}","gists_url":"https://api.github.com/users/dastrobu/gists{/gist_id}","starred_url":"https://api.github.com/users/dastrobu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dastrobu/subscriptions","organizations_url":"https://api.github.com/users/dastrobu/orgs","repos_url":"https://api.github.com/users/dastrobu/repos","events_url":"https://api.github.com/users/dastrobu/events{/privacy}","received_events_url":"https://api.github.com/users/dastrobu/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":562692416,"node_id":"MDU6TGFiZWw1NjI2OTI0MTY=","url":"https://api.github.com/repos/helm/helm/labels/in%20progress","name":"in progress","color":"11DD11","default":false,"description":null},{"id":778135666,"node_id":"MDU6TGFiZWw3NzgxMzU2NjY=","url":"https://api.github.com/repos/helm/helm/labels/bug","name":"bug","color":"e11d21","default":true,"description":"Categorizes issue or PR as related to a bug."}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":17,"created_at":"2020-12-24T15:11:05Z","updated_at":"2024-01-08T20:56:30Z","closed_at":"2024-01-08T20:56:30Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":43723161,"node_id":"MDEwOlJlcG9zaXRvcnk0MzcyMzE2MQ==","name":"helm","full_name":"helm/helm","private":false,"owner":{"login":"helm","id":15859888,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE1ODU5ODg4","avatar_url":"https://avatars.githubusercontent.com/u/15859888?v=4","gravatar_id":"","url":"https://api.github.com/users/helm","html_url":"https://github.com/helm","followers_url":"https://api.github.com/users/helm/followers","following_url":"https://api.github.com/users/helm/following{/other_user}","gists_url":"https://api.github.com/users/helm/gists{/gist_id}","starred_url":"https://api.github.com/users/helm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/helm/subscriptions","organizations_url":"https://api.github.com/users/helm/orgs","repos_url":"https://api.github.com/users/helm/repos","events_url":"https://api.github.com/users/helm/events{/privacy}","received_events_url":"https://api.github.com/users/helm/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/helm/helm","description":"The Kubernetes Package Manager","fork":false,"url":"https://api.github.com/repos/helm/helm","forks_url":"https://api.github.com/repos/helm/helm/forks","keys_url":"https://api.github.com/repos/helm/helm/keys{/key_id}","collaborators_url":"https://api.github.com/repos/helm/helm/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/helm/helm/teams","hooks_url":"https://api.github.com/repos/helm/helm/hooks","issue_events_url":"https://api.github.com/repos/helm/helm/issues/events{/number}","events_url":"https://api.github.com/repos/helm/helm/events","assignees_url":"https://api.github.com/repos/helm/helm/assignees{/user}","branches_url":"https://api.github.com/repos/helm/helm/branches{/branch}","tags_url":"https://api.github.com/repos/helm/helm/tags","blobs_url":"https://api.github.com/repos/helm/helm/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/helm/helm/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/helm/helm/git/refs{/sha}","trees_url":"https://api.github.com/repos/helm/helm/git/trees{/sha}","statuses_url":"https://api.github.com/repos/helm/helm/statuses/{sha}","languages_url":"https://api.github.com/repos/helm/helm/languages","stargazers_url":"https://api.github.com/repos/helm/helm/stargazers","contributors_url":"https://api.github.com/repos/helm/helm/contributors","subscribers_url":"https://api.github.com/repos/helm/helm/subscribers","subscription_url":"https://api.github.com/repos/helm/helm/subscription","commits_url":"https://api.github.com/repos/helm/helm/commits{/sha}","git_commits_url":"https://api.github.com/repos/helm/helm/git/commits{/sha}","comments_url":"https://api.github.com/repos/helm/helm/comments{/number}","issue_comment_url":"https://api.github.com/repos/helm/helm/issues/comments{/number}","contents_url":"https://api.github.com/repos/helm/helm/contents/{+path}","compare_url":"https://api.github.com/repos/helm/helm/compare/{base}...{head}","merges_url":"https://api.github.com/repos/helm/helm/merges","archive_url":"https://api.github.com/repos/helm/helm/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/helm/helm/downloads","issues_url":"https://api.github.com/repos/helm/helm/issues{/number}","pulls_url":"https://api.github.com/repos/helm/helm/pulls{/number}","milestones_url":"https://api.github.com/repos/helm/helm/milestones{/number}","notifications_url":"https://api.github.com/repos/helm/helm/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/helm/helm/labels{/name}","releases_url":"https://api.github.com/repos/helm/helm/releases{/id}","deployments_url":"https://api.github.com/repos/helm/helm/deployments","created_at":"2015-10-06T01:07:32Z","updated_at":"2025-11-09T19:00:10Z","pushed_at":"2025-11-09T12:57:10Z","git_url":"git://github.com/helm/helm.git","ssh_url":"git@github.com:helm/helm.git","clone_url":"https://github.com/helm/helm.git","svn_url":"https://github.com/helm/helm","homepage":"https://helm.sh","size":25851,"stargazers_count":28930,"watchers_count":28930,"language":"Go","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":7393,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":448,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":true,"topics":["chart","charts","cncf","helm","kubernetes"],"visibility":"public","forks":7393,"open_issues":448,"watchers":28930,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"While trying to fix #9150 I found another class of issues with aliases and name clashes of dependencies. \r\n\r\nI am proposing to report the following situation as errors on linting (and template/installing/upgrading) a chart: \r\n\r\n```\r\ndependencies:\r\n- name: foo\r\n  alias: baz # ← baz used twice\r\n  version: 1.0.0\r\n- name: bar\r\n  alias: baz # ← baz used twice\r\n  version: 1.0.0\r\n```\r\n```\r\ndependencies:\r\n- name: foo\r\n  alias: bar # ← shadows chart below\r\n  version: 1.0.0\r\n- name: bar\r\n  version: 1.0.0\r\n```\r\n```\r\ndependencies:\r\n- name: foo\r\n  version: 1.0.0\r\n- name: foo # ← chart with same name as above (although version or repo will be different, this will not work currently)\r\n  version: 1.2.3\r\n```\r\nWhile the last example may be working in the future (see #7413), I can't see any valid use case for the first two examples. \r\nCurrently Helm renders templates, resulting in more or less undefined behaviour. Some templates will override each other, others won't, depending on file names in the actual charts and on the chart names itself. \r\n\r\nOutput of `helm version`:\r\n`version.BuildInfo{Version:\"v3.4.2\", GitCommit:\"23dd3af5e19a02d4f4baa5b2f242645a1a3af629\", GitTreeState:\"clean\", GoVersion:\"go1.14.13\"}`\r\n\r\n","reactions":{"url":"https://api.github.com/repos/helm/helm/issues/9169/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/helm/helm/issues/9169/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"id":4152567120,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDQxNTI1NjcxMjA=","url":"https://api.github.com/repos/helm/helm/issues/events/4152567120","actor":{"login":"dastrobu","id":1847260,"node_id":"MDQ6VXNlcjE4NDcyNjA=","avatar_url":"https://avatars.githubusercontent.com/u/1847260?v=4","gravatar_id":"","url":"https://api.github.com/users/dastrobu","html_url":"https://github.com/dastrobu","followers_url":"https://api.github.com/users/dastrobu/followers","following_url":"https://api.github.com/users/dastrobu/following{/other_user}","gists_url":"https://api.github.com/users/dastrobu/gists{/gist_id}","starred_url":"https://api.github.com/users/dastrobu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dastrobu/subscriptions","organizations_url":"https://api.github.com/users/dastrobu/orgs","repos_url":"https://api.github.com/users/dastrobu/repos","events_url":"https://api.github.com/users/dastrobu/events{/privacy}","received_events_url":"https://api.github.com/users/dastrobu/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"6a441a6b7d0b8f511bf166e3db7f9b960306d4f5","commit_url":"https://api.github.com/repos/dastrobu/helm/commits/6a441a6b7d0b8f511bf166e3db7f9b960306d4f5","created_at":"2020-12-28T17:02:21Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/helm/helm/issues/comments/751790716","html_url":"https://github.com/helm/helm/issues/9150#issuecomment-751790716","issue_url":"https://api.github.com/repos/helm/helm/issues/9150","id":751790716,"node_id":"MDEyOklzc3VlQ29tbWVudDc1MTc5MDcxNg==","user":{"login":"dastrobu","id":1847260,"node_id":"MDQ6VXNlcjE4NDcyNjA=","avatar_url":"https://avatars.githubusercontent.com/u/1847260?v=4","gravatar_id":"","url":"https://api.github.com/users/dastrobu","html_url":"https://github.com/dastrobu","followers_url":"https://api.github.com/users/dastrobu/followers","following_url":"https://api.github.com/users/dastrobu/following{/other_user}","gists_url":"https://api.github.com/users/dastrobu/gists{/gist_id}","starred_url":"https://api.github.com/users/dastrobu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dastrobu/subscriptions","organizations_url":"https://api.github.com/users/dastrobu/orgs","repos_url":"https://api.github.com/users/dastrobu/repos","events_url":"https://api.github.com/users/dastrobu/events{/privacy}","received_events_url":"https://api.github.com/users/dastrobu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-28T17:09:14Z","updated_at":"2020-12-28T17:09:14Z","body":"after digging through the code I think using the alias names for `ChartFullPath` is the best we can do, currently. When looking at the `# Source` comments of the current Helm output we see that the situation is a bit inconsistent: \r\n```\r\n---\r\n# Source: parent/charts/bar/templates/dummy.yaml\r\n...\r\n---\r\n# Source: parent/charts/child/charts/grandchild/templates/dummy.yaml\r\n...\r\n---\r\n# Source: parent/charts/foo/templates/dummy.yaml\r\n...\r\n```\r\nWhile the child level paths are constructed from alias names `.../foo/...` and `.../bar/...`, on the grandchild level, no alias names are employed: `.../child/...`. In general I would prefer if source paths would show the actual paths where I could find the files on my file system (which is not the case for the `foo` and `bar` paths). Since this would require quite some changes to the code base, I suggest to use alias names consistently in all paths for now and document this behaviour. \r\n\r\nOn the long run it might be a good idea to have a clear separation between names and aliases in the code base, so that it is always clear what the path to a chart on the file system is, and what a path in the dependency tree ist. Mixing names and aliases by e.g. simply overriding the names of charts on processing dependencies does not seem to be a good idea from my point of view:\r\nhttps://github.com/helm/helm/blob/6a441a6b7d0b8f511bf166e3db7f9b960306d4f5/pkg/chartutil/dependencies.go#L118\r\nhttps://github.com/helm/helm/blob/6a441a6b7d0b8f511bf166e3db7f9b960306d4f5/pkg/chartutil/dependencies.go#L152\r\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/helm/helm/issues/comments/751790716/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dastrobu","id":1847260,"node_id":"MDQ6VXNlcjE4NDcyNjA=","avatar_url":"https://avatars.githubusercontent.com/u/1847260?v=4","gravatar_id":"","url":"https://api.github.com/users/dastrobu","html_url":"https://github.com/dastrobu","followers_url":"https://api.github.com/users/dastrobu/followers","following_url":"https://api.github.com/users/dastrobu/following{/other_user}","gists_url":"https://api.github.com/users/dastrobu/gists{/gist_id}","starred_url":"https://api.github.com/users/dastrobu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dastrobu/subscriptions","organizations_url":"https://api.github.com/users/dastrobu/orgs","repos_url":"https://api.github.com/users/dastrobu/repos","events_url":"https://api.github.com/users/dastrobu/events{/privacy}","received_events_url":"https://api.github.com/users/dastrobu/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"dastrobu","id":1847260,"node_id":"MDQ6VXNlcjE4NDcyNjA=","avatar_url":"https://avatars.githubusercontent.com/u/1847260?v=4","gravatar_id":"","url":"https://api.github.com/users/dastrobu","html_url":"https://github.com/dastrobu","followers_url":"https://api.github.com/users/dastrobu/followers","following_url":"https://api.github.com/users/dastrobu/following{/other_user}","gists_url":"https://api.github.com/users/dastrobu/gists{/gist_id}","starred_url":"https://api.github.com/users/dastrobu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dastrobu/subscriptions","organizations_url":"https://api.github.com/users/dastrobu/orgs","repos_url":"https://api.github.com/users/dastrobu/repos","events_url":"https://api.github.com/users/dastrobu/events{/privacy}","received_events_url":"https://api.github.com/users/dastrobu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-28T17:12:05Z","updated_at":"2020-12-28T17:12:05Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/helm/helm/issues/9175","repository_url":"https://api.github.com/repos/helm/helm","labels_url":"https://api.github.com/repos/helm/helm/issues/9175/labels{/name}","comments_url":"https://api.github.com/repos/helm/helm/issues/9175/comments","events_url":"https://api.github.com/repos/helm/helm/issues/9175/events","html_url":"https://github.com/helm/helm/pull/9175","id":775500264,"node_id":"MDExOlB1bGxSZXF1ZXN0NTQ2MTY4ODQ3","number":9175,"title":"fix: copy dependencies on aliasing to avoid sharing chart references on multiply aliased dependencies","user":{"login":"dastrobu","id":1847260,"node_id":"MDQ6VXNlcjE4NDcyNjA=","avatar_url":"https://avatars.githubusercontent.com/u/1847260?v=4","gravatar_id":"","url":"https://api.github.com/users/dastrobu","html_url":"https://github.com/dastrobu","followers_url":"https://api.github.com/users/dastrobu/followers","following_url":"https://api.github.com/users/dastrobu/following{/other_user}","gists_url":"https://api.github.com/users/dastrobu/gists{/gist_id}","starred_url":"https://api.github.com/users/dastrobu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dastrobu/subscriptions","organizations_url":"https://api.github.com/users/dastrobu/orgs","repos_url":"https://api.github.com/users/dastrobu/repos","events_url":"https://api.github.com/users/dastrobu/events{/privacy}","received_events_url":"https://api.github.com/users/dastrobu/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":676353308,"node_id":"MDU6TGFiZWw2NzYzNTMzMDg=","url":"https://api.github.com/repos/helm/helm/labels/size/L","name":"size/L","color":"ee9900","default":false,"description":"Denotes a PR that changes 100-499 lines, ignoring generated files."},{"id":778135666,"node_id":"MDU6TGFiZWw3NzgxMzU2NjY=","url":"https://api.github.com/repos/helm/helm/labels/bug","name":"bug","color":"e11d21","default":true,"description":"Categorizes issue or PR as related to a bug."},{"id":1206804466,"node_id":"MDU6TGFiZWwxMjA2ODA0NDY2","url":"https://api.github.com/repos/helm/helm/labels/Needs%20v3%20backport","name":"Needs v3 backport","color":"b31cce","default":false,"description":"Label PRs for v4/main, which are still applicable to v3 so need a separate backport PR"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":26,"created_at":"2020-12-28T17:12:05Z","updated_at":"2025-04-25T12:46:36Z","closed_at":"2025-04-23T18:40:52Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":43723161,"node_id":"MDEwOlJlcG9zaXRvcnk0MzcyMzE2MQ==","name":"helm","full_name":"helm/helm","private":false,"owner":{"login":"helm","id":15859888,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE1ODU5ODg4","avatar_url":"https://avatars.githubusercontent.com/u/15859888?v=4","gravatar_id":"","url":"https://api.github.com/users/helm","html_url":"https://github.com/helm","followers_url":"https://api.github.com/users/helm/followers","following_url":"https://api.github.com/users/helm/following{/other_user}","gists_url":"https://api.github.com/users/helm/gists{/gist_id}","starred_url":"https://api.github.com/users/helm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/helm/subscriptions","organizations_url":"https://api.github.com/users/helm/orgs","repos_url":"https://api.github.com/users/helm/repos","events_url":"https://api.github.com/users/helm/events{/privacy}","received_events_url":"https://api.github.com/users/helm/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/helm/helm","description":"The Kubernetes Package Manager","fork":false,"url":"https://api.github.com/repos/helm/helm","forks_url":"https://api.github.com/repos/helm/helm/forks","keys_url":"https://api.github.com/repos/helm/helm/keys{/key_id}","collaborators_url":"https://api.github.com/repos/helm/helm/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/helm/helm/teams","hooks_url":"https://api.github.com/repos/helm/helm/hooks","issue_events_url":"https://api.github.com/repos/helm/helm/issues/events{/number}","events_url":"https://api.github.com/repos/helm/helm/events","assignees_url":"https://api.github.com/repos/helm/helm/assignees{/user}","branches_url":"https://api.github.com/repos/helm/helm/branches{/branch}","tags_url":"https://api.github.com/repos/helm/helm/tags","blobs_url":"https://api.github.com/repos/helm/helm/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/helm/helm/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/helm/helm/git/refs{/sha}","trees_url":"https://api.github.com/repos/helm/helm/git/trees{/sha}","statuses_url":"https://api.github.com/repos/helm/helm/statuses/{sha}","languages_url":"https://api.github.com/repos/helm/helm/languages","stargazers_url":"https://api.github.com/repos/helm/helm/stargazers","contributors_url":"https://api.github.com/repos/helm/helm/contributors","subscribers_url":"https://api.github.com/repos/helm/helm/subscribers","subscription_url":"https://api.github.com/repos/helm/helm/subscription","commits_url":"https://api.github.com/repos/helm/helm/commits{/sha}","git_commits_url":"https://api.github.com/repos/helm/helm/git/commits{/sha}","comments_url":"https://api.github.com/repos/helm/helm/comments{/number}","issue_comment_url":"https://api.github.com/repos/helm/helm/issues/comments{/number}","contents_url":"https://api.github.com/repos/helm/helm/contents/{+path}","compare_url":"https://api.github.com/repos/helm/helm/compare/{base}...{head}","merges_url":"https://api.github.com/repos/helm/helm/merges","archive_url":"https://api.github.com/repos/helm/helm/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/helm/helm/downloads","issues_url":"https://api.github.com/repos/helm/helm/issues{/number}","pulls_url":"https://api.github.com/repos/helm/helm/pulls{/number}","milestones_url":"https://api.github.com/repos/helm/helm/milestones{/number}","notifications_url":"https://api.github.com/repos/helm/helm/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/helm/helm/labels{/name}","releases_url":"https://api.github.com/repos/helm/helm/releases{/id}","deployments_url":"https://api.github.com/repos/helm/helm/deployments","created_at":"2015-10-06T01:07:32Z","updated_at":"2025-11-09T19:00:10Z","pushed_at":"2025-11-09T12:57:10Z","git_url":"git://github.com/helm/helm.git","ssh_url":"git@github.com:helm/helm.git","clone_url":"https://github.com/helm/helm.git","svn_url":"https://github.com/helm/helm","homepage":"https://helm.sh","size":25851,"stargazers_count":28930,"watchers_count":28930,"language":"Go","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":7393,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":448,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":true,"topics":["chart","charts","cncf","helm","kubernetes"],"visibility":"public","forks":7393,"open_issues":448,"watchers":28930,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/helm/helm/pulls/9175","html_url":"https://github.com/helm/helm/pull/9175","diff_url":"https://github.com/helm/helm/pull/9175.diff","patch_url":"https://github.com/helm/helm/pull/9175.patch","merged_at":"2025-04-23T18:40:52Z"},"body":"Dependencies keep a reference on their parent chart, which breaks if a chart reference is shared among multiple aliases.\r\nBy copying the dependencies, parent information can be set correctly to render the templates as expected later on.\r\n\r\nNote that this change will make ChartFullPath return a different path for sub-subcharts. It will contain the alias names instead of the path to the chart files which makes it consistent with paths to templates on the subchart level.\r\n\r\nCloses #9150\r\n\r\nSigned-off-by: Daniel Strobusch <1847260+dastrobu@users.noreply.github.com>\r\n\r\n**If applicable**:\r\n- [ ] this PR contains documentation\r\n- [x] this PR contains unit tests\r\n- [x] this PR has been tested for backwards compatibility\r\n","reactions":{"url":"https://api.github.com/repos/helm/helm/issues/9175/reactions","total_count":19,"+1":19,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/helm/helm/issues/9175/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/helm/helm/issues/comments/767023875","html_url":"https://github.com/helm/helm/issues/9150#issuecomment-767023875","issue_url":"https://api.github.com/repos/helm/helm/issues/9150","id":767023875,"node_id":"MDEyOklzc3VlQ29tbWVudDc2NzAyMzg3NQ==","user":{"login":"dastrobu","id":1847260,"node_id":"MDQ6VXNlcjE4NDcyNjA=","avatar_url":"https://avatars.githubusercontent.com/u/1847260?v=4","gravatar_id":"","url":"https://api.github.com/users/dastrobu","html_url":"https://github.com/dastrobu","followers_url":"https://api.github.com/users/dastrobu/followers","following_url":"https://api.github.com/users/dastrobu/following{/other_user}","gists_url":"https://api.github.com/users/dastrobu/gists{/gist_id}","starred_url":"https://api.github.com/users/dastrobu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dastrobu/subscriptions","organizations_url":"https://api.github.com/users/dastrobu/orgs","repos_url":"https://api.github.com/users/dastrobu/repos","events_url":"https://api.github.com/users/dastrobu/events{/privacy}","received_events_url":"https://api.github.com/users/dastrobu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-25T18:33:19Z","updated_at":"2021-01-25T18:33:19Z","body":"@mattfarina any chance we get this on the 3.5.1 milestone? \r\nBug was described, code analysed and fix proposed. As you can see from the PR's comments I am not the only one affected by this issue. Without review from the maintainers, I think there is not much the community can do here anymore. ","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/helm/helm/issues/comments/767023875/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dastrobu","id":1847260,"node_id":"MDQ6VXNlcjE4NDcyNjA=","avatar_url":"https://avatars.githubusercontent.com/u/1847260?v=4","gravatar_id":"","url":"https://api.github.com/users/dastrobu","html_url":"https://github.com/dastrobu","followers_url":"https://api.github.com/users/dastrobu/followers","following_url":"https://api.github.com/users/dastrobu/following{/other_user}","gists_url":"https://api.github.com/users/dastrobu/gists{/gist_id}","starred_url":"https://api.github.com/users/dastrobu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dastrobu/subscriptions","organizations_url":"https://api.github.com/users/dastrobu/orgs","repos_url":"https://api.github.com/users/dastrobu/repos","events_url":"https://api.github.com/users/dastrobu/events{/privacy}","received_events_url":"https://api.github.com/users/dastrobu/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":4247112467,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDI0NzExMjQ2Nw==","url":"https://api.github.com/repos/helm/helm/issues/events/4247112467","actor":{"login":"mattfarina","id":62991,"node_id":"MDQ6VXNlcjYyOTkx","avatar_url":"https://avatars.githubusercontent.com/u/62991?v=4","gravatar_id":"","url":"https://api.github.com/users/mattfarina","html_url":"https://github.com/mattfarina","followers_url":"https://api.github.com/users/mattfarina/followers","following_url":"https://api.github.com/users/mattfarina/following{/other_user}","gists_url":"https://api.github.com/users/mattfarina/gists{/gist_id}","starred_url":"https://api.github.com/users/mattfarina/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mattfarina/subscriptions","organizations_url":"https://api.github.com/users/mattfarina/orgs","repos_url":"https://api.github.com/users/mattfarina/repos","events_url":"https://api.github.com/users/mattfarina/events{/privacy}","received_events_url":"https://api.github.com/users/mattfarina/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-01-25T18:33:20Z","performed_via_github_app":null},{"id":4247112481,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQyNDcxMTI0ODE=","url":"https://api.github.com/repos/helm/helm/issues/events/4247112481","actor":{"login":"mattfarina","id":62991,"node_id":"MDQ6VXNlcjYyOTkx","avatar_url":"https://avatars.githubusercontent.com/u/62991?v=4","gravatar_id":"","url":"https://api.github.com/users/mattfarina","html_url":"https://github.com/mattfarina","followers_url":"https://api.github.com/users/mattfarina/followers","following_url":"https://api.github.com/users/mattfarina/following{/other_user}","gists_url":"https://api.github.com/users/mattfarina/gists{/gist_id}","starred_url":"https://api.github.com/users/mattfarina/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mattfarina/subscriptions","organizations_url":"https://api.github.com/users/mattfarina/orgs","repos_url":"https://api.github.com/users/mattfarina/repos","events_url":"https://api.github.com/users/mattfarina/events{/privacy}","received_events_url":"https://api.github.com/users/mattfarina/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-01-25T18:33:20Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/helm/helm/issues/comments/809133455","html_url":"https://github.com/helm/helm/issues/9150#issuecomment-809133455","issue_url":"https://api.github.com/repos/helm/helm/issues/9150","id":809133455,"node_id":"MDEyOklzc3VlQ29tbWVudDgwOTEzMzQ1NQ==","user":{"login":"dastrobu","id":1847260,"node_id":"MDQ6VXNlcjE4NDcyNjA=","avatar_url":"https://avatars.githubusercontent.com/u/1847260?v=4","gravatar_id":"","url":"https://api.github.com/users/dastrobu","html_url":"https://github.com/dastrobu","followers_url":"https://api.github.com/users/dastrobu/followers","following_url":"https://api.github.com/users/dastrobu/following{/other_user}","gists_url":"https://api.github.com/users/dastrobu/gists{/gist_id}","starred_url":"https://api.github.com/users/dastrobu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dastrobu/subscriptions","organizations_url":"https://api.github.com/users/dastrobu/orgs","repos_url":"https://api.github.com/users/dastrobu/repos","events_url":"https://api.github.com/users/dastrobu/events{/privacy}","received_events_url":"https://api.github.com/users/dastrobu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-29T07:16:05Z","updated_at":"2021-03-29T07:16:05Z","body":"@sbose78  and @mattfarina there is an open PR (#9175) on this issue open for a few months. Anything I need to do, to get someone to review this PR?","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/helm/helm/issues/comments/809133455/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dastrobu","id":1847260,"node_id":"MDQ6VXNlcjE4NDcyNjA=","avatar_url":"https://avatars.githubusercontent.com/u/1847260?v=4","gravatar_id":"","url":"https://api.github.com/users/dastrobu","html_url":"https://github.com/dastrobu","followers_url":"https://api.github.com/users/dastrobu/followers","following_url":"https://api.github.com/users/dastrobu/following{/other_user}","gists_url":"https://api.github.com/users/dastrobu/gists{/gist_id}","starred_url":"https://api.github.com/users/dastrobu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dastrobu/subscriptions","organizations_url":"https://api.github.com/users/dastrobu/orgs","repos_url":"https://api.github.com/users/dastrobu/repos","events_url":"https://api.github.com/users/dastrobu/events{/privacy}","received_events_url":"https://api.github.com/users/dastrobu/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":4519692136,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDUxOTY5MjEzNg==","url":"https://api.github.com/repos/helm/helm/issues/events/4519692136","actor":{"login":"mattfarina","id":62991,"node_id":"MDQ6VXNlcjYyOTkx","avatar_url":"https://avatars.githubusercontent.com/u/62991?v=4","gravatar_id":"","url":"https://api.github.com/users/mattfarina","html_url":"https://github.com/mattfarina","followers_url":"https://api.github.com/users/mattfarina/followers","following_url":"https://api.github.com/users/mattfarina/following{/other_user}","gists_url":"https://api.github.com/users/mattfarina/gists{/gist_id}","starred_url":"https://api.github.com/users/mattfarina/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mattfarina/subscriptions","organizations_url":"https://api.github.com/users/mattfarina/orgs","repos_url":"https://api.github.com/users/mattfarina/repos","events_url":"https://api.github.com/users/mattfarina/events{/privacy}","received_events_url":"https://api.github.com/users/mattfarina/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-03-29T07:16:05Z","performed_via_github_app":null},{"id":4519692141,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQ1MTk2OTIxNDE=","url":"https://api.github.com/repos/helm/helm/issues/events/4519692141","actor":{"login":"mattfarina","id":62991,"node_id":"MDQ6VXNlcjYyOTkx","avatar_url":"https://avatars.githubusercontent.com/u/62991?v=4","gravatar_id":"","url":"https://api.github.com/users/mattfarina","html_url":"https://github.com/mattfarina","followers_url":"https://api.github.com/users/mattfarina/followers","following_url":"https://api.github.com/users/mattfarina/following{/other_user}","gists_url":"https://api.github.com/users/mattfarina/gists{/gist_id}","starred_url":"https://api.github.com/users/mattfarina/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mattfarina/subscriptions","organizations_url":"https://api.github.com/users/mattfarina/orgs","repos_url":"https://api.github.com/users/mattfarina/repos","events_url":"https://api.github.com/users/mattfarina/events{/privacy}","received_events_url":"https://api.github.com/users/mattfarina/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-03-29T07:16:05Z","performed_via_github_app":null},{"id":4519692145,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDUxOTY5MjE0NQ==","url":"https://api.github.com/repos/helm/helm/issues/events/4519692145","actor":{"login":"sbose78","id":545280,"node_id":"MDQ6VXNlcjU0NTI4MA==","avatar_url":"https://avatars.githubusercontent.com/u/545280?v=4","gravatar_id":"","url":"https://api.github.com/users/sbose78","html_url":"https://github.com/sbose78","followers_url":"https://api.github.com/users/sbose78/followers","following_url":"https://api.github.com/users/sbose78/following{/other_user}","gists_url":"https://api.github.com/users/sbose78/gists{/gist_id}","starred_url":"https://api.github.com/users/sbose78/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sbose78/subscriptions","organizations_url":"https://api.github.com/users/sbose78/orgs","repos_url":"https://api.github.com/users/sbose78/repos","events_url":"https://api.github.com/users/sbose78/events{/privacy}","received_events_url":"https://api.github.com/users/sbose78/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-03-29T07:16:05Z","performed_via_github_app":null},{"id":4519692148,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQ1MTk2OTIxNDg=","url":"https://api.github.com/repos/helm/helm/issues/events/4519692148","actor":{"login":"sbose78","id":545280,"node_id":"MDQ6VXNlcjU0NTI4MA==","avatar_url":"https://avatars.githubusercontent.com/u/545280?v=4","gravatar_id":"","url":"https://api.github.com/users/sbose78","html_url":"https://github.com/sbose78","followers_url":"https://api.github.com/users/sbose78/followers","following_url":"https://api.github.com/users/sbose78/following{/other_user}","gists_url":"https://api.github.com/users/sbose78/gists{/gist_id}","starred_url":"https://api.github.com/users/sbose78/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sbose78/subscriptions","organizations_url":"https://api.github.com/users/sbose78/orgs","repos_url":"https://api.github.com/users/sbose78/repos","events_url":"https://api.github.com/users/sbose78/events{/privacy}","received_events_url":"https://api.github.com/users/sbose78/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-03-29T07:16:05Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/helm/helm/issues/comments/869246191","html_url":"https://github.com/helm/helm/issues/9150#issuecomment-869246191","issue_url":"https://api.github.com/repos/helm/helm/issues/9150","id":869246191,"node_id":"MDEyOklzc3VlQ29tbWVudDg2OTI0NjE5MQ==","user":{"login":"github-actions[bot]","id":41898282,"node_id":"MDM6Qm90NDE4OTgyODI=","avatar_url":"https://avatars.githubusercontent.com/in/15368?v=4","gravatar_id":"","url":"https://api.github.com/users/github-actions%5Bbot%5D","html_url":"https://github.com/apps/github-actions","followers_url":"https://api.github.com/users/github-actions%5Bbot%5D/followers","following_url":"https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/github-actions%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/github-actions%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/github-actions%5Bbot%5D/repos","events_url":"https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/github-actions%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2021-06-28T00:06:58Z","updated_at":"2021-06-28T00:06:58Z","body":"This issue has been marked as stale because it has been open for 90 days with no activity. This thread will be automatically closed in 30 days if no further activity occurs.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/helm/helm/issues/comments/869246191/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"github-actions[bot]","id":41898282,"node_id":"MDM6Qm90NDE4OTgyODI=","avatar_url":"https://avatars.githubusercontent.com/in/15368?v=4","gravatar_id":"","url":"https://api.github.com/users/github-actions%5Bbot%5D","html_url":"https://github.com/apps/github-actions","followers_url":"https://api.github.com/users/github-actions%5Bbot%5D/followers","following_url":"https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/github-actions%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/github-actions%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/github-actions%5Bbot%5D/repos","events_url":"https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/github-actions%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false}},{"id":4944466737,"node_id":"MDEyOkxhYmVsZWRFdmVudDQ5NDQ0NjY3Mzc=","url":"https://api.github.com/repos/helm/helm/issues/events/4944466737","actor":{"login":"github-actions[bot]","id":41898282,"node_id":"MDM6Qm90NDE4OTgyODI=","avatar_url":"https://avatars.githubusercontent.com/in/15368?v=4","gravatar_id":"","url":"https://api.github.com/users/github-actions%5Bbot%5D","html_url":"https://github.com/apps/github-actions","followers_url":"https://api.github.com/users/github-actions%5Bbot%5D/followers","following_url":"https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/github-actions%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/github-actions%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/github-actions%5Bbot%5D/repos","events_url":"https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/github-actions%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2021-06-28T00:06:59Z","label":{"name":"Stale","color":"ededed"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/helm/helm/issues/comments/869452695","html_url":"https://github.com/helm/helm/issues/9150#issuecomment-869452695","issue_url":"https://api.github.com/repos/helm/helm/issues/9150","id":869452695,"node_id":"MDEyOklzc3VlQ29tbWVudDg2OTQ1MjY5NQ==","user":{"login":"dastrobu","id":1847260,"node_id":"MDQ6VXNlcjE4NDcyNjA=","avatar_url":"https://avatars.githubusercontent.com/u/1847260?v=4","gravatar_id":"","url":"https://api.github.com/users/dastrobu","html_url":"https://github.com/dastrobu","followers_url":"https://api.github.com/users/dastrobu/followers","following_url":"https://api.github.com/users/dastrobu/following{/other_user}","gists_url":"https://api.github.com/users/dastrobu/gists{/gist_id}","starred_url":"https://api.github.com/users/dastrobu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dastrobu/subscriptions","organizations_url":"https://api.github.com/users/dastrobu/orgs","repos_url":"https://api.github.com/users/dastrobu/repos","events_url":"https://api.github.com/users/dastrobu/events{/privacy}","received_events_url":"https://api.github.com/users/dastrobu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-06-28T07:44:13Z","updated_at":"2021-06-28T07:44:13Z","body":"remove \"Stale\".\r\n\r\nPR still waiting for review....","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/helm/helm/issues/comments/869452695/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dastrobu","id":1847260,"node_id":"MDQ6VXNlcjE4NDcyNjA=","avatar_url":"https://avatars.githubusercontent.com/u/1847260?v=4","gravatar_id":"","url":"https://api.github.com/users/dastrobu","html_url":"https://github.com/dastrobu","followers_url":"https://api.github.com/users/dastrobu/followers","following_url":"https://api.github.com/users/dastrobu/following{/other_user}","gists_url":"https://api.github.com/users/dastrobu/gists{/gist_id}","starred_url":"https://api.github.com/users/dastrobu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dastrobu/subscriptions","organizations_url":"https://api.github.com/users/dastrobu/orgs","repos_url":"https://api.github.com/users/dastrobu/repos","events_url":"https://api.github.com/users/dastrobu/events{/privacy}","received_events_url":"https://api.github.com/users/dastrobu/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":4950404741,"node_id":"MDE0OlVubGFiZWxlZEV2ZW50NDk1MDQwNDc0MQ==","url":"https://api.github.com/repos/helm/helm/issues/events/4950404741","actor":{"login":"github-actions[bot]","id":41898282,"node_id":"MDM6Qm90NDE4OTgyODI=","avatar_url":"https://avatars.githubusercontent.com/in/15368?v=4","gravatar_id":"","url":"https://api.github.com/users/github-actions%5Bbot%5D","html_url":"https://github.com/apps/github-actions","followers_url":"https://api.github.com/users/github-actions%5Bbot%5D/followers","following_url":"https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/github-actions%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/github-actions%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/github-actions%5Bbot%5D/repos","events_url":"https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/github-actions%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"event":"unlabeled","commit_id":null,"commit_url":null,"created_at":"2021-06-29T00:06:10Z","label":{"name":"Stale","color":"ededed"},"performed_via_github_app":null},{"actor":{"login":"vflaux","id":38909103,"node_id":"MDQ6VXNlcjM4OTA5MTAz","avatar_url":"https://avatars.githubusercontent.com/u/38909103?v=4","gravatar_id":"","url":"https://api.github.com/users/vflaux","html_url":"https://github.com/vflaux","followers_url":"https://api.github.com/users/vflaux/followers","following_url":"https://api.github.com/users/vflaux/following{/other_user}","gists_url":"https://api.github.com/users/vflaux/gists{/gist_id}","starred_url":"https://api.github.com/users/vflaux/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vflaux/subscriptions","organizations_url":"https://api.github.com/users/vflaux/orgs","repos_url":"https://api.github.com/users/vflaux/repos","events_url":"https://api.github.com/users/vflaux/events{/privacy}","received_events_url":"https://api.github.com/users/vflaux/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-09-22T23:57:53Z","updated_at":"2021-09-22T23:57:53Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/helm/helm/issues/10160","repository_url":"https://api.github.com/repos/helm/helm","labels_url":"https://api.github.com/repos/helm/helm/issues/10160/labels{/name}","comments_url":"https://api.github.com/repos/helm/helm/issues/10160/comments","events_url":"https://api.github.com/repos/helm/helm/issues/10160/events","html_url":"https://github.com/helm/helm/issues/10160","id":1001489037,"node_id":"I_kwDOApspmc47sYKN","number":10160,"title":"[Bug] 3.7.0 - Helm generates an incorrect chart tree in some cases","user":{"login":"tavlima","id":1283363,"node_id":"MDQ6VXNlcjEyODMzNjM=","avatar_url":"https://avatars.githubusercontent.com/u/1283363?v=4","gravatar_id":"","url":"https://api.github.com/users/tavlima","html_url":"https://github.com/tavlima","followers_url":"https://api.github.com/users/tavlima/followers","following_url":"https://api.github.com/users/tavlima/following{/other_user}","gists_url":"https://api.github.com/users/tavlima/gists{/gist_id}","starred_url":"https://api.github.com/users/tavlima/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tavlima/subscriptions","organizations_url":"https://api.github.com/users/tavlima/orgs","repos_url":"https://api.github.com/users/tavlima/repos","events_url":"https://api.github.com/users/tavlima/events{/privacy}","received_events_url":"https://api.github.com/users/tavlima/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":269212356,"node_id":"MDU6TGFiZWwyNjkyMTIzNTY=","url":"https://api.github.com/repos/helm/helm/labels/question/support","name":"question/support","color":"cc317c","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2021-09-20T22:08:52Z","updated_at":"2021-09-23T03:55:44Z","closed_at":"2021-09-23T03:55:44Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":43723161,"node_id":"MDEwOlJlcG9zaXRvcnk0MzcyMzE2MQ==","name":"helm","full_name":"helm/helm","private":false,"owner":{"login":"helm","id":15859888,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE1ODU5ODg4","avatar_url":"https://avatars.githubusercontent.com/u/15859888?v=4","gravatar_id":"","url":"https://api.github.com/users/helm","html_url":"https://github.com/helm","followers_url":"https://api.github.com/users/helm/followers","following_url":"https://api.github.com/users/helm/following{/other_user}","gists_url":"https://api.github.com/users/helm/gists{/gist_id}","starred_url":"https://api.github.com/users/helm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/helm/subscriptions","organizations_url":"https://api.github.com/users/helm/orgs","repos_url":"https://api.github.com/users/helm/repos","events_url":"https://api.github.com/users/helm/events{/privacy}","received_events_url":"https://api.github.com/users/helm/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/helm/helm","description":"The Kubernetes Package Manager","fork":false,"url":"https://api.github.com/repos/helm/helm","forks_url":"https://api.github.com/repos/helm/helm/forks","keys_url":"https://api.github.com/repos/helm/helm/keys{/key_id}","collaborators_url":"https://api.github.com/repos/helm/helm/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/helm/helm/teams","hooks_url":"https://api.github.com/repos/helm/helm/hooks","issue_events_url":"https://api.github.com/repos/helm/helm/issues/events{/number}","events_url":"https://api.github.com/repos/helm/helm/events","assignees_url":"https://api.github.com/repos/helm/helm/assignees{/user}","branches_url":"https://api.github.com/repos/helm/helm/branches{/branch}","tags_url":"https://api.github.com/repos/helm/helm/tags","blobs_url":"https://api.github.com/repos/helm/helm/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/helm/helm/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/helm/helm/git/refs{/sha}","trees_url":"https://api.github.com/repos/helm/helm/git/trees{/sha}","statuses_url":"https://api.github.com/repos/helm/helm/statuses/{sha}","languages_url":"https://api.github.com/repos/helm/helm/languages","stargazers_url":"https://api.github.com/repos/helm/helm/stargazers","contributors_url":"https://api.github.com/repos/helm/helm/contributors","subscribers_url":"https://api.github.com/repos/helm/helm/subscribers","subscription_url":"https://api.github.com/repos/helm/helm/subscription","commits_url":"https://api.github.com/repos/helm/helm/commits{/sha}","git_commits_url":"https://api.github.com/repos/helm/helm/git/commits{/sha}","comments_url":"https://api.github.com/repos/helm/helm/comments{/number}","issue_comment_url":"https://api.github.com/repos/helm/helm/issues/comments{/number}","contents_url":"https://api.github.com/repos/helm/helm/contents/{+path}","compare_url":"https://api.github.com/repos/helm/helm/compare/{base}...{head}","merges_url":"https://api.github.com/repos/helm/helm/merges","archive_url":"https://api.github.com/repos/helm/helm/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/helm/helm/downloads","issues_url":"https://api.github.com/repos/helm/helm/issues{/number}","pulls_url":"https://api.github.com/repos/helm/helm/pulls{/number}","milestones_url":"https://api.github.com/repos/helm/helm/milestones{/number}","notifications_url":"https://api.github.com/repos/helm/helm/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/helm/helm/labels{/name}","releases_url":"https://api.github.com/repos/helm/helm/releases{/id}","deployments_url":"https://api.github.com/repos/helm/helm/deployments","created_at":"2015-10-06T01:07:32Z","updated_at":"2025-11-09T19:00:10Z","pushed_at":"2025-11-09T12:57:10Z","git_url":"git://github.com/helm/helm.git","ssh_url":"git@github.com:helm/helm.git","clone_url":"https://github.com/helm/helm.git","svn_url":"https://github.com/helm/helm","homepage":"https://helm.sh","size":25851,"stargazers_count":28930,"watchers_count":28930,"language":"Go","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":7393,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":448,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":true,"topics":["chart","charts","cncf","helm","kubernetes"],"visibility":"public","forks":7393,"open_issues":448,"watchers":28930,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"**Edit**: I initially thought this had to do with the new `.Subcharts` feature, which I was using, but it seems the problem is unrelated. I updated the title to reflect that.\r\n\r\n---\r\n\r\nLet me start by thanking @vflaux and others for this long awaited feature. The sort of `call-nested` workaround was a pain to use and broken in many scenarios. Thank you all 👍.\r\n\r\nThat being said, I'm either doing something really wrong here or there is a bug. It seems the `.Subcharts` are not correctly propagated when using *multiple* levels of subcharts _if_ importing the same subchart (using different aliases, of course).\r\n\r\nYou can find my attempt at reproducing the issue [here](https://github.com/tavlima/helm-370-subchart-issue). It may be possible to reproduce it with a smaller example, but that is what I could put together in the time I had available.\r\n\r\nThe dependencies look like this:\r\n\r\n```\r\ncomposition <- part (as part1) <- subpart (as subpart1) <- common\r\n                               <- subpart (as subpart2) <- common\r\n            <- part (as part2) <- subpart (as subpart1) <- common\r\n                               <- subpart (as subpart2) <- common\r\n```\r\n\r\nThe `common` chart includes a slightly modified version of the default `foo.fullname` named template, to highlight the issue (the `not_a_string` else clause):\r\n\r\n```tpl\r\n{{/*\r\nCreate a default fully qualified app name.\r\nWe truncate at 63 chars because some Kubernetes name fields are limited to this (by the DNS naming spec).\r\nIf release name contains chart name it will be used as a full name.\r\n*/}}\r\n{{- define \"common.fullname\" -}}\r\n  {{- if .Values.fullnameOverride }}\r\n    {{- .Values.fullnameOverride | trunc 63 | trimSuffix \"-\" }}\r\n  {{- else }}\r\n    {{- $name := default .Chart.Name .Values.nameOverride }}\r\n    {{- if typeIs \"string\" $name }}\r\n      {{- if contains $name .Release.Name }}\r\n        {{- .Release.Name | trunc 63 | trimSuffix \"-\" }}\r\n      {{- else }}\r\n        {{- printf \"%s-%s\" .Release.Name $name | trunc 63 | trimSuffix \"-\" }}\r\n      {{- end }}\r\n    {{- else }}\r\n      {{- printf \"not_a_string\" }}\r\n    {{- end }}\r\n  {{- end }}\r\n{{- end }}\r\n```\r\n\r\nAnd this is the (unexpected) output of `helm template composition` (after using `helm dep up` at all levels, of course):\r\n\r\n```yaml\r\n---\r\n# Source: composition/charts/part1/charts/subpart1/templates/subpart.yaml\r\nsubpart:\r\n  title: This is from subpart\r\n  fullname: RELEASE-NAME-subpart1\r\n---\r\n# Source: composition/charts/part1/charts/subpart2/templates/subpart.yaml\r\nsubpart:\r\n  title: This is from subpart\r\n  fullname: RELEASE-NAME-subpart2\r\n---\r\n# Source: composition/charts/part1/templates/part.yaml\r\npart:\r\n  title: This is from part\r\n  fullname:\r\n    subpart1: RELEASE-NAME-subpart1\r\n    subpart2: RELEASE-NAME-subpart2\r\n---\r\n# Source: composition/charts/part2/charts/subpart/templates/subpart.yaml\r\nsubpart:\r\n  title: This is from subpart\r\n  fullname: RELEASE-NAME-subpart\r\n---\r\n# Source: composition/charts/part2/templates/part.yaml\r\npart:\r\n  title: This is from part\r\n  fullname:\r\n    subpart1: not_a_string\r\n    subpart2: not_a_string\r\n---\r\n# Source: composition/templates/composition.yaml\r\ncomposition:\r\n  title: This is from the composition\r\n  fullname:\r\n    part1: RELEASE-NAME-part1\r\n    part2: RELEASE-NAME-part2\r\n```\r\n\r\nThe fun part: if I change `composition`'s `Chart.yaml` to change the dependencies order, by aliasing the first `part` dependency as `part2` and the last as `part1`, it is now the `composition/charts/part1/templates/part.yaml` that reports the `not_a_string` values. 🤷‍♂️\r\n\r\nThoughts?\r\n\r\n---\r\n\r\nOutput of `helm version`: `version.BuildInfo{Version:\"v3.7.0\", GitCommit:\"eeac83883cb4014fe60267ec6373570374ce770b\", GitTreeState:\"clean\", GoVersion:\"go1.16.8\"}`\r\nOutput of `kubectl version`: not deemed relevant\r\nCloud Provider/Platform (AKS, GKE, Minikube etc.): not deemed relevant\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/helm/helm/issues/10160/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/helm/helm/issues/10160/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/helm/helm/issues/comments/927399469","html_url":"https://github.com/helm/helm/issues/9150#issuecomment-927399469","issue_url":"https://api.github.com/repos/helm/helm/issues/9150","id":927399469,"node_id":"IC_kwDOApspmc43Rv4t","user":{"login":"github-actions[bot]","id":41898282,"node_id":"MDM6Qm90NDE4OTgyODI=","avatar_url":"https://avatars.githubusercontent.com/in/15368?v=4","gravatar_id":"","url":"https://api.github.com/users/github-actions%5Bbot%5D","html_url":"https://github.com/apps/github-actions","followers_url":"https://api.github.com/users/github-actions%5Bbot%5D/followers","following_url":"https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/github-actions%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/github-actions%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/github-actions%5Bbot%5D/repos","events_url":"https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/github-actions%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"created_at":"2021-09-27T00:06:51Z","updated_at":"2021-09-27T00:06:51Z","body":"This issue has been marked as stale because it has been open for 90 days with no activity. This thread will be automatically closed in 30 days if no further activity occurs.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/helm/helm/issues/comments/927399469/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"github-actions[bot]","id":41898282,"node_id":"MDM6Qm90NDE4OTgyODI=","avatar_url":"https://avatars.githubusercontent.com/in/15368?v=4","gravatar_id":"","url":"https://api.github.com/users/github-actions%5Bbot%5D","html_url":"https://github.com/apps/github-actions","followers_url":"https://api.github.com/users/github-actions%5Bbot%5D/followers","following_url":"https://api.github.com/users/github-actions%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/github-actions%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/github-actions%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/github-actions%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/github-actions%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/github-actions%5Bbot%5D/repos","events_url":"https://api.github.com/users/github-actions%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/github-actions%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false}}]