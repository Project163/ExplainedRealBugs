{"url":"https://api.github.com/repos/helm/helm/issues/8085","repository_url":"https://api.github.com/repos/helm/helm","labels_url":"https://api.github.com/repos/helm/helm/issues/8085/labels{/name}","comments_url":"https://api.github.com/repos/helm/helm/issues/8085/comments","events_url":"https://api.github.com/repos/helm/helm/issues/8085/events","html_url":"https://github.com/helm/helm/issues/8085","id":614852176,"node_id":"MDU6SXNzdWU2MTQ4NTIxNzY=","number":8085,"title":"Feature request: --reset-then-reuse flag for upgrade","user":{"login":"omkensey","id":8946309,"node_id":"MDQ6VXNlcjg5NDYzMDk=","avatar_url":"https://avatars.githubusercontent.com/u/8946309?v=4","gravatar_id":"","url":"https://api.github.com/users/omkensey","html_url":"https://github.com/omkensey","followers_url":"https://api.github.com/users/omkensey/followers","following_url":"https://api.github.com/users/omkensey/following{/other_user}","gists_url":"https://api.github.com/users/omkensey/gists{/gist_id}","starred_url":"https://api.github.com/users/omkensey/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/omkensey/subscriptions","organizations_url":"https://api.github.com/users/omkensey/orgs","repos_url":"https://api.github.com/users/omkensey/repos","events_url":"https://api.github.com/users/omkensey/events{/privacy}","received_events_url":"https://api.github.com/users/omkensey/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":269212354,"node_id":"MDU6TGFiZWwyNjkyMTIzNTQ=","url":"https://api.github.com/repos/helm/helm/labels/help%20wanted","name":"help wanted","color":"006b75","default":true,"description":"Denotes an issue that needs help from a contributor. Must meet \"help wanted\" guidelines."},{"id":562687520,"node_id":"MDU6TGFiZWw1NjI2ODc1MjA=","url":"https://api.github.com/repos/helm/helm/labels/feature","name":"feature","color":"0052cc","default":false,"description":null},{"id":562687714,"node_id":"MDU6TGFiZWw1NjI2ODc3MTQ=","url":"https://api.github.com/repos/helm/helm/labels/keep%20open","name":"keep open","color":"fbca04","default":false,"description":null},{"id":926755770,"node_id":"MDU6TGFiZWw5MjY3NTU3NzA=","url":"https://api.github.com/repos/helm/helm/labels/v3.x","name":"v3.x","color":"e82969","default":false,"description":"Issues and Pull Requests related to the major version v3"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":22,"created_at":"2020-05-08T16:38:44Z","updated_at":"2023-11-04T07:46:05Z","closed_at":"2023-11-04T07:46:04Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Currently Helm implements two ways of handling values when updating an existing release: reusing the existing user-supplied values if new ones are not supplied, or not reusing them if new ones are supplied.  However, the way these are implemented and the way `--reuse-values` and `--reset-values` change that default behavior is sometimes confusing; see, for example:\r\n\r\nhttps://medium.com/@kcatstack/understand-helm-upgrade-flags-reset-values-reuse-values-6e58ac8f127e\r\n\r\n(And see one of the commenters pointing out that even after this article-length treatment of the subject, the writer missed an important subtlety!)\r\n\r\nWhat I think would be nice for users is a flag that means \"take the existing chart's values, merge these new values I am giving you explicitly, and do not update values from the chart unless they are new to the chart since the version stored in the target release\".  (Alternately one can think of this as \"`--reset-values` followed by `--reuse-values` followed by user-supplied `--set*`values\")\r\n\r\nThis seems like it would be less confusing in the majority of cases: if I give a value, it is updated; if I don't give it and it exists in the release, it is reused; if I don't give it and it doesn't exist in the release, it is set from the updated chart.  It would eliminate the case of \"I did not specify this value as part of my upgrade but it changed anyway\" which appears to be where much of the confusion strikes.","closed_by":{"login":"scottrigby","id":407675,"node_id":"MDQ6VXNlcjQwNzY3NQ==","avatar_url":"https://avatars.githubusercontent.com/u/407675?v=4","gravatar_id":"","url":"https://api.github.com/users/scottrigby","html_url":"https://github.com/scottrigby","followers_url":"https://api.github.com/users/scottrigby/followers","following_url":"https://api.github.com/users/scottrigby/following{/other_user}","gists_url":"https://api.github.com/users/scottrigby/gists{/gist_id}","starred_url":"https://api.github.com/users/scottrigby/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/scottrigby/subscriptions","organizations_url":"https://api.github.com/users/scottrigby/orgs","repos_url":"https://api.github.com/users/scottrigby/repos","events_url":"https://api.github.com/users/scottrigby/events{/privacy}","received_events_url":"https://api.github.com/users/scottrigby/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/helm/helm/issues/8085/reactions","total_count":37,"+1":30,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":5,"rocket":0,"eyes":2},"timeline_url":"https://api.github.com/repos/helm/helm/issues/8085/timeline","performed_via_github_app":null,"state_reason":"completed"}