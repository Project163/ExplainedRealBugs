{"url":"https://api.github.com/repos/helm/helm/issues/6068","repository_url":"https://api.github.com/repos/helm/helm","labels_url":"https://api.github.com/repos/helm/helm/issues/6068/labels{/name}","comments_url":"https://api.github.com/repos/helm/helm/issues/6068/comments","events_url":"https://api.github.com/repos/helm/helm/issues/6068/events","html_url":"https://github.com/helm/helm/issues/6068","id":471852890,"node_id":"MDU6SXNzdWU0NzE4NTI4OTA=","number":6068,"title":"Helm 3: Registry blob storage to follow OCI Image Layout Spec","user":{"login":"jdolitsky","id":393494,"node_id":"MDQ6VXNlcjM5MzQ5NA==","avatar_url":"https://avatars.githubusercontent.com/u/393494?v=4","gravatar_id":"","url":"https://api.github.com/users/jdolitsky","html_url":"https://github.com/jdolitsky","followers_url":"https://api.github.com/users/jdolitsky/followers","following_url":"https://api.github.com/users/jdolitsky/following{/other_user}","gists_url":"https://api.github.com/users/jdolitsky/gists{/gist_id}","starred_url":"https://api.github.com/users/jdolitsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jdolitsky/subscriptions","organizations_url":"https://api.github.com/users/jdolitsky/orgs","repos_url":"https://api.github.com/users/jdolitsky/repos","events_url":"https://api.github.com/users/jdolitsky/events{/privacy}","received_events_url":"https://api.github.com/users/jdolitsky/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":926755770,"node_id":"MDU6TGFiZWw5MjY3NTU3NzA=","url":"https://api.github.com/repos/helm/helm/labels/v3.x","name":"v3.x","color":"e82969","default":false,"description":"Issues and Pull Requests related to the major version v3"}],"state":"closed","locked":false,"assignee":{"login":"jdolitsky","id":393494,"node_id":"MDQ6VXNlcjM5MzQ5NA==","avatar_url":"https://avatars.githubusercontent.com/u/393494?v=4","gravatar_id":"","url":"https://api.github.com/users/jdolitsky","html_url":"https://github.com/jdolitsky","followers_url":"https://api.github.com/users/jdolitsky/followers","following_url":"https://api.github.com/users/jdolitsky/following{/other_user}","gists_url":"https://api.github.com/users/jdolitsky/gists{/gist_id}","starred_url":"https://api.github.com/users/jdolitsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jdolitsky/subscriptions","organizations_url":"https://api.github.com/users/jdolitsky/orgs","repos_url":"https://api.github.com/users/jdolitsky/repos","events_url":"https://api.github.com/users/jdolitsky/events{/privacy}","received_events_url":"https://api.github.com/users/jdolitsky/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"jdolitsky","id":393494,"node_id":"MDQ6VXNlcjM5MzQ5NA==","avatar_url":"https://avatars.githubusercontent.com/u/393494?v=4","gravatar_id":"","url":"https://api.github.com/users/jdolitsky","html_url":"https://github.com/jdolitsky","followers_url":"https://api.github.com/users/jdolitsky/followers","following_url":"https://api.github.com/users/jdolitsky/following{/other_user}","gists_url":"https://api.github.com/users/jdolitsky/gists{/gist_id}","starred_url":"https://api.github.com/users/jdolitsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jdolitsky/subscriptions","organizations_url":"https://api.github.com/users/jdolitsky/orgs","repos_url":"https://api.github.com/users/jdolitsky/repos","events_url":"https://api.github.com/users/jdolitsky/events{/privacy}","received_events_url":"https://api.github.com/users/jdolitsky/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":7,"created_at":"2019-07-23T18:24:38Z","updated_at":"2019-08-13T16:07:58Z","closed_at":"2019-08-13T16:07:57Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Currently the charts are stored in custom fashion in `${HELM_HOME}/registry`:\r\n\r\n```\r\n$ tree ~/.helm/registry\r\n/Users/me/.helm/registry\r\n├── blobs\r\n│   └── sha256\r\n│       ├── 3344059bb81c49cc6f2599a379da0a6c14313cf969f7b821aca18e489ba3991b\r\n│       └── 84059d7403f496a1c63caf97fdc5e939ea39e561adbd98d0aa864d1b9fc9653f\r\n├── charts\r\n│   └── mychart\r\n│       └── versions\r\n│           └── 2.7.1\r\n└── refs\r\n    └── localhost_5000\r\n        └── myrepo\r\n            └── mychart\r\n                └── tags\r\n                    └── latest\r\n                        ├── chart -> /Users/me/.helm/registry/charts/mychart/versions/2.7.1\r\n                        ├── content -> /Users/me/.helm/registry/blobs/sha256/3344059bb81c49cc6f2599a379da0a6c14313cf969f7b821aca18e489ba3991b\r\n                        └── meta -> /Users/me/.helm/registry/blobs/sha256/84059d7403f496a1c63caf97fdc5e939ea39e561adbd98d0aa864d1b9fc9653f\r\n```\r\n\r\nInstead, Helm should adhere to the [OCI Image Layout Specification](https://github.com/opencontainers/image-spec/blob/master/image-layout.md):\r\n```\r\n$ find . -type f\r\n./index.json\r\n./oci-layout\r\n./blobs/sha256/3588d02542238316759cbf24502f4344ffcc8a60c803870022f335d1390c13b4\r\n./blobs/sha256/4b0bc1c4050b03c95ef2a8e36e25feac42fd31283e8c30b3ee5df6b043155d3c\r\n./blobs/sha256/7968321274dc6b6171697c33df7815310468e694ac5be0ec03ff053bb135e768\r\n```\r\n\r\ncc @jzelinskie @bacongobbler \r\n\r\n\r\n","closed_by":{"login":"jdolitsky","id":393494,"node_id":"MDQ6VXNlcjM5MzQ5NA==","avatar_url":"https://avatars.githubusercontent.com/u/393494?v=4","gravatar_id":"","url":"https://api.github.com/users/jdolitsky","html_url":"https://github.com/jdolitsky","followers_url":"https://api.github.com/users/jdolitsky/followers","following_url":"https://api.github.com/users/jdolitsky/following{/other_user}","gists_url":"https://api.github.com/users/jdolitsky/gists{/gist_id}","starred_url":"https://api.github.com/users/jdolitsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jdolitsky/subscriptions","organizations_url":"https://api.github.com/users/jdolitsky/orgs","repos_url":"https://api.github.com/users/jdolitsky/repos","events_url":"https://api.github.com/users/jdolitsky/events{/privacy}","received_events_url":"https://api.github.com/users/jdolitsky/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/helm/helm/issues/6068/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/helm/helm/issues/6068/timeline","performed_via_github_app":null,"state_reason":"completed"}