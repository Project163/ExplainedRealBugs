{"url":"https://api.github.com/repos/helm/helm/issues/10016","repository_url":"https://api.github.com/repos/helm/helm","labels_url":"https://api.github.com/repos/helm/helm/issues/10016/labels{/name}","comments_url":"https://api.github.com/repos/helm/helm/issues/10016/comments","events_url":"https://api.github.com/repos/helm/helm/issues/10016/events","html_url":"https://github.com/helm/helm/issues/10016","id":965170566,"node_id":"MDU6SXNzdWU5NjUxNzA1NjY=","number":10016,"title":"helm repo update returns 0 error code even when it fails","user":{"login":"knurl","id":8318998,"node_id":"MDQ6VXNlcjgzMTg5OTg=","avatar_url":"https://avatars.githubusercontent.com/u/8318998?v=4","gravatar_id":"","url":"https://api.github.com/users/knurl","html_url":"https://github.com/knurl","followers_url":"https://api.github.com/users/knurl/followers","following_url":"https://api.github.com/users/knurl/following{/other_user}","gists_url":"https://api.github.com/users/knurl/gists{/gist_id}","starred_url":"https://api.github.com/users/knurl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/knurl/subscriptions","organizations_url":"https://api.github.com/users/knurl/orgs","repos_url":"https://api.github.com/users/knurl/repos","events_url":"https://api.github.com/users/knurl/events{/privacy}","received_events_url":"https://api.github.com/users/knurl/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":335802899,"node_id":"MDU6TGFiZWwzMzU4MDI4OTk=","url":"https://api.github.com/repos/helm/helm/labels/proposal","name":"proposal","color":"0052cc","default":false,"description":null},{"id":2036754043,"node_id":"MDU6TGFiZWwyMDM2NzU0MDQz","url":"https://api.github.com/repos/helm/helm/labels/v4.x","name":"v4.x","color":"afa0e5","default":false,"description":"Issues and Pull Requests related to the major version v4"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/helm/helm/milestones/150","html_url":"https://github.com/helm/helm/milestone/150","labels_url":"https://api.github.com/repos/helm/helm/milestones/150/labels","id":11851554,"node_id":"MI_kwDOApspmc4AtNci","number":150,"title":"4.0.0","description":"Per the release schedule policy (https://helm.sh/docs/topics/release_policy/#major-releases), once the first beta version is available, the final 4.0.0 release date will be chosen and announced.","creator":{"login":"mattfarina","id":62991,"node_id":"MDQ6VXNlcjYyOTkx","avatar_url":"https://avatars.githubusercontent.com/u/62991?v=4","gravatar_id":"","url":"https://api.github.com/users/mattfarina","html_url":"https://github.com/mattfarina","followers_url":"https://api.github.com/users/mattfarina/followers","following_url":"https://api.github.com/users/mattfarina/following{/other_user}","gists_url":"https://api.github.com/users/mattfarina/gists{/gist_id}","starred_url":"https://api.github.com/users/mattfarina/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mattfarina/subscriptions","organizations_url":"https://api.github.com/users/mattfarina/orgs","repos_url":"https://api.github.com/users/mattfarina/repos","events_url":"https://api.github.com/users/mattfarina/events{/privacy}","received_events_url":"https://api.github.com/users/mattfarina/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":8,"closed_issues":208,"state":"open","created_at":"2024-11-05T21:55:27Z","updated_at":"2025-11-07T22:51:32Z","due_on":"2025-11-12T08:00:00Z","closed_at":null},"comments":12,"created_at":"2021-08-10T17:27:15Z","updated_at":"2025-03-21T19:49:28Z","closed_at":"2025-03-21T19:49:28Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"<!-- If you need help or think you have found a bug, please help us with your issue by entering the following information (otherwise you can delete this text): -->\r\n\r\nOutput of `helm version`: version.BuildInfo{Version:\"v3.6.0\", GitCommit:\"7f2df6467771a75f5646b7f12afb408590ed1755\", GitTreeState:\"dirty\", GoVersion:\"go1.16.4\"}\r\n\r\nOutput of `kubectl version`: Client Version: version.Info{Major:\"1\", Minor:\"22\", GitVersion:\"v1.22.0\", GitCommit:\"c2b5237ccd9c0f1d600d3072634ca66cefdf272f\", GitTreeState:\"clean\", BuildDate:\"2021-08-04T17:56:19Z\", GoVersion:\"go1.16.6\", Compiler:\"gc\", Platform:\"darwin/amd64\"}\r\n\r\nCloud Provider/Platform (AKS, GKE, Minikube etc.): AWS\r\n\r\n### Unexpected behaviour and repro:\r\n\r\n1. Add a helm repo with valid credentials.\r\n2. Invalidate credentials on repo side.\r\n3. Attempt to do a help repo update.\r\n\r\nResult (at least for me):\r\n\r\nHang tight while we grab the latest from your chart repositories...\r\n...Unable to get an update from the \"starburstdata\" chart repository (https://harbor.starburstdata.net/chartrepo/starburstdata):\r\n\tfailed to fetch https://harbor.starburstdata.net/chartrepo/starburstdata/index.yaml : 401 Unauthorized\r\nUpdate Complete. ⎈Happy Helming!⎈\r\n\r\nObviously the credentials are now invalid, so the update fails. However, the return code from this is 0:\r\n\r\n~/git/bigbang % echo $?\r\n0\r\n\r\n### Expected behaviour\r\n\r\nNon-zero error code","closed_by":{"login":"mattfarina","id":62991,"node_id":"MDQ6VXNlcjYyOTkx","avatar_url":"https://avatars.githubusercontent.com/u/62991?v=4","gravatar_id":"","url":"https://api.github.com/users/mattfarina","html_url":"https://github.com/mattfarina","followers_url":"https://api.github.com/users/mattfarina/followers","following_url":"https://api.github.com/users/mattfarina/following{/other_user}","gists_url":"https://api.github.com/users/mattfarina/gists{/gist_id}","starred_url":"https://api.github.com/users/mattfarina/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mattfarina/subscriptions","organizations_url":"https://api.github.com/users/mattfarina/orgs","repos_url":"https://api.github.com/users/mattfarina/repos","events_url":"https://api.github.com/users/mattfarina/events{/privacy}","received_events_url":"https://api.github.com/users/mattfarina/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/helm/helm/issues/10016/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/helm/helm/issues/10016/timeline","performed_via_github_app":null,"state_reason":"completed"}