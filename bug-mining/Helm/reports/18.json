{"url":"https://api.github.com/repos/helm/helm/issues/6238","repository_url":"https://api.github.com/repos/helm/helm","labels_url":"https://api.github.com/repos/helm/helm/issues/6238/labels{/name}","comments_url":"https://api.github.com/repos/helm/helm/issues/6238/comments","events_url":"https://api.github.com/repos/helm/helm/issues/6238/events","html_url":"https://github.com/helm/helm/issues/6238","id":481699124,"node_id":"MDU6SXNzdWU0ODE2OTkxMjQ=","number":6238,"title":"Helm 3: Missing values from debug output","user":{"login":"endzyme","id":1903525,"node_id":"MDQ6VXNlcjE5MDM1MjU=","avatar_url":"https://avatars.githubusercontent.com/u/1903525?v=4","gravatar_id":"","url":"https://api.github.com/users/endzyme","html_url":"https://github.com/endzyme","followers_url":"https://api.github.com/users/endzyme/followers","following_url":"https://api.github.com/users/endzyme/following{/other_user}","gists_url":"https://api.github.com/users/endzyme/gists{/gist_id}","starred_url":"https://api.github.com/users/endzyme/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/endzyme/subscriptions","organizations_url":"https://api.github.com/users/endzyme/orgs","repos_url":"https://api.github.com/users/endzyme/repos","events_url":"https://api.github.com/users/endzyme/events{/privacy}","received_events_url":"https://api.github.com/users/endzyme/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":778135666,"node_id":"MDU6TGFiZWw3NzgxMzU2NjY=","url":"https://api.github.com/repos/helm/helm/labels/bug","name":"bug","color":"e11d21","default":true,"description":"Categorizes issue or PR as related to a bug."},{"id":926755770,"node_id":"MDU6TGFiZWw5MjY3NTU3NzA=","url":"https://api.github.com/repos/helm/helm/labels/v3.x","name":"v3.x","color":"e82969","default":false,"description":"Issues and Pull Requests related to the major version v3"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/helm/helm/milestones/73","html_url":"https://github.com/helm/helm/milestone/73","labels_url":"https://api.github.com/repos/helm/helm/milestones/73/labels","id":4635238,"node_id":"MDk6TWlsZXN0b25lNDYzNTIzOA==","number":73,"title":"3.0.0-beta.4","description":"","creator":{"login":"thomastaylor312","id":4294228,"node_id":"MDQ6VXNlcjQyOTQyMjg=","avatar_url":"https://avatars.githubusercontent.com/u/4294228?v=4","gravatar_id":"","url":"https://api.github.com/users/thomastaylor312","html_url":"https://github.com/thomastaylor312","followers_url":"https://api.github.com/users/thomastaylor312/followers","following_url":"https://api.github.com/users/thomastaylor312/following{/other_user}","gists_url":"https://api.github.com/users/thomastaylor312/gists{/gist_id}","starred_url":"https://api.github.com/users/thomastaylor312/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thomastaylor312/subscriptions","organizations_url":"https://api.github.com/users/thomastaylor312/orgs","repos_url":"https://api.github.com/users/thomastaylor312/repos","events_url":"https://api.github.com/users/thomastaylor312/events{/privacy}","received_events_url":"https://api.github.com/users/thomastaylor312/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":56,"state":"closed","created_at":"2019-09-05T17:00:59Z","updated_at":"2019-10-08T20:05:12Z","due_on":null,"closed_at":"2019-10-08T20:05:12Z"},"comments":6,"created_at":"2019-08-16T16:59:38Z","updated_at":"2019-10-07T20:04:41Z","closed_at":"2019-10-07T20:04:41Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"As discussed in Developer Call on 2019-08-15: I think a refactor of how releases are printed may have removed the `COMPUTED VALUES:` and `USER-SUPPLIED VALUES:` sections of the output. \r\n\r\nHelm 2: https://github.com/helm/helm/blob/f4a55985b6d101409583067ca69018cd014cbf28/cmd/helm/printer.go#L33-L35 (Is used [by template](https://github.com/helm/helm/blob/master/cmd/helm/template.go#L185) and [by install](https://github.com/helm/helm/blob/master/cmd/helm/install.go#L449))\r\n\r\nHelm 3: \r\nRefactors printing responsibility to [pkg/action](https://github.com/helm/helm/blob/f73e3235c2ef8931274898588d65b7802b56d265/pkg/action/printer.go#L30), which doesn't print values anymore.\r\n\r\nObservations:\r\n`pkg/action PrintRelease()` is only passed a `Release` struct, which doesn't have the the context of `USER-SUPPLIED VALUES:` anymore. This is due to the coalesce which  merges the Chart values during the install run (see [pkg/action/install.go](https://github.com/helm/helm/blob/f73e3235c2ef8931274898588d65b7802b56d265/pkg/action/install.go#L138)). By the time the `Run` method of `Install` struct has run, it loses the original values supplied.\r\n\r\nSuggested change:\r\nAdding a [`Release`](https://github.com/helm/helm/blob/f73e3235c2ef8931274898588d65b7802b56d265/pkg/release/release.go#L22) struct field for `UserSuppliedValues` or potentially `OriginalConfig` to match the existing `Config` naming. This new field would house the original map rendered from [`values.Options{}.MergeValues()`](https://github.com/helm/helm/blob/f73e3235c2ef8931274898588d65b7802b56d265/pkg/cli/values/options.go#L41).\r\n\r\nOpen to more suggestions and discussion though!\r\n\r\n* * *\r\n## Issue Template Info\r\nOutput of `helm version`: \r\n```\r\nversion.BuildInfo{Version:\"v3.0.0-alpha.2\", GitCommit:\"97e7461e41455e58d89b4d7d192fed5352001d44\", GitTreeState:\"clean\", GoVersion:\"go1.12.7\"}\r\n```\r\n\r\nOutput of `kubectl version`: \r\n```\r\nClient Version: version.Info{Major:\"1\", Minor:\"15\", GitVersion:\"v1.15.1\", GitCommit:\"4485c6f18cee9a5d3c3b4e523bd27972b1b53892\", GitTreeState:\"clean\", BuildDate:\"2019-07-18T09:18:22Z\", GoVersion:\"go1.12.5\", Compiler:\"gc\", Platform:\"linux/amd64\"}\r\n```\r\n\r\nCloud Provider/Platform (AKS, GKE, Minikube etc.): \r\nN/A\r\n\r\n","closed_by":{"login":"thomastaylor312","id":4294228,"node_id":"MDQ6VXNlcjQyOTQyMjg=","avatar_url":"https://avatars.githubusercontent.com/u/4294228?v=4","gravatar_id":"","url":"https://api.github.com/users/thomastaylor312","html_url":"https://github.com/thomastaylor312","followers_url":"https://api.github.com/users/thomastaylor312/followers","following_url":"https://api.github.com/users/thomastaylor312/following{/other_user}","gists_url":"https://api.github.com/users/thomastaylor312/gists{/gist_id}","starred_url":"https://api.github.com/users/thomastaylor312/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thomastaylor312/subscriptions","organizations_url":"https://api.github.com/users/thomastaylor312/orgs","repos_url":"https://api.github.com/users/thomastaylor312/repos","events_url":"https://api.github.com/users/thomastaylor312/events{/privacy}","received_events_url":"https://api.github.com/users/thomastaylor312/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/helm/helm/issues/6238/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/helm/helm/issues/6238/timeline","performed_via_github_app":null,"state_reason":"completed"}