{"url":"https://api.github.com/repos/helm/helm/issues/9169","repository_url":"https://api.github.com/repos/helm/helm","labels_url":"https://api.github.com/repos/helm/helm/issues/9169/labels{/name}","comments_url":"https://api.github.com/repos/helm/helm/issues/9169/comments","events_url":"https://api.github.com/repos/helm/helm/issues/9169/events","html_url":"https://github.com/helm/helm/issues/9169","id":774483170,"node_id":"MDU6SXNzdWU3NzQ0ODMxNzA=","number":9169,"title":"dependency name (and alias) clashes should be reported as errors","user":{"login":"dastrobu","id":1847260,"node_id":"MDQ6VXNlcjE4NDcyNjA=","avatar_url":"https://avatars.githubusercontent.com/u/1847260?v=4","gravatar_id":"","url":"https://api.github.com/users/dastrobu","html_url":"https://github.com/dastrobu","followers_url":"https://api.github.com/users/dastrobu/followers","following_url":"https://api.github.com/users/dastrobu/following{/other_user}","gists_url":"https://api.github.com/users/dastrobu/gists{/gist_id}","starred_url":"https://api.github.com/users/dastrobu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dastrobu/subscriptions","organizations_url":"https://api.github.com/users/dastrobu/orgs","repos_url":"https://api.github.com/users/dastrobu/repos","events_url":"https://api.github.com/users/dastrobu/events{/privacy}","received_events_url":"https://api.github.com/users/dastrobu/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":562692416,"node_id":"MDU6TGFiZWw1NjI2OTI0MTY=","url":"https://api.github.com/repos/helm/helm/labels/in%20progress","name":"in progress","color":"11DD11","default":false,"description":null},{"id":778135666,"node_id":"MDU6TGFiZWw3NzgxMzU2NjY=","url":"https://api.github.com/repos/helm/helm/labels/bug","name":"bug","color":"e11d21","default":true,"description":"Categorizes issue or PR as related to a bug."}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":17,"created_at":"2020-12-24T15:11:05Z","updated_at":"2024-01-08T20:56:30Z","closed_at":"2024-01-08T20:56:30Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"While trying to fix #9150 I found another class of issues with aliases and name clashes of dependencies. \r\n\r\nI am proposing to report the following situation as errors on linting (and template/installing/upgrading) a chart: \r\n\r\n```\r\ndependencies:\r\n- name: foo\r\n  alias: baz # ← baz used twice\r\n  version: 1.0.0\r\n- name: bar\r\n  alias: baz # ← baz used twice\r\n  version: 1.0.0\r\n```\r\n```\r\ndependencies:\r\n- name: foo\r\n  alias: bar # ← shadows chart below\r\n  version: 1.0.0\r\n- name: bar\r\n  version: 1.0.0\r\n```\r\n```\r\ndependencies:\r\n- name: foo\r\n  version: 1.0.0\r\n- name: foo # ← chart with same name as above (although version or repo will be different, this will not work currently)\r\n  version: 1.2.3\r\n```\r\nWhile the last example may be working in the future (see #7413), I can't see any valid use case for the first two examples. \r\nCurrently Helm renders templates, resulting in more or less undefined behaviour. Some templates will override each other, others won't, depending on file names in the actual charts and on the chart names itself. \r\n\r\nOutput of `helm version`:\r\n`version.BuildInfo{Version:\"v3.4.2\", GitCommit:\"23dd3af5e19a02d4f4baa5b2f242645a1a3af629\", GitTreeState:\"clean\", GoVersion:\"go1.14.13\"}`\r\n\r\n","closed_by":{"login":"mattfarina","id":62991,"node_id":"MDQ6VXNlcjYyOTkx","avatar_url":"https://avatars.githubusercontent.com/u/62991?v=4","gravatar_id":"","url":"https://api.github.com/users/mattfarina","html_url":"https://github.com/mattfarina","followers_url":"https://api.github.com/users/mattfarina/followers","following_url":"https://api.github.com/users/mattfarina/following{/other_user}","gists_url":"https://api.github.com/users/mattfarina/gists{/gist_id}","starred_url":"https://api.github.com/users/mattfarina/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mattfarina/subscriptions","organizations_url":"https://api.github.com/users/mattfarina/orgs","repos_url":"https://api.github.com/users/mattfarina/repos","events_url":"https://api.github.com/users/mattfarina/events{/privacy}","received_events_url":"https://api.github.com/users/mattfarina/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/helm/helm/issues/9169/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/helm/helm/issues/9169/timeline","performed_via_github_app":null,"state_reason":"completed"}