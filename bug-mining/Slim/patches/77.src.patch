diff --git a/Slim/Routing/RouteCollector.php b/Slim/Routing/RouteCollector.php
index 254e3c76..e7590e32 100644
--- a/Slim/Routing/RouteCollector.php
+++ b/Slim/Routing/RouteCollector.php
@@ -252,7 +252,7 @@ class RouteCollector implements RouteCollectorInterface
         $this->routeGroups[] = $routeGroup;
 
         $routeGroup->collectRoutes();
-        array_shift($this->routeGroups);
+        array_pop($this->routeGroups);
 
         return $routeGroup;
     }
diff --git a/tests/AppTest.php b/tests/AppTest.php
index c36b53ce..d987a431 100644
--- a/tests/AppTest.php
+++ b/tests/AppTest.php
@@ -960,6 +960,13 @@ class AppTest extends TestCase
             $middlewareProphecy3,
             &$output
         ) {
+            // ensure that more than one nested group at the same level doesn't break middleware
+            $group->group('/fizz', function (RouteCollectorProxyInterface $group) {
+                $group->get('/buzz', function (ServerRequestInterface $request, ResponseInterface $response) {
+                    return $response;
+                });
+            });
+
             $group->group('/bar', function (RouteCollectorProxyInterface $group) use (
                 $middlewareProphecy3,
                 &$output
