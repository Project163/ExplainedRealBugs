diff --git a/Slim/Middleware/SessionCookie.php b/Slim/Middleware/SessionCookie.php
index d67c099d..27452c95 100644
--- a/Slim/Middleware/SessionCookie.php
+++ b/Slim/Middleware/SessionCookie.php
@@ -142,15 +142,14 @@ class Slim_Middleware_SessionCookie implements Slim_Middleware_Interface {
         if ( strlen($value) > 4096 ) {
             fwrite($env['slim.errors'], 'WARNING! Slim_Middleware_SessionCookie data size is larger than 4KB. Content save failed.');
         } else {
-            $r->setCookie(
-                $this->settings['name'],
-                $value,
-                $this->settings['expires'],
-                $this->settings['path'],
-                $this->settings['domain'],
-                $this->settings['secure'],
-                $this->settings['httponly']
-            );
+            $r->setCookie($this->settings['name'], array(
+                'value' => $value,
+                'domain' => $this->settings['domain'],
+                'path' => $this->settings['path'],
+                'expires' => $this->settings['expires'],
+                'secure' => $this->settings['secure'],
+                'httponly' => $this->settings['httponly']
+            ));
         }
         return $r->finalize();
     }
diff --git a/tests/Middleware/SessionCookieTest.php b/tests/Middleware/SessionCookieTest.php
index 004e9783..b4db6ffe 100644
--- a/tests/Middleware/SessionCookieTest.php
+++ b/tests/Middleware/SessionCookieTest.php
@@ -86,7 +86,9 @@ class SessionCookieTest extends PHPUnit_Framework_TestCase {
             'expires' => '10 years'
         ));
         list($status, $header, $body) = $mw->call($env);
-        $this->assertEquals(1, preg_match('@^slim_session=.+|.+|.+; expires=@', $header['Set-Cookie']));
+        $matches = array();
+        preg_match_all('@^slim_session=.+|.+|.+; expires=@', $header['Set-Cookie'], $matches, PREG_SET_ORDER);
+        $this->assertEquals(1, count($matches));
     }
 
     /**
