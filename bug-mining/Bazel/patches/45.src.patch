diff --git a/src/main/cpp/util/numbers.h b/src/main/cpp/util/numbers.h
index f1ef6f7991..f6052b1230 100644
--- a/src/main/cpp/util/numbers.h
+++ b/src/main/cpp/util/numbers.h
@@ -14,6 +14,7 @@
 #ifndef BAZEL_SRC_MAIN_CPP_UTIL_NUMBERS_H_
 #define BAZEL_SRC_MAIN_CPP_UTIL_NUMBERS_H_
 
+#include <cstdint>
 #include <string>
 
 namespace blaze_util {
diff --git a/src/tools/singlejar/diag.h b/src/tools/singlejar/diag.h
index 9120911678..ee0793ac7f 100644
--- a/src/tools/singlejar/diag.h
+++ b/src/tools/singlejar/diag.h
@@ -38,18 +38,18 @@
 #include <stdio.h>
 #include <string.h>
 #define _diag_msg(prefix, msg, ...) \
-  { fprintf(stderr, prefix msg "\n", __VA_ARGS__); }
+  { fprintf(stderr, prefix msg "\n", ##__VA_ARGS__); }
 #define _diag_msgx(exit_value, prefix, msg, ...) \
-  { \
-    _diag_msg(prefix, msg, __VA_ARGS__); \
-    ::ExitProcess(exit_value); \
+  {                                              \
+    _diag_msg(prefix, msg, ##__VA_ARGS__);       \
+    ::ExitProcess(exit_value);                   \
   }
 #define diag_err(exit_value, fmt, ...) \
-  _diag_msgx(exit_value, "ERROR: ", fmt, __VA_ARGS__)
+  _diag_msgx(exit_value, "ERROR: ", fmt, ##__VA_ARGS__)
 #define diag_errx(exit_value, fmt, ...) \
-  _diag_msgx(exit_value, "ERROR: ", fmt, __VA_ARGS__)
-#define diag_warn(fmt, ...) _diag_msg("WARNING: ", fmt, __VA_ARGS__)
-#define diag_warnx(fmt, ...) _diag_msg("WARNING: ", fmt, __VA_ARGS__)
+  _diag_msgx(exit_value, "ERROR: ", fmt, ##__VA_ARGS__)
+#define diag_warn(fmt, ...) _diag_msg("WARNING: ", fmt, ##__VA_ARGS__)
+#define diag_warnx(fmt, ...) _diag_msg("WARNING: ", fmt, ##__VA_ARGS__)
 
 #else
 #error Unknown platform
