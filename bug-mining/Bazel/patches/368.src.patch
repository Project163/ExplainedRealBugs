diff --git a/src/main/java/com/google/devtools/build/lib/bazel/bzlmod/InterimModule.java b/src/main/java/com/google/devtools/build/lib/bazel/bzlmod/InterimModule.java
index 0e864a5324..6e38bdc4f1 100644
--- a/src/main/java/com/google/devtools/build/lib/bazel/bzlmod/InterimModule.java
+++ b/src/main/java/com/google/devtools/build/lib/bazel/bzlmod/InterimModule.java
@@ -264,7 +264,9 @@ public abstract class InterimModule extends ModuleBase {
     if (!(override instanceof SingleVersionOverride singleVersion)) {
       return repoSpec;
     }
-    if (singleVersion.patches().isEmpty()) {
+    if (singleVersion.patches().isEmpty()
+        && singleVersion.patchCmds().isEmpty()
+        && singleVersion.patchStrip() == 0) {
       return repoSpec;
     }
     Dict.Builder<String, Object> attrBuilder = Dict.builder();
diff --git a/src/test/py/bazel/bzlmod/bazel_overrides_test.py b/src/test/py/bazel/bzlmod/bazel_overrides_test.py
index 8f617bef04..1c9bb0f5ec 100644
--- a/src/test/py/bazel/bzlmod/bazel_overrides_test.py
+++ b/src/test/py/bazel/bzlmod/bazel_overrides_test.py
@@ -125,6 +125,67 @@ class BazelOverridesTest(test_base.TestBase):
     self.assertIn('main function => bbb@1.1', stdout)
     self.assertIn('bbb@1.1 => aaa@1.0 (locally patched)', stdout)
 
+  def testSingleVersionOverrideWithPatchCmds(self):
+    self.writeMainProjectFiles()
+    self.ScratchFile(
+        'MODULE.bazel',
+        [
+            'bazel_dep(name = "aaa")',
+            'bazel_dep(name = "bbb", version = "1.1")',
+            # Both main and bbb@1.1 has to depend on the locally patched aaa@1.0
+            'single_version_override(',
+            '  module_name = "aaa",',
+            '  version = "1.0",',
+            '  patch_cmds = [',
+            """    "sed -e 's|aaa@1.0|aaa@1.0 (locally patched with patch_cmds)|' aaa.sh > aaa.sh.new",""",
+            '    "mv aaa.sh.new aaa.sh",',
+            '  ],',
+            ')',
+        ],
+    )
+    self.AddBazelDep('rules_shell')
+    _, stdout, _ = self.RunBazel(['run', '//:main'])
+    self.assertIn(
+        'main function => aaa@1.0 (locally patched with patch_cmds)', stdout
+    )
+    self.assertIn('main function => bbb@1.1', stdout)
+    self.assertIn(
+        'bbb@1.1 => aaa@1.0 (locally patched with patch_cmds)', stdout
+    )
+
+  def testSingleVersionOverrideWithPatchAndPatchCmds(self):
+    self.writeMainProjectFiles()
+    self.ScratchFile(
+        'MODULE.bazel',
+        [
+            'bazel_dep(name = "aaa")',
+            'bazel_dep(name = "bbb", version = "1.1")',
+            # Both main and bbb@1.1 has to depend on the locally patched aaa@1.0
+            'single_version_override(',
+            '  module_name = "aaa",',
+            '  version = "1.0",',
+            '  patches = ["//:aaa.patch"],',
+            '  patch_strip = 1,',
+            '  patch_cmds = [',
+            """    "sed -e 's|locally patched|locally patched with patches and patch_cmds|' aaa.sh > aaa.sh.new",""",
+            '    "mv aaa.sh.new aaa.sh",',
+            '  ],',
+            ')',
+        ],
+    )
+    self.AddBazelDep('rules_shell')
+    _, stdout, _ = self.RunBazel(['run', '//:main'])
+    self.assertIn(
+        'main function => aaa@1.0 (locally patched with patches and'
+        ' patch_cmds)',
+        stdout,
+    )
+    self.assertIn('main function => bbb@1.1', stdout)
+    self.assertIn(
+        'bbb@1.1 => aaa@1.0 (locally patched with patches and patch_cmds)',
+        stdout,
+    )
+
   def testSingleVersionOverrideVersionTooLow(self):
     self.writeMainProjectFiles()
     self.ScratchFile(
