diff --git a/src/test/shell/bazel/BUILD b/src/test/shell/bazel/BUILD
index f3e7307bbb..16ff354d0d 100644
--- a/src/test/shell/bazel/BUILD
+++ b/src/test/shell/bazel/BUILD
@@ -1,6 +1,5 @@
 load("@bazel_skylib//rules:write_file.bzl", "write_file")
 load("//:workspace_deps.bzl", "gen_workspace_stanza")
-load("//src/tools/bzlmod:utils.bzl", "get_canonical_repo_name")
 
 package(default_visibility = ["//visibility:private"])
 
@@ -221,7 +220,9 @@ sh_test(
 write_file(
     name = "gen_rules_java_repo_name",
     out = "RULES_JAVA_REPO_NAME",
-    content = [get_canonical_repo_name("@rules_java")],
+    # TODO: Revert to the following when building with Bazel 7.1.0.
+    # content = [get_canonical_repo_name("@rules_java")],
+    content = ["rules_java~"],
 )
 
 sh_test(
