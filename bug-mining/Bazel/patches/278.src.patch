diff --git a/src/main/java/com/google/devtools/build/lib/skyframe/IgnoredSubdirectoriesFunction.java b/src/main/java/com/google/devtools/build/lib/skyframe/IgnoredSubdirectoriesFunction.java
index 94fb6eac58..aad80185d5 100644
--- a/src/main/java/com/google/devtools/build/lib/skyframe/IgnoredSubdirectoriesFunction.java
+++ b/src/main/java/com/google/devtools/build/lib/skyframe/IgnoredSubdirectoriesFunction.java
@@ -24,12 +24,14 @@ import com.google.devtools.build.lib.cmdline.RepositoryName;
 import com.google.devtools.build.lib.io.InconsistentFilesystemException;
 import com.google.devtools.build.lib.pkgcache.PathPackageLocator;
 import com.google.devtools.build.lib.rules.repository.RepositoryDirectoryValue;
+import com.google.devtools.build.lib.skyframe.IgnoredSubdirectoriesValue.InvalidIgnorePathException;
 import com.google.devtools.build.lib.skyframe.RepoFileFunction.BadRepoFileException;
 import com.google.devtools.build.lib.vfs.PathFragment;
 import com.google.devtools.build.lib.vfs.Root;
 import com.google.devtools.build.lib.vfs.RootedPath;
 import com.google.devtools.build.skyframe.SkyFunction;
 import com.google.devtools.build.skyframe.SkyFunctionException;
+import com.google.devtools.build.skyframe.SkyFunctionException.Transience;
 import com.google.devtools.build.skyframe.SkyKey;
 import com.google.devtools.build.skyframe.SkyValue;
 import java.io.IOException;
@@ -76,8 +78,16 @@ public class IgnoredSubdirectoriesFunction implements SkyFunction {
       throws IgnoredSubdirectoriesFunctionException {
     try (InputStreamReader reader =
         new InputStreamReader(patternFile.asPath().getInputStream(), StandardCharsets.UTF_8)) {
-      ignoredDirectoriesBuilder.addAll(
-          CharStreams.readLines(reader, new PathFragmentLineProcessor()));
+      for (PathFragment ignored : CharStreams.readLines(reader, new PathFragmentLineProcessor())) {
+        if (ignored.isAbsolute()) {
+          throw new IgnoredSubdirectoriesFunctionException(
+              new InvalidIgnorePathException(
+                  patternFile.asPath().toString(),
+                  String.format("'%s': cannot be an absolute path", ignored)));
+        }
+
+        ignoredDirectoriesBuilder.add(ignored);
+      }
     } catch (IOException e) {
       String errorMessage = e.getMessage() != null ? "error '" + e.getMessage() + "'" : "an error";
       throw new IgnoredSubdirectoriesFunctionException(
@@ -88,7 +98,7 @@ public class IgnoredSubdirectoriesFunction implements SkyFunction {
                   + ". Was it modified mid-build?"));
     } catch (InvalidPathException e) {
       throw new IgnoredSubdirectoriesFunctionException(
-          new InvalidIgnorePathException(e, patternFile.asPath().toString()));
+          new InvalidIgnorePathException(patternFile.asPath().toString(), e.getMessage()));
     }
   }
 
@@ -218,12 +228,6 @@ public class IgnoredSubdirectoriesFunction implements SkyFunction {
     }
   }
 
-  private static class InvalidIgnorePathException extends Exception {
-    public InvalidIgnorePathException(InvalidPathException e, String path) {
-      super("Invalid path in " + path + ": " + e);
-    }
-  }
-
   private static final class IgnoredSubdirectoriesFunctionException extends SkyFunctionException {
     public IgnoredSubdirectoriesFunctionException(InconsistentFilesystemException e) {
       super(e, Transience.TRANSIENT);
diff --git a/src/main/java/com/google/devtools/build/lib/skyframe/IgnoredSubdirectoriesValue.java b/src/main/java/com/google/devtools/build/lib/skyframe/IgnoredSubdirectoriesValue.java
index e46d3d20ac..5b8d2f125e 100644
--- a/src/main/java/com/google/devtools/build/lib/skyframe/IgnoredSubdirectoriesValue.java
+++ b/src/main/java/com/google/devtools/build/lib/skyframe/IgnoredSubdirectoriesValue.java
@@ -112,4 +112,11 @@ public class IgnoredSubdirectoriesValue implements SkyValue {
       return interner;
     }
   }
+
+  /** Exception thrown when an ignore path is wrong for some reason. */
+  public static final class InvalidIgnorePathException extends Exception {
+    public InvalidIgnorePathException(String path, String message) {
+      super("Invalid path in " + path + ": " + message);
+    }
+  }
 }
diff --git a/src/main/java/com/google/devtools/build/lib/skyframe/PackageFunction.java b/src/main/java/com/google/devtools/build/lib/skyframe/PackageFunction.java
index c793159c1a..36ab9d7e54 100644
--- a/src/main/java/com/google/devtools/build/lib/skyframe/PackageFunction.java
+++ b/src/main/java/com/google/devtools/build/lib/skyframe/PackageFunction.java
@@ -56,6 +56,7 @@ import com.google.devtools.build.lib.server.FailureDetails.FailureDetail;
 import com.google.devtools.build.lib.server.FailureDetails.Filesystem;
 import com.google.devtools.build.lib.server.FailureDetails.PackageLoading;
 import com.google.devtools.build.lib.server.FailureDetails.PackageLoading.Code;
+import com.google.devtools.build.lib.skyframe.IgnoredSubdirectoriesValue.InvalidIgnorePathException;
 import com.google.devtools.build.lib.skyframe.PackageFunctionWithMultipleGlobDeps.SkyframeGlobbingIOException;
 import com.google.devtools.build.lib.skyframe.RepoFileFunction.BadRepoFileException;
 import com.google.devtools.build.lib.skyframe.RepoPackageArgsFunction.RepoPackageArgsValue;
@@ -430,8 +431,18 @@ public abstract class PackageFunction implements SkyFunction {
               env.getValueOrThrow(
                   packageLookupKey,
                   BadRepoFileException.class,
+                  InvalidIgnorePathException.class,
                   BuildFileNotFoundException.class,
                   InconsistentFilesystemException.class);
+    } catch (InvalidIgnorePathException e) {
+      throw PackageFunctionException.builder()
+          .setType(PackageFunctionException.Type.NO_SUCH_PACKAGE)
+          .setTransience(Transience.PERSISTENT)
+          .setPackageIdentifier(packageId)
+          .setMessage(e.getMessage())
+          .setException(e)
+          .setPackageLoadingCode(PackageLoading.Code.BAD_IGNORED_DIRECTORIES)
+          .build();
     } catch (BadRepoFileException e) {
       throw badRepoFileException(e, packageId);
     } catch (BuildFileNotFoundException e) {
diff --git a/src/main/protobuf/failure_details.proto b/src/main/protobuf/failure_details.proto
index 4c8d84f756..53f78c57ef 100644
--- a/src/main/protobuf/failure_details.proto
+++ b/src/main/protobuf/failure_details.proto
@@ -1305,6 +1305,7 @@ message PackageLoading {
     SYMLINK_CYCLE_OR_INFINITE_EXPANSION = 30 [(metadata) = { exit_code: 1 }];
     OTHER_IO_EXCEPTION = 31 [(metadata) = { exit_code: 36 }];
     BAD_REPO_FILE = 32 [(metadata) = { exit_code: 1 }];
+    BAD_IGNORED_DIRECTORIES = 33 [(metadata) = { exit_code: 1 }];
   }
 
   Code code = 1;
diff --git a/src/test/shell/bazel/bazelignore_test.sh b/src/test/shell/bazel/bazelignore_test.sh
index ee5abe627f..acba0769b2 100755
--- a/src/test/shell/bazel/bazelignore_test.sh
+++ b/src/test/shell/bazel/bazelignore_test.sh
@@ -214,7 +214,7 @@ test_invalid_path() {
     if bazel build //... 2> "$TEST_log"; then
       fail "Bazel build should have failed"
     fi
-    expect_log "java.nio.file.InvalidPathException: Nul character not allowed"
+    expect_log "Nul character not allowed"
 }
 
 test_target_patterns_with_wildcards_in_repo_bazel() {
@@ -269,7 +269,7 @@ SYNTAX ERROR
 EOF
 
   touch BUILD.bazel
-  bazel query //:all && fail "failure expected"
+  bazel query //:all >& "$TEST_log" && fail "failure expected"
   if [[ $? != 7 ]]; then
     fail "expected an analysis failure"
   fi
@@ -288,4 +288,25 @@ EOF
   expect_log "it must be called before any other functions"
 }
 
+test_absolute_path_in_bazelignore() {
+  rm -rf work && mkdir work && cd work
+  setup_module_dot_bazel
+
+  cat > .bazelignore <<EOF
+/a/ignored
+EOF
+
+  mkdir -p a/ignored
+  touch a/ignored/ignored.txt
+
+  cat > a/BUILD <<'EOF'
+filegroup(name="fg", srcs=glob(["**/*.txt"]))
+EOF
+
+  bazel query //a:fg >& "$TEST_log" && fail "failure expected"
+  if [[ $? != 7 ]]; then
+    fail "expected an analysis failure"
+  fi
+}
+
 run_suite "Integration tests for .bazelignore"
