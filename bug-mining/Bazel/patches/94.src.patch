diff --git a/src/main/java/com/google/devtools/build/lib/vfs/FileSystemUtils.java b/src/main/java/com/google/devtools/build/lib/vfs/FileSystemUtils.java
index 1a0479a83c..740445c23f 100644
--- a/src/main/java/com/google/devtools/build/lib/vfs/FileSystemUtils.java
+++ b/src/main/java/com/google/devtools/build/lib/vfs/FileSystemUtils.java
@@ -600,6 +600,9 @@ public class FileSystemUtils {
       throw new IllegalArgumentException(to + " is a subdirectory of " + from);
     }
 
+    // Actions can make output directories non-writable, which would cause the move to fail.
+    from.setWritable(true);
+
     Collection<Path> entries = from.getDirectoryEntries();
     for (Path entry : entries) {
       if (entry.isDirectory(Symlinks.NOFOLLOW)) {
diff --git a/src/test/shell/bazel/bazel_sandboxing_test.sh b/src/test/shell/bazel/bazel_sandboxing_test.sh
index bd9383ade3..22443a7d7f 100755
--- a/src/test/shell/bazel/bazel_sandboxing_test.sh
+++ b/src/test/shell/bazel/bazel_sandboxing_test.sh
@@ -221,7 +221,7 @@ EOF
   expect_log "'file' is not a regular file"
 }
 
-# regression test for https://github.com/bazelbuild/bazel/issues/6262
+# Regression test for https://github.com/bazelbuild/bazel/issues/6262.
 function test_create_tree_artifact_outputs() {
   create_workspace_with_default_repos WORKSPACE
 
@@ -246,6 +246,32 @@ EOF
   bazel build --test_output=streamed :a &>$TEST_log || fail "expected build to succeed"
 }
 
+# Regression test for https://github.com/bazelbuild/bazel/issues/20032.
+function test_read_only_tree_artifact() {
+  create_workspace_with_default_repos WORKSPACE
+
+  cat > def.bzl <<'EOF'
+def _r(ctx):
+  d = ctx.actions.declare_directory(ctx.label.name)
+  ctx.actions.run_shell(
+    outputs = [d],
+    command = "touch $1/file.txt && chmod -w $1",
+    arguments = [d.path],
+  )
+  return DefaultInfo(files = depset([d]))
+
+r = rule(_r)
+EOF
+
+  cat > BUILD <<'EOF'
+load(":def.bzl", "r")
+
+r(name = "a")
+EOF
+
+  bazel build --test_output=streamed :a &>$TEST_log || fail "expected build to succeed"
+}
+
 function test_empty_tree_artifact_as_inputs() {
   # Test that when an empty tree artifact is the input, an empty directory is
   # created in the sandbox for action to read.
