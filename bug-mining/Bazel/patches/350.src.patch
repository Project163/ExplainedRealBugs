diff --git a/src/main/java/com/google/devtools/build/lib/remote/RemoteExecutionService.java b/src/main/java/com/google/devtools/build/lib/remote/RemoteExecutionService.java
index 28b37d838b..8bed1584fe 100644
--- a/src/main/java/com/google/devtools/build/lib/remote/RemoteExecutionService.java
+++ b/src/main/java/com/google/devtools/build/lib/remote/RemoteExecutionService.java
@@ -30,6 +30,7 @@ import static com.google.devtools.build.lib.remote.util.Utils.waitForBulkTransfe
 import static com.google.devtools.build.lib.util.StringEncoding.internalToUnicode;
 import static com.google.devtools.build.lib.util.StringEncoding.unicodeToInternal;
 import static java.util.Collections.min;
+import static java.util.Comparator.comparing;
 
 import build.bazel.remote.execution.v2.Action;
 import build.bazel.remote.execution.v2.ActionResult;
@@ -116,6 +117,7 @@ import com.google.devtools.build.lib.remote.util.Utils.InMemoryOutput;
 import com.google.devtools.build.lib.server.FailureDetails.RemoteExecution;
 import com.google.devtools.build.lib.util.Fingerprint;
 import com.google.devtools.build.lib.util.OS;
+import com.google.devtools.build.lib.util.StringEncoding;
 import com.google.devtools.build.lib.util.TempPathGenerator;
 import com.google.devtools.build.lib.util.io.FileOutErr;
 import com.google.devtools.build.lib.vfs.FileSystem;
@@ -141,7 +143,7 @@ import java.io.IOException;
 import java.time.Instant;
 import java.util.ArrayList;
 import java.util.Collection;
-import java.util.Collections;
+import java.util.Comparator;
 import java.util.HashMap;
 import java.util.HashSet;
 import java.util.List;
@@ -171,6 +173,9 @@ import javax.annotation.Nullable;
  * cache and execution with spawn specific types.
  */
 public class RemoteExecutionService {
+  private static final Comparator<String> PROTO_STRING_COMPARATOR =
+      comparing(StringEncoding::unicodeToInternal);
+
   private final Reporter reporter;
   private final boolean verboseFailures;
   private final Path execRoot;
@@ -270,7 +275,7 @@ public class RemoteExecutionService {
         String pathString = internalToUnicode(remotePathResolver.localPathToOutputPath(output));
         outputPaths.add(pathString);
       }
-      Collections.sort(outputPaths);
+      outputPaths.sort(PROTO_STRING_COMPARATOR);
       command.addAllOutputPaths(outputPaths);
     } else {
       var outputFiles = new ArrayList<String>();
@@ -283,8 +288,8 @@ public class RemoteExecutionService {
           outputFiles.add(pathString);
         }
       }
-      Collections.sort(outputFiles);
-      Collections.sort(outputDirectories);
+      outputFiles.sort(PROTO_STRING_COMPARATOR);
+      outputDirectories.sort(PROTO_STRING_COMPARATOR);
       command.addAllOutputFiles(outputFiles).addAllOutputDirectories(outputDirectories);
     }
 
diff --git a/src/test/java/com/google/devtools/build/lib/remote/RemoteExecutionServiceTest.java b/src/test/java/com/google/devtools/build/lib/remote/RemoteExecutionServiceTest.java
index dd7634db65..8ac006a7be 100644
--- a/src/test/java/com/google/devtools/build/lib/remote/RemoteExecutionServiceTest.java
+++ b/src/test/java/com/google/devtools/build/lib/remote/RemoteExecutionServiceTest.java
@@ -462,6 +462,10 @@ public class RemoteExecutionServiceTest {
             "dir/file1",
             "dir/file2",
             "dir/file3",
+            // These paths sort differently depending on whether they are sorted as Java Unicode
+            // or Bazel internal strings.
+            unicodeToInternal("path/Ôæê"),
+            unicodeToInternal("path/üî•"),
             // These paths sort differently depending on whether they are sorted as Strings or as
             // PathFragments.
             "srcs/system/foo.txt",
@@ -547,6 +551,12 @@ public class RemoteExecutionServiceTest {
                                             "file3",
                                             "content of tree file dir/subdir/subdir2/file3")),
                                     ImmutableMap.of()))))),
+                "path",
+                dir(
+                    ImmutableList.of(
+                        file("Ôæê", "content of tree file path/Ôæê"),
+                        file("üî•", "content of tree file path/üî•")),
+                    ImmutableMap.of()),
                 "srcs",
                 dir(
                     ImmutableList.of(),
@@ -601,6 +611,11 @@ public class RemoteExecutionServiceTest {
                                         treeArtifactDirectory)))),
                         "empty_dir",
                         emptyDirectory,
+                        "path",
+                        dir(
+                            ImmutableList.of(
+                                file("Ôæê", "content of path/Ôæê"), file("üî•", "content of path/üî•")),
+                            ImmutableMap.of()),
                         "srcs",
                         dir(
                             ImmutableList.of(),
@@ -657,6 +672,11 @@ public class RemoteExecutionServiceTest {
                         dirDirectory,
                         "empty_dir",
                         emptyDirectory,
+                        "path",
+                        dir(
+                            ImmutableList.of(
+                                file("Ôæê", "content of path/Ôæê"), file("üî•", "content of path/üî•")),
+                            ImmutableMap.of()),
                         "srcs",
                         dir(
                             ImmutableList.of(),
@@ -675,8 +695,8 @@ public class RemoteExecutionServiceTest {
     var expectedDigest =
         DigestUtil.fromString(
             switch (TestConstants.PRODUCT_NAME) {
-              case "bazel" -> "79419efe6586ca5048180744d9005896cd67339d6e012a7bec15ed0720e1fec7/82";
-              case "blaze" -> "559ce87dd544e9b6001cbf0557bafd42c35b0ffc10c99467f559d4e14a9b766c/82";
+              case "bazel" -> "ce94243235c6a1763fbc2ff6359a1b9bf85f735899448cff7c71ccb7404c3476/82";
+              case "blaze" -> "693401e72f297cce50df9b39c8fdfb229778e696396c3fb4e983d9f56fa759d0/82";
               default ->
                   throw new IllegalArgumentException(
                       "Unknown product name " + TestConstants.PRODUCT_NAME);
@@ -2888,6 +2908,34 @@ public class RemoteExecutionServiceTest {
         .inOrder();
   }
 
+  @Test
+  public void buildRemoteAction_codePointSorting() throws Exception {
+    var one = "path/Ôæê";
+    var oneF = execRoot.getRelative(unicodeToInternal(one)).asFragment();
+    var two = "path/üî•";
+    var twoF = execRoot.getRelative(unicodeToInternal(two)).asFragment();
+    var three = "sort/system-foo";
+    var threeF = execRoot.getRelative(unicodeToInternal(three)).asFragment();
+    var four = "sort/system/foo";
+    var fourF = execRoot.getRelative(unicodeToInternal(four)).asFragment();
+    var spawn =
+        new SpawnBuilder("dummy")
+            .withOutput(ActionsTestUtil.createArtifactWithExecPath(artifactRoot, oneF))
+            .withOutput(ActionsTestUtil.createArtifactWithExecPath(artifactRoot, twoF))
+            .withOutput(ActionsTestUtil.createArtifactWithExecPath(artifactRoot, threeF))
+            .withOutput(ActionsTestUtil.createArtifactWithExecPath(artifactRoot, fourF))
+            .build();
+    FakeSpawnExecutionContext context = newSpawnExecutionContext(spawn);
+    RemoteExecutionService service = newRemoteExecutionService();
+
+    RemoteAction remoteAction = service.buildRemoteAction(spawn, context);
+
+    assertThat(remoteAction.getCommand().getOutputPathsList())
+        .containsExactly(
+            "/execroot/" + one, "/execroot/" + two, "/execroot/" + three, "/execroot/" + four)
+        .inOrder();
+  }
+
   private Spawn newSpawnFromResult(RemoteActionResult result) {
     return newSpawnFromResult(ImmutableMap.of(), result);
   }
