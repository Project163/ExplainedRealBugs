diff --git a/src/main/java/com/google/devtools/build/lib/bazel/bzlmod/modcommand/ModExecutor.java b/src/main/java/com/google/devtools/build/lib/bazel/bzlmod/modcommand/ModExecutor.java
index cd9b6921c6..da224e33b6 100644
--- a/src/main/java/com/google/devtools/build/lib/bazel/bzlmod/modcommand/ModExecutor.java
+++ b/src/main/java/com/google/devtools/build/lib/bazel/bzlmod/modcommand/ModExecutor.java
@@ -140,7 +140,8 @@ public class ModExecutor {
   }
 
   public void showExtension(
-      ImmutableSet<ModuleExtensionId> extensions, ImmutableSet<ModuleKey> fromUsages) {
+      ImmutableSet<ModuleExtensionId> extensions, ImmutableSet<ModuleKey> fromUsages)
+      throws InvalidArgumentException {
     for (ModuleExtensionId extension : extensions) {
       displayExtension(extension, fromUsages);
     }
@@ -463,11 +464,16 @@ public class ModExecutor {
   }
 
   /** Helper to display show_extension info. */
-  private void displayExtension(ModuleExtensionId extension, ImmutableSet<ModuleKey> fromUsages) {
+  private void displayExtension(ModuleExtensionId extension, ImmutableSet<ModuleKey> fromUsages)
+      throws InvalidArgumentException {
     printer.printf("## %s:\n", extension.asTargetString());
     printer.println();
     printer.println("Fetched repositories:");
-    // TODO(wyv): if `extension` doesn't exist, we crash. We should report a good error instead!
+    if (!extensionRepoImports.containsKey(extension)) {
+      throw new InvalidArgumentException(
+          String.format(
+              "No extension %s exists in the dependency graph", extension.asTargetString()));
+    }
     ImmutableSortedSet<String> usedRepos =
         ImmutableSortedSet.copyOf(extensionRepoImports.get(extension).keySet());
     ImmutableSortedSet<String> unusedRepos =
diff --git a/src/main/java/com/google/devtools/build/lib/bazel/commands/ModCommand.java b/src/main/java/com/google/devtools/build/lib/bazel/commands/ModCommand.java
index 4fa4483856..2eb26fbd34 100644
--- a/src/main/java/com/google/devtools/build/lib/bazel/commands/ModCommand.java
+++ b/src/main/java/com/google/devtools/build/lib/bazel/commands/ModCommand.java
@@ -528,28 +528,32 @@ public final class ModCommand implements BlazeCommand {
                 env.getReporter().getOutErr().getOutputStream(),
                 modOptions.charset == UTF8 ? UTF_8 : US_ASCII));
 
-    switch (subcommand) {
-      case GRAPH:
-        modExecutor.graph(fromKeys);
-        break;
-      case DEPS:
-        modExecutor.graph(argsAsModules);
-        break;
-      case PATH:
-        modExecutor.path(fromKeys, argsAsModules);
-        break;
-      case ALL_PATHS:
-      case EXPLAIN:
-        modExecutor.allPaths(fromKeys, argsAsModules);
-        break;
-      case SHOW_REPO:
-        modExecutor.showRepo(targetRepoRuleValues);
-        break;
-      case SHOW_EXTENSION:
-        modExecutor.showExtension(argsAsExtensions, usageKeys);
-        break;
-      default:
-        throw new IllegalStateException("Unexpected subcommand: " + subcommand);
+    try {
+      switch (subcommand) {
+        case GRAPH:
+          modExecutor.graph(fromKeys);
+          break;
+        case DEPS:
+          modExecutor.graph(argsAsModules);
+          break;
+        case PATH:
+          modExecutor.path(fromKeys, argsAsModules);
+          break;
+        case ALL_PATHS:
+        case EXPLAIN:
+          modExecutor.allPaths(fromKeys, argsAsModules);
+          break;
+        case SHOW_REPO:
+          modExecutor.showRepo(targetRepoRuleValues);
+          break;
+        case SHOW_EXTENSION:
+          modExecutor.showExtension(argsAsExtensions, usageKeys);
+          break;
+        default:
+          throw new IllegalStateException("Unexpected subcommand: " + subcommand);
+      }
+    } catch (InvalidArgumentException e) {
+      return reportAndCreateFailureResult(env, e.getMessage(), Code.INVALID_ARGUMENTS);
     }
 
     return BlazeCommandResult.success();
diff --git a/src/test/py/bazel/bzlmod/mod_command_test.py b/src/test/py/bazel/bzlmod/mod_command_test.py
index 1437a93c63..699c42da46 100644
--- a/src/test/py/bazel/bzlmod/mod_command_test.py
+++ b/src/test/py/bazel/bzlmod/mod_command_test.py
@@ -381,6 +381,21 @@ class ModCommandTest(test_base.TestBase):
         '\n'.join(stderr),
     )
 
+  def testShowExtensionWithUnknownExtension(self):
+    _, _, stderr = self.RunBazel(
+        [
+            'mod',
+            'show_extension',
+            '@ext//foo:unknown.bzl%x',
+        ],
+        allow_failure=True,
+        rstrip=True,
+    )
+    self.assertIn(
+        'No extension @@ext~//foo:unknown.bzl%x exists in the dependency graph',
+        '\n'.join(stderr),
+    )
+
   def testShowModuleAndExtensionReposFromBaseModule(self):
     _, stdout, _ = self.RunBazel(
         [
