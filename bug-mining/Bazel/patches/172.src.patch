diff --git a/src/main/java/com/google/devtools/build/lib/exec/SpawnLogContext.java b/src/main/java/com/google/devtools/build/lib/exec/SpawnLogContext.java
index 985f455554..bcace57869 100644
--- a/src/main/java/com/google/devtools/build/lib/exec/SpawnLogContext.java
+++ b/src/main/java/com/google/devtools/build/lib/exec/SpawnLogContext.java
@@ -121,6 +121,10 @@ public abstract class SpawnLogContext implements ActionContext {
     if (input.isSymlink()) {
       return false;
     }
+    // Virtual action inputs are always files.
+    if (input instanceof VirtualActionInput) {
+      return false;
+    }
     // There are two cases in which an input's declared type may disagree with the filesystem:
     //   (1) a source artifact pointing to a directory;
     //   (2) an output artifact declared as a file but materialized as a directory, when allowed by
diff --git a/src/test/java/com/google/devtools/build/lib/exec/SpawnLogContextTestBase.java b/src/test/java/com/google/devtools/build/lib/exec/SpawnLogContextTestBase.java
index 1e5d85abd1..2f427c4412 100644
--- a/src/test/java/com/google/devtools/build/lib/exec/SpawnLogContextTestBase.java
+++ b/src/test/java/com/google/devtools/build/lib/exec/SpawnLogContextTestBase.java
@@ -30,8 +30,10 @@ import com.google.devtools.build.lib.actions.Artifact.SpecialArtifactType;
 import com.google.devtools.build.lib.actions.Artifact.TreeFileArtifact;
 import com.google.devtools.build.lib.actions.ArtifactRoot;
 import com.google.devtools.build.lib.actions.ArtifactRoot.RootType;
+import com.google.devtools.build.lib.actions.CommandLines.ParamFileActionInput;
 import com.google.devtools.build.lib.actions.FileArtifactValue;
 import com.google.devtools.build.lib.actions.InputMetadataProvider;
+import com.google.devtools.build.lib.actions.ParameterFile.ParameterFileType;
 import com.google.devtools.build.lib.actions.RunfilesTree;
 import com.google.devtools.build.lib.actions.Spawn;
 import com.google.devtools.build.lib.actions.SpawnMetrics;
@@ -483,6 +485,36 @@ public abstract class SpawnLogContextTestBase {
             .build());
   }
 
+  @Test
+  public void testParamFileInput() throws Exception {
+    ParamFileActionInput paramFileInput =
+        new ParamFileActionInput(
+            PathFragment.create("foo.params"),
+            ImmutableList.of("a", "b", "c"),
+            ParameterFileType.UNQUOTED,
+            UTF_8);
+
+    // Do not materialize the file on disk, which would be the case when running remotely.
+    SpawnBuilder spawn = defaultSpawnBuilder().withInputs(paramFileInput);
+
+    SpawnLogContext context = createSpawnLogContext();
+
+    context.logSpawn(
+        spawn.build(),
+        // ParamFileActionInputs appear in the input map but not in the metadata provider.
+        createInputMetadataProvider(),
+        createInputMap(paramFileInput),
+        fs,
+        defaultTimeout(),
+        defaultSpawnResult());
+
+    closeAndAssertLog(
+        context,
+        defaultSpawnExecBuilder()
+            .addInputs(File.newBuilder().setPath("foo.params").setDigest(getDigest("a\nb\nc\n")))
+            .build());
+  }
+
   @Test
   public void testFileOutput(
       @TestParameter OutputsMode outputsMode, @TestParameter OutputIndirection indirection)
@@ -980,13 +1012,13 @@ public abstract class SpawnLogContextTestBase {
     return new StaticInputMetadataProvider(builder.buildOrThrow());
   }
 
-  protected static SortedMap<PathFragment, ActionInput> createInputMap(Artifact... artifacts)
+  protected static SortedMap<PathFragment, ActionInput> createInputMap(ActionInput... actionInputs)
       throws Exception {
-    return createInputMap(null, artifacts);
+    return createInputMap(null, actionInputs);
   }
 
   protected static SortedMap<PathFragment, ActionInput> createInputMap(
-      RunfilesTree runfilesTree, Artifact... artifacts) throws Exception {
+      RunfilesTree runfilesTree, ActionInput... actionInputs) throws Exception {
     ImmutableSortedMap.Builder<PathFragment, ActionInput> builder =
         ImmutableSortedMap.naturalOrder();
 
@@ -1000,8 +1032,8 @@ public abstract class SpawnLogContextTestBase {
       }
     }
 
-    for (Artifact artifact : artifacts) {
-      if (artifact.isTreeArtifact()) {
+    for (ActionInput actionInput : actionInputs) {
+      if (actionInput instanceof Artifact artifact && artifact.isTreeArtifact()) {
         // Emulate SpawnInputExpander: expand to children, preserve if empty.
         TreeArtifactValue treeMetadata = createTreeArtifactValue(artifact);
         if (treeMetadata.getChildren().isEmpty()) {
@@ -1012,7 +1044,7 @@ public abstract class SpawnLogContextTestBase {
           }
         }
       } else {
-        builder.put(artifact.getExecPath(), artifact);
+        builder.put(actionInput.getExecPath(), actionInput);
       }
     }
     return builder.buildOrThrow();
