diff --git a/src/main/java/com/google/devtools/build/lib/buildeventservice/BuildEventServiceModule.java b/src/main/java/com/google/devtools/build/lib/buildeventservice/BuildEventServiceModule.java
index 898f7a897f..106aa6ff19 100644
--- a/src/main/java/com/google/devtools/build/lib/buildeventservice/BuildEventServiceModule.java
+++ b/src/main/java/com/google/devtools/build/lib/buildeventservice/BuildEventServiceModule.java
@@ -769,6 +769,7 @@ public abstract class BuildEventServiceModule<OptionsT extends BuildEventService
             .commandName(cmdEnv.getCommandName())
             .keywords(getBesKeywords(besOptions, cmdEnv.getRuntime().getStartupOptionsProvider()))
             .checkPrecedingLifecycleEvents(besOptions.besCheckPrecedingLifecycleEvents)
+            .attemptNumber(cmdEnv.getAttemptNumber())
             .build();
 
     return new BuildEventServiceTransport.Builder()
diff --git a/src/main/java/com/google/devtools/build/lib/buildeventservice/BuildEventServiceProtoUtil.java b/src/main/java/com/google/devtools/build/lib/buildeventservice/BuildEventServiceProtoUtil.java
index 899958c298..0a68c75f64 100644
--- a/src/main/java/com/google/devtools/build/lib/buildeventservice/BuildEventServiceProtoUtil.java
+++ b/src/main/java/com/google/devtools/build/lib/buildeventservice/BuildEventServiceProtoUtil.java
@@ -14,6 +14,7 @@
 
 package com.google.devtools.build.lib.buildeventservice;
 
+import static com.google.common.base.Preconditions.checkArgument;
 import static com.google.common.base.Preconditions.checkNotNull;
 import static com.google.devtools.build.v1.BuildEvent.BuildComponentStreamFinished.FinishType.FINISHED;
 
@@ -48,6 +49,7 @@ public final class BuildEventServiceProtoUtil {
   private final String commandName;
   private final Set<String> additionalKeywords;
   private final boolean checkPrecedingLifecycleEvents;
+  private final int attemptNumber;
 
   private BuildEventServiceProtoUtil(
       String buildRequestId,
@@ -55,13 +57,17 @@ public final class BuildEventServiceProtoUtil {
       @Nullable String projectId,
       String commandName,
       Set<String> additionalKeywords,
-      boolean checkPrecedingLifecycleEvents) {
+      boolean checkPrecedingLifecycleEvents,
+      int attemptNumber) {
+    checkArgument(attemptNumber >= 1);
+
     this.buildRequestId = buildRequestId;
     this.buildInvocationId = buildInvocationId;
     this.projectId = projectId;
     this.commandName = commandName;
     this.additionalKeywords = ImmutableSet.copyOf(additionalKeywords);
     this.checkPrecedingLifecycleEvents = checkPrecedingLifecycleEvents;
+    this.attemptNumber = attemptNumber;
   }
 
   public PublishLifecycleEventRequest buildEnqueued(Timestamp timestamp) {
@@ -93,7 +99,7 @@ public final class BuildEventServiceProtoUtil {
             com.google.devtools.build.v1.BuildEvent.newBuilder()
                 .setEventTime(timestamp)
                 .setInvocationAttemptStarted(
-                    InvocationAttemptStarted.newBuilder().setAttemptNumber(1)))
+                    InvocationAttemptStarted.newBuilder().setAttemptNumber(attemptNumber)))
         .build();
   }
 
@@ -219,6 +225,7 @@ public final class BuildEventServiceProtoUtil {
     private Set<String> keywords;
     @Nullable private String projectId;
     private boolean checkPrecedingLifecycleEvents;
+    private int attemptNumber;
 
     @CanIgnoreReturnValue
     public Builder buildRequestId(String value) {
@@ -256,6 +263,12 @@ public final class BuildEventServiceProtoUtil {
       return this;
     }
 
+    @CanIgnoreReturnValue
+    public Builder attemptNumber(int attemptNumber) {
+      this.attemptNumber = attemptNumber;
+      return this;
+    }
+
     public BuildEventServiceProtoUtil build() {
       return new BuildEventServiceProtoUtil(
           checkNotNull(buildRequestId),
@@ -263,7 +276,8 @@ public final class BuildEventServiceProtoUtil {
           projectId,
           checkNotNull(commandName),
           checkNotNull(keywords),
-          checkPrecedingLifecycleEvents);
+          checkPrecedingLifecycleEvents,
+          attemptNumber);
     }
   }
 }
diff --git a/src/main/java/com/google/devtools/build/lib/runtime/BlazeCommandDispatcher.java b/src/main/java/com/google/devtools/build/lib/runtime/BlazeCommandDispatcher.java
index 1cc2852d54..80e16dd953 100644
--- a/src/main/java/com/google/devtools/build/lib/runtime/BlazeCommandDispatcher.java
+++ b/src/main/java/com/google/devtools/build/lib/runtime/BlazeCommandDispatcher.java
@@ -240,9 +240,11 @@ public class BlazeCommandDispatcher implements CommandDispatcher {
             retrievedShutdownReason, FailureDetails.Command.Code.PREVIOUSLY_SHUTDOWN);
       }
       BlazeCommandResult result;
+      int attemptNumber = 0;
       Set<UUID> attemptedCommandIds = new HashSet<>();
       BlazeCommandResult lastResult = null;
       while (true) {
+        attemptNumber += 1;
         try {
           result =
               execExclusively(
@@ -255,6 +257,7 @@ public class BlazeCommandDispatcher implements CommandDispatcher {
                   waitTimeInMs,
                   startupOptionsTaggedWithBazelRc,
                   commandExtensions,
+                  attemptNumber,
                   attemptedCommandIds,
                   lastResult,
                   commandExtensionReporter);
@@ -313,6 +316,7 @@ public class BlazeCommandDispatcher implements CommandDispatcher {
       long waitTimeInMs,
       Optional<List<Pair<String, String>>> startupOptionsTaggedWithBazelRc,
       List<Any> commandExtensions,
+      int attemptNumber,
       Set<UUID> attemptedCommandIds,
       @Nullable BlazeCommandResult lastResult,
       CommandExtensionReporter commandExtensionReporter)
@@ -343,7 +347,8 @@ public class BlazeCommandDispatcher implements CommandDispatcher {
             firstContactTime,
             commandExtensions,
             this::setShutdownReason,
-            commandExtensionReporter);
+            commandExtensionReporter,
+            attemptNumber);
 
     if (!attemptedCommandIds.isEmpty()) {
       if (attemptedCommandIds.contains(env.getCommandId())) {
diff --git a/src/main/java/com/google/devtools/build/lib/runtime/BlazeWorkspace.java b/src/main/java/com/google/devtools/build/lib/runtime/BlazeWorkspace.java
index e8c7360dab..19d8766abb 100644
--- a/src/main/java/com/google/devtools/build/lib/runtime/BlazeWorkspace.java
+++ b/src/main/java/com/google/devtools/build/lib/runtime/BlazeWorkspace.java
@@ -210,7 +210,8 @@ public final class BlazeWorkspace {
       long commandStartTime,
       List<Any> commandExtensions,
       Consumer<String> shutdownReasonConsumer,
-      CommandExtensionReporter commandExtensionReporter) {
+      CommandExtensionReporter commandExtensionReporter,
+      int attemptNumber) {
     quiescingExecutors.resetParameters(options);
     CommandEnvironment env =
         new CommandEnvironment(
@@ -227,7 +228,8 @@ public final class BlazeWorkspace {
             commandStartTime,
             commandExtensions,
             shutdownReasonConsumer,
-            commandExtensionReporter);
+            commandExtensionReporter,
+            attemptNumber);
     skyframeExecutor.setClientEnv(env.getClientEnv());
     BuildRequestOptions buildRequestOptions = options.getOptions(BuildRequestOptions.class);
     if (buildRequestOptions != null && !buildRequestOptions.useActionCache) {
diff --git a/src/main/java/com/google/devtools/build/lib/runtime/CommandEnvironment.java b/src/main/java/com/google/devtools/build/lib/runtime/CommandEnvironment.java
index 75d6dbc1a7..04468fa9ee 100644
--- a/src/main/java/com/google/devtools/build/lib/runtime/CommandEnvironment.java
+++ b/src/main/java/com/google/devtools/build/lib/runtime/CommandEnvironment.java
@@ -14,6 +14,7 @@
 
 package com.google.devtools.build.lib.runtime;
 
+import static com.google.common.base.Preconditions.checkArgument;
 import static com.google.common.base.Preconditions.checkState;
 
 import com.google.common.annotations.VisibleForTesting;
@@ -118,6 +119,7 @@ public class CommandEnvironment {
   private final BuildResultListener buildResultListener;
   private final CommandLinePathFactory commandLinePathFactory;
   private final CommandExtensionReporter commandExtensionReporter;
+  private final int attemptNumber;
 
   private boolean mergedAnalysisAndExecution;
 
@@ -190,7 +192,10 @@ public class CommandEnvironment {
       long commandStartTime,
       List<Any> commandExtensions,
       Consumer<String> shutdownReasonConsumer,
-      CommandExtensionReporter commandExtensionReporter) {
+      CommandExtensionReporter commandExtensionReporter,
+      int attemptNumber) {
+    checkArgument(attemptNumber >= 1);
+
     this.runtime = runtime;
     this.workspace = workspace;
     this.directories = workspace.getDirectories();
@@ -205,6 +210,7 @@ public class CommandEnvironment {
     this.commandExtensionReporter = commandExtensionReporter;
     this.blazeModuleEnvironment = new BlazeModuleEnvironment();
     this.timestampGranularityMonitor = new TimestampGranularityMonitor(runtime.getClock());
+    this.attemptNumber = attemptNumber;
     // Record the command's starting time again, for use by
     // TimestampGranularityMonitor.waitForTimestampGranularity().
     // This should be done as close as possible to the start of
@@ -938,4 +944,13 @@ public class CommandEnvironment {
   void gotBuildInfo(BuildInfoEvent event) {
     buildInfoPosted = true;
   }
+
+  /**
+   * Returns the number of the invocation attempt, starting at 1 and increasing by 1 for each new
+   * attempt. Can be used to determine if there is a build retry by {@code
+   * --experimental_remote_cache_eviction_retries}.
+   */
+  public int getAttemptNumber() {
+    return attemptNumber;
+  }
 }
diff --git a/src/test/java/com/google/devtools/build/lib/buildeventservice/BuildEventServiceProtoUtilTest.java b/src/test/java/com/google/devtools/build/lib/buildeventservice/BuildEventServiceProtoUtilTest.java
index 65508a4c1d..286360ffe7 100644
--- a/src/test/java/com/google/devtools/build/lib/buildeventservice/BuildEventServiceProtoUtilTest.java
+++ b/src/test/java/com/google/devtools/build/lib/buildeventservice/BuildEventServiceProtoUtilTest.java
@@ -59,6 +59,7 @@ public class BuildEventServiceProtoUtilTest {
           .projectId(PROJECT_ID)
           .commandName(COMMAND_NAME)
           .keywords(ImmutableSet.of(ADDITIONAL_KEYWORD))
+          .attemptNumber(1)
           .build();
   private final ManualClock clock = new ManualClock();
 
@@ -110,6 +111,40 @@ public class BuildEventServiceProtoUtilTest {
                 .build());
   }
 
+  @Test
+  public void invocationAttemptStarted_attemptNumber() {
+    var besProtoUtil =
+        new BuildEventServiceProtoUtil.Builder()
+            .buildRequestId(BUILD_REQUEST_ID)
+            .invocationId(BUILD_INVOCATION_ID)
+            .projectId(PROJECT_ID)
+            .commandName(COMMAND_NAME)
+            .keywords(ImmutableSet.of(ADDITIONAL_KEYWORD))
+            .attemptNumber(2)
+            .build();
+    Timestamp expected = Timestamps.fromMillis(clock.advanceMillis(100));
+    assertThat(besProtoUtil.invocationStarted(expected))
+        .isEqualTo(
+            PublishLifecycleEventRequest.newBuilder()
+                .setServiceLevel(ServiceLevel.INTERACTIVE)
+                .setProjectId(PROJECT_ID)
+                .addAllNotificationKeywords(EXPECTED_KEYWORDS)
+                .setBuildEvent(
+                    OrderedBuildEvent.newBuilder()
+                        .setStreamId(
+                            StreamId.newBuilder()
+                                .setBuildId(BUILD_REQUEST_ID)
+                                .setInvocationId(BUILD_INVOCATION_ID)
+                                .setComponent(BuildComponent.CONTROLLER))
+                        .setSequenceNumber(1)
+                        .setEvent(
+                            BuildEvent.newBuilder()
+                                .setEventTime(expected)
+                                .setInvocationAttemptStarted(
+                                    InvocationAttemptStarted.newBuilder().setAttemptNumber(2))))
+                .build());
+  }
+
   @Test
   public void testInvocationAttemptFinished() {
     Timestamp expected = Timestamps.fromMillis(clock.advanceMillis(100));
@@ -241,6 +276,7 @@ public class BuildEventServiceProtoUtilTest {
             .commandName(COMMAND_NAME)
             .checkPrecedingLifecycleEvents(true)
             .keywords(ImmutableSet.of(ADDITIONAL_KEYWORD))
+            .attemptNumber(1)
             .build();
     assertThat(
             besProtoUtil
diff --git a/src/test/java/com/google/devtools/build/lib/buildtool/util/BlazeRuntimeWrapper.java b/src/test/java/com/google/devtools/build/lib/buildtool/util/BlazeRuntimeWrapper.java
index 0a945295e9..fc422ae52c 100644
--- a/src/test/java/com/google/devtools/build/lib/buildtool/util/BlazeRuntimeWrapper.java
+++ b/src/test/java/com/google/devtools/build/lib/buildtool/util/BlazeRuntimeWrapper.java
@@ -217,7 +217,8 @@ public class BlazeRuntimeWrapper {
                 /* commandStartTime= */ 0L,
                 extensions.stream().map(Any::pack).collect(toImmutableList()),
                 this.crashMessages::add,
-                NO_OP_COMMAND_EXTENSION_REPORTER);
+                NO_OP_COMMAND_EXTENSION_REPORTER,
+                /* attemptNumber= */ 1);
     return env;
   }
 
diff --git a/src/test/java/com/google/devtools/build/lib/remote/RemoteModuleTest.java b/src/test/java/com/google/devtools/build/lib/remote/RemoteModuleTest.java
index 746f3c6931..b8a7c91997 100644
--- a/src/test/java/com/google/devtools/build/lib/remote/RemoteModuleTest.java
+++ b/src/test/java/com/google/devtools/build/lib/remote/RemoteModuleTest.java
@@ -174,7 +174,8 @@ public final class RemoteModuleTest {
         /* commandStartTime= */ 0,
         /* commandExtensions= */ ImmutableList.of(),
         /* shutdownReasonConsumer= */ s -> {},
-        NO_OP_COMMAND_EXTENSION_REPORTER);
+        NO_OP_COMMAND_EXTENSION_REPORTER,
+        /* attemptNumber= */ 1);
   }
 
   static class CapabilitiesImpl extends CapabilitiesImplBase {
diff --git a/src/test/java/com/google/devtools/build/lib/runtime/BlazeRuntimeTest.java b/src/test/java/com/google/devtools/build/lib/runtime/BlazeRuntimeTest.java
index 02230f64af..1a2bd62223 100644
--- a/src/test/java/com/google/devtools/build/lib/runtime/BlazeRuntimeTest.java
+++ b/src/test/java/com/google/devtools/build/lib/runtime/BlazeRuntimeTest.java
@@ -112,7 +112,8 @@ public class BlazeRuntimeTest {
             /* commandStartTime= */ 0L,
             /* commandExtensions= */ ImmutableList.of(),
             shutdownMessage::set,
-            NO_OP_COMMAND_EXTENSION_REPORTER);
+            NO_OP_COMMAND_EXTENSION_REPORTER,
+            /* attemptNumber= */ 1);
     runtime.beforeCommand(env, options.getOptions(CommonCommandOptions.class));
     DetailedExitCode oom =
         DetailedExitCode.of(
@@ -163,7 +164,8 @@ public class BlazeRuntimeTest {
             /* commandStartTime= */ 0L,
             /* commandExtensions= */ ImmutableList.of(),
             /* shutdownReasonConsumer= */ s -> {},
-            NO_OP_COMMAND_EXTENSION_REPORTER);
+            NO_OP_COMMAND_EXTENSION_REPORTER,
+            /* attemptNumber= */ 1);
     Any anyFoo = Any.pack(StringValue.of("foo"));
     Any anyBar = Any.pack(BytesValue.of(ByteString.copyFromUtf8("bar")));
     env.addResponseExtensions(ImmutableList.of(anyFoo, anyBar));
