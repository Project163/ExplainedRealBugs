diff --git a/src/main/java/com/google/devtools/build/lib/bazel/rules/java/BUILD b/src/main/java/com/google/devtools/build/lib/bazel/rules/java/BUILD
index 9f1367b17f..3d8881f457 100644
--- a/src/main/java/com/google/devtools/build/lib/bazel/rules/java/BUILD
+++ b/src/main/java/com/google/devtools/build/lib/bazel/rules/java/BUILD
@@ -17,9 +17,12 @@ java_library(
     name = "bazel_java_semantics",
     srcs = ["BazelJavaSemantics.java"],
     deps = [
+        "//src/main/java/com/google/devtools/build/lib/analysis:constraints/constraint_constants",
+        "//src/main/java/com/google/devtools/build/lib/analysis/platform",
         "//src/main/java/com/google/devtools/build/lib/cmdline",
         "//src/main/java/com/google/devtools/build/lib/rules/java:java-compilation",
         "//src/main/java/com/google/devtools/build/lib/skyframe/serialization/autocodec:serialization-constant",
+        "//src/main/java/com/google/devtools/build/lib/util:os",
         "//src/main/java/com/google/devtools/build/lib/vfs:pathfragment",
         "//third_party:guava",
     ],
diff --git a/src/main/java/com/google/devtools/build/lib/bazel/rules/java/BazelJavaSemantics.java b/src/main/java/com/google/devtools/build/lib/bazel/rules/java/BazelJavaSemantics.java
index 4b009a6541..a573600307 100644
--- a/src/main/java/com/google/devtools/build/lib/bazel/rules/java/BazelJavaSemantics.java
+++ b/src/main/java/com/google/devtools/build/lib/bazel/rules/java/BazelJavaSemantics.java
@@ -15,10 +15,13 @@
 package com.google.devtools.build.lib.bazel.rules.java;
 
 import com.google.common.collect.ImmutableMap;
+import com.google.devtools.build.lib.analysis.constraints.ConstraintConstants;
+import com.google.devtools.build.lib.analysis.platform.PlatformInfo;
 import com.google.devtools.build.lib.cmdline.Label;
 import com.google.devtools.build.lib.rules.java.JavaSemantics;
 import com.google.devtools.build.lib.rules.java.JavaUtil;
 import com.google.devtools.build.lib.skyframe.serialization.autocodec.SerializationConstant;
+import com.google.devtools.build.lib.util.OS;
 import com.google.devtools.build.lib.vfs.PathFragment;
 import java.util.List;
 
@@ -27,11 +30,16 @@ public class BazelJavaSemantics implements JavaSemantics {
 
   /**
    * {@code C.UTF-8} is now the universally accepted standard UTF-8 locale, to the point where some
-   * minimal distributions no longer ship with {@code en_US.UTF-8}.
+   * minimal Linux distributions no longer ship with {@code en_US.UTF-8}. macOS doesn't have it
+   * though.
    */
-  private static final ImmutableMap<String, String> UTF8_ENVIRONMENT =
+  private static final ImmutableMap<String, String> DEFAULT_UTF8_ENVIRONMENT =
       ImmutableMap.of("LC_CTYPE", "C.UTF-8");
 
+  /** macOS doesn't have {@code C.UTF-8}, so we use {@code en_US.UTF-8} instead. */
+  private static final ImmutableMap<String, String> MACOS_UTF8_ENVIRONMENT =
+      ImmutableMap.of("LC_CTYPE", "en_US.UTF-8");
+
   @SerializationConstant public static final BazelJavaSemantics INSTANCE = new BazelJavaSemantics();
 
   private BazelJavaSemantics() {}
@@ -65,7 +73,9 @@ public class BazelJavaSemantics implements JavaSemantics {
   }
 
   @Override
-  public ImmutableMap<String, String> utf8Environment() {
-    return UTF8_ENVIRONMENT;
+  public ImmutableMap<String, String> utf8Environment(PlatformInfo executionPlatform) {
+    return ConstraintConstants.getOsFromConstraints(executionPlatform.constraints()) == OS.DARWIN
+        ? MACOS_UTF8_ENVIRONMENT
+        : DEFAULT_UTF8_ENVIRONMENT;
   }
 }
diff --git a/src/main/java/com/google/devtools/build/lib/rules/java/JavaCompilationHelper.java b/src/main/java/com/google/devtools/build/lib/rules/java/JavaCompilationHelper.java
index 30bcb3140d..1bb0ddbcb7 100644
--- a/src/main/java/com/google/devtools/build/lib/rules/java/JavaCompilationHelper.java
+++ b/src/main/java/com/google/devtools/build/lib/rules/java/JavaCompilationHelper.java
@@ -289,7 +289,7 @@ public final class JavaCompilationHelper {
     builder.setSourceFiles(sourceFiles);
     builder.setSourceJars(sourceJars);
     builder.setJavacOpts(javacopts);
-    builder.setUtf8Environment(semantics.utf8Environment());
+    builder.setUtf8Environment(semantics.utf8Environment(ruleContext.getExecutionPlatform()));
     builder.setJavacExecutionInfo(executionInfoInterner.intern(getExecutionInfo()));
     builder.setCompressJar(true);
     builder.setExtraData(JavaCommon.computePerPackageData(ruleContext, javaToolchain));
@@ -462,7 +462,7 @@ public final class JavaCompilationHelper {
     builder.setAdditionalInputs(additionalInputsForDatabinding);
     builder.setToolsJars(javaToolchain.getTools());
     builder.setExecGroup(execGroup);
-    builder.setUtf8Environment(semantics.utf8Environment());
+    builder.setUtf8Environment(semantics.utf8Environment(ruleContext.getExecutionPlatform()));
     return builder;
   }
 
diff --git a/src/main/java/com/google/devtools/build/lib/rules/java/JavaSemantics.java b/src/main/java/com/google/devtools/build/lib/rules/java/JavaSemantics.java
index 7a6d3267f2..40ab6ee657 100644
--- a/src/main/java/com/google/devtools/build/lib/rules/java/JavaSemantics.java
+++ b/src/main/java/com/google/devtools/build/lib/rules/java/JavaSemantics.java
@@ -19,6 +19,7 @@ import com.google.common.collect.ImmutableList;
 import com.google.common.collect.ImmutableMap;
 import com.google.devtools.build.lib.analysis.OutputGroupInfo;
 import com.google.devtools.build.lib.analysis.RuleDefinitionEnvironment;
+import com.google.devtools.build.lib.analysis.platform.PlatformInfo;
 import com.google.devtools.build.lib.cmdline.Label;
 import com.google.devtools.build.lib.packages.Attribute.LabelListLateBoundDefault;
 import com.google.devtools.build.lib.skyframe.serialization.autocodec.SerializationConstant;
@@ -78,6 +79,6 @@ public interface JavaSemantics {
    */
   PathFragment getDefaultJavaResourcePath(PathFragment path);
 
-  /** Environment variable that sets the UTF-8 charset. */
-  ImmutableMap<String, String> utf8Environment();
+  /** Environment variable that sets the UTF-8 charset for the given execution platform. */
+  ImmutableMap<String, String> utf8Environment(PlatformInfo executionPlatform);
 }
