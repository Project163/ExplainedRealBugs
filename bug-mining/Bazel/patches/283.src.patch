diff --git a/src/main/java/com/google/devtools/build/lib/analysis/config/StarlarkExecTransitionLoader.java b/src/main/java/com/google/devtools/build/lib/analysis/config/StarlarkExecTransitionLoader.java
index e1a691b390..ad00c89bd6 100644
--- a/src/main/java/com/google/devtools/build/lib/analysis/config/StarlarkExecTransitionLoader.java
+++ b/src/main/java/com/google/devtools/build/lib/analysis/config/StarlarkExecTransitionLoader.java
@@ -37,10 +37,18 @@ public final class StarlarkExecTransitionLoader {
   /** Thrown when the Starlark transition failed to load. */
   public static class StarlarkExecTransitionLoadingException extends Exception {
     public StarlarkExecTransitionLoadingException(String context, String ref, String message) {
-      super(
+      this(
           String.format(
               "Bad Starlark transition reference from %s: %s. %s.", context, ref, message));
     }
+
+    public StarlarkExecTransitionLoadingException(String message) {
+      super(message);
+    }
+
+    public StarlarkExecTransitionLoadingException(Throwable cause) {
+      super(cause);
+    }
   }
 
   /** Caller-provided logic for Skyframe-evaluating {@link BzlLoadValue.Key}s. */
@@ -49,7 +57,8 @@ public final class StarlarkExecTransitionLoader {
      * Loads the given {@link BzlLoadValue.Key}. Returns null if not all Skyframe deps are ready.
      */
     @Nullable
-    BzlLoadValue getValue(BzlLoadValue.Key key) throws BzlLoadFailedException, InterruptedException;
+    BzlLoadValue getValue(BzlLoadValue.Key key)
+        throws BzlLoadFailedException, InterruptedException, StarlarkExecTransitionLoadingException;
   }
 
   /**
diff --git a/src/main/java/com/google/devtools/build/lib/skyframe/SkyframeExecutor.java b/src/main/java/com/google/devtools/build/lib/skyframe/SkyframeExecutor.java
index 58f56bf373..df633b7c88 100644
--- a/src/main/java/com/google/devtools/build/lib/skyframe/SkyframeExecutor.java
+++ b/src/main/java/com/google/devtools/build/lib/skyframe/SkyframeExecutor.java
@@ -2090,9 +2090,23 @@ public abstract class SkyframeExecutor implements WalkableGraphFactory {
                       /* numThreads= */ DEFAULT_THREAD_COUNT,
                       eventHandler);
               if (result.hasError()) {
-                if (result.getError(bzlKey).getException() instanceof BzlLoadFailedException e) {
-                  throw e;
+                Map.Entry<SkyKey, ErrorInfo> firstError =
+                    Iterables.get(result.errorMap().entrySet(), 0);
+                ErrorInfo error = firstError.getValue();
+                Throwable e = error.getException();
+                // Wrap loading failed exceptions
+                if (e != null) {
+                  // If it's a BzlLoadFailedException, rethrow it directly.
+                  Throwables.throwIfInstanceOf(e, BzlLoadFailedException.class);
+                  // Otherwise, wrap it.
+                  throw new StarlarkExecTransitionLoadingException(e);
+                } else if (e == null && !error.getCycleInfo().isEmpty()) {
+                  cyclesReporter.reportCycles(
+                      error.getCycleInfo(), firstError.getKey(), eventHandler);
+                  throw new StarlarkExecTransitionLoadingException(
+                      "Unexpected cycle in exec transition dependencies");
                 }
+                throw new IllegalStateException("Unknown error while creating exec transition", e);
               }
               return (BzlLoadValue) result.get(bzlKey);
             })
diff --git a/src/test/shell/integration/info_test.sh b/src/test/shell/integration/info_test.sh
index d19dfdc2af..c8ee964a76 100755
--- a/src/test/shell/integration/info_test.sh
+++ b/src/test/shell/integration/info_test.sh
@@ -98,4 +98,16 @@ function test_multiple_keys_wrong_keys() {
   expect_log "ERROR: unknown key(s): 'foo', 'bar'"
 }
 
+# Regression test for https://github.com/bazelbuild/bazel/issues/24671
+function test_invalid_flag_error() {
+  # This type of loading error only happens with external dependencies.
+  if [[ "$PRODUCT_NAME" != "bazel" ]]; then
+    return 0
+  fi
+  bazel info --registry=foobarbaz &>$TEST_log \
+    && fail "expected ${PRODUCT_NAME} to fail with an invalid registry"
+  expect_not_log "crashed due to an internal error"
+  expect_log "Invalid registry URL: foobarbaz"
+}
+
 run_suite "Integration tests for ${PRODUCT_NAME} info."
