diff --git a/src/main/java/com/google/devtools/build/lib/skyframe/CompletionFunction.java b/src/main/java/com/google/devtools/build/lib/skyframe/CompletionFunction.java
index 563ec972a0..2e1991c0d0 100644
--- a/src/main/java/com/google/devtools/build/lib/skyframe/CompletionFunction.java
+++ b/src/main/java/com/google/devtools/build/lib/skyframe/CompletionFunction.java
@@ -62,6 +62,7 @@ import com.google.devtools.build.lib.events.Event;
 import com.google.devtools.build.lib.events.ExtendedEventHandler.Postable;
 import com.google.devtools.build.lib.profiler.GoogleAutoProfilerUtils;
 import com.google.devtools.build.lib.server.FailureDetails.FailureDetail;
+import com.google.devtools.build.lib.server.FailureDetails.RemoteExecution;
 import com.google.devtools.build.lib.skyframe.ArtifactFunction.MissingArtifactValue;
 import com.google.devtools.build.lib.skyframe.ArtifactFunction.SourceArtifactException;
 import com.google.devtools.build.lib.skyframe.MetadataConsumerForMetrics.FilesMetricConsumer;
@@ -447,7 +448,14 @@ public final class CompletionFunction<
       throw new CompletionFunctionException(
           new TopLevelOutputException(
               e.getMessage(),
-              DetailedExitCode.of(FailureDetail.newBuilder().setMessage(e.getMessage()).build())));
+              DetailedExitCode.of(
+                  FailureDetail.newBuilder()
+                      .setMessage(e.getMessage())
+                      .setRemoteExecution(
+                          RemoteExecution.newBuilder()
+                              .setCode(RemoteExecution.Code.TOPLEVEL_OUTPUTS_DOWNLOAD_FAILURE)
+                              .build())
+                      .build())));
     }
   }
 
diff --git a/src/main/protobuf/failure_details.proto b/src/main/protobuf/failure_details.proto
index b86a74bc67..f449491b64 100644
--- a/src/main/protobuf/failure_details.proto
+++ b/src/main/protobuf/failure_details.proto
@@ -420,6 +420,7 @@ message RemoteExecution {
         [(metadata) = { exit_code: 1 }];
     ILLEGAL_OUTPUT = 15 [(metadata) = { exit_code: 1 }];
     INVALID_EXEC_AND_PLATFORM_PROPERTIES = 16 [(metadata) = { exit_code: 1 }];
+    TOPLEVEL_OUTPUTS_DOWNLOAD_FAILURE = 17 [(metadata) = { exit_code: 34 }];
   }
 
   Code code = 1;
