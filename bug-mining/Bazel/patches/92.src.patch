diff --git a/src/main/starlark/builtins_bzl/common/cc/cc_shared_library.bzl b/src/main/starlark/builtins_bzl/common/cc/cc_shared_library.bzl
index 15521611e2..3661767f3d 100644
--- a/src/main/starlark/builtins_bzl/common/cc/cc_shared_library.bzl
+++ b/src/main/starlark/builtins_bzl/common/cc/cc_shared_library.bzl
@@ -454,11 +454,6 @@ def _filter_inputs(
             _add_linker_input_to_dict(linker_input.owner, transitive_exports[owner])
             linker_inputs_count += 1
         elif owner in targets_to_be_linked_statically_map:
-            if not linker_input.libraries:
-                # TODO(bazel-team): semantics.should_create_empty_archive() should be
-                # cleaned up and return False in every case. cc_libraries shouldn't
-                # produce empty archives. For now issue #19920 is only fixed in Bazel.
-                continue
             if owner in link_once_static_libs_map:
                 # We are building a dictionary that will allow us to give
                 # proper errors for libraries that have been linked multiple
diff --git a/src/main/starlark/tests/builtins_bzl/cc/cc_shared_library/test_cc_shared_library/BUILD.builtin_test b/src/main/starlark/tests/builtins_bzl/cc/cc_shared_library/test_cc_shared_library/BUILD.builtin_test
index dd99fbbfd3..c60473a3c4 100644
--- a/src/main/starlark/tests/builtins_bzl/cc/cc_shared_library/test_cc_shared_library/BUILD.builtin_test
+++ b/src/main/starlark/tests/builtins_bzl/cc/cc_shared_library/test_cc_shared_library/BUILD.builtin_test
@@ -156,7 +156,7 @@ cc_library(
         "//conditions:default": [],
     }),
     deps = select({
-        ":is_bazel": ["qux2", "hdr_only"],
+        ":is_bazel": ["qux2"],
         "//conditions:default": [],
     }) + [
         "bar",
@@ -298,7 +298,7 @@ cc_library(
     deps = [
         "barX",
     ] + select({
-        ":is_bazel": ["qux2", "hdr_only"],
+        ":is_bazel": ["qux2"],
         "//conditions:default": [],
     }),
 )
@@ -449,17 +449,6 @@ cc_library(
     srcs = [":private_cc_library.cc"]
 )
 
-genrule(
-    name = "hdr_only_hdr",
-    outs = ["hdr_only_hdr.h"],
-    cmd = "touch $@",
-)
-
-cc_library(
-    name = "hdr_only",
-    hdrs = [":hdr_only_hdr"],
-)
-
 build_failure_test(
     name = "two_dynamic_deps_same_export_in_so_test",
     message = "Two shared libraries in dependencies export the same symbols",
