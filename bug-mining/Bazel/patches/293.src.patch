diff --git a/tools/test/CoverageOutputGenerator/java/com/google/devtools/coverageoutputgenerator/LcovParser.java b/tools/test/CoverageOutputGenerator/java/com/google/devtools/coverageoutputgenerator/LcovParser.java
index e2332f118a..7125b2ffa8 100644
--- a/tools/test/CoverageOutputGenerator/java/com/google/devtools/coverageoutputgenerator/LcovParser.java
+++ b/tools/test/CoverageOutputGenerator/java/com/google/devtools/coverageoutputgenerator/LcovParser.java
@@ -156,17 +156,22 @@ class LcovParser {
     return true;
   }
 
-  // FN:<line number of function start>,<function name>
+  // FN:<line number of function start>,[<line number of function end>,]<function name>
   private boolean parseFNLine(String line) {
     String lineContent = line.substring(FN_MARKER.length());
     String[] funcData = lineContent.split(DELIMITER, -1);
-    if (funcData.length != 2 || funcData[0].isEmpty() || funcData[1].isEmpty()) {
+    if (funcData.length < 2
+        || funcData.length > 3
+        || (funcData.length == 3 && funcData[2].isEmpty())
+        || funcData[0].isEmpty()
+        || funcData[1].isEmpty()) {
       logger.log(Level.WARNING, "Tracefile contains invalid FN line " + line);
       return false;
     }
     try {
       int lineNrFunctionStart = Integer.parseInt(funcData[0]);
-      String functionName = funcData[1];
+      // Line number of function end is optional and not used.
+      String functionName = funcData[funcData.length - 1];
       currentSourceFileCoverage.addLineNumber(functionName, lineNrFunctionStart);
     } catch (NumberFormatException e) {
       logger.log(Level.WARNING, "Tracefile contains invalid line number on FN line " + line);
diff --git a/tools/test/CoverageOutputGenerator/javatests/com/google/devtools/coverageoutputgenerator/LcovParserTest.java b/tools/test/CoverageOutputGenerator/javatests/com/google/devtools/coverageoutputgenerator/LcovParserTest.java
index 771fd8d156..158a6865ae 100644
--- a/tools/test/CoverageOutputGenerator/javatests/com/google/devtools/coverageoutputgenerator/LcovParserTest.java
+++ b/tools/test/CoverageOutputGenerator/javatests/com/google/devtools/coverageoutputgenerator/LcovParserTest.java
@@ -180,4 +180,14 @@ public class LcovParserTest {
             BranchCoverage.create(7, 1),
             BranchCoverage.create(7, 2));
   }
+
+  @Test
+  public void testParseFnWithEnd() throws IOException {
+    List<String> traceFile = ImmutableList.of("SF:SOURCE_FILE", "FN:2,3,func", "end_of_record");
+    List<SourceFileCoverage> sourceFiles =
+        LcovParser.parse(new ByteArrayInputStream(Joiner.on("\n").join(traceFile).getBytes(UTF_8)));
+    SourceFileCoverage sourceFile = sourceFiles.get(0);
+
+    assertThat(sourceFile.getAllLineNumbers()).containsExactly(Map.entry("func", 2));
+  }
 }
