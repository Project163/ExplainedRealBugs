[{"id":10189676647,"node_id":"LE_lADOATz7jc5vQEg5zwAAAAJfWiBn","url":"https://api.github.com/repos/bazelbuild/bazel/issues/events/10189676647","actor":{"login":"hofst","id":2535762,"node_id":"MDQ6VXNlcjI1MzU3NjI=","avatar_url":"https://avatars.githubusercontent.com/u/2535762?v=4","gravatar_id":"","url":"https://api.github.com/users/hofst","html_url":"https://github.com/hofst","followers_url":"https://api.github.com/users/hofst/followers","following_url":"https://api.github.com/users/hofst/following{/other_user}","gists_url":"https://api.github.com/users/hofst/gists{/gist_id}","starred_url":"https://api.github.com/users/hofst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hofst/subscriptions","organizations_url":"https://api.github.com/users/hofst/orgs","repos_url":"https://api.github.com/users/hofst/repos","events_url":"https://api.github.com/users/hofst/events{/privacy}","received_events_url":"https://api.github.com/users/hofst/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2023-08-25T07:19:46Z","label":{"name":"type: bug","color":"0052cc"},"performed_via_github_app":null},{"id":10189676652,"node_id":"LE_lADOATz7jc5vQEg5zwAAAAJfWiBs","url":"https://api.github.com/repos/bazelbuild/bazel/issues/events/10189676652","actor":{"login":"hofst","id":2535762,"node_id":"MDQ6VXNlcjI1MzU3NjI=","avatar_url":"https://avatars.githubusercontent.com/u/2535762?v=4","gravatar_id":"","url":"https://api.github.com/users/hofst","html_url":"https://github.com/hofst","followers_url":"https://api.github.com/users/hofst/followers","following_url":"https://api.github.com/users/hofst/following{/other_user}","gists_url":"https://api.github.com/users/hofst/gists{/gist_id}","starred_url":"https://api.github.com/users/hofst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hofst/subscriptions","organizations_url":"https://api.github.com/users/hofst/orgs","repos_url":"https://api.github.com/users/hofst/repos","events_url":"https://api.github.com/users/hofst/events{/privacy}","received_events_url":"https://api.github.com/users/hofst/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2023-08-25T07:19:46Z","label":{"name":"untriaged","color":"c34ddd"},"performed_via_github_app":null},{"id":10189676705,"node_id":"AE_lADOATz7jc5vQEg5zwAAAAJfWiCh","url":"https://api.github.com/repos/bazelbuild/bazel/issues/events/10189676705","actor":{"login":"hofst","id":2535762,"node_id":"MDQ6VXNlcjI1MzU3NjI=","avatar_url":"https://avatars.githubusercontent.com/u/2535762?v=4","gravatar_id":"","url":"https://api.github.com/users/hofst","html_url":"https://github.com/hofst","followers_url":"https://api.github.com/users/hofst/followers","following_url":"https://api.github.com/users/hofst/following{/other_user}","gists_url":"https://api.github.com/users/hofst/gists{/gist_id}","starred_url":"https://api.github.com/users/hofst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hofst/subscriptions","organizations_url":"https://api.github.com/users/hofst/orgs","repos_url":"https://api.github.com/users/hofst/repos","events_url":"https://api.github.com/users/hofst/events{/privacy}","received_events_url":"https://api.github.com/users/hofst/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"assigned","commit_id":null,"commit_url":null,"created_at":"2023-08-25T07:19:46Z","assignee":{"login":"iancha1992","id":132618328,"node_id":"U_kgDOB-eYWA","avatar_url":"https://avatars.githubusercontent.com/u/132618328?v=4","gravatar_id":"","url":"https://api.github.com/users/iancha1992","html_url":"https://github.com/iancha1992","followers_url":"https://api.github.com/users/iancha1992/followers","following_url":"https://api.github.com/users/iancha1992/following{/other_user}","gists_url":"https://api.github.com/users/iancha1992/gists{/gist_id}","starred_url":"https://api.github.com/users/iancha1992/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iancha1992/subscriptions","organizations_url":"https://api.github.com/users/iancha1992/orgs","repos_url":"https://api.github.com/users/iancha1992/repos","events_url":"https://api.github.com/users/iancha1992/events{/privacy}","received_events_url":"https://api.github.com/users/iancha1992/received_events","type":"User","user_view_type":"public","site_admin":false},"performed_via_github_app":null},{"id":10189676761,"node_id":"AE_lADOATz7jc5vQEg5zwAAAAJfWiDZ","url":"https://api.github.com/repos/bazelbuild/bazel/issues/events/10189676761","actor":{"login":"hofst","id":2535762,"node_id":"MDQ6VXNlcjI1MzU3NjI=","avatar_url":"https://avatars.githubusercontent.com/u/2535762?v=4","gravatar_id":"","url":"https://api.github.com/users/hofst","html_url":"https://github.com/hofst","followers_url":"https://api.github.com/users/hofst/followers","following_url":"https://api.github.com/users/hofst/following{/other_user}","gists_url":"https://api.github.com/users/hofst/gists{/gist_id}","starred_url":"https://api.github.com/users/hofst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hofst/subscriptions","organizations_url":"https://api.github.com/users/hofst/orgs","repos_url":"https://api.github.com/users/hofst/repos","events_url":"https://api.github.com/users/hofst/events{/privacy}","received_events_url":"https://api.github.com/users/hofst/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"assigned","commit_id":null,"commit_url":null,"created_at":"2023-08-25T07:19:46Z","assignee":{"login":"Pavank1992","id":127178870,"node_id":"U_kgDOB5SYdg","avatar_url":"https://avatars.githubusercontent.com/u/127178870?v=4","gravatar_id":"","url":"https://api.github.com/users/Pavank1992","html_url":"https://github.com/Pavank1992","followers_url":"https://api.github.com/users/Pavank1992/followers","following_url":"https://api.github.com/users/Pavank1992/following{/other_user}","gists_url":"https://api.github.com/users/Pavank1992/gists{/gist_id}","starred_url":"https://api.github.com/users/Pavank1992/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Pavank1992/subscriptions","organizations_url":"https://api.github.com/users/Pavank1992/orgs","repos_url":"https://api.github.com/users/Pavank1992/repos","events_url":"https://api.github.com/users/Pavank1992/events{/privacy}","received_events_url":"https://api.github.com/users/Pavank1992/received_events","type":"User","user_view_type":"public","site_admin":false},"performed_via_github_app":null},{"id":10189676799,"node_id":"AE_lADOATz7jc5vQEg5zwAAAAJfWiD_","url":"https://api.github.com/repos/bazelbuild/bazel/issues/events/10189676799","actor":{"login":"hofst","id":2535762,"node_id":"MDQ6VXNlcjI1MzU3NjI=","avatar_url":"https://avatars.githubusercontent.com/u/2535762?v=4","gravatar_id":"","url":"https://api.github.com/users/hofst","html_url":"https://github.com/hofst","followers_url":"https://api.github.com/users/hofst/followers","following_url":"https://api.github.com/users/hofst/following{/other_user}","gists_url":"https://api.github.com/users/hofst/gists{/gist_id}","starred_url":"https://api.github.com/users/hofst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hofst/subscriptions","organizations_url":"https://api.github.com/users/hofst/orgs","repos_url":"https://api.github.com/users/hofst/repos","events_url":"https://api.github.com/users/hofst/events{/privacy}","received_events_url":"https://api.github.com/users/hofst/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"assigned","commit_id":null,"commit_url":null,"created_at":"2023-08-25T07:19:47Z","assignee":{"login":"sgowroji","id":48122892,"node_id":"MDQ6VXNlcjQ4MTIyODky","avatar_url":"https://avatars.githubusercontent.com/u/48122892?v=4","gravatar_id":"","url":"https://api.github.com/users/sgowroji","html_url":"https://github.com/sgowroji","followers_url":"https://api.github.com/users/sgowroji/followers","following_url":"https://api.github.com/users/sgowroji/following{/other_user}","gists_url":"https://api.github.com/users/sgowroji/gists{/gist_id}","starred_url":"https://api.github.com/users/sgowroji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sgowroji/subscriptions","organizations_url":"https://api.github.com/users/sgowroji/orgs","repos_url":"https://api.github.com/users/sgowroji/repos","events_url":"https://api.github.com/users/sgowroji/events{/privacy}","received_events_url":"https://api.github.com/users/sgowroji/received_events","type":"User","user_view_type":"public","site_admin":false},"performed_via_github_app":null},{"id":10190641780,"node_id":"LE_lADOATz7jc5vQEg5zwAAAAJfaNp0","url":"https://api.github.com/repos/bazelbuild/bazel/issues/events/10190641780","actor":{"login":"Pavank1992","id":127178870,"node_id":"U_kgDOB5SYdg","avatar_url":"https://avatars.githubusercontent.com/u/127178870?v=4","gravatar_id":"","url":"https://api.github.com/users/Pavank1992","html_url":"https://github.com/Pavank1992","followers_url":"https://api.github.com/users/Pavank1992/followers","following_url":"https://api.github.com/users/Pavank1992/following{/other_user}","gists_url":"https://api.github.com/users/Pavank1992/gists{/gist_id}","starred_url":"https://api.github.com/users/Pavank1992/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Pavank1992/subscriptions","organizations_url":"https://api.github.com/users/Pavank1992/orgs","repos_url":"https://api.github.com/users/Pavank1992/repos","events_url":"https://api.github.com/users/Pavank1992/events{/privacy}","received_events_url":"https://api.github.com/users/Pavank1992/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2023-08-25T08:55:25Z","label":{"name":"team-Core","color":"f1f442"},"performed_via_github_app":null},{"id":10190642236,"node_id":"UNE_lADOATz7jc5vQEg5zwAAAAJfaNw8","url":"https://api.github.com/repos/bazelbuild/bazel/issues/events/10190642236","actor":{"login":"Pavank1992","id":127178870,"node_id":"U_kgDOB5SYdg","avatar_url":"https://avatars.githubusercontent.com/u/127178870?v=4","gravatar_id":"","url":"https://api.github.com/users/Pavank1992","html_url":"https://github.com/Pavank1992","followers_url":"https://api.github.com/users/Pavank1992/followers","following_url":"https://api.github.com/users/Pavank1992/following{/other_user}","gists_url":"https://api.github.com/users/Pavank1992/gists{/gist_id}","starred_url":"https://api.github.com/users/Pavank1992/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Pavank1992/subscriptions","organizations_url":"https://api.github.com/users/Pavank1992/orgs","repos_url":"https://api.github.com/users/Pavank1992/repos","events_url":"https://api.github.com/users/Pavank1992/events{/privacy}","received_events_url":"https://api.github.com/users/Pavank1992/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"unassigned","commit_id":null,"commit_url":null,"created_at":"2023-08-25T08:55:28Z","assignee":{"login":"sgowroji","id":48122892,"node_id":"MDQ6VXNlcjQ4MTIyODky","avatar_url":"https://avatars.githubusercontent.com/u/48122892?v=4","gravatar_id":"","url":"https://api.github.com/users/sgowroji","html_url":"https://github.com/sgowroji","followers_url":"https://api.github.com/users/sgowroji/followers","following_url":"https://api.github.com/users/sgowroji/following{/other_user}","gists_url":"https://api.github.com/users/sgowroji/gists{/gist_id}","starred_url":"https://api.github.com/users/sgowroji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sgowroji/subscriptions","organizations_url":"https://api.github.com/users/sgowroji/orgs","repos_url":"https://api.github.com/users/sgowroji/repos","events_url":"https://api.github.com/users/sgowroji/events{/privacy}","received_events_url":"https://api.github.com/users/sgowroji/received_events","type":"User","user_view_type":"public","site_admin":false},"performed_via_github_app":null},{"id":10190642251,"node_id":"UNE_lADOATz7jc5vQEg5zwAAAAJfaNxL","url":"https://api.github.com/repos/bazelbuild/bazel/issues/events/10190642251","actor":{"login":"Pavank1992","id":127178870,"node_id":"U_kgDOB5SYdg","avatar_url":"https://avatars.githubusercontent.com/u/127178870?v=4","gravatar_id":"","url":"https://api.github.com/users/Pavank1992","html_url":"https://github.com/Pavank1992","followers_url":"https://api.github.com/users/Pavank1992/followers","following_url":"https://api.github.com/users/Pavank1992/following{/other_user}","gists_url":"https://api.github.com/users/Pavank1992/gists{/gist_id}","starred_url":"https://api.github.com/users/Pavank1992/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Pavank1992/subscriptions","organizations_url":"https://api.github.com/users/Pavank1992/orgs","repos_url":"https://api.github.com/users/Pavank1992/repos","events_url":"https://api.github.com/users/Pavank1992/events{/privacy}","received_events_url":"https://api.github.com/users/Pavank1992/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"unassigned","commit_id":null,"commit_url":null,"created_at":"2023-08-25T08:55:28Z","assignee":{"login":"Pavank1992","id":127178870,"node_id":"U_kgDOB5SYdg","avatar_url":"https://avatars.githubusercontent.com/u/127178870?v=4","gravatar_id":"","url":"https://api.github.com/users/Pavank1992","html_url":"https://github.com/Pavank1992","followers_url":"https://api.github.com/users/Pavank1992/followers","following_url":"https://api.github.com/users/Pavank1992/following{/other_user}","gists_url":"https://api.github.com/users/Pavank1992/gists{/gist_id}","starred_url":"https://api.github.com/users/Pavank1992/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Pavank1992/subscriptions","organizations_url":"https://api.github.com/users/Pavank1992/orgs","repos_url":"https://api.github.com/users/Pavank1992/repos","events_url":"https://api.github.com/users/Pavank1992/events{/privacy}","received_events_url":"https://api.github.com/users/Pavank1992/received_events","type":"User","user_view_type":"public","site_admin":false},"performed_via_github_app":null},{"id":10190642266,"node_id":"UNE_lADOATz7jc5vQEg5zwAAAAJfaNxa","url":"https://api.github.com/repos/bazelbuild/bazel/issues/events/10190642266","actor":{"login":"Pavank1992","id":127178870,"node_id":"U_kgDOB5SYdg","avatar_url":"https://avatars.githubusercontent.com/u/127178870?v=4","gravatar_id":"","url":"https://api.github.com/users/Pavank1992","html_url":"https://github.com/Pavank1992","followers_url":"https://api.github.com/users/Pavank1992/followers","following_url":"https://api.github.com/users/Pavank1992/following{/other_user}","gists_url":"https://api.github.com/users/Pavank1992/gists{/gist_id}","starred_url":"https://api.github.com/users/Pavank1992/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Pavank1992/subscriptions","organizations_url":"https://api.github.com/users/Pavank1992/orgs","repos_url":"https://api.github.com/users/Pavank1992/repos","events_url":"https://api.github.com/users/Pavank1992/events{/privacy}","received_events_url":"https://api.github.com/users/Pavank1992/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"unassigned","commit_id":null,"commit_url":null,"created_at":"2023-08-25T08:55:28Z","assignee":{"login":"iancha1992","id":132618328,"node_id":"U_kgDOB-eYWA","avatar_url":"https://avatars.githubusercontent.com/u/132618328?v=4","gravatar_id":"","url":"https://api.github.com/users/iancha1992","html_url":"https://github.com/iancha1992","followers_url":"https://api.github.com/users/iancha1992/followers","following_url":"https://api.github.com/users/iancha1992/following{/other_user}","gists_url":"https://api.github.com/users/iancha1992/gists{/gist_id}","starred_url":"https://api.github.com/users/iancha1992/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iancha1992/subscriptions","organizations_url":"https://api.github.com/users/iancha1992/orgs","repos_url":"https://api.github.com/users/iancha1992/repos","events_url":"https://api.github.com/users/iancha1992/events{/privacy}","received_events_url":"https://api.github.com/users/iancha1992/received_events","type":"User","user_view_type":"public","site_admin":false},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bazelbuild/bazel/issues/comments/1693094501","html_url":"https://github.com/bazelbuild/bazel/issues/19333#issuecomment-1693094501","issue_url":"https://api.github.com/repos/bazelbuild/bazel/issues/19333","id":1693094501,"node_id":"IC_kwDOATz7jc5k6pJl","user":{"login":"tjgq","id":4370077,"node_id":"MDQ6VXNlcjQzNzAwNzc=","avatar_url":"https://avatars.githubusercontent.com/u/4370077?v=4","gravatar_id":"","url":"https://api.github.com/users/tjgq","html_url":"https://github.com/tjgq","followers_url":"https://api.github.com/users/tjgq/followers","following_url":"https://api.github.com/users/tjgq/following{/other_user}","gists_url":"https://api.github.com/users/tjgq/gists{/gist_id}","starred_url":"https://api.github.com/users/tjgq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tjgq/subscriptions","organizations_url":"https://api.github.com/users/tjgq/orgs","repos_url":"https://api.github.com/users/tjgq/repos","events_url":"https://api.github.com/users/tjgq/events{/privacy}","received_events_url":"https://api.github.com/users/tjgq/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-25T09:48:31Z","updated_at":"2023-08-25T09:48:31Z","body":"My suspicion is that this occurs because, even though flipping `--enable_runfiles` does invalidate the `SymlinkTreeAction`, only the runfiles output manifest is declared an output of the action, so Skyframe doesn't believe that the entire runfiles directory must be cleared prior to action (re-)execution.\r\n\r\nA possible solution is to use a tree artifact to track the entire runfiles directory.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/bazelbuild/bazel/issues/comments/1693094501/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"tjgq","id":4370077,"node_id":"MDQ6VXNlcjQzNzAwNzc=","avatar_url":"https://avatars.githubusercontent.com/u/4370077?v=4","gravatar_id":"","url":"https://api.github.com/users/tjgq","html_url":"https://github.com/tjgq","followers_url":"https://api.github.com/users/tjgq/followers","following_url":"https://api.github.com/users/tjgq/following{/other_user}","gists_url":"https://api.github.com/users/tjgq/gists{/gist_id}","starred_url":"https://api.github.com/users/tjgq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tjgq/subscriptions","organizations_url":"https://api.github.com/users/tjgq/orgs","repos_url":"https://api.github.com/users/tjgq/repos","events_url":"https://api.github.com/users/tjgq/events{/privacy}","received_events_url":"https://api.github.com/users/tjgq/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/bazelbuild/bazel/issues/comments/1693096772","html_url":"https://github.com/bazelbuild/bazel/issues/19333#issuecomment-1693096772","issue_url":"https://api.github.com/repos/bazelbuild/bazel/issues/19333","id":1693096772,"node_id":"IC_kwDOATz7jc5k6ptE","user":{"login":"tjgq","id":4370077,"node_id":"MDQ6VXNlcjQzNzAwNzc=","avatar_url":"https://avatars.githubusercontent.com/u/4370077?v=4","gravatar_id":"","url":"https://api.github.com/users/tjgq","html_url":"https://github.com/tjgq","followers_url":"https://api.github.com/users/tjgq/followers","following_url":"https://api.github.com/users/tjgq/following{/other_user}","gists_url":"https://api.github.com/users/tjgq/gists{/gist_id}","starred_url":"https://api.github.com/users/tjgq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tjgq/subscriptions","organizations_url":"https://api.github.com/users/tjgq/orgs","repos_url":"https://api.github.com/users/tjgq/repos","events_url":"https://api.github.com/users/tjgq/events{/privacy}","received_events_url":"https://api.github.com/users/tjgq/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-25T09:50:22Z","updated_at":"2023-08-25T09:50:22Z","body":"Actually, there's a simpler solution: maybe `SymlinkTreeAction` should clear the runfiles directory (instead of simply emitting the output manifest) if it's running in `--noenable_runfiles` mode.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/bazelbuild/bazel/issues/comments/1693096772/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"tjgq","id":4370077,"node_id":"MDQ6VXNlcjQzNzAwNzc=","avatar_url":"https://avatars.githubusercontent.com/u/4370077?v=4","gravatar_id":"","url":"https://api.github.com/users/tjgq","html_url":"https://github.com/tjgq","followers_url":"https://api.github.com/users/tjgq/followers","following_url":"https://api.github.com/users/tjgq/following{/other_user}","gists_url":"https://api.github.com/users/tjgq/gists{/gist_id}","starred_url":"https://api.github.com/users/tjgq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tjgq/subscriptions","organizations_url":"https://api.github.com/users/tjgq/orgs","repos_url":"https://api.github.com/users/tjgq/repos","events_url":"https://api.github.com/users/tjgq/events{/privacy}","received_events_url":"https://api.github.com/users/tjgq/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":10193197120,"node_id":"CE_lADOATz7jc5vQEg5zwAAAAJfj9hA","url":"https://api.github.com/repos/bazelbuild/bazel/issues/events/10193197120","actor":{"login":"copybara-service[bot]","id":56741989,"node_id":"MDM6Qm90NTY3NDE5ODk=","avatar_url":"https://avatars.githubusercontent.com/in/44061?v=4","gravatar_id":"","url":"https://api.github.com/users/copybara-service%5Bbot%5D","html_url":"https://github.com/apps/copybara-service","followers_url":"https://api.github.com/users/copybara-service%5Bbot%5D/followers","following_url":"https://api.github.com/users/copybara-service%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/copybara-service%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/copybara-service%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/copybara-service%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/copybara-service%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/copybara-service%5Bbot%5D/repos","events_url":"https://api.github.com/users/copybara-service%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/copybara-service%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"f84329e007e2421c92805b50da135af411ee754c","commit_url":"https://api.github.com/repos/bazelbuild/bazel/commits/f84329e007e2421c92805b50da135af411ee754c","created_at":"2023-08-25T13:39:12Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/bazelbuild/bazel/issues/comments/1693625516","html_url":"https://github.com/bazelbuild/bazel/issues/19333#issuecomment-1693625516","issue_url":"https://api.github.com/repos/bazelbuild/bazel/issues/19333","id":1693625516,"node_id":"IC_kwDOATz7jc5k8qys","user":{"login":"hofst","id":2535762,"node_id":"MDQ6VXNlcjI1MzU3NjI=","avatar_url":"https://avatars.githubusercontent.com/u/2535762?v=4","gravatar_id":"","url":"https://api.github.com/users/hofst","html_url":"https://github.com/hofst","followers_url":"https://api.github.com/users/hofst/followers","following_url":"https://api.github.com/users/hofst/following{/other_user}","gists_url":"https://api.github.com/users/hofst/gists{/gist_id}","starred_url":"https://api.github.com/users/hofst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hofst/subscriptions","organizations_url":"https://api.github.com/users/hofst/orgs","repos_url":"https://api.github.com/users/hofst/repos","events_url":"https://api.github.com/users/hofst/events{/privacy}","received_events_url":"https://api.github.com/users/hofst/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-25T16:30:44Z","updated_at":"2023-08-25T16:30:44Z","body":"@tjgq wow that was a fast turn-around time, thank you very much.\r\n\r\nJust to clarify: Both directions are important: when turning runfiles off, the directory should be deleted. But also when turning it on, the directory should be popuplated. The latter direction was also not working in case the runfiles directory pre-existed in an empty state. In your change, I only saw that you tested the \"turning runfiles off\" direction. The \"turn runfiles on\" direction would probably also make a good test.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/bazelbuild/bazel/issues/comments/1693625516/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"hofst","id":2535762,"node_id":"MDQ6VXNlcjI1MzU3NjI=","avatar_url":"https://avatars.githubusercontent.com/u/2535762?v=4","gravatar_id":"","url":"https://api.github.com/users/hofst","html_url":"https://github.com/hofst","followers_url":"https://api.github.com/users/hofst/followers","following_url":"https://api.github.com/users/hofst/following{/other_user}","gists_url":"https://api.github.com/users/hofst/gists{/gist_id}","starred_url":"https://api.github.com/users/hofst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hofst/subscriptions","organizations_url":"https://api.github.com/users/hofst/orgs","repos_url":"https://api.github.com/users/hofst/repos","events_url":"https://api.github.com/users/hofst/events{/privacy}","received_events_url":"https://api.github.com/users/hofst/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":10194900394,"node_id":"MEE_lADOATz7jc5vQEg5zwAAAAJfqdWq","url":"https://api.github.com/repos/bazelbuild/bazel/issues/events/10194900394","actor":{"login":"tjgq","id":4370077,"node_id":"MDQ6VXNlcjQzNzAwNzc=","avatar_url":"https://avatars.githubusercontent.com/u/4370077?v=4","gravatar_id":"","url":"https://api.github.com/users/tjgq","html_url":"https://github.com/tjgq","followers_url":"https://api.github.com/users/tjgq/followers","following_url":"https://api.github.com/users/tjgq/following{/other_user}","gists_url":"https://api.github.com/users/tjgq/gists{/gist_id}","starred_url":"https://api.github.com/users/tjgq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tjgq/subscriptions","organizations_url":"https://api.github.com/users/tjgq/orgs","repos_url":"https://api.github.com/users/tjgq/repos","events_url":"https://api.github.com/users/tjgq/events{/privacy}","received_events_url":"https://api.github.com/users/tjgq/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-08-25T16:30:44Z","performed_via_github_app":null},{"id":10194900408,"node_id":"SE_lADOATz7jc5vQEg5zwAAAAJfqdW4","url":"https://api.github.com/repos/bazelbuild/bazel/issues/events/10194900408","actor":{"login":"tjgq","id":4370077,"node_id":"MDQ6VXNlcjQzNzAwNzc=","avatar_url":"https://avatars.githubusercontent.com/u/4370077?v=4","gravatar_id":"","url":"https://api.github.com/users/tjgq","html_url":"https://github.com/tjgq","followers_url":"https://api.github.com/users/tjgq/followers","following_url":"https://api.github.com/users/tjgq/following{/other_user}","gists_url":"https://api.github.com/users/tjgq/gists{/gist_id}","starred_url":"https://api.github.com/users/tjgq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tjgq/subscriptions","organizations_url":"https://api.github.com/users/tjgq/orgs","repos_url":"https://api.github.com/users/tjgq/repos","events_url":"https://api.github.com/users/tjgq/events{/privacy}","received_events_url":"https://api.github.com/users/tjgq/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-08-25T16:30:44Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/bazelbuild/bazel/issues/comments/1693743438","html_url":"https://github.com/bazelbuild/bazel/issues/19333#issuecomment-1693743438","issue_url":"https://api.github.com/repos/bazelbuild/bazel/issues/19333","id":1693743438,"node_id":"IC_kwDOATz7jc5k9HlO","user":{"login":"tjgq","id":4370077,"node_id":"MDQ6VXNlcjQzNzAwNzc=","avatar_url":"https://avatars.githubusercontent.com/u/4370077?v=4","gravatar_id":"","url":"https://api.github.com/users/tjgq","html_url":"https://github.com/tjgq","followers_url":"https://api.github.com/users/tjgq/followers","following_url":"https://api.github.com/users/tjgq/following{/other_user}","gists_url":"https://api.github.com/users/tjgq/gists{/gist_id}","starred_url":"https://api.github.com/users/tjgq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tjgq/subscriptions","organizations_url":"https://api.github.com/users/tjgq/orgs","repos_url":"https://api.github.com/users/tjgq/repos","events_url":"https://api.github.com/users/tjgq/events{/privacy}","received_events_url":"https://api.github.com/users/tjgq/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-25T18:01:55Z","updated_at":"2023-08-25T18:02:41Z","body":"@hofst You're welcome! I happened to be working on something else that touches this part of the codebase, so I knew exactly what the problem was and how to fix it.\r\n\r\nI'm happy to add a test for the reverse case, but I couldn't construct a scenario where it doesn't work already. Are you saying you have an example where building first with `--noenable_runfiles` and then wIth `--enable_runfiles` results in an empty symlink tree?","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/bazelbuild/bazel/issues/comments/1693743438/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"tjgq","id":4370077,"node_id":"MDQ6VXNlcjQzNzAwNzc=","avatar_url":"https://avatars.githubusercontent.com/u/4370077?v=4","gravatar_id":"","url":"https://api.github.com/users/tjgq","html_url":"https://github.com/tjgq","followers_url":"https://api.github.com/users/tjgq/followers","following_url":"https://api.github.com/users/tjgq/following{/other_user}","gists_url":"https://api.github.com/users/tjgq/gists{/gist_id}","starred_url":"https://api.github.com/users/tjgq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tjgq/subscriptions","organizations_url":"https://api.github.com/users/tjgq/orgs","repos_url":"https://api.github.com/users/tjgq/repos","events_url":"https://api.github.com/users/tjgq/events{/privacy}","received_events_url":"https://api.github.com/users/tjgq/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":10195722535,"node_id":"REE_lADOATz7jc5vQEg5zwAAAAJftmEn","url":"https://api.github.com/repos/bazelbuild/bazel/issues/events/10195722535","actor":{"login":"tjgq","id":4370077,"node_id":"MDQ6VXNlcjQzNzAwNzc=","avatar_url":"https://avatars.githubusercontent.com/u/4370077?v=4","gravatar_id":"","url":"https://api.github.com/users/tjgq","html_url":"https://github.com/tjgq","followers_url":"https://api.github.com/users/tjgq/followers","following_url":"https://api.github.com/users/tjgq/following{/other_user}","gists_url":"https://api.github.com/users/tjgq/gists{/gist_id}","starred_url":"https://api.github.com/users/tjgq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tjgq/subscriptions","organizations_url":"https://api.github.com/users/tjgq/orgs","repos_url":"https://api.github.com/users/tjgq/repos","events_url":"https://api.github.com/users/tjgq/events{/privacy}","received_events_url":"https://api.github.com/users/tjgq/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"reopened","commit_id":null,"commit_url":null,"created_at":"2023-08-25T18:01:55Z","state_reason":"reopened","performed_via_github_app":null},{"id":10195727655,"node_id":"MEE_lADOATz7jc5vQEg5zwAAAAJftnUn","url":"https://api.github.com/repos/bazelbuild/bazel/issues/events/10195727655","actor":{"login":"hofst","id":2535762,"node_id":"MDQ6VXNlcjI1MzU3NjI=","avatar_url":"https://avatars.githubusercontent.com/u/2535762?v=4","gravatar_id":"","url":"https://api.github.com/users/hofst","html_url":"https://github.com/hofst","followers_url":"https://api.github.com/users/hofst/followers","following_url":"https://api.github.com/users/hofst/following{/other_user}","gists_url":"https://api.github.com/users/hofst/gists{/gist_id}","starred_url":"https://api.github.com/users/hofst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hofst/subscriptions","organizations_url":"https://api.github.com/users/hofst/orgs","repos_url":"https://api.github.com/users/hofst/repos","events_url":"https://api.github.com/users/hofst/events{/privacy}","received_events_url":"https://api.github.com/users/hofst/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-08-25T18:02:41Z","performed_via_github_app":null},{"id":10195727665,"node_id":"SE_lADOATz7jc5vQEg5zwAAAAJftnUx","url":"https://api.github.com/repos/bazelbuild/bazel/issues/events/10195727665","actor":{"login":"hofst","id":2535762,"node_id":"MDQ6VXNlcjI1MzU3NjI=","avatar_url":"https://avatars.githubusercontent.com/u/2535762?v=4","gravatar_id":"","url":"https://api.github.com/users/hofst","html_url":"https://github.com/hofst","followers_url":"https://api.github.com/users/hofst/followers","following_url":"https://api.github.com/users/hofst/following{/other_user}","gists_url":"https://api.github.com/users/hofst/gists{/gist_id}","starred_url":"https://api.github.com/users/hofst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hofst/subscriptions","organizations_url":"https://api.github.com/users/hofst/orgs","repos_url":"https://api.github.com/users/hofst/repos","events_url":"https://api.github.com/users/hofst/events{/privacy}","received_events_url":"https://api.github.com/users/hofst/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-08-25T18:02:41Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/bazelbuild/bazel/issues/comments/1693916560","html_url":"https://github.com/bazelbuild/bazel/issues/19333#issuecomment-1693916560","issue_url":"https://api.github.com/repos/bazelbuild/bazel/issues/19333","id":1693916560,"node_id":"IC_kwDOATz7jc5k9x2Q","user":{"login":"hofst","id":2535762,"node_id":"MDQ6VXNlcjI1MzU3NjI=","avatar_url":"https://avatars.githubusercontent.com/u/2535762?v=4","gravatar_id":"","url":"https://api.github.com/users/hofst","html_url":"https://github.com/hofst","followers_url":"https://api.github.com/users/hofst/followers","following_url":"https://api.github.com/users/hofst/following{/other_user}","gists_url":"https://api.github.com/users/hofst/gists{/gist_id}","starred_url":"https://api.github.com/users/hofst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hofst/subscriptions","organizations_url":"https://api.github.com/users/hofst/orgs","repos_url":"https://api.github.com/users/hofst/repos","events_url":"https://api.github.com/users/hofst/events{/privacy}","received_events_url":"https://api.github.com/users/hofst/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-25T20:51:25Z","updated_at":"2023-08-25T20:53:42Z","body":"yes that is correct. I just reproed it again:\r\nFirst I `bazel test mytest` with the Windows default parameters. I guess this implies `--enable_runfiles=auto` which translates to disabled runfiles on Windows. This will create a runfiles directory with only an empty `__main__` folder and a manifest file inside of it. \r\nThen I run `bazel test mytest` but with `build --enable_runfiles` added to my rcfiles.\r\nThis will run the tests again. Before running, it will recompile most things (which are consumed from my disk cache). The runfiles directory will not be filled with the test dependencies. If I delete the runfiles directory manually (or run `bazel clean`, it will popuplate the runfiles directory correctly.\r\n\r\nNot sure if this is a caching issue, a Windows issue, or something else.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/bazelbuild/bazel/issues/comments/1693916560/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"hofst","id":2535762,"node_id":"MDQ6VXNlcjI1MzU3NjI=","avatar_url":"https://avatars.githubusercontent.com/u/2535762?v=4","gravatar_id":"","url":"https://api.github.com/users/hofst","html_url":"https://github.com/hofst","followers_url":"https://api.github.com/users/hofst/followers","following_url":"https://api.github.com/users/hofst/following{/other_user}","gists_url":"https://api.github.com/users/hofst/gists{/gist_id}","starred_url":"https://api.github.com/users/hofst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hofst/subscriptions","organizations_url":"https://api.github.com/users/hofst/orgs","repos_url":"https://api.github.com/users/hofst/repos","events_url":"https://api.github.com/users/hofst/events{/privacy}","received_events_url":"https://api.github.com/users/hofst/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/bazelbuild/bazel/issues/comments/1695399901","html_url":"https://github.com/bazelbuild/bazel/issues/19333#issuecomment-1695399901","issue_url":"https://api.github.com/repos/bazelbuild/bazel/issues/19333","id":1695399901,"node_id":"IC_kwDOATz7jc5lDb_d","user":{"login":"tjgq","id":4370077,"node_id":"MDQ6VXNlcjQzNzAwNzc=","avatar_url":"https://avatars.githubusercontent.com/u/4370077?v=4","gravatar_id":"","url":"https://api.github.com/users/tjgq","html_url":"https://github.com/tjgq","followers_url":"https://api.github.com/users/tjgq/followers","following_url":"https://api.github.com/users/tjgq/following{/other_user}","gists_url":"https://api.github.com/users/tjgq/gists{/gist_id}","starred_url":"https://api.github.com/users/tjgq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tjgq/subscriptions","organizations_url":"https://api.github.com/users/tjgq/orgs","repos_url":"https://api.github.com/users/tjgq/repos","events_url":"https://api.github.com/users/tjgq/events{/privacy}","received_events_url":"https://api.github.com/users/tjgq/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-28T09:59:10Z","updated_at":"2023-08-28T09:59:10Z","body":"@hofst, can I trouble you for a concrete repro case and the Bazel version you're using?\r\n\r\nHere's how I attempted to repro it on Windows with Bazel 6.3.2:\r\n\r\n```\r\nsh_test(\r\n  name = \"test\",\r\n  srcs = [\"test.sh\"], # empty file\r\n  data = [\"data.txt\"], # empty file\r\n)\r\n\r\nbazel test --noenable_runfiles --disk_cache=.disk_cache //:test\r\n\r\nls bazel-bin/test.exe.runfiles/__main__  # runfiles not present\r\n\r\nbazel test --enable_runfiles --disk_cache=.disk_cache //:test\r\n\r\nls bazel-bin/test.exe.runfiles/__main__  # runfiles present\r\n```","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/bazelbuild/bazel/issues/comments/1695399901/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"tjgq","id":4370077,"node_id":"MDQ6VXNlcjQzNzAwNzc=","avatar_url":"https://avatars.githubusercontent.com/u/4370077?v=4","gravatar_id":"","url":"https://api.github.com/users/tjgq","html_url":"https://github.com/tjgq","followers_url":"https://api.github.com/users/tjgq/followers","following_url":"https://api.github.com/users/tjgq/following{/other_user}","gists_url":"https://api.github.com/users/tjgq/gists{/gist_id}","starred_url":"https://api.github.com/users/tjgq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tjgq/subscriptions","organizations_url":"https://api.github.com/users/tjgq/orgs","repos_url":"https://api.github.com/users/tjgq/repos","events_url":"https://api.github.com/users/tjgq/events{/privacy}","received_events_url":"https://api.github.com/users/tjgq/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":10207238223,"node_id":"MEE_lADOATz7jc5vQEg5zwAAAAJgZhhP","url":"https://api.github.com/repos/bazelbuild/bazel/issues/events/10207238223","actor":{"login":"hofst","id":2535762,"node_id":"MDQ6VXNlcjI1MzU3NjI=","avatar_url":"https://avatars.githubusercontent.com/u/2535762?v=4","gravatar_id":"","url":"https://api.github.com/users/hofst","html_url":"https://github.com/hofst","followers_url":"https://api.github.com/users/hofst/followers","following_url":"https://api.github.com/users/hofst/following{/other_user}","gists_url":"https://api.github.com/users/hofst/gists{/gist_id}","starred_url":"https://api.github.com/users/hofst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hofst/subscriptions","organizations_url":"https://api.github.com/users/hofst/orgs","repos_url":"https://api.github.com/users/hofst/repos","events_url":"https://api.github.com/users/hofst/events{/privacy}","received_events_url":"https://api.github.com/users/hofst/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-08-28T09:59:10Z","performed_via_github_app":null},{"id":10207238227,"node_id":"SE_lADOATz7jc5vQEg5zwAAAAJgZhhT","url":"https://api.github.com/repos/bazelbuild/bazel/issues/events/10207238227","actor":{"login":"hofst","id":2535762,"node_id":"MDQ6VXNlcjI1MzU3NjI=","avatar_url":"https://avatars.githubusercontent.com/u/2535762?v=4","gravatar_id":"","url":"https://api.github.com/users/hofst","html_url":"https://github.com/hofst","followers_url":"https://api.github.com/users/hofst/followers","following_url":"https://api.github.com/users/hofst/following{/other_user}","gists_url":"https://api.github.com/users/hofst/gists{/gist_id}","starred_url":"https://api.github.com/users/hofst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hofst/subscriptions","organizations_url":"https://api.github.com/users/hofst/orgs","repos_url":"https://api.github.com/users/hofst/repos","events_url":"https://api.github.com/users/hofst/events{/privacy}","received_events_url":"https://api.github.com/users/hofst/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-08-28T09:59:10Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/bazelbuild/bazel/issues/comments/1695937649","html_url":"https://github.com/bazelbuild/bazel/issues/19333#issuecomment-1695937649","issue_url":"https://api.github.com/repos/bazelbuild/bazel/issues/19333","id":1695937649,"node_id":"IC_kwDOATz7jc5lFfRx","user":{"login":"hofst","id":2535762,"node_id":"MDQ6VXNlcjI1MzU3NjI=","avatar_url":"https://avatars.githubusercontent.com/u/2535762?v=4","gravatar_id":"","url":"https://api.github.com/users/hofst","html_url":"https://github.com/hofst","followers_url":"https://api.github.com/users/hofst/followers","following_url":"https://api.github.com/users/hofst/following{/other_user}","gists_url":"https://api.github.com/users/hofst/gists{/gist_id}","starred_url":"https://api.github.com/users/hofst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hofst/subscriptions","organizations_url":"https://api.github.com/users/hofst/orgs","repos_url":"https://api.github.com/users/hofst/repos","events_url":"https://api.github.com/users/hofst/events{/privacy}","received_events_url":"https://api.github.com/users/hofst/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-28T15:53:13Z","updated_at":"2023-08-28T15:53:13Z","body":"@tjgq \r\nI'll try, but it may take some time to strip our quite complex test cases down to a minimal repro.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/bazelbuild/bazel/issues/comments/1695937649/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"hofst","id":2535762,"node_id":"MDQ6VXNlcjI1MzU3NjI=","avatar_url":"https://avatars.githubusercontent.com/u/2535762?v=4","gravatar_id":"","url":"https://api.github.com/users/hofst","html_url":"https://github.com/hofst","followers_url":"https://api.github.com/users/hofst/followers","following_url":"https://api.github.com/users/hofst/following{/other_user}","gists_url":"https://api.github.com/users/hofst/gists{/gist_id}","starred_url":"https://api.github.com/users/hofst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hofst/subscriptions","organizations_url":"https://api.github.com/users/hofst/orgs","repos_url":"https://api.github.com/users/hofst/repos","events_url":"https://api.github.com/users/hofst/events{/privacy}","received_events_url":"https://api.github.com/users/hofst/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":10210912572,"node_id":"MEE_lADOATz7jc5vQEg5zwAAAAJgnik8","url":"https://api.github.com/repos/bazelbuild/bazel/issues/events/10210912572","actor":{"login":"tjgq","id":4370077,"node_id":"MDQ6VXNlcjQzNzAwNzc=","avatar_url":"https://avatars.githubusercontent.com/u/4370077?v=4","gravatar_id":"","url":"https://api.github.com/users/tjgq","html_url":"https://github.com/tjgq","followers_url":"https://api.github.com/users/tjgq/followers","following_url":"https://api.github.com/users/tjgq/following{/other_user}","gists_url":"https://api.github.com/users/tjgq/gists{/gist_id}","starred_url":"https://api.github.com/users/tjgq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tjgq/subscriptions","organizations_url":"https://api.github.com/users/tjgq/orgs","repos_url":"https://api.github.com/users/tjgq/repos","events_url":"https://api.github.com/users/tjgq/events{/privacy}","received_events_url":"https://api.github.com/users/tjgq/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-08-28T15:53:13Z","performed_via_github_app":null},{"id":10210912591,"node_id":"SE_lADOATz7jc5vQEg5zwAAAAJgnilP","url":"https://api.github.com/repos/bazelbuild/bazel/issues/events/10210912591","actor":{"login":"tjgq","id":4370077,"node_id":"MDQ6VXNlcjQzNzAwNzc=","avatar_url":"https://avatars.githubusercontent.com/u/4370077?v=4","gravatar_id":"","url":"https://api.github.com/users/tjgq","html_url":"https://github.com/tjgq","followers_url":"https://api.github.com/users/tjgq/followers","following_url":"https://api.github.com/users/tjgq/following{/other_user}","gists_url":"https://api.github.com/users/tjgq/gists{/gist_id}","starred_url":"https://api.github.com/users/tjgq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tjgq/subscriptions","organizations_url":"https://api.github.com/users/tjgq/orgs","repos_url":"https://api.github.com/users/tjgq/repos","events_url":"https://api.github.com/users/tjgq/events{/privacy}","received_events_url":"https://api.github.com/users/tjgq/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-08-28T15:53:13Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/bazelbuild/bazel/issues/comments/1698856924","html_url":"https://github.com/bazelbuild/bazel/issues/19333#issuecomment-1698856924","issue_url":"https://api.github.com/repos/bazelbuild/bazel/issues/19333","id":1698856924,"node_id":"IC_kwDOATz7jc5lQn_c","user":{"login":"hofst","id":2535762,"node_id":"MDQ6VXNlcjI1MzU3NjI=","avatar_url":"https://avatars.githubusercontent.com/u/2535762?v=4","gravatar_id":"","url":"https://api.github.com/users/hofst","html_url":"https://github.com/hofst","followers_url":"https://api.github.com/users/hofst/followers","following_url":"https://api.github.com/users/hofst/following{/other_user}","gists_url":"https://api.github.com/users/hofst/gists{/gist_id}","starred_url":"https://api.github.com/users/hofst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hofst/subscriptions","organizations_url":"https://api.github.com/users/hofst/orgs","repos_url":"https://api.github.com/users/hofst/repos","events_url":"https://api.github.com/users/hofst/events{/privacy}","received_events_url":"https://api.github.com/users/hofst/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-30T09:54:38Z","updated_at":"2023-08-30T09:54:38Z","body":"@tjgq \r\nI was able to reproduce it inside our build system with your minimal test.\r\nI listed all the additional flags that we set and played around with them.\r\nIt looks like we set the additional flag `--nobuild_runfile_links` which causes this behavior.\r\nFrom reading the documentation I believe this is still a bug: I believe this flag should only prevent runfiles to be created during the build phase. But when we actually run `test` the runfiles should be created and updated. This appears to be broken: The runfiles appear to be created but they are not updated when the directory already exists and the `enable_runfiles` flag changes.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/bazelbuild/bazel/issues/comments/1698856924/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"hofst","id":2535762,"node_id":"MDQ6VXNlcjI1MzU3NjI=","avatar_url":"https://avatars.githubusercontent.com/u/2535762?v=4","gravatar_id":"","url":"https://api.github.com/users/hofst","html_url":"https://github.com/hofst","followers_url":"https://api.github.com/users/hofst/followers","following_url":"https://api.github.com/users/hofst/following{/other_user}","gists_url":"https://api.github.com/users/hofst/gists{/gist_id}","starred_url":"https://api.github.com/users/hofst/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hofst/subscriptions","organizations_url":"https://api.github.com/users/hofst/orgs","repos_url":"https://api.github.com/users/hofst/repos","events_url":"https://api.github.com/users/hofst/events{/privacy}","received_events_url":"https://api.github.com/users/hofst/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":10231011239,"node_id":"MEE_lADOATz7jc5vQEg5zwAAAAJh0Nen","url":"https://api.github.com/repos/bazelbuild/bazel/issues/events/10231011239","actor":{"login":"tjgq","id":4370077,"node_id":"MDQ6VXNlcjQzNzAwNzc=","avatar_url":"https://avatars.githubusercontent.com/u/4370077?v=4","gravatar_id":"","url":"https://api.github.com/users/tjgq","html_url":"https://github.com/tjgq","followers_url":"https://api.github.com/users/tjgq/followers","following_url":"https://api.github.com/users/tjgq/following{/other_user}","gists_url":"https://api.github.com/users/tjgq/gists{/gist_id}","starred_url":"https://api.github.com/users/tjgq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tjgq/subscriptions","organizations_url":"https://api.github.com/users/tjgq/orgs","repos_url":"https://api.github.com/users/tjgq/repos","events_url":"https://api.github.com/users/tjgq/events{/privacy}","received_events_url":"https://api.github.com/users/tjgq/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-08-30T09:54:38Z","performed_via_github_app":null},{"id":10231011249,"node_id":"SE_lADOATz7jc5vQEg5zwAAAAJh0Nex","url":"https://api.github.com/repos/bazelbuild/bazel/issues/events/10231011249","actor":{"login":"tjgq","id":4370077,"node_id":"MDQ6VXNlcjQzNzAwNzc=","avatar_url":"https://avatars.githubusercontent.com/u/4370077?v=4","gravatar_id":"","url":"https://api.github.com/users/tjgq","html_url":"https://github.com/tjgq","followers_url":"https://api.github.com/users/tjgq/followers","following_url":"https://api.github.com/users/tjgq/following{/other_user}","gists_url":"https://api.github.com/users/tjgq/gists{/gist_id}","starred_url":"https://api.github.com/users/tjgq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tjgq/subscriptions","organizations_url":"https://api.github.com/users/tjgq/orgs","repos_url":"https://api.github.com/users/tjgq/repos","events_url":"https://api.github.com/users/tjgq/events{/privacy}","received_events_url":"https://api.github.com/users/tjgq/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-08-30T09:54:39Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/bazelbuild/bazel/issues/comments/1700807664","html_url":"https://github.com/bazelbuild/bazel/issues/19333#issuecomment-1700807664","issue_url":"https://api.github.com/repos/bazelbuild/bazel/issues/19333","id":1700807664,"node_id":"IC_kwDOATz7jc5lYEPw","user":{"login":"tjgq","id":4370077,"node_id":"MDQ6VXNlcjQzNzAwNzc=","avatar_url":"https://avatars.githubusercontent.com/u/4370077?v=4","gravatar_id":"","url":"https://api.github.com/users/tjgq","html_url":"https://github.com/tjgq","followers_url":"https://api.github.com/users/tjgq/followers","following_url":"https://api.github.com/users/tjgq/following{/other_user}","gists_url":"https://api.github.com/users/tjgq/gists{/gist_id}","starred_url":"https://api.github.com/users/tjgq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tjgq/subscriptions","organizations_url":"https://api.github.com/users/tjgq/orgs","repos_url":"https://api.github.com/users/tjgq/repos","events_url":"https://api.github.com/users/tjgq/events{/privacy}","received_events_url":"https://api.github.com/users/tjgq/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-31T10:49:29Z","updated_at":"2023-08-31T10:49:29Z","body":"Thanks, `--nobuild_runfile_links` was the missing bit. I'll also note that Windows and the disk cache are irrelevant; it repros just fine on Linux/MacOS without a disk cache. And, most importantly, it's not necessary to build with `--noenable_runfiles` first; running `bazel clean && bazel test --enable_runfiles --nobuild_runfile_links //:test` produces the same result. So this is really about what `--nobuild_runfile_links` is supposed to do, not about incremental correctness when flipping `--enable_runfiles` back and forth.\r\n\r\nThe reason you're seeing this behavior is that `--nobuild_runfile_links` is subtler than the documentation implies: the runfile symlinks will indeed be created just-in-time for actions that run locally, but they're created in the environment where the action runs - which, with sandboxing enabled, will be the sandbox, not the output tree. (You can convince yourself that the test is still able to access the runfiles by using`[[ -f $RUNFILES_DIR/__main__/data.txt ]]` as the `test.sh`; also observe that invoking Bazel with `--spawn_strategy=standalone`, which disables sandboxing, will cause the runfile symlinks to actually appear in the output tree.)","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/bazelbuild/bazel/issues/comments/1700807664/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"tjgq","id":4370077,"node_id":"MDQ6VXNlcjQzNzAwNzc=","avatar_url":"https://avatars.githubusercontent.com/u/4370077?v=4","gravatar_id":"","url":"https://api.github.com/users/tjgq","html_url":"https://github.com/tjgq","followers_url":"https://api.github.com/users/tjgq/followers","following_url":"https://api.github.com/users/tjgq/following{/other_user}","gists_url":"https://api.github.com/users/tjgq/gists{/gist_id}","starred_url":"https://api.github.com/users/tjgq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tjgq/subscriptions","organizations_url":"https://api.github.com/users/tjgq/orgs","repos_url":"https://api.github.com/users/tjgq/repos","events_url":"https://api.github.com/users/tjgq/events{/privacy}","received_events_url":"https://api.github.com/users/tjgq/received_events","type":"User","user_view_type":"public","site_admin":false}}]