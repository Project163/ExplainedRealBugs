{"url":"https://api.github.com/repos/bazelbuild/bazel/issues/18961","repository_url":"https://api.github.com/repos/bazelbuild/bazel","labels_url":"https://api.github.com/repos/bazelbuild/bazel/issues/18961/labels{/name}","comments_url":"https://api.github.com/repos/bazelbuild/bazel/issues/18961/comments","events_url":"https://api.github.com/repos/bazelbuild/bazel/issues/18961/events","html_url":"https://github.com/bazelbuild/bazel/issues/18961","id":1808594832,"node_id":"I_kwDOATz7jc5rzPeQ","number":18961,"title":"Newer JDK support","user":{"login":"jiapei100","id":154013,"node_id":"MDQ6VXNlcjE1NDAxMw==","avatar_url":"https://avatars.githubusercontent.com/u/154013?v=4","gravatar_id":"","url":"https://api.github.com/users/jiapei100","html_url":"https://github.com/jiapei100","followers_url":"https://api.github.com/users/jiapei100/followers","following_url":"https://api.github.com/users/jiapei100/following{/other_user}","gists_url":"https://api.github.com/users/jiapei100/gists{/gist_id}","starred_url":"https://api.github.com/users/jiapei100/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jiapei100/subscriptions","organizations_url":"https://api.github.com/users/jiapei100/orgs","repos_url":"https://api.github.com/users/jiapei100/repos","events_url":"https://api.github.com/users/jiapei100/events{/privacy}","received_events_url":"https://api.github.com/users/jiapei100/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":106503261,"node_id":"MDU6TGFiZWwxMDY1MDMyNjE=","url":"https://api.github.com/repos/bazelbuild/bazel/labels/type:%20feature%20request","name":"type: feature request","color":"0052cc","default":false,"description":null},{"id":1020663976,"node_id":"MDU6TGFiZWwxMDIwNjYzOTc2","url":"https://api.github.com/repos/bazelbuild/bazel/labels/team-Rules-Java","name":"team-Rules-Java","color":"f1f442","default":false,"description":"Issues for Java rules"},{"id":1020665933,"node_id":"MDU6TGFiZWwxMDIwNjY1OTMz","url":"https://api.github.com/repos/bazelbuild/bazel/labels/untriaged","name":"untriaged","color":"c34ddd","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2023-07-17T20:41:50Z","updated_at":"2023-08-04T09:21:39Z","closed_at":"2023-08-04T09:21:39Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Description of the feature request:\n\n\nTrying to **compile Bazel from Source** [without an existing Bazel binary](https://bazel.build/install/compile-source#bootstrap-bazel).\r\n\r\nWith OpenJDK 19, I got an **ERROR: Could not build Bazel**.\r\nBut with an older version OpenJDK 11, it works fine.\n\n### What underlying problem are you trying to solve with this feature?\n\n\n\r\nSupport for newer version of OpenJDK \n\n### Which operating system are you running Bazel on?\n\n\nUbuntu 22.04\n\n### What is the output of `bazel info release`?\n\n\nN/A\n\n### If `bazel info release` returns `development version` or `(@non-git)`, tell us how you built Bazel.\n\n\nN/A, because I'm building **Compiling Bazel from Source** [without an existing Bazel binary](https://bazel.build/install/compile-source#bootstrap-bazel) .\n\n### What's the output of `git remote get-url origin; git rev-parse master; git rev-parse HEAD` ?\n\n\n```text\nN/A\n```\n\n\n### Have you found anything relevant by searching the web?\n\nN/A\n\n### Any other information, logs, or outputs that you want to share?\n\nError messages:\r\n\r\n```console\r\n‚ûú  bazel-6.2.1-dist env EXTRA_BAZEL_ARGS=\"--tool_java_runtime_version=local_jdk\" bash ./compile.sh\r\nüçÉ  Building Bazel from scratch......\r\nüçÉ  Building Bazel with Bazel.\r\n.OpenJDK 64-Bit Server VM warning: Options -Xverify:none and -noverify were deprecated in JDK 13 and will likely be removed in a future release.\r\nDEBUG: /tmp/bazel_GJFf043H/out/external/build_bazel_rules_nodejs/index.bzl:122:10: WARNING: check_rules_nodejs_version has been removed. This is a no-op, please remove the call.\r\nINFO: Analyzed target //src:bazel_nojdk (383 packages loaded, 10348 targets configured).\r\nINFO: Found 1 target...\r\n[0 / 224] 5 actions, 0 running\r\n    [Prepa] BazelWorkspaceStatusAction stable-status.txt\r\n    [Prepa] Writing file src/main/cpp/client-2.params\r\n    [Prepa] Writing file src/embedded_tools_nojdk.params\r\n    [Prepa] Writing file .../starlark/java/eval/libcpu_profiler.so-2.params\r\n    [Prepa] Executing genrule //src:package_bazel_on_host_platform [for tool]\r\nFATAL: bazel crashed due to an internal error. Printing stack trace:\r\njava.lang.ExceptionInInitializerError\r\n\tat com.google.devtools.build.lib.actions.ParameterFile.writeContentLatin1(ParameterFile.java:141)\r\n\tat com.google.devtools.build.lib.actions.ParameterFile.writeContent(ParameterFile.java:120)\r\n\tat com.google.devtools.build.lib.actions.ParameterFile.writeParameterFile(ParameterFile.java:112)\r\n\tat com.google.devtools.build.lib.analysis.actions.ParameterFileWriteAction$ParamFileWriter.writeOutputFile(ParameterFileWriteAction.java:172)\r\n\tat com.google.devtools.build.lib.exec.FileWriteStrategy.beginWriteOutputToFile(FileWriteStrategy.java:58)\r\n\tat com.google.devtools.build.lib.analysis.actions.FileWriteActionContext.beginWriteOutputToFile(FileWriteActionContext.java:49)\r\n\tat com.google.devtools.build.lib.analysis.actions.AbstractFileWriteAction.beginExecution(AbstractFileWriteAction.java:66)\r\n\tat com.google.devtools.build.lib.actions.Action.execute(Action.java:133)\r\n\tat com.google.devtools.build.lib.skyframe.SkyframeActionExecutor$5.execute(SkyframeActionExecutor.java:957)\r\n\tat com.google.devtools.build.lib.skyframe.SkyframeActionExecutor$ActionRunner.continueAction(SkyframeActionExecutor.java:1124)\r\n\tat com.google.devtools.build.lib.skyframe.SkyframeActionExecutor$ActionRunner.run(SkyframeActionExecutor.java:1082)\r\n\tat com.google.devtools.build.lib.skyframe.ActionExecutionState.runStateMachine(ActionExecutionState.java:160)\r\n\tat com.google.devtools.build.lib.skyframe.ActionExecutionState.getResultOrDependOnFuture(ActionExecutionState.java:93)\r\n\tat com.google.devtools.build.lib.skyframe.SkyframeActionExecutor.executeAction(SkyframeActionExecutor.java:516)\r\n\tat com.google.devtools.build.lib.skyframe.ActionExecutionFunction.checkCacheAndExecuteIfNeeded(ActionExecutionFunction.java:827)\r\n\tat com.google.devtools.build.lib.skyframe.ActionExecutionFunction.computeInternal(ActionExecutionFunction.java:323)\r\n\tat com.google.devtools.build.lib.skyframe.ActionExecutionFunction.compute(ActionExecutionFunction.java:161)\r\n\tat com.google.devtools.build.skyframe.AbstractParallelEvaluator$Evaluate.run(AbstractParallelEvaluator.java:571)\r\n\tat com.google.devtools.build.lib.concurrent.AbstractQueueVisitor$WrappedRunnable.run(AbstractQueueVisitor.java:382)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\r\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\r\n\tat java.base/java.lang.Thread.run(Thread.java:1589)\r\nCaused by: java.lang.reflect.InaccessibleObjectException: Unable to make java.lang.String(byte[],byte) accessible: module java.base does not \"opens java.lang\" to unnamed module @228575c0\r\n\tat java.base/java.lang.reflect.AccessibleObject.throwInaccessibleObjectException(AccessibleObject.java:387)\r\n\tat java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:363)\r\n\tat java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:311)\r\n\tat java.base/java.lang.reflect.Constructor.checkCanSetAccessible(Constructor.java:192)\r\n\tat java.base/java.lang.reflect.Constructor.setAccessible(Constructor.java:185)\r\n\tat com.google.devtools.build.lib.unsafe.StringUnsafe.<init>(StringUnsafe.java:61)\r\n\tat com.google.devtools.build.lib.unsafe.StringUnsafe.<clinit>(StringUnsafe.java:36)\r\n\t... 22 more\r\n\r\nERROR: Could not build Bazel\r\n```","closed_by":{"login":"copybara-service[bot]","id":56741989,"node_id":"MDM6Qm90NTY3NDE5ODk=","avatar_url":"https://avatars.githubusercontent.com/in/44061?v=4","gravatar_id":"","url":"https://api.github.com/users/copybara-service%5Bbot%5D","html_url":"https://github.com/apps/copybara-service","followers_url":"https://api.github.com/users/copybara-service%5Bbot%5D/followers","following_url":"https://api.github.com/users/copybara-service%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/copybara-service%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/copybara-service%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/copybara-service%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/copybara-service%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/copybara-service%5Bbot%5D/repos","events_url":"https://api.github.com/users/copybara-service%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/copybara-service%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/bazelbuild/bazel/issues/18961/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/bazelbuild/bazel/issues/18961/timeline","performed_via_github_app":null,"state_reason":"completed"}