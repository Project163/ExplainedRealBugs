[{"id":11605012642,"node_id":"LE_lADOATz7jc59Q_BazwAAAAKztnCi","url":"https://api.github.com/repos/bazelbuild/bazel/issues/events/11605012642","actor":{"login":"DavidANeil","id":19960231,"node_id":"MDQ6VXNlcjE5OTYwMjMx","avatar_url":"https://avatars.githubusercontent.com/u/19960231?v=4","gravatar_id":"","url":"https://api.github.com/users/DavidANeil","html_url":"https://github.com/DavidANeil","followers_url":"https://api.github.com/users/DavidANeil/followers","following_url":"https://api.github.com/users/DavidANeil/following{/other_user}","gists_url":"https://api.github.com/users/DavidANeil/gists{/gist_id}","starred_url":"https://api.github.com/users/DavidANeil/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DavidANeil/subscriptions","organizations_url":"https://api.github.com/users/DavidANeil/orgs","repos_url":"https://api.github.com/users/DavidANeil/repos","events_url":"https://api.github.com/users/DavidANeil/events{/privacy}","received_events_url":"https://api.github.com/users/DavidANeil/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2024-01-26T05:07:02Z","label":{"name":"type: feature request","color":"0052cc"},"performed_via_github_app":null},{"id":11605012643,"node_id":"LE_lADOATz7jc59Q_BazwAAAAKztnCj","url":"https://api.github.com/repos/bazelbuild/bazel/issues/events/11605012643","actor":{"login":"DavidANeil","id":19960231,"node_id":"MDQ6VXNlcjE5OTYwMjMx","avatar_url":"https://avatars.githubusercontent.com/u/19960231?v=4","gravatar_id":"","url":"https://api.github.com/users/DavidANeil","html_url":"https://github.com/DavidANeil","followers_url":"https://api.github.com/users/DavidANeil/followers","following_url":"https://api.github.com/users/DavidANeil/following{/other_user}","gists_url":"https://api.github.com/users/DavidANeil/gists{/gist_id}","starred_url":"https://api.github.com/users/DavidANeil/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DavidANeil/subscriptions","organizations_url":"https://api.github.com/users/DavidANeil/orgs","repos_url":"https://api.github.com/users/DavidANeil/repos","events_url":"https://api.github.com/users/DavidANeil/events{/privacy}","received_events_url":"https://api.github.com/users/DavidANeil/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2024-01-26T05:07:02Z","label":{"name":"untriaged","color":"c34ddd"},"performed_via_github_app":null},{"id":11605012651,"node_id":"AE_lADOATz7jc59Q_BazwAAAAKztnCr","url":"https://api.github.com/repos/bazelbuild/bazel/issues/events/11605012651","actor":{"login":"DavidANeil","id":19960231,"node_id":"MDQ6VXNlcjE5OTYwMjMx","avatar_url":"https://avatars.githubusercontent.com/u/19960231?v=4","gravatar_id":"","url":"https://api.github.com/users/DavidANeil","html_url":"https://github.com/DavidANeil","followers_url":"https://api.github.com/users/DavidANeil/followers","following_url":"https://api.github.com/users/DavidANeil/following{/other_user}","gists_url":"https://api.github.com/users/DavidANeil/gists{/gist_id}","starred_url":"https://api.github.com/users/DavidANeil/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DavidANeil/subscriptions","organizations_url":"https://api.github.com/users/DavidANeil/orgs","repos_url":"https://api.github.com/users/DavidANeil/repos","events_url":"https://api.github.com/users/DavidANeil/events{/privacy}","received_events_url":"https://api.github.com/users/DavidANeil/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"assigned","commit_id":null,"commit_url":null,"created_at":"2024-01-26T05:07:02Z","assignee":{"login":"iancha1992","id":132618328,"node_id":"U_kgDOB-eYWA","avatar_url":"https://avatars.githubusercontent.com/u/132618328?v=4","gravatar_id":"","url":"https://api.github.com/users/iancha1992","html_url":"https://github.com/iancha1992","followers_url":"https://api.github.com/users/iancha1992/followers","following_url":"https://api.github.com/users/iancha1992/following{/other_user}","gists_url":"https://api.github.com/users/iancha1992/gists{/gist_id}","starred_url":"https://api.github.com/users/iancha1992/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iancha1992/subscriptions","organizations_url":"https://api.github.com/users/iancha1992/orgs","repos_url":"https://api.github.com/users/iancha1992/repos","events_url":"https://api.github.com/users/iancha1992/events{/privacy}","received_events_url":"https://api.github.com/users/iancha1992/received_events","type":"User","user_view_type":"public","site_admin":false},"performed_via_github_app":null},{"id":11605012658,"node_id":"AE_lADOATz7jc59Q_BazwAAAAKztnCy","url":"https://api.github.com/repos/bazelbuild/bazel/issues/events/11605012658","actor":{"login":"DavidANeil","id":19960231,"node_id":"MDQ6VXNlcjE5OTYwMjMx","avatar_url":"https://avatars.githubusercontent.com/u/19960231?v=4","gravatar_id":"","url":"https://api.github.com/users/DavidANeil","html_url":"https://github.com/DavidANeil","followers_url":"https://api.github.com/users/DavidANeil/followers","following_url":"https://api.github.com/users/DavidANeil/following{/other_user}","gists_url":"https://api.github.com/users/DavidANeil/gists{/gist_id}","starred_url":"https://api.github.com/users/DavidANeil/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DavidANeil/subscriptions","organizations_url":"https://api.github.com/users/DavidANeil/orgs","repos_url":"https://api.github.com/users/DavidANeil/repos","events_url":"https://api.github.com/users/DavidANeil/events{/privacy}","received_events_url":"https://api.github.com/users/DavidANeil/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"assigned","commit_id":null,"commit_url":null,"created_at":"2024-01-26T05:07:02Z","assignee":{"login":"rakshitasingh05","id":148184484,"node_id":"U_kgDOCNUdpA","avatar_url":"https://avatars.githubusercontent.com/u/148184484?v=4","gravatar_id":"","url":"https://api.github.com/users/rakshitasingh05","html_url":"https://github.com/rakshitasingh05","followers_url":"https://api.github.com/users/rakshitasingh05/followers","following_url":"https://api.github.com/users/rakshitasingh05/following{/other_user}","gists_url":"https://api.github.com/users/rakshitasingh05/gists{/gist_id}","starred_url":"https://api.github.com/users/rakshitasingh05/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rakshitasingh05/subscriptions","organizations_url":"https://api.github.com/users/rakshitasingh05/orgs","repos_url":"https://api.github.com/users/rakshitasingh05/repos","events_url":"https://api.github.com/users/rakshitasingh05/events{/privacy}","received_events_url":"https://api.github.com/users/rakshitasingh05/received_events","type":"User","user_view_type":"public","site_admin":false},"performed_via_github_app":null},{"id":11605012665,"node_id":"AE_lADOATz7jc59Q_BazwAAAAKztnC5","url":"https://api.github.com/repos/bazelbuild/bazel/issues/events/11605012665","actor":{"login":"DavidANeil","id":19960231,"node_id":"MDQ6VXNlcjE5OTYwMjMx","avatar_url":"https://avatars.githubusercontent.com/u/19960231?v=4","gravatar_id":"","url":"https://api.github.com/users/DavidANeil","html_url":"https://github.com/DavidANeil","followers_url":"https://api.github.com/users/DavidANeil/followers","following_url":"https://api.github.com/users/DavidANeil/following{/other_user}","gists_url":"https://api.github.com/users/DavidANeil/gists{/gist_id}","starred_url":"https://api.github.com/users/DavidANeil/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DavidANeil/subscriptions","organizations_url":"https://api.github.com/users/DavidANeil/orgs","repos_url":"https://api.github.com/users/DavidANeil/repos","events_url":"https://api.github.com/users/DavidANeil/events{/privacy}","received_events_url":"https://api.github.com/users/DavidANeil/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"assigned","commit_id":null,"commit_url":null,"created_at":"2024-01-26T05:07:02Z","assignee":{"login":"sgowroji","id":48122892,"node_id":"MDQ6VXNlcjQ4MTIyODky","avatar_url":"https://avatars.githubusercontent.com/u/48122892?v=4","gravatar_id":"","url":"https://api.github.com/users/sgowroji","html_url":"https://github.com/sgowroji","followers_url":"https://api.github.com/users/sgowroji/followers","following_url":"https://api.github.com/users/sgowroji/following{/other_user}","gists_url":"https://api.github.com/users/sgowroji/gists{/gist_id}","starred_url":"https://api.github.com/users/sgowroji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sgowroji/subscriptions","organizations_url":"https://api.github.com/users/sgowroji/orgs","repos_url":"https://api.github.com/users/sgowroji/repos","events_url":"https://api.github.com/users/sgowroji/events{/privacy}","received_events_url":"https://api.github.com/users/sgowroji/received_events","type":"User","user_view_type":"public","site_admin":false},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bazelbuild/bazel/issues/comments/1911799336","html_url":"https://github.com/bazelbuild/bazel/issues/21043#issuecomment-1911799336","issue_url":"https://api.github.com/repos/bazelbuild/bazel/issues/21043","id":1911799336,"node_id":"IC_kwDOATz7jc5x874o","user":{"login":"fmeum","id":4312191,"node_id":"MDQ6VXNlcjQzMTIxOTE=","avatar_url":"https://avatars.githubusercontent.com/u/4312191?v=4","gravatar_id":"","url":"https://api.github.com/users/fmeum","html_url":"https://github.com/fmeum","followers_url":"https://api.github.com/users/fmeum/followers","following_url":"https://api.github.com/users/fmeum/following{/other_user}","gists_url":"https://api.github.com/users/fmeum/gists{/gist_id}","starred_url":"https://api.github.com/users/fmeum/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmeum/subscriptions","organizations_url":"https://api.github.com/users/fmeum/orgs","repos_url":"https://api.github.com/users/fmeum/repos","events_url":"https://api.github.com/users/fmeum/events{/privacy}","received_events_url":"https://api.github.com/users/fmeum/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-26T10:14:13Z","updated_at":"2024-01-26T10:14:26Z","body":"@coeuvre @tjgq If I understand the logic around `RemoteCacheClient` correctly, Bazel will not deduplicate inflight requests to the remote cache/executor - which makes sense without path mapping, as an action previously couldn't generate cache hits for other actions in the same build. Is this something you think could be changed easily, e.g. by tracking in-flight requests and returning a `Future` waiting for the result of the first one?\r\n\r\nCC @gregestren ","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/bazelbuild/bazel/issues/comments/1911799336/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"fmeum","id":4312191,"node_id":"MDQ6VXNlcjQzMTIxOTE=","avatar_url":"https://avatars.githubusercontent.com/u/4312191?v=4","gravatar_id":"","url":"https://api.github.com/users/fmeum","html_url":"https://github.com/fmeum","followers_url":"https://api.github.com/users/fmeum/followers","following_url":"https://api.github.com/users/fmeum/following{/other_user}","gists_url":"https://api.github.com/users/fmeum/gists{/gist_id}","starred_url":"https://api.github.com/users/fmeum/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmeum/subscriptions","organizations_url":"https://api.github.com/users/fmeum/orgs","repos_url":"https://api.github.com/users/fmeum/repos","events_url":"https://api.github.com/users/fmeum/events{/privacy}","received_events_url":"https://api.github.com/users/fmeum/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":11607114566,"node_id":"MEE_lADOATz7jc59Q_BazwAAAAKz1oNG","url":"https://api.github.com/repos/bazelbuild/bazel/issues/events/11607114566","actor":{"login":"tjgq","id":4370077,"node_id":"MDQ6VXNlcjQzNzAwNzc=","avatar_url":"https://avatars.githubusercontent.com/u/4370077?v=4","gravatar_id":"","url":"https://api.github.com/users/tjgq","html_url":"https://github.com/tjgq","followers_url":"https://api.github.com/users/tjgq/followers","following_url":"https://api.github.com/users/tjgq/following{/other_user}","gists_url":"https://api.github.com/users/tjgq/gists{/gist_id}","starred_url":"https://api.github.com/users/tjgq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tjgq/subscriptions","organizations_url":"https://api.github.com/users/tjgq/orgs","repos_url":"https://api.github.com/users/tjgq/repos","events_url":"https://api.github.com/users/tjgq/events{/privacy}","received_events_url":"https://api.github.com/users/tjgq/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2024-01-26T10:14:13Z","performed_via_github_app":null},{"id":11607114579,"node_id":"SE_lADOATz7jc59Q_BazwAAAAKz1oNT","url":"https://api.github.com/repos/bazelbuild/bazel/issues/events/11607114579","actor":{"login":"tjgq","id":4370077,"node_id":"MDQ6VXNlcjQzNzAwNzc=","avatar_url":"https://avatars.githubusercontent.com/u/4370077?v=4","gravatar_id":"","url":"https://api.github.com/users/tjgq","html_url":"https://github.com/tjgq","followers_url":"https://api.github.com/users/tjgq/followers","following_url":"https://api.github.com/users/tjgq/following{/other_user}","gists_url":"https://api.github.com/users/tjgq/gists{/gist_id}","starred_url":"https://api.github.com/users/tjgq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tjgq/subscriptions","organizations_url":"https://api.github.com/users/tjgq/orgs","repos_url":"https://api.github.com/users/tjgq/repos","events_url":"https://api.github.com/users/tjgq/events{/privacy}","received_events_url":"https://api.github.com/users/tjgq/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2024-01-26T10:14:13Z","performed_via_github_app":null},{"id":11607114593,"node_id":"MEE_lADOATz7jc59Q_BazwAAAAKz1oNh","url":"https://api.github.com/repos/bazelbuild/bazel/issues/events/11607114593","actor":{"login":"gregestren","id":5130366,"node_id":"MDQ6VXNlcjUxMzAzNjY=","avatar_url":"https://avatars.githubusercontent.com/u/5130366?v=4","gravatar_id":"","url":"https://api.github.com/users/gregestren","html_url":"https://github.com/gregestren","followers_url":"https://api.github.com/users/gregestren/followers","following_url":"https://api.github.com/users/gregestren/following{/other_user}","gists_url":"https://api.github.com/users/gregestren/gists{/gist_id}","starred_url":"https://api.github.com/users/gregestren/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gregestren/subscriptions","organizations_url":"https://api.github.com/users/gregestren/orgs","repos_url":"https://api.github.com/users/gregestren/repos","events_url":"https://api.github.com/users/gregestren/events{/privacy}","received_events_url":"https://api.github.com/users/gregestren/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2024-01-26T10:14:13Z","performed_via_github_app":null},{"id":11607114600,"node_id":"SE_lADOATz7jc59Q_BazwAAAAKz1oNo","url":"https://api.github.com/repos/bazelbuild/bazel/issues/events/11607114600","actor":{"login":"gregestren","id":5130366,"node_id":"MDQ6VXNlcjUxMzAzNjY=","avatar_url":"https://avatars.githubusercontent.com/u/5130366?v=4","gravatar_id":"","url":"https://api.github.com/users/gregestren","html_url":"https://github.com/gregestren","followers_url":"https://api.github.com/users/gregestren/followers","following_url":"https://api.github.com/users/gregestren/following{/other_user}","gists_url":"https://api.github.com/users/gregestren/gists{/gist_id}","starred_url":"https://api.github.com/users/gregestren/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gregestren/subscriptions","organizations_url":"https://api.github.com/users/gregestren/orgs","repos_url":"https://api.github.com/users/gregestren/repos","events_url":"https://api.github.com/users/gregestren/events{/privacy}","received_events_url":"https://api.github.com/users/gregestren/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2024-01-26T10:14:13Z","performed_via_github_app":null},{"id":11607114610,"node_id":"MEE_lADOATz7jc59Q_BazwAAAAKz1oNy","url":"https://api.github.com/repos/bazelbuild/bazel/issues/events/11607114610","actor":{"login":"coeuvre","id":5947531,"node_id":"MDQ6VXNlcjU5NDc1MzE=","avatar_url":"https://avatars.githubusercontent.com/u/5947531?v=4","gravatar_id":"","url":"https://api.github.com/users/coeuvre","html_url":"https://github.com/coeuvre","followers_url":"https://api.github.com/users/coeuvre/followers","following_url":"https://api.github.com/users/coeuvre/following{/other_user}","gists_url":"https://api.github.com/users/coeuvre/gists{/gist_id}","starred_url":"https://api.github.com/users/coeuvre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coeuvre/subscriptions","organizations_url":"https://api.github.com/users/coeuvre/orgs","repos_url":"https://api.github.com/users/coeuvre/repos","events_url":"https://api.github.com/users/coeuvre/events{/privacy}","received_events_url":"https://api.github.com/users/coeuvre/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2024-01-26T10:14:13Z","performed_via_github_app":null},{"id":11607114622,"node_id":"SE_lADOATz7jc59Q_BazwAAAAKz1oN-","url":"https://api.github.com/repos/bazelbuild/bazel/issues/events/11607114622","actor":{"login":"coeuvre","id":5947531,"node_id":"MDQ6VXNlcjU5NDc1MzE=","avatar_url":"https://avatars.githubusercontent.com/u/5947531?v=4","gravatar_id":"","url":"https://api.github.com/users/coeuvre","html_url":"https://github.com/coeuvre","followers_url":"https://api.github.com/users/coeuvre/followers","following_url":"https://api.github.com/users/coeuvre/following{/other_user}","gists_url":"https://api.github.com/users/coeuvre/gists{/gist_id}","starred_url":"https://api.github.com/users/coeuvre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coeuvre/subscriptions","organizations_url":"https://api.github.com/users/coeuvre/orgs","repos_url":"https://api.github.com/users/coeuvre/repos","events_url":"https://api.github.com/users/coeuvre/events{/privacy}","received_events_url":"https://api.github.com/users/coeuvre/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2024-01-26T10:14:13Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/bazelbuild/bazel/issues/comments/1911836636","html_url":"https://github.com/bazelbuild/bazel/issues/21043#issuecomment-1911836636","issue_url":"https://api.github.com/repos/bazelbuild/bazel/issues/21043","id":1911836636,"node_id":"IC_kwDOATz7jc5x9E_c","user":{"login":"fmeum","id":4312191,"node_id":"MDQ6VXNlcjQzMTIxOTE=","avatar_url":"https://avatars.githubusercontent.com/u/4312191?v=4","gravatar_id":"","url":"https://api.github.com/users/fmeum","html_url":"https://github.com/fmeum","followers_url":"https://api.github.com/users/fmeum/followers","following_url":"https://api.github.com/users/fmeum/following{/other_user}","gists_url":"https://api.github.com/users/fmeum/gists{/gist_id}","starred_url":"https://api.github.com/users/fmeum/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmeum/subscriptions","organizations_url":"https://api.github.com/users/fmeum/orgs","repos_url":"https://api.github.com/users/fmeum/repos","events_url":"https://api.github.com/users/fmeum/events{/privacy}","received_events_url":"https://api.github.com/users/fmeum/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-26T10:40:32Z","updated_at":"2024-01-26T11:54:11Z","body":"To be more concrete, this is the test case that we would want to pass:\r\n\r\n```diff\r\nfunction test_path_stripping_cache_hit_for_parallel_action() {\r\n  mkdir rules\r\n  cat > rules/defs.bzl <<'EOF'\r\ndef _platforms_split_transition_impl(settings, attr):\r\n    return [\r\n        {\"//command_line_option:platforms\": \"//rules:foo\"},\r\n        {\"//command_line_option:platforms\": \"//rules:bar\"},\r\n    ]\r\n\r\n_platforms_split_transition = transition(\r\n    implementation = _platforms_split_transition_impl,\r\n    inputs = [],\r\n    outputs = [\"//command_line_option:platforms\"],\r\n)\r\n\r\ndef _echo_impl(ctx):\r\n    out = ctx.actions.declare_file(ctx.label.name)\r\n    args = ctx.actions.args()\r\n    args.add(out)\r\n    ctx.actions.run_shell(\r\n        outputs = [out],\r\n        arguments = [args],\r\n        command = \"sleep 2 && echo '{}' > $1\".format(ctx.attr.msg, out.path),\r\n        execution_requirements = {\"supports-path-mapping\": \"1\"},\r\n    )\r\n    return [\r\n        DefaultInfo(files = depset([out])),\r\n    ]\r\n\r\necho = rule(\r\n    _echo_impl,\r\n    attrs = {\r\n        \"msg\": attr.string(),\r\n    },\r\n)\r\n\r\ndef _cat_impl(ctx):\r\n    out = ctx.actions.declare_file(ctx.label.name)\r\n    inputs = [file for src in ctx.attr.src for file in src[DefaultInfo].files.to_list()]\r\n    ctx.actions.run_shell(\r\n        inputs = inputs,\r\n        outputs = [out],\r\n        command = \"cat {} > {}\".format(\" \".join([f.path for f in inputs]), out.path),\r\n    )\r\n    return [\r\n        DefaultInfo(files = depset([out])),\r\n    ]\r\n\r\ncat = rule(\r\n    _cat_impl,\r\n    attrs = {\r\n        \"src\": attr.label(cfg = _platforms_split_transition),\r\n    },\r\n)\r\nEOF\r\n  cat > rules/BUILD << 'EOF'\r\nplatform(name = \"foo\", parents = [\"@local_config_platform//:host\"])\r\nplatform(name = \"bar\", parents = [\"@local_config_platform//:host\"])\r\nEOF\r\n\r\n  mkdir -p pkg\r\n  cat > pkg/BUILD <<'EOF'\r\nload(\"//rules:defs.bzl\", \"cat\", \"echo\")\r\n\r\necho(\r\n    name = \"gen_src\",\r\n    msg = \"Hello, Cache!\",\r\n)\r\n\r\ncat(\r\n    name = \"cat\",\r\n    src = \":gen_src\",\r\n)\r\nEOF\r\n\r\n  bazel build \\\r\n    --experimental_output_paths=strip \\\r\n    --remote_executor=grpc://localhost:${worker_port} \\\r\n    //pkg:cat &> $TEST_log || fail \"build failed unexpectedly\"\r\n  expect_log '2 remote[^ ]'\r\n  expect_log '1 remote cache hit'\r\n}\r\n```","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/bazelbuild/bazel/issues/comments/1911836636/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"fmeum","id":4312191,"node_id":"MDQ6VXNlcjQzMTIxOTE=","avatar_url":"https://avatars.githubusercontent.com/u/4312191?v=4","gravatar_id":"","url":"https://api.github.com/users/fmeum","html_url":"https://github.com/fmeum","followers_url":"https://api.github.com/users/fmeum/followers","following_url":"https://api.github.com/users/fmeum/following{/other_user}","gists_url":"https://api.github.com/users/fmeum/gists{/gist_id}","starred_url":"https://api.github.com/users/fmeum/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmeum/subscriptions","organizations_url":"https://api.github.com/users/fmeum/orgs","repos_url":"https://api.github.com/users/fmeum/repos","events_url":"https://api.github.com/users/fmeum/events{/privacy}","received_events_url":"https://api.github.com/users/fmeum/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/bazelbuild/bazel/issues/comments/1911904307","html_url":"https://github.com/bazelbuild/bazel/issues/21043#issuecomment-1911904307","issue_url":"https://api.github.com/repos/bazelbuild/bazel/issues/21043","id":1911904307,"node_id":"IC_kwDOATz7jc5x9Vgz","user":{"login":"tjgq","id":4370077,"node_id":"MDQ6VXNlcjQzNzAwNzc=","avatar_url":"https://avatars.githubusercontent.com/u/4370077?v=4","gravatar_id":"","url":"https://api.github.com/users/tjgq","html_url":"https://github.com/tjgq","followers_url":"https://api.github.com/users/tjgq/followers","following_url":"https://api.github.com/users/tjgq/following{/other_user}","gists_url":"https://api.github.com/users/tjgq/gists{/gist_id}","starred_url":"https://api.github.com/users/tjgq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tjgq/subscriptions","organizations_url":"https://api.github.com/users/tjgq/orgs","repos_url":"https://api.github.com/users/tjgq/repos","events_url":"https://api.github.com/users/tjgq/events{/privacy}","received_events_url":"https://api.github.com/users/tjgq/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-26T11:11:05Z","updated_at":"2024-01-26T11:11:05Z","body":"> @coeuvre @tjgq If I understand the logic around `RemoteCacheClient` correctly, Bazel will not deduplicate inflight requests to the remote cache/executor - which makes sense without path mapping, as an action previously couldn't generate cache hits for other actions in the same build. Is this something you think could be changed easily, e.g. by tracking in-flight requests and returning a `Future` waiting for the result of the first one?\r\n\r\nI think this makes sense, yes.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/bazelbuild/bazel/issues/comments/1911904307/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"tjgq","id":4370077,"node_id":"MDQ6VXNlcjQzNzAwNzc=","avatar_url":"https://avatars.githubusercontent.com/u/4370077?v=4","gravatar_id":"","url":"https://api.github.com/users/tjgq","html_url":"https://github.com/tjgq","followers_url":"https://api.github.com/users/tjgq/followers","following_url":"https://api.github.com/users/tjgq/following{/other_user}","gists_url":"https://api.github.com/users/tjgq/gists{/gist_id}","starred_url":"https://api.github.com/users/tjgq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tjgq/subscriptions","organizations_url":"https://api.github.com/users/tjgq/orgs","repos_url":"https://api.github.com/users/tjgq/repos","events_url":"https://api.github.com/users/tjgq/events{/privacy}","received_events_url":"https://api.github.com/users/tjgq/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":11607795832,"node_id":"MEE_lADOATz7jc59Q_BazwAAAAKz4Oh4","url":"https://api.github.com/repos/bazelbuild/bazel/issues/events/11607795832","actor":{"login":"tjgq","id":4370077,"node_id":"MDQ6VXNlcjQzNzAwNzc=","avatar_url":"https://avatars.githubusercontent.com/u/4370077?v=4","gravatar_id":"","url":"https://api.github.com/users/tjgq","html_url":"https://github.com/tjgq","followers_url":"https://api.github.com/users/tjgq/followers","following_url":"https://api.github.com/users/tjgq/following{/other_user}","gists_url":"https://api.github.com/users/tjgq/gists{/gist_id}","starred_url":"https://api.github.com/users/tjgq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tjgq/subscriptions","organizations_url":"https://api.github.com/users/tjgq/orgs","repos_url":"https://api.github.com/users/tjgq/repos","events_url":"https://api.github.com/users/tjgq/events{/privacy}","received_events_url":"https://api.github.com/users/tjgq/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2024-01-26T11:11:05Z","performed_via_github_app":null},{"id":11607795837,"node_id":"SE_lADOATz7jc59Q_BazwAAAAKz4Oh9","url":"https://api.github.com/repos/bazelbuild/bazel/issues/events/11607795837","actor":{"login":"tjgq","id":4370077,"node_id":"MDQ6VXNlcjQzNzAwNzc=","avatar_url":"https://avatars.githubusercontent.com/u/4370077?v=4","gravatar_id":"","url":"https://api.github.com/users/tjgq","html_url":"https://github.com/tjgq","followers_url":"https://api.github.com/users/tjgq/followers","following_url":"https://api.github.com/users/tjgq/following{/other_user}","gists_url":"https://api.github.com/users/tjgq/gists{/gist_id}","starred_url":"https://api.github.com/users/tjgq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tjgq/subscriptions","organizations_url":"https://api.github.com/users/tjgq/orgs","repos_url":"https://api.github.com/users/tjgq/repos","events_url":"https://api.github.com/users/tjgq/events{/privacy}","received_events_url":"https://api.github.com/users/tjgq/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2024-01-26T11:11:05Z","performed_via_github_app":null},{"id":11607795846,"node_id":"MEE_lADOATz7jc59Q_BazwAAAAKz4OiG","url":"https://api.github.com/repos/bazelbuild/bazel/issues/events/11607795846","actor":{"login":"coeuvre","id":5947531,"node_id":"MDQ6VXNlcjU5NDc1MzE=","avatar_url":"https://avatars.githubusercontent.com/u/5947531?v=4","gravatar_id":"","url":"https://api.github.com/users/coeuvre","html_url":"https://github.com/coeuvre","followers_url":"https://api.github.com/users/coeuvre/followers","following_url":"https://api.github.com/users/coeuvre/following{/other_user}","gists_url":"https://api.github.com/users/coeuvre/gists{/gist_id}","starred_url":"https://api.github.com/users/coeuvre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coeuvre/subscriptions","organizations_url":"https://api.github.com/users/coeuvre/orgs","repos_url":"https://api.github.com/users/coeuvre/repos","events_url":"https://api.github.com/users/coeuvre/events{/privacy}","received_events_url":"https://api.github.com/users/coeuvre/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2024-01-26T11:11:05Z","performed_via_github_app":null},{"id":11607795854,"node_id":"SE_lADOATz7jc59Q_BazwAAAAKz4OiO","url":"https://api.github.com/repos/bazelbuild/bazel/issues/events/11607795854","actor":{"login":"coeuvre","id":5947531,"node_id":"MDQ6VXNlcjU5NDc1MzE=","avatar_url":"https://avatars.githubusercontent.com/u/5947531?v=4","gravatar_id":"","url":"https://api.github.com/users/coeuvre","html_url":"https://github.com/coeuvre","followers_url":"https://api.github.com/users/coeuvre/followers","following_url":"https://api.github.com/users/coeuvre/following{/other_user}","gists_url":"https://api.github.com/users/coeuvre/gists{/gist_id}","starred_url":"https://api.github.com/users/coeuvre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coeuvre/subscriptions","organizations_url":"https://api.github.com/users/coeuvre/orgs","repos_url":"https://api.github.com/users/coeuvre/repos","events_url":"https://api.github.com/users/coeuvre/events{/privacy}","received_events_url":"https://api.github.com/users/coeuvre/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2024-01-26T11:11:05Z","performed_via_github_app":null},{"id":11613281968,"node_id":"UNE_lADOATz7jc59Q_BazwAAAAK0NJ6w","url":"https://api.github.com/repos/bazelbuild/bazel/issues/events/11613281968","actor":{"login":"iancha1992","id":132618328,"node_id":"U_kgDOB-eYWA","avatar_url":"https://avatars.githubusercontent.com/u/132618328?v=4","gravatar_id":"","url":"https://api.github.com/users/iancha1992","html_url":"https://github.com/iancha1992","followers_url":"https://api.github.com/users/iancha1992/followers","following_url":"https://api.github.com/users/iancha1992/following{/other_user}","gists_url":"https://api.github.com/users/iancha1992/gists{/gist_id}","starred_url":"https://api.github.com/users/iancha1992/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iancha1992/subscriptions","organizations_url":"https://api.github.com/users/iancha1992/orgs","repos_url":"https://api.github.com/users/iancha1992/repos","events_url":"https://api.github.com/users/iancha1992/events{/privacy}","received_events_url":"https://api.github.com/users/iancha1992/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"unassigned","commit_id":null,"commit_url":null,"created_at":"2024-01-26T21:06:26Z","assignee":{"login":"sgowroji","id":48122892,"node_id":"MDQ6VXNlcjQ4MTIyODky","avatar_url":"https://avatars.githubusercontent.com/u/48122892?v=4","gravatar_id":"","url":"https://api.github.com/users/sgowroji","html_url":"https://github.com/sgowroji","followers_url":"https://api.github.com/users/sgowroji/followers","following_url":"https://api.github.com/users/sgowroji/following{/other_user}","gists_url":"https://api.github.com/users/sgowroji/gists{/gist_id}","starred_url":"https://api.github.com/users/sgowroji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sgowroji/subscriptions","organizations_url":"https://api.github.com/users/sgowroji/orgs","repos_url":"https://api.github.com/users/sgowroji/repos","events_url":"https://api.github.com/users/sgowroji/events{/privacy}","received_events_url":"https://api.github.com/users/sgowroji/received_events","type":"User","user_view_type":"public","site_admin":false},"performed_via_github_app":null},{"id":11613281977,"node_id":"UNE_lADOATz7jc59Q_BazwAAAAK0NJ65","url":"https://api.github.com/repos/bazelbuild/bazel/issues/events/11613281977","actor":{"login":"iancha1992","id":132618328,"node_id":"U_kgDOB-eYWA","avatar_url":"https://avatars.githubusercontent.com/u/132618328?v=4","gravatar_id":"","url":"https://api.github.com/users/iancha1992","html_url":"https://github.com/iancha1992","followers_url":"https://api.github.com/users/iancha1992/followers","following_url":"https://api.github.com/users/iancha1992/following{/other_user}","gists_url":"https://api.github.com/users/iancha1992/gists{/gist_id}","starred_url":"https://api.github.com/users/iancha1992/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iancha1992/subscriptions","organizations_url":"https://api.github.com/users/iancha1992/orgs","repos_url":"https://api.github.com/users/iancha1992/repos","events_url":"https://api.github.com/users/iancha1992/events{/privacy}","received_events_url":"https://api.github.com/users/iancha1992/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"unassigned","commit_id":null,"commit_url":null,"created_at":"2024-01-26T21:06:26Z","assignee":{"login":"iancha1992","id":132618328,"node_id":"U_kgDOB-eYWA","avatar_url":"https://avatars.githubusercontent.com/u/132618328?v=4","gravatar_id":"","url":"https://api.github.com/users/iancha1992","html_url":"https://github.com/iancha1992","followers_url":"https://api.github.com/users/iancha1992/followers","following_url":"https://api.github.com/users/iancha1992/following{/other_user}","gists_url":"https://api.github.com/users/iancha1992/gists{/gist_id}","starred_url":"https://api.github.com/users/iancha1992/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iancha1992/subscriptions","organizations_url":"https://api.github.com/users/iancha1992/orgs","repos_url":"https://api.github.com/users/iancha1992/repos","events_url":"https://api.github.com/users/iancha1992/events{/privacy}","received_events_url":"https://api.github.com/users/iancha1992/received_events","type":"User","user_view_type":"public","site_admin":false},"performed_via_github_app":null},{"id":11613281983,"node_id":"UNE_lADOATz7jc59Q_BazwAAAAK0NJ6_","url":"https://api.github.com/repos/bazelbuild/bazel/issues/events/11613281983","actor":{"login":"iancha1992","id":132618328,"node_id":"U_kgDOB-eYWA","avatar_url":"https://avatars.githubusercontent.com/u/132618328?v=4","gravatar_id":"","url":"https://api.github.com/users/iancha1992","html_url":"https://github.com/iancha1992","followers_url":"https://api.github.com/users/iancha1992/followers","following_url":"https://api.github.com/users/iancha1992/following{/other_user}","gists_url":"https://api.github.com/users/iancha1992/gists{/gist_id}","starred_url":"https://api.github.com/users/iancha1992/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iancha1992/subscriptions","organizations_url":"https://api.github.com/users/iancha1992/orgs","repos_url":"https://api.github.com/users/iancha1992/repos","events_url":"https://api.github.com/users/iancha1992/events{/privacy}","received_events_url":"https://api.github.com/users/iancha1992/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"unassigned","commit_id":null,"commit_url":null,"created_at":"2024-01-26T21:06:26Z","assignee":{"login":"rakshitasingh05","id":148184484,"node_id":"U_kgDOCNUdpA","avatar_url":"https://avatars.githubusercontent.com/u/148184484?v=4","gravatar_id":"","url":"https://api.github.com/users/rakshitasingh05","html_url":"https://github.com/rakshitasingh05","followers_url":"https://api.github.com/users/rakshitasingh05/followers","following_url":"https://api.github.com/users/rakshitasingh05/following{/other_user}","gists_url":"https://api.github.com/users/rakshitasingh05/gists{/gist_id}","starred_url":"https://api.github.com/users/rakshitasingh05/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rakshitasingh05/subscriptions","organizations_url":"https://api.github.com/users/rakshitasingh05/orgs","repos_url":"https://api.github.com/users/rakshitasingh05/repos","events_url":"https://api.github.com/users/rakshitasingh05/events{/privacy}","received_events_url":"https://api.github.com/users/rakshitasingh05/received_events","type":"User","user_view_type":"public","site_admin":false},"performed_via_github_app":null},{"id":11613282361,"node_id":"LE_lADOATz7jc59Q_BazwAAAAK0NKA5","url":"https://api.github.com/repos/bazelbuild/bazel/issues/events/11613282361","actor":{"login":"iancha1992","id":132618328,"node_id":"U_kgDOB-eYWA","avatar_url":"https://avatars.githubusercontent.com/u/132618328?v=4","gravatar_id":"","url":"https://api.github.com/users/iancha1992","html_url":"https://github.com/iancha1992","followers_url":"https://api.github.com/users/iancha1992/followers","following_url":"https://api.github.com/users/iancha1992/following{/other_user}","gists_url":"https://api.github.com/users/iancha1992/gists{/gist_id}","starred_url":"https://api.github.com/users/iancha1992/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iancha1992/subscriptions","organizations_url":"https://api.github.com/users/iancha1992/orgs","repos_url":"https://api.github.com/users/iancha1992/repos","events_url":"https://api.github.com/users/iancha1992/events{/privacy}","received_events_url":"https://api.github.com/users/iancha1992/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2024-01-26T21:06:30Z","label":{"name":"team-Local-Exec","color":"f1f442"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bazelbuild/bazel/issues/comments/1913168549","html_url":"https://github.com/bazelbuild/bazel/issues/21043#issuecomment-1913168549","issue_url":"https://api.github.com/repos/bazelbuild/bazel/issues/21043","id":1913168549,"node_id":"IC_kwDOATz7jc5yCKKl","user":{"login":"tjgq","id":4370077,"node_id":"MDQ6VXNlcjQzNzAwNzc=","avatar_url":"https://avatars.githubusercontent.com/u/4370077?v=4","gravatar_id":"","url":"https://api.github.com/users/tjgq","html_url":"https://github.com/tjgq","followers_url":"https://api.github.com/users/tjgq/followers","following_url":"https://api.github.com/users/tjgq/following{/other_user}","gists_url":"https://api.github.com/users/tjgq/gists{/gist_id}","starred_url":"https://api.github.com/users/tjgq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tjgq/subscriptions","organizations_url":"https://api.github.com/users/tjgq/orgs","repos_url":"https://api.github.com/users/tjgq/repos","events_url":"https://api.github.com/users/tjgq/events{/privacy}","received_events_url":"https://api.github.com/users/tjgq/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-27T14:08:06Z","updated_at":"2024-01-27T14:08:06Z","body":"Thinking some more about it: is this really worth doing if we assume that the remote executor is able to deduplicate identical concurrent requests on its own? The spec doesn't mandate it, but it does [hint](https://cs.opensource.google/bazel/bazel/+/master:third_party/remoteapis/build/bazel/remote/execution/v2/remote_execution.proto;l=1355;drc=e382abf33f1aedc18f19e9bf2bb2e407035f2c92) at the possibility, and I'd expect a well-optimized implementation to do so. (It's at least true of Google's internal equivalent of remote execution.)\r\n\r\nOn the Bazel side, we can't really save any pre-execution work (we need to calculate the action digest anyway to detect duplicates) nor post-execution work (we don't have the ability to deduplicate downloads of the same blob into many output locations, and even if we did, it would only matter for actions \"built with the bytes\"). So I think the gains would be solely in reduced (non-blob) network traffic, which I'm not sure is worth the extra complexity.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/bazelbuild/bazel/issues/comments/1913168549/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"tjgq","id":4370077,"node_id":"MDQ6VXNlcjQzNzAwNzc=","avatar_url":"https://avatars.githubusercontent.com/u/4370077?v=4","gravatar_id":"","url":"https://api.github.com/users/tjgq","html_url":"https://github.com/tjgq","followers_url":"https://api.github.com/users/tjgq/followers","following_url":"https://api.github.com/users/tjgq/following{/other_user}","gists_url":"https://api.github.com/users/tjgq/gists{/gist_id}","starred_url":"https://api.github.com/users/tjgq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tjgq/subscriptions","organizations_url":"https://api.github.com/users/tjgq/orgs","repos_url":"https://api.github.com/users/tjgq/repos","events_url":"https://api.github.com/users/tjgq/events{/privacy}","received_events_url":"https://api.github.com/users/tjgq/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/bazelbuild/bazel/issues/comments/1913181748","html_url":"https://github.com/bazelbuild/bazel/issues/21043#issuecomment-1913181748","issue_url":"https://api.github.com/repos/bazelbuild/bazel/issues/21043","id":1913181748,"node_id":"IC_kwDOATz7jc5yCNY0","user":{"login":"fmeum","id":4312191,"node_id":"MDQ6VXNlcjQzMTIxOTE=","avatar_url":"https://avatars.githubusercontent.com/u/4312191?v=4","gravatar_id":"","url":"https://api.github.com/users/fmeum","html_url":"https://github.com/fmeum","followers_url":"https://api.github.com/users/fmeum/followers","following_url":"https://api.github.com/users/fmeum/following{/other_user}","gists_url":"https://api.github.com/users/fmeum/gists{/gist_id}","starred_url":"https://api.github.com/users/fmeum/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmeum/subscriptions","organizations_url":"https://api.github.com/users/fmeum/orgs","repos_url":"https://api.github.com/users/fmeum/repos","events_url":"https://api.github.com/users/fmeum/events{/privacy}","received_events_url":"https://api.github.com/users/fmeum/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-27T15:06:07Z","updated_at":"2024-01-27T15:06:07Z","body":"That's a good point! Since deduplication within a single build is really just a special case of general deduplication across concurrent builds for a remote executor, it's better positioned to do this than Bazel.\n\nHowever, this still leaves the case of local execution with a remote (or disk) cache. In this situation, I don't see how it would be possible for the cache to transparently deduplicate requests, given that it doesn't have control over whether and when the results of an action that incurred a cache miss will be uploaded. \n\n@tjgq Do you maybe see a way to push this kind of deduplication into the cache? If not, would you consider that to be a sensible addition?\n\n@DavidANeil I just noticed the \"Local execution\" category you chose for the issue. Are you using a remote cache together with local execution?","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/bazelbuild/bazel/issues/comments/1913181748/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"fmeum","id":4312191,"node_id":"MDQ6VXNlcjQzMTIxOTE=","avatar_url":"https://avatars.githubusercontent.com/u/4312191?v=4","gravatar_id":"","url":"https://api.github.com/users/fmeum","html_url":"https://github.com/fmeum","followers_url":"https://api.github.com/users/fmeum/followers","following_url":"https://api.github.com/users/fmeum/following{/other_user}","gists_url":"https://api.github.com/users/fmeum/gists{/gist_id}","starred_url":"https://api.github.com/users/fmeum/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fmeum/subscriptions","organizations_url":"https://api.github.com/users/fmeum/orgs","repos_url":"https://api.github.com/users/fmeum/repos","events_url":"https://api.github.com/users/fmeum/events{/privacy}","received_events_url":"https://api.github.com/users/fmeum/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":11616717567,"node_id":"MEE_lADOATz7jc59Q_BazwAAAAK0aQr_","url":"https://api.github.com/repos/bazelbuild/bazel/issues/events/11616717567","actor":{"login":"tjgq","id":4370077,"node_id":"MDQ6VXNlcjQzNzAwNzc=","avatar_url":"https://avatars.githubusercontent.com/u/4370077?v=4","gravatar_id":"","url":"https://api.github.com/users/tjgq","html_url":"https://github.com/tjgq","followers_url":"https://api.github.com/users/tjgq/followers","following_url":"https://api.github.com/users/tjgq/following{/other_user}","gists_url":"https://api.github.com/users/tjgq/gists{/gist_id}","starred_url":"https://api.github.com/users/tjgq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tjgq/subscriptions","organizations_url":"https://api.github.com/users/tjgq/orgs","repos_url":"https://api.github.com/users/tjgq/repos","events_url":"https://api.github.com/users/tjgq/events{/privacy}","received_events_url":"https://api.github.com/users/tjgq/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2024-01-27T15:06:07Z","performed_via_github_app":null},{"id":11616717573,"node_id":"SE_lADOATz7jc59Q_BazwAAAAK0aQsF","url":"https://api.github.com/repos/bazelbuild/bazel/issues/events/11616717573","actor":{"login":"tjgq","id":4370077,"node_id":"MDQ6VXNlcjQzNzAwNzc=","avatar_url":"https://avatars.githubusercontent.com/u/4370077?v=4","gravatar_id":"","url":"https://api.github.com/users/tjgq","html_url":"https://github.com/tjgq","followers_url":"https://api.github.com/users/tjgq/followers","following_url":"https://api.github.com/users/tjgq/following{/other_user}","gists_url":"https://api.github.com/users/tjgq/gists{/gist_id}","starred_url":"https://api.github.com/users/tjgq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tjgq/subscriptions","organizations_url":"https://api.github.com/users/tjgq/orgs","repos_url":"https://api.github.com/users/tjgq/repos","events_url":"https://api.github.com/users/tjgq/events{/privacy}","received_events_url":"https://api.github.com/users/tjgq/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2024-01-27T15:06:07Z","performed_via_github_app":null},{"id":11616717576,"node_id":"MEE_lADOATz7jc59Q_BazwAAAAK0aQsI","url":"https://api.github.com/repos/bazelbuild/bazel/issues/events/11616717576","actor":{"login":"DavidANeil","id":19960231,"node_id":"MDQ6VXNlcjE5OTYwMjMx","avatar_url":"https://avatars.githubusercontent.com/u/19960231?v=4","gravatar_id":"","url":"https://api.github.com/users/DavidANeil","html_url":"https://github.com/DavidANeil","followers_url":"https://api.github.com/users/DavidANeil/followers","following_url":"https://api.github.com/users/DavidANeil/following{/other_user}","gists_url":"https://api.github.com/users/DavidANeil/gists{/gist_id}","starred_url":"https://api.github.com/users/DavidANeil/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DavidANeil/subscriptions","organizations_url":"https://api.github.com/users/DavidANeil/orgs","repos_url":"https://api.github.com/users/DavidANeil/repos","events_url":"https://api.github.com/users/DavidANeil/events{/privacy}","received_events_url":"https://api.github.com/users/DavidANeil/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2024-01-27T15:06:07Z","performed_via_github_app":null},{"id":11616717577,"node_id":"SE_lADOATz7jc59Q_BazwAAAAK0aQsJ","url":"https://api.github.com/repos/bazelbuild/bazel/issues/events/11616717577","actor":{"login":"DavidANeil","id":19960231,"node_id":"MDQ6VXNlcjE5OTYwMjMx","avatar_url":"https://avatars.githubusercontent.com/u/19960231?v=4","gravatar_id":"","url":"https://api.github.com/users/DavidANeil","html_url":"https://github.com/DavidANeil","followers_url":"https://api.github.com/users/DavidANeil/followers","following_url":"https://api.github.com/users/DavidANeil/following{/other_user}","gists_url":"https://api.github.com/users/DavidANeil/gists{/gist_id}","starred_url":"https://api.github.com/users/DavidANeil/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DavidANeil/subscriptions","organizations_url":"https://api.github.com/users/DavidANeil/orgs","repos_url":"https://api.github.com/users/DavidANeil/repos","events_url":"https://api.github.com/users/DavidANeil/events{/privacy}","received_events_url":"https://api.github.com/users/DavidANeil/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2024-01-27T15:06:07Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/bazelbuild/bazel/issues/comments/1913710229","html_url":"https://github.com/bazelbuild/bazel/issues/21043#issuecomment-1913710229","issue_url":"https://api.github.com/repos/bazelbuild/bazel/issues/21043","id":1913710229,"node_id":"IC_kwDOATz7jc5yEOaV","user":{"login":"tjgq","id":4370077,"node_id":"MDQ6VXNlcjQzNzAwNzc=","avatar_url":"https://avatars.githubusercontent.com/u/4370077?v=4","gravatar_id":"","url":"https://api.github.com/users/tjgq","html_url":"https://github.com/tjgq","followers_url":"https://api.github.com/users/tjgq/followers","following_url":"https://api.github.com/users/tjgq/following{/other_user}","gists_url":"https://api.github.com/users/tjgq/gists{/gist_id}","starred_url":"https://api.github.com/users/tjgq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tjgq/subscriptions","organizations_url":"https://api.github.com/users/tjgq/orgs","repos_url":"https://api.github.com/users/tjgq/repos","events_url":"https://api.github.com/users/tjgq/events{/privacy}","received_events_url":"https://api.github.com/users/tjgq/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-28T20:18:11Z","updated_at":"2024-01-28T20:18:11Z","body":"For local execution, I think the rough outline of \"keep a map of futures for in-flight executions, resolve the future on action upload, block on the future when downloading an identical action\" might be doable. But it's the sort of thing that I'd have to write to convince myself (for example, it's a little unclear to me what the failure path would look like).","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/bazelbuild/bazel/issues/comments/1913710229/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"tjgq","id":4370077,"node_id":"MDQ6VXNlcjQzNzAwNzc=","avatar_url":"https://avatars.githubusercontent.com/u/4370077?v=4","gravatar_id":"","url":"https://api.github.com/users/tjgq","html_url":"https://github.com/tjgq","followers_url":"https://api.github.com/users/tjgq/followers","following_url":"https://api.github.com/users/tjgq/following{/other_user}","gists_url":"https://api.github.com/users/tjgq/gists{/gist_id}","starred_url":"https://api.github.com/users/tjgq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tjgq/subscriptions","organizations_url":"https://api.github.com/users/tjgq/orgs","repos_url":"https://api.github.com/users/tjgq/repos","events_url":"https://api.github.com/users/tjgq/events{/privacy}","received_events_url":"https://api.github.com/users/tjgq/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/bazelbuild/bazel/issues/comments/1915288639","html_url":"https://github.com/bazelbuild/bazel/issues/21043#issuecomment-1915288639","issue_url":"https://api.github.com/repos/bazelbuild/bazel/issues/21043","id":1915288639,"node_id":"IC_kwDOATz7jc5yKPw_","user":{"login":"DavidANeil","id":19960231,"node_id":"MDQ6VXNlcjE5OTYwMjMx","avatar_url":"https://avatars.githubusercontent.com/u/19960231?v=4","gravatar_id":"","url":"https://api.github.com/users/DavidANeil","html_url":"https://github.com/DavidANeil","followers_url":"https://api.github.com/users/DavidANeil/followers","following_url":"https://api.github.com/users/DavidANeil/following{/other_user}","gists_url":"https://api.github.com/users/DavidANeil/gists{/gist_id}","starred_url":"https://api.github.com/users/DavidANeil/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DavidANeil/subscriptions","organizations_url":"https://api.github.com/users/DavidANeil/orgs","repos_url":"https://api.github.com/users/DavidANeil/repos","events_url":"https://api.github.com/users/DavidANeil/events{/privacy}","received_events_url":"https://api.github.com/users/DavidANeil/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-01-29T18:06:53Z","updated_at":"2024-01-29T18:06:53Z","body":"We have some developers using local execution with remote cache.\r\nPersonally, I am using remote execution with the dynamic spawn strategy, (and `--noexperimental_dynamic_exclude_tools`)\r\nAnd our CI system uses only remote execution (except for the few actions we `no-remote-exec`).\r\n\r\nSo, ideally the solution would work for all 3 of those modes.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/bazelbuild/bazel/issues/comments/1915288639/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"DavidANeil","id":19960231,"node_id":"MDQ6VXNlcjE5OTYwMjMx","avatar_url":"https://avatars.githubusercontent.com/u/19960231?v=4","gravatar_id":"","url":"https://api.github.com/users/DavidANeil","html_url":"https://github.com/DavidANeil","followers_url":"https://api.github.com/users/DavidANeil/followers","following_url":"https://api.github.com/users/DavidANeil/following{/other_user}","gists_url":"https://api.github.com/users/DavidANeil/gists{/gist_id}","starred_url":"https://api.github.com/users/DavidANeil/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DavidANeil/subscriptions","organizations_url":"https://api.github.com/users/DavidANeil/orgs","repos_url":"https://api.github.com/users/DavidANeil/repos","events_url":"https://api.github.com/users/DavidANeil/events{/privacy}","received_events_url":"https://api.github.com/users/DavidANeil/received_events","type":"User","user_view_type":"public","site_admin":false}}]