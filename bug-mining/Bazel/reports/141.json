{"url":"https://api.github.com/repos/bazelbuild/bazel/issues/21289","repository_url":"https://api.github.com/repos/bazelbuild/bazel","labels_url":"https://api.github.com/repos/bazelbuild/bazel/issues/21289/labels{/name}","comments_url":"https://api.github.com/repos/bazelbuild/bazel/issues/21289/comments","events_url":"https://api.github.com/repos/bazelbuild/bazel/issues/21289/events","html_url":"https://github.com/bazelbuild/bazel/issues/21289","id":2128794108,"node_id":"I_kwDOATz7jc5-4tH8","number":21289,"title":"bzlmod: module extension-invoked repository rules from `.bzl` files that (transitively) load from external repos yield cycle errors w/usage in WORKSPACE.bzlmod","user":{"login":"rrbutani","id":7833358,"node_id":"MDQ6VXNlcjc4MzMzNTg=","avatar_url":"https://avatars.githubusercontent.com/u/7833358?v=4","gravatar_id":"","url":"https://api.github.com/users/rrbutani","html_url":"https://github.com/rrbutani","followers_url":"https://api.github.com/users/rrbutani/followers","following_url":"https://api.github.com/users/rrbutani/following{/other_user}","gists_url":"https://api.github.com/users/rrbutani/gists{/gist_id}","starred_url":"https://api.github.com/users/rrbutani/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rrbutani/subscriptions","organizations_url":"https://api.github.com/users/rrbutani/orgs","repos_url":"https://api.github.com/users/rrbutani/repos","events_url":"https://api.github.com/users/rrbutani/events{/privacy}","received_events_url":"https://api.github.com/users/rrbutani/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":106503259,"node_id":"MDU6TGFiZWwxMDY1MDMyNTk=","url":"https://api.github.com/repos/bazelbuild/bazel/labels/type:%20bug","name":"type: bug","color":"0052cc","default":false,"description":null},{"id":192364134,"node_id":"MDU6TGFiZWwxOTIzNjQxMzQ=","url":"https://api.github.com/repos/bazelbuild/bazel/labels/P1","name":"P1","color":"d93f0b","default":false,"description":"I'll work on this now. (Assignee required)"},{"id":1020663381,"node_id":"MDU6TGFiZWwxMDIwNjYzMzgx","url":"https://api.github.com/repos/bazelbuild/bazel/labels/team-ExternalDeps","name":"team-ExternalDeps","color":"f1f442","default":false,"description":"External dependency handling, remote repositiories, WORKSPACE file."},{"id":3718884690,"node_id":"LA_kwDOATz7jc7dqa1S","url":"https://api.github.com/repos/bazelbuild/bazel/labels/area-Bzlmod","name":"area-Bzlmod","color":"a4fc20","default":false,"description":"Bzlmod-specific PRs, issues, and feature requests"}],"state":"closed","locked":false,"assignee":{"login":"meteorcloudy","id":4171702,"node_id":"MDQ6VXNlcjQxNzE3MDI=","avatar_url":"https://avatars.githubusercontent.com/u/4171702?v=4","gravatar_id":"","url":"https://api.github.com/users/meteorcloudy","html_url":"https://github.com/meteorcloudy","followers_url":"https://api.github.com/users/meteorcloudy/followers","following_url":"https://api.github.com/users/meteorcloudy/following{/other_user}","gists_url":"https://api.github.com/users/meteorcloudy/gists{/gist_id}","starred_url":"https://api.github.com/users/meteorcloudy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/meteorcloudy/subscriptions","organizations_url":"https://api.github.com/users/meteorcloudy/orgs","repos_url":"https://api.github.com/users/meteorcloudy/repos","events_url":"https://api.github.com/users/meteorcloudy/events{/privacy}","received_events_url":"https://api.github.com/users/meteorcloudy/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"meteorcloudy","id":4171702,"node_id":"MDQ6VXNlcjQxNzE3MDI=","avatar_url":"https://avatars.githubusercontent.com/u/4171702?v=4","gravatar_id":"","url":"https://api.github.com/users/meteorcloudy","html_url":"https://github.com/meteorcloudy","followers_url":"https://api.github.com/users/meteorcloudy/followers","following_url":"https://api.github.com/users/meteorcloudy/following{/other_user}","gists_url":"https://api.github.com/users/meteorcloudy/gists{/gist_id}","starred_url":"https://api.github.com/users/meteorcloudy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/meteorcloudy/subscriptions","organizations_url":"https://api.github.com/users/meteorcloudy/orgs","repos_url":"https://api.github.com/users/meteorcloudy/repos","events_url":"https://api.github.com/users/meteorcloudy/events{/privacy}","received_events_url":"https://api.github.com/users/meteorcloudy/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":5,"created_at":"2024-02-11T02:00:13Z","updated_at":"2024-04-22T20:09:32Z","closed_at":"2024-02-19T09:34:09Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"## issue\r\n\r\nThis is another issue like #20942 but with a twist: rather than being triggered by _usages_ of external repos within the repository rule that's invoked by the module extension, this time the cycle error is triggered by `load`s (including transitive loads) from an external repo [^1] by the `.bzl` file defining the repository rule.\r\n\r\n[^1]: Not sure if it's all external repo loads or just loads from _bzlmod_ produced repos; since repository rules invoked by module extensions don't see `WORKSPACE.bzlmod`.defined repos it's maybe not a meaningful distinction.\r\n\r\nTo recap, here are the conditions necessary to trigger this error:\r\n  - a repository rule that, in it's defining `.bzl` file, (transitively) loads from an external repo\r\n  - a module extension that invokes this repository rule, producing a repo that's `use_repo`'d\r\n  - a WORKSPACE.bzlmod file that then loads this repo\r\n\r\nLike in #20942 the actual cycle is not displayed (even with #20958 applied):\r\n```console\r\n❯ bazel build ...\r\nINFO: Invocation ID: 38cfc65c-9d9a-4f4e-9731-20c53a5acbc1\r\nERROR: Failed to load .bzl file '@@_main~ext~some_repo//:info.bzl': possible dependency cycle detected.\r\nERROR: Error computing the main repository mapping: cycles detected during computation of main repo mapping\r\nComputing main repo mapping:\r\n```\r\n\r\nThis issue is not fixed by #20982.\r\n\r\nFurther, `bazel info` (on alternate runs) causes Bazel to crash:\r\n```console\r\n❯ bazel info\r\nStarting local Bazel server and connecting to it...\r\nINFO: Invocation ID: 328afa3f-1859-4f67-b4f1-32b7d2f5add8\r\nFATAL: bazel crashed due to an internal error. Printing stack trace:\r\njava.lang.NullPointerException: Cannot invoke \"java.lang.Throwable.getMessage()\" because \"cause\" is null\r\n        at com.google.devtools.build.lib.analysis.config.InvalidConfigurationException.<init>(InvalidConfigurationException.java:53)\r\n        at com.google.devtools.build.lib.skyframe.SkyframeExecutor.createBuildConfigurationKey(SkyframeExecutor.java:1854)\r\n        at com.google.devtools.build.lib.skyframe.SkyframeExecutor.getConfiguration(SkyframeExecutor.java:1774)\r\n        at com.google.devtools.build.lib.runtime.commands.InfoCommand.lambda$exec$0(InfoCommand.java:158)\r\n        at com.google.common.base.Suppliers$NonSerializableMemoizingSupplier.get(Suppliers.java:181)\r\n        at com.google.devtools.build.lib.runtime.commands.InfoCommand.exec(InfoCommand.java:215)\r\n        at com.google.devtools.build.lib.runtime.BlazeCommandDispatcher.execExclusively(BlazeCommandDispatcher.java:679)\r\n        at com.google.devtools.build.lib.runtime.BlazeCommandDispatcher.exec(BlazeCommandDispatcher.java:250)\r\n        at com.google.devtools.build.lib.server.GrpcServerImpl.executeCommand(GrpcServerImpl.java:604)\r\n        at com.google.devtools.build.lib.server.GrpcServerImpl.lambda$run$1(GrpcServerImpl.java:676)\r\n        at io.grpc.Context$1.run(Context.java:566)\r\n        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\r\n        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\r\n        at java.base/java.lang.Thread.run(Unknown Source)\r\n```\r\n\r\n## minimal repro\r\n\r\n```starlark\r\n# MODULE.bazel\r\nbazel_dep(name = \"bazel_skylib\", version = \"1.4.2\")\r\n\r\nuse_repo(use_extension(\"//:mod_ext.bzl\", \"ext\"), \"some_repo\")\r\n```\r\n\r\n```starlark\r\n# BUILD.bazel\r\n```\r\n\r\n```starlark\r\n# mod_ext.bzl\r\n\r\n# i.e. a load from an external (from bzlmod) repo\r\nload(\"@bazel_skylib//rules:common_settings.bzl\", \"BuildSettingInfo\")\r\n\r\nrepo = repository_rule(lambda rctx: [\r\n    rctx.file(\"BUILD.bazel\"),\r\n    rctx.file(\"info.bzl\", content = \"TEST = 1\"),\r\n][0])\r\n\r\next = module_extension(lambda _: repo(name = \"some_repo\"))\r\n```\r\n\r\n```starlark\r\n# WORKSPACE.bzlmod\r\nload(\"@some_repo//:info.bzl\", \"TEST\") # This load is necessary to induce the error.\r\nprint(TEST)\r\n```\r\n\r\nSame behavior as [in #20942](https://github.com/bazelbuild/bazel/issues/20942#issuecomment-1900522308); we see errors *after* the first evaluation of `.bzl` files records the deps.\r\n\r\nTo reproduce, run:\r\n  - `bazel build ...`: loads .bzl files, writes marker files\r\n  - `bazel clean`\r\n  - `bazel build ...`: recompute repo mapping, using the marker files written\r\n\r\nErrors with:\r\n```\r\nERROR: Failed to load .bzl file '@@_main~ext~some_repo//:info.bzl': possible dependency cycle detected.\r\nERROR: Error computing the main repository mapping: cycles detected during computation of main repo mapping\r\nComputing main repo mapping:\r\n```\r\n\r\nAlternatively:\r\n  - `bazel info`\r\n  - `bazel shutdown`\r\n  - `bazel info`\r\n\r\nErrors with:\r\n```\r\nFATAL: bazel crashed due to an internal error. Printing stack trace:\r\njava.lang.NullPointerException: Cannot invoke \"java.lang.Throwable.getMessage()\" because \"cause\" is null\r\n        at com.google.devtools.build.lib.analysis.config.InvalidConfigurationException.<init>(InvalidConfigurationException.java:53)\r\n        at com.google.devtools.build.lib.skyframe.SkyframeExecutor.createBuildConfigurationKey(SkyframeExecutor.java:1854)\r\n        at com.google.devtools.build.lib.skyframe.SkyframeExecutor.getConfiguration(SkyframeExecutor.java:1774)\r\n        at com.google.devtools.build.lib.runtime.commands.InfoCommand.lambda$exec$0(InfoCommand.java:158)\r\n        at com.google.common.base.Suppliers$NonSerializableMemoizingSupplier.get(Suppliers.java:181)\r\n        at com.google.devtools.build.lib.runtime.commands.InfoCommand.exec(InfoCommand.java:215)\r\n        at com.google.devtools.build.lib.runtime.BlazeCommandDispatcher.execExclusively(BlazeCommandDispatcher.java:679)\r\n        at com.google.devtools.build.lib.runtime.BlazeCommandDispatcher.exec(BlazeCommandDispatcher.java:250)\r\n        at com.google.devtools.build.lib.server.GrpcServerImpl.executeCommand(GrpcServerImpl.java:604)\r\n        at com.google.devtools.build.lib.server.GrpcServerImpl.lambda$run$1(GrpcServerImpl.java:676)\r\n        at io.grpc.Context$1.run(Context.java:566)\r\n        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\r\n        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\r\n        at java.base/java.lang.Thread.run(Unknown Source)\r\n```\r\n\r\nA `bazel clean --expunge` is necessary to get `bazel build`, `bazel info`, etc. to work again.\r\n\r\n### python bzlmod test\r\n\r\nAlternatively, here's a minimal repro as a bzlmod python test, in the style of @Wyverald's [test](https://github.com/bazelbuild/bazel/pull/20982/files#diff-69025fe82b10c407792aa69771027380a6e6e2c5ad19969288a806909a7b2690) in #20982:\r\n```python\r\ndef testExtensionRepoMappingChange_mainRepoEvalCycleWithWorkspaceCausedByLoad(self):\r\n    # Regression test for #21289\r\n    self.ScratchDir('bar')\r\n    self.ScratchFile('bar/MODULE.bazel', ['module(name = \"bar\")'])\r\n    self.ScratchFile('bar/BUILD.bazel')\r\n    self.ScratchFile('bar/defs.bzl', [\"TEST = 1\"])\r\n    self.ScratchFile(\r\n        'MODULE.bazel',\r\n        [\r\n            'ext = use_extension(\":ext.bzl\", \"ext\")',\r\n            'use_repo(ext, \"repo\")',\r\n            'bazel_dep(name=\"bar\",version=\"0.0\")',\r\n            'local_path_override(module_name = \"bar\", path = \"bar\")'\r\n        ],\r\n    )\r\n    self.ScratchFile(\r\n        'BUILD.bazel',\r\n        [\r\n            'load(\"@repo//:defs.bzl\", \"STR\")',\r\n            'print(\"STR={}\".format(STR))',\r\n            'filegroup(name=\"lol\")',\r\n        ],\r\n    )\r\n    self.ScratchFile(\r\n        'ext.bzl',\r\n        [\r\n            'load(\"@bar//:defs.bzl\", \"TEST\")',\r\n            'def _repo_impl(rctx):',\r\n            '  rctx.file(\"BUILD\")',\r\n            '  rctx.file(\"defs.bzl\", \"STR = 1\")',\r\n            'repo = repository_rule(_repo_impl)',\r\n            'def _ext_impl(mctx):',\r\n            '  print(\"ran the extension!\")',\r\n            '  repo(name = \"repo\")',\r\n            'ext = module_extension(_ext_impl)',\r\n        ],\r\n    )\r\n    self.ScratchFile('WORKSPACE.bzlmod', ['load(\"@repo//:defs.bzl\",\"STR\")'])\r\n\r\n    _, _, stderr = self.RunBazel(['build', '--enable_workspace', ':lol'])\r\n    self.assertIn('STR=1', '\\n'.join(stderr))\r\n\r\n    # Shutdown bazel so we use the .marker files:\r\n    self.RunBazel(['shutdown'])\r\n    # Build again. This (currently) fails with a cycle error :(\r\n    _, _, stderr = self.RunBazel(['build', '--enable_workspace', ':lol'])\r\n    self.assertNotIn('ran the extension!', '\\n'.join(stderr))\r\n```\r\n\r\n### repository rule vs module extension\r\n\r\n> [!IMPORTANT]\r\n> It's a dependency (transitively) on an external repo from the .bzl file where the **repository rule** is defined that causes a problem.\r\n\r\nIf we split `mod_ext.bzl` in the above so that the repository rule is defined in a separate `repo.bzl`, this has the issue (external load is present in `repo.bzl`):\r\n```starlark\r\n# mod_ext.bzl\r\n\r\nload(\"//:repo.bzl\", \"repo\")\r\n\r\next = module_extension(lambda mctx: repo(name = \"some_repo\"))\r\n```\r\n\r\n```starlark\r\n# repo.bzl\r\n\r\nload(\"@bazel_skylib//rules:common_settings.bzl\", \"BuildSettingInfo\") # !!!\r\n\r\nrepo = repository_rule(lambda rctx: [\r\n    rctx.file(\"BUILD.bazel\"),\r\n    rctx.file(\"info.bzl\", content = \"TEST = 1\"),\r\n][0])\r\n```\r\n\r\nAnd this (external load is only in `mod_ext.bzl`) does not:\r\n```starlark\r\n# mod_ext.bzl\r\n\r\nload(\"@bazel_skylib//rules:common_settings.bzl\", \"BuildSettingInfo\") # !!!\r\nload(\"//:repo.bzl\", \"repo\")\r\n\r\next = module_extension(lambda mctx: repo(name = \"some_repo\"))\r\n```\r\n\r\n```starlark\r\n# repo.bzl\r\n\r\nrepo = repository_rule(lambda rctx: [\r\n    rctx.file(\"BUILD.bazel\"),\r\n    rctx.file(\"info.bzl\", content = \"TEST = 1\"),\r\n][0])\r\n```\r\n\r\n## details\r\n\r\n#### cycle\r\n\r\nAs mentioned, Bazel does not report the actual cycle error, even with @fmeum's patch in #20958. This is because these particular cycles do not match this predicate:\r\nhttps://github.com/bazelbuild/bazel/blob/fc36c874f21b38b32a63a99399862bf003f42b6b/src/main/java/com/google/devtools/build/lib/skyframe/BzlmodRepoCycleReporter.java#L117\r\n\r\nWe can see the cycle in the java log though:\r\n```\r\nFound cycle : [\r\n    Key{repoName=@@, rootModuleShouldSeeWorkspaceRepos=true},\r\n    external,\r\n    com.google.devtools.build.lib.skyframe.ExternalPackageFunction$$Lambda/0x00000008002ce788@fe5a7a7,\r\n    [/dev/bazel/bzlmod-workspace-file-repo-mapping-cycle-issue-repro]/[WORKSPACE], 0,\r\n    KeyForWorkspace{label=@@_main~ext~some_repo//:info.bzl, isBuildPrelude=false},\r\n    CONTAINING_PACKAGE_LOOKUP:@@_main~ext~some_repo//,\r\n    PACKAGE_LOOKUP:@@_main~ext~some_repo//,\r\n    REPOSITORY_DIRECTORY:@@_main~ext~some_repo\r\n] from [\r\n    Key{repoName=@@, rootModuleShouldSeeWorkspaceRepos=true},\r\n    external,\r\n    com.google.devtools.build.lib.skyframe.ExternalPackageFunction$$Lambda/0x00000008002ce788@fe5a7a7,\r\n    [/dev/bazel/bzlmod-workspace-file-repo-mapping-cycle-issue-repro]/[WORKSPACE], 0,\r\n    KeyForWorkspace{label=@@_main~ext~some_repo//:info.bzl, isBuildPrelude=false},\r\n    CONTAINING_PACKAGE_LOOKUP:@@_main~ext~some_repo//,\r\n    PACKAGE_LOOKUP:@@_main~ext~some_repo//,\r\n    REPOSITORY_DIRECTORY:@@_main~ext~some_repo\r\n]\r\n```\r\n\r\n#### marker file\r\n\r\n`<output_base>/external/@_main~ext~some_repo.marker` has:\r\n```\r\n149b4849965392c8eb420a2271f82c6a77a5a20850d07ef3ff8e49f6e6b137a7\r\nREPO_MAPPING:,bazel_skylib bazel_skylib~1.4.2\r\nSTARLARK_SEMANTICS 0\r\n```\r\n\r\nRemoving the `REPO_MAPPING` for skylib \"fixes\" the issue (at least until the marker is updated...) as we'd expect.\r\n\r\n#### misc\r\n\r\nRunning with `--noenable_workspace` also sidesteps this error, as we'd expect.\r\n\r\nI think it's possible to abuse the unfortunate behavior described by @Wyverald  [here](https://github.com/bazelbuild/bazel/pull/21131#discussion_r1471924084) as a \"workaround\" (i.e. factoring out the literal `repository_rule` invocation into a separate `.bzl` file where there are no transitive external loads).\r\n\r\nI cannot reproduce this issue on `7.0.2`.\r\n\r\n## root cause\r\n\r\nWith the above repro and this script `git bisect` is able to find where this first started failing:\r\n```bash\r\n#!/usr/bin/env bash\r\n\r\n# See: https://git-scm.com/docs/git-bisect#_bisect_run\r\n#  - 0: good\r\n#  - 125: indeterminate\r\n#  - _: bad\r\n\r\nquiet=(\r\n    --ui_event_filters=-info\r\n)\r\n\r\nbazel build --incompatible_sandbox_hermetic_tmp=false \"${quiet[@]}\" //src:bazel || exit 125\r\nreadonly bazel_bin=$(realpath $(bazel cquery \"${quiet[@]}\" //src:bazel --output=files))\r\n\r\ngit checkout MODULE.bazel.lock || :\r\n\r\nreadonly repro_workspace=$(realpath bzlmod-workspace-file-repo-mapping-cycle-issue-repro)\r\nreadonly install_base=\"${repro_workspace}/bazel_install_base\"\r\nreadonly output_base=\"${repro_workspace}/bazel_output_base\"\r\n\r\nrm -rf \"${install_base}\" \"${output_base}\"\r\n\r\nbzl() {\r\n    \"${bazel_bin}\" \\\r\n        --output_base=\"${output_base}\" --install_base=\"${install_base}\" \\\r\n        \"${1}\" \"${quiet[@]}\" \"${@:2}\"\r\n}\r\n\r\n{\r\n    cd \"${repro_workspace}\" || exit 125\r\n    bzl info >/dev/null # load `.bzl` files, make .marker files\r\n    bzl shutdown # clear in-memory\r\n    bzl info || exit 1 # construct repo mapping again, using .marker files\r\n}\r\n\r\nbzl shutdown # if all succeeded\r\nexit 0\r\n```\r\n\r\n```console\r\n❯ git bisect start\r\n❯ git bisect bad           # a54a393d209ab9c8cf5e80b2a0ef092196c17df3, HEAD as of this writing\r\n❯ git bisect good HEAD~200 # 59ac9ce297eb1bc0c47d4dc5de788908208735e0\r\n❯ git bisect run ./bisect.sh\r\n9edaddd6273de776a3f60245f5c56f82f9622caf is the first bad commit\r\n```\r\n\r\n9edaddd6273de776a3f60245f5c56f82f9622caf comes from #21131 which indeed did not make it into 7.0.2 (but has been applied to the 7.1.0 branch: #21172)\r\n\r\n---\r\n\r\ncc: @fmeum @Wyverald @meteorcloudy\r\n\r\nI'm not familiar with this part of the Bazel codebase but, IIUC, the issue is that when resolving deps for the mod-ext produced repo (on the path: `root mapping -> WORKSPACE.bzlmod -> mod-ext provided repo (some_repo) -> [repo from bzlmod (skylib)]`), the root mapping is requested again forming a cycle (even though in reality only bzlmod-produced repos should be accessible to the repo rule since it's instantiated from bzlmod).\r\n\r\nIt's not clear to me what the best way to fix this would be but please let me know if there's anything I can do to help.","closed_by":{"login":"copybara-service[bot]","id":56741989,"node_id":"MDM6Qm90NTY3NDE5ODk=","avatar_url":"https://avatars.githubusercontent.com/in/44061?v=4","gravatar_id":"","url":"https://api.github.com/users/copybara-service%5Bbot%5D","html_url":"https://github.com/apps/copybara-service","followers_url":"https://api.github.com/users/copybara-service%5Bbot%5D/followers","following_url":"https://api.github.com/users/copybara-service%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/copybara-service%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/copybara-service%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/copybara-service%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/copybara-service%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/copybara-service%5Bbot%5D/repos","events_url":"https://api.github.com/users/copybara-service%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/copybara-service%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/bazelbuild/bazel/issues/21289/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/bazelbuild/bazel/issues/21289/timeline","performed_via_github_app":null,"state_reason":"completed"}