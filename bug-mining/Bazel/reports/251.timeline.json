[{"id":9501969782,"node_id":"LE_lADOATz7jc5od0IzzwAAAAI2XI12","url":"https://api.github.com/repos/bazelbuild/bazel/issues/events/9501969782","actor":{"login":"lberki","id":3524818,"node_id":"MDQ6VXNlcjM1MjQ4MTg=","avatar_url":"https://avatars.githubusercontent.com/u/3524818?v=4","gravatar_id":"","url":"https://api.github.com/users/lberki","html_url":"https://github.com/lberki","followers_url":"https://api.github.com/users/lberki/followers","following_url":"https://api.github.com/users/lberki/following{/other_user}","gists_url":"https://api.github.com/users/lberki/gists{/gist_id}","starred_url":"https://api.github.com/users/lberki/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lberki/subscriptions","organizations_url":"https://api.github.com/users/lberki/orgs","repos_url":"https://api.github.com/users/lberki/repos","events_url":"https://api.github.com/users/lberki/events{/privacy}","received_events_url":"https://api.github.com/users/lberki/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2023-06-12T12:19:09Z","label":{"name":"type: feature request","color":"0052cc"},"performed_via_github_app":null},{"id":9501969796,"node_id":"LE_lADOATz7jc5od0IzzwAAAAI2XI2E","url":"https://api.github.com/repos/bazelbuild/bazel/issues/events/9501969796","actor":{"login":"lberki","id":3524818,"node_id":"MDQ6VXNlcjM1MjQ4MTg=","avatar_url":"https://avatars.githubusercontent.com/u/3524818?v=4","gravatar_id":"","url":"https://api.github.com/users/lberki","html_url":"https://github.com/lberki","followers_url":"https://api.github.com/users/lberki/followers","following_url":"https://api.github.com/users/lberki/following{/other_user}","gists_url":"https://api.github.com/users/lberki/gists{/gist_id}","starred_url":"https://api.github.com/users/lberki/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lberki/subscriptions","organizations_url":"https://api.github.com/users/lberki/orgs","repos_url":"https://api.github.com/users/lberki/repos","events_url":"https://api.github.com/users/lberki/events{/privacy}","received_events_url":"https://api.github.com/users/lberki/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2023-06-12T12:19:09Z","label":{"name":"untriaged","color":"c34ddd"},"performed_via_github_app":null},{"id":9501969894,"node_id":"AE_lADOATz7jc5od0IzzwAAAAI2XI3m","url":"https://api.github.com/repos/bazelbuild/bazel/issues/events/9501969894","actor":{"login":"lberki","id":3524818,"node_id":"MDQ6VXNlcjM1MjQ4MTg=","avatar_url":"https://avatars.githubusercontent.com/u/3524818?v=4","gravatar_id":"","url":"https://api.github.com/users/lberki","html_url":"https://github.com/lberki","followers_url":"https://api.github.com/users/lberki/followers","following_url":"https://api.github.com/users/lberki/following{/other_user}","gists_url":"https://api.github.com/users/lberki/gists{/gist_id}","starred_url":"https://api.github.com/users/lberki/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lberki/subscriptions","organizations_url":"https://api.github.com/users/lberki/orgs","repos_url":"https://api.github.com/users/lberki/repos","events_url":"https://api.github.com/users/lberki/events{/privacy}","received_events_url":"https://api.github.com/users/lberki/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"assigned","commit_id":null,"commit_url":null,"created_at":"2023-06-12T12:19:10Z","assignee":{"login":"sgowroji","id":48122892,"node_id":"MDQ6VXNlcjQ4MTIyODky","avatar_url":"https://avatars.githubusercontent.com/u/48122892?v=4","gravatar_id":"","url":"https://api.github.com/users/sgowroji","html_url":"https://github.com/sgowroji","followers_url":"https://api.github.com/users/sgowroji/followers","following_url":"https://api.github.com/users/sgowroji/following{/other_user}","gists_url":"https://api.github.com/users/sgowroji/gists{/gist_id}","starred_url":"https://api.github.com/users/sgowroji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sgowroji/subscriptions","organizations_url":"https://api.github.com/users/sgowroji/orgs","repos_url":"https://api.github.com/users/sgowroji/repos","events_url":"https://api.github.com/users/sgowroji/events{/privacy}","received_events_url":"https://api.github.com/users/sgowroji/received_events","type":"User","user_view_type":"public","site_admin":false},"performed_via_github_app":null},{"id":9501969933,"node_id":"AE_lADOATz7jc5od0IzzwAAAAI2XI4N","url":"https://api.github.com/repos/bazelbuild/bazel/issues/events/9501969933","actor":{"login":"lberki","id":3524818,"node_id":"MDQ6VXNlcjM1MjQ4MTg=","avatar_url":"https://avatars.githubusercontent.com/u/3524818?v=4","gravatar_id":"","url":"https://api.github.com/users/lberki","html_url":"https://github.com/lberki","followers_url":"https://api.github.com/users/lberki/followers","following_url":"https://api.github.com/users/lberki/following{/other_user}","gists_url":"https://api.github.com/users/lberki/gists{/gist_id}","starred_url":"https://api.github.com/users/lberki/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lberki/subscriptions","organizations_url":"https://api.github.com/users/lberki/orgs","repos_url":"https://api.github.com/users/lberki/repos","events_url":"https://api.github.com/users/lberki/events{/privacy}","received_events_url":"https://api.github.com/users/lberki/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"assigned","commit_id":null,"commit_url":null,"created_at":"2023-06-12T12:19:10Z","assignee":{"login":"Pavank1992","id":127178870,"node_id":"U_kgDOB5SYdg","avatar_url":"https://avatars.githubusercontent.com/u/127178870?v=4","gravatar_id":"","url":"https://api.github.com/users/Pavank1992","html_url":"https://github.com/Pavank1992","followers_url":"https://api.github.com/users/Pavank1992/followers","following_url":"https://api.github.com/users/Pavank1992/following{/other_user}","gists_url":"https://api.github.com/users/Pavank1992/gists{/gist_id}","starred_url":"https://api.github.com/users/Pavank1992/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Pavank1992/subscriptions","organizations_url":"https://api.github.com/users/Pavank1992/orgs","repos_url":"https://api.github.com/users/Pavank1992/repos","events_url":"https://api.github.com/users/Pavank1992/events{/privacy}","received_events_url":"https://api.github.com/users/Pavank1992/received_events","type":"User","user_view_type":"public","site_admin":false},"performed_via_github_app":null},{"id":9501973580,"node_id":"LE_lADOATz7jc5od0IzzwAAAAI2XJxM","url":"https://api.github.com/repos/bazelbuild/bazel/issues/events/9501973580","actor":{"login":"lberki","id":3524818,"node_id":"MDQ6VXNlcjM1MjQ4MTg=","avatar_url":"https://avatars.githubusercontent.com/u/3524818?v=4","gravatar_id":"","url":"https://api.github.com/users/lberki","html_url":"https://github.com/lberki","followers_url":"https://api.github.com/users/lberki/followers","following_url":"https://api.github.com/users/lberki/following{/other_user}","gists_url":"https://api.github.com/users/lberki/gists{/gist_id}","starred_url":"https://api.github.com/users/lberki/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lberki/subscriptions","organizations_url":"https://api.github.com/users/lberki/orgs","repos_url":"https://api.github.com/users/lberki/repos","events_url":"https://api.github.com/users/lberki/events{/privacy}","received_events_url":"https://api.github.com/users/lberki/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2023-06-12T12:19:29Z","label":{"name":"team-Remote-Exec","color":"f1f442"},"performed_via_github_app":null},{"id":9502003262,"node_id":"UNE_lADOATz7jc5od0IzzwAAAAI2XRA-","url":"https://api.github.com/repos/bazelbuild/bazel/issues/events/9502003262","actor":{"login":"Pavank1992","id":127178870,"node_id":"U_kgDOB5SYdg","avatar_url":"https://avatars.githubusercontent.com/u/127178870?v=4","gravatar_id":"","url":"https://api.github.com/users/Pavank1992","html_url":"https://github.com/Pavank1992","followers_url":"https://api.github.com/users/Pavank1992/followers","following_url":"https://api.github.com/users/Pavank1992/following{/other_user}","gists_url":"https://api.github.com/users/Pavank1992/gists{/gist_id}","starred_url":"https://api.github.com/users/Pavank1992/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Pavank1992/subscriptions","organizations_url":"https://api.github.com/users/Pavank1992/orgs","repos_url":"https://api.github.com/users/Pavank1992/repos","events_url":"https://api.github.com/users/Pavank1992/events{/privacy}","received_events_url":"https://api.github.com/users/Pavank1992/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"unassigned","commit_id":null,"commit_url":null,"created_at":"2023-06-12T12:22:18Z","assignee":{"login":"sgowroji","id":48122892,"node_id":"MDQ6VXNlcjQ4MTIyODky","avatar_url":"https://avatars.githubusercontent.com/u/48122892?v=4","gravatar_id":"","url":"https://api.github.com/users/sgowroji","html_url":"https://github.com/sgowroji","followers_url":"https://api.github.com/users/sgowroji/followers","following_url":"https://api.github.com/users/sgowroji/following{/other_user}","gists_url":"https://api.github.com/users/sgowroji/gists{/gist_id}","starred_url":"https://api.github.com/users/sgowroji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sgowroji/subscriptions","organizations_url":"https://api.github.com/users/sgowroji/orgs","repos_url":"https://api.github.com/users/sgowroji/repos","events_url":"https://api.github.com/users/sgowroji/events{/privacy}","received_events_url":"https://api.github.com/users/sgowroji/received_events","type":"User","user_view_type":"public","site_admin":false},"performed_via_github_app":null},{"id":9502003283,"node_id":"UNE_lADOATz7jc5od0IzzwAAAAI2XRBT","url":"https://api.github.com/repos/bazelbuild/bazel/issues/events/9502003283","actor":{"login":"Pavank1992","id":127178870,"node_id":"U_kgDOB5SYdg","avatar_url":"https://avatars.githubusercontent.com/u/127178870?v=4","gravatar_id":"","url":"https://api.github.com/users/Pavank1992","html_url":"https://github.com/Pavank1992","followers_url":"https://api.github.com/users/Pavank1992/followers","following_url":"https://api.github.com/users/Pavank1992/following{/other_user}","gists_url":"https://api.github.com/users/Pavank1992/gists{/gist_id}","starred_url":"https://api.github.com/users/Pavank1992/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Pavank1992/subscriptions","organizations_url":"https://api.github.com/users/Pavank1992/orgs","repos_url":"https://api.github.com/users/Pavank1992/repos","events_url":"https://api.github.com/users/Pavank1992/events{/privacy}","received_events_url":"https://api.github.com/users/Pavank1992/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"unassigned","commit_id":null,"commit_url":null,"created_at":"2023-06-12T12:22:19Z","assignee":{"login":"Pavank1992","id":127178870,"node_id":"U_kgDOB5SYdg","avatar_url":"https://avatars.githubusercontent.com/u/127178870?v=4","gravatar_id":"","url":"https://api.github.com/users/Pavank1992","html_url":"https://github.com/Pavank1992","followers_url":"https://api.github.com/users/Pavank1992/followers","following_url":"https://api.github.com/users/Pavank1992/following{/other_user}","gists_url":"https://api.github.com/users/Pavank1992/gists{/gist_id}","starred_url":"https://api.github.com/users/Pavank1992/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Pavank1992/subscriptions","organizations_url":"https://api.github.com/users/Pavank1992/orgs","repos_url":"https://api.github.com/users/Pavank1992/repos","events_url":"https://api.github.com/users/Pavank1992/events{/privacy}","received_events_url":"https://api.github.com/users/Pavank1992/received_events","type":"User","user_view_type":"public","site_admin":false},"performed_via_github_app":null},{"id":9504491052,"node_id":"UE_lADOATz7jc5od0IzzwAAAAI2gwYs","url":"https://api.github.com/repos/bazelbuild/bazel/issues/events/9504491052","actor":{"login":"keith","id":283886,"node_id":"MDQ6VXNlcjI4Mzg4Ng==","avatar_url":"https://avatars.githubusercontent.com/u/283886?v=4","gravatar_id":"","url":"https://api.github.com/users/keith","html_url":"https://github.com/keith","followers_url":"https://api.github.com/users/keith/followers","following_url":"https://api.github.com/users/keith/following{/other_user}","gists_url":"https://api.github.com/users/keith/gists{/gist_id}","starred_url":"https://api.github.com/users/keith/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keith/subscriptions","organizations_url":"https://api.github.com/users/keith/orgs","repos_url":"https://api.github.com/users/keith/repos","events_url":"https://api.github.com/users/keith/events{/privacy}","received_events_url":"https://api.github.com/users/keith/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"unsubscribed","commit_id":null,"commit_url":null,"created_at":"2023-06-12T15:51:08Z","performed_via_github_app":null},{"id":9513555348,"node_id":"UNLE_lADOATz7jc5od0IzzwAAAAI3DVWU","url":"https://api.github.com/repos/bazelbuild/bazel/issues/events/9513555348","actor":{"login":"coeuvre","id":5947531,"node_id":"MDQ6VXNlcjU5NDc1MzE=","avatar_url":"https://avatars.githubusercontent.com/u/5947531?v=4","gravatar_id":"","url":"https://api.github.com/users/coeuvre","html_url":"https://github.com/coeuvre","followers_url":"https://api.github.com/users/coeuvre/followers","following_url":"https://api.github.com/users/coeuvre/following{/other_user}","gists_url":"https://api.github.com/users/coeuvre/gists{/gist_id}","starred_url":"https://api.github.com/users/coeuvre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coeuvre/subscriptions","organizations_url":"https://api.github.com/users/coeuvre/orgs","repos_url":"https://api.github.com/users/coeuvre/repos","events_url":"https://api.github.com/users/coeuvre/events{/privacy}","received_events_url":"https://api.github.com/users/coeuvre/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"unlabeled","commit_id":null,"commit_url":null,"created_at":"2023-06-13T09:30:43Z","label":{"name":"untriaged","color":"c34ddd"},"performed_via_github_app":null},{"id":9513555362,"node_id":"LE_lADOATz7jc5od0IzzwAAAAI3DVWi","url":"https://api.github.com/repos/bazelbuild/bazel/issues/events/9513555362","actor":{"login":"coeuvre","id":5947531,"node_id":"MDQ6VXNlcjU5NDc1MzE=","avatar_url":"https://avatars.githubusercontent.com/u/5947531?v=4","gravatar_id":"","url":"https://api.github.com/users/coeuvre","html_url":"https://github.com/coeuvre","followers_url":"https://api.github.com/users/coeuvre/followers","following_url":"https://api.github.com/users/coeuvre/following{/other_user}","gists_url":"https://api.github.com/users/coeuvre/gists{/gist_id}","starred_url":"https://api.github.com/users/coeuvre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coeuvre/subscriptions","organizations_url":"https://api.github.com/users/coeuvre/orgs","repos_url":"https://api.github.com/users/coeuvre/repos","events_url":"https://api.github.com/users/coeuvre/events{/privacy}","received_events_url":"https://api.github.com/users/coeuvre/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2023-06-13T09:30:43Z","label":{"name":"P3","color":"fbca04"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/bazelbuild/bazel/issues/comments/1590135611","html_url":"https://github.com/bazelbuild/bazel/issues/18643#issuecomment-1590135611","issue_url":"https://api.github.com/repos/bazelbuild/bazel/issues/18643","id":1590135611,"node_id":"IC_kwDOATz7jc5ex4s7","user":{"login":"tbaing","id":117954304,"node_id":"U_kgDOBwfXAA","avatar_url":"https://avatars.githubusercontent.com/u/117954304?v=4","gravatar_id":"","url":"https://api.github.com/users/tbaing","html_url":"https://github.com/tbaing","followers_url":"https://api.github.com/users/tbaing/followers","following_url":"https://api.github.com/users/tbaing/following{/other_user}","gists_url":"https://api.github.com/users/tbaing/gists{/gist_id}","starred_url":"https://api.github.com/users/tbaing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tbaing/subscriptions","organizations_url":"https://api.github.com/users/tbaing/orgs","repos_url":"https://api.github.com/users/tbaing/repos","events_url":"https://api.github.com/users/tbaing/events{/privacy}","received_events_url":"https://api.github.com/users/tbaing/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-13T22:25:29Z","updated_at":"2023-06-13T22:25:29Z","body":"Our exec logs turn out to be ~120GB (and ~150GB once run through the parser) so we'd appreciate anything that can significantly reduce the amount of output while still letting us answer questions about which actions needed a rebuild (rather than being reusable from cache) and which dependencies drove that need.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/bazelbuild/bazel/issues/comments/1590135611/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"tbaing","id":117954304,"node_id":"U_kgDOBwfXAA","avatar_url":"https://avatars.githubusercontent.com/u/117954304?v=4","gravatar_id":"","url":"https://api.github.com/users/tbaing","html_url":"https://github.com/tbaing","followers_url":"https://api.github.com/users/tbaing/followers","following_url":"https://api.github.com/users/tbaing/following{/other_user}","gists_url":"https://api.github.com/users/tbaing/gists{/gist_id}","starred_url":"https://api.github.com/users/tbaing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tbaing/subscriptions","organizations_url":"https://api.github.com/users/tbaing/orgs","repos_url":"https://api.github.com/users/tbaing/repos","events_url":"https://api.github.com/users/tbaing/events{/privacy}","received_events_url":"https://api.github.com/users/tbaing/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/bazelbuild/bazel/issues/comments/1590626517","html_url":"https://github.com/bazelbuild/bazel/issues/18643#issuecomment-1590626517","issue_url":"https://api.github.com/repos/bazelbuild/bazel/issues/18643","id":1590626517,"node_id":"IC_kwDOATz7jc5ezwjV","user":{"login":"lberki","id":3524818,"node_id":"MDQ6VXNlcjM1MjQ4MTg=","avatar_url":"https://avatars.githubusercontent.com/u/3524818?v=4","gravatar_id":"","url":"https://api.github.com/users/lberki","html_url":"https://github.com/lberki","followers_url":"https://api.github.com/users/lberki/followers","following_url":"https://api.github.com/users/lberki/following{/other_user}","gists_url":"https://api.github.com/users/lberki/gists{/gist_id}","starred_url":"https://api.github.com/users/lberki/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lberki/subscriptions","organizations_url":"https://api.github.com/users/lberki/orgs","repos_url":"https://api.github.com/users/lberki/repos","events_url":"https://api.github.com/users/lberki/events{/privacy}","received_events_url":"https://api.github.com/users/lberki/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-14T07:26:10Z","updated_at":"2023-06-14T07:26:10Z","body":"cc @ramymedhat","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/bazelbuild/bazel/issues/comments/1590626517/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"lberki","id":3524818,"node_id":"MDQ6VXNlcjM1MjQ4MTg=","avatar_url":"https://avatars.githubusercontent.com/u/3524818?v=4","gravatar_id":"","url":"https://api.github.com/users/lberki","html_url":"https://github.com/lberki","followers_url":"https://api.github.com/users/lberki/followers","following_url":"https://api.github.com/users/lberki/following{/other_user}","gists_url":"https://api.github.com/users/lberki/gists{/gist_id}","starred_url":"https://api.github.com/users/lberki/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lberki/subscriptions","organizations_url":"https://api.github.com/users/lberki/orgs","repos_url":"https://api.github.com/users/lberki/repos","events_url":"https://api.github.com/users/lberki/events{/privacy}","received_events_url":"https://api.github.com/users/lberki/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":9524648285,"node_id":"MEE_lADOATz7jc5od0IzzwAAAAI3tpld","url":"https://api.github.com/repos/bazelbuild/bazel/issues/events/9524648285","actor":{"login":"ramymedhat","id":762232,"node_id":"MDQ6VXNlcjc2MjIzMg==","avatar_url":"https://avatars.githubusercontent.com/u/762232?v=4","gravatar_id":"","url":"https://api.github.com/users/ramymedhat","html_url":"https://github.com/ramymedhat","followers_url":"https://api.github.com/users/ramymedhat/followers","following_url":"https://api.github.com/users/ramymedhat/following{/other_user}","gists_url":"https://api.github.com/users/ramymedhat/gists{/gist_id}","starred_url":"https://api.github.com/users/ramymedhat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ramymedhat/subscriptions","organizations_url":"https://api.github.com/users/ramymedhat/orgs","repos_url":"https://api.github.com/users/ramymedhat/repos","events_url":"https://api.github.com/users/ramymedhat/events{/privacy}","received_events_url":"https://api.github.com/users/ramymedhat/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-06-14T07:26:10Z","performed_via_github_app":null},{"id":9524648295,"node_id":"SE_lADOATz7jc5od0IzzwAAAAI3tpln","url":"https://api.github.com/repos/bazelbuild/bazel/issues/events/9524648295","actor":{"login":"ramymedhat","id":762232,"node_id":"MDQ6VXNlcjc2MjIzMg==","avatar_url":"https://avatars.githubusercontent.com/u/762232?v=4","gravatar_id":"","url":"https://api.github.com/users/ramymedhat","html_url":"https://github.com/ramymedhat","followers_url":"https://api.github.com/users/ramymedhat/followers","following_url":"https://api.github.com/users/ramymedhat/following{/other_user}","gists_url":"https://api.github.com/users/ramymedhat/gists{/gist_id}","starred_url":"https://api.github.com/users/ramymedhat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ramymedhat/subscriptions","organizations_url":"https://api.github.com/users/ramymedhat/orgs","repos_url":"https://api.github.com/users/ramymedhat/repos","events_url":"https://api.github.com/users/ramymedhat/events{/privacy}","received_events_url":"https://api.github.com/users/ramymedhat/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-06-14T07:26:10Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/bazelbuild/bazel/issues/comments/1598725871","html_url":"https://github.com/bazelbuild/bazel/issues/18643#issuecomment-1598725871","issue_url":"https://api.github.com/repos/bazelbuild/bazel/issues/18643","id":1598725871,"node_id":"IC_kwDOATz7jc5fSp7v","user":{"login":"meisterT","id":418721,"node_id":"MDQ6VXNlcjQxODcyMQ==","avatar_url":"https://avatars.githubusercontent.com/u/418721?v=4","gravatar_id":"","url":"https://api.github.com/users/meisterT","html_url":"https://github.com/meisterT","followers_url":"https://api.github.com/users/meisterT/followers","following_url":"https://api.github.com/users/meisterT/following{/other_user}","gists_url":"https://api.github.com/users/meisterT/gists{/gist_id}","starred_url":"https://api.github.com/users/meisterT/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/meisterT/subscriptions","organizations_url":"https://api.github.com/users/meisterT/orgs","repos_url":"https://api.github.com/users/meisterT/repos","events_url":"https://api.github.com/users/meisterT/events{/privacy}","received_events_url":"https://api.github.com/users/meisterT/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-06-20T13:00:25Z","updated_at":"2023-10-20T14:09:41Z","body":"Ok, I did look into this a bit and found some issues and some avenues.\r\n\r\n### Reducing the size\r\n\r\nThere is is a couple things we could do to reduce the size of the output:\r\n- use compression, zstd has proven most useful a couple of times both because of low CPU cost and good compression rates\r\n- use an indexed format for artifacts instead of listing each artifact in full where it appears as input or output\r\n- instead of listing inputs as a list, include the nested set structure, again indexed; this is non-trivial and would incur additional CPU cost, so I would like to avoid that.\r\n- leaner proto with less fields populated (removing command lines, listed outputs, textual status, progress message)\r\n\r\nI tried zstd compression outside of Bazel (but this can easily be done within Bazel as well if we decide this is the way to go) and also did some dirty hacks to understand the benefits from artifact indexing and a leaner proto.\r\n\r\n#### large build:\r\n\r\n| what  | without compression | zstd compressed |\r\n| ------------- | ------------- |  ------------- |\r\n| before | 99GB  | 20GB |\r\n| artifact indexing | 5.1GB | 610MB |\r\n| artifact indexing plus lean fields | 2.3GB | 450MB |\r\n\r\n#### medium build:\r\n\r\n| what  | without compression | zstd compressed |\r\n| ------------- | ------------- |  ------------- |\r\n| before | 1.3GB  | 65MB |\r\n| artifact indexing | 217MB | 14MB |\r\n| artifact indexing plus lean fields | 47MB | 9MB |\r\n\r\nThe path indexing contains the **exact** same information as before, but needs to be re-constructed to compare. The lean format does leave out information but probably most of these are not relevant, one exception is command lines where I would store one high level hash. You can still see that the command line has changed and you can reconstruct it, e.g. using `aquery`. A tool could do this, see more below.\r\n\r\n### Performance overhead\r\n\r\nI noticed that action execution was quite a bit slower with the execution log turned on (regardless of which variant). I added more profiling to the JSON trace profile to better understand it (and will send a PR to add this permanently). For the large build from above, the with the exec log it took ~75mins, without ~7mins.\r\n\r\nI think we should move to a producer / consumer pattern where we put spawns to be processed in a queue and work on writing the file in a separate thread. We have to see how much overhead this pattern is memory-wise.\r\n\r\nI am not sure whether that is enough to reduce the overhead into acceptable levels.\r\n\r\n### Different formats\r\n\r\nWe should use the opportunity to clean up the different logging options anyway. Currently we have:\r\n\r\n- `--experimental_execution_log_file`: “unordered” spawn protos\r\n- `--execution_log_binary_file`: First writes the file from above to `/tmp` and then parses it again and then sorts it in stable order which is CPU and memory intensive (e.g. see #6807). In my opinion, this is nothing that should live in Bazel and should be removed.\r\n- `--execution_log_json_file`: Same as `--execution_log_binary_file`, should also go away at least in the current form with sorting. @aherrmann mentions in #12770 that the JSON format has the advantage of using `jq` and being human readable. So, we might want to keep the option to output both binary and JSON around in some form.\r\n- `--experimental_execution_log_spawn_metrics`: Adds spawn metrics to the profile. If we add an option to produce a leaner exec log as mentioned above, we could consider making this option go away and write it always unless the lean log format is requested.\r\n\r\nPerhaps it would also make sense to add an option to only write the exec log for specific actions (basically filtering on mnemonics and targets, see also #12075) and for the other actions only include high-level information? This would not only help addressing size issues but also performance concerns.\r\n\r\n### How to compare protos\r\n\r\nFor large exec logs, a tool to compare them is essential. @coeuvre created https://github.com/coeuvre/bazel-find-non-deterministic-actions - it helps finding deterministic actions, but is built on top of the JSON output. The tool needs to be changed to support the lean proto format.\r\n\r\nThen we could also let the tool spit out other helpful commands like `bazel aquery` for further debugging.\r\n\r\n### Related issues\r\n\r\n- https://github.com/bazelbuild/bazel/issues/16043: Include execution cache hit ratios\r\n- https://github.com/bazelbuild/bazel/issues/12960: View local cache hits and compare against remote cache hits\r\n- https://github.com/bazelbuild/bazel/issues/12770: documentation is stale\r\n- https://github.com/bazelbuild/bazel/issues/12075: FR to add filtering\r\n- https://github.com/bazelbuild/bazel/issues/6807: stable sorting is expensive\r\n- https://github.com/bazelbuild/bazel/issues/15155: stable sorting is buggy\r\n- https://github.com/bazelbuild/bazel/issues/16741: usability concerns\r\n- https://github.com/bazelbuild/bazel/issues/13269: FR to add control over how much data is in the exec log\r\n- https://github.com/bazelbuild/bazel/issues/8718: FR to expand param files\r\n\r\n### Next steps\r\n\r\nI am aware that I am abusing this feature request a little bit to do one step back and understand the bigger picture. I want to give people some time to voice their opinions here before proceeding, so please let me know what you think.\r\n\r\n\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/bazelbuild/bazel/issues/comments/1598725871/reactions","total_count":11,"+1":6,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":5,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"meisterT","id":418721,"node_id":"MDQ6VXNlcjQxODcyMQ==","avatar_url":"https://avatars.githubusercontent.com/u/418721?v=4","gravatar_id":"","url":"https://api.github.com/users/meisterT","html_url":"https://github.com/meisterT","followers_url":"https://api.github.com/users/meisterT/followers","following_url":"https://api.github.com/users/meisterT/following{/other_user}","gists_url":"https://api.github.com/users/meisterT/gists{/gist_id}","starred_url":"https://api.github.com/users/meisterT/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/meisterT/subscriptions","organizations_url":"https://api.github.com/users/meisterT/orgs","repos_url":"https://api.github.com/users/meisterT/repos","events_url":"https://api.github.com/users/meisterT/events{/privacy}","received_events_url":"https://api.github.com/users/meisterT/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":9579384732,"node_id":"MEE_lADOATz7jc5od0IzzwAAAAI6-c-c","url":"https://api.github.com/repos/bazelbuild/bazel/issues/events/9579384732","actor":{"login":"aherrmann","id":732652,"node_id":"MDQ6VXNlcjczMjY1Mg==","avatar_url":"https://avatars.githubusercontent.com/u/732652?v=4","gravatar_id":"","url":"https://api.github.com/users/aherrmann","html_url":"https://github.com/aherrmann","followers_url":"https://api.github.com/users/aherrmann/followers","following_url":"https://api.github.com/users/aherrmann/following{/other_user}","gists_url":"https://api.github.com/users/aherrmann/gists{/gist_id}","starred_url":"https://api.github.com/users/aherrmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aherrmann/subscriptions","organizations_url":"https://api.github.com/users/aherrmann/orgs","repos_url":"https://api.github.com/users/aherrmann/repos","events_url":"https://api.github.com/users/aherrmann/events{/privacy}","received_events_url":"https://api.github.com/users/aherrmann/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-06-20T13:00:26Z","performed_via_github_app":null},{"id":9579384746,"node_id":"SE_lADOATz7jc5od0IzzwAAAAI6-c-q","url":"https://api.github.com/repos/bazelbuild/bazel/issues/events/9579384746","actor":{"login":"aherrmann","id":732652,"node_id":"MDQ6VXNlcjczMjY1Mg==","avatar_url":"https://avatars.githubusercontent.com/u/732652?v=4","gravatar_id":"","url":"https://api.github.com/users/aherrmann","html_url":"https://github.com/aherrmann","followers_url":"https://api.github.com/users/aherrmann/followers","following_url":"https://api.github.com/users/aherrmann/following{/other_user}","gists_url":"https://api.github.com/users/aherrmann/gists{/gist_id}","starred_url":"https://api.github.com/users/aherrmann/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aherrmann/subscriptions","organizations_url":"https://api.github.com/users/aherrmann/orgs","repos_url":"https://api.github.com/users/aherrmann/repos","events_url":"https://api.github.com/users/aherrmann/events{/privacy}","received_events_url":"https://api.github.com/users/aherrmann/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-06-20T13:00:26Z","performed_via_github_app":null},{"id":9579384766,"node_id":"MEE_lADOATz7jc5od0IzzwAAAAI6-c--","url":"https://api.github.com/repos/bazelbuild/bazel/issues/events/9579384766","actor":{"login":"coeuvre","id":5947531,"node_id":"MDQ6VXNlcjU5NDc1MzE=","avatar_url":"https://avatars.githubusercontent.com/u/5947531?v=4","gravatar_id":"","url":"https://api.github.com/users/coeuvre","html_url":"https://github.com/coeuvre","followers_url":"https://api.github.com/users/coeuvre/followers","following_url":"https://api.github.com/users/coeuvre/following{/other_user}","gists_url":"https://api.github.com/users/coeuvre/gists{/gist_id}","starred_url":"https://api.github.com/users/coeuvre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coeuvre/subscriptions","organizations_url":"https://api.github.com/users/coeuvre/orgs","repos_url":"https://api.github.com/users/coeuvre/repos","events_url":"https://api.github.com/users/coeuvre/events{/privacy}","received_events_url":"https://api.github.com/users/coeuvre/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-06-20T13:00:26Z","performed_via_github_app":null},{"id":9579384782,"node_id":"SE_lADOATz7jc5od0IzzwAAAAI6-c_O","url":"https://api.github.com/repos/bazelbuild/bazel/issues/events/9579384782","actor":{"login":"coeuvre","id":5947531,"node_id":"MDQ6VXNlcjU5NDc1MzE=","avatar_url":"https://avatars.githubusercontent.com/u/5947531?v=4","gravatar_id":"","url":"https://api.github.com/users/coeuvre","html_url":"https://github.com/coeuvre","followers_url":"https://api.github.com/users/coeuvre/followers","following_url":"https://api.github.com/users/coeuvre/following{/other_user}","gists_url":"https://api.github.com/users/coeuvre/gists{/gist_id}","starred_url":"https://api.github.com/users/coeuvre/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/coeuvre/subscriptions","organizations_url":"https://api.github.com/users/coeuvre/orgs","repos_url":"https://api.github.com/users/coeuvre/repos","events_url":"https://api.github.com/users/coeuvre/events{/privacy}","received_events_url":"https://api.github.com/users/coeuvre/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-06-20T13:00:26Z","performed_via_github_app":null},{"id":9591122062,"node_id":"REFE_lADOATz7jc5od0IzzwAAAAI7rOiO","url":"https://api.github.com/repos/bazelbuild/bazel/issues/events/9591122062","actor":{"login":"copybara-service[bot]","id":56741989,"node_id":"MDM6Qm90NTY3NDE5ODk=","avatar_url":"https://avatars.githubusercontent.com/in/44061?v=4","gravatar_id":"","url":"https://api.github.com/users/copybara-service%5Bbot%5D","html_url":"https://github.com/apps/copybara-service","followers_url":"https://api.github.com/users/copybara-service%5Bbot%5D/followers","following_url":"https://api.github.com/users/copybara-service%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/copybara-service%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/copybara-service%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/copybara-service%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/copybara-service%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/copybara-service%5Bbot%5D/repos","events_url":"https://api.github.com/users/copybara-service%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/copybara-service%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"c2e25ea70376b5c5dc7e304eb986163c332621d5","commit_url":"https://api.github.com/repos/bazelbuild/bazel/commits/c2e25ea70376b5c5dc7e304eb986163c332621d5","created_at":"2023-06-21T09:46:14Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/bazelbuild/bazel/issues/comments/1672037054","html_url":"https://github.com/bazelbuild/bazel/issues/18643#issuecomment-1672037054","issue_url":"https://api.github.com/repos/bazelbuild/bazel/issues/18643","id":1672037054,"node_id":"IC_kwDOATz7jc5jqUK-","user":{"login":"sheldonneuberger-sc","id":43076169,"node_id":"MDQ6VXNlcjQzMDc2MTY5","avatar_url":"https://avatars.githubusercontent.com/u/43076169?v=4","gravatar_id":"","url":"https://api.github.com/users/sheldonneuberger-sc","html_url":"https://github.com/sheldonneuberger-sc","followers_url":"https://api.github.com/users/sheldonneuberger-sc/followers","following_url":"https://api.github.com/users/sheldonneuberger-sc/following{/other_user}","gists_url":"https://api.github.com/users/sheldonneuberger-sc/gists{/gist_id}","starred_url":"https://api.github.com/users/sheldonneuberger-sc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sheldonneuberger-sc/subscriptions","organizations_url":"https://api.github.com/users/sheldonneuberger-sc/orgs","repos_url":"https://api.github.com/users/sheldonneuberger-sc/repos","events_url":"https://api.github.com/users/sheldonneuberger-sc/events{/privacy}","received_events_url":"https://api.github.com/users/sheldonneuberger-sc/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-09T19:38:23Z","updated_at":"2023-08-09T19:38:23Z","body":"@meisterT thanks for that detailed outline, it aligns with what I see too: massive exec logs (50GB+), and the build is slower if exec log is on. I'd prefer to have exec logging always on, but this makes it unworkable.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/bazelbuild/bazel/issues/comments/1672037054/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sheldonneuberger-sc","id":43076169,"node_id":"MDQ6VXNlcjQzMDc2MTY5","avatar_url":"https://avatars.githubusercontent.com/u/43076169?v=4","gravatar_id":"","url":"https://api.github.com/users/sheldonneuberger-sc","html_url":"https://github.com/sheldonneuberger-sc","followers_url":"https://api.github.com/users/sheldonneuberger-sc/followers","following_url":"https://api.github.com/users/sheldonneuberger-sc/following{/other_user}","gists_url":"https://api.github.com/users/sheldonneuberger-sc/gists{/gist_id}","starred_url":"https://api.github.com/users/sheldonneuberger-sc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sheldonneuberger-sc/subscriptions","organizations_url":"https://api.github.com/users/sheldonneuberger-sc/orgs","repos_url":"https://api.github.com/users/sheldonneuberger-sc/repos","events_url":"https://api.github.com/users/sheldonneuberger-sc/events{/privacy}","received_events_url":"https://api.github.com/users/sheldonneuberger-sc/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":10051489395,"node_id":"MEE_lADOATz7jc5od0IzzwAAAAJXHY5z","url":"https://api.github.com/repos/bazelbuild/bazel/issues/events/10051489395","actor":{"login":"meisterT","id":418721,"node_id":"MDQ6VXNlcjQxODcyMQ==","avatar_url":"https://avatars.githubusercontent.com/u/418721?v=4","gravatar_id":"","url":"https://api.github.com/users/meisterT","html_url":"https://github.com/meisterT","followers_url":"https://api.github.com/users/meisterT/followers","following_url":"https://api.github.com/users/meisterT/following{/other_user}","gists_url":"https://api.github.com/users/meisterT/gists{/gist_id}","starred_url":"https://api.github.com/users/meisterT/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/meisterT/subscriptions","organizations_url":"https://api.github.com/users/meisterT/orgs","repos_url":"https://api.github.com/users/meisterT/repos","events_url":"https://api.github.com/users/meisterT/events{/privacy}","received_events_url":"https://api.github.com/users/meisterT/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-08-09T19:38:24Z","performed_via_github_app":null},{"id":10051489408,"node_id":"SE_lADOATz7jc5od0IzzwAAAAJXHY6A","url":"https://api.github.com/repos/bazelbuild/bazel/issues/events/10051489408","actor":{"login":"meisterT","id":418721,"node_id":"MDQ6VXNlcjQxODcyMQ==","avatar_url":"https://avatars.githubusercontent.com/u/418721?v=4","gravatar_id":"","url":"https://api.github.com/users/meisterT","html_url":"https://github.com/meisterT","followers_url":"https://api.github.com/users/meisterT/followers","following_url":"https://api.github.com/users/meisterT/following{/other_user}","gists_url":"https://api.github.com/users/meisterT/gists{/gist_id}","starred_url":"https://api.github.com/users/meisterT/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/meisterT/subscriptions","organizations_url":"https://api.github.com/users/meisterT/orgs","repos_url":"https://api.github.com/users/meisterT/repos","events_url":"https://api.github.com/users/meisterT/events{/privacy}","received_events_url":"https://api.github.com/users/meisterT/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-08-09T19:38:24Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/bazelbuild/bazel/issues/comments/1672050549","html_url":"https://github.com/bazelbuild/bazel/issues/18643#issuecomment-1672050549","issue_url":"https://api.github.com/repos/bazelbuild/bazel/issues/18643","id":1672050549,"node_id":"IC_kwDOATz7jc5jqXd1","user":{"login":"chancilasnap","id":140216186,"node_id":"U_kgDOCFuHeg","avatar_url":"https://avatars.githubusercontent.com/u/140216186?v=4","gravatar_id":"","url":"https://api.github.com/users/chancilasnap","html_url":"https://github.com/chancilasnap","followers_url":"https://api.github.com/users/chancilasnap/followers","following_url":"https://api.github.com/users/chancilasnap/following{/other_user}","gists_url":"https://api.github.com/users/chancilasnap/gists{/gist_id}","starred_url":"https://api.github.com/users/chancilasnap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chancilasnap/subscriptions","organizations_url":"https://api.github.com/users/chancilasnap/orgs","repos_url":"https://api.github.com/users/chancilasnap/repos","events_url":"https://api.github.com/users/chancilasnap/events{/privacy}","received_events_url":"https://api.github.com/users/chancilasnap/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-08-09T19:49:13Z","updated_at":"2023-08-09T19:49:13Z","body":"we would prefer this data be visible through BES somehow, be it as a cas artifact (like the profile) or via special messages...the BES also prints actions (generally on failure only) but it can emit all actions in a slightly different format...it's annoying the BES actions and exec log spawns don't match since exec log seems richer...\r\n\r\n> I noticed that action execution was quite a bit slower with the execution log turned on (regardless of which variant). I added more profiling to the JSON trace profile to better understand it (and will send a PR to add this permanently). For the large build from above, the with the exec log it took ~75mins, without ~7mins.\r\n> \r\n> I think we should move to a producer / consumer pattern where we put spawns to be processed in a queue and work on writing the file in a separate thread. We have to see how much overhead this pattern is memory-wise.\r\n> \r\n> I am not sure whether that is enough to reduce the overhead into acceptable levels.\r\n\r\nare execlogs written in the threads running the actions? seems like that would have huge contention issues possibly","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/bazelbuild/bazel/issues/comments/1672050549/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"chancilasnap","id":140216186,"node_id":"U_kgDOCFuHeg","avatar_url":"https://avatars.githubusercontent.com/u/140216186?v=4","gravatar_id":"","url":"https://api.github.com/users/chancilasnap","html_url":"https://github.com/chancilasnap","followers_url":"https://api.github.com/users/chancilasnap/followers","following_url":"https://api.github.com/users/chancilasnap/following{/other_user}","gists_url":"https://api.github.com/users/chancilasnap/gists{/gist_id}","starred_url":"https://api.github.com/users/chancilasnap/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chancilasnap/subscriptions","organizations_url":"https://api.github.com/users/chancilasnap/orgs","repos_url":"https://api.github.com/users/chancilasnap/repos","events_url":"https://api.github.com/users/chancilasnap/events{/privacy}","received_events_url":"https://api.github.com/users/chancilasnap/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/bazelbuild/bazel/issues/comments/1703531953","html_url":"https://github.com/bazelbuild/bazel/issues/18643#issuecomment-1703531953","issue_url":"https://api.github.com/repos/bazelbuild/bazel/issues/18643","id":1703531953,"node_id":"IC_kwDOATz7jc5lidWx","user":{"login":"tbaing","id":117954304,"node_id":"U_kgDOBwfXAA","avatar_url":"https://avatars.githubusercontent.com/u/117954304?v=4","gravatar_id":"","url":"https://api.github.com/users/tbaing","html_url":"https://github.com/tbaing","followers_url":"https://api.github.com/users/tbaing/followers","following_url":"https://api.github.com/users/tbaing/following{/other_user}","gists_url":"https://api.github.com/users/tbaing/gists{/gist_id}","starred_url":"https://api.github.com/users/tbaing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tbaing/subscriptions","organizations_url":"https://api.github.com/users/tbaing/orgs","repos_url":"https://api.github.com/users/tbaing/repos","events_url":"https://api.github.com/users/tbaing/events{/privacy}","received_events_url":"https://api.github.com/users/tbaing/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-09-01T23:57:40Z","updated_at":"2023-09-01T23:57:40Z","body":"@meisterT +1 on the thanks for the detailed analysis.\r\n\r\n### Reducing the size\r\n\r\nFor our use case, most of the content is inputs and actual_outputs, so artifact indexing seems most promising for our needs.\r\n\r\nLeaner fields could also be useful, but we'd see the most benefit if you focus on inputs/outputs vs. per-action outputs. Hashing the command line and env vars could save some space, but reconstructing those things may be somewhat annoying (the command line requires you to checkout exactly that source code to reconstruct via aquery) or hard (env vars on a CI bot that's been deleted are going to take some non-trivial work to recreate, probably more than they're worth). For my $0.02 I'd just leave them alone. And I find that many of those one-per-action lines are useful for understanding the context (\"did we rebuild this action despite no changed inputs because it's `cacheable: true`?\"), so for always-on usage I'd hesitate to cut those things. Whereas I'd happily drop the `hash_function_name` and `size_bytes` from inputs/outputs. Set the default hash function at the top of the file and only list it per artifact if it doesn't match, and I don't care about size because all I really care about is \"did its hash change between invocations?\" Maybe have a flag to control whether to cut the per-action content so people who find it useful can leave it on while cutting the per-artifact lines?\r\n\r\nCompression SGTM.\r\n\r\n### Performance overhead\r\n\r\nAnything to improve the overhead of creating this content is welcome. Having less content to create, and compressing that content, might help if the bottleneck is the writes to the disk.\r\n\r\n### Different formats\r\n\r\nYour observation that we could have a single (efficient to create and store) output format that then gets post-processed into other formats (including stable ones) - whether for comparison against another log or just for reading to understand what happened in the current execution - seems right to me.\r\n\r\n### How to compare protos\r\n\r\nI agree that a tool is essential. The one you referenced is a good start, but would benefit from enhancements such as analyzing which changed inputs are outputs from another action in the current run. An action for which all changed inputs are outputs from other actions is far less interesting when you're trying to understand why you rebuilt something you didn't expect to, so the tool would benefit from the ability to 1) focus on the non-transitive changes, and 2) walk easily down through the transitive changes to find interesting non-transitive changes. The ability to filter in/out branches of that graph would also be helpful; I could imagine saying \"I want to see all non-transitive changes, but not the ones that chain up into dependency B, or only the ones that chain up in to A and C.\" I could also imagine that it might be valuable to understand cases where a deeply nested dependency was rebuilt due to changed inputs but produced unmodified output and so didn't contribute to rebuilds of artifacts higher in the dependency graph, and that the tool might help understand that there are multiple distinct subsets of the graph.\r\n\r\nI'm not sure I agree that the tool shouldn't work from the JSON content. Having the analysis tool highlight aspects of the content in human-readable formats, and then being able to go find the raw content in human-readable format, seems like a better workflow than having the tool be the only way to interact with the content. The tool should handle all the variations in the data model (no matter how lean/rich the user chooses to capture), but JSON seems like an OK format for the reasons you touched on in your \"Different formats\" section.\r\n\r\nIn analyzing execution logs this week, I've found some value in having a file per action, for easy comparison or examination of that particular action vs. having to diff the entire file or open it and search down to the specific part I'm interested in. It probably wouldn't matter with a 5MB file, it was annoying but not worse with a 1GB file, but it's high-friction with our full 100+GB files. And doing that could help with the memory usage required for sorting (my experience was that I needed the JVM to have an Xmx around 100GB for a 100GB sorted exec log due I believe to the sort at the end) since sorting would be just a matter of reading an index to determine how to concatenate the individual files rather than something that has to happen in memory.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/bazelbuild/bazel/issues/comments/1703531953/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"tbaing","id":117954304,"node_id":"U_kgDOBwfXAA","avatar_url":"https://avatars.githubusercontent.com/u/117954304?v=4","gravatar_id":"","url":"https://api.github.com/users/tbaing","html_url":"https://github.com/tbaing","followers_url":"https://api.github.com/users/tbaing/followers","following_url":"https://api.github.com/users/tbaing/following{/other_user}","gists_url":"https://api.github.com/users/tbaing/gists{/gist_id}","starred_url":"https://api.github.com/users/tbaing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tbaing/subscriptions","organizations_url":"https://api.github.com/users/tbaing/orgs","repos_url":"https://api.github.com/users/tbaing/repos","events_url":"https://api.github.com/users/tbaing/events{/privacy}","received_events_url":"https://api.github.com/users/tbaing/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":10261782172,"node_id":"MEE_lADOATz7jc5od0IzzwAAAAJjpl6c","url":"https://api.github.com/repos/bazelbuild/bazel/issues/events/10261782172","actor":{"login":"meisterT","id":418721,"node_id":"MDQ6VXNlcjQxODcyMQ==","avatar_url":"https://avatars.githubusercontent.com/u/418721?v=4","gravatar_id":"","url":"https://api.github.com/users/meisterT","html_url":"https://github.com/meisterT","followers_url":"https://api.github.com/users/meisterT/followers","following_url":"https://api.github.com/users/meisterT/following{/other_user}","gists_url":"https://api.github.com/users/meisterT/gists{/gist_id}","starred_url":"https://api.github.com/users/meisterT/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/meisterT/subscriptions","organizations_url":"https://api.github.com/users/meisterT/orgs","repos_url":"https://api.github.com/users/meisterT/repos","events_url":"https://api.github.com/users/meisterT/events{/privacy}","received_events_url":"https://api.github.com/users/meisterT/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-09-01T23:57:40Z","performed_via_github_app":null},{"id":10261782178,"node_id":"SE_lADOATz7jc5od0IzzwAAAAJjpl6i","url":"https://api.github.com/repos/bazelbuild/bazel/issues/events/10261782178","actor":{"login":"meisterT","id":418721,"node_id":"MDQ6VXNlcjQxODcyMQ==","avatar_url":"https://avatars.githubusercontent.com/u/418721?v=4","gravatar_id":"","url":"https://api.github.com/users/meisterT","html_url":"https://github.com/meisterT","followers_url":"https://api.github.com/users/meisterT/followers","following_url":"https://api.github.com/users/meisterT/following{/other_user}","gists_url":"https://api.github.com/users/meisterT/gists{/gist_id}","starred_url":"https://api.github.com/users/meisterT/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/meisterT/subscriptions","organizations_url":"https://api.github.com/users/meisterT/orgs","repos_url":"https://api.github.com/users/meisterT/repos","events_url":"https://api.github.com/users/meisterT/events{/privacy}","received_events_url":"https://api.github.com/users/meisterT/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-09-01T23:57:40Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/bazelbuild/bazel/issues/comments/1703608238","html_url":"https://github.com/bazelbuild/bazel/issues/18643#issuecomment-1703608238","issue_url":"https://api.github.com/repos/bazelbuild/bazel/issues/18643","id":1703608238,"node_id":"IC_kwDOATz7jc5liv-u","user":{"login":"minor-fixes","id":8988434,"node_id":"MDQ6VXNlcjg5ODg0MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/8988434?v=4","gravatar_id":"","url":"https://api.github.com/users/minor-fixes","html_url":"https://github.com/minor-fixes","followers_url":"https://api.github.com/users/minor-fixes/followers","following_url":"https://api.github.com/users/minor-fixes/following{/other_user}","gists_url":"https://api.github.com/users/minor-fixes/gists{/gist_id}","starred_url":"https://api.github.com/users/minor-fixes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/minor-fixes/subscriptions","organizations_url":"https://api.github.com/users/minor-fixes/orgs","repos_url":"https://api.github.com/users/minor-fixes/repos","events_url":"https://api.github.com/users/minor-fixes/events{/privacy}","received_events_url":"https://api.github.com/users/minor-fixes/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-09-02T00:52:19Z","updated_at":"2023-09-02T00:52:19Z","body":"+1 on data available through BES, or streaming through some remote protocol.\r\n\r\nThere's already a good deal of challenge around getting the bazel client to perform well (in the face of memory issues, startup times, dependency fetching, etc.) - only offering this info via client-generated local files could very well mean that users need to supply:\r\n* mechanisms to unconditionally dump these files (\"always on\" in the FR) without filling up local disk, etc.\r\n* mechanisms to exfiltrate these files from automated build machines, as well as user machines\r\n* tuning around automated bazel runs (if running this feature unconditionally incurs a CPU/build time penalty), which are already challenging (see above)\r\n\r\nThe various streaming protocols that bazel supports (BES, RBE) have been a godsend for doing this sort of analysis/reporting across builds - I'm sure that if this info were available in the build event stream (maybe with verbosity flags/options as needed) then the community would write the backends to store/aggregate the data appropriately.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/bazelbuild/bazel/issues/comments/1703608238/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"minor-fixes","id":8988434,"node_id":"MDQ6VXNlcjg5ODg0MzQ=","avatar_url":"https://avatars.githubusercontent.com/u/8988434?v=4","gravatar_id":"","url":"https://api.github.com/users/minor-fixes","html_url":"https://github.com/minor-fixes","followers_url":"https://api.github.com/users/minor-fixes/followers","following_url":"https://api.github.com/users/minor-fixes/following{/other_user}","gists_url":"https://api.github.com/users/minor-fixes/gists{/gist_id}","starred_url":"https://api.github.com/users/minor-fixes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/minor-fixes/subscriptions","organizations_url":"https://api.github.com/users/minor-fixes/orgs","repos_url":"https://api.github.com/users/minor-fixes/repos","events_url":"https://api.github.com/users/minor-fixes/events{/privacy}","received_events_url":"https://api.github.com/users/minor-fixes/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/bazelbuild/bazel/issues/comments/1721758578","html_url":"https://github.com/bazelbuild/bazel/issues/18643#issuecomment-1721758578","issue_url":"https://api.github.com/repos/bazelbuild/bazel/issues/18643","id":1721758578,"node_id":"IC_kwDOATz7jc5mn_Ny","user":{"login":"tbaing","id":117954304,"node_id":"U_kgDOBwfXAA","avatar_url":"https://avatars.githubusercontent.com/u/117954304?v=4","gravatar_id":"","url":"https://api.github.com/users/tbaing","html_url":"https://github.com/tbaing","followers_url":"https://api.github.com/users/tbaing/followers","following_url":"https://api.github.com/users/tbaing/following{/other_user}","gists_url":"https://api.github.com/users/tbaing/gists{/gist_id}","starred_url":"https://api.github.com/users/tbaing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tbaing/subscriptions","organizations_url":"https://api.github.com/users/tbaing/orgs","repos_url":"https://api.github.com/users/tbaing/repos","events_url":"https://api.github.com/users/tbaing/events{/privacy}","received_events_url":"https://api.github.com/users/tbaing/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-09-15T19:44:34Z","updated_at":"2023-09-15T19:44:34Z","body":"While trying to debug what changed between two builds, I discovered something else that makes the current implementation hard to use. When an action is not a cache hit, we get information about the `actual_outputs` produced by the action, including and especially the hashes of each file generate. However, when an action is a cache hit, that content is not provided, and instead there is a `digest` block given. So when diffing two successive runs where the first built the artifact and the second reused that artifact from the cache, we see irrelevant differences because the second run doesn't have this information, which makes it harder to zero in on the actual differences between the files.\r\n\r\nI'm fine with having differences in the `runner` line (`local` vs `remote cache hit`) and the `remote_cache_hit` line because those are easy to grep out or ignore, but the differences in the `actual_outputs` makes it much harder to grab two of these logs and compare them against each other because the differences are in content that we actually want to look at for differences.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/bazelbuild/bazel/issues/comments/1721758578/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"tbaing","id":117954304,"node_id":"U_kgDOBwfXAA","avatar_url":"https://avatars.githubusercontent.com/u/117954304?v=4","gravatar_id":"","url":"https://api.github.com/users/tbaing","html_url":"https://github.com/tbaing","followers_url":"https://api.github.com/users/tbaing/followers","following_url":"https://api.github.com/users/tbaing/following{/other_user}","gists_url":"https://api.github.com/users/tbaing/gists{/gist_id}","starred_url":"https://api.github.com/users/tbaing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tbaing/subscriptions","organizations_url":"https://api.github.com/users/tbaing/orgs","repos_url":"https://api.github.com/users/tbaing/repos","events_url":"https://api.github.com/users/tbaing/events{/privacy}","received_events_url":"https://api.github.com/users/tbaing/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"tjgq","id":4370077,"node_id":"MDQ6VXNlcjQzNzAwNzc=","avatar_url":"https://avatars.githubusercontent.com/u/4370077?v=4","gravatar_id":"","url":"https://api.github.com/users/tjgq","html_url":"https://github.com/tjgq","followers_url":"https://api.github.com/users/tjgq/followers","following_url":"https://api.github.com/users/tjgq/following{/other_user}","gists_url":"https://api.github.com/users/tjgq/gists{/gist_id}","starred_url":"https://api.github.com/users/tjgq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tjgq/subscriptions","organizations_url":"https://api.github.com/users/tjgq/orgs","repos_url":"https://api.github.com/users/tjgq/repos","events_url":"https://api.github.com/users/tjgq/events{/privacy}","received_events_url":"https://api.github.com/users/tjgq/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-09-26T10:18:45Z","updated_at":"2023-09-26T10:18:45Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/bazelbuild/bazel/issues/19628","repository_url":"https://api.github.com/repos/bazelbuild/bazel","labels_url":"https://api.github.com/repos/bazelbuild/bazel/issues/19628/labels{/name}","comments_url":"https://api.github.com/repos/bazelbuild/bazel/issues/19628/comments","events_url":"https://api.github.com/repos/bazelbuild/bazel/issues/19628/events","html_url":"https://github.com/bazelbuild/bazel/issues/19628","id":1912419406,"node_id":"I_kwDOATz7jc5x_TRO","number":19628,"title":"Log filegroups only once in execution_log_json_file and reference them in all the spawns where they are used","user":{"login":"abdulsattar","id":84044,"node_id":"MDQ6VXNlcjg0MDQ0","avatar_url":"https://avatars.githubusercontent.com/u/84044?v=4","gravatar_id":"","url":"https://api.github.com/users/abdulsattar","html_url":"https://github.com/abdulsattar","followers_url":"https://api.github.com/users/abdulsattar/followers","following_url":"https://api.github.com/users/abdulsattar/following{/other_user}","gists_url":"https://api.github.com/users/abdulsattar/gists{/gist_id}","starred_url":"https://api.github.com/users/abdulsattar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/abdulsattar/subscriptions","organizations_url":"https://api.github.com/users/abdulsattar/orgs","repos_url":"https://api.github.com/users/abdulsattar/repos","events_url":"https://api.github.com/users/abdulsattar/events{/privacy}","received_events_url":"https://api.github.com/users/abdulsattar/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":106503261,"node_id":"MDU6TGFiZWwxMDY1MDMyNjE=","url":"https://api.github.com/repos/bazelbuild/bazel/labels/type:%20feature%20request","name":"type: feature request","color":"0052cc","default":false,"description":null},{"id":1020660325,"node_id":"MDU6TGFiZWwxMDIwNjYwMzI1","url":"https://api.github.com/repos/bazelbuild/bazel/labels/team-Performance","name":"team-Performance","color":"f1f442","default":false,"description":"Issues for Performance teams"}],"state":"closed","locked":false,"assignee":{"login":"tjgq","id":4370077,"node_id":"MDQ6VXNlcjQzNzAwNzc=","avatar_url":"https://avatars.githubusercontent.com/u/4370077?v=4","gravatar_id":"","url":"https://api.github.com/users/tjgq","html_url":"https://github.com/tjgq","followers_url":"https://api.github.com/users/tjgq/followers","following_url":"https://api.github.com/users/tjgq/following{/other_user}","gists_url":"https://api.github.com/users/tjgq/gists{/gist_id}","starred_url":"https://api.github.com/users/tjgq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tjgq/subscriptions","organizations_url":"https://api.github.com/users/tjgq/orgs","repos_url":"https://api.github.com/users/tjgq/repos","events_url":"https://api.github.com/users/tjgq/events{/privacy}","received_events_url":"https://api.github.com/users/tjgq/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"tjgq","id":4370077,"node_id":"MDQ6VXNlcjQzNzAwNzc=","avatar_url":"https://avatars.githubusercontent.com/u/4370077?v=4","gravatar_id":"","url":"https://api.github.com/users/tjgq","html_url":"https://github.com/tjgq","followers_url":"https://api.github.com/users/tjgq/followers","following_url":"https://api.github.com/users/tjgq/following{/other_user}","gists_url":"https://api.github.com/users/tjgq/gists{/gist_id}","starred_url":"https://api.github.com/users/tjgq/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tjgq/subscriptions","organizations_url":"https://api.github.com/users/tjgq/orgs","repos_url":"https://api.github.com/users/tjgq/repos","events_url":"https://api.github.com/users/tjgq/events{/privacy}","received_events_url":"https://api.github.com/users/tjgq/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":1,"created_at":"2023-09-25T23:17:09Z","updated_at":"2023-09-26T10:18:45Z","closed_at":"2023-09-26T10:18:44Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":20773773,"node_id":"MDEwOlJlcG9zaXRvcnkyMDc3Mzc3Mw==","name":"bazel","full_name":"bazelbuild/bazel","private":false,"owner":{"login":"bazelbuild","id":11684617,"node_id":"MDEyOk9yZ2FuaXphdGlvbjExNjg0NjE3","avatar_url":"https://avatars.githubusercontent.com/u/11684617?v=4","gravatar_id":"","url":"https://api.github.com/users/bazelbuild","html_url":"https://github.com/bazelbuild","followers_url":"https://api.github.com/users/bazelbuild/followers","following_url":"https://api.github.com/users/bazelbuild/following{/other_user}","gists_url":"https://api.github.com/users/bazelbuild/gists{/gist_id}","starred_url":"https://api.github.com/users/bazelbuild/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bazelbuild/subscriptions","organizations_url":"https://api.github.com/users/bazelbuild/orgs","repos_url":"https://api.github.com/users/bazelbuild/repos","events_url":"https://api.github.com/users/bazelbuild/events{/privacy}","received_events_url":"https://api.github.com/users/bazelbuild/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/bazelbuild/bazel","description":"a fast, scalable, multi-language and extensible build system","fork":false,"url":"https://api.github.com/repos/bazelbuild/bazel","forks_url":"https://api.github.com/repos/bazelbuild/bazel/forks","keys_url":"https://api.github.com/repos/bazelbuild/bazel/keys{/key_id}","collaborators_url":"https://api.github.com/repos/bazelbuild/bazel/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/bazelbuild/bazel/teams","hooks_url":"https://api.github.com/repos/bazelbuild/bazel/hooks","issue_events_url":"https://api.github.com/repos/bazelbuild/bazel/issues/events{/number}","events_url":"https://api.github.com/repos/bazelbuild/bazel/events","assignees_url":"https://api.github.com/repos/bazelbuild/bazel/assignees{/user}","branches_url":"https://api.github.com/repos/bazelbuild/bazel/branches{/branch}","tags_url":"https://api.github.com/repos/bazelbuild/bazel/tags","blobs_url":"https://api.github.com/repos/bazelbuild/bazel/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/bazelbuild/bazel/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/bazelbuild/bazel/git/refs{/sha}","trees_url":"https://api.github.com/repos/bazelbuild/bazel/git/trees{/sha}","statuses_url":"https://api.github.com/repos/bazelbuild/bazel/statuses/{sha}","languages_url":"https://api.github.com/repos/bazelbuild/bazel/languages","stargazers_url":"https://api.github.com/repos/bazelbuild/bazel/stargazers","contributors_url":"https://api.github.com/repos/bazelbuild/bazel/contributors","subscribers_url":"https://api.github.com/repos/bazelbuild/bazel/subscribers","subscription_url":"https://api.github.com/repos/bazelbuild/bazel/subscription","commits_url":"https://api.github.com/repos/bazelbuild/bazel/commits{/sha}","git_commits_url":"https://api.github.com/repos/bazelbuild/bazel/git/commits{/sha}","comments_url":"https://api.github.com/repos/bazelbuild/bazel/comments{/number}","issue_comment_url":"https://api.github.com/repos/bazelbuild/bazel/issues/comments{/number}","contents_url":"https://api.github.com/repos/bazelbuild/bazel/contents/{+path}","compare_url":"https://api.github.com/repos/bazelbuild/bazel/compare/{base}...{head}","merges_url":"https://api.github.com/repos/bazelbuild/bazel/merges","archive_url":"https://api.github.com/repos/bazelbuild/bazel/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/bazelbuild/bazel/downloads","issues_url":"https://api.github.com/repos/bazelbuild/bazel/issues{/number}","pulls_url":"https://api.github.com/repos/bazelbuild/bazel/pulls{/number}","milestones_url":"https://api.github.com/repos/bazelbuild/bazel/milestones{/number}","notifications_url":"https://api.github.com/repos/bazelbuild/bazel/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/bazelbuild/bazel/labels{/name}","releases_url":"https://api.github.com/repos/bazelbuild/bazel/releases{/id}","deployments_url":"https://api.github.com/repos/bazelbuild/bazel/deployments","created_at":"2014-06-12T16:00:38Z","updated_at":"2025-11-10T01:33:52Z","pushed_at":"2025-11-08T01:50:45Z","git_url":"git://github.com/bazelbuild/bazel.git","ssh_url":"git@github.com:bazelbuild/bazel.git","clone_url":"https://github.com/bazelbuild/bazel.git","svn_url":"https://github.com/bazelbuild/bazel","homepage":"https://bazel.build","size":990573,"stargazers_count":24742,"watchers_count":24742,"language":"Java","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":true,"forks_count":4332,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":1832,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["bazel","build","build-system","correct","fast","multi-language","scalable","test"],"visibility":"public","forks":4332,"open_issues":1832,"watchers":24742,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"### Description of the feature request:\n\n\nfilegroups are an easy way of grouping files together and using them across several spawns. If a filegroup is used across several spawns (especially if those are executed as persistent workers thousands of times), it increases the size of execution_log_json_file.\r\n\r\nWe run into this when we use rules_js with:\r\n```\r\njs_binary(\r\n    name = \"bin\",\r\n    data = [\r\n        \"//:node_modules/react\",\r\n        \"//:node_modules/eslint\",\r\n        \"...\",\r\n    ],\r\n    entry_point = \"index.js\",\r\n)\r\n```\r\nThese node_modules collectively can be hundreds of thousands of files, which multipled with thousands of persistent worker invocations runs easily into millions of lines in execution_log_json_file with the same repeating inputs.\r\n\r\nOne simple way to address this is to use filegroup *if a filegroup appears only once in the execution_log*:\r\n```\r\nfilegroup(\r\n  name = \"node_modules_group\",\r\n  srcs = [\r\n        \"//:node_modules/react\",\r\n        \"//:node_modules/eslint\",\r\n        \"...\",\r\n  ]\r\n)\r\n\r\njs_binary(\r\n    name = \"bin\",\r\n    data = [\":node_modules_group\"],\r\n    entry_point = \"index.js\",\r\n)\r\n```\n\n### Which category does this issue belong to?\n\n\nPerformance\n\n### What underlying problem are you trying to solve with this feature?\n\n\nReduce the size of execution_log_json_file in cases where several filegroups are used.\n\n### Which operating system are you running Bazel on?\n\n\nMacOS\n\n### What is the output of `bazel info release`?\n\n\nrelease 6.1.0\n\n### If `bazel info release` returns `development version` or `(@non-git)`, tell us how you built Bazel.\n\n\n_No response_\n\n### What's the output of `git remote get-url origin; git rev-parse master; git rev-parse HEAD` ?\n\n\n_No response_\n\n### Have you found anything relevant by searching the web?\n\n_No response_\n\n### Any other information, logs, or outputs that you want to share?\n\n_No response_","reactions":{"url":"https://api.github.com/repos/bazelbuild/bazel/issues/19628/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/bazelbuild/bazel/issues/19628/timeline","performed_via_github_app":null,"state_reason":"not_planned"}},"event":"cross-referenced"}]