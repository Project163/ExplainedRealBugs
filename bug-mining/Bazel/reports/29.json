{"url":"https://api.github.com/repos/bazelbuild/bazel/issues/18248","repository_url":"https://api.github.com/repos/bazelbuild/bazel","labels_url":"https://api.github.com/repos/bazelbuild/bazel/issues/18248/labels{/name}","comments_url":"https://api.github.com/repos/bazelbuild/bazel/issues/18248/comments","events_url":"https://api.github.com/repos/bazelbuild/bazel/issues/18248/events","html_url":"https://github.com/bazelbuild/bazel/issues/18248","id":1687584085,"node_id":"I_kwDOATz7jc5kln1V","number":18248,"title":"Allow dev_dependency register_toolchains calls","user":{"login":"rickeylev","id":34175098,"node_id":"MDQ6VXNlcjM0MTc1MDk4","avatar_url":"https://avatars.githubusercontent.com/u/34175098?v=4","gravatar_id":"","url":"https://api.github.com/users/rickeylev","html_url":"https://github.com/rickeylev","followers_url":"https://api.github.com/users/rickeylev/followers","following_url":"https://api.github.com/users/rickeylev/following{/other_user}","gists_url":"https://api.github.com/users/rickeylev/gists{/gist_id}","starred_url":"https://api.github.com/users/rickeylev/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rickeylev/subscriptions","organizations_url":"https://api.github.com/users/rickeylev/orgs","repos_url":"https://api.github.com/users/rickeylev/repos","events_url":"https://api.github.com/users/rickeylev/events{/privacy}","received_events_url":"https://api.github.com/users/rickeylev/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":106503261,"node_id":"MDU6TGFiZWwxMDY1MDMyNjE=","url":"https://api.github.com/repos/bazelbuild/bazel/labels/type:%20feature%20request","name":"type: feature request","color":"0052cc","default":false,"description":null},{"id":1020663381,"node_id":"MDU6TGFiZWwxMDIwNjYzMzgx","url":"https://api.github.com/repos/bazelbuild/bazel/labels/team-ExternalDeps","name":"team-ExternalDeps","color":"f1f442","default":false,"description":"External dependency handling, remote repositiories, WORKSPACE file."},{"id":1020665933,"node_id":"MDU6TGFiZWwxMDIwNjY1OTMz","url":"https://api.github.com/repos/bazelbuild/bazel/labels/untriaged","name":"untriaged","color":"c34ddd","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-04-27T21:33:27Z","updated_at":"2023-04-28T12:42:13Z","closed_at":"2023-04-28T12:42:13Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Description of the feature request:\n\n\nAllow `register_toolchains(dev_dependency=True)` so that MODULE files can register toolchains only necessary for development and testing.\r\n\r\nThe specific case I'm dealing with is documentation generation: generating docs for my code is a dev-time only activity, but it uses tools that use toolchains.\r\n\r\nUnfortunately, any `register_toolchains()` call in my module will propagate to consumers. This puts me in a catch-22: if I add register_toolchains(), my users are broken (because it'll try to register toolchains that were never setup). If I don't add it, my docgen tools can't run.\r\n\r\nThis idea is easily expanded: One might have various tools only necessary for development purposes (lints, test runners, debuggers, type checkers, etc), and it makes sense those tools would rely on some language toolchain. But those toolchains aren't necessary for any users, nor should they depend on them in any way.\r\n\r\ncc\r\n@fmeum as he mentioned he proposed this idea in the past\r\n@Wyverald pretty sure he owns bzlmod\n\n### What underlying problem are you trying to solve with this feature?\n\n\nMaking it possible to have dev-time only dependencies that rely on toolchains.\n\n### Which operating system are you running Bazel on?\n\n\nlinux\n\n### What is the output of `bazel info release`?\n\n\nrelease 6.1.2\n\n### If `bazel info release` returns `development version` or `(@non-git)`, tell us how you built Bazel.\n\n\n_No response_\n\n### What's the output of `git remote get-url origin; git rev-parse master; git rev-parse HEAD` ?\n\n\n```text\ngit@github.com:rickeylev/rules_testing.git\r\n79fd58291d29e22fe92542ca8c35f4af9ee8021a\r\n79fd58291d29e22fe92542ca8c35f4af9ee8021a\n```\n\n\n### Have you found anything relevant by searching the web?\n\nnothing found\n\n### Any other information, logs, or outputs that you want to share?\n\n_No response_","closed_by":{"login":"copybara-service[bot]","id":56741989,"node_id":"MDM6Qm90NTY3NDE5ODk=","avatar_url":"https://avatars.githubusercontent.com/in/44061?v=4","gravatar_id":"","url":"https://api.github.com/users/copybara-service%5Bbot%5D","html_url":"https://github.com/apps/copybara-service","followers_url":"https://api.github.com/users/copybara-service%5Bbot%5D/followers","following_url":"https://api.github.com/users/copybara-service%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/copybara-service%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/copybara-service%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/copybara-service%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/copybara-service%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/copybara-service%5Bbot%5D/repos","events_url":"https://api.github.com/users/copybara-service%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/copybara-service%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/bazelbuild/bazel/issues/18248/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/bazelbuild/bazel/issues/18248/timeline","performed_via_github_app":null,"state_reason":"completed"}