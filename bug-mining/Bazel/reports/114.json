{"url":"https://api.github.com/repos/bazelbuild/bazel/issues/17829","repository_url":"https://api.github.com/repos/bazelbuild/bazel","labels_url":"https://api.github.com/repos/bazelbuild/bazel/issues/17829/labels{/name}","comments_url":"https://api.github.com/repos/bazelbuild/bazel/issues/17829/comments","events_url":"https://api.github.com/repos/bazelbuild/bazel/issues/17829/events","html_url":"https://github.com/bazelbuild/bazel/issues/17829","id":1632581384,"node_id":"I_kwDOATz7jc5hTzcI","number":17829,"title":"Allow arbitrary headers to sent with Bazel Downloader","user":{"login":"thesayyn","id":20563340,"node_id":"MDQ6VXNlcjIwNTYzMzQw","avatar_url":"https://avatars.githubusercontent.com/u/20563340?v=4","gravatar_id":"","url":"https://api.github.com/users/thesayyn","html_url":"https://github.com/thesayyn","followers_url":"https://api.github.com/users/thesayyn/followers","following_url":"https://api.github.com/users/thesayyn/following{/other_user}","gists_url":"https://api.github.com/users/thesayyn/gists{/gist_id}","starred_url":"https://api.github.com/users/thesayyn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thesayyn/subscriptions","organizations_url":"https://api.github.com/users/thesayyn/orgs","repos_url":"https://api.github.com/users/thesayyn/repos","events_url":"https://api.github.com/users/thesayyn/events{/privacy}","received_events_url":"https://api.github.com/users/thesayyn/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":106503261,"node_id":"MDU6TGFiZWwxMDY1MDMyNjE=","url":"https://api.github.com/repos/bazelbuild/bazel/labels/type:%20feature%20request","name":"type: feature request","color":"0052cc","default":false,"description":null},{"id":192364241,"node_id":"MDU6TGFiZWwxOTIzNjQyNDE=","url":"https://api.github.com/repos/bazelbuild/bazel/labels/P3","name":"P3","color":"fbca04","default":false,"description":"We're not considering working on this, but happy to review a PR. (No assignee)"},{"id":1020663381,"node_id":"MDU6TGFiZWwxMDIwNjYzMzgx","url":"https://api.github.com/repos/bazelbuild/bazel/labels/team-ExternalDeps","name":"team-ExternalDeps","color":"f1f442","default":false,"description":"External dependency handling, remote repositiories, WORKSPACE file."}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":15,"created_at":"2023-03-20T17:41:12Z","updated_at":"2024-03-12T03:25:12Z","closed_at":"2023-12-07T12:59:52Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Description of the feature request:\n\n\nCurrently, bazel sets some headers when sending an HTTP request to fetch artifacts over the internet. While this works well for most cases, it doesn't work at all when the remote server requires some HTTP headers to be set to special values. \r\n\r\nFor instance, currently bazel sets all the `Accept` header to `text/html, image/gif, image/jpeg, */*` in outgoing HTTP requests. In my case, its `Accept` header that needs to be set to `application/vnd.oci.image.manifest.v1+json` so that docker registry sees no problem responding when the image has oci manifest types.\r\n\r\nSee: https://github.com/bazelbuild/bazel/issues/16659#issuecomment-1470347164 \r\n\r\nRelated to #16682 \n\n### What underlying problem are you trying to solve with this feature?\n\n\n_No response_\n\n### Which operating system are you running Bazel on?\n\n\ndarwin/arm64\n\n### What is the output of `bazel info release`?\n\n\n_No response_\n\n### If `bazel info release` returns `development version` or `(@non-git)`, tell us how you built Bazel.\n\n\n_No response_\n\n### What's the output of `git remote get-url origin; git rev-parse master; git rev-parse HEAD` ?\n\n\n_No response_\n\n### Have you found anything relevant by searching the web?\n\n_No response_\n\n### Any other information, logs, or outputs that you want to share?\n\n_No response_","closed_by":{"login":"copybara-service[bot]","id":56741989,"node_id":"MDM6Qm90NTY3NDE5ODk=","avatar_url":"https://avatars.githubusercontent.com/in/44061?v=4","gravatar_id":"","url":"https://api.github.com/users/copybara-service%5Bbot%5D","html_url":"https://github.com/apps/copybara-service","followers_url":"https://api.github.com/users/copybara-service%5Bbot%5D/followers","following_url":"https://api.github.com/users/copybara-service%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/copybara-service%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/copybara-service%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/copybara-service%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/copybara-service%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/copybara-service%5Bbot%5D/repos","events_url":"https://api.github.com/users/copybara-service%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/copybara-service%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/bazelbuild/bazel/issues/17829/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/bazelbuild/bazel/issues/17829/timeline","performed_via_github_app":null,"state_reason":"completed"}