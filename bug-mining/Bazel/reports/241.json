{"url":"https://api.github.com/repos/bazelbuild/bazel/issues/23570","repository_url":"https://api.github.com/repos/bazelbuild/bazel","labels_url":"https://api.github.com/repos/bazelbuild/bazel/issues/23570/labels{/name}","comments_url":"https://api.github.com/repos/bazelbuild/bazel/issues/23570/comments","events_url":"https://api.github.com/repos/bazelbuild/bazel/issues/23570/events","html_url":"https://github.com/bazelbuild/bazel/issues/23570","id":2515684640,"node_id":"I_kwDOATz7jc6V8k0g","number":23570,"title":"[Bazel CI] Build Error: Name android_sdk_repository is not defined in WORKSPACE.bzlmod\n","user":{"login":"sgowroji","id":48122892,"node_id":"MDQ6VXNlcjQ4MTIyODky","avatar_url":"https://avatars.githubusercontent.com/u/48122892?v=4","gravatar_id":"","url":"https://api.github.com/users/sgowroji","html_url":"https://github.com/sgowroji","followers_url":"https://api.github.com/users/sgowroji/followers","following_url":"https://api.github.com/users/sgowroji/following{/other_user}","gists_url":"https://api.github.com/users/sgowroji/gists{/gist_id}","starred_url":"https://api.github.com/users/sgowroji/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sgowroji/subscriptions","organizations_url":"https://api.github.com/users/sgowroji/orgs","repos_url":"https://api.github.com/users/sgowroji/repos","events_url":"https://api.github.com/users/sgowroji/events{/privacy}","received_events_url":"https://api.github.com/users/sgowroji/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":106503259,"node_id":"MDU6TGFiZWwxMDY1MDMyNTk=","url":"https://api.github.com/repos/bazelbuild/bazel/labels/type:%20bug","name":"type: bug","color":"0052cc","default":false,"description":null},{"id":192364134,"node_id":"MDU6TGFiZWwxOTIzNjQxMzQ=","url":"https://api.github.com/repos/bazelbuild/bazel/labels/P1","name":"P1","color":"d93f0b","default":false,"description":"I'll work on this now. (Assignee required)"},{"id":455456251,"node_id":"MDU6TGFiZWw0NTU0NTYyNTE=","url":"https://api.github.com/repos/bazelbuild/bazel/labels/breakage","name":"breakage","color":"D93F0B","default":false,"description":""},{"id":1459044053,"node_id":"MDU6TGFiZWwxNDU5MDQ0MDUz","url":"https://api.github.com/repos/bazelbuild/bazel/labels/team-OSS","name":"team-OSS","color":"f1f442","default":false,"description":"Issues for the Bazel OSS team: installation, release processBazel packaging, website"}],"state":"closed","locked":false,"assignee":{"login":"meteorcloudy","id":4171702,"node_id":"MDQ6VXNlcjQxNzE3MDI=","avatar_url":"https://avatars.githubusercontent.com/u/4171702?v=4","gravatar_id":"","url":"https://api.github.com/users/meteorcloudy","html_url":"https://github.com/meteorcloudy","followers_url":"https://api.github.com/users/meteorcloudy/followers","following_url":"https://api.github.com/users/meteorcloudy/following{/other_user}","gists_url":"https://api.github.com/users/meteorcloudy/gists{/gist_id}","starred_url":"https://api.github.com/users/meteorcloudy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/meteorcloudy/subscriptions","organizations_url":"https://api.github.com/users/meteorcloudy/orgs","repos_url":"https://api.github.com/users/meteorcloudy/repos","events_url":"https://api.github.com/users/meteorcloudy/events{/privacy}","received_events_url":"https://api.github.com/users/meteorcloudy/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"meteorcloudy","id":4171702,"node_id":"MDQ6VXNlcjQxNzE3MDI=","avatar_url":"https://avatars.githubusercontent.com/u/4171702?v=4","gravatar_id":"","url":"https://api.github.com/users/meteorcloudy","html_url":"https://github.com/meteorcloudy","followers_url":"https://api.github.com/users/meteorcloudy/followers","following_url":"https://api.github.com/users/meteorcloudy/following{/other_user}","gists_url":"https://api.github.com/users/meteorcloudy/gists{/gist_id}","starred_url":"https://api.github.com/users/meteorcloudy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/meteorcloudy/subscriptions","organizations_url":"https://api.github.com/users/meteorcloudy/orgs","repos_url":"https://api.github.com/users/meteorcloudy/repos","events_url":"https://api.github.com/users/meteorcloudy/events{/privacy}","received_events_url":"https://api.github.com/users/meteorcloudy/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":5,"created_at":"2024-09-10T07:53:14Z","updated_at":"2024-09-12T13:14:56Z","closed_at":"2024-09-11T20:27:28Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"CI: https://buildkite.com/bazel/bazel-at-head-plus-downstream/builds/4114#0191da32-9228-418e-a605-7b8b69fb7db7\r\n\r\n Platform: MacOS, Windows, Ubuntu\r\n\r\n Logs: \r\n```\r\nERROR: /Users/buildkite/builds/bk-macos-pln3-7ote/bazel-org-repo-root/bazel/WORKSPACE.bzlmod:48:1: name 'android_sdk_repository' is not defined\r\n(06:47:28) WARNING: Option 'experimental_build_event_json_file_path_conversion' is deprecated: Use --build_event_json_file_path_conversion instead\r\n(06:47:28) WARNING: Option 'remote_default_platform_properties' is deprecated: --remote_default_platform_properties has been deprecated in favor of --remote_default_exec_properties.\r\n(06:47:29) WARNING: Build option --test_env has changed, discarding analysis cache (this can be expensive, see https://bazel.build/advanced/performance/iteration-speed).\r\n(06:47:30) WARNING: Download from https://mirror.bazel.build/github.com/google/googletest/archive/refs/tags/v1.14.0.tar.gz failed: class java.io.FileNotFoundException GET returned 404 Not Found\r\n(06:47:30) ERROR: /Users/buildkite/builds/bk-macos-pln3-7ote/bazel-org-repo-root/bazel/WORKSPACE: no such target '//external:has_androidsdk': target 'has_androidsdk' not declared in package 'external' defined by /Users/buildkite/builds/bk-macos-pln3-7ote/bazel-org-repo-root/bazel/WORKSPACE\r\n(06:47:30) ERROR: /Users/buildkite/builds/bk-macos-pln3-7ote/bazel-org-repo-root/bazel/src/test/java/com/google/devtools/build/android/r8/BUILD:18:13: errors encountered resolving select() keys for //src/test/java/com/google/devtools/build/android/r8:tests\r\n(06:47:30) ERROR: Analysis of target '//src/test/java/com/google/devtools/build/android/r8:AllTests' failed; build aborted: Analysis failed\r\n(06:47:30) INFO: Elapsed time: 2.459s, Critical Path: 0.01s\r\n(06:47:30) INFO: 1 process: 1 internal.\r\n(06:47:30) ERROR: Build did NOT complete successfully\r\n(06:47:30) ERROR: No test targets were found, yet testing was requested\r\n(06:47:30) INFO: Build Event Protocol files produced successfully.\r\n(06:47:30) FAILED:\r\n``` \r\n Culprit: \r\n\r\n Steps:\r\n  ``` \r\n git clone https://github.com/bazelbuild/bazel\r\ngit reset 10060cd638027975480ae56b5e38dd1a0991d49c  --hard\r\nexport USE_BAZEL_VERSION=10060cd638027975480ae56b5e38dd1a0991d49c\r\nbazel test //scripts:bash_completion_test //src/test/cpp/util:md5_test //src/test/cpp:bazel_startup_options_test //src/test/cpp:startup_options_test //src/test/java/com/google/devtools/build/android/r8:AllTests //src/test/java/com/google/devtools/build/android/ziputils:ziputils-tests //src/test/java/com/google/devtools/build/android:AndroidDataWriterTest //src/test/java/com/google/devtools/build/android:ConvertersTest //src/test/java/com/google/devtools/build/android:DensitySpecificResourceFilterTest //src/test/java/com/google/devtools/build/android:RClassGeneratorActionTest //src/test/java/com/google/devtools/build/docgen:DocumentationTests //src/test/java/com/google/devtools/build/lib/analysis/config:FeatureSetTest //src/test/java/com/google/devtools/build/lib/analysis/select:SelectTests //src/test/java/com/google/devtools/build/lib/analysis/starlark:StarlarkCustomCommandLineTest //src/test/java/com/google/devtools/build/lib/analysis:AbstractConfiguredTargetTest //src/test/java/com/google/devtools/build/lib/analysis:ConfiguredTargetTransitivePackagesTest //src/test/java/com/google/devtools/build/lib/analysis:RunfilesRepoMappingManifestTest //src/test/java/com/google/devtools/build/lib/authandtls:AuthAndTlsTests //src/test/java/com/google/devtools/build/lib/bazel/repository/cache:RepositoryCacheTests //src/test/java/com/google/devtools/build/lib/bazel/rules/java:JavaTests //src/test/java/com/google/devtools/build/lib/blackbox/junit:TimeoutTestWatcherTest //src/test/java/com/google/devtools/build/lib/blackbox/tests/workspace:WorkspaceBlackBoxTest //src/test/java/com/google/devtools/build/lib/buildeventservice:BuildEventTransportTest //src/test/java/com/google/devtools/build/lib/buildtool:CompileOneDependencyIntegrationTest //src/test/java/com/google/devtools/build/lib/buildtool:DirectoryArtifactWarningTest //src/test/java/com/google/devtools/build/lib/buildtool:InstrumentationFilterSupportTest //src/test/java/com/google/devtools/build/lib/buildtool:MissingInputActionTest //src/test/java/com/google/devtools/build/lib/buildtool:ProgressReportingTest //src/test/java/com/google/devtools/build/lib/buildtool:SkymeldBuildIntegrationTest //src/test/java/com/google/devtools/build/lib/buildtool:TargetCompleteEventTest //src/test/java/com/google/devtools/build/lib/cmdline:LabelInternerIntegrationTest //src/test/java/com/google/devtools/build/lib/dynamic:DynamicSpawnStrategyTest //src/test/java/com/google/devtools/build/lib/exec/local:PosixLocalEnvProviderTest //src/test/java/com/google/devtools/build/lib/io:IoTests //src/test/java/com/google/devtools/build/lib/metrics:PsInfoCollectorTest //src/test/java/com/google/devtools/build/lib/packages:BazelDocumentationTests //src/test/java/com/google/devtools/build/lib/pkgcache:IncrementalLoadingTest //src/test/java/com/google/devtools/build/lib/pkgcache:TargetPatternEvaluatorTest //src/test/java/com/google/devtools/build/lib/platform:SystemThermalEventTest //src/test/java/com/google/devtools/build/lib/query2/common:QueryTaskFutureImplTest //src/test/java/com/google/devtools/build/lib/query2/cquery:FilesOutputFormatterCallbackTest //src/test/java/com/google/devtools/build/lib/query2/query/output:SyntheticAttributeHashCalculatorTest //src/test/java/com/google/devtools/build/lib/remote/http:http //src/test/java/com/google/devtools/build/lib/remote:BuildWithoutTheBytesIntegrationTest //src/test/java/com/google/devtools/build/lib/rules/android:AndroidDataConverterTest //src/test/java/com/google/devtools/build/lib/rules/cpp/proto:CcProtoLibraryTest //src/test/java/com/google/devtools/build/lib/rules/cpp:CcBinaryThinLtoObjDirTest //src/test/java/com/google/devtools/build/lib/rules/cpp:CcImportConfiguredTargetTest //src/test/java/com/google/devtools/build/lib/rules/cpp:CcToolchainProviderTest //src/test/java/com/google/devtools/build/lib/rules/cpp:CppConfigurationStarlarkTest //src/test/java/com/google/devtools/build/lib/rules/cpp:CppModulesConfiguredTargetTest //src/test/java/com/google/devtools/build/lib/rules/cpp:LibraryLinkingTest //src/test/java/com/google/devtools/build/lib/rules/cpp:NonWindowsCcBinaryThinLtoTest //src/test/java/com/google/devtools/build/lib/rules/genquery:genquery_tests //src/test/java/com/google/devtools/build/lib/rules/java:JavaConfigurationTest //src/test/java/com/google/devtools/build/lib/rules/java:JavaOptionsTest //src/test/java/com/google/devtools/build/lib/rules/objc:BazelJ2ObjcLibraryTest //src/test/java/com/google/devtools/build/lib/rules/proto:ProtoConfigurationTest //src/test/java/com/google/devtools/build/lib/rules/python:PyLibraryConfiguredTargetTest //src/test/java/com/google/devtools/build/lib/rules/python:PythonStarlarkApiTest //src/test/java/com/google/devtools/build/lib/rules/starlarkdocextract:StarlarkDocExtractTests //src/test/java/com/google/devtools/build/lib/runtime:RunCommandLineTest //src/test/java/com/google/devtools/build/lib/shell:CommandResultTest //src/test/java/com/google/devtools/build/lib/shell:InterruptibleTest //src/test/java/com/google/devtools/build/lib/shell:TerminationStatusTest //src/test/java/com/google/devtools/build/lib/skyframe/config:PlatformMappingFunctionTest //src/test/java/com/google/devtools/build/lib/skyframe/serialization/strings:UnsafeStringCodecTest //src/test/java/com/google/devtools/build/lib/skyframe/serialization:DictCodecTest //src/test/java/com/google/devtools/build/lib/skyframe/serialization:IgnoredPackagePrefixesValueCodecTest //src/test/java/com/google/devtools/build/lib/skyframe/serialization:MutableListCodecTest //src/test/java/com/google/devtools/build/lib/skyframe/serialization:ProfileCollectorTest //src/test/java/com/google/devtools/build/lib/skyframe/serialization:SingletonCodecTest //src/test/java/com/google/devtools/build/lib/skyframe/serialization:WorkspaceNameValueCodecTest //src/test/java/com/google/devtools/build/lib/skyframe/toolchains:SingleToolchainResolutionFunctionTest //src/test/java/com/google/devtools/build/lib/skyframe:ActionExecutionValueTest //src/test/java/com/google/devtools/build/lib/skyframe:BuiltinsInjectionTest //src/test/java/com/google/devtools/build/lib/skyframe:BzlLoadKeyCodecTest //src/test/java/com/google/devtools/build/lib/skyframe:ConfiguredTargetKeyTest //src/test/java/com/google/devtools/build/lib/skyframe:DirtinessCheckerUtilsTest //src/test/java/com/google/devtools/build/lib/skyframe:FileValueTest //src/test/java/com/google/devtools/build/lib/skyframe:GlobsFunctionTest //src/test/java/com/google/devtools/build/lib/skyframe:LocalRepositoryLookupFunctionTest //src/test/java/com/google/devtools/build/lib/skyframe:PackageLookupFunctionTest //src/test/java/com/google/devtools/build/lib/skyframe:PrepareDepsOfPatternsFunctionSmartNegationTest //src/test/java/com/google/devtools/build/lib/skyframe:RecursiveFilesystemTraversalFunctionTest //src/test/java/com/google/devtools/build/lib/skyframe:RepositoryMappingFunctionTest //src/test/java/com/google/devtools/build/lib/skyframe:SkyframeFilesystemIntegrationTest //src/test/java/com/google/devtools/build/lib/skyframe:TargetPatternPhaseKeyTest //src/test/java/com/google/devtools/build/lib/skyframe:TrackSourceDirectoriesIntegrationTest //src/test/java/com/google/devtools/build/lib/skyframe:WorkspaceFileFunctionTest //src/test/java/com/google/devtools/build/lib/starlark:StarlarkTests //src/test/java/com/google/devtools/build/lib/starlarkdocextract:LabelRendererTest //src/test/java/com/google/devtools/build/lib/testing/common:FakeOptionsTest //src/test/java/com/google/devtools/build/lib/util:FileTypeWindowsTests //src/test/java/com/google/devtools/build/lib/versioning:GnuVersionParserTest //src/test/java/com/google/devtools/build/lib/view/java:JavaCompilationArgsTest //src/test/java/com/google/devtools/build/lib/view/java:JavaPluginConfiguredTargetTest //src/test/java/com/google/devtools/build/skyframe:SkyframeTests //src/test/java/net/starlark/java/eval:EvalTests //src/test/native/windows:process_test //src/test/shell/bazel:bazel_bootstrap_distfile_test //src/tools/singlejar:combiners_test //src/tools/singlejar:options_test //src/tools/singlejar:zip_headers_test //third_party/ijar/test:zip_test //tools/python/runfiles:runfiles_test \r\n ``` \r\n CC Greenteam @meteorcloudy\r\n ","closed_by":{"login":"copybara-service[bot]","id":56741989,"node_id":"MDM6Qm90NTY3NDE5ODk=","avatar_url":"https://avatars.githubusercontent.com/in/44061?v=4","gravatar_id":"","url":"https://api.github.com/users/copybara-service%5Bbot%5D","html_url":"https://github.com/apps/copybara-service","followers_url":"https://api.github.com/users/copybara-service%5Bbot%5D/followers","following_url":"https://api.github.com/users/copybara-service%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/copybara-service%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/copybara-service%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/copybara-service%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/copybara-service%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/copybara-service%5Bbot%5D/repos","events_url":"https://api.github.com/users/copybara-service%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/copybara-service%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/bazelbuild/bazel/issues/23570/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/bazelbuild/bazel/issues/23570/timeline","performed_via_github_app":null,"state_reason":"completed"}