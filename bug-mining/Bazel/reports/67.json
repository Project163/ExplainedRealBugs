{"url":"https://api.github.com/repos/bazelbuild/bazel/issues/19327","repository_url":"https://api.github.com/repos/bazelbuild/bazel","labels_url":"https://api.github.com/repos/bazelbuild/bazel/issues/19327/labels{/name}","comments_url":"https://api.github.com/repos/bazelbuild/bazel/issues/19327/comments","events_url":"https://api.github.com/repos/bazelbuild/bazel/issues/19327/events","html_url":"https://github.com/bazelbuild/bazel/issues/19327","id":1865520526,"node_id":"I_kwDOATz7jc5vMZWO","number":19327,"title":"Build event streams generated by Bazel 6.3.0 and later no longer include the remote execution message in such a way that it's attached to the action that failed","user":{"login":"EdSchouten","id":736085,"node_id":"MDQ6VXNlcjczNjA4NQ==","avatar_url":"https://avatars.githubusercontent.com/u/736085?v=4","gravatar_id":"","url":"https://api.github.com/users/EdSchouten","html_url":"https://github.com/EdSchouten","followers_url":"https://api.github.com/users/EdSchouten/followers","following_url":"https://api.github.com/users/EdSchouten/following{/other_user}","gists_url":"https://api.github.com/users/EdSchouten/gists{/gist_id}","starred_url":"https://api.github.com/users/EdSchouten/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/EdSchouten/subscriptions","organizations_url":"https://api.github.com/users/EdSchouten/orgs","repos_url":"https://api.github.com/users/EdSchouten/repos","events_url":"https://api.github.com/users/EdSchouten/events{/privacy}","received_events_url":"https://api.github.com/users/EdSchouten/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":106503259,"node_id":"MDU6TGFiZWwxMDY1MDMyNTk=","url":"https://api.github.com/repos/bazelbuild/bazel/labels/type:%20bug","name":"type: bug","color":"0052cc","default":false,"description":null},{"id":1193207358,"node_id":"MDU6TGFiZWwxMTkzMjA3MzU4","url":"https://api.github.com/repos/bazelbuild/bazel/labels/team-Remote-Exec","name":"team-Remote-Exec","color":"f1f442","default":false,"description":"Issues and PRs for the Execution (Remote) team"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2023-08-24T16:36:55Z","updated_at":"2023-09-22T07:08:25Z","closed_at":"2023-09-05T15:56:42Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Description of the bug:\r\n\r\n\r\nPR #18757 changed the way Bazel emits remote execution messages. They are now console events instead of being attached to stdout/stderr. This change on its own is all right, but it now means that if you look at the build event file they are only part of the \"progress\" messages. This is _really_ annoying, as it means the messages don't show up anywhere near the place where the actual execution failure is described.\r\n\r\nYou could in theory extract the information from the progress message, but what's annoying about that is that you likely need to use some VT100 escape sequence parser to interpret that data in a meaningful way.\r\n\r\nFurthermore, the event that is printed to the console is incomplete. Sure, it contains the target name, but it does not have the configuration ID either. This means that if the same target is built multiple times (e.g., once for the host, once for the target), it's not possible to figure out which it belongs to.\r\n\r\n### Which category does this issue belong to?\r\n\r\n\r\nRemote Execution\r\n\r\n### What's the simplest, easiest way to reproduce this bug? Please provide a minimal example if possible.\r\n\r\n\r\nBuild this target against a remote execution system that generates execution messages:\r\n\r\n```\r\ngenrule(\r\n    name = \"foo\",\r\n    outs = [\"bar\"],\r\n    cmd = \"false\",\r\n)\r\n```\r\n\r\nThen run `bazel build --build_event_json_file=${HOME}/x ...`\r\n\r\n### Which operating system are you running Bazel on?\r\n\r\n\r\nAny\r\n\r\n### What is the output of `bazel info release`?\r\n\r\n\r\n6.3.0\r\n\r\n### If `bazel info release` returns `development version` or `(@non-git)`, tell us how you built Bazel.\r\n\r\n\r\n_No response_\r\n\r\n### What's the output of `git remote get-url origin; git rev-parse master; git rev-parse HEAD` ?\r\n\r\n\r\n_No response_\r\n\r\n### Is this a regression? If yes, please try to identify the Bazel commit where the bug was introduced.\r\n\r\n\r\nhttps://github.com/bazelbuild/bazel/pull/18757\r\n\r\n### Have you found anything relevant by searching the web?\r\n\r\n_No response_\r\n\r\n### Any other information, logs, or outputs that you want to share?\r\n\r\n_No response_","closed_by":{"login":"copybara-service[bot]","id":56741989,"node_id":"MDM6Qm90NTY3NDE5ODk=","avatar_url":"https://avatars.githubusercontent.com/in/44061?v=4","gravatar_id":"","url":"https://api.github.com/users/copybara-service%5Bbot%5D","html_url":"https://github.com/apps/copybara-service","followers_url":"https://api.github.com/users/copybara-service%5Bbot%5D/followers","following_url":"https://api.github.com/users/copybara-service%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/copybara-service%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/copybara-service%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/copybara-service%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/copybara-service%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/copybara-service%5Bbot%5D/repos","events_url":"https://api.github.com/users/copybara-service%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/copybara-service%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/bazelbuild/bazel/issues/19327/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/bazelbuild/bazel/issues/19327/timeline","performed_via_github_app":null,"state_reason":"completed"}