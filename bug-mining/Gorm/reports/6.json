{"url":"https://api.github.com/repos/go-gorm/gorm/issues/784","repository_url":"https://api.github.com/repos/go-gorm/gorm","labels_url":"https://api.github.com/repos/go-gorm/gorm/issues/784/labels{/name}","comments_url":"https://api.github.com/repos/go-gorm/gorm/issues/784/comments","events_url":"https://api.github.com/repos/go-gorm/gorm/issues/784/events","html_url":"https://github.com/go-gorm/gorm/issues/784","id":125107147,"node_id":"MDU6SXNzdWUxMjUxMDcxNDc=","number":784,"title":"Field with *time.Time `sql:\"not null\"` not work","user":{"login":"douglarek","id":1488134,"node_id":"MDQ6VXNlcjE0ODgxMzQ=","avatar_url":"https://avatars.githubusercontent.com/u/1488134?v=4","gravatar_id":"","url":"https://api.github.com/users/douglarek","html_url":"https://github.com/douglarek","followers_url":"https://api.github.com/users/douglarek/followers","following_url":"https://api.github.com/users/douglarek/following{/other_user}","gists_url":"https://api.github.com/users/douglarek/gists{/gist_id}","starred_url":"https://api.github.com/users/douglarek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/douglarek/subscriptions","organizations_url":"https://api.github.com/users/douglarek/orgs","repos_url":"https://api.github.com/users/douglarek/repos","events_url":"https://api.github.com/users/douglarek/events{/privacy}","received_events_url":"https://api.github.com/users/douglarek/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2016-01-06T04:21:38Z","updated_at":"2016-02-14T14:43:11Z","closed_at":"2016-02-14T14:43:08Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"```\npackage main\n\n import (\n         \"time\"\n\n         _ \"github.com/go-sql-driver/mysql\"\n         \"github.com/jinzhu/gorm\"\n )\n\n type Base struct {\n         ID        uint64 `gorm:\"primary_key\"`\n         CreatedAt time.Time\n         UpdatedAt time.Time\n         DeletedAt *time.Time `sql:\"index\"`\n         CreatorID uint64     `sql:\"not null;index\"`\n }\n\n type Atest struct {\n         Base\n         Tint uint       `sql:\"not null\"`\n         Tat  *time.Time `sql:\"not null\"`\n }\n\n var db gorm.DB\n\n func init() {\n         var err error\n         db, err = gorm.Open(\"mysql\", \"root:@/mysql?charset=utf8&parseTime=True\")\n         if err != nil {\n                 panic(err)\n         }\n         db.LogMode(true)\n }\n\n func main() {\n         db.CreateTable(&Atest{})\n         // at := Atest{Tint: 2}\n         // fmt.Println(db.Debug().Create(&at))\n }\n```\n\n```\nError 1067: Invalid default value for 'tat'\n\nCREATE TABLE `atests` (`id` bigint unsigned AUTO_INCREMENT,`created_at` timestamp NULL,`updated_at` timestamp NULL,\\\n`deleted_at` timestamp NULL,`creator_id` bigint unsigned,`tint` int unsigned NOT NULL ,`tat` timestamp NULL NOT NULL  , PRIMARY KEY (`id`))\n```\n\n`tat timestamp NULL NOT NULL` is very strange !\n","closed_by":{"login":"jinzhu","id":6843,"node_id":"MDQ6VXNlcjY4NDM=","avatar_url":"https://avatars.githubusercontent.com/u/6843?v=4","gravatar_id":"","url":"https://api.github.com/users/jinzhu","html_url":"https://github.com/jinzhu","followers_url":"https://api.github.com/users/jinzhu/followers","following_url":"https://api.github.com/users/jinzhu/following{/other_user}","gists_url":"https://api.github.com/users/jinzhu/gists{/gist_id}","starred_url":"https://api.github.com/users/jinzhu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jinzhu/subscriptions","organizations_url":"https://api.github.com/users/jinzhu/orgs","repos_url":"https://api.github.com/users/jinzhu/repos","events_url":"https://api.github.com/users/jinzhu/events{/privacy}","received_events_url":"https://api.github.com/users/jinzhu/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/go-gorm/gorm/issues/784/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/go-gorm/gorm/issues/784/timeline","performed_via_github_app":null,"state_reason":"completed"}