diff --git a/src/main/java/io/github/gitbucket/markedj/Grammer.java b/src/main/java/io/github/gitbucket/markedj/Grammer.java
index 6a19ca0..f7f2312 100644
--- a/src/main/java/io/github/gitbucket/markedj/Grammer.java
+++ b/src/main/java/io/github/gitbucket/markedj/Grammer.java
@@ -25,7 +25,7 @@ public class Grammer {
     public static String BLOCK_LIST        = "^( *)(" + BULLET + ") [\\s\\S]+?(?:\\n{2,}(?! )(?!\\1" + BULLET + " )\\n*|\\s*$)";
     public static String BLOCK_DEF         = "^ *\\[([^\\]]+)\\]: *<?([^\\s>]+)>?(?: +[\"(]([^\\n]+)[\")])? *(?:\\n+|$)";
     public static String BLOCK_PARAGRAPH   = "^((?:[^\\n]+\\n?(?!" + removeLineStart(BLOCK_HR) + "|" + removeLineStart(BLOCK_HEADING) + "|" + removeLineStart(BLOCK_LHEADING) + "|" + removeLineStart(BLOCK_BLOCKQUOTE) + "|<" + TAG + "|" + removeLineStart(BLOCK_DEF) + "))+)\\n*";
-    public static String BLOCK_GFM_FENCES  = "^ *(`{3,}|~{3,})[ \\.]*(\\S+)? *\\n([\\s\\S]*?)\\s*\\1 *(?:\\n+|$)";
+    public static String BLOCK_GFM_FENCES  = "^ *(`{3,}|~{3,})([ \\S]+)?\\n([\\s\\S]*?)\\s*\\1 *(?:\\n+|$)";
 
     public static Map<String, Rule> BLOCK_RULES = new HashMap<>();
     public static Map<String, Rule> BLOCK_GFM_RULES = new HashMap<>();
diff --git a/src/main/java/io/github/gitbucket/markedj/Lexer.java b/src/main/java/io/github/gitbucket/markedj/Lexer.java
index b1c5b14..aabb864 100644
--- a/src/main/java/io/github/gitbucket/markedj/Lexer.java
+++ b/src/main/java/io/github/gitbucket/markedj/Lexer.java
@@ -66,7 +66,13 @@ public class Lexer {
                 List<String> cap = rules.get("fences").exec(src);
                 if(!cap.isEmpty()){
                     src = src.substring(cap.get(0).length());
-                    context.pushToken(new CodeToken(cap.get(3), cap.get(2), false));
+                    String lang = cap.get(2);
+                    if(lang != null){
+                        // Ignore extra information in Pandoc, R Markdown or PHP Markdown Extra.
+                        // https://github.com/gitbucket/markedj/issues/20
+                        lang = lang.replaceFirst("\\{.*}", "");
+                    }
+                    context.pushToken(new CodeToken(cap.get(3), trim(lang), false));
                     continue;
                 }
             }
diff --git a/src/main/java/io/github/gitbucket/markedj/Renderer.java b/src/main/java/io/github/gitbucket/markedj/Renderer.java
index 74186f7..3fe424b 100644
--- a/src/main/java/io/github/gitbucket/markedj/Renderer.java
+++ b/src/main/java/io/github/gitbucket/markedj/Renderer.java
@@ -11,7 +11,7 @@ public class Renderer {
     }
 
     public String code(String code, String lang, boolean escaped){
-        if(lang != null){
+        if(!isEmpty(lang)){
             StringBuilder sb = new StringBuilder();
             sb.append("<pre><code class=\"" + options.getLangPrefix() + escape(lang, true) + "\">");
             if(escaped){
diff --git a/src/main/java/io/github/gitbucket/markedj/Utils.java b/src/main/java/io/github/gitbucket/markedj/Utils.java
index 9bbc834..fb358b8 100644
--- a/src/main/java/io/github/gitbucket/markedj/Utils.java
+++ b/src/main/java/io/github/gitbucket/markedj/Utils.java
@@ -44,4 +44,12 @@ public class Utils {
         return list;
     }
 
+    public static String trim(String str){
+        if(str == null){
+            return null;
+        } else {
+            return str.trim();
+        }
+    }
+
 }
diff --git a/src/test/java/io/github/gitbucket/markedj/MarkedTest.java b/src/test/java/io/github/gitbucket/markedj/MarkedTest.java
index a0d393f..84222b4 100644
--- a/src/test/java/io/github/gitbucket/markedj/MarkedTest.java
+++ b/src/test/java/io/github/gitbucket/markedj/MarkedTest.java
@@ -144,6 +144,14 @@ public class MarkedTest {
                 "</code></pre>", result);
     }
 
+    @Test
+    public void testFencedCodeBlock() throws Exception {
+        String md = "``` {#id .class1 attribute1=value1}\ntest\n```";
+        String result = Marked.marked(md, new Options());
+        String expect = "<pre><code>test\n</code></pre>";
+        assertEquals(expect, result);
+    }
+
     @Test
     public void testEmptyItemOfList() throws Exception {
         String result = Marked.marked(loadResourceAsString("empty_item_of_list.md"), new Options());
