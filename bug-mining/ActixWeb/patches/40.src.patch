diff --git a/.clippy.toml b/.clippy.toml
index 8c0cbc8b..4f97157e 100644
--- a/.clippy.toml
+++ b/.clippy.toml
@@ -1,7 +1,8 @@
 disallowed-names = [
-    "e", # no single letter error bindings
+  "..",
+  "e", # no single letter error bindings
 ]
 disallowed-methods = [
-    "std::cell::RefCell::default()",
-    "std::rc::Rc::default()",
+  { path = "std::cell::RefCell::default()", reason = "prefer explicit inner type default" },
+  { path = "std::rc::Rc::default()", reason = "prefer explicit inner type default" },
 ]
diff --git a/.cspell.yml b/.cspell.yml
index 2efcc1d4..56a4216c 100644
--- a/.cspell.yml
+++ b/.cspell.yml
@@ -2,8 +2,11 @@ version: "0.2"
 words:
   - actix
   - addrs
+  - bytestring
   - httparse
   - msrv
   - realip
+  - rustls
   - rustup
+  - serde
   - zstd
diff --git a/.taplo.toml b/.taplo.toml
new file mode 100644
index 00000000..9548147a
--- /dev/null
+++ b/.taplo.toml
@@ -0,0 +1,32 @@
+exclude = ["target/*"]
+include = ["**/*.toml"]
+
+[formatting]
+column_width = 100
+align_comments = false
+
+[[rule]]
+include = ["**/Cargo.toml"]
+keys = [
+  "dependencies",
+  "*-dependencies",
+  "workspace.dependencies",
+  "workspace.*-dependencies",
+  "target.*.dependencies",
+  "target.*.*-dependencies",
+]
+formatting.column_width = 120
+formatting.reorder_keys = true
+
+[[rule]]
+include = ["**/Cargo.toml"]
+keys = [
+  "dependencies.*",
+  "*-dependencies.*",
+  "workspace.dependencies.*",
+  "workspace.*-dependencies.*",
+  "target.*.dependencies",
+  "target.*.*-dependencies",
+]
+formatting.column_width = 120
+formatting.reorder_keys = false
diff --git a/Cargo.toml b/Cargo.toml
index d5601f8f..88a08f8c 100644
--- a/Cargo.toml
+++ b/Cargo.toml
@@ -1,17 +1,17 @@
 [workspace]
 resolver = "2"
 members = [
-    "actix-files",
-    "actix-http-test",
-    "actix-http",
-    "actix-multipart",
-    "actix-multipart-derive",
-    "actix-router",
-    "actix-test",
-    "actix-web-actors",
-    "actix-web-codegen",
-    "actix-web",
-    "awc",
+  "actix-files",
+  "actix-http-test",
+  "actix-http",
+  "actix-multipart",
+  "actix-multipart-derive",
+  "actix-router",
+  "actix-test",
+  "actix-web-actors",
+  "actix-web-codegen",
+  "actix-web",
+  "awc",
 ]
 
 [workspace.package]
diff --git a/actix-files/Cargo.toml b/actix-files/Cargo.toml
index b2bef2aa..b668793b 100644
--- a/actix-files/Cargo.toml
+++ b/actix-files/Cargo.toml
@@ -1,10 +1,7 @@
 [package]
 name = "actix-files"
 version = "0.6.6"
-authors = [
-    "Nikolay Kim <fafhrd91@gmail.com>",
-    "Rob Ede <robjtede@icloud.com>",
-]
+authors = ["Nikolay Kim <fafhrd91@gmail.com>", "Rob Ede <robjtede@icloud.com>"]
 description = "Static file serving for Actix Web"
 keywords = ["actix", "http", "async", "futures"]
 homepage = "https://actix.rs"
@@ -14,13 +11,7 @@ license = "MIT OR Apache-2.0"
 edition = "2021"
 
 [package.metadata.cargo_check_external_types]
-allowed_external_types = [
-    "actix_http::*",
-    "actix_service::*",
-    "actix_web::*",
-    "http::*",
-    "mime::*",
-]
+allowed_external_types = ["actix_http::*", "actix_service::*", "actix_web::*", "http::*", "mime::*"]
 
 [features]
 experimental-io-uring = ["actix-web/experimental-io-uring", "tokio-uring"]
@@ -46,7 +37,7 @@ v_htmlescape = "0.15.5"
 # experimental-io-uring
 [target.'cfg(target_os = "linux")'.dependencies]
 tokio-uring = { version = "0.5", optional = true, features = ["bytes"] }
-actix-server = { version = "2.4", optional = true } # ensure matching tokio-uring versions
+actix-server = { version = "2.4", optional = true }                      # ensure matching tokio-uring versions
 
 [dev-dependencies]
 actix-rt = "2.7"
diff --git a/actix-http-test/Cargo.toml b/actix-http-test/Cargo.toml
index 7ccb70a4..221a4c42 100644
--- a/actix-http-test/Cargo.toml
+++ b/actix-http-test/Cargo.toml
@@ -7,10 +7,10 @@ keywords = ["http", "web", "framework", "async", "futures"]
 homepage = "https://actix.rs"
 repository = "https://github.com/actix/actix-web"
 categories = [
-    "network-programming",
-    "asynchronous",
-    "web-programming::http-server",
-    "web-programming::websocket",
+  "network-programming",
+  "asynchronous",
+  "web-programming::http-server",
+  "web-programming::websocket",
 ]
 license = "MIT OR Apache-2.0"
 edition = "2021"
@@ -20,14 +20,14 @@ features = []
 
 [package.metadata.cargo_check_external_types]
 allowed_external_types = [
-    "actix_codec::*",
-    "actix_http::*",
-    "actix_server::*",
-    "awc::*",
-    "bytes::*",
-    "futures_core::*",
-    "http::*",
-    "tokio::*",
+  "actix_codec::*",
+  "actix_http::*",
+  "actix_server::*",
+  "awc::*",
+  "bytes::*",
+  "futures_core::*",
+  "http::*",
+  "tokio::*",
 ]
 
 [features]
@@ -37,25 +37,25 @@ default = []
 openssl = ["tls-openssl", "awc/openssl"]
 
 [dependencies]
-actix-service = "2"
 actix-codec = "0.5"
-actix-tls = "3"
-actix-utils = "3"
 actix-rt = "2.2"
 actix-server = "2"
+actix-service = "2"
+actix-tls = "3"
+actix-utils = "3"
 awc = { version = "3", default-features = false }
 
 bytes = "1"
 futures-core = { version = "0.3.17", default-features = false }
 http = "0.2.7"
 log = "0.4"
-socket2 = "0.5"
 serde = "1"
 serde_json = "1"
-slab = "0.4"
 serde_urlencoded = "0.7"
+slab = "0.4"
+socket2 = "0.5"
 tls-openssl = { version = "0.10.55", package = "openssl", optional = true }
-tokio = { version = "1.24.2", features = ["sync"] }
+tokio = { version = "1.38.2", features = ["sync"] }
 
 [dev-dependencies]
 actix-http = "3"
diff --git a/actix-http/Cargo.toml b/actix-http/Cargo.toml
index f3b8c5cb..b7b23ce0 100644
--- a/actix-http/Cargo.toml
+++ b/actix-http/Cargo.toml
@@ -1,19 +1,16 @@
 [package]
 name = "actix-http"
 version = "3.10.0"
-authors = [
-    "Nikolay Kim <fafhrd91@gmail.com>",
-    "Rob Ede <robjtede@icloud.com>",
-]
+authors = ["Nikolay Kim <fafhrd91@gmail.com>", "Rob Ede <robjtede@icloud.com>"]
 description = "HTTP types and services for the Actix ecosystem"
 keywords = ["actix", "http", "framework", "async", "futures"]
 homepage = "https://actix.rs"
 repository = "https://github.com/actix/actix-web"
 categories = [
-    "network-programming",
-    "asynchronous",
-    "web-programming::http-server",
-    "web-programming::websocket",
+  "network-programming",
+  "asynchronous",
+  "web-programming::http-server",
+  "web-programming::websocket",
 ]
 license.workspace = true
 edition.workspace = true
@@ -22,37 +19,37 @@ rust-version.workspace = true
 [package.metadata.docs.rs]
 rustdoc-args = ["--cfg", "docsrs"]
 features = [
-    "http2",
-    "ws",
-    "openssl",
-    "rustls-0_20",
-    "rustls-0_21",
-    "rustls-0_22",
-    "rustls-0_23",
-    "compress-brotli",
-    "compress-gzip",
-    "compress-zstd",
+  "http2",
+  "ws",
+  "openssl",
+  "rustls-0_20",
+  "rustls-0_21",
+  "rustls-0_22",
+  "rustls-0_23",
+  "compress-brotli",
+  "compress-gzip",
+  "compress-zstd",
 ]
 
 [package.metadata.cargo_check_external_types]
 allowed_external_types = [
-    "actix_codec::*",
-    "actix_service::*",
-    "actix_tls::*",
-    "actix_utils::*",
-    "bytes::*",
-    "bytestring::*",
-    "encoding_rs::*",
-    "futures_core::*",
-    "h2::*",
-    "http::*",
-    "httparse::*",
-    "language_tags::*",
-    "mime::*",
-    "openssl::*",
-    "rustls::*",
-    "tokio_util::*",
-    "tokio::*",
+  "actix_codec::*",
+  "actix_service::*",
+  "actix_tls::*",
+  "actix_utils::*",
+  "bytes::*",
+  "bytestring::*",
+  "encoding_rs::*",
+  "futures_core::*",
+  "h2::*",
+  "http::*",
+  "httparse::*",
+  "language_tags::*",
+  "mime::*",
+  "openssl::*",
+  "rustls::*",
+  "tokio_util::*",
+  "tokio::*",
 ]
 
 [features]
@@ -62,12 +59,7 @@ default = []
 http2 = ["dep:h2"]
 
 # WebSocket protocol implementation
-ws = [
-    "dep:local-channel",
-    "dep:base64",
-    "dep:rand",
-    "dep:sha1",
-]
+ws = ["dep:local-channel", "dep:base64", "dep:rand", "dep:sha1"]
 
 # TLS via OpenSSL
 openssl = ["__tls", "actix-tls/accept", "actix-tls/openssl"]
@@ -89,8 +81,8 @@ rustls-0_23 = ["__tls", "actix-tls/accept", "actix-tls/rustls-0_23"]
 
 # Compression codecs
 compress-brotli = ["__compress", "dep:brotli"]
-compress-gzip   = ["__compress", "dep:flate2"]
-compress-zstd   = ["__compress", "dep:zstd"]
+compress-gzip = ["__compress", "dep:flate2"]
+compress-zstd = ["__compress", "dep:zstd"]
 
 # Internal (PRIVATE!) features used to aid testing and checking feature status.
 # Don't rely on these whatsoever. They are semver-exempt and may disappear at anytime.
@@ -101,10 +93,10 @@ __compress = []
 __tls = []
 
 [dependencies]
-actix-service = "2"
 actix-codec = "0.5"
-actix-utils = "3"
 actix-rt = { version = "2.2", default-features = false }
+actix-service = "2"
+actix-utils = "3"
 
 bitflags = "2"
 bytes = "1"
@@ -122,7 +114,7 @@ mime = "0.3.4"
 percent-encoding = "2.1"
 pin-project-lite = "0.2"
 smallvec = "1.6.1"
-tokio = { version = "1.24.2", features = [] }
+tokio = { version = "1.38.2", features = [] }
 tokio-util = { version = "0.7", features = ["io", "codec"] }
 tracing = { version = "0.1.30", default-features = false, features = ["log"] }
 
@@ -130,8 +122,8 @@ tracing = { version = "0.1.30", default-features = false, features = ["log"] }
 h2 = { version = "0.3.26", optional = true }
 
 # websockets
-local-channel = { version = "0.1", optional = true }
 base64 = { version = "0.22", optional = true }
+local-channel = { version = "0.1", optional = true }
 rand = { version = "0.9", optional = true }
 sha1 = { version = "0.10", optional = true }
 
@@ -158,14 +150,14 @@ memchr = "2.4"
 once_cell = "1.21"
 rcgen = "0.13"
 regex = "1.3"
-rustversion = "1"
 rustls-pemfile = "2"
+rustversion = "1"
 serde = { version = "1", features = ["derive"] }
 serde_json = "1.0"
 static_assertions = "1"
 tls-openssl = { package = "openssl", version = "0.10.55" }
 tls-rustls_023 = { package = "rustls", version = "0.23" }
-tokio = { version = "1.24.2", features = ["net", "rt", "macros"] }
+tokio = { version = "1.38.2", features = ["net", "rt", "macros"] }
 
 [lints]
 workspace = true
diff --git a/actix-multipart/Cargo.toml b/actix-multipart/Cargo.toml
index f86550f7..7933e2a0 100644
--- a/actix-multipart/Cargo.toml
+++ b/actix-multipart/Cargo.toml
@@ -2,9 +2,9 @@
 name = "actix-multipart"
 version = "0.7.2"
 authors = [
-    "Nikolay Kim <fafhrd91@gmail.com>",
-    "Jacob Halsey <jacob@jhalsey.com>",
-    "Rob Ede <robjtede@icloud.com>",
+  "Nikolay Kim <fafhrd91@gmail.com>",
+  "Jacob Halsey <jacob@jhalsey.com>",
+  "Rob Ede <robjtede@icloud.com>",
 ]
 description = "Multipart request & form support for Actix Web"
 keywords = ["http", "actix", "web", "multipart", "form"]
@@ -19,17 +19,17 @@ all-features = true
 
 [package.metadata.cargo_check_external_types]
 allowed_external_types = [
-    "actix_http::*",
-    "actix_multipart_derive::*",
-    "actix_utils::*",
-    "actix_web::*",
-    "bytes::*",
-    "futures_core::*",
-    "mime::*",
-    "serde_json::*",
-    "serde_plain::*",
-    "serde::*",
-    "tempfile::*",
+  "actix_http::*",
+  "actix_multipart_derive::*",
+  "actix_utils::*",
+  "actix_web::*",
+  "bytes::*",
+  "futures_core::*",
+  "mime::*",
+  "serde_json::*",
+  "serde_plain::*",
+  "serde::*",
+  "tempfile::*",
 ]
 
 [features]
@@ -55,7 +55,7 @@ serde = "1"
 serde_json = "1"
 serde_plain = "1"
 tempfile = { version = "3.4", optional = true }
-tokio = { version = "1.24.2", features = ["sync", "io-util"] }
+tokio = { version = "1.38.2", features = ["sync", "io-util"] }
 
 [dev-dependencies]
 actix-http = "3"
@@ -66,10 +66,10 @@ actix-web = "4"
 assert_matches = "1"
 awc = "3"
 env_logger = "0.11"
-futures-util = { version = "0.3.17", default-features = false, features = ["alloc"] }
 futures-test = "0.3"
+futures-util = { version = "0.3.17", default-features = false, features = ["alloc"] }
 multer = "3"
-tokio = { version = "1.24.2", features = ["sync"] }
+tokio = { version = "1.38.2", features = ["sync"] }
 tokio-stream = "0.1"
 
 [lints]
diff --git a/actix-router/Cargo.toml b/actix-router/Cargo.toml
index 7def1bdb..ba801188 100644
--- a/actix-router/Cargo.toml
+++ b/actix-router/Cargo.toml
@@ -2,9 +2,9 @@
 name = "actix-router"
 version = "0.5.3"
 authors = [
-    "Nikolay Kim <fafhrd91@gmail.com>",
-    "Ali MJ Al-Nasrawy <alimjalnasrawy@gmail.com>",
-    "Rob Ede <robjtede@icloud.com>",
+  "Nikolay Kim <fafhrd91@gmail.com>",
+  "Ali MJ Al-Nasrawy <alimjalnasrawy@gmail.com>",
+  "Rob Ede <robjtede@icloud.com>",
 ]
 description = "Resource path matching and router"
 keywords = ["actix", "router", "routing"]
@@ -13,10 +13,7 @@ license = "MIT OR Apache-2.0"
 edition = "2021"
 
 [package.metadata.cargo_check_external_types]
-allowed_external_types = [
-    "http::*",
-    "serde::*",
-]
+allowed_external_types = ["http::*", "serde::*"]
 
 [features]
 default = ["http", "unicode"]
@@ -35,8 +32,8 @@ tracing = { version = "0.1.30", default-features = false, features = ["log"] }
 [dev-dependencies]
 criterion = { version = "0.5", features = ["html_reports"] }
 http = "0.2.7"
-serde = { version = "1", features = ["derive"] }
 percent-encoding = "2.1"
+serde = { version = "1", features = ["derive"] }
 
 [lints]
 workspace = true
diff --git a/actix-test/Cargo.toml b/actix-test/Cargo.toml
index 34fdf2c8..eb11e846 100644
--- a/actix-test/Cargo.toml
+++ b/actix-test/Cargo.toml
@@ -1,37 +1,34 @@
 [package]
 name = "actix-test"
 version = "0.1.5"
-authors = [
-    "Nikolay Kim <fafhrd91@gmail.com>",
-    "Rob Ede <robjtede@icloud.com>",
-]
+authors = ["Nikolay Kim <fafhrd91@gmail.com>", "Rob Ede <robjtede@icloud.com>"]
 description = "Integration testing tools for Actix Web applications"
 keywords = ["http", "web", "framework", "async", "futures"]
 homepage = "https://actix.rs"
 repository = "https://github.com/actix/actix-web"
 categories = [
-    "network-programming",
-    "asynchronous",
-    "web-programming::http-server",
-    "web-programming::websocket",
+  "network-programming",
+  "asynchronous",
+  "web-programming::http-server",
+  "web-programming::websocket",
 ]
 license = "MIT OR Apache-2.0"
 edition = "2021"
 
 [package.metadata.cargo_check_external_types]
 allowed_external_types = [
-    "actix_codec::*",
-    "actix_http_test::*",
-    "actix_http::*",
-    "actix_service::*",
-    "actix_web::*",
-    "awc::*",
-    "bytes::*",
-    "futures_core::*",
-    "http::*",
-    "openssl::*",
-    "rustls::*",
-    "tokio::*",
+  "actix_codec::*",
+  "actix_http_test::*",
+  "actix_http::*",
+  "actix_service::*",
+  "actix_web::*",
+  "awc::*",
+  "bytes::*",
+  "futures_core::*",
+  "http::*",
+  "openssl::*",
+  "rustls::*",
+  "tokio::*",
 ]
 
 [features]
@@ -72,7 +69,7 @@ tls-rustls-0_20 = { package = "rustls", version = "0.20", optional = true }
 tls-rustls-0_21 = { package = "rustls", version = "0.21", optional = true }
 tls-rustls-0_22 = { package = "rustls", version = "0.22", optional = true }
 tls-rustls-0_23 = { package = "rustls", version = "0.23", default-features = false, optional = true }
-tokio = { version = "1.24.2", features = ["sync"] }
+tokio = { version = "1.38.2", features = ["sync"] }
 
 [lints]
 workspace = true
diff --git a/actix-web-actors/Cargo.toml b/actix-web-actors/Cargo.toml
index e7034ab8..61d454b5 100644
--- a/actix-web-actors/Cargo.toml
+++ b/actix-web-actors/Cargo.toml
@@ -12,12 +12,12 @@ rust-version.workspace = true
 
 [package.metadata.cargo_check_external_types]
 allowed_external_types = [
-    "actix::*",
-    "actix_http::*",
-    "actix_web::*",
-    "bytes::*",
-    "bytestring::*",
-    "futures_core::*",
+  "actix::*",
+  "actix_http::*",
+  "actix_web::*",
+  "bytes::*",
+  "bytestring::*",
+  "futures_core::*",
 ]
 
 [dependencies]
@@ -30,14 +30,14 @@ bytes = "1"
 bytestring = "1"
 futures-core = { version = "0.3.17", default-features = false }
 pin-project-lite = "0.2"
-tokio = { version = "1.24.2", features = ["sync"] }
+tokio = { version = "1.38.2", features = ["sync"] }
 tokio-util = { version = "0.7", features = ["codec"] }
 
 [dev-dependencies]
 actix-rt = "2.2"
 actix-test = "0.1"
-awc = { version = "3", default-features = false }
 actix-web = { version = "4", features = ["macros"] }
+awc = { version = "3", default-features = false }
 
 env_logger = "0.11"
 futures-util = { version = "0.3.17", default-features = false, features = ["std"] }
diff --git a/actix-web-codegen/Cargo.toml b/actix-web-codegen/Cargo.toml
index b6156595..c2bd75c6 100644
--- a/actix-web-codegen/Cargo.toml
+++ b/actix-web-codegen/Cargo.toml
@@ -2,10 +2,7 @@
 name = "actix-web-codegen"
 version = "4.3.0"
 description = "Routing and runtime macros for Actix Web"
-authors = [
-    "Nikolay Kim <fafhrd91@gmail.com>",
-    "Rob Ede <robjtede@icloud.com>",
-]
+authors = ["Nikolay Kim <fafhrd91@gmail.com>", "Rob Ede <robjtede@icloud.com>"]
 homepage.workspace = true
 repository.workspace = true
 license.workspace = true
@@ -33,8 +30,8 @@ actix-utils = "3"
 actix-web = "4"
 
 futures-core = { version = "0.3.17", default-features = false, features = ["alloc"] }
-trybuild = "1"
 rustversion-msrv = "0.100"
+trybuild = "1"
 
 [lints]
 workspace = true
diff --git a/actix-web/Cargo.toml b/actix-web/Cargo.toml
index f64196c7..9b9da29d 100644
--- a/actix-web/Cargo.toml
+++ b/actix-web/Cargo.toml
@@ -2,16 +2,13 @@
 name = "actix-web"
 version = "4.10.2"
 description = "Actix Web is a powerful, pragmatic, and extremely fast web framework for Rust"
-authors = [
-    "Nikolay Kim <fafhrd91@gmail.com>",
-    "Rob Ede <robjtede@icloud.com>",
-]
+authors = ["Nikolay Kim <fafhrd91@gmail.com>", "Rob Ede <robjtede@icloud.com>"]
 keywords = ["actix", "http", "web", "framework", "async"]
 categories = [
-    "network-programming",
-    "asynchronous",
-    "web-programming::http-server",
-    "web-programming::websocket"
+  "network-programming",
+  "asynchronous",
+  "web-programming::http-server",
+  "web-programming::websocket",
 ]
 homepage = "https://actix.rs"
 repository = "https://github.com/actix/actix-web"
@@ -22,55 +19,55 @@ rust-version.workspace = true
 [package.metadata.docs.rs]
 rustdoc-args = ["--cfg", "docsrs"]
 features = [
-    "macros",
-    "openssl",
-    "rustls-0_20",
-    "rustls-0_21",
-    "rustls-0_22",
-    "rustls-0_23",
-    "compress-brotli",
-    "compress-gzip",
-    "compress-zstd",
-    "cookies",
-    "secure-cookies",
+  "macros",
+  "openssl",
+  "rustls-0_20",
+  "rustls-0_21",
+  "rustls-0_22",
+  "rustls-0_23",
+  "compress-brotli",
+  "compress-gzip",
+  "compress-zstd",
+  "cookies",
+  "secure-cookies",
 ]
 
 [package.metadata.cargo_check_external_types]
 allowed_external_types = [
-    "actix_http::*",
-    "actix_router::*",
-    "actix_rt::*",
-    "actix_server::*",
-    "actix_service::*",
-    "actix_utils::*",
-    "actix_web_codegen::*",
-    "bytes::*",
-    "cookie::*",
-    "cookie",
-    "futures_core::*",
-    "http::*",
-    "language_tags::*",
-    "mime::*",
-    "openssl::*",
-    "rustls::*",
-    "serde_json::*",
-    "serde_urlencoded::*",
-    "serde::*",
-    "serde::*",
-    "tokio::*",
-    "url::*",
+  "actix_http::*",
+  "actix_router::*",
+  "actix_rt::*",
+  "actix_server::*",
+  "actix_service::*",
+  "actix_utils::*",
+  "actix_web_codegen::*",
+  "bytes::*",
+  "cookie::*",
+  "cookie",
+  "futures_core::*",
+  "http::*",
+  "language_tags::*",
+  "mime::*",
+  "openssl::*",
+  "rustls::*",
+  "serde_json::*",
+  "serde_urlencoded::*",
+  "serde::*",
+  "serde::*",
+  "tokio::*",
+  "url::*",
 ]
 
 [features]
 default = [
-    "macros",
-    "compress-brotli",
-    "compress-gzip",
-    "compress-zstd",
-    "cookies",
-    "http2",
-    "unicode",
-    "compat",
+  "macros",
+  "compress-brotli",
+  "compress-gzip",
+  "compress-zstd",
+  "cookies",
+  "http2",
+  "unicode",
+  "compat",
 ]
 
 # Brotli algorithm content-encoding support
@@ -121,9 +118,7 @@ __tls = []
 experimental-io-uring = ["actix-server/io-uring"]
 
 # Feature group which, when disabled, helps migrate code to v5.0.
-compat = [
-    "compat-routing-macros-force-pub",
-]
+compat = ["compat-routing-macros-force-pub"]
 
 # Opt-out forwards-compatibility for handler visibility inheritance fix.
 compat-routing-macros-force-pub = ["actix-web-codegen?/compat-routing-macros-force-pub"]
@@ -134,8 +129,8 @@ actix-macros = { version = "0.2.3", optional = true }
 actix-rt = { version = "2.6", default-features = false }
 actix-server = "2.6"
 actix-service = "2"
-actix-utils = "3"
 actix-tls = { version = "3.4", default-features = false, optional = true }
+actix-utils = "3"
 
 actix-http = { version = "3.10", features = ["ws"] }
 actix-router = { version = "0.5.3", default-features = false, features = ["http"] }
@@ -150,8 +145,8 @@ encoding_rs = "0.8"
 foldhash = "0.1"
 futures-core = { version = "0.3.17", default-features = false }
 futures-util = { version = "0.3.17", default-features = false }
-itoa = "1"
 impl-more = "0.1.4"
+itoa = "1"
 language-tags = "0.3"
 log = "0.4"
 mime = "0.3"
@@ -163,9 +158,9 @@ serde = "1.0"
 serde_json = "1.0"
 serde_urlencoded = "0.7"
 smallvec = "1.6.1"
-tracing = "0.1.30"
 socket2 = "0.5"
 time = { version = "0.3", default-features = false, features = ["formatting"] }
+tracing = "0.1.30"
 url = "2.5.4"
 
 [dev-dependencies]
@@ -187,7 +182,7 @@ serde = { version = "1", features = ["derive"] }
 static_assertions = "1"
 tls-openssl = { package = "openssl", version = "0.10.55" }
 tls-rustls = { package = "rustls", version = "0.23" }
-tokio = { version = "1.24.2", features = ["rt-multi-thread", "macros"] }
+tokio = { version = "1.38.2", features = ["rt-multi-thread", "macros"] }
 tokio-util = "0.7"
 zstd = "0.13"
 
diff --git a/awc/Cargo.toml b/awc/Cargo.toml
index 37a089c4..f8d704ae 100644
--- a/awc/Cargo.toml
+++ b/awc/Cargo.toml
@@ -97,9 +97,9 @@ dangerous-h2c = []
 
 [dependencies]
 actix-codec = "0.5"
-actix-service = "2"
 actix-http = { version = "3.10", features = ["http2", "ws"] }
 actix-rt = { version = "2.1", default-features = false }
+actix-service = "2"
 actix-tls = { version = "3.4", features = ["connect", "uri"] }
 actix-utils = "3"
 
@@ -112,7 +112,7 @@ futures-util = { version = "0.3.17", default-features = false, features = ["allo
 h2 = "0.3.26"
 http = "0.2.7"
 itoa = "1"
-log ="0.4"
+log = "0.4"
 mime = "0.3"
 percent-encoding = "2.1"
 pin-project-lite = "0.2"
@@ -120,7 +120,7 @@ rand = "0.9"
 serde = "1.0"
 serde_json = "1.0"
 serde_urlencoded = "0.7"
-tokio = { version = "1.24.2", features = ["sync"] }
+tokio = { version = "1.38.2", features = ["sync"] }
 
 cookie = { version = "0.16", features = ["percent-encode"], optional = true }
 
@@ -149,7 +149,7 @@ futures-util = { version = "0.3.17", default-features = false }
 static_assertions = "1.1"
 rcgen = "0.13"
 rustls-pemfile = "2"
-tokio = { version = "1.24.2", features = ["rt-multi-thread", "macros"] }
+tokio = { version = "1.38.2", features = ["rt-multi-thread", "macros"] }
 zstd = "0.13"
 tls-rustls-0_23 = { package = "rustls", version = "0.23" } # add rustls 0.23 with default features to make aws_lc_rs work in tests
 
