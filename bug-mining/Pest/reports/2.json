{"url":"https://api.github.com/repos/pestphp/pest/issues/98","repository_url":"https://api.github.com/repos/pestphp/pest","labels_url":"https://api.github.com/repos/pestphp/pest/issues/98/labels{/name}","comments_url":"https://api.github.com/repos/pestphp/pest/issues/98/comments","events_url":"https://api.github.com/repos/pestphp/pest/issues/98/events","html_url":"https://github.com/pestphp/pest/issues/98","id":640758439,"node_id":"MDU6SXNzdWU2NDA3NTg0Mzk=","number":98,"title":"Some tests do not traverse the whole dataset","user":{"login":"bpolaszek","id":5569077,"node_id":"MDQ6VXNlcjU1NjkwNzc=","avatar_url":"https://avatars.githubusercontent.com/u/5569077?v=4","gravatar_id":"","url":"https://api.github.com/users/bpolaszek","html_url":"https://github.com/bpolaszek","followers_url":"https://api.github.com/users/bpolaszek/followers","following_url":"https://api.github.com/users/bpolaszek/following{/other_user}","gists_url":"https://api.github.com/users/bpolaszek/gists{/gist_id}","starred_url":"https://api.github.com/users/bpolaszek/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bpolaszek/subscriptions","organizations_url":"https://api.github.com/users/bpolaszek/orgs","repos_url":"https://api.github.com/users/bpolaszek/repos","events_url":"https://api.github.com/users/bpolaszek/events{/privacy}","received_events_url":"https://api.github.com/users/bpolaszek/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1903431550,"node_id":"MDU6TGFiZWwxOTAzNDMxNTUw","url":"https://api.github.com/repos/pestphp/pest/labels/bug","name":"bug","color":"d73a4a","default":true,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2020-06-17T21:38:08Z","updated_at":"2020-06-21T06:30:17Z","closed_at":"2020-06-20T19:42:17Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Hey there,\r\n\r\nFirst, thank you for the awesome work on Pest! \r\nThis is the 1st time I use it on a project and it's a real delight.\r\n\r\nHowever, I noticed that _sometimes_, for an unknown reason, the whole dataset is not entirely traversed when using the `with()` method.\r\n\r\nExample [here](https://github.com/bpolaszek/mercure-php-hub/blob/623f8d5290406e599daf48688a4a65dcad7c97a7/tests/Unit/Security/TopicMatcher/Publish/TopicMatcherTest.php#L72-L79): \r\n`$combinations->asArray()` returns a dataset of `44` combinations (verified through [that first test](https://github.com/bpolaszek/mercure-php-hub/blob/623f8d5290406e599daf48688a4a65dcad7c97a7/tests/Unit/Security/TopicMatcher/Publish/TopicMatcherTest.php#L68-L70)), but only the `8th` first ones are run, as if the others simply didn't exist.\r\n\r\nHere's the full output of the test:\r\n```\r\n   FAIL  Tests\\Unit\\Security\\TopicMatcher\\Publish\\TopicMatcherTest\r\n  ✓ it contains 44 combinations\r\n  ✓ Topic can be updated only when authorized with ('/foo/bar', Lcobucci\\JWT\\Token Object (...), true, false)\r\n  ✓ Topic can be updated only when authorized with ('/foo/bar', Lcobucci\\JWT\\Token Object (...), false, false)\r\n  ✓ Topic can be updated only when authorized with ('/foo/bar', Lcobucci\\JWT\\Token Object (...), false, true)\r\n  ✓ Topic can be updated only when authorized with ('/foo/bar', Lcobucci\\JWT\\Token Object (...), true, true)\r\n  ✓ Topic can be updated only when authorized with ('/foo/baz', Lcobucci\\JWT\\Token Object (...), true, false)\r\n  ✓ Topic can be updated only when authorized with ('/foo/baz', Lcobucci\\JWT\\Token Object (...), false, false)\r\n  ✓ Topic can be updated only when authorized with ('/foo/baz', Lcobucci\\JWT\\Token Object (...), false, true)\r\n  ✓ Topic can be updated only when authorized with ('/foo/baz', Lcobucci\\JWT\\Token Object (...), true, true)\r\n  • All combinations have been tested\r\n\r\n  ---\r\n\r\n  • Tests\\Unit\\Security\\TopicMatcher\\Publish\\TopicMatcherTest > All combinations have been tested\r\n  Failed asserting that 8 matches expected 44.\r\n```\r\n\r\nAny ideas?\r\n\r\nThank you,\r\nBen\r\n\r\n_PS: Running Pest 0.2 (used to fail also on 1.x) on PHP 7.4._","closed_by":{"login":"nunomaduro","id":5457236,"node_id":"MDQ6VXNlcjU0NTcyMzY=","avatar_url":"https://avatars.githubusercontent.com/u/5457236?v=4","gravatar_id":"","url":"https://api.github.com/users/nunomaduro","html_url":"https://github.com/nunomaduro","followers_url":"https://api.github.com/users/nunomaduro/followers","following_url":"https://api.github.com/users/nunomaduro/following{/other_user}","gists_url":"https://api.github.com/users/nunomaduro/gists{/gist_id}","starred_url":"https://api.github.com/users/nunomaduro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nunomaduro/subscriptions","organizations_url":"https://api.github.com/users/nunomaduro/orgs","repos_url":"https://api.github.com/users/nunomaduro/repos","events_url":"https://api.github.com/users/nunomaduro/events{/privacy}","received_events_url":"https://api.github.com/users/nunomaduro/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/pestphp/pest/issues/98/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/pestphp/pest/issues/98/timeline","performed_via_github_app":null,"state_reason":"completed"}