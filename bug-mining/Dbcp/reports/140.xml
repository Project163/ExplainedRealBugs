<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:48:31 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[DBCP-445] java.lang.NoClassDefFoundError: javax/transaction/SystemException after update</title>
                <link>https://issues.apache.org/jira/browse/DBCP-445</link>
                <project id="12310469" key="DBCP">Commons DBCP</project>
                    <description>&lt;p&gt;Updating dbcp in my OSGi application, from 2.0.1 to 2.1.1 I now get the following exception:&lt;/p&gt;

&lt;p&gt;...&lt;br/&gt;
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &apos;dataSource&apos;: FactoryBean threw exception on object creation; nested exception is java.lang.NoClassDefFoundError: javax/transaction/SystemException&lt;br/&gt;
	at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:175) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.servicemix.bundles.spring-beans-4.2.0.RELEASE_1.jar:na&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.getObjectFromFactoryBean(FactoryBeanRegistrySupport.java:103) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.servicemix.bundles.spring-beans-4.2.0.RELEASE_1.jar:na&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.springframework.beans.factory.support.AbstractBeanFactory.getObjectForBeanInstance(AbstractBeanFactory.java:1574) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.servicemix.bundles.spring-beans-4.2.0.RELEASE_1.jar:na&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:316) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.servicemix.bundles.spring-beans-4.2.0.RELEASE_1.jar:na&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:196) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.servicemix.bundles.spring-beans-4.2.0.RELEASE_1.jar:na&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:351) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.servicemix.bundles.spring-beans-4.2.0.RELEASE_1.jar:na&amp;#93;&lt;/span&gt;&lt;br/&gt;
	... 72 common frames omitted&lt;br/&gt;
Caused by: java.lang.NoClassDefFoundError: javax/transaction/SystemException&lt;br/&gt;
	at org.apache.commons.dbcp2.managed.LocalXAConnectionFactory.&amp;lt;init&amp;gt;(LocalXAConnectionFactory.java:57) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;na:na&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.commons.dbcp2.managed.BasicManagedDataSource.createConnectionFactory(BasicManagedDataSource.java:139) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;na:na&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.commons.dbcp2.BasicDataSource.createDataSource(BasicDataSource.java:2033) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;na:na&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.commons.dbcp2.BasicDataSource.getConnection(BasicDataSource.java:1533) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;na:na&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at com.softmodeler.server.persistence.BasicManagedDataSourceFactory.getBasicManagedDataSource(BasicManagedDataSourceFactory.java:115) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;na:na&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at com.softmodeler.server.persistence.BasicManagedDataSourceFactory.getObject(BasicManagedDataSourceFactory.java:331) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;na:na&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at com.softmodeler.server.persistence.BasicManagedDataSourceFactory.getObject(BasicManagedDataSourceFactory.java:1) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;na:na&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:168) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.servicemix.bundles.spring-beans-4.2.0.RELEASE_1.jar:na&amp;#93;&lt;/span&gt;&lt;br/&gt;
	... 77 common frames omitted&lt;br/&gt;
Caused by: java.lang.ClassNotFoundException: javax.transaction.SystemException cannot be found by org.apache.commons.dbcp2_2.1.1&lt;br/&gt;
	at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:389) &lt;span class=&quot;error&quot;&gt;&amp;#91;org.eclipse.osgi_3.10.100.v20150529-1857.jar:na&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:352) &lt;span class=&quot;error&quot;&gt;&amp;#91;org.eclipse.osgi_3.10.100.v20150529-1857.jar:na&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:344) &lt;span class=&quot;error&quot;&gt;&amp;#91;org.eclipse.osgi_3.10.100.v20150529-1857.jar:na&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.eclipse.osgi.internal.loader.ModuleClassLoader.loadClass(ModuleClassLoader.java:160) &lt;span class=&quot;error&quot;&gt;&amp;#91;org.eclipse.osgi_3.10.100.v20150529-1857.jar:na&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at java.lang.ClassLoader.loadClass(ClassLoader.java:357) &lt;span class=&quot;error&quot;&gt;&amp;#91;na:1.8.0_51&amp;#93;&lt;/span&gt;&lt;br/&gt;
	... 85 common frames omitted&lt;/p&gt;

&lt;p&gt;In my environment I have javax.transaction 1.2, I suspected that since there is no version declared in the MANIFEST.MF, the JRE package &quot;javax.transaction&quot; is used. &lt;br/&gt;
Where there is no SystemException.&lt;/p&gt;

&lt;p&gt;So changing the Manifest.MF from  &lt;br/&gt;
 javax.transaction,&lt;br/&gt;
 javax.transaction.xa&lt;br/&gt;
to&lt;br/&gt;
 javax.transaction;version=&quot;1.1.0&quot;,&lt;br/&gt;
 javax.transaction.xa;version=&quot;1.1.0&quot;,&lt;br/&gt;
solves the issue.&lt;/p&gt;

&lt;p&gt;Setting it to version 1.1.0 instead of 1.2.0 since there is no sign that 1.2.0 is required.&lt;/p&gt;</description>
                <environment>&lt;p&gt;java 8, OSGi&lt;/p&gt;</environment>
        <key id="12856834">DBCP-445</key>
            <summary>java.lang.NoClassDefFoundError: javax/transaction/SystemException after update</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="flavio.donze">Flavio Donz&#233;</reporter>
                        <labels>
                    </labels>
                <created>Tue, 18 Aug 2015 07:24:03 +0000</created>
                <updated>Fri, 29 Jul 2016 00:31:49 +0000</updated>
                            <resolved>Tue, 8 Sep 2015 22:35:14 +0000</resolved>
                                    <version>1.4</version>
                    <version>2.0</version>
                    <version>2.0.1</version>
                    <version>2.1</version>
                    <version>2.1.1</version>
                                    <fixVersion>2.2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14701529" author="psteitz" created="Tue, 18 Aug 2015 16:32:55 +0000"  >&lt;p&gt;What is strange is that 2.0.1, 2.0, 2.1 all have the same import-package specification.  I don&apos;t understand why any 2.x version works in your environment and 2.1.1 does not.&lt;/p&gt;</comment>
                            <comment id="14701608" author="flavio.donze" created="Tue, 18 Aug 2015 17:07:36 +0000"  >&lt;p&gt;I thought maybe SystemException is only used by 2.1.1, but both versions have a dependency in TransactionContext and TransactionRegistry.&lt;/p&gt;

&lt;p&gt;Is there a possibility that there is a use case where those two classes were not used in 2.0.1 and are used in 2.1.1?&lt;/p&gt;</comment>
                            <comment id="14701622" author="flavio.donze" created="Tue, 18 Aug 2015 17:16:05 +0000"  >&lt;p&gt;Ups, sorry my bad I also had the MANIFEST.MF of the 2.0.1 manipulated and didn&apos;t remember.&lt;br/&gt;
javax.transaction;version=&quot;1.1.0&quot;,javax.transaction.xa;version=&quot;1.1.0&quot;&lt;/p&gt;

&lt;p&gt;So this is not a problem of the 2.1.1 release but of the 2.0.1.&lt;/p&gt;</comment>
                            <comment id="14701798" author="b.eckenfels" created="Tue, 18 Aug 2015 19:03:23 +0000"  >&lt;p&gt;Not completely sure which versions to use. Also see this: &lt;a href=&quot;http://mail-archives.apache.org/mod_mbox/felix-users/201211.mbox/%3CCAPr=90M+5vYjPqAvyTU+gYHr64y_FosBYELeUYcU_rFEJF3Cxw@mail.gmail.com%3E&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://mail-archives.apache.org/mod_mbox/felix-users/201211.mbox/%3CCAPr=90M+5vYjPqAvyTU+gYHr64y_FosBYELeUYcU_rFEJF3Cxw@mail.gmail.com%3E&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14702578" author="flavio.donze" created="Wed, 19 Aug 2015 06:31:17 +0000"  >&lt;p&gt;I think version 1.0.0 would be ok as well, as long as there is a version on the imported package.&lt;/p&gt;

&lt;p&gt;Just noticed that I also had the dbcp 1.4 MANIFEST.MF modified as well. &lt;/p&gt;</comment>
                            <comment id="14735755" author="psteitz" created="Tue, 8 Sep 2015 22:35:14 +0000"  >&lt;p&gt;Fixed in r1701879.&lt;/p&gt;</comment>
                            <comment id="15179717" author="pmarx" created="Fri, 4 Mar 2016 10:44:41 +0000"  >&lt;p&gt;I don&apos;t think the fix is correct see &lt;a href=&quot;https://issues.apache.org/jira/browse/DBCP-454&quot; title=&quot;OSGi declarations contain multiple import headers for javax.transaction&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DBCP-454&quot;&gt;DBCP-454&lt;/a&gt; for details.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 37 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2j1gf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>