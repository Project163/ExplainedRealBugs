<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:47:47 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[DBCP-334] BasicDataSource does not consider the method &quot;setSoftMinEvictableIdleTimeMillis&quot; of CommonsPool.GenericObjectPool</title>
                <link>https://issues.apache.org/jira/browse/DBCP-334</link>
                <project id="12310469" key="DBCP">Commons DBCP</project>
                    <description>&lt;p&gt;The BasicDataSource should have the &quot;softMinEvictableIdleTimeMillis&quot; (get and set) as the GenericObjectPool, to avoid destroying idle connections below the &quot;minIdle&quot; value. In this case, connections are dropped and immediately recreated with no reason. The &quot;minEvictableIdleTimeMillis&quot; should not be considered because there are ways to validate idle connections before they are used.&lt;/p&gt;

&lt;p&gt;The class should have these lines of code, besides those existing:&lt;br/&gt;
// property&lt;br/&gt;
	private long softMinEvictableIdleTimeMillis = GenericObjectPool.DEFAULT_SOFT_MIN_EVICTABLE_IDLE_TIME_MILLIS;&lt;br/&gt;
// getter&lt;br/&gt;
	/**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Returns the 
{@link #softMinEvictableIdleTimeMillis} property.&lt;br/&gt;
	 * @return the value of the {@link #softMinEvictableIdleTimeMillis}
&lt;p&gt; property&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;@see #softMinEvictableIdleTimeMillis&lt;br/&gt;
	 */&lt;br/&gt;
	public synchronized long getSoftMinEvictableIdleTimeMillis() 
{
		return softMinEvictableIdleTimeMillis;
	}&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;// setter&lt;br/&gt;
	/**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Sets the 
{@link #softMinEvictableIdleTimeMillis}
&lt;p&gt; property.&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;@param softMinEvictableIdleTimeMillis the minimum amount of time an object&lt;/li&gt;
	&lt;li&gt;may sit idle in the pool&lt;/li&gt;
	&lt;li&gt;@see #softMinEvictableIdleTimeMillis&lt;br/&gt;
	 */&lt;br/&gt;
	public synchronized void setSoftMinEvictableIdleTimeMillis(final long softMinEvictableIdleTimeMillis) 
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {		this.softMinEvictableIdleTimeMillis = softMinEvictableIdleTimeMillis;		if (connectionPool != null) {
			connectionPool.setSoftMinEvictableIdleTimeMillis(softMinEvictableIdleTimeMillis);
		}	}&lt;/span&gt; &lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;// creator of the pool&lt;br/&gt;
	@Override protected void createConnectionPool() &lt;/p&gt;
{
		super.createConnectionPool();
		connectionPool.setSoftMinEvictableIdleTimeMillis(softMinEvictableIdleTimeMillis);
	}

&lt;p&gt;I implemented myself a &quot;NotSoBasicDataSource&quot; class, inheriting from &quot;BasicDataSource&quot; and used it in a single test. It worked: idle connections do not decrease under (and re-grow to) &quot;minIdle&quot;.&lt;br/&gt;
Please, consider this feature, because it can save resources.&lt;br/&gt;
I don&apos;t know what is the behavior of the Tomcat DBCP, but it seems to me it has the same problem.&lt;/p&gt;

&lt;p&gt;I&apos;m waiting your opinions.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12464688">DBCP-334</key>
            <summary>BasicDataSource does not consider the method &quot;setSoftMinEvictableIdleTimeMillis&quot; of CommonsPool.GenericObjectPool</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="alberto.mozzone">Alberto Mozzone</reporter>
                        <labels>
                    </labels>
                <created>Mon, 17 May 2010 16:03:51 +0000</created>
                <updated>Fri, 20 May 2016 10:49:43 +0000</updated>
                            <resolved>Mon, 2 May 2011 02:00:36 +0000</resolved>
                                    <version>1.2.1</version>
                    <version>1.2.2</version>
                    <version>1.3</version>
                    <version>1.4</version>
                                    <fixVersion>1.3.1</fixVersion>
                    <fixVersion>1.4.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13027525" author="psteitz" created="Mon, 2 May 2011 02:00:36 +0000"  >&lt;p&gt;Fixed in trunk (r1098458) and 1.4 branch (r1098459).&lt;/p&gt;

&lt;p&gt;Thanks for the patch!&lt;/p&gt;</comment>
                            <comment id="13027572" author="alberto.mozzone" created="Mon, 2 May 2011 07:37:35 +0000"  >&lt;p&gt;You&apos;re welcome! I&apos;m always glad to contribute!&lt;br/&gt;
I was waiting for this patch for a long time: could you please tell in which version of Tomcat will it be distributed?&lt;br/&gt;
Thanks!&lt;/p&gt;</comment>
                            <comment id="15293164" author="marks" created="Fri, 20 May 2016 10:49:43 +0000"  >&lt;p&gt;This issue was closed over 5 years ago... but the versions in which the defect was fixed (1.3.1 &amp;amp; 1.4.1) have yet to be released.  Or is there a missing fix version on this JIRA issue.  2.0 perhaps?&lt;/p&gt;

&lt;p&gt;Note that the same problem afflicts a couple of other issues as well:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/DBCP-371&quot; title=&quot;DelegatingDatabaseMetaData&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DBCP-371&quot;&gt;&lt;del&gt;DBCP-371&lt;/del&gt;&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/DBCP-421&quot; title=&quot;java.sql.SQLException: Closed Connection&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DBCP-421&quot;&gt;DBCP-421&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The latter is a duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/DBCP-330&quot; title=&quot;Calling getMetaData() without closing the connection lead to a memory leak&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DBCP-330&quot;&gt;&lt;del&gt;DBCP-330&lt;/del&gt;&lt;/a&gt; but the affected versions differ between the two issues.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>114610</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 26 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0tj27:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>170397</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>