<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:47:17 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[DBCP-215] DBCP&apos;s initialSize doesn&apos;t work as expected</title>
                <link>https://issues.apache.org/jira/browse/DBCP-215</link>
                <project id="12310469" key="DBCP">Commons DBCP</project>
                    <description>&lt;p&gt;I&apos;ve configured a datasource on Tomcat 5.0.28 using DBCP.&lt;br/&gt;
Reading it&apos;s documentation i found out a parameter to specify the datasource&apos;s initial number of connections, the &quot;initialSize&quot; parameter. We want this configured so the first users of our system don&apos;t have to wait for the datasource to open the first connections to the database.&lt;/p&gt;

&lt;p&gt;When put it to work, it didn&apos;t initialize the connections as defined on the &quot;initialSize&quot; parameter.&lt;br/&gt;
I&apos;ve made a lot of tests using the &quot;minIdle&quot; parameter as well, but the connections are created only when the first user hits the application.&lt;/p&gt;

&lt;p&gt;The BasicDataSourceFactory class initializes the datasources parameters and the BasicDataSource class just create the initial connections when called according to the DataSource interface (most likely on the getConnection() method). IMHO, this way the initialSize parameter doesn&apos;t work as expected.&lt;/p&gt;

&lt;p&gt;The &lt;a href=&quot;https://issues.apache.org/jira/browse/DBCP-147&quot; title=&quot;add initialSize parameter to do pre-loading of the connection pool&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DBCP-147&quot;&gt;&lt;del&gt;DBCP-147&lt;/del&gt;&lt;/a&gt; issue changed the BasicDataSource class to include the loop that create the initial connections, but the patch don&apos;t really create the connections when the datasource is created, only when it is called.&lt;/p&gt;

&lt;p&gt;My suggestion is: before the BasicDataSourceFactory.createDataSource() method returns it should ask the datasource to connect to create the initial connections according to the initialSize parameter.&lt;/p&gt;

&lt;p&gt;#1 One way could be to make the BasicDataSource.createDataSource() method public and, if the initialSize parameter is higher than zero, call it at the end of the BasicDataSourceFactory.createDataSource() method.&lt;/p&gt;

&lt;p&gt;#2 Another possibility could be to create a initialize() method on BasicDataSource. According to its parameters it could create the initial connections to the database.&lt;/p&gt;

&lt;p&gt;#3 To avoid changes to BasicDataSource, one could create a subclass of BasicDataSource (lets call it X) with a constructor that receives an instance of the superclass. On this constructor X&apos;d copy all the attributes from the superclass to it and call the inherited createDataSource() method. At the end of the BasicDataSourceFactory.createDataSource() method, if the initialSize parameter is higher than zero the factory would return a new instance of X passing as parameter the BasicDataSource instance that was initialized with the datasource&apos;s parameters.&lt;/p&gt;

&lt;p&gt;I&apos;ve created as a bug since the &quot;initialSize&quot; parameter doesn&apos;t work as expected.&lt;/p&gt;

&lt;p&gt;What do you guys think of this issue?&lt;/p&gt;

&lt;p&gt;Thanks in advance for your time!&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows XP, jsdk1.4.2_07, Tomcat 5.0.28, commons-dbcp-1.2.2, commons-pool-1.3, hibernate 2.1.7c, mysql-connector-java-5.0.5, MySQL 5.1.11 &lt;/p&gt;</environment>
        <key id="12366986">DBCP-215</key>
            <summary>DBCP&apos;s initialSize doesn&apos;t work as expected</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="leite">Rafael Leite</reporter>
                        <labels>
                    </labels>
                <created>Wed, 11 Apr 2007 13:23:47 +0000</created>
                <updated>Mon, 15 Feb 2010 04:08:30 +0000</updated>
                            <resolved>Thu, 19 Feb 2009 15:57:47 +0000</resolved>
                                    <version>1.2.2</version>
                                    <fixVersion>1.3</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12488264" author="psteitz" created="Thu, 12 Apr 2007 06:06:05 +0000"  >&lt;p&gt;I agree that the BasicDataSourceFactory should return an initialized pool, based on the properties set and I don&apos;t understand why it was not implemented to do that.  I will do some research in the archives to see if this was discussed when the the initialSize parameter was introduced.  Anyone who can give a reason why this should not be done, please chime in here.  By just calling getConnection, or even getLoginTimeout or getLogWriter at the end of the method, the factory&apos;s creatDataSource impl could be made to initialize the pool.  Patches welcome.&lt;/p&gt;</comment>
                            <comment id="12675018" author="markt" created="Thu, 19 Feb 2009 15:57:47 +0000"  >&lt;p&gt;This has been fixed in svn and will be included in the next release.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>114495</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 40 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0uzev:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>178878</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>