<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:47:22 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[DBCP-214] Basic datasource should respect the context classloader</title>
                <link>https://issues.apache.org/jira/browse/DBCP-214</link>
                <project id="12310469" key="DBCP">Commons DBCP</project>
                    <description>&lt;p&gt;I tried to use DBCP in an OSGi environment. This this not possible at the moment, as OSGi uses different classloaders and DBCP does not respect this.&lt;br/&gt;
The easiest way to solve this problem would be to use the contextclassloader in case of a ClassNotFoundException&lt;/p&gt;</description>
                <environment></environment>
        <key id="12366910">DBCP-214</key>
            <summary>Basic datasource should respect the context classloader</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="berndkolb">Bernd Kolb</reporter>
                        <labels>
                    </labels>
                <created>Tue, 10 Apr 2007 16:33:39 +0000</created>
                <updated>Mon, 15 Feb 2010 04:09:05 +0000</updated>
                            <resolved>Sun, 15 Mar 2009 22:13:17 +0000</resolved>
                                    <version>1.2.2</version>
                                    <fixVersion>1.3</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12488265" author="psteitz" created="Thu, 12 Apr 2007 06:08:07 +0000"  >&lt;p&gt;Patches welcome&lt;/p&gt;</comment>
                            <comment id="12495894" author="berndkolb" created="Tue, 15 May 2007 08:33:08 +0000"  >&lt;p&gt;Version: 1.2.2&lt;br/&gt;
Class: org.apache.commons.dbcp.BasicDataSouce&lt;br/&gt;
Method: protected synchronized DataSource createDataSource() (changes made between //### START CHANGE ### and //### END CHANGE ###&lt;/p&gt;

&lt;p&gt;Changed code:&lt;br/&gt;
        //### START CHANGE ###&lt;br/&gt;
        Class driverFromCCL = null;&lt;br/&gt;
        if (driverClassName != null) {&lt;br/&gt;
            try {&lt;br/&gt;
            	try &lt;/p&gt;
{
                Class.forName(driverClassName);
            	}
&lt;p&gt;catch (ClassNotFoundException e) &lt;/p&gt;
{
            		driverFromCCL = Thread.currentThread().getContextClassLoader().loadClass(driverClassName);
				}

&lt;p&gt;            } catch (Throwable t) &lt;/p&gt;
{
                String message = &quot;Cannot load JDBC driver class &apos;&quot; +
                    driverClassName + &quot;&apos;&quot;;
                logWriter.println(message);
                t.printStackTrace(logWriter);
                throw new SQLNestedException(message, t);
            }
&lt;p&gt;        }&lt;/p&gt;

&lt;p&gt;        // Create a JDBC driver instance&lt;br/&gt;
        Driver driver = null;&lt;br/&gt;
        try {&lt;br/&gt;
        	if (driverFromCCL!= null) {&lt;br/&gt;
        		// Usage of drivermanager is not possible, as it does not respect the ContextClassLoader&lt;br/&gt;
        		driver = (Driver) driverFromCCL.newInstance();&lt;br/&gt;
        		if (!driver.acceptsURL(url)) &lt;/p&gt;
{
        			new SQLException(&quot;No suitable driver&quot;, &quot;08001&quot;);
        		}
&lt;p&gt;        	}else &lt;/p&gt;
{
        		driver = DriverManager.getDriver(url);
        	}
&lt;p&gt;       	//### END CHANGE ###&lt;/p&gt;

&lt;p&gt;If you need more information, please let me know&lt;/p&gt;

&lt;p&gt;Cheers,&lt;/p&gt;

&lt;p&gt;Bernd&lt;/p&gt;</comment>
                            <comment id="12522170" author="berndkolb" created="Thu, 23 Aug 2007 15:10:28 +0000"  >&lt;p&gt;Any updates on that?&lt;/p&gt;

&lt;p&gt;Thanks&lt;/p&gt;

&lt;p&gt;Bernd&lt;/p&gt;</comment>
                            <comment id="12682182" author="markt" created="Sun, 15 Mar 2009 22:13:17 +0000"  >&lt;p&gt;Thanks for the patch. Sorry it it has been a while. Your patch has been applied.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12357361" name="BasicDataSource.java" size="44860" author="berndkolb" created="Tue, 15 May 2007 08:33:08 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>114494</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 36 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0uvov:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>178275</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>