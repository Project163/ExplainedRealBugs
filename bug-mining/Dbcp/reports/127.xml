<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:48:21 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[DBCP-428] Unsuccessful Connection enlistment in XA Transaction ignored by TransactionContext</title>
                <link>https://issues.apache.org/jira/browse/DBCP-428</link>
                <project id="12310469" key="DBCP">Commons DBCP</project>
                    <description>&lt;p&gt;When TransactionContext call &apos;enlistResource()&apos; on Transaction it is ignored returned result. This hapens at least when XAResource throws XAException in enlistResource method. By contract XAException should not be propagated by &apos;enlistResource()&apos; , instead &apos;false&apos; is returned.&lt;br/&gt;
As result:&lt;br/&gt;
1. ManagedConnection returned by pool is not enlisted in transaction (application think it does)&lt;br/&gt;
2. Transaction itself marked for rollback (because of XaException).&lt;br/&gt;
3. ManagedConnection returned by pool used by application without any errors until commit on transaction is called. Changes made in not enlisted connection may be commited on other use of native connection or rolled back depending on pool config.&lt;/p&gt;

&lt;p&gt;Issue is very dangerous especialy if changed made by application will be commited later but XA transaction in witch it made has bin rolled back.&lt;/p&gt;

&lt;p&gt;We are hit by this bug in production using MS SQL Server and PostgreSQL JDBC drivers.&lt;/p&gt;</description>
                <environment>&lt;p&gt;All&lt;/p&gt;</environment>
        <key id="12746058">DBCP-428</key>
            <summary>Unsuccessful Connection enlistment in XA Transaction ignored by TransactionContext</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="vladimirfx">Vladimir Konkov</reporter>
                        <labels>
                    </labels>
                <created>Mon, 6 Oct 2014 08:18:14 +0000</created>
                <updated>Tue, 24 Feb 2015 03:23:15 +0000</updated>
                            <resolved>Wed, 31 Dec 2014 16:04:17 +0000</resolved>
                                    <version>1.4</version>
                    <version>2.0.1</version>
                                    <fixVersion>2.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14160094" author="vladimirfx" created="Mon, 6 Oct 2014 08:28:12 +0000"  >&lt;p&gt;I&apos;ve attached simple patch for this issue. Unfortunately, with current test infrastructure provide test case is very time demand. Currently code path with connection enlistment is tested only by optimistic path. I will try create separate test suite for test XA interation.&lt;/p&gt;</comment>
                            <comment id="14262274" author="psteitz" created="Wed, 31 Dec 2014 16:04:17 +0000"  >&lt;p&gt;Patch (plus test) applied in r1648727.&lt;/p&gt;

&lt;p&gt;Thanks for the patch!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12673069" name="DBCP-428.diff" size="1355" author="vladimirfx" created="Mon, 6 Oct 2014 08:28:12 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 46 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i20tpb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>