<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:49:06 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[DBCP-599] destroyObject method behaves incorrectly on ABANDONED connection, issue with unhandled AbstractMethodError</title>
                <link>https://issues.apache.org/jira/browse/DBCP-599</link>
                <project id="12310469" key="DBCP">Commons DBCP</project>
                    <description>&lt;p&gt;Short description of the problem:&lt;br/&gt;
The PoolableConnectionFactory.destroyObject method is called for a connection in ABANDONED status, which results in an AbstractMethodError on a real connection due to not calling DelegatingConnection#abort, which takes into account throwing such an error due to Jdbc41Bridge#abort.&lt;/p&gt;

&lt;p&gt;Details:&lt;br/&gt;
It all started when we determined from the application logs in tomcat 9.0.82 that stacktraces were being dumped for allegedly not being able to get a new connection from the connect pool.&lt;br/&gt;
At the same time, I know and I am sure that we are configured to handle Abandoned connections and remove them from the pool.&lt;br/&gt;
However, on that day we received an application that after some time started to &#8220;complain&#8221; that it can&apos;t give new connections and that the pool doesn&apos;t give these new connections for 20 seconds.&lt;br/&gt;
Stacktrace-dump and heapdump were obtained, and after restarting the application &#8220;everything was normalized&#8221;.&lt;br/&gt;
After parsing the contents of the heapdump I found out that with maxTotal equal to 20 connections we had 18 connections in ABANDONED state, and only 2 in IDLE state, which on that day continued to hold all the load that fell only on them, and, apparently, &#8220;when the application needed 3 connections at once in a row&#8221; - we had problems with getting them from the pool, why we saw a lot of stacktraces about the impossibility to get these connections from the pool.&lt;br/&gt;
On that day, apparently, a stored procedure was changed, the call of which under certain conditions caused the connection to &#8220;freeze&#8221;, waiting for a response from the database, and of course it was killed by the pool and transferred to the ABANDONED status.&lt;br/&gt;
We counted 18 such connections in the heapdump, but the most interesting thing is that the configuration for the Abandoned mechanism is set up in such a way that we assumed that such connections would be thrown out of the connection pool and their place would be taken by &#8220;fresh&#8221; ones, but it was obviously not so.&lt;br/&gt;
As a result, what was the situation: when calling BasicDataSource.getConnection on stacktrace, our application reached the method PoolableConnectionFactory.destroyObject, which resulted in AbstractMethodError, which, due to the fact that it is Error, was not captured by catch-blocks, and knocked out the connection obtaining from the pool, because of which we had a few 500 errors at times when more than 2 connections were required at the same time (this is my assumption at the moment).&lt;br/&gt;
I &#8220;looked through&#8221; the sources of Tomcat 9.0.82 in terms of working with dbcp2, stacktrace frames, and in many of the errors we received at that time, associated with getting a connection from the pool involved method org.apache.commons.dbcp2.PoolableConnectionFactory#destroyObject(org.apache.commons.pool2.PooledObject&amp;lt;org.apache.commons.dbcp2.PoolableConnection&amp;gt;, org.apache.commons.pool2.DestroyMode), designated by Gary Gregory as &apos;@since 2.9.0&apos;.&lt;br/&gt;
This method itself is recorded in the history of git as having appeared in such a commit:&lt;br/&gt;
cbf77a08b7c64c1df3e2b2d2ee5e1415c9a885a1 &#160; &#160;Mon Dec 28 18:17:43 CET 2020 &#160; &#160;Phil Steitz* &#160; &#160;Use abort rather than close to destroy abandoned connections. Fixes &lt;a href=&quot;https://issues.apache.org/jira/browse/DBCP-567&quot; title=&quot;Use abort rather than close to clean up abandoned connections&quot; class=&quot;issue-link&quot; data-issue-key=&quot;DBCP-567&quot;&gt;&lt;del&gt;DBCP-567&lt;/del&gt;&lt;/a&gt;. (#68)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/projects/DBCP/issues/DBCP-567&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/projects/DBCP/issues/DBCP-567&lt;/a&gt;&lt;br/&gt;
Its current implementation results in the line org/apache/commons/dbcp2/PoolableConnectionFactory.java:152 where we have p.getObject().getInnermostDelegate().abort(Runnable::run), but getInnermostDelegate does retrieve the &#8220;last&#8221; connection, which is at the end of the nesting chain, rather than PoolableConnection, which inherits from the DelegatingConnection class and implements the method org.apache.commons.dbcp2.DelegatingConnection#abort , which takes into account that a database driver may be used that supports the JDBC 4.0 specification, and there is no abort method implementation there. The org.apache.commons.dbcp2.Jdbc41Bridge#abort method provides &quot;workaround&quot; in this case, ensuring that close is called instead of abort when the JVM throws an AbstractMethodError.&lt;br/&gt;
In fact, we have in our application with a tomcat that supports the JDBC 4.2 specification, a driver that is implemented according to the JDBC 4.0 specification, and it is this nuance that made DBCP2 unable to cope with pool cleanup when the removeAbandonedOnBorrow=&quot;true&quot; parameter is specified in the pool settings. The only thing I don&apos;t understand yet is why the pool didn&apos;t perform OnMaintenance cleanup with the specified parameters removeAbandonedTimeout=&quot;600&quot; removeAbandonedOnMaintenance=&quot;true&quot; logAbandoned=&quot;true&quot; minEvictableIdleTimeMillis=&quot;30000&quot;. Is this a settings for some internal sheduler?&lt;/p&gt;

&lt;p&gt;To reinforce all of the above, I attach the files:&lt;br/&gt;
testcase_PoolableConnectionFactory_1.patch - a testcase for PoolableConnectionFactory.destroyObject, which enlightens the problem.&lt;br/&gt;
TestPoolableConnectionFactory.java - the same file, but in form of the java source file.&lt;br/&gt;
part_of_stacktrace_1.txt - the most important file of all, it contains the part of the stacktrace that is repeated in all connection acquisition errors.&lt;br/&gt;
abandoned_traces_1.txt - all (anonymized) stacktraces from catalina.out, which are related to connection rejection in the database when the response time is exceeded, and transfer to ABANDONED status.&lt;br/&gt;
errors_getting_connection_traces_2_filtered_1.txt - All (anonymized) errors that include Caused by: java.lang.AbstractMethodError: Method com/sybase/jdbc4/jdbc/SybConnection.abort(Ljava/util/concurrent/Executor;)V is abstract.&lt;br/&gt;
errors_getting_connection_traces_1_filtered_1.txt - All (anonymized) errors where we tried to get a new connection from the pool and didn&apos;t wait the item.&lt;br/&gt;
part_of_server_xml.txt - (Anonymized) Resources from the conf/server.xml file.&lt;br/&gt;
abandoned_objects_1.txt - List of 18 DefaultPooledObject that appeared in the pool in ABANDONED status in heapdump, and &#8220;did not want to be destroyed&#8221;.&lt;br/&gt;
abandoned_objects_other_1.txt - Several other connections, from other pools, and 2 connections from the same pool that were involved in the &#8220;problem&#8221;, in IDLE status, which seem to be holding the load.&lt;br/&gt;
abandoned_objects_query_1.txt - queries for VisualVM , OQL Console tab, which retrieved the previous 2 files.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Linux, Tomcat 9.0.82, openjdk 17, jconn4.jar (Sybase JDBC 4.0 spec DB driver) in tomcat&apos;s lib dir&lt;/p&gt;</environment>
        <key id="13597481">DBCP-599</key>
            <summary>destroyObject method behaves incorrectly on ABANDONED connection, issue with unhandled AbstractMethodError</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="denixx">denixx baykin</reporter>
                        <labels>
                    </labels>
                <created>Fri, 1 Nov 2024 19:40:30 +0000</created>
                <updated>Sat, 23 Nov 2024 21:11:13 +0000</updated>
                            <resolved>Sat, 23 Nov 2024 21:11:13 +0000</resolved>
                                    <version>2.12.0</version>
                                    <fixVersion>2.13.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17894907" author="denixx" created="Fri, 1 Nov 2024 19:53:02 +0000"  >&lt;p&gt;To add a bit to the above, this bug looks like in the method&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
org.apache.commons.dbcp2.PoolableConnectionFactory#destroyObject(org.apache.commons.pool2.PooledObject&amp;lt;org.apache.commons.dbcp2.PoolableConnection&amp;gt;, org.apache.commons.pool2.DestroyMode)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;as a result of the line&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
p.getObject().getInnermostDelegate().abort(&lt;span class=&quot;code-object&quot;&gt;Runnable&lt;/span&gt;::run)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;, the author assumed that&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
getInnermostDelegate()&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;would return &quot;hindmost DelegatingConnection&quot; rather than &quot;hindmost connection = real connection&quot;.&lt;/p&gt;</comment>
                            <comment id="17895145" author="psteitz" created="Sun, 3 Nov 2024 18:50:07 +0000"  >&lt;p&gt;I may be missing something, but I think the code is working as intended, but the driver is not at the required level.&#160; Versions 2.5+ of DBCP require JDBC 4.2+&#160; Drivers at this level have the method that is missing from your driver.&#160; The JDBC4 bridge thing should actually probably be removed at this point.&#160; &#160;As a workaround, you could revert to DBCP 2.8.0 but it would be better to upgrade to a compliant driver.&lt;/p&gt;

&lt;p&gt;To &quot;fix&quot; this in DBCP, we could catch the AbstractMethodError and fall back to close, but I am thinking it might actually be better to just do what we say we have been doing for 4+ years now, which is to require 4.2+ and drop the bridge.&lt;/p&gt;</comment>
                            <comment id="17895148" author="garydgregory" created="Sun, 3 Nov 2024 19:28:17 +0000"  >&lt;p&gt;WRT dropping Jdbc41Bridge, we could deprecate it for 2.x and remove it in 3.0 but... it should only be used internally really, so deprecation would only ugly up IDEs and builds with compiler warnings (if you have those turned on).&lt;/p&gt;

&lt;p&gt;We could make it write a message to stdout that an old JDBC driver is in use but it&apos;s likely that users would be able to do anything about it. If a dev or user decides it&apos;s OK to ship or use an old driver, we can&apos;t do much about it. &lt;/p&gt;

&lt;p&gt;&amp;gt; To &quot;fix&quot; this in DBCP, we could catch the AbstractMethodError and fall back to close&lt;/p&gt;

&lt;p&gt;That&apos;s what the bridge has been doing:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void abort(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Connection connection, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Executor executor) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; SQLException {
        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
            connection.abort(executor);
        } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; AbstractMethodError e) {
            connection.close();
        }
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;So the fix might just be:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;diff --git a/src/main/java/org/apache/commons/dbcp2/PoolableConnectionFactory.java b/src/main/java/org/apache/commons/dbcp2/PoolableConnectionFactory.java
index c182d17..3a4f65c 100644
--- a/src/main/java/org/apache/commons/dbcp2/PoolableConnectionFactory.java
+++ b/src/main/java/org/apache/commons/dbcp2/PoolableConnectionFactory.java
@@ -149,7 +149,7 @@
     @Override
     public void destroyObject(final PooledObject&amp;lt;PoolableConnection&amp;gt; p, final DestroyMode mode) throws SQLException {
         if (mode == DestroyMode.ABANDONED) {
-            p.getObject().getInnermostDelegate().abort(Runnable::run);
+            Jdbc41Bridge.abort(p.getObject().getInnermostDelegate(), Runnable::run);
         } else {
             p.getObject().reallyClose();
         }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Please try git master or a snapshot build from &lt;a href=&quot;https://repository.apache.org/content/repositories/snapshots/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/repositories/snapshots/&lt;/a&gt;&lt;/p&gt;

</comment>
                            <comment id="17895330" author="denixx" created="Mon, 4 Nov 2024 15:26:15 +0000"  >&lt;p&gt;Phil, Thank you. I appreciate you are spending your time on this for us!&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Gary, I was thinking of this as one of the possible fixes.&lt;/p&gt;

&lt;p&gt;I focused a little on the PoolableConnectionFactory class, and I could see the Jdbc41Bridge.setSchema is already used here, so I don&apos;t think one more bridge execution will break things.&lt;/p&gt;

&lt;p&gt;I changed the org/apache/tomcat/dbcp/dbcp2/PoolableConnectionFactory.java in apache-tomcat-9.0.82-src and will replace the existing tomcat-dbcp.jar with the fixed one:&lt;/p&gt;

&lt;p&gt;I will try the proposed variant in a production since tomorrow.&lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
/**
 * @since 2.9.0
 */
@Override
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void destroyObject(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; PooledObject&amp;lt;PoolableConnection&amp;gt; p, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; DestroyMode mode) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; SQLException {
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (mode == DestroyMode.ABANDONED) {
        Jdbc41Bridge.abort(p.getObject().getInnermostDelegate(), &lt;span class=&quot;code-object&quot;&gt;Runnable&lt;/span&gt;::run);
    } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
        p.getObject().reallyClose();
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I understand I could upgrade to jconn42.jar from Sybase jConnect, but this is not an easy problem for other developers, so I chose the path to fix it this way.&lt;/p&gt;

&lt;p&gt;Gary, how do you feel, maybe &lt;ins&gt;markt&lt;/ins&gt; and &lt;ins&gt;remm&lt;/ins&gt; should be noticed about this issue?&lt;/p&gt;</comment>
                            <comment id="17895388" author="garydgregory" created="Mon, 4 Nov 2024 18:32:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=denixx&quot; class=&quot;user-hover&quot; rel=&quot;denixx&quot;&gt;denixx&lt;/a&gt; &lt;br/&gt;
You can use the &quot;@&quot; sign to tag users in Jira, send an email to the Tomcat mailing list, or create a Tomcat Jira issue linked to this one.&lt;/p&gt;</comment>
                            <comment id="17895413" author="denixx" created="Mon, 4 Nov 2024 19:54:08 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ggregory&quot; class=&quot;user-hover&quot; rel=&quot;ggregory&quot;&gt;ggregory&lt;/a&gt; Thank you! Let&apos;s give the fixed code time to execute at least once, and I will do this as soon as we have some results.&lt;/p&gt;</comment>
                            <comment id="17896616" author="denixx" created="Fri, 8 Nov 2024 09:31:42 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ggregory&quot; class=&quot;user-hover&quot; rel=&quot;ggregory&quot;&gt;ggregory&lt;/a&gt; I have added a new file, successfully_killed_1_filtered_1.txt.&lt;/p&gt;

&lt;p&gt;The line &quot;Successfully closed connection using Jdbc41Bridge.abort.&quot; at the end comes from a modified part of destroyObject:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void destroyObject(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; PooledObject&amp;lt;PoolableConnection&amp;gt; p, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; DestroyMode mode) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; SQLException {
&#160; &#160; &#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (mode == DestroyMode.ABANDONED) {
&#160; &#160; &#160; &#160; &#160; &#160; Jdbc41Bridge.abort(p.getObject().getInnermostDelegate(), &lt;span class=&quot;code-object&quot;&gt;Runnable&lt;/span&gt;::run);
&#160; &#160; &#160; &#160; &#160; &#160; &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;Successfully closed connection using Jdbc41Bridge.abort.&quot;&lt;/span&gt;);
&#160; &#160; &#160; &#160; } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
&#160; &#160; &#160; &#160; &#160; &#160; p.getObject().reallyClose();
&#160; &#160; &#160; &#160; }
&#160; &#160; }&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;So, I could say we fixed the initial problem.&lt;br/&gt;
As it may take more time to understand if this fixes the degradation problem, I can say now it is fixed in the sense of &quot;normally processing the abandoned connection.&quot;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=remm&quot; class=&quot;user-hover&quot; rel=&quot;remm&quot;&gt;remm&lt;/a&gt; Please take a look at this, as I think Tomcat 9 has an issue with closing the abandoned connections (if configured) since Tomcat 9.0.42:&lt;br/&gt;
&quot;Update the internal fork of Apache Commons DBCP to 2.9.0 (2021-08-03). Improvements, code clean-up and refactoring. (markt)&quot;&lt;/p&gt;</comment>
                            <comment id="17900128" author="denixx" created="Thu, 21 Nov 2024 17:08:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ggregory&quot; class=&quot;user-hover&quot; rel=&quot;ggregory&quot;&gt;ggregory&lt;/a&gt; Hello Gary! OK, here is a thread with Remy and Mark, they just say &quot;We will be glad to have the fix as it will be released in DBCP&quot;.&lt;br/&gt;
&lt;a href=&quot;https://www.mail-archive.com/dev@tomcat.apache.org/msg179955.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.mail-archive.com/dev@tomcat.apache.org/msg179955.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;What are my actions to make this fix available? I may prepare a merge request if I need to.&lt;/p&gt;</comment>
                            <comment id="17900151" author="garydgregory" created="Thu, 21 Nov 2024 18:44:48 +0000"  >&lt;p&gt;Hello &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=denixx&quot; class=&quot;user-hover&quot; rel=&quot;denixx&quot;&gt;denixx&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;Thank you for reaching out.&lt;/p&gt;

&lt;p&gt;What would you like to merge?&lt;/p&gt;

&lt;p&gt;Doesn&apos;t the state of git master and the snapshot build in &lt;a href=&quot;https://repository.apache.org/content/repositories/snapshots/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/repositories/snapshots/&lt;/a&gt; meet your needs?&lt;/p&gt;

&lt;p&gt;Let me know, that&apos;s what will be in the next release.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17900605" author="denixx" created="Sat, 23 Nov 2024 17:23:50 +0000"  >&lt;p&gt;Hello, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ggregory&quot; class=&quot;user-hover&quot; rel=&quot;ggregory&quot;&gt;ggregory&lt;/a&gt;!&lt;br/&gt;
I missed the&lt;br/&gt;
&quot;04933534 PoolableConnectionFactory.destroyObject() method behaves incorrectly on ABANDONED connection, issue with unhandled AbstractMethodError Gary Gregory 03.11.2024 20:31&quot;&lt;br/&gt;
commit.&lt;/p&gt;

&lt;p&gt;As I needed to verify this change, so I made a similar change in the code of Tomcat&apos;s dbcp2 version we use, and I know it fixes the behavior, so this is done well.&lt;/p&gt;

&lt;p&gt;A state of git master meets my needs.&lt;/p&gt;</comment>
                            <comment id="17900648" author="garydgregory" created="Sat, 23 Nov 2024 21:00:01 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=denixx&quot; class=&quot;user-hover&quot; rel=&quot;denixx&quot;&gt;denixx&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;Thank you for checking. I&apos;ll create a release candidate later today.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13072557" name="TestPoolableConnectionFactory.java" size="3574" author="denixx" created="Fri, 1 Nov 2024 19:37:13 +0000"/>
                            <attachment id="13072566" name="abandoned_objects_1.txt" size="5838" author="denixx" created="Fri, 1 Nov 2024 19:37:13 +0000"/>
                            <attachment id="13072565" name="abandoned_objects_other_1.txt" size="1295" author="denixx" created="Fri, 1 Nov 2024 19:37:13 +0000"/>
                            <attachment id="13072564" name="abandoned_objects_query_1.txt" size="413" author="denixx" created="Fri, 1 Nov 2024 19:37:13 +0000"/>
                            <attachment id="13072563" name="abandoned_traces_1.txt" size="94501" author="denixx" created="Fri, 1 Nov 2024 19:37:13 +0000"/>
                            <attachment id="13072562" name="errors_getting_connection_traces_1_filtered_1.txt" size="126423" author="denixx" created="Fri, 1 Nov 2024 19:37:13 +0000"/>
                            <attachment id="13072561" name="errors_getting_connection_traces_2_filtered_1.txt" size="112332" author="denixx" created="Fri, 1 Nov 2024 19:37:13 +0000"/>
                            <attachment id="13072560" name="part_of_server_xml.txt" size="2852" author="denixx" created="Fri, 1 Nov 2024 19:37:13 +0000"/>
                            <attachment id="13072559" name="part_of_stacktrace_1.txt" size="1186" author="denixx" created="Fri, 1 Nov 2024 19:37:13 +0000"/>
                            <attachment id="13072698" name="successfully_killed_1_filtered_1.txt" size="5267" author="denixx" created="Fri, 8 Nov 2024 09:06:14 +0000"/>
                            <attachment id="13072558" name="testcase_PoolableConnectionFactory_1.patch" size="4530" author="denixx" created="Fri, 1 Nov 2024 19:37:13 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>11.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12314421" key="com.atlassian.jira.plugin.system.customfieldtypes:labels">
                        <customfieldname>Language</customfieldname>
                        <customfieldvalues>
                                        <label>Java</label>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            49 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1sc60:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>