<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:47:12 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[DBCP-4] [dbcp] Use commons-logging for debugging instead of System.out.println</title>
                <link>https://issues.apache.org/jira/browse/DBCP-4</link>
                <project id="12310469" key="DBCP">Commons DBCP</project>
                    <description>&lt;p&gt;At the source code of commons-dbcp, some System.out.println() and&lt;br/&gt;
System.err.println() statements can be found, noticeably in the constructor of &lt;br/&gt;
&quot;java.org.apache.commons.dbcp.AbandonedObjectPool&quot;.&lt;/p&gt;

&lt;p&gt;These statements are annoying, because none of the developers want to see these&lt;br/&gt;
messages but they occuplied the precious space in the log files.&lt;/p&gt;

&lt;p&gt;I think it is still appropriate to use this method to emit errors, but for&lt;br/&gt;
normal behavior, we should have an option never seeing them.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Operating System: All&lt;br/&gt;
Platform: All&lt;/p&gt;</environment>
        <key id="12341600">DBCP-4</key>
            <summary>[dbcp] Use commons-logging for debugging instead of System.out.println</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="tam@siulung.com">Alan Tam</reporter>
                        <labels>
                    </labels>
                <created>Thu, 29 Jul 2004 14:52:24 +0000</created>
                <updated>Mon, 15 Feb 2010 04:20:13 +0000</updated>
                            <resolved>Wed, 18 Feb 2009 16:49:23 +0000</resolved>
                                    <version>Nightly Builds</version>
                                    <fixVersion>1.3</fixVersion>
                                        <due></due>
                            <votes>5</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="12407114" author="phil-apache@whirlycott.com" created="Fri, 10 Sep 2004 09:29:05 +0000"  >&lt;p&gt;Created an attachment (id=12689)&lt;br/&gt;
patch to get commons-logging in dbcp&lt;/p&gt;</comment>
                            <comment id="12407115" author="tam@siulung.com" created="Fri, 10 Sep 2004 09:35:33 +0000"  >&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;System.out.println(&quot;AbandonedObjectPool is used (&quot; + this + &quot;)&quot;);&lt;/li&gt;
	&lt;li&gt;System.out.println(&quot;   LogAbandoned: &quot; + config.getLogAbandoned());&lt;/li&gt;
	&lt;li&gt;System.out.println(&quot;   RemoveAbandoned: &quot; + config.getRemoveAbandoned());&lt;/li&gt;
	&lt;li&gt;System.out.println(&quot;   RemoveAbandonedTimeout: &quot; +&lt;br/&gt;
config.getRemoveAbandonedTimeout());&lt;br/&gt;
+        log.error(&quot;AbandonedObjectPool is used (&quot; + this + &quot;)&quot;);&lt;br/&gt;
+        log.error(&quot;   LogAbandoned: &quot; + config.getLogAbandoned());&lt;br/&gt;
+        log.error(&quot;   RemoveAbandoned: &quot; + config.getRemoveAbandoned());&lt;br/&gt;
+        log.error(&quot;   RemoveAbandonedTimeout: &quot; +&lt;br/&gt;
config.getRemoveAbandonedTimeout());&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I suppose they are info, or even debug.&lt;/p&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;System.err.println(&quot;Could not parse&lt;br/&gt;
defaultTransactionIsolation: &quot; + value);&lt;/li&gt;
	&lt;li&gt;System.err.println(&quot;WARNING: defaultTransactionIsolation&lt;br/&gt;
not set&quot;);&lt;/li&gt;
	&lt;li&gt;System.err.println(&quot;using default value of database driver&quot;);&lt;br/&gt;
+                    log.error(&quot;Could not parse defaultTransactionIsolation: &quot; +&lt;br/&gt;
value);&lt;br/&gt;
+                    log.error(&quot;WARNING: defaultTransactionIsolation not set&quot;);&lt;br/&gt;
+                    log.error(&quot;using default value of database driver&quot;);&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;I think they are warning instead.&lt;/p&gt;</comment>
                            <comment id="12407116" author="phil-apache@whirlycott.com" created="Fri, 10 Sep 2004 09:48:34 +0000"  >&lt;p&gt;Created an attachment (id=12690)&lt;br/&gt;
patch taking alan&apos;s comments into consideration, plus more use of commons logging&lt;/p&gt;</comment>
                            <comment id="12407117" author="tam@siulung.com" created="Thu, 24 Feb 2005 23:15:20 +0000"  >&lt;p&gt;Any idea when it can be checked in?&lt;/p&gt;</comment>
                            <comment id="12407118" author="dirkv" created="Fri, 25 Feb 2005 02:24:40 +0000"  >&lt;p&gt;This patch introduces a new dependency on commons-logging.&lt;br/&gt;
I&apos;m not planning to commit this patch because of this new dependency.&lt;br/&gt;
If the dependency is made optional (runtime detection unsing refection) then&lt;br/&gt;
I&apos;ll maybe consider it. &lt;/p&gt;

&lt;p&gt;Another (and maybe better) option is to use DriverManager.getLogWriter() and log&lt;br/&gt;
using this writer.&lt;/p&gt;</comment>
                            <comment id="12407119" author="pedxing" created="Thu, 1 Dec 2005 02:20:48 +0000"  >&lt;p&gt;I&apos;d like to disagree with the logic in the rejection of this patch, and I hope I&lt;br/&gt;
can pursuade you to change your mind.&lt;/p&gt;

&lt;p&gt;Either DBCP should log information or it shouldn&apos;t. If it should, then it should&lt;br/&gt;
be using a logging package to provide that behaviour rather than trying to do&lt;br/&gt;
the job poorly itself. If DBCP should not log information, then the System.out&lt;br/&gt;
and System.err lines should be removed altogether.&lt;/p&gt;

&lt;p&gt;The commons-logging package is extremely lightweight, and is a good choice for a&lt;br/&gt;
dependency in a library like DBCP that is itself fairly low level. Think of it&lt;br/&gt;
as the set of classes to do reflection that are suggested in the rejection of&lt;br/&gt;
the patch.&lt;/p&gt;

&lt;p&gt;Why this matters is that libraries putting anything on stdout or stderr is an&lt;br/&gt;
Antipattern. It is a side effect that the user of the library can&apos;t control. It&lt;br/&gt;
is especially incomprehensible in text-mode programs. Consider this dialog:&lt;/p&gt;

&lt;p&gt;  bash$ animal&lt;br/&gt;
  GUESS WHAT KIND OF ANIMAL I AM&lt;br/&gt;
  Pick an animal for you to be. I&apos;ll ask you a series of questions.&lt;br/&gt;
  Answer YES or NO to each one, and I&apos;ll guess what kind you are.&lt;br/&gt;
  AbandonedObjectPool is used (org.apache.commons.dbcp.AbandonedObjectPool@113f501)&lt;br/&gt;
    LogAbandoned: false&lt;br/&gt;
    RemoveAbandoned: true&lt;br/&gt;
    RemoveAbandonedTimeout: 300&lt;br/&gt;
  Are you a mammal?&lt;/p&gt;

&lt;p&gt;If you absolutely must keep the output, and you absolutely refuse to send it to&lt;br/&gt;
a logging package where it belongs, at least give a configuration option to&lt;br/&gt;
suppress the output to stdout and stderr, please.&lt;/p&gt;</comment>
                            <comment id="12480229" author="bayard" created="Mon, 12 Mar 2007 23:55:47 +0000"  >&lt;p&gt;Or move to JDK 1.4 as a minimum supported version of Java and use standard logging.&lt;/p&gt;</comment>
                            <comment id="12539666" author="pagadala1" created="Fri, 2 Nov 2007 18:56:44 +0000"  >&lt;p&gt;This is very very important to change to commons-logging, also I prefer to add some more debug or info statements like, creating new connections and closing old connections, and properties used by the pooling, this type of logging should be there to optimize DB connections in pools, and debug the production problems, this package is causing vey annoying because of there is no logging, EVEN I AM THINKING OF OWNING COPY OF DBCP SOURCE and ADD LOGGING, finally Decided to raise this as an issue, with fouram, I also created a JIRA, but this seems already sheduled to 1.3, It will be very nice, THIS MESSAGE NOT ONLY MINE, IN MY OFFICE NEARLY 100 DEVELOPERS VOTED FOR THIS CHANGE, I AM SENDING YOU THIS MESSAGE BEHALF ALL OF THEM.&lt;/p&gt;

&lt;p&gt;I AM STRONGLY SUPPORT THIS CHANGE WITH 100/100 PREIORITY.&lt;/p&gt;


&lt;p&gt;Thanks,&lt;br/&gt;
Madhu.&lt;/p&gt;</comment>
                            <comment id="12541432" author="pagadala1" created="Fri, 9 Nov 2007 20:30:25 +0000"  >&lt;p&gt;Anyone working on this issue??&lt;/p&gt;</comment>
                            <comment id="12585087" author="jonathan_amir" created="Thu, 3 Apr 2008 12:46:51 +0000"  >&lt;p&gt;yeah, I vote for fixing this as well. It doesn&apos;t make sense that a commons library won&apos;t use commons-logging and instead throw its output to stdout or stderr. Very annoying.&lt;/p&gt;</comment>
                            <comment id="12674597" author="markt" created="Wed, 18 Feb 2009 13:00:32 +0000"  >&lt;p&gt;Of the places were System.out is currently used:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;AbandonedObjectpool and AbandonedTrace have been deprecated&lt;/li&gt;
	&lt;li&gt;The remaining uses are for the default logWriter which may be replaced if required by the developer&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Therefore, I see no need for any changes to DBCP.&lt;/p&gt;</comment>
                            <comment id="12674626" author="jspiewak" created="Wed, 18 Feb 2009 14:14:05 +0000"  >&lt;p&gt;AbandonedObjectpool and AbandonedTrace have been deprecated for at least the same 4.5 years that this issue has been opened.  A quick look at the 1.3 JIRA issues did not turn up something replacing them.  You are trading off your desire to not introduce a dependency with the consumers of the library being forced to use System.out as part of their logging system that they must monitor.&lt;/p&gt;</comment>
                            <comment id="12674649" author="markt" created="Wed, 18 Feb 2009 15:16:30 +0000"  >&lt;p&gt;I have been reading through the archives. There may be a case for removing the deprecation in which case the System.out usage will need to be fixed. I want to look at this some more so am re-opening so I don&apos;t forget to come back to it.&lt;/p&gt;

&lt;p&gt;Whatever the end result, I am pretty certain commons-logging won&apos;t be the solution. Using the logWriters looks like a better bet.&lt;/p&gt;</comment>
                            <comment id="12674689" author="markt" created="Wed, 18 Feb 2009 16:49:23 +0000"  >&lt;p&gt;Compromise patch applied.&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Logging to stdout on pool creation was removed as a generally bad idea and inconsistent with the other pool impls&lt;/li&gt;
	&lt;li&gt;Logging location of traces was made configurable. Developers using DBCP directly can change the PrintWriter. App servers embedding DBCP (such as Tomcat) will probably need to retain their mechanisms for handling libraries that use stdout.&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12354101">DBCP-200</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12333009" name="ASF.LICENSE.NOT.GRANTED--dbcp-commons-logging-2.patch" size="18933" author="phil-apache@whirlycott.com" created="Fri, 10 Sep 2004 09:48:34 +0000"/>
                            <attachment id="12333008" name="ASF.LICENSE.NOT.GRANTED--dbcp-commons-logging.patch" size="13148" author="phil-apache@whirlycott.com" created="Fri, 10 Sep 2004 09:29:05 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_10010" key="com.atlassian.jira.plugin.system.customfieldtypes:importid">
                        <customfieldname>Bugzilla Id</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>30375</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>114288</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 40 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0uydz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>178712</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>