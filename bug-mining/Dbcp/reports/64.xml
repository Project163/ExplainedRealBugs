<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:47:29 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[DBCP-312] BasicDataSource.close() method needs JavaDoc clarification</title>
                <link>https://issues.apache.org/jira/browse/DBCP-312</link>
                <project id="12310469" key="DBCP">Commons DBCP</project>
                    <description>&lt;p&gt;Hello, the JavaDoc could use clarification for the BasicDataSource.close() method.  &lt;/p&gt;

&lt;p&gt;Link:  &lt;a href=&quot;http://commons.apache.org/dbcp/apidocs/org/apache/commons/dbcp/BasicDataSource.html#close(&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://commons.apache.org/dbcp/apidocs/org/apache/commons/dbcp/BasicDataSource.html#close(&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;Text: &quot;Close and release all connections that are currently stored in the connection pool associated with our data source. All open (active) connection remain open until closed. Once the data source has been closed, no more connections can be obtained.&quot;&lt;/p&gt;

&lt;p&gt;I&apos;m unsure if this method closes just idle, or both idle and active connections.  This is a important distinction, because you wouldn&apos;t want to call close() if you still have some needed active connections open on various threads.  The first sentence seems to indicate both active and idle threads will be closed, but the second sentence indicates that only the idle threads will be explicitly closed.&lt;/p&gt;

&lt;p&gt;Recommend changing text to:&lt;br/&gt;
&quot;Close and release all connections, whether active or idle, that are currently stored in the connection pool associated with our data source.  Once the data source has been closed, no more connections can be obtained.&quot;&lt;/p&gt;

&lt;p&gt;or (if this method closes just idle connections):&lt;/p&gt;

&lt;p&gt;&quot;Close and release all idle connections that are currently stored in the connection pool associated with our data source. All open (active) connections will still remain open until they are closed via the Connection close() method. Once the data source has been closed, no more connections can be obtained.&quot;&lt;/p&gt;

&lt;p&gt;Note that, for the latter case, if BasicDataSource.close() only closes and releases idle connections, and an active DBCP Connection object subsequently has its close() method called, it&apos;s not clear whether its underlying actual JDBC connection will be released.  I.e., how do you release JDBC connections on previously active DBCP Connections after BasicDataSource.close() is called?&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12443609">DBCP-312</key>
            <summary>BasicDataSource.close() method needs JavaDoc clarification</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="gmazza">Glen Mazza</reporter>
                        <labels>
                    </labels>
                <created>Thu, 17 Dec 2009 02:33:12 +0000</created>
                <updated>Tue, 24 Feb 2015 03:23:17 +0000</updated>
                            <resolved>Mon, 25 Apr 2011 17:21:41 +0000</resolved>
                                    <version>1.2.1</version>
                    <version>1.2.2</version>
                                    <fixVersion>1.3</fixVersion>
                    <fixVersion>1.4</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12793834" author="psteitz" created="Tue, 22 Dec 2009 23:00:45 +0000"  >&lt;p&gt;Thanks for reporting this.  I agree that the javadoc should be clearer.  Your second option above is correct - close has no effect on checked out connections.  What close does is close the underlying object pool.  This destroys the objects contained in the pool - in this case database connections.  So the physical connections corresponding to objects in the idle connection pool get closed when the datasource is closed.  When checked out connections are returned to the pool (i.e., when pool clients execute close on them), they are destroyed, so the physical connections get closed at that time.&lt;/p&gt;</comment>
                            <comment id="12793845" author="gmazza" created="Wed, 23 Dec 2009 00:07:57 +0000"  >&lt;p&gt;What you&apos;ve written above is absolute music to my ears, and would be excellent to replace what you presently have in the JavaDoc.  I have a main program that launches many threads, each requesting/returning a connection.  The main thread then closes the connection pool and exits while several of the threads may still be running.  This means (1) those threads can still work with their live connection even though the main thread closed the pool, and (2) once each spawned thread is finished and closes its connection, it becomes a &quot;real&quot; close of the underlying JDBC connection.  Great to hear.  Thanks!&lt;/p&gt;</comment>
                            <comment id="12793849" author="psteitz" created="Wed, 23 Dec 2009 00:18:32 +0000"  >&lt;p&gt;Thanks again for pointing out the weakness in the docs.  The unit tests are better - see testClose  in TestBasicDataSource &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12793851" author="psteitz" created="Wed, 23 Dec 2009 00:19:27 +0000"  >&lt;p&gt;Fixed in trunk as of r893360&lt;/p&gt;</comment>
                            <comment id="13024862" author="psteitz" created="Mon, 25 Apr 2011 17:20:02 +0000"  >&lt;p&gt;Reopening just to change fix version.&lt;/p&gt;</comment>
                            <comment id="13024863" author="psteitz" created="Mon, 25 Apr 2011 17:21:29 +0000"  >&lt;p&gt;This bug was actually fixed in the 1.3/1/4 release.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>114589</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 30 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0tj93:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>170428</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>