<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:47:09 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[DBCP-264] clear batch when closing statement</title>
                <link>https://issues.apache.org/jira/browse/DBCP-264</link>
                <project id="12310469" key="DBCP">Commons DBCP</project>
                    <description>&lt;p&gt;If a statement contains batch statements, these statements should be cleared on close. &lt;/p&gt;

&lt;p&gt;Szenario:&lt;br/&gt;
A pooled statement contains already some batch statements before an error occured. This error will be handled and finally the statement will be closed. Cause, it is a pooled statement the batch statements will be remaining in the pooled statement. On the next request the pooled statement will execute the batch statements from the first request.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12392810">DBCP-264</key>
            <summary>clear batch when closing statement</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="hbmann">Hauke Rabe</reporter>
                        <labels>
                    </labels>
                <created>Tue, 1 Apr 2008 08:22:35 +0000</created>
                <updated>Mon, 15 Feb 2010 02:38:37 +0000</updated>
                            <resolved>Mon, 16 Feb 2009 17:16:33 +0000</resolved>
                                    <version>1.2.2</version>
                                    <fixVersion>1.3</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12584053" author="hbmann" created="Tue, 1 Apr 2008 08:31:34 +0000"  >&lt;p&gt;Add to org.apache.commons.dbcp.DelegatingStatement#close()  method call clearBatch()&lt;/p&gt;
</comment>
                            <comment id="12592614" author="bayard" created="Sun, 27 Apr 2008 01:28:05 +0000"  >&lt;p&gt;Looks like this should be looked at for 1.3.&lt;/p&gt;</comment>
                            <comment id="12667087" author="psteitz" created="Sun, 25 Jan 2009 14:14:19 +0000"  >&lt;p&gt;The logical place to insert a clearBatch is in PoolablePreparedStatement&apos;s passivate method.  The attached patch does that, but swallows any SQLException that occurs.  Since driver support for this is optional, I don&apos;t think we would want to propagate the associated SQLExceptions here; but I don&apos;t either like the swallowing and the fact that the try/throw/catch will be executed on every passivate for drivers that do not support batch processing.   Anyone have a better idea?&lt;/p&gt;</comment>
                            <comment id="12667099" author="niallp" created="Sun, 25 Jan 2009 16:05:09 +0000"  >&lt;p&gt;How about setting a flag when addBatch() is called and only trying to call clearBatch() if that flag is set?&lt;/p&gt;</comment>
                            <comment id="12667155" author="psteitz" created="Mon, 26 Jan 2009 00:36:57 +0000"  >&lt;p&gt;Second patch looks good to me.  Might want to make the flag volatile, though.&lt;/p&gt;</comment>
                            <comment id="12667843" author="niallp" created="Tue, 27 Jan 2009 22:57:26 +0000"  >&lt;p&gt;OK I committed that patch with the volatile change:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://svn.apache.org/viewvc?view=rev&amp;amp;revision=738288&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=rev&amp;amp;revision=738288&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12398709" name="DBCP-264-clearBatch.patch" size="1156" author="niallp" created="Sun, 25 Jan 2009 23:53:28 +0000"/>
                            <attachment id="12398683" name="clearBatchPatch.txt" size="566" author="psteitz" created="Sun, 25 Jan 2009 14:14:19 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>114542</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 43 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0uvsn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>178292</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>