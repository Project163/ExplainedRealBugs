<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:46:55 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[DBCP-11] [dbcp] stmt.getConnection() != Connection used to create the statement</title>
                <link>https://issues.apache.org/jira/browse/DBCP-11</link>
                <project id="12310469" key="DBCP">Commons DBCP</project>
                    <description>&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;I&apos;m not an expert in implementing connection pools or jdbc itself. But shouldn&apos;t&lt;br/&gt;
the following code work?&lt;/p&gt;

&lt;p&gt;Connection con = pool.getConnection()&lt;br/&gt;
PreparedStatement ps = con.prepareStatement()&lt;/p&gt;

&lt;p&gt;con.equals(ps.getConnection) // returns false!&lt;/p&gt;

&lt;p&gt;Ok, I don&apos;t need it to be equal, but the following also does not work:&lt;/p&gt;

&lt;p&gt;ps.getConnection().close()&lt;br/&gt;
con.isClosed() // is false!!!&lt;/p&gt;

&lt;p&gt;That means, if I have a Statment and want to close its connection, I have to&lt;br/&gt;
remember the conncetion. Is that the requested behavior? Because of this my pool&lt;br/&gt;
is running over.&lt;/p&gt;

&lt;p&gt;The java.sql API says that Statment.getConnection() has to be the connection&lt;br/&gt;
which created the statement.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Operating System: other&lt;br/&gt;
Platform: All&lt;/p&gt;</environment>
        <key id="12342450">DBCP-11</key>
            <summary>[dbcp] stmt.getConnection() != Connection used to create the statement</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="alexander.rupsch@gmx.de">Alexander Rupsch</reporter>
                        <labels>
                    </labels>
                <created>Mon, 8 Aug 2005 20:38:24 +0000</created>
                <updated>Tue, 25 Mar 2008 08:11:27 +0000</updated>
                            <resolved>Sat, 21 Jul 2007 15:48:55 +0000</resolved>
                                    <version>1.2</version>
                                    <fixVersion>1.3</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12437457" author="psteitz" created="Mon, 25 Sep 2006 05:25:26 +0000"  >&lt;p&gt;Changing the fix version to 1.3.  We may in fact decide on WONTFIX eventually, but I want to hold off on that judgement until we have reworked close() systematically.&lt;/p&gt;

&lt;p&gt;If we interpret the spec to mean that Statment.getConnection()  has to return the physical connection that created the statement, this is in general &lt;b&gt;not&lt;/b&gt; going to be equal to the connection object that the user has a reference to and may also be open when the user&apos;s connection is closed.&lt;/p&gt;</comment>
                            <comment id="12480224" author="bayard" created="Mon, 12 Mar 2007 23:44:55 +0000"  >&lt;p&gt;My vote (with a few minutes thought) is that the Statements should be returning the Connection they came from and not the underlying physical connection. ie) We should change things.&lt;/p&gt;</comment>
                            <comment id="12513689" author="dain" created="Wed, 18 Jul 2007 19:27:41 +0000"  >&lt;p&gt;This patch assures that all all returned Statements, PreparedStatements, CallableStatements and ResultSets are wrapped with a delegating object, which already properly handle the back pointers for Connection and Statement.  This patch includes an extensive test to assure that the &lt;b&gt;same&lt;/b&gt; object used to create the statement or result set is returned from either the getConnection() or getStatementMethod().  &lt;/p&gt;</comment>
                            <comment id="12514420" author="psteitz" created="Sat, 21 Jul 2007 15:48:55 +0000"  >&lt;p&gt;Patch applied.  Thanks.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12362088" name="back-pointers.patch" size="21605" author="dain" created="Wed, 18 Jul 2007 19:27:41 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_10010" key="com.atlassian.jira.plugin.system.customfieldtypes:importid">
                        <customfieldname>Bugzilla Id</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>36077</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                    <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>114295</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 years, 19 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ux27:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>178497</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>