{"url":"https://api.github.com/repos/rust-random/rand/issues/1143","repository_url":"https://api.github.com/repos/rust-random/rand","labels_url":"https://api.github.com/repos/rust-random/rand/issues/1143/labels{/name}","comments_url":"https://api.github.com/repos/rust-random/rand/issues/1143/comments","events_url":"https://api.github.com/repos/rust-random/rand/issues/1143/events","html_url":"https://github.com/rust-random/rand/issues/1143","id":941320037,"node_id":"MDU6SXNzdWU5NDEzMjAwMzc=","number":1143,"title":"Support `CryptoRng` in `RngCore` trait objects","user":{"login":"aticu","id":16419880,"node_id":"MDQ6VXNlcjE2NDE5ODgw","avatar_url":"https://avatars.githubusercontent.com/u/16419880?v=4","gravatar_id":"","url":"https://api.github.com/users/aticu","html_url":"https://github.com/aticu","followers_url":"https://api.github.com/users/aticu/followers","following_url":"https://api.github.com/users/aticu/following{/other_user}","gists_url":"https://api.github.com/users/aticu/gists{/gist_id}","starred_url":"https://api.github.com/users/aticu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aticu/subscriptions","organizations_url":"https://api.github.com/users/aticu/orgs","repos_url":"https://api.github.com/users/aticu/repos","events_url":"https://api.github.com/users/aticu/events{/privacy}","received_events_url":"https://api.github.com/users/aticu/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":26,"created_at":"2021-07-10T20:37:02Z","updated_at":"2021-09-24T09:33:43Z","closed_at":"2021-09-24T09:33:43Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"## Summary\r\n\r\nChange `CryptoRng` such that it can be used as a random number generator through a trait object, by making it a subtrait of `RngCore`.\r\nThis would break existing `CryptoRng` implementations, which were previously not implementing `RngCore`, but those were likely of limited use.\r\n\r\n## Details\r\n\r\nChange the `CryptoRng` trait from this\r\n\r\n```rust\r\npub trait CryptoRng {}\r\n```\r\n\r\nto this\r\n\r\n```rust\r\npub trait CryptoRng: RngCore {}\r\n```\r\n\r\n## Motivation\r\n\r\nCurrently the use of `RngCore` is supported in trait objects, however because of how trait objects are implemented, it is not possible to use `CryptoRng` in addition in the trait object, thus making it impossible to actually use a `CryptoRng` as a random number generator in trait objects.\r\n\r\nThis change is really small and likely has very little negative impact on users who don't need this change, but it can enable another way to use the API for users who do need it.\r\n\r\n## Alternatives\r\n\r\n- Add a `CryptoRngCore` trait to the `rand_core` crate:\r\n  \r\n  ```rust\r\n  trait CryptoRngCore: RngCore + CryptoRng {}\r\n  impl<T: RngCore + CryptoRng> CryptoRngCore for T {}\r\n  ```\r\n  \r\n  This would allow users to use `RngCore + CryptoRng` types through trait objects as well, but at the cost of an additional trait in the (I presume intentionally) small `rand_core` crate.\r\n- Do nothing and let users implement the `CryptoRngCore` trait above if they need it.\r\n  \r\n  This allows them to use `RngCore + CryptoRng` types through trait objects, but since it isn't a unified solution, multiple equivalent traits with the exact same purpose and definition might pop up over time.\r\n\r\n  Optionally this pattern could also be documented in the `CryptoRng` trait.","closed_by":{"login":"dhardy","id":134893,"node_id":"MDQ6VXNlcjEzNDg5Mw==","avatar_url":"https://avatars.githubusercontent.com/u/134893?v=4","gravatar_id":"","url":"https://api.github.com/users/dhardy","html_url":"https://github.com/dhardy","followers_url":"https://api.github.com/users/dhardy/followers","following_url":"https://api.github.com/users/dhardy/following{/other_user}","gists_url":"https://api.github.com/users/dhardy/gists{/gist_id}","starred_url":"https://api.github.com/users/dhardy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dhardy/subscriptions","organizations_url":"https://api.github.com/users/dhardy/orgs","repos_url":"https://api.github.com/users/dhardy/repos","events_url":"https://api.github.com/users/dhardy/events{/privacy}","received_events_url":"https://api.github.com/users/dhardy/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/rust-random/rand/issues/1143/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rust-random/rand/issues/1143/timeline","performed_via_github_app":null,"state_reason":"completed"}