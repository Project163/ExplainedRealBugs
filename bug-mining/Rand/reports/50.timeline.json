[{"url":"https://api.github.com/repos/rust-random/rand/issues/comments/877707800","html_url":"https://github.com/rust-random/rand/issues/1143#issuecomment-877707800","issue_url":"https://api.github.com/repos/rust-random/rand/issues/1143","id":877707800,"node_id":"MDEyOklzc3VlQ29tbWVudDg3NzcwNzgwMA==","user":{"login":"dhardy","id":134893,"node_id":"MDQ6VXNlcjEzNDg5Mw==","avatar_url":"https://avatars.githubusercontent.com/u/134893?v=4","gravatar_id":"","url":"https://api.github.com/users/dhardy","html_url":"https://github.com/dhardy","followers_url":"https://api.github.com/users/dhardy/followers","following_url":"https://api.github.com/users/dhardy/following{/other_user}","gists_url":"https://api.github.com/users/dhardy/gists{/gist_id}","starred_url":"https://api.github.com/users/dhardy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dhardy/subscriptions","organizations_url":"https://api.github.com/users/dhardy/orgs","repos_url":"https://api.github.com/users/dhardy/repos","events_url":"https://api.github.com/users/dhardy/events{/privacy}","received_events_url":"https://api.github.com/users/dhardy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-07-10T21:37:01Z","updated_at":"2021-07-10T21:37:01Z","body":"Thanks for the clear RFC. I agree that the initial proposal makes sense, though it will likely to a while to land (or at least to affect downstream crates like `rand`) since it is a breaking change.\r\n\r\nEither way, we should allow some time for comments before making a decision.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rust-random/rand/issues/comments/877707800/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dhardy","id":134893,"node_id":"MDQ6VXNlcjEzNDg5Mw==","avatar_url":"https://avatars.githubusercontent.com/u/134893?v=4","gravatar_id":"","url":"https://api.github.com/users/dhardy","html_url":"https://github.com/dhardy","followers_url":"https://api.github.com/users/dhardy/followers","following_url":"https://api.github.com/users/dhardy/following{/other_user}","gists_url":"https://api.github.com/users/dhardy/gists{/gist_id}","starred_url":"https://api.github.com/users/dhardy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dhardy/subscriptions","organizations_url":"https://api.github.com/users/dhardy/orgs","repos_url":"https://api.github.com/users/dhardy/repos","events_url":"https://api.github.com/users/dhardy/events{/privacy}","received_events_url":"https://api.github.com/users/dhardy/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rust-random/rand/issues/comments/877708758","html_url":"https://github.com/rust-random/rand/issues/1143#issuecomment-877708758","issue_url":"https://api.github.com/repos/rust-random/rand/issues/1143","id":877708758,"node_id":"MDEyOklzc3VlQ29tbWVudDg3NzcwODc1OA==","user":{"login":"newpavlov","id":329626,"node_id":"MDQ6VXNlcjMyOTYyNg==","avatar_url":"https://avatars.githubusercontent.com/u/329626?v=4","gravatar_id":"","url":"https://api.github.com/users/newpavlov","html_url":"https://github.com/newpavlov","followers_url":"https://api.github.com/users/newpavlov/followers","following_url":"https://api.github.com/users/newpavlov/following{/other_user}","gists_url":"https://api.github.com/users/newpavlov/gists{/gist_id}","starred_url":"https://api.github.com/users/newpavlov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/newpavlov/subscriptions","organizations_url":"https://api.github.com/users/newpavlov/orgs","repos_url":"https://api.github.com/users/newpavlov/repos","events_url":"https://api.github.com/users/newpavlov/events{/privacy}","received_events_url":"https://api.github.com/users/newpavlov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-07-10T21:49:02Z","updated_at":"2021-07-10T21:49:02Z","body":"I wonder why we haven't done it initially... I vaguely remember there was kind of a reason for the current design, but I can't remember what was it exactly. If there are no significant obstacles to it, I also would prefer the subtrait approach.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rust-random/rand/issues/comments/877708758/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"newpavlov","id":329626,"node_id":"MDQ6VXNlcjMyOTYyNg==","avatar_url":"https://avatars.githubusercontent.com/u/329626?v=4","gravatar_id":"","url":"https://api.github.com/users/newpavlov","html_url":"https://github.com/newpavlov","followers_url":"https://api.github.com/users/newpavlov/followers","following_url":"https://api.github.com/users/newpavlov/following{/other_user}","gists_url":"https://api.github.com/users/newpavlov/gists{/gist_id}","starred_url":"https://api.github.com/users/newpavlov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/newpavlov/subscriptions","organizations_url":"https://api.github.com/users/newpavlov/orgs","repos_url":"https://api.github.com/users/newpavlov/repos","events_url":"https://api.github.com/users/newpavlov/events{/privacy}","received_events_url":"https://api.github.com/users/newpavlov/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rust-random/rand/issues/comments/877712149","html_url":"https://github.com/rust-random/rand/issues/1143#issuecomment-877712149","issue_url":"https://api.github.com/repos/rust-random/rand/issues/1143","id":877712149,"node_id":"MDEyOklzc3VlQ29tbWVudDg3NzcxMjE0OQ==","user":{"login":"vks","id":33460,"node_id":"MDQ6VXNlcjMzNDYw","avatar_url":"https://avatars.githubusercontent.com/u/33460?v=4","gravatar_id":"","url":"https://api.github.com/users/vks","html_url":"https://github.com/vks","followers_url":"https://api.github.com/users/vks/followers","following_url":"https://api.github.com/users/vks/following{/other_user}","gists_url":"https://api.github.com/users/vks/gists{/gist_id}","starred_url":"https://api.github.com/users/vks/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vks/subscriptions","organizations_url":"https://api.github.com/users/vks/orgs","repos_url":"https://api.github.com/users/vks/repos","events_url":"https://api.github.com/users/vks/events{/privacy}","received_events_url":"https://api.github.com/users/vks/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-07-10T22:27:29Z","updated_at":"2021-07-10T22:27:29Z","body":"Would it be possible to cast a `dyn RngCore` to a `dyn CryptoRng`?","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/rust-random/rand/issues/comments/877712149/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"vks","id":33460,"node_id":"MDQ6VXNlcjMzNDYw","avatar_url":"https://avatars.githubusercontent.com/u/33460?v=4","gravatar_id":"","url":"https://api.github.com/users/vks","html_url":"https://github.com/vks","followers_url":"https://api.github.com/users/vks/followers","following_url":"https://api.github.com/users/vks/following{/other_user}","gists_url":"https://api.github.com/users/vks/gists{/gist_id}","starred_url":"https://api.github.com/users/vks/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vks/subscriptions","organizations_url":"https://api.github.com/users/vks/orgs","repos_url":"https://api.github.com/users/vks/repos","events_url":"https://api.github.com/users/vks/events{/privacy}","received_events_url":"https://api.github.com/users/vks/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rust-random/rand/issues/comments/877713989","html_url":"https://github.com/rust-random/rand/issues/1143#issuecomment-877713989","issue_url":"https://api.github.com/repos/rust-random/rand/issues/1143","id":877713989,"node_id":"MDEyOklzc3VlQ29tbWVudDg3NzcxMzk4OQ==","user":{"login":"aticu","id":16419880,"node_id":"MDQ6VXNlcjE2NDE5ODgw","avatar_url":"https://avatars.githubusercontent.com/u/16419880?v=4","gravatar_id":"","url":"https://api.github.com/users/aticu","html_url":"https://github.com/aticu","followers_url":"https://api.github.com/users/aticu/followers","following_url":"https://api.github.com/users/aticu/following{/other_user}","gists_url":"https://api.github.com/users/aticu/gists{/gist_id}","starred_url":"https://api.github.com/users/aticu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aticu/subscriptions","organizations_url":"https://api.github.com/users/aticu/orgs","repos_url":"https://api.github.com/users/aticu/repos","events_url":"https://api.github.com/users/aticu/events{/privacy}","received_events_url":"https://api.github.com/users/aticu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-07-10T22:52:23Z","updated_at":"2021-07-10T22:52:23Z","body":"> Would it be possible to cast a `dyn RngCore` to a `dyn CryptoRng`?\r\n\r\nI don't think that would be possible even with unsafe code. At least not without undefined behavior, since you'd need have a valid `dyn CryptoRng` vtable somewhere, which is different from the vtable of `dyn RngCore`. Even if their layout is likely to be identical, this isn't guaranteed (unless I'm missing something here).\r\n\r\nThere would also not be any guarentee that the original `RngCore` object also implements the `CryptoRng` trait, making it UB to cast it without checking that some other way, even if such a cast was possible safely.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rust-random/rand/issues/comments/877713989/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"aticu","id":16419880,"node_id":"MDQ6VXNlcjE2NDE5ODgw","avatar_url":"https://avatars.githubusercontent.com/u/16419880?v=4","gravatar_id":"","url":"https://api.github.com/users/aticu","html_url":"https://github.com/aticu","followers_url":"https://api.github.com/users/aticu/followers","following_url":"https://api.github.com/users/aticu/following{/other_user}","gists_url":"https://api.github.com/users/aticu/gists{/gist_id}","starred_url":"https://api.github.com/users/aticu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aticu/subscriptions","organizations_url":"https://api.github.com/users/aticu/orgs","repos_url":"https://api.github.com/users/aticu/repos","events_url":"https://api.github.com/users/aticu/events{/privacy}","received_events_url":"https://api.github.com/users/aticu/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rust-random/rand/issues/comments/877769070","html_url":"https://github.com/rust-random/rand/issues/1143#issuecomment-877769070","issue_url":"https://api.github.com/repos/rust-random/rand/issues/1143","id":877769070,"node_id":"MDEyOklzc3VlQ29tbWVudDg3Nzc2OTA3MA==","user":{"login":"burdges","id":680126,"node_id":"MDQ6VXNlcjY4MDEyNg==","avatar_url":"https://avatars.githubusercontent.com/u/680126?v=4","gravatar_id":"","url":"https://api.github.com/users/burdges","html_url":"https://github.com/burdges","followers_url":"https://api.github.com/users/burdges/followers","following_url":"https://api.github.com/users/burdges/following{/other_user}","gists_url":"https://api.github.com/users/burdges/gists{/gist_id}","starred_url":"https://api.github.com/users/burdges/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/burdges/subscriptions","organizations_url":"https://api.github.com/users/burdges/orgs","repos_url":"https://api.github.com/users/burdges/repos","events_url":"https://api.github.com/users/burdges/events{/privacy}","received_events_url":"https://api.github.com/users/burdges/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-07-11T09:27:54Z","updated_at":"2021-07-11T09:28:41Z","body":"I'd expect casts from `dyn RngCore` to `dyn CryptoRng` would never work, but more importantly rust has no roadmap for casts from `dyn CryptoRng` to `dyn RngCore`, making them incompatible for the foreseeable future.  ATCs make casting among trait objects possible but complex, ala https://internals.rust-lang.org/t/casting-families-for-fast-dynamic-trait-object-casts-and-multi-trait-objects/12195 \r\n\r\nWe never knew if `CryptoRng` makes much sense:  We've so many like `ChaChaRng` where security depends upon the seed, so usually one wants a random oracle here.  We never knew if associated constants would eventually do this better or if more detailed information helps. \r\n```\r\npub enum RngSecurity {\r\n    Garbage,\r\n    NumericalMethods,\r\n    ???,\r\n    RandomOracle,\r\n    RandomnessSource,\r\n}\r\npub trait RngCore {\r\n    const SECURITY: RngSecurity = RngSecurity::RandomOracle;\r\n    fn next_u32(&mut self) -> u32;\r\n    fn next_u64(&mut self) -> u64;\r\n    fn fill_bytes(&mut self, dest: &mut [u8]);\r\n    fn try_fill_bytes(&mut self, dest: &mut [u8]) -> Result<(), Error>;\r\n}\r\n```\r\nI suppose one solution would be to deprecate `CryptoRng` but encourage people say what they want:\r\n```\r\npub trait RngCore {\r\n    fn information() { eprint!(::std::any::type_name()) }\r\n    fn contract(msg: &str) {\r\n        #[cfg(feature = \"contractreport\")]\r\n        {  information();  eprintln!(\"RngCore contract: {}\", msg);  }\r\n    }\r\n    fn next_u32(&mut self) -> u32;\r\n    fn next_u64(&mut self) -> u64;\r\n    fn fill_bytes(&mut self, dest: &mut [u8]);\r\n    fn try_fill_bytes(&mut self, dest: &mut [u8]) -> Result<(), Error>;\r\n}\r\n\r\npub trait SeedableRng: Sized {\r\n    fn information() { eprint!(::std::any::type_name()) }\r\n    fn contract(msg: &str) {\r\n        #[cfg(feature = \"contractreport\")]\r\n        {  information();  eprintln!(\"SeedableRng contract: {}\", msg);  }\r\n    }\r\n    type Seed: Sized + Default + AsMut<[u8]>;\r\n    fn from_seed(seed: Self::Seed) -> Self;\r\n    fn seed_from_u64(state: u64) -> Self { ... }\r\n    fn from_rng<R: RngCore>(rng: R) -> Result<Self, Error> { ... }\r\n    fn from_entropy() -> Self { ... }\r\n}\r\n```\r\nso folks could insert any warnings the like via say\r\n```\r\nfn information() { eprint!(\"Non-RandomOracle {}\", ::std::any::type_name()) }\r\n``` \r\nand if you ask then you get messages like \"Non-RandomOracle XorShiftRng contract: Random Oracle\".  \r\n\r\nIdeally formal methods and design by contract folks would spend more time developing rust tooling outside rustc itself. ","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rust-random/rand/issues/comments/877769070/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"burdges","id":680126,"node_id":"MDQ6VXNlcjY4MDEyNg==","avatar_url":"https://avatars.githubusercontent.com/u/680126?v=4","gravatar_id":"","url":"https://api.github.com/users/burdges","html_url":"https://github.com/burdges","followers_url":"https://api.github.com/users/burdges/followers","following_url":"https://api.github.com/users/burdges/following{/other_user}","gists_url":"https://api.github.com/users/burdges/gists{/gist_id}","starred_url":"https://api.github.com/users/burdges/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/burdges/subscriptions","organizations_url":"https://api.github.com/users/burdges/orgs","repos_url":"https://api.github.com/users/burdges/repos","events_url":"https://api.github.com/users/burdges/events{/privacy}","received_events_url":"https://api.github.com/users/burdges/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rust-random/rand/issues/comments/877769941","html_url":"https://github.com/rust-random/rand/issues/1143#issuecomment-877769941","issue_url":"https://api.github.com/repos/rust-random/rand/issues/1143","id":877769941,"node_id":"MDEyOklzc3VlQ29tbWVudDg3Nzc2OTk0MQ==","user":{"login":"dhardy","id":134893,"node_id":"MDQ6VXNlcjEzNDg5Mw==","avatar_url":"https://avatars.githubusercontent.com/u/134893?v=4","gravatar_id":"","url":"https://api.github.com/users/dhardy","html_url":"https://github.com/dhardy","followers_url":"https://api.github.com/users/dhardy/followers","following_url":"https://api.github.com/users/dhardy/following{/other_user}","gists_url":"https://api.github.com/users/dhardy/gists{/gist_id}","starred_url":"https://api.github.com/users/dhardy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dhardy/subscriptions","organizations_url":"https://api.github.com/users/dhardy/orgs","repos_url":"https://api.github.com/users/dhardy/repos","events_url":"https://api.github.com/users/dhardy/events{/privacy}","received_events_url":"https://api.github.com/users/dhardy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-07-11T09:35:46Z","updated_at":"2021-07-11T09:35:46Z","body":"After sleeping on it I remember there is a reason we can't *just* implement this: `CryptoRng` is implemented on non-RNGs [such as `ChaChaXCore`](https://github.com/rust-random/rand/blob/master/rand_chacha/src/chacha.rs#L108) so that `CryptoRng` is [implemented on the derived RNG](https://github.com/rust-random/rand/blob/master/rand_core/src/block.rs#L437).\r\n\r\nSo maybe the `CryptoRngCore` alternative is a better idea.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rust-random/rand/issues/comments/877769941/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dhardy","id":134893,"node_id":"MDQ6VXNlcjEzNDg5Mw==","avatar_url":"https://avatars.githubusercontent.com/u/134893?v=4","gravatar_id":"","url":"https://api.github.com/users/dhardy","html_url":"https://github.com/dhardy","followers_url":"https://api.github.com/users/dhardy/followers","following_url":"https://api.github.com/users/dhardy/following{/other_user}","gists_url":"https://api.github.com/users/dhardy/gists{/gist_id}","starred_url":"https://api.github.com/users/dhardy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dhardy/subscriptions","organizations_url":"https://api.github.com/users/dhardy/orgs","repos_url":"https://api.github.com/users/dhardy/repos","events_url":"https://api.github.com/users/dhardy/events{/privacy}","received_events_url":"https://api.github.com/users/dhardy/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rust-random/rand/issues/comments/877810107","html_url":"https://github.com/rust-random/rand/issues/1143#issuecomment-877810107","issue_url":"https://api.github.com/repos/rust-random/rand/issues/1143","id":877810107,"node_id":"MDEyOklzc3VlQ29tbWVudDg3NzgxMDEwNw==","user":{"login":"newpavlov","id":329626,"node_id":"MDQ6VXNlcjMyOTYyNg==","avatar_url":"https://avatars.githubusercontent.com/u/329626?v=4","gravatar_id":"","url":"https://api.github.com/users/newpavlov","html_url":"https://github.com/newpavlov","followers_url":"https://api.github.com/users/newpavlov/followers","following_url":"https://api.github.com/users/newpavlov/following{/other_user}","gists_url":"https://api.github.com/users/newpavlov/gists{/gist_id}","starred_url":"https://api.github.com/users/newpavlov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/newpavlov/subscriptions","organizations_url":"https://api.github.com/users/newpavlov/orgs","repos_url":"https://api.github.com/users/newpavlov/repos","events_url":"https://api.github.com/users/newpavlov/events{/privacy}","received_events_url":"https://api.github.com/users/newpavlov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-07-11T14:32:51Z","updated_at":"2021-07-11T14:32:51Z","body":">CryptoRng is implemented on non-RNGs such as ChaChaXCore so that CryptoRng is implemented on the derived RNG.\r\n\r\nAh, yes! It was exactly that. I think that instead of `CryptoRngCore` a better alternative would be to introduce `CryptoBlockRng`:\r\n```rust\r\ntrait CryptoBlockRng: BlockRngCore {}\r\ntrait CryptoRng: RngCore {}\r\n\r\nimpl<T: BlockRngCore> RngCore for BlockRng<T> { .. }\r\nimpl<T: CryptoBlockRng> CryptoRng for BlockRng<T> {}\r\n```","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rust-random/rand/issues/comments/877810107/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"newpavlov","id":329626,"node_id":"MDQ6VXNlcjMyOTYyNg==","avatar_url":"https://avatars.githubusercontent.com/u/329626?v=4","gravatar_id":"","url":"https://api.github.com/users/newpavlov","html_url":"https://github.com/newpavlov","followers_url":"https://api.github.com/users/newpavlov/followers","following_url":"https://api.github.com/users/newpavlov/following{/other_user}","gists_url":"https://api.github.com/users/newpavlov/gists{/gist_id}","starred_url":"https://api.github.com/users/newpavlov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/newpavlov/subscriptions","organizations_url":"https://api.github.com/users/newpavlov/orgs","repos_url":"https://api.github.com/users/newpavlov/repos","events_url":"https://api.github.com/users/newpavlov/events{/privacy}","received_events_url":"https://api.github.com/users/newpavlov/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rust-random/rand/issues/comments/877821667","html_url":"https://github.com/rust-random/rand/issues/1143#issuecomment-877821667","issue_url":"https://api.github.com/repos/rust-random/rand/issues/1143","id":877821667,"node_id":"MDEyOklzc3VlQ29tbWVudDg3NzgyMTY2Nw==","user":{"login":"aticu","id":16419880,"node_id":"MDQ6VXNlcjE2NDE5ODgw","avatar_url":"https://avatars.githubusercontent.com/u/16419880?v=4","gravatar_id":"","url":"https://api.github.com/users/aticu","html_url":"https://github.com/aticu","followers_url":"https://api.github.com/users/aticu/followers","following_url":"https://api.github.com/users/aticu/following{/other_user}","gists_url":"https://api.github.com/users/aticu/gists{/gist_id}","starred_url":"https://api.github.com/users/aticu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aticu/subscriptions","organizations_url":"https://api.github.com/users/aticu/orgs","repos_url":"https://api.github.com/users/aticu/repos","events_url":"https://api.github.com/users/aticu/events{/privacy}","received_events_url":"https://api.github.com/users/aticu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-07-11T15:34:03Z","updated_at":"2021-07-11T15:34:03Z","body":"> I think that instead of `CryptoRngCore` a better alternative would be to introduce `CryptoBlockRng`:\r\n\r\nWhile I do think that would be a better solution when designing a new API, it likely isn't feasible in this situation, since does have a much bigger impact on downstream users.\r\n\r\n`CryptoRng + BlockRngCore` would go from semantically meaning \"this is a block RNG suitable for cryptographic use\" to meaning \"this is an RNG suitable for cryptographic use that also happens to be a block RNG not necessarily suitable for cryptographic use\".\r\n\r\nCompletely changing the meaning of traits (especially \"marker\" traits like `CryptoRng`) is a change that may even silently break things in some situations.\r\n\r\nSeeing how `CryptoRng` is also used for `BlockRngCore`, I also think that a `CryptoRngCore` trait (and `CryptoBlockRngCore`) would be the better solution here.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rust-random/rand/issues/comments/877821667/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"aticu","id":16419880,"node_id":"MDQ6VXNlcjE2NDE5ODgw","avatar_url":"https://avatars.githubusercontent.com/u/16419880?v=4","gravatar_id":"","url":"https://api.github.com/users/aticu","html_url":"https://github.com/aticu","followers_url":"https://api.github.com/users/aticu/followers","following_url":"https://api.github.com/users/aticu/following{/other_user}","gists_url":"https://api.github.com/users/aticu/gists{/gist_id}","starred_url":"https://api.github.com/users/aticu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aticu/subscriptions","organizations_url":"https://api.github.com/users/aticu/orgs","repos_url":"https://api.github.com/users/aticu/repos","events_url":"https://api.github.com/users/aticu/events{/privacy}","received_events_url":"https://api.github.com/users/aticu/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rust-random/rand/issues/comments/877835834","html_url":"https://github.com/rust-random/rand/issues/1143#issuecomment-877835834","issue_url":"https://api.github.com/repos/rust-random/rand/issues/1143","id":877835834,"node_id":"MDEyOklzc3VlQ29tbWVudDg3NzgzNTgzNA==","user":{"login":"dhardy","id":134893,"node_id":"MDQ6VXNlcjEzNDg5Mw==","avatar_url":"https://avatars.githubusercontent.com/u/134893?v=4","gravatar_id":"","url":"https://api.github.com/users/dhardy","html_url":"https://github.com/dhardy","followers_url":"https://api.github.com/users/dhardy/followers","following_url":"https://api.github.com/users/dhardy/following{/other_user}","gists_url":"https://api.github.com/users/dhardy/gists{/gist_id}","starred_url":"https://api.github.com/users/dhardy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dhardy/subscriptions","organizations_url":"https://api.github.com/users/dhardy/orgs","repos_url":"https://api.github.com/users/dhardy/repos","events_url":"https://api.github.com/users/dhardy/events{/privacy}","received_events_url":"https://api.github.com/users/dhardy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-07-11T17:29:41Z","updated_at":"2021-07-11T17:29:41Z","body":"@aticu I agree that the less breaking change is desirable. The naming of your suggestions in unfortunate though:\r\n\r\n- `RngCore` is what RNGs implement; `Rng` is the automatically impl'd user trait for all `RngCore`\r\n- `CryptoRng` is a pure marker trait; the proposed `CryptoRngCore` is that marker + an extension over `RngCore`","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rust-random/rand/issues/comments/877835834/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dhardy","id":134893,"node_id":"MDQ6VXNlcjEzNDg5Mw==","avatar_url":"https://avatars.githubusercontent.com/u/134893?v=4","gravatar_id":"","url":"https://api.github.com/users/dhardy","html_url":"https://github.com/dhardy","followers_url":"https://api.github.com/users/dhardy/followers","following_url":"https://api.github.com/users/dhardy/following{/other_user}","gists_url":"https://api.github.com/users/dhardy/gists{/gist_id}","starred_url":"https://api.github.com/users/dhardy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dhardy/subscriptions","organizations_url":"https://api.github.com/users/dhardy/orgs","repos_url":"https://api.github.com/users/dhardy/repos","events_url":"https://api.github.com/users/dhardy/events{/privacy}","received_events_url":"https://api.github.com/users/dhardy/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":5004370127,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NTAwNDM3MDEyNw==","url":"https://api.github.com/repos/rust-random/rand/issues/events/5004370127","actor":{"login":"aticu","id":16419880,"node_id":"MDQ6VXNlcjE2NDE5ODgw","avatar_url":"https://avatars.githubusercontent.com/u/16419880?v=4","gravatar_id":"","url":"https://api.github.com/users/aticu","html_url":"https://github.com/aticu","followers_url":"https://api.github.com/users/aticu/followers","following_url":"https://api.github.com/users/aticu/following{/other_user}","gists_url":"https://api.github.com/users/aticu/gists{/gist_id}","starred_url":"https://api.github.com/users/aticu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aticu/subscriptions","organizations_url":"https://api.github.com/users/aticu/orgs","repos_url":"https://api.github.com/users/aticu/repos","events_url":"https://api.github.com/users/aticu/events{/privacy}","received_events_url":"https://api.github.com/users/aticu/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-07-11T17:29:41Z","performed_via_github_app":null},{"id":5004370128,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDUwMDQzNzAxMjg=","url":"https://api.github.com/repos/rust-random/rand/issues/events/5004370128","actor":{"login":"aticu","id":16419880,"node_id":"MDQ6VXNlcjE2NDE5ODgw","avatar_url":"https://avatars.githubusercontent.com/u/16419880?v=4","gravatar_id":"","url":"https://api.github.com/users/aticu","html_url":"https://github.com/aticu","followers_url":"https://api.github.com/users/aticu/followers","following_url":"https://api.github.com/users/aticu/following{/other_user}","gists_url":"https://api.github.com/users/aticu/gists{/gist_id}","starred_url":"https://api.github.com/users/aticu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aticu/subscriptions","organizations_url":"https://api.github.com/users/aticu/orgs","repos_url":"https://api.github.com/users/aticu/repos","events_url":"https://api.github.com/users/aticu/events{/privacy}","received_events_url":"https://api.github.com/users/aticu/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-07-11T17:29:41Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rust-random/rand/issues/comments/877860998","html_url":"https://github.com/rust-random/rand/issues/1143#issuecomment-877860998","issue_url":"https://api.github.com/repos/rust-random/rand/issues/1143","id":877860998,"node_id":"MDEyOklzc3VlQ29tbWVudDg3Nzg2MDk5OA==","user":{"login":"aticu","id":16419880,"node_id":"MDQ6VXNlcjE2NDE5ODgw","avatar_url":"https://avatars.githubusercontent.com/u/16419880?v=4","gravatar_id":"","url":"https://api.github.com/users/aticu","html_url":"https://github.com/aticu","followers_url":"https://api.github.com/users/aticu/followers","following_url":"https://api.github.com/users/aticu/following{/other_user}","gists_url":"https://api.github.com/users/aticu/gists{/gist_id}","starred_url":"https://api.github.com/users/aticu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aticu/subscriptions","organizations_url":"https://api.github.com/users/aticu/orgs","repos_url":"https://api.github.com/users/aticu/repos","events_url":"https://api.github.com/users/aticu/events{/privacy}","received_events_url":"https://api.github.com/users/aticu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-07-11T21:02:29Z","updated_at":"2021-07-11T21:02:29Z","body":"@dhardy Adding a new trait wouldn't be a breaking change at all.\r\n\r\nNaming is (as always) tough to get right.\r\nI think you parsed the name `CryptoRngCore` differently.\r\nI read it as `Crypto(RngCore)`, whereas I think you read it as `(CryptoRng)Core`.\r\nI do agree that this ambiguity is a problem.\r\n\r\nHere are some alternative naming ideas, thought I'm not a huge fan of any one of them:\r\n\r\n- `CryptoCompatibleRngCore` & `CryptoCompatibleBlockRngCore`\r\n- `RngCoreWithCrypto` & `BlockRngCoreWithCrypto`\r\n- `RngCoreWithCryptoRng` & `BlockRngCoreWithCryptoRng`\r\n- `RngCryptoCore` & `BlockRngCryptoCore`\r\n\r\nI personally don't really care a lot what the name would be if this were added, but I still think a good name is important, so if you have any better ideas, I'd be open to them.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rust-random/rand/issues/comments/877860998/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"aticu","id":16419880,"node_id":"MDQ6VXNlcjE2NDE5ODgw","avatar_url":"https://avatars.githubusercontent.com/u/16419880?v=4","gravatar_id":"","url":"https://api.github.com/users/aticu","html_url":"https://github.com/aticu","followers_url":"https://api.github.com/users/aticu/followers","following_url":"https://api.github.com/users/aticu/following{/other_user}","gists_url":"https://api.github.com/users/aticu/gists{/gist_id}","starred_url":"https://api.github.com/users/aticu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aticu/subscriptions","organizations_url":"https://api.github.com/users/aticu/orgs","repos_url":"https://api.github.com/users/aticu/repos","events_url":"https://api.github.com/users/aticu/events{/privacy}","received_events_url":"https://api.github.com/users/aticu/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":5004520017,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NTAwNDUyMDAxNw==","url":"https://api.github.com/repos/rust-random/rand/issues/events/5004520017","actor":{"login":"dhardy","id":134893,"node_id":"MDQ6VXNlcjEzNDg5Mw==","avatar_url":"https://avatars.githubusercontent.com/u/134893?v=4","gravatar_id":"","url":"https://api.github.com/users/dhardy","html_url":"https://github.com/dhardy","followers_url":"https://api.github.com/users/dhardy/followers","following_url":"https://api.github.com/users/dhardy/following{/other_user}","gists_url":"https://api.github.com/users/dhardy/gists{/gist_id}","starred_url":"https://api.github.com/users/dhardy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dhardy/subscriptions","organizations_url":"https://api.github.com/users/dhardy/orgs","repos_url":"https://api.github.com/users/dhardy/repos","events_url":"https://api.github.com/users/dhardy/events{/privacy}","received_events_url":"https://api.github.com/users/dhardy/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-07-11T21:02:30Z","performed_via_github_app":null},{"id":5004520019,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDUwMDQ1MjAwMTk=","url":"https://api.github.com/repos/rust-random/rand/issues/events/5004520019","actor":{"login":"dhardy","id":134893,"node_id":"MDQ6VXNlcjEzNDg5Mw==","avatar_url":"https://avatars.githubusercontent.com/u/134893?v=4","gravatar_id":"","url":"https://api.github.com/users/dhardy","html_url":"https://github.com/dhardy","followers_url":"https://api.github.com/users/dhardy/followers","following_url":"https://api.github.com/users/dhardy/following{/other_user}","gists_url":"https://api.github.com/users/dhardy/gists{/gist_id}","starred_url":"https://api.github.com/users/dhardy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dhardy/subscriptions","organizations_url":"https://api.github.com/users/dhardy/orgs","repos_url":"https://api.github.com/users/dhardy/repos","events_url":"https://api.github.com/users/dhardy/events{/privacy}","received_events_url":"https://api.github.com/users/dhardy/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-07-11T21:02:30Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rust-random/rand/issues/comments/877862069","html_url":"https://github.com/rust-random/rand/issues/1143#issuecomment-877862069","issue_url":"https://api.github.com/repos/rust-random/rand/issues/1143","id":877862069,"node_id":"MDEyOklzc3VlQ29tbWVudDg3Nzg2MjA2OQ==","user":{"login":"burdges","id":680126,"node_id":"MDQ6VXNlcjY4MDEyNg==","avatar_url":"https://avatars.githubusercontent.com/u/680126?v=4","gravatar_id":"","url":"https://api.github.com/users/burdges","html_url":"https://github.com/burdges","followers_url":"https://api.github.com/users/burdges/followers","following_url":"https://api.github.com/users/burdges/following{/other_user}","gists_url":"https://api.github.com/users/burdges/gists{/gist_id}","starred_url":"https://api.github.com/users/burdges/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/burdges/subscriptions","organizations_url":"https://api.github.com/users/burdges/orgs","repos_url":"https://api.github.com/users/burdges/repos","events_url":"https://api.github.com/users/burdges/events{/privacy}","received_events_url":"https://api.github.com/users/burdges/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-07-11T21:09:55Z","updated_at":"2021-07-11T21:09:55Z","body":"We should seriously consider deprecating `CryptoRng` entirely because honestly `dyn RngCore` vs `dyn CryptoRngCore` sounds like a Hobson's choice or worse.  It's possible this problem simply lies out of scope for rust's type system.\r\n\r\nAside from the `fn contract(msg: &str)` and associated const tricks I mentioned upthread, we might ask @RalfJung if he foresees any interesting tricks for enforcing this sort of contract with miri runs not traits, and maybe the hacspec authors @denismerigoux and @franziskuskiefer if they see anything. \r\n\r\nAn RFC for permitting `dyn RealTrait + CustomMarkerTrait` may already exists too.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rust-random/rand/issues/comments/877862069/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"burdges","id":680126,"node_id":"MDQ6VXNlcjY4MDEyNg==","avatar_url":"https://avatars.githubusercontent.com/u/680126?v=4","gravatar_id":"","url":"https://api.github.com/users/burdges","html_url":"https://github.com/burdges","followers_url":"https://api.github.com/users/burdges/followers","following_url":"https://api.github.com/users/burdges/following{/other_user}","gists_url":"https://api.github.com/users/burdges/gists{/gist_id}","starred_url":"https://api.github.com/users/burdges/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/burdges/subscriptions","organizations_url":"https://api.github.com/users/burdges/orgs","repos_url":"https://api.github.com/users/burdges/repos","events_url":"https://api.github.com/users/burdges/events{/privacy}","received_events_url":"https://api.github.com/users/burdges/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":5004525632,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NTAwNDUyNTYzMg==","url":"https://api.github.com/repos/rust-random/rand/issues/events/5004525632","actor":{"login":"RalfJung","id":330628,"node_id":"MDQ6VXNlcjMzMDYyOA==","avatar_url":"https://avatars.githubusercontent.com/u/330628?v=4","gravatar_id":"","url":"https://api.github.com/users/RalfJung","html_url":"https://github.com/RalfJung","followers_url":"https://api.github.com/users/RalfJung/followers","following_url":"https://api.github.com/users/RalfJung/following{/other_user}","gists_url":"https://api.github.com/users/RalfJung/gists{/gist_id}","starred_url":"https://api.github.com/users/RalfJung/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RalfJung/subscriptions","organizations_url":"https://api.github.com/users/RalfJung/orgs","repos_url":"https://api.github.com/users/RalfJung/repos","events_url":"https://api.github.com/users/RalfJung/events{/privacy}","received_events_url":"https://api.github.com/users/RalfJung/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-07-11T21:09:55Z","performed_via_github_app":null},{"id":5004525633,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDUwMDQ1MjU2MzM=","url":"https://api.github.com/repos/rust-random/rand/issues/events/5004525633","actor":{"login":"RalfJung","id":330628,"node_id":"MDQ6VXNlcjMzMDYyOA==","avatar_url":"https://avatars.githubusercontent.com/u/330628?v=4","gravatar_id":"","url":"https://api.github.com/users/RalfJung","html_url":"https://github.com/RalfJung","followers_url":"https://api.github.com/users/RalfJung/followers","following_url":"https://api.github.com/users/RalfJung/following{/other_user}","gists_url":"https://api.github.com/users/RalfJung/gists{/gist_id}","starred_url":"https://api.github.com/users/RalfJung/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RalfJung/subscriptions","organizations_url":"https://api.github.com/users/RalfJung/orgs","repos_url":"https://api.github.com/users/RalfJung/repos","events_url":"https://api.github.com/users/RalfJung/events{/privacy}","received_events_url":"https://api.github.com/users/RalfJung/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-07-11T21:09:55Z","performed_via_github_app":null},{"id":5004525635,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NTAwNDUyNTYzNQ==","url":"https://api.github.com/repos/rust-random/rand/issues/events/5004525635","actor":{"login":"franziskuskiefer","id":890105,"node_id":"MDQ6VXNlcjg5MDEwNQ==","avatar_url":"https://avatars.githubusercontent.com/u/890105?v=4","gravatar_id":"","url":"https://api.github.com/users/franziskuskiefer","html_url":"https://github.com/franziskuskiefer","followers_url":"https://api.github.com/users/franziskuskiefer/followers","following_url":"https://api.github.com/users/franziskuskiefer/following{/other_user}","gists_url":"https://api.github.com/users/franziskuskiefer/gists{/gist_id}","starred_url":"https://api.github.com/users/franziskuskiefer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/franziskuskiefer/subscriptions","organizations_url":"https://api.github.com/users/franziskuskiefer/orgs","repos_url":"https://api.github.com/users/franziskuskiefer/repos","events_url":"https://api.github.com/users/franziskuskiefer/events{/privacy}","received_events_url":"https://api.github.com/users/franziskuskiefer/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-07-11T21:09:55Z","performed_via_github_app":null},{"id":5004525636,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDUwMDQ1MjU2MzY=","url":"https://api.github.com/repos/rust-random/rand/issues/events/5004525636","actor":{"login":"franziskuskiefer","id":890105,"node_id":"MDQ6VXNlcjg5MDEwNQ==","avatar_url":"https://avatars.githubusercontent.com/u/890105?v=4","gravatar_id":"","url":"https://api.github.com/users/franziskuskiefer","html_url":"https://github.com/franziskuskiefer","followers_url":"https://api.github.com/users/franziskuskiefer/followers","following_url":"https://api.github.com/users/franziskuskiefer/following{/other_user}","gists_url":"https://api.github.com/users/franziskuskiefer/gists{/gist_id}","starred_url":"https://api.github.com/users/franziskuskiefer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/franziskuskiefer/subscriptions","organizations_url":"https://api.github.com/users/franziskuskiefer/orgs","repos_url":"https://api.github.com/users/franziskuskiefer/repos","events_url":"https://api.github.com/users/franziskuskiefer/events{/privacy}","received_events_url":"https://api.github.com/users/franziskuskiefer/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-07-11T21:09:55Z","performed_via_github_app":null},{"id":5004525638,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NTAwNDUyNTYzOA==","url":"https://api.github.com/repos/rust-random/rand/issues/events/5004525638","actor":{"login":"denismerigoux","id":1766128,"node_id":"MDQ6VXNlcjE3NjYxMjg=","avatar_url":"https://avatars.githubusercontent.com/u/1766128?v=4","gravatar_id":"","url":"https://api.github.com/users/denismerigoux","html_url":"https://github.com/denismerigoux","followers_url":"https://api.github.com/users/denismerigoux/followers","following_url":"https://api.github.com/users/denismerigoux/following{/other_user}","gists_url":"https://api.github.com/users/denismerigoux/gists{/gist_id}","starred_url":"https://api.github.com/users/denismerigoux/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/denismerigoux/subscriptions","organizations_url":"https://api.github.com/users/denismerigoux/orgs","repos_url":"https://api.github.com/users/denismerigoux/repos","events_url":"https://api.github.com/users/denismerigoux/events{/privacy}","received_events_url":"https://api.github.com/users/denismerigoux/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-07-11T21:09:55Z","performed_via_github_app":null},{"id":5004525639,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDUwMDQ1MjU2Mzk=","url":"https://api.github.com/repos/rust-random/rand/issues/events/5004525639","actor":{"login":"denismerigoux","id":1766128,"node_id":"MDQ6VXNlcjE3NjYxMjg=","avatar_url":"https://avatars.githubusercontent.com/u/1766128?v=4","gravatar_id":"","url":"https://api.github.com/users/denismerigoux","html_url":"https://github.com/denismerigoux","followers_url":"https://api.github.com/users/denismerigoux/followers","following_url":"https://api.github.com/users/denismerigoux/following{/other_user}","gists_url":"https://api.github.com/users/denismerigoux/gists{/gist_id}","starred_url":"https://api.github.com/users/denismerigoux/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/denismerigoux/subscriptions","organizations_url":"https://api.github.com/users/denismerigoux/orgs","repos_url":"https://api.github.com/users/denismerigoux/repos","events_url":"https://api.github.com/users/denismerigoux/events{/privacy}","received_events_url":"https://api.github.com/users/denismerigoux/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-07-11T21:09:55Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rust-random/rand/issues/comments/877866142","html_url":"https://github.com/rust-random/rand/issues/1143#issuecomment-877866142","issue_url":"https://api.github.com/repos/rust-random/rand/issues/1143","id":877866142,"node_id":"MDEyOklzc3VlQ29tbWVudDg3Nzg2NjE0Mg==","user":{"login":"newpavlov","id":329626,"node_id":"MDQ6VXNlcjMyOTYyNg==","avatar_url":"https://avatars.githubusercontent.com/u/329626?v=4","gravatar_id":"","url":"https://api.github.com/users/newpavlov","html_url":"https://github.com/newpavlov","followers_url":"https://api.github.com/users/newpavlov/followers","following_url":"https://api.github.com/users/newpavlov/following{/other_user}","gists_url":"https://api.github.com/users/newpavlov/gists{/gist_id}","starred_url":"https://api.github.com/users/newpavlov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/newpavlov/subscriptions","organizations_url":"https://api.github.com/users/newpavlov/orgs","repos_url":"https://api.github.com/users/newpavlov/repos","events_url":"https://api.github.com/users/newpavlov/events{/privacy}","received_events_url":"https://api.github.com/users/newpavlov/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-07-11T21:48:35Z","updated_at":"2021-07-11T22:15:34Z","body":"@aticu \r\n>CryptoRng + BlockRngCore would go from semantically meaning \"this is a block RNG suitable for cryptographic use\" to meaning \"this is an RNG suitable for cryptographic use that also happens to be a block RNG not necessarily suitable for cryptographic use\".\r\n>\r\n>Completely changing the meaning of traits (especially \"marker\" traits like CryptoRng) is a change that may even silently break things in some situations.\r\n\r\nI should've been more clear: the proposal was for the next breaking release of `rand_core`. Of course, in the described form it's a clear breaking change which should not be shipped in a patch release. Assuming it will be done in `rand_core v0.7`, in the worst case scenario developer of an implementation crate during migration to v0.7 may forget to change impl from `CryptoRng` to `CryptoBlockRng` for its block RNG. Users of this crate may then encounter a compilation error, which should be fixable quick enough by reporting a bug in the implementation crate. Yes, it could be somewhat annoying, but nothing close to the silent breakage mentioned in your post.\r\n\r\nI think that the `CryptoRngCore` trait could be a fine stop-gap solution for `rand_core v0.6`. Another possible alternative is to introduce the two sub-traits without removing the existing `CryptoRng`:\r\n```rust\r\n// will be removed in rand_core v0.7\r\ntrait CryptoRng {}\r\n\r\ntrait CryptoBlockRngCore: BlockRngCore {}\r\ntrait CryptoRngCore: RngCore {}\r\n\r\nimpl<T: BlockRngCore> RngCore for BlockRng<T> { .. }\r\nimpl<T: CryptoBlockRngCore> CryptoRngCore for BlockRng<T> {}\r\n\r\nimpl<T: CryptoRng + BlockRngCore> CryptoBlockRngCore for T {}\r\nimpl<T: CryptoRng + RngCore> CryptoRngCore for T {}\r\n\r\n// alternatively we can add impls in different direction:\r\nimpl<T: CryptoBlockRngCore> CryptoRng for T {}\r\nimpl<T: CryptoRngCore> CryptoRng for T {}\r\n```\r\n\r\nIt will cause a bit of churn in downstream crates, but I think replacing `impl CryptoRng + RngCore` with `impl CryptoRngCore`.\r\n\r\n@burdges \r\n>We should seriously consider deprecating CryptoRng entirely\r\n\r\nAs one of the RustCrypto maintainers I am strongly against that. I do not want for our users to accidentally plug clearly insecure RNGs into cryptographic code. Yes, the `CryptoRng` trait is not an absolute protection, but it's significantly better than nothing.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rust-random/rand/issues/comments/877866142/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"newpavlov","id":329626,"node_id":"MDQ6VXNlcjMyOTYyNg==","avatar_url":"https://avatars.githubusercontent.com/u/329626?v=4","gravatar_id":"","url":"https://api.github.com/users/newpavlov","html_url":"https://github.com/newpavlov","followers_url":"https://api.github.com/users/newpavlov/followers","following_url":"https://api.github.com/users/newpavlov/following{/other_user}","gists_url":"https://api.github.com/users/newpavlov/gists{/gist_id}","starred_url":"https://api.github.com/users/newpavlov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/newpavlov/subscriptions","organizations_url":"https://api.github.com/users/newpavlov/orgs","repos_url":"https://api.github.com/users/newpavlov/repos","events_url":"https://api.github.com/users/newpavlov/events{/privacy}","received_events_url":"https://api.github.com/users/newpavlov/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":5004551440,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NTAwNDU1MTQ0MA==","url":"https://api.github.com/repos/rust-random/rand/issues/events/5004551440","actor":{"login":"burdges","id":680126,"node_id":"MDQ6VXNlcjY4MDEyNg==","avatar_url":"https://avatars.githubusercontent.com/u/680126?v=4","gravatar_id":"","url":"https://api.github.com/users/burdges","html_url":"https://github.com/burdges","followers_url":"https://api.github.com/users/burdges/followers","following_url":"https://api.github.com/users/burdges/following{/other_user}","gists_url":"https://api.github.com/users/burdges/gists{/gist_id}","starred_url":"https://api.github.com/users/burdges/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/burdges/subscriptions","organizations_url":"https://api.github.com/users/burdges/orgs","repos_url":"https://api.github.com/users/burdges/repos","events_url":"https://api.github.com/users/burdges/events{/privacy}","received_events_url":"https://api.github.com/users/burdges/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-07-11T21:48:35Z","performed_via_github_app":null},{"id":5004551441,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDUwMDQ1NTE0NDE=","url":"https://api.github.com/repos/rust-random/rand/issues/events/5004551441","actor":{"login":"burdges","id":680126,"node_id":"MDQ6VXNlcjY4MDEyNg==","avatar_url":"https://avatars.githubusercontent.com/u/680126?v=4","gravatar_id":"","url":"https://api.github.com/users/burdges","html_url":"https://github.com/burdges","followers_url":"https://api.github.com/users/burdges/followers","following_url":"https://api.github.com/users/burdges/following{/other_user}","gists_url":"https://api.github.com/users/burdges/gists{/gist_id}","starred_url":"https://api.github.com/users/burdges/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/burdges/subscriptions","organizations_url":"https://api.github.com/users/burdges/orgs","repos_url":"https://api.github.com/users/burdges/repos","events_url":"https://api.github.com/users/burdges/events{/privacy}","received_events_url":"https://api.github.com/users/burdges/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-07-11T21:48:35Z","performed_via_github_app":null},{"id":5004551442,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NTAwNDU1MTQ0Mg==","url":"https://api.github.com/repos/rust-random/rand/issues/events/5004551442","actor":{"login":"aticu","id":16419880,"node_id":"MDQ6VXNlcjE2NDE5ODgw","avatar_url":"https://avatars.githubusercontent.com/u/16419880?v=4","gravatar_id":"","url":"https://api.github.com/users/aticu","html_url":"https://github.com/aticu","followers_url":"https://api.github.com/users/aticu/followers","following_url":"https://api.github.com/users/aticu/following{/other_user}","gists_url":"https://api.github.com/users/aticu/gists{/gist_id}","starred_url":"https://api.github.com/users/aticu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aticu/subscriptions","organizations_url":"https://api.github.com/users/aticu/orgs","repos_url":"https://api.github.com/users/aticu/repos","events_url":"https://api.github.com/users/aticu/events{/privacy}","received_events_url":"https://api.github.com/users/aticu/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-07-11T21:48:35Z","performed_via_github_app":null},{"id":5004551443,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDUwMDQ1NTE0NDM=","url":"https://api.github.com/repos/rust-random/rand/issues/events/5004551443","actor":{"login":"aticu","id":16419880,"node_id":"MDQ6VXNlcjE2NDE5ODgw","avatar_url":"https://avatars.githubusercontent.com/u/16419880?v=4","gravatar_id":"","url":"https://api.github.com/users/aticu","html_url":"https://github.com/aticu","followers_url":"https://api.github.com/users/aticu/followers","following_url":"https://api.github.com/users/aticu/following{/other_user}","gists_url":"https://api.github.com/users/aticu/gists{/gist_id}","starred_url":"https://api.github.com/users/aticu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aticu/subscriptions","organizations_url":"https://api.github.com/users/aticu/orgs","repos_url":"https://api.github.com/users/aticu/repos","events_url":"https://api.github.com/users/aticu/events{/privacy}","received_events_url":"https://api.github.com/users/aticu/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-07-11T21:48:35Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rust-random/rand/issues/comments/878085193","html_url":"https://github.com/rust-random/rand/issues/1143#issuecomment-878085193","issue_url":"https://api.github.com/repos/rust-random/rand/issues/1143","id":878085193,"node_id":"MDEyOklzc3VlQ29tbWVudDg3ODA4NTE5Mw==","user":{"login":"dhardy","id":134893,"node_id":"MDQ6VXNlcjEzNDg5Mw==","avatar_url":"https://avatars.githubusercontent.com/u/134893?v=4","gravatar_id":"","url":"https://api.github.com/users/dhardy","html_url":"https://github.com/dhardy","followers_url":"https://api.github.com/users/dhardy/followers","following_url":"https://api.github.com/users/dhardy/following{/other_user}","gists_url":"https://api.github.com/users/dhardy/gists{/gist_id}","starred_url":"https://api.github.com/users/dhardy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dhardy/subscriptions","organizations_url":"https://api.github.com/users/dhardy/orgs","repos_url":"https://api.github.com/users/dhardy/repos","events_url":"https://api.github.com/users/dhardy/events{/privacy}","received_events_url":"https://api.github.com/users/dhardy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-07-12T08:35:03Z","updated_at":"2021-07-12T08:35:03Z","body":"@burdges are you referring to Rust's (current) lack of trait-object upcast (i.e. inability to convert `dyn CryptoRngCore` to `RngCore`)? We can work around this by adding an `fn as_rng_core(&mut self) -> &mut dyn RngCore` method.\r\n\r\nOverall I am in favour of @newpavlov's suggestion (`CryptoBlockRng` and change `CryptoRng` in the next breaking release).\r\n\r\n@aticu is there any urgency to support `CryptoRng` trait objects within `rand_core` on your part? I presume not since you mentioned a work-around in downstream crates.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rust-random/rand/issues/comments/878085193/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dhardy","id":134893,"node_id":"MDQ6VXNlcjEzNDg5Mw==","avatar_url":"https://avatars.githubusercontent.com/u/134893?v=4","gravatar_id":"","url":"https://api.github.com/users/dhardy","html_url":"https://github.com/dhardy","followers_url":"https://api.github.com/users/dhardy/followers","following_url":"https://api.github.com/users/dhardy/following{/other_user}","gists_url":"https://api.github.com/users/dhardy/gists{/gist_id}","starred_url":"https://api.github.com/users/dhardy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dhardy/subscriptions","organizations_url":"https://api.github.com/users/dhardy/orgs","repos_url":"https://api.github.com/users/dhardy/repos","events_url":"https://api.github.com/users/dhardy/events{/privacy}","received_events_url":"https://api.github.com/users/dhardy/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":5006053080,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NTAwNjA1MzA4MA==","url":"https://api.github.com/repos/rust-random/rand/issues/events/5006053080","actor":{"login":"newpavlov","id":329626,"node_id":"MDQ6VXNlcjMyOTYyNg==","avatar_url":"https://avatars.githubusercontent.com/u/329626?v=4","gravatar_id":"","url":"https://api.github.com/users/newpavlov","html_url":"https://github.com/newpavlov","followers_url":"https://api.github.com/users/newpavlov/followers","following_url":"https://api.github.com/users/newpavlov/following{/other_user}","gists_url":"https://api.github.com/users/newpavlov/gists{/gist_id}","starred_url":"https://api.github.com/users/newpavlov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/newpavlov/subscriptions","organizations_url":"https://api.github.com/users/newpavlov/orgs","repos_url":"https://api.github.com/users/newpavlov/repos","events_url":"https://api.github.com/users/newpavlov/events{/privacy}","received_events_url":"https://api.github.com/users/newpavlov/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-07-12T08:35:04Z","performed_via_github_app":null},{"id":5006053082,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDUwMDYwNTMwODI=","url":"https://api.github.com/repos/rust-random/rand/issues/events/5006053082","actor":{"login":"newpavlov","id":329626,"node_id":"MDQ6VXNlcjMyOTYyNg==","avatar_url":"https://avatars.githubusercontent.com/u/329626?v=4","gravatar_id":"","url":"https://api.github.com/users/newpavlov","html_url":"https://github.com/newpavlov","followers_url":"https://api.github.com/users/newpavlov/followers","following_url":"https://api.github.com/users/newpavlov/following{/other_user}","gists_url":"https://api.github.com/users/newpavlov/gists{/gist_id}","starred_url":"https://api.github.com/users/newpavlov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/newpavlov/subscriptions","organizations_url":"https://api.github.com/users/newpavlov/orgs","repos_url":"https://api.github.com/users/newpavlov/repos","events_url":"https://api.github.com/users/newpavlov/events{/privacy}","received_events_url":"https://api.github.com/users/newpavlov/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-07-12T08:35:04Z","performed_via_github_app":null},{"id":5006053086,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NTAwNjA1MzA4Ng==","url":"https://api.github.com/repos/rust-random/rand/issues/events/5006053086","actor":{"login":"burdges","id":680126,"node_id":"MDQ6VXNlcjY4MDEyNg==","avatar_url":"https://avatars.githubusercontent.com/u/680126?v=4","gravatar_id":"","url":"https://api.github.com/users/burdges","html_url":"https://github.com/burdges","followers_url":"https://api.github.com/users/burdges/followers","following_url":"https://api.github.com/users/burdges/following{/other_user}","gists_url":"https://api.github.com/users/burdges/gists{/gist_id}","starred_url":"https://api.github.com/users/burdges/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/burdges/subscriptions","organizations_url":"https://api.github.com/users/burdges/orgs","repos_url":"https://api.github.com/users/burdges/repos","events_url":"https://api.github.com/users/burdges/events{/privacy}","received_events_url":"https://api.github.com/users/burdges/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-07-12T08:35:04Z","performed_via_github_app":null}]