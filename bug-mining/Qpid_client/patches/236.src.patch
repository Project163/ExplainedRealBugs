diff --git a/qpid-jms-client/src/main/java/org/apache/qpid/jms/util/FactoryFinder.java b/qpid-jms-client/src/main/java/org/apache/qpid/jms/util/FactoryFinder.java
index 9fbcc5ac..f73a76eb 100644
--- a/qpid-jms-client/src/main/java/org/apache/qpid/jms/util/FactoryFinder.java
+++ b/qpid-jms-client/src/main/java/org/apache/qpid/jms/util/FactoryFinder.java
@@ -170,14 +170,14 @@ public class FactoryFinder<T extends Object> {
             if (clazz == null) {
                 properties = loadProperties(path);
                 clazz = loadClass(properties);
-                Class<?> previousClass = classMap.putIfAbsent(path, clazz);
                 Properties previousProperties = propertiesMap.putIfAbsent(path, properties);
-                if (previousClass != null) {
-                    clazz = previousClass;
-                }
                 if (previousProperties != null) {
                     properties = previousProperties;
                 }
+                Class<?> previousClass = classMap.putIfAbsent(path, clazz);
+                if (previousClass != null) {
+                    clazz = previousClass;
+                }
             }
 
             Object factory = clazz.getDeclaredConstructor().newInstance();
