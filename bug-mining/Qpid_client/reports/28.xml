<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:17:36 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[QPIDJMS-48] inconsistent handling of property names in Message methods</title>
                <link>https://issues.apache.org/jira/browse/QPIDJMS-48</link>
                <project id="12314524" key="QPIDJMS">Qpid JMS</project>
                    <description>&lt;p&gt;The client validates the values passed to get/Set*Property methods, enforcing that they are valid Java identifier names. It does not however validate the values returned from/given to the getPropertyNames or propertyExists methods, meaning it could return (or indicate presence) of properties that dont meet the JMS requirements, but then fail to allow setting/accessing them.&lt;/p&gt;

&lt;p&gt;The behaviour of getPropertyNames or propertyExists should be updated to match the validating behaviour of the get/Set*Property methods. An option will be added to enable disabling the validation.&lt;/p&gt;

&lt;p&gt;Original Text:&lt;br/&gt;
The Qpid C++ broker - which supports both AMQP 0.10 and 1.0 - delivers quite often messages with a property containing &quot;.&quot; in the property name. In particular, the property &quot;qpid.subject&quot; can be seen quite often, because it is attached automatically to the message by some AMQP 0.10 clients.&lt;/p&gt;

&lt;p&gt;The current handling of message properties with &quot;.&quot; in their name seems to be a bit strange in the Qpid JMS client. When the client receives a message with this property, its property name is returned by the method getPropertyNames() including the dot. However, when I try to call some method to actually get the property value - e.g. getStringProperty(&quot;qpid.subject&quot;), I get an exception:&lt;/p&gt;

&lt;p&gt;javax.jms.JMSException: Identifier contains invalid JMS identifier character &apos;.&apos;: &apos;qpid.subject&apos; &lt;br/&gt;
	at org.apache.qpid.jms.exceptions.JmsExceptionSupport.create(JmsExceptionSupport.java:77)&lt;br/&gt;
	at org.apache.qpid.jms.JmsConnection.onException(JmsConnection.java:481)&lt;br/&gt;
	at org.apache.qpid.jms.JmsMessageConsumer$MessageDeliverTask.run(JmsMessageConsumer.java:602)&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:744)&lt;br/&gt;
Caused by: java.lang.IllegalArgumentException: Identifier contains invalid JMS identifier character &apos;.&apos;: &apos;qpid.subject&apos; &lt;br/&gt;
	at org.apache.qpid.jms.message.JmsMessage.checkIdentifierLetterAndDigitRequirements(JmsMessage.java:568)&lt;br/&gt;
	at org.apache.qpid.jms.message.JmsMessage.checkIdentifierFormat(JmsMessage.java:531)&lt;br/&gt;
	at org.apache.qpid.jms.message.JmsMessage.checkPropertyNameIsValid(JmsMessage.java:527)&lt;br/&gt;
	at org.apache.qpid.jms.message.JmsMessage.getObjectProperty(JmsMessage.java:296)&lt;br/&gt;
	at org.apache.qpid.jms.message.JmsMessage.getStringProperty(JmsMessage.java:393)&lt;br/&gt;
	at cz.scholz.amqp10.jms.Listener.onMessage(Listener.java:72)&lt;br/&gt;
	at org.apache.qpid.jms.JmsMessageConsumer$MessageDeliverTask.run(JmsMessageConsumer.java:592)&lt;br/&gt;
	... 3 more&lt;/p&gt;

&lt;p&gt;This causes problems when you client wants to iterate over all message properties and I think the behavior should be more consistent. If the property is returned by getPropertyNames(), then the get*Property() should work too. Or other way around - if get*Property cannot be used for such property, it should not be returned in getPropertyNames().&lt;/p&gt;</description>
                <environment></environment>
        <key id="12829831">QPIDJMS-48</key>
            <summary>inconsistent handling of property names in Message methods</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="robbie">Robbie Gemmell</assignee>
                                    <reporter username="scholzj">Jakub Scholz</reporter>
                        <labels>
                    </labels>
                <created>Thu, 14 May 2015 12:11:58 +0000</created>
                <updated>Wed, 6 Jan 2016 12:32:47 +0000</updated>
                            <resolved>Tue, 9 Jun 2015 17:04:58 +0000</resolved>
                                    <version>0.1.0</version>
                    <version>0.2.0</version>
                                    <fixVersion>0.3.0</fixVersion>
                                    <component>qpid-jms-client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14543598" author="gemmellr" created="Thu, 14 May 2015 12:28:46 +0000"  >&lt;p&gt;Hi Jakub,&lt;/p&gt;

&lt;p&gt;Thanks for pointing this out. I agree that the behaviour is inconsistent, and either the invalid (in JMS) property name shouldnt be returned from getPropertyNames, or what is returned shoudl work with get*Property(). Property names are a problem point for AMQP &amp;lt;-&amp;gt; JMS because of the different legal values, it was envisaged we might come up with some sort of reversible mapping to a vendor property for the AMQP JMS Mapping to address this, but that hasn&apos;t happened yet.&lt;/p&gt;

&lt;p&gt;Robbie&lt;/p&gt;</comment>
                            <comment id="14579223" author="jira-bot" created="Tue, 9 Jun 2015 17:03:29 +0000"  >&lt;p&gt;Commit dacdce01580485de7b0a86fe08bfd39aeae0d1b1 in qpid-jms&apos;s branch refs/heads/master from Robert Gemmell&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=qpid-jms.git;h=dacdce0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=qpid-jms.git;h=dacdce0&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/QPIDJMS-48&quot; title=&quot;inconsistent handling of property names in Message methods&quot; class=&quot;issue-link&quot; data-issue-key=&quot;QPIDJMS-48&quot;&gt;&lt;del&gt;QPIDJMS-48&lt;/del&gt;&lt;/a&gt;: make getPropertyNames and propertyExists consistent with the get/set property methods validation behaviour. Add initial base for toggle to escape the validation&lt;/p&gt;</comment>
                            <comment id="14579224" author="jira-bot" created="Tue, 9 Jun 2015 17:03:33 +0000"  >&lt;p&gt;Commit e9d752a048ea984fc5ea750a23c539fcb7a12b65 in qpid-jms&apos;s branch refs/heads/master from Robert Gemmell&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=qpid-jms.git;h=e9d752a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=qpid-jms.git;h=e9d752a&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/QPIDJMS-48&quot; title=&quot;inconsistent handling of property names in Message methods&quot; class=&quot;issue-link&quot; data-issue-key=&quot;QPIDJMS-48&quot;&gt;&lt;del&gt;QPIDJMS-48&lt;/del&gt;&lt;/a&gt;: wire up connection option for toggling behaviour, add some integration test to verify new and received messages both pick it up&lt;/p&gt;</comment>
                            <comment id="14579225" author="jira-bot" created="Tue, 9 Jun 2015 17:03:35 +0000"  >&lt;p&gt;Commit ef375058577c79340fd84125b6ba877bda048224 in qpid-jms&apos;s branch refs/heads/master from Robert Gemmell&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=qpid-jms.git;h=ef37505&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=qpid-jms.git;h=ef37505&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/QPIDJMS-48&quot; title=&quot;inconsistent handling of property names in Message methods&quot; class=&quot;issue-link&quot; data-issue-key=&quot;QPIDJMS-48&quot;&gt;&lt;del&gt;QPIDJMS-48&lt;/del&gt;&lt;/a&gt;: update docs with new option&lt;/p&gt;</comment>
                            <comment id="14579226" author="gemmellr" created="Tue, 9 Jun 2015 17:04:58 +0000"  >&lt;p&gt;Made the methods validate consistently, and added an option to faciltate disabling the validation if absolutely required.&lt;/p&gt;</comment>
                            <comment id="14580397" author="scholzj" created="Wed, 10 Jun 2015 11:05:38 +0000"  >&lt;p&gt;Thanks for fixing this. I think this is a reasonable workaround.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 23 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2eq5j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>