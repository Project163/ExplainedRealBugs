<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:18:38 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[QPIDJMS-374] Double encoded query parameters</title>
                <link>https://issues.apache.org/jira/browse/QPIDJMS-374</link>
                <project id="12314524" key="QPIDJMS">Qpid JMS</project>
                    <description>&lt;p&gt;When query parameters are parsed in &lt;a href=&quot;https://github.com/apache/qpid-jms/blob/70fe1b882e1381b1016a10b0707f6e112d4e0598/qpid-jms-client/src/main/java/org/apache/qpid/jms/transports/TransportFactory.java#L51&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;TransportFactory&lt;/a&gt; and &lt;a href=&quot;https://github.com/apache/qpid-jms/blob/70fe1b882e1381b1016a10b0707f6e112d4e0598/qpid-jms-client/src/main/java/org/apache/qpid/jms/provider/amqp/AmqpProviderFactory.java#L41&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;AmqpProviderFactory&lt;/a&gt; and than further processed via &lt;a href=&quot;https://github.com/apache/qpid-jms/blob/70fe1b882e1381b1016a10b0707f6e112d4e0598/qpid-jms-client/src/main/java/org/apache/qpid/jms/util/PropertyUtil.java#L64&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;PropertyUtil#replaceQuery&lt;/a&gt; the values gets double encoded.&lt;br/&gt;
See also Javadoc of &lt;a href=&quot;https://github.com/apache/qpid-jms/blob/70fe1b882e1381b1016a10b0707f6e112d4e0598/qpid-jms-client/src/main/java/org/apache/qpid/jms/util/PropertyUtil.java#L64&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;PropertyUtil#replaceQuery&lt;/a&gt;:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;The string values in the Map will be URL Encoded by this method which means that if an&lt;br/&gt;
already encoded value is passed it will be double encoded resulting in corrupt values&lt;br/&gt;
in the newly created URI.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;For a fix I created a &lt;a href=&quot;https://github.com/apache/qpid-jms/pull/17&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;pull request&lt;/a&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13148798">QPIDJMS-374</key>
            <summary>Double encoded query parameters</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tabish">Timothy A. Bish</assignee>
                                    <reporter username="mirbo">mibo</reporter>
                        <labels>
                    </labels>
                <created>Thu, 29 Mar 2018 06:51:19 +0000</created>
                <updated>Thu, 3 May 2018 11:26:15 +0000</updated>
                            <resolved>Thu, 5 Apr 2018 20:29:21 +0000</resolved>
                                    <version>0.31.0</version>
                                    <fixVersion>0.32.0</fixVersion>
                                    <component>qpid-jms-client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16418516" author="githubbot" created="Thu, 29 Mar 2018 06:56:22 +0000"  >&lt;p&gt;GitHub user mibo opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/qpid-jms/pull/17&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/qpid-jms/pull/17&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/QPIDJMS-374&quot; title=&quot;Double encoded query parameters&quot; class=&quot;issue-link&quot; data-issue-key=&quot;QPIDJMS-374&quot;&gt;&lt;del&gt;QPIDJMS-374&lt;/del&gt;&lt;/a&gt;: Use getRawQuery to avoid double encoding&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/mibo/qpid-jms&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/mibo/qpid-jms&lt;/a&gt; master&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/qpid-jms/pull/17.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/qpid-jms/pull/17.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #17&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit b89a1e8cebcde65575aee1bd0dbe3c2cce01ccee&lt;br/&gt;
Author: mibo &amp;lt;mibo@...&amp;gt;&lt;br/&gt;
Date:   2018-03-29T06:52:29Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/QPIDJMS-374&quot; title=&quot;Double encoded query parameters&quot; class=&quot;issue-link&quot; data-issue-key=&quot;QPIDJMS-374&quot;&gt;&lt;del&gt;QPIDJMS-374&lt;/del&gt;&lt;/a&gt;: Use getRawQuery to avoid double encoding&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16419224" author="githubbot" created="Thu, 29 Mar 2018 15:45:34 +0000"  >&lt;p&gt;Github user tabish121 commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/qpid-jms/pull/17&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/qpid-jms/pull/17&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I believe the correct fix is to call PropertyUtil.parseQuery(remoteURI) instead and it will do the right thing, although we can&apos;t know until you provide some tests to validate it.  &lt;/p&gt;</comment>
                            <comment id="16421948" author="githubbot" created="Mon, 2 Apr 2018 05:36:04 +0000"  >&lt;p&gt;Github user mibo commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/qpid-jms/pull/17&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/qpid-jms/pull/17&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    I agree that using `PropertyUtil.parseQuery(remoteURI)` would be better (which then does the `PropertyUtil.parseQuery(uri.getRawQuery())` call after a &lt;span class=&quot;error&quot;&gt;&amp;#91;null check&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://github.com/apache/qpid-jms/blob/70fe1b882e1381b1016a10b0707f6e112d4e0598/qpid-jms-client/src/main/java/org/apache/qpid/jms/util/PropertyUtil.java#L189&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/qpid-jms/blob/70fe1b882e1381b1016a10b0707f6e112d4e0598/qpid-jms-client/src/main/java/org/apache/qpid/jms/util/PropertyUtil.java#L189&lt;/a&gt;)).&lt;br/&gt;
    I will change it and add the currently missing (JUnit) tests.&lt;br/&gt;
    But I think we can agree that using `PropertyUtil.parseQuery(remoteURI.getQuery())` is a bug.&lt;/p&gt;

&lt;p&gt;    Btw. I oriented the fix by the &lt;span class=&quot;error&quot;&gt;&amp;#91;TransportFactory&amp;#93;&lt;/span&gt;(&lt;a href=&quot;https://github.com/apache/qpid-jms/blob/70fe1b882e1381b1016a10b0707f6e112d4e0598/qpid-jms-client/src/main/java/org/apache/qpid/jms/transports/TransportFactory.java#L51&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/qpid-jms/blob/70fe1b882e1381b1016a10b0707f6e112d4e0598/qpid-jms-client/src/main/java/org/apache/qpid/jms/transports/TransportFactory.java#L51&lt;/a&gt;).&lt;/p&gt;</comment>
                            <comment id="16425897" author="githubbot" created="Wed, 4 Apr 2018 17:31:29 +0000"  >&lt;p&gt;Github user mibo commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/qpid-jms/pull/17&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/qpid-jms/pull/17&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Changed to use `PropertyUtil.parseQuery(remoteURI)` and added tests.&lt;/p&gt;</comment>
                            <comment id="16426067" author="githubbot" created="Wed, 4 Apr 2018 19:32:24 +0000"  >&lt;p&gt;Github user tabish121 commented on the issue:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/qpid-jms/pull/17&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/qpid-jms/pull/17&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    You need to squash the commits and force push so that it is contained in one commit, thanks.&lt;/p&gt;</comment>
                            <comment id="16427538" author="jira-bot" created="Thu, 5 Apr 2018 20:26:13 +0000"  >&lt;p&gt;Commit b96f4f2ab2ee635661c175b48e39cb3c65006b6a in qpid-jms&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mirbo&quot; class=&quot;user-hover&quot; rel=&quot;mirbo&quot;&gt;mirbo&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=qpid-jms.git;h=b96f4f2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=qpid-jms.git;h=b96f4f2&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/QPIDJMS-374&quot; title=&quot;Double encoded query parameters&quot; class=&quot;issue-link&quot; data-issue-key=&quot;QPIDJMS-374&quot;&gt;&lt;del&gt;QPIDJMS-374&lt;/del&gt;&lt;/a&gt;: Use PU.parseQuery(remoteURI) to avoid double encoding&lt;/p&gt;</comment>
                            <comment id="16427539" author="githubbot" created="Thu, 5 Apr 2018 20:26:26 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/qpid-jms/pull/17&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/qpid-jms/pull/17&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 32 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3rxhj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>