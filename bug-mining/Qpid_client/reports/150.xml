<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:18:24 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[QPIDJMS-293] the WebSocket transport does not handle continuation frames</title>
                <link>https://issues.apache.org/jira/browse/QPIDJMS-293</link>
                <project id="12314524" key="QPIDJMS">Qpid JMS</project>
                    <description>&lt;p&gt;the WebSocket transport does not handle continuation frames, only the primary Binary frames, it needs to handle both. Indentified from investigation of followup comments on &lt;a href=&quot;https://issues.apache.org/jira/browse/QPIDJMS-290&quot; title=&quot;[Websocket] Receiving bytes message with more than 65347 bytes of content fails within the decoder&quot; class=&quot;issue-link&quot; data-issue-key=&quot;QPIDJMS-290&quot;&gt;&lt;del&gt;QPIDJMS-290&lt;/del&gt;&lt;/a&gt; once 0.23.0 was under vote.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13072455">QPIDJMS-293</key>
            <summary>the WebSocket transport does not handle continuation frames</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="robbie">Robbie Gemmell</assignee>
                                    <reporter username="robbie">Robbie Gemmell</reporter>
                        <labels>
                    </labels>
                <created>Tue, 16 May 2017 13:58:52 +0000</created>
                <updated>Wed, 30 Aug 2017 14:26:30 +0000</updated>
                            <resolved>Tue, 16 May 2017 14:09:13 +0000</resolved>
                                    <version>0.23.0</version>
                                    <fixVersion>0.24.0</fixVersion>
                                    <component>qpid-jms-client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16012447" author="jira-bot" created="Tue, 16 May 2017 14:07:59 +0000"  >&lt;p&gt;Commit d3ce3dc38587ca1799613371d3096907899b362a in qpid-jms&apos;s branch refs/heads/master from Robert Gemmell&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=qpid-jms.git;h=d3ce3dc&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=qpid-jms.git;h=d3ce3dc&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/QPIDJMS-293&quot; title=&quot;the WebSocket transport does not handle continuation frames&quot; class=&quot;issue-link&quot; data-issue-key=&quot;QPIDJMS-293&quot;&gt;&lt;del&gt;QPIDJMS-293&lt;/del&gt;&lt;/a&gt;: ensure the WebSocket transport also handles continuation frames as well as the primary binary frames&lt;/p&gt;</comment>
                            <comment id="16039410" author="k-wall" created="Tue, 6 Jun 2017 18:27:04 +0000"  >&lt;p&gt;The change looks good and confirm that I am unable to reproduce my original problem.&lt;/p&gt;

&lt;p&gt;(below updated 2017/06/07)&lt;/p&gt;

&lt;p&gt;However, I think there is an analogous change required on the sending side. &lt;tt&gt;org.apache.qpid.jms.transports.netty.NettyWsTransport#send&lt;/tt&gt; should be prepared to write a &lt;tt&gt;BinaryWebSocketFrame&lt;/tt&gt; with final fragment &lt;tt&gt;false&lt;/tt&gt; followed by a series of &lt;tt&gt;ContinuationWebSocketFrame&lt;/tt&gt; frames if &lt;tt&gt;output&lt;/tt&gt; is large.&lt;/p&gt;

&lt;p&gt;Currently sending a very large JMS message (say, bytes message of size AMQP frame size +1) results in a &lt;b&gt;single&lt;/b&gt;  &lt;tt&gt;BinaryWebSocketFrame&lt;/tt&gt; being sent (which comprises the many transfers). &lt;/p&gt;

&lt;p&gt;Turning the logs up I see:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[1767460652:1] -&amp;gt; Transfer{handle=0, deliveryId=0, deliveryTag=0, messageFormat=0, settled=null, more=true, rcvSettleMode=null, state=null, resume=false, aborted=false, batchable=false} (262122) &quot;\x00Sr\xc1)\x04\xa3\x0ex-opt-jms-destQ\x00\xa3\x12x-opt-jms-msg-typeQ\x03\x00Ss\xc0b\x0a\xa1/ID:3aa56b9f-3d52-493d-acaa-59b4845f70ac:1:1:1-1@\xa1\x05queue@@@\xa3\x18application/octet-stream@@\x83\x00\x00\x01\x5c\x83\xb5\xf9\x05\x00Su\xb0\x00\x04\x00\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00&quot;...(truncated)
[1767460652:1] -&amp;gt; Transfer{handle=0, deliveryId=0, deliveryTag=0, messageFormat=0, settled=null, more=false, rcvSettleMode=null, state=null, resume=false, aborted=false, batchable=false} (180) &quot;\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00&quot;
18:59:20.109 [AmqpProvider:(1):[amqpws://localhost:5671]] TRACE o.a.q.j.t.netty.NettyWsTransport - Attempted write of: 262344 bytes
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Receiving this is quite awkward on the server side: for instance, in Jetty based implementations you need to tune &lt;tt&gt;#maxBinaryMessageSize&lt;/tt&gt; to be sufficiently large to accommodate the largest websocket message that will be received (or turn the check off, which the Jetty authors don&apos;t recommend).&lt;/p&gt;
</comment>
                            <comment id="16042761" author="gemmellr" created="Thu, 8 Jun 2017 14:25:48 +0000"  >&lt;p&gt;I think any change on the sending side would be a new JIRA, but to address the comment..&lt;/p&gt;

&lt;p&gt;At the moment, the client will emit a single WebSocket message/frame containing all the current bytes provided from proton at a given point, which given peculiarities of how proton-j works I beleive will be up to the clients (not brokers) AMQP max frame size and containing up to 2 transfer frames for an AMQP message. The client has no way to separate AMQP tranfers into particular WebSocket frames because it only sees the bytes. The best it could currently do would be to arbitrarily split bytes into multiple WebSocket messages/frames (wouldnt really matter which). Other than the mentioned peculiarties, there is no correlation between the emitted AMQP frames and the bytes in the Websocket message/frames and their respective sizes currently.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 23 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3f21b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>