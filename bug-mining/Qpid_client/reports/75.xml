<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:17:54 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[QPIDJMS-139] Message flow to synchronous consumer from Qpid Java broker unexpectedly ceases</title>
                <link>https://issues.apache.org/jira/browse/QPIDJMS-139</link>
                <project id="12314524" key="QPIDJMS">Qpid JMS</project>
                    <description>&lt;p&gt;Testing the Qpid JMS Client together with the Java Broker + Perftest framework reveals a problem. Message flow to one or more consumers sometimes ceases unexpectedly.&lt;/p&gt;

&lt;p&gt;In the failure case, the Java Broker reports that the consumer has been is suspended (SUB-1003 messages) for an extended period, even though there are messages remaining on the queue.  Investigation of a heap dump reveals that the last flow frame to be received from the client:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;deliveryCount value which matched the deliveries sent by the Broker.&lt;/li&gt;
	&lt;li&gt;linkCredit zero&lt;/li&gt;
	&lt;li&gt;drain true.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The Broker thus believes no more credit remains and suspends the consumer.&lt;/p&gt;

&lt;p&gt;0.6.0 is affected.  0.7.0-SNAPSHOT is too.  Rolling back to client 0.5.0 resolves the problem, as does setting &lt;tt&gt;jms.receiveLocalOnly&lt;/tt&gt; in the connection url with 0.6.0 or the 0.7.0 SNAPSHOT. &lt;/p&gt;

&lt;p&gt;There are more details on regard the reproduction on &lt;a href=&quot;https://issues.apache.org/jira/browse/QPID-6863&quot; title=&quot;AMQP 1.0 message flow to consumers stops&quot; class=&quot;issue-link&quot; data-issue-key=&quot;QPID-6863&quot;&gt;&lt;del&gt;QPID-6863&lt;/del&gt;&lt;/a&gt;.   Problem would not manifest with debug logging turned on.&lt;/p&gt;

</description>
                <environment></environment>
        <key id="12913790">QPIDJMS-139</key>
            <summary>Message flow to synchronous consumer from Qpid Java broker unexpectedly ceases</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="robbie">Robbie Gemmell</assignee>
                                    <reporter username="kwall">Keith Wall</reporter>
                        <labels>
                    </labels>
                <created>Tue, 17 Nov 2015 17:22:37 +0000</created>
                <updated>Wed, 6 Jan 2016 12:32:53 +0000</updated>
                            <resolved>Fri, 18 Dec 2015 15:35:12 +0000</resolved>
                                    <version>0.6.0</version>
                                    <fixVersion>0.7.0</fixVersion>
                                    <component>qpid-jms-client</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15056370" author="gemmellr" created="Mon, 14 Dec 2015 17:54:05 +0000"  >&lt;p&gt;This appears to be happening due to unexpected behaviour by the broker (advancing the delivery count outside of a drain attempt, &lt;a href=&quot;https://issues.apache.org/jira/browse/QPID-6937&quot; title=&quot;[Java Broker] Images are not found on java broker doc book generation in pdf format&quot; class=&quot;issue-link&quot; data-issue-key=&quot;QPID-6937&quot;&gt;&lt;del&gt;QPID-6937&lt;/del&gt;&lt;/a&gt;), leading to an issue in proton-j that Proton based peers wouldnt tend to expose (causing link and transport state getting out of sync, &lt;a href=&quot;https://issues.apache.org/jira/browse/PROTON-1077&quot; title=&quot;receiver link and transport view of credit can become disjoint when sending link sends flow frames&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PROTON-1077&quot;&gt;&lt;del&gt;PROTON-1077&lt;/del&gt;&lt;/a&gt;) that then lead to the client thinking it has remaining credit when it doesn&apos;t.&lt;/p&gt;</comment>
                            <comment id="15058278" author="jira-bot" created="Tue, 15 Dec 2015 16:29:15 +0000"  >&lt;p&gt;Commit e489ebad66e9ccb6053db5e1a4a8f0e9fa41f0ab in qpid-jms&apos;s branch refs/heads/master from Robert Gemmell&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=qpid-jms.git;h=e489eba&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=qpid-jms.git;h=e489eba&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/QPIDJMS-139&quot; title=&quot;Message flow to synchronous consumer from Qpid Java broker unexpectedly ceases&quot; class=&quot;issue-link&quot; data-issue-key=&quot;QPIDJMS-139&quot;&gt;&lt;del&gt;QPIDJMS-139&lt;/del&gt;&lt;/a&gt;: add test exercising underlying issue PROTON 1077 exposed by the broker behaviour QPID 6947, update to proton 0.12.0-SNAPSHOT which includes change to handle it better&lt;/p&gt;</comment>
                            <comment id="15058291" author="gemmellr" created="Tue, 15 Dec 2015 16:39:00 +0000"  >&lt;p&gt;Added a test that uses the test peer to mimmicks the broker defect, which then exposes the other issue in Proton, resulting in detection of the credit mismatch on the wire. Also updated to proton-j 0.12.0-SNAPSHOT to get a fix that makes proton, and in turn the client, able to handle the broker behaviour more gracefully.&lt;/p&gt;

&lt;p&gt;Will switch to proton 0.11.1 upon release.&lt;/p&gt;</comment>
                            <comment id="15064090" author="jira-bot" created="Fri, 18 Dec 2015 15:30:47 +0000"  >&lt;p&gt;Commit 47e31fe678b6d2c2a9c211af448d4f1d2806a5a0 in qpid-jms&apos;s branch refs/heads/master from Robert Gemmell&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=qpid-jms.git;h=47e31fe&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=qpid-jms.git;h=47e31fe&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/QPIDJMS-145&quot; title=&quot;update proton-j dependency to 0.11.1&quot; class=&quot;issue-link&quot; data-issue-key=&quot;QPIDJMS-145&quot;&gt;&lt;del&gt;QPIDJMS-145&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/QPIDJMS-139&quot; title=&quot;Message flow to synchronous consumer from Qpid Java broker unexpectedly ceases&quot; class=&quot;issue-link&quot; data-issue-key=&quot;QPIDJMS-139&quot;&gt;&lt;del&gt;QPIDJMS-139&lt;/del&gt;&lt;/a&gt;: update to use the proton-j 0.11.1 release&lt;/p&gt;</comment>
                            <comment id="15064097" author="gemmellr" created="Fri, 18 Dec 2015 15:35:12 +0000"  >&lt;p&gt;Resolving now that update to proton-j 0.11.1 has been made via &lt;a href=&quot;https://issues.apache.org/jira/browse/QPIDJMS-145&quot; title=&quot;update proton-j dependency to 0.11.1&quot; class=&quot;issue-link&quot; data-issue-key=&quot;QPIDJMS-145&quot;&gt;&lt;del&gt;QPIDJMS-145&lt;/del&gt;&lt;/a&gt;, incorporating the fix for &lt;a href=&quot;https://issues.apache.org/jira/browse/PROTON-1077&quot; title=&quot;receiver link and transport view of credit can become disjoint when sending link sends flow frames&quot; class=&quot;issue-link&quot; data-issue-key=&quot;PROTON-1077&quot;&gt;&lt;del&gt;PROTON-1077&lt;/del&gt;&lt;/a&gt; that allows it/the client to be resistant of the brokers behaviour from &lt;a href=&quot;https://issues.apache.org/jira/browse/QPID-6947&quot; title=&quot;[Java Broker] deliverycount advanced outside a previous drain attempt that used all credit&quot; class=&quot;issue-link&quot; data-issue-key=&quot;QPID-6947&quot;&gt;QPID-6947&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12921655">QPID-6947</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12913574">QPID-6863</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="12921652">PROTON-1077</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12923042">QPIDJMS-145</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 48 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2oivb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>