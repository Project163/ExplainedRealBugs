{"url":"https://api.github.com/repos/google/open-location-code/issues/89","repository_url":"https://api.github.com/repos/google/open-location-code","labels_url":"https://api.github.com/repos/google/open-location-code/issues/89/labels{/name}","comments_url":"https://api.github.com/repos/google/open-location-code/issues/89/comments","events_url":"https://api.github.com/repos/google/open-location-code/issues/89/events","html_url":"https://github.com/google/open-location-code/issues/89","id":252310224,"node_id":"MDU6SXNzdWUyNTIzMTAyMjQ=","number":89,"title":"Code recovery within one degree of the poles can be incorrect","user":{"login":"drinckes","id":8969849,"node_id":"MDQ6VXNlcjg5Njk4NDk=","avatar_url":"https://avatars.githubusercontent.com/u/8969849?v=4","gravatar_id":"","url":"https://api.github.com/users/drinckes","html_url":"https://github.com/drinckes","followers_url":"https://api.github.com/users/drinckes/followers","following_url":"https://api.github.com/users/drinckes/following{/other_user}","gists_url":"https://api.github.com/users/drinckes/gists{/gist_id}","starred_url":"https://api.github.com/users/drinckes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drinckes/subscriptions","organizations_url":"https://api.github.com/users/drinckes/orgs","repos_url":"https://api.github.com/users/drinckes/repos","events_url":"https://api.github.com/users/drinckes/events{/privacy}","received_events_url":"https://api.github.com/users/drinckes/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":143063030,"node_id":"MDU6TGFiZWwxNDMwNjMwMzA=","url":"https://api.github.com/repos/google/open-location-code/labels/js","name":"js","color":"D93F0B","default":false,"description":""},{"id":250986949,"node_id":"MDU6TGFiZWwyNTA5ODY5NDk=","url":"https://api.github.com/repos/google/open-location-code/labels/go","name":"go","color":"D93F0B","default":false,"description":""},{"id":250986980,"node_id":"MDU6TGFiZWwyNTA5ODY5ODA=","url":"https://api.github.com/repos/google/open-location-code/labels/java","name":"java","color":"D93F0B","default":false,"description":""},{"id":250991186,"node_id":"MDU6TGFiZWwyNTA5OTExODY=","url":"https://api.github.com/repos/google/open-location-code/labels/python","name":"python","color":"D93F0B","default":false,"description":""},{"id":259128099,"node_id":"MDU6TGFiZWwyNTkxMjgwOTk=","url":"https://api.github.com/repos/google/open-location-code/labels/dart","name":"dart","color":"D93F0B","default":false,"description":""},{"id":324607268,"node_id":"MDU6TGFiZWwzMjQ2MDcyNjg=","url":"https://api.github.com/repos/google/open-location-code/labels/ruby","name":"ruby","color":"D93F0B","default":false,"description":""},{"id":521787642,"node_id":"MDU6TGFiZWw1MjE3ODc2NDI=","url":"https://api.github.com/repos/google/open-location-code/labels/visualbasic","name":"visualbasic","color":"D93F0B","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"drinckes","id":8969849,"node_id":"MDQ6VXNlcjg5Njk4NDk=","avatar_url":"https://avatars.githubusercontent.com/u/8969849?v=4","gravatar_id":"","url":"https://api.github.com/users/drinckes","html_url":"https://github.com/drinckes","followers_url":"https://api.github.com/users/drinckes/followers","following_url":"https://api.github.com/users/drinckes/following{/other_user}","gists_url":"https://api.github.com/users/drinckes/gists{/gist_id}","starred_url":"https://api.github.com/users/drinckes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drinckes/subscriptions","organizations_url":"https://api.github.com/users/drinckes/orgs","repos_url":"https://api.github.com/users/drinckes/repos","events_url":"https://api.github.com/users/drinckes/events{/privacy}","received_events_url":"https://api.github.com/users/drinckes/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"drinckes","id":8969849,"node_id":"MDQ6VXNlcjg5Njk4NDk=","avatar_url":"https://avatars.githubusercontent.com/u/8969849?v=4","gravatar_id":"","url":"https://api.github.com/users/drinckes","html_url":"https://github.com/drinckes","followers_url":"https://api.github.com/users/drinckes/followers","following_url":"https://api.github.com/users/drinckes/following{/other_user}","gists_url":"https://api.github.com/users/drinckes/gists{/gist_id}","starred_url":"https://api.github.com/users/drinckes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drinckes/subscriptions","organizations_url":"https://api.github.com/users/drinckes/orgs","repos_url":"https://api.github.com/users/drinckes/repos","events_url":"https://api.github.com/users/drinckes/events{/privacy}","received_events_url":"https://api.github.com/users/drinckes/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":2,"created_at":"2017-08-23T14:47:55Z","updated_at":"2017-08-25T09:33:14Z","closed_at":"2017-08-25T09:33:14Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Codes missing leading digits can be recovered using a reference location. The general approach is:\r\n1) Take the reference location and generate a long code;\r\n2) Use the leading characters of that code as a prefix for the short code;\r\n3) If the latitude of the new code is more than half the resolution of the missing prefix north or south of the reference location, move the new code by one step in that direction (i.e., north or south).\r\n4) If the longitude of the new code is more than half the resolution of the missing prefix west or east of the reference location, move the new code by one step in that direction (i.e, west or east).\r\n\r\nThis can produce incorrect results when the reference latitude is closer to the pole than the desired recovered code as it moves the code to a latitude greater than 90 degrees, or less than -90 degrees.\r\n\r\nHere are two examples:\r\n1) Short code is **2222+22**, reference location is 89.6,0.0. We encode 89.6,0.0 and prefix the short code with the first four digits, giving CFX22**222+22** with a center latitude of 89.0000625 degrees. The resolution of a four digit grid is 1 degree, and the latitude difference between the code center and 89.6 is 0.5999375 degrees. This is more than half a degree so we move the code north by one degree to 90.0000625 degrees latitude. Since that is invalid a bad code is returned.\r\n2) Short code is **XXXXXX+XX**, reference location is -81.0,0.0. We encode -81.0,0.0 and prefix the short code with the first two digits, giving 2C**XXXXXX+XX** with a center latitude of -70.0000625 degrees. The resolution of a four digit grid is 20 degrees, and the latitude difference between the code center and -81.0 is 10.9999375 degrees. This is more than 10 degrees so we move the code south by 20 degrees to -90.0000625 degrees latitude. Since that is invalid a bad code is returned.\r\n\r\nThese two test cases should be added to each implementation and then the implementations need to be modified to ensure they pass.\r\n\r\nEast/west adjustments across the 180 degree longitude line don't seem to exhibit this bug.","closed_by":{"login":"drinckes","id":8969849,"node_id":"MDQ6VXNlcjg5Njk4NDk=","avatar_url":"https://avatars.githubusercontent.com/u/8969849?v=4","gravatar_id":"","url":"https://api.github.com/users/drinckes","html_url":"https://github.com/drinckes","followers_url":"https://api.github.com/users/drinckes/followers","following_url":"https://api.github.com/users/drinckes/following{/other_user}","gists_url":"https://api.github.com/users/drinckes/gists{/gist_id}","starred_url":"https://api.github.com/users/drinckes/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/drinckes/subscriptions","organizations_url":"https://api.github.com/users/drinckes/orgs","repos_url":"https://api.github.com/users/drinckes/repos","events_url":"https://api.github.com/users/drinckes/events{/privacy}","received_events_url":"https://api.github.com/users/drinckes/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/google/open-location-code/issues/89/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/google/open-location-code/issues/89/timeline","performed_via_github_app":null,"state_reason":"completed"}