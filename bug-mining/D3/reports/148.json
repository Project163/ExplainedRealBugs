{"url":"https://api.github.com/repos/d3/d3/issues/443","repository_url":"https://api.github.com/repos/d3/d3","labels_url":"https://api.github.com/repos/d3/d3/issues/443/labels{/name}","comments_url":"https://api.github.com/repos/d3/d3/issues/443/comments","events_url":"https://api.github.com/repos/d3/d3/issues/443/events","html_url":"https://github.com/d3/d3/issues/443","id":2856078,"node_id":"MDU6SXNzdWUyODU2MDc4","number":443,"title":"d3.geom.polygon.clip fails on closed polygons.","user":{"login":"bbroeksema","id":1321644,"node_id":"MDQ6VXNlcjEzMjE2NDQ=","avatar_url":"https://avatars.githubusercontent.com/u/1321644?v=4","gravatar_id":"","url":"https://api.github.com/users/bbroeksema","html_url":"https://github.com/bbroeksema","followers_url":"https://api.github.com/users/bbroeksema/followers","following_url":"https://api.github.com/users/bbroeksema/following{/other_user}","gists_url":"https://api.github.com/users/bbroeksema/gists{/gist_id}","starred_url":"https://api.github.com/users/bbroeksema/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bbroeksema/subscriptions","organizations_url":"https://api.github.com/users/bbroeksema/orgs","repos_url":"https://api.github.com/users/bbroeksema/repos","events_url":"https://api.github.com/users/bbroeksema/events{/privacy}","received_events_url":"https://api.github.com/users/bbroeksema/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":50044,"node_id":"MDU6TGFiZWw1MDA0NA==","url":"https://api.github.com/repos/d3/d3/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isnâ€™t working"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/d3/d3/milestones/26","html_url":"https://github.com/d3/d3/milestone/26","labels_url":"https://api.github.com/repos/d3/d3/milestones/26/labels","id":345190,"node_id":"MDk6TWlsZXN0b25lMzQ1MTkw","number":26,"title":"3.2.x","description":"","creator":{"login":"mbostock","id":230541,"node_id":"MDQ6VXNlcjIzMDU0MQ==","avatar_url":"https://avatars.githubusercontent.com/u/230541?v=4","gravatar_id":"","url":"https://api.github.com/users/mbostock","html_url":"https://github.com/mbostock","followers_url":"https://api.github.com/users/mbostock/followers","following_url":"https://api.github.com/users/mbostock/following{/other_user}","gists_url":"https://api.github.com/users/mbostock/gists{/gist_id}","starred_url":"https://api.github.com/users/mbostock/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mbostock/subscriptions","organizations_url":"https://api.github.com/users/mbostock/orgs","repos_url":"https://api.github.com/users/mbostock/repos","events_url":"https://api.github.com/users/mbostock/events{/privacy}","received_events_url":"https://api.github.com/users/mbostock/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":65,"state":"closed","created_at":"2013-05-30T21:24:47Z","updated_at":"2013-08-22T08:25:21Z","due_on":null,"closed_at":"2013-08-22T08:25:21Z"},"comments":3,"created_at":"2012-01-16T15:50:46Z","updated_at":"2013-07-01T18:12:47Z","closed_at":"2013-07-01T18:12:47Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"I noticed that the behavior of the clip and centroid methods of d3.geom.polygon is incoherent. The former, clip, does not work correctly when the passed polygon is a closed polygon, i.e. when the last element is the same as the first element. However, the latter, centroid, does not work correctly when being passed an open polygon. It took me some time to figure out why my code didn't behave as expected due to this inconsistency. I'd suggest either one of these options:\n\n1) Make both methods rely on either closed or open polygons (and clearly state what is expected in the documentation)\n2) Make both methods work with both closed and open polygons. Though this would give a performance penalty as you'd need to do the checking and addition/removal of the last element.\n\nConsequently, methods returning a d3.geom.polygon should be fixed to have the correct behavior. (I ran into this with d3.geom.voronoi which returns open polygons).\n","closed_by":{"login":"mbostock","id":230541,"node_id":"MDQ6VXNlcjIzMDU0MQ==","avatar_url":"https://avatars.githubusercontent.com/u/230541?v=4","gravatar_id":"","url":"https://api.github.com/users/mbostock","html_url":"https://github.com/mbostock","followers_url":"https://api.github.com/users/mbostock/followers","following_url":"https://api.github.com/users/mbostock/following{/other_user}","gists_url":"https://api.github.com/users/mbostock/gists{/gist_id}","starred_url":"https://api.github.com/users/mbostock/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mbostock/subscriptions","organizations_url":"https://api.github.com/users/mbostock/orgs","repos_url":"https://api.github.com/users/mbostock/repos","events_url":"https://api.github.com/users/mbostock/events{/privacy}","received_events_url":"https://api.github.com/users/mbostock/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/d3/d3/issues/443/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/d3/d3/issues/443/timeline","performed_via_github_app":null,"state_reason":"completed"}