{"url":"https://api.github.com/repos/d3/d3/issues/438","repository_url":"https://api.github.com/repos/d3/d3","labels_url":"https://api.github.com/repos/d3/d3/issues/438/labels{/name}","comments_url":"https://api.github.com/repos/d3/d3/issues/438/comments","events_url":"https://api.github.com/repos/d3/d3/issues/438/events","html_url":"https://github.com/d3/d3/issues/438","id":2819994,"node_id":"MDU6SXNzdWUyODE5OTk0","number":438,"title":"d3.geom.voronoi fails with N=2","user":{"login":"mbostock","id":230541,"node_id":"MDQ6VXNlcjIzMDU0MQ==","avatar_url":"https://avatars.githubusercontent.com/u/230541?v=4","gravatar_id":"","url":"https://api.github.com/users/mbostock","html_url":"https://github.com/mbostock","followers_url":"https://api.github.com/users/mbostock/followers","following_url":"https://api.github.com/users/mbostock/following{/other_user}","gists_url":"https://api.github.com/users/mbostock/gists{/gist_id}","starred_url":"https://api.github.com/users/mbostock/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mbostock/subscriptions","organizations_url":"https://api.github.com/users/mbostock/orgs","repos_url":"https://api.github.com/users/mbostock/repos","events_url":"https://api.github.com/users/mbostock/events{/privacy}","received_events_url":"https://api.github.com/users/mbostock/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":50044,"node_id":"MDU6TGFiZWw1MDA0NA==","url":"https://api.github.com/repos/d3/d3/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isnâ€™t working"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2012-01-12T16:23:18Z","updated_at":"2012-10-06T23:40:58Z","closed_at":"2012-10-06T23:40:58Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"\"\"\"\nI've been playing around with the voronoi implementation and found \nthat it has a bug (well at least IMHO). The problem arises the case \nwhen the number of sites is two _and_ you want to clip the cells. \nContext, the documentation at https://github.com/mbostock/d3/wiki/Voronoi-Geom#wiki-voronoi \nstates that when you want clipped cells, you have to post process the \nresults using polygon.clip. However, when you pass only two sites to \nthe voronoi function, the return value will basically be two lines \n(instead of closed polygons). Using polygon.clip on a line has \nundefined results. This whole behavior is demonstrated here: \nhttps://gist.github.com/3cf58c5609be64db8c9f (Tried to make a \nbl.ocks.org out of it but that didn't work for me). \nI do understand that clipping is not a default action in the voronoi \nimplementation for performance reasons. However, clipping should work \nfor all results of a voronoi tessalation. A possible solution would be \nto add an extra vertex to all polygons, resulting from a call to \nvoronoi, which have only two vertices. I'm not sure if adding one \nvertex is enough though as this might result into missing corners in \ndue to the clip in some cases. \n\"\"\"\n\nhttps://groups.google.com/group/d3-js/browse_thread/thread/9ec38b0036c360\n","closed_by":{"login":"mbostock","id":230541,"node_id":"MDQ6VXNlcjIzMDU0MQ==","avatar_url":"https://avatars.githubusercontent.com/u/230541?v=4","gravatar_id":"","url":"https://api.github.com/users/mbostock","html_url":"https://github.com/mbostock","followers_url":"https://api.github.com/users/mbostock/followers","following_url":"https://api.github.com/users/mbostock/following{/other_user}","gists_url":"https://api.github.com/users/mbostock/gists{/gist_id}","starred_url":"https://api.github.com/users/mbostock/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mbostock/subscriptions","organizations_url":"https://api.github.com/users/mbostock/orgs","repos_url":"https://api.github.com/users/mbostock/repos","events_url":"https://api.github.com/users/mbostock/events{/privacy}","received_events_url":"https://api.github.com/users/mbostock/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/d3/d3/issues/438/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/d3/d3/issues/438/timeline","performed_via_github_app":null,"state_reason":"completed"}