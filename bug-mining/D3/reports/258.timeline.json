[{"url":"https://api.github.com/repos/d3/d3/issues/comments/185489130","html_url":"https://github.com/d3/d3/issues/2737#issuecomment-185489130","issue_url":"https://api.github.com/repos/d3/d3/issues/2737","id":185489130,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NTQ4OTEzMA==","user":{"login":"mbostock","id":230541,"node_id":"MDQ6VXNlcjIzMDU0MQ==","avatar_url":"https://avatars.githubusercontent.com/u/230541?v=4","gravatar_id":"","url":"https://api.github.com/users/mbostock","html_url":"https://github.com/mbostock","followers_url":"https://api.github.com/users/mbostock/followers","following_url":"https://api.github.com/users/mbostock/following{/other_user}","gists_url":"https://api.github.com/users/mbostock/gists{/gist_id}","starred_url":"https://api.github.com/users/mbostock/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mbostock/subscriptions","organizations_url":"https://api.github.com/users/mbostock/orgs","repos_url":"https://api.github.com/users/mbostock/repos","events_url":"https://api.github.com/users/mbostock/events{/privacy}","received_events_url":"https://api.github.com/users/mbostock/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-18T01:06:59Z","updated_at":"2016-02-18T01:13:59Z","body":"You can fix the code by specifying an SVG namespace when appending elements. For example, replace:\n\n``` js\nselection.append(\"g\");\n```\n\nWith:\n\n``` js\nselection.append(\"svg:g\");\n```\n\nIf you specify an explicit namespace, then createElementNS is always used. If you do not specify an explicit namespace, then createElementNS is used if the element to be appended has a different namespace than the document; otherwise, createElement is used.\n\nHere, because you are appending an SVG element in an SVG document, createElement is used rather than createElementNS.\n\nUnfortunately, createElement isn’t very reasonable in non-HTML documents: it creates elements with a null namespace. In HTML documents—and XUL, and perhaps other namespaces to be determined—it creates elements in the namespace of the document (e.g., XHTML).\n\nWe could make the logic HTML-specific:\n\n``` js\nvar document = this.ownerDocument,\n    documentNamespace = document.documentElement.namespaceURI,\n    namespace = this.namespaceURI;\nreturn namespace && namespace !== documentNamespace && documentNamespace === \"http://www.w3.org/1999/xhtml\"\n    ? document.createElementNS(namespace, name)\n    : document.createElement(name);\n```\n\nBut, that would mean using createElementNS to create XUL elements inside an XUL document, when it could reasonable use createElement. Though I’m unsure if there’s a difference in behavior in the XUL case—at least in HTML there is, hence #2722.\n\nI’m somewhat inclined to keep the namespace resolution logic as simple as possible… That means if you want to create an SVG element in an SVG document, you would need to specify the SVG namespace explicitly. But if there were a way to test whether document.createElement created an element of the same namespace as the document element (other than hard-coding the test for HTML), that might be reasonable.\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/d3/d3/issues/comments/185489130/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mbostock","id":230541,"node_id":"MDQ6VXNlcjIzMDU0MQ==","avatar_url":"https://avatars.githubusercontent.com/u/230541?v=4","gravatar_id":"","url":"https://api.github.com/users/mbostock","html_url":"https://github.com/mbostock","followers_url":"https://api.github.com/users/mbostock/followers","following_url":"https://api.github.com/users/mbostock/following{/other_user}","gists_url":"https://api.github.com/users/mbostock/gists{/gist_id}","starred_url":"https://api.github.com/users/mbostock/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mbostock/subscriptions","organizations_url":"https://api.github.com/users/mbostock/orgs","repos_url":"https://api.github.com/users/mbostock/repos","events_url":"https://api.github.com/users/mbostock/events{/privacy}","received_events_url":"https://api.github.com/users/mbostock/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/d3/d3/issues/comments/185494226","html_url":"https://github.com/d3/d3/issues/2737#issuecomment-185494226","issue_url":"https://api.github.com/repos/d3/d3/issues/2737","id":185494226,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NTQ5NDIyNg==","user":{"login":"mbostock","id":230541,"node_id":"MDQ6VXNlcjIzMDU0MQ==","avatar_url":"https://avatars.githubusercontent.com/u/230541?v=4","gravatar_id":"","url":"https://api.github.com/users/mbostock","html_url":"https://github.com/mbostock","followers_url":"https://api.github.com/users/mbostock/followers","following_url":"https://api.github.com/users/mbostock/following{/other_user}","gists_url":"https://api.github.com/users/mbostock/gists{/gist_id}","starred_url":"https://api.github.com/users/mbostock/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mbostock/subscriptions","organizations_url":"https://api.github.com/users/mbostock/orgs","repos_url":"https://api.github.com/users/mbostock/repos","events_url":"https://api.github.com/users/mbostock/events{/privacy}","received_events_url":"https://api.github.com/users/mbostock/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-18T01:21:26Z","updated_at":"2016-02-18T01:21:26Z","body":"The specification for [createElement](https://www.w3.org/TR/dom/#dom-document-createelement) is HTML-specific, so it seems reasonable to make our logic HTML-specific, too.\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/d3/d3/issues/comments/185494226/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mbostock","id":230541,"node_id":"MDQ6VXNlcjIzMDU0MQ==","avatar_url":"https://avatars.githubusercontent.com/u/230541?v=4","gravatar_id":"","url":"https://api.github.com/users/mbostock","html_url":"https://github.com/mbostock","followers_url":"https://api.github.com/users/mbostock/followers","following_url":"https://api.github.com/users/mbostock/following{/other_user}","gists_url":"https://api.github.com/users/mbostock/gists{/gist_id}","starred_url":"https://api.github.com/users/mbostock/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mbostock/subscriptions","organizations_url":"https://api.github.com/users/mbostock/orgs","repos_url":"https://api.github.com/users/mbostock/repos","events_url":"https://api.github.com/users/mbostock/events{/privacy}","received_events_url":"https://api.github.com/users/mbostock/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":554469619,"node_id":"MDExOkNsb3NlZEV2ZW50NTU0NDY5NjE5","url":"https://api.github.com/repos/d3/d3/issues/events/554469619","actor":{"login":"mbostock","id":230541,"node_id":"MDQ6VXNlcjIzMDU0MQ==","avatar_url":"https://avatars.githubusercontent.com/u/230541?v=4","gravatar_id":"","url":"https://api.github.com/users/mbostock","html_url":"https://github.com/mbostock","followers_url":"https://api.github.com/users/mbostock/followers","following_url":"https://api.github.com/users/mbostock/following{/other_user}","gists_url":"https://api.github.com/users/mbostock/gists{/gist_id}","starred_url":"https://api.github.com/users/mbostock/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mbostock/subscriptions","organizations_url":"https://api.github.com/users/mbostock/orgs","repos_url":"https://api.github.com/users/mbostock/repos","events_url":"https://api.github.com/users/mbostock/events{/privacy}","received_events_url":"https://api.github.com/users/mbostock/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"c36befc7361cd61538294048c387a8a407b65dd1","commit_url":"https://api.github.com/repos/d3/d3/commits/c36befc7361cd61538294048c387a8a407b65dd1","created_at":"2016-02-18T01:39:51Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/d3/d3/issues/comments/185500351","html_url":"https://github.com/d3/d3/issues/2737#issuecomment-185500351","issue_url":"https://api.github.com/repos/d3/d3/issues/2737","id":185500351,"node_id":"MDEyOklzc3VlQ29tbWVudDE4NTUwMDM1MQ==","user":{"login":"mbostock","id":230541,"node_id":"MDQ6VXNlcjIzMDU0MQ==","avatar_url":"https://avatars.githubusercontent.com/u/230541?v=4","gravatar_id":"","url":"https://api.github.com/users/mbostock","html_url":"https://github.com/mbostock","followers_url":"https://api.github.com/users/mbostock/followers","following_url":"https://api.github.com/users/mbostock/following{/other_user}","gists_url":"https://api.github.com/users/mbostock/gists{/gist_id}","starred_url":"https://api.github.com/users/mbostock/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mbostock/subscriptions","organizations_url":"https://api.github.com/users/mbostock/orgs","repos_url":"https://api.github.com/users/mbostock/repos","events_url":"https://api.github.com/users/mbostock/events{/privacy}","received_events_url":"https://api.github.com/users/mbostock/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-02-18T01:42:33Z","updated_at":"2016-02-18T01:42:33Z","body":"Fixed in 3.5.16.\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/d3/d3/issues/comments/185500351/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mbostock","id":230541,"node_id":"MDQ6VXNlcjIzMDU0MQ==","avatar_url":"https://avatars.githubusercontent.com/u/230541?v=4","gravatar_id":"","url":"https://api.github.com/users/mbostock","html_url":"https://github.com/mbostock","followers_url":"https://api.github.com/users/mbostock/followers","following_url":"https://api.github.com/users/mbostock/following{/other_user}","gists_url":"https://api.github.com/users/mbostock/gists{/gist_id}","starred_url":"https://api.github.com/users/mbostock/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mbostock/subscriptions","organizations_url":"https://api.github.com/users/mbostock/orgs","repos_url":"https://api.github.com/users/mbostock/repos","events_url":"https://api.github.com/users/mbostock/events{/privacy}","received_events_url":"https://api.github.com/users/mbostock/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":554486478,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDU1NDQ4NjQ3OA==","url":"https://api.github.com/repos/d3/d3/issues/events/554486478","actor":{"login":"mbostock","id":230541,"node_id":"MDQ6VXNlcjIzMDU0MQ==","avatar_url":"https://avatars.githubusercontent.com/u/230541?v=4","gravatar_id":"","url":"https://api.github.com/users/mbostock","html_url":"https://github.com/mbostock","followers_url":"https://api.github.com/users/mbostock/followers","following_url":"https://api.github.com/users/mbostock/following{/other_user}","gists_url":"https://api.github.com/users/mbostock/gists{/gist_id}","starred_url":"https://api.github.com/users/mbostock/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mbostock/subscriptions","organizations_url":"https://api.github.com/users/mbostock/orgs","repos_url":"https://api.github.com/users/mbostock/repos","events_url":"https://api.github.com/users/mbostock/events{/privacy}","received_events_url":"https://api.github.com/users/mbostock/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"8044b258c5e17d39092a5a88a7adb1250f2f3a4d","commit_url":"https://api.github.com/repos/d3/d3-selection/commits/8044b258c5e17d39092a5a88a7adb1250f2f3a4d","created_at":"2016-02-18T01:58:02Z","performed_via_github_app":null},{"id":11665723609,"node_id":"REFE_lADOAA5kLc4H9kRazwAAAAK3VNDZ","url":"https://api.github.com/repos/d3/d3/issues/events/11665723609","actor":{"login":"aiex","id":2274929,"node_id":"MDQ6VXNlcjIyNzQ5Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/2274929?v=4","gravatar_id":"","url":"https://api.github.com/users/aiex","html_url":"https://github.com/aiex","followers_url":"https://api.github.com/users/aiex/followers","following_url":"https://api.github.com/users/aiex/following{/other_user}","gists_url":"https://api.github.com/users/aiex/gists{/gist_id}","starred_url":"https://api.github.com/users/aiex/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aiex/subscriptions","organizations_url":"https://api.github.com/users/aiex/orgs","repos_url":"https://api.github.com/users/aiex/repos","events_url":"https://api.github.com/users/aiex/events{/privacy}","received_events_url":"https://api.github.com/users/aiex/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"c36befc7361cd61538294048c387a8a407b65dd1","commit_url":"https://api.github.com/repos/aiex/d3/commits/c36befc7361cd61538294048c387a8a407b65dd1","created_at":"2024-02-01T07:37:25Z","performed_via_github_app":null}]