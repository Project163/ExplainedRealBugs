[{"url":"https://api.github.com/repos/d3/d3/issues/comments/19149091","html_url":"https://github.com/d3/d3/issues/1300#issuecomment-19149091","issue_url":"https://api.github.com/repos/d3/d3/issues/1300","id":19149091,"node_id":"MDEyOklzc3VlQ29tbWVudDE5MTQ5MDkx","user":{"login":"mbostock","id":230541,"node_id":"MDQ6VXNlcjIzMDU0MQ==","avatar_url":"https://avatars.githubusercontent.com/u/230541?v=4","gravatar_id":"","url":"https://api.github.com/users/mbostock","html_url":"https://github.com/mbostock","followers_url":"https://api.github.com/users/mbostock/followers","following_url":"https://api.github.com/users/mbostock/following{/other_user}","gists_url":"https://api.github.com/users/mbostock/gists{/gist_id}","starred_url":"https://api.github.com/users/mbostock/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mbostock/subscriptions","organizations_url":"https://api.github.com/users/mbostock/orgs","repos_url":"https://api.github.com/users/mbostock/repos","events_url":"https://api.github.com/users/mbostock/events{/privacy}","received_events_url":"https://api.github.com/users/mbostock/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2013-06-08T13:59:15Z","updated_at":"2013-06-08T13:59:15Z","body":"I’ve isolated it to this polygon in Russia:\n\n``` json\n{\n  \"type\": \"Feature\",\n  \"id\": 643,\n  \"properties\": {},\n  \"geometry\": {\n    \"type\": \"Polygon\",\n    \"coordinates\": [[\n      [-180.00000000000000, 64.97959372245461],\n      [-180.00000000000000, 68.96387667469816],\n      [-177.54837548375482, 68.20053274459542],\n      [-174.92754927549277, 67.20530828583620],\n      [-175.01395013950140, 66.58413927841335],\n      [-174.34074340743408, 66.33533316372353],\n      [-174.57114571145712, 67.06144080455297],\n      [-171.85671856718568, 66.91249564745976],\n      [-169.89829898298984, 65.97651073981714],\n      [-170.89190891908920, 65.54152317876083],\n      [-172.52992529925300, 65.43827710395757],\n      [-172.55512555125551, 64.45997823123167],\n      [-172.95472954729547, 64.25348608162517],\n      [-173.89073890738908, 64.28225957788180],\n      [-174.65394653946538, 64.63092665016819],\n      [-175.98235982359824, 64.92204672994131],\n      [-176.20556205562056, 65.35703429099763],\n      [-177.22437224372243, 65.51951991691752],\n      [-178.35838358383583, 65.39088546306428],\n      [-178.90198901989020, 65.74124509395400],\n      [-178.68598685986860, 66.11191542808370],\n      [-179.88479884798850, 65.87495722361723],\n      [-179.43119431194313, 65.40442593189093],\n      [-180.00000000000000, 64.97959372245461]\n    ]]\n  }\n}\n```\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/d3/d3/issues/comments/19149091/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mbostock","id":230541,"node_id":"MDQ6VXNlcjIzMDU0MQ==","avatar_url":"https://avatars.githubusercontent.com/u/230541?v=4","gravatar_id":"","url":"https://api.github.com/users/mbostock","html_url":"https://github.com/mbostock","followers_url":"https://api.github.com/users/mbostock/followers","following_url":"https://api.github.com/users/mbostock/following{/other_user}","gists_url":"https://api.github.com/users/mbostock/gists{/gist_id}","starred_url":"https://api.github.com/users/mbostock/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mbostock/subscriptions","organizations_url":"https://api.github.com/users/mbostock/orgs","repos_url":"https://api.github.com/users/mbostock/repos","events_url":"https://api.github.com/users/mbostock/events{/privacy}","received_events_url":"https://api.github.com/users/mbostock/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/d3/d3/issues/comments/19149404","html_url":"https://github.com/d3/d3/issues/1300#issuecomment-19149404","issue_url":"https://api.github.com/repos/d3/d3/issues/1300","id":19149404,"node_id":"MDEyOklzc3VlQ29tbWVudDE5MTQ5NDA0","user":{"login":"mbostock","id":230541,"node_id":"MDQ6VXNlcjIzMDU0MQ==","avatar_url":"https://avatars.githubusercontent.com/u/230541?v=4","gravatar_id":"","url":"https://api.github.com/users/mbostock","html_url":"https://github.com/mbostock","followers_url":"https://api.github.com/users/mbostock/followers","following_url":"https://api.github.com/users/mbostock/following{/other_user}","gists_url":"https://api.github.com/users/mbostock/gists{/gist_id}","starred_url":"https://api.github.com/users/mbostock/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mbostock/subscriptions","organizations_url":"https://api.github.com/users/mbostock/orgs","repos_url":"https://api.github.com/users/mbostock/repos","events_url":"https://api.github.com/users/mbostock/events{/privacy}","received_events_url":"https://api.github.com/users/mbostock/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2013-06-08T14:18:31Z","updated_at":"2013-06-08T14:18:31Z","body":"Seems to be d3_geo_clipAreaRing returning a negative visible area (-5.011506098654028) for this `segment` input:\n\n``` json\n[\n  [-3.1415926535897930, -0.0167273451149496860],\n  [-3.1415926535897930, +0.0528115107327802240],\n  [-3.1256941838474295, +0.0397992609305065500],\n  [-3.1073217006959366, +0.0235045127193175700],\n  [-3.1070435470904263, +0.0126504951312348920],\n  [-3.1019995675365190, +0.0087211911892442330],\n  [-3.1047024633883250, +0.0212043790779454230],\n  [-3.0860064563297360, +0.0206191571335617900],\n  [-3.0701247064340040, +0.0064348314205278610],\n  [-3.0760049915827880, -0.0021530374928617657],\n  [-3.0875245009169756, -0.0055004203273918565],\n  [-3.0856854550817365, -0.0224766718841865850],\n  [-3.0882692845346074, -0.0264043063844694860],\n  [-3.0953780359612506, -0.0266469608251911520],\n  [-3.1016543009696207, -0.0211105780160901270],\n  [-3.1118875811522777, -0.0167804957290211900],\n  [-3.1139946124807330, -0.0093051246847543990],\n  [-3.1215243701748390, -0.0068599442999119250],\n  [-3.1296622170945616, -0.0093928813804442880],\n  [-3.1337193619722274, -0.0033651335178808470],\n  [-3.1323061905924967, +0.0031326336634786237],\n  [-3.1407708461128530, -0.0010995496290781212],\n  [-3.1374605876167934, -0.0092938958545198060],\n  [-3.1415926535897930, -0.0167273451149496860]\n] \n```\n\nI converted these back to degrees and ran it through d3.geo.area:\n\n``` js\nd3.geo.area({\n  type: \"Polygon\",\n  coordinates: [[\n    [-180.00000000000000, -0.95840627754539190],\n    [-180.00000000000000, +3.02587667469815620],\n    [-179.08908478304613, +2.28032967905793500],\n    [-178.03641903929037, +1.34670937832845850],\n    [-178.02048201163828, +0.72481997977055580],\n    [-177.73148327124910, +0.49968744747037375],\n    [-177.88634779602103, +1.21492142836177690],\n    [-176.81514549781707, +1.18139068087015490],\n    [-175.90518825750928, +0.36868868227441864],\n    [-176.24210377886808, -0.12335996147440728],\n    [-176.90212304577858, -0.31515087030751987],\n    [-176.79675348108827, -1.28781843646425100],\n    [-176.94479600371935, -1.51285531680043550],\n    [-177.35209745807362, -1.52675839213389450],\n    [-177.71170095415886, -1.20954702340362270],\n    [-178.29802471920000, -0.96145158341021770],\n    [-178.41874872162230, -0.53314437227942770],\n    [-178.85017205825076, -0.39304585607977954],\n    [-179.31643634107440, -0.53817246056647230],\n    [-179.54889361943776, -0.19280794807258408],\n    [-179.46792486365050, +0.17948668767793055],\n    [-179.95291389999903, -0.06299955311135148],\n    [-179.76325005907750, -0.53250100769811660],\n    [-180.00000000000000, -0.95840627754539190]\n  ]]\n})\n```\n\nWhich a more reasonable positive result: 0.002751000767727844. So my first inclination is to say this is a problem with the approximate ring area algorithm used during clipping.\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/d3/d3/issues/comments/19149404/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mbostock","id":230541,"node_id":"MDQ6VXNlcjIzMDU0MQ==","avatar_url":"https://avatars.githubusercontent.com/u/230541?v=4","gravatar_id":"","url":"https://api.github.com/users/mbostock","html_url":"https://github.com/mbostock","followers_url":"https://api.github.com/users/mbostock/followers","following_url":"https://api.github.com/users/mbostock/following{/other_user}","gists_url":"https://api.github.com/users/mbostock/gists{/gist_id}","starred_url":"https://api.github.com/users/mbostock/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mbostock/subscriptions","organizations_url":"https://api.github.com/users/mbostock/orgs","repos_url":"https://api.github.com/users/mbostock/repos","events_url":"https://api.github.com/users/mbostock/events{/privacy}","received_events_url":"https://api.github.com/users/mbostock/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":51928996,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDUxOTI4OTk2","url":"https://api.github.com/repos/d3/d3/issues/events/51928996","actor":{"login":"jasondavies","id":31223,"node_id":"MDQ6VXNlcjMxMjIz","avatar_url":"https://avatars.githubusercontent.com/u/31223?v=4","gravatar_id":"","url":"https://api.github.com/users/jasondavies","html_url":"https://github.com/jasondavies","followers_url":"https://api.github.com/users/jasondavies/followers","following_url":"https://api.github.com/users/jasondavies/following{/other_user}","gists_url":"https://api.github.com/users/jasondavies/gists{/gist_id}","starred_url":"https://api.github.com/users/jasondavies/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasondavies/subscriptions","organizations_url":"https://api.github.com/users/jasondavies/orgs","repos_url":"https://api.github.com/users/jasondavies/repos","events_url":"https://api.github.com/users/jasondavies/events{/privacy}","received_events_url":"https://api.github.com/users/jasondavies/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"f86be427817061f8663bbd433dca85238ca0446f","commit_url":"https://api.github.com/repos/d3/d3/commits/f86be427817061f8663bbd433dca85238ca0446f","created_at":"2013-06-08T18:05:34Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/d3/d3/issues/comments/19152866","html_url":"https://github.com/d3/d3/issues/1300#issuecomment-19152866","issue_url":"https://api.github.com/repos/d3/d3/issues/1300","id":19152866,"node_id":"MDEyOklzc3VlQ29tbWVudDE5MTUyODY2","user":{"login":"jasondavies","id":31223,"node_id":"MDQ6VXNlcjMxMjIz","avatar_url":"https://avatars.githubusercontent.com/u/31223?v=4","gravatar_id":"","url":"https://api.github.com/users/jasondavies","html_url":"https://github.com/jasondavies","followers_url":"https://api.github.com/users/jasondavies/followers","following_url":"https://api.github.com/users/jasondavies/following{/other_user}","gists_url":"https://api.github.com/users/jasondavies/gists{/gist_id}","starred_url":"https://api.github.com/users/jasondavies/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasondavies/subscriptions","organizations_url":"https://api.github.com/users/jasondavies/orgs","repos_url":"https://api.github.com/users/jasondavies/repos","events_url":"https://api.github.com/users/jasondavies/events{/privacy}","received_events_url":"https://api.github.com/users/jasondavies/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2013-06-08T18:07:59Z","updated_at":"2013-06-08T18:07:59Z","body":"Fix staged in #1285.  I extracted the point-in-polygon algorithm from the clip-polygon branch and optimised it a bit.  It’s a tiny bit slower than before, but it’s accurate.  I also optimised d3.geo.resample, which means there is roughly zero net performance change here. ;)\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/d3/d3/issues/comments/19152866/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jasondavies","id":31223,"node_id":"MDQ6VXNlcjMxMjIz","avatar_url":"https://avatars.githubusercontent.com/u/31223?v=4","gravatar_id":"","url":"https://api.github.com/users/jasondavies","html_url":"https://github.com/jasondavies","followers_url":"https://api.github.com/users/jasondavies/followers","following_url":"https://api.github.com/users/jasondavies/following{/other_user}","gists_url":"https://api.github.com/users/jasondavies/gists{/gist_id}","starred_url":"https://api.github.com/users/jasondavies/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasondavies/subscriptions","organizations_url":"https://api.github.com/users/jasondavies/orgs","repos_url":"https://api.github.com/users/jasondavies/repos","events_url":"https://api.github.com/users/jasondavies/events{/privacy}","received_events_url":"https://api.github.com/users/jasondavies/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":51929066,"node_id":"MDExOkNsb3NlZEV2ZW50NTE5MjkwNjY=","url":"https://api.github.com/repos/d3/d3/issues/events/51929066","actor":{"login":"jasondavies","id":31223,"node_id":"MDQ6VXNlcjMxMjIz","avatar_url":"https://avatars.githubusercontent.com/u/31223?v=4","gravatar_id":"","url":"https://api.github.com/users/jasondavies","html_url":"https://github.com/jasondavies","followers_url":"https://api.github.com/users/jasondavies/followers","following_url":"https://api.github.com/users/jasondavies/following{/other_user}","gists_url":"https://api.github.com/users/jasondavies/gists{/gist_id}","starred_url":"https://api.github.com/users/jasondavies/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jasondavies/subscriptions","organizations_url":"https://api.github.com/users/jasondavies/orgs","repos_url":"https://api.github.com/users/jasondavies/repos","events_url":"https://api.github.com/users/jasondavies/events{/privacy}","received_events_url":"https://api.github.com/users/jasondavies/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2013-06-08T18:08:00Z","state_reason":null,"performed_via_github_app":null},{"actor":{"login":"baversjo","id":371678,"node_id":"MDQ6VXNlcjM3MTY3OA==","avatar_url":"https://avatars.githubusercontent.com/u/371678?v=4","gravatar_id":"","url":"https://api.github.com/users/baversjo","html_url":"https://github.com/baversjo","followers_url":"https://api.github.com/users/baversjo/followers","following_url":"https://api.github.com/users/baversjo/following{/other_user}","gists_url":"https://api.github.com/users/baversjo/gists{/gist_id}","starred_url":"https://api.github.com/users/baversjo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baversjo/subscriptions","organizations_url":"https://api.github.com/users/baversjo/orgs","repos_url":"https://api.github.com/users/baversjo/repos","events_url":"https://api.github.com/users/baversjo/events{/privacy}","received_events_url":"https://api.github.com/users/baversjo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2013-06-11T02:19:08Z","updated_at":"2013-06-11T02:19:08Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/d3/d3/issues/1305","repository_url":"https://api.github.com/repos/d3/d3","labels_url":"https://api.github.com/repos/d3/d3/issues/1305/labels{/name}","comments_url":"https://api.github.com/repos/d3/d3/issues/1305/comments","events_url":"https://api.github.com/repos/d3/d3/issues/1305/events","html_url":"https://github.com/d3/d3/issues/1305","id":15377802,"node_id":"MDU6SXNzdWUxNTM3NzgwMg==","number":1305,"title":"Point-in-polygon breaks winding order?","user":{"login":"baversjo","id":371678,"node_id":"MDQ6VXNlcjM3MTY3OA==","avatar_url":"https://avatars.githubusercontent.com/u/371678?v=4","gravatar_id":"","url":"https://api.github.com/users/baversjo","html_url":"https://github.com/baversjo","followers_url":"https://api.github.com/users/baversjo/followers","following_url":"https://api.github.com/users/baversjo/following{/other_user}","gists_url":"https://api.github.com/users/baversjo/gists{/gist_id}","starred_url":"https://api.github.com/users/baversjo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baversjo/subscriptions","organizations_url":"https://api.github.com/users/baversjo/orgs","repos_url":"https://api.github.com/users/baversjo/repos","events_url":"https://api.github.com/users/baversjo/events{/privacy}","received_events_url":"https://api.github.com/users/baversjo/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/d3/d3/milestones/25","html_url":"https://github.com/d3/d3/milestone/25","labels_url":"https://api.github.com/repos/d3/d3/milestones/25/labels","id":305932,"node_id":"MDk6TWlsZXN0b25lMzA1OTMy","number":25,"title":"3.2","description":"","creator":{"login":"mbostock","id":230541,"node_id":"MDQ6VXNlcjIzMDU0MQ==","avatar_url":"https://avatars.githubusercontent.com/u/230541?v=4","gravatar_id":"","url":"https://api.github.com/users/mbostock","html_url":"https://github.com/mbostock","followers_url":"https://api.github.com/users/mbostock/followers","following_url":"https://api.github.com/users/mbostock/following{/other_user}","gists_url":"https://api.github.com/users/mbostock/gists{/gist_id}","starred_url":"https://api.github.com/users/mbostock/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mbostock/subscriptions","organizations_url":"https://api.github.com/users/mbostock/orgs","repos_url":"https://api.github.com/users/mbostock/repos","events_url":"https://api.github.com/users/mbostock/events{/privacy}","received_events_url":"https://api.github.com/users/mbostock/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":45,"state":"closed","created_at":"2013-04-08T15:17:39Z","updated_at":"2013-06-30T21:37:47Z","due_on":null,"closed_at":"2013-06-13T22:52:26Z"},"comments":9,"created_at":"2013-06-11T02:12:01Z","updated_at":"2013-06-11T22:54:37Z","closed_at":"2013-06-11T22:54:37Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":943149,"node_id":"MDEwOlJlcG9zaXRvcnk5NDMxNDk=","name":"d3","full_name":"d3/d3","private":false,"owner":{"login":"d3","id":1562726,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE1NjI3MjY=","avatar_url":"https://avatars.githubusercontent.com/u/1562726?v=4","gravatar_id":"","url":"https://api.github.com/users/d3","html_url":"https://github.com/d3","followers_url":"https://api.github.com/users/d3/followers","following_url":"https://api.github.com/users/d3/following{/other_user}","gists_url":"https://api.github.com/users/d3/gists{/gist_id}","starred_url":"https://api.github.com/users/d3/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/d3/subscriptions","organizations_url":"https://api.github.com/users/d3/orgs","repos_url":"https://api.github.com/users/d3/repos","events_url":"https://api.github.com/users/d3/events{/privacy}","received_events_url":"https://api.github.com/users/d3/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/d3/d3","description":"Bring data to life with SVG, Canvas and HTML. :bar_chart::chart_with_upwards_trend::tada:","fork":false,"url":"https://api.github.com/repos/d3/d3","forks_url":"https://api.github.com/repos/d3/d3/forks","keys_url":"https://api.github.com/repos/d3/d3/keys{/key_id}","collaborators_url":"https://api.github.com/repos/d3/d3/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/d3/d3/teams","hooks_url":"https://api.github.com/repos/d3/d3/hooks","issue_events_url":"https://api.github.com/repos/d3/d3/issues/events{/number}","events_url":"https://api.github.com/repos/d3/d3/events","assignees_url":"https://api.github.com/repos/d3/d3/assignees{/user}","branches_url":"https://api.github.com/repos/d3/d3/branches{/branch}","tags_url":"https://api.github.com/repos/d3/d3/tags","blobs_url":"https://api.github.com/repos/d3/d3/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/d3/d3/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/d3/d3/git/refs{/sha}","trees_url":"https://api.github.com/repos/d3/d3/git/trees{/sha}","statuses_url":"https://api.github.com/repos/d3/d3/statuses/{sha}","languages_url":"https://api.github.com/repos/d3/d3/languages","stargazers_url":"https://api.github.com/repos/d3/d3/stargazers","contributors_url":"https://api.github.com/repos/d3/d3/contributors","subscribers_url":"https://api.github.com/repos/d3/d3/subscribers","subscription_url":"https://api.github.com/repos/d3/d3/subscription","commits_url":"https://api.github.com/repos/d3/d3/commits{/sha}","git_commits_url":"https://api.github.com/repos/d3/d3/git/commits{/sha}","comments_url":"https://api.github.com/repos/d3/d3/comments{/number}","issue_comment_url":"https://api.github.com/repos/d3/d3/issues/comments{/number}","contents_url":"https://api.github.com/repos/d3/d3/contents/{+path}","compare_url":"https://api.github.com/repos/d3/d3/compare/{base}...{head}","merges_url":"https://api.github.com/repos/d3/d3/merges","archive_url":"https://api.github.com/repos/d3/d3/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/d3/d3/downloads","issues_url":"https://api.github.com/repos/d3/d3/issues{/number}","pulls_url":"https://api.github.com/repos/d3/d3/pulls{/number}","milestones_url":"https://api.github.com/repos/d3/d3/milestones{/number}","notifications_url":"https://api.github.com/repos/d3/d3/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/d3/d3/labels{/name}","releases_url":"https://api.github.com/repos/d3/d3/releases{/id}","deployments_url":"https://api.github.com/repos/d3/d3/deployments","created_at":"2010-09-27T17:22:42Z","updated_at":"2025-11-09T18:23:06Z","pushed_at":"2025-07-27T11:30:40Z","git_url":"git://github.com/d3/d3.git","ssh_url":"git@github.com:d3/d3.git","clone_url":"https://github.com/d3/d3.git","svn_url":"https://github.com/d3/d3","homepage":"https://d3js.org","size":59341,"stargazers_count":111757,"watchers_count":111757,"language":"Shell","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":true,"has_discussions":true,"forks_count":22847,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":25,"license":{"key":"isc","name":"ISC License","spdx_id":"ISC","url":"https://api.github.com/licenses/isc","node_id":"MDc6TGljZW5zZTEw"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["chart","charts","d3","data-visualization","svg","visualization"],"visibility":"public","forks":22847,"open_issues":25,"watchers":111757,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"I'm not sure what's causing this, but I was able to git bisect the issue down to the recent commit f86be42 and issue #1300 . Simply running git revert on f86be42 fixes the issue (with some implications I'm sure)...\n\nFor the two comparisons below, the first image is using d3.js before f86be42 and the second (bad) image at f86be42.\n\nIn this first comparison, you can in the second (bad) image see Aceh, Indonesia \"leaking\" across the entire screen (red). It's very clear what's happening as the red fill of Aceh has opacity, and the polygon covers the entire svg area.\n![Aceh good](https://f.cloud.github.com/assets/371678/634955/a1a53452-d230-11e2-8ca2-1a5c138af497.png)\n\n![Aceh bad](https://f.cloud.github.com/assets/371678/634956/a1e1c3d6-d230-11e2-8c2b-0f099d392f4a.png)\n\nIn the second comparison (different visualization from the one above), a similar effect is seen for East Timor, Indonesia. You can see that indonesia (which is also a feature with multiple polygons due to islands) takes up the entire svg in the , bad example.\n![East Timor good](https://f.cloud.github.com/assets/371678/634958/a203ea06-d230-11e2-900d-95211a643607.png)\n\n![East Timor bad](https://f.cloud.github.com/assets/371678/634957/a1fab9cc-d230-11e2-92ab-2b1a6b9b7a26.png)\n\nI'm using geo data provided by gadm in both examples.\nogr2ogr (GDAL 1.9.1) is used to simplify the polygons with a threshold of 0.03.\ntopojson 1.0.0 is used.\n\nWorking (d3 3.1.10):\nhttp://bl.ocks.org/baversjo/8b3beb25c77d40fd7678/57da5bca3242a29b33dacbcea97f477d4005c830\nNot working (d3 3.2, head of user-select branch):\nhttp://bl.ocks.org/baversjo/8b3beb25c77d40fd7678/4f5a49c10a5b17d77c95a47621055bf7d931031d\n","reactions":{"url":"https://api.github.com/repos/d3/d3/issues/1305/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/d3/d3/issues/1305/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"}]