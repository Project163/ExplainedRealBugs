{"url":"https://api.github.com/repos/d3/d3/issues/1305","repository_url":"https://api.github.com/repos/d3/d3","labels_url":"https://api.github.com/repos/d3/d3/issues/1305/labels{/name}","comments_url":"https://api.github.com/repos/d3/d3/issues/1305/comments","events_url":"https://api.github.com/repos/d3/d3/issues/1305/events","html_url":"https://github.com/d3/d3/issues/1305","id":15377802,"node_id":"MDU6SXNzdWUxNTM3NzgwMg==","number":1305,"title":"Point-in-polygon breaks winding order?","user":{"login":"baversjo","id":371678,"node_id":"MDQ6VXNlcjM3MTY3OA==","avatar_url":"https://avatars.githubusercontent.com/u/371678?v=4","gravatar_id":"","url":"https://api.github.com/users/baversjo","html_url":"https://github.com/baversjo","followers_url":"https://api.github.com/users/baversjo/followers","following_url":"https://api.github.com/users/baversjo/following{/other_user}","gists_url":"https://api.github.com/users/baversjo/gists{/gist_id}","starred_url":"https://api.github.com/users/baversjo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baversjo/subscriptions","organizations_url":"https://api.github.com/users/baversjo/orgs","repos_url":"https://api.github.com/users/baversjo/repos","events_url":"https://api.github.com/users/baversjo/events{/privacy}","received_events_url":"https://api.github.com/users/baversjo/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/d3/d3/milestones/25","html_url":"https://github.com/d3/d3/milestone/25","labels_url":"https://api.github.com/repos/d3/d3/milestones/25/labels","id":305932,"node_id":"MDk6TWlsZXN0b25lMzA1OTMy","number":25,"title":"3.2","description":"","creator":{"login":"mbostock","id":230541,"node_id":"MDQ6VXNlcjIzMDU0MQ==","avatar_url":"https://avatars.githubusercontent.com/u/230541?v=4","gravatar_id":"","url":"https://api.github.com/users/mbostock","html_url":"https://github.com/mbostock","followers_url":"https://api.github.com/users/mbostock/followers","following_url":"https://api.github.com/users/mbostock/following{/other_user}","gists_url":"https://api.github.com/users/mbostock/gists{/gist_id}","starred_url":"https://api.github.com/users/mbostock/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mbostock/subscriptions","organizations_url":"https://api.github.com/users/mbostock/orgs","repos_url":"https://api.github.com/users/mbostock/repos","events_url":"https://api.github.com/users/mbostock/events{/privacy}","received_events_url":"https://api.github.com/users/mbostock/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":45,"state":"closed","created_at":"2013-04-08T15:17:39Z","updated_at":"2013-06-30T21:37:47Z","due_on":null,"closed_at":"2013-06-13T22:52:26Z"},"comments":9,"created_at":"2013-06-11T02:12:01Z","updated_at":"2013-06-11T22:54:37Z","closed_at":"2013-06-11T22:54:37Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"I'm not sure what's causing this, but I was able to git bisect the issue down to the recent commit f86be42 and issue #1300 . Simply running git revert on f86be42 fixes the issue (with some implications I'm sure)...\n\nFor the two comparisons below, the first image is using d3.js before f86be42 and the second (bad) image at f86be42.\n\nIn this first comparison, you can in the second (bad) image see Aceh, Indonesia \"leaking\" across the entire screen (red). It's very clear what's happening as the red fill of Aceh has opacity, and the polygon covers the entire svg area.\n![Aceh good](https://f.cloud.github.com/assets/371678/634955/a1a53452-d230-11e2-8ca2-1a5c138af497.png)\n\n![Aceh bad](https://f.cloud.github.com/assets/371678/634956/a1e1c3d6-d230-11e2-8c2b-0f099d392f4a.png)\n\nIn the second comparison (different visualization from the one above), a similar effect is seen for East Timor, Indonesia. You can see that indonesia (which is also a feature with multiple polygons due to islands) takes up the entire svg in the , bad example.\n![East Timor good](https://f.cloud.github.com/assets/371678/634958/a203ea06-d230-11e2-900d-95211a643607.png)\n\n![East Timor bad](https://f.cloud.github.com/assets/371678/634957/a1fab9cc-d230-11e2-92ab-2b1a6b9b7a26.png)\n\nI'm using geo data provided by gadm in both examples.\nogr2ogr (GDAL 1.9.1) is used to simplify the polygons with a threshold of 0.03.\ntopojson 1.0.0 is used.\n\nWorking (d3 3.1.10):\nhttp://bl.ocks.org/baversjo/8b3beb25c77d40fd7678/57da5bca3242a29b33dacbcea97f477d4005c830\nNot working (d3 3.2, head of user-select branch):\nhttp://bl.ocks.org/baversjo/8b3beb25c77d40fd7678/4f5a49c10a5b17d77c95a47621055bf7d931031d\n","closed_by":{"login":"mbostock","id":230541,"node_id":"MDQ6VXNlcjIzMDU0MQ==","avatar_url":"https://avatars.githubusercontent.com/u/230541?v=4","gravatar_id":"","url":"https://api.github.com/users/mbostock","html_url":"https://github.com/mbostock","followers_url":"https://api.github.com/users/mbostock/followers","following_url":"https://api.github.com/users/mbostock/following{/other_user}","gists_url":"https://api.github.com/users/mbostock/gists{/gist_id}","starred_url":"https://api.github.com/users/mbostock/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mbostock/subscriptions","organizations_url":"https://api.github.com/users/mbostock/orgs","repos_url":"https://api.github.com/users/mbostock/repos","events_url":"https://api.github.com/users/mbostock/events{/privacy}","received_events_url":"https://api.github.com/users/mbostock/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/d3/d3/issues/1305/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/d3/d3/issues/1305/timeline","performed_via_github_app":null,"state_reason":"completed"}