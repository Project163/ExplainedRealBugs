{"url":"https://api.github.com/repos/d3/d3/issues/418","repository_url":"https://api.github.com/repos/d3/d3","labels_url":"https://api.github.com/repos/d3/d3/issues/418/labels{/name}","comments_url":"https://api.github.com/repos/d3/d3/issues/418/comments","events_url":"https://api.github.com/repos/d3/d3/issues/418/events","html_url":"https://github.com/d3/d3/issues/418","id":2688405,"node_id":"MDU6SXNzdWUyNjg4NDA1","number":418,"title":"Support touch events in d3.svg.brush","user":{"login":"tmm1","id":2567,"node_id":"MDQ6VXNlcjI1Njc=","avatar_url":"https://avatars.githubusercontent.com/u/2567?v=4","gravatar_id":"","url":"https://api.github.com/users/tmm1","html_url":"https://github.com/tmm1","followers_url":"https://api.github.com/users/tmm1/followers","following_url":"https://api.github.com/users/tmm1/following{/other_user}","gists_url":"https://api.github.com/users/tmm1/gists{/gist_id}","starred_url":"https://api.github.com/users/tmm1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tmm1/subscriptions","organizations_url":"https://api.github.com/users/tmm1/orgs","repos_url":"https://api.github.com/users/tmm1/repos","events_url":"https://api.github.com/users/tmm1/events{/privacy}","received_events_url":"https://api.github.com/users/tmm1/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/d3/d3/milestones/11","html_url":"https://github.com/d3/d3/milestone/11","labels_url":"https://api.github.com/repos/d3/d3/milestones/11/labels","id":69956,"node_id":"MDk6TWlsZXN0b25lNjk5NTY=","number":11,"title":"2.7.x","description":"","creator":{"login":"mbostock","id":230541,"node_id":"MDQ6VXNlcjIzMDU0MQ==","avatar_url":"https://avatars.githubusercontent.com/u/230541?v=4","gravatar_id":"","url":"https://api.github.com/users/mbostock","html_url":"https://github.com/mbostock","followers_url":"https://api.github.com/users/mbostock/followers","following_url":"https://api.github.com/users/mbostock/following{/other_user}","gists_url":"https://api.github.com/users/mbostock/gists{/gist_id}","starred_url":"https://api.github.com/users/mbostock/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mbostock/subscriptions","organizations_url":"https://api.github.com/users/mbostock/orgs","repos_url":"https://api.github.com/users/mbostock/repos","events_url":"https://api.github.com/users/mbostock/events{/privacy}","received_events_url":"https://api.github.com/users/mbostock/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":35,"state":"closed","created_at":"2012-01-03T20:16:44Z","updated_at":"2012-02-22T03:37:18Z","due_on":null,"closed_at":"2012-02-22T03:36:34Z"},"comments":2,"created_at":"2011-12-30T11:59:51Z","updated_at":"2012-02-17T16:40:46Z","closed_at":"2012-02-17T16:40:46Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"There's probably much better ways to implement this, so I'm not even going to bother with a pull request:\n\n``` diff\n\ndiff --git a/public/src/d3.js b/public/src/d3.js\nindex 9f986ce..9b9254e 100644\n--- a/public/src/d3.js\n+++ b/public/src/d3.js\n@@ -3942,12 +3942,17 @@ d3.svg.brush = function() {\n         : [];\n\n     g.each(function() {\n-      var g = d3.select(this).on(\"mousedown.brush\", down),\n+      var g = d3.select(this),\n           bg = g.selectAll(\".background\").data([,]),\n           fg = g.selectAll(\".extent\").data([,]),\n           tz = g.selectAll(\".resize\").data(resizes, String),\n           e;\n\n+      if (typeof Touch == 'object')\n+        g.on(\"touchstart.brush\", down)\n+      else\n+        g.on(\"mousedown.brush\", down)\n+\n       // An invisible, mouseable area for starting a new brush.\n       bg.enter().append(\"svg:rect\")\n           .attr(\"class\", \"background\")\n@@ -3994,7 +3999,7 @@ d3.svg.brush = function() {\n     d3_svg_brush = brush;\n     d3_svg_brushTarget = this;\n     d3_svg_brushExtent = extent;\n-    d3_svg_brushOffset = d3.svg.mouse(d3_svg_brushTarget);\n+    d3_svg_brushOffset = (typeof Touch == 'object') ? d3.svg.touches(d3_svg_brushTarget, d3.event.changedTouches)[0] : d3.svg.mouse(d3_svg_brushTarget);\n\n     // If the extent was clicked on, drag rather than brush;\n     // store the offset between the mouse and extent origin instead.\n@@ -4104,11 +4109,17 @@ d3.svg.brush = function() {\n     return brush;\n   };\n\n-  d3.select(window)\n-      .on(\"mousemove.brush\", d3_svg_brushMove)\n-      .on(\"mouseup.brush\", d3_svg_brushUp)\n-      .on(\"keydown.brush\", d3_svg_brushKeydown)\n-      .on(\"keyup.brush\", d3_svg_brushKeyup);\n+  if (typeof Touch == 'object') {\n+    d3.select(window)\n+        .on(\"touchmove.brush\", d3_svg_brushMove)\n+        .on(\"touchend.brush\", d3_svg_brushUp)\n+  } else {\n+    d3.select(window)\n+        .on(\"mousemove.brush\", d3_svg_brushMove)\n+        .on(\"mouseup.brush\", d3_svg_brushUp)\n+        .on(\"keydown.brush\", d3_svg_brushKeydown)\n+        .on(\"keyup.brush\", d3_svg_brushKeyup);\n+  }\n\n   return brush;\n };\n@@ -4159,8 +4170,13 @@ function d3_svg_brushKeyup() {\n\n function d3_svg_brushMove() {\n   if (d3_svg_brushOffset) {\n-    var mouse = d3.svg.mouse(d3_svg_brushTarget),\n-        g = d3.select(d3_svg_brushTarget);\n+    if (typeof Touch == 'object') {\n+      var mouse = d3.svg.touches(d3_svg_brushTarget, d3.event.changedTouches)[0],\n+          g = d3.select(d3_svg_brushTarget)\n+    } else {\n+      var mouse = d3.svg.mouse(d3_svg_brushTarget),\n+          g = d3.select(d3_svg_brushTarget);\n+    }\n\n     if (!d3_svg_brushDrag) {\n\n```\n\nConfirmed working on an iPad\n","closed_by":{"login":"mbostock","id":230541,"node_id":"MDQ6VXNlcjIzMDU0MQ==","avatar_url":"https://avatars.githubusercontent.com/u/230541?v=4","gravatar_id":"","url":"https://api.github.com/users/mbostock","html_url":"https://github.com/mbostock","followers_url":"https://api.github.com/users/mbostock/followers","following_url":"https://api.github.com/users/mbostock/following{/other_user}","gists_url":"https://api.github.com/users/mbostock/gists{/gist_id}","starred_url":"https://api.github.com/users/mbostock/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mbostock/subscriptions","organizations_url":"https://api.github.com/users/mbostock/orgs","repos_url":"https://api.github.com/users/mbostock/repos","events_url":"https://api.github.com/users/mbostock/events{/privacy}","received_events_url":"https://api.github.com/users/mbostock/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/d3/d3/issues/418/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/d3/d3/issues/418/timeline","performed_via_github_app":null,"state_reason":"completed"}