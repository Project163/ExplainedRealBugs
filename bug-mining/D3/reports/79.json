{"url":"https://api.github.com/repos/d3/d3/issues/691","repository_url":"https://api.github.com/repos/d3/d3","labels_url":"https://api.github.com/repos/d3/d3/issues/691/labels{/name}","comments_url":"https://api.github.com/repos/d3/d3/issues/691/comments","events_url":"https://api.github.com/repos/d3/d3/issues/691/events","html_url":"https://github.com/d3/d3/issues/691","id":5364082,"node_id":"MDU6SXNzdWU1MzY0MDgy","number":691,"title":"d3.geo.circle clipping is buggy","user":{"login":"mbostock","id":230541,"node_id":"MDQ6VXNlcjIzMDU0MQ==","avatar_url":"https://avatars.githubusercontent.com/u/230541?v=4","gravatar_id":"","url":"https://api.github.com/users/mbostock","html_url":"https://github.com/mbostock","followers_url":"https://api.github.com/users/mbostock/followers","following_url":"https://api.github.com/users/mbostock/following{/other_user}","gists_url":"https://api.github.com/users/mbostock/gists{/gist_id}","starred_url":"https://api.github.com/users/mbostock/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mbostock/subscriptions","organizations_url":"https://api.github.com/users/mbostock/orgs","repos_url":"https://api.github.com/users/mbostock/repos","events_url":"https://api.github.com/users/mbostock/events{/privacy}","received_events_url":"https://api.github.com/users/mbostock/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":50044,"node_id":"MDU6TGFiZWw1MDA0NA==","url":"https://api.github.com/repos/d3/d3/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn’t working"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/d3/d3/milestones/14","html_url":"https://github.com/d3/d3/milestone/14","labels_url":"https://api.github.com/repos/d3/d3/milestones/14/labels","id":108165,"node_id":"MDk6TWlsZXN0b25lMTA4MTY1","number":14,"title":"2.9.x","description":"","creator":{"login":"mbostock","id":230541,"node_id":"MDQ6VXNlcjIzMDU0MQ==","avatar_url":"https://avatars.githubusercontent.com/u/230541?v=4","gravatar_id":"","url":"https://api.github.com/users/mbostock","html_url":"https://github.com/mbostock","followers_url":"https://api.github.com/users/mbostock/followers","following_url":"https://api.github.com/users/mbostock/following{/other_user}","gists_url":"https://api.github.com/users/mbostock/gists{/gist_id}","starred_url":"https://api.github.com/users/mbostock/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mbostock/subscriptions","organizations_url":"https://api.github.com/users/mbostock/orgs","repos_url":"https://api.github.com/users/mbostock/repos","events_url":"https://api.github.com/users/mbostock/events{/privacy}","received_events_url":"https://api.github.com/users/mbostock/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":43,"state":"closed","created_at":"2012-04-15T21:46:20Z","updated_at":"2012-08-13T04:28:36Z","due_on":null,"closed_at":"2012-08-10T01:47:15Z"},"comments":10,"created_at":"2012-06-29T23:51:05Z","updated_at":"2012-10-20T05:18:06Z","closed_at":"2012-07-09T19:23:21Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Circle clipping seems to mostly work, but I think it's buggy.\n\nFor example, say you're viewing the default hemisphere centered around ⟨0,0⟩ and have a simple two-point LineString that starts at  ⟨+60,0⟩ and ends at  ⟨-60,0⟩. To render this correctly, you actually need to convert a LineString to a MultiLineString: you have one visible segment from ⟨+60,0⟩ to ⟨+90,0⟩ and another visible segment from ⟨-90,0⟩ to ⟨-60,0⟩. There's no way to represent the discontinuity here based on the current implementation; we'd need to change the `clip(coordinates)` function to return an array of coordinates to represent broken segments.\n\nIt's pretty easy to see this bug when you enable clipping with the [rotating Azimuthal grid example](http://bl.ocks.org/3021474).\n\nRelated: I also wonder if there is a more efficient way to enable clipping with animation. Currently, we resample after clipping. If we resampled before clipping, perhaps we wouldn't need to resample at each frame of the animation—we could just clip the coordinates directly. But maybe that's not possible.\n\n/cc @jasondavies\n","closed_by":{"login":"mbostock","id":230541,"node_id":"MDQ6VXNlcjIzMDU0MQ==","avatar_url":"https://avatars.githubusercontent.com/u/230541?v=4","gravatar_id":"","url":"https://api.github.com/users/mbostock","html_url":"https://github.com/mbostock","followers_url":"https://api.github.com/users/mbostock/followers","following_url":"https://api.github.com/users/mbostock/following{/other_user}","gists_url":"https://api.github.com/users/mbostock/gists{/gist_id}","starred_url":"https://api.github.com/users/mbostock/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mbostock/subscriptions","organizations_url":"https://api.github.com/users/mbostock/orgs","repos_url":"https://api.github.com/users/mbostock/repos","events_url":"https://api.github.com/users/mbostock/events{/privacy}","received_events_url":"https://api.github.com/users/mbostock/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/d3/d3/issues/691/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/d3/d3/issues/691/timeline","performed_via_github_app":null,"state_reason":"completed"}