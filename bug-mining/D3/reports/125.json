{"url":"https://api.github.com/repos/d3/d3/issues/1213","repository_url":"https://api.github.com/repos/d3/d3","labels_url":"https://api.github.com/repos/d3/d3/issues/1213/labels{/name}","comments_url":"https://api.github.com/repos/d3/d3/issues/1213/comments","events_url":"https://api.github.com/repos/d3/d3/issues/1213/events","html_url":"https://github.com/d3/d3/issues/1213","id":13620443,"node_id":"MDU6SXNzdWUxMzYyMDQ0Mw==","number":1213,"title":"d3 is hard to build","user":{"login":"shawnbot","id":113896,"node_id":"MDQ6VXNlcjExMzg5Ng==","avatar_url":"https://avatars.githubusercontent.com/u/113896?v=4","gravatar_id":"","url":"https://api.github.com/users/shawnbot","html_url":"https://github.com/shawnbot","followers_url":"https://api.github.com/users/shawnbot/followers","following_url":"https://api.github.com/users/shawnbot/following{/other_user}","gists_url":"https://api.github.com/users/shawnbot/gists{/gist_id}","starred_url":"https://api.github.com/users/shawnbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/shawnbot/subscriptions","organizations_url":"https://api.github.com/users/shawnbot/orgs","repos_url":"https://api.github.com/users/shawnbot/repos","events_url":"https://api.github.com/users/shawnbot/events{/privacy}","received_events_url":"https://api.github.com/users/shawnbot/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2013-04-25T02:11:45Z","updated_at":"2013-04-25T20:02:17Z","closed_at":"2013-04-25T02:39:41Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"And the process seems convoluted to me if you don't have installed (and don't know) which dependencies are needed even just to build package.json.\n\nAnyway, here's what I've tried and failed at. First, I clean up the working directory with a `make clean` and `rm -rf node_modules`. Then:\n\n```\n$ npm install\nnpm ERR! install Couldn't read dependencies\n...\n```\n\nOkay, so I guess I can just make package.json, right?\n\n```\n$ make package.json\nmake: node_modules/.bin/smash: Command not found\n```\n\nOh, okay, so I'll install smash first, then try again...\n\n```\n$ npm install smash\n...\nsmash@0.0.11 node_modules/smash\n├── queue-async@1.0.3\n└── optimist@0.3.7 (wordwrap@0.0.2)\n$ make package.json\nnode_modules/.bin/smash src/d3.js | node_modules/.bin/uglifyjs - -b indent-level=2 -o d3.js\n/bin/sh: node_modules/.bin/uglifyjs: No such file or directory\n\n.../d3/node_modules/smash/lib/smash/smash.js:10\n  var s = new stream.PassThrough({encoding: \"utf8\", decodeStrings: false}),\n          ^\nTypeError: undefined is not a function\n```\n\nThat looks like a missing dependency, but `npm install stream` doesn't do anything; I just get the same error afterwards.\n\nWhat gives? I'm on OS X using node installed with homebrew.\n","closed_by":{"login":"mbostock","id":230541,"node_id":"MDQ6VXNlcjIzMDU0MQ==","avatar_url":"https://avatars.githubusercontent.com/u/230541?v=4","gravatar_id":"","url":"https://api.github.com/users/mbostock","html_url":"https://github.com/mbostock","followers_url":"https://api.github.com/users/mbostock/followers","following_url":"https://api.github.com/users/mbostock/following{/other_user}","gists_url":"https://api.github.com/users/mbostock/gists{/gist_id}","starred_url":"https://api.github.com/users/mbostock/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mbostock/subscriptions","organizations_url":"https://api.github.com/users/mbostock/orgs","repos_url":"https://api.github.com/users/mbostock/repos","events_url":"https://api.github.com/users/mbostock/events{/privacy}","received_events_url":"https://api.github.com/users/mbostock/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/d3/d3/issues/1213/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/d3/d3/issues/1213/timeline","performed_via_github_app":null,"state_reason":"completed"}