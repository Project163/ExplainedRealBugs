[{"url":"https://api.github.com/repos/d3/d3/issues/comments/146169405","html_url":"https://github.com/d3/d3/issues/2575#issuecomment-146169405","issue_url":"https://api.github.com/repos/d3/d3/issues/2575","id":146169405,"node_id":"MDEyOklzc3VlQ29tbWVudDE0NjE2OTQwNQ==","user":{"login":"cie","id":243342,"node_id":"MDQ6VXNlcjI0MzM0Mg==","avatar_url":"https://avatars.githubusercontent.com/u/243342?v=4","gravatar_id":"","url":"https://api.github.com/users/cie","html_url":"https://github.com/cie","followers_url":"https://api.github.com/users/cie/followers","following_url":"https://api.github.com/users/cie/following{/other_user}","gists_url":"https://api.github.com/users/cie/gists{/gist_id}","starred_url":"https://api.github.com/users/cie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cie/subscriptions","organizations_url":"https://api.github.com/users/cie/orgs","repos_url":"https://api.github.com/users/cie/repos","events_url":"https://api.github.com/users/cie/events{/privacy}","received_events_url":"https://api.github.com/users/cie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-10-07T11:52:32Z","updated_at":"2015-10-07T11:52:32Z","body":"I use a workaround now:\n\n```\n  if (d1 < 0.00001) {\n    dr = NaN;\n  }\n```\n\nLike this:\n\n```\nd3.interpolateZoom = function(p0, p1) {\n  var ux0 = p0[0], uy0 = p0[1], w0 = p0[2], ux1 = p1[0], uy1 = p1[1], w1 = p1[2];\n  var dx = ux1 - ux0, dy = uy1 - uy0, d2 = dx * dx + dy * dy, d1 = Math.sqrt(d2), b0 = (w1 * w1 - w0 * w0 + ρ4 * d2) / (2 * w0 * ρ2 * d1), b1 = (w1 * w1 - w0 * w0 - ρ4 * d2) / (2 * w1 * ρ2 * d1), r0 = Math.log(Math.sqrt(b0 * b0 + 1) - b0), r1 = Math.log(Math.sqrt(b1 * b1 + 1) - b1), dr = r1 - r0;\n  if (d1 < 0.00001) {\n    dr = NaN;\n  }\n  var S = (dr || Math.log(w1 / w0)) / ρ;\n  function interpolate(t) {\n    var s = t * S;\n    if (dr) {\n      var coshr0 = d3_cosh(r0), u = w0 / (ρ2 * d1) * (coshr0 * d3_tanh(ρ * s + r0) - d3_sinh(r0));\n      return [ ux0 + u * dx, uy0 + u * dy, w0 * coshr0 / d3_cosh(ρ * s + r0) ];\n    }\n    return [ ux0 + t * dx, uy0 + t * dy, w0 * Math.exp(ρ * s) ]; \n  }\n  interpolate.duration = S * 1e3;\n  return interpolate;\n}\n```\n\nWith this I couldn't reproduce the NaN's. However, I don't know whether this will disturb the normal zoom-and-pan behaviour.\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/d3/d3/issues/comments/146169405/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"cie","id":243342,"node_id":"MDQ6VXNlcjI0MzM0Mg==","avatar_url":"https://avatars.githubusercontent.com/u/243342?v=4","gravatar_id":"","url":"https://api.github.com/users/cie","html_url":"https://github.com/cie","followers_url":"https://api.github.com/users/cie/followers","following_url":"https://api.github.com/users/cie/following{/other_user}","gists_url":"https://api.github.com/users/cie/gists{/gist_id}","starred_url":"https://api.github.com/users/cie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cie/subscriptions","organizations_url":"https://api.github.com/users/cie/orgs","repos_url":"https://api.github.com/users/cie/repos","events_url":"https://api.github.com/users/cie/events{/privacy}","received_events_url":"https://api.github.com/users/cie/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":431794748,"node_id":"MDEyOkxhYmVsZWRFdmVudDQzMTc5NDc0OA==","url":"https://api.github.com/repos/d3/d3/issues/events/431794748","actor":{"login":"mbostock","id":230541,"node_id":"MDQ6VXNlcjIzMDU0MQ==","avatar_url":"https://avatars.githubusercontent.com/u/230541?v=4","gravatar_id":"","url":"https://api.github.com/users/mbostock","html_url":"https://github.com/mbostock","followers_url":"https://api.github.com/users/mbostock/followers","following_url":"https://api.github.com/users/mbostock/following{/other_user}","gists_url":"https://api.github.com/users/mbostock/gists{/gist_id}","starred_url":"https://api.github.com/users/mbostock/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mbostock/subscriptions","organizations_url":"https://api.github.com/users/mbostock/orgs","repos_url":"https://api.github.com/users/mbostock/repos","events_url":"https://api.github.com/users/mbostock/events{/privacy}","received_events_url":"https://api.github.com/users/mbostock/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2015-10-09T20:12:32Z","label":{"name":"bug","color":"d62728"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/d3/d3/issues/comments/146976234","html_url":"https://github.com/d3/d3/issues/2575#issuecomment-146976234","issue_url":"https://api.github.com/repos/d3/d3/issues/2575","id":146976234,"node_id":"MDEyOklzc3VlQ29tbWVudDE0Njk3NjIzNA==","user":{"login":"mbostock","id":230541,"node_id":"MDQ6VXNlcjIzMDU0MQ==","avatar_url":"https://avatars.githubusercontent.com/u/230541?v=4","gravatar_id":"","url":"https://api.github.com/users/mbostock","html_url":"https://github.com/mbostock","followers_url":"https://api.github.com/users/mbostock/followers","following_url":"https://api.github.com/users/mbostock/following{/other_user}","gists_url":"https://api.github.com/users/mbostock/gists{/gist_id}","starred_url":"https://api.github.com/users/mbostock/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mbostock/subscriptions","organizations_url":"https://api.github.com/users/mbostock/orgs","repos_url":"https://api.github.com/users/mbostock/repos","events_url":"https://api.github.com/users/mbostock/events{/privacy}","received_events_url":"https://api.github.com/users/mbostock/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-10-09T20:14:08Z","updated_at":"2015-10-09T20:14:08Z","body":"Probably it would be sufficient to change the `if (dr) {` in the interpolate function to `if (dr > ε) {`.\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/d3/d3/issues/comments/146976234/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mbostock","id":230541,"node_id":"MDQ6VXNlcjIzMDU0MQ==","avatar_url":"https://avatars.githubusercontent.com/u/230541?v=4","gravatar_id":"","url":"https://api.github.com/users/mbostock","html_url":"https://github.com/mbostock","followers_url":"https://api.github.com/users/mbostock/followers","following_url":"https://api.github.com/users/mbostock/following{/other_user}","gists_url":"https://api.github.com/users/mbostock/gists{/gist_id}","starred_url":"https://api.github.com/users/mbostock/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mbostock/subscriptions","organizations_url":"https://api.github.com/users/mbostock/orgs","repos_url":"https://api.github.com/users/mbostock/repos","events_url":"https://api.github.com/users/mbostock/events{/privacy}","received_events_url":"https://api.github.com/users/mbostock/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/d3/d3/issues/comments/147113155","html_url":"https://github.com/d3/d3/issues/2575#issuecomment-147113155","issue_url":"https://api.github.com/repos/d3/d3/issues/2575","id":147113155,"node_id":"MDEyOklzc3VlQ29tbWVudDE0NzExMzE1NQ==","user":{"login":"cie","id":243342,"node_id":"MDQ6VXNlcjI0MzM0Mg==","avatar_url":"https://avatars.githubusercontent.com/u/243342?v=4","gravatar_id":"","url":"https://api.github.com/users/cie","html_url":"https://github.com/cie","followers_url":"https://api.github.com/users/cie/followers","following_url":"https://api.github.com/users/cie/following{/other_user}","gists_url":"https://api.github.com/users/cie/gists{/gist_id}","starred_url":"https://api.github.com/users/cie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cie/subscriptions","organizations_url":"https://api.github.com/users/cie/orgs","repos_url":"https://api.github.com/users/cie/repos","events_url":"https://api.github.com/users/cie/events{/privacy}","received_events_url":"https://api.github.com/users/cie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-10-10T18:03:54Z","updated_at":"2015-10-10T18:03:54Z","body":"Not really, because `dr` can be NaN (if `ux1==ux0 && uy1==uy0` then `d1==0`, and then `b0` and `b1` is NaN).\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/d3/d3/issues/comments/147113155/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"cie","id":243342,"node_id":"MDQ6VXNlcjI0MzM0Mg==","avatar_url":"https://avatars.githubusercontent.com/u/243342?v=4","gravatar_id":"","url":"https://api.github.com/users/cie","html_url":"https://github.com/cie","followers_url":"https://api.github.com/users/cie/followers","following_url":"https://api.github.com/users/cie/following{/other_user}","gists_url":"https://api.github.com/users/cie/gists{/gist_id}","starred_url":"https://api.github.com/users/cie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cie/subscriptions","organizations_url":"https://api.github.com/users/cie/orgs","repos_url":"https://api.github.com/users/cie/repos","events_url":"https://api.github.com/users/cie/events{/privacy}","received_events_url":"https://api.github.com/users/cie/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/d3/d3/issues/comments/147113221","html_url":"https://github.com/d3/d3/issues/2575#issuecomment-147113221","issue_url":"https://api.github.com/repos/d3/d3/issues/2575","id":147113221,"node_id":"MDEyOklzc3VlQ29tbWVudDE0NzExMzIyMQ==","user":{"login":"cie","id":243342,"node_id":"MDQ6VXNlcjI0MzM0Mg==","avatar_url":"https://avatars.githubusercontent.com/u/243342?v=4","gravatar_id":"","url":"https://api.github.com/users/cie","html_url":"https://github.com/cie","followers_url":"https://api.github.com/users/cie/followers","following_url":"https://api.github.com/users/cie/following{/other_user}","gists_url":"https://api.github.com/users/cie/gists{/gist_id}","starred_url":"https://api.github.com/users/cie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cie/subscriptions","organizations_url":"https://api.github.com/users/cie/orgs","repos_url":"https://api.github.com/users/cie/repos","events_url":"https://api.github.com/users/cie/events{/privacy}","received_events_url":"https://api.github.com/users/cie/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-10-10T18:05:27Z","updated_at":"2015-10-10T18:05:27Z","body":"Maybe better `!isNaN(dr) && dr > ε`.\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/d3/d3/issues/comments/147113221/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"cie","id":243342,"node_id":"MDQ6VXNlcjI0MzM0Mg==","avatar_url":"https://avatars.githubusercontent.com/u/243342?v=4","gravatar_id":"","url":"https://api.github.com/users/cie","html_url":"https://github.com/cie","followers_url":"https://api.github.com/users/cie/followers","following_url":"https://api.github.com/users/cie/following{/other_user}","gists_url":"https://api.github.com/users/cie/gists{/gist_id}","starred_url":"https://api.github.com/users/cie/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cie/subscriptions","organizations_url":"https://api.github.com/users/cie/orgs","repos_url":"https://api.github.com/users/cie/repos","events_url":"https://api.github.com/users/cie/events{/privacy}","received_events_url":"https://api.github.com/users/cie/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":441949938,"node_id":"MDE1Ok1pbGVzdG9uZWRFdmVudDQ0MTk0OTkzOA==","url":"https://api.github.com/repos/d3/d3/issues/events/441949938","actor":{"login":"mbostock","id":230541,"node_id":"MDQ6VXNlcjIzMDU0MQ==","avatar_url":"https://avatars.githubusercontent.com/u/230541?v=4","gravatar_id":"","url":"https://api.github.com/users/mbostock","html_url":"https://github.com/mbostock","followers_url":"https://api.github.com/users/mbostock/followers","following_url":"https://api.github.com/users/mbostock/following{/other_user}","gists_url":"https://api.github.com/users/mbostock/gists{/gist_id}","starred_url":"https://api.github.com/users/mbostock/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mbostock/subscriptions","organizations_url":"https://api.github.com/users/mbostock/orgs","repos_url":"https://api.github.com/users/mbostock/repos","events_url":"https://api.github.com/users/mbostock/events{/privacy}","received_events_url":"https://api.github.com/users/mbostock/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"milestoned","commit_id":null,"commit_url":null,"created_at":"2015-10-21T20:20:03Z","milestone":{"title":"3.5.x"},"performed_via_github_app":null},{"id":442834830,"node_id":"MDE1Ok1pbGVzdG9uZWRFdmVudDQ0MjgzNDgzMA==","url":"https://api.github.com/repos/d3/d3/issues/events/442834830","actor":{"login":"mbostock","id":230541,"node_id":"MDQ6VXNlcjIzMDU0MQ==","avatar_url":"https://avatars.githubusercontent.com/u/230541?v=4","gravatar_id":"","url":"https://api.github.com/users/mbostock","html_url":"https://github.com/mbostock","followers_url":"https://api.github.com/users/mbostock/followers","following_url":"https://api.github.com/users/mbostock/following{/other_user}","gists_url":"https://api.github.com/users/mbostock/gists{/gist_id}","starred_url":"https://api.github.com/users/mbostock/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mbostock/subscriptions","organizations_url":"https://api.github.com/users/mbostock/orgs","repos_url":"https://api.github.com/users/mbostock/repos","events_url":"https://api.github.com/users/mbostock/events{/privacy}","received_events_url":"https://api.github.com/users/mbostock/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"milestoned","commit_id":null,"commit_url":null,"created_at":"2015-10-22T16:15:36Z","milestone":{"title":"3.5.7"},"performed_via_github_app":null},{"id":442834831,"node_id":"MDE3OkRlbWlsZXN0b25lZEV2ZW50NDQyODM0ODMx","url":"https://api.github.com/repos/d3/d3/issues/events/442834831","actor":{"login":"mbostock","id":230541,"node_id":"MDQ6VXNlcjIzMDU0MQ==","avatar_url":"https://avatars.githubusercontent.com/u/230541?v=4","gravatar_id":"","url":"https://api.github.com/users/mbostock","html_url":"https://github.com/mbostock","followers_url":"https://api.github.com/users/mbostock/followers","following_url":"https://api.github.com/users/mbostock/following{/other_user}","gists_url":"https://api.github.com/users/mbostock/gists{/gist_id}","starred_url":"https://api.github.com/users/mbostock/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mbostock/subscriptions","organizations_url":"https://api.github.com/users/mbostock/orgs","repos_url":"https://api.github.com/users/mbostock/repos","events_url":"https://api.github.com/users/mbostock/events{/privacy}","received_events_url":"https://api.github.com/users/mbostock/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"demilestoned","commit_id":null,"commit_url":null,"created_at":"2015-10-22T16:15:36Z","milestone":{"title":"3.5.x"},"performed_via_github_app":null},{"id":444098099,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDQ0NDA5ODA5OQ==","url":"https://api.github.com/repos/d3/d3/issues/events/444098099","actor":{"login":"mbostock","id":230541,"node_id":"MDQ6VXNlcjIzMDU0MQ==","avatar_url":"https://avatars.githubusercontent.com/u/230541?v=4","gravatar_id":"","url":"https://api.github.com/users/mbostock","html_url":"https://github.com/mbostock","followers_url":"https://api.github.com/users/mbostock/followers","following_url":"https://api.github.com/users/mbostock/following{/other_user}","gists_url":"https://api.github.com/users/mbostock/gists{/gist_id}","starred_url":"https://api.github.com/users/mbostock/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mbostock/subscriptions","organizations_url":"https://api.github.com/users/mbostock/orgs","repos_url":"https://api.github.com/users/mbostock/repos","events_url":"https://api.github.com/users/mbostock/events{/privacy}","received_events_url":"https://api.github.com/users/mbostock/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"600d991994a20d4c541ef6324ea1bd73b8089e7f","commit_url":"https://api.github.com/repos/d3/d3-interpolate/commits/600d991994a20d4c541ef6324ea1bd73b8089e7f","created_at":"2015-10-23T18:15:07Z","performed_via_github_app":null},{"id":444102629,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDQ0NDEwMjYyOQ==","url":"https://api.github.com/repos/d3/d3/issues/events/444102629","actor":{"login":"mbostock","id":230541,"node_id":"MDQ6VXNlcjIzMDU0MQ==","avatar_url":"https://avatars.githubusercontent.com/u/230541?v=4","gravatar_id":"","url":"https://api.github.com/users/mbostock","html_url":"https://github.com/mbostock","followers_url":"https://api.github.com/users/mbostock/followers","following_url":"https://api.github.com/users/mbostock/following{/other_user}","gists_url":"https://api.github.com/users/mbostock/gists{/gist_id}","starred_url":"https://api.github.com/users/mbostock/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mbostock/subscriptions","organizations_url":"https://api.github.com/users/mbostock/orgs","repos_url":"https://api.github.com/users/mbostock/repos","events_url":"https://api.github.com/users/mbostock/events{/privacy}","received_events_url":"https://api.github.com/users/mbostock/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"6b15dd15e039cd7bab726d3effff675dc840ae78","commit_url":"https://api.github.com/repos/d3/d3/commits/6b15dd15e039cd7bab726d3effff675dc840ae78","created_at":"2015-10-23T18:20:02Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/d3/d3/issues/comments/150653569","html_url":"https://github.com/d3/d3/issues/2575#issuecomment-150653569","issue_url":"https://api.github.com/repos/d3/d3/issues/2575","id":150653569,"node_id":"MDEyOklzc3VlQ29tbWVudDE1MDY1MzU2OQ==","user":{"login":"mbostock","id":230541,"node_id":"MDQ6VXNlcjIzMDU0MQ==","avatar_url":"https://avatars.githubusercontent.com/u/230541?v=4","gravatar_id":"","url":"https://api.github.com/users/mbostock","html_url":"https://github.com/mbostock","followers_url":"https://api.github.com/users/mbostock/followers","following_url":"https://api.github.com/users/mbostock/following{/other_user}","gists_url":"https://api.github.com/users/mbostock/gists{/gist_id}","starred_url":"https://api.github.com/users/mbostock/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mbostock/subscriptions","organizations_url":"https://api.github.com/users/mbostock/orgs","repos_url":"https://api.github.com/users/mbostock/repos","events_url":"https://api.github.com/users/mbostock/events{/privacy}","received_events_url":"https://api.github.com/users/mbostock/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-10-23T18:20:31Z","updated_at":"2015-10-23T18:20:31Z","body":"Fix staged for 3.5.7 in #2591.\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/d3/d3/issues/comments/150653569/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mbostock","id":230541,"node_id":"MDQ6VXNlcjIzMDU0MQ==","avatar_url":"https://avatars.githubusercontent.com/u/230541?v=4","gravatar_id":"","url":"https://api.github.com/users/mbostock","html_url":"https://github.com/mbostock","followers_url":"https://api.github.com/users/mbostock/followers","following_url":"https://api.github.com/users/mbostock/following{/other_user}","gists_url":"https://api.github.com/users/mbostock/gists{/gist_id}","starred_url":"https://api.github.com/users/mbostock/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mbostock/subscriptions","organizations_url":"https://api.github.com/users/mbostock/orgs","repos_url":"https://api.github.com/users/mbostock/repos","events_url":"https://api.github.com/users/mbostock/events{/privacy}","received_events_url":"https://api.github.com/users/mbostock/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":444103166,"node_id":"MDExOkNsb3NlZEV2ZW50NDQ0MTAzMTY2","url":"https://api.github.com/repos/d3/d3/issues/events/444103166","actor":{"login":"mbostock","id":230541,"node_id":"MDQ6VXNlcjIzMDU0MQ==","avatar_url":"https://avatars.githubusercontent.com/u/230541?v=4","gravatar_id":"","url":"https://api.github.com/users/mbostock","html_url":"https://github.com/mbostock","followers_url":"https://api.github.com/users/mbostock/followers","following_url":"https://api.github.com/users/mbostock/following{/other_user}","gists_url":"https://api.github.com/users/mbostock/gists{/gist_id}","starred_url":"https://api.github.com/users/mbostock/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mbostock/subscriptions","organizations_url":"https://api.github.com/users/mbostock/orgs","repos_url":"https://api.github.com/users/mbostock/repos","events_url":"https://api.github.com/users/mbostock/events{/privacy}","received_events_url":"https://api.github.com/users/mbostock/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2015-10-23T18:20:31Z","state_reason":null,"performed_via_github_app":null}]