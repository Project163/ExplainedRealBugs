{"url":"https://api.github.com/repos/d3/d3/issues/2205","repository_url":"https://api.github.com/repos/d3/d3","labels_url":"https://api.github.com/repos/d3/d3/issues/2205/labels{/name}","comments_url":"https://api.github.com/repos/d3/d3/issues/2205/comments","events_url":"https://api.github.com/repos/d3/d3/issues/2205/events","html_url":"https://github.com/d3/d3/issues/2205","id":55341086,"node_id":"MDU6SXNzdWU1NTM0MTA4Ng==","number":2205,"title":"Problem with d3.behavior.zoom (Mac OS)","user":{"login":"roveo","id":5427958,"node_id":"MDQ6VXNlcjU0Mjc5NTg=","avatar_url":"https://avatars.githubusercontent.com/u/5427958?v=4","gravatar_id":"","url":"https://api.github.com/users/roveo","html_url":"https://github.com/roveo","followers_url":"https://api.github.com/users/roveo/followers","following_url":"https://api.github.com/users/roveo/following{/other_user}","gists_url":"https://api.github.com/users/roveo/gists{/gist_id}","starred_url":"https://api.github.com/users/roveo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/roveo/subscriptions","organizations_url":"https://api.github.com/users/roveo/orgs","repos_url":"https://api.github.com/users/roveo/repos","events_url":"https://api.github.com/users/roveo/events{/privacy}","received_events_url":"https://api.github.com/users/roveo/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":50044,"node_id":"MDU6TGFiZWw1MDA0NA==","url":"https://api.github.com/repos/d3/d3/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isnâ€™t working"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/d3/d3/milestones/32","html_url":"https://github.com/d3/d3/milestone/32","labels_url":"https://api.github.com/repos/d3/d3/milestones/32/labels","id":860338,"node_id":"MDk6TWlsZXN0b25lODYwMzM4","number":32,"title":"3.5.x","description":"","creator":{"login":"mbostock","id":230541,"node_id":"MDQ6VXNlcjIzMDU0MQ==","avatar_url":"https://avatars.githubusercontent.com/u/230541?v=4","gravatar_id":"","url":"https://api.github.com/users/mbostock","html_url":"https://github.com/mbostock","followers_url":"https://api.github.com/users/mbostock/followers","following_url":"https://api.github.com/users/mbostock/following{/other_user}","gists_url":"https://api.github.com/users/mbostock/gists{/gist_id}","starred_url":"https://api.github.com/users/mbostock/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mbostock/subscriptions","organizations_url":"https://api.github.com/users/mbostock/orgs","repos_url":"https://api.github.com/users/mbostock/repos","events_url":"https://api.github.com/users/mbostock/events{/privacy}","received_events_url":"https://api.github.com/users/mbostock/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":43,"state":"closed","created_at":"2014-11-10T16:45:16Z","updated_at":"2016-07-14T19:22:44Z","due_on":null,"closed_at":"2016-07-14T19:22:44Z"},"comments":3,"created_at":"2015-01-23T22:26:03Z","updated_at":"2015-07-04T03:03:47Z","closed_at":"2015-07-04T03:03:47Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"The page loads, then you pan to either side and then zoom, and it throws a javascript error in console. This is strange because just today I was using zoom behavior in Windows, Chrome and (as far as I remember) it worked.\n\n**The problem only exists if you use 3-finger trackpad gesture for dragging and don't change cursor position after panning.** Doesn't work if you drag with hard-click. So, pan with 3 fingers and try to zoom right away. Seems like d3 can't determine cursor position after dragging.\n\nErrors\nSafari: `TypeError: null is not an object (evaluating 'p[0]')` line 1228\nChrome:\n\n```\nUncaught TypeError: Cannot read property '0' of null    d3.js:1382\n\ntranslateTo    d3.js:1382\nmousewheeled    d3.js:1519\n(anonymous function)    d3.js:1084\n```\n\nTested in both browsers on Mac OS.\n\nAddition:\nRecreated the same in Firefox. Firefox and Chrome are pointing to this bit of code (lines 1380-1384):\n\n``` js\nfunction translateTo(p, l) {\n      l = point(l);\n      view.x += p[0] - l[0];\n      view.y += p[1] - l[1];\n    }\n```\n\nHere's a short example:\n\n``` html\n<!doctype html>\n<html>\n    <head>\n        <script type=\"text/javascript\" src=\"d3.js\"></script>\n        <script type=\"text/javascript\">\n            window.onload = function () {\n                var svg = d3.select(\"body\")\n                    .append(\"svg\")\n                    .attr({\n                        width: 640,\n                        height: 480\n                    });\n                var data = d3.range(10);\n                var x = d3.scale.linear()\n                    .domain(d3.extent(data))\n                    .range([30, 610]);\n                var zoom = d3.behavior.zoom()\n                    .x(x)\n                    .scaleExtent([1, 10])\n                    .on(\"zoom\", function () {\n                        d3.selectAll(\"circle\").attr(\"cx\", function (d) { return x(d); });\n                    });\n                var g = svg.append(\"g\").call(zoom);\n                g.append(\"rect\")\n                    .attr({\n                        x: 0, y: 0,\n                        width: 640,\n                        height: 480,\n                        opacity: 0\n                    })\n                g.selectAll(\"circle\")\n                    .data(data).enter()\n                    .append(\"circle\")\n                    .attr({\n                        cx: function (d) { return x(d); },\n                        cy: 50,\n                        r: 10,\n                        stroke: \"none\",\n                        fill: \"black\"\n                    });\n            }\n        </script>\n    </head>\n    <body></body>\n</html>\n```\n","closed_by":{"login":"mbostock","id":230541,"node_id":"MDQ6VXNlcjIzMDU0MQ==","avatar_url":"https://avatars.githubusercontent.com/u/230541?v=4","gravatar_id":"","url":"https://api.github.com/users/mbostock","html_url":"https://github.com/mbostock","followers_url":"https://api.github.com/users/mbostock/followers","following_url":"https://api.github.com/users/mbostock/following{/other_user}","gists_url":"https://api.github.com/users/mbostock/gists{/gist_id}","starred_url":"https://api.github.com/users/mbostock/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mbostock/subscriptions","organizations_url":"https://api.github.com/users/mbostock/orgs","repos_url":"https://api.github.com/users/mbostock/repos","events_url":"https://api.github.com/users/mbostock/events{/privacy}","received_events_url":"https://api.github.com/users/mbostock/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/d3/d3/issues/2205/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/d3/d3/issues/2205/timeline","performed_via_github_app":null,"state_reason":"completed"}