{"url":"https://api.github.com/repos/apache/accumulo-fluo/issues/198","repository_url":"https://api.github.com/repos/apache/accumulo-fluo","labels_url":"https://api.github.com/repos/apache/accumulo-fluo/issues/198/labels{/name}","comments_url":"https://api.github.com/repos/apache/accumulo-fluo/issues/198/comments","events_url":"https://api.github.com/repos/apache/accumulo-fluo/issues/198/events","html_url":"https://github.com/apache/accumulo-fluo/issues/198","id":43241543,"node_id":"MDU6SXNzdWU0MzI0MTU0Mw==","number":198,"title":"During initialization of an already initialized instance, allow user to specify how to handle the current ZNode and table (if it exists)","user":{"login":"cjnolet","id":1242464,"node_id":"MDQ6VXNlcjEyNDI0NjQ=","avatar_url":"https://avatars.githubusercontent.com/u/1242464?v=4","gravatar_id":"","url":"https://api.github.com/users/cjnolet","html_url":"https://github.com/cjnolet","followers_url":"https://api.github.com/users/cjnolet/followers","following_url":"https://api.github.com/users/cjnolet/following{/other_user}","gists_url":"https://api.github.com/users/cjnolet/gists{/gist_id}","starred_url":"https://api.github.com/users/cjnolet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cjnolet/subscriptions","organizations_url":"https://api.github.com/users/cjnolet/orgs","repos_url":"https://api.github.com/users/cjnolet/repos","events_url":"https://api.github.com/users/cjnolet/events{/privacy}","received_events_url":"https://api.github.com/users/cjnolet/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":108100609,"node_id":"MDU6TGFiZWwxMDgxMDA2MDk=","url":"https://api.github.com/repos/apache/accumulo-fluo/labels/improvement","name":"improvement","color":"207de5","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/apache/accumulo-fluo/milestones/2","html_url":"https://github.com/apache/accumulo-fluo/milestone/2","labels_url":"https://api.github.com/repos/apache/accumulo-fluo/milestones/2/labels","id":696784,"node_id":"MDk6TWlsZXN0b25lNjk2Nzg0","number":2,"title":"1.0.0-beta-1","description":"","creator":{"login":"mikewalch","id":730698,"node_id":"MDQ6VXNlcjczMDY5OA==","avatar_url":"https://avatars.githubusercontent.com/u/730698?v=4","gravatar_id":"","url":"https://api.github.com/users/mikewalch","html_url":"https://github.com/mikewalch","followers_url":"https://api.github.com/users/mikewalch/followers","following_url":"https://api.github.com/users/mikewalch/following{/other_user}","gists_url":"https://api.github.com/users/mikewalch/gists{/gist_id}","starred_url":"https://api.github.com/users/mikewalch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikewalch/subscriptions","organizations_url":"https://api.github.com/users/mikewalch/orgs","repos_url":"https://api.github.com/users/mikewalch/repos","events_url":"https://api.github.com/users/mikewalch/events{/privacy}","received_events_url":"https://api.github.com/users/mikewalch/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":141,"state":"closed","created_at":"2014-06-20T14:05:25Z","updated_at":"2017-05-12T21:00:05Z","due_on":null,"closed_at":"2017-05-12T21:00:05Z"},"comments":1,"created_at":"2014-09-19T14:03:07Z","updated_at":"2016-06-16T17:12:25Z","closed_at":"2014-12-02T17:59:25Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Creating this ticket from a conversation with Mike Walch on #197:\n\nAfter reading through @cjnolet's comments in #14, I think the best solution is to remove the io.fluo.admin.zookeeper.clear property and prompt the user when the initialize.sh script is run. It could go something like below:\n\nUser runs configures fluo.properties and runs ./initialize.sh`\nInitialization first checks if instance exists. If it does, prompts user with:\nA Fluo instance exists in zookeeper at /fluo. Do you want re-initialize?  Y / N\nIf No chosen, abort. Next, if table chosen by user in fluo.properties exists, prompt user with:\n\nAn Accumulo table called 'mytable' already exists.  Do you want to drop and recreate this table?  Y / N\n(If No chosen, pick a new table name in fluo.properties and re-run intialize.sh). \nFinally, initialize Zookeeper and create table after getting through above.\n\nThere could also be an initalize.sh --force that answers yes to both questions above for scripts.\n\nIn FluoAdmin, initalize() could be modified to the following:\n\ninitialize(boolean clearZk, boolean clearTable) throws AlreadyInitalizedException, TableExistsException\n@cjnolet, while I think this would be great to have for alpha, an issue could be created and this could be done in Beta. If this is pushed to Beta, I think an intermediate solution is to check if the table exists before any zookeeper initialization and print a message (rather than throwing an exception) telling the user that they need to drop the accumulo table before initializing this instance.\n\nAlso posting follow-up reply from @cjnolet:\n\n@mikewalch, Your solution is right along the lines of what I was thinking in the ticket. I think that'd be great for a beta instance. I was also thinking about it more last night after my comments- the clearZookeepers() would be misleading if we were expecting that to act upon the table as well so I agree that should either be removed or renamed. IMO, it could probably be removed in light of better user-interaction in the script itself (see Accumulo's Initialize class).\n\nIn the meantime, I do agree that a better message should be printed before the clearing of zookeeper if the table already exists. I'm thinking maybe we could change \"clearZookeeper()\" to \"allowReinitialize()\" (something that would let a user know they'd be starting from scratch.)\n\nI'm okay with this simply because I'm seeing the alpha release more as an opportunity for users to play with and begin to build Fluo into the designs for their own applications. As a result, I think we can get away with changing the property and the underlying logic in beta.\n","closed_by":{"login":"mikewalch","id":730698,"node_id":"MDQ6VXNlcjczMDY5OA==","avatar_url":"https://avatars.githubusercontent.com/u/730698?v=4","gravatar_id":"","url":"https://api.github.com/users/mikewalch","html_url":"https://github.com/mikewalch","followers_url":"https://api.github.com/users/mikewalch/followers","following_url":"https://api.github.com/users/mikewalch/following{/other_user}","gists_url":"https://api.github.com/users/mikewalch/gists{/gist_id}","starred_url":"https://api.github.com/users/mikewalch/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikewalch/subscriptions","organizations_url":"https://api.github.com/users/mikewalch/orgs","repos_url":"https://api.github.com/users/mikewalch/repos","events_url":"https://api.github.com/users/mikewalch/events{/privacy}","received_events_url":"https://api.github.com/users/mikewalch/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/apache/accumulo-fluo/issues/198/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/apache/accumulo-fluo/issues/198/timeline","performed_via_github_app":null,"state_reason":"completed"}