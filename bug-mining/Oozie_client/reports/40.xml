<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:47:51 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[OOZIE-1016] Tests that use junit assert or fail in a new thread report success when they are actually failing</title>
                <link>https://issues.apache.org/jira/browse/OOZIE-1016</link>
                <project id="12311620" key="OOZIE">Oozie (Retired)</project>
                    <description>&lt;p&gt;These three tests create a new thread and use junit methods (e.g. assertTrue(), fail(), etc).  These tests report success even when they should be failing, which can be seen by looking in the log output.  &lt;/p&gt;

&lt;p&gt;They all have something like this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt; testThread = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;() {
            &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void run() {
                &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
                    &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; some stuff
                    assertTrue(something);
                    ...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;These are the three tests that do this:&lt;br/&gt;
1) &lt;tt&gt;org.apache.oozie.cli.TestValidation.testTimeout&lt;/tt&gt;&lt;br/&gt;
2) &lt;tt&gt;org.apache.oozie.service.TestSchemaService.testWfSchemaFailure&lt;/tt&gt;&lt;br/&gt;
3) &lt;tt&gt;org.apache.oozie.workflow.lite.TestLiteWorkflowAppParser.testWfValidationFailure&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;All these tests are actually failing.&lt;/p&gt;

&lt;p&gt;The output from the first one is this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-1&quot;&lt;/span&gt; junit.framework.AssertionFailedError: expected:&amp;lt;-1&amp;gt; but was:&amp;lt;0&amp;gt;	at junit.framework.Assert.fail(Assert.java:50)
	at junit.framework.Assert.failNotEquals(Assert.java:287)
	at junit.framework.Assert.assertEquals(Assert.java:67)
	at junit.framework.Assert.assertEquals(Assert.java:199)
	at junit.framework.Assert.assertEquals(Assert.java:205)
	at org.apache.oozie.cli.TestValidation$1.run(TestValidation.java:51)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The second one has this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-132&quot;&lt;/span&gt; junit.framework.AssertionFailedError: Expected to &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; ParseException but didn&apos;t encounter any	at junit.framework.Assert.fail(Assert.java:50)
	at org.apache.oozie.service.TestSchemaService$1.run(TestSchemaService.java:148)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And the third one has this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-132&quot;&lt;/span&gt; junit.framework.AssertionFailedError: Expected to &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; WorkflowException but didn&apos;t encounter any	at junit.framework.Assert.fail(Assert.java:50)
	at org.apache.oozie.workflow.lite.TestLiteWorkflowAppParser$1.run(TestLiteWorkflowAppParser.java:345)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12611057">OOZIE-1016</key>
            <summary>Tests that use junit assert or fail in a new thread report success when they are actually failing</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rkanter">Robert Kanter</assignee>
                                    <reporter username="rkanter">Robert Kanter</reporter>
                        <labels>
                    </labels>
                <created>Tue, 9 Oct 2012 20:22:06 +0000</created>
                <updated>Sat, 20 Jul 2013 00:03:04 +0000</updated>
                            <resolved>Thu, 11 Oct 2012 22:58:21 +0000</resolved>
                                                    <fixVersion>3.3.2</fixVersion>
                                    <component>tests</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13472742" author="rkanter" created="Tue, 9 Oct 2012 20:55:38 +0000"  >&lt;p&gt;Just to clarify, there are two problems here:&lt;br/&gt;
1) Tests that use junit methods in a new thread basically ignore the junit methods&lt;br/&gt;
2) Those three tests are failing; they all seem to be related to XML validation.  &lt;/p&gt;</comment>
                            <comment id="13472756" author="virag" created="Tue, 9 Oct 2012 21:16:09 +0000"  >&lt;p&gt;These tests are invalid now. Before oozie-637, these tests where checking a timing related issue when wf app name was being validated against  this pattern &quot;(&lt;span class=&quot;error&quot;&gt;&amp;#91;a-zA-Z_&amp;#93;&lt;/span&gt;(&lt;span class=&quot;error&quot;&gt;&amp;#91;\-_a-zA-Z0-9&amp;#93;&lt;/span&gt;)*)&lt;/p&gt;
{1,39}
&lt;p&gt;)&quot;. But after 637, app name can be any String and no pattern matching was required. As you pointed out that the tests are always reporting success, they were not caught failing during oozie-637. Now, I think they can be removed.&lt;br/&gt;
Good find!&lt;/p&gt;</comment>
                            <comment id="13472769" author="rkanter" created="Tue, 9 Oct 2012 21:30:13 +0000"  >&lt;p&gt;Oh, then fixing them is really easy &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
I&apos;ll create a patch.  &lt;/p&gt;</comment>
                            <comment id="13472861" author="hadoopqa" created="Tue, 9 Oct 2012 23:31:12 +0000"  >&lt;p&gt;Testing JIRA &lt;a href=&quot;https://issues.apache.org/jira/browse/OOZIE-1016&quot; title=&quot;Tests that use junit assert or fail in a new thread report success when they are actually failing&quot; class=&quot;issue-link&quot; data-issue-key=&quot;OOZIE-1016&quot;&gt;&lt;del&gt;OOZIE-1016&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Cleaning local svn workspace&lt;/p&gt;

&lt;p&gt;----------------------------&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 PATCH_APPLIES&lt;/font&gt;&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 CLEAN&lt;/font&gt;&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 RAW_PATCH_ANALYSIS&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any @author tags&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any tabs&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any trailing spaces&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not introduce any line longer than 132&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does adds/modifies 3 testcase(s)&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 RAT&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new RAT warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 JAVADOC&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new Javadoc warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 COMPILE&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; HEAD compiles&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; patch compiles&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not seem to introduce new javac warnings&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 BACKWARDS_COMPATIBILITY&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not change any JPA Entity/Colum/Basic/Lob/Transient annotations&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; the patch does not modify JPA files&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 TESTS&lt;/font&gt;&lt;br/&gt;
.    Tests run: 912&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;+1 DISTRO&lt;/font&gt;&lt;br/&gt;
.    &lt;font color=&quot;green&quot;&gt;+1&lt;/font&gt; distro tarball builds with the patch &lt;/p&gt;

&lt;p&gt;----------------------------&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;&lt;b&gt;+1 Overall result, good!, no -1s&lt;/b&gt;&lt;/font&gt;&lt;/p&gt;


&lt;p&gt;The full output of the test-patch run is available at&lt;/p&gt;

&lt;p&gt;.   &lt;a href=&quot;https://builds.apache.org/job/oozie-trunk-precommit-build/139/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/oozie-trunk-precommit-build/139/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13474591" author="tucu00" created="Thu, 11 Oct 2012 22:57:38 +0000"  >&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="13474592" author="tucu00" created="Thu, 11 Oct 2012 22:58:21 +0000"  >&lt;p&gt;Thanks Robert. Committed to trunk.&lt;/p&gt;</comment>
                            <comment id="13614196" author="rkanter" created="Tue, 26 Mar 2013 16:30:24 +0000"  >&lt;p&gt;Closing issue; Oozie 3.3.2 is released&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12548472" name="OOZIE-1016.patch" size="8674" author="rkanter" created="Tue, 9 Oct 2012 21:40:35 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>246491</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 34 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i07pxr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42968</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>