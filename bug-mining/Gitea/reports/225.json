{"url":"https://api.github.com/repos/go-gitea/gitea/issues/29763","repository_url":"https://api.github.com/repos/go-gitea/gitea","labels_url":"https://api.github.com/repos/go-gitea/gitea/issues/29763/labels{/name}","comments_url":"https://api.github.com/repos/go-gitea/gitea/issues/29763/comments","events_url":"https://api.github.com/repos/go-gitea/gitea/issues/29763/events","html_url":"https://github.com/go-gitea/gitea/issues/29763","id":2183605657,"node_id":"I_kwDOBFIx286CJy2Z","number":29763,"title":"CODEOWNERS test against diff towards HEAD of target branch instead of merge-base","user":{"login":"baronjeppe","id":683961,"node_id":"MDQ6VXNlcjY4Mzk2MQ==","avatar_url":"https://avatars.githubusercontent.com/u/683961?v=4","gravatar_id":"","url":"https://api.github.com/users/baronjeppe","html_url":"https://github.com/baronjeppe","followers_url":"https://api.github.com/users/baronjeppe/followers","following_url":"https://api.github.com/users/baronjeppe/following{/other_user}","gists_url":"https://api.github.com/users/baronjeppe/gists{/gist_id}","starred_url":"https://api.github.com/users/baronjeppe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/baronjeppe/subscriptions","organizations_url":"https://api.github.com/users/baronjeppe/orgs","repos_url":"https://api.github.com/users/baronjeppe/repos","events_url":"https://api.github.com/users/baronjeppe/events{/privacy}","received_events_url":"https://api.github.com/users/baronjeppe/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":472744938,"node_id":"MDU6TGFiZWw0NzI3NDQ5Mzg=","url":"https://api.github.com/repos/go-gitea/gitea/labels/type/bug","name":"type/bug","color":"ee0701","default":false,"description":""}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/go-gitea/gitea/milestones/160","html_url":"https://github.com/go-gitea/gitea/milestone/160","labels_url":"https://api.github.com/repos/go-gitea/gitea/milestones/160/labels","id":10676993,"node_id":"MI_kwDOBFIx284AousB","number":160,"title":"1.21.9","description":"","creator":{"login":"lunny","id":81045,"node_id":"MDQ6VXNlcjgxMDQ1","avatar_url":"https://avatars.githubusercontent.com/u/81045?v=4","gravatar_id":"","url":"https://api.github.com/users/lunny","html_url":"https://github.com/lunny","followers_url":"https://api.github.com/users/lunny/followers","following_url":"https://api.github.com/users/lunny/following{/other_user}","gists_url":"https://api.github.com/users/lunny/gists{/gist_id}","starred_url":"https://api.github.com/users/lunny/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lunny/subscriptions","organizations_url":"https://api.github.com/users/lunny/orgs","repos_url":"https://api.github.com/users/lunny/repos","events_url":"https://api.github.com/users/lunny/events{/privacy}","received_events_url":"https://api.github.com/users/lunny/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":46,"state":"closed","created_at":"2024-03-13T06:13:54Z","updated_at":"2024-03-22T07:34:03Z","due_on":"2024-04-02T07:00:00Z","closed_at":"2024-03-22T07:34:03Z"},"comments":0,"created_at":"2024-03-13T10:11:50Z","updated_at":"2024-06-13T06:52:37Z","closed_at":"2024-03-15T05:13:10Z","author_association":"NONE","type":null,"active_lock_reason":"resolved","sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Description\n\nWhen a new PR is opened the CODEOWNERS functionality tests against the diff towards refs/heads/<target branch> as seen here:\r\nhttps://github.com/go-gitea/gitea/blob/7fd0a5b276aadcf88dcc012fcd364fe160a58810/models/issues/pull.go#L920\r\n\r\nThis means that if the source branch for the PR is not up to date with the target the diff will contain all the changes added to the target branch since merge base - this seems like the wrong behavior to me.\r\n\r\nI think it should use merge base instead of head - which i also assume is the logic used to determine which changes needs to be reviewed in a PR.\r\n\r\nI am not familiar with the codebase of gitea, so i am not comfortable make the pr to change this, but if it is agreed that this change should be made, and nobody else has the bandwidth to do it, i might give it a try.\n\n### Gitea Version\n\n1.21.8\n\n### Can you reproduce the bug on the Gitea demo site?\n\nYes\n\n### Log Gist\n\n_No response_\n\n### Screenshots\n\n_No response_\n\n### Git Version\n\n_No response_\n\n### Operating System\n\n_No response_\n\n### How are you running Gitea?\n\nNot relevant\n\n### Database\n\nMySQL/MariaDB","closed_by":{"login":"lunny","id":81045,"node_id":"MDQ6VXNlcjgxMDQ1","avatar_url":"https://avatars.githubusercontent.com/u/81045?v=4","gravatar_id":"","url":"https://api.github.com/users/lunny","html_url":"https://github.com/lunny","followers_url":"https://api.github.com/users/lunny/followers","following_url":"https://api.github.com/users/lunny/following{/other_user}","gists_url":"https://api.github.com/users/lunny/gists{/gist_id}","starred_url":"https://api.github.com/users/lunny/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lunny/subscriptions","organizations_url":"https://api.github.com/users/lunny/orgs","repos_url":"https://api.github.com/users/lunny/repos","events_url":"https://api.github.com/users/lunny/events{/privacy}","received_events_url":"https://api.github.com/users/lunny/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/go-gitea/gitea/issues/29763/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/go-gitea/gitea/issues/29763/timeline","performed_via_github_app":null,"state_reason":"completed"}