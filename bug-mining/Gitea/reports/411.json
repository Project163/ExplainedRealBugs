{"url":"https://api.github.com/repos/go-gitea/gitea/issues/32233","repository_url":"https://api.github.com/repos/go-gitea/gitea","labels_url":"https://api.github.com/repos/go-gitea/gitea/issues/32233/labels{/name}","comments_url":"https://api.github.com/repos/go-gitea/gitea/issues/32233/comments","events_url":"https://api.github.com/repos/go-gitea/gitea/issues/32233/events","html_url":"https://github.com/go-gitea/gitea/issues/32233","id":2579084257,"node_id":"I_kwDOBFIx286ZubPh","number":32233,"title":"When the remote repository force push to overwrite a tag, the mirrored repo will not update the tag updated time","user":{"login":"imkuang","id":38498747,"node_id":"MDQ6VXNlcjM4NDk4NzQ3","avatar_url":"https://avatars.githubusercontent.com/u/38498747?v=4","gravatar_id":"","url":"https://api.github.com/users/imkuang","html_url":"https://github.com/imkuang","followers_url":"https://api.github.com/users/imkuang/followers","following_url":"https://api.github.com/users/imkuang/following{/other_user}","gists_url":"https://api.github.com/users/imkuang/gists{/gist_id}","starred_url":"https://api.github.com/users/imkuang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imkuang/subscriptions","organizations_url":"https://api.github.com/users/imkuang/orgs","repos_url":"https://api.github.com/users/imkuang/repos","events_url":"https://api.github.com/users/imkuang/events{/privacy}","received_events_url":"https://api.github.com/users/imkuang/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":472744938,"node_id":"MDU6TGFiZWw0NzI3NDQ5Mzg=","url":"https://api.github.com/repos/go-gitea/gitea/labels/type/bug","name":"type/bug","color":"ee0701","default":false,"description":""},{"id":6434877714,"node_id":"LA_kwDOBFIx288AAAABf4xxEg","url":"https://api.github.com/repos/go-gitea/gitea/labels/topic/repo","name":"topic/repo","color":"6EDD5D","default":false,"description":"Related to repositories"}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/go-gitea/gitea/milestones/168","html_url":"https://github.com/go-gitea/gitea/milestone/168","labels_url":"https://api.github.com/repos/go-gitea/gitea/milestones/168/labels","id":11696303,"node_id":"MI_kwDOBFIx284Asniv","number":168,"title":"1.22.4","description":"","creator":{"login":"lunny","id":81045,"node_id":"MDQ6VXNlcjgxMDQ1","avatar_url":"https://avatars.githubusercontent.com/u/81045?v=4","gravatar_id":"","url":"https://api.github.com/users/lunny","html_url":"https://github.com/lunny","followers_url":"https://api.github.com/users/lunny/followers","following_url":"https://api.github.com/users/lunny/following{/other_user}","gists_url":"https://api.github.com/users/lunny/gists{/gist_id}","starred_url":"https://api.github.com/users/lunny/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lunny/subscriptions","organizations_url":"https://api.github.com/users/lunny/orgs","repos_url":"https://api.github.com/users/lunny/repos","events_url":"https://api.github.com/users/lunny/events{/privacy}","received_events_url":"https://api.github.com/users/lunny/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":66,"state":"closed","created_at":"2024-10-09T03:24:10Z","updated_at":"2024-11-26T18:22:23Z","due_on":null,"closed_at":"2024-11-25T20:59:59Z"},"comments":4,"created_at":"2024-10-10T14:45:48Z","updated_at":"2025-01-31T10:03:13Z","closed_at":"2024-11-02T06:11:39Z","author_association":"NONE","type":null,"active_lock_reason":"resolved","sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Description\r\n\r\nWhen using the mirroring feature to sync a repo from another server, if the remote server force push overwrites a tag, the local server will not update the updated time of these tags after completing the synchronization.\r\n\r\nFinally, we will see the following situation on the webui: two tags with different update times have the same commit id:\r\n<img width=\"425\" alt=\"image\" src=\"https://github.com/user-attachments/assets/86acc564-bde5-449a-81b3-08288d916f53\">\r\nYou can check the test repository I created (I've converted it to a regular repo to remove the personal server url I use for mirroring operations): https://demo.gitea.com/404notfound/test/tags\r\n\r\nThis is common when synchronizing GitHub Actions repositories, where tags containing only the major version number are often constantly updated to always point to the latest version.\r\n\r\n### Gitea Version\r\n\r\n1.22.3\r\n\r\n### Can you reproduce the bug on the Gitea demo site?\r\n\r\nYes\r\n\r\n### Log Gist\r\n\r\n_No response_\r\n\r\n### Screenshots\r\n\r\n_No response_\r\n\r\n### Git Version\r\n\r\n_No response_\r\n\r\n### Operating System\r\n\r\n_No response_\r\n\r\n### How are you running Gitea?\r\n\r\nrun gitea from docker\r\n\r\n### Database\r\n\r\nSQLite\r\n\r\n### Steps to reproduce\r\n\r\n1. server1 for remote, server2 for local\r\n2. create a repo on server1, initialize a few commits, create a new tag v1 and push it\r\n3. create a new migration on server2 and select Git (not sure if it has any influence), fill in the URL of the repo on server1\r\n4. run git tag -d v1 to delete tag v1, create several new commits, and then re-create tag v1, git push --tags -f to push new tag references to server1\r\n5. go to the settings page of the repo on server2 and sync immediately to see the problem","closed_by":{"login":"lunny","id":81045,"node_id":"MDQ6VXNlcjgxMDQ1","avatar_url":"https://avatars.githubusercontent.com/u/81045?v=4","gravatar_id":"","url":"https://api.github.com/users/lunny","html_url":"https://github.com/lunny","followers_url":"https://api.github.com/users/lunny/followers","following_url":"https://api.github.com/users/lunny/following{/other_user}","gists_url":"https://api.github.com/users/lunny/gists{/gist_id}","starred_url":"https://api.github.com/users/lunny/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lunny/subscriptions","organizations_url":"https://api.github.com/users/lunny/orgs","repos_url":"https://api.github.com/users/lunny/repos","events_url":"https://api.github.com/users/lunny/events{/privacy}","received_events_url":"https://api.github.com/users/lunny/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/go-gitea/gitea/issues/32233/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/go-gitea/gitea/issues/32233/timeline","performed_via_github_app":null,"state_reason":"completed"}