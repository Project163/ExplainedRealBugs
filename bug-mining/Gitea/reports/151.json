{"url":"https://api.github.com/repos/go-gitea/gitea/issues/27114","repository_url":"https://api.github.com/repos/go-gitea/gitea","labels_url":"https://api.github.com/repos/go-gitea/gitea/issues/27114/labels{/name}","comments_url":"https://api.github.com/repos/go-gitea/gitea/issues/27114/comments","events_url":"https://api.github.com/repos/go-gitea/gitea/issues/27114/events","html_url":"https://github.com/go-gitea/gitea/issues/27114","id":1900457610,"node_id":"I_kwDOBFIx285xRq6K","number":27114,"title":"Approvals are dismissed when new commits are pushed","user":{"login":"jpraet","id":2212615,"node_id":"MDQ6VXNlcjIyMTI2MTU=","avatar_url":"https://avatars.githubusercontent.com/u/2212615?v=4","gravatar_id":"","url":"https://api.github.com/users/jpraet","html_url":"https://github.com/jpraet","followers_url":"https://api.github.com/users/jpraet/followers","following_url":"https://api.github.com/users/jpraet/following{/other_user}","gists_url":"https://api.github.com/users/jpraet/gists{/gist_id}","starred_url":"https://api.github.com/users/jpraet/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jpraet/subscriptions","organizations_url":"https://api.github.com/users/jpraet/orgs","repos_url":"https://api.github.com/users/jpraet/repos","events_url":"https://api.github.com/users/jpraet/events{/privacy}","received_events_url":"https://api.github.com/users/jpraet/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":472744938,"node_id":"MDU6TGFiZWw0NzI3NDQ5Mzg=","url":"https://api.github.com/repos/go-gitea/gitea/labels/type/bug","name":"type/bug","color":"ee0701","default":false,"description":""}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2023-09-18T08:46:14Z","updated_at":"2024-03-01T00:03:36Z","closed_at":"2024-01-15T07:20:02Z","author_association":"MEMBER","type":null,"active_lock_reason":"resolved","sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Description\n\nWith https://github.com/go-gitea/gitea/pull/25882, if \r\n\r\n![image](https://github.com/go-gitea/gitea/assets/2212615/5752cbc9-6023-4b30-b407-c9dfaa6bec97)\r\n\r\nis set on the branch protection, approvals get dismissed when new commits are added.\r\n\r\nI am not sure if it was the actual intent of this branch protection to actively \"Dismiss\" the review.\r\n\r\nPreviously, this option already caused stale approvals to be ignored towards the PR approval count, which seems sufficient?\r\n\r\nhttps://github.com/go-gitea/gitea/blob/a50d9af876435d007e6052c6ef8ebc838dd9709f/models/issues/pull.go#L837-L839\r\n\r\nNow, the review is actually dismissed, resulting in an entry in the PR history, and an ([empty](https://github.com/go-gitea/gitea/issues/27035)) email notification.\r\n\r\nThis dismissed review is also not shown in the \"Reviewers\" view of the PR, whereas stale reviews are.\r\n\r\nIn my opinion actually dismissing the review because new commits are added is a bit excessive?\n\n### Gitea Version\n\n1.20.4\n\n### Can you reproduce the bug on the Gitea demo site?\n\nYes\n\n### Log Gist\n\n_No response_\n\n### Screenshots\n\n_No response_\n\n### Git Version\n\n_No response_\n\n### Operating System\n\n_No response_\n\n### How are you running Gitea?\n\ndocker\n\n### Database\n\nNone","closed_by":{"login":"lunny","id":81045,"node_id":"MDQ6VXNlcjgxMDQ1","avatar_url":"https://avatars.githubusercontent.com/u/81045?v=4","gravatar_id":"","url":"https://api.github.com/users/lunny","html_url":"https://github.com/lunny","followers_url":"https://api.github.com/users/lunny/followers","following_url":"https://api.github.com/users/lunny/following{/other_user}","gists_url":"https://api.github.com/users/lunny/gists{/gist_id}","starred_url":"https://api.github.com/users/lunny/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lunny/subscriptions","organizations_url":"https://api.github.com/users/lunny/orgs","repos_url":"https://api.github.com/users/lunny/repos","events_url":"https://api.github.com/users/lunny/events{/privacy}","received_events_url":"https://api.github.com/users/lunny/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/go-gitea/gitea/issues/27114/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/go-gitea/gitea/issues/27114/timeline","performed_via_github_app":null,"state_reason":"completed"}