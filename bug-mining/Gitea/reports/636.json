{"url":"https://api.github.com/repos/go-gitea/gitea/issues/34834","repository_url":"https://api.github.com/repos/go-gitea/gitea","labels_url":"https://api.github.com/repos/go-gitea/gitea/issues/34834/labels{/name}","comments_url":"https://api.github.com/repos/go-gitea/gitea/issues/34834/comments","events_url":"https://api.github.com/repos/go-gitea/gitea/issues/34834/events","html_url":"https://github.com/go-gitea/gitea/issues/34834","id":3171735226,"node_id":"I_kwDOBFIx2869DNa6","number":34834,"title":"Pure SSH hangs with LFS upload after Idle timeout","user":{"login":"Dervz","id":25157196,"node_id":"MDQ6VXNlcjI1MTU3MTk2","avatar_url":"https://avatars.githubusercontent.com/u/25157196?v=4","gravatar_id":"","url":"https://api.github.com/users/Dervz","html_url":"https://github.com/Dervz","followers_url":"https://api.github.com/users/Dervz/followers","following_url":"https://api.github.com/users/Dervz/following{/other_user}","gists_url":"https://api.github.com/users/Dervz/gists{/gist_id}","starred_url":"https://api.github.com/users/Dervz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Dervz/subscriptions","organizations_url":"https://api.github.com/users/Dervz/orgs","repos_url":"https://api.github.com/users/Dervz/repos","events_url":"https://api.github.com/users/Dervz/events{/privacy}","received_events_url":"https://api.github.com/users/Dervz/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":472744938,"node_id":"MDU6TGFiZWw0NzI3NDQ5Mzg=","url":"https://api.github.com/repos/go-gitea/gitea/labels/type/bug","name":"type/bug","color":"ee0701","default":false,"description":""},{"id":1112269304,"node_id":"MDU6TGFiZWwxMTEyMjY5MzA0","url":"https://api.github.com/repos/go-gitea/gitea/labels/issue/confirmed","name":"issue/confirmed","color":"8d9b12","default":false,"description":"Issue has been reviewed and confirmed to be present or accepted to be implemented"}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/go-gitea/gitea/milestones/182","html_url":"https://github.com/go-gitea/gitea/milestone/182","labels_url":"https://api.github.com/repos/go-gitea/gitea/milestones/182/labels","id":13120283,"node_id":"MI_kwDOBFIx284AyDMb","number":182,"title":"1.24.3","description":"","creator":{"login":"lunny","id":81045,"node_id":"MDQ6VXNlcjgxMDQ1","avatar_url":"https://avatars.githubusercontent.com/u/81045?v=4","gravatar_id":"","url":"https://api.github.com/users/lunny","html_url":"https://github.com/lunny","followers_url":"https://api.github.com/users/lunny/followers","following_url":"https://api.github.com/users/lunny/following{/other_user}","gists_url":"https://api.github.com/users/lunny/gists{/gist_id}","starred_url":"https://api.github.com/users/lunny/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lunny/subscriptions","organizations_url":"https://api.github.com/users/lunny/orgs","repos_url":"https://api.github.com/users/lunny/repos","events_url":"https://api.github.com/users/lunny/events{/privacy}","received_events_url":"https://api.github.com/users/lunny/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":48,"state":"closed","created_at":"2025-06-20T20:03:44Z","updated_at":"2025-07-15T04:25:07Z","due_on":"2025-07-07T07:00:00Z","closed_at":"2025-07-15T04:25:07Z"},"comments":6,"created_at":"2025-06-24T12:04:13Z","updated_at":"2025-09-24T00:34:38Z","closed_at":"2025-06-24T15:49:33Z","author_association":"NONE","type":null,"active_lock_reason":"resolved","sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Description\n\nI run a local instance of GItea as VSC.\n\nWhen i upload files to LFS with PURE SSH on - i always get an error as you can see on screenshot, which is related to the connection being \"idle\" for 1 minute. Is it a timeout somewhere in git-lfs lib for ssh connection? Is it intended and if so is it configurable?\n\nAs i investigated, it is not related to the size of files being pushed. For example if i add a sleep pause in my endpoint or pause there with a debugger for 1 minute, then transfer will be forced to close immidiately.\n\nNo proxies. Error occurres regardless of where LFS is based. For example, it can be minio (either local with docker compose or on the server) and even\nwhen lfs is a local folder!!!!!!!!! (so it is not a backend -> minio connection issue)\n\n![Image](https://github.com/user-attachments/assets/1a296190-1f50-45cb-a6d7-93271dcbaf2d)\n![Image](https://github.com/user-attachments/assets/8b149e4a-982e-4597-844e-42f199fbd1bd)\n\nTo Reproduce\nSteps to reproduce the behavior:\n\nPURE SSH enabled\nTrack LFS large object\nPush it with SSH\nSee error\nExpected behavior\nA successful push to LFS with SSH without an interrupt after a minute\n\nSystem environment\n```\n$ git config -l\ndiff.astextplain.textconv=astextplain\nhttp.sslbackend=schannel\ncore.autocrlf=true\ncore.fscache=true\ncore.symlinks=false\npull.rebase=false\ncredential.helper=manager\ncredential.https://dev.azure.com.usehttppath=true\ninit.defaultbranch=master\ncore.editor=code --wait\ncore.sshcommand=cat - | C:/Windows/System32/OpenSSH/ssh.exe\nuser.email=Panevmovenko@sberbank.ru\nuser.name=PavelNevmovenko\n\nhttp.sslbakcend=schannel\nhttp.sslbackend=schannel\nhttp.sslverify=false\ncredential.https://sberworks.ru.provider=generic\ncredential.http://localhost:3000.provider=generic\ncredential.https://gitverse.ru.provider=generic\nurl.ssh://git@sberworks.ru:7998.insteadof=https://sberworks.ru/bitbucket-ci/scm\nlfs.concurrenttransfers=10\nlfs.activitytimeout=300\nlfs.dialtimeout=120\nlfs.keepalive=3600\nlfs.tlstimeout=120\nhttp.postbuffer=624288000\nlfs.ssh.automultiplex=false\nfilter.lfs.clean=git-lfs clean -- %f\nfilter.lfs.smudge=git-lfs smudge -- %f\nfilter.lfs.process=git-lfs filter-process\nfilter.lfs.required=true\ncore.repositoryformatversion=0\ncore.filemode=false\ncore.bare=false\ncore.logallrefupdates=true\ncore.symlinks=false\ncore.ignorecase=true\nremote.origin.url=nevmo@localhost:panevmovenko/ooooooo.git\nremote.origin.fetch=+refs/heads/*:refs/remotes/origin/*\nbranch.main.remote=origin\nbranch.main.merge=refs/heads/main\nlfs.repositoryformatversion=0\nlfs.contenttype=false\n```\n\nPROXY is NOT used.\n\nOutput of git lfs env\n\n\n```\n`$ git lfs env\ngit-lfs/3.6.1 (GitHub; windows amd64; go 1.23.3; git ea47a34b)\ngit version 2.50.0.windows.1\n\nEndpoint=https://localhost/panevmovenko/ooooooo.git/info/lfs (auth=none)\n  SSH=nevmo@localhost:panevmovenko/ooooooo.git\nLocalWorkingDir=D:\\gtiverse\\lfs-s3-bug\\ooooooo\nLocalGitDir=D:\\gtiverse\\lfs-s3-bug\\ooooooo\\.git\nLocalGitStorageDir=D:\\gtiverse\\lfs-s3-bug\\ooooooo\\.git\nLocalMediaDir=D:\\gtiverse\\lfs-s3-bug\\ooooooo\\.git\\lfs\\objects\nLocalReferenceDirs=\nTempDir=D:\\gtiverse\\lfs-s3-bug\\ooooooo\\.git\\lfs\\tmp\nConcurrentTransfers=10\nTusTransfers=false\nBasicTransfersOnly=false\nSkipDownloadErrors=false\nFetchRecentAlways=false\nFetchRecentRefsDays=7\nFetchRecentCommitsDays=0\nFetchRecentRefsIncludeRemotes=true\nPruneOffsetDays=3\nPruneVerifyRemoteAlways=false\nPruneVerifyUnreachableAlways=false\nPruneRemoteName=origin\nLfsStorageDir=D:\\gtiverse\\lfs-s3-bug\\ooooooo\\.git\\lfs\nAccessDownload=none\nAccessUpload=none\nDownloadTransfers=basic,lfs-standalone-file,ssh\nUploadTransfers=basic,lfs-standalone-file,ssh\nGIT_EXEC_PATH=C:/Program Files/Git/mingw64/libexec/git-core\nGIT_LFS_PATH=C:\\Program Files\\Git LFS\ngit config filter.lfs.process = \"git-lfs filter-process\"\ngit config filter.lfs.smudge = \"git-lfs smudge -- %f\"\ngit config filter.lfs.clean = \"git-lfs clean -- %f\"\n`\n```\n\nalso, this is my config for ssh\n\n`Host *\n    ServerAliveInterval 30\n    TCPKeepAlive yes\n\n### Gitea Version\n\nv1.24\n\n### Can you reproduce the bug on the Gitea demo site?\n\nYes\n\n### Log Gist\n\n_No response_\n\n### Screenshots\n\n_No response_\n\n### Git Version\n\n2.50.0\n\n### Operating System\n\nMacOS / Windows / Linux mint\n\n### How are you running Gitea?\n\nLocal insantance launches in goland\nOR\nDocker compose \n\n### Database\n\nPostgreSQL","closed_by":{"login":"wxiaoguang","id":2114189,"node_id":"MDQ6VXNlcjIxMTQxODk=","avatar_url":"https://avatars.githubusercontent.com/u/2114189?v=4","gravatar_id":"","url":"https://api.github.com/users/wxiaoguang","html_url":"https://github.com/wxiaoguang","followers_url":"https://api.github.com/users/wxiaoguang/followers","following_url":"https://api.github.com/users/wxiaoguang/following{/other_user}","gists_url":"https://api.github.com/users/wxiaoguang/gists{/gist_id}","starred_url":"https://api.github.com/users/wxiaoguang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wxiaoguang/subscriptions","organizations_url":"https://api.github.com/users/wxiaoguang/orgs","repos_url":"https://api.github.com/users/wxiaoguang/repos","events_url":"https://api.github.com/users/wxiaoguang/events{/privacy}","received_events_url":"https://api.github.com/users/wxiaoguang/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/go-gitea/gitea/issues/34834/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/go-gitea/gitea/issues/34834/timeline","performed_via_github_app":null,"state_reason":"completed"}