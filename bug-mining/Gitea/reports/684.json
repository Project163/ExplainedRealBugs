{"url":"https://api.github.com/repos/go-gitea/gitea/issues/33716","repository_url":"https://api.github.com/repos/go-gitea/gitea","labels_url":"https://api.github.com/repos/go-gitea/gitea/issues/33716/labels{/name}","comments_url":"https://api.github.com/repos/go-gitea/gitea/issues/33716/comments","events_url":"https://api.github.com/repos/go-gitea/gitea/issues/33716/events","html_url":"https://github.com/go-gitea/gitea/issues/33716","id":2878795118,"node_id":"I_kwDOBFIx286rlu1u","number":33716,"title":"Creating comment on a file with filename+path longer than 256 chars leads to 500 internal server error","user":{"login":"vladimirhasko","id":32979462,"node_id":"MDQ6VXNlcjMyOTc5NDYy","avatar_url":"https://avatars.githubusercontent.com/u/32979462?v=4","gravatar_id":"","url":"https://api.github.com/users/vladimirhasko","html_url":"https://github.com/vladimirhasko","followers_url":"https://api.github.com/users/vladimirhasko/followers","following_url":"https://api.github.com/users/vladimirhasko/following{/other_user}","gists_url":"https://api.github.com/users/vladimirhasko/gists{/gist_id}","starred_url":"https://api.github.com/users/vladimirhasko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/vladimirhasko/subscriptions","organizations_url":"https://api.github.com/users/vladimirhasko/orgs","repos_url":"https://api.github.com/users/vladimirhasko/repos","events_url":"https://api.github.com/users/vladimirhasko/events{/privacy}","received_events_url":"https://api.github.com/users/vladimirhasko/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":472744938,"node_id":"MDU6TGFiZWw0NzI3NDQ5Mzg=","url":"https://api.github.com/repos/go-gitea/gitea/labels/type/bug","name":"type/bug","color":"ee0701","default":false,"description":""},{"id":1112269304,"node_id":"MDU6TGFiZWwxMTEyMjY5MzA0","url":"https://api.github.com/repos/go-gitea/gitea/labels/issue/confirmed","name":"issue/confirmed","color":"8d9b12","default":false,"description":"Issue has been reviewed and confirmed to be present or accepted to be implemented"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/go-gitea/gitea/milestones/179","html_url":"https://github.com/go-gitea/gitea/milestone/179","labels_url":"https://api.github.com/repos/go-gitea/gitea/milestones/179/labels","id":12704260,"node_id":"MI_kwDOBFIx284AwdoE","number":179,"title":"1.25.0","description":"","creator":{"login":"lunny","id":81045,"node_id":"MDQ6VXNlcjgxMDQ1","avatar_url":"https://avatars.githubusercontent.com/u/81045?v=4","gravatar_id":"","url":"https://api.github.com/users/lunny","html_url":"https://github.com/lunny","followers_url":"https://api.github.com/users/lunny/followers","following_url":"https://api.github.com/users/lunny/following{/other_user}","gists_url":"https://api.github.com/users/lunny/gists{/gist_id}","starred_url":"https://api.github.com/users/lunny/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lunny/subscriptions","organizations_url":"https://api.github.com/users/lunny/orgs","repos_url":"https://api.github.com/users/lunny/repos","events_url":"https://api.github.com/users/lunny/events{/privacy}","received_events_url":"https://api.github.com/users/lunny/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":459,"state":"closed","created_at":"2025-04-10T01:13:20Z","updated_at":"2025-10-29T16:21:54Z","due_on":"2025-08-25T07:00:00Z","closed_at":"2025-10-29T16:21:54Z"},"comments":0,"created_at":"2025-02-25T15:36:18Z","updated_at":"2025-09-10T14:39:32Z","closed_at":"2025-09-10T13:32:00Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Description\n\nWe have some files which including path and file names are having more than 256 chars in length. After trying to create comment on such files we receive 500 internal server error:\n\n```\n500 Internal Server Error\n\nAn error occurred:\n\nCreateCodeComment, pq: value too long for type character varying(255)\n\nGitea Version: 1.23.1\n```\n\nIs this soft or hard limit of gitea? Can it be adjusted to allow more characters?\nOn our postgresql we see that there's character limit including the comment table:\n\n```\nSELECT table_name, column_name, character_maximum_length\nFROM information_schema.columns\nWHERE table_schema = 'public'\nAND character_maximum_length = 255;\n\n---------------------------+-----------------------+--------------------------\n        table_name         |      column_name      | character_maximum_length\n---------------------------+-----------------------+--------------------------\n...\n comment                   | old_title             |                      255\n comment                   | new_title             |                      255\n comment                   | old_ref               |                      255\n comment                   | new_ref               |                      255\n comment                   | tree_path             |                      255\n```\n\nIs tree_path parameter responsible for this issue? so comment cannot be created when the tree_path exceeds 255 characters?\nIs this parameter adjustable or it can negatively impact the overall gitea functionality?\nAnd if there are allowed files with longer filepath+filename length why commenting them leads to error? Shouldn't be this limit adjustable according to allowed length of filepath+filename?\n\n\n\nPS: Issue cannot be reproduced on gitea demo site as the site is down.\n\n### Gitea Version\n\n1.23.1\n\n### Can you reproduce the bug on the Gitea demo site?\n\nNo\n\n### Log Gist\n\n_No response_\n\n### Screenshots\n\n![Image](https://github.com/user-attachments/assets/17d65341-3589-403d-9b2f-c3616aaa2036)\n\n### Git Version\n\nv2.34.1 \n\n### Operating System\n\nUbuntu 22.04.3 LTS\n\n### How are you running Gitea?\n\nWe use one of your downloads for gitea binary (v1.23.1) and run it on our servers.\nIt's being run as systemd service\n\n### Database\n\nPostgreSQL","closed_by":{"login":"silverwind","id":115237,"node_id":"MDQ6VXNlcjExNTIzNw==","avatar_url":"https://avatars.githubusercontent.com/u/115237?v=4","gravatar_id":"","url":"https://api.github.com/users/silverwind","html_url":"https://github.com/silverwind","followers_url":"https://api.github.com/users/silverwind/followers","following_url":"https://api.github.com/users/silverwind/following{/other_user}","gists_url":"https://api.github.com/users/silverwind/gists{/gist_id}","starred_url":"https://api.github.com/users/silverwind/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/silverwind/subscriptions","organizations_url":"https://api.github.com/users/silverwind/orgs","repos_url":"https://api.github.com/users/silverwind/repos","events_url":"https://api.github.com/users/silverwind/events{/privacy}","received_events_url":"https://api.github.com/users/silverwind/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/go-gitea/gitea/issues/33716/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/go-gitea/gitea/issues/33716/timeline","performed_via_github_app":null,"state_reason":"completed"}