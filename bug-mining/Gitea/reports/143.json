{"url":"https://api.github.com/repos/go-gitea/gitea/issues/28736","repository_url":"https://api.github.com/repos/go-gitea/gitea","labels_url":"https://api.github.com/repos/go-gitea/gitea/issues/28736/labels{/name}","comments_url":"https://api.github.com/repos/go-gitea/gitea/issues/28736/comments","events_url":"https://api.github.com/repos/go-gitea/gitea/issues/28736/events","html_url":"https://github.com/go-gitea/gitea/issues/28736","id":2071364052,"node_id":"I_kwDOBFIx2857doHU","number":28736,"title":"Release downloads should trigger a download","user":{"login":"AsgeirSH","id":1831028,"node_id":"MDQ6VXNlcjE4MzEwMjg=","avatar_url":"https://avatars.githubusercontent.com/u/1831028?v=4","gravatar_id":"","url":"https://api.github.com/users/AsgeirSH","html_url":"https://github.com/AsgeirSH","followers_url":"https://api.github.com/users/AsgeirSH/followers","following_url":"https://api.github.com/users/AsgeirSH/following{/other_user}","gists_url":"https://api.github.com/users/AsgeirSH/gists{/gist_id}","starred_url":"https://api.github.com/users/AsgeirSH/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AsgeirSH/subscriptions","organizations_url":"https://api.github.com/users/AsgeirSH/orgs","repos_url":"https://api.github.com/users/AsgeirSH/repos","events_url":"https://api.github.com/users/AsgeirSH/events{/privacy}","received_events_url":"https://api.github.com/users/AsgeirSH/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":472744938,"node_id":"MDU6TGFiZWw0NzI3NDQ5Mzg=","url":"https://api.github.com/repos/go-gitea/gitea/labels/type/bug","name":"type/bug","color":"ee0701","default":false,"description":""},{"id":474799001,"node_id":"MDU6TGFiZWw0NzQ3OTkwMDE=","url":"https://api.github.com/repos/go-gitea/gitea/labels/topic/ui","name":"topic/ui","color":"fef2c0","default":false,"description":"Change the appearance of the Gitea UI"}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/go-gitea/gitea/milestones/154","html_url":"https://github.com/go-gitea/gitea/milestone/154","labels_url":"https://api.github.com/repos/go-gitea/gitea/milestones/154/labels","id":10337390,"node_id":"MI_kwDOBFIx284Anbxu","number":154,"title":"1.21.4","description":"","creator":{"login":"lunny","id":81045,"node_id":"MDQ6VXNlcjgxMDQ1","avatar_url":"https://avatars.githubusercontent.com/u/81045?v=4","gravatar_id":"","url":"https://api.github.com/users/lunny","html_url":"https://github.com/lunny","followers_url":"https://api.github.com/users/lunny/followers","following_url":"https://api.github.com/users/lunny/following{/other_user}","gists_url":"https://api.github.com/users/lunny/gists{/gist_id}","starred_url":"https://api.github.com/users/lunny/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lunny/subscriptions","organizations_url":"https://api.github.com/users/lunny/orgs","repos_url":"https://api.github.com/users/lunny/repos","events_url":"https://api.github.com/users/lunny/events{/privacy}","received_events_url":"https://api.github.com/users/lunny/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":65,"state":"closed","created_at":"2023-12-21T08:32:13Z","updated_at":"2024-01-17T02:49:27Z","due_on":"2024-01-05T08:00:00Z","closed_at":"2024-01-17T02:49:27Z"},"comments":0,"created_at":"2024-01-08T23:04:27Z","updated_at":"2024-02-24T00:01:06Z","closed_at":"2024-01-09T08:51:21Z","author_association":"NONE","type":null,"active_lock_reason":"resolved","sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Description\n\n## Overview\r\n\r\nWhen downloading files from a release that contains files that browsers can open (for example a .hex-file), Gitea does not trigger a download. \r\n\r\nInstead, the file is opened in a new tab and when manually saving the content, the file type is not preserved and is instead suggested to be saved as .txt.\r\n\r\n## Expected behavior\r\n\r\nWhen clicking to download a file from a release, Gitea should set the proper headers to ensure that the browser will suggest to save it with the same filename and extension as in the released file.\r\n\r\nThis works as expected when clicking the Download-button in the Code view.\r\n\r\n## Example\r\nReproduced on the demo site: https://try.gitea.io/AsgeirSH/DownloadFileIssueRepro/releases/tag/v0.0.1\r\n\r\n## Suggested fix\r\nAdding a `download` attribute in the `<a>`-tag for the file. When this is added by manually editing the html in Developer tools, it seems to work as expected.\n\n### Screenshots\n\n![Screenshot 2024-01-08 at 23 49 26](https://github.com/go-gitea/gitea/assets/1831028/95d34254-3472-47e3-9d6c-bff9748b89a0)\r\n![Screenshot 2024-01-08 at 23 52 12](https://github.com/go-gitea/gitea/assets/1831028/f958ca5e-942b-4a21-9593-8cbae1aa0bf9)\r\n\n\n### Gitea Version\n\n1.21.3\n\n### Can you reproduce the bug on the Gitea demo site?\n\nYes\n\n### Operating System\n\nMacOS and Windows\n\n### Browser Version\n\nChrome Version 120.0.6099.199","closed_by":{"login":"lunny","id":81045,"node_id":"MDQ6VXNlcjgxMDQ1","avatar_url":"https://avatars.githubusercontent.com/u/81045?v=4","gravatar_id":"","url":"https://api.github.com/users/lunny","html_url":"https://github.com/lunny","followers_url":"https://api.github.com/users/lunny/followers","following_url":"https://api.github.com/users/lunny/following{/other_user}","gists_url":"https://api.github.com/users/lunny/gists{/gist_id}","starred_url":"https://api.github.com/users/lunny/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lunny/subscriptions","organizations_url":"https://api.github.com/users/lunny/orgs","repos_url":"https://api.github.com/users/lunny/repos","events_url":"https://api.github.com/users/lunny/events{/privacy}","received_events_url":"https://api.github.com/users/lunny/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/go-gitea/gitea/issues/28736/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/go-gitea/gitea/issues/28736/timeline","performed_via_github_app":null,"state_reason":"completed"}