{"url":"https://api.github.com/repos/go-gitea/gitea/issues/35884","repository_url":"https://api.github.com/repos/go-gitea/gitea","labels_url":"https://api.github.com/repos/go-gitea/gitea/issues/35884/labels{/name}","comments_url":"https://api.github.com/repos/go-gitea/gitea/issues/35884/comments","events_url":"https://api.github.com/repos/go-gitea/gitea/issues/35884/events","html_url":"https://github.com/go-gitea/gitea/issues/35884","id":3595803560,"node_id":"I_kwDOBFIx287WU5uo","number":35884,"title":"First login via LDAP fails if there is no avatar","user":{"login":"zencak-ica","id":135316579,"node_id":"U_kgDOCBDEYw","avatar_url":"https://avatars.githubusercontent.com/u/135316579?v=4","gravatar_id":"","url":"https://api.github.com/users/zencak-ica","html_url":"https://github.com/zencak-ica","followers_url":"https://api.github.com/users/zencak-ica/followers","following_url":"https://api.github.com/users/zencak-ica/following{/other_user}","gists_url":"https://api.github.com/users/zencak-ica/gists{/gist_id}","starred_url":"https://api.github.com/users/zencak-ica/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zencak-ica/subscriptions","organizations_url":"https://api.github.com/users/zencak-ica/orgs","repos_url":"https://api.github.com/users/zencak-ica/repos","events_url":"https://api.github.com/users/zencak-ica/events{/privacy}","received_events_url":"https://api.github.com/users/zencak-ica/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":472744938,"node_id":"MDU6TGFiZWw0NzI3NDQ5Mzg=","url":"https://api.github.com/repos/go-gitea/gitea/labels/type/bug","name":"type/bug","color":"ee0701","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/go-gitea/gitea/milestones/189","html_url":"https://github.com/go-gitea/gitea/milestone/189","labels_url":"https://api.github.com/repos/go-gitea/gitea/milestones/189/labels","id":14050489,"node_id":"MI_kwDOBFIx284A1mS5","number":189,"title":"1.25.2","description":"","creator":{"login":"lunny","id":81045,"node_id":"MDQ6VXNlcjgxMDQ1","avatar_url":"https://avatars.githubusercontent.com/u/81045?v=4","gravatar_id":"","url":"https://api.github.com/users/lunny","html_url":"https://github.com/lunny","followers_url":"https://api.github.com/users/lunny/followers","following_url":"https://api.github.com/users/lunny/following{/other_user}","gists_url":"https://api.github.com/users/lunny/gists{/gist_id}","starred_url":"https://api.github.com/users/lunny/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lunny/subscriptions","organizations_url":"https://api.github.com/users/lunny/orgs","repos_url":"https://api.github.com/users/lunny/repos","events_url":"https://api.github.com/users/lunny/events{/privacy}","received_events_url":"https://api.github.com/users/lunny/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":3,"closed_issues":15,"state":"open","created_at":"2025-11-04T19:20:01Z","updated_at":"2025-11-09T21:54:46Z","due_on":"2025-11-17T08:00:00Z","closed_at":null},"comments":1,"created_at":"2025-11-06T13:19:15Z","updated_at":"2025-11-07T03:15:19Z","closed_at":"2025-11-07T01:44:10Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Description\n\nWhen a LDAP user that Gitea does not yet know tries to log in for the first time and does not have an avatar (and the auth source has the Avatar Attribute set), it fails, and the second attempt succeeds.\n\nThe log contains the following lines:\n```\n2025/11/06 13:28:00 services/auth/signin.go:119:UserSignIn() [W] Failed to login 'git-test' via 'FreeIPA': image.DecodeConfig: image: unknown format\n2025/11/06 13:28:00 routers/web/auth/auth.go:222:SignInPost() [W] Failed authentication attempt for git-test from <redacted>: user does not exist [uid: 0, name: git-test]\n```\n\nSubsequent login attempts succeed.\n\n### Gitea Version\n\n1.24.3\n\n### Can you reproduce the bug on the Gitea demo site?\n\nNo\n\n### Log Gist\n\n_No response_\n\n### Screenshots\n\n_No response_\n\n### Git Version\n\n_No response_\n\n### Operating System\n\n_No response_\n\n### How are you running Gitea?\n\nDownloaded the official release\n\n### Database\n\nSQLite","closed_by":{"login":"wxiaoguang","id":2114189,"node_id":"MDQ6VXNlcjIxMTQxODk=","avatar_url":"https://avatars.githubusercontent.com/u/2114189?v=4","gravatar_id":"","url":"https://api.github.com/users/wxiaoguang","html_url":"https://github.com/wxiaoguang","followers_url":"https://api.github.com/users/wxiaoguang/followers","following_url":"https://api.github.com/users/wxiaoguang/following{/other_user}","gists_url":"https://api.github.com/users/wxiaoguang/gists{/gist_id}","starred_url":"https://api.github.com/users/wxiaoguang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wxiaoguang/subscriptions","organizations_url":"https://api.github.com/users/wxiaoguang/orgs","repos_url":"https://api.github.com/users/wxiaoguang/repos","events_url":"https://api.github.com/users/wxiaoguang/events{/privacy}","received_events_url":"https://api.github.com/users/wxiaoguang/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/go-gitea/gitea/issues/35884/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/go-gitea/gitea/issues/35884/timeline","performed_via_github_app":null,"state_reason":"completed"}