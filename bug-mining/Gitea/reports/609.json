{"url":"https://api.github.com/repos/go-gitea/gitea/issues/34455","repository_url":"https://api.github.com/repos/go-gitea/gitea","labels_url":"https://api.github.com/repos/go-gitea/gitea/issues/34455/labels{/name}","comments_url":"https://api.github.com/repos/go-gitea/gitea/issues/34455/comments","events_url":"https://api.github.com/repos/go-gitea/gitea/issues/34455/events","html_url":"https://github.com/go-gitea/gitea/issues/34455","id":3061235065,"node_id":"I_kwDOBFIx2862dr15","number":34455,"title":"Gitea 1.23.8 updates migration version on failed migration","user":{"login":"caerbannogwhite","id":37809256,"node_id":"MDQ6VXNlcjM3ODA5MjU2","avatar_url":"https://avatars.githubusercontent.com/u/37809256?v=4","gravatar_id":"","url":"https://api.github.com/users/caerbannogwhite","html_url":"https://github.com/caerbannogwhite","followers_url":"https://api.github.com/users/caerbannogwhite/followers","following_url":"https://api.github.com/users/caerbannogwhite/following{/other_user}","gists_url":"https://api.github.com/users/caerbannogwhite/gists{/gist_id}","starred_url":"https://api.github.com/users/caerbannogwhite/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/caerbannogwhite/subscriptions","organizations_url":"https://api.github.com/users/caerbannogwhite/orgs","repos_url":"https://api.github.com/users/caerbannogwhite/repos","events_url":"https://api.github.com/users/caerbannogwhite/events{/privacy}","received_events_url":"https://api.github.com/users/caerbannogwhite/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":472744938,"node_id":"MDU6TGFiZWw0NzI3NDQ5Mzg=","url":"https://api.github.com/repos/go-gitea/gitea/labels/type/bug","name":"type/bug","color":"ee0701","default":false,"description":""}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":10,"created_at":"2025-05-13T21:07:04Z","updated_at":"2025-08-14T00:37:42Z","closed_at":"2025-05-15T16:28:33Z","author_association":"NONE","type":null,"active_lock_reason":"resolved","sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Description\n\nTrying to migrate Gitea from 1.22.6 to 1.23.8 (see #34275 ) on Windows, SQL Server 2019 (version 15.0.2130.3), I got the same error reported in #34275 .\n\nRestoring Gitea 1.22.6, failed, and the log showed that the migration version has been changed to 301 (expecting version 299).\n\n### Gitea Version\n\n1.23.8\n\n### Can you reproduce the bug on the Gitea demo site?\n\nNo\n\n### Log Gist\n\n2025/05/13 21:37:42 cmd/web.go:194:serveInstalled() [I] PING DATABASE mssql 2025/05/13 21:37:42 ...dels/db/collation.go:185:preprocessDatabaseCollation() [W] Current database is using a case-insensitive collation \"Latin1_General_CI_AS\", although Gitea could work with it, there might be some rare cases which don't work as expected. 2025/05/13 21:37:42 routers/common/db.go:31:InitDBEngine() [W] Table version Column version db default is NULL, struct default is 2025/05/13 21:37:42 ...ations/migrations.go:675:Migrate() [F] Migration Error: Your database (migration version: 302) is for a newer Gitea, you can not use the newer database for this old Gitea release (299). Gitea will exit to keep your database safe and unchanged. Please use the correct Gitea release, do not change the migration version manually (incorrect manual operation may lose data). If you are in development and really know what you're doing, you can force changing the migration version by executing: UPDATE version SET version=299 WHERE id=1;\n\n### Screenshots\n\n_No response_\n\n### Git Version\n\n_No response_\n\n### Operating System\n\nWindows 10 Pro x64 \n\n### How are you running Gitea?\n\nSelf-hosted, using Windows services\n\n### Database\n\nMSSQL","closed_by":{"login":"techknowlogick","id":164197,"node_id":"MDQ6VXNlcjE2NDE5Nw==","avatar_url":"https://avatars.githubusercontent.com/u/164197?v=4","gravatar_id":"","url":"https://api.github.com/users/techknowlogick","html_url":"https://github.com/techknowlogick","followers_url":"https://api.github.com/users/techknowlogick/followers","following_url":"https://api.github.com/users/techknowlogick/following{/other_user}","gists_url":"https://api.github.com/users/techknowlogick/gists{/gist_id}","starred_url":"https://api.github.com/users/techknowlogick/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/techknowlogick/subscriptions","organizations_url":"https://api.github.com/users/techknowlogick/orgs","repos_url":"https://api.github.com/users/techknowlogick/repos","events_url":"https://api.github.com/users/techknowlogick/events{/privacy}","received_events_url":"https://api.github.com/users/techknowlogick/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/go-gitea/gitea/issues/34455/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/go-gitea/gitea/issues/34455/timeline","performed_via_github_app":null,"state_reason":"completed"}