{"url":"https://api.github.com/repos/go-gitea/gitea/issues/33358","repository_url":"https://api.github.com/repos/go-gitea/gitea","labels_url":"https://api.github.com/repos/go-gitea/gitea/issues/33358/labels{/name}","comments_url":"https://api.github.com/repos/go-gitea/gitea/issues/33358/comments","events_url":"https://api.github.com/repos/go-gitea/gitea/issues/33358/events","html_url":"https://github.com/go-gitea/gitea/issues/33358","id":2805017602,"node_id":"I_kwDOBFIx286nMSwC","number":33358,"title":"Syntax highlighting should be full-file only","user":{"login":"silverwind","id":115237,"node_id":"MDQ6VXNlcjExNTIzNw==","avatar_url":"https://avatars.githubusercontent.com/u/115237?v=4","gravatar_id":"","url":"https://api.github.com/users/silverwind","html_url":"https://github.com/silverwind","followers_url":"https://api.github.com/users/silverwind/followers","following_url":"https://api.github.com/users/silverwind/following{/other_user}","gists_url":"https://api.github.com/users/silverwind/gists{/gist_id}","starred_url":"https://api.github.com/users/silverwind/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/silverwind/subscriptions","organizations_url":"https://api.github.com/users/silverwind/orgs","repos_url":"https://api.github.com/users/silverwind/repos","events_url":"https://api.github.com/users/silverwind/events{/privacy}","received_events_url":"https://api.github.com/users/silverwind/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":472744938,"node_id":"MDU6TGFiZWw0NzI3NDQ5Mzg=","url":"https://api.github.com/repos/go-gitea/gitea/labels/type/bug","name":"type/bug","color":"ee0701","default":false,"description":""},{"id":474799001,"node_id":"MDU6TGFiZWw0NzQ3OTkwMDE=","url":"https://api.github.com/repos/go-gitea/gitea/labels/topic/ui","name":"topic/ui","color":"fef2c0","default":false,"description":"Change the appearance of the Gitea UI"},{"id":4115870195,"node_id":"LA_kwDOBFIx2871UzHz","url":"https://api.github.com/repos/go-gitea/gitea/labels/topic/content-rendering","name":"topic/content-rendering","color":"03CE63","default":false,"description":"Changes how certain filetypes are displayed"}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":9,"created_at":"2025-01-22T17:58:46Z","updated_at":"2025-06-07T08:24:30Z","closed_at":"2025-03-09T04:52:00Z","author_association":"MEMBER","type":null,"active_lock_reason":"resolved","sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Description\n\nDiff lines are passed individually line-by-line to chroma, which its a massive source of highlighting bugs because the highlighter needs to see the whole file to highlight correctly. We should instead:\n\n- Highlight both the old and new files individually, store the resulting HTML in Maps of (lineText, lineHTML).\n- For each content line in the diff, look into the maps and if there is an exact match, replace the line with the highlighted HTML line.\n\nThis assumes chroma does not output HTML tags that span multiple lines, but I think this may already be the case.","closed_by":{"login":"wxiaoguang","id":2114189,"node_id":"MDQ6VXNlcjIxMTQxODk=","avatar_url":"https://avatars.githubusercontent.com/u/2114189?v=4","gravatar_id":"","url":"https://api.github.com/users/wxiaoguang","html_url":"https://github.com/wxiaoguang","followers_url":"https://api.github.com/users/wxiaoguang/followers","following_url":"https://api.github.com/users/wxiaoguang/following{/other_user}","gists_url":"https://api.github.com/users/wxiaoguang/gists{/gist_id}","starred_url":"https://api.github.com/users/wxiaoguang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wxiaoguang/subscriptions","organizations_url":"https://api.github.com/users/wxiaoguang/orgs","repos_url":"https://api.github.com/users/wxiaoguang/repos","events_url":"https://api.github.com/users/wxiaoguang/events{/privacy}","received_events_url":"https://api.github.com/users/wxiaoguang/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/go-gitea/gitea/issues/33358/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/go-gitea/gitea/issues/33358/timeline","performed_via_github_app":null,"state_reason":"completed"}