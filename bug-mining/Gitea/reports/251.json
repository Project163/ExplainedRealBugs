{"url":"https://api.github.com/repos/go-gitea/gitea/issues/30189","repository_url":"https://api.github.com/repos/go-gitea/gitea","labels_url":"https://api.github.com/repos/go-gitea/gitea/issues/30189/labels{/name}","comments_url":"https://api.github.com/repos/go-gitea/gitea/issues/30189/comments","events_url":"https://api.github.com/repos/go-gitea/gitea/issues/30189/events","html_url":"https://github.com/go-gitea/gitea/issues/30189","id":2216469580,"node_id":"I_kwDOBFIx286EHKRM","number":30189,"title":"Cannot verify GPG key. Armored GPG signature not accepted","user":{"login":"ligaard","id":77562,"node_id":"MDQ6VXNlcjc3NTYy","avatar_url":"https://avatars.githubusercontent.com/u/77562?v=4","gravatar_id":"","url":"https://api.github.com/users/ligaard","html_url":"https://github.com/ligaard","followers_url":"https://api.github.com/users/ligaard/followers","following_url":"https://api.github.com/users/ligaard/following{/other_user}","gists_url":"https://api.github.com/users/ligaard/gists{/gist_id}","starred_url":"https://api.github.com/users/ligaard/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ligaard/subscriptions","organizations_url":"https://api.github.com/users/ligaard/orgs","repos_url":"https://api.github.com/users/ligaard/repos","events_url":"https://api.github.com/users/ligaard/events{/privacy}","received_events_url":"https://api.github.com/users/ligaard/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":472744938,"node_id":"MDU6TGFiZWw0NzI3NDQ5Mzg=","url":"https://api.github.com/repos/go-gitea/gitea/labels/type/bug","name":"type/bug","color":"ee0701","default":false,"description":""},{"id":1112269304,"node_id":"MDU6TGFiZWwxMTEyMjY5MzA0","url":"https://api.github.com/repos/go-gitea/gitea/labels/issue/confirmed","name":"issue/confirmed","color":"8d9b12","default":false,"description":"Issue has been reviewed and confirmed to be present or accepted to be implemented"}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2024-03-30T14:00:36Z","updated_at":"2024-06-29T15:37:20Z","closed_at":"2024-03-31T02:35:21Z","author_association":"NONE","type":null,"active_lock_reason":"resolved","sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Description\r\n\r\nI am trying to set up GPG key on my account. I have successfully added a GPG key, but when I want to verify it, it fails with a red banner stating _\"The provided GPG key, signature and token do not match or token is out-of-date.\"_\r\n\r\nSteps to reproduce (also cf. screenshot below):\r\n0. Go to URL path: user/settings/keys\r\n1. Click the \"Verify\" button next to a GPG key.\r\n2. execute the command line command shown below the Token input field.\r\n3. Copy paste from the terminal to the Armored GPG signature field.\r\n4. Click Verify and see it fail with the red banner up top.\r\n\r\nWhen step 4 happens, the following log line message is printed twice:\r\n...ey/gpg_key_verify.go:84:VerifyGPGKey() [E] Unable to validate token signature. Error: <nil>\r\n\r\nMy GPG key has been set up with a subkey (as described in https://mikeross.xyz/create-gpg-key-pair-with-subkeys/).\r\n\r\nA related issue, but for SSH instead of GPG, is in issue #29903.\r\n\r\n### Gitea Version\r\n\r\n1.23.0+dev-13-gb6a3cd4b8\r\n\r\n### Can you reproduce the bug on the Gitea demo site?\r\n\r\nI do not have login to Gitea demo site and thus have not tried to reproduce there.\r\n\r\n### Log Gist\r\n\r\n...ey/gpg_key_verify.go:84:VerifyGPGKey() [E] Unable to validate token signature. Error: <nil>\r\n\r\n### Screenshots\r\n\r\n<img width=\"795\" alt=\"image\" src=\"https://github.com/go-gitea/gitea/assets/77562/6142f786-d6b2-430d-ae52-74a5496f466a\">\r\n\r\n### Git Version\r\n\r\n2.43.0\r\n\r\n### Operating System\r\n\r\nLinux (docker desktop on MacOS)\r\n\r\n### How are you running Gitea?\r\n\r\nI am running Gitea from nightly docker hub image, via Docker Desktop on MacOS. \r\n\r\n### Database\r\n\r\nSQLite","closed_by":{"login":"lafriks","id":165205,"node_id":"MDQ6VXNlcjE2NTIwNQ==","avatar_url":"https://avatars.githubusercontent.com/u/165205?v=4","gravatar_id":"","url":"https://api.github.com/users/lafriks","html_url":"https://github.com/lafriks","followers_url":"https://api.github.com/users/lafriks/followers","following_url":"https://api.github.com/users/lafriks/following{/other_user}","gists_url":"https://api.github.com/users/lafriks/gists{/gist_id}","starred_url":"https://api.github.com/users/lafriks/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lafriks/subscriptions","organizations_url":"https://api.github.com/users/lafriks/orgs","repos_url":"https://api.github.com/users/lafriks/repos","events_url":"https://api.github.com/users/lafriks/events{/privacy}","received_events_url":"https://api.github.com/users/lafriks/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/go-gitea/gitea/issues/30189/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/go-gitea/gitea/issues/30189/timeline","performed_via_github_app":null,"state_reason":"completed"}