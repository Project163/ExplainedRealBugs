{"url":"https://api.github.com/repos/go-gitea/gitea/issues/31599","repository_url":"https://api.github.com/repos/go-gitea/gitea","labels_url":"https://api.github.com/repos/go-gitea/gitea/issues/31599/labels{/name}","comments_url":"https://api.github.com/repos/go-gitea/gitea/issues/31599/comments","events_url":"https://api.github.com/repos/go-gitea/gitea/issues/31599/events","html_url":"https://github.com/go-gitea/gitea/issues/31599","id":2398088106,"node_id":"I_kwDOBFIx286O7-uq","number":31599,"title":"\"Commits behind main\" counter is not working reliable in branch overview","user":{"login":"urz-hgw","id":75071349,"node_id":"MDQ6VXNlcjc1MDcxMzQ5","avatar_url":"https://avatars.githubusercontent.com/u/75071349?v=4","gravatar_id":"","url":"https://api.github.com/users/urz-hgw","html_url":"https://github.com/urz-hgw","followers_url":"https://api.github.com/users/urz-hgw/followers","following_url":"https://api.github.com/users/urz-hgw/following{/other_user}","gists_url":"https://api.github.com/users/urz-hgw/gists{/gist_id}","starred_url":"https://api.github.com/users/urz-hgw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/urz-hgw/subscriptions","organizations_url":"https://api.github.com/users/urz-hgw/orgs","repos_url":"https://api.github.com/users/urz-hgw/repos","events_url":"https://api.github.com/users/urz-hgw/events{/privacy}","received_events_url":"https://api.github.com/users/urz-hgw/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":472744938,"node_id":"MDU6TGFiZWw0NzI3NDQ5Mzg=","url":"https://api.github.com/repos/go-gitea/gitea/labels/type/bug","name":"type/bug","color":"ee0701","default":false,"description":""}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/go-gitea/gitea/milestones/165","html_url":"https://github.com/go-gitea/gitea/milestone/165","labels_url":"https://api.github.com/repos/go-gitea/gitea/milestones/165/labels","id":11278175,"node_id":"MI_kwDOBFIx284ArBdf","number":165,"title":"1.22.2","description":"","creator":{"login":"lunny","id":81045,"node_id":"MDQ6VXNlcjgxMDQ1","avatar_url":"https://avatars.githubusercontent.com/u/81045?v=4","gravatar_id":"","url":"https://api.github.com/users/lunny","html_url":"https://github.com/lunny","followers_url":"https://api.github.com/users/lunny/followers","following_url":"https://api.github.com/users/lunny/following{/other_user}","gists_url":"https://api.github.com/users/lunny/gists{/gist_id}","starred_url":"https://api.github.com/users/lunny/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lunny/subscriptions","organizations_url":"https://api.github.com/users/lunny/orgs","repos_url":"https://api.github.com/users/lunny/repos","events_url":"https://api.github.com/users/lunny/events{/privacy}","received_events_url":"https://api.github.com/users/lunny/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":76,"state":"closed","created_at":"2024-07-05T23:07:38Z","updated_at":"2024-09-06T03:38:51Z","due_on":null,"closed_at":"2024-09-06T03:38:51Z"},"comments":1,"created_at":"2024-07-09T12:33:28Z","updated_at":"2024-10-18T02:36:26Z","closed_at":"2024-07-19T15:52:50Z","author_association":"NONE","type":null,"active_lock_reason":"resolved","sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Description\n\nHi,\r\n\r\nthe number of \"commits behind main\" is not updated regularly for some reason in the branch overview page.\r\n\r\nMy steps to reproduce are:\r\n\r\n- Create a new repository\r\n- Add a testfile and commit\r\n- Create a new branch \"dev\" from \"main\"\r\n- Modify the testfile and commit to \"main\"\r\n- The branch overview shows either: \"1|0\" or \"0|0\"\r\n- Modify the testfile a second time and commit to \"main\"\r\n- Modify the testfile a third time and commit to \"main\"\r\n- The branch overview still shows \"0|0\" or \"1|0\"\r\n(see screenshot, it's taken from the Gitea demo site)\r\n\r\nThe CLI shows\r\n```bash\r\ngit rev-list --left-right --count origin/main...origin/dev\r\n3\t0\r\n```\r\nWhen I now add a testfile to the \"dev\" branch and commit it, the branch overview updates correctly to \"3|1\".\r\n\r\nIn general, when doing commits on the \"dev\" branch, the correct number of \"commits ahead of main\" is shown immediately after each commit.\r\n\r\nYou can find my testrepo on the Gitea demo site [here](https://demo.gitea.com/urz-hgw/testrepo/branches), I added some more commit on the \"main\" branch, the number should now be \"5|1\" but still shows \"3|1\".\r\n\r\nBest regards\r\nDaniel\n\n### Screenshots\n\n![Bildschirmfoto vom 2024-07-09 14-23-04](https://github.com/go-gitea/gitea/assets/75071349/8f9e1e39-c033-4199-a7d8-62d0f4246e51)\r\n\n\n### Gitea Version\n\n1.22.1\n\n### Can you reproduce the bug on the Gitea demo site?\n\nYes\n\n### Operating System\n\nLinux\n\n### Browser Version\n\nFirefox 127.0.2","closed_by":{"login":"6543","id":24977596,"node_id":"MDQ6VXNlcjI0OTc3NTk2","avatar_url":"https://avatars.githubusercontent.com/u/24977596?v=4","gravatar_id":"","url":"https://api.github.com/users/6543","html_url":"https://github.com/6543","followers_url":"https://api.github.com/users/6543/followers","following_url":"https://api.github.com/users/6543/following{/other_user}","gists_url":"https://api.github.com/users/6543/gists{/gist_id}","starred_url":"https://api.github.com/users/6543/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/6543/subscriptions","organizations_url":"https://api.github.com/users/6543/orgs","repos_url":"https://api.github.com/users/6543/repos","events_url":"https://api.github.com/users/6543/events{/privacy}","received_events_url":"https://api.github.com/users/6543/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/go-gitea/gitea/issues/31599/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/go-gitea/gitea/issues/31599/timeline","performed_via_github_app":null,"state_reason":"completed"}