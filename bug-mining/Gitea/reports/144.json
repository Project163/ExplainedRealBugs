{"url":"https://api.github.com/repos/go-gitea/gitea/issues/28131","repository_url":"https://api.github.com/repos/go-gitea/gitea","labels_url":"https://api.github.com/repos/go-gitea/gitea/issues/28131/labels{/name}","comments_url":"https://api.github.com/repos/go-gitea/gitea/issues/28131/comments","events_url":"https://api.github.com/repos/go-gitea/gitea/issues/28131/events","html_url":"https://github.com/go-gitea/gitea/issues/28131","id":2001604375,"node_id":"I_kwDOBFIx2853Tg8X","number":28131,"title":"MySQL/MariaDB: Unique Constraint on Branches doesn't respect casing: UQE_branch_s","user":{"login":"sebastian-sauer","id":1135157,"node_id":"MDQ6VXNlcjExMzUxNTc=","avatar_url":"https://avatars.githubusercontent.com/u/1135157?v=4","gravatar_id":"","url":"https://api.github.com/users/sebastian-sauer","html_url":"https://github.com/sebastian-sauer","followers_url":"https://api.github.com/users/sebastian-sauer/followers","following_url":"https://api.github.com/users/sebastian-sauer/following{/other_user}","gists_url":"https://api.github.com/users/sebastian-sauer/gists{/gist_id}","starred_url":"https://api.github.com/users/sebastian-sauer/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sebastian-sauer/subscriptions","organizations_url":"https://api.github.com/users/sebastian-sauer/orgs","repos_url":"https://api.github.com/users/sebastian-sauer/repos","events_url":"https://api.github.com/users/sebastian-sauer/events{/privacy}","received_events_url":"https://api.github.com/users/sebastian-sauer/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":472744938,"node_id":"MDU6TGFiZWw0NzI3NDQ5Mzg=","url":"https://api.github.com/repos/go-gitea/gitea/labels/type/bug","name":"type/bug","color":"ee0701","default":false,"description":""},{"id":3995080816,"node_id":"LA_kwDOBFIx287uIBhw","url":"https://api.github.com/repos/go-gitea/gitea/labels/issue/workaround","name":"issue/workaround","color":"006B75","default":false,"description":"it is or has a workaround"}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2023-11-20T08:13:39Z","updated_at":"2024-02-26T00:01:09Z","closed_at":"2024-01-10T11:03:24Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":"resolved","sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Description\n\nIn a repo with two branches `feature/test_case` and `feature\\Test_Case` gitea throws a 500 exception when syncing branches as the unique constraint is violated.\r\n\r\n`SyncRepoBranches: Error 1062 (23000): Duplicate entry '<redacted_branch_name>' for key 'UQE_branch_s'`\r\n\r\nThis error happened after an upgrade to 1.21.0 on an existing repo.\r\n\r\nWorkaround is to rename one of the branches.\r\n\r\nTypically having this type of different branch names only based on casing is not needed (imho it's a bug ;) ) - but we shouldn't have a 500 page when accessing the repo.\n\n### Gitea Version\n\n1.21.0\n\n### Can you reproduce the bug on the Gitea demo site?\n\nNo\n\n### Log Gist\n\n_No response_\n\n### Screenshots\n\n_No response_\n\n### Git Version\n\n_No response_\n\n### Operating System\n\nLinux\n\n### How are you running Gitea?\n\nOfficial binary\n\n### Database\n\nMySQL/MariaDB","closed_by":{"login":"lunny","id":81045,"node_id":"MDQ6VXNlcjgxMDQ1","avatar_url":"https://avatars.githubusercontent.com/u/81045?v=4","gravatar_id":"","url":"https://api.github.com/users/lunny","html_url":"https://github.com/lunny","followers_url":"https://api.github.com/users/lunny/followers","following_url":"https://api.github.com/users/lunny/following{/other_user}","gists_url":"https://api.github.com/users/lunny/gists{/gist_id}","starred_url":"https://api.github.com/users/lunny/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lunny/subscriptions","organizations_url":"https://api.github.com/users/lunny/orgs","repos_url":"https://api.github.com/users/lunny/repos","events_url":"https://api.github.com/users/lunny/events{/privacy}","received_events_url":"https://api.github.com/users/lunny/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/go-gitea/gitea/issues/28131/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/go-gitea/gitea/issues/28131/timeline","performed_via_github_app":null,"state_reason":"completed"}