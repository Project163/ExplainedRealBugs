{"url":"https://api.github.com/repos/go-gitea/gitea/issues/35803","repository_url":"https://api.github.com/repos/go-gitea/gitea","labels_url":"https://api.github.com/repos/go-gitea/gitea/issues/35803/labels{/name}","comments_url":"https://api.github.com/repos/go-gitea/gitea/issues/35803/comments","events_url":"https://api.github.com/repos/go-gitea/gitea/issues/35803/events","html_url":"https://github.com/go-gitea/gitea/issues/35803","id":3574250360,"node_id":"I_kwDOBFIx287VCrt4","number":35803,"title":"Incorrect viewed files counter in huge PRs","user":{"login":"didim99","id":24974834,"node_id":"MDQ6VXNlcjI0OTc0ODM0","avatar_url":"https://avatars.githubusercontent.com/u/24974834?v=4","gravatar_id":"","url":"https://api.github.com/users/didim99","html_url":"https://github.com/didim99","followers_url":"https://api.github.com/users/didim99/followers","following_url":"https://api.github.com/users/didim99/following{/other_user}","gists_url":"https://api.github.com/users/didim99/gists{/gist_id}","starred_url":"https://api.github.com/users/didim99/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/didim99/subscriptions","organizations_url":"https://api.github.com/users/didim99/orgs","repos_url":"https://api.github.com/users/didim99/repos","events_url":"https://api.github.com/users/didim99/events{/privacy}","received_events_url":"https://api.github.com/users/didim99/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":472744938,"node_id":"MDU6TGFiZWw0NzI3NDQ5Mzg=","url":"https://api.github.com/repos/go-gitea/gitea/labels/type/bug","name":"type/bug","color":"ee0701","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/go-gitea/gitea/milestones/188","html_url":"https://github.com/go-gitea/gitea/milestone/188","labels_url":"https://api.github.com/repos/go-gitea/gitea/milestones/188/labels","id":14004121,"node_id":"MI_kwDOBFIx284A1a-Z","number":188,"title":"1.25.1","description":"","creator":{"login":"lunny","id":81045,"node_id":"MDQ6VXNlcjgxMDQ1","avatar_url":"https://avatars.githubusercontent.com/u/81045?v=4","gravatar_id":"","url":"https://api.github.com/users/lunny","html_url":"https://github.com/lunny","followers_url":"https://api.github.com/users/lunny/followers","following_url":"https://api.github.com/users/lunny/following{/other_user}","gists_url":"https://api.github.com/users/lunny/gists{/gist_id}","starred_url":"https://api.github.com/users/lunny/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lunny/subscriptions","organizations_url":"https://api.github.com/users/lunny/orgs","repos_url":"https://api.github.com/users/lunny/repos","events_url":"https://api.github.com/users/lunny/events{/privacy}","received_events_url":"https://api.github.com/users/lunny/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":30,"state":"closed","created_at":"2025-10-29T16:20:15Z","updated_at":"2025-11-04T19:20:05Z","due_on":"2025-11-04T08:00:00Z","closed_at":"2025-11-04T19:20:05Z"},"comments":1,"created_at":"2025-10-31T10:04:48Z","updated_at":"2025-11-03T21:34:54Z","closed_at":"2025-11-03T21:34:53Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Description\n\nIf you have a huge PR that contains large number of files, more than default limit of review page (e.g. for projects based on Unity 3D game engine), file counter of viewed files on \"Files\" page shows incorrect value on page load. For example, if you have limit per page is 100 files and you marked 118 of 130 files from PR as viewed then reloaded code review page, the file counter tells you \"88/130\" instead of \"118/130\" because remaining 30 files is not loaded to page (you need to click \"load more\" button to see the actual number of files).\n\nThis behaviour is very confusing when you reviewing a huge PRs!\n\nSteps to reproduce:\n1. Login to demo.gitea.com\n2. Open this PR in my test repo: https://demo.gitea.com/didim99/test/pulls/4/files\n3. Click \"load more\" to see all files\n4. Mark some random files as viewed\n5. Reload page\n\n### Gitea Version\n\n1.26.0+dev-91-g39c08ce4c1\n\n### Can you reproduce the bug on the Gitea demo site?\n\nYes\n\n### Log Gist\n\n_No response_\n\n### Screenshots\n\nBefore \"load more\":\n<img width=\"1835\" height=\"389\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/94fa54be-94be-4bc8-b021-fb1700e48e30\" />\n\nAfter \"load more\":\n<img width=\"1838\" height=\"410\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/43ccfea1-7e23-4701-a758-730568fbe86f\" />\n\n### Git Version\n\nNot matters\n\n### Operating System\n\nNot matters\n\n### How are you running Gitea?\n\nUsing demo.gitea.com\n\n### Database\n\nNone","closed_by":{"login":"lunny","id":81045,"node_id":"MDQ6VXNlcjgxMDQ1","avatar_url":"https://avatars.githubusercontent.com/u/81045?v=4","gravatar_id":"","url":"https://api.github.com/users/lunny","html_url":"https://github.com/lunny","followers_url":"https://api.github.com/users/lunny/followers","following_url":"https://api.github.com/users/lunny/following{/other_user}","gists_url":"https://api.github.com/users/lunny/gists{/gist_id}","starred_url":"https://api.github.com/users/lunny/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lunny/subscriptions","organizations_url":"https://api.github.com/users/lunny/orgs","repos_url":"https://api.github.com/users/lunny/repos","events_url":"https://api.github.com/users/lunny/events{/privacy}","received_events_url":"https://api.github.com/users/lunny/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/go-gitea/gitea/issues/35803/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/go-gitea/gitea/issues/35803/timeline","performed_via_github_app":null,"state_reason":"completed"}