{"url":"https://api.github.com/repos/go-gitea/gitea/issues/34775","repository_url":"https://api.github.com/repos/go-gitea/gitea","labels_url":"https://api.github.com/repos/go-gitea/gitea/issues/34775/labels{/name}","comments_url":"https://api.github.com/repos/go-gitea/gitea/issues/34775/comments","events_url":"https://api.github.com/repos/go-gitea/gitea/issues/34775/events","html_url":"https://github.com/go-gitea/gitea/issues/34775","id":3158042428,"node_id":"I_kwDOBFIx2868O-c8","number":34775,"title":"Add support fullscreen for online 3D Viewer for CAD files preview","user":{"login":"gitlog","id":1937028,"node_id":"MDQ6VXNlcjE5MzcwMjg=","avatar_url":"https://avatars.githubusercontent.com/u/1937028?v=4","gravatar_id":"","url":"https://api.github.com/users/gitlog","html_url":"https://github.com/gitlog","followers_url":"https://api.github.com/users/gitlog/followers","following_url":"https://api.github.com/users/gitlog/following{/other_user}","gists_url":"https://api.github.com/users/gitlog/gists{/gist_id}","starred_url":"https://api.github.com/users/gitlog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gitlog/subscriptions","organizations_url":"https://api.github.com/users/gitlog/orgs","repos_url":"https://api.github.com/users/gitlog/repos","events_url":"https://api.github.com/users/gitlog/events{/privacy}","received_events_url":"https://api.github.com/users/gitlog/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":474393850,"node_id":"MDU6TGFiZWw0NzQzOTM4NTA=","url":"https://api.github.com/repos/go-gitea/gitea/labels/type/proposal","name":"type/proposal","color":"5319e7","default":false,"description":"The new feature has not been accepted yet but needs to be discussed first."}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2025-06-18T20:11:17Z","updated_at":"2025-09-28T12:24:21Z","closed_at":"2025-06-30T08:12:28Z","author_association":"NONE","type":null,"active_lock_reason":"resolved","sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Feature Description\n\nAdded support for full-screen viewing and fixed the script paths based on the settings.\n\n```html\n<script>\n  document.addEventListener('DOMContentLoaded', () => {\n    // Supported 3D file types\n    const fileTypes = ['3dm', '3ds', '3mf', 'amf', 'bim', 'brep', 'dae', 'fbx', 'fcstd', 'glb', 'gltf', 'ifc', 'igs', 'iges', 'stp', 'step', 'stl', 'obj', 'off', 'ply', 'wrl'];\n\n    // Select matching link\n    const links = Array.from(document.querySelectorAll('a.ui.mini.basic.button'));\n    const link3D = links.find(link => {\n      const href = link.href.toLowerCase();\n      return href.includes('/raw/') && fileTypes.some(ext => href.endsWith(`.${ext}`));\n    });\n\n    if (link3D) {\n      const script = document.createElement('script');\n      script.onload = () => {\n        const fileUrl = link3D.getAttribute('href');\n\n        // Prepare the container for the viewer\n        const fileView = document.querySelector('.file-view');\n        if (fileView) {\n          fileView.setAttribute('id', 'view-3d');\n          fileView.style.padding = '0';\n          fileView.style.margin = '0';\n          fileView.style.height = '400px';\n          fileView.style.width = '100%';\n          fileView.style.background = 'var(--color-box-body)';\n          fileView.innerHTML = '';\n        }\n\n        // Initialize viewer\n        const parentDiv = document.getElementById('view-3d');\n        if (parentDiv) {\n\n          const viewer = new OV.EmbeddedViewer(parentDiv, {\n            backgroundColor: new OV.RGBAColor(59, 68, 76, 0), // Transparent\n            defaultColor: new OV.RGBColor(65,131, 196),\n            edgeSettings: new OV.EdgeSettings(false, new OV.RGBColor(0, 0, 0), 1),\n          });\n\n          // fullscreen\n          const fullScreenHandler = function() {\n\n            if(document.fullscreenElement === fileView) {\n              document.exitFullscreen();\n            } else {\n              fileView.requestFullscreen = fileView.requestFullscreen || \n                  fileView.mozRequestFullScreen || \n                  fileView.webkitRequestFullscreen || \n                  fileView.msRequestFullscreen;\n              fileView.requestFullscreen();\n            }\n          }\n\n          buttonFullScreen = document.createElement('button');\n          buttonFullScreen.setAttribute('class', 'ui mini basic button');\n          buttonFullScreen.setAttribute('id', 'modelFullScreen');\n          buttonFullScreen.innerHTML = 'FullScreen'; // This replace icon\n          buttonFullScreen.addEventListener('click', function() {\n            fullScreenHandler();\n          });\n\n          const buttons = document.querySelector('.ui .buttons');\n          buttons.after(buttonFullScreen);\n\n          fileView.addEventListener('contextmenu', function() {\n            fullScreenHandler();\n          });\n\n          // Load the model\n          viewer.LoadModelFromUrlList([fileUrl]);\n        }\n      };\n\n      script.src = window.config.appSubUrl + '/assets/o3dv/o3dv.min.js';\n      document.head.appendChild(script);\n    }\n  });\n</script>\n```\n\nhttps://github.com/go-gitea/gitea/issues/34135\n\n### Screenshots\n\n_No response_","closed_by":{"login":"wxiaoguang","id":2114189,"node_id":"MDQ6VXNlcjIxMTQxODk=","avatar_url":"https://avatars.githubusercontent.com/u/2114189?v=4","gravatar_id":"","url":"https://api.github.com/users/wxiaoguang","html_url":"https://github.com/wxiaoguang","followers_url":"https://api.github.com/users/wxiaoguang/followers","following_url":"https://api.github.com/users/wxiaoguang/following{/other_user}","gists_url":"https://api.github.com/users/wxiaoguang/gists{/gist_id}","starred_url":"https://api.github.com/users/wxiaoguang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wxiaoguang/subscriptions","organizations_url":"https://api.github.com/users/wxiaoguang/orgs","repos_url":"https://api.github.com/users/wxiaoguang/repos","events_url":"https://api.github.com/users/wxiaoguang/events{/privacy}","received_events_url":"https://api.github.com/users/wxiaoguang/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/go-gitea/gitea/issues/34775/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/go-gitea/gitea/issues/34775/timeline","performed_via_github_app":null,"state_reason":"completed"}