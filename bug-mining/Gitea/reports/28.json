{"url":"https://api.github.com/repos/go-gitea/gitea/issues/25984","repository_url":"https://api.github.com/repos/go-gitea/gitea","labels_url":"https://api.github.com/repos/go-gitea/gitea/issues/25984/labels{/name}","comments_url":"https://api.github.com/repos/go-gitea/gitea/issues/25984/comments","events_url":"https://api.github.com/repos/go-gitea/gitea/issues/25984/events","html_url":"https://github.com/go-gitea/gitea/issues/25984","id":1811601710,"node_id":"I_kwDOBFIx285r-tku","number":25984,"title":"Storage in S3 buckets using minio not working in Gitea 1.20.0 with working config from Gitea 1.19.4","user":{"login":"tobiasbp","id":5671083,"node_id":"MDQ6VXNlcjU2NzEwODM=","avatar_url":"https://avatars.githubusercontent.com/u/5671083?v=4","gravatar_id":"","url":"https://api.github.com/users/tobiasbp","html_url":"https://github.com/tobiasbp","followers_url":"https://api.github.com/users/tobiasbp/followers","following_url":"https://api.github.com/users/tobiasbp/following{/other_user}","gists_url":"https://api.github.com/users/tobiasbp/gists{/gist_id}","starred_url":"https://api.github.com/users/tobiasbp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tobiasbp/subscriptions","organizations_url":"https://api.github.com/users/tobiasbp/orgs","repos_url":"https://api.github.com/users/tobiasbp/repos","events_url":"https://api.github.com/users/tobiasbp/events{/privacy}","received_events_url":"https://api.github.com/users/tobiasbp/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":472744938,"node_id":"MDU6TGFiZWw0NzI3NDQ5Mzg=","url":"https://api.github.com/repos/go-gitea/gitea/labels/type/bug","name":"type/bug","color":"ee0701","default":false,"description":""},{"id":474799156,"node_id":"MDU6TGFiZWw0NzQ3OTkxNTY=","url":"https://api.github.com/repos/go-gitea/gitea/labels/issue/critical","name":"issue/critical","color":"fbca04","default":false,"description":"This issue should be fixed ASAP. If it is a PR, the PR should be merged ASAP"}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2023-07-19T09:57:04Z","updated_at":"2023-09-27T00:01:33Z","closed_at":"2023-08-12T08:03:56Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":"resolved","sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Description\n\nStorage in s3 buckets (using minio) no longer works when using Gitea 1.20.0 with chart v9.0.0. Changing the Gitea version to 1.19.4 with chart v9.0.0 (same configuration) makes storage in s3 buckets work again as described in the issue here:  \r\nhttps://gitea.com/gitea/helm-chart/issues/469\r\n\r\nThe storage configuration is:\r\n```\r\n    storage:\r\n      MINIO_ACCESS_KEY_ID: ***\r\n      MINIO_BUCKET: my-existing-bucket\r\n      MINIO_ENDPOINT: storage.googleapis.com\r\n      MINIO_INSECURE_SKIP_VERIFY: false\r\n      MINIO_SECRET_ACCESS_KEY: ***\r\n      MINIO_USE_SSL: true\r\n      SERVE_DIRECT: false\r\n      STORAGE_TYPE: minio\r\n```\r\nWith the above storage config, Gitea 1.20.0 says:\r\n```\r\n2023/07/18 16:33:54 ...s/setting/session.go:74:loadSessionFrom() [I] Session Service Enabled\r\n2023/07/18 16:33:54 ...s/storage/storage.go:176:initAttachments() [I] Initialising Attachment storage with type: minio\r\n2023/07/18 16:33:54 ...les/storage/minio.go:81:NewMinioStorage() [I] Creating Minio storage at storage.googleapis.com:my-existing-bucket with base path attachments/\r\n2023/07/18 16:33:55 routers/init.go:60:mustInit() [F] code.gitea.io/gitea/modules/storage.Init failed: The requested bucket name is not available. The bucket namespace is shared by all users of the system. Please select a different name and try again\r\n```\r\n\r\nIs Gitea/minio trying to create the existing bucket?\n\n### Gitea Version\n\n1.20.0\n\n### Can you reproduce the bug on the Gitea demo site?\n\nNo\n\n### Log Gist\n\n_No response_\n\n### Screenshots\n\n_No response_\n\n### Git Version\n\n_No response_\n\n### Operating System\n\n_No response_\n\n### How are you running Gitea?\n\nIn Kubernetes with chart v9.0.0.\n\n### Database\n\nPostgreSQL","closed_by":{"login":"wxiaoguang","id":2114189,"node_id":"MDQ6VXNlcjIxMTQxODk=","avatar_url":"https://avatars.githubusercontent.com/u/2114189?v=4","gravatar_id":"","url":"https://api.github.com/users/wxiaoguang","html_url":"https://github.com/wxiaoguang","followers_url":"https://api.github.com/users/wxiaoguang/followers","following_url":"https://api.github.com/users/wxiaoguang/following{/other_user}","gists_url":"https://api.github.com/users/wxiaoguang/gists{/gist_id}","starred_url":"https://api.github.com/users/wxiaoguang/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wxiaoguang/subscriptions","organizations_url":"https://api.github.com/users/wxiaoguang/orgs","repos_url":"https://api.github.com/users/wxiaoguang/repos","events_url":"https://api.github.com/users/wxiaoguang/events{/privacy}","received_events_url":"https://api.github.com/users/wxiaoguang/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/go-gitea/gitea/issues/25984/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/go-gitea/gitea/issues/25984/timeline","performed_via_github_app":null,"state_reason":"completed"}