{"url":"https://api.github.com/repos/go-gitea/gitea/issues/33141","repository_url":"https://api.github.com/repos/go-gitea/gitea","labels_url":"https://api.github.com/repos/go-gitea/gitea/issues/33141/labels{/name}","comments_url":"https://api.github.com/repos/go-gitea/gitea/issues/33141/comments","events_url":"https://api.github.com/repos/go-gitea/gitea/issues/33141/events","html_url":"https://github.com/go-gitea/gitea/issues/33141","id":2773752861,"node_id":"I_kwDOBFIx286lVBwd","number":33141,"title":"Funky spaces in yaml syntax highlighting","user":{"login":"DrMaxNix","id":38893656,"node_id":"MDQ6VXNlcjM4ODkzNjU2","avatar_url":"https://avatars.githubusercontent.com/u/38893656?v=4","gravatar_id":"","url":"https://api.github.com/users/DrMaxNix","html_url":"https://github.com/DrMaxNix","followers_url":"https://api.github.com/users/DrMaxNix/followers","following_url":"https://api.github.com/users/DrMaxNix/following{/other_user}","gists_url":"https://api.github.com/users/DrMaxNix/gists{/gist_id}","starred_url":"https://api.github.com/users/DrMaxNix/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/DrMaxNix/subscriptions","organizations_url":"https://api.github.com/users/DrMaxNix/orgs","repos_url":"https://api.github.com/users/DrMaxNix/repos","events_url":"https://api.github.com/users/DrMaxNix/events{/privacy}","received_events_url":"https://api.github.com/users/DrMaxNix/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":472744938,"node_id":"MDU6TGFiZWw0NzI3NDQ5Mzg=","url":"https://api.github.com/repos/go-gitea/gitea/labels/type/bug","name":"type/bug","color":"ee0701","default":false,"description":""}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2025-01-07T21:17:18Z","updated_at":"2025-04-08T04:15:17Z","closed_at":"2025-01-08T03:44:34Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":"resolved","sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Description\r\nFor yaml files, the code viewer (yaml files as well as yaml code blocks in markdown) shows spaces at the end of the last line in multi-line values. These are NOT present in the source file, but for some reason they appear in the code viewer.\r\nSounds funny at first but becomes a hassle pretty quickly if you copy code from the browser window into your project. Now you have a lot of funky spaces that are REALLY there.\r\n\r\n### Reproduce\r\n1. In a (fresh) gitea repo, create a file `spaces-from-space.yaml` with following content:\r\n```yaml\r\ntest: |\r\n  multi\r\n  line\r\nbla: \"blub\"\r\n```\r\n2. Push the file to the repo\r\n3. In the Gitea UI, navigate to that file and click on the \"Raw\" button\r\n4. Now convince yourself one more time that there indeed is no space after the 3rd line\r\n5. Go back to the file view\r\n6. Select the 3rd code line with your mouse and see that there are spaces at the end of the line!\r\n\r\n### More proofs of concept\r\nAlso happens with markdown inline yaml: https://git.tjdev.de/DrMaxNix/snippets/src/branch/main/spaces-from-space.md\r\n\r\n### Gitea Version\r\nv1.22.6\r\n\r\n### Can you reproduce the bug on the Gitea demo site?\r\nNo (registration disabled lol)\r\n\r\n### Screenshots\r\n<img src=\"https://github.com/user-attachments/assets/3b0dee67-e245-4663-abd5-29f3f4272bbe\" />\r\n<img src=\"https://github.com/user-attachments/assets/623e1f8d-ed0f-4846-80c4-95629800eb7d\" />\r\n\r\n### How are you running Gitea?\r\nself built binary\r\n","closed_by":{"login":"lunny","id":81045,"node_id":"MDQ6VXNlcjgxMDQ1","avatar_url":"https://avatars.githubusercontent.com/u/81045?v=4","gravatar_id":"","url":"https://api.github.com/users/lunny","html_url":"https://github.com/lunny","followers_url":"https://api.github.com/users/lunny/followers","following_url":"https://api.github.com/users/lunny/following{/other_user}","gists_url":"https://api.github.com/users/lunny/gists{/gist_id}","starred_url":"https://api.github.com/users/lunny/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lunny/subscriptions","organizations_url":"https://api.github.com/users/lunny/orgs","repos_url":"https://api.github.com/users/lunny/repos","events_url":"https://api.github.com/users/lunny/events{/privacy}","received_events_url":"https://api.github.com/users/lunny/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/go-gitea/gitea/issues/33141/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/go-gitea/gitea/issues/33141/timeline","performed_via_github_app":null,"state_reason":"completed"}