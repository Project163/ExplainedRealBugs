{"url":"https://api.github.com/repos/go-gitea/gitea/issues/29879","repository_url":"https://api.github.com/repos/go-gitea/gitea","labels_url":"https://api.github.com/repos/go-gitea/gitea/issues/29879/labels{/name}","comments_url":"https://api.github.com/repos/go-gitea/gitea/issues/29879/comments","events_url":"https://api.github.com/repos/go-gitea/gitea/issues/29879/events","html_url":"https://github.com/go-gitea/gitea/issues/29879","id":2191537028,"node_id":"I_kwDOBFIx286CoDOE","number":29879,"title":"Gitea hides user email in PR API","user":{"login":"splitt3r","id":1869584,"node_id":"MDQ6VXNlcjE4Njk1ODQ=","avatar_url":"https://avatars.githubusercontent.com/u/1869584?v=4","gravatar_id":"","url":"https://api.github.com/users/splitt3r","html_url":"https://github.com/splitt3r","followers_url":"https://api.github.com/users/splitt3r/followers","following_url":"https://api.github.com/users/splitt3r/following{/other_user}","gists_url":"https://api.github.com/users/splitt3r/gists{/gist_id}","starred_url":"https://api.github.com/users/splitt3r/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/splitt3r/subscriptions","organizations_url":"https://api.github.com/users/splitt3r/orgs","repos_url":"https://api.github.com/users/splitt3r/repos","events_url":"https://api.github.com/users/splitt3r/events{/privacy}","received_events_url":"https://api.github.com/users/splitt3r/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":472744938,"node_id":"MDU6TGFiZWw0NzI3NDQ5Mzg=","url":"https://api.github.com/repos/go-gitea/gitea/labels/type/bug","name":"type/bug","color":"ee0701","default":false,"description":""},{"id":1112269304,"node_id":"MDU6TGFiZWwxMTEyMjY5MzA0","url":"https://api.github.com/repos/go-gitea/gitea/labels/issue/confirmed","name":"issue/confirmed","color":"8d9b12","default":false,"description":"Issue has been reviewed and confirmed to be present or accepted to be implemented"}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2024-03-18T08:31:50Z","updated_at":"2024-07-08T00:28:14Z","closed_at":"2024-04-08T21:26:42Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":"resolved","sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Description\r\n\r\nI think this issue is related to https://github.com/go-gitea/gitea/pull/27943. But that PR seems to only fix webhooks.\r\n\r\nI'm trying to get the user (creator / assignee) email(s) from the pull request api in Gitea. I noticed that the email adress in the `user` field is redacted even if it shouldn't be because its turned off. As you can see the email is replaced by username@hidden email. But e. g. the `base/owner` field has the normal email.\r\n\r\nI'm **not** calling the api anonymous.\r\n\r\n```json\r\n{\r\n  \"id\": 1,\r\n  \"url\": \"http://localhost:3000/root/test/pulls/1\",\r\n  \"number\": 1,\r\n  \"user\": {\r\n    \"id\": 1,\r\n    \"login\": \"root\",\r\n    \"login_name\": \"\",\r\n    \"full_name\": \"\",\r\n    \"email\": \"root@noreply.localhost\",\r\n    \"avatar_url\": \"https://secure.gravatar.com/avatar/b1a4b2518dbbdd47dd4a713d5cd1df94?d=identicon\",\r\n    \"language\": \"\",\r\n    \"is_admin\": false,\r\n    \"last_login\": \"0001-01-01T00:00:00Z\",\r\n    \"created\": \"2024-03-15T14:38:57Z\",\r\n    \"restricted\": false,\r\n    \"active\": false,\r\n    \"prohibit_login\": false,\r\n    \"location\": \"\",\r\n    \"website\": \"\",\r\n    \"description\": \"\",\r\n    \"visibility\": \"public\",\r\n    \"followers_count\": 0,\r\n    \"following_count\": 0,\r\n    \"starred_repos_count\": 0,\r\n    \"username\": \"root\"\r\n  },\r\n  \"title\": \"Update README.md\",\r\n  \"body\": \"\",\r\n  \"labels\": [],\r\n  \"milestone\": null,\r\n  \"assignee\": null,\r\n  \"assignees\": null,\r\n  \"requested_reviewers\": null,\r\n  \"state\": \"open\",\r\n  \"is_locked\": false,\r\n  \"comments\": 0,\r\n  \"html_url\": \"http://localhost:3000/root/test/pulls/1\",\r\n  \"diff_url\": \"http://localhost:3000/root/test/pulls/1.diff\",\r\n  \"patch_url\": \"http://localhost:3000/root/test/pulls/1.patch\",\r\n  \"mergeable\": true,\r\n  \"merged\": false,\r\n  \"merged_at\": null,\r\n  \"merge_commit_sha\": null,\r\n  \"merged_by\": null,\r\n  \"allow_maintainer_edit\": false,\r\n  \"base\": {\r\n    \"label\": \"main\",\r\n    \"ref\": \"main\",\r\n    \"sha\": \"10a867014fbd335a441cd435e1d7f3cca8bd32a7\",\r\n    \"repo_id\": 1,\r\n    \"repo\": {\r\n      \"id\": 1,\r\n      \"owner\": {\r\n        \"id\": 1,\r\n        \"login\": \"root\",\r\n        \"login_name\": \"\",\r\n        \"full_name\": \"\",\r\n        \"email\": \"root@localhost\",\r\n        \"avatar_url\": \"https://secure.gravatar.com/avatar/b1a4b2518dbbdd47dd4a713d5cd1df94?d=identicon\",\r\n        \"language\": \"\",\r\n        \"is_admin\": false,\r\n        \"last_login\": \"0001-01-01T00:00:00Z\",\r\n        \"created\": \"2024-03-15T14:38:57Z\",\r\n        \"restricted\": false,\r\n        \"active\": false,\r\n        \"prohibit_login\": false,\r\n        \"location\": \"\",\r\n        \"website\": \"\",\r\n        \"description\": \"\",\r\n        \"visibility\": \"public\",\r\n        \"followers_count\": 0,\r\n        \"following_count\": 0,\r\n        \"starred_repos_count\": 0,\r\n        \"username\": \"root\"\r\n      },\r\n      \"name\": \"test\",\r\n      \"full_name\": \"root/test\",\r\n      \"description\": \"\",\r\n      \"empty\": false,\r\n      \"private\": false,\r\n      \"fork\": false,\r\n      \"template\": false,\r\n      \"parent\": null,\r\n      \"mirror\": false,\r\n      \"size\": 21,\r\n      \"language\": \"\",\r\n      \"languages_url\": \"http://localhost:3000/api/v1/repos/root/test/languages\",\r\n      \"html_url\": \"http://localhost:3000/root/test\",\r\n      \"url\": \"http://localhost:3000/api/v1/repos/root/test\",\r\n      \"link\": \"\",\r\n      \"ssh_url\": \"git@localhost:root/test.git\",\r\n      \"clone_url\": \"http://localhost:3000/root/test.git\",\r\n      \"original_url\": \"\",\r\n      \"website\": \"\",\r\n      \"stars_count\": 0,\r\n      \"forks_count\": 0,\r\n      \"watchers_count\": 1,\r\n      \"open_issues_count\": 0,\r\n      \"open_pr_counter\": 1,\r\n      \"release_counter\": 0,\r\n      \"default_branch\": \"main\",\r\n      \"archived\": false,\r\n      \"created_at\": \"2024-03-15T14:39:22Z\",\r\n      \"updated_at\": \"2024-03-15T14:39:46Z\",\r\n      \"archived_at\": \"1970-01-01T00:00:00Z\",\r\n      \"permissions\": {\r\n        \"admin\": false,\r\n        \"push\": false,\r\n        \"pull\": true\r\n      },\r\n      \"has_issues\": true,\r\n      \"internal_tracker\": {\r\n        \"enable_time_tracker\": false,\r\n        \"allow_only_contributors_to_track_time\": true,\r\n        \"enable_issue_dependencies\": true\r\n      },\r\n      \"has_wiki\": true,\r\n      \"has_pull_requests\": true,\r\n      \"has_projects\": true,\r\n      \"has_releases\": true,\r\n      \"has_packages\": true,\r\n      \"has_actions\": false,\r\n      \"ignore_whitespace_conflicts\": false,\r\n      \"allow_merge_commits\": true,\r\n      \"allow_rebase\": true,\r\n      \"allow_rebase_explicit\": true,\r\n      \"allow_squash_merge\": true,\r\n      \"allow_rebase_update\": true,\r\n      \"default_delete_branch_after_merge\": false,\r\n      \"default_merge_style\": \"merge\",\r\n      \"default_allow_maintainer_edit\": false,\r\n      \"avatar_url\": \"\",\r\n      \"internal\": false,\r\n      \"mirror_interval\": \"\",\r\n      \"mirror_updated\": \"0001-01-01T00:00:00Z\",\r\n      \"repo_transfer\": null\r\n    }\r\n  },\r\n  \"head\": {\r\n    \"label\": \"root-patch-1\",\r\n    \"ref\": \"root-patch-1\",\r\n    \"sha\": \"d29708418b325e157dc2ef7ca61423ac7468dd87\",\r\n    \"repo_id\": 1,\r\n    \"repo\": {\r\n      \"id\": 1,\r\n      \"owner\": {\r\n        \"id\": 1,\r\n        \"login\": \"root\",\r\n        \"login_name\": \"\",\r\n        \"full_name\": \"\",\r\n        \"email\": \"root@localhost\",\r\n        \"avatar_url\": \"https://secure.gravatar.com/avatar/b1a4b2518dbbdd47dd4a713d5cd1df94?d=identicon\",\r\n        \"language\": \"\",\r\n        \"is_admin\": false,\r\n        \"last_login\": \"0001-01-01T00:00:00Z\",\r\n        \"created\": \"2024-03-15T14:38:57Z\",\r\n        \"restricted\": false,\r\n        \"active\": false,\r\n        \"prohibit_login\": false,\r\n        \"location\": \"\",\r\n        \"website\": \"\",\r\n        \"description\": \"\",\r\n        \"visibility\": \"public\",\r\n        \"followers_count\": 0,\r\n        \"following_count\": 0,\r\n        \"starred_repos_count\": 0,\r\n        \"username\": \"root\"\r\n      },\r\n      \"name\": \"test\",\r\n      \"full_name\": \"root/test\",\r\n      \"description\": \"\",\r\n      \"empty\": false,\r\n      \"private\": false,\r\n      \"fork\": false,\r\n      \"template\": false,\r\n      \"parent\": null,\r\n      \"mirror\": false,\r\n      \"size\": 21,\r\n      \"language\": \"\",\r\n      \"languages_url\": \"http://localhost:3000/api/v1/repos/root/test/languages\",\r\n      \"html_url\": \"http://localhost:3000/root/test\",\r\n      \"url\": \"http://localhost:3000/api/v1/repos/root/test\",\r\n      \"link\": \"\",\r\n      \"ssh_url\": \"git@localhost:root/test.git\",\r\n      \"clone_url\": \"http://localhost:3000/root/test.git\",\r\n      \"original_url\": \"\",\r\n      \"website\": \"\",\r\n      \"stars_count\": 0,\r\n      \"forks_count\": 0,\r\n      \"watchers_count\": 1,\r\n      \"open_issues_count\": 0,\r\n      \"open_pr_counter\": 1,\r\n      \"release_counter\": 0,\r\n      \"default_branch\": \"main\",\r\n      \"archived\": false,\r\n      \"created_at\": \"2024-03-15T14:39:22Z\",\r\n      \"updated_at\": \"2024-03-15T14:39:46Z\",\r\n      \"archived_at\": \"1970-01-01T00:00:00Z\",\r\n      \"permissions\": {\r\n        \"admin\": false,\r\n        \"push\": false,\r\n        \"pull\": true\r\n      },\r\n      \"has_issues\": true,\r\n      \"internal_tracker\": {\r\n        \"enable_time_tracker\": false,\r\n        \"allow_only_contributors_to_track_time\": true,\r\n        \"enable_issue_dependencies\": true\r\n      },\r\n      \"has_wiki\": true,\r\n      \"has_pull_requests\": true,\r\n      \"has_projects\": true,\r\n      \"has_releases\": true,\r\n      \"has_packages\": true,\r\n      \"has_actions\": false,\r\n      \"ignore_whitespace_conflicts\": false,\r\n      \"allow_merge_commits\": true,\r\n      \"allow_rebase\": true,\r\n      \"allow_rebase_explicit\": true,\r\n      \"allow_squash_merge\": true,\r\n      \"allow_rebase_update\": true,\r\n      \"default_delete_branch_after_merge\": false,\r\n      \"default_merge_style\": \"merge\",\r\n      \"default_allow_maintainer_edit\": false,\r\n      \"avatar_url\": \"\",\r\n      \"internal\": false,\r\n      \"mirror_interval\": \"\",\r\n      \"mirror_updated\": \"0001-01-01T00:00:00Z\",\r\n      \"repo_transfer\": null\r\n    }\r\n  },\r\n  \"merge_base\": \"10a867014fbd335a441cd435e1d7f3cca8bd32a7\",\r\n  \"due_date\": null,\r\n  \"created_at\": \"2024-03-15T14:39:51Z\",\r\n  \"updated_at\": \"2024-03-15T14:39:51Z\",\r\n  \"closed_at\": null,\r\n  \"pin_order\": 0\r\n}\r\n```\r\n\r\n### Gitea Version\r\n\r\nlatest\r\n\r\n### Can you reproduce the bug on the Gitea demo site?\r\n\r\nNo\r\n\r\n### Log Gist\r\n\r\n_No response_\r\n\r\n### Screenshots\r\n\r\nGlobal settings:\r\n![image](https://github.com/go-gitea/gitea/assets/1869584/cd733def-2fc2-41ad-a3b1-30581dec0b20)\r\nUser settings:\r\n![image](https://github.com/go-gitea/gitea/assets/1869584/af2f0d2a-de93-48b9-bc20-9e30807f0da1)\r\n\r\n\r\n### Git Version\r\n\r\n_No response_\r\n\r\n### Operating System\r\n\r\n_No response_\r\n\r\n### How are you running Gitea?\r\n\r\n```yaml\r\nversion: '3'\r\n\r\nservices:\r\n  gitea:\r\n    image: gitea/gitea\r\n    container_name: gitea\r\n    environment:\r\n      - USER_UID=1000\r\n      - USER_GID=1000\r\n      - GITEA__database__DB_TYPE=postgres\r\n      - GITEA__database__HOST=postgres:5432\r\n      - GITEA__database__NAME=gitea\r\n      - GITEA__database__USER=gitea\r\n      - GITEA__database__PASSWD=gitea\r\n      - GITEA__service__DEFAULT_KEEP_EMAIL_PRIVATE=false\r\n    restart: always\r\n    networks:\r\n      - gitea\r\n    volumes:\r\n      - gitea-data:/data\r\n      - /etc/timezone:/etc/timezone:ro\r\n      - /etc/localtime:/etc/localtime:ro\r\n    ports:\r\n      - \"3000:3000\"\r\n    depends_on:\r\n      - postgres\r\n\r\n  postgres:\r\n    image: postgres\r\n    container_name: postgres\r\n    restart: always\r\n    environment:\r\n      - POSTGRES_USER=gitea\r\n      - POSTGRES_PASSWORD=gitea\r\n      - POSTGRES_DB=gitea\r\n    networks:\r\n      - gitea\r\n    volumes:\r\n      - postgres-data:/var/lib/postgresql/data\r\n\r\nnetworks:\r\n  gitea:\r\n\r\nvolumes:\r\n  gitea-data:\r\n  postgres-data:\r\n```\r\n\r\n### Database\r\n\r\nPostgreSQL","closed_by":{"login":"silverwind","id":115237,"node_id":"MDQ6VXNlcjExNTIzNw==","avatar_url":"https://avatars.githubusercontent.com/u/115237?v=4","gravatar_id":"","url":"https://api.github.com/users/silverwind","html_url":"https://github.com/silverwind","followers_url":"https://api.github.com/users/silverwind/followers","following_url":"https://api.github.com/users/silverwind/following{/other_user}","gists_url":"https://api.github.com/users/silverwind/gists{/gist_id}","starred_url":"https://api.github.com/users/silverwind/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/silverwind/subscriptions","organizations_url":"https://api.github.com/users/silverwind/orgs","repos_url":"https://api.github.com/users/silverwind/repos","events_url":"https://api.github.com/users/silverwind/events{/privacy}","received_events_url":"https://api.github.com/users/silverwind/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/go-gitea/gitea/issues/29879/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/go-gitea/gitea/issues/29879/timeline","performed_via_github_app":null,"state_reason":"completed"}