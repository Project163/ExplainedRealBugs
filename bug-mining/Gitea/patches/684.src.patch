diff --git a/models/issues/comment.go b/models/issues/comment.go
index a366b7c6a9..3a4049700d 100644
--- a/models/issues/comment.go
+++ b/models/issues/comment.go
@@ -279,8 +279,8 @@ type Comment struct {
 	DependentIssue   *Issue `xorm:"-"`
 
 	CommitID        int64
-	Line            int64 // - previous line / + proposed line
-	TreePath        string
+	Line            int64         // - previous line / + proposed line
+	TreePath        string        `xorm:"VARCHAR(4000)"` // SQLServer only supports up to 4000
 	Content         string        `xorm:"LONGTEXT"`
 	ContentVersion  int           `xorm:"NOT NULL DEFAULT 0"`
 	RenderedContent template.HTML `xorm:"-"`
diff --git a/models/migrations/migrations.go b/models/migrations/migrations.go
index 88967a8b87..1b1558f39d 100644
--- a/models/migrations/migrations.go
+++ b/models/migrations/migrations.go
@@ -393,6 +393,7 @@ func prepareMigrationTasks() []*migration {
 
 		// Gitea 1.24.0 ends at database version 321
 		newMigration(321, "Use LONGTEXT for some columns and fix review_state.updated_files column", v1_25.UseLongTextInSomeColumnsAndFixBugs),
+		newMigration(322, "Extend comment tree_path length limit", v1_25.ExtendCommentTreePathLength),
 	}
 	return preparedMigrations
 }
diff --git a/models/migrations/v1_25/v322.go b/models/migrations/v1_25/v322.go
new file mode 100644
index 0000000000..32dae9945a
--- /dev/null
+++ b/models/migrations/v1_25/v322.go
@@ -0,0 +1,28 @@
+// Copyright 2025 The Gitea Authors. All rights reserved.
+// SPDX-License-Identifier: MIT
+
+package v1_25
+
+import (
+	"code.gitea.io/gitea/models/migrations/base"
+
+	"xorm.io/xorm"
+	"xorm.io/xorm/schemas"
+)
+
+func ExtendCommentTreePathLength(x *xorm.Engine) error {
+	dbType := x.Dialect().URI().DBType
+	if dbType == schemas.SQLITE { // For SQLITE, varchar or char will always be represented as TEXT
+		return nil
+	}
+
+	return base.ModifyColumn(x, "comment", &schemas.Column{
+		Name: "tree_path",
+		SQLType: schemas.SQLType{
+			Name: "VARCHAR",
+		},
+		Length:         4000,
+		Nullable:       true, // To keep compatible as nullable
+		DefaultIsEmpty: true,
+	})
+}
