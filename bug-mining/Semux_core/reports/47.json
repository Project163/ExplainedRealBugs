{"url":"https://api.github.com/repos/semuxproject/semux-core/issues/310","repository_url":"https://api.github.com/repos/semuxproject/semux-core","labels_url":"https://api.github.com/repos/semuxproject/semux-core/issues/310/labels{/name}","comments_url":"https://api.github.com/repos/semuxproject/semux-core/issues/310/comments","events_url":"https://api.github.com/repos/semuxproject/semux-core/issues/310/events","html_url":"https://github.com/semuxproject/semux-core/issues/310","id":860956599,"node_id":"MDU6SXNzdWU4NjA5NTY1OTk=","number":310,"title":"Why does Semux need the function PendingManager.processTransaction() ?","user":{"login":"VictorECDSA","id":26361852,"node_id":"MDQ6VXNlcjI2MzYxODUy","avatar_url":"https://avatars.githubusercontent.com/u/26361852?v=4","gravatar_id":"","url":"https://api.github.com/users/VictorECDSA","html_url":"https://github.com/VictorECDSA","followers_url":"https://api.github.com/users/VictorECDSA/followers","following_url":"https://api.github.com/users/VictorECDSA/following{/other_user}","gists_url":"https://api.github.com/users/VictorECDSA/gists{/gist_id}","starred_url":"https://api.github.com/users/VictorECDSA/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/VictorECDSA/subscriptions","organizations_url":"https://api.github.com/users/VictorECDSA/orgs","repos_url":"https://api.github.com/users/VictorECDSA/repos","events_url":"https://api.github.com/users/VictorECDSA/events{/privacy}","received_events_url":"https://api.github.com/users/VictorECDSA/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":960721469,"node_id":"MDU6TGFiZWw5NjA3MjE0Njk=","url":"https://api.github.com/repos/semuxproject/semux-core/labels/enhancement","name":"enhancement","color":"11c681","default":true,"description":"An enhancement to existing implementation"}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":12,"created_at":"2021-04-19T06:40:50Z","updated_at":"2021-05-07T06:34:26Z","closed_at":null,"author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Why does Semux need the function PendingManager.processTransaction() ?\r\n\r\nsrc/main/java/org/semux/core/PendingManager.java\r\n```\r\n    protected ProcessingResult processTransaction(Transaction tx, boolean isIncludedBefore, boolean isFromThisNode) {\r\n         ......\r\n    }\r\n```\r\n\r\nBecause of the BlockGasLimit, it is possible for a block to fail to package all transactions in a tx pool.\r\n\r\nEach time a block is added, let's assume that the block contains 300 transactions and the pool accumulates 1000 transactions due to receiving pressure.\r\n\r\nThe onBlockAdded() function triggers the 1000 transactions to be reexecuted, blocking block adding.\r\n\r\nIf the nodes are still receiving transactions at this point, the transactions will be packaged and consensused more slowly, and the tx pool will pile up transactions further, creating a vicious cycle.\r\n\r\n```\r\n    @Override\r\n    public synchronized void onBlockAdded(Block block) {\r\n            List<PendingTransaction> txs = reset();\r\n            for (PendingTransaction tx : txs) {\r\n                accepted += processTransaction(tx.transaction, true, false).accepted;\r\n            }\r\n    }\r\n```\r\n\r\nSo, what is the necessity of doing this?\r\n\r\nThx!","closed_by":{"login":"VictorECDSA","id":26361852,"node_id":"MDQ6VXNlcjI2MzYxODUy","avatar_url":"https://avatars.githubusercontent.com/u/26361852?v=4","gravatar_id":"","url":"https://api.github.com/users/VictorECDSA","html_url":"https://github.com/VictorECDSA","followers_url":"https://api.github.com/users/VictorECDSA/followers","following_url":"https://api.github.com/users/VictorECDSA/following{/other_user}","gists_url":"https://api.github.com/users/VictorECDSA/gists{/gist_id}","starred_url":"https://api.github.com/users/VictorECDSA/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/VictorECDSA/subscriptions","organizations_url":"https://api.github.com/users/VictorECDSA/orgs","repos_url":"https://api.github.com/users/VictorECDSA/repos","events_url":"https://api.github.com/users/VictorECDSA/events{/privacy}","received_events_url":"https://api.github.com/users/VictorECDSA/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/semuxproject/semux-core/issues/310/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/semuxproject/semux-core/issues/310/timeline","performed_via_github_app":null,"state_reason":null}