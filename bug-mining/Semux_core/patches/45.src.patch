diff --git a/src/main/java/org/semux/cli/OptionStart.java b/src/main/java/org/semux/cli/OptionStart.java
new file mode 100644
index 00000000..e24c7d71
--- /dev/null
+++ b/src/main/java/org/semux/cli/OptionStart.java
@@ -0,0 +1,97 @@
+/**
+ * Copyright (c) 2017 The Semux Developers
+ *
+ * Distributed under the MIT software license, see the accompanying file
+ * LICENSE or https://opensource.org/licenses/mit-license.php
+ */
+package org.semux.cli;
+
+import org.apache.commons.cli.Option;
+import org.apache.commons.cli.Options;
+import org.semux.config.AbstractConfig;
+import org.semux.config.Constants;
+import org.semux.config.DevNetConfig;
+import org.semux.config.MainNetConfig;
+import org.semux.config.TestNetConfig;
+
+public abstract class OptionStart {
+
+    protected static final String DEVNET = "devnet";
+
+    protected static final String TESTNET = "testnet";
+
+    protected static final String MAINNET = "mainnet";
+
+    private String network = MAINNET;
+    private Options options = new Options();
+
+    private int coinbase = 0;
+    private String password = null;
+
+    private String dataDir = Constants.DEFAULT_DATA_DIR;
+
+    protected void addOption(Option option) {
+        options.addOption(option);
+    }
+
+    /**
+     * Creates the correct Instance of an AbstractConfig Implementation depending on
+     * the CLI --network option given.<br />
+     * Defaults to MainNet.
+     * 
+     * @return AbstractConfigImplementation
+     */
+    public AbstractConfig getConfig() {
+        AbstractConfig config = null;
+        switch (getNetwork() != null ? getNetwork() : MAINNET) {
+        case TESTNET:
+            config = new TestNetConfig(getDataDir());
+            break;
+        case DEVNET:
+            config = new DevNetConfig(getDataDir());
+            break;
+        case MAINNET:
+        default:
+            config = new MainNetConfig(getDataDir());
+            break;
+        }
+        return config;
+    }
+
+    public String getNetwork() {
+        return network;
+    }
+
+    public void setNetwork(String network) {
+        this.network = network;
+    }
+
+    public Options getOptions() {
+        return options;
+    }
+
+    public int getCoinbase() {
+        return coinbase;
+    }
+
+    public void setCoinbase(int coinbase) {
+        this.coinbase = coinbase;
+    }
+
+    public String getPassword() {
+        return password;
+    }
+
+    public void setPassword(String password) {
+        this.password = password;
+    }
+
+    public String getDataDir() {
+        return dataDir;
+    }
+
+    public void setDataDir(String dataDir) {
+        this.dataDir = dataDir;
+    }
+
+}
diff --git a/src/main/java/org/semux/cli/SemuxCLI.java b/src/main/java/org/semux/cli/SemuxCLI.java
index 3e909eda..b2e9b000 100644
--- a/src/main/java/org/semux/cli/SemuxCLI.java
+++ b/src/main/java/org/semux/cli/SemuxCLI.java
@@ -15,15 +15,10 @@ import org.apache.commons.cli.CommandLineParser;
 import org.apache.commons.cli.DefaultParser;
 import org.apache.commons.cli.HelpFormatter;
 import org.apache.commons.cli.Option;
-import org.apache.commons.cli.Options;
 import org.apache.commons.cli.ParseException;
 import org.semux.Kernel;
-import org.semux.config.AbstractConfig;
 import org.semux.config.Config;
 import org.semux.config.Constants;
-import org.semux.config.DevNetConfig;
-import org.semux.config.MainNetConfig;
-import org.semux.config.TestNetConfig;
 import org.semux.core.Wallet;
 import org.semux.core.WalletLockedException;
 import org.semux.crypto.EdDSA;
@@ -34,101 +29,89 @@ import org.semux.util.SystemUtil;
 import org.slf4j.Logger;
 import org.slf4j.LoggerFactory;
 
-public class SemuxCLI {
-
-    private static final String DEVNET = "devnet";
-
-    private static final String TESTNET = "testnet";
-
-    private static final String MAINNET = "mainnet";
+public class SemuxCLI extends OptionStart {
 
     private static final Logger logger = LoggerFactory.getLogger(SemuxCLI.class);
 
-    private Options options = new Options();
-
-    private String dataDir = Constants.DEFAULT_DATA_DIR;
-    private int coinbase = 0;
-    private String password = null;
-    private String network = MAINNET;
+    public static void main(String[] args) {
+        try {
+            // TODO: use specified data directory
+            LoggerConfigurator.configure(new File(Constants.DEFAULT_DATA_DIR));
+            SemuxCLI cli = new SemuxCLI();
+            cli.start(args);
+        } catch (ParseException exception) {
+            logger.error(CLIMessages.get("ParsingFailed", exception.getMessage()));
+        }
+    }
 
-    SemuxCLI() {
+    public SemuxCLI() {
+        super();
         Option helpOption = Option.builder().longOpt(CLIOptions.HELP.toString()).desc(CLIMessages.get("PrintHelp"))
                 .build();
-        options.addOption(helpOption);
+        addOption(helpOption);
 
         Option versionOption = Option.builder().longOpt(CLIOptions.VERSION.toString())
                 .desc(CLIMessages.get("ShowVersion")).build();
-        options.addOption(versionOption);
+        addOption(versionOption);
 
         Option accountOption = Option.builder().longOpt(CLIOptions.ACCOUNT.toString())
                 .desc(CLIMessages.get("ChooseAction")).hasArg(true).numberOfArgs(1).optionalArg(false).argName("action")
                 .type(String.class).build();
-        options.addOption(accountOption);
+        addOption(accountOption);
 
         Option changePasswordOption = Option.builder().longOpt(CLIOptions.CHANGE_PASSWORD.toString())
                 .desc(CLIMessages.get("ChangeWalletPassword")).build();
-        options.addOption(changePasswordOption);
+        addOption(changePasswordOption);
 
         Option dataDirOption = Option.builder().longOpt(CLIOptions.DATA_DIR.toString())
                 .desc(CLIMessages.get("SpecifyDataDir")).hasArg(true).numberOfArgs(1).optionalArg(false).argName("path")
                 .type(String.class).build();
-        options.addOption(dataDirOption);
+        addOption(dataDirOption);
 
         Option coinbaseOption = Option.builder().longOpt(CLIOptions.COINBASE.toString())
                 .desc(CLIMessages.get("SpecifyCoinbase")).hasArg(true).numberOfArgs(1).optionalArg(false)
                 .argName("index").type(Number.class).build();
-        options.addOption(coinbaseOption);
+        addOption(coinbaseOption);
 
         Option networkOption = Option.builder().longOpt(CLIOptions.NETWORK.toString())
                 .desc(CLIMessages.get("SpecifyNetwork")).hasArg(true).numberOfArgs(1).optionalArg(false)
                 .argName("network").type(String.class).build();
-        options.addOption(networkOption);
+        addOption(networkOption);
 
         Option passwordOption = Option.builder().longOpt(CLIOptions.PASSWORD.toString())
                 .desc(CLIMessages.get("WalletPassword")).hasArg(true).numberOfArgs(1).optionalArg(false)
                 .argName(CLIOptions.PASSWORD.toString()).type(String.class).build();
-        options.addOption(passwordOption);
+        addOption(passwordOption);
 
         Option dumpPrivateKeyOption = Option.builder().longOpt(CLIOptions.DUMP_PRIVATE_KEY.toString())
                 .desc(CLIMessages.get("PrintHexKey")).hasArg(true).optionalArg(false).argName("address")
                 .type(String.class).build();
-        options.addOption(dumpPrivateKeyOption);
+        addOption(dumpPrivateKeyOption);
 
         Option importPrivateKeyOption = Option.builder().longOpt(CLIOptions.IMPORT_PRIVATE_KEY.toString())
                 .desc(CLIMessages.get("ImportHexKey")).hasArg(true).optionalArg(false).argName("key").type(String.class)
                 .build();
-        options.addOption(importPrivateKeyOption);
-    }
-
-    public static void main(String[] args) {
-        try {
-            // TODO: use specified data directory
-            LoggerConfigurator.configure(new File(Constants.DEFAULT_DATA_DIR));
-            SemuxCLI cli = new SemuxCLI();
-            cli.start(args);
-        } catch (ParseException exception) {
-            logger.error(CLIMessages.get("ParsingFailed", exception.getMessage()));
-        }
+        addOption(importPrivateKeyOption);
     }
 
     public void start(String[] args) throws ParseException {
         CommandLineParser parser = new DefaultParser();
-        CommandLine commandLine = parser.parse(options, args);
+        CommandLine commandLine = parser.parse(getOptions(), args);
 
         if (commandLine.hasOption(CLIOptions.DATA_DIR.toString())) {
-            dataDir = commandLine.getOptionValue(CLIOptions.DATA_DIR.toString());
+            setDataDir(commandLine.getOptionValue(CLIOptions.DATA_DIR.toString()));
         }
 
         if (commandLine.hasOption(CLIOptions.COINBASE.toString())) {
-            coinbase = ((Number) commandLine.getParsedOptionValue(CLIOptions.COINBASE.toString())).intValue();
+            setCoinbase(((Number) commandLine.getParsedOptionValue(CLIOptions.COINBASE.toString())).intValue());
         }
 
         if (commandLine.hasOption(CLIOptions.NETWORK.toString())) {
-            network = commandLine.getOptionValue(CLIOptions.NETWORK.toString());
+            setNetwork(commandLine.getOptionValue(CLIOptions.NETWORK.toString()));
         }
 
         if (commandLine.hasOption(CLIOptions.PASSWORD.toString())) {
-            password = commandLine.getOptionValue(CLIOptions.PASSWORD.toString());
+            setPassword(commandLine.getOptionValue(CLIOptions.PASSWORD.toString()));
         }
 
         if (commandLine.hasOption(CLIOptions.HELP.toString())) {
@@ -156,7 +139,7 @@ public class SemuxCLI {
     protected void printHelp() {
         HelpFormatter formatter = new HelpFormatter();
         formatter.setWidth(200);
-        formatter.printHelp("./semux-cli.sh [options]", options);
+        formatter.printHelp("./semux-cli.sh [options]", getOptions());
     }
 
     protected void printVersion() {
@@ -175,13 +158,13 @@ public class SemuxCLI {
             logger.info(CLIMessages.get("NewAccountCreatedForAddress", key.toAddressString()));
         }
 
-        if (coinbase < 0 || coinbase >= accounts.size()) {
+        if (getCoinbase() < 0 || getCoinbase() >= accounts.size()) {
             logger.error(CLIMessages.get("CoinbaseDoesNotExist"));
             SystemUtil.exit(-1);
         }
 
         // start kernel
-        startKernel(getConfig(), wallet, wallet.getAccount(coinbase));
+        startKernel(getConfig(), wallet, wallet.getAccount(getCoinbase()));
     }
 
     protected Kernel startKernel(Config config, Wallet wallet, EdDSA coinbase) {
@@ -282,12 +265,12 @@ public class SemuxCLI {
     }
 
     protected Wallet loadAndUnlockWallet() {
-        if (password == null) {
-            password = SystemUtil.readPassword();
+        if (getPassword() == null) {
+            setPassword(SystemUtil.readPassword());
         }
 
         Wallet wallet = loadWallet();
-        if (!wallet.unlock(password)) {
+        if (!wallet.unlock(getPassword())) {
             SystemUtil.exit(-1);
         }
 
@@ -295,25 +278,7 @@ public class SemuxCLI {
     }
 
     protected Wallet loadWallet() {
-        return new Wallet(new File(dataDir, "wallet.data"));
+        return new Wallet(new File(getDataDir(), "wallet.data"));
     }
 
-    /**
-     * Creates the correct Instance of an AbstractConfig Implementation depending on
-     * the CLI --network option given.<br />
-     * Defaults to MainNet.
-     * 
-     * @return AbstractConfigImplementation
-     */
-    protected AbstractConfig getConfig() {
-        switch (network) {
-        case TESTNET:
-            return new TestNetConfig(dataDir);
-        case DEVNET:
-            return new DevNetConfig(dataDir);
-        case MAINNET:
-        default:
-            return new MainNetConfig(dataDir);
-        }
-    }
 }
\ No newline at end of file
diff --git a/src/main/java/org/semux/gui/SemuxGUI.java b/src/main/java/org/semux/gui/SemuxGUI.java
index b48b8bad..ae3bc303 100644
--- a/src/main/java/org/semux/gui/SemuxGUI.java
+++ b/src/main/java/org/semux/gui/SemuxGUI.java
@@ -18,9 +18,15 @@ import javax.swing.JOptionPane;
 import javax.swing.UIManager;
 import javax.swing.UnsupportedLookAndFeelException;
 
+import org.apache.commons.cli.CommandLine;
+import org.apache.commons.cli.CommandLineParser;
+import org.apache.commons.cli.DefaultParser;
+import org.apache.commons.cli.Option;
+import org.apache.commons.cli.ParseException;
 import org.semux.Kernel;
+import org.semux.cli.CLIOptions;
+import org.semux.cli.OptionStart;
 import org.semux.config.Constants;
-import org.semux.config.MainNetConfig;
 import org.semux.core.AddressBook;
 import org.semux.core.Block;
 import org.semux.core.Blockchain;
@@ -38,6 +44,7 @@ import org.semux.gui.model.WalletAccount;
 import org.semux.gui.model.WalletDelegate;
 import org.semux.gui.model.WalletModel;
 import org.semux.log.LoggerConfigurator;
+import org.semux.message.CLIMessages;
 import org.semux.message.GUIMessages;
 import org.semux.net.Peer;
 import org.semux.util.DnsUtil;
@@ -48,14 +55,12 @@ import org.slf4j.LoggerFactory;
 /**
  * Graphic user interface.
  */
-public class SemuxGUI {
+public class SemuxGUI extends OptionStart {
 
     private static final Logger logger = LoggerFactory.getLogger(SemuxGUI.class);
 
     private static final int TRANSACTION_LIMIT = 1024; // per account
 
-    private String dataDir = Constants.DEFAULT_DATA_DIR;
-    private int coinbase = 0;
     private Wallet wallet;
 
     private WalletModel model;
@@ -63,6 +68,17 @@ public class SemuxGUI {
     private Kernel kernel;
 
     public SemuxGUI() {
+        super();
+        Option dataDirOption = Option.builder().longOpt(CLIOptions.DATA_DIR.toString())
+                .desc(CLIMessages.get("SpecifyDataDir")).hasArg(true).numberOfArgs(1).optionalArg(false).argName("path")
+                .type(String.class).build();
+        addOption(dataDirOption);
+
+        Option networkOption = Option.builder().longOpt(CLIOptions.NETWORK.toString())
+                .desc(CLIMessages.get("SpecifyNetwork")).hasArg(true).numberOfArgs(1).optionalArg(false)
+                .argName("network").type(String.class).build();
+        addOption(networkOption);
+
     }
 
     public SemuxGUI(WalletModel model, Kernel kernel) {
@@ -78,9 +94,25 @@ public class SemuxGUI {
         return model;
     }
 
-    public void start() {
-        wallet = new Wallet(new File(dataDir, "wallet.data"));
-        model = new WalletModel(new AddressBook(new File(dataDir, "addressbook.json")));
+    public void start(String[] args) throws ParseException {
+        CommandLineParser parser = new DefaultParser();
+        CommandLine commandLine = parser.parse(getOptions(), args);
+
+        if (commandLine.hasOption(CLIOptions.DATA_DIR.toString())) {
+            setDataDir(commandLine.getOptionValue(CLIOptions.DATA_DIR.toString()));
+        }
+
+        if (commandLine.hasOption(CLIOptions.NETWORK.toString())) {
+            setNetwork(commandLine.getOptionValue(CLIOptions.NETWORK.toString()));
+        }
+
+        start();
+
+    }
+
+    protected void start() {
+        wallet = new Wallet(new File(getDataDir(), "wallet.data"));
+        model = new WalletModel(new AddressBook(new File(getDataDir(), "addressbook.json")));
 
         if (!wallet.exists()) {
             showWelcome();
@@ -120,11 +152,11 @@ public class SemuxGUI {
             }
 
             SelectDialog dialog = new SelectDialog(null, message, options);
-            coinbase = dialog.getSelectedIndex();
-            if (coinbase == -1) {
+            setCoinbase(dialog.getSelectedIndex());
+            if (getCoinbase() == -1) {
                 SystemUtil.exitAsync(0);
             } else {
-                model.setCoinbase(coinbase);
+                model.setCoinbase(getCoinbase());
             }
         } else if (wallet.size() == 0) {
             wallet.addAccount(new EdDSA());
@@ -132,7 +164,7 @@ public class SemuxGUI {
         }
 
         // start kernel
-        kernel = new Kernel(new MainNetConfig(dataDir), wallet, wallet.getAccount(coinbase));
+        kernel = new Kernel(getConfig(), wallet, wallet.getAccount(getCoinbase()));
         kernel.start();
         onBlockAdded(kernel.getBlockchain().getLatestBlock());
 
@@ -249,8 +281,12 @@ public class SemuxGUI {
 
     public static void main(String[] args) {
         // TODO: use specified data directory
-        LoggerConfigurator.configure(new File(Constants.DEFAULT_DATA_DIR));
-        setupLookAndFeel();
-        new SemuxGUI().start();
+        try {
+            LoggerConfigurator.configure(new File(Constants.DEFAULT_DATA_DIR));
+            setupLookAndFeel();
+            new SemuxGUI().start(args);
+        } catch (ParseException exception) {
+            logger.error(CLIMessages.get("ParsingFailed", exception.getMessage()));
+        }
     }
 }
\ No newline at end of file
