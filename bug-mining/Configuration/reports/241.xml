<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:39:34 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CONFIGURATION-646] autoSave and manual save behave differently</title>
                <link>https://issues.apache.org/jira/browse/CONFIGURATION-646</link>
                <project id="12310467" key="CONFIGURATION">Commons Configuration</project>
                    <description>&lt;p&gt;Using &lt;tt&gt;builder.autoSave(true)&lt;/tt&gt; behaves differently than &lt;tt&gt;builder.save()&lt;/tt&gt; to the aspect that &lt;tt&gt;builder.autoSave(true)&lt;/tt&gt; doesn&apos;t write newly added properties to the assigned config file.&lt;/p&gt;

&lt;p&gt;I&apos;ve set up a minimal example using only two dependencies:&lt;br/&gt;
commons-beanutils:commons-beanutils:1.9.3 (runtime)&lt;br/&gt;
org.apache.commons:commons-configuration2:2.1.0 (compiletime)&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Main {
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;... args) {
        Parameters params = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Parameters();
        File propertiesFile = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File(&lt;span class=&quot;code-quote&quot;&gt;&quot;conf.properties&quot;&lt;/span&gt;);

        FileBasedConfigurationBuilder&amp;lt;PropertiesConfiguration&amp;gt; builder =
                &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileBasedConfigurationBuilder&amp;lt;&amp;gt;(PropertiesConfiguration.class)
                        .configure(params.fileBased().setFile(propertiesFile));
        builder.setAutoSave(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
            PropertiesConfiguration config = builder.getConfiguration();
            config.setProperty(&lt;span class=&quot;code-quote&quot;&gt;&quot;foo&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;bar&quot;&lt;/span&gt;);
            &lt;span class=&quot;code-comment&quot;&gt;// builder.save();
&lt;/span&gt;        } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (ConfigurationException e) {
            e.printStackTrace();
        }
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This is mainly like the example from the documentation for filebased configurations.&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;conf.properties&lt;/tt&gt; exists and is empty. With the &lt;tt&gt;builder.save&lt;/tt&gt; line commented out, the file remains empty. Uncommenting this line results in the expected behavior.&lt;/p&gt;

&lt;p&gt;I debugged a bit an saw that the property isn&apos;t added to the &lt;tt&gt;PropertiesConfigurationLayout&lt;/tt&gt; in the first case.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13028969">CONFIGURATION-646</key>
            <summary>autoSave and manual save behave differently</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="cmrudolph">Christian Rudolph</reporter>
                        <labels>
                    </labels>
                <created>Sun, 18 Dec 2016 14:37:45 +0000</created>
                <updated>Wed, 8 Feb 2017 19:27:22 +0000</updated>
                            <resolved>Thu, 22 Dec 2016 21:07:50 +0000</resolved>
                                    <version>2.1</version>
                                    <fixVersion>2.1.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15761765" author="oliver.heger@t-online.de" created="Mon, 19 Dec 2016 17:27:03 +0000"  >&lt;p&gt;Thanks for the report and the test case. I will have a look in a few days.&lt;/p&gt;</comment>
                            <comment id="15764098" author="rcpaul" created="Tue, 20 Dec 2016 12:31:09 +0000"  >&lt;p&gt;I&apos;ve just done some digging myself. The &lt;tt&gt;AutoSaveListener&lt;/tt&gt; is added when doing the &lt;tt&gt;setAutoSave(true)&lt;/tt&gt; and the &lt;tt&gt;PropertiesConfigurationLayout&lt;/tt&gt; when &lt;tt&gt;getConfiguration()&lt;/tt&gt; is executed. These listeners are called when a property changes but in the order they are added. A workaround is to enable auto save after getting the configuration.&lt;/p&gt;</comment>
                            <comment id="15771088" author="oliver.heger@t-online.de" created="Thu, 22 Dec 2016 21:07:51 +0000"  >&lt;p&gt;Your analysis was correct: the event listener for the auto-save mechanism was triggered before the layout object, so data was saved that had not yet been updated.&lt;/p&gt;

&lt;p&gt;The layout is normally registered as first event listener at the configuration; this is done when the configuration is created. However, on a load operation the layout used to unregister itself temporarily; this moved the listener registration at the end of the list.&lt;/p&gt;

&lt;p&gt;The fix changed this behavior: The listener is not unregistered, but temporarily disabled during a load operation.&lt;/p&gt;

&lt;p&gt;Fixed in SVN in revision 1775740.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 47 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i37qpr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>