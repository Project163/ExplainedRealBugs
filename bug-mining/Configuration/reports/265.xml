<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:39:54 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CONFIGURATION-687] Memory leak and related issues with CombinedConfigurationBuilder</title>
                <link>https://issues.apache.org/jira/browse/CONFIGURATION-687</link>
                <project id="12310467" key="CONFIGURATION">Commons Configuration</project>
                    <description>&lt;p&gt;In CombinedConfigurationBuilder, each call to resetResult() adds new builders to the list of child builders. Likewise, and likely for the same reason, for ReloadingCombinedConfigurationBuilder, the resetResult() call adds to the list of subcontrollers.&lt;/p&gt;

&lt;p&gt;When resetResult() is called because of an reload update, the next &lt;em&gt;n&lt;/em&gt; calls to getReloadingController().checkForReloading() will also initiate reloading,&#160; causing a reset and increasing the number of subcontrollers. So the first change causes 1 reload, the second change causes 2 reloads, and it doubles each time, so the 7th touch leads to 128 reloads!&lt;/p&gt;

&lt;p&gt;Functionally, there are no apparent symptoms until memory exhaustion and/or thrashing occur.&lt;/p&gt;

&lt;p&gt;This seems to be happen because CombinedConfigurationBuilder.initResultInstance rebuilds from the parameters without clearing all of the existing state, particularly &lt;em&gt;sourceData&lt;/em&gt;, so SourceData ends up adding the reconstructed builders on top of the existing ones. Correcting this could be as simple as cleaning up and clearing sourceData to force creation of new SourceData.&lt;/p&gt;

&lt;p&gt;Code in attached zip (maven project) demonstrates the issue.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13143664">CONFIGURATION-687</key>
            <summary>Memory leak and related issues with CombinedConfigurationBuilder</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="wlhamaty">Luke Hamaty</reporter>
                        <labels>
                    </labels>
                <created>Thu, 8 Mar 2018 19:54:53 +0000</created>
                <updated>Wed, 8 Aug 2018 20:28:48 +0000</updated>
                            <resolved>Thu, 10 May 2018 17:29:56 +0000</resolved>
                                    <version>2.2</version>
                                    <fixVersion>2.3</fixVersion>
                                    <component>File reloading</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16391859" author="garydgregory" created="Thu, 8 Mar 2018 20:06:14 +0000"  >&lt;p&gt;Thank you for your test case and analysis. This sounds nasty indeed. Would you be willing to provide a fix? You can use a PR on GitHub &lt;a href=&quot;https://github.com/apache/commons-configuration&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-configuration&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Gary&lt;/p&gt;
</comment>
                            <comment id="16391882" author="wlhamaty" created="Thu, 8 Mar 2018 20:31:08 +0000"  >&lt;p&gt;I&apos;ll consider it. Or maybe a patch. I am not sure when, and I might have to clear with management.&lt;/p&gt;</comment>
                            <comment id="16470791" author="oliver.heger@t-online.de" created="Thu, 10 May 2018 17:29:56 +0000"  >&lt;p&gt;This was indeed a major problem. Many thanks for spotting it.&lt;/p&gt;

&lt;p&gt;A fix was committed in SVN revision 1831360. The builders for child configurations are now created only once. The trouble with unnecessary reloading operations should be solved by this fix as well.&lt;/p&gt;

&lt;p&gt;Could you please double-check?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12913649" name="ReloadCombinedBug.zip" size="4949" author="wlhamaty" created="Thu, 8 Mar 2018 19:50:38 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 27 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3r2bj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>