<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:39:53 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CONFIGURATION-652] FileHandler does not  produce root node attributes for XMLConfiguration </title>
                <link>https://issues.apache.org/jira/browse/CONFIGURATION-652</link>
                <project id="12310467" key="CONFIGURATION">Commons Configuration</project>
                    <description>&lt;p&gt;I have a case where I need to take a Configuration file and write it as an XML document.  The document should have one or more xmlns properties on the root node but the xmlns attributes are not output.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Java 8  on Linux&lt;/p&gt;</environment>
        <key id="13041847">CONFIGURATION-652</key>
            <summary>FileHandler does not  produce root node attributes for XMLConfiguration </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="claude">Claude Warren</reporter>
                        <labels>
                            <label>namespace</label>
                            <label>xml</label>
                    </labels>
                <created>Thu, 9 Feb 2017 21:28:53 +0000</created>
                <updated>Wed, 8 Aug 2018 20:28:46 +0000</updated>
                            <resolved>Wed, 11 Apr 2018 15:45:54 +0000</resolved>
                                    <version>2.1.1</version>
                    <version>2.2</version>
                                    <fixVersion>2.3</fixVersion>
                                    <component>Interpolation</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15860233" author="claudenw" created="Thu, 9 Feb 2017 21:31:58 +0000"  >&lt;p&gt;Example source code&lt;/p&gt;

&lt;p&gt;Expected output is &lt;br/&gt;
&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&amp;gt;&lt;br/&gt;
&amp;lt;MyRootElement @xmlns:foo=&apos;http://example.com/foo&apos;&amp;gt;&lt;br/&gt;
&amp;lt;one&amp;gt;uno&amp;lt;/one&amp;gt;&lt;br/&gt;
&amp;lt;foo:two&amp;gt;dos&amp;lt;/foo:two&amp;gt;&lt;br/&gt;
&amp;lt;/MyRootElement&amp;gt;&lt;/p&gt;

&lt;p&gt;produced output is &lt;/p&gt;

&lt;p&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&amp;gt;&lt;br/&gt;
&amp;lt;MyRootElement&amp;gt;&lt;br/&gt;
&amp;lt;one&amp;gt;uno&amp;lt;/one&amp;gt;&lt;br/&gt;
&amp;lt;foo:two&amp;gt;dos&amp;lt;/foo:two&amp;gt;&lt;br/&gt;
&amp;lt;/MyRootElement&amp;gt;&lt;/p&gt;

&lt;p&gt;Note missing @xmlns&lt;/p&gt;</comment>
                            <comment id="15860984" author="britter" created="Fri, 10 Feb 2017 09:34:35 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=claude%40xenei.org&quot; class=&quot;user-hover&quot; rel=&quot;claude@xenei.org&quot;&gt;claude@xenei.org&lt;/a&gt; has this been working for you with the 2.1 release?&lt;/p&gt;</comment>
                            <comment id="15861005" author="claudenw" created="Fri, 10 Feb 2017 09:46:46 +0000"  >&lt;p&gt;I just tested with 2.1 and it does not work either.&lt;/p&gt;

&lt;p&gt;I saw that there is a test case for root properties, however, there is not a test case for root namespace properties and since the parser needs to use them perhaps they follow a different path through the code?&lt;/p&gt;</comment>
                            <comment id="15861046" author="britter" created="Fri, 10 Feb 2017 10:14:01 +0000"  >&lt;p&gt;Thank you for double checking! In this case this is at least no regression we introduced in 2.1.1. &lt;/p&gt;</comment>
                            <comment id="15861062" author="claudenw" created="Fri, 10 Feb 2017 10:33:06 +0000"  >&lt;p&gt;I&apos;m not certain it works in 1.x either, but I have not tested.&lt;/p&gt;</comment>
                            <comment id="15861109" author="claudenw" created="Fri, 10 Feb 2017 11:05:20 +0000"  >

&lt;p&gt;In XMLConfiguration class line 868 we find    &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; Document createDocument() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; ConfigurationException
        {
            ReferenceNodeHandler handler = getReferenceHandler();
            XMLDocumentHelper docHelper =
                    (XMLDocumentHelper) handler.getReference(handler.getRootNode());
            XMLDocumentHelper newHelper =
                    (docHelper == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) ? XMLDocumentHelper
                        .forNewDocument(getRootElementName()) : docHelper
                        .createCopy();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;XMLDocumentHelper.forNewDocument()&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; creates the new document for the root element.  However, the namespace attributes are attached to the &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;handler.getRootNode()&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;.  I think that the document builder needs the namespace defined before usage and so the namespace info should be made available in the &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;XMLDocumentHelper.forNewDocument()&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; method. &lt;/p&gt;

&lt;p&gt;Additionally the &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;forNewDocument()&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; method calls &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Element rootElem = doc.createElement(rootElementName)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; which does not create a namespace aware name.  To do that &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;doc.createElementNS()&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; method would need to be called.&lt;/p&gt;</comment>
                            <comment id="15862444" author="oliver.heger@t-online.de" created="Sat, 11 Feb 2017 16:33:04 +0000"  >&lt;p&gt;Support for namespaces has always been limited; so I assume this would no work in 1.x either.&lt;/p&gt;

&lt;p&gt;Thank you for your analysis. As you have already identified the problematic areas in the code, is there any chance you can come up with a patch (preferrable with a unit test)?&lt;/p&gt;</comment>
                            <comment id="15862514" author="claudenw" created="Sat, 11 Feb 2017 20:16:40 +0000"  >&lt;p&gt;I think the solution might be to check for root level namespaces and add&lt;br/&gt;
them to the xml tag (whatever that first line is before the root node, the&lt;br/&gt;
one that contains the schema definitions and such).  I think this would be&lt;br/&gt;
the approach since the root node namespaces should have the &lt;span class=&quot;error&quot;&gt;&amp;#91;@xmlns&amp;#93;&lt;/span&gt; tag on&lt;br/&gt;
the root node itself.&lt;/p&gt;

&lt;p&gt;Does this sound correct to you?&lt;/p&gt;

&lt;p&gt;On Sat, Feb 11, 2017 at 4:33 PM, Oliver Heger (JIRA) &amp;lt;jira@apache.org&amp;gt;&lt;/p&gt;




&lt;p&gt;&amp;#8211; &lt;br/&gt;
I like: Like Like - The likeliest place on the web&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://like-like.xenei.com&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://like-like.xenei.com&lt;/a&gt;&amp;gt;&lt;br/&gt;
LinkedIn: &lt;a href=&quot;http://www.linkedin.com/in/claudewarren&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.linkedin.com/in/claudewarren&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15862955" author="oliver.heger@t-online.de" created="Sun, 12 Feb 2017 20:30:29 +0000"  >&lt;p&gt;I must admit that I am not too deep in that namespace stuff. But if we have a corresponding test case with expected output (which can be verified using other XML processing tools), we should be able to figure out a solution, won&apos;t we?&lt;/p&gt;</comment>
                            <comment id="16432060" author="claudenw" created="Tue, 10 Apr 2018 10:59:13 +0000"  >&lt;p&gt;I have finally gotten back to this issue and think I have a solution.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;in org.apache.commons.configuration2.XMLConfiguration at line 1138 insert the line marked below.&lt;/p&gt;

&lt;p&gt;&#160;&#160;&#160;&#160;&#160;&#160;&#160; /**&lt;br/&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; * Processes the specified document, updates element values, and adds&lt;br/&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; * new nodes to the hierarchy.&lt;br/&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; *&lt;br/&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; * @param refHandler the {@code ReferenceNodeHandler}&lt;br/&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; */&lt;br/&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160; public void processDocument(ReferenceNodeHandler refHandler)&lt;br/&gt;
&#160;&#160;&#160;&#160;&#160;&#160;&#160; &lt;/p&gt;
{&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; &#160;
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; updateAttributes(refHandler.getRootNode(), document.getDocumentElement() ); // &amp;lt;-- insert this line
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; NodeTreeWalker.INSTANCE.walkDFS(refHandler.getRootNode(), this,
&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; refHandler);
&#160;&#160;&#160;&#160;&#160;&#160;&#160; }

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I can create a test for this as well. I assume that a patch containing both would be acceptable here?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16432274" author="claudenw" created="Tue, 10 Apr 2018 13:40:40 +0000"  >&lt;p&gt;Added patch file.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16432761" author="oliver.heger@t-online.de" created="Tue, 10 Apr 2018 18:47:13 +0000"  >&lt;p&gt;Many thanks for the patch! I applied it, but still get two failing test cases: &lt;em&gt;testLoadWithRootNamespace&lt;/em&gt;, and &lt;em&gt;testLoadChildNamespace&lt;/em&gt;. Could it be that the test configuration files &lt;em&gt;testRootNamespace.xml&lt;/em&gt; and &lt;em&gt;testChildNamespace.xml&lt;/em&gt; are missing from the patch?&lt;/p&gt;</comment>
                            <comment id="16433524" author="claudenw" created="Wed, 11 Apr 2018 07:44:17 +0000"  >&lt;p&gt;Arrrggg... yes, I managed to miss them.&#160; I have attached them to the Jira both go into the src/test/resources directory.&lt;/p&gt;</comment>
                            <comment id="16434089" author="oliver.heger@t-online.de" created="Wed, 11 Apr 2018 15:45:54 +0000"  >&lt;p&gt;Patch applied in SVN in revision 1828908. Many thanks again.&lt;/p&gt;

&lt;p&gt;If you want to be added to the contributors section in the pom, please send your personal data that should be included.&lt;/p&gt;</comment>
                            <comment id="16435110" author="claudenw" created="Thu, 12 Apr 2018 07:59:00 +0000"  >&lt;p&gt;Oliver,&lt;/p&gt;

&lt;p&gt;Thank you for the help.  Would you be so kind as too add the following to&lt;br/&gt;
the pom&lt;/p&gt;

&lt;p&gt;&amp;lt;developer&amp;gt;&amp;lt;name&amp;gt;Claude Warren&amp;lt;/name&amp;gt;&amp;lt;id&amp;gt;claudenw&amp;lt;/id&amp;gt;&amp;lt;email&amp;gt;&lt;br/&gt;
claude@apache.org&amp;lt;/email&amp;gt;timezone&amp;gt;0&amp;lt;/timezone&amp;gt;&amp;lt;roles&amp;gt;&amp;lt;role&amp;gt;Java&lt;br/&gt;
Developer&amp;lt;/role&amp;gt;&amp;lt;/roles&amp;gt;&amp;lt;/developer&amp;gt;&lt;/p&gt;

&lt;p&gt;thx&lt;br/&gt;
Claude&lt;/p&gt;

&lt;p&gt;On Wed, Apr 11, 2018 at 4:46 PM, Oliver Heger (JIRA) &amp;lt;jira@apache.org&amp;gt;&lt;/p&gt;




&lt;p&gt;&amp;#8211; &lt;br/&gt;
I like: Like Like - The likeliest place on the web&lt;br/&gt;
&amp;lt;&lt;a href=&quot;http://like-like.xenei.com&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://like-like.xenei.com&lt;/a&gt;&amp;gt;&lt;br/&gt;
LinkedIn: &lt;a href=&quot;http://www.linkedin.com/in/claudewarren&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.linkedin.com/in/claudewarren&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16435821" author="oliver.heger@t-online.de" created="Thu, 12 Apr 2018 15:53:43 +0000"  >&lt;p&gt;Done. Thanks again.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12851951" name="Test.java" size="944" author="claude" created="Thu, 9 Feb 2017 21:31:58 +0000"/>
                            <attachment id="12918386" name="configuration-652.patch" size="4437" author="claude" created="Tue, 10 Apr 2018 13:38:29 +0000"/>
                            <attachment id="12918523" name="testChildNamespace.xml" size="1928" author="claude" created="Wed, 11 Apr 2018 07:43:17 +0000"/>
                            <attachment id="12918524" name="testRootNamespace.xml" size="1880" author="claude" created="Wed, 11 Apr 2018 07:43:29 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 31 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i39ve7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>