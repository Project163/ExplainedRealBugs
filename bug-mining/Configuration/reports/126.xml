<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:37:59 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CONFIGURATION-441] CompositeConfiguration does not resolve referenced properties correctly</title>
                <link>https://issues.apache.org/jira/browse/CONFIGURATION-441</link>
                <project id="12310467" key="CONFIGURATION">Commons Configuration</project>
                    <description>&lt;p&gt;Imagine a composite configuration consisting of &lt;/p&gt;

&lt;p&gt;config_x : configuration one&lt;br/&gt;
property.one=one&lt;br/&gt;
property.two=two&lt;/p&gt;

&lt;p&gt;config_y : configuration two&lt;br/&gt;
property.one.ref=${property.one}&lt;/p&gt;

&lt;p&gt;When getProperty() is called on a CompositeConfiguration, property interpolation does not work if a property in config_x refers to a property in config_y, in the example, property.one.ref won&apos;t translate into &quot;one&quot;&lt;/p&gt;

&lt;p&gt;This seems to be caused by the getProperty() implementation of CompositeConfiguration&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;&quot;&gt;&lt;b&gt;CompositeConfiguration.getProperty(String)&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;/**
     * Read property from underlying composite
     *
     * @param key key to use &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; mapping
     *
     * @&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; object associated with the given configuration key.
     */
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; getProperty(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; key)
    {
        Configuration firstMatchingConfiguration = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
        &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (Iterator i = configList.iterator(); i.hasNext();)
        {
            Configuration config = (Configuration) i.next();
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (config.containsKey(key))
            {
                firstMatchingConfiguration = config;
                &lt;span class=&quot;code-keyword&quot;&gt;break&lt;/span&gt;;
            }
        }

        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (firstMatchingConfiguration != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)
        {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; firstMatchingConfiguration.getProperty(key);
        }
        &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt;
        {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
        }
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The methods finds the first configuration containing the key, and delegates the call to that particular configuration.&lt;/p&gt;

&lt;p&gt;A possible fix would be to try interpolation against every configuration until an interpolation succeed.&lt;/p&gt;</description>
                <environment>&lt;p&gt;all&lt;/p&gt;</environment>
        <key id="12502911">CONFIGURATION-441</key>
            <summary>CompositeConfiguration does not resolve referenced properties correctly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="6">Invalid</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="fabien_nisol">Fabien Nisol</reporter>
                        <labels>
                    </labels>
                <created>Wed, 30 Mar 2011 18:19:25 +0000</created>
                <updated>Thu, 8 Sep 2011 09:20:06 +0000</updated>
                            <resolved>Wed, 6 Apr 2011 10:14:44 +0000</resolved>
                                    <version>1.5</version>
                                    <fixVersion>1.7</fixVersion>
                                    <component>Interpolation</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13014142" author="fabien_nisol" created="Thu, 31 Mar 2011 18:59:46 +0000"  >&lt;p&gt;I think overriding the &lt;em&gt;interpolate(Object)&lt;/em&gt; and &lt;em&gt;getProperty(String key)&lt;/em&gt; on CompositeConfiguration like this should do the trick:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;/**
     * Read property from underlying composite
     *
     * @param key key to use &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; mapping
     *
     * @&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; object associated with the given configuration key.
     */
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; getProperty(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; key)
    {
        &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; value = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
        &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (Iterator i = configList.iterator(); i.hasNext();)
        {
            Configuration config = (Configuration) i.next();
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (config.containsKey(key))
            {
                value = config.getProperty(key); 
            }
        }
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(value==&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
        &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt;
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; interpolate(value);

    }

    ...

    /**
     * Read property from underlying composite
     *
     * @param key key to use &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; mapping
     *
     * @&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; object associated with the given configuration key.
     */
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; getProperty(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; key)
    {
        &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; value = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
        &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (Iterator i = configList.iterator(); i.hasNext();)
        {
            Configuration config = (Configuration) i.next();
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (config.containsKey(key))
            {
                value = config.getProperty(key); 
            }
        }
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(value==&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
        &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt;
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; interpolate(value);

    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13016328" author="oliver.heger@t-online.de" created="Wed, 6 Apr 2011 10:14:44 +0000"  >&lt;p&gt;The problem here is that you use getProperty() which does not support variable substitution (This is documented in the Configuration interface.). If you call getString() instead, the reference will be correctly resolved.&lt;/p&gt;

&lt;p&gt;To verify, I have added the following test case:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testInterpolationInMultipleConfigs()
    {
        Configuration c1 = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PropertiesConfiguration();
        c1.addProperty(&lt;span class=&quot;code-quote&quot;&gt;&quot;property.one&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;one&quot;&lt;/span&gt;);
        c1.addProperty(&lt;span class=&quot;code-quote&quot;&gt;&quot;property.two&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;two&quot;&lt;/span&gt;);
        Configuration c2 = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PropertiesConfiguration();
        c2.addProperty(&lt;span class=&quot;code-quote&quot;&gt;&quot;property.one.ref&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;${property.one}&quot;&lt;/span&gt;);
        cc.addConfiguration(c1);
        cc.addConfiguration(c2);
        assertEquals(&lt;span class=&quot;code-quote&quot;&gt;&quot;Wrong interpolated value&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;one&quot;&lt;/span&gt;,
                cc.getString(&lt;span class=&quot;code-quote&quot;&gt;&quot;property.one.ref&quot;&lt;/span&gt;));
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>61965</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 33 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0uqqf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>177472</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>