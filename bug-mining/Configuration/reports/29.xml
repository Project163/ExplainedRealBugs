<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:36:52 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CONFIGURATION-252] Detection of absolute fileNames when configuration sources are defined in a JAR file</title>
                <link>https://issues.apache.org/jira/browse/CONFIGURATION-252</link>
                <project id="12310467" key="CONFIGURATION">Commons Configuration</project>
                    <description>&lt;p&gt;When using several configuration sources, the sources are defined in a an xml attribute like &lt;br/&gt;
fileName=&quot;usergui.properties&quot;&lt;br/&gt;
The method org.apache.commons.configuration.ConfigurationUtils.getFile(String basePath, String fileName) converts the basePath and fileName into a File.&lt;br/&gt;
The JavaDoc says: &quot;The parameter strings can be relative files, absolute files and URLs as well.&quot;&lt;/p&gt;

&lt;p&gt;The file containing the definition of the configuration sources will become the basePath of this method.&lt;br/&gt;
After a log of debugging I found, that if the basePath start with &quot;jar:&quot; the method assumes that the fileName is relative, evene if it&apos;s absolute. This happens, because there&apos;s a ProtocolHandler for Jar files and &quot;jar:&quot; is a valid protocol. So the statement &quot;new URL(new URL(basePath), fileName)&quot; doesn&apos;t throw a MalformedUrlException.&lt;br/&gt;
Since the URL is valid, it&apos;s never checked, if the fileName may be absolute. &lt;/p&gt;

&lt;p&gt;Attention: this is only the case on Unix/Linux, since this is a valid URL&lt;br/&gt;
jar:&lt;a href=&quot;file:/C:/myjar.jar!/my-config.xml/someprops.properties&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:/C:/myjar.jar!/my-config.xml/someprops.properties&lt;/a&gt;&lt;br/&gt;
while under Windows, a MalformedUrlException will be thrown, when the fileName is absolute: &lt;br/&gt;
jar:&lt;a href=&quot;file:/C:/myjar.jar!/my-config.xml/c:/someprops.properties&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:/C:/myjar.jar!/my-config.xml/c:/someprops.properties&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I attached a patch that checks, whether the URL protocol is &quot;jar&quot; and the fileName is absolute. If so, the absolute file will be used.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Linux&lt;/p&gt;</environment>
        <key id="12361760">CONFIGURATION-252</key>
            <summary>Detection of absolute fileNames when configuration sources are defined in a JAR file</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="oheger">Oliver Heger</assignee>
                                    <reporter username="heiko.seebach">Heiko Seebach</reporter>
                        <labels>
                    </labels>
                <created>Thu, 1 Feb 2007 15:19:07 +0000</created>
                <updated>Sat, 22 Aug 2009 19:36:47 +0000</updated>
                            <resolved>Sat, 3 Feb 2007 16:20:50 +0000</resolved>
                                    <version>1.3</version>
                                    <fixVersion>1.4</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12469454" author="heiko.seebach" created="Thu, 1 Feb 2007 15:22:09 +0000"  >&lt;p&gt;Simply apply this patch on org.apache.commons.configuration.ConfigurationUtils&lt;/p&gt;</comment>
                            <comment id="12469731" author="oliver.heger@t-online.de" created="Fri, 2 Feb 2007 12:31:27 +0000"  >&lt;p&gt;Wouldn&apos;t it make sense if getFile() always checked whether the passed in fileName is an absolute file, no matter of the protocol? If this is the case, this file must be returned.&lt;/p&gt;</comment>
                            <comment id="12469791" author="heiko.seebach" created="Fri, 2 Feb 2007 16:35:01 +0000"  >&lt;p&gt;Well, how to determine if a file is absolute?&lt;br/&gt;
Since it even depends on the OS, it&apos;s not that easy.&lt;/p&gt;

&lt;p&gt;Scenario:&lt;br/&gt;
basePath=&lt;a href=&quot;http://aconfigserver/configSources/config.xml&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://aconfigserver/configSources/config.xml&lt;/a&gt;&lt;br/&gt;
and &lt;br/&gt;
fileName=/configSources/config.properties&lt;/p&gt;

&lt;p&gt;What could be the intention of it and what would others think, if they see it defined like that?&lt;/p&gt;

&lt;p&gt;The properties files could reside at&lt;br/&gt;
&lt;a href=&quot;http://aconfigserver/configSources/config.properties&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://aconfigserver/configSources/config.properties&lt;/a&gt;&lt;br/&gt;
or&lt;br/&gt;
&lt;a href=&quot;http://aconfigserver/configSources/configSources/config.properties&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://aconfigserver/configSources/configSources/config.properties&lt;/a&gt;&lt;br/&gt;
or&lt;br/&gt;
&lt;a href=&quot;file:///configSources/config.properties&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:///configSources/config.properties&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I think, a good definition of the meaning and interpretation of the fileName (regarding the &quot;File.isAbsolute()&quot; concern) would help.&lt;/p&gt;

&lt;p&gt;Maybe defining something simple like the definition before plus&lt;br/&gt;
&lt;del&gt;&amp;gt; If fileName starts with &quot;/&quot; it&apos;s always interpreted as absolute. &amp;lt;&lt;/del&gt;&lt;br/&gt;
would help?&lt;/p&gt;</comment>
                            <comment id="12469842" author="oliver.heger@t-online.de" created="Fri, 2 Feb 2007 19:38:20 +0000"  >&lt;p&gt;So, would it be okay to always check for an absolute file name first (by using File.isAbsolute()) and pointing this out in the Javadoc of getFile()?&lt;/p&gt;</comment>
                            <comment id="12469899" author="heiko.seebach" created="Fri, 2 Feb 2007 22:53:03 +0000"  >&lt;p&gt;Yes, I think that&apos;s fine. Maybe the JavaDoc could remind the the user that &lt;br/&gt;
new File(&quot;/file.properties&quot;).isAbsolute() is false under Windows but true under Unix....&lt;/p&gt;</comment>
                            <comment id="12469958" author="oliver.heger@t-online.de" created="Sat, 3 Feb 2007 16:20:50 +0000"  >&lt;p&gt;The getFile() method now checks first whether an absolute file name is passed in. A note about the behavior of File.isAbsolute() on Windows and Unix was also added to the Javadocs.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12350143" name="support-for-jar-protocol.patch.txt" size="787" author="heiko.seebach" created="Thu, 1 Feb 2007 15:22:09 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>110799</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 years, 43 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0uot3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>177160</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>