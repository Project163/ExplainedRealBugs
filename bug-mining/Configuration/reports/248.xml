<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:39:40 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CONFIGURATION-653] ConfigurationUtils.dump and other methods should use ImmutableConfiguration</title>
                <link>https://issues.apache.org/jira/browse/CONFIGURATION-653</link>
                <project id="12310467" key="CONFIGURATION">Commons Configuration</project>
                    <description>&lt;p&gt;Since the read-only ImmutableConfiguration/ImmutableHierarchicalConfiguration has been introduced, several methods that uses Configuration in a read-only fashion should be adapted to use these ones instead of the read/write alternative.&lt;/p&gt;

&lt;p&gt;For example :&lt;br/&gt;
ConfigurationUtils.dump&lt;br/&gt;
ConfigurationUtils.toString&lt;br/&gt;
ConfigurationUtils.copy (for the source)&lt;br/&gt;
ConfigurationUtils.append (for the source)&lt;br/&gt;
ConfigurationUtils.convertToHierarchical&lt;br/&gt;
ConfigurationConverter.getProperties&lt;br/&gt;
... and maybe others&lt;/p&gt;

&lt;p&gt;It should not break any existing code as Configuration implements ImmutableConfiguration and it could enable code that manipulates read only configurations to use these utilities&lt;/p&gt;</description>
                <environment></environment>
        <key id="13047648">CONFIGURATION-653</key>
            <summary>ConfigurationUtils.dump and other methods should use ImmutableConfiguration</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="vmaurin_glispa">Vincent Maurin</reporter>
                        <labels>
                    </labels>
                <created>Thu, 2 Mar 2017 11:00:35 +0000</created>
                <updated>Thu, 12 Oct 2017 20:23:42 +0000</updated>
                            <resolved>Tue, 7 Mar 2017 21:07:25 +0000</resolved>
                                    <version>2.1</version>
                    <version>2.1.1</version>
                                    <fixVersion>2.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15892898" author="oliver.heger@t-online.de" created="Thu, 2 Mar 2017 20:15:04 +0000"  >&lt;p&gt;Good point. Those methods have been missed when doing the rework of the API.&lt;/p&gt;

&lt;p&gt;Any chance that you can provide a patch?&lt;/p&gt;</comment>
                            <comment id="15893885" author="vmaurin_glispa" created="Fri, 3 Mar 2017 08:02:49 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=oliver.heger%40t-online.de&quot; class=&quot;user-hover&quot; rel=&quot;oliver.heger@t-online.de&quot;&gt;oliver.heger@t-online.de&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I have tried to find and replace all the relevant usages in the project for the patch, but my knowledge of the API is limited. Hope it will help&lt;/p&gt;</comment>
                            <comment id="15895709" author="oliver.heger@t-online.de" created="Sat, 4 Mar 2017 14:59:26 +0000"  >&lt;p&gt;I had a look at the patch and did some experiments; but unfortunately, it cannot be applied like this because it breaks binary compatibility. Client code would have to be recompiled, otherwise NoSuchMethodErrors would be thrown. This is not an option for a minor release in Commons.&lt;/p&gt;

&lt;p&gt;What we could do instead is leaving the existing methods in place and add overloaded variants that operate on &lt;tt&gt;ImmutableConfiguration&lt;/tt&gt;. The older methods then just delegate to the new ones. This would add the desired functionality, but preserves compatibility. WDYT?&lt;/p&gt;</comment>
                            <comment id="15897538" author="vmaurin_glispa" created="Mon, 6 Mar 2017 15:55:11 +0000"  >&lt;p&gt;It could work, but the old ones will probably need to explicit cast the parameter to avoid self calling themselves, example :&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; toString(ImmutableConfiguration configuration)
    {
        StringWriter writer = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; StringWriter();
        dump(configuration, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; PrintWriter(writer));
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; writer.toString();
    }

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; toString(Configuration configuration)
    {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; toString((ImmutableConfiguration) configuration);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Maybe an open question then is the Javadoc. Should we mark old ones as deprecated with a link to the new ones ? Or just having the same javadoc on both methods ?&lt;/p&gt;</comment>
                            <comment id="15897675" author="oliver.heger@t-online.de" created="Mon, 6 Mar 2017 17:17:52 +0000"  >&lt;p&gt;Yes, the casts will be necessary. Regarding deprecation: This is a good question. My gut feeling is that it is not necessary to deprecate the old versions because client code does not actually have to do anything (the call does not need to be changed when the methods are dropped in a major release). Thus, the Javadoc could stay as is, but maybe a comment could be added that &quot;this version of the method exists only for reasons of backwards compatibility&quot; or something like this.&lt;/p&gt;</comment>
                            <comment id="15898934" author="vmaurin_glispa" created="Tue, 7 Mar 2017 08:19:12 +0000"  >&lt;p&gt;I have attached a new patch : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;a comment is added on the old method (expect for two that were already &quot;might be deprecated&quot;)&lt;/li&gt;
	&lt;li&gt;I have reverted change on HierarchicalConfigurationConverter. It has a protected method and I don&apos;t see an easy way to preserve the compatibility here&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15900160" author="oliver.heger@t-online.de" created="Tue, 7 Mar 2017 21:07:25 +0000"  >&lt;p&gt;Patch applied with minor changes in revision 1785888. Many thanks!&lt;/p&gt;

&lt;p&gt;If you want to be added to the contributors section in the pom, just post the data you want to have in there.&lt;/p&gt;</comment>
                            <comment id="15900856" author="vmaurin_glispa" created="Wed, 8 Mar 2017 07:40:48 +0000"  >&lt;p&gt;Thank you Oliver&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;contributor&amp;gt;&lt;/span&gt;
          &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;name&amp;gt;&lt;/span&gt;Vincent Maurin&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/name&amp;gt;&lt;/span&gt;
          &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;email&amp;gt;&lt;/span&gt;vincent.maurin.fr@gmail.com&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/email&amp;gt;&lt;/span&gt;
          &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;organization&amp;gt;&lt;/span&gt;glispa GmbH&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/organization&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/contributor&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15901932" author="oliver.heger@t-online.de" created="Wed, 8 Mar 2017 20:35:22 +0000"  >&lt;p&gt;Added. Thanks again.&lt;/p&gt;</comment>
                            <comment id="16202564" author="oliver.heger@t-online.de" created="Thu, 12 Oct 2017 20:23:42 +0000"  >&lt;p&gt;Closed after release 2.2 is out.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12856454" name="two_versions.diff" size="12627" author="vmaurin_glispa" created="Tue, 7 Mar 2017 08:17:05 +0000"/>
                            <attachment id="12855800" name="use_immutable.diff" size="8835" author="vmaurin_glispa" created="Fri, 3 Mar 2017 08:01:54 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 5 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3auj3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>