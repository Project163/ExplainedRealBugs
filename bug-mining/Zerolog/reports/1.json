{"url":"https://api.github.com/repos/rs/zerolog/issues/34","repository_url":"https://api.github.com/repos/rs/zerolog","labels_url":"https://api.github.com/repos/rs/zerolog/issues/34/labels{/name}","comments_url":"https://api.github.com/repos/rs/zerolog/issues/34/comments","events_url":"https://api.github.com/repos/rs/zerolog/issues/34/events","html_url":"https://github.com/rs/zerolog/issues/34","id":295031538,"node_id":"MDU6SXNzdWUyOTUwMzE1Mzg=","number":34,"title":"How to add log caller info in a fixed position for pretty logging style","user":{"login":"lday0321","id":3905322,"node_id":"MDQ6VXNlcjM5MDUzMjI=","avatar_url":"https://avatars.githubusercontent.com/u/3905322?v=4","gravatar_id":"","url":"https://api.github.com/users/lday0321","html_url":"https://github.com/lday0321","followers_url":"https://api.github.com/users/lday0321/followers","following_url":"https://api.github.com/users/lday0321/following{/other_user}","gists_url":"https://api.github.com/users/lday0321/gists{/gist_id}","starred_url":"https://api.github.com/users/lday0321/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lday0321/subscriptions","organizations_url":"https://api.github.com/users/lday0321/orgs","repos_url":"https://api.github.com/users/lday0321/repos","events_url":"https://api.github.com/users/lday0321/events{/privacy}","received_events_url":"https://api.github.com/users/lday0321/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2018-02-07T07:21:01Z","updated_at":"2018-02-08T00:55:05Z","closed_at":"2018-02-07T21:56:00Z","author_association":"NONE","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"i'm try to output log with pretty logging style:\r\n```golang\r\nlogger := zerolog.New(os.Stdout).With().Timestamp().Logger().Output(zerolog.ConsoleWriter{Out: os.Stdout})\r\n\r\nlogger.Info().Str(\"foo\", \"bar\").Msg(\"Hello world\")\r\n```\r\nand the output will be pretty good as:\r\n```\r\n2018-02-07T15:09:21+08:00 |INFO| Hello world foo=bar\r\n```\r\n\r\nis it possible to add caller info, such as file name, line no info at a fixed position , such as:\r\n```\r\n2018-02-07T15:09:21+08:00 |INFO|main.go|74| Hello world foo=bar\r\n```\r\n\r\ni try to add hook for logger to parse the caller info:\r\n```golang\r\nfunc (h CallerHook) Run(e *zerolog.Event, level zerolog.Level, msg string) {\r\n\tif _, file, line, ok := runtime.Caller(3); ok {\r\n\t\te.Str(\"file\", path.Base(file)).Int(\"line\", line)\r\n\t}\r\n}\r\n\r\nlogger := zerolog.New(os.Stdout).With().Timestamp().Logger().Hook(CallerHook{}).Output(zerolog.ConsoleWriter{Out: os.Stdout})\r\n```\r\nobviously, the file/line info are output as normal fields, such as:\r\n```\r\n2018-02-07T15:16:35+08:00 |INFO| Hello world file=man.go foo=bar func=main line=74\r\n```\r\n","closed_by":{"login":"rs","id":68232,"node_id":"MDQ6VXNlcjY4MjMy","avatar_url":"https://avatars.githubusercontent.com/u/68232?v=4","gravatar_id":"","url":"https://api.github.com/users/rs","html_url":"https://github.com/rs","followers_url":"https://api.github.com/users/rs/followers","following_url":"https://api.github.com/users/rs/following{/other_user}","gists_url":"https://api.github.com/users/rs/gists{/gist_id}","starred_url":"https://api.github.com/users/rs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rs/subscriptions","organizations_url":"https://api.github.com/users/rs/orgs","repos_url":"https://api.github.com/users/rs/repos","events_url":"https://api.github.com/users/rs/events{/privacy}","received_events_url":"https://api.github.com/users/rs/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/rs/zerolog/issues/34/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rs/zerolog/issues/34/timeline","performed_via_github_app":null,"state_reason":"completed"}