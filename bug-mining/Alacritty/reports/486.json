{"url":"https://api.github.com/repos/alacritty/alacritty/issues/6324","repository_url":"https://api.github.com/repos/alacritty/alacritty","labels_url":"https://api.github.com/repos/alacritty/alacritty/issues/6324/labels{/name}","comments_url":"https://api.github.com/repos/alacritty/alacritty/issues/6324/comments","events_url":"https://api.github.com/repos/alacritty/alacritty/issues/6324/events","html_url":"https://github.com/alacritty/alacritty/issues/6324","id":1369526212,"node_id":"I_kwDOAxkop85RoU_E","number":6324,"title":"wayland: infinite looped wayland event when there is preedit. ","user":{"login":"wengxt","id":259684,"node_id":"MDQ6VXNlcjI1OTY4NA==","avatar_url":"https://avatars.githubusercontent.com/u/259684?v=4","gravatar_id":"","url":"https://api.github.com/users/wengxt","html_url":"https://github.com/wengxt","followers_url":"https://api.github.com/users/wengxt/followers","following_url":"https://api.github.com/users/wengxt/following{/other_user}","gists_url":"https://api.github.com/users/wengxt/gists{/gist_id}","starred_url":"https://api.github.com/users/wengxt/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wengxt/subscriptions","organizations_url":"https://api.github.com/users/wengxt/orgs","repos_url":"https://api.github.com/users/wengxt/repos","events_url":"https://api.github.com/users/wengxt/events{/privacy}","received_events_url":"https://api.github.com/users/wengxt/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"kchibisov","id":27620401,"node_id":"MDQ6VXNlcjI3NjIwNDAx","avatar_url":"https://avatars.githubusercontent.com/u/27620401?v=4","gravatar_id":"","url":"https://api.github.com/users/kchibisov","html_url":"https://github.com/kchibisov","followers_url":"https://api.github.com/users/kchibisov/followers","following_url":"https://api.github.com/users/kchibisov/following{/other_user}","gists_url":"https://api.github.com/users/kchibisov/gists{/gist_id}","starred_url":"https://api.github.com/users/kchibisov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kchibisov/subscriptions","organizations_url":"https://api.github.com/users/kchibisov/orgs","repos_url":"https://api.github.com/users/kchibisov/repos","events_url":"https://api.github.com/users/kchibisov/events{/privacy}","received_events_url":"https://api.github.com/users/kchibisov/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"kchibisov","id":27620401,"node_id":"MDQ6VXNlcjI3NjIwNDAx","avatar_url":"https://avatars.githubusercontent.com/u/27620401?v=4","gravatar_id":"","url":"https://api.github.com/users/kchibisov","html_url":"https://github.com/kchibisov","followers_url":"https://api.github.com/users/kchibisov/followers","following_url":"https://api.github.com/users/kchibisov/following{/other_user}","gists_url":"https://api.github.com/users/kchibisov/gists{/gist_id}","starred_url":"https://api.github.com/users/kchibisov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kchibisov/subscriptions","organizations_url":"https://api.github.com/users/kchibisov/orgs","repos_url":"https://api.github.com/users/kchibisov/repos","events_url":"https://api.github.com/users/kchibisov/events{/privacy}","received_events_url":"https://api.github.com/users/kchibisov/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":2,"created_at":"2022-09-12T09:02:23Z","updated_at":"2022-09-15T20:51:07Z","closed_at":"2022-09-15T20:51:07Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"For bug reports, the following information can help speed up the process. Please\r\ndescribe the bug that you have found and what you would expect to happen\r\ninstead.\r\n\r\n### System\r\n\r\nOS: Linux/\r\nVersion: alacritty 0.11.0-dev (4ddb6085)\r\nLinux: gnome-shell 42.4 or kwin 5.25.2\r\n\r\n### Logs\r\n\r\nKeyboard and bindings: `alacritty --print-events`\r\n\r\n```\r\n[19.788318955s] [INFO ] [alacritty] glutin event: WindowEvent { window_id: WindowId(WindowId(94200065231328)), event: Ime(Preedit(\"a\", Some((1, 1)))) }\r\n[19.788341585s] [INFO ] [alacritty] glutin event: MainEventsCleared\r\n[19.788357372s] [INFO ] [alacritty] glutin event: RedrawEventsCleared\r\n[19.795016302s] [INFO ] [alacritty] glutin event: NewEvents(WaitCancelled { start: Instant { tv_sec: 405877, tv_nsec: 914197581 }, requested_resume: None })\r\n[19.795067850s] [INFO ] [alacritty] glutin event: MainEventsCleared\r\n[19.795095837s] [INFO ] [alacritty] glutin event: RedrawEventsCleared\r\n[19.795574273s] [INFO ] [alacritty] glutin event: NewEvents(WaitCancelled { start: Instant { tv_sec: 405877, tv_nsec: 914756663 }, requested_resume: None })\r\n[19.795612119s] [INFO ] [alacritty] glutin event: MainEventsCleared\r\n[19.795634409s] [INFO ] [alacritty] glutin event: RedrawEventsCleared\r\n[19.795827677s] [INFO ] [alacritty] glutin event: NewEvents(WaitCancelled { start: Instant { tv_sec: 405877, tv_nsec: 915008990 }, requested_resume: None })\r\n[19.795880187s] [INFO ] [alacritty] glutin event: MainEventsCleared\r\n[19.795901767s] [INFO ] [alacritty] glutin event: RedrawEventsCleared\r\n[19.796084578s] [INFO ] [alacritty] glutin event: NewEvents(WaitCancelled { start: Instant { tv_sec: 405877, tv_nsec: 915266130 }, requested_resume: None })\r\n[19.796134061s] [INFO ] [alacritty] glutin event: WindowEvent { window_id: WindowId(WindowId(94200065231328)), event: Ime(Preedit(\"a\", Some((1, 1)))) }\r\n[19.796159686s] [INFO ] [alacritty] glutin event: MainEventsCleared\r\n[19.796177311s] [INFO ] [alacritty] glutin event: RedrawEventsCleared\r\n[19.801629264s] [INFO ] [alacritty] glutin event: NewEvents(WaitCancelled { start: Instant { tv_sec: 405877, tv_nsec: 920810041 }, requested_resume: None })\r\n[19.801690115s] [INFO ] [alacritty] glutin event: MainEventsCleared\r\n[19.801713874s] [INFO ] [alacritty] glutin event: RedrawEventsCleared\r\n[19.802253769s] [INFO ] [alacritty] glutin event: NewEvents(WaitCancelled { start: Instant { tv_sec: 405877, tv_nsec: 921435691 }, requested_resume: None })\r\n[19.802295835s] [INFO ] [alacritty] glutin event: MainEventsCleared\r\n[19.802322297s] [INFO ] [alacritty] glutin event: RedrawEventsCleared\r\n[19.802507925s] [INFO ] [alacritty] glutin event: NewEvents(WaitCancelled { start: Instant { tv_sec: 405877, tv_nsec: 921689101 }, requested_resume: None })\r\n[19.802571941s] [INFO ] [alacritty] glutin event: MainEventsCleared\r\n[19.802597440s] [INFO ] [alacritty] glutin event: RedrawEventsCleared\r\n[19.802773862s] [INFO ] [alacritty] glutin event: NewEvents(WaitCancelled { start: Instant { tv_sec: 405877, tv_nsec: 921956171 }, requested_resume: None })\r\n[19.802822770s] [INFO ] [alacritty] glutin event: WindowEvent { window_id: WindowId(WindowId(94200065231328)), event: Ime(Preedit(\"a\", Some((1, 1)))) }\r\n[19.802861294s] [INFO ] [alacritty] glutin event: MainEventsCleared\r\n[19.802884728s] [INFO ] [alacritty] glutin event: RedrawEventsCleared\r\n[19.807943830s] [INFO ] [alacritty] glutin event: NewEvents(WaitCancelled { start: Instant { tv_sec: 405877, tv_nsec: 927125441 }, requested_resume: None })\r\n[19.807988429s] [INFO ] [alacritty] glutin event: MainEventsCleared\r\n[19.808013589s] [INFO ] [alacritty] glutin event: RedrawEventsCleared\r\n[19.808531219s] [INFO ] [alacritty] glutin event: NewEvents(WaitCancelled { start: Instant { tv_sec: 405877, tv_nsec: 927713589 }, requested_resume: None })\r\n[19.808571895s] [INFO ] [alacritty] glutin event: MainEventsCleared\r\n[19.808598893s] [INFO ] [alacritty] glutin event: RedrawEventsCleared\r\n[19.808787815s] [INFO ] [alacritty] glutin event: NewEvents(WaitCancelled { start: Instant { tv_sec: 405877, tv_nsec: 927969132 }, requested_resume: None })\r\n[19.808850030s] [INFO ] [alacritty] glutin event: MainEventsCleared\r\n[19.808878532s] [INFO ] [alacritty] glutin event: RedrawEventsCleared\r\n[19.809009786s] [INFO ] [alacritty] glutin event: NewEvents(WaitCancelled { start: Instant { tv_sec: 405877, tv_nsec: 928191372 }, requested_resume: None })\r\n[19.809059652s] [INFO ] [alacritty] glutin event: WindowEvent { window_id: WindowId(WindowId(94200065231328)), event: Ime(Preedit(\"a\", Some((1, 1)))) }\r\n[19.809094317s] [INFO ] [alacritty] glutin event: MainEventsCleared\r\n[19.809117733s] [INFO ] [alacritty] glutin event: RedrawEventsCleared\r\n[19.814945378s] [INFO ] [alacritty] glutin event: NewEvents(WaitCancelled { start: Instant { tv_sec: 405877, tv_nsec: 934126898 }, requested_resume: None })\r\n[19.814998533s] [INFO ] [alacritty] glutin event: MainEventsCleared\r\n[19.815028982s] [INFO ] [alacritty] glutin event: RedrawEventsCleared\r\n[19.815577616s] [INFO ] [alacritty] glutin event: NewEvents(WaitCancelled { start: Instant { tv_sec: 405877, tv_nsec: 934760035 }, requested_resume: None })\r\n[19.815621402s] [INFO ] [alacritty] glutin event: MainEventsCleared\r\n[19.815649650s] [INFO ] [alacritty] glutin event: RedrawEventsCleared\r\n[19.815828163s] [INFO ] [alacritty] glutin event: NewEvents(WaitCancelled { start: Instant { tv_sec: 405877, tv_nsec: 935009422 }, requested_resume: None })\r\n[19.815889175s] [INFO ] [alacritty] glutin event: MainEventsCleared\r\n[19.815916166s] [INFO ] [alacritty] glutin event: RedrawEventsCleared\r\n[19.816121187s] [INFO ] [alacritty] glutin event: NewEvents(WaitCancelled { start: Instant { tv_sec: 405877, tv_nsec: 935302767 }, requested_resume: None })\r\n[19.816176383s] [INFO ] [alacritty] glutin event: WindowEvent { window_id: WindowId(WindowId(94200065231328)), event: Ime(Preedit(\"a\", Some((1, 1)))) }\r\n[19.816207699s] [INFO ] [alacritty] glutin event: MainEventsCleared\r\n[19.816229434s] [INFO ] [alacritty] glutin event: RedrawEventsCleared\r\n[19.853685355s] [INFO ] [alacritty] glutin event: NewEvents(WaitCancelled { start: Instant { tv_sec: 405877, tv_nsec: 972866933 }, requested_resume: None })\r\n[19.853719954s] [INFO ] [alacritty] glutin event: MainEventsCleared\r\n[19.853731306s] [INFO ] [alacritty] glutin event: RedrawEventsCleared\r\n[19.854017597s] [INFO ] [alacritty] glutin event: NewEvents(WaitCancelled { start: Instant { tv_sec: 405877, tv_nsec: 973200540 }, requested_resume: None })\r\n[19.854036727s] [INFO ] [alacritty] glutin event: MainEventsCleared\r\n[19.854049489s] [INFO ] [alacritty] glutin event: RedrawEventsCleared\r\n[19.863874621s] [INFO ] [alacritty] glutin event: NewEvents(WaitCancelled { start: Instant { tv_sec: 405877, tv_nsec: 983056929 }, requested_resume: None })\r\n[19.863906536s] [INFO ] [alacritty] glutin event: WindowEvent { window_id: WindowId(WindowId(94200065231328)), event: Ime(Preedit(\"a\", Some((1, 1)))) }\r\n[19.863920170s] [INFO ] [alacritty] glutin event: MainEventsCleared\r\n[19.863927929s] [INFO ] [alacritty] glutin event: RedrawEventsCleared\r\n[19.865344774s] [INFO ] [alacritty] glutin event: NewEvents(WaitCancelled { start: Instant { tv_sec: 405877, tv_nsec: 984527620 }, requested_resume: None })\r\n[19.865358889s] [INFO ] [alacritty] glutin event: MainEventsCleared\r\n[19.865366112s] [INFO ] [alacritty] glutin event: RedrawEventsCleared\r\n[19.865599283s] [INFO ] [alacritty] glutin event: NewEvents(WaitCancelled { start: Instant { tv_sec: 405877, tv_nsec: 984782342 }, requested_resume: None })\r\n[19.865612413s] [INFO ] [alacritty] glutin event: MainEventsCleared\r\n[19.865621009s] [INFO ] [alacritty] glutin event: RedrawEventsCleared\r\n[19.865780679s] [INFO ] [alacritty] glutin event: NewEvents(WaitCancelled { start: Instant { tv_sec: 405877, tv_nsec: 984963643 }, requested_resume: None })\r\n[19.865796809s] [INFO ] [alacritty] glutin event: WindowEvent { window_id: WindowId(WindowId(94200065231328)), event: Ime(Preedit(\"a\", Some((1, 1)))) }\r\n[19.865808054s] [INFO ] [alacritty] glutin event: MainEventsCleared\r\n[19.865814230s] [INFO ] [alacritty] glutin event: RedrawEventsCleared\r\n[19.875700213s] [INFO ] [alacritty] glutin event: NewEvents(WaitCancelled { start: Instant { tv_sec: 405877, tv_nsec: 994882061 }, requested_resume: None })\r\n```\r\n\r\nWAYLAND_DEBUG=1 log\r\n\r\n```\r\n[ 335698.121]  -> zwp_text_input_v3@16.set_cursor_rectangle(90, 41, 0, 0)\r\n[ 335698.135]  -> zwp_text_input_v3@16.commit()\r\n[ 335698.790] zwp_text_input_v3@16.preedit_string(\"a\", 1, 1)\r\n[ 335698.805] zwp_text_input_v3@16.done(282)\r\n[ 335705.023]  -> zwp_text_input_v3@16.set_cursor_rectangle(90, 41, 0, 0)\r\n[ 335705.036]  -> zwp_text_input_v3@16.commit()\r\n[ 335705.717] zwp_text_input_v3@16.preedit_string(\"a\", 1, 1)\r\n[ 335705.733] zwp_text_input_v3@16.done(283)\r\n[ 335712.117]  -> zwp_text_input_v3@16.set_cursor_rectangle(90, 41, 0, 0)\r\n[ 335712.144]  -> zwp_text_input_v3@16.commit()\r\n[ 335712.791] zwp_text_input_v3@16.preedit_string(\"a\", 1, 1)\r\n[ 335712.807] zwp_text_input_v3@16.done(284)\r\n[ 335719.012]  -> zwp_text_input_v3@16.set_cursor_rectangle(90, 41, 0, 0)\r\n[ 335719.036]  -> zwp_text_input_v3@16.commit()\r\n[ 335719.672] zwp_text_input_v3@16.preedit_string(\"a\", 1, 1)\r\n[ 335719.688] zwp_text_input_v3@16.done(285)\r\n[ 335726.318]  -> zwp_text_input_v3@16.set_cursor_rectangle(90, 41, 0, 0)\r\n[ 335726.330]  -> zwp_text_input_v3@16.commit()\r\n[ 335726.970] zwp_text_input_v3@16.preedit_string(\"a\", 1, 1)\r\n[ 335726.985] zwp_text_input_v3@16.done(286)\r\n[ 335733.091]  -> zwp_text_input_v3@16.set_cursor_rectangle(90, 41, 0, 0)\r\n[ 335733.103]  -> zwp_text_input_v3@16.commit()\r\n[ 335733.749] zwp_text_input_v3@16.preedit_string(\"a\", 1, 1)\r\n[ 335733.763] zwp_text_input_v3@16.done(287)\r\n[ 335740.036]  -> zwp_text_input_v3@16.set_cursor_rectangle(90, 41, 0, 0)\r\n[ 335740.048]  -> zwp_text_input_v3@16.commit()\r\n[ 335740.711] zwp_text_input_v3@16.preedit_string(\"a\", 1, 1)\r\n[ 335740.725] zwp_text_input_v3@16.done(288)\r\n[ 335746.688]  -> zwp_text_input_v3@16.set_cursor_rectangle(90, 41, 0, 0)\r\n[ 335746.703]  -> zwp_text_input_v3@16.commit()\r\n[ 335747.395] zwp_text_input_v3@16.preedit_string(\"a\", 1, 1)\r\n[ 335747.410] zwp_text_input_v3@16.done(289)\r\n[ 335753.843]  -> zwp_text_input_v3@16.set_cursor_rectangle(90, 41, 0, 0)\r\n[ 335753.855]  -> zwp_text_input_v3@16.commit()\r\n[ 335754.487] zwp_text_input_v3@16.preedit_string(\"a\", 1, 1)\r\n[ 335754.502] zwp_text_input_v3@16.done(290)\r\n[ 335760.751]  -> zwp_text_input_v3@16.set_cursor_rectangle(90, 41, 0, 0)\r\n[ 335760.764]  -> zwp_text_input_v3@16.commit()\r\n[ 335761.390] zwp_text_input_v3@16.preedit_string(\"a\", 1, 1)\r\n[ 335761.405] zwp_text_input_v3@16.done(291)\r\n[ 335767.780]  -> zwp_text_input_v3@16.set_cursor_rectangle(90, 41, 0, 0)\r\n[ 335767.793]  -> zwp_text_input_v3@16.commit()\r\n[ 335768.421] zwp_text_input_v3@16.preedit_string(\"a\", 1, 1)\r\n[ 335768.436] zwp_text_input_v3@16.done(292)\r\n[ 335774.605]  -> zwp_text_input_v3@16.set_cursor_rectangle(90, 41, 0, 0)\r\n[ 335774.618]  -> zwp_text_input_v3@16.commit()\r\n[ 335775.245] zwp_text_input_v3@16.preedit_string(\"a\", 1, 1)\r\n[ 335775.260] zwp_text_input_v3@16.done(293)\r\n[ 335781.452]  -> zwp_text_input_v3@16.set_cursor_rectangle(90, 41, 0, 0)\r\n[ 335781.464]  -> zwp_text_input_v3@16.commit()\r\n[ 335782.111] zwp_text_input_v3@16.preedit_string(\"a\", 1, 1)\r\n[ 335782.126] zwp_text_input_v3@16.done(294)\r\n[ 335788.363]  -> zwp_text_input_v3@16.set_cursor_rectangle(90, 41, 0, 0)\r\n[ 335788.375]  -> zwp_text_input_v3@16.commit()\r\n[ 335789.021] zwp_text_input_v3@16.preedit_string(\"a\", 1, 1)\r\n[ 335789.036] zwp_text_input_v3@16.done(295)\r\n[ 335795.321]  -> zwp_text_input_v3@16.set_cursor_rectangle(90, 41, 0, 0)\r\n[ 335795.333]  -> zwp_text_input_v3@16.commit()\r\n[ 335795.982] zwp_text_input_v3@16.preedit_string(\"a\", 1, 1)\r\n[ 335795.997] zwp_text_input_v3@16.done(296)\r\n[ 335802.356]  -> zwp_text_input_v3@16.set_cursor_rectangle(90, 41, 0, 0)\r\n[ 335802.368]  -> zwp_text_input_v3@16.commit()\r\n[ 335803.010] zwp_text_input_v3@16.preedit_string(\"a\", 1, 1)\r\n[ 335803.025] zwp_text_input_v3@16.done(297)\r\n[ 335809.076]  -> zwp_text_input_v3@16.set_cursor_rectangle(90, 41, 0, 0)\r\n[ 335809.089]  -> zwp_text_input_v3@16.commit()\r\n[ 335809.724] zwp_text_input_v3@16.preedit_string(\"a\", 1, 1)\r\n[ 335809.738] zwp_text_input_v3@16.done(298)\r\n[ 335816.218]  -> zwp_text_input_v3@16.set_cursor_rectangle(90, 41, 0, 0)\r\n[ 335816.230]  -> zwp_text_input_v3@16.commit()\r\n[ 335816.865] zwp_text_input_v3@16.preedit_string(\"a\", 1, 1)\r\n[ 335816.879] zwp_text_input_v3@16.done(299)\r\n[ 335823.244]  -> zwp_text_input_v3@16.set_cursor_rectangle(90, 41, 0, 0)\r\n[ 335823.256]  -> zwp_text_input_v3@16.commit()\r\n[ 335823.890] zwp_text_input_v3@16.preedit_string(\"a\", 1, 1)\r\n[ 335823.906] zwp_text_input_v3@16.done(300)\r\n[ 335830.632]  -> zwp_text_input_v3@16.set_cursor_rectangle(90, 41, 0, 0)\r\n[ 335830.645]  -> zwp_text_input_v3@16.commit()\r\n[ 335831.289] zwp_text_input_v3@16.preedit_string(\"a\", 1, 1)\r\n[ 335831.306] zwp_text_input_v3@16.done(301)\r\n[ 335837.585]  -> zwp_text_input_v3@16.set_cursor_rectangle(90, 41, 0, 0)\r\n[ 335837.597]  -> zwp_text_input_v3@16.commit()\r\n[ 335838.262] zwp_text_input_v3@16.preedit_string(\"a\", 1, 1)\r\n[ 335838.291] zwp_text_input_v3@16.done(302)\r\n[ 335844.202]  -> zwp_text_input_v3@16.set_cursor_rectangle(90, 41, 0, 0)\r\n[ 335844.215]  -> zwp_text_input_v3@16.commit()\r\n[ 335844.872] zwp_text_input_v3@16.preedit_string(\"a\", 1, 1)\r\n[ 335844.887] zwp_text_input_v3@16.done(303)\r\n[ 335850.751]  -> zwp_text_input_v3@16.set_cursor_rectangle(90, 41, 0, 0)\r\n[ 335850.764]  -> zwp_text_input_v3@16.commit()\r\n[ 335851.395] zwp_text_input_v3@16.preedit_string(\"a\", 1, 1)\r\n[ 335851.410] zwp_text_input_v3@16.done(304)\r\n[ 335857.722]  -> zwp_text_input_v3@16.set_cursor_rectangle(90, 41, 0, 0)\r\n[ 335857.734]  -> zwp_text_input_v3@16.commit()\r\n[ 335858.386] zwp_text_input_v3@16.preedit_string(\"a\", 1, 1)\r\n[ 335858.402] zwp_text_input_v3@16.done(305)\r\n[ 335864.918]  -> zwp_text_input_v3@16.set_cursor_rectangle(90, 41, 0, 0)\r\n[ 335864.930]  -> zwp_text_input_v3@16.commit()\r\n[ 335865.606] zwp_text_input_v3@16.preedit_string(\"a\", 1, 1)\r\n[ 335865.622] zwp_text_input_v3@16.done(306)\r\n[ 335871.638]  -> zwp_text_input_v3@16.set_cursor_rectangle(90, 41, 0, 0)\r\n[ 335871.647]  -> zwp_text_input_v3@16.commit()\r\n[ 335872.124] zwp_text_input_v3@16.preedit_string(\"a\", 1, 1)\r\n[ 335872.135] zwp_text_input_v3@16.done(307)\r\n[ 335877.704]  -> zwp_text_input_v3@16.set_cursor_rectangle(90, 41, 0, 0)\r\n[ 335877.712]  -> zwp_text_input_v3@16.commit()\r\n[ 335878.199] zwp_text_input_v3@16.preedit_string(\"a\", 1, 1)\r\n[ 335878.211] zwp_text_input_v3@16.done(308)\r\n[ 335884.473]  -> zwp_text_input_v3@16.set_cursor_rectangle(90, 41, 0, 0)\r\n[ 335884.481]  -> zwp_text_input_v3@16.commit()\r\n[ 335884.962] zwp_text_input_v3@16.preedit_string(\"a\", 1, 1)\r\n[ 335884.973] zwp_text_input_v3@16.done(309)\r\n[ 335891.422]  -> zwp_text_input_v3@16.set_cursor_rectangle(90, 41, 0, 0)\r\n[ 335891.430]  -> zwp_text_input_v3@16.commit()\r\n[ 335891.902] zwp_text_input_v3@16.preedit_string(\"a\", 1, 1)\r\n[ 335891.913] zwp_text_input_v3@16.done(310)\r\n[ 335898.570]  -> zwp_text_input_v3@16.set_cursor_rectangle(90, 41, 0, 0)\r\n[ 335898.580]  -> zwp_text_input_v3@16.commit()\r\n[ 335899.064] zwp_text_input_v3@16.preedit_string(\"a\", 1, 1)\r\n[ 335899.075] zwp_text_input_v3@16.done(311)\r\n[ 335905.285]  -> zwp_text_input_v3@16.set_cursor_rectangle(90, 41, 0, 0)\r\n[ 335905.293]  -> zwp_text_input_v3@16.commit()\r\n[ 335905.769] zwp_text_input_v3@16.preedit_string(\"a\", 1, 1)\r\n[ 335905.780] zwp_text_input_v3@16.done(312)\r\n[ 335912.933]  -> zwp_text_input_v3@16.set_cursor_rectangle(90, 41, 0, 0)\r\n[ 335912.942]  -> zwp_text_input_v3@16.commit()\r\n[ 335913.469] zwp_text_input_v3@16.preedit_string(\"a\", 1, 1)\r\n[ 335913.482] zwp_text_input_v3@16.done(313)\r\n[ 335919.377]  -> zwp_text_input_v3@16.set_cursor_rectangle(90, 41, 0, 0)\r\n[ 335919.385]  -> zwp_text_input_v3@16.commit()\r\n[ 335919.859] zwp_text_input_v3@16.preedit_string(\"a\", 1, 1)\r\n[ 335919.870] zwp_text_input_v3@16.done(314)\r\n[ 335926.307]  -> zwp_text_input_v3@16.set_cursor_rectangle(90, 41, 0, 0)\r\n[ 335926.315]  -> zwp_text_input_v3@16.commit()\r\n[ 335926.790] zwp_text_input_v3@16.preedit_string(\"a\", 1, 1)\r\n[ 335926.801] zwp_text_input_v3@16.done(315)\r\n[ 335933.167]  -> zwp_text_input_v3@16.set_cursor_rectangle(90, 41, 0, 0)\r\n[ 335933.175]  -> zwp_text_input_v3@16.commit()\r\n[ 335933.664] zwp_text_input_v3@16.preedit_string(\"a\", 1, 1)\r\n[ 335933.675] zwp_text_input_v3@16.done(316)\r\n[ 335940.022]  -> zwp_text_input_v3@16.set_cursor_rectangle(90, 41, 0, 0)\r\n[ 335940.030]  -> zwp_text_input_v3@16.commit()\r\n[ 335940.520] zwp_text_input_v3@16.preedit_string(\"a\", 1, 1)\r\n[ 335940.531] zwp_text_input_v3@16.done(317)\r\n[ 335947.003]  -> zwp_text_input_v3@16.set_cursor_rectangle(90, 41, 0, 0)\r\n[ 335947.012]  -> zwp_text_input_v3@16.commit()\r\n[ 335947.511] zwp_text_input_v3@16.preedit_string(\"a\", 1, 1)\r\n[ 335947.522] zwp_text_input_v3@16.done(318)\r\n[ 335953.509]  -> zwp_text_input_v3@16.set_cursor_rectangle(90, 41, 0, 0)\r\n[ 335953.518]  -> zwp_text_input_v3@16.commit()\r\n[ 335954.061] zwp_text_input_v3@16.preedit_string(\"a\", 1, 1)\r\n[ 335954.072] zwp_text_input_v3@16.done(319)\r\n[ 335961.040]  -> zwp_text_input_v3@16.set_cursor_rectangle(90, 41, 0, 0)\r\n[ 335961.049]  -> zwp_text_input_v3@16.commit()\r\n[ 335961.543] zwp_text_input_v3@16.preedit_string(\"a\", 1, 1)\r\n[ 335961.553] zwp_text_input_v3@16.done(320)\r\n[ 335967.894]  -> zwp_text_input_v3@16.set_cursor_rectangle(90, 41, 0, 0)\r\n[ 335967.903]  -> zwp_text_input_v3@16.commit()\r\n[ 335968.380] zwp_text_input_v3@16.preedit_string(\"a\", 1, 1)\r\n[ 335968.391] zwp_text_input_v3@16.done(321)\r\n[ 335974.826]  -> zwp_text_input_v3@16.set_cursor_rectangle(90, 41, 0, 0)\r\n[ 335974.834]  -> zwp_text_input_v3@16.commit()\r\n[ 335975.324] zwp_text_input_v3@16.preedit_string(\"a\", 1, 1)\r\n[ 335975.335] zwp_text_input_v3@16.done(322)\r\n[ 335981.718]  -> zwp_text_input_v3@16.set_cursor_rectangle(90, 41, 0, 0)\r\n[ 335981.726]  -> zwp_text_input_v3@16.commit()\r\n[ 335982.198] zwp_text_input_v3@16.preedit_string(\"a\", 1, 1)\r\n[ 335982.209] zwp_text_input_v3@16.done(323)\r\n[ 335988.601]  -> zwp_text_input_v3@16.set_cursor_rectangle(90, 41, 0, 0)\r\n[ 335988.609]  -> zwp_text_input_v3@16.commit()\r\n[ 335989.094] zwp_text_input_v3@16.preedit_string(\"a\", 1, 1)\r\n[ 335989.105] zwp_text_input_v3@16.done(324)\r\n[ 335995.479]  -> zwp_text_input_v3@16.set_cursor_rectangle(90, 41, 0, 0)\r\n[ 335995.488]  -> zwp_text_input_v3@16.commit()\r\n[ 335995.975] zwp_text_input_v3@16.preedit_string(\"a\", 1, 1)\r\n[ 335995.986] zwp_text_input_v3@16.done(325)\r\n[ 336002.275]  -> zwp_text_input_v3@16.set_cursor_rectangle(90, 41, 0, 0)\r\n[ 336002.283]  -> zwp_text_input_v3@16.commit()\r\n[ 336002.766] zwp_text_input_v3@16.preedit_string(\"a\", 1, 1)\r\n[ 336002.777] zwp_text_input_v3@16.done(326)\r\n[ 336009.658]  -> zwp_text_input_v3@16.set_cursor_rectangle(90, 41, 0, 0)\r\n[ 336009.667]  -> zwp_text_input_v3@16.commit()\r\n[ 336010.135] zwp_text_input_v3@16.preedit_string(\"a\", 1, 1)\r\n[ 336010.145] zwp_text_input_v3@16.done(327)\r\n[ 336016.532]  -> zwp_text_input_v3@16.set_cursor_rectangle(90, 41, 0, 0)\r\n[ 336016.540]  -> zwp_text_input_v3@16.commit()\r\n[ 336017.027] zwp_text_input_v3@16.preedit_string(\"a\", 1, 1)\r\n[ 336017.038] zwp_text_input_v3@16.done(328)\r\n[ 336023.321]  -> zwp_text_input_v3@16.set_cursor_rectangle(90, 41, 0, 0)\r\n[ 336023.329]  -> zwp_text_input_v3@16.commit()\r\n[ 336023.815] zwp_text_input_v3@16.preedit_string(\"a\", 1, 1)\r\n[ 336023.826] zwp_text_input_v3@16.done(329)\r\n[ 336030.286]  -> zwp_text_input_v3@16.set_cursor_rectangle(90, 41, 0, 0)\r\n[ 336030.294]  -> zwp_text_input_v3@16.commit()\r\n[ 336030.817] zwp_text_input_v3@16.preedit_string(\"a\", 1, 1)\r\n[ 336030.827] zwp_text_input_v3@16.done(330)\r\n[ 336037.205]  -> zwp_text_input_v3@16.set_cursor_rectangle(90, 41, 0, 0)\r\n[ 336037.214]  -> zwp_text_input_v3@16.commit()\r\n[ 336037.663] zwp_text_input_v3@16.preedit_string(\"a\", 1, 1)\r\n[ 336037.673] zwp_text_input_v3@16.done(331)\r\n[ 336044.382]  -> zwp_text_input_v3@16.set_cursor_rectangle(90, 41, 0, 0)\r\n[ 336044.390]  -> zwp_text_input_v3@16.commit()\r\n[ 336044.872] zwp_text_input_v3@16.preedit_string(\"a\", 1, 1)\r\n[ 336044.883] zwp_text_input_v3@16.done(332)\r\n[ 336051.159]  -> zwp_text_input_v3@16.set_cursor_rectangle(90, 41, 0, 0)\r\n[ 336051.168]  -> zwp_text_input_v3@16.commit()\r\n[ 336051.638] zwp_text_input_v3@16.preedit_string(\"a\", 1, 1)\r\n[ 336051.649] zwp_text_input_v3@16.done(333)\r\n[ 336058.179]  -> zwp_text_input_v3@16.set_cursor_rectangle(90, 41, 0, 0)\r\n[ 336058.188]  -> zwp_text_input_v3@16.commit()\r\n[ 336058.669] zwp_text_input_v3@16.preedit_string(\"a\", 1, 1)\r\n```\r\n\r\nUnder kwin/gnome-shell(mutter), every commit will be replied with done(). When there's an existing preedit, the preedit will be also piggybacked with \"done()\" (otherwise it means clear preedit). \r\nSee: \r\nhttps://github.com/GNOME/mutter/blob/9a25838e4e3f705b69b7f2e0bf22e970d8829f1f/src/wayland/meta-wayland-text-input.c#L142\r\n\r\nAlacritty will send \"set_cursor_rectangle\" even if rectangle doesn't change and issue a new \"commit()\", which causes infinite loop between compositor and alacritty. \r\n\r\nPossible fix:\r\n1. if cursor rectangle does not change comparing to the last value, don't send it again. \r\n2. if preedit from compositor is same as last one, don't update/re-calculate.","closed_by":{"login":"kchibisov","id":27620401,"node_id":"MDQ6VXNlcjI3NjIwNDAx","avatar_url":"https://avatars.githubusercontent.com/u/27620401?v=4","gravatar_id":"","url":"https://api.github.com/users/kchibisov","html_url":"https://github.com/kchibisov","followers_url":"https://api.github.com/users/kchibisov/followers","following_url":"https://api.github.com/users/kchibisov/following{/other_user}","gists_url":"https://api.github.com/users/kchibisov/gists{/gist_id}","starred_url":"https://api.github.com/users/kchibisov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kchibisov/subscriptions","organizations_url":"https://api.github.com/users/kchibisov/orgs","repos_url":"https://api.github.com/users/kchibisov/repos","events_url":"https://api.github.com/users/kchibisov/events{/privacy}","received_events_url":"https://api.github.com/users/kchibisov/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/alacritty/alacritty/issues/6324/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/alacritty/alacritty/issues/6324/timeline","performed_via_github_app":null,"state_reason":"completed"}