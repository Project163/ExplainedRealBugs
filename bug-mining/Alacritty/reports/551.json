{"url":"https://api.github.com/repos/alacritty/alacritty/issues/7292","repository_url":"https://api.github.com/repos/alacritty/alacritty","labels_url":"https://api.github.com/repos/alacritty/alacritty/issues/7292/labels{/name}","comments_url":"https://api.github.com/repos/alacritty/alacritty/issues/7292/comments","events_url":"https://api.github.com/repos/alacritty/alacritty/issues/7292/events","html_url":"https://github.com/alacritty/alacritty/issues/7292","id":1940818788,"node_id":"I_kwDOAxkop85zrotk","number":7292,"title":"Text pasted twice on Shift-MiddleButton in mouse tracking apps (vim, tmux)","user":{"login":"proski","id":1317472,"node_id":"MDQ6VXNlcjEzMTc0NzI=","avatar_url":"https://avatars.githubusercontent.com/u/1317472?v=4","gravatar_id":"","url":"https://api.github.com/users/proski","html_url":"https://github.com/proski","followers_url":"https://api.github.com/users/proski/followers","following_url":"https://api.github.com/users/proski/following{/other_user}","gists_url":"https://api.github.com/users/proski/gists{/gist_id}","starred_url":"https://api.github.com/users/proski/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/proski/subscriptions","organizations_url":"https://api.github.com/users/proski/orgs","repos_url":"https://api.github.com/users/proski/repos","events_url":"https://api.github.com/users/proski/events{/privacy}","received_events_url":"https://api.github.com/users/proski/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":574455085,"node_id":"MDU6TGFiZWw1NzQ0NTUwODU=","url":"https://api.github.com/repos/alacritty/alacritty/labels/P%20-%20low","name":"P - low","color":"f9d0c4","default":false,"description":null},{"id":866008098,"node_id":"MDU6TGFiZWw4NjYwMDgwOTg=","url":"https://api.github.com/repos/alacritty/alacritty/labels/S%20-%20keybindings","name":"S - keybindings","color":"5319e7","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2023-10-12T21:28:20Z","updated_at":"2023-10-25T00:04:33Z","closed_at":"2023-10-25T00:04:33Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### System\r\n\r\nOS: MacOS 14.0\r\nVersion: current `master` branch, current `update-winit-final` branch\r\n\r\n### Configuration\r\n\r\n```\r\n[mouse.bindings]]\r\nmouse = \"Middle\"\r\nmods = \"Shift\"\r\naction = \"Paste\"\r\n```\r\n\r\n### Logs\r\n\r\nEvents logged with `--print-events` and the current `update-winit-final` branch (dfbb01d6b17c112be34ed7ebebf0227647919d80).\r\n\r\n```\r\n*** Shift is already held, mouse wheel is pressed\r\n[17.065938291s] [INFO ] [alacritty] winit event: NewEvents(WaitCancelled { start: Instant { tv_sec: 18849, tv_nsec: 810943958 }, requested_resume: None })\r\n[17.067660666s] [INFO ] [alacritty] winit event: DeviceEvent { device_id: DeviceId(DeviceId), event: Button { button: 2, state: Pressed } }\r\n[17.067787416s] [INFO ] [alacritty] winit event: WindowEvent { window_id: WindowId(WindowId(5191806272)), event: CursorMoved { device_id: DeviceId(DeviceId), position: PhysicalPosition { x: 434.0, y: 22.0 } } }\r\n[17.067893041s] [INFO ] [alacritty] winit event: WindowEvent { window_id: WindowId(WindowId(5191806272)), event: MouseInput { device_id: DeviceId(DeviceId), state: Pressed, button: Middle } }\r\n[17.067969541s] [INFO ] [alacritty] winit event: AboutToWait\r\n*** Output from an added debug statement in the beginning of execute()\r\n[alacritty/src/input.rs:162] &self = Paste\r\n[alacritty/src/input.rs:162] &self = PasteSelection\r\n[17.074582958s] [INFO ] [alacritty] winit event: NewEvents(WaitCancelled { start: Instant { tv_sec: 18854, tv_nsec: 874886916 }, requested_resume: None })\r\n[17.074667666s] [INFO ] [alacritty] winit event: UserEvent(Event { window_id: Some(WindowId(WindowId(5191806272))), payload: Terminal(Wakeup) })\r\n[17.074735083s] [INFO ] [alacritty] winit event: WindowEvent { window_id: WindowId(WindowId(5191806272)), event: RedrawRequested }\r\n[17.082676833s] [INFO ] [alacritty] winit event: AboutToWait\r\n[17.082799583s] [INFO ] [alacritty] winit event: NewEvents(WaitCancelled { start: Instant { tv_sec: 18854, tv_nsec: 884327708 }, requested_resume: None })\r\n[17.082853083s] [INFO ] [alacritty] winit event: UserEvent(Event { window_id: Some(WindowId(WindowId(5191806272))), payload: Terminal(Wakeup) })\r\n[17.082888125s] [INFO ] [alacritty] winit event: UserEvent(Event { window_id: Some(WindowId(WindowId(5191806272))), payload: Frame })\r\n[17.082927416s] [INFO ] [alacritty] winit event: WindowEvent { window_id: WindowId(WindowId(5191806272)), event: RedrawRequested }\r\n[17.088560208s] [INFO ] [alacritty] winit event: AboutToWait\r\n[17.088627791s] [INFO ] [alacritty] winit event: NewEvents(WaitCancelled { start: Instant { tv_sec: 18854, tv_nsec: 890160041 }, requested_resume: None })\r\n[17.088665208s] [INFO ] [alacritty] winit event: UserEvent(Event { window_id: Some(WindowId(WindowId(5191806272))), payload: Frame })\r\n[17.088693750s] [INFO ] [alacritty] winit event: AboutToWait\r\n*** Releasing mouse wheel, still holding Shift\r\n[19.807858583s] [INFO ] [alacritty] winit event: NewEvents(WaitCancelled { start: Instant { tv_sec: 18854, tv_nsec: 890260333 }, requested_resume: None })\r\n[19.809546500s] [INFO ] [alacritty] winit event: DeviceEvent { device_id: DeviceId(DeviceId), event: Button { button: 2, state: Released } }\r\n[19.809694333s] [INFO ] [alacritty] winit event: WindowEvent { window_id: WindowId(WindowId(5191806272)), event: CursorMoved { device_id: DeviceId(DeviceId), position: PhysicalPosition { x: 434.0, y: 22.0 } } }\r\n[19.809806791s] [INFO ] [alacritty] winit event: WindowEvent { window_id: WindowId(WindowId(5191806272)), event: MouseInput { device_id: DeviceId(DeviceId), state: Released, button: Middle } }\r\n[19.809885750s] [INFO ] [alacritty] winit event: AboutToWait\r\n```\r\n\r\n### Context\r\n\r\nI'm used to holding Shift when cutting and pasting, as I spend a lot of time in applications that track mouse events. However, Shift-MiddleButton doesn't past when the mouse is not being tracked (e.g. shell without tmux). So I tried adding a binding for Shift-MiddleButton (see config above). Now the bare shell is working as expected, but text is pasted twice in tmux and neovim.\r\n\r\nAs you can see, two actions happen when the mouse wheel is clicked, `Paste` and `PasteSelection`. That appears to be issue to me. An event should not trigger two actions.\r\n\r\nWith an empty config file, only one action is printed by `dbg!(&self);` in the beginning of `execute()` in `alacritty/src/input.rs`, that's `PasteSelection`.","closed_by":{"login":"chrisduerr","id":8886672,"node_id":"MDQ6VXNlcjg4ODY2NzI=","avatar_url":"https://avatars.githubusercontent.com/u/8886672?v=4","gravatar_id":"","url":"https://api.github.com/users/chrisduerr","html_url":"https://github.com/chrisduerr","followers_url":"https://api.github.com/users/chrisduerr/followers","following_url":"https://api.github.com/users/chrisduerr/following{/other_user}","gists_url":"https://api.github.com/users/chrisduerr/gists{/gist_id}","starred_url":"https://api.github.com/users/chrisduerr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chrisduerr/subscriptions","organizations_url":"https://api.github.com/users/chrisduerr/orgs","repos_url":"https://api.github.com/users/chrisduerr/repos","events_url":"https://api.github.com/users/chrisduerr/events{/privacy}","received_events_url":"https://api.github.com/users/chrisduerr/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/alacritty/alacritty/issues/7292/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/alacritty/alacritty/issues/7292/timeline","performed_via_github_app":null,"state_reason":"completed"}