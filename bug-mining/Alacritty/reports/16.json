{"url":"https://api.github.com/repos/alacritty/alacritty/issues/76","repository_url":"https://api.github.com/repos/alacritty/alacritty","labels_url":"https://api.github.com/repos/alacritty/alacritty/issues/76/labels{/name}","comments_url":"https://api.github.com/repos/alacritty/alacritty/issues/76/comments","events_url":"https://api.github.com/repos/alacritty/alacritty/issues/76/events","html_url":"https://github.com/alacritty/alacritty/issues/76","id":199218488,"node_id":"MDU6SXNzdWUxOTkyMTg0ODg=","number":76,"title":"'pty reader' panic: Interrupted System Call when using ^Z and fg/bg","user":{"login":"antekone","id":1664036,"node_id":"MDQ6VXNlcjE2NjQwMzY=","avatar_url":"https://avatars.githubusercontent.com/u/1664036?v=4","gravatar_id":"","url":"https://api.github.com/users/antekone","html_url":"https://github.com/antekone","followers_url":"https://api.github.com/users/antekone/followers","following_url":"https://api.github.com/users/antekone/following{/other_user}","gists_url":"https://api.github.com/users/antekone/gists{/gist_id}","starred_url":"https://api.github.com/users/antekone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/antekone/subscriptions","organizations_url":"https://api.github.com/users/antekone/orgs","repos_url":"https://api.github.com/users/antekone/repos","events_url":"https://api.github.com/users/antekone/events{/privacy}","received_events_url":"https://api.github.com/users/antekone/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2017-01-06T15:25:08Z","updated_at":"2017-01-06T16:37:34Z","closed_at":"2017-01-06T16:26:00Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Hello,\r\n\r\nI'm using Linux (ArchLinux 64-bit).\r\n\r\nWhen I'm running `alacritty` from other terminal, i.e. gnome-terminal, it runs fine. But when I use `^Z` to suspend `alacritty`'s process and try to put it to background with `^Z` + `bg`, it panics:\r\n\r\n```\r\n$ bg\r\n[1]  + 25442 continued  RUST_BACKTRACE=1 ./alacritty\r\nthread 'pty reader' panicked at 'poll ok: Error { repr: Os { code: 4, message: \"Interrupted system call\" } }', /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/src/libcore/result.rs:845\r\nstack backtrace:\r\n   1:     0x5632fcd6216c - std::sys::imp::backtrace::tracing::imp::write::h9c41d2f69e5caabf\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/src/libstd/sys/unix/backtrace/tracing/gcc_s.rs:42\r\n   2:     0x5632fcd6740e - std::panicking::default_hook::{{closure}}::h1f61f3c769fffe7a\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/src/libstd/panicking.rs:351\r\n   3:     0x5632fcd67014 - std::panicking::default_hook::hd5bda4e453dfb4be\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/src/libstd/panicking.rs:367\r\n   4:     0x5632fcd678b7 - std::panicking::rust_panic_with_hook::hffbc74969c7b5d87\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/src/libstd/panicking.rs:555\r\n   5:     0x5632fcd67744 - std::panicking::begin_panic::h3bbdbb2a23440035\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/src/libstd/panicking.rs:517\r\n   6:     0x5632fcd67669 - std::panicking::begin_panic_fmt::h34f5b320b0f94559\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/src/libstd/panicking.rs:501\r\n   7:     0x5632fcd675f7 - rust_begin_unwind\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/src/libstd/panicking.rs:477\r\n   8:     0x5632fcd9370d - core::panicking::panic_fmt::h1016b85b51d1931f\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/src/libcore/panicking.rs:69\r\n   9:     0x5632fcc526bf - core::result::unwrap_failed::hc1006aeafe0fe326\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/src/libcore/macros.rs:29\r\n  10:     0x5632fcc5aee6 - <alacritty::event_loop::EventLoop<Io>>::spawn::{{closure}}::he56070339a51619b\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/src/libcore/result.rs:769\r\n                        at /home/antek/dev/source/alacritty/src/event_loop.rs:292\r\n  11:     0x5632fcc4618b - std::panicking::try::do_call::ha092a96b23936108\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/src/libstd/panic.rs:296\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/src/libstd/panicking.rs:460\r\n  12:     0x5632fcd6e7aa - __rust_maybe_catch_panic\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/src/libpanic_unwind/lib.rs:98\r\n  13:     0x5632fcc580fa - <F as alloc::boxed::FnBox<A>>::call_box::ha8fd9a2a9bb1f7ba\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/src/libstd/panicking.rs:436\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/src/libstd/panic.rs:361\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/src/libstd/thread/mod.rs:357\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/src/liballoc/boxed.rs:605\r\n  14:     0x5632fcd66704 - std::sys::imp::thread::Thread::new::thread_start::h76badbf9b0ecaf58\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/src/liballoc/boxed.rs:615\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/src/libstd/sys_common/thread.rs:21\r\n                        at /buildslave/rust-buildbot/slave/nightly-dist-rustc-linux/build/src/libstd/sys/unix/thread.rs:84\r\n  15:     0x7f03ab61b453 - start_thread\r\n  16:     0x7f03ab1477de - __GI___clone\r\n  17:                0x0 - <unknown>\r\nchild finished with error '256'\r\n```\r\n\r\nSame thing when I use `fg`.\r\n\r\nExactly the same panic is triggered when suspending the system (`systemctl suspend`) and resuming it. All `alacritty` windows are gone after resuming, terminated with the same panic as above (seems it's triggered by `result.rs:292`'s `expect()` call).","closed_by":{"login":"jwilm","id":4285147,"node_id":"MDQ6VXNlcjQyODUxNDc=","avatar_url":"https://avatars.githubusercontent.com/u/4285147?v=4","gravatar_id":"","url":"https://api.github.com/users/jwilm","html_url":"https://github.com/jwilm","followers_url":"https://api.github.com/users/jwilm/followers","following_url":"https://api.github.com/users/jwilm/following{/other_user}","gists_url":"https://api.github.com/users/jwilm/gists{/gist_id}","starred_url":"https://api.github.com/users/jwilm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jwilm/subscriptions","organizations_url":"https://api.github.com/users/jwilm/orgs","repos_url":"https://api.github.com/users/jwilm/repos","events_url":"https://api.github.com/users/jwilm/events{/privacy}","received_events_url":"https://api.github.com/users/jwilm/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/alacritty/alacritty/issues/76/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/alacritty/alacritty/issues/76/timeline","performed_via_github_app":null,"state_reason":"completed"}