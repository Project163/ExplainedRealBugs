{"url":"https://api.github.com/repos/alacritty/alacritty/issues/8268","repository_url":"https://api.github.com/repos/alacritty/alacritty","labels_url":"https://api.github.com/repos/alacritty/alacritty/issues/8268/labels{/name}","comments_url":"https://api.github.com/repos/alacritty/alacritty/issues/8268/comments","events_url":"https://api.github.com/repos/alacritty/alacritty/issues/8268/events","html_url":"https://github.com/alacritty/alacritty/issues/8268","id":2612905827,"node_id":"I_kwDOAxkop86bvcdj","number":8268,"title":"macOS specific keyboard input crashes alacritty 0.14.0","user":{"login":"windowswithoutborders","id":67998787,"node_id":"MDQ6VXNlcjY3OTk4Nzg3","avatar_url":"https://avatars.githubusercontent.com/u/67998787?v=4","gravatar_id":"","url":"https://api.github.com/users/windowswithoutborders","html_url":"https://github.com/windowswithoutborders","followers_url":"https://api.github.com/users/windowswithoutborders/followers","following_url":"https://api.github.com/users/windowswithoutborders/following{/other_user}","gists_url":"https://api.github.com/users/windowswithoutborders/gists{/gist_id}","starred_url":"https://api.github.com/users/windowswithoutborders/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/windowswithoutborders/subscriptions","organizations_url":"https://api.github.com/users/windowswithoutborders/orgs","repos_url":"https://api.github.com/users/windowswithoutborders/repos","events_url":"https://api.github.com/users/windowswithoutborders/events{/privacy}","received_events_url":"https://api.github.com/users/windowswithoutborders/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":513675039,"node_id":"MDU6TGFiZWw1MTM2NzUwMzk=","url":"https://api.github.com/repos/alacritty/alacritty/labels/C%20-%20waiting%20on%20author","name":"C - waiting on author","color":"2fb56d","default":false,"description":""},{"id":638279498,"node_id":"MDU6TGFiZWw2MzgyNzk0OTg=","url":"https://api.github.com/repos/alacritty/alacritty/labels/H%20-%20macos","name":"H - macos","color":"000000","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":27,"created_at":"2024-10-25T02:16:30Z","updated_at":"2024-12-21T16:00:27Z","closed_at":"2024-12-21T16:00:27Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"edit: changed the topic title to better reflect the issue given what others have commented regarding their own experience with crashing.\r\n\r\nI use a piece of software on macOS called [BetterTouchTool](https://folivora.ai/) and one of its features is being able to turn caps lock into a hyper key. Hyper key for the uninitiated is actually a simultaneous key press event for the actual modifier keys `Command|Shift|Control|Option`.  I use the hyper key in combination with keyboard bindings within alacritty such that my hyper key essentially handles the standard bash / readline Ctrl-* key sequences--that is to say,  Hyper-C acts as Ctrl-c  and terminates a process. \r\n\r\n```\r\n[[keyboard.bindings]]\r\nchars = \"\\u0003\"\r\nkey = \"C\"\r\nmods = \"Command|Shift|Control|Option\"\r\n```\r\n\r\nPreviously, (i.e. the past two years) this was working just fine.\r\n\r\nExpected behavior: The character sequence defined in the key binding is sent, the desired effect occurs, and the terminal continues to operate without issue.\r\n\r\nActual behavior: Repeated (although sometimes on the first try) use of the hyper key crashes the terminal causing it to suddenly close.\r\n\r\n### System\r\n\r\nOS:\r\n```\r\n> sw_vers\r\nProductName:\t\tmacOS\r\nProductVersion:\t\t15.0.1\r\nBuildVersion:  \t\t24A348\r\n``` \r\nVersion:\r\n```\r\n> alacritty --version\r\nalacritty 0.14.0 (22a4475)\r\n```\r\n\r\n### Logs\r\n\r\n```\r\n[2.758060875s] [INFO ] [alacritty_winit_event] Event { window_id: Some(WindowId(5198973488)), payload: Frame }\r\n[2.758098667s] [INFO ] [alacritty_winit_event] About to wait\r\n[2.758120958s] [INFO ] [alacritty_winit_event] About to wait\r\n[2.765228375s] [INFO ] [alacritty_winit_event] About to wait\r\n[2.771734167s] [INFO ] [alacritty_winit_event] ModifiersChanged(Modifiers { state: ModifiersState(0x0), pressed_mods: ModifiersKeys(0x0) })\r\n[2.771803708s] [INFO ] [alacritty_winit_event] KeyboardInput { device_id: DeviceId(DeviceId), event: KeyEvent { physical_key: Code(ControlLeft), logical_key: Named(Control), text: None, location: Left, state: Released, repeat: false, platform_specific: KeyEventExtra { text_with_all_modifiers: None, key_without_modifiers: Named(Control) } }, is_synthetic: false }\r\n[2.771818125s] [INFO ] [alacritty_winit_event] ModifiersChanged(Modifiers { state: ModifiersState(SHIFT | ALT | SUPER), pressed_mods: ModifiersKeys(0x0) })\r\n[2.771874583s] [INFO ] [alacritty_winit_event] KeyboardInput { device_id: DeviceId(DeviceId), event: KeyEvent { physical_key: Code(ShiftLeft), logical_key: Named(Shift), text: None, location: Left, state: Released, repeat: false, platform_specific: KeyEventExtra { text_with_all_modifiers: None, key_without_modifiers: Named(Shift) } }, is_synthetic: false }\r\n[2.771896125s] [INFO ] [alacritty_winit_event] ModifiersChanged(Modifiers { state: ModifiersState(ALT | SUPER), pressed_mods: ModifiersKeys(0x0) })\r\n[2.771950375s] [INFO ] [alacritty_winit_event] KeyboardInput { device_id: DeviceId(DeviceId), event: KeyEvent { physical_key: Code(AltLeft), logical_key: Named(Alt), text: None, location: Left, state: Released, repeat: false, platform_specific: KeyEventExtra { text_with_all_modifiers: None, key_without_modifiers: Named(Alt) } }, is_synthetic: false }\r\n[2.771962542s] [INFO ] [alacritty_winit_event] ModifiersChanged(Modifiers { state: ModifiersState(SUPER), pressed_mods: ModifiersKeys(0x0) })\r\n[2.772015583s] [INFO ] [alacritty_winit_event] KeyboardInput { device_id: DeviceId(DeviceId), event: KeyEvent { physical_key: Code(SuperLeft), logical_key: Named(Super), text: None, location: Left, state: Released, repeat: false, platform_specific: KeyEventExtra { text_with_all_modifiers: None, key_without_modifiers: Named(Super) } }, is_synthetic: false }\r\n[2.772026875s] [INFO ] [alacritty_winit_event] ModifiersChanged(Modifiers { state: ModifiersState(0x0), pressed_mods: ModifiersKeys(0x0) })\r\n[2.772066917s] [INFO ] [alacritty_winit_event] About to wait\r\n[2.772157250s] [INFO ] [alacritty_winit_event] About to wait\r\n*** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Invalid message sent to event \"NSEvent: type=FlagsChanged loc=(0,744) time=3879.1 flags=0x100 win=0x135e20a30 winNum=1167 ctxt=0x0 keyCode=15\"'\r\n*** First throw call stack:\r\n(\r\n\t0   CoreFoundation                      0x00000001955b0ec0 __exceptionPreprocess + 176\r\n\t1   libobjc.A.dylib                     0x0000000195096cd8 objc_exception_throw + 88\r\n\t2   Foundation                          0x00000001967ad588 -[NSCalendarDate initWithCoder:] + 0\r\n\t3   AppKit                              0x0000000199225cec -[NSEvent charactersIgnoringModifiers] + 604\r\n\t4   alacritty                           0x0000000104969154 _ZN5winit13platform_impl5macos5event16create_key_event17h5ffd7f45014bc6b9E + 2508\r\n\t5   alacritty                           0x00000001049594a8 _ZN5winit13platform_impl5macos4view9WinitView13flags_changed17h58c32ee31fdc0f1bE + 344\r\n\t6   AppKit                              0x00000001991a80a8 -[NSWindow(NSEventRouting) _reallySendEvent:isDelayedEvent:] + 484\r\n\t7   AppKit                              0x00000001991a7cf4 -[NSWindow(NSEventRouting) sendEvent:] + 284\r\n\t8   AppKit                              0x00000001999a53e0 -[NSApplication(NSEventRouting) sendEvent:] + 1212\r\n\t9   alacritty                           0x0000000104961a3c _ZN5winit13platform_impl5macos3app16WinitApplication10send_event17h9d7b11ed09e187deE + 1040\r\n\t10  AppKit                              0x00000001995b8984 -[NSApplication _handleEvent:] + 60\r\n\t11  AppKit                              0x0000000199073ba4 -[NSApplication run] + 520\r\n\t12  alacritty                           0x000000010469e090 _ZN5winit13platform_impl5macos13event_handler12EventHandler3set17ha6185e593ba31ad4E + 280\r\n\t13  alacritty                           0x000000010474d378 _ZN9alacritty4main17h290211ac615fedbeE + 7624\r\n\t14  alacritty                           0x00000001046c2060 _ZN3std3sys9backtrace28__rust_begin_short_backtrace17h86645a6c57eec1ecE + 12\r\n\t15  alacritty                           0x000000010468392c _ZN3std2rt10lang_start28_$u7b$$u7b$closure$u7d$$u7d$17h7b27810acbbe86f2E + 16\r\n\t16  alacritty                           0x00000001048f1598 _ZN3std2rt19lang_start_internal17h9e88109c8deb8787E + 808\r\n\t17  alacritty                           0x000000010474de4c main + 52\r\n\t18  dyld                                0x00000001950d4274 start + 2840\r\n)\r\nlibc++abi: terminating due to uncaught exception of type NSException\r\n[1]    14442 abort      alacritty -vv --print-events\r\n```\r\nI cannot confirm if this hyper key issue applies to any other piece of software that adds this functionality (such as karabiner elements) or if this is an issue specific to how bettertouchtool implements hyperkey. For meanwhile, I've downgraded back to [alacritty 0.13.2](https://github.com/Homebrew/homebrew-cask/blob/ee57cb02e89536c4eb0624e7175705c947693ac7/Casks/a/alacritty.rb) which has resolved the issue.\r\n\r\n```\r\ncurl 'https://raw.githubusercontent.com/Homebrew/homebrew-cask/ee57cb02e89536c4eb0624e7175705c947693ac7/Casks/a/alacritty.rb' -o alacritty.rb\r\nbrew install -s alacritty.rb\r\n```\r\n\r\nNot sure if there's something I'm overlooking with the latest update. Appreciate any help.","closed_by":{"login":"kchibisov","id":27620401,"node_id":"MDQ6VXNlcjI3NjIwNDAx","avatar_url":"https://avatars.githubusercontent.com/u/27620401?v=4","gravatar_id":"","url":"https://api.github.com/users/kchibisov","html_url":"https://github.com/kchibisov","followers_url":"https://api.github.com/users/kchibisov/followers","following_url":"https://api.github.com/users/kchibisov/following{/other_user}","gists_url":"https://api.github.com/users/kchibisov/gists{/gist_id}","starred_url":"https://api.github.com/users/kchibisov/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kchibisov/subscriptions","organizations_url":"https://api.github.com/users/kchibisov/orgs","repos_url":"https://api.github.com/users/kchibisov/repos","events_url":"https://api.github.com/users/kchibisov/events{/privacy}","received_events_url":"https://api.github.com/users/kchibisov/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/alacritty/alacritty/issues/8268/reactions","total_count":7,"+1":7,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/alacritty/alacritty/issues/8268/timeline","performed_via_github_app":null,"state_reason":"completed"}