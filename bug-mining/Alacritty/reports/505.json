{"url":"https://api.github.com/repos/alacritty/alacritty/issues/6159","repository_url":"https://api.github.com/repos/alacritty/alacritty","labels_url":"https://api.github.com/repos/alacritty/alacritty/issues/6159/labels{/name}","comments_url":"https://api.github.com/repos/alacritty/alacritty/issues/6159/comments","events_url":"https://api.github.com/repos/alacritty/alacritty/issues/6159/events","html_url":"https://github.com/alacritty/alacritty/issues/6159","id":1285100060,"node_id":"I_kwDOAxkop85MmRIc","number":6159,"title":"Erase in Line ANSI code (\\e[K) deletes the character that precedes it","user":{"login":"jonathanpoelen","id":1436727,"node_id":"MDQ6VXNlcjE0MzY3Mjc=","avatar_url":"https://avatars.githubusercontent.com/u/1436727?v=4","gravatar_id":"","url":"https://api.github.com/users/jonathanpoelen","html_url":"https://github.com/jonathanpoelen","followers_url":"https://api.github.com/users/jonathanpoelen/followers","following_url":"https://api.github.com/users/jonathanpoelen/following{/other_user}","gists_url":"https://api.github.com/users/jonathanpoelen/gists{/gist_id}","starred_url":"https://api.github.com/users/jonathanpoelen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jonathanpoelen/subscriptions","organizations_url":"https://api.github.com/users/jonathanpoelen/orgs","repos_url":"https://api.github.com/users/jonathanpoelen/repos","events_url":"https://api.github.com/users/jonathanpoelen/events{/privacy}","received_events_url":"https://api.github.com/users/jonathanpoelen/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":327960158,"node_id":"MDU6TGFiZWwzMjc5NjAxNTg=","url":"https://api.github.com/repos/alacritty/alacritty/labels/help%20wanted","name":"help wanted","color":"159818","default":true,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2022-06-27T01:25:47Z","updated_at":"2023-01-15T22:53:42Z","closed_at":"2023-01-15T22:53:42Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"When a line is full and EL is used after the last character of a line, it is deleted.\r\n\r\nThe following command `s=$(echo {1..100}); echo ${s:0:$(($COLUMNS-2))}a$'+\\e[Kb'` normally displays a `+` at the end of the first line. Except that here, `\\e[K` which removes the characters from the cursor position at the end of the line actually removes the `+` character.\r\n\r\nFrom wikpedia (https://en.wikipedia.org/wiki/ANSI_escape_code#CSI_(Control_Sequence_Introducer)_sequences)\r\n\r\nCode | Abbr | Name | Effect\r\n-- | -- | -- | --\r\nCSI n K | EL | Erase in Line | Erases part of the line.<br>**If n is 0 (or missing), clear from cursor to the end of the line**.<br>If n is 1, clear from cursor to beginning of the line.<br>If n is 2, clear entire line.  Cursor position does not change\r\n\r\n\r\nTo tell the truth, I don't know who is at fault, the behavior differs between terminals:\r\n\r\n- xterm, urxvt-unicode, alacritty, default terminal on WSL and Mac: `+` is removed\r\n- konsole, pantheon-term: `+` is visible\r\n\r\n\r\n### System\r\n\r\nOS: Manjaro Linux\r\nVersion: alacritty 0.10.1 ()\r\nLinux/BSD: X11 / i3\r\n\r\n### Logs\r\n\r\n```console\r\n$ alacritty -vv\r\n[0.000006604s] [INFO ] [alacritty] Welcome to Alacritty\r\n[0.000032873s] [INFO ] [alacritty] Version 0.10.1 ()\r\n[0.000043868s] [INFO ] [alacritty] Running on X11\r\n[0.001007959s] [INFO ] [alacritty] Configuration files loaded from:\r\n                                     \"/home/jonathan/.config/alacritty/alacritty.yml\"\r\n[0.011114444s] [DEBUG] [crossfont] Loaded Face Face { ft_face: Font Face: Regular, load_flags: TARGET_LIGHT, render_mode: \"Normal\", lcd_filter: 1 }\r\n[0.013632921s] [DEBUG] [alacritty] Estimated DPR: 1\r\n[0.013644582s] [DEBUG] [alacritty] Estimated window size: Some(PhysicalSize { width: 724, height: 412 })\r\n[0.013653733s] [DEBUG] [alacritty] Estimated cell size: 9 x 17\r\n[0.055238663s] [INFO ] [alacritty] Device pixel ratio: 1\r\n[0.060883228s] [INFO ] [alacritty] Initializing glyph cache...\r\n[0.062635990s] [DEBUG] [crossfont] Loaded Face Face { ft_face: Font Face: Regular, load_flags: TARGET_LIGHT, render_mode: \"Normal\", lcd_filter: 1 }\r\n[0.065278962s] [DEBUG] [crossfont] Loaded Face Face { ft_face: Font Face: Bold, load_flags: TARGET_LIGHT, render_mode: \"Normal\", lcd_filter: 1 }\r\n[0.067899470s] [DEBUG] [crossfont] Loaded Face Face { ft_face: Font Face: Regular, load_flags: NO_BITMAP | TARGET_LIGHT, render_mode: \"Normal\", lcd_filter: 1 }\r\n[0.070583416s] [DEBUG] [crossfont] Loaded Face Face { ft_face: Font Face: Bold, load_flags: NO_BITMAP | TARGET_LIGHT, render_mode: \"Normal\", lcd_filter: 1 }\r\n[0.082055954s] [INFO ] [alacritty] ... finished initializing glyph cache in 0.021151761s\r\n[0.082078992s] [INFO ] [alacritty] Estimated DPR correctly, skipping resize\r\n[0.082141694s] [INFO ] [alacritty] Cell size: 9 x 17\r\n[0.082149532s] [INFO ] [alacritty] Padding: 2 x 2\r\n[0.082169881s] [INFO ] [alacritty] Width: 724, Height: 412\r\n[0.088027508s] [INFO ] [alacritty] PTY dimensions: 24 x 80\r\n[0.090589056s] [INFO ] [alacritty] Initialisation complete\r\n[0.093047710s] [DEBUG] [alacritty_terminal] New num_cols is 106 and num_lines is 12\r\n[0.093131748s] [INFO ] [alacritty] Padding: 2 x 2\r\n[0.093160257s] [INFO ] [alacritty] Width: 963, Height: 212\r\n[1.245937538s] [INFO ] [alacritty] Goodbye\r\n```","closed_by":{"login":"chrisduerr","id":8886672,"node_id":"MDQ6VXNlcjg4ODY2NzI=","avatar_url":"https://avatars.githubusercontent.com/u/8886672?v=4","gravatar_id":"","url":"https://api.github.com/users/chrisduerr","html_url":"https://github.com/chrisduerr","followers_url":"https://api.github.com/users/chrisduerr/followers","following_url":"https://api.github.com/users/chrisduerr/following{/other_user}","gists_url":"https://api.github.com/users/chrisduerr/gists{/gist_id}","starred_url":"https://api.github.com/users/chrisduerr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chrisduerr/subscriptions","organizations_url":"https://api.github.com/users/chrisduerr/orgs","repos_url":"https://api.github.com/users/chrisduerr/repos","events_url":"https://api.github.com/users/chrisduerr/events{/privacy}","received_events_url":"https://api.github.com/users/chrisduerr/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/alacritty/alacritty/issues/6159/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/alacritty/alacritty/issues/6159/timeline","performed_via_github_app":null,"state_reason":"completed"}