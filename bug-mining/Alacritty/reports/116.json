{"url":"https://api.github.com/repos/alacritty/alacritty/issues/1784","repository_url":"https://api.github.com/repos/alacritty/alacritty","labels_url":"https://api.github.com/repos/alacritty/alacritty/issues/1784/labels{/name}","comments_url":"https://api.github.com/repos/alacritty/alacritty/issues/1784/comments","events_url":"https://api.github.com/repos/alacritty/alacritty/issues/1784/events","html_url":"https://github.com/alacritty/alacritty/issues/1784","id":380171001,"node_id":"MDU6SXNzdWUzODAxNzEwMDE=","number":1784,"title":"Recent build failure on OpenBSD 6.4","user":{"login":"thendiscard","id":15653959,"node_id":"MDQ6VXNlcjE1NjUzOTU5","avatar_url":"https://avatars.githubusercontent.com/u/15653959?v=4","gravatar_id":"","url":"https://api.github.com/users/thendiscard","html_url":"https://github.com/thendiscard","followers_url":"https://api.github.com/users/thendiscard/followers","following_url":"https://api.github.com/users/thendiscard/following{/other_user}","gists_url":"https://api.github.com/users/thendiscard/gists{/gist_id}","starred_url":"https://api.github.com/users/thendiscard/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thendiscard/subscriptions","organizations_url":"https://api.github.com/users/thendiscard/orgs","repos_url":"https://api.github.com/users/thendiscard/repos","events_url":"https://api.github.com/users/thendiscard/events{/privacy}","received_events_url":"https://api.github.com/users/thendiscard/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":638282629,"node_id":"MDU6TGFiZWw2MzgyODI2Mjk=","url":"https://api.github.com/repos/alacritty/alacritty/labels/A%20-%20deps","name":"A - deps","color":"fef2c0","default":false,"description":null},{"id":1110275016,"node_id":"MDU6TGFiZWwxMTEwMjc1MDE2","url":"https://api.github.com/repos/alacritty/alacritty/labels/B%20-%20build%20failure","name":"B - build failure","color":"c6071e","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2018-11-13T11:02:56Z","updated_at":"2018-11-18T15:49:17Z","closed_at":"2018-11-18T15:49:17Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Which operating system does the issue occur on?\r\n\r\nOpenBSD 6.4-current:\r\n```bash\r\nuser ~/ALACRITTY/alacritty $ sysctl kern.version\r\nkern.version=OpenBSD 6.4-current (GENERIC.MP) #433: Sun Nov 11 10:08:54 MST 2018\r\n    deraadt@amd64.openbsd.org:/usr/src/sys/arch/amd64/compile/GENERIC.MP\r\n\r\nuser ~/ALACRITTY/alacritty $ rustc -Vv\r\nrustc 1.30.1\r\nbinary: rustc\r\ncommit-hash: unknown\r\ncommit-date: unknown\r\nhost: x86_64-unknown-openbsd\r\nrelease: 1.30.1\r\nLLVM version: 6.0\r\n```\r\n\r\nIf on linux, are you using X11 or Wayland? No Linux and no Wayland :)\r\n\r\nI'm a happy user of alacritty on OpenBSD compiling from source. Thank you for all your work on alacritty!\r\n\r\nI usually recompile fairly often from the master branch (now that the scroll branch has been merged).\r\n\r\nToday I've tried to update but unfortunately the build fails:\r\n```bash\r\n   Compiling smithay-client-toolkit v0.4.1\r\nerror[E0432]: unresolved import `nix::sys::memfd`\r\n --> /home/user/.cargo/registry/src/github.com-1ecc6299db9ec823/smithay-client-toolkit-0.4.1/src/utils/mempool.rs\r\n  |\r\n4 | use nix::sys::memfd;\r\n  |     ^^^^^^^^^^^^^^^ no `memfd` in `sys`\r\n\r\nerror: aborting due to previous error\r\n```\r\nI don't have any rust experience but it seems that https://github.com/Smithay/client-toolkit doesn't take into account that `nix::sys::memfd` is [only available on Linux](https://github.com/nix-rust/nix/blob/master/src/sys/mod.rs#L34-L35). But since Wayland is Linux specific maybe it's an honest mistake :)\r\n\r\nI'm  not sure that's the best course of action, but would it be possible to not try and compile any Wayland things on the BSDs ?\r\n\r\nThe latest successful build of alacritty that I have on OpenBSD is from the **5th of November**, so this is a recent change somewhere in the dependency tree, maybe an updated version of one of the crates. \r\n\r\nFull build log:\r\n```bash\r\nuser ~/ALACRITTY/alacritty $ git pull\r\nUpdating f182afa..a68ce7a\r\nFast-forward\r\n CHANGELOG.md          |  6 ++++++\r\n Cargo.lock            | 30 +++++++++++++++---------------\r\n alacritty.yml         |  2 +-\r\n alacritty_macos.yml   |  4 ++--\r\n alacritty_windows.yml |  2 +-\r\n ci/before_deploy.sh   |  2 +-\r\n src/display.rs        | 60 ++++++++++++++++++++++++++++++++++++++++--------------------\r\n src/renderer/mod.rs   | 47 +++++++++++++----------------------------------\r\n 8 files changed, 79 insertions(+), 74 deletions(-)\r\n\r\nuser ~/ALACRITTY/alacritty $ cargo build --release\r\n Downloading proc-macro2 v0.4.23\r\n Downloading syn v0.15.20\r\n   Compiling nodrop v0.1.12\r\n   Compiling cfg-if v0.1.6\r\n   Compiling scopeguard v0.3.3\r\n   Compiling lazy_static v1.2.0\r\n   Compiling memoffset v0.2.1\r\n   Compiling libc v0.2.43\r\n   Compiling rayon-core v1.4.1\r\n   Compiling rayon v1.0.3\r\n   Compiling either v1.5.0\r\n   Compiling proc-macro2 v0.4.23\r\n   Compiling version_check v0.1.5\r\n   Compiling nix v0.11.0\r\n   Compiling num-traits v0.2.6\r\n   Compiling xml-rs v0.8.0\r\n   Compiling semver-parser v0.7.0\r\n   Compiling pkg-config v0.3.14\r\n   Compiling unicode-xid v0.1.0\r\n   Compiling num-integer v0.1.39\r\n   Compiling rand_core v0.3.0\r\n   Compiling void v1.0.2\r\n   Compiling bitflags v1.0.4\r\n   Compiling siphasher v0.2.3\r\n   Compiling byteorder v1.2.7\r\n   Compiling khronos_api v3.0.0\r\n   Compiling num-derive v0.2.3\r\n   Compiling num-iter v0.1.37\r\n   Compiling stable_deref_trait v1.1.1\r\n   Compiling downcast-rs v1.0.3\r\n   Compiling adler32 v1.0.3\r\n   Compiling khronos_api v2.2.0\r\n   Compiling same-file v1.0.4\r\n   Compiling num-rational v0.2.1\r\n   Compiling color_quant v1.0.1\r\n   Compiling xdg v2.1.0\r\n   Compiling lzw v0.10.0\r\n   Compiling scoped_threadpool v0.1.9\r\n   Compiling matches v0.1.8\r\n   Compiling serde v1.0.80\r\n   Compiling ucd-util v0.1.2\r\n   Compiling regex v1.0.6\r\n   Compiling ryu v0.2.7\r\n   Compiling foreign-types-shared v0.1.1\r\n   Compiling lazycell v1.2.0\r\n   Compiling utf8-ranges v1.0.2\r\n   Compiling percent-encoding v1.0.1\r\n   Compiling unicode-width v0.1.5\r\n   Compiling unicode-normalization v0.1.7\r\n   Compiling linked-hash-map v0.5.1\r\n   Compiling quick-error v1.2.2\r\n   Compiling slab v0.4.1\r\n   Compiling cgmath v0.16.1\r\n   Compiling termcolor v1.0.4\r\n   Compiling itoa v0.4.3\r\n   Compiling fnv v1.0.6\r\n   Compiling ansi_term v0.11.0\r\n   Compiling utf8parse v0.1.1\r\n   Compiling safemem v0.3.0\r\n   Compiling slab v0.3.0\r\n   Compiling vec_map v0.8.1\r\n   Compiling dtoa v0.4.3\r\n   Compiling lazycell v0.4.0\r\n   Compiling strsim v0.7.0\r\n   Compiling approx v0.1.1\r\n   Compiling static_assertions v0.2.5\r\n   Compiling arraydeque v0.4.3\r\n   Compiling copypasta v0.0.1 (/home/user/ALACRITTY/alacritty/copypasta)\r\n   Compiling arrayvec v0.4.7\r\n   Compiling thread_local v0.3.6\r\n   Compiling crossbeam-utils v0.2.2\r\n   Compiling log v0.4.6\r\n   Compiling num_cpus v1.8.0\r\n   Compiling memmap v0.6.2\r\n   Compiling iovec v0.1.2\r\n   Compiling shared_library v0.1.9\r\n   Compiling net2 v0.2.33\r\n   Compiling filetime v0.2.2\r\n   Compiling atty v0.2.11\r\n   Compiling rand v0.4.3\r\n   Compiling errno v0.2.4\r\n   Compiling unicase v1.4.2\r\n   Compiling memchr v2.1.1\r\n   Compiling semver v0.9.0\r\n   Compiling rand_core v0.2.2\r\n   Compiling xml-rs v0.7.0\r\n   Compiling unreachable v1.0.0\r\n   Compiling stb_truetype v0.2.4\r\n   Compiling owning_ref v0.3.3\r\n   Compiling inflate v0.4.3\r\n   Compiling deflate v0.7.19\r\n   Compiling freetype-sys v0.7.0\r\n   Compiling servo-fontconfig-sys v4.0.7\r\n   Compiling x11-dl v2.18.3\r\n   Compiling walkdir v2.2.7\r\n   Compiling gif v0.10.1\r\n   Compiling unicode-bidi v0.3.4\r\n   Compiling regex-syntax v0.6.3\r\n   Compiling foreign-types v0.3.2\r\n   Compiling wayland-scanner v0.21.4\r\n   Compiling textwrap v0.10.0\r\n   Compiling humantime v1.1.1\r\n   Compiling yaml-rust v0.4.2\r\n   Compiling base64 v0.9.3\r\n   Compiling vte v0.3.3\r\n   Compiling crossbeam-epoch v0.3.1\r\n   Compiling log v0.3.9\r\n   Compiling osmesa-sys v0.1.2\r\n   Compiling rand v0.5.5\r\n   Compiling mio v0.6.16\r\n   Compiling smallvec v0.6.5\r\n   Compiling lock_api v0.1.4\r\n   Compiling rustc_version v0.2.3\r\n   Compiling notify v4.0.6\r\n   Compiling clap v2.32.0\r\n   Compiling wayland-client v0.21.4\r\n   Compiling wayland-protocols v0.21.4\r\n   Compiling crossbeam-deque v0.2.0\r\n   Compiling approx v0.3.0\r\n   Compiling ordered-float v1.0.1\r\n   Compiling line_drawing v0.7.0\r\n   Compiling num-traits v0.1.43\r\n   Compiling gl_generator v0.10.0\r\n   Compiling parking_lot_core v0.3.1\r\n   Compiling gl_generator v0.9.0\r\n   Compiling quote v0.6.10\r\n   Compiling mio-more v0.1.0\r\n   Compiling idna v0.1.5\r\n   Compiling phf_shared v0.7.23\r\n   Compiling rusttype v0.7.2\r\n   Compiling euclid v0.17.3\r\n   Compiling aho-corasick v0.6.9\r\n   Compiling nom v4.1.1\r\n   Compiling serde_json v1.0.33\r\n   Compiling serde_yaml v0.8.7\r\n   Compiling glutin v0.19.0\r\n   Compiling phf_generator v0.7.23\r\n   Compiling phf v0.7.23\r\n   Compiling syn v0.15.20\r\n   Compiling alacritty v0.2.2 (/home/user/ALACRITTY/alacritty)\r\n   Compiling png v0.12.0\r\n   Compiling andrew v0.1.4\r\n   Compiling phf_codegen v0.7.23\r\n   Compiling parking_lot v0.6.4\r\n   Compiling terminfo v0.6.1\r\n   Compiling url v1.7.2\r\n   Compiling cc v1.0.25\r\n   Compiling jpeg-decoder v0.1.15\r\n   Compiling libloading v0.5.0\r\n   Compiling libz-sys v1.0.25\r\n   Compiling cmake v0.1.35\r\n   Compiling serde_derive v1.0.80\r\n   Compiling dlib v0.4.1\r\n   Compiling wayland-sys v0.21.4\r\n   Compiling env_logger v0.5.13\r\n   Compiling servo-freetype-sys v4.0.3 (/home/user/ALACRITTY/alacritty/servo-freetype-proxy)\r\n   Compiling freetype-rs v0.19.0\r\n   Compiling expat-sys v2.1.6\r\n   Compiling wayland-commons v0.21.4\r\n   Compiling servo-fontconfig v0.4.0\r\n   Compiling font v0.1.0 (/home/user/ALACRITTY/alacritty/font)\r\n   Compiling tiff v0.2.1\r\n   Compiling image v0.20.1\r\n   Compiling smithay-client-toolkit v0.4.1\r\nerror[E0432]: unresolved import `nix::sys::memfd`\r\n --> /home/user/.cargo/registry/src/github.com-1ecc6299db9ec823/smithay-client-toolkit-0.4.1/src/utils/mempool.rs\r\n  |\r\n4 | use nix::sys::memfd;\r\n  |     ^^^^^^^^^^^^^^^ no `memfd` in `sys`\r\n\r\nerror: aborting due to previous error\r\n\r\nFor more information about this error, try `rustc --explain E0432`.\r\nerror: Could not compile `smithay-client-toolkit`.\r\nwarning: build failed, waiting for other jobs to finish...\r\nerror: build failed\r\n```","closed_by":{"login":"chrisduerr","id":8886672,"node_id":"MDQ6VXNlcjg4ODY2NzI=","avatar_url":"https://avatars.githubusercontent.com/u/8886672?v=4","gravatar_id":"","url":"https://api.github.com/users/chrisduerr","html_url":"https://github.com/chrisduerr","followers_url":"https://api.github.com/users/chrisduerr/followers","following_url":"https://api.github.com/users/chrisduerr/following{/other_user}","gists_url":"https://api.github.com/users/chrisduerr/gists{/gist_id}","starred_url":"https://api.github.com/users/chrisduerr/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chrisduerr/subscriptions","organizations_url":"https://api.github.com/users/chrisduerr/orgs","repos_url":"https://api.github.com/users/chrisduerr/repos","events_url":"https://api.github.com/users/chrisduerr/events{/privacy}","received_events_url":"https://api.github.com/users/chrisduerr/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/alacritty/alacritty/issues/1784/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/alacritty/alacritty/issues/1784/timeline","performed_via_github_app":null,"state_reason":"completed"}