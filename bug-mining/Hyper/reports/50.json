{"url":"https://api.github.com/repos/hyperium/hyper/issues/508","repository_url":"https://api.github.com/repos/hyperium/hyper","labels_url":"https://api.github.com/repos/hyperium/hyper/issues/508/labels{/name}","comments_url":"https://api.github.com/repos/hyperium/hyper/issues/508/comments","events_url":"https://api.github.com/repos/hyperium/hyper/issues/508/events","html_url":"https://github.com/hyperium/hyper/issues/508","id":73508848,"node_id":"MDU6SXNzdWU3MzUwODg0OA==","number":508,"title":"Simple request always fails on Mac OS X","user":{"login":"wezm","id":21787,"node_id":"MDQ6VXNlcjIxNzg3","avatar_url":"https://avatars.githubusercontent.com/u/21787?v=4","gravatar_id":"","url":"https://api.github.com/users/wezm","html_url":"https://github.com/wezm","followers_url":"https://api.github.com/users/wezm/followers","following_url":"https://api.github.com/users/wezm/following{/other_user}","gists_url":"https://api.github.com/users/wezm/gists{/gist_id}","starred_url":"https://api.github.com/users/wezm/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wezm/subscriptions","organizations_url":"https://api.github.com/users/wezm/orgs","repos_url":"https://api.github.com/users/wezm/repos","events_url":"https://api.github.com/users/wezm/events{/privacy}","received_events_url":"https://api.github.com/users/wezm/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":125710197,"node_id":"MDU6TGFiZWwxMjU3MTAxOTc=","url":"https://api.github.com/repos/hyperium/hyper/labels/C-bug","name":"C-bug","color":"d93f0b","default":false,"description":"Category: bug. Something is wrong. This is bad!"},{"id":128399841,"node_id":"MDU6TGFiZWwxMjgzOTk4NDE=","url":"https://api.github.com/repos/hyperium/hyper/labels/A-client","name":"A-client","color":"fbca04","default":false,"description":"Area: client."}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":15,"created_at":"2015-05-06T04:16:14Z","updated_at":"2015-05-08T00:37:13Z","closed_at":"2015-05-07T20:13:41Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Given this small sample program basically copied from the README:\n\n``` rust\nextern crate hyper;\n\nuse std::io::Read;\n\nuse hyper::Client;\nuse hyper::header::Connection;\nuse hyper::header::ConnectionOption;\n\nfn main() {\n    // Create a client.\n    let mut client = Client::new();\n\n    // Creating an outgoing request.\n    let mut res = client.get(\"http://files.wezm.net/testpodcast.xml\")\n        // set a header\n        .header(Connection(vec![ConnectionOption::Close]))\n        // let 'er go!\n        .send().unwrap();\n\n    // Read the Response.\n    let mut body = String::new();\n    res.read_to_string(&mut body).unwrap();\n\n    println!(\"Response: {}\", body);\n}\n```\n\nThe request always fails with a HttpIoError (NotConnected): \n\n```\ncargo run --verbose                                                                                                                                      Fresh typeable v0.1.1\n       Fresh libc v0.1.6\n       Fresh bitflags v0.1.1\n       Fresh unicase v0.1.0\n       Fresh traitobject v0.0.1\n       Fresh lazy_static v0.1.10\n       Fresh pkg-config v0.3.4\n       Fresh gcc v0.3.5\n       Fresh httparse v0.1.1\n       Fresh rustc-serialize v0.3.14\n       Fresh matches v0.1.2\n       Fresh log v0.3.1\n       Fresh num_cpus v0.2.4\n       Fresh url v0.2.33\n       Fresh mime v0.0.11\n       Fresh openssl-sys v0.6.2\n       Fresh time v0.1.25\n       Fresh openssl v0.6.2\n       Fresh cookie v0.1.20\n       Fresh hyper v0.3.16\n       Fresh request v0.1.0 (file:///Users/wmoore/Projects/Musicast/crawler/request)\n     Running `target/debug/request`\nthread '<main>' panicked at 'called `Result::unwrap()` on an `Err` value: HttpIoError(Error { repr: Os(57) })', /Users/rustbuild/src/rust-buildbot/slave/beta-dist-rustc-mac/build/src/libcore/result.rs:729\nProcess didn't exit successfully: `target/debug/request` (exit code: 101)\n```\n\nThis is with OS X 10.10.3 (14D136) and `rustc 1.0.0-beta.4 (850151a75 2015-04-30) (built 2015-04-30)`. The same program works when run on a Ubuntu 14.04 VM with the same version of rust.\n\nIt seems somewhat dependent on the URL, although more fail than don't. E.g. these work:\n- http://www.itmedia.co.jp (albeit it fails later because the character set is Shift-JIS)\n- http://bellroy.com/\n\nThese do not:\n- http://google.com/\n- http://feeds.feedburner.com/oneminutefrench\n- http://files.wezm.net/testpodcast.xml\n- http://www.marksherry.net/outburst_radio/outburst_radioshow_podcast.xml\n- http://drclaw.net/feed/atom/\n","closed_by":{"login":"seanmonstar","id":51479,"node_id":"MDQ6VXNlcjUxNDc5","avatar_url":"https://avatars.githubusercontent.com/u/51479?v=4","gravatar_id":"","url":"https://api.github.com/users/seanmonstar","html_url":"https://github.com/seanmonstar","followers_url":"https://api.github.com/users/seanmonstar/followers","following_url":"https://api.github.com/users/seanmonstar/following{/other_user}","gists_url":"https://api.github.com/users/seanmonstar/gists{/gist_id}","starred_url":"https://api.github.com/users/seanmonstar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seanmonstar/subscriptions","organizations_url":"https://api.github.com/users/seanmonstar/orgs","repos_url":"https://api.github.com/users/seanmonstar/repos","events_url":"https://api.github.com/users/seanmonstar/events{/privacy}","received_events_url":"https://api.github.com/users/seanmonstar/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/hyperium/hyper/issues/508/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/hyperium/hyper/issues/508/timeline","performed_via_github_app":null,"state_reason":"completed"}