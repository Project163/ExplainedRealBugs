{"url":"https://api.github.com/repos/hyperium/hyper/issues/3110","repository_url":"https://api.github.com/repos/hyperium/hyper","labels_url":"https://api.github.com/repos/hyperium/hyper/issues/3110/labels{/name}","comments_url":"https://api.github.com/repos/hyperium/hyper/issues/3110/comments","events_url":"https://api.github.com/repos/hyperium/hyper/issues/3110/events","html_url":"https://github.com/hyperium/hyper/issues/3110","id":1521299637,"node_id":"I_kwDOAWaYQc5arTC1","number":3110,"title":"hyper should use its own IO traits","user":{"login":"seanmonstar","id":51479,"node_id":"MDQ6VXNlcjUxNDc5","avatar_url":"https://avatars.githubusercontent.com/u/51479?v=4","gravatar_id":"","url":"https://api.github.com/users/seanmonstar","html_url":"https://github.com/seanmonstar","followers_url":"https://api.github.com/users/seanmonstar/followers","following_url":"https://api.github.com/users/seanmonstar/following{/other_user}","gists_url":"https://api.github.com/users/seanmonstar/gists{/gist_id}","starred_url":"https://api.github.com/users/seanmonstar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seanmonstar/subscriptions","organizations_url":"https://api.github.com/users/seanmonstar/orgs","repos_url":"https://api.github.com/users/seanmonstar/repos","events_url":"https://api.github.com/users/seanmonstar/events{/privacy}","received_events_url":"https://api.github.com/users/seanmonstar/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":694496598,"node_id":"MDU6TGFiZWw2OTQ0OTY1OTg=","url":"https://api.github.com/repos/hyperium/hyper/labels/C-feature","name":"C-feature","color":"f9d0c4","default":false,"description":"Category: feature. This is adding a new feature."},{"id":694496799,"node_id":"MDU6TGFiZWw2OTQ0OTY3OTk=","url":"https://api.github.com/repos/hyperium/hyper/labels/E-medium","name":"E-medium","color":"c2e0c6","default":false,"description":"Effort: medium. Some knowledge of how hyper internal works would be useful."},{"id":1361563623,"node_id":"MDU6TGFiZWwxMzYxNTYzNjIz","url":"https://api.github.com/repos/hyperium/hyper/labels/B-breaking-change","name":"B-breaking-change","color":"1d76db","default":false,"description":"Blocked: this is an \"API breaking change\"."},{"id":1501074586,"node_id":"MDU6TGFiZWwxNTAxMDc0NTg2","url":"https://api.github.com/repos/hyperium/hyper/labels/A-dependencies","name":"A-dependencies","color":"fbca04","default":false,"description":"Area: library dependencies."}],"state":"closed","locked":false,"assignee":{"login":"seanmonstar","id":51479,"node_id":"MDQ6VXNlcjUxNDc5","avatar_url":"https://avatars.githubusercontent.com/u/51479?v=4","gravatar_id":"","url":"https://api.github.com/users/seanmonstar","html_url":"https://github.com/seanmonstar","followers_url":"https://api.github.com/users/seanmonstar/followers","following_url":"https://api.github.com/users/seanmonstar/following{/other_user}","gists_url":"https://api.github.com/users/seanmonstar/gists{/gist_id}","starred_url":"https://api.github.com/users/seanmonstar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seanmonstar/subscriptions","organizations_url":"https://api.github.com/users/seanmonstar/orgs","repos_url":"https://api.github.com/users/seanmonstar/repos","events_url":"https://api.github.com/users/seanmonstar/events{/privacy}","received_events_url":"https://api.github.com/users/seanmonstar/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"seanmonstar","id":51479,"node_id":"MDQ6VXNlcjUxNDc5","avatar_url":"https://avatars.githubusercontent.com/u/51479?v=4","gravatar_id":"","url":"https://api.github.com/users/seanmonstar","html_url":"https://github.com/seanmonstar","followers_url":"https://api.github.com/users/seanmonstar/followers","following_url":"https://api.github.com/users/seanmonstar/following{/other_user}","gists_url":"https://api.github.com/users/seanmonstar/gists{/gist_id}","starred_url":"https://api.github.com/users/seanmonstar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seanmonstar/subscriptions","organizations_url":"https://api.github.com/users/seanmonstar/orgs","repos_url":"https://api.github.com/users/seanmonstar/repos","events_url":"https://api.github.com/users/seanmonstar/events{/privacy}","received_events_url":"https://api.github.com/users/seanmonstar/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/hyperium/hyper/milestones/12","html_url":"https://github.com/hyperium/hyper/milestone/12","labels_url":"https://api.github.com/repos/hyperium/hyper/milestones/12/labels","id":9086227,"node_id":"MI_kwDOAWaYQc4AiqUT","number":12,"title":"1.0 RC4","description":"","creator":{"login":"seanmonstar","id":51479,"node_id":"MDQ6VXNlcjUxNDc5","avatar_url":"https://avatars.githubusercontent.com/u/51479?v=4","gravatar_id":"","url":"https://api.github.com/users/seanmonstar","html_url":"https://github.com/seanmonstar","followers_url":"https://api.github.com/users/seanmonstar/followers","following_url":"https://api.github.com/users/seanmonstar/following{/other_user}","gists_url":"https://api.github.com/users/seanmonstar/gists{/gist_id}","starred_url":"https://api.github.com/users/seanmonstar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seanmonstar/subscriptions","organizations_url":"https://api.github.com/users/seanmonstar/orgs","repos_url":"https://api.github.com/users/seanmonstar/repos","events_url":"https://api.github.com/users/seanmonstar/events{/privacy}","received_events_url":"https://api.github.com/users/seanmonstar/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":6,"state":"closed","created_at":"2023-02-24T15:36:53Z","updated_at":"2023-07-26T18:59:52Z","due_on":null,"closed_at":"2023-07-26T18:59:52Z"},"comments":36,"created_at":"2023-01-05T19:45:46Z","updated_at":"2023-11-15T21:05:52Z","closed_at":"2023-07-10T18:11:08Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"This was actually brought up as [an unresolved question in the ROADMAP](https://github.com/hyperium/hyper/blob/master/docs/ROADMAP.md#should-there-be-hyperio-traits). I think I mentally dismissed it at some point as just being annoying, but in the past week as I've thought about how we could make use of io-uring in hyper, I've been thinking about this again. If nothing else, this _should_ be a public record of the decision, whether for or against. This will help others, including Future Us.\r\n\r\nAll other integration with a runtime (Tokio) has been removed, and helpers exist in `hyper-util`. hyper 1.0 (as of of rc.2) still depends on `tokio` with all features turned off, to ask that IO transports implement `tokio::io::{AsyncRead, AsyncWrite}`. By doing so, it makes it _easier_ for users to simply supply a `tokio::net::TcpStream`. But, let me at least bring up some downsides.\r\n\r\n## Reasons for `hyper::io::{AsyncRead, AsyncWrite}`\r\n\r\n- For people integrating with _other_ runtimes (curl, fuchsia, etc), it can feel odd to need to pull in `tokio` just to implement the IO traits hyper wants. People have expressed concern that they don't want to compile multiple runtimes. While we can explain it's just the traits (when the features are turned off), owning the traits could make people less confused.\r\n- If we own the traits, we can decide to try different things that perhaps Tokio itself wouldn't want to do. This includes differences in opinion of how vectored reads and writes should be supported, but also means we could try to provide specialization paths for completion-based IO (such as io-uring).\r\n\r\nWe can provide `hyper_util::io::Tokio(T)` that implements the traits for Tokio types, to reduce friction.","closed_by":{"login":"seanmonstar","id":51479,"node_id":"MDQ6VXNlcjUxNDc5","avatar_url":"https://avatars.githubusercontent.com/u/51479?v=4","gravatar_id":"","url":"https://api.github.com/users/seanmonstar","html_url":"https://github.com/seanmonstar","followers_url":"https://api.github.com/users/seanmonstar/followers","following_url":"https://api.github.com/users/seanmonstar/following{/other_user}","gists_url":"https://api.github.com/users/seanmonstar/gists{/gist_id}","starred_url":"https://api.github.com/users/seanmonstar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seanmonstar/subscriptions","organizations_url":"https://api.github.com/users/seanmonstar/orgs","repos_url":"https://api.github.com/users/seanmonstar/repos","events_url":"https://api.github.com/users/seanmonstar/events{/privacy}","received_events_url":"https://api.github.com/users/seanmonstar/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/hyperium/hyper/issues/3110/reactions","total_count":29,"+1":29,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/hyperium/hyper/issues/3110/timeline","performed_via_github_app":null,"state_reason":"completed"}