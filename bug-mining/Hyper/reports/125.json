{"url":"https://api.github.com/repos/hyperium/hyper/issues/1269","repository_url":"https://api.github.com/repos/hyperium/hyper","labels_url":"https://api.github.com/repos/hyperium/hyper/issues/1269/labels{/name}","comments_url":"https://api.github.com/repos/hyperium/hyper/issues/1269/comments","events_url":"https://api.github.com/repos/hyperium/hyper/issues/1269/events","html_url":"https://github.com/hyperium/hyper/issues/1269","id":243779505,"node_id":"MDU6SXNzdWUyNDM3Nzk1MDU=","number":1269,"title":"Panic while formatting headers","user":{"login":"3Hren","id":969900,"node_id":"MDQ6VXNlcjk2OTkwMA==","avatar_url":"https://avatars.githubusercontent.com/u/969900?v=4","gravatar_id":"","url":"https://api.github.com/users/3Hren","html_url":"https://github.com/3Hren","followers_url":"https://api.github.com/users/3Hren/followers","following_url":"https://api.github.com/users/3Hren/following{/other_user}","gists_url":"https://api.github.com/users/3Hren/gists{/gist_id}","starred_url":"https://api.github.com/users/3Hren/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/3Hren/subscriptions","organizations_url":"https://api.github.com/users/3Hren/orgs","repos_url":"https://api.github.com/users/3Hren/repos","events_url":"https://api.github.com/users/3Hren/events{/privacy}","received_events_url":"https://api.github.com/users/3Hren/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":125710197,"node_id":"MDU6TGFiZWwxMjU3MTAxOTc=","url":"https://api.github.com/repos/hyperium/hyper/labels/C-bug","name":"C-bug","color":"d93f0b","default":false,"description":"Category: bug. Something is wrong. This is bad!"},{"id":138216005,"node_id":"MDU6TGFiZWwxMzgyMTYwMDU=","url":"https://api.github.com/repos/hyperium/hyper/labels/A-headers","name":"A-headers","color":"fbca04","default":false,"description":"Area: headers."}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2017-07-18T16:41:21Z","updated_at":"2018-05-10T00:14:59Z","closed_at":"2018-05-10T00:14:59Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"My hyper use case is a reverse proxy between HTTP and binary protocol. Unfortunately sometimes while converting headers into a vector of strings, it panics:\r\n\r\n```\r\nthread 'worker 02' panicked at 'a Display implementation return an error unexpectedly: Error', /checkout/src/libcore/result.rs:859\r\nnote: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.\r\nstack backtrace:\r\n   0: std::sys::imp::backtrace::tracing::imp::unwind_backtrace\r\n             at /checkout/src/libstd/sys/unix/backtrace/tracing/gcc_s.rs:49\r\n   1: std::sys_common::backtrace::_print\r\n             at /checkout/src/libstd/sys_common/backtrace.rs:71\r\n   2: std::panicking::default_hook::{{closure}}\r\n             at /checkout/src/libstd/sys_common/backtrace.rs:60\r\n             at /checkout/src/libstd/panicking.rs:355\r\n   3: std::panicking::default_hook\r\n             at /checkout/src/libstd/panicking.rs:371\r\n   4: std::panicking::rust_panic_with_hook\r\n             at /checkout/src/libstd/panicking.rs:549\r\n   5: std::panicking::begin_panic\r\n             at /checkout/src/libstd/panicking.rs:511\r\n   6: std::panicking::begin_panic_fmt\r\n             at /checkout/src/libstd/panicking.rs:495\r\n   7: rust_begin_unwind\r\n             at /checkout/src/libstd/panicking.rs:471\r\n   8: core::panicking::panic_fmt\r\n             at /checkout/src/libcore/panicking.rs:69\r\n   9: core::result::unwrap_failed\r\n             at /checkout/src/libcore/macros.rs:29\r\n\r\n10: <core::iter::Map<I, F> as core::iter::iterator::Iterator>::next\r\n             at /checkout/src/libcore/result.rs:761\r\n             at /checkout/src/libcollections/string.rs:2027\r\n             at /home/esafronov/.cargo/git/checkouts/hyper-817b53a166fc1c58/fc5b9cc/src/header/mod.rs:609\r\n             at src/route/app.rs:278\r\n             at /checkout/src/libcore/ops.rs:2711\r\n             at /checkout/src/libcore/option.rs:392\r\n             at /checkout/src/libcore/iter/mod.rs:1046\r\n  11: cocaine_http_proxy::route::app::AppRequest::new\r\n             at /checkout/src/libcollections/vec.rs:1899\r\n             at /checkout/src/libcollections/vec.rs:1796\r\n             at /checkout/src/libcollections/vec.rs:1791\r\n             at /checkout/src/libcollections/vec.rs:1692\r\n             at /checkout/src/libcore/iter/iterator.rs:1255\r\n             at src/route/app.rs:276\r\n  12: <cocaine_http_proxy::route::app::AppRoute<L> as cocaine_http_proxy::route::Route>::process\r\n             at src/route/app.rs:173\r\n             at src/route/app.rs:197\r\n  13: cocaine_http_proxy::route::Router::process\r\n             at src/route/mod.rs:90\r\n  14: <cocaine_http_proxy::service::cocaine::ProxyService as tokio_service::Service>::call\r\n             at src/service/cocaine.rs:41\r\n  15: <tokio_proto::streaming::pipeline::server::Dispatch<S, T, P> as tokio_proto::streaming::pipeline::advanced::Dispatch>::dispatch\r\n             at src/service/cocaine.rs:110\r\n             at src/server/mod.rs:90\r\n             at /home/esafronov/.cargo/git/checkouts/hyper-817b53a166fc1c58/fc5b9cc/src/server/mod.rs:335\r\n             at /home/esafronov/.cargo/registry/src/github.com-1ecc6299db9ec823/tokio-proto-0.1.1/src/streaming/pipeline/server.rs:124\r\n  16: <tokio_proto::streaming::pipeline::advanced::Pipeline<T> as futures::future::Future>::poll\r\n             at /home/esafronov/.cargo/registry/src/github.com-1ecc6299db9ec823/tokio-proto-0.1.1/src/streaming/pipeline/advanced.rs:171\r\n             at /home/esafronov/.cargo/registry/src/github.com-1ecc6299db9ec823/tokio-proto-0.1.1/src/streaming/pipeline/advanced.rs:121\r\n             at /home/esafronov/.cargo/registry/src/github.com-1ecc6299db9ec823/tokio-proto-0.1.1/src/streaming/pipeline/advanced.rs:376\r\n  17: <futures::future::map_err::MapErr<A, F> as futures::future::Future>::poll\r\n             at /home/esafronov/.cargo/registry/src/github.com-1ecc6299db9ec823/futures-0.1.14/src/future/chain.rs:32\r\n             at /home/esafronov/.cargo/registry/src/github.com-1ecc6299db9ec823/futures-0.1.14/src/future/and_then.rs:32\r\n             at /home/esafronov/.cargo/registry/src/github.com-1ecc6299db9ec823/futures-0.1.14/src/future/map_err.rs:30\r\n  18: tokio_core::reactor::Core::poll\r\n             at /home/esafronov/.cargo/registry/src/github.com-1ecc6299db9ec823/futures-0.1.14/src/future/mod.rs:107\r\n             at /home/esafronov/.cargo/registry/src/github.com-1ecc6299db9ec823/futures-0.1.14/src/task_impl/mod.rs:291\r\n             at /home/esafronov/.cargo/registry/src/github.com-1ecc6299db9ec823/futures-0.1.14/src/task_impl/mod.rs:352\r\n             at /home/esafronov/.cargo/registry/src/github.com-1ecc6299db9ec823/futures-0.1.14/src/task_impl/std/mod.rs:90\r\n             at /home/esafronov/.cargo/registry/src/github.com-1ecc6299db9ec823/futures-0.1.14/src/task_impl/mod.rs:352\r\n             at /home/esafronov/.cargo/registry/src/github.com-1ecc6299db9ec823/futures-0.1.14/src/task_impl/mod.rs:291\r\n             at /home/esafronov/.cargo/registry/src/github.com-1ecc6299db9ec823/tokio-core-0.1.8/src/reactor/mod.rs:356\r\n             at /home/esafronov/.cargo/registry/src/github.com-1ecc6299db9ec823/scoped-tls-0.1.0/src/lib.rs:135\r\n             at /home/esafronov/.cargo/registry/src/github.com-1ecc6299db9ec823/tokio-core-0.1.8/src/reactor/mod.rs:355\r\n             at /home/esafronov/.cargo/registry/src/github.com-1ecc6299db9ec823/tokio-core-0.1.8/src/reactor/mod.rs:316\r\n             at /home/esafronov/.cargo/registry/src/github.com-1ecc6299db9ec823/tokio-core-0.1.8/src/reactor/mod.rs:304\r\n```","closed_by":{"login":"seanmonstar","id":51479,"node_id":"MDQ6VXNlcjUxNDc5","avatar_url":"https://avatars.githubusercontent.com/u/51479?v=4","gravatar_id":"","url":"https://api.github.com/users/seanmonstar","html_url":"https://github.com/seanmonstar","followers_url":"https://api.github.com/users/seanmonstar/followers","following_url":"https://api.github.com/users/seanmonstar/following{/other_user}","gists_url":"https://api.github.com/users/seanmonstar/gists{/gist_id}","starred_url":"https://api.github.com/users/seanmonstar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seanmonstar/subscriptions","organizations_url":"https://api.github.com/users/seanmonstar/orgs","repos_url":"https://api.github.com/users/seanmonstar/repos","events_url":"https://api.github.com/users/seanmonstar/events{/privacy}","received_events_url":"https://api.github.com/users/seanmonstar/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/hyperium/hyper/issues/1269/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/hyperium/hyper/issues/1269/timeline","performed_via_github_app":null,"state_reason":"completed"}