{"url":"https://api.github.com/repos/hyperium/hyper/issues/437","repository_url":"https://api.github.com/repos/hyperium/hyper","labels_url":"https://api.github.com/repos/hyperium/hyper/issues/437/labels{/name}","comments_url":"https://api.github.com/repos/hyperium/hyper/issues/437/comments","events_url":"https://api.github.com/repos/hyperium/hyper/issues/437/events","html_url":"https://github.com/hyperium/hyper/issues/437","id":66731405,"node_id":"MDU6SXNzdWU2NjczMTQwNQ==","number":437,"title":"HttpTooLargeError after the response","user":{"login":"mikedilger","id":1669069,"node_id":"MDQ6VXNlcjE2NjkwNjk=","avatar_url":"https://avatars.githubusercontent.com/u/1669069?v=4","gravatar_id":"","url":"https://api.github.com/users/mikedilger","html_url":"https://github.com/mikedilger","followers_url":"https://api.github.com/users/mikedilger/followers","following_url":"https://api.github.com/users/mikedilger/following{/other_user}","gists_url":"https://api.github.com/users/mikedilger/gists{/gist_id}","starred_url":"https://api.github.com/users/mikedilger/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikedilger/subscriptions","organizations_url":"https://api.github.com/users/mikedilger/orgs","repos_url":"https://api.github.com/users/mikedilger/repos","events_url":"https://api.github.com/users/mikedilger/events{/privacy}","received_events_url":"https://api.github.com/users/mikedilger/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2015-04-06T23:36:00Z","updated_at":"2015-04-16T03:17:32Z","closed_at":"2015-04-16T03:17:32Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Ever since the new buffering code, I get `HttpTooLargeError`s after almost every response.  It is after the handler returns and the response has been sent, and so the site continues to function.  But clearly something is amiss.   The requests are rather normal small requests, nothing large, nothing fancy.\n\n```\nERROR:hyper::server: request error = HttpTooLargeError\n```\n\nin `server/mod.rs` `handle_connection()` `while keep_alive` loop, the `Request::new()` calls `http::parse_request()` which fails with HttpTooLargeError at some point around this keep_alive loop, which means that `read_into_buf()` must have returned `Ok(0)` which means that `self.cap < v.capacity()`, but I haven't looked further as to why that is for small requests that are only handled once.\n","closed_by":{"login":"seanmonstar","id":51479,"node_id":"MDQ6VXNlcjUxNDc5","avatar_url":"https://avatars.githubusercontent.com/u/51479?v=4","gravatar_id":"","url":"https://api.github.com/users/seanmonstar","html_url":"https://github.com/seanmonstar","followers_url":"https://api.github.com/users/seanmonstar/followers","following_url":"https://api.github.com/users/seanmonstar/following{/other_user}","gists_url":"https://api.github.com/users/seanmonstar/gists{/gist_id}","starred_url":"https://api.github.com/users/seanmonstar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seanmonstar/subscriptions","organizations_url":"https://api.github.com/users/seanmonstar/orgs","repos_url":"https://api.github.com/users/seanmonstar/repos","events_url":"https://api.github.com/users/seanmonstar/events{/privacy}","received_events_url":"https://api.github.com/users/seanmonstar/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/hyperium/hyper/issues/437/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/hyperium/hyper/issues/437/timeline","performed_via_github_app":null,"state_reason":"completed"}