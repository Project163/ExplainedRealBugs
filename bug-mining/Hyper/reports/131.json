{"url":"https://api.github.com/repos/hyperium/hyper/issues/1339","repository_url":"https://api.github.com/repos/hyperium/hyper","labels_url":"https://api.github.com/repos/hyperium/hyper/issues/1339/labels{/name}","comments_url":"https://api.github.com/repos/hyperium/hyper/issues/1339/comments","events_url":"https://api.github.com/repos/hyperium/hyper/issues/1339/events","html_url":"https://github.com/hyperium/hyper/issues/1339","id":261526532,"node_id":"MDU6SXNzdWUyNjE1MjY1MzI=","number":1339,"title":"panic on Option::unwrap in pool","user":{"login":"alex","id":772,"node_id":"MDQ6VXNlcjc3Mg==","avatar_url":"https://avatars.githubusercontent.com/u/772?v=4","gravatar_id":"","url":"https://api.github.com/users/alex","html_url":"https://github.com/alex","followers_url":"https://api.github.com/users/alex/followers","following_url":"https://api.github.com/users/alex/following{/other_user}","gists_url":"https://api.github.com/users/alex/gists{/gist_id}","starred_url":"https://api.github.com/users/alex/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alex/subscriptions","organizations_url":"https://api.github.com/users/alex/orgs","repos_url":"https://api.github.com/users/alex/repos","events_url":"https://api.github.com/users/alex/events{/privacy}","received_events_url":"https://api.github.com/users/alex/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2017-09-29T04:06:26Z","updated_at":"2017-09-29T04:52:32Z","closed_at":"2017-09-29T04:45:58Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"This appears to have started when I upgraded to the latest hyper. I don't see my own code anywhere in the backtrace, so I'm inferring that it's a hyper bug:\r\n\r\n```\r\nthread 'main' panicked at 'called `Option::unwrap()` on a `None` value', src/libcore/option.rs:335:20\r\nstack backtrace:\r\n   0:        0x102294dc3 - std::sys::imp::backtrace::tracing::imp::unwind_backtrace::h53146987acc82352\r\n   1:        0x102290ef0 - std::sys_common::backtrace::_print::h9fa78c974a2ee44c\r\n   2:        0x102299323 - std::panicking::default_hook::{{closure}}::haef816838063b9ba\r\n   3:        0x102299022 - std::panicking::default_hook::hcc910ee5a6164755\r\n   4:        0x102299832 - std::panicking::rust_panic_with_hook::h93c60c1beb086750\r\n   5:        0x102299694 - std::panicking::begin_panic::hd4fcfecbdb093b17\r\n   6:        0x1022995e2 - std::panicking::begin_panic_fmt::hff397ffc5d9f33f7\r\n   7:        0x10229954a - rust_begin_unwind\r\n   8:        0x1022d2723 - core::panicking::panic_fmt::h76b3ac969f0f366a\r\n   9:        0x1022d2626 - core::panicking::panic::hcf2c392d46bca8f7\r\n  10:        0x101528cd4 - <core::option::Option<T>>::unwrap::hd61c65853ac6d99e\r\n  11:        0x10154236e - <hyper::client::pool::Pool<T>>::put::h104056516e32b370\r\n  12:        0x10168b523 - <hyper::client::pool::Pooled<T> as hyper::http::conn::KeepAlive>::idle::h1f576d2f062bfca3\r\n  13:        0x1015e1f6c - <hyper::http::conn::State<B, K>>::idle::hc45f7864e6ce7579\r\n  14:        0x1015e1bfc - <hyper::http::conn::State<B, K>>::try_keep_alive::hc582aa4338b72a9a\r\n  15:        0x10162db23 - <hyper::http::conn::Conn<I, B, T, K>>::try_keep_alive::h6fc8a60a6772d637\r\n  16:        0x10162eb7d - <hyper::http::conn::Conn<I, B, T, K>>::flush::h37353375109d8ce3\r\n  17:        0x1016a567d - <hyper::http::conn::Conn<I, B, T, K> as futures::sink::Sink>::poll_complete::hb8230f47c6eacafd\r\n  18:        0x1014e37bb - <tokio_proto::streaming::pipeline::advanced::DispatchSink<T> as futures::sink::Sink>::poll_complete::h815f076bc1b07245\r\n  19:        0x101682fdd - <tokio_proto::buffer_one::BufferOne<S> as futures::sink::Sink>::poll_complete::h67c5447465d63605\r\n  20:        0x10164b46e - <tokio_proto::streaming::pipeline::advanced::Pipeline<T>>::flush::h5623b82faffc5197\r\n  21:        0x1014e3b49 - <tokio_proto::streaming::pipeline::advanced::Pipeline<T> as futures::future::Future>::poll::h43e4952b1a5c4dee\r\n  22:        0x10161df7b - <futures::future::chain::Chain<A, B, C>>::poll::hcb7869ced9924ad4\r\n  23:        0x1014df0f3 - <futures::future::and_then::AndThen<A, B, F> as futures::future::Future>::poll::ha20676c3c286bdd1\r\n  24:        0x10169d0c9 - <futures::future::map_err::MapErr<A, F> as futures::future::Future>::poll::ha1a36313f2c34dae\r\n  25:        0x101ec188f - <alloc::boxed::Box<F> as futures::future::Future>::poll::h2884fabaebab6a35\r\n  26:        0x101ea828c - <futures::task_impl::Spawn<F>>::poll_future_notify::{{closure}}::hb9669ecadcb6f48c\r\n  27:        0x101ea87bf - <futures::task_impl::Spawn<T>>::enter::{{closure}}::hc1aee0be7941c9ee\r\n  28:        0x101ec2e96 - futures::task_impl::std::set::he6c9f8d7feab2043\r\n  29:        0x101ea851e - <futures::task_impl::Spawn<T>>::enter::h0c79a7d0874dbaa3\r\n  30:        0x101ea8204 - <futures::task_impl::Spawn<F>>::poll_future_notify::h52fb2561b652d7b1\r\n  31:        0x101ed067f - tokio_core::reactor::Core::dispatch_task::{{closure}}::h6447a3e27f8c97b4\r\n  32:        0x101ea4f37 - <scoped_tls::ScopedKey<T>>::set::h550990fcd7587663\r\n  33:        0x101ecffe4 - tokio_core::reactor::Core::dispatch_task::h591bbb5c782f2605\r\n  34:        0x101ecf2e5 - tokio_core::reactor::Core::dispatch::hca6535fe542a6c88\r\n  35:        0x101ecee5a - tokio_core::reactor::Core::poll::h37de5cd7e1741e52\r\n  36:        0x1014eb533 - tokio_core::reactor::Core::run::h12c40a17a91c483e\r\n  37:        0x1016a8a42 - ct_tools::check::h059b4156f88f98bb\r\n  38:        0x1016ac1eb - ct_tools::main::h216dde36947fa9eb\r\n```\r\n\r\nThis is reproducing 100% (right now -- for all I know this is somehow dependendent on the remote server) with the code from https://github.com/alex/ct-tools: `env RUST_BACKTRACE=full ./target/debug/ct-tools check certs/*.pem`","closed_by":{"login":"seanmonstar","id":51479,"node_id":"MDQ6VXNlcjUxNDc5","avatar_url":"https://avatars.githubusercontent.com/u/51479?v=4","gravatar_id":"","url":"https://api.github.com/users/seanmonstar","html_url":"https://github.com/seanmonstar","followers_url":"https://api.github.com/users/seanmonstar/followers","following_url":"https://api.github.com/users/seanmonstar/following{/other_user}","gists_url":"https://api.github.com/users/seanmonstar/gists{/gist_id}","starred_url":"https://api.github.com/users/seanmonstar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seanmonstar/subscriptions","organizations_url":"https://api.github.com/users/seanmonstar/orgs","repos_url":"https://api.github.com/users/seanmonstar/repos","events_url":"https://api.github.com/users/seanmonstar/events{/privacy}","received_events_url":"https://api.github.com/users/seanmonstar/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/hyperium/hyper/issues/1339/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/hyperium/hyper/issues/1339/timeline","performed_via_github_app":null,"state_reason":"completed"}