[{"url":"https://api.github.com/repos/hyperium/hyper/issues/comments/350782825","html_url":"https://github.com/hyperium/hyper/issues/1397#issuecomment-350782825","issue_url":"https://api.github.com/repos/hyperium/hyper/issues/1397","id":350782825,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MDc4MjgyNQ==","user":{"login":"sfackler","id":1455697,"node_id":"MDQ6VXNlcjE0NTU2OTc=","avatar_url":"https://avatars.githubusercontent.com/u/1455697?v=4","gravatar_id":"","url":"https://api.github.com/users/sfackler","html_url":"https://github.com/sfackler","followers_url":"https://api.github.com/users/sfackler/followers","following_url":"https://api.github.com/users/sfackler/following{/other_user}","gists_url":"https://api.github.com/users/sfackler/gists{/gist_id}","starred_url":"https://api.github.com/users/sfackler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sfackler/subscriptions","organizations_url":"https://api.github.com/users/sfackler/orgs","repos_url":"https://api.github.com/users/sfackler/repos","events_url":"https://api.github.com/users/sfackler/events{/privacy}","received_events_url":"https://api.github.com/users/sfackler/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-11T16:46:28Z","updated_at":"2017-12-11T16:46:28Z","body":"no_proto isn't the default.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/hyperium/hyper/issues/comments/350782825/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sfackler","id":1455697,"node_id":"MDQ6VXNlcjE0NTU2OTc=","avatar_url":"https://avatars.githubusercontent.com/u/1455697?v=4","gravatar_id":"","url":"https://api.github.com/users/sfackler","html_url":"https://github.com/sfackler","followers_url":"https://api.github.com/users/sfackler/followers","following_url":"https://api.github.com/users/sfackler/following{/other_user}","gists_url":"https://api.github.com/users/sfackler/gists{/gist_id}","starred_url":"https://api.github.com/users/sfackler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sfackler/subscriptions","organizations_url":"https://api.github.com/users/sfackler/orgs","repos_url":"https://api.github.com/users/sfackler/repos","events_url":"https://api.github.com/users/sfackler/events{/privacy}","received_events_url":"https://api.github.com/users/sfackler/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/hyperium/hyper/issues/comments/350784835","html_url":"https://github.com/hyperium/hyper/issues/1397#issuecomment-350784835","issue_url":"https://api.github.com/repos/hyperium/hyper/issues/1397","id":350784835,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MDc4NDgzNQ==","user":{"login":"mthebridge","id":13729669,"node_id":"MDQ6VXNlcjEzNzI5NjY5","avatar_url":"https://avatars.githubusercontent.com/u/13729669?v=4","gravatar_id":"","url":"https://api.github.com/users/mthebridge","html_url":"https://github.com/mthebridge","followers_url":"https://api.github.com/users/mthebridge/followers","following_url":"https://api.github.com/users/mthebridge/following{/other_user}","gists_url":"https://api.github.com/users/mthebridge/gists{/gist_id}","starred_url":"https://api.github.com/users/mthebridge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mthebridge/subscriptions","organizations_url":"https://api.github.com/users/mthebridge/orgs","repos_url":"https://api.github.com/users/mthebridge/repos","events_url":"https://api.github.com/users/mthebridge/events{/privacy}","received_events_url":"https://api.github.com/users/mthebridge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-11T16:52:21Z","updated_at":"2017-12-11T16:52:21Z","body":"Ah - apologies, so it isn't (double negatives confused me!).  Just tried enabling `no_proto()` and makes no difference.  ","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/hyperium/hyper/issues/comments/350784835/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mthebridge","id":13729669,"node_id":"MDQ6VXNlcjEzNzI5NjY5","avatar_url":"https://avatars.githubusercontent.com/u/13729669?v=4","gravatar_id":"","url":"https://api.github.com/users/mthebridge","html_url":"https://github.com/mthebridge","followers_url":"https://api.github.com/users/mthebridge/followers","following_url":"https://api.github.com/users/mthebridge/following{/other_user}","gists_url":"https://api.github.com/users/mthebridge/gists{/gist_id}","starred_url":"https://api.github.com/users/mthebridge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mthebridge/subscriptions","organizations_url":"https://api.github.com/users/mthebridge/orgs","repos_url":"https://api.github.com/users/mthebridge/repos","events_url":"https://api.github.com/users/mthebridge/events{/privacy}","received_events_url":"https://api.github.com/users/mthebridge/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/hyperium/hyper/issues/comments/350863214","html_url":"https://github.com/hyperium/hyper/issues/1397#issuecomment-350863214","issue_url":"https://api.github.com/repos/hyperium/hyper/issues/1397","id":350863214,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MDg2MzIxNA==","user":{"login":"seanmonstar","id":51479,"node_id":"MDQ6VXNlcjUxNDc5","avatar_url":"https://avatars.githubusercontent.com/u/51479?v=4","gravatar_id":"","url":"https://api.github.com/users/seanmonstar","html_url":"https://github.com/seanmonstar","followers_url":"https://api.github.com/users/seanmonstar/followers","following_url":"https://api.github.com/users/seanmonstar/following{/other_user}","gists_url":"https://api.github.com/users/seanmonstar/gists{/gist_id}","starred_url":"https://api.github.com/users/seanmonstar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seanmonstar/subscriptions","organizations_url":"https://api.github.com/users/seanmonstar/orgs","repos_url":"https://api.github.com/users/seanmonstar/repos","events_url":"https://api.github.com/users/seanmonstar/events{/privacy}","received_events_url":"https://api.github.com/users/seanmonstar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-11T21:25:55Z","updated_at":"2017-12-11T21:25:55Z","body":"Does the response that comes back include a response body?","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/hyperium/hyper/issues/comments/350863214/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"seanmonstar","id":51479,"node_id":"MDQ6VXNlcjUxNDc5","avatar_url":"https://avatars.githubusercontent.com/u/51479?v=4","gravatar_id":"","url":"https://api.github.com/users/seanmonstar","html_url":"https://github.com/seanmonstar","followers_url":"https://api.github.com/users/seanmonstar/followers","following_url":"https://api.github.com/users/seanmonstar/following{/other_user}","gists_url":"https://api.github.com/users/seanmonstar/gists{/gist_id}","starred_url":"https://api.github.com/users/seanmonstar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seanmonstar/subscriptions","organizations_url":"https://api.github.com/users/seanmonstar/orgs","repos_url":"https://api.github.com/users/seanmonstar/repos","events_url":"https://api.github.com/users/seanmonstar/events{/privacy}","received_events_url":"https://api.github.com/users/seanmonstar/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1382345252,"node_id":"MDEyOkxhYmVsZWRFdmVudDEzODIzNDUyNTI=","url":"https://api.github.com/repos/hyperium/hyper/issues/events/1382345252","actor":{"login":"seanmonstar","id":51479,"node_id":"MDQ6VXNlcjUxNDc5","avatar_url":"https://avatars.githubusercontent.com/u/51479?v=4","gravatar_id":"","url":"https://api.github.com/users/seanmonstar","html_url":"https://github.com/seanmonstar","followers_url":"https://api.github.com/users/seanmonstar/followers","following_url":"https://api.github.com/users/seanmonstar/following{/other_user}","gists_url":"https://api.github.com/users/seanmonstar/gists{/gist_id}","starred_url":"https://api.github.com/users/seanmonstar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seanmonstar/subscriptions","organizations_url":"https://api.github.com/users/seanmonstar/orgs","repos_url":"https://api.github.com/users/seanmonstar/repos","events_url":"https://api.github.com/users/seanmonstar/events{/privacy}","received_events_url":"https://api.github.com/users/seanmonstar/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2017-12-11T21:26:11Z","label":{"name":"A-client","color":"fbca04"},"performed_via_github_app":null},{"id":1382345255,"node_id":"MDEyOkxhYmVsZWRFdmVudDEzODIzNDUyNTU=","url":"https://api.github.com/repos/hyperium/hyper/issues/events/1382345255","actor":{"login":"seanmonstar","id":51479,"node_id":"MDQ6VXNlcjUxNDc5","avatar_url":"https://avatars.githubusercontent.com/u/51479?v=4","gravatar_id":"","url":"https://api.github.com/users/seanmonstar","html_url":"https://github.com/seanmonstar","followers_url":"https://api.github.com/users/seanmonstar/followers","following_url":"https://api.github.com/users/seanmonstar/following{/other_user}","gists_url":"https://api.github.com/users/seanmonstar/gists{/gist_id}","starred_url":"https://api.github.com/users/seanmonstar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seanmonstar/subscriptions","organizations_url":"https://api.github.com/users/seanmonstar/orgs","repos_url":"https://api.github.com/users/seanmonstar/repos","events_url":"https://api.github.com/users/seanmonstar/events{/privacy}","received_events_url":"https://api.github.com/users/seanmonstar/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2017-12-11T21:26:11Z","label":{"name":"S-bug","color":"fc2929"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/hyperium/hyper/issues/comments/350875675","html_url":"https://github.com/hyperium/hyper/issues/1397#issuecomment-350875675","issue_url":"https://api.github.com/repos/hyperium/hyper/issues/1397","id":350875675,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MDg3NTY3NQ==","user":{"login":"seanmonstar","id":51479,"node_id":"MDQ6VXNlcjUxNDc5","avatar_url":"https://avatars.githubusercontent.com/u/51479?v=4","gravatar_id":"","url":"https://api.github.com/users/seanmonstar","html_url":"https://github.com/seanmonstar","followers_url":"https://api.github.com/users/seanmonstar/followers","following_url":"https://api.github.com/users/seanmonstar/following{/other_user}","gists_url":"https://api.github.com/users/seanmonstar/gists{/gist_id}","starred_url":"https://api.github.com/users/seanmonstar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seanmonstar/subscriptions","organizations_url":"https://api.github.com/users/seanmonstar/orgs","repos_url":"https://api.github.com/users/seanmonstar/repos","events_url":"https://api.github.com/users/seanmonstar/events{/privacy}","received_events_url":"https://api.github.com/users/seanmonstar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-11T22:13:15Z","updated_at":"2017-12-11T22:13:15Z","body":"PS, don't call `Timer::default()` in a loop. That is creating a worker thread every single time. Create it once outside the loop.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/hyperium/hyper/issues/comments/350875675/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"seanmonstar","id":51479,"node_id":"MDQ6VXNlcjUxNDc5","avatar_url":"https://avatars.githubusercontent.com/u/51479?v=4","gravatar_id":"","url":"https://api.github.com/users/seanmonstar","html_url":"https://github.com/seanmonstar","followers_url":"https://api.github.com/users/seanmonstar/followers","following_url":"https://api.github.com/users/seanmonstar/following{/other_user}","gists_url":"https://api.github.com/users/seanmonstar/gists{/gist_id}","starred_url":"https://api.github.com/users/seanmonstar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seanmonstar/subscriptions","organizations_url":"https://api.github.com/users/seanmonstar/orgs","repos_url":"https://api.github.com/users/seanmonstar/repos","events_url":"https://api.github.com/users/seanmonstar/events{/privacy}","received_events_url":"https://api.github.com/users/seanmonstar/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/hyperium/hyper/issues/comments/351001715","html_url":"https://github.com/hyperium/hyper/issues/1397#issuecomment-351001715","issue_url":"https://api.github.com/repos/hyperium/hyper/issues/1397","id":351001715,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MTAwMTcxNQ==","user":{"login":"mthebridge","id":13729669,"node_id":"MDQ6VXNlcjEzNzI5NjY5","avatar_url":"https://avatars.githubusercontent.com/u/13729669?v=4","gravatar_id":"","url":"https://api.github.com/users/mthebridge","html_url":"https://github.com/mthebridge","followers_url":"https://api.github.com/users/mthebridge/followers","following_url":"https://api.github.com/users/mthebridge/following{/other_user}","gists_url":"https://api.github.com/users/mthebridge/gists{/gist_id}","starred_url":"https://api.github.com/users/mthebridge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mthebridge/subscriptions","organizations_url":"https://api.github.com/users/mthebridge/orgs","repos_url":"https://api.github.com/users/mthebridge/repos","events_url":"https://api.github.com/users/mthebridge/events{/privacy}","received_events_url":"https://api.github.com/users/mthebridge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-12T09:55:43Z","updated_at":"2017-12-12T09:55:43Z","body":"@seanmonstar No, no body at all - it's a polling GET that returns when a change is detected (see under \"Waiting for a change\" at https://coreos.com/etcd/docs/latest/v2/api.html), and it's expected in our real use case that most of the time it would time out with no body. \r\n\r\nThanks for the performance tip on `Timer::default()`, though that isn't the cause.\r\n\r\nI've tried doing some code reading and debugging but I'm finding the hyper code quite tricky to get my head around!","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/hyperium/hyper/issues/comments/351001715/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mthebridge","id":13729669,"node_id":"MDQ6VXNlcjEzNzI5NjY5","avatar_url":"https://avatars.githubusercontent.com/u/13729669?v=4","gravatar_id":"","url":"https://api.github.com/users/mthebridge","html_url":"https://github.com/mthebridge","followers_url":"https://api.github.com/users/mthebridge/followers","following_url":"https://api.github.com/users/mthebridge/following{/other_user}","gists_url":"https://api.github.com/users/mthebridge/gists{/gist_id}","starred_url":"https://api.github.com/users/mthebridge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mthebridge/subscriptions","organizations_url":"https://api.github.com/users/mthebridge/orgs","repos_url":"https://api.github.com/users/mthebridge/repos","events_url":"https://api.github.com/users/mthebridge/events{/privacy}","received_events_url":"https://api.github.com/users/mthebridge/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1383180166,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MTM4MzE4MDE2Ng==","url":"https://api.github.com/repos/hyperium/hyper/issues/events/1383180166","actor":{"login":"seanmonstar","id":51479,"node_id":"MDQ6VXNlcjUxNDc5","avatar_url":"https://avatars.githubusercontent.com/u/51479?v=4","gravatar_id":"","url":"https://api.github.com/users/seanmonstar","html_url":"https://github.com/seanmonstar","followers_url":"https://api.github.com/users/seanmonstar/followers","following_url":"https://api.github.com/users/seanmonstar/following{/other_user}","gists_url":"https://api.github.com/users/seanmonstar/gists{/gist_id}","starred_url":"https://api.github.com/users/seanmonstar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seanmonstar/subscriptions","organizations_url":"https://api.github.com/users/seanmonstar/orgs","repos_url":"https://api.github.com/users/seanmonstar/repos","events_url":"https://api.github.com/users/seanmonstar/events{/privacy}","received_events_url":"https://api.github.com/users/seanmonstar/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2017-12-12T09:55:43Z","performed_via_github_app":null},{"id":1383180168,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDEzODMxODAxNjg=","url":"https://api.github.com/repos/hyperium/hyper/issues/events/1383180168","actor":{"login":"seanmonstar","id":51479,"node_id":"MDQ6VXNlcjUxNDc5","avatar_url":"https://avatars.githubusercontent.com/u/51479?v=4","gravatar_id":"","url":"https://api.github.com/users/seanmonstar","html_url":"https://github.com/seanmonstar","followers_url":"https://api.github.com/users/seanmonstar/followers","following_url":"https://api.github.com/users/seanmonstar/following{/other_user}","gists_url":"https://api.github.com/users/seanmonstar/gists{/gist_id}","starred_url":"https://api.github.com/users/seanmonstar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seanmonstar/subscriptions","organizations_url":"https://api.github.com/users/seanmonstar/orgs","repos_url":"https://api.github.com/users/seanmonstar/repos","events_url":"https://api.github.com/users/seanmonstar/events{/privacy}","received_events_url":"https://api.github.com/users/seanmonstar/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2017-12-12T09:55:43Z","performed_via_github_app":null},{"id":1386777726,"node_id":"MDExOkNsb3NlZEV2ZW50MTM4Njc3NzcyNg==","url":"https://api.github.com/repos/hyperium/hyper/issues/events/1386777726","actor":{"login":"seanmonstar","id":51479,"node_id":"MDQ6VXNlcjUxNDc5","avatar_url":"https://avatars.githubusercontent.com/u/51479?v=4","gravatar_id":"","url":"https://api.github.com/users/seanmonstar","html_url":"https://github.com/seanmonstar","followers_url":"https://api.github.com/users/seanmonstar/followers","following_url":"https://api.github.com/users/seanmonstar/following{/other_user}","gists_url":"https://api.github.com/users/seanmonstar/gists{/gist_id}","starred_url":"https://api.github.com/users/seanmonstar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seanmonstar/subscriptions","organizations_url":"https://api.github.com/users/seanmonstar/orgs","repos_url":"https://api.github.com/users/seanmonstar/repos","events_url":"https://api.github.com/users/seanmonstar/events{/privacy}","received_events_url":"https://api.github.com/users/seanmonstar/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"139dc7ab2be271cd58b909db16c6ddbe5109f133","commit_url":"https://api.github.com/repos/hyperium/hyper/commits/139dc7ab2be271cd58b909db16c6ddbe5109f133","created_at":"2017-12-14T00:31:47Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/hyperium/hyper/issues/comments/351570355","html_url":"https://github.com/hyperium/hyper/issues/1397#issuecomment-351570355","issue_url":"https://api.github.com/repos/hyperium/hyper/issues/1397","id":351570355,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MTU3MDM1NQ==","user":{"login":"seanmonstar","id":51479,"node_id":"MDQ6VXNlcjUxNDc5","avatar_url":"https://avatars.githubusercontent.com/u/51479?v=4","gravatar_id":"","url":"https://api.github.com/users/seanmonstar","html_url":"https://github.com/seanmonstar","followers_url":"https://api.github.com/users/seanmonstar/followers","following_url":"https://api.github.com/users/seanmonstar/following{/other_user}","gists_url":"https://api.github.com/users/seanmonstar/gists{/gist_id}","starred_url":"https://api.github.com/users/seanmonstar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seanmonstar/subscriptions","organizations_url":"https://api.github.com/users/seanmonstar/orgs","repos_url":"https://api.github.com/users/seanmonstar/repos","events_url":"https://api.github.com/users/seanmonstar/events{/privacy}","received_events_url":"https://api.github.com/users/seanmonstar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-14T00:32:20Z","updated_at":"2017-12-14T00:32:20Z","body":"This has been fixed when the `no_proto` config is set on the `Client`. The new dispatcher will soon be the default, fixing this for everyone.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/hyperium/hyper/issues/comments/351570355/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"seanmonstar","id":51479,"node_id":"MDQ6VXNlcjUxNDc5","avatar_url":"https://avatars.githubusercontent.com/u/51479?v=4","gravatar_id":"","url":"https://api.github.com/users/seanmonstar","html_url":"https://github.com/seanmonstar","followers_url":"https://api.github.com/users/seanmonstar/followers","following_url":"https://api.github.com/users/seanmonstar/following{/other_user}","gists_url":"https://api.github.com/users/seanmonstar/gists{/gist_id}","starred_url":"https://api.github.com/users/seanmonstar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seanmonstar/subscriptions","organizations_url":"https://api.github.com/users/seanmonstar/orgs","repos_url":"https://api.github.com/users/seanmonstar/repos","events_url":"https://api.github.com/users/seanmonstar/events{/privacy}","received_events_url":"https://api.github.com/users/seanmonstar/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/hyperium/hyper/issues/comments/351666864","html_url":"https://github.com/hyperium/hyper/issues/1397#issuecomment-351666864","issue_url":"https://api.github.com/repos/hyperium/hyper/issues/1397","id":351666864,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MTY2Njg2NA==","user":{"login":"mthebridge","id":13729669,"node_id":"MDQ6VXNlcjEzNzI5NjY5","avatar_url":"https://avatars.githubusercontent.com/u/13729669?v=4","gravatar_id":"","url":"https://api.github.com/users/mthebridge","html_url":"https://github.com/mthebridge","followers_url":"https://api.github.com/users/mthebridge/followers","following_url":"https://api.github.com/users/mthebridge/following{/other_user}","gists_url":"https://api.github.com/users/mthebridge/gists{/gist_id}","starred_url":"https://api.github.com/users/mthebridge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mthebridge/subscriptions","organizations_url":"https://api.github.com/users/mthebridge/orgs","repos_url":"https://api.github.com/users/mthebridge/repos","events_url":"https://api.github.com/users/mthebridge/events{/privacy}","received_events_url":"https://api.github.com/users/mthebridge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-14T10:11:35Z","updated_at":"2017-12-14T10:11:35Z","body":"Sorry to dispute - but pulling from the latest master (8f6931b3), and switching to use `no_proto()`, I still see the same problem with the above script.  So there must be another bug..\r\n\r\nWould you prefer this reopened or a new issue?","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/hyperium/hyper/issues/comments/351666864/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mthebridge","id":13729669,"node_id":"MDQ6VXNlcjEzNzI5NjY5","avatar_url":"https://avatars.githubusercontent.com/u/13729669?v=4","gravatar_id":"","url":"https://api.github.com/users/mthebridge","html_url":"https://github.com/mthebridge","followers_url":"https://api.github.com/users/mthebridge/followers","following_url":"https://api.github.com/users/mthebridge/following{/other_user}","gists_url":"https://api.github.com/users/mthebridge/gists{/gist_id}","starred_url":"https://api.github.com/users/mthebridge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mthebridge/subscriptions","organizations_url":"https://api.github.com/users/mthebridge/orgs","repos_url":"https://api.github.com/users/mthebridge/repos","events_url":"https://api.github.com/users/mthebridge/events{/privacy}","received_events_url":"https://api.github.com/users/mthebridge/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/hyperium/hyper/issues/comments/351687537","html_url":"https://github.com/hyperium/hyper/issues/1397#issuecomment-351687537","issue_url":"https://api.github.com/repos/hyperium/hyper/issues/1397","id":351687537,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MTY4NzUzNw==","user":{"login":"mthebridge","id":13729669,"node_id":"MDQ6VXNlcjEzNzI5NjY5","avatar_url":"https://avatars.githubusercontent.com/u/13729669?v=4","gravatar_id":"","url":"https://api.github.com/users/mthebridge","html_url":"https://github.com/mthebridge","followers_url":"https://api.github.com/users/mthebridge/followers","following_url":"https://api.github.com/users/mthebridge/following{/other_user}","gists_url":"https://api.github.com/users/mthebridge/gists{/gist_id}","starred_url":"https://api.github.com/users/mthebridge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mthebridge/subscriptions","organizations_url":"https://api.github.com/users/mthebridge/orgs","repos_url":"https://api.github.com/users/mthebridge/repos","events_url":"https://api.github.com/users/mthebridge/events{/privacy}","received_events_url":"https://api.github.com/users/mthebridge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-14T11:40:34Z","updated_at":"2017-12-14T11:40:34Z","body":"In fact, I can repro on master by patching your new test as follows.  The key is to return a chunked-encoding with no content-length and no body.  With this code, the `drop_client_closes_idle_connections` test hangs forever (because the connection never drops).\r\n\r\n```diff\r\n--- a/tests/client.rs\r\n+++ b/tests/client.rs\r\n@@ -673,8 +673,9 @@ mod dispatch_impl {\r\n             sock.set_write_timeout(Some(Duration::from_secs(5))).unwrap();\r\n             let mut buf = [0; 4096];\r\n             sock.read(&mut buf).expect(\"read 1\");\r\n-            let body =[b'x'; 64];\r\n-            write!(sock, \"HTTP/1.1 200 OK\\r\\nContent-Length: {}\\r\\n\\r\\n\", body.len()).expect(\"write head\");\r\n+            // let body =[b'x'; 64];\r\n+            let body = vec![];\r\n+            write!(sock, \"HTTP/1.1 200 OK\\r\\nTransfer-Encoding: chunked\\r\\n\\r\\n\").expect(\"write head\");\r\n             let _ = sock.write_all(&body);\r\n             let _ = tx1.send(());\r\n```","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/hyperium/hyper/issues/comments/351687537/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mthebridge","id":13729669,"node_id":"MDQ6VXNlcjEzNzI5NjY5","avatar_url":"https://avatars.githubusercontent.com/u/13729669?v=4","gravatar_id":"","url":"https://api.github.com/users/mthebridge","html_url":"https://github.com/mthebridge","followers_url":"https://api.github.com/users/mthebridge/followers","following_url":"https://api.github.com/users/mthebridge/following{/other_user}","gists_url":"https://api.github.com/users/mthebridge/gists{/gist_id}","starred_url":"https://api.github.com/users/mthebridge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mthebridge/subscriptions","organizations_url":"https://api.github.com/users/mthebridge/orgs","repos_url":"https://api.github.com/users/mthebridge/repos","events_url":"https://api.github.com/users/mthebridge/events{/privacy}","received_events_url":"https://api.github.com/users/mthebridge/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1388464148,"node_id":"MDEzOlJlb3BlbmVkRXZlbnQxMzg4NDY0MTQ4","url":"https://api.github.com/repos/hyperium/hyper/issues/events/1388464148","actor":{"login":"seanmonstar","id":51479,"node_id":"MDQ6VXNlcjUxNDc5","avatar_url":"https://avatars.githubusercontent.com/u/51479?v=4","gravatar_id":"","url":"https://api.github.com/users/seanmonstar","html_url":"https://github.com/seanmonstar","followers_url":"https://api.github.com/users/seanmonstar/followers","following_url":"https://api.github.com/users/seanmonstar/following{/other_user}","gists_url":"https://api.github.com/users/seanmonstar/gists{/gist_id}","starred_url":"https://api.github.com/users/seanmonstar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seanmonstar/subscriptions","organizations_url":"https://api.github.com/users/seanmonstar/orgs","repos_url":"https://api.github.com/users/seanmonstar/repos","events_url":"https://api.github.com/users/seanmonstar/events{/privacy}","received_events_url":"https://api.github.com/users/seanmonstar/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"reopened","commit_id":null,"commit_url":null,"created_at":"2017-12-14T20:32:29Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/hyperium/hyper/issues/comments/351827927","html_url":"https://github.com/hyperium/hyper/issues/1397#issuecomment-351827927","issue_url":"https://api.github.com/repos/hyperium/hyper/issues/1397","id":351827927,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MTgyNzkyNw==","user":{"login":"seanmonstar","id":51479,"node_id":"MDQ6VXNlcjUxNDc5","avatar_url":"https://avatars.githubusercontent.com/u/51479?v=4","gravatar_id":"","url":"https://api.github.com/users/seanmonstar","html_url":"https://github.com/seanmonstar","followers_url":"https://api.github.com/users/seanmonstar/followers","following_url":"https://api.github.com/users/seanmonstar/following{/other_user}","gists_url":"https://api.github.com/users/seanmonstar/gists{/gist_id}","starred_url":"https://api.github.com/users/seanmonstar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seanmonstar/subscriptions","organizations_url":"https://api.github.com/users/seanmonstar/orgs","repos_url":"https://api.github.com/users/seanmonstar/repos","events_url":"https://api.github.com/users/seanmonstar/events{/privacy}","received_events_url":"https://api.github.com/users/seanmonstar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-14T20:33:07Z","updated_at":"2017-12-14T20:33:07Z","body":"Ah yes, this is different! Not idle connections, but rather an active connection when the `Response` or the `Body` related to it has been dropped.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/hyperium/hyper/issues/comments/351827927/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"seanmonstar","id":51479,"node_id":"MDQ6VXNlcjUxNDc5","avatar_url":"https://avatars.githubusercontent.com/u/51479?v=4","gravatar_id":"","url":"https://api.github.com/users/seanmonstar","html_url":"https://github.com/seanmonstar","followers_url":"https://api.github.com/users/seanmonstar/followers","following_url":"https://api.github.com/users/seanmonstar/following{/other_user}","gists_url":"https://api.github.com/users/seanmonstar/gists{/gist_id}","starred_url":"https://api.github.com/users/seanmonstar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seanmonstar/subscriptions","organizations_url":"https://api.github.com/users/seanmonstar/orgs","repos_url":"https://api.github.com/users/seanmonstar/repos","events_url":"https://api.github.com/users/seanmonstar/events{/privacy}","received_events_url":"https://api.github.com/users/seanmonstar/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1388602459,"node_id":"MDExOkNsb3NlZEV2ZW50MTM4ODYwMjQ1OQ==","url":"https://api.github.com/repos/hyperium/hyper/issues/events/1388602459","actor":{"login":"seanmonstar","id":51479,"node_id":"MDQ6VXNlcjUxNDc5","avatar_url":"https://avatars.githubusercontent.com/u/51479?v=4","gravatar_id":"","url":"https://api.github.com/users/seanmonstar","html_url":"https://github.com/seanmonstar","followers_url":"https://api.github.com/users/seanmonstar/followers","following_url":"https://api.github.com/users/seanmonstar/following{/other_user}","gists_url":"https://api.github.com/users/seanmonstar/gists{/gist_id}","starred_url":"https://api.github.com/users/seanmonstar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seanmonstar/subscriptions","organizations_url":"https://api.github.com/users/seanmonstar/orgs","repos_url":"https://api.github.com/users/seanmonstar/repos","events_url":"https://api.github.com/users/seanmonstar/events{/privacy}","received_events_url":"https://api.github.com/users/seanmonstar/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"ef4008121e4faa9383fe4661ebd05de5efe7ee9c","commit_url":"https://api.github.com/repos/hyperium/hyper/commits/ef4008121e4faa9383fe4661ebd05de5efe7ee9c","created_at":"2017-12-14T21:58:18Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/hyperium/hyper/issues/comments/351848776","html_url":"https://github.com/hyperium/hyper/issues/1397#issuecomment-351848776","issue_url":"https://api.github.com/repos/hyperium/hyper/issues/1397","id":351848776,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MTg0ODc3Ng==","user":{"login":"seanmonstar","id":51479,"node_id":"MDQ6VXNlcjUxNDc5","avatar_url":"https://avatars.githubusercontent.com/u/51479?v=4","gravatar_id":"","url":"https://api.github.com/users/seanmonstar","html_url":"https://github.com/seanmonstar","followers_url":"https://api.github.com/users/seanmonstar/followers","following_url":"https://api.github.com/users/seanmonstar/following{/other_user}","gists_url":"https://api.github.com/users/seanmonstar/gists{/gist_id}","starred_url":"https://api.github.com/users/seanmonstar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seanmonstar/subscriptions","organizations_url":"https://api.github.com/users/seanmonstar/orgs","repos_url":"https://api.github.com/users/seanmonstar/repos","events_url":"https://api.github.com/users/seanmonstar/events{/privacy}","received_events_url":"https://api.github.com/users/seanmonstar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-14T21:59:03Z","updated_at":"2017-12-14T21:59:03Z","body":"Ok, new patch fixes the test case you provided.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/hyperium/hyper/issues/comments/351848776/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"seanmonstar","id":51479,"node_id":"MDQ6VXNlcjUxNDc5","avatar_url":"https://avatars.githubusercontent.com/u/51479?v=4","gravatar_id":"","url":"https://api.github.com/users/seanmonstar","html_url":"https://github.com/seanmonstar","followers_url":"https://api.github.com/users/seanmonstar/followers","following_url":"https://api.github.com/users/seanmonstar/following{/other_user}","gists_url":"https://api.github.com/users/seanmonstar/gists{/gist_id}","starred_url":"https://api.github.com/users/seanmonstar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seanmonstar/subscriptions","organizations_url":"https://api.github.com/users/seanmonstar/orgs","repos_url":"https://api.github.com/users/seanmonstar/repos","events_url":"https://api.github.com/users/seanmonstar/events{/privacy}","received_events_url":"https://api.github.com/users/seanmonstar/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/hyperium/hyper/issues/comments/351968035","html_url":"https://github.com/hyperium/hyper/issues/1397#issuecomment-351968035","issue_url":"https://api.github.com/repos/hyperium/hyper/issues/1397","id":351968035,"node_id":"MDEyOklzc3VlQ29tbWVudDM1MTk2ODAzNQ==","user":{"login":"mthebridge","id":13729669,"node_id":"MDQ6VXNlcjEzNzI5NjY5","avatar_url":"https://avatars.githubusercontent.com/u/13729669?v=4","gravatar_id":"","url":"https://api.github.com/users/mthebridge","html_url":"https://github.com/mthebridge","followers_url":"https://api.github.com/users/mthebridge/followers","following_url":"https://api.github.com/users/mthebridge/following{/other_user}","gists_url":"https://api.github.com/users/mthebridge/gists{/gist_id}","starred_url":"https://api.github.com/users/mthebridge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mthebridge/subscriptions","organizations_url":"https://api.github.com/users/mthebridge/orgs","repos_url":"https://api.github.com/users/mthebridge/repos","events_url":"https://api.github.com/users/mthebridge/events{/privacy}","received_events_url":"https://api.github.com/users/mthebridge/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-12-15T10:16:16Z","updated_at":"2017-12-15T10:16:16Z","body":"Yes, that works!  Thanks so much for the speedy fixes.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/hyperium/hyper/issues/comments/351968035/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mthebridge","id":13729669,"node_id":"MDQ6VXNlcjEzNzI5NjY5","avatar_url":"https://avatars.githubusercontent.com/u/13729669?v=4","gravatar_id":"","url":"https://api.github.com/users/mthebridge","html_url":"https://github.com/mthebridge","followers_url":"https://api.github.com/users/mthebridge/followers","following_url":"https://api.github.com/users/mthebridge/following{/other_user}","gists_url":"https://api.github.com/users/mthebridge/gists{/gist_id}","starred_url":"https://api.github.com/users/mthebridge/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mthebridge/subscriptions","organizations_url":"https://api.github.com/users/mthebridge/orgs","repos_url":"https://api.github.com/users/mthebridge/repos","events_url":"https://api.github.com/users/mthebridge/events{/privacy}","received_events_url":"https://api.github.com/users/mthebridge/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"unixpickle","id":406021,"node_id":"MDQ6VXNlcjQwNjAyMQ==","avatar_url":"https://avatars.githubusercontent.com/u/406021?v=4","gravatar_id":"","url":"https://api.github.com/users/unixpickle","html_url":"https://github.com/unixpickle","followers_url":"https://api.github.com/users/unixpickle/followers","following_url":"https://api.github.com/users/unixpickle/following{/other_user}","gists_url":"https://api.github.com/users/unixpickle/gists{/gist_id}","starred_url":"https://api.github.com/users/unixpickle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/unixpickle/subscriptions","organizations_url":"https://api.github.com/users/unixpickle/orgs","repos_url":"https://api.github.com/users/unixpickle/repos","events_url":"https://api.github.com/users/unixpickle/events{/privacy}","received_events_url":"https://api.github.com/users/unixpickle/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-04-04T03:38:14Z","updated_at":"2018-04-04T03:38:14Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/hyperium/hyper/issues/1479","repository_url":"https://api.github.com/repos/hyperium/hyper","labels_url":"https://api.github.com/repos/hyperium/hyper/issues/1479/labels{/name}","comments_url":"https://api.github.com/repos/hyperium/hyper/issues/1479/comments","events_url":"https://api.github.com/repos/hyperium/hyper/issues/1479/events","html_url":"https://github.com/hyperium/hyper/issues/1479","id":311074184,"node_id":"MDU6SXNzdWUzMTEwNzQxODQ=","number":1479,"title":"Client connection leak with more than one body chunk","user":{"login":"unixpickle","id":406021,"node_id":"MDQ6VXNlcjQwNjAyMQ==","avatar_url":"https://avatars.githubusercontent.com/u/406021?v=4","gravatar_id":"","url":"https://api.github.com/users/unixpickle","html_url":"https://github.com/unixpickle","followers_url":"https://api.github.com/users/unixpickle/followers","following_url":"https://api.github.com/users/unixpickle/following{/other_user}","gists_url":"https://api.github.com/users/unixpickle/gists{/gist_id}","starred_url":"https://api.github.com/users/unixpickle/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/unixpickle/subscriptions","organizations_url":"https://api.github.com/users/unixpickle/orgs","repos_url":"https://api.github.com/users/unixpickle/repos","events_url":"https://api.github.com/users/unixpickle/events{/privacy}","received_events_url":"https://api.github.com/users/unixpickle/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":10,"created_at":"2018-04-04T03:38:14Z","updated_at":"2018-04-05T17:54:53Z","closed_at":"2018-04-04T19:22:24Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":23500865,"node_id":"MDEwOlJlcG9zaXRvcnkyMzUwMDg2NQ==","name":"hyper","full_name":"hyperium/hyper","private":false,"owner":{"login":"hyperium","id":8730506,"node_id":"MDEyOk9yZ2FuaXphdGlvbjg3MzA1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/8730506?v=4","gravatar_id":"","url":"https://api.github.com/users/hyperium","html_url":"https://github.com/hyperium","followers_url":"https://api.github.com/users/hyperium/followers","following_url":"https://api.github.com/users/hyperium/following{/other_user}","gists_url":"https://api.github.com/users/hyperium/gists{/gist_id}","starred_url":"https://api.github.com/users/hyperium/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hyperium/subscriptions","organizations_url":"https://api.github.com/users/hyperium/orgs","repos_url":"https://api.github.com/users/hyperium/repos","events_url":"https://api.github.com/users/hyperium/events{/privacy}","received_events_url":"https://api.github.com/users/hyperium/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/hyperium/hyper","description":"An HTTP library for Rust","fork":false,"url":"https://api.github.com/repos/hyperium/hyper","forks_url":"https://api.github.com/repos/hyperium/hyper/forks","keys_url":"https://api.github.com/repos/hyperium/hyper/keys{/key_id}","collaborators_url":"https://api.github.com/repos/hyperium/hyper/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/hyperium/hyper/teams","hooks_url":"https://api.github.com/repos/hyperium/hyper/hooks","issue_events_url":"https://api.github.com/repos/hyperium/hyper/issues/events{/number}","events_url":"https://api.github.com/repos/hyperium/hyper/events","assignees_url":"https://api.github.com/repos/hyperium/hyper/assignees{/user}","branches_url":"https://api.github.com/repos/hyperium/hyper/branches{/branch}","tags_url":"https://api.github.com/repos/hyperium/hyper/tags","blobs_url":"https://api.github.com/repos/hyperium/hyper/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/hyperium/hyper/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/hyperium/hyper/git/refs{/sha}","trees_url":"https://api.github.com/repos/hyperium/hyper/git/trees{/sha}","statuses_url":"https://api.github.com/repos/hyperium/hyper/statuses/{sha}","languages_url":"https://api.github.com/repos/hyperium/hyper/languages","stargazers_url":"https://api.github.com/repos/hyperium/hyper/stargazers","contributors_url":"https://api.github.com/repos/hyperium/hyper/contributors","subscribers_url":"https://api.github.com/repos/hyperium/hyper/subscribers","subscription_url":"https://api.github.com/repos/hyperium/hyper/subscription","commits_url":"https://api.github.com/repos/hyperium/hyper/commits{/sha}","git_commits_url":"https://api.github.com/repos/hyperium/hyper/git/commits{/sha}","comments_url":"https://api.github.com/repos/hyperium/hyper/comments{/number}","issue_comment_url":"https://api.github.com/repos/hyperium/hyper/issues/comments{/number}","contents_url":"https://api.github.com/repos/hyperium/hyper/contents/{+path}","compare_url":"https://api.github.com/repos/hyperium/hyper/compare/{base}...{head}","merges_url":"https://api.github.com/repos/hyperium/hyper/merges","archive_url":"https://api.github.com/repos/hyperium/hyper/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/hyperium/hyper/downloads","issues_url":"https://api.github.com/repos/hyperium/hyper/issues{/number}","pulls_url":"https://api.github.com/repos/hyperium/hyper/pulls{/number}","milestones_url":"https://api.github.com/repos/hyperium/hyper/milestones{/number}","notifications_url":"https://api.github.com/repos/hyperium/hyper/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/hyperium/hyper/labels{/name}","releases_url":"https://api.github.com/repos/hyperium/hyper/releases{/id}","deployments_url":"https://api.github.com/repos/hyperium/hyper/deployments","created_at":"2014-08-30T21:14:33Z","updated_at":"2025-11-09T09:11:28Z","pushed_at":"2025-10-27T16:23:23Z","git_url":"git://github.com/hyperium/hyper.git","ssh_url":"git@github.com:hyperium/hyper.git","clone_url":"https://github.com/hyperium/hyper.git","svn_url":"https://github.com/hyperium/hyper","homepage":"https://hyper.rs","size":13990,"stargazers_count":15659,"watchers_count":15659,"language":"Rust","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":true,"has_discussions":true,"forks_count":1683,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":259,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["http","hyper","rust"],"visibility":"public","forks":1683,"open_issues":259,"watchers":15659,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"In a web application where the server provides more than ~8062 bytes of data to the client, the client's connection leaks. This can lead to all sorts of resource exhaustion errors. I have found that this correlates perfectly with `Response::body()` producing more than one `Chunk`.\r\n\r\nThe client/server programs below reproduce this issue. The server usually dies with the following error:\r\n\r\n```\r\nthread 'main' panicked at 'called `Result::unwrap()` on an `Err` value: Io(Error { repr: Os { code: 24, message: \"Too many open files\" } })', src/libcore/result.rs:916:5\r\n```\r\n\r\nThis is likely related to commit ef4008121e4faa9383fe4661ebd05de5efe7ee9c and issue #1397 \r\n\r\n**Update:** this is using hyper version 0.11.24. Added Cargo.toml file below.\r\n\r\n# client.rs:\r\n\r\n```rust\r\nextern crate futures;\r\nextern crate hyper;\r\nextern crate tokio_core;\r\n\r\nuse futures::{Future, IntoFuture, Stream};\r\nuse hyper::{Chunk, Client, Error};\r\nuse tokio_core::reactor::Core;\r\n\r\nfn main() {\r\n    let mut core = Core::new().unwrap();\r\n    let handle = core.handle();\r\n    let client = Client::configure().keep_alive(true).build(&handle);\r\n    loop {\r\n        let res = client.get(\"http://127.0.0.1:8080/\".parse().unwrap())\r\n            .and_then(|resp| resp.body().fold((0usize, Vec::<u8>::new()), join_chunks));\r\n        let (num_chunks, data) = core.run(res).unwrap();\r\n        println!(\"got {} bytes ({} chunks)\", data.len(), num_chunks);\r\n    }\r\n}\r\n\r\nfn join_chunks(\r\n    mut state: (usize, Vec<u8>),\r\n    next: Chunk\r\n) -> Box<Future<Item = (usize, Vec<u8>), Error = Error>> {\r\n    state.1.extend(next.to_vec());\r\n    Box::new(Ok((state.0 + 1, state.1)).into_future())\r\n}\r\n```\r\n\r\n# server.rs\r\n\r\n```rust\r\nextern crate futures;\r\nextern crate hyper;\r\n\r\nuse std::iter::repeat;\r\n\r\nuse futures::{Future, IntoFuture};\r\nuse hyper::{Error, Request, Response, StatusCode};\r\nuse hyper::header::ContentType;\r\nuse hyper::server::{Http, Service};\r\n\r\n// If you set this to something like 100, it works!\r\n// When I did a binary search, I found 8062 worked and 8063 didn't.\r\nconst PAYLOAD_SIZE: usize = 10000;\r\n\r\nfn main() {\r\n    Http::new()\r\n        .bind(&\"127.0.0.1:8080\".parse().unwrap(), || Ok(MyService{}))\r\n        .unwrap()\r\n        .run()\r\n        .unwrap();\r\n}\r\n\r\nstruct MyService{}\r\n\r\nimpl Service for MyService {\r\n    type Request = Request;\r\n    type Response = Response;\r\n    type Error = Error;\r\n    type Future = Box<Future<Item = Self::Response, Error = Self::Error>>;\r\n\r\n    fn call(&self, _: Request) -> Self::Future {\r\n        Box::new(Ok(Response::new()\r\n            .with_status(StatusCode::Ok)\r\n            .with_header(ContentType(\"application/octet-stream\".parse().unwrap()))\r\n            .with_body(repeat(0u8).take(PAYLOAD_SIZE).collect::<Vec<u8>>())).into_future())\r\n    }\r\n}\r\n```\r\n\r\n# Cargo.toml\r\n\r\n```\r\n[package]\r\nname = \"reproduce\"\r\nversion = \"0.1.0\"\r\nauthors = [\"Alex Nichol <unixpickle@gmail.com>\"]\r\n\r\n[[bin]]\r\nname = \"reproduce-server\"\r\npath = \"src/server.rs\"\r\n\r\n[[bin]]\r\nname = \"reproduce-client\"\r\npath = \"src/client.rs\"\r\n\r\n[dependencies]\r\nfutures = \"0.1\"\r\nhyper = \"0.11\"\r\ntokio-core = \"0.1\"\r\n```","reactions":{"url":"https://api.github.com/repos/hyperium/hyper/issues/1479/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/hyperium/hyper/issues/1479/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"id":12498527834,"node_id":"REFE_lADOAWaYQc4QwQeGzwAAAALo-GZa","url":"https://api.github.com/repos/hyperium/hyper/issues/events/12498527834","actor":{"login":"hjr3","id":33318,"node_id":"MDQ6VXNlcjMzMzE4","avatar_url":"https://avatars.githubusercontent.com/u/33318?v=4","gravatar_id":"","url":"https://api.github.com/users/hjr3","html_url":"https://github.com/hjr3","followers_url":"https://api.github.com/users/hjr3/followers","following_url":"https://api.github.com/users/hjr3/following{/other_user}","gists_url":"https://api.github.com/users/hjr3/gists{/gist_id}","starred_url":"https://api.github.com/users/hjr3/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hjr3/subscriptions","organizations_url":"https://api.github.com/users/hjr3/orgs","repos_url":"https://api.github.com/users/hjr3/repos","events_url":"https://api.github.com/users/hjr3/events{/privacy}","received_events_url":"https://api.github.com/users/hjr3/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"139dc7ab2be271cd58b909db16c6ddbe5109f133","commit_url":"https://api.github.com/repos/hjr3/hyper/commits/139dc7ab2be271cd58b909db16c6ddbe5109f133","created_at":"2024-04-17T00:15:39Z","performed_via_github_app":null},{"id":12498527846,"node_id":"REFE_lADOAWaYQc4QwQeGzwAAAALo-GZm","url":"https://api.github.com/repos/hyperium/hyper/issues/events/12498527846","actor":{"login":"hjr3","id":33318,"node_id":"MDQ6VXNlcjMzMzE4","avatar_url":"https://avatars.githubusercontent.com/u/33318?v=4","gravatar_id":"","url":"https://api.github.com/users/hjr3","html_url":"https://github.com/hjr3","followers_url":"https://api.github.com/users/hjr3/followers","following_url":"https://api.github.com/users/hjr3/following{/other_user}","gists_url":"https://api.github.com/users/hjr3/gists{/gist_id}","starred_url":"https://api.github.com/users/hjr3/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hjr3/subscriptions","organizations_url":"https://api.github.com/users/hjr3/orgs","repos_url":"https://api.github.com/users/hjr3/repos","events_url":"https://api.github.com/users/hjr3/events{/privacy}","received_events_url":"https://api.github.com/users/hjr3/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"ef4008121e4faa9383fe4661ebd05de5efe7ee9c","commit_url":"https://api.github.com/repos/hjr3/hyper/commits/ef4008121e4faa9383fe4661ebd05de5efe7ee9c","created_at":"2024-04-17T00:15:40Z","performed_via_github_app":null}]