[{"id":5831802135,"node_id":"LE_lADOAWaYQc5BFC2CzwAAAAFbmj0X","url":"https://api.github.com/repos/hyperium/hyper/issues/events/5831802135","actor":{"login":"sfackler","id":1455697,"node_id":"MDQ6VXNlcjE0NTU2OTc=","avatar_url":"https://avatars.githubusercontent.com/u/1455697?v=4","gravatar_id":"","url":"https://api.github.com/users/sfackler","html_url":"https://github.com/sfackler","followers_url":"https://api.github.com/users/sfackler/followers","following_url":"https://api.github.com/users/sfackler/following{/other_user}","gists_url":"https://api.github.com/users/sfackler/gists{/gist_id}","starred_url":"https://api.github.com/users/sfackler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sfackler/subscriptions","organizations_url":"https://api.github.com/users/sfackler/orgs","repos_url":"https://api.github.com/users/sfackler/repos","events_url":"https://api.github.com/users/sfackler/events{/privacy}","received_events_url":"https://api.github.com/users/sfackler/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2022-01-01T16:00:06Z","label":{"name":"S-bug","color":"d93f0b"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/hyperium/hyper/issues/comments/1004321337","html_url":"https://github.com/hyperium/hyper/issues/2730#issuecomment-1004321337","issue_url":"https://api.github.com/repos/hyperium/hyper/issues/2730","id":1004321337,"node_id":"IC_kwDOAWaYQc473Lo5","user":{"login":"seanmonstar","id":51479,"node_id":"MDQ6VXNlcjUxNDc5","avatar_url":"https://avatars.githubusercontent.com/u/51479?v=4","gravatar_id":"","url":"https://api.github.com/users/seanmonstar","html_url":"https://github.com/seanmonstar","followers_url":"https://api.github.com/users/seanmonstar/followers","following_url":"https://api.github.com/users/seanmonstar/following{/other_user}","gists_url":"https://api.github.com/users/seanmonstar/gists{/gist_id}","starred_url":"https://api.github.com/users/seanmonstar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seanmonstar/subscriptions","organizations_url":"https://api.github.com/users/seanmonstar/orgs","repos_url":"https://api.github.com/users/seanmonstar/repos","events_url":"https://api.github.com/users/seanmonstar/events{/privacy}","received_events_url":"https://api.github.com/users/seanmonstar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-03T19:57:15Z","updated_at":"2022-01-03T19:57:15Z","body":"Yea, I think this is behavior is currently on purpose. Whether it _should_ be is a fair question. I think at the time, I assumed that a _new_ connection would usually have a request incoming ASAP, whereas an idle connection might not, and so it was better to allow that request to come in.\r\n\r\nWe could alter that behavior, if we document a good reason for _why_ we're making that change. Also, I imagine using the `http1_header_read_timeout` option could help here.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/hyperium/hyper/issues/comments/1004321337/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"seanmonstar","id":51479,"node_id":"MDQ6VXNlcjUxNDc5","avatar_url":"https://avatars.githubusercontent.com/u/51479?v=4","gravatar_id":"","url":"https://api.github.com/users/seanmonstar","html_url":"https://github.com/seanmonstar","followers_url":"https://api.github.com/users/seanmonstar/followers","following_url":"https://api.github.com/users/seanmonstar/following{/other_user}","gists_url":"https://api.github.com/users/seanmonstar/gists{/gist_id}","starred_url":"https://api.github.com/users/seanmonstar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seanmonstar/subscriptions","organizations_url":"https://api.github.com/users/seanmonstar/orgs","repos_url":"https://api.github.com/users/seanmonstar/repos","events_url":"https://api.github.com/users/seanmonstar/events{/privacy}","received_events_url":"https://api.github.com/users/seanmonstar/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":5836924573,"node_id":"LE_lADOAWaYQc5BFC2CzwAAAAFb6Gad","url":"https://api.github.com/repos/hyperium/hyper/issues/events/5836924573","actor":{"login":"seanmonstar","id":51479,"node_id":"MDQ6VXNlcjUxNDc5","avatar_url":"https://avatars.githubusercontent.com/u/51479?v=4","gravatar_id":"","url":"https://api.github.com/users/seanmonstar","html_url":"https://github.com/seanmonstar","followers_url":"https://api.github.com/users/seanmonstar/followers","following_url":"https://api.github.com/users/seanmonstar/following{/other_user}","gists_url":"https://api.github.com/users/seanmonstar/gists{/gist_id}","starred_url":"https://api.github.com/users/seanmonstar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seanmonstar/subscriptions","organizations_url":"https://api.github.com/users/seanmonstar/orgs","repos_url":"https://api.github.com/users/seanmonstar/repos","events_url":"https://api.github.com/users/seanmonstar/events{/privacy}","received_events_url":"https://api.github.com/users/seanmonstar/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2022-01-03T19:57:28Z","label":{"name":"B-rfc","color":"1d76db"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/hyperium/hyper/issues/comments/1004328658","html_url":"https://github.com/hyperium/hyper/issues/2730#issuecomment-1004328658","issue_url":"https://api.github.com/repos/hyperium/hyper/issues/2730","id":1004328658,"node_id":"IC_kwDOAWaYQc473NbS","user":{"login":"sfackler","id":1455697,"node_id":"MDQ6VXNlcjE0NTU2OTc=","avatar_url":"https://avatars.githubusercontent.com/u/1455697?v=4","gravatar_id":"","url":"https://api.github.com/users/sfackler","html_url":"https://github.com/sfackler","followers_url":"https://api.github.com/users/sfackler/followers","following_url":"https://api.github.com/users/sfackler/following{/other_user}","gists_url":"https://api.github.com/users/sfackler/gists{/gist_id}","starred_url":"https://api.github.com/users/sfackler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sfackler/subscriptions","organizations_url":"https://api.github.com/users/sfackler/orgs","repos_url":"https://api.github.com/users/sfackler/repos","events_url":"https://api.github.com/users/sfackler/events{/privacy}","received_events_url":"https://api.github.com/users/sfackler/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-03T20:09:19Z","updated_at":"2022-01-03T20:10:39Z","body":"I agree that it's *more likely* for the first request to show up than a follow up request, but it seems weird to bake that assumption into graceful_shutdown IMO. For reference, I'm using graceful_shutdown in some logic to shut down connections after a certain period of idleness (I can't just terminate the connection future since I want the TLS session to shut down cleanly for session reuse). Right now, the current behavior will miss connections that are opened and never make a request.\r\n\r\nDoes `http1_header_read_timeout` start counting immediately or just once the first byte of the header is received? In any case, I don't think that'd help for an h2 connection, right?","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/hyperium/hyper/issues/comments/1004328658/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sfackler","id":1455697,"node_id":"MDQ6VXNlcjE0NTU2OTc=","avatar_url":"https://avatars.githubusercontent.com/u/1455697?v=4","gravatar_id":"","url":"https://api.github.com/users/sfackler","html_url":"https://github.com/sfackler","followers_url":"https://api.github.com/users/sfackler/followers","following_url":"https://api.github.com/users/sfackler/following{/other_user}","gists_url":"https://api.github.com/users/sfackler/gists{/gist_id}","starred_url":"https://api.github.com/users/sfackler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sfackler/subscriptions","organizations_url":"https://api.github.com/users/sfackler/orgs","repos_url":"https://api.github.com/users/sfackler/repos","events_url":"https://api.github.com/users/sfackler/events{/privacy}","received_events_url":"https://api.github.com/users/sfackler/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/hyperium/hyper/issues/comments/1193470911","html_url":"https://github.com/hyperium/hyper/issues/2730#issuecomment-1193470911","issue_url":"https://api.github.com/repos/hyperium/hyper/issues/2730","id":1193470911,"node_id":"IC_kwDOAWaYQc5HIuu_","user":{"login":"kestrel-x86","id":40702009,"node_id":"MDQ6VXNlcjQwNzAyMDA5","avatar_url":"https://avatars.githubusercontent.com/u/40702009?v=4","gravatar_id":"","url":"https://api.github.com/users/kestrel-x86","html_url":"https://github.com/kestrel-x86","followers_url":"https://api.github.com/users/kestrel-x86/followers","following_url":"https://api.github.com/users/kestrel-x86/following{/other_user}","gists_url":"https://api.github.com/users/kestrel-x86/gists{/gist_id}","starred_url":"https://api.github.com/users/kestrel-x86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kestrel-x86/subscriptions","organizations_url":"https://api.github.com/users/kestrel-x86/orgs","repos_url":"https://api.github.com/users/kestrel-x86/repos","events_url":"https://api.github.com/users/kestrel-x86/events{/privacy}","received_events_url":"https://api.github.com/users/kestrel-x86/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-25T01:57:15Z","updated_at":"2022-07-25T01:57:15Z","body":"Any progress on this? I was trying to figure out why my program wasn't exiting when I expected it to and found this issue. If I send the graceful shutdown signal the server will process one more request before actually exiting. So a user sending the shutdown command through a web app won't actually be shutting anything down.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/hyperium/hyper/issues/comments/1193470911/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"kestrel-x86","id":40702009,"node_id":"MDQ6VXNlcjQwNzAyMDA5","avatar_url":"https://avatars.githubusercontent.com/u/40702009?v=4","gravatar_id":"","url":"https://api.github.com/users/kestrel-x86","html_url":"https://github.com/kestrel-x86","followers_url":"https://api.github.com/users/kestrel-x86/followers","following_url":"https://api.github.com/users/kestrel-x86/following{/other_user}","gists_url":"https://api.github.com/users/kestrel-x86/gists{/gist_id}","starred_url":"https://api.github.com/users/kestrel-x86/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kestrel-x86/subscriptions","organizations_url":"https://api.github.com/users/kestrel-x86/orgs","repos_url":"https://api.github.com/users/kestrel-x86/repos","events_url":"https://api.github.com/users/kestrel-x86/events{/privacy}","received_events_url":"https://api.github.com/users/kestrel-x86/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":15231779967,"node_id":"ATPVTE_lADOAWaYQc5BFC2CzwAAAAOL4oR_","url":"https://api.github.com/repos/hyperium/hyper/issues/events/15231779967","actor":{"login":"seanmonstar","id":51479,"node_id":"MDQ6VXNlcjUxNDc5","avatar_url":"https://avatars.githubusercontent.com/u/51479?v=4","gravatar_id":"","url":"https://api.github.com/users/seanmonstar","html_url":"https://github.com/seanmonstar","followers_url":"https://api.github.com/users/seanmonstar/followers","following_url":"https://api.github.com/users/seanmonstar/following{/other_user}","gists_url":"https://api.github.com/users/seanmonstar/gists{/gist_id}","starred_url":"https://api.github.com/users/seanmonstar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seanmonstar/subscriptions","organizations_url":"https://api.github.com/users/seanmonstar/orgs","repos_url":"https://api.github.com/users/seanmonstar/repos","events_url":"https://api.github.com/users/seanmonstar/events{/privacy}","received_events_url":"https://api.github.com/users/seanmonstar/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"added_to_project_v2","commit_id":null,"commit_url":null,"created_at":"2022-08-10T17:58:42Z","performed_via_github_app":null},{"id":15189741858,"node_id":"PVTISC_lADOAWaYQc5BFC2CzwAAAAOJYREi","url":"https://api.github.com/repos/hyperium/hyper/issues/events/15189741858","actor":{"login":"seanmonstar","id":51479,"node_id":"MDQ6VXNlcjUxNDc5","avatar_url":"https://avatars.githubusercontent.com/u/51479?v=4","gravatar_id":"","url":"https://api.github.com/users/seanmonstar","html_url":"https://github.com/seanmonstar","followers_url":"https://api.github.com/users/seanmonstar/followers","following_url":"https://api.github.com/users/seanmonstar/following{/other_user}","gists_url":"https://api.github.com/users/seanmonstar/gists{/gist_id}","starred_url":"https://api.github.com/users/seanmonstar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seanmonstar/subscriptions","organizations_url":"https://api.github.com/users/seanmonstar/orgs","repos_url":"https://api.github.com/users/seanmonstar/repos","events_url":"https://api.github.com/users/seanmonstar/events{/privacy}","received_events_url":"https://api.github.com/users/seanmonstar/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"project_v2_item_status_changed","commit_id":null,"commit_url":null,"created_at":"2022-08-10T17:58:47Z","performed_via_github_app":null},{"id":7166019989,"node_id":"MIE_lADOAWaYQc5BFC2CzwAAAAGrIMmV","url":"https://api.github.com/repos/hyperium/hyper/issues/events/7166019989","actor":{"login":"seanmonstar","id":51479,"node_id":"MDQ6VXNlcjUxNDc5","avatar_url":"https://avatars.githubusercontent.com/u/51479?v=4","gravatar_id":"","url":"https://api.github.com/users/seanmonstar","html_url":"https://github.com/seanmonstar","followers_url":"https://api.github.com/users/seanmonstar/followers","following_url":"https://api.github.com/users/seanmonstar/following{/other_user}","gists_url":"https://api.github.com/users/seanmonstar/gists{/gist_id}","starred_url":"https://api.github.com/users/seanmonstar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seanmonstar/subscriptions","organizations_url":"https://api.github.com/users/seanmonstar/orgs","repos_url":"https://api.github.com/users/seanmonstar/repos","events_url":"https://api.github.com/users/seanmonstar/events{/privacy}","received_events_url":"https://api.github.com/users/seanmonstar/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"milestoned","commit_id":null,"commit_url":null,"created_at":"2022-08-10T17:58:50Z","milestone":{"title":"1.0"},"performed_via_github_app":null},{"id":7236425189,"node_id":"DEME_lADOAWaYQc5BFC2CzwAAAAGvUxXl","url":"https://api.github.com/repos/hyperium/hyper/issues/events/7236425189","actor":{"login":"seanmonstar","id":51479,"node_id":"MDQ6VXNlcjUxNDc5","avatar_url":"https://avatars.githubusercontent.com/u/51479?v=4","gravatar_id":"","url":"https://api.github.com/users/seanmonstar","html_url":"https://github.com/seanmonstar","followers_url":"https://api.github.com/users/seanmonstar/followers","following_url":"https://api.github.com/users/seanmonstar/following{/other_user}","gists_url":"https://api.github.com/users/seanmonstar/gists{/gist_id}","starred_url":"https://api.github.com/users/seanmonstar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seanmonstar/subscriptions","organizations_url":"https://api.github.com/users/seanmonstar/orgs","repos_url":"https://api.github.com/users/seanmonstar/repos","events_url":"https://api.github.com/users/seanmonstar/events{/privacy}","received_events_url":"https://api.github.com/users/seanmonstar/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"demilestoned","commit_id":null,"commit_url":null,"created_at":"2022-08-22T21:28:34Z","milestone":{"title":"1.0 RC1"},"performed_via_github_app":null},{"id":7236425191,"node_id":"MIE_lADOAWaYQc5BFC2CzwAAAAGvUxXn","url":"https://api.github.com/repos/hyperium/hyper/issues/events/7236425191","actor":{"login":"seanmonstar","id":51479,"node_id":"MDQ6VXNlcjUxNDc5","avatar_url":"https://avatars.githubusercontent.com/u/51479?v=4","gravatar_id":"","url":"https://api.github.com/users/seanmonstar","html_url":"https://github.com/seanmonstar","followers_url":"https://api.github.com/users/seanmonstar/followers","following_url":"https://api.github.com/users/seanmonstar/following{/other_user}","gists_url":"https://api.github.com/users/seanmonstar/gists{/gist_id}","starred_url":"https://api.github.com/users/seanmonstar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seanmonstar/subscriptions","organizations_url":"https://api.github.com/users/seanmonstar/orgs","repos_url":"https://api.github.com/users/seanmonstar/repos","events_url":"https://api.github.com/users/seanmonstar/events{/privacy}","received_events_url":"https://api.github.com/users/seanmonstar/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"milestoned","commit_id":null,"commit_url":null,"created_at":"2022-08-22T21:28:34Z","milestone":{"title":"1.0 Final"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/hyperium/hyper/issues/comments/1301525979","html_url":"https://github.com/hyperium/hyper/issues/2730#issuecomment-1301525979","issue_url":"https://api.github.com/repos/hyperium/hyper/issues/2730","id":1301525979,"node_id":"IC_kwDOAWaYQc5Nk7Xb","user":{"login":"bossmc","id":1073983,"node_id":"MDQ6VXNlcjEwNzM5ODM=","avatar_url":"https://avatars.githubusercontent.com/u/1073983?v=4","gravatar_id":"","url":"https://api.github.com/users/bossmc","html_url":"https://github.com/bossmc","followers_url":"https://api.github.com/users/bossmc/followers","following_url":"https://api.github.com/users/bossmc/following{/other_user}","gists_url":"https://api.github.com/users/bossmc/gists{/gist_id}","starred_url":"https://api.github.com/users/bossmc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bossmc/subscriptions","organizations_url":"https://api.github.com/users/bossmc/orgs","repos_url":"https://api.github.com/users/bossmc/repos","events_url":"https://api.github.com/users/bossmc/events{/privacy}","received_events_url":"https://api.github.com/users/bossmc/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-11-03T00:42:00Z","updated_at":"2022-11-03T00:42:00Z","body":"> Does http1_header_read_timeout start counting immediately or just once the first byte of the header is received? In any case, I don't think that'd help for an h2 connection, right?\r\n\r\nFrom some testing just now, the answer to the first part is \"no\".  If I start-up an `http1::Connection` with a header timeout configured and connect to it simply with `nc` then the connection stays up indefinitely.  Once I send any data (even a blank line) the timer starts counting and the connection is closed as expected after the timeout.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/hyperium/hyper/issues/comments/1301525979/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"bossmc","id":1073983,"node_id":"MDQ6VXNlcjEwNzM5ODM=","avatar_url":"https://avatars.githubusercontent.com/u/1073983?v=4","gravatar_id":"","url":"https://api.github.com/users/bossmc","html_url":"https://github.com/bossmc","followers_url":"https://api.github.com/users/bossmc/followers","following_url":"https://api.github.com/users/bossmc/following{/other_user}","gists_url":"https://api.github.com/users/bossmc/gists{/gist_id}","starred_url":"https://api.github.com/users/bossmc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bossmc/subscriptions","organizations_url":"https://api.github.com/users/bossmc/orgs","repos_url":"https://api.github.com/users/bossmc/repos","events_url":"https://api.github.com/users/bossmc/events{/privacy}","received_events_url":"https://api.github.com/users/bossmc/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/hyperium/hyper/issues/comments/1353332774","html_url":"https://github.com/hyperium/hyper/issues/2730#issuecomment-1353332774","issue_url":"https://api.github.com/repos/hyperium/hyper/issues/2730","id":1353332774,"node_id":"IC_kwDOAWaYQc5Qqjgm","user":{"login":"seanmonstar","id":51479,"node_id":"MDQ6VXNlcjUxNDc5","avatar_url":"https://avatars.githubusercontent.com/u/51479?v=4","gravatar_id":"","url":"https://api.github.com/users/seanmonstar","html_url":"https://github.com/seanmonstar","followers_url":"https://api.github.com/users/seanmonstar/followers","following_url":"https://api.github.com/users/seanmonstar/following{/other_user}","gists_url":"https://api.github.com/users/seanmonstar/gists{/gist_id}","starred_url":"https://api.github.com/users/seanmonstar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seanmonstar/subscriptions","organizations_url":"https://api.github.com/users/seanmonstar/orgs","repos_url":"https://api.github.com/users/seanmonstar/repos","events_url":"https://api.github.com/users/seanmonstar/events{/privacy}","received_events_url":"https://api.github.com/users/seanmonstar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-15T16:09:29Z","updated_at":"2022-12-15T16:09:29Z","body":"This seems like a thing to slide into RC2 or RC3.\r\n\r\n> I can't just terminate the connection future since I want the TLS session to shut down cleanly for session reuse\r\n\r\n@sfackler Does this mean you'd have the connection write out a 408 response and then finish? Or simply calling `poll_shutdown` and then return the future like if it were in keep-alive state? I guess calling shutdown will make the TLS shutdown start, right?\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/hyperium/hyper/issues/comments/1353332774/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"seanmonstar","id":51479,"node_id":"MDQ6VXNlcjUxNDc5","avatar_url":"https://avatars.githubusercontent.com/u/51479?v=4","gravatar_id":"","url":"https://api.github.com/users/seanmonstar","html_url":"https://github.com/seanmonstar","followers_url":"https://api.github.com/users/seanmonstar/followers","following_url":"https://api.github.com/users/seanmonstar/following{/other_user}","gists_url":"https://api.github.com/users/seanmonstar/gists{/gist_id}","starred_url":"https://api.github.com/users/seanmonstar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seanmonstar/subscriptions","organizations_url":"https://api.github.com/users/seanmonstar/orgs","repos_url":"https://api.github.com/users/seanmonstar/repos","events_url":"https://api.github.com/users/seanmonstar/events{/privacy}","received_events_url":"https://api.github.com/users/seanmonstar/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":8048793569,"node_id":"MEE_lADOAWaYQc5BFC2CzwAAAAHfvtfh","url":"https://api.github.com/repos/hyperium/hyper/issues/events/8048793569","actor":{"login":"sfackler","id":1455697,"node_id":"MDQ6VXNlcjE0NTU2OTc=","avatar_url":"https://avatars.githubusercontent.com/u/1455697?v=4","gravatar_id":"","url":"https://api.github.com/users/sfackler","html_url":"https://github.com/sfackler","followers_url":"https://api.github.com/users/sfackler/followers","following_url":"https://api.github.com/users/sfackler/following{/other_user}","gists_url":"https://api.github.com/users/sfackler/gists{/gist_id}","starred_url":"https://api.github.com/users/sfackler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sfackler/subscriptions","organizations_url":"https://api.github.com/users/sfackler/orgs","repos_url":"https://api.github.com/users/sfackler/repos","events_url":"https://api.github.com/users/sfackler/events{/privacy}","received_events_url":"https://api.github.com/users/sfackler/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-12-15T16:09:29Z","performed_via_github_app":null},{"id":8048793575,"node_id":"SE_lADOAWaYQc5BFC2CzwAAAAHfvtfn","url":"https://api.github.com/repos/hyperium/hyper/issues/events/8048793575","actor":{"login":"sfackler","id":1455697,"node_id":"MDQ6VXNlcjE0NTU2OTc=","avatar_url":"https://avatars.githubusercontent.com/u/1455697?v=4","gravatar_id":"","url":"https://api.github.com/users/sfackler","html_url":"https://github.com/sfackler","followers_url":"https://api.github.com/users/sfackler/followers","following_url":"https://api.github.com/users/sfackler/following{/other_user}","gists_url":"https://api.github.com/users/sfackler/gists{/gist_id}","starred_url":"https://api.github.com/users/sfackler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sfackler/subscriptions","organizations_url":"https://api.github.com/users/sfackler/orgs","repos_url":"https://api.github.com/users/sfackler/repos","events_url":"https://api.github.com/users/sfackler/events{/privacy}","received_events_url":"https://api.github.com/users/sfackler/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-12-15T16:09:29Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/hyperium/hyper/issues/comments/1353391818","html_url":"https://github.com/hyperium/hyper/issues/2730#issuecomment-1353391818","issue_url":"https://api.github.com/repos/hyperium/hyper/issues/2730","id":1353391818,"node_id":"IC_kwDOAWaYQc5Qqx7K","user":{"login":"sfackler","id":1455697,"node_id":"MDQ6VXNlcjE0NTU2OTc=","avatar_url":"https://avatars.githubusercontent.com/u/1455697?v=4","gravatar_id":"","url":"https://api.github.com/users/sfackler","html_url":"https://github.com/sfackler","followers_url":"https://api.github.com/users/sfackler/followers","following_url":"https://api.github.com/users/sfackler/following{/other_user}","gists_url":"https://api.github.com/users/sfackler/gists{/gist_id}","starred_url":"https://api.github.com/users/sfackler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sfackler/subscriptions","organizations_url":"https://api.github.com/users/sfackler/orgs","repos_url":"https://api.github.com/users/sfackler/repos","events_url":"https://api.github.com/users/sfackler/events{/privacy}","received_events_url":"https://api.github.com/users/sfackler/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-15T16:51:35Z","updated_at":"2022-12-15T16:51:35Z","body":"Yeah it just needs to call shutdown on the underlying IO object, which will handle the SSL shutdown protocol.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/hyperium/hyper/issues/comments/1353391818/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sfackler","id":1455697,"node_id":"MDQ6VXNlcjE0NTU2OTc=","avatar_url":"https://avatars.githubusercontent.com/u/1455697?v=4","gravatar_id":"","url":"https://api.github.com/users/sfackler","html_url":"https://github.com/sfackler","followers_url":"https://api.github.com/users/sfackler/followers","following_url":"https://api.github.com/users/sfackler/following{/other_user}","gists_url":"https://api.github.com/users/sfackler/gists{/gist_id}","starred_url":"https://api.github.com/users/sfackler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sfackler/subscriptions","organizations_url":"https://api.github.com/users/sfackler/orgs","repos_url":"https://api.github.com/users/sfackler/repos","events_url":"https://api.github.com/users/sfackler/events{/privacy}","received_events_url":"https://api.github.com/users/sfackler/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":15153888420,"node_id":"PVTISC_lADOAWaYQc5BFC2CzwAAAAOHPfyk","url":"https://api.github.com/repos/hyperium/hyper/issues/events/15153888420","actor":{"login":"seanmonstar","id":51479,"node_id":"MDQ6VXNlcjUxNDc5","avatar_url":"https://avatars.githubusercontent.com/u/51479?v=4","gravatar_id":"","url":"https://api.github.com/users/seanmonstar","html_url":"https://github.com/seanmonstar","followers_url":"https://api.github.com/users/seanmonstar/followers","following_url":"https://api.github.com/users/seanmonstar/following{/other_user}","gists_url":"https://api.github.com/users/seanmonstar/gists{/gist_id}","starred_url":"https://api.github.com/users/seanmonstar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seanmonstar/subscriptions","organizations_url":"https://api.github.com/users/seanmonstar/orgs","repos_url":"https://api.github.com/users/seanmonstar/repos","events_url":"https://api.github.com/users/seanmonstar/events{/privacy}","received_events_url":"https://api.github.com/users/seanmonstar/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"project_v2_item_status_changed","commit_id":null,"commit_url":null,"created_at":"2022-12-21T14:54:16Z","performed_via_github_app":null},{"id":8104559058,"node_id":"UNLE_lADOAWaYQc5BFC2CzwAAAAHjEcHS","url":"https://api.github.com/repos/hyperium/hyper/issues/events/8104559058","actor":{"login":"seanmonstar","id":51479,"node_id":"MDQ6VXNlcjUxNDc5","avatar_url":"https://avatars.githubusercontent.com/u/51479?v=4","gravatar_id":"","url":"https://api.github.com/users/seanmonstar","html_url":"https://github.com/seanmonstar","followers_url":"https://api.github.com/users/seanmonstar/followers","following_url":"https://api.github.com/users/seanmonstar/following{/other_user}","gists_url":"https://api.github.com/users/seanmonstar/gists{/gist_id}","starred_url":"https://api.github.com/users/seanmonstar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seanmonstar/subscriptions","organizations_url":"https://api.github.com/users/seanmonstar/orgs","repos_url":"https://api.github.com/users/seanmonstar/repos","events_url":"https://api.github.com/users/seanmonstar/events{/privacy}","received_events_url":"https://api.github.com/users/seanmonstar/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"unlabeled","commit_id":null,"commit_url":null,"created_at":"2022-12-23T16:41:08Z","label":{"name":"B-rfc","color":"1d76db"},"performed_via_github_app":null},{"id":8104559060,"node_id":"LE_lADOAWaYQc5BFC2CzwAAAAHjEcHU","url":"https://api.github.com/repos/hyperium/hyper/issues/events/8104559060","actor":{"login":"seanmonstar","id":51479,"node_id":"MDQ6VXNlcjUxNDc5","avatar_url":"https://avatars.githubusercontent.com/u/51479?v=4","gravatar_id":"","url":"https://api.github.com/users/seanmonstar","html_url":"https://github.com/seanmonstar","followers_url":"https://api.github.com/users/seanmonstar/followers","following_url":"https://api.github.com/users/seanmonstar/following{/other_user}","gists_url":"https://api.github.com/users/seanmonstar/gists{/gist_id}","starred_url":"https://api.github.com/users/seanmonstar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seanmonstar/subscriptions","organizations_url":"https://api.github.com/users/seanmonstar/orgs","repos_url":"https://api.github.com/users/seanmonstar/repos","events_url":"https://api.github.com/users/seanmonstar/events{/privacy}","received_events_url":"https://api.github.com/users/seanmonstar/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2022-12-23T16:41:08Z","label":{"name":"A-server","color":"fbca04"},"performed_via_github_app":null},{"id":8104559062,"node_id":"LE_lADOAWaYQc5BFC2CzwAAAAHjEcHW","url":"https://api.github.com/repos/hyperium/hyper/issues/events/8104559062","actor":{"login":"seanmonstar","id":51479,"node_id":"MDQ6VXNlcjUxNDc5","avatar_url":"https://avatars.githubusercontent.com/u/51479?v=4","gravatar_id":"","url":"https://api.github.com/users/seanmonstar","html_url":"https://github.com/seanmonstar","followers_url":"https://api.github.com/users/seanmonstar/followers","following_url":"https://api.github.com/users/seanmonstar/following{/other_user}","gists_url":"https://api.github.com/users/seanmonstar/gists{/gist_id}","starred_url":"https://api.github.com/users/seanmonstar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seanmonstar/subscriptions","organizations_url":"https://api.github.com/users/seanmonstar/orgs","repos_url":"https://api.github.com/users/seanmonstar/repos","events_url":"https://api.github.com/users/seanmonstar/events{/privacy}","received_events_url":"https://api.github.com/users/seanmonstar/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2022-12-23T16:41:08Z","label":{"name":"S-feature","color":"f9d0c4"},"performed_via_github_app":null},{"id":8104559065,"node_id":"LE_lADOAWaYQc5BFC2CzwAAAAHjEcHZ","url":"https://api.github.com/repos/hyperium/hyper/issues/events/8104559065","actor":{"login":"seanmonstar","id":51479,"node_id":"MDQ6VXNlcjUxNDc5","avatar_url":"https://avatars.githubusercontent.com/u/51479?v=4","gravatar_id":"","url":"https://api.github.com/users/seanmonstar","html_url":"https://github.com/seanmonstar","followers_url":"https://api.github.com/users/seanmonstar/followers","following_url":"https://api.github.com/users/seanmonstar/following{/other_user}","gists_url":"https://api.github.com/users/seanmonstar/gists{/gist_id}","starred_url":"https://api.github.com/users/seanmonstar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seanmonstar/subscriptions","organizations_url":"https://api.github.com/users/seanmonstar/orgs","repos_url":"https://api.github.com/users/seanmonstar/repos","events_url":"https://api.github.com/users/seanmonstar/events{/privacy}","received_events_url":"https://api.github.com/users/seanmonstar/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2022-12-23T16:41:08Z","label":{"name":"E-medium","color":"c2e0c6"},"performed_via_github_app":null},{"id":8104559067,"node_id":"LE_lADOAWaYQc5BFC2CzwAAAAHjEcHb","url":"https://api.github.com/repos/hyperium/hyper/issues/events/8104559067","actor":{"login":"seanmonstar","id":51479,"node_id":"MDQ6VXNlcjUxNDc5","avatar_url":"https://avatars.githubusercontent.com/u/51479?v=4","gravatar_id":"","url":"https://api.github.com/users/seanmonstar","html_url":"https://github.com/seanmonstar","followers_url":"https://api.github.com/users/seanmonstar/followers","following_url":"https://api.github.com/users/seanmonstar/following{/other_user}","gists_url":"https://api.github.com/users/seanmonstar/gists{/gist_id}","starred_url":"https://api.github.com/users/seanmonstar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seanmonstar/subscriptions","organizations_url":"https://api.github.com/users/seanmonstar/orgs","repos_url":"https://api.github.com/users/seanmonstar/repos","events_url":"https://api.github.com/users/seanmonstar/events{/privacy}","received_events_url":"https://api.github.com/users/seanmonstar/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2022-12-23T16:41:08Z","label":{"name":"B-breaking-change","color":"1d76db"},"performed_via_github_app":null},{"id":8104559954,"node_id":"UNLE_lADOAWaYQc5BFC2CzwAAAAHjEcVS","url":"https://api.github.com/repos/hyperium/hyper/issues/events/8104559954","actor":{"login":"seanmonstar","id":51479,"node_id":"MDQ6VXNlcjUxNDc5","avatar_url":"https://avatars.githubusercontent.com/u/51479?v=4","gravatar_id":"","url":"https://api.github.com/users/seanmonstar","html_url":"https://github.com/seanmonstar","followers_url":"https://api.github.com/users/seanmonstar/followers","following_url":"https://api.github.com/users/seanmonstar/following{/other_user}","gists_url":"https://api.github.com/users/seanmonstar/gists{/gist_id}","starred_url":"https://api.github.com/users/seanmonstar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seanmonstar/subscriptions","organizations_url":"https://api.github.com/users/seanmonstar/orgs","repos_url":"https://api.github.com/users/seanmonstar/repos","events_url":"https://api.github.com/users/seanmonstar/events{/privacy}","received_events_url":"https://api.github.com/users/seanmonstar/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"unlabeled","commit_id":null,"commit_url":null,"created_at":"2022-12-23T16:41:18Z","label":{"name":"S-feature","color":"f9d0c4"},"performed_via_github_app":null},{"id":15134351323,"node_id":"PVTISC_lADOAWaYQc5BFC2CzwAAAAOGE9_b","url":"https://api.github.com/repos/hyperium/hyper/issues/events/15134351323","actor":{"login":"seanmonstar","id":51479,"node_id":"MDQ6VXNlcjUxNDc5","avatar_url":"https://avatars.githubusercontent.com/u/51479?v=4","gravatar_id":"","url":"https://api.github.com/users/seanmonstar","html_url":"https://github.com/seanmonstar","followers_url":"https://api.github.com/users/seanmonstar/followers","following_url":"https://api.github.com/users/seanmonstar/following{/other_user}","gists_url":"https://api.github.com/users/seanmonstar/gists{/gist_id}","starred_url":"https://api.github.com/users/seanmonstar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seanmonstar/subscriptions","organizations_url":"https://api.github.com/users/seanmonstar/orgs","repos_url":"https://api.github.com/users/seanmonstar/repos","events_url":"https://api.github.com/users/seanmonstar/events{/privacy}","received_events_url":"https://api.github.com/users/seanmonstar/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"project_v2_item_status_changed","commit_id":null,"commit_url":null,"created_at":"2022-12-23T18:47:53Z","performed_via_github_app":null},{"id":8629133697,"node_id":"DEME_lADOAWaYQc5BFC2CzwAAAAICViGB","url":"https://api.github.com/repos/hyperium/hyper/issues/events/8629133697","actor":{"login":"seanmonstar","id":51479,"node_id":"MDQ6VXNlcjUxNDc5","avatar_url":"https://avatars.githubusercontent.com/u/51479?v=4","gravatar_id":"","url":"https://api.github.com/users/seanmonstar","html_url":"https://github.com/seanmonstar","followers_url":"https://api.github.com/users/seanmonstar/followers","following_url":"https://api.github.com/users/seanmonstar/following{/other_user}","gists_url":"https://api.github.com/users/seanmonstar/gists{/gist_id}","starred_url":"https://api.github.com/users/seanmonstar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seanmonstar/subscriptions","organizations_url":"https://api.github.com/users/seanmonstar/orgs","repos_url":"https://api.github.com/users/seanmonstar/repos","events_url":"https://api.github.com/users/seanmonstar/events{/privacy}","received_events_url":"https://api.github.com/users/seanmonstar/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"demilestoned","commit_id":null,"commit_url":null,"created_at":"2023-02-28T16:44:29Z","milestone":{"title":"1.0 Final"},"performed_via_github_app":null},{"id":8629133703,"node_id":"MIE_lADOAWaYQc5BFC2CzwAAAAICViGH","url":"https://api.github.com/repos/hyperium/hyper/issues/events/8629133703","actor":{"login":"seanmonstar","id":51479,"node_id":"MDQ6VXNlcjUxNDc5","avatar_url":"https://avatars.githubusercontent.com/u/51479?v=4","gravatar_id":"","url":"https://api.github.com/users/seanmonstar","html_url":"https://github.com/seanmonstar","followers_url":"https://api.github.com/users/seanmonstar/followers","following_url":"https://api.github.com/users/seanmonstar/following{/other_user}","gists_url":"https://api.github.com/users/seanmonstar/gists{/gist_id}","starred_url":"https://api.github.com/users/seanmonstar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seanmonstar/subscriptions","organizations_url":"https://api.github.com/users/seanmonstar/orgs","repos_url":"https://api.github.com/users/seanmonstar/repos","events_url":"https://api.github.com/users/seanmonstar/events{/privacy}","received_events_url":"https://api.github.com/users/seanmonstar/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"milestoned","commit_id":null,"commit_url":null,"created_at":"2023-02-28T16:44:29Z","milestone":{"title":"1.0 RC4"},"performed_via_github_app":null},{"actor":{"login":"seanmonstar","id":51479,"node_id":"MDQ6VXNlcjUxNDc5","avatar_url":"https://avatars.githubusercontent.com/u/51479?v=4","gravatar_id":"","url":"https://api.github.com/users/seanmonstar","html_url":"https://github.com/seanmonstar","followers_url":"https://api.github.com/users/seanmonstar/followers","following_url":"https://api.github.com/users/seanmonstar/following{/other_user}","gists_url":"https://api.github.com/users/seanmonstar/gists{/gist_id}","starred_url":"https://api.github.com/users/seanmonstar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seanmonstar/subscriptions","organizations_url":"https://api.github.com/users/seanmonstar/orgs","repos_url":"https://api.github.com/users/seanmonstar/repos","events_url":"https://api.github.com/users/seanmonstar/events{/privacy}","received_events_url":"https://api.github.com/users/seanmonstar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-03-30T18:17:22Z","updated_at":"2023-03-30T18:17:22Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/hyperium/hyper/issues/3188","repository_url":"https://api.github.com/repos/hyperium/hyper","labels_url":"https://api.github.com/repos/hyperium/hyper/issues/3188/labels{/name}","comments_url":"https://api.github.com/repos/hyperium/hyper/issues/3188/comments","events_url":"https://api.github.com/repos/hyperium/hyper/issues/3188/events","html_url":"https://github.com/hyperium/hyper/issues/3188","id":1647471312,"node_id":"I_kwDOAWaYQc5iMmrQ","number":3188,"title":"It will take a long time to turn off the HTTP service","user":{"login":"Cloud33","id":8787198,"node_id":"MDQ6VXNlcjg3ODcxOTg=","avatar_url":"https://avatars.githubusercontent.com/u/8787198?v=4","gravatar_id":"","url":"https://api.github.com/users/Cloud33","html_url":"https://github.com/Cloud33","followers_url":"https://api.github.com/users/Cloud33/followers","following_url":"https://api.github.com/users/Cloud33/following{/other_user}","gists_url":"https://api.github.com/users/Cloud33/gists{/gist_id}","starred_url":"https://api.github.com/users/Cloud33/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Cloud33/subscriptions","organizations_url":"https://api.github.com/users/Cloud33/orgs","repos_url":"https://api.github.com/users/Cloud33/repos","events_url":"https://api.github.com/users/Cloud33/events{/privacy}","received_events_url":"https://api.github.com/users/Cloud33/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":125710197,"node_id":"MDU6TGFiZWwxMjU3MTAxOTc=","url":"https://api.github.com/repos/hyperium/hyper/labels/C-bug","name":"C-bug","color":"d93f0b","default":false,"description":"Category: bug. Something is wrong. This is bad!"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2023-03-30T11:56:16Z","updated_at":"2023-03-31T02:08:13Z","closed_at":"2023-03-30T18:17:22Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":23500865,"node_id":"MDEwOlJlcG9zaXRvcnkyMzUwMDg2NQ==","name":"hyper","full_name":"hyperium/hyper","private":false,"owner":{"login":"hyperium","id":8730506,"node_id":"MDEyOk9yZ2FuaXphdGlvbjg3MzA1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/8730506?v=4","gravatar_id":"","url":"https://api.github.com/users/hyperium","html_url":"https://github.com/hyperium","followers_url":"https://api.github.com/users/hyperium/followers","following_url":"https://api.github.com/users/hyperium/following{/other_user}","gists_url":"https://api.github.com/users/hyperium/gists{/gist_id}","starred_url":"https://api.github.com/users/hyperium/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hyperium/subscriptions","organizations_url":"https://api.github.com/users/hyperium/orgs","repos_url":"https://api.github.com/users/hyperium/repos","events_url":"https://api.github.com/users/hyperium/events{/privacy}","received_events_url":"https://api.github.com/users/hyperium/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/hyperium/hyper","description":"An HTTP library for Rust","fork":false,"url":"https://api.github.com/repos/hyperium/hyper","forks_url":"https://api.github.com/repos/hyperium/hyper/forks","keys_url":"https://api.github.com/repos/hyperium/hyper/keys{/key_id}","collaborators_url":"https://api.github.com/repos/hyperium/hyper/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/hyperium/hyper/teams","hooks_url":"https://api.github.com/repos/hyperium/hyper/hooks","issue_events_url":"https://api.github.com/repos/hyperium/hyper/issues/events{/number}","events_url":"https://api.github.com/repos/hyperium/hyper/events","assignees_url":"https://api.github.com/repos/hyperium/hyper/assignees{/user}","branches_url":"https://api.github.com/repos/hyperium/hyper/branches{/branch}","tags_url":"https://api.github.com/repos/hyperium/hyper/tags","blobs_url":"https://api.github.com/repos/hyperium/hyper/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/hyperium/hyper/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/hyperium/hyper/git/refs{/sha}","trees_url":"https://api.github.com/repos/hyperium/hyper/git/trees{/sha}","statuses_url":"https://api.github.com/repos/hyperium/hyper/statuses/{sha}","languages_url":"https://api.github.com/repos/hyperium/hyper/languages","stargazers_url":"https://api.github.com/repos/hyperium/hyper/stargazers","contributors_url":"https://api.github.com/repos/hyperium/hyper/contributors","subscribers_url":"https://api.github.com/repos/hyperium/hyper/subscribers","subscription_url":"https://api.github.com/repos/hyperium/hyper/subscription","commits_url":"https://api.github.com/repos/hyperium/hyper/commits{/sha}","git_commits_url":"https://api.github.com/repos/hyperium/hyper/git/commits{/sha}","comments_url":"https://api.github.com/repos/hyperium/hyper/comments{/number}","issue_comment_url":"https://api.github.com/repos/hyperium/hyper/issues/comments{/number}","contents_url":"https://api.github.com/repos/hyperium/hyper/contents/{+path}","compare_url":"https://api.github.com/repos/hyperium/hyper/compare/{base}...{head}","merges_url":"https://api.github.com/repos/hyperium/hyper/merges","archive_url":"https://api.github.com/repos/hyperium/hyper/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/hyperium/hyper/downloads","issues_url":"https://api.github.com/repos/hyperium/hyper/issues{/number}","pulls_url":"https://api.github.com/repos/hyperium/hyper/pulls{/number}","milestones_url":"https://api.github.com/repos/hyperium/hyper/milestones{/number}","notifications_url":"https://api.github.com/repos/hyperium/hyper/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/hyperium/hyper/labels{/name}","releases_url":"https://api.github.com/repos/hyperium/hyper/releases{/id}","deployments_url":"https://api.github.com/repos/hyperium/hyper/deployments","created_at":"2014-08-30T21:14:33Z","updated_at":"2025-11-09T09:11:28Z","pushed_at":"2025-10-27T16:23:23Z","git_url":"git://github.com/hyperium/hyper.git","ssh_url":"git@github.com:hyperium/hyper.git","clone_url":"https://github.com/hyperium/hyper.git","svn_url":"https://github.com/hyperium/hyper","homepage":"https://hyper.rs","size":13990,"stargazers_count":15659,"watchers_count":15659,"language":"Rust","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":true,"has_discussions":true,"forks_count":1683,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":259,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["http","hyper","rust"],"visibility":"public","forks":1683,"open_issues":259,"watchers":15659,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"**Version**\r\nList the version(s) of `hyper`, and any relevant hyper dependency (such as `h2` if this is related to HTTP/2).\r\n\r\n```rust\r\naxum = { version = \"0.6.12\"}\r\nhyper = {version = \"0.14.25\"}\r\n```\r\n\r\n**Platform**\r\nThe output of `uname -a` (UNIX), or version and 32 or 64-bit (Windows)\r\n\r\n64-bit (Windows)\r\n\r\n**Description**\r\nEnter your issue details here.\r\nOne way to structure the description:\r\n\r\nI reported this issue at `axum`https://github.com/tokio-rs/axum/issues/991, but the shutdown of `axum` originated from super, so I briefly explained this issue. I made a very simple API derived from the example `hello world` + `Graceful shutdown`. If you only start the http server, it will be shut down immediately, which is very fast, but if you have counted a request, it will get stuck here after shutdown:\r\n```\r\n2023-03-30 17:14:59.9816 TRACE hyper::proto::h1::conn: shut down IO complete\r\n2023-03-30 17:14:59.9818 TRACE mio::poll: deregistering event source from poller\r\n2023-03-30 17:17:34.4422 TRACE hyper::proto::h1::conn: Conn::read_head\r\n2023-03-30 17:17:34.4427 TRACE hyper::proto::h1::io: received 0 bytes\r\n2023-03-30 17:17:34.4430 TRACE hyper::proto::h1::io: parse eof\r\n```\r\n**Total waiting time: 17:14:59 ~ 17:17:34  = 153 s**..\r\n\r\n**2023-03-30 17:14:59.9818 TRACE mio::poll: deregistering event source from poller**\r\n\r\n[short summary of the bug]\r\n```\r\n2023-03-30 17:14:59.9785  INFO fly_api: signal received, starting graceful shutdown\r\n2023-03-30 17:14:59.9788 DEBUG hyper::server::shutdown: signal received, starting graceful shutdown\r\n2023-03-30 17:14:59.9791 TRACE mio::poll: deregistering event source from poller\r\n2023-03-30 17:14:59.9792 TRACE hyper::proto::h1::conn: disable_keep_alive; closing idle connection\r\n2023-03-30 17:14:59.9792 TRACE hyper::proto::h1::conn: disable_keep_alive; in-progress connection\r\n2023-03-30 17:14:59.9797 TRACE hyper::proto::h1::conn: State::close()\r\n2023-03-30 17:14:59.9799 TRACE hyper::proto::h1::conn: Conn::read_head\r\n2023-03-30 17:14:59.9802 TRACE hyper::proto::h1::conn: State::close_read()\r\n2023-03-30 17:14:59.9806 TRACE hyper::proto::h1::conn: State::close_write()\r\n2023-03-30 17:14:59.9804 TRACE hyper::proto::h1::conn: flushed({role=server}): State { reading: Init, writing: Init, keep_alive: Disabled }\r\n2023-03-30 17:14:59.9808 TRACE hyper::proto::h1::conn: flushed({role=server}): State { reading: Closed, writing: Closed, keep_alive: Disabled }\r\n2023-03-30 17:14:59.9816 TRACE hyper::proto::h1::conn: shut down IO complete\r\n2023-03-30 17:14:59.9818 TRACE mio::poll: deregistering event source from poller\r\n2023-03-30 17:17:34.4422 TRACE hyper::proto::h1::conn: Conn::read_head\r\n2023-03-30 17:17:34.4427 TRACE hyper::proto::h1::io: received 0 bytes\r\n2023-03-30 17:17:34.4430 TRACE hyper::proto::h1::io: parse eof\r\n2023-03-30 17:17:34.4433 TRACE hyper::proto::h1::conn: State::close_read()\r\n2023-03-30 17:17:34.4436 DEBUG hyper::proto::h1::conn: read eof\r\n2023-03-30 17:17:34.4439 TRACE hyper::proto::h1::conn: State::close_write()\r\n2023-03-30 17:17:34.4442 TRACE hyper::proto::h1::conn: State::close_read()\r\n2023-03-30 17:17:34.4446 TRACE hyper::proto::h1::conn: State::close_write()\r\n2023-03-30 17:17:34.4450 TRACE hyper::proto::h1::conn: flushed({role=server}): State { reading: Closed, writing: Closed, keep_alive: Disabled }\r\n2023-03-30 17:17:34.4456 TRACE hyper::proto::h1::conn: shut down IO complete\r\n2023-03-30 17:17:34.4459 TRACE mio::poll: deregistering event source from poller\r\n2023-03-30 17:17:34.4467  INFO fly_api: close http service\r\n2023-03-30 17:17:34.4471  INFO fly_api: shutdown start\r\n2023-03-30 17:17:34.4474  INFO fly_api: shutdown end\r\n```\r\n\r\n\r\nI tried this code:\r\n\r\n```\r\npub async fn serve(app_port: u16, client: Client) {\r\n    // build our application with a route\r\n    let app = Router::new()\r\n        .route(\"/\", get(handler))\r\n        .layer(Extension(ApiContext { client }))\r\n        .layer(TraceLayer::new_for_http());\r\n\r\n    // add a fallback service for handling routes to unknown paths\r\n    let app = app.fallback(handler_404);\r\n    // run it\r\n    let addr = SocketAddr::from(([127, 0, 0, 1], app_port));\r\n\r\n    tracing::debug!(\"listening on {}\", addr);\r\n    axum::Server::bind(&addr)\r\n        .serve(app.into_make_service())\r\n        .with_graceful_shutdown(shutdown_signal())\r\n        .await\r\n        .unwrap();\r\n    tracing::info!(\"close http service\");\r\n}\r\n\r\n// 404\r\nasync fn handler_404(method: Method, uri: Uri) -> impl IntoResponse {\r\n    (\r\n        StatusCode::NOT_FOUND,\r\n        format!(\"Nothing to see at {} {}\", method, uri),\r\n    )\r\n}\r\n\r\nasync fn handler() -> Html<&'static str> {\r\n    Html(\"<h1>Hello, World!</h1>\")\r\n}\r\n\r\n// \r\nasync fn shutdown_signal() {\r\n    let ctrl_c = async {\r\n        tokio::signal::ctrl_c()\r\n            .await\r\n            .expect(\"failed to install Ctrl+C handler\");\r\n    };\r\n\r\n    #[cfg(unix)]\r\n    let terminate = async {\r\n        tokio::signal::unix::signal(signal::unix::SignalKind::terminate())\r\n            .expect(\"failed to install signal handler\")\r\n            .recv()\r\n            .await;\r\n    };\r\n\r\n    #[cfg(not(unix))]\r\n    let terminate = std::future::pending::<()>();\r\n\r\n    tokio::select! {\r\n        _ = ctrl_c => {},\r\n        _ = terminate => {},\r\n    }\r\n    tracing::info!(\"signal received, starting graceful shutdown\");\r\n}\r\n```\r\n\r\n\r\n","reactions":{"url":"https://api.github.com/repos/hyperium/hyper/issues/3188/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/hyperium/hyper/issues/3188/timeline","performed_via_github_app":null,"state_reason":"not_planned"}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/hyperium/hyper/issues/comments/1546509008","html_url":"https://github.com/hyperium/hyper/issues/2730#issuecomment-1546509008","issue_url":"https://api.github.com/repos/hyperium/hyper/issues/2730","id":1546509008,"node_id":"IC_kwDOAWaYQc5cLdrQ","user":{"login":"rob2244","id":26353604,"node_id":"MDQ6VXNlcjI2MzUzNjA0","avatar_url":"https://avatars.githubusercontent.com/u/26353604?v=4","gravatar_id":"","url":"https://api.github.com/users/rob2244","html_url":"https://github.com/rob2244","followers_url":"https://api.github.com/users/rob2244/followers","following_url":"https://api.github.com/users/rob2244/following{/other_user}","gists_url":"https://api.github.com/users/rob2244/gists{/gist_id}","starred_url":"https://api.github.com/users/rob2244/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rob2244/subscriptions","organizations_url":"https://api.github.com/users/rob2244/orgs","repos_url":"https://api.github.com/users/rob2244/repos","events_url":"https://api.github.com/users/rob2244/events{/privacy}","received_events_url":"https://api.github.com/users/rob2244/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-13T03:12:58Z","updated_at":"2023-05-13T03:12:58Z","body":"I think I can take this one.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/hyperium/hyper/issues/comments/1546509008/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"rob2244","id":26353604,"node_id":"MDQ6VXNlcjI2MzUzNjA0","avatar_url":"https://avatars.githubusercontent.com/u/26353604?v=4","gravatar_id":"","url":"https://api.github.com/users/rob2244","html_url":"https://github.com/rob2244","followers_url":"https://api.github.com/users/rob2244/followers","following_url":"https://api.github.com/users/rob2244/following{/other_user}","gists_url":"https://api.github.com/users/rob2244/gists{/gist_id}","starred_url":"https://api.github.com/users/rob2244/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rob2244/subscriptions","organizations_url":"https://api.github.com/users/rob2244/orgs","repos_url":"https://api.github.com/users/rob2244/repos","events_url":"https://api.github.com/users/rob2244/events{/privacy}","received_events_url":"https://api.github.com/users/rob2244/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":9247862856,"node_id":"REFE_lADOAWaYQc5BFC2CzwAAAAInNzBI","url":"https://api.github.com/repos/hyperium/hyper/issues/events/9247862856","actor":{"login":"KotaHv","id":92137267,"node_id":"U_kgDOBX3nMw","avatar_url":"https://avatars.githubusercontent.com/u/92137267?v=4","gravatar_id":"","url":"https://api.github.com/users/KotaHv","html_url":"https://github.com/KotaHv","followers_url":"https://api.github.com/users/KotaHv/followers","following_url":"https://api.github.com/users/KotaHv/following{/other_user}","gists_url":"https://api.github.com/users/KotaHv/gists{/gist_id}","starred_url":"https://api.github.com/users/KotaHv/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/KotaHv/subscriptions","organizations_url":"https://api.github.com/users/KotaHv/orgs","repos_url":"https://api.github.com/users/KotaHv/repos","events_url":"https://api.github.com/users/KotaHv/events{/privacy}","received_events_url":"https://api.github.com/users/KotaHv/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"4f2f3fa8f302ca16ccd62190f673ade327df244c","commit_url":"https://api.github.com/repos/KotaHv/mikan-proxy/commits/4f2f3fa8f302ca16ccd62190f673ade327df244c","created_at":"2023-05-15T15:05:58Z","performed_via_github_app":null},{"id":15136328789,"node_id":"PVTISC_lADOAWaYQc5BFC2CzwAAAAOGMgxV","url":"https://api.github.com/repos/hyperium/hyper/issues/events/15136328789","actor":{"login":"seanmonstar","id":51479,"node_id":"MDQ6VXNlcjUxNDc5","avatar_url":"https://avatars.githubusercontent.com/u/51479?v=4","gravatar_id":"","url":"https://api.github.com/users/seanmonstar","html_url":"https://github.com/seanmonstar","followers_url":"https://api.github.com/users/seanmonstar/followers","following_url":"https://api.github.com/users/seanmonstar/following{/other_user}","gists_url":"https://api.github.com/users/seanmonstar/gists{/gist_id}","starred_url":"https://api.github.com/users/seanmonstar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seanmonstar/subscriptions","organizations_url":"https://api.github.com/users/seanmonstar/orgs","repos_url":"https://api.github.com/users/seanmonstar/repos","events_url":"https://api.github.com/users/seanmonstar/events{/privacy}","received_events_url":"https://api.github.com/users/seanmonstar/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"project_v2_item_status_changed","commit_id":null,"commit_url":null,"created_at":"2023-05-18T19:47:43Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/hyperium/hyper/issues/comments/1556295555","html_url":"https://github.com/hyperium/hyper/issues/2730#issuecomment-1556295555","issue_url":"https://api.github.com/repos/hyperium/hyper/issues/2730","id":1556295555,"node_id":"IC_kwDOAWaYQc5cwy-D","user":{"login":"rob2244","id":26353604,"node_id":"MDQ6VXNlcjI2MzUzNjA0","avatar_url":"https://avatars.githubusercontent.com/u/26353604?v=4","gravatar_id":"","url":"https://api.github.com/users/rob2244","html_url":"https://github.com/rob2244","followers_url":"https://api.github.com/users/rob2244/followers","following_url":"https://api.github.com/users/rob2244/following{/other_user}","gists_url":"https://api.github.com/users/rob2244/gists{/gist_id}","starred_url":"https://api.github.com/users/rob2244/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rob2244/subscriptions","organizations_url":"https://api.github.com/users/rob2244/orgs","repos_url":"https://api.github.com/users/rob2244/repos","events_url":"https://api.github.com/users/rob2244/events{/privacy}","received_events_url":"https://api.github.com/users/rob2244/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-21T21:23:28Z","updated_at":"2023-05-21T23:52:53Z","body":"@seanmonstar so the issue right now is this: \r\n\r\nif we try to control this using the keep_alive state (which is what we're currently doing) it introduces a race condition of sorts.\r\nIf keep_alive is initially **Idle**, when disable_keep_alive() is called (either directly or through graceful_shutdown) the connection will shut down before servicing **any** requests. This seems like incorrect behavior, it breaks some unit tests and I would expect that the connection would respond to one request before shutting down.\r\n\r\nIf keep_alive is initially **Busy** then the connection will wait forever on the read of the initial request.\r\n\r\nI think we have two options here: either we keep the initial state as Busy and add some sort of read timeout somewhere, or we keep the initial state as Idle and do a peek on the underlying io stream and process any data found there before closing the connection.\r\n\r\n**edit**:\r\nActually I found another way to do it I think. Let me see if it works. Not sure I'm super happy with it thought because it feels a little like catering to an edge case too much","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/hyperium/hyper/issues/comments/1556295555/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"rob2244","id":26353604,"node_id":"MDQ6VXNlcjI2MzUzNjA0","avatar_url":"https://avatars.githubusercontent.com/u/26353604?v=4","gravatar_id":"","url":"https://api.github.com/users/rob2244","html_url":"https://github.com/rob2244","followers_url":"https://api.github.com/users/rob2244/followers","following_url":"https://api.github.com/users/rob2244/following{/other_user}","gists_url":"https://api.github.com/users/rob2244/gists{/gist_id}","starred_url":"https://api.github.com/users/rob2244/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rob2244/subscriptions","organizations_url":"https://api.github.com/users/rob2244/orgs","repos_url":"https://api.github.com/users/rob2244/repos","events_url":"https://api.github.com/users/rob2244/events{/privacy}","received_events_url":"https://api.github.com/users/rob2244/received_events","type":"User","user_view_type":"public","site_admin":false}}]