[{"url":"https://api.github.com/repos/hyperium/hyper/issues/comments/440870322","html_url":"https://github.com/hyperium/hyper/issues/1716#issuecomment-440870322","issue_url":"https://api.github.com/repos/hyperium/hyper/issues/1716","id":440870322,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MDg3MDMyMg==","user":{"login":"seanmonstar","id":51479,"node_id":"MDQ6VXNlcjUxNDc5","avatar_url":"https://avatars.githubusercontent.com/u/51479?v=4","gravatar_id":"","url":"https://api.github.com/users/seanmonstar","html_url":"https://github.com/seanmonstar","followers_url":"https://api.github.com/users/seanmonstar/followers","following_url":"https://api.github.com/users/seanmonstar/following{/other_user}","gists_url":"https://api.github.com/users/seanmonstar/gists{/gist_id}","starred_url":"https://api.github.com/users/seanmonstar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seanmonstar/subscriptions","organizations_url":"https://api.github.com/users/seanmonstar/orgs","repos_url":"https://api.github.com/users/seanmonstar/repos","events_url":"https://api.github.com/users/seanmonstar/events{/privacy}","received_events_url":"https://api.github.com/users/seanmonstar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-22T00:50:41Z","updated_at":"2018-11-22T00:50:41Z","body":"I haven't really investigated, could the fix for #1717 have fixed this too?","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/hyperium/hyper/issues/comments/440870322/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"seanmonstar","id":51479,"node_id":"MDQ6VXNlcjUxNDc5","avatar_url":"https://avatars.githubusercontent.com/u/51479?v=4","gravatar_id":"","url":"https://api.github.com/users/seanmonstar","html_url":"https://github.com/seanmonstar","followers_url":"https://api.github.com/users/seanmonstar/followers","following_url":"https://api.github.com/users/seanmonstar/following{/other_user}","gists_url":"https://api.github.com/users/seanmonstar/gists{/gist_id}","starred_url":"https://api.github.com/users/seanmonstar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seanmonstar/subscriptions","organizations_url":"https://api.github.com/users/seanmonstar/orgs","repos_url":"https://api.github.com/users/seanmonstar/repos","events_url":"https://api.github.com/users/seanmonstar/events{/privacy}","received_events_url":"https://api.github.com/users/seanmonstar/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/hyperium/hyper/issues/comments/440872673","html_url":"https://github.com/hyperium/hyper/issues/1716#issuecomment-440872673","issue_url":"https://api.github.com/repos/hyperium/hyper/issues/1716","id":440872673,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MDg3MjY3Mw==","user":{"login":"luben","id":391130,"node_id":"MDQ6VXNlcjM5MTEzMA==","avatar_url":"https://avatars.githubusercontent.com/u/391130?v=4","gravatar_id":"","url":"https://api.github.com/users/luben","html_url":"https://github.com/luben","followers_url":"https://api.github.com/users/luben/followers","following_url":"https://api.github.com/users/luben/following{/other_user}","gists_url":"https://api.github.com/users/luben/gists{/gist_id}","starred_url":"https://api.github.com/users/luben/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/luben/subscriptions","organizations_url":"https://api.github.com/users/luben/orgs","repos_url":"https://api.github.com/users/luben/repos","events_url":"https://api.github.com/users/luben/events{/privacy}","received_events_url":"https://api.github.com/users/luben/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-22T00:58:33Z","updated_at":"2018-11-22T00:58:33Z","body":"I will try and report back tomorrow.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/hyperium/hyper/issues/comments/440872673/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"luben","id":391130,"node_id":"MDQ6VXNlcjM5MTEzMA==","avatar_url":"https://avatars.githubusercontent.com/u/391130?v=4","gravatar_id":"","url":"https://api.github.com/users/luben","html_url":"https://github.com/luben","followers_url":"https://api.github.com/users/luben/followers","following_url":"https://api.github.com/users/luben/following{/other_user}","gists_url":"https://api.github.com/users/luben/gists{/gist_id}","starred_url":"https://api.github.com/users/luben/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/luben/subscriptions","organizations_url":"https://api.github.com/users/luben/orgs","repos_url":"https://api.github.com/users/luben/repos","events_url":"https://api.github.com/users/luben/events{/privacy}","received_events_url":"https://api.github.com/users/luben/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/hyperium/hyper/issues/comments/440916319","html_url":"https://github.com/hyperium/hyper/issues/1716#issuecomment-440916319","issue_url":"https://api.github.com/repos/hyperium/hyper/issues/1716","id":440916319,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MDkxNjMxOQ==","user":{"login":"luben","id":391130,"node_id":"MDQ6VXNlcjM5MTEzMA==","avatar_url":"https://avatars.githubusercontent.com/u/391130?v=4","gravatar_id":"","url":"https://api.github.com/users/luben","html_url":"https://github.com/luben","followers_url":"https://api.github.com/users/luben/followers","following_url":"https://api.github.com/users/luben/following{/other_user}","gists_url":"https://api.github.com/users/luben/gists{/gist_id}","starred_url":"https://api.github.com/users/luben/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/luben/subscriptions","organizations_url":"https://api.github.com/users/luben/orgs","repos_url":"https://api.github.com/users/luben/repos","events_url":"https://api.github.com/users/luben/events{/privacy}","received_events_url":"https://api.github.com/users/luben/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-22T05:22:34Z","updated_at":"2018-11-22T21:13:59Z","body":"I tried. It's not fixed. The way to reproduce it:\r\n1. Run the broker.\r\n2. Run the worker.\r\n...\r\n3. Restart the worker. The broker should report \"Dropping Next()\" but does not.\r\nnext curl request fails.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/hyperium/hyper/issues/comments/440916319/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"luben","id":391130,"node_id":"MDQ6VXNlcjM5MTEzMA==","avatar_url":"https://avatars.githubusercontent.com/u/391130?v=4","gravatar_id":"","url":"https://api.github.com/users/luben","html_url":"https://github.com/luben","followers_url":"https://api.github.com/users/luben/followers","following_url":"https://api.github.com/users/luben/following{/other_user}","gists_url":"https://api.github.com/users/luben/gists{/gist_id}","starred_url":"https://api.github.com/users/luben/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/luben/subscriptions","organizations_url":"https://api.github.com/users/luben/orgs","repos_url":"https://api.github.com/users/luben/repos","events_url":"https://api.github.com/users/luben/events{/privacy}","received_events_url":"https://api.github.com/users/luben/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1987767715,"node_id":"MDEyOkxhYmVsZWRFdmVudDE5ODc3Njc3MTU=","url":"https://api.github.com/repos/hyperium/hyper/issues/events/1987767715","actor":{"login":"seanmonstar","id":51479,"node_id":"MDQ6VXNlcjUxNDc5","avatar_url":"https://avatars.githubusercontent.com/u/51479?v=4","gravatar_id":"","url":"https://api.github.com/users/seanmonstar","html_url":"https://github.com/seanmonstar","followers_url":"https://api.github.com/users/seanmonstar/followers","following_url":"https://api.github.com/users/seanmonstar/following{/other_user}","gists_url":"https://api.github.com/users/seanmonstar/gists{/gist_id}","starred_url":"https://api.github.com/users/seanmonstar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seanmonstar/subscriptions","organizations_url":"https://api.github.com/users/seanmonstar/orgs","repos_url":"https://api.github.com/users/seanmonstar/repos","events_url":"https://api.github.com/users/seanmonstar/events{/privacy}","received_events_url":"https://api.github.com/users/seanmonstar/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2018-11-26T20:00:34Z","label":{"name":"S-bug","color":"d93f0b"},"performed_via_github_app":null},{"id":1987767720,"node_id":"MDEyOkxhYmVsZWRFdmVudDE5ODc3Njc3MjA=","url":"https://api.github.com/repos/hyperium/hyper/issues/events/1987767720","actor":{"login":"seanmonstar","id":51479,"node_id":"MDQ6VXNlcjUxNDc5","avatar_url":"https://avatars.githubusercontent.com/u/51479?v=4","gravatar_id":"","url":"https://api.github.com/users/seanmonstar","html_url":"https://github.com/seanmonstar","followers_url":"https://api.github.com/users/seanmonstar/followers","following_url":"https://api.github.com/users/seanmonstar/following{/other_user}","gists_url":"https://api.github.com/users/seanmonstar/gists{/gist_id}","starred_url":"https://api.github.com/users/seanmonstar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seanmonstar/subscriptions","organizations_url":"https://api.github.com/users/seanmonstar/orgs","repos_url":"https://api.github.com/users/seanmonstar/repos","events_url":"https://api.github.com/users/seanmonstar/events{/privacy}","received_events_url":"https://api.github.com/users/seanmonstar/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2018-11-26T20:00:35Z","label":{"name":"A-client","color":"fbca04"},"performed_via_github_app":null},{"id":1987767723,"node_id":"MDEyOkxhYmVsZWRFdmVudDE5ODc3Njc3MjM=","url":"https://api.github.com/repos/hyperium/hyper/issues/events/1987767723","actor":{"login":"seanmonstar","id":51479,"node_id":"MDQ6VXNlcjUxNDc5","avatar_url":"https://avatars.githubusercontent.com/u/51479?v=4","gravatar_id":"","url":"https://api.github.com/users/seanmonstar","html_url":"https://github.com/seanmonstar","followers_url":"https://api.github.com/users/seanmonstar/followers","following_url":"https://api.github.com/users/seanmonstar/following{/other_user}","gists_url":"https://api.github.com/users/seanmonstar/gists{/gist_id}","starred_url":"https://api.github.com/users/seanmonstar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seanmonstar/subscriptions","organizations_url":"https://api.github.com/users/seanmonstar/orgs","repos_url":"https://api.github.com/users/seanmonstar/repos","events_url":"https://api.github.com/users/seanmonstar/events{/privacy}","received_events_url":"https://api.github.com/users/seanmonstar/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2018-11-26T20:00:35Z","label":{"name":"A-http1","color":"fbca04"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/hyperium/hyper/issues/comments/441803504","html_url":"https://github.com/hyperium/hyper/issues/1716#issuecomment-441803504","issue_url":"https://api.github.com/repos/hyperium/hyper/issues/1716","id":441803504,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MTgwMzUwNA==","user":{"login":"luben","id":391130,"node_id":"MDQ6VXNlcjM5MTEzMA==","avatar_url":"https://avatars.githubusercontent.com/u/391130?v=4","gravatar_id":"","url":"https://api.github.com/users/luben","html_url":"https://github.com/luben","followers_url":"https://api.github.com/users/luben/followers","following_url":"https://api.github.com/users/luben/following{/other_user}","gists_url":"https://api.github.com/users/luben/gists{/gist_id}","starred_url":"https://api.github.com/users/luben/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/luben/subscriptions","organizations_url":"https://api.github.com/users/luben/orgs","repos_url":"https://api.github.com/users/luben/repos","events_url":"https://api.github.com/users/luben/events{/privacy}","received_events_url":"https://api.github.com/users/luben/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-26T21:25:09Z","updated_at":"2018-11-26T21:25:09Z","body":"I think the bug is on the server, not the client: the broker is the server and it does not drop the future on disconnect from the client (worker)","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/hyperium/hyper/issues/comments/441803504/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"luben","id":391130,"node_id":"MDQ6VXNlcjM5MTEzMA==","avatar_url":"https://avatars.githubusercontent.com/u/391130?v=4","gravatar_id":"","url":"https://api.github.com/users/luben","html_url":"https://github.com/luben","followers_url":"https://api.github.com/users/luben/followers","following_url":"https://api.github.com/users/luben/following{/other_user}","gists_url":"https://api.github.com/users/luben/gists{/gist_id}","starred_url":"https://api.github.com/users/luben/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/luben/subscriptions","organizations_url":"https://api.github.com/users/luben/orgs","repos_url":"https://api.github.com/users/luben/repos","events_url":"https://api.github.com/users/luben/events{/privacy}","received_events_url":"https://api.github.com/users/luben/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1987979355,"node_id":"MDEyOkxhYmVsZWRFdmVudDE5ODc5NzkzNTU=","url":"https://api.github.com/repos/hyperium/hyper/issues/events/1987979355","actor":{"login":"seanmonstar","id":51479,"node_id":"MDQ6VXNlcjUxNDc5","avatar_url":"https://avatars.githubusercontent.com/u/51479?v=4","gravatar_id":"","url":"https://api.github.com/users/seanmonstar","html_url":"https://github.com/seanmonstar","followers_url":"https://api.github.com/users/seanmonstar/followers","following_url":"https://api.github.com/users/seanmonstar/following{/other_user}","gists_url":"https://api.github.com/users/seanmonstar/gists{/gist_id}","starred_url":"https://api.github.com/users/seanmonstar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seanmonstar/subscriptions","organizations_url":"https://api.github.com/users/seanmonstar/orgs","repos_url":"https://api.github.com/users/seanmonstar/repos","events_url":"https://api.github.com/users/seanmonstar/events{/privacy}","received_events_url":"https://api.github.com/users/seanmonstar/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2018-11-26T21:40:38Z","label":{"name":"A-server","color":"fbca04"},"performed_via_github_app":null},{"id":1987979357,"node_id":"MDE0OlVubGFiZWxlZEV2ZW50MTk4Nzk3OTM1Nw==","url":"https://api.github.com/repos/hyperium/hyper/issues/events/1987979357","actor":{"login":"seanmonstar","id":51479,"node_id":"MDQ6VXNlcjUxNDc5","avatar_url":"https://avatars.githubusercontent.com/u/51479?v=4","gravatar_id":"","url":"https://api.github.com/users/seanmonstar","html_url":"https://github.com/seanmonstar","followers_url":"https://api.github.com/users/seanmonstar/followers","following_url":"https://api.github.com/users/seanmonstar/following{/other_user}","gists_url":"https://api.github.com/users/seanmonstar/gists{/gist_id}","starred_url":"https://api.github.com/users/seanmonstar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seanmonstar/subscriptions","organizations_url":"https://api.github.com/users/seanmonstar/orgs","repos_url":"https://api.github.com/users/seanmonstar/repos","events_url":"https://api.github.com/users/seanmonstar/events{/privacy}","received_events_url":"https://api.github.com/users/seanmonstar/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"unlabeled","commit_id":null,"commit_url":null,"created_at":"2018-11-26T21:40:38Z","label":{"name":"A-client","color":"fbca04"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/hyperium/hyper/issues/comments/441833836","html_url":"https://github.com/hyperium/hyper/issues/1716#issuecomment-441833836","issue_url":"https://api.github.com/repos/hyperium/hyper/issues/1716","id":441833836,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MTgzMzgzNg==","user":{"login":"luben","id":391130,"node_id":"MDQ6VXNlcjM5MTEzMA==","avatar_url":"https://avatars.githubusercontent.com/u/391130?v=4","gravatar_id":"","url":"https://api.github.com/users/luben","html_url":"https://github.com/luben","followers_url":"https://api.github.com/users/luben/followers","following_url":"https://api.github.com/users/luben/following{/other_user}","gists_url":"https://api.github.com/users/luben/gists{/gist_id}","starred_url":"https://api.github.com/users/luben/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/luben/subscriptions","organizations_url":"https://api.github.com/users/luben/orgs","repos_url":"https://api.github.com/users/luben/repos","events_url":"https://api.github.com/users/luben/events{/privacy}","received_events_url":"https://api.github.com/users/luben/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-26T23:02:17Z","updated_at":"2018-11-26T23:02:50Z","body":"When I run it with trace log-level, the messages after I cancel the worker are:\r\n\r\n```\r\n2018-11-26 22:57:43 TRACE [tokio_reactor] event Readable | Writable | Hup Token(4194305)\r\n2018-11-26 22:57:43 TRACE [tokio_reactor] loop process - 1 events, 0.000s\r\n```\r\n\r\n... and nothing else. So looks like nobody is polling the connection while the response future is waiting on the oneshot::Receiver for the Body.\r\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/hyperium/hyper/issues/comments/441833836/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"luben","id":391130,"node_id":"MDQ6VXNlcjM5MTEzMA==","avatar_url":"https://avatars.githubusercontent.com/u/391130?v=4","gravatar_id":"","url":"https://api.github.com/users/luben","html_url":"https://github.com/luben","followers_url":"https://api.github.com/users/luben/followers","following_url":"https://api.github.com/users/luben/following{/other_user}","gists_url":"https://api.github.com/users/luben/gists{/gist_id}","starred_url":"https://api.github.com/users/luben/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/luben/subscriptions","organizations_url":"https://api.github.com/users/luben/orgs","repos_url":"https://api.github.com/users/luben/repos","events_url":"https://api.github.com/users/luben/events{/privacy}","received_events_url":"https://api.github.com/users/luben/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/hyperium/hyper/issues/comments/441835147","html_url":"https://github.com/hyperium/hyper/issues/1716#issuecomment-441835147","issue_url":"https://api.github.com/repos/hyperium/hyper/issues/1716","id":441835147,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MTgzNTE0Nw==","user":{"login":"seanmonstar","id":51479,"node_id":"MDQ6VXNlcjUxNDc5","avatar_url":"https://avatars.githubusercontent.com/u/51479?v=4","gravatar_id":"","url":"https://api.github.com/users/seanmonstar","html_url":"https://github.com/seanmonstar","followers_url":"https://api.github.com/users/seanmonstar/followers","following_url":"https://api.github.com/users/seanmonstar/following{/other_user}","gists_url":"https://api.github.com/users/seanmonstar/gists{/gist_id}","starred_url":"https://api.github.com/users/seanmonstar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seanmonstar/subscriptions","organizations_url":"https://api.github.com/users/seanmonstar/orgs","repos_url":"https://api.github.com/users/seanmonstar/repos","events_url":"https://api.github.com/users/seanmonstar/events{/privacy}","received_events_url":"https://api.github.com/users/seanmonstar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-26T23:07:35Z","updated_at":"2018-11-26T23:07:35Z","body":"The connection isn't waiting on a read, due to this line: https://github.com/hyperium/hyper/blob/master/src/proto/h1/conn.rs#L231\r\n\r\nIt's basically to apply TCP backpressure, to not start reading a second message while waiting to respond to the first. If there were a way to register for `HUP` on `AsyncRead`, that could help achieve it without possibly reading a next message.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/hyperium/hyper/issues/comments/441835147/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"seanmonstar","id":51479,"node_id":"MDQ6VXNlcjUxNDc5","avatar_url":"https://avatars.githubusercontent.com/u/51479?v=4","gravatar_id":"","url":"https://api.github.com/users/seanmonstar","html_url":"https://github.com/seanmonstar","followers_url":"https://api.github.com/users/seanmonstar/followers","following_url":"https://api.github.com/users/seanmonstar/following{/other_user}","gists_url":"https://api.github.com/users/seanmonstar/gists{/gist_id}","starred_url":"https://api.github.com/users/seanmonstar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seanmonstar/subscriptions","organizations_url":"https://api.github.com/users/seanmonstar/orgs","repos_url":"https://api.github.com/users/seanmonstar/repos","events_url":"https://api.github.com/users/seanmonstar/events{/privacy}","received_events_url":"https://api.github.com/users/seanmonstar/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/hyperium/hyper/issues/comments/441836195","html_url":"https://github.com/hyperium/hyper/issues/1716#issuecomment-441836195","issue_url":"https://api.github.com/repos/hyperium/hyper/issues/1716","id":441836195,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MTgzNjE5NQ==","user":{"login":"luben","id":391130,"node_id":"MDQ6VXNlcjM5MTEzMA==","avatar_url":"https://avatars.githubusercontent.com/u/391130?v=4","gravatar_id":"","url":"https://api.github.com/users/luben","html_url":"https://github.com/luben","followers_url":"https://api.github.com/users/luben/followers","following_url":"https://api.github.com/users/luben/following{/other_user}","gists_url":"https://api.github.com/users/luben/gists{/gist_id}","starred_url":"https://api.github.com/users/luben/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/luben/subscriptions","organizations_url":"https://api.github.com/users/luben/orgs","repos_url":"https://api.github.com/users/luben/repos","events_url":"https://api.github.com/users/luben/events{/privacy}","received_events_url":"https://api.github.com/users/luben/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-26T23:11:50Z","updated_at":"2018-11-26T23:11:50Z","body":"Hm, will look how it is implemented on the h2 side and try to come with a patch.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/hyperium/hyper/issues/comments/441836195/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"luben","id":391130,"node_id":"MDQ6VXNlcjM5MTEzMA==","avatar_url":"https://avatars.githubusercontent.com/u/391130?v=4","gravatar_id":"","url":"https://api.github.com/users/luben","html_url":"https://github.com/luben","followers_url":"https://api.github.com/users/luben/followers","following_url":"https://api.github.com/users/luben/following{/other_user}","gists_url":"https://api.github.com/users/luben/gists{/gist_id}","starred_url":"https://api.github.com/users/luben/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/luben/subscriptions","organizations_url":"https://api.github.com/users/luben/orgs","repos_url":"https://api.github.com/users/luben/repos","events_url":"https://api.github.com/users/luben/events{/privacy}","received_events_url":"https://api.github.com/users/luben/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/hyperium/hyper/issues/comments/441836224","html_url":"https://github.com/hyperium/hyper/issues/1716#issuecomment-441836224","issue_url":"https://api.github.com/repos/hyperium/hyper/issues/1716","id":441836224,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MTgzNjIyNA==","user":{"login":"sfackler","id":1455697,"node_id":"MDQ6VXNlcjE0NTU2OTc=","avatar_url":"https://avatars.githubusercontent.com/u/1455697?v=4","gravatar_id":"","url":"https://api.github.com/users/sfackler","html_url":"https://github.com/sfackler","followers_url":"https://api.github.com/users/sfackler/followers","following_url":"https://api.github.com/users/sfackler/following{/other_user}","gists_url":"https://api.github.com/users/sfackler/gists{/gist_id}","starred_url":"https://api.github.com/users/sfackler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sfackler/subscriptions","organizations_url":"https://api.github.com/users/sfackler/orgs","repos_url":"https://api.github.com/users/sfackler/repos","events_url":"https://api.github.com/users/sfackler/events{/privacy}","received_events_url":"https://api.github.com/users/sfackler/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-26T23:11:59Z","updated_at":"2018-11-26T23:11:59Z","body":"mio supports HUP registration via UnixReady, but that's not piped through Tokio. Adding `TcpStream::poll_hup` would be *great* though, even if it would only work on Unix. The server I work on processes long-running requests, and we have request cancellation detection but it won't work via HTTP/1 without that.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/hyperium/hyper/issues/comments/441836224/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sfackler","id":1455697,"node_id":"MDQ6VXNlcjE0NTU2OTc=","avatar_url":"https://avatars.githubusercontent.com/u/1455697?v=4","gravatar_id":"","url":"https://api.github.com/users/sfackler","html_url":"https://github.com/sfackler","followers_url":"https://api.github.com/users/sfackler/followers","following_url":"https://api.github.com/users/sfackler/following{/other_user}","gists_url":"https://api.github.com/users/sfackler/gists{/gist_id}","starred_url":"https://api.github.com/users/sfackler/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sfackler/subscriptions","organizations_url":"https://api.github.com/users/sfackler/orgs","repos_url":"https://api.github.com/users/sfackler/repos","events_url":"https://api.github.com/users/sfackler/events{/privacy}","received_events_url":"https://api.github.com/users/sfackler/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/hyperium/hyper/issues/comments/441837538","html_url":"https://github.com/hyperium/hyper/issues/1716#issuecomment-441837538","issue_url":"https://api.github.com/repos/hyperium/hyper/issues/1716","id":441837538,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MTgzNzUzOA==","user":{"login":"seanmonstar","id":51479,"node_id":"MDQ6VXNlcjUxNDc5","avatar_url":"https://avatars.githubusercontent.com/u/51479?v=4","gravatar_id":"","url":"https://api.github.com/users/seanmonstar","html_url":"https://github.com/seanmonstar","followers_url":"https://api.github.com/users/seanmonstar/followers","following_url":"https://api.github.com/users/seanmonstar/following{/other_user}","gists_url":"https://api.github.com/users/seanmonstar/gists{/gist_id}","starred_url":"https://api.github.com/users/seanmonstar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seanmonstar/subscriptions","organizations_url":"https://api.github.com/users/seanmonstar/orgs","repos_url":"https://api.github.com/users/seanmonstar/repos","events_url":"https://api.github.com/users/seanmonstar/events{/privacy}","received_events_url":"https://api.github.com/users/seanmonstar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-26T23:17:46Z","updated_at":"2018-11-26T23:17:46Z","body":"In h2, it's always reading, since it needs to in order to handle HTTP2 bookkeeping, since frames can come in related to any stream (or for the connection).\r\n\r\nWe could try adding a `read` check on the transport even if `is_mid_message`, and just not error if some bytes are found. It should work if a client isn't using HTTP/1.1 pipelining, but if it is, it'd be quite hard to detect an EOF read if a pipelined request is sitting in the buffer. Perhaps that's better than nothing (and the real world doesn't really use HTTP/1.1 pipelining anyways).","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/hyperium/hyper/issues/comments/441837538/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"seanmonstar","id":51479,"node_id":"MDQ6VXNlcjUxNDc5","avatar_url":"https://avatars.githubusercontent.com/u/51479?v=4","gravatar_id":"","url":"https://api.github.com/users/seanmonstar","html_url":"https://github.com/seanmonstar","followers_url":"https://api.github.com/users/seanmonstar/followers","following_url":"https://api.github.com/users/seanmonstar/following{/other_user}","gists_url":"https://api.github.com/users/seanmonstar/gists{/gist_id}","starred_url":"https://api.github.com/users/seanmonstar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seanmonstar/subscriptions","organizations_url":"https://api.github.com/users/seanmonstar/orgs","repos_url":"https://api.github.com/users/seanmonstar/repos","events_url":"https://api.github.com/users/seanmonstar/events{/privacy}","received_events_url":"https://api.github.com/users/seanmonstar/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/hyperium/hyper/issues/comments/441840807","html_url":"https://github.com/hyperium/hyper/issues/1716#issuecomment-441840807","issue_url":"https://api.github.com/repos/hyperium/hyper/issues/1716","id":441840807,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MTg0MDgwNw==","user":{"login":"luben","id":391130,"node_id":"MDQ6VXNlcjM5MTEzMA==","avatar_url":"https://avatars.githubusercontent.com/u/391130?v=4","gravatar_id":"","url":"https://api.github.com/users/luben","html_url":"https://github.com/luben","followers_url":"https://api.github.com/users/luben/followers","following_url":"https://api.github.com/users/luben/following{/other_user}","gists_url":"https://api.github.com/users/luben/gists{/gist_id}","starred_url":"https://api.github.com/users/luben/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/luben/subscriptions","organizations_url":"https://api.github.com/users/luben/orgs","repos_url":"https://api.github.com/users/luben/repos","events_url":"https://api.github.com/users/luben/events{/privacy}","received_events_url":"https://api.github.com/users/luben/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-26T23:32:32Z","updated_at":"2018-11-26T23:33:05Z","body":"Just for test, I disabled the check for `is_mid_message` but it still don't drop the response future. Here is the trace (with some more trace logs added):\r\n\r\n```\r\n2018-11-26 23:31:57 TRACE [tokio_reactor] event Readable | Writable | Hup Token(8388609)\r\n2018-11-26 23:31:57 TRACE [tokio_reactor] loop process - 1 events, 0.000s\r\n2018-11-26 23:31:57 TRACE [hyper::proto::h1::dispatch] poll_catch\r\n2018-11-26 23:31:57 TRACE [hyper::proto::h1::dispatch] poll_inner\r\n2018-11-26 23:31:57 TRACE [hyper::proto::h1::dispatch] poll_read\r\n2018-11-26 23:31:57 TRACE [hyper::proto::h1::conn] read_keep_alive; is_mid_read=false\r\n2018-11-26 23:31:57 TRACE [hyper::proto::h1::io] io.read_buf -> Ready(0)\r\n2018-11-26 23:31:57 DEBUG [hyper::proto::h1::io] read 0 bytes\r\n2018-11-26 23:31:57 TRACE [hyper::proto::h1::conn] try_io_read; found EOF on connection: State { reading: KeepAlive, writing: Init, keep_alive: Busy, error: None }\r\n2018-11-26 23:31:57 TRACE [hyper::proto::h1::conn] State::close_read()\r\n2018-11-26 23:31:57 TRACE [hyper::proto::h1::dispatch] poll_write\r\n2018-11-26 23:31:57 TRACE [hyper::proto::h1::dispatch] poll_flush\r\n2018-11-26 23:31:57 TRACE [hyper::proto::h1::conn] flushed({role=server}): State { reading: Closed, writing: Init, keep_alive: Disabled, error: None }\r\n2018-11-26 23:31:57 TRACE [hyper::proto::h1::dispatch] poll_inner.is_done?\r\n2018-11-26 23:31:57 TRACE [hyper::proto::h1::conn] conn.is_read_closed true\r\n2018-11-26 23:31:57 TRACE [hyper::proto::h1::conn] conn.is_write_closed false\r\n2018-11-26 23:31:57 TRACE [hyper::proto::h1::dispatch] poll_inner.is_done -> false\r\n2018-11-26 23:31:57 TRACE [tokio_reactor] event Readable Token(4194303)\r\n2018-11-26 23:31:57 TRACE [tokio_reactor] loop process - 1 events, 0.000s\r\n2018-11-26 23:31:57 TRACE [tokio_reactor] loop process - 0 events, 0.000s\r\n```","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/hyperium/hyper/issues/comments/441840807/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"luben","id":391130,"node_id":"MDQ6VXNlcjM5MTEzMA==","avatar_url":"https://avatars.githubusercontent.com/u/391130?v=4","gravatar_id":"","url":"https://api.github.com/users/luben","html_url":"https://github.com/luben","followers_url":"https://api.github.com/users/luben/followers","following_url":"https://api.github.com/users/luben/following{/other_user}","gists_url":"https://api.github.com/users/luben/gists{/gist_id}","starred_url":"https://api.github.com/users/luben/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/luben/subscriptions","organizations_url":"https://api.github.com/users/luben/orgs","repos_url":"https://api.github.com/users/luben/repos","events_url":"https://api.github.com/users/luben/events{/privacy}","received_events_url":"https://api.github.com/users/luben/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/hyperium/hyper/issues/comments/441841398","html_url":"https://github.com/hyperium/hyper/issues/1716#issuecomment-441841398","issue_url":"https://api.github.com/repos/hyperium/hyper/issues/1716","id":441841398,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MTg0MTM5OA==","user":{"login":"seanmonstar","id":51479,"node_id":"MDQ6VXNlcjUxNDc5","avatar_url":"https://avatars.githubusercontent.com/u/51479?v=4","gravatar_id":"","url":"https://api.github.com/users/seanmonstar","html_url":"https://github.com/seanmonstar","followers_url":"https://api.github.com/users/seanmonstar/followers","following_url":"https://api.github.com/users/seanmonstar/following{/other_user}","gists_url":"https://api.github.com/users/seanmonstar/gists{/gist_id}","starred_url":"https://api.github.com/users/seanmonstar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seanmonstar/subscriptions","organizations_url":"https://api.github.com/users/seanmonstar/orgs","repos_url":"https://api.github.com/users/seanmonstar/repos","events_url":"https://api.github.com/users/seanmonstar/events{/privacy}","received_events_url":"https://api.github.com/users/seanmonstar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-26T23:35:31Z","updated_at":"2018-11-26T23:35:31Z","body":"Ah sure, if it were to close the connection immediately, then connections that half-close after writing the request would never be able to read the response...","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/hyperium/hyper/issues/comments/441841398/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"seanmonstar","id":51479,"node_id":"MDQ6VXNlcjUxNDc5","avatar_url":"https://avatars.githubusercontent.com/u/51479?v=4","gravatar_id":"","url":"https://api.github.com/users/seanmonstar","html_url":"https://github.com/seanmonstar","followers_url":"https://api.github.com/users/seanmonstar/followers","following_url":"https://api.github.com/users/seanmonstar/following{/other_user}","gists_url":"https://api.github.com/users/seanmonstar/gists{/gist_id}","starred_url":"https://api.github.com/users/seanmonstar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seanmonstar/subscriptions","organizations_url":"https://api.github.com/users/seanmonstar/orgs","repos_url":"https://api.github.com/users/seanmonstar/repos","events_url":"https://api.github.com/users/seanmonstar/events{/privacy}","received_events_url":"https://api.github.com/users/seanmonstar/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/hyperium/hyper/issues/comments/441841625","html_url":"https://github.com/hyperium/hyper/issues/1716#issuecomment-441841625","issue_url":"https://api.github.com/repos/hyperium/hyper/issues/1716","id":441841625,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MTg0MTYyNQ==","user":{"login":"luben","id":391130,"node_id":"MDQ6VXNlcjM5MTEzMA==","avatar_url":"https://avatars.githubusercontent.com/u/391130?v=4","gravatar_id":"","url":"https://api.github.com/users/luben","html_url":"https://github.com/luben","followers_url":"https://api.github.com/users/luben/followers","following_url":"https://api.github.com/users/luben/following{/other_user}","gists_url":"https://api.github.com/users/luben/gists{/gist_id}","starred_url":"https://api.github.com/users/luben/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/luben/subscriptions","organizations_url":"https://api.github.com/users/luben/orgs","repos_url":"https://api.github.com/users/luben/repos","events_url":"https://api.github.com/users/luben/events{/privacy}","received_events_url":"https://api.github.com/users/luben/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-26T23:36:40Z","updated_at":"2018-11-26T23:36:40Z","body":"Yes, you are right.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/hyperium/hyper/issues/comments/441841625/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"luben","id":391130,"node_id":"MDQ6VXNlcjM5MTEzMA==","avatar_url":"https://avatars.githubusercontent.com/u/391130?v=4","gravatar_id":"","url":"https://api.github.com/users/luben","html_url":"https://github.com/luben","followers_url":"https://api.github.com/users/luben/followers","following_url":"https://api.github.com/users/luben/following{/other_user}","gists_url":"https://api.github.com/users/luben/gists{/gist_id}","starred_url":"https://api.github.com/users/luben/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/luben/subscriptions","organizations_url":"https://api.github.com/users/luben/orgs","repos_url":"https://api.github.com/users/luben/repos","events_url":"https://api.github.com/users/luben/events{/privacy}","received_events_url":"https://api.github.com/users/luben/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/hyperium/hyper/issues/comments/441844083","html_url":"https://github.com/hyperium/hyper/issues/1716#issuecomment-441844083","issue_url":"https://api.github.com/repos/hyperium/hyper/issues/1716","id":441844083,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MTg0NDA4Mw==","user":{"login":"seanmonstar","id":51479,"node_id":"MDQ6VXNlcjUxNDc5","avatar_url":"https://avatars.githubusercontent.com/u/51479?v=4","gravatar_id":"","url":"https://api.github.com/users/seanmonstar","html_url":"https://github.com/seanmonstar","followers_url":"https://api.github.com/users/seanmonstar/followers","following_url":"https://api.github.com/users/seanmonstar/following{/other_user}","gists_url":"https://api.github.com/users/seanmonstar/gists{/gist_id}","starred_url":"https://api.github.com/users/seanmonstar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seanmonstar/subscriptions","organizations_url":"https://api.github.com/users/seanmonstar/orgs","repos_url":"https://api.github.com/users/seanmonstar/repos","events_url":"https://api.github.com/users/seanmonstar/events{/privacy}","received_events_url":"https://api.github.com/users/seanmonstar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-26T23:48:45Z","updated_at":"2018-11-26T23:48:45Z","body":"A possible solution is to offer some sort of \"support half-closed\" config option (default would need to be true to not break existing behavior), and if false, then that keep-alive read can forcibly close future down.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/hyperium/hyper/issues/comments/441844083/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"seanmonstar","id":51479,"node_id":"MDQ6VXNlcjUxNDc5","avatar_url":"https://avatars.githubusercontent.com/u/51479?v=4","gravatar_id":"","url":"https://api.github.com/users/seanmonstar","html_url":"https://github.com/seanmonstar","followers_url":"https://api.github.com/users/seanmonstar/followers","following_url":"https://api.github.com/users/seanmonstar/following{/other_user}","gists_url":"https://api.github.com/users/seanmonstar/gists{/gist_id}","starred_url":"https://api.github.com/users/seanmonstar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seanmonstar/subscriptions","organizations_url":"https://api.github.com/users/seanmonstar/orgs","repos_url":"https://api.github.com/users/seanmonstar/repos","events_url":"https://api.github.com/users/seanmonstar/events{/privacy}","received_events_url":"https://api.github.com/users/seanmonstar/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1988245013,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDE5ODgyNDUwMTM=","url":"https://api.github.com/repos/hyperium/hyper/issues/events/1988245013","actor":{"login":"seanmonstar","id":51479,"node_id":"MDQ6VXNlcjUxNDc5","avatar_url":"https://avatars.githubusercontent.com/u/51479?v=4","gravatar_id":"","url":"https://api.github.com/users/seanmonstar","html_url":"https://github.com/seanmonstar","followers_url":"https://api.github.com/users/seanmonstar/followers","following_url":"https://api.github.com/users/seanmonstar/following{/other_user}","gists_url":"https://api.github.com/users/seanmonstar/gists{/gist_id}","starred_url":"https://api.github.com/users/seanmonstar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seanmonstar/subscriptions","organizations_url":"https://api.github.com/users/seanmonstar/orgs","repos_url":"https://api.github.com/users/seanmonstar/repos","events_url":"https://api.github.com/users/seanmonstar/events{/privacy}","received_events_url":"https://api.github.com/users/seanmonstar/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"dd4de4a3bfd9e5b7b6519b7259381c8d41a1b308","commit_url":"https://api.github.com/repos/hyperium/hyper/commits/dd4de4a3bfd9e5b7b6519b7259381c8d41a1b308","created_at":"2018-11-27T00:22:36Z","performed_via_github_app":null},{"id":1988247418,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDE5ODgyNDc0MTg=","url":"https://api.github.com/repos/hyperium/hyper/issues/events/1988247418","actor":{"login":"seanmonstar","id":51479,"node_id":"MDQ6VXNlcjUxNDc5","avatar_url":"https://avatars.githubusercontent.com/u/51479?v=4","gravatar_id":"","url":"https://api.github.com/users/seanmonstar","html_url":"https://github.com/seanmonstar","followers_url":"https://api.github.com/users/seanmonstar/followers","following_url":"https://api.github.com/users/seanmonstar/following{/other_user}","gists_url":"https://api.github.com/users/seanmonstar/gists{/gist_id}","starred_url":"https://api.github.com/users/seanmonstar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seanmonstar/subscriptions","organizations_url":"https://api.github.com/users/seanmonstar/orgs","repos_url":"https://api.github.com/users/seanmonstar/repos","events_url":"https://api.github.com/users/seanmonstar/events{/privacy}","received_events_url":"https://api.github.com/users/seanmonstar/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"8deb402308b55befec89c5b5a71bf5d233334a97","commit_url":"https://api.github.com/repos/hyperium/hyper/commits/8deb402308b55befec89c5b5a71bf5d233334a97","created_at":"2018-11-27T00:24:36Z","performed_via_github_app":null},{"actor":{"login":"seanmonstar","id":51479,"node_id":"MDQ6VXNlcjUxNDc5","avatar_url":"https://avatars.githubusercontent.com/u/51479?v=4","gravatar_id":"","url":"https://api.github.com/users/seanmonstar","html_url":"https://github.com/seanmonstar","followers_url":"https://api.github.com/users/seanmonstar/followers","following_url":"https://api.github.com/users/seanmonstar/following{/other_user}","gists_url":"https://api.github.com/users/seanmonstar/gists{/gist_id}","starred_url":"https://api.github.com/users/seanmonstar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seanmonstar/subscriptions","organizations_url":"https://api.github.com/users/seanmonstar/orgs","repos_url":"https://api.github.com/users/seanmonstar/repos","events_url":"https://api.github.com/users/seanmonstar/events{/privacy}","received_events_url":"https://api.github.com/users/seanmonstar/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-27T00:24:56Z","updated_at":"2018-11-27T00:24:56Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/hyperium/hyper/issues/1723","repository_url":"https://api.github.com/repos/hyperium/hyper","labels_url":"https://api.github.com/repos/hyperium/hyper/issues/1723/labels{/name}","comments_url":"https://api.github.com/repos/hyperium/hyper/issues/1723/comments","events_url":"https://api.github.com/repos/hyperium/hyper/issues/1723/events","html_url":"https://github.com/hyperium/hyper/pull/1723","id":384567571,"node_id":"MDExOlB1bGxSZXF1ZXN0MjMzNzQwNjMy","number":1723,"title":"feat(server): add `http1_half_close(bool)` option","user":{"login":"seanmonstar","id":51479,"node_id":"MDQ6VXNlcjUxNDc5","avatar_url":"https://avatars.githubusercontent.com/u/51479?v=4","gravatar_id":"","url":"https://api.github.com/users/seanmonstar","html_url":"https://github.com/seanmonstar","followers_url":"https://api.github.com/users/seanmonstar/followers","following_url":"https://api.github.com/users/seanmonstar/following{/other_user}","gists_url":"https://api.github.com/users/seanmonstar/gists{/gist_id}","starred_url":"https://api.github.com/users/seanmonstar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seanmonstar/subscriptions","organizations_url":"https://api.github.com/users/seanmonstar/orgs","repos_url":"https://api.github.com/users/seanmonstar/repos","events_url":"https://api.github.com/users/seanmonstar/events{/privacy}","received_events_url":"https://api.github.com/users/seanmonstar/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2018-11-27T00:24:56Z","updated_at":"2018-11-27T20:31:55Z","closed_at":"2018-11-27T20:31:52Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":23500865,"node_id":"MDEwOlJlcG9zaXRvcnkyMzUwMDg2NQ==","name":"hyper","full_name":"hyperium/hyper","private":false,"owner":{"login":"hyperium","id":8730506,"node_id":"MDEyOk9yZ2FuaXphdGlvbjg3MzA1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/8730506?v=4","gravatar_id":"","url":"https://api.github.com/users/hyperium","html_url":"https://github.com/hyperium","followers_url":"https://api.github.com/users/hyperium/followers","following_url":"https://api.github.com/users/hyperium/following{/other_user}","gists_url":"https://api.github.com/users/hyperium/gists{/gist_id}","starred_url":"https://api.github.com/users/hyperium/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hyperium/subscriptions","organizations_url":"https://api.github.com/users/hyperium/orgs","repos_url":"https://api.github.com/users/hyperium/repos","events_url":"https://api.github.com/users/hyperium/events{/privacy}","received_events_url":"https://api.github.com/users/hyperium/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/hyperium/hyper","description":"An HTTP library for Rust","fork":false,"url":"https://api.github.com/repos/hyperium/hyper","forks_url":"https://api.github.com/repos/hyperium/hyper/forks","keys_url":"https://api.github.com/repos/hyperium/hyper/keys{/key_id}","collaborators_url":"https://api.github.com/repos/hyperium/hyper/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/hyperium/hyper/teams","hooks_url":"https://api.github.com/repos/hyperium/hyper/hooks","issue_events_url":"https://api.github.com/repos/hyperium/hyper/issues/events{/number}","events_url":"https://api.github.com/repos/hyperium/hyper/events","assignees_url":"https://api.github.com/repos/hyperium/hyper/assignees{/user}","branches_url":"https://api.github.com/repos/hyperium/hyper/branches{/branch}","tags_url":"https://api.github.com/repos/hyperium/hyper/tags","blobs_url":"https://api.github.com/repos/hyperium/hyper/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/hyperium/hyper/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/hyperium/hyper/git/refs{/sha}","trees_url":"https://api.github.com/repos/hyperium/hyper/git/trees{/sha}","statuses_url":"https://api.github.com/repos/hyperium/hyper/statuses/{sha}","languages_url":"https://api.github.com/repos/hyperium/hyper/languages","stargazers_url":"https://api.github.com/repos/hyperium/hyper/stargazers","contributors_url":"https://api.github.com/repos/hyperium/hyper/contributors","subscribers_url":"https://api.github.com/repos/hyperium/hyper/subscribers","subscription_url":"https://api.github.com/repos/hyperium/hyper/subscription","commits_url":"https://api.github.com/repos/hyperium/hyper/commits{/sha}","git_commits_url":"https://api.github.com/repos/hyperium/hyper/git/commits{/sha}","comments_url":"https://api.github.com/repos/hyperium/hyper/comments{/number}","issue_comment_url":"https://api.github.com/repos/hyperium/hyper/issues/comments{/number}","contents_url":"https://api.github.com/repos/hyperium/hyper/contents/{+path}","compare_url":"https://api.github.com/repos/hyperium/hyper/compare/{base}...{head}","merges_url":"https://api.github.com/repos/hyperium/hyper/merges","archive_url":"https://api.github.com/repos/hyperium/hyper/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/hyperium/hyper/downloads","issues_url":"https://api.github.com/repos/hyperium/hyper/issues{/number}","pulls_url":"https://api.github.com/repos/hyperium/hyper/pulls{/number}","milestones_url":"https://api.github.com/repos/hyperium/hyper/milestones{/number}","notifications_url":"https://api.github.com/repos/hyperium/hyper/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/hyperium/hyper/labels{/name}","releases_url":"https://api.github.com/repos/hyperium/hyper/releases{/id}","deployments_url":"https://api.github.com/repos/hyperium/hyper/deployments","created_at":"2014-08-30T21:14:33Z","updated_at":"2025-11-09T09:11:28Z","pushed_at":"2025-10-27T16:23:23Z","git_url":"git://github.com/hyperium/hyper.git","ssh_url":"git@github.com:hyperium/hyper.git","clone_url":"https://github.com/hyperium/hyper.git","svn_url":"https://github.com/hyperium/hyper","homepage":"https://hyper.rs","size":13990,"stargazers_count":15659,"watchers_count":15659,"language":"Rust","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":true,"has_discussions":true,"forks_count":1683,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":259,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["http","hyper","rust"],"visibility":"public","forks":1683,"open_issues":259,"watchers":15659,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/hyperium/hyper/pulls/1723","html_url":"https://github.com/hyperium/hyper/pull/1723","diff_url":"https://github.com/hyperium/hyper/pull/1723.diff","patch_url":"https://github.com/hyperium/hyper/pull/1723.patch","merged_at":"2018-11-27T20:31:52Z"},"body":"This option determines whether a read EOF should close the connection\r\nautomatically. The behavior was to always allow read EOF while waiting\r\nto respond, so this option has a default of `true`.\r\n\r\nSetting this option to `false` will allow Service futures to be canceled\r\nas soon as disconnect is noticed.\r\n\r\nCloses #1716\r\n\r\ncc @luben","reactions":{"url":"https://api.github.com/repos/hyperium/hyper/issues/1723/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/hyperium/hyper/issues/1723/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":1988248472,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDE5ODgyNDg0NzI=","url":"https://api.github.com/repos/hyperium/hyper/issues/events/1988248472","actor":{"login":"seanmonstar","id":51479,"node_id":"MDQ6VXNlcjUxNDc5","avatar_url":"https://avatars.githubusercontent.com/u/51479?v=4","gravatar_id":"","url":"https://api.github.com/users/seanmonstar","html_url":"https://github.com/seanmonstar","followers_url":"https://api.github.com/users/seanmonstar/followers","following_url":"https://api.github.com/users/seanmonstar/following{/other_user}","gists_url":"https://api.github.com/users/seanmonstar/gists{/gist_id}","starred_url":"https://api.github.com/users/seanmonstar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seanmonstar/subscriptions","organizations_url":"https://api.github.com/users/seanmonstar/orgs","repos_url":"https://api.github.com/users/seanmonstar/repos","events_url":"https://api.github.com/users/seanmonstar/events{/privacy}","received_events_url":"https://api.github.com/users/seanmonstar/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"ff055a87bfebf5e11344def6252df5dc092957c0","commit_url":"https://api.github.com/repos/hyperium/hyper/commits/ff055a87bfebf5e11344def6252df5dc092957c0","created_at":"2018-11-27T00:25:23Z","performed_via_github_app":null},{"id":1988295120,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDE5ODgyOTUxMjA=","url":"https://api.github.com/repos/hyperium/hyper/issues/events/1988295120","actor":{"login":"seanmonstar","id":51479,"node_id":"MDQ6VXNlcjUxNDc5","avatar_url":"https://avatars.githubusercontent.com/u/51479?v=4","gravatar_id":"","url":"https://api.github.com/users/seanmonstar","html_url":"https://github.com/seanmonstar","followers_url":"https://api.github.com/users/seanmonstar/followers","following_url":"https://api.github.com/users/seanmonstar/following{/other_user}","gists_url":"https://api.github.com/users/seanmonstar/gists{/gist_id}","starred_url":"https://api.github.com/users/seanmonstar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seanmonstar/subscriptions","organizations_url":"https://api.github.com/users/seanmonstar/orgs","repos_url":"https://api.github.com/users/seanmonstar/repos","events_url":"https://api.github.com/users/seanmonstar/events{/privacy}","received_events_url":"https://api.github.com/users/seanmonstar/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"8c8c1f484a56815266a66c31029eed4288319a6b","commit_url":"https://api.github.com/repos/hyperium/hyper/commits/8c8c1f484a56815266a66c31029eed4288319a6b","created_at":"2018-11-27T01:03:20Z","performed_via_github_app":null},{"id":1990622493,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDE5OTA2MjI0OTM=","url":"https://api.github.com/repos/hyperium/hyper/issues/events/1990622493","actor":{"login":"seanmonstar","id":51479,"node_id":"MDQ6VXNlcjUxNDc5","avatar_url":"https://avatars.githubusercontent.com/u/51479?v=4","gravatar_id":"","url":"https://api.github.com/users/seanmonstar","html_url":"https://github.com/seanmonstar","followers_url":"https://api.github.com/users/seanmonstar/followers","following_url":"https://api.github.com/users/seanmonstar/following{/other_user}","gists_url":"https://api.github.com/users/seanmonstar/gists{/gist_id}","starred_url":"https://api.github.com/users/seanmonstar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seanmonstar/subscriptions","organizations_url":"https://api.github.com/users/seanmonstar/orgs","repos_url":"https://api.github.com/users/seanmonstar/repos","events_url":"https://api.github.com/users/seanmonstar/events{/privacy}","received_events_url":"https://api.github.com/users/seanmonstar/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"afd5ed7c45f0569c4b1fd79b832a692d9d642a6d","commit_url":"https://api.github.com/repos/hyperium/hyper/commits/afd5ed7c45f0569c4b1fd79b832a692d9d642a6d","created_at":"2018-11-27T20:00:48Z","performed_via_github_app":null},{"id":1990691139,"node_id":"MDExOkNsb3NlZEV2ZW50MTk5MDY5MTEzOQ==","url":"https://api.github.com/repos/hyperium/hyper/issues/events/1990691139","actor":{"login":"seanmonstar","id":51479,"node_id":"MDQ6VXNlcjUxNDc5","avatar_url":"https://avatars.githubusercontent.com/u/51479?v=4","gravatar_id":"","url":"https://api.github.com/users/seanmonstar","html_url":"https://github.com/seanmonstar","followers_url":"https://api.github.com/users/seanmonstar/followers","following_url":"https://api.github.com/users/seanmonstar/following{/other_user}","gists_url":"https://api.github.com/users/seanmonstar/gists{/gist_id}","starred_url":"https://api.github.com/users/seanmonstar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seanmonstar/subscriptions","organizations_url":"https://api.github.com/users/seanmonstar/orgs","repos_url":"https://api.github.com/users/seanmonstar/repos","events_url":"https://api.github.com/users/seanmonstar/events{/privacy}","received_events_url":"https://api.github.com/users/seanmonstar/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2018-11-27T20:31:52Z","state_reason":null,"performed_via_github_app":null},{"id":1990691173,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDE5OTA2OTExNzM=","url":"https://api.github.com/repos/hyperium/hyper/issues/events/1990691173","actor":{"login":"seanmonstar","id":51479,"node_id":"MDQ6VXNlcjUxNDc5","avatar_url":"https://avatars.githubusercontent.com/u/51479?v=4","gravatar_id":"","url":"https://api.github.com/users/seanmonstar","html_url":"https://github.com/seanmonstar","followers_url":"https://api.github.com/users/seanmonstar/followers","following_url":"https://api.github.com/users/seanmonstar/following{/other_user}","gists_url":"https://api.github.com/users/seanmonstar/gists{/gist_id}","starred_url":"https://api.github.com/users/seanmonstar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/seanmonstar/subscriptions","organizations_url":"https://api.github.com/users/seanmonstar/orgs","repos_url":"https://api.github.com/users/seanmonstar/repos","events_url":"https://api.github.com/users/seanmonstar/events{/privacy}","received_events_url":"https://api.github.com/users/seanmonstar/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"73345be65f895660492e28e718786b66034a4d03","commit_url":"https://api.github.com/repos/hyperium/hyper/commits/73345be65f895660492e28e718786b66034a4d03","created_at":"2018-11-27T20:31:53Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/hyperium/hyper/issues/comments/442215895","html_url":"https://github.com/hyperium/hyper/issues/1716#issuecomment-442215895","issue_url":"https://api.github.com/repos/hyperium/hyper/issues/1716","id":442215895,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MjIxNTg5NQ==","user":{"login":"luben","id":391130,"node_id":"MDQ6VXNlcjM5MTEzMA==","avatar_url":"https://avatars.githubusercontent.com/u/391130?v=4","gravatar_id":"","url":"https://api.github.com/users/luben","html_url":"https://github.com/luben","followers_url":"https://api.github.com/users/luben/followers","following_url":"https://api.github.com/users/luben/following{/other_user}","gists_url":"https://api.github.com/users/luben/gists{/gist_id}","starred_url":"https://api.github.com/users/luben/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/luben/subscriptions","organizations_url":"https://api.github.com/users/luben/orgs","repos_url":"https://api.github.com/users/luben/repos","events_url":"https://api.github.com/users/luben/events{/privacy}","received_events_url":"https://api.github.com/users/luben/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-27T21:02:57Z","updated_at":"2018-11-27T21:02:57Z","body":"thanks!","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/hyperium/hyper/issues/comments/442215895/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"luben","id":391130,"node_id":"MDQ6VXNlcjM5MTEzMA==","avatar_url":"https://avatars.githubusercontent.com/u/391130?v=4","gravatar_id":"","url":"https://api.github.com/users/luben","html_url":"https://github.com/luben","followers_url":"https://api.github.com/users/luben/followers","following_url":"https://api.github.com/users/luben/following{/other_user}","gists_url":"https://api.github.com/users/luben/gists{/gist_id}","starred_url":"https://api.github.com/users/luben/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/luben/subscriptions","organizations_url":"https://api.github.com/users/luben/orgs","repos_url":"https://api.github.com/users/luben/repos","events_url":"https://api.github.com/users/luben/events{/privacy}","received_events_url":"https://api.github.com/users/luben/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"operutka","id":1826328,"node_id":"MDQ6VXNlcjE4MjYzMjg=","avatar_url":"https://avatars.githubusercontent.com/u/1826328?v=4","gravatar_id":"","url":"https://api.github.com/users/operutka","html_url":"https://github.com/operutka","followers_url":"https://api.github.com/users/operutka/followers","following_url":"https://api.github.com/users/operutka/following{/other_user}","gists_url":"https://api.github.com/users/operutka/gists{/gist_id}","starred_url":"https://api.github.com/users/operutka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/operutka/subscriptions","organizations_url":"https://api.github.com/users/operutka/orgs","repos_url":"https://api.github.com/users/operutka/repos","events_url":"https://api.github.com/users/operutka/events{/privacy}","received_events_url":"https://api.github.com/users/operutka/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-15T09:25:51Z","updated_at":"2019-02-15T09:25:51Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/hyperium/hyper/issues/1764","repository_url":"https://api.github.com/repos/hyperium/hyper","labels_url":"https://api.github.com/repos/hyperium/hyper/issues/1764/labels{/name}","comments_url":"https://api.github.com/repos/hyperium/hyper/issues/1764/comments","events_url":"https://api.github.com/repos/hyperium/hyper/issues/1764/events","html_url":"https://github.com/hyperium/hyper/issues/1764","id":410676090,"node_id":"MDU6SXNzdWU0MTA2NzYwOTA=","number":1764,"title":"100% CPU usage on client disconnection when serving a streamed response","user":{"login":"operutka","id":1826328,"node_id":"MDQ6VXNlcjE4MjYzMjg=","avatar_url":"https://avatars.githubusercontent.com/u/1826328?v=4","gravatar_id":"","url":"https://api.github.com/users/operutka","html_url":"https://github.com/operutka","followers_url":"https://api.github.com/users/operutka/followers","following_url":"https://api.github.com/users/operutka/following{/other_user}","gists_url":"https://api.github.com/users/operutka/gists{/gist_id}","starred_url":"https://api.github.com/users/operutka/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/operutka/subscriptions","organizations_url":"https://api.github.com/users/operutka/orgs","repos_url":"https://api.github.com/users/operutka/repos","events_url":"https://api.github.com/users/operutka/events{/privacy}","received_events_url":"https://api.github.com/users/operutka/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":125710197,"node_id":"MDU6TGFiZWwxMjU3MTAxOTc=","url":"https://api.github.com/repos/hyperium/hyper/labels/C-bug","name":"C-bug","color":"d93f0b","default":false,"description":"Category: bug. Something is wrong. This is bad!"},{"id":956795692,"node_id":"MDU6TGFiZWw5NTY3OTU2OTI=","url":"https://api.github.com/repos/hyperium/hyper/labels/A-http1","name":"A-http1","color":"fbca04","default":false,"description":"Area: HTTP/1 specific."}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":10,"created_at":"2019-02-15T09:25:51Z","updated_at":"2019-10-18T20:34:24Z","closed_at":"2019-10-18T20:34:24Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":23500865,"node_id":"MDEwOlJlcG9zaXRvcnkyMzUwMDg2NQ==","name":"hyper","full_name":"hyperium/hyper","private":false,"owner":{"login":"hyperium","id":8730506,"node_id":"MDEyOk9yZ2FuaXphdGlvbjg3MzA1MDY=","avatar_url":"https://avatars.githubusercontent.com/u/8730506?v=4","gravatar_id":"","url":"https://api.github.com/users/hyperium","html_url":"https://github.com/hyperium","followers_url":"https://api.github.com/users/hyperium/followers","following_url":"https://api.github.com/users/hyperium/following{/other_user}","gists_url":"https://api.github.com/users/hyperium/gists{/gist_id}","starred_url":"https://api.github.com/users/hyperium/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hyperium/subscriptions","organizations_url":"https://api.github.com/users/hyperium/orgs","repos_url":"https://api.github.com/users/hyperium/repos","events_url":"https://api.github.com/users/hyperium/events{/privacy}","received_events_url":"https://api.github.com/users/hyperium/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/hyperium/hyper","description":"An HTTP library for Rust","fork":false,"url":"https://api.github.com/repos/hyperium/hyper","forks_url":"https://api.github.com/repos/hyperium/hyper/forks","keys_url":"https://api.github.com/repos/hyperium/hyper/keys{/key_id}","collaborators_url":"https://api.github.com/repos/hyperium/hyper/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/hyperium/hyper/teams","hooks_url":"https://api.github.com/repos/hyperium/hyper/hooks","issue_events_url":"https://api.github.com/repos/hyperium/hyper/issues/events{/number}","events_url":"https://api.github.com/repos/hyperium/hyper/events","assignees_url":"https://api.github.com/repos/hyperium/hyper/assignees{/user}","branches_url":"https://api.github.com/repos/hyperium/hyper/branches{/branch}","tags_url":"https://api.github.com/repos/hyperium/hyper/tags","blobs_url":"https://api.github.com/repos/hyperium/hyper/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/hyperium/hyper/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/hyperium/hyper/git/refs{/sha}","trees_url":"https://api.github.com/repos/hyperium/hyper/git/trees{/sha}","statuses_url":"https://api.github.com/repos/hyperium/hyper/statuses/{sha}","languages_url":"https://api.github.com/repos/hyperium/hyper/languages","stargazers_url":"https://api.github.com/repos/hyperium/hyper/stargazers","contributors_url":"https://api.github.com/repos/hyperium/hyper/contributors","subscribers_url":"https://api.github.com/repos/hyperium/hyper/subscribers","subscription_url":"https://api.github.com/repos/hyperium/hyper/subscription","commits_url":"https://api.github.com/repos/hyperium/hyper/commits{/sha}","git_commits_url":"https://api.github.com/repos/hyperium/hyper/git/commits{/sha}","comments_url":"https://api.github.com/repos/hyperium/hyper/comments{/number}","issue_comment_url":"https://api.github.com/repos/hyperium/hyper/issues/comments{/number}","contents_url":"https://api.github.com/repos/hyperium/hyper/contents/{+path}","compare_url":"https://api.github.com/repos/hyperium/hyper/compare/{base}...{head}","merges_url":"https://api.github.com/repos/hyperium/hyper/merges","archive_url":"https://api.github.com/repos/hyperium/hyper/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/hyperium/hyper/downloads","issues_url":"https://api.github.com/repos/hyperium/hyper/issues{/number}","pulls_url":"https://api.github.com/repos/hyperium/hyper/pulls{/number}","milestones_url":"https://api.github.com/repos/hyperium/hyper/milestones{/number}","notifications_url":"https://api.github.com/repos/hyperium/hyper/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/hyperium/hyper/labels{/name}","releases_url":"https://api.github.com/repos/hyperium/hyper/releases{/id}","deployments_url":"https://api.github.com/repos/hyperium/hyper/deployments","created_at":"2014-08-30T21:14:33Z","updated_at":"2025-11-09T09:11:28Z","pushed_at":"2025-10-27T16:23:23Z","git_url":"git://github.com/hyperium/hyper.git","ssh_url":"git@github.com:hyperium/hyper.git","clone_url":"https://github.com/hyperium/hyper.git","svn_url":"https://github.com/hyperium/hyper","homepage":"https://hyper.rs","size":13990,"stargazers_count":15659,"watchers_count":15659,"language":"Rust","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":true,"has_discussions":true,"forks_count":1683,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":259,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["http","hyper","rust"],"visibility":"public","forks":1683,"open_issues":259,"watchers":15659,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"I ran into an issue when load testing my server application based on Hyper 0.12.23. The servers provides very long (video) streams to clients. The problem is that sometimes when a client disconnects, the server ends up in an infinite loop trying to flush the response.\r\n\r\nI have a load testing script written in Python that simulates behaviour of these clients. When I run the script directly from command line and stop the script using SIGINT, server load decreases and everything works as expected. However, when I run the script in a Docker container and then I stop the container, the server application suddenly starts consuming a lot of CPU time.\r\n\r\nI managed to get the following stack trace:\r\n```\r\n#0  0x00007fd1148b0ffd in writev () at ../sysdeps/unix/syscall-template.S:84\r\n#1  0x0000560974aad6b7 in mio::net::tcp::TcpStream::write_bufs::hc89b0d02dfa8ddfa ()\r\n#2  0x00005609745ba2f5 in _$LT$tokio_tcp..stream..TcpStream$u20$as$u20$tokio_io..async_write..AsyncWrite$GT$::write_buf::h6c9ba9b717fe0dfb ()\r\n#3  0x0000560974620419 in _$LT$hyper..proto..h1..io..Buffered$LT$T$C$$u20$B$GT$$GT$::flush::hf6e9c87ae11953e9 ()\r\n#4  0x00005609746e6605 in _$LT$hyper..proto..h1..dispatch..Dispatcher$LT$D$C$$u20$Bs$C$$u20$I$C$$u20$T$GT$$GT$::poll_flush::h788fa5e1ea237e85 ()\r\n#5  0x00005609746e4769 in _$LT$hyper..proto..h1..dispatch..Dispatcher$LT$D$C$$u20$Bs$C$$u20$I$C$$u20$T$GT$$GT$::poll_catch::hf5cbb1e929b70897 ()\r\n#6  0x00005609746ac614 in _$LT$hyper..server..conn..upgrades..UpgradeableConnection$LT$I$C$$u20$S$C$$u20$E$GT$$u20$as$u20$futures..future..Future$GT$::poll::h6c066c4ab3ebbcc7 ()\r\n#7  0x000056097460f214 in _$LT$hyper..server..conn..spawn_all..NewSvcTask$LT$I$C$$u20$N$C$$u20$S$C$$u20$E$C$$u20$W$GT$$u20$as$u20$futures..future..Future$GT$::poll::hb0caae453b560ddd ()\r\n#8  0x0000560974abe582 in futures::task_impl::std::set::h752dbb2b3f4dcdbd ()\r\n#9  0x0000560974ac29b6 in _$LT$futures..task_impl..Spawn$LT$T$GT$$GT$::poll_future_notify::h0240129271f3aef3 ()\r\n```\r\n\r\nIt's the same for all busy worker threads.\r\n\r\nIn my opinion, running the load testing script in a Docker container and then stopping it leaves some connections half open and Hyper is probably not able to recognize this. I'm not sure if this can be related to issue #1716.","reactions":{"url":"https://api.github.com/repos/hyperium/hyper/issues/1764/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/hyperium/hyper/issues/1764/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"}]