{"url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/3676","repository_url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper","labels_url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/3676/labels{/name}","comments_url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/3676/comments","events_url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/3676/events","html_url":"https://github.com/LuckyPennySoftware/AutoMapper/issues/3676","id":932337695,"node_id":"MDU6SXNzdWU5MzIzMzc2OTU=","number":3676,"title":"Error when using nullables with an implicit conversion operation.","user":{"login":"74nu5","id":325077,"node_id":"MDQ6VXNlcjMyNTA3Nw==","avatar_url":"https://avatars.githubusercontent.com/u/325077?v=4","gravatar_id":"","url":"https://api.github.com/users/74nu5","html_url":"https://github.com/74nu5","followers_url":"https://api.github.com/users/74nu5/followers","following_url":"https://api.github.com/users/74nu5/following{/other_user}","gists_url":"https://api.github.com/users/74nu5/gists{/gist_id}","starred_url":"https://api.github.com/users/74nu5/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/74nu5/subscriptions","organizations_url":"https://api.github.com/users/74nu5/orgs","repos_url":"https://api.github.com/users/74nu5/repos","events_url":"https://api.github.com/users/74nu5/events{/privacy}","received_events_url":"https://api.github.com/users/74nu5/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":92629237,"node_id":"MDU6TGFiZWw5MjYyOTIzNw==","url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/labels/Bug","name":"Bug","color":"e11d21","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/milestones/39","html_url":"https://github.com/LuckyPennySoftware/AutoMapper/milestone/39","labels_url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/milestones/39/labels","id":5908278,"node_id":"MDk6TWlsZXN0b25lNTkwODI3OA==","number":39,"title":"11.0.0","description":"","creator":{"login":"lbargaoanu","id":4517428,"node_id":"MDQ6VXNlcjQ1MTc0Mjg=","avatar_url":"https://avatars.githubusercontent.com/u/4517428?v=4","gravatar_id":"","url":"https://api.github.com/users/lbargaoanu","html_url":"https://github.com/lbargaoanu","followers_url":"https://api.github.com/users/lbargaoanu/followers","following_url":"https://api.github.com/users/lbargaoanu/following{/other_user}","gists_url":"https://api.github.com/users/lbargaoanu/gists{/gist_id}","starred_url":"https://api.github.com/users/lbargaoanu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lbargaoanu/subscriptions","organizations_url":"https://api.github.com/users/lbargaoanu/orgs","repos_url":"https://api.github.com/users/lbargaoanu/repos","events_url":"https://api.github.com/users/lbargaoanu/events{/privacy}","received_events_url":"https://api.github.com/users/lbargaoanu/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":17,"state":"closed","created_at":"2020-09-23T06:22:12Z","updated_at":"2022-01-07T16:53:59Z","due_on":null,"closed_at":"2022-01-07T16:53:59Z"},"comments":2,"created_at":"2021-06-29T08:00:24Z","updated_at":"2021-08-08T00:04:14Z","closed_at":"2021-06-29T10:23:40Z","author_association":"NONE","type":null,"active_lock_reason":"resolved","sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"<!-- \r\n\r\n   If you're new to AutoMapper, please ask a question on StackOverflow first and come back here if the people there consider it a bug.\r\n   If you've just upgraded to 10.0, please read the upgrade guide first (https://docs.automapper.org/en/latest/10.0-Upgrade-Guide.html).\r\n   Try the [MyGet](https://docs.automapper.org/en/latest/The-MyGet-build.html) build.\r\n   Try to provide [a minimal, complete, and verifiable example](https://stackoverflow.com/help/mcve), preferably a [gist](https://gist.github.com/lbargaoanu/9c7233441c3a3413cc2b9b9ebb5964a9) that we can execute and see fail. [Here](https://gist.github.com/lbargaoanu/0cbc531306223f7ffc5468becf2642d6) is an example for ProjectTo.\r\n   For feature requests, just clear out the below.\r\n-->\r\n\r\nHello, I am encountering some strange behavior : \r\nhttps://gist.github.com/74nu5/fb358cb9fdd09abaefa3e40d0c2123aa\r\n\r\n### Source/destination types\r\n\r\n```csharp\r\npublic class QueryableValue<T>\r\n{\r\n\tpublic T? Value { get; set; }\r\n\r\n\tpublic static implicit operator QueryableValue<T?>(T? obj) => new() { Value = obj };\r\n\r\n\tpublic static implicit operator T?(QueryableValue<T> obj) => obj.Value;\r\n}\r\n\r\nclass DestinationClass\r\n{\r\n\tpublic QueryableValue<int?> MyProperty { get; set; } = null!;\r\n}\r\n\r\nclass SourceClass\r\n{\r\n\tpublic int? MyProperty { get; set; }\r\n}\r\n```\r\n\r\n### Mapping configuration\r\n\r\n```csharp\r\nvar mappingConfig = new MapperConfiguration(mc =>\r\n{\r\n    mc.CreateMap<SourceClass, DestinationClass>();\r\n});\r\n```\r\n\r\n### Version: 10.1.1\r\n<!-- \r\n    Include the major/minor version (4.2.1, 5.2.0, 6.0.2 etc) \r\n    If you're using ProjectTo, also specify the EF Core or EF6 version.\r\n--> \r\n\r\n### Expected behavior\r\n\r\n<!-- What did you expect to happen? Or what used to happen in an older version? -->\r\nWe expected the mapping to work correctly and the destination instance to contain an instance of Queryable<int?> with the value 42.\r\n\r\n### Actual behavior\r\n\r\n<!-- What happened instead? -->\r\nI got an exception: \r\n'Expression of type 'System.Int32' cannot be used for parameter of type 'System.Nullable`1[System.Int32]' of method 'QueryableValue`1 op_Implicit(System.Nullable`1[System.Int32])' (Parameter 'arg0').\r\n\r\nI performed a test with an IValueConverter and the sourceMember parameter is of type Int32 instead of type Nullable<Int32> as expected.\r\n\r\n### Steps to reproduce\r\n\r\n```csharp\r\nvoid Main()\r\n{\r\n\tvar f = new SourceClass { MyProperty = 42 };\t\r\n\t\r\n\tvar mappingConfig = new MapperConfiguration(mc =>\r\n\t\t\t{\r\n\t\t\t\tmc.CreateMap<SourceClass, DestinationClass>();\r\n\t\t\t});\r\n\t\t\t\r\n\tIMapper mapper = mappingConfig.CreateMapper();\r\n\t\r\n\tvar dest = mapper.Map<DestinationClass>(f);\r\n\tConsole.WriteLine(dest.MyProperty);\r\n}\r\n```\r\n","closed_by":{"login":"lbargaoanu","id":4517428,"node_id":"MDQ6VXNlcjQ1MTc0Mjg=","avatar_url":"https://avatars.githubusercontent.com/u/4517428?v=4","gravatar_id":"","url":"https://api.github.com/users/lbargaoanu","html_url":"https://github.com/lbargaoanu","followers_url":"https://api.github.com/users/lbargaoanu/followers","following_url":"https://api.github.com/users/lbargaoanu/following{/other_user}","gists_url":"https://api.github.com/users/lbargaoanu/gists{/gist_id}","starred_url":"https://api.github.com/users/lbargaoanu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lbargaoanu/subscriptions","organizations_url":"https://api.github.com/users/lbargaoanu/orgs","repos_url":"https://api.github.com/users/lbargaoanu/repos","events_url":"https://api.github.com/users/lbargaoanu/events{/privacy}","received_events_url":"https://api.github.com/users/lbargaoanu/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/3676/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/3676/timeline","performed_via_github_app":null,"state_reason":"completed"}