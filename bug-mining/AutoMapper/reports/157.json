{"url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/1528","repository_url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper","labels_url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/1528/labels{/name}","comments_url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/1528/comments","events_url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/1528/events","html_url":"https://github.com/LuckyPennySoftware/AutoMapper/issues/1528","id":165730955,"node_id":"MDU6SXNzdWUxNjU3MzA5NTU=","number":1528,"title":"Invalid constructor mappings throw exceptions at seal-time","user":{"login":"tomasaschan","id":1550920,"node_id":"MDQ6VXNlcjE1NTA5MjA=","avatar_url":"https://avatars.githubusercontent.com/u/1550920?v=4","gravatar_id":"","url":"https://api.github.com/users/tomasaschan","html_url":"https://github.com/tomasaschan","followers_url":"https://api.github.com/users/tomasaschan/followers","following_url":"https://api.github.com/users/tomasaschan/following{/other_user}","gists_url":"https://api.github.com/users/tomasaschan/gists{/gist_id}","starred_url":"https://api.github.com/users/tomasaschan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tomasaschan/subscriptions","organizations_url":"https://api.github.com/users/tomasaschan/orgs","repos_url":"https://api.github.com/users/tomasaschan/repos","events_url":"https://api.github.com/users/tomasaschan/events{/privacy}","received_events_url":"https://api.github.com/users/tomasaschan/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":92629393,"node_id":"MDU6TGFiZWw5MjYyOTM5Mw==","url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/labels/Improvement","name":"Improvement","color":"207de5","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/milestones/23","html_url":"https://github.com/LuckyPennySoftware/AutoMapper/milestone/23","labels_url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/milestones/23/labels","id":1907092,"node_id":"MDk6TWlsZXN0b25lMTkwNzA5Mg==","number":23,"title":"5.2.0","description":"","creator":{"login":"jbogard","id":104498,"node_id":"MDQ6VXNlcjEwNDQ5OA==","avatar_url":"https://avatars.githubusercontent.com/u/104498?v=4","gravatar_id":"","url":"https://api.github.com/users/jbogard","html_url":"https://github.com/jbogard","followers_url":"https://api.github.com/users/jbogard/followers","following_url":"https://api.github.com/users/jbogard/following{/other_user}","gists_url":"https://api.github.com/users/jbogard/gists{/gist_id}","starred_url":"https://api.github.com/users/jbogard/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jbogard/subscriptions","organizations_url":"https://api.github.com/users/jbogard/orgs","repos_url":"https://api.github.com/users/jbogard/repos","events_url":"https://api.github.com/users/jbogard/events{/privacy}","received_events_url":"https://api.github.com/users/jbogard/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":74,"state":"closed","created_at":"2016-07-27T13:39:52Z","updated_at":"2016-11-24T15:09:08Z","due_on":null,"closed_at":"2016-11-24T15:09:08Z"},"comments":8,"created_at":"2016-07-15T07:54:14Z","updated_at":"2019-05-07T05:15:11Z","closed_at":"2016-11-11T13:30:33Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":"resolved","sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Given the following classes and mapping configuration, I get an `InvalidOperationException` (see stack trace below the code). If I comment out the constructor completely, I instead get a `NullReferenceException` (see second stack trace). Since the constructor parameters are specified with strings and not strongly typed, it would be nice if the configuration process was a little more lenient and could report these problems with better error messages.\n\n``` c#\n[Fact]\npublic void ThrowSomeStuffAround()\n{\n    new MapperConfiguration(c =>\n    {\n        c.CreateMap<Source, DestinationA>()\n            .ForCtorParam(\"bar\", cfg => cfg.MapFrom(src => src.Foo));\n    }).AssertConfigurationIsValid();\n}\n\npublic class Source\n{\n    public string Foo { get; set; }\n}\n\npublic class DestinationA\n{\n    public DestinationA(string barf) // note that the name doesn't match \"bar\" above\n    {\n        Foo = barf;\n    }\n\n    public string Foo { get; }\n}\n```\n\n`InvalidOperationException`, thrown when no matching constructor parameter is found:\n\n```\nSystem.InvalidOperationException : Sequence contains no matching element\nStack Trace:\n     at System.Linq.Enumerable.Single[TSource](IEnumerable`1 source, Func`2 predicate)\n     at AutoMapper.CtorParamConfigurationExpression`1.Configure(TypeMap typeMap)\n     at AutoMapper.Configuration.MappingExpression`2.Configure(IProfileConfiguration profile, TypeMap typeMap)\n     at AutoMapper.Profile.BuildTypeMap(TypeMapRegistry typeMapRegistry, ITypeMapConfiguration config)\n     at AutoMapper.Profile.AutoMapper.IProfileConfiguration.Register(TypeMapRegistry typeMapRegistry)\n     at AutoMapper.MapperConfiguration.Seal(IConfiguration configuration)\n     at AutoMapper.MapperConfiguration..ctor(MapperConfigurationExpression configurationExpression, IEnumerable`1 mappers)\n     at AutoMapper.MapperConfiguration..ctor(Action`1 configure, IEnumerable`1 mappers)\n     at AutoMapper.MapperConfiguration..ctor(Action`1 configure)\n```\n\n`NullReferenceException`, thrown when no constructor is found:\n\n```\nSystem.NullReferenceException : Object reference not set to an instance of an object.\nStack Trace:\n     at AutoMapper.CtorParamConfigurationExpression`1.Configure(TypeMap typeMap)\n     at AutoMapper.Configuration.MappingExpression`2.Configure(IProfileConfiguration profile, TypeMap typeMap)\n     at AutoMapper.Profile.BuildTypeMap(TypeMapRegistry typeMapRegistry, ITypeMapConfiguration config)\n     at AutoMapper.Profile.AutoMapper.IProfileConfiguration.Register(TypeMapRegistry typeMapRegistry)\n     at AutoMapper.MapperConfiguration.Seal(IConfiguration configuration)\n     at AutoMapper.MapperConfiguration..ctor(MapperConfigurationExpression configurationExpression, IEnumerable`1 mappers)\n     at AutoMapper.MapperConfiguration..ctor(Action`1 configure, IEnumerable`1 mappers)\n     at AutoMapper.MapperConfiguration..ctor(Action`1 configure)\n```\n\nI stumbled upon this because I wanted to create an extension on `IMappingExpression<TSrc, TDest>` called `Rename`, which would simply register both `ForMember` and `ForCtorParam` (assuming that the ctor param is named like the destination property but in camelCase), which of course blows up when using that extension method on types with no constructor.\n","closed_by":{"login":"jbogard","id":104498,"node_id":"MDQ6VXNlcjEwNDQ5OA==","avatar_url":"https://avatars.githubusercontent.com/u/104498?v=4","gravatar_id":"","url":"https://api.github.com/users/jbogard","html_url":"https://github.com/jbogard","followers_url":"https://api.github.com/users/jbogard/followers","following_url":"https://api.github.com/users/jbogard/following{/other_user}","gists_url":"https://api.github.com/users/jbogard/gists{/gist_id}","starred_url":"https://api.github.com/users/jbogard/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jbogard/subscriptions","organizations_url":"https://api.github.com/users/jbogard/orgs","repos_url":"https://api.github.com/users/jbogard/repos","events_url":"https://api.github.com/users/jbogard/events{/privacy}","received_events_url":"https://api.github.com/users/jbogard/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/1528/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/1528/timeline","performed_via_github_app":null,"state_reason":"completed"}