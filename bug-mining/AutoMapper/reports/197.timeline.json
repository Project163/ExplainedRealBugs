[{"url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/comments/753446427","html_url":"https://github.com/LuckyPennySoftware/AutoMapper/issues/3550#issuecomment-753446427","issue_url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/3550","id":753446427,"node_id":"MDEyOklzc3VlQ29tbWVudDc1MzQ0NjQyNw==","user":{"login":"lbargaoanu","id":4517428,"node_id":"MDQ6VXNlcjQ1MTc0Mjg=","avatar_url":"https://avatars.githubusercontent.com/u/4517428?v=4","gravatar_id":"","url":"https://api.github.com/users/lbargaoanu","html_url":"https://github.com/lbargaoanu","followers_url":"https://api.github.com/users/lbargaoanu/followers","following_url":"https://api.github.com/users/lbargaoanu/following{/other_user}","gists_url":"https://api.github.com/users/lbargaoanu/gists{/gist_id}","starred_url":"https://api.github.com/users/lbargaoanu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lbargaoanu/subscriptions","organizations_url":"https://api.github.com/users/lbargaoanu/orgs","repos_url":"https://api.github.com/users/lbargaoanu/repos","events_url":"https://api.github.com/users/lbargaoanu/events{/privacy}","received_events_url":"https://api.github.com/users/lbargaoanu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-02T08:15:13Z","updated_at":"2021-01-02T08:15:13Z","body":"We're not going to work around in AM for problems elsewhere. But of course you can do that in your own code.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/comments/753446427/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"lbargaoanu","id":4517428,"node_id":"MDQ6VXNlcjQ1MTc0Mjg=","avatar_url":"https://avatars.githubusercontent.com/u/4517428?v=4","gravatar_id":"","url":"https://api.github.com/users/lbargaoanu","html_url":"https://github.com/lbargaoanu","followers_url":"https://api.github.com/users/lbargaoanu/followers","following_url":"https://api.github.com/users/lbargaoanu/following{/other_user}","gists_url":"https://api.github.com/users/lbargaoanu/gists{/gist_id}","starred_url":"https://api.github.com/users/lbargaoanu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lbargaoanu/subscriptions","organizations_url":"https://api.github.com/users/lbargaoanu/orgs","repos_url":"https://api.github.com/users/lbargaoanu/repos","events_url":"https://api.github.com/users/lbargaoanu/events{/privacy}","received_events_url":"https://api.github.com/users/lbargaoanu/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":4161551816,"node_id":"MDExOkNsb3NlZEV2ZW50NDE2MTU1MTgxNg==","url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/events/4161551816","actor":{"login":"lbargaoanu","id":4517428,"node_id":"MDQ6VXNlcjQ1MTc0Mjg=","avatar_url":"https://avatars.githubusercontent.com/u/4517428?v=4","gravatar_id":"","url":"https://api.github.com/users/lbargaoanu","html_url":"https://github.com/lbargaoanu","followers_url":"https://api.github.com/users/lbargaoanu/followers","following_url":"https://api.github.com/users/lbargaoanu/following{/other_user}","gists_url":"https://api.github.com/users/lbargaoanu/gists{/gist_id}","starred_url":"https://api.github.com/users/lbargaoanu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lbargaoanu/subscriptions","organizations_url":"https://api.github.com/users/lbargaoanu/orgs","repos_url":"https://api.github.com/users/lbargaoanu/repos","events_url":"https://api.github.com/users/lbargaoanu/events{/privacy}","received_events_url":"https://api.github.com/users/lbargaoanu/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2021-01-02T08:15:13Z","state_reason":null,"performed_via_github_app":null},{"id":4161551886,"node_id":"MDEyOkxhYmVsZWRFdmVudDQxNjE1NTE4ODY=","url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/events/4161551886","actor":{"login":"lbargaoanu","id":4517428,"node_id":"MDQ6VXNlcjQ1MTc0Mjg=","avatar_url":"https://avatars.githubusercontent.com/u/4517428?v=4","gravatar_id":"","url":"https://api.github.com/users/lbargaoanu","html_url":"https://github.com/lbargaoanu","followers_url":"https://api.github.com/users/lbargaoanu/followers","following_url":"https://api.github.com/users/lbargaoanu/following{/other_user}","gists_url":"https://api.github.com/users/lbargaoanu/gists{/gist_id}","starred_url":"https://api.github.com/users/lbargaoanu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lbargaoanu/subscriptions","organizations_url":"https://api.github.com/users/lbargaoanu/orgs","repos_url":"https://api.github.com/users/lbargaoanu/repos","events_url":"https://api.github.com/users/lbargaoanu/events{/privacy}","received_events_url":"https://api.github.com/users/lbargaoanu/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2021-01-02T08:15:25Z","label":{"name":"Question","color":"aaf4f7"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/comments/753455500","html_url":"https://github.com/LuckyPennySoftware/AutoMapper/issues/3550#issuecomment-753455500","issue_url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/3550","id":753455500,"node_id":"MDEyOklzc3VlQ29tbWVudDc1MzQ1NTUwMA==","user":{"login":"wagich","id":1444168,"node_id":"MDQ6VXNlcjE0NDQxNjg=","avatar_url":"https://avatars.githubusercontent.com/u/1444168?v=4","gravatar_id":"","url":"https://api.github.com/users/wagich","html_url":"https://github.com/wagich","followers_url":"https://api.github.com/users/wagich/followers","following_url":"https://api.github.com/users/wagich/following{/other_user}","gists_url":"https://api.github.com/users/wagich/gists{/gist_id}","starred_url":"https://api.github.com/users/wagich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wagich/subscriptions","organizations_url":"https://api.github.com/users/wagich/orgs","repos_url":"https://api.github.com/users/wagich/repos","events_url":"https://api.github.com/users/wagich/events{/privacy}","received_events_url":"https://api.github.com/users/wagich/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-02T10:14:34Z","updated_at":"2021-01-02T10:16:04Z","body":"@lbargaoanu \r\nHowever I look at it, I can't see where this is a problem in the Framework and not a problem in AutoMapper… \r\n\r\nThe only guarantee `IEnumerable` makes is that it's enumerable – by accident `Enumerable.Empty` returned something that could be cast to an `ICollection` but that is completely internal behaviour that shouldn't be and obviously can't be depended on.\r\n\r\nSo IMO AutoMapper can and should try its best to use an existing collection, but a property of type `IEnumerable<T>` can only ever be reliably replaced whole-sale, therefore it should fall back to this behaviour if the other assumptions failed. This fallback behaviour is already present (by checking `IsReadOnly`), it just doesn't handle all cases correctly.\r\n\r\nCompounding the problem, this error occurs at runtime after the map validation indicated no errors (`config.AssertConfigurationIsValid()` didn't throw). If this is really the problem of AutoMapper not being able to reliably map to `IEnumerable` properties, maybe this could be catched in mapping validation?","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/comments/753455500/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"wagich","id":1444168,"node_id":"MDQ6VXNlcjE0NDQxNjg=","avatar_url":"https://avatars.githubusercontent.com/u/1444168?v=4","gravatar_id":"","url":"https://api.github.com/users/wagich","html_url":"https://github.com/wagich","followers_url":"https://api.github.com/users/wagich/followers","following_url":"https://api.github.com/users/wagich/following{/other_user}","gists_url":"https://api.github.com/users/wagich/gists{/gist_id}","starred_url":"https://api.github.com/users/wagich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wagich/subscriptions","organizations_url":"https://api.github.com/users/wagich/orgs","repos_url":"https://api.github.com/users/wagich/repos","events_url":"https://api.github.com/users/wagich/events{/privacy}","received_events_url":"https://api.github.com/users/wagich/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":4161606534,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDE2MTYwNjUzNA==","url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/events/4161606534","actor":{"login":"lbargaoanu","id":4517428,"node_id":"MDQ6VXNlcjQ1MTc0Mjg=","avatar_url":"https://avatars.githubusercontent.com/u/4517428?v=4","gravatar_id":"","url":"https://api.github.com/users/lbargaoanu","html_url":"https://github.com/lbargaoanu","followers_url":"https://api.github.com/users/lbargaoanu/followers","following_url":"https://api.github.com/users/lbargaoanu/following{/other_user}","gists_url":"https://api.github.com/users/lbargaoanu/gists{/gist_id}","starred_url":"https://api.github.com/users/lbargaoanu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lbargaoanu/subscriptions","organizations_url":"https://api.github.com/users/lbargaoanu/orgs","repos_url":"https://api.github.com/users/lbargaoanu/repos","events_url":"https://api.github.com/users/lbargaoanu/events{/privacy}","received_events_url":"https://api.github.com/users/lbargaoanu/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-01-02T10:14:34Z","performed_via_github_app":null},{"id":4161606535,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQxNjE2MDY1MzU=","url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/events/4161606535","actor":{"login":"lbargaoanu","id":4517428,"node_id":"MDQ6VXNlcjQ1MTc0Mjg=","avatar_url":"https://avatars.githubusercontent.com/u/4517428?v=4","gravatar_id":"","url":"https://api.github.com/users/lbargaoanu","html_url":"https://github.com/lbargaoanu","followers_url":"https://api.github.com/users/lbargaoanu/followers","following_url":"https://api.github.com/users/lbargaoanu/following{/other_user}","gists_url":"https://api.github.com/users/lbargaoanu/gists{/gist_id}","starred_url":"https://api.github.com/users/lbargaoanu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lbargaoanu/subscriptions","organizations_url":"https://api.github.com/users/lbargaoanu/orgs","repos_url":"https://api.github.com/users/lbargaoanu/repos","events_url":"https://api.github.com/users/lbargaoanu/events{/privacy}","received_events_url":"https://api.github.com/users/lbargaoanu/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-01-02T10:14:34Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/comments/753456353","html_url":"https://github.com/LuckyPennySoftware/AutoMapper/issues/3550#issuecomment-753456353","issue_url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/3550","id":753456353,"node_id":"MDEyOklzc3VlQ29tbWVudDc1MzQ1NjM1Mw==","user":{"login":"lbargaoanu","id":4517428,"node_id":"MDQ6VXNlcjQ1MTc0Mjg=","avatar_url":"https://avatars.githubusercontent.com/u/4517428?v=4","gravatar_id":"","url":"https://api.github.com/users/lbargaoanu","html_url":"https://github.com/lbargaoanu","followers_url":"https://api.github.com/users/lbargaoanu/followers","following_url":"https://api.github.com/users/lbargaoanu/following{/other_user}","gists_url":"https://api.github.com/users/lbargaoanu/gists{/gist_id}","starred_url":"https://api.github.com/users/lbargaoanu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lbargaoanu/subscriptions","organizations_url":"https://api.github.com/users/lbargaoanu/orgs","repos_url":"https://api.github.com/users/lbargaoanu/repos","events_url":"https://api.github.com/users/lbargaoanu/events{/privacy}","received_events_url":"https://api.github.com/users/lbargaoanu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-02T10:22:50Z","updated_at":"2021-01-02T10:22:50Z","body":"Read again more carefully the issue you linked to.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/comments/753456353/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"lbargaoanu","id":4517428,"node_id":"MDQ6VXNlcjQ1MTc0Mjg=","avatar_url":"https://avatars.githubusercontent.com/u/4517428?v=4","gravatar_id":"","url":"https://api.github.com/users/lbargaoanu","html_url":"https://github.com/lbargaoanu","followers_url":"https://api.github.com/users/lbargaoanu/followers","following_url":"https://api.github.com/users/lbargaoanu/following{/other_user}","gists_url":"https://api.github.com/users/lbargaoanu/gists{/gist_id}","starred_url":"https://api.github.com/users/lbargaoanu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lbargaoanu/subscriptions","organizations_url":"https://api.github.com/users/lbargaoanu/orgs","repos_url":"https://api.github.com/users/lbargaoanu/repos","events_url":"https://api.github.com/users/lbargaoanu/events{/privacy}","received_events_url":"https://api.github.com/users/lbargaoanu/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/comments/753457747","html_url":"https://github.com/LuckyPennySoftware/AutoMapper/issues/3550#issuecomment-753457747","issue_url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/3550","id":753457747,"node_id":"MDEyOklzc3VlQ29tbWVudDc1MzQ1Nzc0Nw==","user":{"login":"wagich","id":1444168,"node_id":"MDQ6VXNlcjE0NDQxNjg=","avatar_url":"https://avatars.githubusercontent.com/u/1444168?v=4","gravatar_id":"","url":"https://api.github.com/users/wagich","html_url":"https://github.com/wagich","followers_url":"https://api.github.com/users/wagich/followers","following_url":"https://api.github.com/users/wagich/following{/other_user}","gists_url":"https://api.github.com/users/wagich/gists{/gist_id}","starred_url":"https://api.github.com/users/wagich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wagich/subscriptions","organizations_url":"https://api.github.com/users/wagich/orgs","repos_url":"https://api.github.com/users/wagich/repos","events_url":"https://api.github.com/users/wagich/events{/privacy}","received_events_url":"https://api.github.com/users/wagich/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-02T10:36:41Z","updated_at":"2021-01-02T10:37:16Z","body":"I did. The problem is that the conclusion seems to me to be incorrect…\r\n\r\nCompare these two property declarations on the destination:\r\n- `public IEnumerable<int> Values { get; set; } = Enumerable.Empty<int>(); // throws InvalidCastException` \r\n- `public IEnumerable<int> Values { get; set; } = Array.Empty<int>(); // maps correctly` \r\n\r\nThere is no difference in API surface _and_ there is no difference in mapping behaviour/execution plan. Both \"collections\" can't be changed – but one works and one doesn't. \r\n- The array one works because there is a fallback detecting if an existing collection can't be changed, it is then recreated as a `List<T>`. \r\n- The empty enumerable doesn't work because the fallback is not detecting it.\r\n\r\nI propose we extend the fallback behaviour to any class that can't be cast to `ICollection<T>` which would prevent this kind of runtime error entirely. If the scope of this is too broad, one could even check for `EmptyPartition<T>` in particular…","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/comments/753457747/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"wagich","id":1444168,"node_id":"MDQ6VXNlcjE0NDQxNjg=","avatar_url":"https://avatars.githubusercontent.com/u/1444168?v=4","gravatar_id":"","url":"https://api.github.com/users/wagich","html_url":"https://github.com/wagich","followers_url":"https://api.github.com/users/wagich/followers","following_url":"https://api.github.com/users/wagich/following{/other_user}","gists_url":"https://api.github.com/users/wagich/gists{/gist_id}","starred_url":"https://api.github.com/users/wagich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wagich/subscriptions","organizations_url":"https://api.github.com/users/wagich/orgs","repos_url":"https://api.github.com/users/wagich/repos","events_url":"https://api.github.com/users/wagich/events{/privacy}","received_events_url":"https://api.github.com/users/wagich/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/comments/753467081","html_url":"https://github.com/LuckyPennySoftware/AutoMapper/issues/3550#issuecomment-753467081","issue_url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/3550","id":753467081,"node_id":"MDEyOklzc3VlQ29tbWVudDc1MzQ2NzA4MQ==","user":{"login":"lbargaoanu","id":4517428,"node_id":"MDQ6VXNlcjQ1MTc0Mjg=","avatar_url":"https://avatars.githubusercontent.com/u/4517428?v=4","gravatar_id":"","url":"https://api.github.com/users/lbargaoanu","html_url":"https://github.com/lbargaoanu","followers_url":"https://api.github.com/users/lbargaoanu/followers","following_url":"https://api.github.com/users/lbargaoanu/following{/other_user}","gists_url":"https://api.github.com/users/lbargaoanu/gists{/gist_id}","starred_url":"https://api.github.com/users/lbargaoanu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lbargaoanu/subscriptions","organizations_url":"https://api.github.com/users/lbargaoanu/orgs","repos_url":"https://api.github.com/users/lbargaoanu/repos","events_url":"https://api.github.com/users/lbargaoanu/events{/privacy}","received_events_url":"https://api.github.com/users/lbargaoanu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-02T12:18:06Z","updated_at":"2021-01-02T12:18:06Z","body":"That's technically wrong (but backward compatibility). You cannot map _into_ a read-only collection. And you propose to add even more weirdness. You pass the wrong parameters to a function and instead of changing the parameters you want to change the function. And that's because you don't want to pass `null` or `Array.Empty`. You want to pass a read-only collection so AM can replace it for you. _Really?_ Come on...","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/comments/753467081/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"lbargaoanu","id":4517428,"node_id":"MDQ6VXNlcjQ1MTc0Mjg=","avatar_url":"https://avatars.githubusercontent.com/u/4517428?v=4","gravatar_id":"","url":"https://api.github.com/users/lbargaoanu","html_url":"https://github.com/lbargaoanu","followers_url":"https://api.github.com/users/lbargaoanu/followers","following_url":"https://api.github.com/users/lbargaoanu/following{/other_user}","gists_url":"https://api.github.com/users/lbargaoanu/gists{/gist_id}","starred_url":"https://api.github.com/users/lbargaoanu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lbargaoanu/subscriptions","organizations_url":"https://api.github.com/users/lbargaoanu/orgs","repos_url":"https://api.github.com/users/lbargaoanu/repos","events_url":"https://api.github.com/users/lbargaoanu/events{/privacy}","received_events_url":"https://api.github.com/users/lbargaoanu/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/comments/753467664","html_url":"https://github.com/LuckyPennySoftware/AutoMapper/issues/3550#issuecomment-753467664","issue_url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/3550","id":753467664,"node_id":"MDEyOklzc3VlQ29tbWVudDc1MzQ2NzY2NA==","user":{"login":"wagich","id":1444168,"node_id":"MDQ6VXNlcjE0NDQxNjg=","avatar_url":"https://avatars.githubusercontent.com/u/1444168?v=4","gravatar_id":"","url":"https://api.github.com/users/wagich","html_url":"https://github.com/wagich","followers_url":"https://api.github.com/users/wagich/followers","following_url":"https://api.github.com/users/wagich/following{/other_user}","gists_url":"https://api.github.com/users/wagich/gists{/gist_id}","starred_url":"https://api.github.com/users/wagich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wagich/subscriptions","organizations_url":"https://api.github.com/users/wagich/orgs","repos_url":"https://api.github.com/users/wagich/repos","events_url":"https://api.github.com/users/wagich/events{/privacy}","received_events_url":"https://api.github.com/users/wagich/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-02T12:25:35Z","updated_at":"2021-01-03T09:30:53Z","body":"I see, so your position is that you really don't want to have the functionality of mapping to readonly collections (or similar collections) _at all_, it's just there because you can't remove it because of backcompat? If so I see your point more clearly. \r\n\r\nThe issue is cropping up because with non-nullable types, you really need to initialize non-null properties to something – and the recommendation, as I understand it, is to use `Enumerable.Empty` as a kind of \"null value for enumerables\". There also seems to be an effort to special-case this throughout LINQ etc. (this work prompted the error to crop up in the first place) ~so to me it makes sense from a performance perspective to use it. However I haven't tested this or anything…~ \r\n_Edit 2021-01-03:_ Thinking this through, the perf argument is invalid, since after mapping there won't ever be an `EmptyPartition`… So that leaves only consistency with other code as an argument.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/comments/753467664/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"wagich","id":1444168,"node_id":"MDQ6VXNlcjE0NDQxNjg=","avatar_url":"https://avatars.githubusercontent.com/u/1444168?v=4","gravatar_id":"","url":"https://api.github.com/users/wagich","html_url":"https://github.com/wagich","followers_url":"https://api.github.com/users/wagich/followers","following_url":"https://api.github.com/users/wagich/following{/other_user}","gists_url":"https://api.github.com/users/wagich/gists{/gist_id}","starred_url":"https://api.github.com/users/wagich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wagich/subscriptions","organizations_url":"https://api.github.com/users/wagich/orgs","repos_url":"https://api.github.com/users/wagich/repos","events_url":"https://api.github.com/users/wagich/events{/privacy}","received_events_url":"https://api.github.com/users/wagich/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/comments/753468495","html_url":"https://github.com/LuckyPennySoftware/AutoMapper/issues/3550#issuecomment-753468495","issue_url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/3550","id":753468495,"node_id":"MDEyOklzc3VlQ29tbWVudDc1MzQ2ODQ5NQ==","user":{"login":"wagich","id":1444168,"node_id":"MDQ6VXNlcjE0NDQxNjg=","avatar_url":"https://avatars.githubusercontent.com/u/1444168?v=4","gravatar_id":"","url":"https://api.github.com/users/wagich","html_url":"https://github.com/wagich","followers_url":"https://api.github.com/users/wagich/followers","following_url":"https://api.github.com/users/wagich/following{/other_user}","gists_url":"https://api.github.com/users/wagich/gists{/gist_id}","starred_url":"https://api.github.com/users/wagich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wagich/subscriptions","organizations_url":"https://api.github.com/users/wagich/orgs","repos_url":"https://api.github.com/users/wagich/repos","events_url":"https://api.github.com/users/wagich/events{/privacy}","received_events_url":"https://api.github.com/users/wagich/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-02T12:35:05Z","updated_at":"2021-01-02T12:35:05Z","body":"In any case, thank you for taking a look and expanding on your reasoning!","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/comments/753468495/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"wagich","id":1444168,"node_id":"MDQ6VXNlcjE0NDQxNjg=","avatar_url":"https://avatars.githubusercontent.com/u/1444168?v=4","gravatar_id":"","url":"https://api.github.com/users/wagich","html_url":"https://github.com/wagich","followers_url":"https://api.github.com/users/wagich/followers","following_url":"https://api.github.com/users/wagich/following{/other_user}","gists_url":"https://api.github.com/users/wagich/gists{/gist_id}","starred_url":"https://api.github.com/users/wagich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wagich/subscriptions","organizations_url":"https://api.github.com/users/wagich/orgs","repos_url":"https://api.github.com/users/wagich/repos","events_url":"https://api.github.com/users/wagich/events{/privacy}","received_events_url":"https://api.github.com/users/wagich/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/comments/753482671","html_url":"https://github.com/LuckyPennySoftware/AutoMapper/issues/3550#issuecomment-753482671","issue_url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/3550","id":753482671,"node_id":"MDEyOklzc3VlQ29tbWVudDc1MzQ4MjY3MQ==","user":{"login":"lbargaoanu","id":4517428,"node_id":"MDQ6VXNlcjQ1MTc0Mjg=","avatar_url":"https://avatars.githubusercontent.com/u/4517428?v=4","gravatar_id":"","url":"https://api.github.com/users/lbargaoanu","html_url":"https://github.com/lbargaoanu","followers_url":"https://api.github.com/users/lbargaoanu/followers","following_url":"https://api.github.com/users/lbargaoanu/following{/other_user}","gists_url":"https://api.github.com/users/lbargaoanu/gists{/gist_id}","starred_url":"https://api.github.com/users/lbargaoanu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lbargaoanu/subscriptions","organizations_url":"https://api.github.com/users/lbargaoanu/orgs","repos_url":"https://api.github.com/users/lbargaoanu/repos","events_url":"https://api.github.com/users/lbargaoanu/events{/privacy}","received_events_url":"https://api.github.com/users/lbargaoanu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-02T14:51:36Z","updated_at":"2021-01-02T14:51:36Z","body":"cc @jbogard","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/comments/753482671/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"lbargaoanu","id":4517428,"node_id":"MDQ6VXNlcjQ1MTc0Mjg=","avatar_url":"https://avatars.githubusercontent.com/u/4517428?v=4","gravatar_id":"","url":"https://api.github.com/users/lbargaoanu","html_url":"https://github.com/lbargaoanu","followers_url":"https://api.github.com/users/lbargaoanu/followers","following_url":"https://api.github.com/users/lbargaoanu/following{/other_user}","gists_url":"https://api.github.com/users/lbargaoanu/gists{/gist_id}","starred_url":"https://api.github.com/users/lbargaoanu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lbargaoanu/subscriptions","organizations_url":"https://api.github.com/users/lbargaoanu/orgs","repos_url":"https://api.github.com/users/lbargaoanu/repos","events_url":"https://api.github.com/users/lbargaoanu/events{/privacy}","received_events_url":"https://api.github.com/users/lbargaoanu/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":4161751748,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDE2MTc1MTc0OA==","url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/events/4161751748","actor":{"login":"jbogard","id":104498,"node_id":"MDQ6VXNlcjEwNDQ5OA==","avatar_url":"https://avatars.githubusercontent.com/u/104498?v=4","gravatar_id":"","url":"https://api.github.com/users/jbogard","html_url":"https://github.com/jbogard","followers_url":"https://api.github.com/users/jbogard/followers","following_url":"https://api.github.com/users/jbogard/following{/other_user}","gists_url":"https://api.github.com/users/jbogard/gists{/gist_id}","starred_url":"https://api.github.com/users/jbogard/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jbogard/subscriptions","organizations_url":"https://api.github.com/users/jbogard/orgs","repos_url":"https://api.github.com/users/jbogard/repos","events_url":"https://api.github.com/users/jbogard/events{/privacy}","received_events_url":"https://api.github.com/users/jbogard/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-01-02T14:51:36Z","performed_via_github_app":null},{"id":4161751750,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQxNjE3NTE3NTA=","url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/events/4161751750","actor":{"login":"jbogard","id":104498,"node_id":"MDQ6VXNlcjEwNDQ5OA==","avatar_url":"https://avatars.githubusercontent.com/u/104498?v=4","gravatar_id":"","url":"https://api.github.com/users/jbogard","html_url":"https://github.com/jbogard","followers_url":"https://api.github.com/users/jbogard/followers","following_url":"https://api.github.com/users/jbogard/following{/other_user}","gists_url":"https://api.github.com/users/jbogard/gists{/gist_id}","starred_url":"https://api.github.com/users/jbogard/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jbogard/subscriptions","organizations_url":"https://api.github.com/users/jbogard/orgs","repos_url":"https://api.github.com/users/jbogard/repos","events_url":"https://api.github.com/users/jbogard/events{/privacy}","received_events_url":"https://api.github.com/users/jbogard/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-01-02T14:51:36Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/comments/753596737","html_url":"https://github.com/LuckyPennySoftware/AutoMapper/issues/3550#issuecomment-753596737","issue_url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/3550","id":753596737,"node_id":"MDEyOklzc3VlQ29tbWVudDc1MzU5NjczNw==","user":{"login":"Tasteful","id":357589,"node_id":"MDQ6VXNlcjM1NzU4OQ==","avatar_url":"https://avatars.githubusercontent.com/u/357589?v=4","gravatar_id":"","url":"https://api.github.com/users/Tasteful","html_url":"https://github.com/Tasteful","followers_url":"https://api.github.com/users/Tasteful/followers","following_url":"https://api.github.com/users/Tasteful/following{/other_user}","gists_url":"https://api.github.com/users/Tasteful/gists{/gist_id}","starred_url":"https://api.github.com/users/Tasteful/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Tasteful/subscriptions","organizations_url":"https://api.github.com/users/Tasteful/orgs","repos_url":"https://api.github.com/users/Tasteful/repos","events_url":"https://api.github.com/users/Tasteful/events{/privacy}","received_events_url":"https://api.github.com/users/Tasteful/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-03T10:32:08Z","updated_at":"2021-01-03T10:32:08Z","body":"Sounds as the same issue that I was having with the readonly collections, see #1973","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/comments/753596737/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Tasteful","id":357589,"node_id":"MDQ6VXNlcjM1NzU4OQ==","avatar_url":"https://avatars.githubusercontent.com/u/357589?v=4","gravatar_id":"","url":"https://api.github.com/users/Tasteful","html_url":"https://github.com/Tasteful","followers_url":"https://api.github.com/users/Tasteful/followers","following_url":"https://api.github.com/users/Tasteful/following{/other_user}","gists_url":"https://api.github.com/users/Tasteful/gists{/gist_id}","starred_url":"https://api.github.com/users/Tasteful/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Tasteful/subscriptions","organizations_url":"https://api.github.com/users/Tasteful/orgs","repos_url":"https://api.github.com/users/Tasteful/repos","events_url":"https://api.github.com/users/Tasteful/events{/privacy}","received_events_url":"https://api.github.com/users/Tasteful/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/comments/753598481","html_url":"https://github.com/LuckyPennySoftware/AutoMapper/issues/3550#issuecomment-753598481","issue_url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/3550","id":753598481,"node_id":"MDEyOklzc3VlQ29tbWVudDc1MzU5ODQ4MQ==","user":{"login":"wagich","id":1444168,"node_id":"MDQ6VXNlcjE0NDQxNjg=","avatar_url":"https://avatars.githubusercontent.com/u/1444168?v=4","gravatar_id":"","url":"https://api.github.com/users/wagich","html_url":"https://github.com/wagich","followers_url":"https://api.github.com/users/wagich/followers","following_url":"https://api.github.com/users/wagich/following{/other_user}","gists_url":"https://api.github.com/users/wagich/gists{/gist_id}","starred_url":"https://api.github.com/users/wagich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wagich/subscriptions","organizations_url":"https://api.github.com/users/wagich/orgs","repos_url":"https://api.github.com/users/wagich/repos","events_url":"https://api.github.com/users/wagich/events{/privacy}","received_events_url":"https://api.github.com/users/wagich/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-03T10:46:57Z","updated_at":"2021-01-03T10:46:57Z","body":"@Tasteful It looks like mapping to readonly collections (or to be exact, replacing them if neccessary) is working since bf2bf918a497735f967d8d2fba1ac12088ed38e8 where a check for `ICollection<T>.IsReadOnly` with a fallback was introduced. This is very closely related, in essence the fallback doesn't cover all enumerable types.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/comments/753598481/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"wagich","id":1444168,"node_id":"MDQ6VXNlcjE0NDQxNjg=","avatar_url":"https://avatars.githubusercontent.com/u/1444168?v=4","gravatar_id":"","url":"https://api.github.com/users/wagich","html_url":"https://github.com/wagich","followers_url":"https://api.github.com/users/wagich/followers","following_url":"https://api.github.com/users/wagich/following{/other_user}","gists_url":"https://api.github.com/users/wagich/gists{/gist_id}","starred_url":"https://api.github.com/users/wagich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wagich/subscriptions","organizations_url":"https://api.github.com/users/wagich/orgs","repos_url":"https://api.github.com/users/wagich/repos","events_url":"https://api.github.com/users/wagich/events{/privacy}","received_events_url":"https://api.github.com/users/wagich/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":4162350854,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDE2MjM1MDg1NA==","url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/events/4162350854","actor":{"login":"Tasteful","id":357589,"node_id":"MDQ6VXNlcjM1NzU4OQ==","avatar_url":"https://avatars.githubusercontent.com/u/357589?v=4","gravatar_id":"","url":"https://api.github.com/users/Tasteful","html_url":"https://github.com/Tasteful","followers_url":"https://api.github.com/users/Tasteful/followers","following_url":"https://api.github.com/users/Tasteful/following{/other_user}","gists_url":"https://api.github.com/users/Tasteful/gists{/gist_id}","starred_url":"https://api.github.com/users/Tasteful/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Tasteful/subscriptions","organizations_url":"https://api.github.com/users/Tasteful/orgs","repos_url":"https://api.github.com/users/Tasteful/repos","events_url":"https://api.github.com/users/Tasteful/events{/privacy}","received_events_url":"https://api.github.com/users/Tasteful/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-01-03T10:46:57Z","performed_via_github_app":null},{"id":4162350856,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQxNjIzNTA4NTY=","url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/events/4162350856","actor":{"login":"Tasteful","id":357589,"node_id":"MDQ6VXNlcjM1NzU4OQ==","avatar_url":"https://avatars.githubusercontent.com/u/357589?v=4","gravatar_id":"","url":"https://api.github.com/users/Tasteful","html_url":"https://github.com/Tasteful","followers_url":"https://api.github.com/users/Tasteful/followers","following_url":"https://api.github.com/users/Tasteful/following{/other_user}","gists_url":"https://api.github.com/users/Tasteful/gists{/gist_id}","starred_url":"https://api.github.com/users/Tasteful/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Tasteful/subscriptions","organizations_url":"https://api.github.com/users/Tasteful/orgs","repos_url":"https://api.github.com/users/Tasteful/repos","events_url":"https://api.github.com/users/Tasteful/events{/privacy}","received_events_url":"https://api.github.com/users/Tasteful/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-01-03T10:46:57Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/comments/753996965","html_url":"https://github.com/LuckyPennySoftware/AutoMapper/issues/3550#issuecomment-753996965","issue_url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/3550","id":753996965,"node_id":"MDEyOklzc3VlQ29tbWVudDc1Mzk5Njk2NQ==","user":{"login":"jbogard","id":104498,"node_id":"MDQ6VXNlcjEwNDQ5OA==","avatar_url":"https://avatars.githubusercontent.com/u/104498?v=4","gravatar_id":"","url":"https://api.github.com/users/jbogard","html_url":"https://github.com/jbogard","followers_url":"https://api.github.com/users/jbogard/followers","following_url":"https://api.github.com/users/jbogard/following{/other_user}","gists_url":"https://api.github.com/users/jbogard/gists{/gist_id}","starred_url":"https://api.github.com/users/jbogard/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jbogard/subscriptions","organizations_url":"https://api.github.com/users/jbogard/orgs","repos_url":"https://api.github.com/users/jbogard/repos","events_url":"https://api.github.com/users/jbogard/events{/privacy}","received_events_url":"https://api.github.com/users/jbogard/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-04T14:12:16Z","updated_at":"2021-01-04T14:12:16Z","body":"The proposed changed is small (we have to make an assumption that if you want to map into `IEnumerable<T>` that you REALLY have an `ICollection<T>`), I don't have a problem with that.\r\n\r\nHowever, I still don't quite understand the point of initializing to an empty enumerable. Are you getting compiler warnings that values can be null because they're getting populated by LINQ providers and not code? This seems like a problem with the tooling, not AutoMapper","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/comments/753996965/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jbogard","id":104498,"node_id":"MDQ6VXNlcjEwNDQ5OA==","avatar_url":"https://avatars.githubusercontent.com/u/104498?v=4","gravatar_id":"","url":"https://api.github.com/users/jbogard","html_url":"https://github.com/jbogard","followers_url":"https://api.github.com/users/jbogard/followers","following_url":"https://api.github.com/users/jbogard/following{/other_user}","gists_url":"https://api.github.com/users/jbogard/gists{/gist_id}","starred_url":"https://api.github.com/users/jbogard/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jbogard/subscriptions","organizations_url":"https://api.github.com/users/jbogard/orgs","repos_url":"https://api.github.com/users/jbogard/repos","events_url":"https://api.github.com/users/jbogard/events{/privacy}","received_events_url":"https://api.github.com/users/jbogard/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/comments/754008465","html_url":"https://github.com/LuckyPennySoftware/AutoMapper/issues/3550#issuecomment-754008465","issue_url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/3550","id":754008465,"node_id":"MDEyOklzc3VlQ29tbWVudDc1NDAwODQ2NQ==","user":{"login":"lbargaoanu","id":4517428,"node_id":"MDQ6VXNlcjQ1MTc0Mjg=","avatar_url":"https://avatars.githubusercontent.com/u/4517428?v=4","gravatar_id":"","url":"https://api.github.com/users/lbargaoanu","html_url":"https://github.com/lbargaoanu","followers_url":"https://api.github.com/users/lbargaoanu/followers","following_url":"https://api.github.com/users/lbargaoanu/following{/other_user}","gists_url":"https://api.github.com/users/lbargaoanu/gists{/gist_id}","starred_url":"https://api.github.com/users/lbargaoanu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lbargaoanu/subscriptions","organizations_url":"https://api.github.com/users/lbargaoanu/orgs","repos_url":"https://api.github.com/users/lbargaoanu/repos","events_url":"https://api.github.com/users/lbargaoanu/events{/privacy}","received_events_url":"https://api.github.com/users/lbargaoanu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-04T14:31:57Z","updated_at":"2021-01-04T14:31:57Z","body":"In fact a significant part of AM is dedicated to some kind of null checking. If you have both `AllowNullDestinationValues` and `AllowNullCollections` set to `false`, you'll never have `null` in the destination. So, in this context, the guideline is meaningless. ","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/comments/754008465/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"lbargaoanu","id":4517428,"node_id":"MDQ6VXNlcjQ1MTc0Mjg=","avatar_url":"https://avatars.githubusercontent.com/u/4517428?v=4","gravatar_id":"","url":"https://api.github.com/users/lbargaoanu","html_url":"https://github.com/lbargaoanu","followers_url":"https://api.github.com/users/lbargaoanu/followers","following_url":"https://api.github.com/users/lbargaoanu/following{/other_user}","gists_url":"https://api.github.com/users/lbargaoanu/gists{/gist_id}","starred_url":"https://api.github.com/users/lbargaoanu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lbargaoanu/subscriptions","organizations_url":"https://api.github.com/users/lbargaoanu/orgs","repos_url":"https://api.github.com/users/lbargaoanu/repos","events_url":"https://api.github.com/users/lbargaoanu/events{/privacy}","received_events_url":"https://api.github.com/users/lbargaoanu/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/comments/754009392","html_url":"https://github.com/LuckyPennySoftware/AutoMapper/issues/3550#issuecomment-754009392","issue_url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/3550","id":754009392,"node_id":"MDEyOklzc3VlQ29tbWVudDc1NDAwOTM5Mg==","user":{"login":"wagich","id":1444168,"node_id":"MDQ6VXNlcjE0NDQxNjg=","avatar_url":"https://avatars.githubusercontent.com/u/1444168?v=4","gravatar_id":"","url":"https://api.github.com/users/wagich","html_url":"https://github.com/wagich","followers_url":"https://api.github.com/users/wagich/followers","following_url":"https://api.github.com/users/wagich/following{/other_user}","gists_url":"https://api.github.com/users/wagich/gists{/gist_id}","starred_url":"https://api.github.com/users/wagich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wagich/subscriptions","organizations_url":"https://api.github.com/users/wagich/orgs","repos_url":"https://api.github.com/users/wagich/repos","events_url":"https://api.github.com/users/wagich/events{/privacy}","received_events_url":"https://api.github.com/users/wagich/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-04T14:33:31Z","updated_at":"2021-01-04T14:49:01Z","body":"@jbogard If I declare a property `public IEnumerable<int> Values { get; set; }` and I'm using nullable types, I need to either initialize it using `default!` (which goes against the non-nullability) or by assigning an empty collection. And to my knowledge, the most lightweight and preferred way is to use `Enumerable.Empty`.\r\n\r\nI chose `IEnumerable<T>` for the property because I really want the client code to just foreach over it and not do anything else. When AutoMapper creates the object for me with `mapper.Map<Destination>(src)` it works already, but sometimes I have an instance that I need to map into and this is where I'm getting hung up. \r\n\r\nThere is also the bit of weirdness there in that changing the default \"implementation\" value of the property IMHO shouldn't break the mapping at runtime.\r\n\r\nIn essence, I'm proposing to extend the fallback that is already present to cover all possible cases that `EnumerableMapper` says it can handle – because it checks for enumerability of the target, not whether the target implements `ICollection<T>`.\r\n\r\nTo @lbargaoanu's point: I'd really like the POCO to be null-safe even if I haven't mapped into it yet… And at the end of the day, it's also nice to be able to be consistent when declaring classes, whether they get used manually, mapped with AutoMapper or something else entirely.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/comments/754009392/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"wagich","id":1444168,"node_id":"MDQ6VXNlcjE0NDQxNjg=","avatar_url":"https://avatars.githubusercontent.com/u/1444168?v=4","gravatar_id":"","url":"https://api.github.com/users/wagich","html_url":"https://github.com/wagich","followers_url":"https://api.github.com/users/wagich/followers","following_url":"https://api.github.com/users/wagich/following{/other_user}","gists_url":"https://api.github.com/users/wagich/gists{/gist_id}","starred_url":"https://api.github.com/users/wagich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wagich/subscriptions","organizations_url":"https://api.github.com/users/wagich/orgs","repos_url":"https://api.github.com/users/wagich/repos","events_url":"https://api.github.com/users/wagich/events{/privacy}","received_events_url":"https://api.github.com/users/wagich/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":4165231625,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDE2NTIzMTYyNQ==","url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/events/4165231625","actor":{"login":"jbogard","id":104498,"node_id":"MDQ6VXNlcjEwNDQ5OA==","avatar_url":"https://avatars.githubusercontent.com/u/104498?v=4","gravatar_id":"","url":"https://api.github.com/users/jbogard","html_url":"https://github.com/jbogard","followers_url":"https://api.github.com/users/jbogard/followers","following_url":"https://api.github.com/users/jbogard/following{/other_user}","gists_url":"https://api.github.com/users/jbogard/gists{/gist_id}","starred_url":"https://api.github.com/users/jbogard/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jbogard/subscriptions","organizations_url":"https://api.github.com/users/jbogard/orgs","repos_url":"https://api.github.com/users/jbogard/repos","events_url":"https://api.github.com/users/jbogard/events{/privacy}","received_events_url":"https://api.github.com/users/jbogard/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-01-04T14:33:31Z","performed_via_github_app":null},{"id":4165231629,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQxNjUyMzE2Mjk=","url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/events/4165231629","actor":{"login":"jbogard","id":104498,"node_id":"MDQ6VXNlcjEwNDQ5OA==","avatar_url":"https://avatars.githubusercontent.com/u/104498?v=4","gravatar_id":"","url":"https://api.github.com/users/jbogard","html_url":"https://github.com/jbogard","followers_url":"https://api.github.com/users/jbogard/followers","following_url":"https://api.github.com/users/jbogard/following{/other_user}","gists_url":"https://api.github.com/users/jbogard/gists{/gist_id}","starred_url":"https://api.github.com/users/jbogard/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jbogard/subscriptions","organizations_url":"https://api.github.com/users/jbogard/orgs","repos_url":"https://api.github.com/users/jbogard/repos","events_url":"https://api.github.com/users/jbogard/events{/privacy}","received_events_url":"https://api.github.com/users/jbogard/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-01-04T14:33:31Z","performed_via_github_app":null},{"id":4165285888,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDE2NTI4NTg4OA==","url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/events/4165285888","actor":{"login":"lbargaoanu","id":4517428,"node_id":"MDQ6VXNlcjQ1MTc0Mjg=","avatar_url":"https://avatars.githubusercontent.com/u/4517428?v=4","gravatar_id":"","url":"https://api.github.com/users/lbargaoanu","html_url":"https://github.com/lbargaoanu","followers_url":"https://api.github.com/users/lbargaoanu/followers","following_url":"https://api.github.com/users/lbargaoanu/following{/other_user}","gists_url":"https://api.github.com/users/lbargaoanu/gists{/gist_id}","starred_url":"https://api.github.com/users/lbargaoanu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lbargaoanu/subscriptions","organizations_url":"https://api.github.com/users/lbargaoanu/orgs","repos_url":"https://api.github.com/users/lbargaoanu/repos","events_url":"https://api.github.com/users/lbargaoanu/events{/privacy}","received_events_url":"https://api.github.com/users/lbargaoanu/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-01-04T14:45:36Z","performed_via_github_app":null},{"id":4165285890,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQxNjUyODU4OTA=","url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/events/4165285890","actor":{"login":"lbargaoanu","id":4517428,"node_id":"MDQ6VXNlcjQ1MTc0Mjg=","avatar_url":"https://avatars.githubusercontent.com/u/4517428?v=4","gravatar_id":"","url":"https://api.github.com/users/lbargaoanu","html_url":"https://github.com/lbargaoanu","followers_url":"https://api.github.com/users/lbargaoanu/followers","following_url":"https://api.github.com/users/lbargaoanu/following{/other_user}","gists_url":"https://api.github.com/users/lbargaoanu/gists{/gist_id}","starred_url":"https://api.github.com/users/lbargaoanu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lbargaoanu/subscriptions","organizations_url":"https://api.github.com/users/lbargaoanu/orgs","repos_url":"https://api.github.com/users/lbargaoanu/repos","events_url":"https://api.github.com/users/lbargaoanu/events{/privacy}","received_events_url":"https://api.github.com/users/lbargaoanu/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-01-04T14:45:36Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/comments/754019665","html_url":"https://github.com/LuckyPennySoftware/AutoMapper/issues/3550#issuecomment-754019665","issue_url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/3550","id":754019665,"node_id":"MDEyOklzc3VlQ29tbWVudDc1NDAxOTY2NQ==","user":{"login":"lbargaoanu","id":4517428,"node_id":"MDQ6VXNlcjQ1MTc0Mjg=","avatar_url":"https://avatars.githubusercontent.com/u/4517428?v=4","gravatar_id":"","url":"https://api.github.com/users/lbargaoanu","html_url":"https://github.com/lbargaoanu","followers_url":"https://api.github.com/users/lbargaoanu/followers","following_url":"https://api.github.com/users/lbargaoanu/following{/other_user}","gists_url":"https://api.github.com/users/lbargaoanu/gists{/gist_id}","starred_url":"https://api.github.com/users/lbargaoanu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lbargaoanu/subscriptions","organizations_url":"https://api.github.com/users/lbargaoanu/orgs","repos_url":"https://api.github.com/users/lbargaoanu/repos","events_url":"https://api.github.com/users/lbargaoanu/events{/privacy}","received_events_url":"https://api.github.com/users/lbargaoanu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-04T14:51:24Z","updated_at":"2021-01-04T14:51:24Z","body":"A better way forward in my view would be to never map _into_ `IEnumerable`. You'd have to set `UseDestinationValue`. Why bother at all with these runtime checks.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/comments/754019665/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"lbargaoanu","id":4517428,"node_id":"MDQ6VXNlcjQ1MTc0Mjg=","avatar_url":"https://avatars.githubusercontent.com/u/4517428?v=4","gravatar_id":"","url":"https://api.github.com/users/lbargaoanu","html_url":"https://github.com/lbargaoanu","followers_url":"https://api.github.com/users/lbargaoanu/followers","following_url":"https://api.github.com/users/lbargaoanu/following{/other_user}","gists_url":"https://api.github.com/users/lbargaoanu/gists{/gist_id}","starred_url":"https://api.github.com/users/lbargaoanu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lbargaoanu/subscriptions","organizations_url":"https://api.github.com/users/lbargaoanu/orgs","repos_url":"https://api.github.com/users/lbargaoanu/repos","events_url":"https://api.github.com/users/lbargaoanu/events{/privacy}","received_events_url":"https://api.github.com/users/lbargaoanu/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/comments/754023450","html_url":"https://github.com/LuckyPennySoftware/AutoMapper/issues/3550#issuecomment-754023450","issue_url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/3550","id":754023450,"node_id":"MDEyOklzc3VlQ29tbWVudDc1NDAyMzQ1MA==","user":{"login":"jbogard","id":104498,"node_id":"MDQ6VXNlcjEwNDQ5OA==","avatar_url":"https://avatars.githubusercontent.com/u/104498?v=4","gravatar_id":"","url":"https://api.github.com/users/jbogard","html_url":"https://github.com/jbogard","followers_url":"https://api.github.com/users/jbogard/followers","following_url":"https://api.github.com/users/jbogard/following{/other_user}","gists_url":"https://api.github.com/users/jbogard/gists{/gist_id}","starred_url":"https://api.github.com/users/jbogard/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jbogard/subscriptions","organizations_url":"https://api.github.com/users/jbogard/orgs","repos_url":"https://api.github.com/users/jbogard/repos","events_url":"https://api.github.com/users/jbogard/events{/privacy}","received_events_url":"https://api.github.com/users/jbogard/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-04T14:57:32Z","updated_at":"2021-01-04T14:57:32Z","body":"I like that better - stop making any assumptions about the value set. It's odd that the `IsMatch` type does not match the value checked in `MapExpression`.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/comments/754023450/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jbogard","id":104498,"node_id":"MDQ6VXNlcjEwNDQ5OA==","avatar_url":"https://avatars.githubusercontent.com/u/104498?v=4","gravatar_id":"","url":"https://api.github.com/users/jbogard","html_url":"https://github.com/jbogard","followers_url":"https://api.github.com/users/jbogard/followers","following_url":"https://api.github.com/users/jbogard/following{/other_user}","gists_url":"https://api.github.com/users/jbogard/gists{/gist_id}","starred_url":"https://api.github.com/users/jbogard/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jbogard/subscriptions","organizations_url":"https://api.github.com/users/jbogard/orgs","repos_url":"https://api.github.com/users/jbogard/repos","events_url":"https://api.github.com/users/jbogard/events{/privacy}","received_events_url":"https://api.github.com/users/jbogard/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/comments/754025647","html_url":"https://github.com/LuckyPennySoftware/AutoMapper/issues/3550#issuecomment-754025647","issue_url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/3550","id":754025647,"node_id":"MDEyOklzc3VlQ29tbWVudDc1NDAyNTY0Nw==","user":{"login":"lbargaoanu","id":4517428,"node_id":"MDQ6VXNlcjQ1MTc0Mjg=","avatar_url":"https://avatars.githubusercontent.com/u/4517428?v=4","gravatar_id":"","url":"https://api.github.com/users/lbargaoanu","html_url":"https://github.com/lbargaoanu","followers_url":"https://api.github.com/users/lbargaoanu/followers","following_url":"https://api.github.com/users/lbargaoanu/following{/other_user}","gists_url":"https://api.github.com/users/lbargaoanu/gists{/gist_id}","starred_url":"https://api.github.com/users/lbargaoanu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lbargaoanu/subscriptions","organizations_url":"https://api.github.com/users/lbargaoanu/orgs","repos_url":"https://api.github.com/users/lbargaoanu/repos","events_url":"https://api.github.com/users/lbargaoanu/events{/privacy}","received_events_url":"https://api.github.com/users/lbargaoanu/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-04T15:01:07Z","updated_at":"2021-01-04T15:01:35Z","body":"I'll look into it. A PR on master at this time is not terribly useful.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/comments/754025647/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"lbargaoanu","id":4517428,"node_id":"MDQ6VXNlcjQ1MTc0Mjg=","avatar_url":"https://avatars.githubusercontent.com/u/4517428?v=4","gravatar_id":"","url":"https://api.github.com/users/lbargaoanu","html_url":"https://github.com/lbargaoanu","followers_url":"https://api.github.com/users/lbargaoanu/followers","following_url":"https://api.github.com/users/lbargaoanu/following{/other_user}","gists_url":"https://api.github.com/users/lbargaoanu/gists{/gist_id}","starred_url":"https://api.github.com/users/lbargaoanu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lbargaoanu/subscriptions","organizations_url":"https://api.github.com/users/lbargaoanu/orgs","repos_url":"https://api.github.com/users/lbargaoanu/repos","events_url":"https://api.github.com/users/lbargaoanu/events{/privacy}","received_events_url":"https://api.github.com/users/lbargaoanu/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/comments/754027433","html_url":"https://github.com/LuckyPennySoftware/AutoMapper/issues/3550#issuecomment-754027433","issue_url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/3550","id":754027433,"node_id":"MDEyOklzc3VlQ29tbWVudDc1NDAyNzQzMw==","user":{"login":"wagich","id":1444168,"node_id":"MDQ6VXNlcjE0NDQxNjg=","avatar_url":"https://avatars.githubusercontent.com/u/1444168?v=4","gravatar_id":"","url":"https://api.github.com/users/wagich","html_url":"https://github.com/wagich","followers_url":"https://api.github.com/users/wagich/followers","following_url":"https://api.github.com/users/wagich/following{/other_user}","gists_url":"https://api.github.com/users/wagich/gists{/gist_id}","starred_url":"https://api.github.com/users/wagich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wagich/subscriptions","organizations_url":"https://api.github.com/users/wagich/orgs","repos_url":"https://api.github.com/users/wagich/repos","events_url":"https://api.github.com/users/wagich/events{/privacy}","received_events_url":"https://api.github.com/users/wagich/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-04T15:03:45Z","updated_at":"2021-01-04T15:05:33Z","body":"Not mapping at all seems to me to be a bit excessive and not that user-friendly – but it certainly would clear up the situation :)\r\nAnd it would be clear in advance that the mapping won't work.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/comments/754027433/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"wagich","id":1444168,"node_id":"MDQ6VXNlcjE0NDQxNjg=","avatar_url":"https://avatars.githubusercontent.com/u/1444168?v=4","gravatar_id":"","url":"https://api.github.com/users/wagich","html_url":"https://github.com/wagich","followers_url":"https://api.github.com/users/wagich/followers","following_url":"https://api.github.com/users/wagich/following{/other_user}","gists_url":"https://api.github.com/users/wagich/gists{/gist_id}","starred_url":"https://api.github.com/users/wagich/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wagich/subscriptions","organizations_url":"https://api.github.com/users/wagich/orgs","repos_url":"https://api.github.com/users/wagich/repos","events_url":"https://api.github.com/users/wagich/events{/privacy}","received_events_url":"https://api.github.com/users/wagich/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/comments/754038235","html_url":"https://github.com/LuckyPennySoftware/AutoMapper/issues/3550#issuecomment-754038235","issue_url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/3550","id":754038235,"node_id":"MDEyOklzc3VlQ29tbWVudDc1NDAzODIzNQ==","user":{"login":"jbogard","id":104498,"node_id":"MDQ6VXNlcjEwNDQ5OA==","avatar_url":"https://avatars.githubusercontent.com/u/104498?v=4","gravatar_id":"","url":"https://api.github.com/users/jbogard","html_url":"https://github.com/jbogard","followers_url":"https://api.github.com/users/jbogard/followers","following_url":"https://api.github.com/users/jbogard/following{/other_user}","gists_url":"https://api.github.com/users/jbogard/gists{/gist_id}","starred_url":"https://api.github.com/users/jbogard/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jbogard/subscriptions","organizations_url":"https://api.github.com/users/jbogard/orgs","repos_url":"https://api.github.com/users/jbogard/repos","events_url":"https://api.github.com/users/jbogard/events{/privacy}","received_events_url":"https://api.github.com/users/jbogard/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-04T15:22:48Z","updated_at":"2021-01-04T15:22:48Z","body":" @wagich mapping *into* `IEnumerable` means we stop making an assumption about what you initialized the field to. We only map to a new collection. In your case, we would always replace the `IEnumerable`.\r\n\r\nThe proposed change has the potential problem of breaking folks that exposed say `IEnumerable` but had `List<T>` as the initialized value and expected us to be able to use the field value. But I'm OK with that.\r\n\r\nOne other thing to consider is `IEnumerable` is not that useful by itself - you can iterate over it but to do anything else you pull in LINQ. Why not `ReadOnlyList` etc","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/comments/754038235/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jbogard","id":104498,"node_id":"MDQ6VXNlcjEwNDQ5OA==","avatar_url":"https://avatars.githubusercontent.com/u/104498?v=4","gravatar_id":"","url":"https://api.github.com/users/jbogard","html_url":"https://github.com/jbogard","followers_url":"https://api.github.com/users/jbogard/followers","following_url":"https://api.github.com/users/jbogard/following{/other_user}","gists_url":"https://api.github.com/users/jbogard/gists{/gist_id}","starred_url":"https://api.github.com/users/jbogard/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jbogard/subscriptions","organizations_url":"https://api.github.com/users/jbogard/orgs","repos_url":"https://api.github.com/users/jbogard/repos","events_url":"https://api.github.com/users/jbogard/events{/privacy}","received_events_url":"https://api.github.com/users/jbogard/received_events","type":"User","user_view_type":"public","site_admin":false}}]