{"url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/1865","repository_url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper","labels_url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/1865/labels{/name}","comments_url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/1865/comments","events_url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/1865/events","html_url":"https://github.com/LuckyPennySoftware/AutoMapper/issues/1865","id":197140502,"node_id":"MDU6SXNzdWUxOTcxNDA1MDI=","number":1865,"title":"Mapping nullable does not use nullable map when called with a non-null value","user":{"login":"lemvigh","id":4123075,"node_id":"MDQ6VXNlcjQxMjMwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/4123075?v=4","gravatar_id":"","url":"https://api.github.com/users/lemvigh","html_url":"https://github.com/lemvigh","followers_url":"https://api.github.com/users/lemvigh/followers","following_url":"https://api.github.com/users/lemvigh/following{/other_user}","gists_url":"https://api.github.com/users/lemvigh/gists{/gist_id}","starred_url":"https://api.github.com/users/lemvigh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lemvigh/subscriptions","organizations_url":"https://api.github.com/users/lemvigh/orgs","repos_url":"https://api.github.com/users/lemvigh/repos","events_url":"https://api.github.com/users/lemvigh/events{/privacy}","received_events_url":"https://api.github.com/users/lemvigh/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":92629393,"node_id":"MDU6TGFiZWw5MjYyOTM5Mw==","url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/labels/Improvement","name":"Improvement","color":"207de5","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/milestones/25","html_url":"https://github.com/LuckyPennySoftware/AutoMapper/milestone/25","labels_url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/milestones/25/labels","id":2156205,"node_id":"MDk6TWlsZXN0b25lMjE1NjIwNQ==","number":25,"title":"6.0.0","description":"","creator":{"login":"jbogard","id":104498,"node_id":"MDQ6VXNlcjEwNDQ5OA==","avatar_url":"https://avatars.githubusercontent.com/u/104498?v=4","gravatar_id":"","url":"https://api.github.com/users/jbogard","html_url":"https://github.com/jbogard","followers_url":"https://api.github.com/users/jbogard/followers","following_url":"https://api.github.com/users/jbogard/following{/other_user}","gists_url":"https://api.github.com/users/jbogard/gists{/gist_id}","starred_url":"https://api.github.com/users/jbogard/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jbogard/subscriptions","organizations_url":"https://api.github.com/users/jbogard/orgs","repos_url":"https://api.github.com/users/jbogard/repos","events_url":"https://api.github.com/users/jbogard/events{/privacy}","received_events_url":"https://api.github.com/users/jbogard/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":62,"state":"closed","created_at":"2016-11-24T15:09:28Z","updated_at":"2017-03-27T17:21:03Z","due_on":null,"closed_at":"2017-03-27T17:21:03Z"},"comments":11,"created_at":"2016-12-22T10:17:37Z","updated_at":"2019-05-07T03:09:33Z","closed_at":"2016-12-28T17:07:50Z","author_association":"NONE","type":null,"active_lock_reason":"resolved","sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Hi,\r\n\r\nAfter upgrading to 5.2.0 I am having issues with mapping nullables: A map configured for a nullable type does not seem to be used if map is called with a non-null value, even if the nullable type is explicitly stated in the map method. We have several cases where we have a nullable enum mapped to a regular enum with special handling of the null and some transformation of other values. For these all non-null values are mapped using the standard mapping. The below simplified example shows it also fails for nullable ints. This issue seems to have been introduced between 5.1.1 and 5.2.0. Is this change of behavior intentional, and will I have to split my mapping into two?\r\n\r\n```C#\r\n[TestClass]\r\npublic class NullableMappingTests\r\n{\r\n\tpublic enum GreekLetters\r\n\t{\r\n\t\tAlpha = 11,\r\n\t\tBeta = 12,\r\n\t\tGamma = 13\r\n\t}\r\n\r\n\t[TestMethod]\r\n\tpublic void Convert_using_is_not_called_when_mapping_nullable_ints()\r\n\t{\r\n\t\tvar mapper = new MapperConfiguration(cfg => cfg\r\n\t\t\t\t.CreateMap<int?, GreekLetters>()\r\n\t\t\t\t.ConvertUsing(n => n == null ? GreekLetters.Beta : GreekLetters.Gamma))\r\n\t\t\t.CreateMapper();\r\n\r\n\t\tAssert.AreEqual(GreekLetters.Beta, mapper.Map<int?, GreekLetters>(null), \"This passes\");\r\n\t\tAssert.AreEqual(GreekLetters.Gamma, mapper.Map<int?, GreekLetters>(42), \"This Fails\");\r\n\t}\r\n}\r\n```","closed_by":{"login":"jbogard","id":104498,"node_id":"MDQ6VXNlcjEwNDQ5OA==","avatar_url":"https://avatars.githubusercontent.com/u/104498?v=4","gravatar_id":"","url":"https://api.github.com/users/jbogard","html_url":"https://github.com/jbogard","followers_url":"https://api.github.com/users/jbogard/followers","following_url":"https://api.github.com/users/jbogard/following{/other_user}","gists_url":"https://api.github.com/users/jbogard/gists{/gist_id}","starred_url":"https://api.github.com/users/jbogard/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jbogard/subscriptions","organizations_url":"https://api.github.com/users/jbogard/orgs","repos_url":"https://api.github.com/users/jbogard/repos","events_url":"https://api.github.com/users/jbogard/events{/privacy}","received_events_url":"https://api.github.com/users/jbogard/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/1865/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/1865/timeline","performed_via_github_app":null,"state_reason":"completed"}