{"url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/153","repository_url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper","labels_url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/153/labels{/name}","comments_url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/153/comments","events_url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/153/events","html_url":"https://github.com/LuckyPennySoftware/AutoMapper/issues/153","id":2371456,"node_id":"MDU6SXNzdWUyMzcxNDU2","number":153,"title":"Mapping 2 abstract derived types fails","user":{"login":"ChrisCphDk","id":1226006,"node_id":"MDQ6VXNlcjEyMjYwMDY=","avatar_url":"https://avatars.githubusercontent.com/u/1226006?v=4","gravatar_id":"","url":"https://api.github.com/users/ChrisCphDk","html_url":"https://github.com/ChrisCphDk","followers_url":"https://api.github.com/users/ChrisCphDk/followers","following_url":"https://api.github.com/users/ChrisCphDk/following{/other_user}","gists_url":"https://api.github.com/users/ChrisCphDk/gists{/gist_id}","starred_url":"https://api.github.com/users/ChrisCphDk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ChrisCphDk/subscriptions","organizations_url":"https://api.github.com/users/ChrisCphDk/orgs","repos_url":"https://api.github.com/users/ChrisCphDk/repos","events_url":"https://api.github.com/users/ChrisCphDk/events{/privacy}","received_events_url":"https://api.github.com/users/ChrisCphDk/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2011-11-28T18:13:51Z","updated_at":"2019-05-08T19:06:47Z","closed_at":"2012-09-22T03:23:50Z","author_association":"NONE","type":null,"active_lock_reason":"resolved","sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Not sure if this is the wrong way to map, but when having two different classes, where one derives from an abstract class, and the other derives from the previous, then the first mapping seems to go ok, while the other seems to throw an exception.\n\nBelow is a test-sample:\n\n```\n    [Test]\n    public void Example()\n    {\n        Mapper.Initialize(cfg =>\n        {\n            cfg.CreateMap<ContainsASrc, ContainsADest>();\n\n            cfg.CreateMap<ASrc, ADest>()\n                .Include<BSrc, BDest>()\n                .Include<CSrc, CDest>();\n\n            cfg.CreateMap<BSrc, BDest>()\n                .Include<CSrc, CDest>();\n\n            cfg.CreateMap<CSrc, CDest>();\n        });\n\n        var expectedCSrc = new CSrc() { StringA = \"A\", StringB = \"B\", StringC = \"C\" };\n        var expectedBSrc = new BSrc() { StringA = \"A\", StringB = \"B\" };\n\n        var expectedContCSrc = new ContainsASrc() { A = expectedCSrc };\n        var expectedContBSrc = new ContainsASrc() { A = expectedBSrc };\n\n        var actualContCDest = Mapper.Map<ContainsASrc, ContainsADest>(expectedContCSrc);\n        var actualContBDest = Mapper.Map<ContainsASrc, ContainsADest>(expectedContBSrc);    // THROWS\n\n        Mapper.AssertConfigurationIsValid();\n        Assert.IsNotNull(actualContBDest);\n        Assert.IsNotNull(actualContCDest);\n    }\n\n    public class ContainsASrc\n    {\n        public ASrc A { get; set; }\n    }\n\n    public abstract class ASrc\n    {\n        public string StringA { get; set; }\n    }\n\n    public class BSrc : ASrc\n    {\n        public string StringB { get; set; }\n    }\n\n    public class CSrc : BSrc\n    {\n        public string StringC { get; set; }\n    }\n\n    public class ContainsADest\n    {\n        public ADest A { get; set; }\n    }\n\n    public abstract class ADest\n    {\n        public string StringA { get; set; }\n    }\n\n    public class BDest : ADest\n    {\n        public string StringB { get; set; }\n    }\n\n    public class CDest : BDest\n    {\n        public string StringC { get; set; }\n    }\n}\n```\n\nException details:\nAutoMapper.AutoMapperMappingException : Trying to map \nTests.Unittests.TestAbstractExample+ContainsASrc to \nTests.Unittests.TestAbstractExample+ContainsADest.\nUsing mapping configuration for Tests.Unittests.TestAbstractExample+ContainsASrc to Tests.Unittests.TestAbstractExample+ContainsADest\nException of type 'AutoMapper.AutoMapperMappingException' was thrown.\n  ----> AutoMapper.AutoMapperMappingException : Trying to map \nTests.Unittests.TestAbstractExample+CSrc to \nTests.Unittests.TestAbstractExample+CDest.\nUsing mapping configuration for Tests.Unittests.TestAbstractExample+CSrc to Tests.Unittests.TestAbstractExample+CDest\nDestination property: A\nException of type 'AutoMapper.AutoMapperMappingException' was thrown.\n  ----> AutoMapper.AutoMapperMappingException : Trying to map \nTests.Unittests.TestAbstractExample+CSrc to \nTests.Unittests.TestAbstractExample+CDest.\nUsing mapping configuration for Tests.Unittests.TestAbstractExample+CSrc to Tests.Unittests.TestAbstractExample+CDest\nDestination property: A\nException of type 'AutoMapper.AutoMapperMappingException' was thrown.\n  ----> AutoMapper.AutoMapperMappingException : Trying to map \nTests.Unittests.TestAbstractExample+BSrc to System.String.\nUsing mapping configuration for Tests.Unittests.TestAbstractExample+CSrc to Tests.Unittests.TestAbstractExample+CDest\nDestination property: StringC\nException of type 'AutoMapper.AutoMapperMappingException' was thrown.\n  ----> System.InvalidCastException : Unable to cast object of type 'BSrc' to type 'CSrc'.\n","closed_by":{"login":"jbogard","id":104498,"node_id":"MDQ6VXNlcjEwNDQ5OA==","avatar_url":"https://avatars.githubusercontent.com/u/104498?v=4","gravatar_id":"","url":"https://api.github.com/users/jbogard","html_url":"https://github.com/jbogard","followers_url":"https://api.github.com/users/jbogard/followers","following_url":"https://api.github.com/users/jbogard/following{/other_user}","gists_url":"https://api.github.com/users/jbogard/gists{/gist_id}","starred_url":"https://api.github.com/users/jbogard/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jbogard/subscriptions","organizations_url":"https://api.github.com/users/jbogard/orgs","repos_url":"https://api.github.com/users/jbogard/repos","events_url":"https://api.github.com/users/jbogard/events{/privacy}","received_events_url":"https://api.github.com/users/jbogard/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/153/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/153/timeline","performed_via_github_app":null,"state_reason":"completed"}