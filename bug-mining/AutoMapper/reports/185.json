{"url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/2894","repository_url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper","labels_url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/2894/labels{/name}","comments_url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/2894/comments","events_url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/2894/events","html_url":"https://github.com/LuckyPennySoftware/AutoMapper/issues/2894","id":383544748,"node_id":"MDU6SXNzdWUzODM1NDQ3NDg=","number":2894,"title":"NullReferenceException","user":{"login":"ShawnTheBeachy","id":9746255,"node_id":"MDQ6VXNlcjk3NDYyNTU=","avatar_url":"https://avatars.githubusercontent.com/u/9746255?v=4","gravatar_id":"","url":"https://api.github.com/users/ShawnTheBeachy","html_url":"https://github.com/ShawnTheBeachy","followers_url":"https://api.github.com/users/ShawnTheBeachy/followers","following_url":"https://api.github.com/users/ShawnTheBeachy/following{/other_user}","gists_url":"https://api.github.com/users/ShawnTheBeachy/gists{/gist_id}","starred_url":"https://api.github.com/users/ShawnTheBeachy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ShawnTheBeachy/subscriptions","organizations_url":"https://api.github.com/users/ShawnTheBeachy/orgs","repos_url":"https://api.github.com/users/ShawnTheBeachy/repos","events_url":"https://api.github.com/users/ShawnTheBeachy/events{/privacy}","received_events_url":"https://api.github.com/users/ShawnTheBeachy/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2018-11-22T13:51:34Z","updated_at":"2019-05-05T21:30:11Z","closed_at":"2018-11-23T14:23:21Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":"resolved","sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"I just upgraded to AutoMapper 8.0, and now all I can get out of it is:\r\n```\r\nNullReferenceException: Object reference not set to an instance of an object.\r\nAutoMapper.PathMap.get_SourceType() in PathMap.cs, line 24\r\n```\r\n\r\nHere is the full stack trace:\r\n```\r\nAutoMapper.PathMap.get_SourceType() in PathMap.cs\r\nAutoMapper.Execution.TypeMapPlanBuilder.<CheckForCycles>g__ResolveMemberTypeMap|17_4(IMemberMap memberMap) in TypeMapPlanBuilder.cs\r\nAutoMapper.Execution.TypeMapPlanBuilder.<CheckForCycles>b__17_1(IMemberMap pm) in TypeMapPlanBuilder.cs\r\nSystem.Linq.Enumerable+WhereSelectEnumerableIterator<TSource, TResult>.MoveNext()\r\nSystem.Linq.Enumerable+WhereEnumerableIterator<TSource>.MoveNext()\r\nAutoMapper.Execution.TypeMapPlanBuilder.CheckForCycles(HashSet<TypeMap> typeMapsPath) in TypeMapPlanBuilder.cs\r\nAutoMapper.Execution.TypeMapPlanBuilder.CreateMapperLambda(HashSet<TypeMap> typeMapsPath) in TypeMapPlanBuilder.cs\r\nAutoMapper.TypeMap.Seal(IConfigurationProvider configurationProvider) in TypeMap.cs\r\nAutoMapper.MapperConfiguration.Seal() in MapperConfiguration.cs\r\nAutoMapper.MapperConfiguration..ctor(MapperConfigurationExpression configurationExpression) in MapperConfiguration.cs\r\nAutoMapper.ServiceCollectionExtensions+<>c__DisplayClass14_0.<AddAutoMapperClasses>b__5(IServiceProvider sp) in ServiceCollectionExtensions.cs\r\nMicrosoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitFactory(FactoryCallSite factoryCallSite, ServiceProviderEngineScope scope)\r\nMicrosoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor<TArgument, TResult>.VisitCallSite(IServiceCallSite callSite, TArgument argument)\r\nMicrosoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScoped(ScopedCallSite scopedCallSite, ServiceProviderEngineScope scope)\r\nMicrosoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitSingleton(SingletonCallSite singletonCallSite, ServiceProviderEngineScope scope)\r\nMicrosoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor<TArgument, TResult>.VisitCallSite(IServiceCallSite callSite, TArgument argument)\r\nMicrosoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine+<>c__DisplayClass1_0.<RealizeService>b__0(ServiceProviderEngineScope scope)\r\nMicrosoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngine.GetService(Type serviceType, ServiceProviderEngineScope serviceProviderEngineScope)\r\nMicrosoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)\r\nMicrosoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)\r\nMicrosoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService<T>(IServiceProvider provider)\r\nAutoMapper.ServiceCollectionExtensions+<>c.<AddAutoMapperClasses>b__14_6(IServiceProvider sp) in ServiceCollectionExtensions.cs\r\nMicrosoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitFactory(FactoryCallSite factoryCallSite, ServiceProviderEngineScope scope)\r\nMicrosoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor<TArgument, TResult>.VisitCallSite(IServiceCallSite callSite, TArgument argument)\r\nMicrosoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScoped(ScopedCallSite scopedCallSite, ServiceProviderEngineScope scope)\r\nMicrosoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor<TArgument, TResult>.VisitCallSite(IServiceCallSite callSite, TArgument argument)\r\nMicrosoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitConstructor(ConstructorCallSite constructorCallSite, ServiceProviderEngineScope scope)\r\nMicrosoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor<TArgument, TResult>.VisitCallSite(IServiceCallSite callSite, TArgument argument)\r\nMicrosoft.Extensions.DependencyInjection.ServiceLookup.CallSiteRuntimeResolver.VisitScoped(ScopedCallSite scopedCallSite, ServiceProviderEngineScope scope)\r\nMicrosoft.Extensions.DependencyInjection.ServiceLookup.CallSiteVisitor<TArgument, TResult>.VisitCallSite(IServiceCallSite callSite, TArgument argument)\r\nMicrosoft.Extensions.DependencyInjection.ServiceLookup.DynamicServiceProviderEngine+<>c__DisplayClass1_0.<RealizeService>b__0(ServiceProviderEngineScope scope)\r\nMicrosoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngine.GetService(Type serviceType, ServiceProviderEngineScope serviceProviderEngineScope)\r\nMicrosoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)\r\nMicrosoft.Extensions.DependencyInjection.ActivatorUtilities.GetService(IServiceProvider sp, Type type, Type requiredBy, bool isDefaultParameterRequired)\r\nlambda_method(Closure , IServiceProvider , object[] )\r\nMicrosoft.AspNetCore.Mvc.RazorPages.Infrastructure.DefaultPageModelActivatorProvider+<>c__DisplayClass1_0.<CreateActivator>b__0(PageContext context)\r\nMicrosoft.AspNetCore.Mvc.RazorPages.Infrastructure.DefaultPageModelFactoryProvider+<>c__DisplayClass3_0.<CreateModelFactory>b__0(PageContext pageContext)\r\nMicrosoft.AspNetCore.Mvc.RazorPages.Internal.PageActionInvoker.CreateInstance()\r\nMicrosoft.AspNetCore.Mvc.RazorPages.Internal.PageActionInvoker.Next(ref State next, ref Scope scope, ref object state, ref bool isCompleted)\r\nMicrosoft.AspNetCore.Mvc.RazorPages.Internal.PageActionInvoker.InvokeInnerFilterAsync()\r\nMicrosoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeNextResourceFilter()\r\nMicrosoft.AspNetCore.Mvc.Internal.ResourceInvoker.Rethrow(ResourceExecutedContext context)\r\nMicrosoft.AspNetCore.Mvc.Internal.ResourceInvoker.Next(ref State next, ref Scope scope, ref object state, ref bool isCompleted)\r\nMicrosoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeFilterPipelineAsync()\r\nMicrosoft.AspNetCore.Mvc.Internal.ResourceInvoker.InvokeAsync()\r\nMicrosoft.AspNetCore.Builder.RouterMiddleware.Invoke(HttpContext httpContext)\r\nMicrosoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)\r\nMicrosoft.AspNetCore.ResponseCompression.ResponseCompressionMiddleware.Invoke(HttpContext context)\r\nMicrosoft.AspNetCore.StaticFiles.StaticFileMiddleware.Invoke(HttpContext context)\r\nMicrosoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddleware.Invoke(HttpContext context)\r\n```\r\n\r\nThis happens whenever I use DI to get an instance of `IMapper`. My code inside my constructor is never even hit; it throws the exception before it ever hits my code.\r\n\r\n\r\nJust to be sure, I tried deleting all of my mapping profiles and tried calling `services.AddAutoMapper();` without any configuration, to no avail. I've spent several hours on this now. It seems to definitely be an issue with AutoMapper, I think.","closed_by":{"login":"jbogard","id":104498,"node_id":"MDQ6VXNlcjEwNDQ5OA==","avatar_url":"https://avatars.githubusercontent.com/u/104498?v=4","gravatar_id":"","url":"https://api.github.com/users/jbogard","html_url":"https://github.com/jbogard","followers_url":"https://api.github.com/users/jbogard/followers","following_url":"https://api.github.com/users/jbogard/following{/other_user}","gists_url":"https://api.github.com/users/jbogard/gists{/gist_id}","starred_url":"https://api.github.com/users/jbogard/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jbogard/subscriptions","organizations_url":"https://api.github.com/users/jbogard/orgs","repos_url":"https://api.github.com/users/jbogard/repos","events_url":"https://api.github.com/users/jbogard/events{/privacy}","received_events_url":"https://api.github.com/users/jbogard/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/2894/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/2894/timeline","performed_via_github_app":null,"state_reason":"completed"}