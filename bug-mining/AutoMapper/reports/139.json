{"url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/1424","repository_url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper","labels_url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/1424/labels{/name}","comments_url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/1424/comments","events_url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/1424/events","html_url":"https://github.com/LuckyPennySoftware/AutoMapper/issues/1424","id":163362760,"node_id":"MDU6SXNzdWUxNjMzNjI3NjA=","number":1424,"title":"Automapper 5.0 - AutoMapperMappingException when mapping arrays to lists","user":{"login":"tpodolak","id":7378346,"node_id":"MDQ6VXNlcjczNzgzNDY=","avatar_url":"https://avatars.githubusercontent.com/u/7378346?v=4","gravatar_id":"","url":"https://api.github.com/users/tpodolak","html_url":"https://github.com/tpodolak","followers_url":"https://api.github.com/users/tpodolak/followers","following_url":"https://api.github.com/users/tpodolak/following{/other_user}","gists_url":"https://api.github.com/users/tpodolak/gists{/gist_id}","starred_url":"https://api.github.com/users/tpodolak/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tpodolak/subscriptions","organizations_url":"https://api.github.com/users/tpodolak/orgs","repos_url":"https://api.github.com/users/tpodolak/repos","events_url":"https://api.github.com/users/tpodolak/events{/privacy}","received_events_url":"https://api.github.com/users/tpodolak/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":8,"created_at":"2016-07-01T10:03:36Z","updated_at":"2019-05-07T11:15:55Z","closed_at":"2016-07-01T13:25:40Z","author_association":"NONE","type":null,"active_lock_reason":"resolved","sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"I have following classes\n\n```\npublic class FlightViewModel\n        {\n            public List<JourneyViewModel> Journeys { get; set; }\n        }\n        public class FlightModel\n        {\n            public Journey[] Journeys { get; set; }\n        }\n        public class Journey\n        {\n        }\n        public class JourneyViewModel\n        {\n        }\n```\n\nIn AutoMapper 4.2.1.0 I was able to map model with null array of `Journeys`\n\n```\nvar model = new FlightModel();\nvar result = mapper.Map<FlightModel, FlightViewModel>(model);\n```\n\nby using default configuration\n\n```\nconfiguration.CreateMissingTypeMaps = true;\nconfiguration.AllowNullCollections = true;\nconfiguration.AllowNullDestinationValues = true;\nconfiguration.CreateMap<FlightModel, FlightViewModel>();\nconfiguration.CreateMap<Journey, JourneyViewModel>();\n```\n\nafter switching to Automapper 5.0 the same code throws \n\n```\nAutoMapper.AutoMapperMappingException: Error mapping types.\n\nMapping types:\nFlightModel -> FlightViewModel\nConsoleApplication1.Program+FlightModel -> ConsoleApplication1.Program+FlightViewModel\n\nType Map configuration:\nFlightModel -> FlightViewModel\nConsoleApplication1.Program+FlightModel -> ConsoleApplication1.Program+FlightViewModel\n\nProperty:\nJourneys ---> System.ArgumentNullException: Value cannot be null.\nParameter name: source\n   at System.Linq.Enumerable.Cast[TResult](IEnumerable source)\n   at lambda_method(Closure , FlightModel , FlightViewModel , ResolutionContext )\n   --- End of inner exception stack trace ---\n   at lambda_method(Closure , FlightModel , FlightViewModel , ResolutionContext )\n   at AutoMapper.Mapper.AutoMapper.IMapper.Map[TSource,TDestination](TSource source)\n   at ConsoleApplication1.Program.Main(String[] args) in C:\\Users\\podolakt\\Documents\\Visual Studio 2015\\Projects\\ConsoleApplication1\\ConsoleApplication1\\Program.cs:line 23\n   at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)\n   at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)\n   at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()\n   at System.Threading.ThreadHelper.ThreadStart_Context(Object state)\n   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)\n   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)\n   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)\n   at System.Threading.ThreadHelper.ThreadStart()\n```\n\nIs there any global switch to restore old behaviour? I have quite significant amount of these kind of situations in my project so manually settings maps for every scenario is not an option\n","closed_by":{"login":"jbogard","id":104498,"node_id":"MDQ6VXNlcjEwNDQ5OA==","avatar_url":"https://avatars.githubusercontent.com/u/104498?v=4","gravatar_id":"","url":"https://api.github.com/users/jbogard","html_url":"https://github.com/jbogard","followers_url":"https://api.github.com/users/jbogard/followers","following_url":"https://api.github.com/users/jbogard/following{/other_user}","gists_url":"https://api.github.com/users/jbogard/gists{/gist_id}","starred_url":"https://api.github.com/users/jbogard/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jbogard/subscriptions","organizations_url":"https://api.github.com/users/jbogard/orgs","repos_url":"https://api.github.com/users/jbogard/repos","events_url":"https://api.github.com/users/jbogard/events{/privacy}","received_events_url":"https://api.github.com/users/jbogard/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/1424/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/1424/timeline","performed_via_github_app":null,"state_reason":"completed"}