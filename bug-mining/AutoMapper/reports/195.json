{"url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/3532","repository_url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper","labels_url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/3532/labels{/name}","comments_url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/3532/comments","events_url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/3532/events","html_url":"https://github.com/LuckyPennySoftware/AutoMapper/issues/3532","id":732981114,"node_id":"MDU6SXNzdWU3MzI5ODExMTQ=","number":3532,"title":"IncludeBase is ignored when ForAllOtherMembers are used","user":{"login":"dozer75","id":7486163,"node_id":"MDQ6VXNlcjc0ODYxNjM=","avatar_url":"https://avatars.githubusercontent.com/u/7486163?v=4","gravatar_id":"","url":"https://api.github.com/users/dozer75","html_url":"https://github.com/dozer75","followers_url":"https://api.github.com/users/dozer75/followers","following_url":"https://api.github.com/users/dozer75/following{/other_user}","gists_url":"https://api.github.com/users/dozer75/gists{/gist_id}","starred_url":"https://api.github.com/users/dozer75/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dozer75/subscriptions","organizations_url":"https://api.github.com/users/dozer75/orgs","repos_url":"https://api.github.com/users/dozer75/repos","events_url":"https://api.github.com/users/dozer75/events{/privacy}","received_events_url":"https://api.github.com/users/dozer75/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1375171138,"node_id":"MDU6TGFiZWwxMzc1MTcxMTM4","url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/labels/Question","name":"Question","color":"aaf4f7","default":false,"description":""}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/milestones/39","html_url":"https://github.com/LuckyPennySoftware/AutoMapper/milestone/39","labels_url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/milestones/39/labels","id":5908278,"node_id":"MDk6TWlsZXN0b25lNTkwODI3OA==","number":39,"title":"11.0.0","description":"","creator":{"login":"lbargaoanu","id":4517428,"node_id":"MDQ6VXNlcjQ1MTc0Mjg=","avatar_url":"https://avatars.githubusercontent.com/u/4517428?v=4","gravatar_id":"","url":"https://api.github.com/users/lbargaoanu","html_url":"https://github.com/lbargaoanu","followers_url":"https://api.github.com/users/lbargaoanu/followers","following_url":"https://api.github.com/users/lbargaoanu/following{/other_user}","gists_url":"https://api.github.com/users/lbargaoanu/gists{/gist_id}","starred_url":"https://api.github.com/users/lbargaoanu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lbargaoanu/subscriptions","organizations_url":"https://api.github.com/users/lbargaoanu/orgs","repos_url":"https://api.github.com/users/lbargaoanu/repos","events_url":"https://api.github.com/users/lbargaoanu/events{/privacy}","received_events_url":"https://api.github.com/users/lbargaoanu/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":17,"state":"closed","created_at":"2020-09-23T06:22:12Z","updated_at":"2022-01-07T16:53:59Z","due_on":null,"closed_at":"2022-01-07T16:53:59Z"},"comments":9,"created_at":"2020-10-30T08:29:32Z","updated_at":"2021-01-08T12:14:54Z","closed_at":"2020-10-30T09:14:35Z","author_association":"NONE","type":null,"active_lock_reason":"resolved","sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"<!-- \r\n\r\n   If you're new to AutoMapper, please ask a question on StackOverflow first and come back here if the people there consider it a bug.\r\n   If you've just upgraded to 10.0, please read the upgrade guide first (https://docs.automapper.org/en/latest/10.0-Upgrade-Guide.html).\r\n   Try the [MyGet](https://docs.automapper.org/en/latest/The-MyGet-build.html) build.\r\n   Try to provide [a minimal, complete, and verifiable example](https://stackoverflow.com/help/mcve), preferably a [gist](https://gist.github.com/lbargaoanu/9c7233441c3a3413cc2b9b9ebb5964a9) that we can execute and see fail. [Here](https://gist.github.com/lbargaoanu/0cbc531306223f7ffc5468becf2642d6) is an example for ProjectTo.\r\n   For feature requests, just clear out the below.\r\n-->\r\n\r\n`IncludeBase` and `ForAllOtherMembers` does not cooperate. When using `ForAllOtherMembers` the `IncludeBase` mappings are ignored.\r\n\r\n### Source/destination types\r\n\r\n```csharp\r\n// Source types\r\n    internal abstract class Base\r\n    {\r\n        public int Id { get; set; }\r\n\r\n        public DateTimeOffset Created { get; set; }\r\n\r\n        public DateTimeOffset Modified { get; set; }\r\n    }\r\n\r\n    internal class Person : Base\r\n    {\r\n        public string Name { get; set; }\r\n\r\n        public string IgnoredProperty { get; set; }\r\n    }\r\n\r\n// Destination types\r\n    public abstract class BaseDTO\r\n    {\r\n        public int Id { get; set; }\r\n\r\n        public DateTimeOffset Created { get; set; }\r\n\r\n        public DateTimeOffset Modified { get; set; }\r\n    }\r\n\r\n    public class PersonDTO : BaseDTO\r\n    {\r\n        public string Name { get; set; }\r\n\r\n        public string IgnoredProperty { get; set; }\r\n    }\r\n```\r\n\r\n### Mapping configuration\r\n\r\n```csharp\r\nvar config = new MapperConfiguration(cfg =>\r\n            {\r\n                cfg.CreateMap<Base, BaseDTO>()\r\n                   .ForMember(dest => dest.Id, opt => opt.MapFrom(src => src.Id))\r\n                   .ForMember(dest => dest.Created, opt => opt.MapFrom(src => src.Created))\r\n                   .ForMember(dest => dest.Modified, opt => opt.MapFrom(src => src.Modified));\r\n\r\n                cfg.CreateMap<Person, PersonDTO>()\r\n                   // Include base mappings\r\n                   .IncludeBase<Base, BaseDTO>()\r\n                   .ForMember(dest => dest.Name, opt => opt.MapFrom(src => src.Name))\r\n                   // Ignore all other properties\r\n                   .ForAllOtherMembers(opt => opt.Ignore()); // Removing this and it will work\r\n            });\r\n```\r\n\r\n### Version: 10.1.1\r\n<!-- \r\n    Include the major/minor version (4.2.1, 5.2.0, 6.0.2 etc) \r\n    If you're using ProjectTo, also specify the EF Core or EF6 version.\r\n--> \r\n\r\n### Expected behavior\r\n\r\nThe base mapping should be added with the `IncludeBase` even if `ForAllOtherMembers` is configured.\r\n\r\n### Actual behavior\r\n\r\nThe mappings provided with the `IncludeBase` should be mapped even when `ForAllOtherMembers` is configured.\r\n\r\n### Steps to reproduce\r\n\r\n```csharp\r\n            var p = new Person\r\n            {\r\n                Id = 1,\r\n                Created = DateTimeOffset.Now,\r\n                Modified = DateTimeOffset.Now,\r\n                Name = \"A Test Name\",\r\n                IgnoredProperty = \"This is the ignored property.\"\r\n            };\r\n\r\n            var result = mapper.Map<PersonDTO>(p);\r\n\r\n            // This is mapped\r\n            Assert.Equal(p.Name, result.Name);\r\n            \r\n            // Success because of ForAllOtherMembers option\r\n            Assert.Null(result.IgnoredProperty); \r\n            \r\n            // Everything below here fails, while it shouldn't since IncludeBase is used\r\n            Assert.Equal(p.Created, result.Created);\r\n            Assert.Equal(p.Modified, result.Modified);\r\n            Assert.Equal(p.Id, result.Id);\r\n```\r\n","closed_by":{"login":"lbargaoanu","id":4517428,"node_id":"MDQ6VXNlcjQ1MTc0Mjg=","avatar_url":"https://avatars.githubusercontent.com/u/4517428?v=4","gravatar_id":"","url":"https://api.github.com/users/lbargaoanu","html_url":"https://github.com/lbargaoanu","followers_url":"https://api.github.com/users/lbargaoanu/followers","following_url":"https://api.github.com/users/lbargaoanu/following{/other_user}","gists_url":"https://api.github.com/users/lbargaoanu/gists{/gist_id}","starred_url":"https://api.github.com/users/lbargaoanu/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lbargaoanu/subscriptions","organizations_url":"https://api.github.com/users/lbargaoanu/orgs","repos_url":"https://api.github.com/users/lbargaoanu/repos","events_url":"https://api.github.com/users/lbargaoanu/events{/privacy}","received_events_url":"https://api.github.com/users/lbargaoanu/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/3532/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/3532/timeline","performed_via_github_app":null,"state_reason":"completed"}