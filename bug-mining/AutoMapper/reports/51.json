{"url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/339","repository_url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper","labels_url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/339/labels{/name}","comments_url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/339/comments","events_url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/339/events","html_url":"https://github.com/LuckyPennySoftware/AutoMapper/issues/339","id":14625848,"node_id":"MDU6SXNzdWUxNDYyNTg0OA==","number":339,"title":"SetMappingOrder / Condition statement not evaluated on Included child objects","user":{"login":"robvangeloven","id":1044817,"node_id":"MDQ6VXNlcjEwNDQ4MTc=","avatar_url":"https://avatars.githubusercontent.com/u/1044817?v=4","gravatar_id":"","url":"https://api.github.com/users/robvangeloven","html_url":"https://github.com/robvangeloven","followers_url":"https://api.github.com/users/robvangeloven/followers","following_url":"https://api.github.com/users/robvangeloven/following{/other_user}","gists_url":"https://api.github.com/users/robvangeloven/gists{/gist_id}","starred_url":"https://api.github.com/users/robvangeloven/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/robvangeloven/subscriptions","organizations_url":"https://api.github.com/users/robvangeloven/orgs","repos_url":"https://api.github.com/users/robvangeloven/repos","events_url":"https://api.github.com/users/robvangeloven/events{/privacy}","received_events_url":"https://api.github.com/users/robvangeloven/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/milestones/6","html_url":"https://github.com/LuckyPennySoftware/AutoMapper/milestone/6","labels_url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/milestones/6/labels","id":378944,"node_id":"MDk6TWlsZXN0b25lMzc4OTQ0","number":6,"title":"3.1","description":null,"creator":{"login":"jbogard","id":104498,"node_id":"MDQ6VXNlcjEwNDQ5OA==","avatar_url":"https://avatars.githubusercontent.com/u/104498?v=4","gravatar_id":"","url":"https://api.github.com/users/jbogard","html_url":"https://github.com/jbogard","followers_url":"https://api.github.com/users/jbogard/followers","following_url":"https://api.github.com/users/jbogard/following{/other_user}","gists_url":"https://api.github.com/users/jbogard/gists{/gist_id}","starred_url":"https://api.github.com/users/jbogard/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jbogard/subscriptions","organizations_url":"https://api.github.com/users/jbogard/orgs","repos_url":"https://api.github.com/users/jbogard/repos","events_url":"https://api.github.com/users/jbogard/events{/privacy}","received_events_url":"https://api.github.com/users/jbogard/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":35,"state":"closed","created_at":"2013-07-15T22:46:13Z","updated_at":"2013-11-17T21:01:42Z","due_on":null,"closed_at":"2013-11-17T21:01:42Z"},"comments":3,"created_at":"2013-05-22T14:32:15Z","updated_at":"2019-05-07T19:04:59Z","closed_at":"2013-11-03T01:45:30Z","author_association":"NONE","type":null,"active_lock_reason":"resolved","sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"The SetMappingOrder statement and the Condition statement do not propagate to child objects as the code demonstrates below.\nThis makes it difficult to use the inheritance structure provided by AutoMapper as the mapping order has to be specified for each field in each child object (where needed of course)\n\n//SetMappingOrder demo\npublic class Source\n    {\n        public string ClientID\n        {\n            get;\n            set;\n        }\n\n```\n    public string Foo\n    {\n        get;\n        set;\n    }\n}\n\nclass Dest\n{\n    public Dest()\n    {\n    }\n\n    private string id;\n    public string ID\n    {\n        get\n        {\n            return id;\n        }\n        set\n        {\n            id = string.Concat(ID, value);\n        }\n    }\n\n    private string foo;\n    public string Foo\n    {\n        get\n        {\n            return foo;\n        }\n        set\n        {\n            foo = value;\n            ID = value;\n        }\n    }\n}\n\nclass ChildDest : Dest\n{\n    public string Bar\n    {\n        get;\n        set;\n    }\n}\n\nclass Program\n{\n    static void Main(string[] args)\n    {\n        Mapper.CreateMap<Source, Dest>()\n            .ForMember(dest => dest.ID, opt =>\n                {\n                    opt.Condition(src => !string.IsNullOrWhiteSpace(src.ClientID));\n                    opt.SetMappingOrder(-1000);\n                    opt.MapFrom(src => src.ClientID);\n                })\n            .Include<Source, ChildDest>();\n\n        Mapper.CreateMap<Source, ChildDest>()\n            .ForMember(dest => dest.Bar, opt => opt.Ignore());\n\n        var source = new Source()\n        {\n            ClientID = \"Test\",\n            Foo = \"Bar\"\n        };\n\n        var parentDest = Mapper.Map<Dest>(source);\n        var childDest = Mapper.Map<ChildDest>(source);\n\n        Debug.Assert(parentDest.ID == \"TestBar\");\n        Debug.Assert(childDest.ID == \"TestBar\");\n    }\n}\n```\n\n//Condition demo\nclass Source\n{\npublic string ClientID\n{\nget;\nset;\n}\n\n```\npublic string Foo\n{\n    get;\n    set;\n}\n```\n\n}\n\nclass Dest\n{\n    public Dest()\n    {\n        ID = \"12345\";\n    }\n\n```\npublic string ID\n{\n    get;\n    set;\n}\n\npublic string Foo\n{\n    get;\n    set;\n}\n```\n\n}\n\nclass ChildDest : Dest\n{\n    public string Bar\n    {\n        get;\n        set;\n    }\n}\n\nclass Program\n{\n    static void Main(string[] args)\n    {\n        Mapper.CreateMap<Source, Dest>()\n            .ForMember(dest => dest.ID, opt =>\n                {\n                    opt.Condition(src => !string.IsNullOrWhiteSpace(src.ClientID));\n                    opt.MapFrom(src => src.ClientID);\n                })\n            .Include<Source, ChildDest>();\n\n```\n    Mapper.CreateMap<Source, ChildDest>()\n        .ForMember(dest => dest.Bar, opt => opt.Ignore());\n\n    var source = new Source()\n    {\n        ClientID = \"\",\n        Foo = \"Bar\"\n    };\n\n    var parentDest = Mapper.Map<Dest>(source);\n    var childDest = Mapper.Map<ChildDest>(source);\n\n    Debug.Assert(parentDest.ID == \"12345\");\n    Debug.Assert(childDest.ID == \"12345\");\n}\n```\n\n}\n","closed_by":{"login":"jbogard","id":104498,"node_id":"MDQ6VXNlcjEwNDQ5OA==","avatar_url":"https://avatars.githubusercontent.com/u/104498?v=4","gravatar_id":"","url":"https://api.github.com/users/jbogard","html_url":"https://github.com/jbogard","followers_url":"https://api.github.com/users/jbogard/followers","following_url":"https://api.github.com/users/jbogard/following{/other_user}","gists_url":"https://api.github.com/users/jbogard/gists{/gist_id}","starred_url":"https://api.github.com/users/jbogard/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jbogard/subscriptions","organizations_url":"https://api.github.com/users/jbogard/orgs","repos_url":"https://api.github.com/users/jbogard/repos","events_url":"https://api.github.com/users/jbogard/events{/privacy}","received_events_url":"https://api.github.com/users/jbogard/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/339/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/339/timeline","performed_via_github_app":null,"state_reason":"completed"}