{"url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/213","repository_url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper","labels_url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/213/labels{/name}","comments_url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/213/comments","events_url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/213/events","html_url":"https://github.com/LuckyPennySoftware/AutoMapper/issues/213","id":4794814,"node_id":"MDU6SXNzdWU0Nzk0ODE0","number":213,"title":"Problem mapping collection of nullable value types","user":{"login":"AntisocialButterfly","id":1093492,"node_id":"MDQ6VXNlcjEwOTM0OTI=","avatar_url":"https://avatars.githubusercontent.com/u/1093492?v=4","gravatar_id":"","url":"https://api.github.com/users/AntisocialButterfly","html_url":"https://github.com/AntisocialButterfly","followers_url":"https://api.github.com/users/AntisocialButterfly/followers","following_url":"https://api.github.com/users/AntisocialButterfly/following{/other_user}","gists_url":"https://api.github.com/users/AntisocialButterfly/gists{/gist_id}","starred_url":"https://api.github.com/users/AntisocialButterfly/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AntisocialButterfly/subscriptions","organizations_url":"https://api.github.com/users/AntisocialButterfly/orgs","repos_url":"https://api.github.com/users/AntisocialButterfly/repos","events_url":"https://api.github.com/users/AntisocialButterfly/events{/privacy}","received_events_url":"https://api.github.com/users/AntisocialButterfly/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2012-05-29T13:21:12Z","updated_at":"2019-05-08T20:06:36Z","closed_at":"2012-07-15T21:26:01Z","author_association":"NONE","type":null,"active_lock_reason":"resolved","sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"I discovered this issue after upgrading to Automapper 2.1.267 from 1.1.0.118. In my web application user submits a collection of nullable Guids which are converted to entities using database look-ups. I have a map from Guid? to Entity type and everything worked fine in 1.1.0.118. However, in 2.1.267 Automapper for some reason tries to map Guid (non-nullable) to Entity even though I am converting an IEnumerable<Guid?> to IEnumerable<Entitiy>. \n\nIn the example below even though I have configured int? to Entity map the converter is never invoked. Automapper silently converts null in the source collection to 0 (the default value for int).\n\nIs there are reason for such behavior? I find this a lot less useful than being able to handle null values myself as in 1.1.0.118.\n\nHere is the sample code that replicates the problem:\n\n``` C#\nnamespace AutoMapperIssue\n{\n    using System;\n    using System.Collections.Generic;\n    using AutoMapper;\n\n    class Program\n    {\n        static void Main(string[] args)\n        {\n            Mapper.CreateMap<int?, Entity>()\n                    .ConvertUsing<NullableIntToEntityConverter>();\n\n            Mapper.CreateMap<int, Entity>()\n                    .ConvertUsing<IntToEntityConverter>();\n\n            var guids = new List<int?>()\n            { \n                1, \n                2, \n                null \n            };\n\n            var result = Mapper.Map<List<Entity>>(guids);\n\n            foreach (var entry in result)\n            {\n                Console.WriteLine(entry);\n            }\n        }\n    }\n\n    class IntToEntityConverter : TypeConverter<int, Entity>\n    {\n        protected override Entity ConvertCore(int source)\n        {\n            Console.WriteLine(\"Converting int {0} to Entity\", source);\n            return new Entity() { Id = source};\n        }\n    }\n\n    class NullableIntToEntityConverter : TypeConverter<int?, Entity>\n    {\n        protected override Entity ConvertCore(int? source)\n        {\n            Console.WriteLine(\"Converting int? {0} to Entity\", source);\n            if (source.HasValue)\n            {\n                return new Entity() { Id = source.Value };\n            }\n\n            return null;\n        }\n    }\n\n    class Entity \n    {\n        public int Id { get; set; }\n\n        public override string ToString()\n        {\n            return Id.ToString();\n        }\n    }\n}\n```\n","closed_by":{"login":"jbogard","id":104498,"node_id":"MDQ6VXNlcjEwNDQ5OA==","avatar_url":"https://avatars.githubusercontent.com/u/104498?v=4","gravatar_id":"","url":"https://api.github.com/users/jbogard","html_url":"https://github.com/jbogard","followers_url":"https://api.github.com/users/jbogard/followers","following_url":"https://api.github.com/users/jbogard/following{/other_user}","gists_url":"https://api.github.com/users/jbogard/gists{/gist_id}","starred_url":"https://api.github.com/users/jbogard/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jbogard/subscriptions","organizations_url":"https://api.github.com/users/jbogard/orgs","repos_url":"https://api.github.com/users/jbogard/repos","events_url":"https://api.github.com/users/jbogard/events{/privacy}","received_events_url":"https://api.github.com/users/jbogard/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/213/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/LuckyPennySoftware/AutoMapper/issues/213/timeline","performed_via_github_app":null,"state_reason":"completed"}