diff --git a/src/AutoMapper/AutoMapper.csproj b/src/AutoMapper/AutoMapper.csproj
index 209af917..32cd26fa 100644
--- a/src/AutoMapper/AutoMapper.csproj
+++ b/src/AutoMapper/AutoMapper.csproj
@@ -26,7 +26,6 @@
 
   <ItemGroup Condition=" '$(TargetFramework)' == 'net461' ">
     <Reference Include="Microsoft.CSharp" />
-    <PackageReference Include="System.ValueTuple" Version="4.5.0" />
   </ItemGroup>
 
   <ItemGroup>
diff --git a/src/AutoMapper/Execution/TypeMapPlanBuilder.cs b/src/AutoMapper/Execution/TypeMapPlanBuilder.cs
index 1cc7c8d1..686a086d 100644
--- a/src/AutoMapper/Execution/TypeMapPlanBuilder.cs
+++ b/src/AutoMapper/Execution/TypeMapPlanBuilder.cs
@@ -85,34 +85,34 @@ private void CheckForCycles(HashSet<TypeMap> typeMapsPath)
             typeMapsPath.Add(_typeMap);
             var members = 
                 _typeMap.MemberMaps.Where(pm=>pm.CanResolveValue)
-                .Select(pm=>(MemberTypeMap: ResolveMemberTypeMap(pm), MemberMap: pm))
+                .Select(pm=> new { MemberTypeMap = ResolveMemberTypeMap(pm), MemberMap = pm })
                 .Where(p => p.MemberTypeMap != null && !p.MemberTypeMap.PreserveReferences && p.MemberTypeMap.MapExpression == null);
-            foreach(var (memberTypeMap, memberMap) in members)
+            foreach(var item in members)
             {
                 if(!inlineWasChecked && typeMapsPath.Count % _configurationProvider.MaxExecutionPlanDepth == 0)
                 {
-                    memberMap.Inline = false;
-                    Debug.WriteLine($"Resetting Inline: {memberMap.DestinationName} in {_typeMap.SourceType} - {_typeMap.DestinationType}");
+                    item.MemberMap.Inline = false;
+                    Debug.WriteLine($"Resetting Inline: {item.MemberMap.DestinationName} in {_typeMap.SourceType} - {_typeMap.DestinationType}");
                 }
-                if(typeMapsPath.Contains(memberTypeMap))
+                if(typeMapsPath.Contains(item.MemberTypeMap))
                 {
-                    if(memberTypeMap.SourceType.IsValueType())
+                    if(item.MemberTypeMap.SourceType.IsValueType())
                     {
-                        if(memberTypeMap.MaxDepth == 0)
+                        if(item.MemberTypeMap.MaxDepth == 0)
                         {
-                            memberTypeMap.MaxDepth = 10;
+                            item.MemberTypeMap.MaxDepth = 10;
                         }
                         typeMapsPath.Remove(_typeMap);
                         return;
                     }
 
-                    SetPreserveReferences(memberTypeMap);
-                    foreach(var derivedTypeMap in memberTypeMap.IncludedDerivedTypes.Select(ResolveTypeMap))
+                    SetPreserveReferences(item.MemberTypeMap);
+                    foreach(var derivedTypeMap in item.MemberTypeMap.IncludedDerivedTypes.Select(ResolveTypeMap))
                     {
                         SetPreserveReferences(derivedTypeMap);
                     }
                 }
-                memberTypeMap.CreateMapperLambda(_configurationProvider, typeMapsPath);
+                item.MemberTypeMap.CreateMapperLambda(_configurationProvider, typeMapsPath);
             }
             typeMapsPath.Remove(_typeMap);
             return;
diff --git a/src/AutoMapper/MapperConfiguration.cs b/src/AutoMapper/MapperConfiguration.cs
index 02d27f7b..e320802b 100644
--- a/src/AutoMapper/MapperConfiguration.cs
+++ b/src/AutoMapper/MapperConfiguration.cs
@@ -449,14 +449,25 @@ private TypeMap FindClosedGenericTypeMapFor(TypePair initialTypes, TypePair type
                 {
                     return cachedMap;
                 }
-                (genericMap, profile, typePair) = (cachedMap.Profile.GetGenericMap(cachedMap.Types), cachedMap.Profile, cachedMap.Types.CloseGenericTypes(typePair));
-            }
+
+                genericMap = cachedMap.Profile.GetGenericMap(cachedMap.Types);
+                profile = cachedMap.Profile;
+                typePair = cachedMap.Types.CloseGenericTypes(typePair);
+            }
+            else if (userMap == null)
+            {
+                var item = Profiles
+                    .Select(p => new {GenericMap = p.GetGenericMap(typePair), Profile = p})
+                    .FirstOrDefault(p => p.GenericMap != null);
+                genericMap = item?.GenericMap;
+                profile = item?.Profile;
+            }
             else
-            {
-                (genericMap, profile) = userMap == null ?
-                    Profiles.Select(p => (GenericMap: p.GetGenericMap(typePair), p)).FirstOrDefault(p => p.GenericMap != null) :
-                    (userMap.Profile.GetGenericMap(typePair), userMap.Profile);
-            }
+            {
+                genericMap = userMap.Profile.GetGenericMap(typePair);
+                profile = userMap.Profile;
+            }
+
             if(genericMap == null)
             {
                 return null;
