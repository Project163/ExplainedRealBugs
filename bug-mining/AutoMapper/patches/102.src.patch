diff --git a/src/AutoMapper/QueryableExtensions/Impl/MemberResolverExpressionResultConverter.cs b/src/AutoMapper/QueryableExtensions/Impl/MemberResolverExpressionResultConverter.cs
index 9619ba8a..59b8bd67 100644
--- a/src/AutoMapper/QueryableExtensions/Impl/MemberResolverExpressionResultConverter.cs
+++ b/src/AutoMapper/QueryableExtensions/Impl/MemberResolverExpressionResultConverter.cs
@@ -40,7 +40,7 @@ public ParameterConversionVisitor(Expression newParameter, ParameterExpression o
             protected override Expression VisitParameter(ParameterExpression node)
             {
                 // replace all old param references with new ones
-                return node.Type == oldParameter.Type ? newParameter : node;
+                return node == oldParameter ? newParameter : node;
             }
 
             protected override Expression VisitMember(MemberExpression node)
diff --git a/src/UnitTests/Projection/ParameterizedQueriesTests.cs b/src/UnitTests/Projection/ParameterizedQueriesTests.cs
index 4807f6f2..54ab580a 100644
--- a/src/UnitTests/Projection/ParameterizedQueriesTests.cs
+++ b/src/UnitTests/Projection/ParameterizedQueriesTests.cs
@@ -4,7 +4,6 @@
     using System.Collections.Generic;
     using System.Linq;
     using System.Linq.Expressions;
-    using Bug.AssignableLists;
     using QueryableExtensions;
     using Should;
     using Xunit;
@@ -104,4 +103,58 @@ public void Should_not_cache_parameter_value()
             newDests[0].Value.ShouldEqual(20);
         }
     }
+
+    public class ParameterizedQueriesTests_with_filter : AutoMapperSpecBase
+    {
+        public class User
+        {
+            public int Id { get; set; }
+            public string Name { get; set; }
+            public DateTime? DateActivated { get; set; }
+        }
+
+        public class UserViewModel
+        {
+            public int Id { get; set; }
+            public string Name { get; set; }
+            public DateTime? DateActivated { get; set; }
+            public int position { get; set; }
+        }
+
+        public class DB
+        {
+            public DB()
+            {
+                Users = new List<User>()
+                {
+                    new User {DateActivated = new DateTime(2000, 1, 1), Id = 1, Name = "Joe Schmoe"},
+                    new User {DateActivated = new DateTime(2000, 2, 1), Id = 2, Name = "John Schmoe"},
+                    new User {DateActivated = new DateTime(2000, 3, 1), Id = 3, Name = "Jim Schmoe"},
+                }.AsQueryable();
+            }
+            public IQueryable<User> Users { get; }
+        }
+
+        protected override void Establish_context()
+        {
+            Mapper.Initialize(cfg =>
+            {
+                DB db = null;
+
+                cfg.CreateMap<User, UserViewModel>()
+                    .ForMember(a => a.position, opt => opt.MapFrom(src => db.Users.Count(u => u.DateActivated < src.DateActivated)));
+            });
+        }
+
+        [Fact]
+        public void Should_only_replace_outer_parameters()
+        {
+            var db = new DB();
+
+            var user = db.Users.Project().To<UserViewModel>(new { db }).FirstOrDefault(a => a.Id == 2);
+
+            user.position.ShouldEqual(1);
+        }
+
+    }
 }
\ No newline at end of file
