<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:37:20 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SLING-5494] Discovery InstancesDiff.retained() implementation not according to API doc</title>
                <link>https://issues.apache.org/jira/browse/SLING-5494</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;The InstancesDiff.retained(boolean retainFromNewCollection, boolean propertyChanged) does not seem to be implemented according to the API docs. The property &apos;propertyChanged&apos; is implemented the opposite way as in the API descriptions. Not sure whether implementation or API doc is right. &lt;/p&gt;

&lt;p&gt;As per API the propertyChanged=false is supposed to return only the instances where properties have changed, and propertyChanged=true where properties have not changed.&lt;/p&gt;

&lt;p&gt;Looking at the test case in &lt;span class=&quot;error&quot;&gt;&amp;#91;3&amp;#93;&lt;/span&gt;, which is passing, the implementation seems to behave the other way round. &lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Suspect implementation &lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt;&lt;/li&gt;
	&lt;li&gt;Test case &lt;span class=&quot;error&quot;&gt;&amp;#91;3&amp;#93;&lt;/span&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/apache/sling/blob/trunk/bundles/extensions/discovery/commons/src/main/java/org/apache/sling/discovery/commons/InstancesDiff.java#L214&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/trunk/bundles/extensions/discovery/commons/src/main/java/org/apache/sling/discovery/commons/InstancesDiff.java#L214&lt;/a&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/apache/sling/blob/7c4a53755aed1211c9af313a3973cd2543a7bbe0/bundles/extensions/discovery/commons/src/main/java/org/apache/sling/discovery/commons/InstancesDiff.java#L256&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/7c4a53755aed1211c9af313a3973cd2543a7bbe0/bundles/extensions/discovery/commons/src/main/java/org/apache/sling/discovery/commons/InstancesDiff.java#L256&lt;/a&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;3&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/apache/sling/blob/trunk/bundles/extensions/discovery/commons/src/test/java/org/apache/sling/discovery/commons/InstancesDiffTest.java#L161&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/blob/trunk/bundles/extensions/discovery/commons/src/test/java/org/apache/sling/discovery/commons/InstancesDiffTest.java#L161&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12937526">SLING-5494</key>
            <summary>Discovery InstancesDiff.retained() implementation not according to API doc</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="marett">Timothee Maret</assignee>
                                    <reporter username="pfaffm@adobe.com">Marc Pfaff</reporter>
                        <labels>
                    </labels>
                <created>Mon, 8 Feb 2016 15:12:57 +0000</created>
                <updated>Thu, 26 Sep 2019 12:41:04 +0000</updated>
                            <resolved>Mon, 8 Feb 2016 16:10:42 +0000</resolved>
                                    <version>Discovery Commons 1.0.4</version>
                                    <fixVersion>Discovery Commons 1.0.12</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15137052" author="pfaffm@adobe.com" created="Mon, 8 Feb 2016 15:13:40 +0000"  >&lt;p&gt;cc: &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=marett&quot; class=&quot;user-hover&quot; rel=&quot;marett&quot;&gt;marett&lt;/a&gt;, as discussed.&lt;/p&gt;</comment>
                            <comment id="15137063" author="marett" created="Mon, 8 Feb 2016 15:21:41 +0000"  >&lt;p&gt;The implementation does behave the opposite of what the API tells regarding the &lt;tt&gt;propertyChanged&lt;/tt&gt; parameter.&lt;br/&gt;
I suggest to change the API description in order to match the implementation because:&lt;/p&gt;

&lt;p&gt;1. The implementation semantic of the &lt;tt&gt;propertyChanged&lt;/tt&gt; is &quot;logical&quot; (if &lt;tt&gt;true&lt;/tt&gt; keep the properties that have changed)&lt;br/&gt;
2. Assuming there are existing users of the API, it is unlikely that the API behaviour has been relied upon rather than the implementation behaviour (the difference in behaviour is obvious).&lt;/p&gt;</comment>
                            <comment id="15137074" author="githubbot" created="Mon, 8 Feb 2016 15:27:33 +0000"  >&lt;p&gt;GitHub user tmaret opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/sling/pull/122&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/122&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5494&quot; title=&quot;Discovery InstancesDiff.retained() implementation not according to API doc&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5494&quot;&gt;&lt;del&gt;SLING-5494&lt;/del&gt;&lt;/a&gt; - Discovery InstancesDiff.retained() implementation not according to API doc&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/tmaret/sling&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/tmaret/sling&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5494&quot; title=&quot;Discovery InstancesDiff.retained() implementation not according to API doc&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5494&quot;&gt;&lt;del&gt;SLING-5494&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/sling/pull/122.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/122.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #122&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit e397aee4da4a63967b3e2e8e6abfd253c476787e&lt;br/&gt;
Author: tmaret &amp;lt;tmaret@adobe.com&amp;gt;&lt;br/&gt;
Date:   2016-02-08T15:25:58Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5494&quot; title=&quot;Discovery InstancesDiff.retained() implementation not according to API doc&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5494&quot;&gt;&lt;del&gt;SLING-5494&lt;/del&gt;&lt;/a&gt; - Discovery InstancesDiff.retained() implementation not according to API doc&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;Match the API with the implementation&lt;/li&gt;
&lt;/ul&gt;


&lt;hr /&gt;</comment>
                            <comment id="15137075" author="marett" created="Mon, 8 Feb 2016 15:27:57 +0000"  >&lt;p&gt;Opened PR at &lt;a href=&quot;https://github.com/apache/sling/pull/122&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/122&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15137079" author="marett" created="Mon, 8 Feb 2016 15:30:29 +0000"  >&lt;p&gt;Attaching svn compatible patch&lt;/p&gt;</comment>
                            <comment id="15137081" author="marett" created="Mon, 8 Feb 2016 15:31:23 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=stefanegli&quot; class=&quot;user-hover&quot; rel=&quot;stefanegli&quot;&gt;stefanegli&lt;/a&gt; could you review the patch ?&lt;/p&gt;</comment>
                            <comment id="15137092" author="githubbot" created="Mon, 8 Feb 2016 15:43:04 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/sling/pull/122&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling/pull/122&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15137093" author="egli" created="Mon, 8 Feb 2016 15:43:20 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=marett&quot; class=&quot;user-hover&quot; rel=&quot;marett&quot;&gt;marett&lt;/a&gt;, makes sense and looks good to me. I&apos;ve applied the diff in &lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1729191&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;rev 1729191&lt;/a&gt;. Can you pls double-check and close this ticket? thx.&lt;/p&gt;</comment>
                            <comment id="15137140" author="marett" created="Mon, 8 Feb 2016 16:06:54 +0000"  >&lt;p&gt;LGTM, thanks! I can&apos;t close the ticket though. Please go ahead.&lt;/p&gt;</comment>
                            <comment id="15137143" author="egli" created="Mon, 8 Feb 2016 16:11:21 +0000"  >&lt;p&gt;thx, marked resolved&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12786827" name="SLING-5494.diff" size="1411" author="marett" created="Mon, 8 Feb 2016 15:30:29 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 40 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2sk67:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>