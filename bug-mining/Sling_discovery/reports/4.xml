<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:37:19 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SLING-5267] TestOakSyncTokenService.testTwoNodesOneLeaving failed on jenkins, again</title>
                <link>https://issues.apache.org/jira/browse/SLING-5267</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;TestOakSyncTokenService.testTwoNodesOneLeaving failed on jenkins again, so &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-5225&quot; title=&quot;TestOakSyncTokenService.testTwoNodesOneLeaving failed on jenkins&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-5225&quot;&gt;&lt;del&gt;SLING-5225&lt;/del&gt;&lt;/a&gt; wasn&apos;t enough.&lt;br/&gt;
Details:&lt;br/&gt;
&lt;a href=&quot;https://builds.apache.org/job/sling-trunk-1.7/org.apache.sling$org.apache.sling.discovery.commons/2652/testReport/org.apache.sling.discovery.commons.providers.spi.base/TestOakSyncTokenService/testTwoNodesOneLeaving/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/sling-trunk-1.7/org.apache.sling$org.apache.sling.discovery.commons/2652/testReport/org.apache.sling.discovery.commons.providers.spi.base/TestOakSyncTokenService/testTwoNodesOneLeaving/&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Regression

org.apache.sling.discovery.commons.providers.spi.base.TestOakSyncTokenService.testTwoNodesOneLeaving

Error Message

expected:&amp;lt;0&amp;gt; but was:&amp;lt;1&amp;gt;

Stacktrace

java.lang.AssertionError: expected:&amp;lt;0&amp;gt; but was:&amp;lt;1&amp;gt;
	at org.junit.Assert.fail(Assert.java:74)
	at org.junit.Assert.failNotEquals(Assert.java:448)
	at org.junit.Assert.assertEquals(Assert.java:102)
	at org.junit.Assert.assertEquals(Assert.java:323)
	at org.junit.Assert.assertEquals(Assert.java:319)
	at org.apache.sling.discovery.commons.providers.spi.base.TestOakSyncTokenService.testTwoNodesOneLeaving(TestOakSyncTokenService.java:168)

Standard Output

04.11.2015 11:36:56.864 *INFO * [main] IndexUpdate: Found a &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; index node [reference]. Reindexing is requested
04.11.2015 11:36:56.864 *WARN * [main] IndexUpdate: Missing index provider of type [reference], requesting reindex on [/oak:index/reference]
04.11.2015 11:36:57.001 *INFO * [main] IdMapService: registerEventHandler: bundleContext is &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; - cannot register
04.11.2015 11:36:57.001 *INFO * [main] IdMapService: init: init failed: java.lang.Exception: No Descriptor value available
04.11.2015 11:36:57.001 *INFO * [main] IdMapService: backgroundCheck: spawning background-thread &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;IdMapService-initializer&apos;&lt;/span&gt;
04.11.2015 11:36:57.002 *INFO * [main] OakBacklogClusterSyncService: activate: activated with slingId=5575618b-440a-4370-a27c-3223017bc528
04.11.2015 11:36:57.002 *INFO * [main] ViewStateManagerImpl: handleNewViewNonDelayed: ClusterSyncService set - invoking...
04.11.2015 11:36:57.002 *INFO * [main] ViewStateManagerImpl: handleNewViewNonDelayed: invoking waitForAsyncEvents, then clusterSyncService (modCnt=3)
04.11.2015 11:36:57.002 *INFO * [Discovery-AsyncEventSender] AsyncEventSender: AsyncEventSender.run: started.
04.11.2015 11:36:57.002 *INFO * [Discovery-AsyncEventSender] ViewStateManagerImpl: handleNewViewNonDelayed/waitForAsyncEvents.run: done, now invoking consistencyService (modCnt=3)
04.11.2015 11:36:57.002 *INFO * [Discovery-AsyncEventSender] OakBacklogClusterSyncService: sync: doing wait-&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;-backlog part &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; view=DefaultTopologyView[current=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, num=2, instances=a905fe58-aa7e-4861-bc9e-3d742746b270[local=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;,leader=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;],5575618b-440a-4370-a27c-3223017bc528[local=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;,leader=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;]]
04.11.2015 11:36:57.003 *INFO * [Discovery-AsyncEventSender] OakBacklogClusterSyncService: waitWhileBacklog: could not initialize...
04.11.2015 11:36:57.003 *INFO * [main] IdMapService: registerEventHandler: bundleContext is &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; - cannot register
04.11.2015 11:36:57.005 *INFO * [Discovery-AsyncEventSender] OakBacklogClusterSyncService: backgroundCheck: spawning background-thread &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;OakBacklogClusterSyncService-backlog-waiting&apos;&lt;/span&gt;
04.11.2015 11:36:57.005 *INFO * [main] IdMapService: init: init failed: java.lang.Exception: No Descriptor value available
04.11.2015 11:36:57.005 *INFO * [main] IdMapService: backgroundCheck: spawning background-thread &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;IdMapService-initializer&apos;&lt;/span&gt;
04.11.2015 11:36:57.008 *INFO * [IdMapService-initializer] IdMapService: init: added the following mapping: slingId=5575618b-440a-4370-a27c-3223017bc528 to discovery-lite id=1
04.11.2015 11:36:57.010 *INFO * [main] OakBacklogClusterSyncService: activate: activated with slingId=a905fe58-aa7e-4861-bc9e-3d742746b270
04.11.2015 11:36:57.011 *INFO * [OakBacklogClusterSyncService-backlog-waiting] IdMapService: toSlingId: mapping &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; 1 to 5575618b-440a-4370-a27c-3223017bc528 was newly added.
04.11.2015 11:36:57.011 *INFO * [OakBacklogClusterSyncService-backlog-waiting] OakBacklogClusterSyncService: getBacklogStatus: no backlog (anymore)
04.11.2015 11:36:57.011 *INFO * [OakBacklogClusterSyncService-backlog-waiting] OakBacklogClusterSyncService: waitWhileBacklog: no backlog (anymore), done.
04.11.2015 11:36:57.014 *INFO * [OakBacklogClusterSyncService-backlog-waiting] ViewStateManagerImpl: consistencyService.callback.run: invoking doHandleConsistent.
04.11.2015 11:36:57.015 *INFO * [IdMapService-initializer] IdMapService: init: init failed: java.lang.Exception: No Descriptor value available
04.11.2015 11:36:57.015 *INFO * [OakBacklogClusterSyncService-backlog-waiting] ViewStateManagerImpl: enqueueForAll: sending topologyEvent TopologyEvent [type=TOPOLOGY_INIT, oldView=&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, newView=DefaultTopologyView[current=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;, num=2, instances=a905fe58-aa7e-4861-bc9e-3d742746b270[local=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;,leader=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;],5575618b-440a-4370-a27c-3223017bc528[local=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;,leader=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;]]], to all (1) listeners
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12910682">SLING-5267</key>
            <summary>TestOakSyncTokenService.testTwoNodesOneLeaving failed on jenkins, again</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="stefanegli">Stefan Egli</assignee>
                                    <reporter username="stefanegli">Stefan Egli</reporter>
                        <labels>
                    </labels>
                <created>Thu, 5 Nov 2015 11:00:05 +0000</created>
                <updated>Mon, 16 Nov 2015 15:00:13 +0000</updated>
                            <resolved>Thu, 5 Nov 2015 11:03:29 +0000</resolved>
                                    <version>Discovery Commons 1.0.2</version>
                                    <fixVersion>Discovery Commons 1.0.4</fixVersion>
                                    <component>Extensions</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14991522" author="egli" created="Thu, 5 Nov 2015 11:00:46 +0000"  >&lt;p&gt;the test actually had a bug: it was assuming 0 events to be received at a certain point - even though there was the possibility that an event (TOPOLOGY_INIT) was already sent then. &lt;/p&gt;</comment>
                            <comment id="14991526" author="egli" created="Thu, 5 Nov 2015 11:03:29 +0000"  >&lt;blockquote&gt;&lt;p&gt;fixed testTwoNodesOneLeaving by making wait times safer, asserting for background-runnable done-state, plus added more logging in case this one is still not perfectly stable on jenkins&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;in rev 1712742&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 2 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2nzwf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>