<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:24:13 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CODEC-99] Base64.encodeBase64String() shouldn&apos;t chunk</title>
                <link>https://issues.apache.org/jira/browse/CODEC-99</link>
                <project id="12310464" key="CODEC">Commons Codec</project>
                    <description>&lt;p&gt;Base64.encodeBase64String() shouldn&apos;t chunk.&lt;/p&gt;

&lt;p&gt;Change this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; encodeBase64String(&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] binaryData) {
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; StringUtils.newStringUtf8(encodeBase64(binaryData, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;));
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;To this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; encodeBase64String(&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] binaryData) {
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; StringUtils.newStringUtf8(encodeBase64(binaryData, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;));
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;



&lt;p&gt;This will fix the following tests ggregory added a few minutes ago:&lt;/p&gt;

&lt;p&gt;        //assertEquals(&quot;Zg==&quot;, Base64.encodeBase64String(StringUtils.getBytesUtf8(&quot;f&quot;)));&lt;br/&gt;
        //assertEquals(&quot;Zm8=&quot;, Base64.encodeBase64String(StringUtils.getBytesUtf8(&quot;fo&quot;)));&lt;br/&gt;
        //assertEquals(&quot;Zm9v&quot;, Base64.encodeBase64String(StringUtils.getBytesUtf8(&quot;foo&quot;)));&lt;br/&gt;
        //assertEquals(&quot;Zm9vYg==&quot;, Base64.encodeBase64String(StringUtils.getBytesUtf8(&quot;foob&quot;)));&lt;br/&gt;
        //assertEquals(&quot;Zm9vYmE=&quot;, Base64.encodeBase64String(StringUtils.getBytesUtf8(&quot;fooba&quot;)));&lt;br/&gt;
        //assertEquals(&quot;Zm9vYmFy&quot;, Base64.encodeBase64String(StringUtils.getBytesUtf8(&quot;foobar&quot;)));&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12460415">CODEC-99</key>
            <summary>Base64.encodeBase64String() shouldn&apos;t chunk</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="juliusdavies">Julius Davies</reporter>
                        <labels>
                    </labels>
                <created>Sat, 27 Mar 2010 04:29:15 +0000</created>
                <updated>Thu, 10 Nov 2011 18:10:02 +0000</updated>
                            <resolved>Sun, 23 Jan 2011 05:56:06 +0000</resolved>
                                    <version>1.4</version>
                                    <fixVersion>1.5</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12850472" author="juliusdavies" created="Sat, 27 Mar 2010 04:30:34 +0000"  >&lt;p&gt;One-line patch to fix this attached.&lt;/p&gt;</comment>
                            <comment id="12850473" author="juliusdavies" created="Sat, 27 Mar 2010 04:36:30 +0000"  >
&lt;p&gt;Changes to unit-tests also attached.  Notice that two old tests assume the old, erroneous behavior, and so those need to be adjusted, too:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;-        assertEquals(&lt;span class=&quot;code-quote&quot;&gt;&quot;byteToString &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; Hello World&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;SGVsbG8gV29ybGQ=\r\n&quot;&lt;/span&gt;, Base64.encodeBase64String(b1));
+        assertEquals(&lt;span class=&quot;code-quote&quot;&gt;&quot;byteToString &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; Hello World&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;SGVsbG8gV29ybGQ=&quot;&lt;/span&gt;, Base64.encodeBase64String(b1));


-        assertEquals(&lt;span class=&quot;code-quote&quot;&gt;&quot;byteToString &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; UUID&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;K/fMJwH+Q5e0nr7tWsxwkA==\r\n&quot;&lt;/span&gt;, Base64.encodeBase64String(b4));
+        assertEquals(&lt;span class=&quot;code-quote&quot;&gt;&quot;byteToString &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; UUID&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;K/fMJwH+Q5e0nr7tWsxwkA==&quot;&lt;/span&gt;, Base64.encodeBase64String(b4));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12850477" author="juliusdavies" created="Sat, 27 Mar 2010 05:17:30 +0000"  >&lt;p&gt;Some of the JUnit tests have a problem:&lt;/p&gt;

&lt;p&gt;&quot;Zm9v&quot; + Base64.CHUNK_SEPARATOR&lt;/p&gt;

&lt;p&gt;This results in:&lt;/p&gt;

&lt;p&gt;Zm9v[B@6bbc4459&lt;/p&gt;

&lt;p&gt;As opposed to:&lt;/p&gt;

&lt;p&gt;Zm9v\r\n&lt;/p&gt;



&lt;p&gt;codec-99-test-fixes.patch attached to fix this.&lt;/p&gt;

</comment>
                            <comment id="12850602" author="ggregory@seagullsw.com" created="Sat, 27 Mar 2010 23:11:14 +0000"  >&lt;p&gt;Applied patch  &lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12439949/codec-99-test-fixes.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/attachment/12439949/codec-99-test-fixes.patch&lt;/a&gt;&lt;br/&gt;
Thank you Julius.&lt;/p&gt;</comment>
                            <comment id="12850626" author="ggregory@seagullsw.com" created="Sun, 28 Mar 2010 03:46:29 +0000"  >&lt;p&gt;IMO, the issue is not chunk vs. not chunk but that the output should never encode and end in a CR LR, especially when there is no = at the end of the output&lt;/p&gt;</comment>
                            <comment id="12850694" author="juliusdavies" created="Sun, 28 Mar 2010 17:12:56 +0000"  >&lt;p&gt;To respond to Gary, here is behaviour of Base64.encodeBase64Chunked(b) through all versions of commons-codec:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; playground;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.commons.codec.binary.Base64;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Base64ChunkTest {

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] b = args[0].getBytes(&lt;span class=&quot;code-quote&quot;&gt;&quot;UTF-8&quot;&lt;/span&gt;);

        b = Base64.encodeBase64Chunked(b);

        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; s = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;(b, &lt;span class=&quot;code-quote&quot;&gt;&quot;UTF-8&quot;&lt;/span&gt;);
        s = s.replace(&lt;span class=&quot;code-quote&quot;&gt;&quot;\n&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;\\n&quot;&lt;/span&gt;).replace(&lt;span class=&quot;code-quote&quot;&gt;&quot;\r&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;\\r&quot;&lt;/span&gt;);
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(s);
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;$ java -cp build/classes:lib/commons-codec-1.1.jar playground.Base64ChunkTest Hello
SGVsbG8=\n

$ java -cp build/classes:lib/commons-codec-1.2.jar playground.Base64ChunkTest Hello
SGVsbG8=\n

$ java -cp build/classes:lib/commons-codec-1.3.jar playground.Base64ChunkTest Hello
SGVsbG8=\r\n

$ java -cp build/classes:lib/commons-codec-1.4.jar playground.Base64ChunkTest Hello
SGVsbG8=\r\n
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;Just to be clear, you want to change this now after 7 years (the files in the commons-codec-1.1.jar have &apos;2003-04-29&apos; timestamps)?&lt;/p&gt;

&lt;p&gt;ps.  I don&apos;t think &apos;=&apos; should be part of the equation, because valid data can encode and not have any &apos;=&apos; characters, for example the string &apos;123&apos;:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;$ java -cp build/classes:lib/commons-codec-1.4.jar playground.Base64ChunkTest 123
MTIz\r\n
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</comment>
                            <comment id="12924892" author="me" created="Tue, 26 Oct 2010 08:32:27 +0000"  >&lt;p&gt;When I do:&lt;/p&gt;

&lt;p&gt;Base64 encoder = new Base64(0); &lt;br/&gt;
encoder.encodeBase64String(binaryData);&lt;/p&gt;

&lt;p&gt;I would expect that the encoded string isn&apos;t chunked, I&apos;ve set the appropriate settings in the&lt;br/&gt;
constructor before. But the current encodeBase64String() &quot;overrides&quot; the settings I&apos;ve done.&lt;/p&gt;

&lt;p&gt;The methods encodeBase64String(..) and so on should respect the settings made in the constructor in my opinion.&lt;/p&gt;</comment>
                            <comment id="12924904" author="jochen@apache.org" created="Tue, 26 Oct 2010 09:19:39 +0000"  >&lt;p&gt;You possibly wouldn&apos;t, because you are encoding a small string, like a password. Others would, because they are encoding a very large string. Whatever the default, if you need to be sure, don&apos;t use the convenience methods. Period!&lt;/p&gt;

&lt;p&gt;The only reason for changing the default would be upwards compatibility. If we change it for other reasons, we loose upwards compatibility.&lt;/p&gt;</comment>
                            <comment id="12924940" author="me" created="Tue, 26 Oct 2010 11:44:49 +0000"  >&lt;p&gt;If I&apos;d like to encode a small string, I&apos;ll agree:&lt;/p&gt;

&lt;p&gt;new Base64().encodeToString(...)&lt;/p&gt;

&lt;p&gt;But it doesn&apos;t matter in this point if this is chunked or not. &lt;/p&gt;

&lt;p&gt;Other people which like to encode larger strings won&apos;t use new Base64(0) or new Base64(-1) when they wanted chunked&lt;br/&gt;
files. Otherwise they&apos;ve read the docs which mentioned the way to use unchunked. I think it wouldn&apos;t break upwards compatibility because there is no really use case where you&apos;ll instantiate an Base64 encoder with 0 or less than 0 when it should be chunked. In these case even the &quot;convenience methods&quot; should behaviour correctly. Or otherwise (to keep upwards compatibility) it should be explicitly mentioned in the apidocs. &lt;/p&gt;

&lt;p&gt;Currently it looks like buying a car, choosing red as the color and only if you&apos;re opening the right door the car became green. &lt;/p&gt;</comment>
                            <comment id="12985257" author="juliusdavies" created="Sun, 23 Jan 2011 05:56:06 +0000"  >&lt;p&gt;I applied &quot;codec-99.patch&quot; and &quot;codec-99-tests.patch&quot;.  Quick summary of consequences:&lt;/p&gt;

&lt;p&gt;1.  Another binary incompatibility with codec-1.4.jar is introduced with this.&lt;/p&gt;

&lt;p&gt;2.  But now the String static encode in 1.4 is more consistent with the pre-existing byte[] static encode methods from 1.3, 1.2, 1.1.&lt;/p&gt;</comment>
                            <comment id="12985424" author="ggregory@seagullsw.com" created="Sun, 23 Jan 2011 21:45:10 +0000"  >&lt;p&gt;The example in &lt;a href=&quot;https://issues.apache.org/jira/browse/CODEC-99?focusedCommentId=12924892&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#action_12924892&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/CODEC-99?focusedCommentId=12924892&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels%3Acomment-tabpanel#action_12924892&lt;/a&gt; does not make sense:&lt;/p&gt;

&lt;p&gt;Base64 encoder = new Base64(0);&lt;br/&gt;
encoder.encodeBase64String(binaryData);&lt;/p&gt;

&lt;p&gt;The method encodeBase64String is a static method so instance variables will NEVER apply!&lt;/p&gt;</comment>
                            <comment id="12985433" author="me" created="Sun, 23 Jan 2011 22:10:51 +0000"  >&lt;p&gt;Yes it&apos;s declared static but it CAN also be used as a normal non-static function. In that case it&apos;s not behaving correctly.&lt;/p&gt;

&lt;p&gt;By the way it&apos;s using class-level fields when following the calls (buffer).&lt;/p&gt;

&lt;p&gt;Why not using the static - constructor. There you&apos;ll can set the standard settings which leads to the results of the static-calls&lt;br/&gt;
When used as a normal function it can be modified using the standard constructors.&lt;/p&gt;</comment>
                            <comment id="12985437" author="ggregory@seagullsw.com" created="Sun, 23 Jan 2011 22:24:43 +0000"  >&lt;p&gt;WRT &quot;Yes it&apos;s declared static but it CAN also be used as a normal non-static function. In that case it&apos;s not behaving correctly.&quot;&lt;/p&gt;

&lt;p&gt;Are we talking about the same thing?&lt;/p&gt;

&lt;p&gt;A static method will never use values from an instance.&lt;/p&gt;

&lt;p&gt;Might you be confusing run-time behavior and compiler behavior when you say &quot;normal non-static function&quot;?&lt;/p&gt;

&lt;p&gt;In your example:&lt;/p&gt;

&lt;p&gt;Base64 encoder = new Base64(0);&lt;br/&gt;
encoder.encodeBase64String(binaryData);&lt;/p&gt;

&lt;p&gt;Is equivalent to (and should really be written in this style:&lt;/p&gt;

&lt;p&gt;Base64 encoder = new Base64(0);&lt;br/&gt;
Base64.encodeBase64String(binaryData);&lt;/p&gt;</comment>
                            <comment id="12986166" author="juliusdavies" created="Tue, 25 Jan 2011 01:27:15 +0000"  >&lt;p&gt;Oops, I forgot to update the Javadoc.  Thanks, Sebb, for pointing that out!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12469228" name="codec-99-javadoc.patch" size="1044" author="juliusdavies" created="Tue, 25 Jan 2011 01:27:15 +0000"/>
                            <attachment id="12439949" name="codec-99-test-fixes.patch" size="2035" author="juliusdavies" created="Sat, 27 Mar 2010 05:17:30 +0000"/>
                            <attachment id="12439948" name="codec-99-tests.patch" size="2870" author="juliusdavies" created="Sat, 27 Mar 2010 04:36:30 +0000"/>
                            <attachment id="12439947" name="codec-99.patch" size="566" author="juliusdavies" created="Sat, 27 Mar 2010 04:30:33 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>40246</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 43 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ep6n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>83842</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>