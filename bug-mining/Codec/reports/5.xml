<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:24:01 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CODEC-57] Metaphone.metaphone(String) returns an empty string when passed the word &quot;why&quot;.</title>
                <link>https://issues.apache.org/jira/browse/CODEC-57</link>
                <project id="12310464" key="CODEC">Commons Codec</project>
                    <description>&lt;p&gt;An empty string is returned from the Metaphone.metaphone(String) method when passed the value &quot;why&quot;. Variations on the value, such as &quot;wwwhy&quot; and &quot;wwhhhy&quot; also return empty strings.&lt;/p&gt;

&lt;p&gt;This appears to be an issue since other implementations of the metaphone algorithm, namely the PHP version, returns &quot;H&quot; when passed the value &quot;why&quot;.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Commons-codec built from source using jdk 1.4.2.&lt;br/&gt;
OS: Windows XP&lt;br/&gt;
Java Build: 1.4.2&lt;/p&gt;</environment>
        <key id="12381107">CODEC-57</key>
            <summary>Metaphone.metaphone(String) returns an empty string when passed the word &quot;why&quot;.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="awilmore">Adam Wilmore</reporter>
                        <labels>
                    </labels>
                <created>Wed, 24 Oct 2007 22:48:09 +0000</created>
                <updated>Sun, 27 Apr 2008 00:37:41 +0000</updated>
                            <resolved>Sun, 27 Apr 2008 00:25:49 +0000</resolved>
                                    <version>1.3</version>
                                    <fixVersion>1.4</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12537448" author="ggregory@seagullsw.com" created="Wed, 24 Oct 2007 23:04:20 +0000"  >&lt;p&gt;I have a unit test that confirms this (committed). I can see the &quot;H&quot; in &quot;WHY&quot; also here: &lt;a href=&quot;http://www.searchforancestors.com/utility/metaphone.php&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.searchforancestors.com/utility/metaphone.php&lt;/a&gt; (picked from Google search results)&lt;/p&gt;</comment>
                            <comment id="12560781" author="bayard" created="Sun, 20 Jan 2008 08:24:54 +0000"  >&lt;p&gt;Looking at the code; the first step it does is turn the WH into a W. &lt;/p&gt;

&lt;p&gt;Then later on, both W and Y are silent if they are not followed by a vowel.&lt;/p&gt;

&lt;p&gt;Playing with the link above, it looks like WH is turned into H there. A quick look at the source code to PHP shows that it is indeed converted to H. Another quick look, this time at text.rubyforge shows that the Ruby version converts to W as we do &lt;span class=&quot;error&quot;&gt;&amp;#91;though it claims to compare with the PHP version for differences&amp;#93;&lt;/span&gt;. &lt;/p&gt;

&lt;p&gt;Looking at DoubleMetaphone, it handles WH differently. If ^WH, then it&apos;ll append an A.&lt;/p&gt;

&lt;p&gt;Looking at the original BASIC code &lt;span class=&quot;error&quot;&gt;&amp;#91;as posted by aspell.sf.net&amp;#93;&lt;/span&gt;:&lt;/p&gt;

&lt;p&gt;IF TWO = &quot;WH&quot; THEN ENAME = &quot;W&quot;:ENAME&lt;span class=&quot;error&quot;&gt;&amp;#91;3,9999&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;So it looks like PHP are the one with the bigger bug - a surname of WHYE should be YE and not HE. Then it seems that Metaphone itself is weak in that (my opinion) it should consider &apos;Y&apos; a vowel when looking after &apos;W&apos; for a vowel. &lt;/p&gt;

&lt;p&gt;I&apos;m not sure what we should do though. The documentation at &lt;a href=&quot;http://text.rubyforge.org/svn/lib/text/metaphone.rb&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://text.rubyforge.org/svn/lib/text/metaphone.rb&lt;/a&gt; also indicates that there are other bugs in the original BASIC compared to the original discussion (anyone got that magazine article? &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; ). So this might just be a bug in the BASIC implementation rather than the original algorithm.&lt;/p&gt;</comment>
                            <comment id="12560782" author="bayard" created="Sun, 20 Jan 2008 08:32:26 +0000"  >&lt;p&gt;Incidentally, those other bugs are that &apos;CC&apos; should be considered as not allowed duplication and that MB-&amp;gt;M should only happen at the end of a word.  An unmentioned change is that they&apos;ve also made &apos;GG&apos; an allowed duplication. &lt;/p&gt;</comment>
                            <comment id="12565418" author="bayard" created="Mon, 4 Feb 2008 16:46:02 +0000"  >&lt;p&gt;Looks like we do the MB-&amp;gt;M &lt;a href=&quot;https://issues.apache.org/jira/browse/CODEC-17&quot; title=&quot;[codec] Metaphone B not handling ending MB correctly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CODEC-17&quot;&gt;&lt;del&gt;CODEC-17&lt;/del&gt;&lt;/a&gt;. &lt;/p&gt;</comment>
                            <comment id="12565653" author="bayard" created="Tue, 5 Feb 2008 05:58:43 +0000"  >&lt;p&gt;Also... can&apos;t help but think that there&apos;s sod all testing in MetaphoneTest. We need to add some test cases.&lt;/p&gt;</comment>
                            <comment id="12576512" author="bayard" created="Sat, 8 Mar 2008 08:08:00 +0000"  >&lt;p&gt;I think that unless we hear otherwise, we should not change the CC/GG bit. People&apos;s data needs to be likely to work, regardless of the better algorithm etc.&lt;/p&gt;

&lt;p&gt;With this specific bug though, having an empty string feels bad. Both the Ruby and Python implementations do WH-&amp;gt;W. I don&apos;t feel a huge urge to make it WH-&amp;gt;H just to match PHP. I&apos;m more tempted to do the WY-&amp;gt;Y. &lt;/p&gt;

&lt;p&gt;Any thoughts?&lt;/p&gt;</comment>
                            <comment id="12576839" author="ggregory@seagullsw.com" created="Mon, 10 Mar 2008 01:06:14 +0000"  >&lt;p&gt;If there any consensus on which is &quot;correct&quot;? WH-&amp;gt;W or WY-&amp;gt;Y? Matching Python and Ruby is besides the point IMO. If WH-&amp;gt;W is a bug then there is no sense replicating it &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12576842" author="bayard" created="Mon, 10 Mar 2008 01:28:40 +0000"  >&lt;p&gt;It&apos;s a bug in the algorithm.&lt;/p&gt;

&lt;p&gt;The problem with both fixes is in the other words they affect.&lt;/p&gt;

&lt;p&gt;So PHP makes WHY-&amp;gt;H and affects things like WHAT being HT and not WT.&lt;br/&gt;
My suggestion makes WHY-&amp;gt;Y, and changes WHYTE from T to WT. &lt;/p&gt;

&lt;p&gt;PHP change all &apos;WH&apos; from W to H. Mine only affects WH?Y and the result is to make the W more sticky. I think mine&apos;s going to affect a lot less words (so better for backwards compat) and also more correct as it creates better looking tokens, but I&apos;m hardly an expert at any of this.  It&apos;s entirely possible that an empty String is intended to be an acceptable Soundex. &lt;/p&gt;

&lt;p&gt;Or the best solution might be to, if the metaphone is an empty String; simply return the first character of the input. &lt;/p&gt;</comment>
                            <comment id="12592609" author="bayard" created="Sun, 27 Apr 2008 00:25:49 +0000"  >&lt;p&gt;I&apos;m marking this as WONTFIX.  I don&apos;t think we should change our Metaphone from adhering to the original algorithm to adhere to PHP&apos;s modified algorithm, which looks like it is based on the Perl Text-Metaphone-1.96 algorithm.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://search.cpan.org/~mschwern/Text-Metaphone-1.96/Metaphone.pm&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://search.cpan.org/~mschwern/Text-Metaphone-1.96/Metaphone.pm&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;That version states that it changes the algorithm; so either this change is from the Perl original, or added later to the PHP clone. Looking at the PHP source, it looks like there are other differences. At least the &apos;CC&apos;-&amp;gt;&apos;GG&apos; one i mentioned above, but looks like others too.&lt;/p&gt;

&lt;p&gt;To fix this, we would need to add a TextMetaphone class that ports the changes made in the Perl original; but I think licensing will hurt us there. I don&apos;t think we can take PHP or Perl code and put it in Apache licensed code. Implementing by reverse engineering seems like a very tiring task, I know I don&apos;t have the energy for it &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12592611" author="bayard" created="Sun, 27 Apr 2008 00:37:41 +0000"  >&lt;p&gt;Note - the Perl variant can run in original-mode.&lt;/p&gt;

&lt;p&gt;I&apos;ve added a note to the javadoc about this issue.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>40248</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 years, 30 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0shjj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164319</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>