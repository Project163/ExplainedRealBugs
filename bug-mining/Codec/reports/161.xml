<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:26:06 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CODEC-315] PhoneticEngine.encode throws StringArrayIndexOutOfBoundException and ArrayIndexOutOfBoundException</title>
                <link>https://issues.apache.org/jira/browse/CODEC-315</link>
                <project id="12310464" key="CODEC">Commons Codec</project>
                    <description>&lt;p&gt;The encode() method takes in a random String and processes it. In some of the cases, it could result in an ArrayIndexOutOfBoundException or StringIndexOutOfBoundException.&lt;/p&gt;

&lt;p&gt;If the preset NameType is SEPHARDIC. It will run the case branch in&#160;&lt;a href=&quot;https://github.com/apache/commons-codec/blob/master/src/main/java/org/apache/commons/codec/language/bm/PhoneticEngine.java#L410&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Line#410&lt;/a&gt;. If the provided string only contains the &quot;&apos;&quot; character, the split method call shown below will return an empty array because String.split(&quot;&apos;&quot;) is equal to String.split(&quot;&apos;&quot;, 0) and all trailing empty string in the result will be removed according to the&#160;&lt;a href=&quot;https://docs.oracle.com/javase/8/docs/api/java/lang/String.html#split-java.lang.String-int-&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;JDK documentation&lt;/a&gt;. This empty array makes the next line throw an ArrayIndexOutOfBondException.&lt;/p&gt;

&lt;p&gt;final String[] parts = aWord.split(&quot;&apos;&quot;);&lt;/p&gt;

&lt;p&gt;words2.add(parts&lt;span class=&quot;error&quot;&gt;&amp;#91;parts.length - 1&amp;#93;&lt;/span&gt;);&lt;/p&gt;

&lt;p&gt;A possible fix could add a -1 parameter should be added to the split method to ensure the return size of the split result is never 0.&lt;/p&gt;

&lt;p&gt;In later&#160;&lt;a href=&quot;https://github.com/apache/commons-codec/blob/master/src/main/java/org/apache/commons/codec/language/bm/PhoneticEngine.java#L415&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Line#415&lt;/a&gt;&#160;and&#160;&lt;a href=&quot;https://github.com/apache/commons-codec/blob/master/src/main/java/org/apache/commons/codec/language/bm/PhoneticEngine.java#L419&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Line#419&lt;/a&gt;, the logic removes all words equal to the name prefix of the chosen NameType. If words2 only contains a prefix, the removeAll method call could make words2 empty. This makes&#160;&lt;a href=&quot;https://github.com/apache/commons-codec/blob/master/src/main/java/org/apache/commons/codec/language/bm/PhoneticEngine.java#L437&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Line#437&lt;/a&gt;&#160;never run and keeps the StringBuilder object result empty. If the result is empty, the substring method throws and StringIndexOutOfBoundException.&lt;/p&gt;

&lt;p&gt;&#160;final StringBuilder result = new StringBuilder();&lt;/p&gt;

&lt;p&gt;&#160;words2.forEach(word &amp;gt; result.append(&quot;&quot;).append(encode(word)));&lt;/p&gt;

&lt;p&gt;&#160;// return the result without the leading &quot;-&quot;&lt;/p&gt;

&lt;p&gt;&#160;return result.substring(1);&lt;/p&gt;

&lt;p&gt;A possible fix could add a check to ensure word2 is not empty before processing it and doing the substring.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;We found this bug using fuzzing by way of OSS-Fuzz. It is reported at &lt;a href=&quot;https://bugs.chromium.org/p/oss-fuzz/issues/detail?id=64376&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://bugs.chromium.org/p/oss-fuzz/issues/detail?id=64376&lt;/a&gt; and &lt;a href=&quot;https://bugs.chromium.org/p/oss-fuzz/issues/detail?id=64395&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://bugs.chromium.org/p/oss-fuzz/issues/detail?id=64395&lt;/a&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13559245">CODEC-315</key>
            <summary>PhoneticEngine.encode throws StringArrayIndexOutOfBoundException and ArrayIndexOutOfBoundException</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="arthur.chan">Sheung Chi Chan</reporter>
                        <labels>
                            <label>ArrayIndexOutOfBoundsException</label>
                            <label>StringIndexOutOfBound</label>
                    </labels>
                <created>Thu, 23 Nov 2023 21:31:02 +0000</created>
                <updated>Sun, 4 Feb 2024 13:27:52 +0000</updated>
                            <resolved>Sun, 4 Feb 2024 13:27:51 +0000</resolved>
                                                    <fixVersion>1.16.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17814082" author="garydgregory" created="Sun, 4 Feb 2024 13:27:52 +0000"  >&lt;p&gt;PR merged.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12311024" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>External issue ID</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>64376 64395</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311020" key="com.atlassian.jira.plugin.system.customfieldtypes:url">
                        <customfieldname>External issue URL</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[https://bugs.chromium.org/p/oss-fuzz/issues/detail?id=64376]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12314421" key="com.atlassian.jira.plugin.system.customfieldtypes:labels">
                        <customfieldname>Language</customfieldname>
                        <customfieldvalues>
                                        <label>java</label>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 39 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1ltfs:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>