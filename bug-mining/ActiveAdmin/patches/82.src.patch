diff --git a/features/step_definitions/user_steps.rb b/features/step_definitions/user_steps.rb
index 548085ab..589e65a9 100644
--- a/features/step_definitions/user_steps.rb
+++ b/features/step_definitions/user_steps.rb
@@ -31,9 +31,11 @@ Given /^an admin user "([^"]*)" exists$/ do |email|
   ensure_user_created(email)
 end
 
-Given /^an admin user "([^"]*)" exists with( expired)? reset password token "(.*?)"$/ do |email, expired, token|
-  user = ensure_user_created(email)
-  user.reset_password_token   = token
-  user.reset_password_sent_at = 1.minute.ago unless expired
-  user.save
+Given /^"([^"]*)" requests a pasword reset with token "([^"]*)"( but it expires)?$/ do |email, token, expired|
+  visit new_admin_user_password_path
+  fill_in 'Email', with: email
+  Devise.stub(:friendly_token){ token }
+  click_button "Reset My Password"
+
+  AdminUser.where(email: email).first.update_attribute :reset_password_sent_at, 1.month.ago if expired
 end
diff --git a/features/support/env.rb b/features/support/env.rb
index 7e6be96c..bbd1bece 100644
--- a/features/support/env.rb
+++ b/features/support/env.rb
@@ -28,6 +28,8 @@ autoload :ActiveAdmin, 'active_admin'
 
 require 'cucumber/rails'
 
+require 'cucumber/rspec/doubles'
+
 require 'capybara/rails'
 require 'capybara/cucumber'
 require 'capybara/session'
diff --git a/features/support/paths.rb b/features/support/paths.rb
index 340f1cd8..1297b620 100644
--- a/features/support/paths.rb
+++ b/features/support/paths.rb
@@ -23,7 +23,7 @@ module NavigationHelpers
       "/admin/posts/1"
     when /the first post edit page/
       "/admin/posts/1/edit"
-    when /the admin password reset form with reset password token "([^"]*)"/
+    when /the admin password reset form with token "([^"]*)"/
       "/admin/password/edit?reset_password_token=#{$1}"
 
     # the index page for posts in the root namespace
diff --git a/features/users/resetting_password.feature b/features/users/resetting_password.feature
index 9935fc7b..e9432686 100644
--- a/features/users/resetting_password.feature
+++ b/features/users/resetting_password.feature
@@ -18,16 +18,16 @@ Feature: User Resetting Password
     Then I should see "You will receive an email with instructions about how to reset your password in a few minutes."
 
   Scenario: Changing password after resetting
-    Given an admin user "admin@example.com" exists with reset password token "123reset"
-    When I go to the admin password reset form with reset password token "123reset"
+    When "admin@example.com" requests a pasword reset with token "foobarbaz"
+    When I go to the admin password reset form with token "foobarbaz"
     And I fill in "Password" with "password"
     And I fill in "Password confirmation" with "password"
     And I press "Change my password"
     Then I should see "success"
 
   Scenario: Changing password after resetting with errors
-    Given an admin user "admin@example.com" exists with expired reset password token "123reset"
-    When I go to the admin password reset form with reset password token "123reset"
+    When "admin@example.com" requests a pasword reset with token "foobarbaz" but it expires
+    When I go to the admin password reset form with token "foobarbaz"
     And I fill in "Password" with "password"
     And I fill in "Password confirmation" with "wrong"
     And I press "Change my password"
diff --git a/spec/support/rails_template.rb b/spec/support/rails_template.rb
index 28e7b9fe..7584b714 100644
--- a/spec/support/rails_template.rb
+++ b/spec/support/rails_template.rb
@@ -104,8 +104,3 @@ namespace :parallel do
 end
 }
 
-# If using Devise after 3.1, this is required for the tests to pass:
-require 'devise/version'
-if Devise::VERSION.to_f >= 3.1
-  inject_into_file 'config/initializers/devise.rb', "\n  config.allow_insecure_token_lookup = true", after: 'Devise.setup do |config|'
-end
