{"url":"https://api.github.com/repos/FasterXML/jackson-dataformat-xml/issues/393","repository_url":"https://api.github.com/repos/FasterXML/jackson-dataformat-xml","labels_url":"https://api.github.com/repos/FasterXML/jackson-dataformat-xml/issues/393/labels{/name}","comments_url":"https://api.github.com/repos/FasterXML/jackson-dataformat-xml/issues/393/comments","events_url":"https://api.github.com/repos/FasterXML/jackson-dataformat-xml/issues/393/events","html_url":"https://github.com/FasterXML/jackson-dataformat-xml/issues/393","id":596694229,"node_id":"MDU6SXNzdWU1OTY2OTQyMjk=","number":393,"title":"`MismatchedInputException` for nested repeating element name in `List`","user":{"login":"kaizen-horse","id":20045386,"node_id":"MDQ6VXNlcjIwMDQ1Mzg2","avatar_url":"https://avatars.githubusercontent.com/u/20045386?v=4","gravatar_id":"","url":"https://api.github.com/users/kaizen-horse","html_url":"https://github.com/kaizen-horse","followers_url":"https://api.github.com/users/kaizen-horse/followers","following_url":"https://api.github.com/users/kaizen-horse/following{/other_user}","gists_url":"https://api.github.com/users/kaizen-horse/gists{/gist_id}","starred_url":"https://api.github.com/users/kaizen-horse/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaizen-horse/subscriptions","organizations_url":"https://api.github.com/users/kaizen-horse/orgs","repos_url":"https://api.github.com/users/kaizen-horse/repos","events_url":"https://api.github.com/users/kaizen-horse/events{/privacy}","received_events_url":"https://api.github.com/users/kaizen-horse/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/FasterXML/jackson-dataformat-xml/milestones/34","html_url":"https://github.com/FasterXML/jackson-dataformat-xml/milestone/34","labels_url":"https://api.github.com/repos/FasterXML/jackson-dataformat-xml/milestones/34/labels","id":5409081,"node_id":"MDk6TWlsZXN0b25lNTQwOTA4MQ==","number":34,"title":"2.11.1","description":null,"creator":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":8,"state":"open","created_at":"2020-05-12T04:09:53Z","updated_at":"2020-06-07T02:57:19Z","due_on":null,"closed_at":null},"comments":13,"created_at":"2020-04-08T16:09:42Z","updated_at":"2020-11-13T07:54:20Z","closed_at":"2020-05-12T04:24:56Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"I want to deserialize the string contents to Testclass.class on jackson 2.9.10\r\nbut I got a Exception: com.fasterxml.jackson.databind.exc.MismatchedInputException: Cannot deserialize instance of `java.lang.String` out of START_OBJECT token\r\n at [Source: (StringReader); line: 11, column: 7] (through reference chain: saas.mall.supplier.zowoyoo.TestClass[\"prices\"]->saas.mall.supplier.zowoyoo.TestClass$Prices[\"price\"]->java.util.ArrayList[0]->saas.mall.supplier.zowoyoo.TestClass$Price[\"price\"])\r\n\r\nThe Class that I want to deserialize contains a list of fields with the same name as the fields of the object in the list。\r\n\r\nHere is the test case\r\n\r\n```\r\n    @Test\r\n    public void testXml() throws IOException {\r\n        String content = \"<?xml version=\\\"1.0\\\" encoding=\\\"utf-8\\\"?>\\n\" +\r\n                \"\\n\" +\r\n                \"<result>\\n\" +\r\n                \"  <prices>\\n\" +\r\n                \"    <price>\\n\" +\r\n                \"      <num>100</num>\\n\" +\r\n                \"      <price>7.0</price>\\n\" +\r\n                \"    </price>\\n\" +\r\n                \"  </prices>\\n\" +\r\n                \"</result>\";\r\n        com.fasterxml.jackson.dataformat.xml.XmlMapper xmlMapper =\r\n                new com.fasterxml.jackson.dataformat.xml.XmlMapper();\r\n        TestClass testClass = xmlMapper.readValue(content, TestClass.class);\r\n        System.out.println(testClass);\r\n    }\r\n```\r\n\r\nthis is the Class I want to deserialize \r\n\r\n```\r\npackage test;\r\n\r\nimport com.fasterxml.jackson.annotation.JsonIgnoreProperties;\r\nimport com.fasterxml.jackson.annotation.JsonInclude;\r\nimport com.fasterxml.jackson.dataformat.xml.annotation.JacksonXmlElementWrapper;\r\nimport com.fasterxml.jackson.dataformat.xml.annotation.JacksonXmlProperty;\r\nimport com.fasterxml.jackson.dataformat.xml.annotation.JacksonXmlRootElement;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\n\r\n@JsonInclude(JsonInclude.Include.NON_NULL)\r\npublic class TestClass {\r\n    /**\r\n     *\r\n     */\r\n    private Prices prices = new Prices();\r\n\r\n    public void setPrices(Prices prices) {\r\n        this.prices = prices;\r\n    }\r\n\r\n    @JacksonXmlProperty(localName = \"prices\")\r\n    public Prices getPrices() {\r\n        return this.prices;\r\n    }\r\n\r\n    @JacksonXmlRootElement(localName = \"price\")\r\n    @JsonIgnoreProperties(ignoreUnknown = true)\r\n    public static class Price {\r\n        /**\r\n         * 0.01\r\n         */\r\n        private String price;\r\n\r\n        /**\r\n         * 469\r\n         */\r\n        private String num;\r\n\r\n        public void setPrice(String price) {\r\n            this.price = price;\r\n        }\r\n\r\n        @JacksonXmlProperty(localName = \"price\")\r\n        public String getPrice() {\r\n            return this.price;\r\n        }\r\n\r\n        public void setNum(String num) {\r\n            this.num = num;\r\n        }\r\n\r\n        @JacksonXmlProperty(localName = \"num\")\r\n        public String getNum() {\r\n            return this.num;\r\n        }\r\n    }\r\n\r\n    @JacksonXmlRootElement(localName = \"prices\")\r\n    @JsonIgnoreProperties(ignoreUnknown = true)\r\n    public static class Prices {\r\n        /**\r\n         *\r\n         */\r\n        private List<Price> price = new ArrayList<Price>();\r\n\r\n        public void setPrice(List<Price> price) {\r\n            this.price = price;\r\n        }\r\n\r\n        @JacksonXmlElementWrapper(useWrapping = false)\r\n        @JacksonXmlProperty(localName = \"price\")\r\n        public List<Price> getPrice() {\r\n            return this.price;\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nPS: if I change the TestClass.Price.price‘s field type from String to Map,it works.like follwing\r\n\r\n```\r\n    @JacksonXmlRootElement(localName = \"price\")\r\n    @JsonIgnoreProperties(ignoreUnknown = true)\r\n    public static class Price {\r\n        /**\r\n         * 0.01\r\n         */\r\n        private Map price;\r\n\r\n\r\n        /**\r\n         * 469\r\n         */\r\n        private String num;\r\n\r\n\r\n        public void setPrice(Map price) {\r\n            this.price = price;\r\n        }\r\n\r\n        @JacksonXmlProperty(localName=\"price\")\r\n        public Map getPrice(){\r\n            return this.price;\r\n        }\r\n\r\n        public void setNum(String num) {\r\n            this.num = num;\r\n        }\r\n\r\n        @JacksonXmlProperty(localName=\"num\")\r\n        public String getNum (){\r\n            return this.num;\r\n        }\r\n    }\r\n```\r\n\r\nbut when I use a string that contains more objects, \r\nI got a exception：\r\ncom.fasterxml.jackson.databind.exc.MismatchedInputException: Cannot construct instance of `java.util.LinkedHashMap` (although at least one Creator exists): no String-argument constructor/factory method to deserialize from String value ('4.0')\r\n at [Source: (StringReader); line: 11, column: 18] (through reference chain: test.TestClass[\"prices\"]->test.TestClass$Prices[\"price\"]->java.util.ArrayList[1]->test.TestClass$Price[\"price\"])\r\n\r\n```\r\n    @Test\r\n    public void testXml() throws IOException {\r\n        String content = \"<?xml version=\\\"1.0\\\" encoding=\\\"utf-8\\\"?>\\n\" + \"\\n\" +\r\n            \"<result>\\n\" + \" <prices>\\n\" + \" <price>\\n\" + \" <num>100</num>\\n\" +\r\n            \" <price>7.0</price>\\n\" + \" </price>\\n\" + \" <price>\\n\" +\r\n            \" <num>100</num>\\n\" + \" <price>4.0</price>\\n\" + \" </price>\" +\r\n            \" </prices>\\n\" + \"</result>\";\r\n        com.fasterxml.jackson.dataformat.xml.XmlMapper xmlMapper = new com.fasterxml.jackson.dataformat.xml.XmlMapper();\r\n        TestClass testClass = xmlMapper.readValue(content, TestClass.class);\r\n        System.out.println(testClass);\r\n    }\r\n```\r\n\r\nHope to provide a solution，TKS\r\n\r\n","closed_by":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-dataformat-xml/issues/393/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/FasterXML/jackson-dataformat-xml/issues/393/timeline","performed_via_github_app":null,"state_reason":"completed"}