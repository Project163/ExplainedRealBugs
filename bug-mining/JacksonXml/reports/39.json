{"url":"https://api.github.com/repos/FasterXML/jackson-dataformat-xml/issues/318","repository_url":"https://api.github.com/repos/FasterXML/jackson-dataformat-xml","labels_url":"https://api.github.com/repos/FasterXML/jackson-dataformat-xml/issues/318/labels{/name}","comments_url":"https://api.github.com/repos/FasterXML/jackson-dataformat-xml/issues/318/comments","events_url":"https://api.github.com/repos/FasterXML/jackson-dataformat-xml/issues/318/events","html_url":"https://github.com/FasterXML/jackson-dataformat-xml/issues/318","id":373909290,"node_id":"MDU6SXNzdWUzNzM5MDkyOTA=","number":318,"title":"XMLMapper fails to deserialize null (POJO reference) from blank tag","user":{"login":"joschi","id":43951,"node_id":"MDQ6VXNlcjQzOTUx","avatar_url":"https://avatars.githubusercontent.com/u/43951?v=4","gravatar_id":"","url":"https://api.github.com/users/joschi","html_url":"https://github.com/joschi","followers_url":"https://api.github.com/users/joschi/followers","following_url":"https://api.github.com/users/joschi/following{/other_user}","gists_url":"https://api.github.com/users/joschi/gists{/gist_id}","starred_url":"https://api.github.com/users/joschi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joschi/subscriptions","organizations_url":"https://api.github.com/users/joschi/orgs","repos_url":"https://api.github.com/users/joschi/repos","events_url":"https://api.github.com/users/joschi/events{/privacy}","received_events_url":"https://api.github.com/users/joschi/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/FasterXML/jackson-dataformat-xml/milestones/33","html_url":"https://github.com/FasterXML/jackson-dataformat-xml/milestone/33","labels_url":"https://api.github.com/repos/FasterXML/jackson-dataformat-xml/milestones/33/labels","id":5370091,"node_id":"MDk6TWlsZXN0b25lNTM3MDA5MQ==","number":33,"title":"2.12.0","description":null,"creator":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":24,"state":"open","created_at":"2020-05-01T05:23:41Z","updated_at":"2020-11-14T03:45:00Z","due_on":null,"closed_at":null},"comments":4,"created_at":"2018-10-25T11:52:42Z","updated_at":"2020-05-01T05:33:18Z","closed_at":"2020-05-01T05:33:18Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"I'm using `XmlMapper` to deserialize XML documents from some external sources and map them to predefined POJOs.\r\n\r\nWhen Jackson encounters a blank tag (not empty, but only whitespace characters), I would expect it to deserialize it into a null reference or an equivalent empty collection, depending on the configuration of the `XmlMapper`.\r\n\r\nUnfortunately, Jackson fails with a `MismatchedInputException`. Enabling `DeserializationFeature.ACCEPT_EMPTY_STRING_AS_NULL_OBJECT` on the `XmlMapper` doesn't help either.\r\n\r\nIs there a configuration flag which would make `XmlWrapper` interpret the blank tag as empty and deserialize it into `null`?\r\n\r\nJackson version: 2.9.7\r\n\r\nTest case for reproduction:\r\n```java\r\nimport com.fasterxml.jackson.databind.DeserializationFeature;\r\nimport com.fasterxml.jackson.databind.ObjectMapper;\r\nimport com.fasterxml.jackson.dataformat.xml.XmlMapper;\r\nimport com.fasterxml.jackson.dataformat.xml.annotation.JacksonXmlProperty;\r\nimport com.fasterxml.jackson.dataformat.xml.annotation.JacksonXmlText;\r\nimport org.junit.Assert;\r\nimport org.junit.Test;\r\n\r\nimport java.io.IOException;\r\n\r\npublic class DescriptionTest {\r\n    private final XmlMapper mapper = new XmlMapper();\r\n\r\n    @Test\r\n    public void emptyString() throws IOException {\r\n        String s = \"<wrapper>\"\r\n                + \"  <id>id</id>\"\r\n                + \"  <nested></nested>\"\r\n                + \"</wrapper>\";\r\n\r\n        Wrapper value = mapper.readValue(s, Wrapper.class);\r\n        Assert.assertEquals(\"id\", value.id);\r\n        Assert.assertNull(value.nested);\r\n    }\r\n\r\n    @Test\r\n    public void blankString() throws IOException {\r\n        String s = \"<wrapper>\"\r\n                + \"  <id>id</id>\"\r\n                + \"  <nested>    </nested>\"\r\n                + \"</wrapper>\";\r\n\r\n        // This fails with the following exception:\r\n        // com.fasterxml.jackson.databind.exc.MismatchedInputException:\r\n        // Cannot construct instance of `JacksonXMLTest$Nested` (although at least one Creator exists): no String-argument constructor/factory method to deserialize from String value ('    ')\r\n        Wrapper value = mapper.readValue(s, Wrapper.class);\r\n        Assert.assertEquals(\"id\", value.id);\r\n        Assert.assertNull(value.nested);\r\n    }\r\n\r\n    @Test\r\n    public void blankString2() throws IOException {\r\n        String s = \"<wrapper>\"\r\n                + \"  <id>id</id>\"\r\n                + \"  <nested>    </nested>\"\r\n                + \"</wrapper>\";\r\n\r\n        // This fails with the following exception:\r\n        // com.fasterxml.jackson.databind.exc.MismatchedInputException:\r\n        // Cannot construct instance of `JacksonXMLTest$Nested` (although at least one Creator exists): no String-argument constructor/factory method to deserialize from String value ('    ')\r\n        ObjectMapper mapperCopy = mapper.copy().enable(DeserializationFeature.ACCEPT_EMPTY_STRING_AS_NULL_OBJECT);\r\n        Wrapper value = mapperCopy.readValue(s, Wrapper.class);\r\n        Assert.assertEquals(\"id\", value.id);\r\n        Assert.assertNull(value.nested);\r\n    }\r\n\r\n    @Test\r\n    public void missing() throws IOException {\r\n        String s = \"<wrapper>\"\r\n                + \"  <id>id</id>\"\r\n                + \"</wrapper>\";\r\n\r\n        Wrapper value = mapper.readValue(s, Wrapper.class);\r\n        Assert.assertEquals(\"id\", value.id);\r\n        Assert.assertNull(value.nested);\r\n    }\r\n\r\n    @Test\r\n    public void validStructure() throws IOException {\r\n        String s = \"<wrapper>\"\r\n                + \"  <id>id</id>\"\r\n                + \"  <nested>\"\r\n                + \"    <nested2 attr=\\\"test\\\"><![CDATA[Some text]]></nested2>\"\r\n                + \"  </nested>\"\r\n                + \"</wrapper>\";\r\n\r\n        Wrapper value = mapper.readValue(s, Wrapper.class);\r\n        Assert.assertEquals(\"id\", value.id);\r\n        Assert.assertEquals(\"test\", value.nested.nested2.attr);\r\n        Assert.assertEquals(\"Some text\", value.nested.nested2.value);\r\n    }\r\n\r\n\r\n    static class Wrapper {\r\n        @JacksonXmlProperty(localName = \"id\")\r\n        String id;\r\n        @JacksonXmlProperty(localName = \"nested\")\r\n        Nested nested;\r\n    }\r\n\r\n    static class Nested {\r\n        @JacksonXmlProperty(localName = \"nested2\")\r\n        Nested2 nested2;\r\n    }\r\n\r\n    static class Nested2 {\r\n        @JacksonXmlProperty(localName = \"attr\", isAttribute = true)\r\n        String attr;\r\n        @JacksonXmlText\r\n        String value;\r\n    }\r\n}\r\n```","closed_by":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-dataformat-xml/issues/318/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/FasterXML/jackson-dataformat-xml/issues/318/timeline","performed_via_github_app":null,"state_reason":"completed"}