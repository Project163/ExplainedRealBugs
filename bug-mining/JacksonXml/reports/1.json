{"url":"https://api.github.com/repos/FasterXML/jackson-dataformat-xml/issues/47","repository_url":"https://api.github.com/repos/FasterXML/jackson-dataformat-xml","labels_url":"https://api.github.com/repos/FasterXML/jackson-dataformat-xml/issues/47/labels{/name}","comments_url":"https://api.github.com/repos/FasterXML/jackson-dataformat-xml/issues/47/comments","events_url":"https://api.github.com/repos/FasterXML/jackson-dataformat-xml/issues/47/events","html_url":"https://github.com/FasterXML/jackson-dataformat-xml/issues/47","id":8631631,"node_id":"MDU6SXNzdWU4NjMxNjMx","number":47,"title":"First attribute of list ignored","user":{"login":"dewthefifth","id":2879394,"node_id":"MDQ6VXNlcjI4NzkzOTQ=","avatar_url":"https://avatars.githubusercontent.com/u/2879394?v=4","gravatar_id":"","url":"https://api.github.com/users/dewthefifth","html_url":"https://github.com/dewthefifth","followers_url":"https://api.github.com/users/dewthefifth/followers","following_url":"https://api.github.com/users/dewthefifth/following{/other_user}","gists_url":"https://api.github.com/users/dewthefifth/gists{/gist_id}","starred_url":"https://api.github.com/users/dewthefifth/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dewthefifth/subscriptions","organizations_url":"https://api.github.com/users/dewthefifth/orgs","repos_url":"https://api.github.com/users/dewthefifth/repos","events_url":"https://api.github.com/users/dewthefifth/events{/privacy}","received_events_url":"https://api.github.com/users/dewthefifth/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2012-11-24T16:25:01Z","updated_at":"2013-08-14T15:38:13Z","closed_at":"2013-01-07T02:49:17Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"The unit test below will reproduce the problem. The general problem is that when the XML is deserialized jackson skips the attributes in the first entry of a list. All subsequent entries have their attributes read, and using an element instead of an attribute will work, but the first item in the list has it's attributes ignored.\n\nI tried stepping through the code a bit, and found that the `JsonParser` tokens seem to go straight from the \"wrapper\" field to the \"a\" field without ever stopping at the \"id\" field. I could be wrong about this though.\n\n```\n\nimport java.io.StringReader;\nimport java.util.List;\n\nimport junit.framework.Assert;\n\nimport org.junit.Test;\n\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport com.fasterxml.jackson.dataformat.xml.XmlMapper;\nimport com.fasterxml.jackson.dataformat.xml.annotation.JacksonXmlProperty;\n\npublic class TestParseMarketStat\n{\n    @Test\n    public void testBrokenParser() throws Exception\n    {\n        String xml = \"<response><wrapper><item id=\\\"1\\\"><a>x</a><b>y</b></item><item id=\\\"2\\\"><a>y</a><b>x</b></item></wrapper></response>\";\n        XmlMapper mapper = new XmlMapper();\n        Response res = mapper.readValue(new StringReader(xml), Response.class);\n\n        System.out.println(new ObjectMapper().writeValueAsString(res));\n        Assert.assertNotNull(res.getItems().get(0).getId());\n    }\n\n    public static class Response\n    {\n        @JacksonXmlProperty(localName = \"wrapper\")\n        List<Item> items;\n\n        public List<Item> getItems()\n        {\n            return items;\n        }\n\n        public void setItems(List<Item> items)\n        {\n            this.items = items;\n        }\n    }\n\n    public static class Item\n    {\n        protected String id;\n        protected String a;\n        protected String b;\n\n        public String getId()\n        {\n            return id;\n        }\n\n        public void setId(String id)\n        {\n            this.id = id;\n        }\n\n        public String getA()\n        {\n            return a;\n        }\n\n        public void setA(String a)\n        {\n            this.a = a;\n        }\n\n        public String getB()\n        {\n            return b;\n        }\n\n        public void setB(String b)\n        {\n            this.b = b;\n        }\n\n    }\n}\n```\n","closed_by":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-dataformat-xml/issues/47/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/FasterXML/jackson-dataformat-xml/issues/47/timeline","performed_via_github_app":null,"state_reason":"completed"}