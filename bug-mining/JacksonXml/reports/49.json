{"url":"https://api.github.com/repos/FasterXML/jackson-dataformat-xml/issues/262","repository_url":"https://api.github.com/repos/FasterXML/jackson-dataformat-xml","labels_url":"https://api.github.com/repos/FasterXML/jackson-dataformat-xml/issues/262/labels{/name}","comments_url":"https://api.github.com/repos/FasterXML/jackson-dataformat-xml/issues/262/comments","events_url":"https://api.github.com/repos/FasterXML/jackson-dataformat-xml/issues/262/events","html_url":"https://github.com/FasterXML/jackson-dataformat-xml/issues/262","id":259036289,"node_id":"MDU6SXNzdWUyNTkwMzYyODk=","number":262,"title":"Make `ToXmlGenerator` non-final","user":{"login":"ghost","id":10137,"node_id":"MDQ6VXNlcjEwMTM3","avatar_url":"https://avatars.githubusercontent.com/u/10137?v=4","gravatar_id":"","url":"https://api.github.com/users/ghost","html_url":"https://github.com/ghost","followers_url":"https://api.github.com/users/ghost/followers","following_url":"https://api.github.com/users/ghost/following{/other_user}","gists_url":"https://api.github.com/users/ghost/gists{/gist_id}","starred_url":"https://api.github.com/users/ghost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghost/subscriptions","organizations_url":"https://api.github.com/users/ghost/orgs","repos_url":"https://api.github.com/users/ghost/repos","events_url":"https://api.github.com/users/ghost/events{/privacy}","received_events_url":"https://api.github.com/users/ghost/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/FasterXML/jackson-dataformat-xml/milestones/33","html_url":"https://github.com/FasterXML/jackson-dataformat-xml/milestone/33","labels_url":"https://api.github.com/repos/FasterXML/jackson-dataformat-xml/milestones/33/labels","id":5370091,"node_id":"MDk6TWlsZXN0b25lNTM3MDA5MQ==","number":33,"title":"2.12.0","description":null,"creator":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":24,"state":"open","created_at":"2020-05-01T05:23:41Z","updated_at":"2020-11-14T03:45:00Z","due_on":null,"closed_at":null},"comments":5,"created_at":"2017-09-20T04:26:36Z","updated_at":"2020-05-22T04:24:04Z","closed_at":"2020-05-22T04:24:04Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"# Background\r\n\r\nA YAML file contains definitions that reference each other using a simple syntax:\r\n\r\n```\r\n$ cat variables.yaml \r\n---\r\na: A\r\nb: $a$ B\r\nc: $b$ C $b$\r\nd: $a$ $b$ $c$ D $a$\r\n```\r\n\r\n The goal is to read the YAML definitions, interpolate the values, then write them back out. The output formats include YAML and XML. YAML works fine. XML, however, does not.\r\n\r\nFor context, the YAML implementation intercepts the [`writeString`][1] method of `YAMLGenerator`. Note that the `YAMLGenerator` class is not declared `final`. The following code works:\r\n\r\n<!-- language: java -->\r\n\r\n      public ResolverYAMLGenerator(\r\n        final YamlParser yamlParser,\r\n        final IOContext ctxt,\r\n        final int jsonFeatures,\r\n        final int yamlFeatures,\r\n        final ObjectCodec codec,\r\n        final Writer out,\r\n        final DumperOptions.Version version ) throws IOException {\r\n        super( ctxt, jsonFeatures, yamlFeatures, codec, out, version );\r\n        setYamlParser( yamlParser );\r\n      }\r\n    \r\n      @Override\r\n      public void writeString( final String text )\r\n        throws IOException, JsonGenerationException {\r\n        final YamlParser parser = getYamlParser();\r\n        super.writeString( parser.substitute( text ) );\r\n      }\r\n\r\nThe `ResolverYAMLGenerator` subclasses from `YAMLGenerator` and overrides the `writeString` method to perform variable interpolation via the `substitute` method call.\r\n\r\n# Problem\r\n\r\nThe equivalent XML generator class, [`ToXmlGenerator`][2], is declared final.  This precludes the possibility of overriding its `writeString` method to perform variable interpolation.\r\n\r\n# Resolution Ideas\r\n\r\nCan `ToXmlGenerator` have its `final` declaration removed?\r\n\r\nIf not, what other mechanism exists to interpolate only element values immediately prior to writing them (that don't involve composition and delegation)?\r\n\r\n\r\n  [1]: https://static.javadoc.io/com.fasterxml.jackson.dataformat/jackson-dataformat-yaml/2.7.0/com/fasterxml/jackson/dataformat/yaml/YAMLGenerator.html#writeString(java.lang.String)\r\n  [2]: https://github.com/FasterXML/jackson-dataformat-xml/blob/master/src/main/java/com/fasterxml/jackson/dataformat/xml/ser/ToXmlGenerator.java","closed_by":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-dataformat-xml/issues/262/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/FasterXML/jackson-dataformat-xml/issues/262/timeline","performed_via_github_app":null,"state_reason":"completed"}