[{"url":"https://api.github.com/repos/redis/redis/issues/comments/991019633","html_url":"https://github.com/redis/redis/issues/9926#issuecomment-991019633","issue_url":"https://api.github.com/repos/redis/redis/issues/9926","id":991019633,"node_id":"IC_kwDOAAJhcs47EcJx","user":{"login":"itamarhaber","id":6059516,"node_id":"MDQ6VXNlcjYwNTk1MTY=","avatar_url":"https://avatars.githubusercontent.com/u/6059516?v=4","gravatar_id":"","url":"https://api.github.com/users/itamarhaber","html_url":"https://github.com/itamarhaber","followers_url":"https://api.github.com/users/itamarhaber/followers","following_url":"https://api.github.com/users/itamarhaber/following{/other_user}","gists_url":"https://api.github.com/users/itamarhaber/gists{/gist_id}","starred_url":"https://api.github.com/users/itamarhaber/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/itamarhaber/subscriptions","organizations_url":"https://api.github.com/users/itamarhaber/orgs","repos_url":"https://api.github.com/users/itamarhaber/repos","events_url":"https://api.github.com/users/itamarhaber/events{/privacy}","received_events_url":"https://api.github.com/users/itamarhaber/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-10T14:29:30Z","updated_at":"2021-12-10T14:29:30Z","body":"A quicker way to reproduce (also on unstable): `set maxmemory 1mb` :)","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/redis/redis/issues/comments/991019633/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"itamarhaber","id":6059516,"node_id":"MDQ6VXNlcjYwNTk1MTY=","avatar_url":"https://avatars.githubusercontent.com/u/6059516?v=4","gravatar_id":"","url":"https://api.github.com/users/itamarhaber","html_url":"https://github.com/itamarhaber","followers_url":"https://api.github.com/users/itamarhaber/followers","following_url":"https://api.github.com/users/itamarhaber/following{/other_user}","gists_url":"https://api.github.com/users/itamarhaber/gists{/gist_id}","starred_url":"https://api.github.com/users/itamarhaber/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/itamarhaber/subscriptions","organizations_url":"https://api.github.com/users/itamarhaber/orgs","repos_url":"https://api.github.com/users/itamarhaber/repos","events_url":"https://api.github.com/users/itamarhaber/events{/privacy}","received_events_url":"https://api.github.com/users/itamarhaber/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/redis/redis/issues/comments/991031568","html_url":"https://github.com/redis/redis/issues/9926#issuecomment-991031568","issue_url":"https://api.github.com/repos/redis/redis/issues/9926","id":991031568,"node_id":"IC_kwDOAAJhcs47EfEQ","user":{"login":"markuszoeller","id":7761429,"node_id":"MDQ6VXNlcjc3NjE0Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/7761429?v=4","gravatar_id":"","url":"https://api.github.com/users/markuszoeller","html_url":"https://github.com/markuszoeller","followers_url":"https://api.github.com/users/markuszoeller/followers","following_url":"https://api.github.com/users/markuszoeller/following{/other_user}","gists_url":"https://api.github.com/users/markuszoeller/gists{/gist_id}","starred_url":"https://api.github.com/users/markuszoeller/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markuszoeller/subscriptions","organizations_url":"https://api.github.com/users/markuszoeller/orgs","repos_url":"https://api.github.com/users/markuszoeller/repos","events_url":"https://api.github.com/users/markuszoeller/events{/privacy}","received_events_url":"https://api.github.com/users/markuszoeller/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-10T14:45:09Z","updated_at":"2021-12-10T14:45:09Z","body":"> A quicker way to reproduce (also on unstable): `set maxmemory 1mb` :)\r\n\r\nhaha, yeah, I just used the value I had in my test :)","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/redis/redis/issues/comments/991031568/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"markuszoeller","id":7761429,"node_id":"MDQ6VXNlcjc3NjE0Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/7761429?v=4","gravatar_id":"","url":"https://api.github.com/users/markuszoeller","html_url":"https://github.com/markuszoeller","followers_url":"https://api.github.com/users/markuszoeller/followers","following_url":"https://api.github.com/users/markuszoeller/following{/other_user}","gists_url":"https://api.github.com/users/markuszoeller/gists{/gist_id}","starred_url":"https://api.github.com/users/markuszoeller/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markuszoeller/subscriptions","organizations_url":"https://api.github.com/users/markuszoeller/orgs","repos_url":"https://api.github.com/users/markuszoeller/repos","events_url":"https://api.github.com/users/markuszoeller/events{/privacy}","received_events_url":"https://api.github.com/users/markuszoeller/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/redis/redis/issues/comments/991362803","html_url":"https://github.com/redis/redis/issues/9926#issuecomment-991362803","issue_url":"https://api.github.com/repos/redis/redis/issues/9926","id":991362803,"node_id":"IC_kwDOAAJhcs47Fv7z","user":{"login":"madolson","id":34459052,"node_id":"MDQ6VXNlcjM0NDU5MDUy","avatar_url":"https://avatars.githubusercontent.com/u/34459052?v=4","gravatar_id":"","url":"https://api.github.com/users/madolson","html_url":"https://github.com/madolson","followers_url":"https://api.github.com/users/madolson/followers","following_url":"https://api.github.com/users/madolson/following{/other_user}","gists_url":"https://api.github.com/users/madolson/gists{/gist_id}","starred_url":"https://api.github.com/users/madolson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/madolson/subscriptions","organizations_url":"https://api.github.com/users/madolson/orgs","repos_url":"https://api.github.com/users/madolson/repos","events_url":"https://api.github.com/users/madolson/events{/privacy}","received_events_url":"https://api.github.com/users/madolson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-10T23:07:02Z","updated_at":"2021-12-10T23:07:02Z","body":"I believe this is intended behavior because multi-execs consume additional memory when building up the object, so we don't want people building up objects when you're at maxmemory.\r\n\r\nI don't know if I agree with this behavior, it's really no different than accumulating commands in the query buffer or loading up commands into a lua script. I would prefer we just make sure there are no \"use-memory\" commands inside the multi-exec.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/redis/redis/issues/comments/991362803/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"madolson","id":34459052,"node_id":"MDQ6VXNlcjM0NDU5MDUy","avatar_url":"https://avatars.githubusercontent.com/u/34459052?v=4","gravatar_id":"","url":"https://api.github.com/users/madolson","html_url":"https://github.com/madolson","followers_url":"https://api.github.com/users/madolson/followers","following_url":"https://api.github.com/users/madolson/following{/other_user}","gists_url":"https://api.github.com/users/madolson/gists{/gist_id}","starred_url":"https://api.github.com/users/madolson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/madolson/subscriptions","organizations_url":"https://api.github.com/users/madolson/orgs","repos_url":"https://api.github.com/users/madolson/repos","events_url":"https://api.github.com/users/madolson/events{/privacy}","received_events_url":"https://api.github.com/users/madolson/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/redis/redis/issues/comments/991848830","html_url":"https://github.com/redis/redis/issues/9926#issuecomment-991848830","issue_url":"https://api.github.com/repos/redis/redis/issues/9926","id":991848830,"node_id":"IC_kwDOAAJhcs47Hml-","user":{"login":"oranagra","id":7045099,"node_id":"MDQ6VXNlcjcwNDUwOTk=","avatar_url":"https://avatars.githubusercontent.com/u/7045099?v=4","gravatar_id":"","url":"https://api.github.com/users/oranagra","html_url":"https://github.com/oranagra","followers_url":"https://api.github.com/users/oranagra/followers","following_url":"https://api.github.com/users/oranagra/following{/other_user}","gists_url":"https://api.github.com/users/oranagra/gists{/gist_id}","starred_url":"https://api.github.com/users/oranagra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oranagra/subscriptions","organizations_url":"https://api.github.com/users/oranagra/orgs","repos_url":"https://api.github.com/users/oranagra/repos","events_url":"https://api.github.com/users/oranagra/events{/privacy}","received_events_url":"https://api.github.com/users/oranagra/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-12T07:34:26Z","updated_at":"2021-12-12T07:34:26Z","body":"Indeed.. This behavior was added on purpose in redis 5.0, see #5454","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/redis/redis/issues/comments/991848830/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"oranagra","id":7045099,"node_id":"MDQ6VXNlcjcwNDUwOTk=","avatar_url":"https://avatars.githubusercontent.com/u/7045099?v=4","gravatar_id":"","url":"https://api.github.com/users/oranagra","html_url":"https://github.com/oranagra","followers_url":"https://api.github.com/users/oranagra/followers","following_url":"https://api.github.com/users/oranagra/following{/other_user}","gists_url":"https://api.github.com/users/oranagra/gists{/gist_id}","starred_url":"https://api.github.com/users/oranagra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oranagra/subscriptions","organizations_url":"https://api.github.com/users/oranagra/orgs","repos_url":"https://api.github.com/users/oranagra/repos","events_url":"https://api.github.com/users/oranagra/events{/privacy}","received_events_url":"https://api.github.com/users/oranagra/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":5752480541,"node_id":"LE_lADOAAJhcs5AMECIzwAAAAFW3-Md","url":"https://api.github.com/repos/redis/redis/issues/events/5752480541","actor":{"login":"oranagra","id":7045099,"node_id":"MDQ6VXNlcjcwNDUwOTk=","avatar_url":"https://avatars.githubusercontent.com/u/7045099?v=4","gravatar_id":"","url":"https://api.github.com/users/oranagra","html_url":"https://github.com/oranagra","followers_url":"https://api.github.com/users/oranagra/followers","following_url":"https://api.github.com/users/oranagra/following{/other_user}","gists_url":"https://api.github.com/users/oranagra/gists{/gist_id}","starred_url":"https://api.github.com/users/oranagra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oranagra/subscriptions","organizations_url":"https://api.github.com/users/oranagra/orgs","repos_url":"https://api.github.com/users/oranagra/repos","events_url":"https://api.github.com/users/oranagra/events{/privacy}","received_events_url":"https://api.github.com/users/oranagra/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2021-12-12T07:34:38Z","label":{"name":"state:to-be-closed","color":"da79f2"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/redis/redis/issues/comments/992666350","html_url":"https://github.com/redis/redis/issues/9926#issuecomment-992666350","issue_url":"https://api.github.com/repos/redis/redis/issues/9926","id":992666350,"node_id":"IC_kwDOAAJhcs47KuLu","user":{"login":"markuszoeller","id":7761429,"node_id":"MDQ6VXNlcjc3NjE0Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/7761429?v=4","gravatar_id":"","url":"https://api.github.com/users/markuszoeller","html_url":"https://github.com/markuszoeller","followers_url":"https://api.github.com/users/markuszoeller/followers","following_url":"https://api.github.com/users/markuszoeller/following{/other_user}","gists_url":"https://api.github.com/users/markuszoeller/gists{/gist_id}","starred_url":"https://api.github.com/users/markuszoeller/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markuszoeller/subscriptions","organizations_url":"https://api.github.com/users/markuszoeller/orgs","repos_url":"https://api.github.com/users/markuszoeller/repos","events_url":"https://api.github.com/users/markuszoeller/events{/privacy}","received_events_url":"https://api.github.com/users/markuszoeller/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-13T16:44:47Z","updated_at":"2021-12-13T16:44:47Z","body":"> Indeed.. This behavior was added on purpose in redis 5.0, see #5454\r\n\r\nDoes it make sense in it's current form though?\r\n\r\nI was also under the impression that `maxmemory` is only limiting the keyspace and not memory the Redis process would need to respond to something, like multi-execs. Is that assumption not correct?","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/redis/redis/issues/comments/992666350/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"markuszoeller","id":7761429,"node_id":"MDQ6VXNlcjc3NjE0Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/7761429?v=4","gravatar_id":"","url":"https://api.github.com/users/markuszoeller","html_url":"https://github.com/markuszoeller","followers_url":"https://api.github.com/users/markuszoeller/followers","following_url":"https://api.github.com/users/markuszoeller/following{/other_user}","gists_url":"https://api.github.com/users/markuszoeller/gists{/gist_id}","starred_url":"https://api.github.com/users/markuszoeller/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markuszoeller/subscriptions","organizations_url":"https://api.github.com/users/markuszoeller/orgs","repos_url":"https://api.github.com/users/markuszoeller/repos","events_url":"https://api.github.com/users/markuszoeller/events{/privacy}","received_events_url":"https://api.github.com/users/markuszoeller/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/redis/redis/issues/comments/992833835","html_url":"https://github.com/redis/redis/issues/9926#issuecomment-992833835","issue_url":"https://api.github.com/repos/redis/redis/issues/9926","id":992833835,"node_id":"IC_kwDOAAJhcs47LXEr","user":{"login":"oranagra","id":7045099,"node_id":"MDQ6VXNlcjcwNDUwOTk=","avatar_url":"https://avatars.githubusercontent.com/u/7045099?v=4","gravatar_id":"","url":"https://api.github.com/users/oranagra","html_url":"https://github.com/oranagra","followers_url":"https://api.github.com/users/oranagra/followers","following_url":"https://api.github.com/users/oranagra/following{/other_user}","gists_url":"https://api.github.com/users/oranagra/gists{/gist_id}","starred_url":"https://api.github.com/users/oranagra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oranagra/subscriptions","organizations_url":"https://api.github.com/users/oranagra/orgs","repos_url":"https://api.github.com/users/oranagra/repos","events_url":"https://api.github.com/users/oranagra/events{/privacy}","received_events_url":"https://api.github.com/users/oranagra/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-13T19:59:15Z","updated_at":"2021-12-14T09:41:01Z","body":"nothing major was changed since then in that respect, so this change makes as much sense now as it did then.\r\n\r\nredis counts memory usage of (almost) everything, including client buffers and other non-keyspace allocations.\r\nthe maxmemory limit however, is enforced by evicting keys, or rejecting commands.\r\nredis does avoid rejecting some commands, namely read command and delete commands, or actually ones that it thinks are gonna increase the memory usage.\r\n\r\ni think the reason MULTI queuing is rejected since the client could otherwise abuse redis but sending more and more commands to be queued, and never send EXEC, which will result in an unbound memory usage.\r\n\r\n**maybe it makes sense to give the queuing some grace, and not reject them too soon, so that we don't interrupt naive workloads by a temporary memory overuse.\r\nhowever, if the queued commands contain any \"use-memory\" commands, then EXEC will fail when it arrives, so it might not help much (other than for read / delete workloads)**","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/redis/redis/issues/comments/992833835/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"oranagra","id":7045099,"node_id":"MDQ6VXNlcjcwNDUwOTk=","avatar_url":"https://avatars.githubusercontent.com/u/7045099?v=4","gravatar_id":"","url":"https://api.github.com/users/oranagra","html_url":"https://github.com/oranagra","followers_url":"https://api.github.com/users/oranagra/followers","following_url":"https://api.github.com/users/oranagra/following{/other_user}","gists_url":"https://api.github.com/users/oranagra/gists{/gist_id}","starred_url":"https://api.github.com/users/oranagra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oranagra/subscriptions","organizations_url":"https://api.github.com/users/oranagra/orgs","repos_url":"https://api.github.com/users/oranagra/repos","events_url":"https://api.github.com/users/oranagra/events{/privacy}","received_events_url":"https://api.github.com/users/oranagra/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/redis/redis/issues/comments/993313837","html_url":"https://github.com/redis/redis/issues/9926#issuecomment-993313837","issue_url":"https://api.github.com/repos/redis/redis/issues/9926","id":993313837,"node_id":"IC_kwDOAAJhcs47NMQt","user":{"login":"markuszoeller","id":7761429,"node_id":"MDQ6VXNlcjc3NjE0Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/7761429?v=4","gravatar_id":"","url":"https://api.github.com/users/markuszoeller","html_url":"https://github.com/markuszoeller","followers_url":"https://api.github.com/users/markuszoeller/followers","following_url":"https://api.github.com/users/markuszoeller/following{/other_user}","gists_url":"https://api.github.com/users/markuszoeller/gists{/gist_id}","starred_url":"https://api.github.com/users/markuszoeller/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markuszoeller/subscriptions","organizations_url":"https://api.github.com/users/markuszoeller/orgs","repos_url":"https://api.github.com/users/markuszoeller/repos","events_url":"https://api.github.com/users/markuszoeller/events{/privacy}","received_events_url":"https://api.github.com/users/markuszoeller/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-14T08:52:48Z","updated_at":"2021-12-14T08:53:05Z","body":"> redis counts memory usage of (almost) everything, including client buffers and other non-keyspace allocations.\r\n> the maxmemory limit however, is enforced by evicting keys, or rejecting commands.\r\n\r\nI understand how it's enforced, but it's not 100% clear to me what actions exactly increase/decrease the memory count which is limited by `maxmemory`. I was trying to say, that I though only actions like `set foo bar` (keyspace actions) increase that portion of memory usage which is limited by `maxmemory`, that's why I was surprised to see \"non-keyspace actions\" like INFO to be limited by multi-exec.\r\n\r\n> (other than for read / delete workloads)\r\n\r\nThat would already help I think. Not being able to call INFO or DEL in multi-exec feels a bit too restrictive.\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/redis/redis/issues/comments/993313837/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"markuszoeller","id":7761429,"node_id":"MDQ6VXNlcjc3NjE0Mjk=","avatar_url":"https://avatars.githubusercontent.com/u/7761429?v=4","gravatar_id":"","url":"https://api.github.com/users/markuszoeller","html_url":"https://github.com/markuszoeller","followers_url":"https://api.github.com/users/markuszoeller/followers","following_url":"https://api.github.com/users/markuszoeller/following{/other_user}","gists_url":"https://api.github.com/users/markuszoeller/gists{/gist_id}","starred_url":"https://api.github.com/users/markuszoeller/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/markuszoeller/subscriptions","organizations_url":"https://api.github.com/users/markuszoeller/orgs","repos_url":"https://api.github.com/users/markuszoeller/repos","events_url":"https://api.github.com/users/markuszoeller/events{/privacy}","received_events_url":"https://api.github.com/users/markuszoeller/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":5762742955,"node_id":"UNLE_lADOAAJhcs5AMECIzwAAAAFXfHqr","url":"https://api.github.com/repos/redis/redis/issues/events/5762742955","actor":{"login":"oranagra","id":7045099,"node_id":"MDQ6VXNlcjcwNDUwOTk=","avatar_url":"https://avatars.githubusercontent.com/u/7045099?v=4","gravatar_id":"","url":"https://api.github.com/users/oranagra","html_url":"https://github.com/oranagra","followers_url":"https://api.github.com/users/oranagra/followers","following_url":"https://api.github.com/users/oranagra/following{/other_user}","gists_url":"https://api.github.com/users/oranagra/gists{/gist_id}","starred_url":"https://api.github.com/users/oranagra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oranagra/subscriptions","organizations_url":"https://api.github.com/users/oranagra/orgs","repos_url":"https://api.github.com/users/oranagra/repos","events_url":"https://api.github.com/users/oranagra/events{/privacy}","received_events_url":"https://api.github.com/users/oranagra/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"unlabeled","commit_id":null,"commit_url":null,"created_at":"2021-12-14T09:39:38Z","label":{"name":"state:to-be-closed","color":"da79f2"},"performed_via_github_app":null},{"id":5762746275,"node_id":"MIE_lADOAAJhcs5AMECIzwAAAAFXfIej","url":"https://api.github.com/repos/redis/redis/issues/events/5762746275","actor":{"login":"oranagra","id":7045099,"node_id":"MDQ6VXNlcjcwNDUwOTk=","avatar_url":"https://avatars.githubusercontent.com/u/7045099?v=4","gravatar_id":"","url":"https://api.github.com/users/oranagra","html_url":"https://github.com/oranagra","followers_url":"https://api.github.com/users/oranagra/followers","following_url":"https://api.github.com/users/oranagra/following{/other_user}","gists_url":"https://api.github.com/users/oranagra/gists{/gist_id}","starred_url":"https://api.github.com/users/oranagra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oranagra/subscriptions","organizations_url":"https://api.github.com/users/oranagra/orgs","repos_url":"https://api.github.com/users/oranagra/repos","events_url":"https://api.github.com/users/oranagra/events{/privacy}","received_events_url":"https://api.github.com/users/oranagra/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"milestoned","commit_id":null,"commit_url":null,"created_at":"2021-12-14T09:40:10Z","milestone":{"title":"Next minor backlog"},"performed_via_github_app":null},{"id":15201740241,"node_id":"PVTISC_lADOAAJhcs5AMECIzwAAAAOKGCXR","url":"https://api.github.com/repos/redis/redis/issues/events/15201740241","actor":{"login":"oranagra","id":7045099,"node_id":"MDQ6VXNlcjcwNDUwOTk=","avatar_url":"https://avatars.githubusercontent.com/u/7045099?v=4","gravatar_id":"","url":"https://api.github.com/users/oranagra","html_url":"https://github.com/oranagra","followers_url":"https://api.github.com/users/oranagra/followers","following_url":"https://api.github.com/users/oranagra/following{/other_user}","gists_url":"https://api.github.com/users/oranagra/gists{/gist_id}","starred_url":"https://api.github.com/users/oranagra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oranagra/subscriptions","organizations_url":"https://api.github.com/users/oranagra/orgs","repos_url":"https://api.github.com/users/oranagra/repos","events_url":"https://api.github.com/users/oranagra/events{/privacy}","received_events_url":"https://api.github.com/users/oranagra/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"project_v2_item_status_changed","commit_id":null,"commit_url":null,"created_at":"2022-07-06T12:57:33Z","performed_via_github_app":null},{"id":15235322722,"node_id":"ATPVTE_lADOAAJhcs5AMECIzwAAAAOMGJNi","url":"https://api.github.com/repos/redis/redis/issues/events/15235322722","actor":{"login":"oranagra","id":7045099,"node_id":"MDQ6VXNlcjcwNDUwOTk=","avatar_url":"https://avatars.githubusercontent.com/u/7045099?v=4","gravatar_id":"","url":"https://api.github.com/users/oranagra","html_url":"https://github.com/oranagra","followers_url":"https://api.github.com/users/oranagra/followers","following_url":"https://api.github.com/users/oranagra/following{/other_user}","gists_url":"https://api.github.com/users/oranagra/gists{/gist_id}","starred_url":"https://api.github.com/users/oranagra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oranagra/subscriptions","organizations_url":"https://api.github.com/users/oranagra/orgs","repos_url":"https://api.github.com/users/oranagra/repos","events_url":"https://api.github.com/users/oranagra/events{/privacy}","received_events_url":"https://api.github.com/users/oranagra/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"added_to_project_v2","commit_id":null,"commit_url":null,"created_at":"2022-07-06T12:57:33Z","performed_via_github_app":null},{"actor":{"login":"tezc","id":17865367,"node_id":"MDQ6VXNlcjE3ODY1MzY3","avatar_url":"https://avatars.githubusercontent.com/u/17865367?v=4","gravatar_id":"","url":"https://api.github.com/users/tezc","html_url":"https://github.com/tezc","followers_url":"https://api.github.com/users/tezc/followers","following_url":"https://api.github.com/users/tezc/following{/other_user}","gists_url":"https://api.github.com/users/tezc/gists{/gist_id}","starred_url":"https://api.github.com/users/tezc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tezc/subscriptions","organizations_url":"https://api.github.com/users/tezc/orgs","repos_url":"https://api.github.com/users/tezc/repos","events_url":"https://api.github.com/users/tezc/events{/privacy}","received_events_url":"https://api.github.com/users/tezc/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-24T12:17:49Z","updated_at":"2022-07-24T12:17:49Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/RedisLabs/redisraft/issues/346","repository_url":"https://api.github.com/repos/RedisLabs/redisraft","labels_url":"https://api.github.com/repos/RedisLabs/redisraft/issues/346/labels{/name}","comments_url":"https://api.github.com/repos/RedisLabs/redisraft/issues/346/comments","events_url":"https://api.github.com/repos/RedisLabs/redisraft/issues/346/events","html_url":"https://github.com/RedisLabs/redisraft/pull/346","id":1237459664,"node_id":"PR_kwDOB0Cits435SgZ","number":346,"title":"enforce maxmemory limits when we accept the command","user":{"login":"sjpotter","id":1659735,"node_id":"MDQ6VXNlcjE2NTk3MzU=","avatar_url":"https://avatars.githubusercontent.com/u/1659735?v=4","gravatar_id":"","url":"https://api.github.com/users/sjpotter","html_url":"https://github.com/sjpotter","followers_url":"https://api.github.com/users/sjpotter/followers","following_url":"https://api.github.com/users/sjpotter/following{/other_user}","gists_url":"https://api.github.com/users/sjpotter/gists{/gist_id}","starred_url":"https://api.github.com/users/sjpotter/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sjpotter/subscriptions","organizations_url":"https://api.github.com/users/sjpotter/orgs","repos_url":"https://api.github.com/users/sjpotter/repos","events_url":"https://api.github.com/users/sjpotter/events{/privacy}","received_events_url":"https://api.github.com/users/sjpotter/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":18,"created_at":"2022-05-16T17:17:25Z","updated_at":"2022-07-25T12:28:08Z","closed_at":"2022-07-25T12:28:08Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":121676470,"node_id":"MDEwOlJlcG9zaXRvcnkxMjE2NzY0NzA=","name":"redisraft","full_name":"RedisLabs/redisraft","private":false,"owner":{"login":"RedisLabs","id":1991868,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE5OTE4Njg=","avatar_url":"https://avatars.githubusercontent.com/u/1991868?v=4","gravatar_id":"","url":"https://api.github.com/users/RedisLabs","html_url":"https://github.com/RedisLabs","followers_url":"https://api.github.com/users/RedisLabs/followers","following_url":"https://api.github.com/users/RedisLabs/following{/other_user}","gists_url":"https://api.github.com/users/RedisLabs/gists{/gist_id}","starred_url":"https://api.github.com/users/RedisLabs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RedisLabs/subscriptions","organizations_url":"https://api.github.com/users/RedisLabs/orgs","repos_url":"https://api.github.com/users/RedisLabs/repos","events_url":"https://api.github.com/users/RedisLabs/events{/privacy}","received_events_url":"https://api.github.com/users/RedisLabs/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/RedisLabs/redisraft","description":"A Redis Module that make it possible to create a consistent Raft cluster from multiple Redis instances.","fork":false,"url":"https://api.github.com/repos/RedisLabs/redisraft","forks_url":"https://api.github.com/repos/RedisLabs/redisraft/forks","keys_url":"https://api.github.com/repos/RedisLabs/redisraft/keys{/key_id}","collaborators_url":"https://api.github.com/repos/RedisLabs/redisraft/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/RedisLabs/redisraft/teams","hooks_url":"https://api.github.com/repos/RedisLabs/redisraft/hooks","issue_events_url":"https://api.github.com/repos/RedisLabs/redisraft/issues/events{/number}","events_url":"https://api.github.com/repos/RedisLabs/redisraft/events","assignees_url":"https://api.github.com/repos/RedisLabs/redisraft/assignees{/user}","branches_url":"https://api.github.com/repos/RedisLabs/redisraft/branches{/branch}","tags_url":"https://api.github.com/repos/RedisLabs/redisraft/tags","blobs_url":"https://api.github.com/repos/RedisLabs/redisraft/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/RedisLabs/redisraft/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/RedisLabs/redisraft/git/refs{/sha}","trees_url":"https://api.github.com/repos/RedisLabs/redisraft/git/trees{/sha}","statuses_url":"https://api.github.com/repos/RedisLabs/redisraft/statuses/{sha}","languages_url":"https://api.github.com/repos/RedisLabs/redisraft/languages","stargazers_url":"https://api.github.com/repos/RedisLabs/redisraft/stargazers","contributors_url":"https://api.github.com/repos/RedisLabs/redisraft/contributors","subscribers_url":"https://api.github.com/repos/RedisLabs/redisraft/subscribers","subscription_url":"https://api.github.com/repos/RedisLabs/redisraft/subscription","commits_url":"https://api.github.com/repos/RedisLabs/redisraft/commits{/sha}","git_commits_url":"https://api.github.com/repos/RedisLabs/redisraft/git/commits{/sha}","comments_url":"https://api.github.com/repos/RedisLabs/redisraft/comments{/number}","issue_comment_url":"https://api.github.com/repos/RedisLabs/redisraft/issues/comments{/number}","contents_url":"https://api.github.com/repos/RedisLabs/redisraft/contents/{+path}","compare_url":"https://api.github.com/repos/RedisLabs/redisraft/compare/{base}...{head}","merges_url":"https://api.github.com/repos/RedisLabs/redisraft/merges","archive_url":"https://api.github.com/repos/RedisLabs/redisraft/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/RedisLabs/redisraft/downloads","issues_url":"https://api.github.com/repos/RedisLabs/redisraft/issues{/number}","pulls_url":"https://api.github.com/repos/RedisLabs/redisraft/pulls{/number}","milestones_url":"https://api.github.com/repos/RedisLabs/redisraft/milestones{/number}","notifications_url":"https://api.github.com/repos/RedisLabs/redisraft/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/RedisLabs/redisraft/labels{/name}","releases_url":"https://api.github.com/repos/RedisLabs/redisraft/releases{/id}","deployments_url":"https://api.github.com/repos/RedisLabs/redisraft/deployments","created_at":"2018-02-15T20:03:18Z","updated_at":"2025-11-07T02:23:36Z","pushed_at":"2023-07-18T12:19:07Z","git_url":"git://github.com/RedisLabs/redisraft.git","ssh_url":"git@github.com:RedisLabs/redisraft.git","clone_url":"https://github.com/RedisLabs/redisraft.git","svn_url":"https://github.com/RedisLabs/redisraft","homepage":"","size":4249,"stargazers_count":840,"watchers_count":840,"language":"C","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":false,"forks_count":66,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":17,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":[],"visibility":"public","forks":66,"open_issues":17,"watchers":840,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/RedisLabs/redisraft/pulls/346","html_url":"https://github.com/RedisLabs/redisraft/pull/346","diff_url":"https://github.com/RedisLabs/redisraft/pull/346.diff","patch_url":"https://github.com/RedisLabs/redisraft/pull/346.patch","merged_at":"2022-07-25T12:28:08Z"},"body":"This probably need a test. I'm thinking \r\n\r\n- start a cluster with maxmemory limit set relatively low\r\n- run a loop that adds entries until we get the OOM error (within X iterations we should OOM, if not error).\r\n- verify via debug interface that variable that OOMd is not on any of the nodes.","reactions":{"url":"https://api.github.com/repos/RedisLabs/redisraft/issues/346/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/RedisLabs/redisraft/issues/346/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/redis/redis/issues/comments/1868919865","html_url":"https://github.com/redis/redis/issues/9926#issuecomment-1868919865","issue_url":"https://api.github.com/repos/redis/redis/issues/9926","id":1868919865,"node_id":"IC_kwDOAAJhcs5vZXQ5","user":{"login":"eladbern","id":77224466,"node_id":"MDQ6VXNlcjc3MjI0NDY2","avatar_url":"https://avatars.githubusercontent.com/u/77224466?v=4","gravatar_id":"","url":"https://api.github.com/users/eladbern","html_url":"https://github.com/eladbern","followers_url":"https://api.github.com/users/eladbern/followers","following_url":"https://api.github.com/users/eladbern/following{/other_user}","gists_url":"https://api.github.com/users/eladbern/gists{/gist_id}","starred_url":"https://api.github.com/users/eladbern/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eladbern/subscriptions","organizations_url":"https://api.github.com/users/eladbern/orgs","repos_url":"https://api.github.com/users/eladbern/repos","events_url":"https://api.github.com/users/eladbern/events{/privacy}","received_events_url":"https://api.github.com/users/eladbern/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-25T10:39:04Z","updated_at":"2023-12-25T10:39:04Z","body":"Now that we have client eviction that accounts for `multi` memory (via `mstate.argv_len_sums`), should we just allow non-'denyoom' transactions?  \r\nThat would allow performing reads, deletes, etc. inside transactions. ","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/redis/redis/issues/comments/1868919865/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"eladbern","id":77224466,"node_id":"MDQ6VXNlcjc3MjI0NDY2","avatar_url":"https://avatars.githubusercontent.com/u/77224466?v=4","gravatar_id":"","url":"https://api.github.com/users/eladbern","html_url":"https://github.com/eladbern","followers_url":"https://api.github.com/users/eladbern/followers","following_url":"https://api.github.com/users/eladbern/following{/other_user}","gists_url":"https://api.github.com/users/eladbern/gists{/gist_id}","starred_url":"https://api.github.com/users/eladbern/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eladbern/subscriptions","organizations_url":"https://api.github.com/users/eladbern/orgs","repos_url":"https://api.github.com/users/eladbern/repos","events_url":"https://api.github.com/users/eladbern/events{/privacy}","received_events_url":"https://api.github.com/users/eladbern/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":14872779982,"node_id":"ATPVTE_lADOAAJhcs5AMECIzwAAAAN2fJzO","url":"https://api.github.com/repos/redis/redis/issues/events/14872779982","actor":{"login":"oranagra","id":7045099,"node_id":"MDQ6VXNlcjcwNDUwOTk=","avatar_url":"https://avatars.githubusercontent.com/u/7045099?v=4","gravatar_id":"","url":"https://api.github.com/users/oranagra","html_url":"https://github.com/oranagra","followers_url":"https://api.github.com/users/oranagra/followers","following_url":"https://api.github.com/users/oranagra/following{/other_user}","gists_url":"https://api.github.com/users/oranagra/gists{/gist_id}","starred_url":"https://api.github.com/users/oranagra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oranagra/subscriptions","organizations_url":"https://api.github.com/users/oranagra/orgs","repos_url":"https://api.github.com/users/oranagra/repos","events_url":"https://api.github.com/users/oranagra/events{/privacy}","received_events_url":"https://api.github.com/users/oranagra/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"added_to_project_v2","commit_id":null,"commit_url":null,"created_at":"2023-12-25T12:38:04Z","performed_via_github_app":null},{"id":15081091034,"node_id":"PVTISC_lADOAAJhcs5AMECIzwAAAAOC5y_a","url":"https://api.github.com/repos/redis/redis/issues/events/15081091034","actor":{"login":"github-project-automation[bot]","id":113052574,"node_id":"BOT_kgDOBr0Lng","avatar_url":"https://avatars.githubusercontent.com/in/235829?v=4","gravatar_id":"","url":"https://api.github.com/users/github-project-automation%5Bbot%5D","html_url":"https://github.com/apps/github-project-automation","followers_url":"https://api.github.com/users/github-project-automation%5Bbot%5D/followers","following_url":"https://api.github.com/users/github-project-automation%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/github-project-automation%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/github-project-automation%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/github-project-automation%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/github-project-automation%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/github-project-automation%5Bbot%5D/repos","events_url":"https://api.github.com/users/github-project-automation%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/github-project-automation%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"event":"project_v2_item_status_changed","commit_id":null,"commit_url":null,"created_at":"2023-12-25T12:38:06Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/redis/redis/issues/comments/1868968978","html_url":"https://github.com/redis/redis/issues/9926#issuecomment-1868968978","issue_url":"https://api.github.com/repos/redis/redis/issues/9926","id":1868968978,"node_id":"IC_kwDOAAJhcs5vZjQS","user":{"login":"oranagra","id":7045099,"node_id":"MDQ6VXNlcjcwNDUwOTk=","avatar_url":"https://avatars.githubusercontent.com/u/7045099?v=4","gravatar_id":"","url":"https://api.github.com/users/oranagra","html_url":"https://github.com/oranagra","followers_url":"https://api.github.com/users/oranagra/followers","following_url":"https://api.github.com/users/oranagra/following{/other_user}","gists_url":"https://api.github.com/users/oranagra/gists{/gist_id}","starred_url":"https://api.github.com/users/oranagra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oranagra/subscriptions","organizations_url":"https://api.github.com/users/oranagra/orgs","repos_url":"https://api.github.com/users/oranagra/repos","events_url":"https://api.github.com/users/oranagra/events{/privacy}","received_events_url":"https://api.github.com/users/oranagra/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-25T12:43:28Z","updated_at":"2023-12-25T12:43:28Z","body":"client eviction is off by default, so i don't think it changes the picture here.\r\ni still think we should just allow some grace, i.e. smaller multi-execs should be allowed in OOM state (unless they contain DENYOOM commands).\r\ni suppose that instead of just allowing them till a threshold of 128 commands or alike, we can use argv_len_sums (e.g. some constant of 32kb?)\r\n\r\nanyone interested in coding this and it's test?","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/redis/redis/issues/comments/1868968978/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"oranagra","id":7045099,"node_id":"MDQ6VXNlcjcwNDUwOTk=","avatar_url":"https://avatars.githubusercontent.com/u/7045099?v=4","gravatar_id":"","url":"https://api.github.com/users/oranagra","html_url":"https://github.com/oranagra","followers_url":"https://api.github.com/users/oranagra/followers","following_url":"https://api.github.com/users/oranagra/following{/other_user}","gists_url":"https://api.github.com/users/oranagra/gists{/gist_id}","starred_url":"https://api.github.com/users/oranagra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oranagra/subscriptions","organizations_url":"https://api.github.com/users/oranagra/orgs","repos_url":"https://api.github.com/users/oranagra/repos","events_url":"https://api.github.com/users/oranagra/events{/privacy}","received_events_url":"https://api.github.com/users/oranagra/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":11335410747,"node_id":"LE_lADOAAJhcs5AMECIzwAAAAKjpKQ7","url":"https://api.github.com/repos/redis/redis/issues/events/11335410747","actor":{"login":"oranagra","id":7045099,"node_id":"MDQ6VXNlcjcwNDUwOTk=","avatar_url":"https://avatars.githubusercontent.com/u/7045099?v=4","gravatar_id":"","url":"https://api.github.com/users/oranagra","html_url":"https://github.com/oranagra","followers_url":"https://api.github.com/users/oranagra/followers","following_url":"https://api.github.com/users/oranagra/following{/other_user}","gists_url":"https://api.github.com/users/oranagra/gists{/gist_id}","starred_url":"https://api.github.com/users/oranagra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oranagra/subscriptions","organizations_url":"https://api.github.com/users/oranagra/orgs","repos_url":"https://api.github.com/users/oranagra/repos","events_url":"https://api.github.com/users/oranagra/events{/privacy}","received_events_url":"https://api.github.com/users/oranagra/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2023-12-25T12:43:36Z","label":{"name":"state:help-wanted","color":"56a7b7"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/redis/redis/issues/comments/1869030338","html_url":"https://github.com/redis/redis/issues/9926#issuecomment-1869030338","issue_url":"https://api.github.com/repos/redis/redis/issues/9926","id":1869030338,"node_id":"IC_kwDOAAJhcs5vZyPC","user":{"login":"ranshid","id":88133677,"node_id":"MDQ6VXNlcjg4MTMzNjc3","avatar_url":"https://avatars.githubusercontent.com/u/88133677?v=4","gravatar_id":"","url":"https://api.github.com/users/ranshid","html_url":"https://github.com/ranshid","followers_url":"https://api.github.com/users/ranshid/followers","following_url":"https://api.github.com/users/ranshid/following{/other_user}","gists_url":"https://api.github.com/users/ranshid/gists{/gist_id}","starred_url":"https://api.github.com/users/ranshid/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ranshid/subscriptions","organizations_url":"https://api.github.com/users/ranshid/orgs","repos_url":"https://api.github.com/users/ranshid/repos","events_url":"https://api.github.com/users/ranshid/events{/privacy}","received_events_url":"https://api.github.com/users/ranshid/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-25T15:37:20Z","updated_at":"2023-12-25T18:53:22Z","body":"> (e.g. some constant of 32kb?)\r\n\r\n@oranagra why constant size and not something configurable? I would suspect that in some cases using large machines and specific workloads with very large key sizes it might make sense to use different values? I think having a config with default of 32kb is also fine.\r\n\r\n> anyone interested in coding this and it's test?\r\n\r\nI think we can take it. I understand this will be for 8.0 release? in case we add a config which defaults to keep existing behavior, can we consider minor release of this change?\r\n\r\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/redis/redis/issues/comments/1869030338/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ranshid","id":88133677,"node_id":"MDQ6VXNlcjg4MTMzNjc3","avatar_url":"https://avatars.githubusercontent.com/u/88133677?v=4","gravatar_id":"","url":"https://api.github.com/users/ranshid","html_url":"https://github.com/ranshid","followers_url":"https://api.github.com/users/ranshid/followers","following_url":"https://api.github.com/users/ranshid/following{/other_user}","gists_url":"https://api.github.com/users/ranshid/gists{/gist_id}","starred_url":"https://api.github.com/users/ranshid/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ranshid/subscriptions","organizations_url":"https://api.github.com/users/ranshid/orgs","repos_url":"https://api.github.com/users/ranshid/repos","events_url":"https://api.github.com/users/ranshid/events{/privacy}","received_events_url":"https://api.github.com/users/ranshid/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":11335823878,"node_id":"MEE_lADOAAJhcs5AMECIzwAAAAKjqvIG","url":"https://api.github.com/repos/redis/redis/issues/events/11335823878","actor":{"login":"oranagra","id":7045099,"node_id":"MDQ6VXNlcjcwNDUwOTk=","avatar_url":"https://avatars.githubusercontent.com/u/7045099?v=4","gravatar_id":"","url":"https://api.github.com/users/oranagra","html_url":"https://github.com/oranagra","followers_url":"https://api.github.com/users/oranagra/followers","following_url":"https://api.github.com/users/oranagra/following{/other_user}","gists_url":"https://api.github.com/users/oranagra/gists{/gist_id}","starred_url":"https://api.github.com/users/oranagra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oranagra/subscriptions","organizations_url":"https://api.github.com/users/oranagra/orgs","repos_url":"https://api.github.com/users/oranagra/repos","events_url":"https://api.github.com/users/oranagra/events{/privacy}","received_events_url":"https://api.github.com/users/oranagra/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-12-25T15:37:20Z","performed_via_github_app":null},{"id":11335823884,"node_id":"SE_lADOAAJhcs5AMECIzwAAAAKjqvIM","url":"https://api.github.com/repos/redis/redis/issues/events/11335823884","actor":{"login":"oranagra","id":7045099,"node_id":"MDQ6VXNlcjcwNDUwOTk=","avatar_url":"https://avatars.githubusercontent.com/u/7045099?v=4","gravatar_id":"","url":"https://api.github.com/users/oranagra","html_url":"https://github.com/oranagra","followers_url":"https://api.github.com/users/oranagra/followers","following_url":"https://api.github.com/users/oranagra/following{/other_user}","gists_url":"https://api.github.com/users/oranagra/gists{/gist_id}","starred_url":"https://api.github.com/users/oranagra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oranagra/subscriptions","organizations_url":"https://api.github.com/users/oranagra/orgs","repos_url":"https://api.github.com/users/oranagra/repos","events_url":"https://api.github.com/users/oranagra/events{/privacy}","received_events_url":"https://api.github.com/users/oranagra/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-12-25T15:37:20Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/redis/redis/issues/comments/1869203695","html_url":"https://github.com/redis/redis/issues/9926#issuecomment-1869203695","issue_url":"https://api.github.com/repos/redis/redis/issues/9926","id":1869203695,"node_id":"IC_kwDOAAJhcs5vacjv","user":{"login":"madolson","id":34459052,"node_id":"MDQ6VXNlcjM0NDU5MDUy","avatar_url":"https://avatars.githubusercontent.com/u/34459052?v=4","gravatar_id":"","url":"https://api.github.com/users/madolson","html_url":"https://github.com/madolson","followers_url":"https://api.github.com/users/madolson/followers","following_url":"https://api.github.com/users/madolson/following{/other_user}","gists_url":"https://api.github.com/users/madolson/gists{/gist_id}","starred_url":"https://api.github.com/users/madolson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/madolson/subscriptions","organizations_url":"https://api.github.com/users/madolson/orgs","repos_url":"https://api.github.com/users/madolson/repos","events_url":"https://api.github.com/users/madolson/events{/privacy}","received_events_url":"https://api.github.com/users/madolson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-26T02:26:35Z","updated_at":"2023-12-26T02:26:35Z","body":"> I think having a config with default of 32kb is also fine.\r\n\r\nI think a configuration is sensible here, but I was going to advocate we just use the proto_max_bulk_len configuration. Since we've used it elsewhere as the max transient memory limit (for stralgo) if there are no `deny-oom` commands. If we introduce a new configuration, I would rather it be generic to all the \"transient\" memory that can be used by the system as a buffer. \r\n\r\n> I think we can take it. I understand this will be for 8.0 release? \r\n\r\nYeah, it would be for Redis 8.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/redis/redis/issues/comments/1869203695/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"madolson","id":34459052,"node_id":"MDQ6VXNlcjM0NDU5MDUy","avatar_url":"https://avatars.githubusercontent.com/u/34459052?v=4","gravatar_id":"","url":"https://api.github.com/users/madolson","html_url":"https://github.com/madolson","followers_url":"https://api.github.com/users/madolson/followers","following_url":"https://api.github.com/users/madolson/following{/other_user}","gists_url":"https://api.github.com/users/madolson/gists{/gist_id}","starred_url":"https://api.github.com/users/madolson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/madolson/subscriptions","organizations_url":"https://api.github.com/users/madolson/orgs","repos_url":"https://api.github.com/users/madolson/repos","events_url":"https://api.github.com/users/madolson/events{/privacy}","received_events_url":"https://api.github.com/users/madolson/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/redis/redis/issues/comments/1869342111","html_url":"https://github.com/redis/redis/issues/9926#issuecomment-1869342111","issue_url":"https://api.github.com/repos/redis/redis/issues/9926","id":1869342111,"node_id":"IC_kwDOAAJhcs5va-Wf","user":{"login":"oranagra","id":7045099,"node_id":"MDQ6VXNlcjcwNDUwOTk=","avatar_url":"https://avatars.githubusercontent.com/u/7045099?v=4","gravatar_id":"","url":"https://api.github.com/users/oranagra","html_url":"https://github.com/oranagra","followers_url":"https://api.github.com/users/oranagra/followers","following_url":"https://api.github.com/users/oranagra/following{/other_user}","gists_url":"https://api.github.com/users/oranagra/gists{/gist_id}","starred_url":"https://api.github.com/users/oranagra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oranagra/subscriptions","organizations_url":"https://api.github.com/users/oranagra/orgs","repos_url":"https://api.github.com/users/oranagra/repos","events_url":"https://api.github.com/users/oranagra/events{/privacy}","received_events_url":"https://api.github.com/users/oranagra/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-26T07:54:26Z","updated_at":"2023-12-26T07:54:26Z","body":"as much as i don't like hard coded constants, i'm not sure this case calls for a config.\r\ncommands with large arguments are usually write commands (e.g. SETting a new value for a key), and here we aim to allow GET and DEL commands, which only carry a key-name, not a value.\r\n\r\nwe're aiming to solve two things:\r\n1. if the OOM state is temporary (very short living), there's no reason to fail queuing of short multi-exec sequences (e.g. 2 to 10 commands).  (unlike someone who's trying to flood the memory by queuing 10,000 commands, which is the case for which this limit was added).\r\n2. even if the OOM state is not temporary, we should allow read-only and deletions to be executed in a multi-exec (as long as the queued sequence doesn't get huge).\r\n\r\nas such, i don't see a reason for a massive memory limit for that, even using proto_max_bulk_len (default to 512mb) seems far too high to me. a hard coded small value seems sufficient. or alternatively if can be a factor of the used memory (e.g. used_memory / 1000).","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/redis/redis/issues/comments/1869342111/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"oranagra","id":7045099,"node_id":"MDQ6VXNlcjcwNDUwOTk=","avatar_url":"https://avatars.githubusercontent.com/u/7045099?v=4","gravatar_id":"","url":"https://api.github.com/users/oranagra","html_url":"https://github.com/oranagra","followers_url":"https://api.github.com/users/oranagra/followers","following_url":"https://api.github.com/users/oranagra/following{/other_user}","gists_url":"https://api.github.com/users/oranagra/gists{/gist_id}","starred_url":"https://api.github.com/users/oranagra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oranagra/subscriptions","organizations_url":"https://api.github.com/users/oranagra/orgs","repos_url":"https://api.github.com/users/oranagra/repos","events_url":"https://api.github.com/users/oranagra/events{/privacy}","received_events_url":"https://api.github.com/users/oranagra/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/redis/redis/issues/comments/1869362370","html_url":"https://github.com/redis/redis/issues/9926#issuecomment-1869362370","issue_url":"https://api.github.com/repos/redis/redis/issues/9926","id":1869362370,"node_id":"IC_kwDOAAJhcs5vbDTC","user":{"login":"ranshid","id":88133677,"node_id":"MDQ6VXNlcjg4MTMzNjc3","avatar_url":"https://avatars.githubusercontent.com/u/88133677?v=4","gravatar_id":"","url":"https://api.github.com/users/ranshid","html_url":"https://github.com/ranshid","followers_url":"https://api.github.com/users/ranshid/followers","following_url":"https://api.github.com/users/ranshid/following{/other_user}","gists_url":"https://api.github.com/users/ranshid/gists{/gist_id}","starred_url":"https://api.github.com/users/ranshid/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ranshid/subscriptions","organizations_url":"https://api.github.com/users/ranshid/orgs","repos_url":"https://api.github.com/users/ranshid/repos","events_url":"https://api.github.com/users/ranshid/events{/privacy}","received_events_url":"https://api.github.com/users/ranshid/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-26T08:27:46Z","updated_at":"2023-12-26T08:27:46Z","body":"O.K. the reason I suggested the config was in order to help users avoid inconsistent states were they sometimes fail to execute their non-deny-oom requests inside transactions and sometimes don't. I agree this is probably edge case were this will happen but a config can also help users to completely allow non-deny-oom commands or manage some safe limit on transactions growth in case they fear a risk.\r\n\r\nAnyway I am fine with hard coded limit, we can change it in the future if we think it  is needed. ","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/redis/redis/issues/comments/1869362370/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ranshid","id":88133677,"node_id":"MDQ6VXNlcjg4MTMzNjc3","avatar_url":"https://avatars.githubusercontent.com/u/88133677?v=4","gravatar_id":"","url":"https://api.github.com/users/ranshid","html_url":"https://github.com/ranshid","followers_url":"https://api.github.com/users/ranshid/followers","following_url":"https://api.github.com/users/ranshid/following{/other_user}","gists_url":"https://api.github.com/users/ranshid/gists{/gist_id}","starred_url":"https://api.github.com/users/ranshid/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ranshid/subscriptions","organizations_url":"https://api.github.com/users/ranshid/orgs","repos_url":"https://api.github.com/users/ranshid/repos","events_url":"https://api.github.com/users/ranshid/events{/privacy}","received_events_url":"https://api.github.com/users/ranshid/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"eladbern","id":77224466,"node_id":"MDQ6VXNlcjc3MjI0NDY2","avatar_url":"https://avatars.githubusercontent.com/u/77224466?v=4","gravatar_id":"","url":"https://api.github.com/users/eladbern","html_url":"https://github.com/eladbern","followers_url":"https://api.github.com/users/eladbern/followers","following_url":"https://api.github.com/users/eladbern/following{/other_user}","gists_url":"https://api.github.com/users/eladbern/gists{/gist_id}","starred_url":"https://api.github.com/users/eladbern/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eladbern/subscriptions","organizations_url":"https://api.github.com/users/eladbern/orgs","repos_url":"https://api.github.com/users/eladbern/repos","events_url":"https://api.github.com/users/eladbern/events{/privacy}","received_events_url":"https://api.github.com/users/eladbern/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-26T15:03:45Z","updated_at":"2023-12-26T15:03:45Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/redis/redis/issues/12888","repository_url":"https://api.github.com/repos/redis/redis","labels_url":"https://api.github.com/repos/redis/redis/issues/12888/labels{/name}","comments_url":"https://api.github.com/repos/redis/redis/issues/12888/comments","events_url":"https://api.github.com/repos/redis/redis/issues/12888/events","html_url":"https://github.com/redis/redis/pull/12888","id":2056471059,"node_id":"PR_kwDOAAJhcs5iyFwf","number":12888,"title":"Allow non-denyoom commands in MULTI on OOM","user":{"login":"eladbern","id":77224466,"node_id":"MDQ6VXNlcjc3MjI0NDY2","avatar_url":"https://avatars.githubusercontent.com/u/77224466?v=4","gravatar_id":"","url":"https://api.github.com/users/eladbern","html_url":"https://github.com/eladbern","followers_url":"https://api.github.com/users/eladbern/followers","following_url":"https://api.github.com/users/eladbern/following{/other_user}","gists_url":"https://api.github.com/users/eladbern/gists{/gist_id}","starred_url":"https://api.github.com/users/eladbern/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eladbern/subscriptions","organizations_url":"https://api.github.com/users/eladbern/orgs","repos_url":"https://api.github.com/users/eladbern/repos","events_url":"https://api.github.com/users/eladbern/events{/privacy}","received_events_url":"https://api.github.com/users/eladbern/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":2215207711,"node_id":"MDU6TGFiZWwyMjE1MjA3NzEx","url":"https://api.github.com/repos/redis/redis/labels/state:to-be-closed","name":"state:to-be-closed","color":"da79f2","default":false,"description":"requesting the core team to close the issue"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-12-26T14:41:44Z","updated_at":"2024-01-27T06:35:39Z","closed_at":"2024-01-27T06:35:39Z","author_association":"NONE","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":156018,"node_id":"MDEwOlJlcG9zaXRvcnkxNTYwMTg=","name":"redis","full_name":"redis/redis","private":false,"owner":{"login":"redis","id":1529926,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE1Mjk5MjY=","avatar_url":"https://avatars.githubusercontent.com/u/1529926?v=4","gravatar_id":"","url":"https://api.github.com/users/redis","html_url":"https://github.com/redis","followers_url":"https://api.github.com/users/redis/followers","following_url":"https://api.github.com/users/redis/following{/other_user}","gists_url":"https://api.github.com/users/redis/gists{/gist_id}","starred_url":"https://api.github.com/users/redis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/redis/subscriptions","organizations_url":"https://api.github.com/users/redis/orgs","repos_url":"https://api.github.com/users/redis/repos","events_url":"https://api.github.com/users/redis/events{/privacy}","received_events_url":"https://api.github.com/users/redis/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/redis/redis","description":"For developers, who are building real-time data-driven applications, Redis is the preferred, fastest, and most feature-rich cache, data structure server, and document and vector query engine.","fork":false,"url":"https://api.github.com/repos/redis/redis","forks_url":"https://api.github.com/repos/redis/redis/forks","keys_url":"https://api.github.com/repos/redis/redis/keys{/key_id}","collaborators_url":"https://api.github.com/repos/redis/redis/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/redis/redis/teams","hooks_url":"https://api.github.com/repos/redis/redis/hooks","issue_events_url":"https://api.github.com/repos/redis/redis/issues/events{/number}","events_url":"https://api.github.com/repos/redis/redis/events","assignees_url":"https://api.github.com/repos/redis/redis/assignees{/user}","branches_url":"https://api.github.com/repos/redis/redis/branches{/branch}","tags_url":"https://api.github.com/repos/redis/redis/tags","blobs_url":"https://api.github.com/repos/redis/redis/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/redis/redis/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/redis/redis/git/refs{/sha}","trees_url":"https://api.github.com/repos/redis/redis/git/trees{/sha}","statuses_url":"https://api.github.com/repos/redis/redis/statuses/{sha}","languages_url":"https://api.github.com/repos/redis/redis/languages","stargazers_url":"https://api.github.com/repos/redis/redis/stargazers","contributors_url":"https://api.github.com/repos/redis/redis/contributors","subscribers_url":"https://api.github.com/repos/redis/redis/subscribers","subscription_url":"https://api.github.com/repos/redis/redis/subscription","commits_url":"https://api.github.com/repos/redis/redis/commits{/sha}","git_commits_url":"https://api.github.com/repos/redis/redis/git/commits{/sha}","comments_url":"https://api.github.com/repos/redis/redis/comments{/number}","issue_comment_url":"https://api.github.com/repos/redis/redis/issues/comments{/number}","contents_url":"https://api.github.com/repos/redis/redis/contents/{+path}","compare_url":"https://api.github.com/repos/redis/redis/compare/{base}...{head}","merges_url":"https://api.github.com/repos/redis/redis/merges","archive_url":"https://api.github.com/repos/redis/redis/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/redis/redis/downloads","issues_url":"https://api.github.com/repos/redis/redis/issues{/number}","pulls_url":"https://api.github.com/repos/redis/redis/pulls{/number}","milestones_url":"https://api.github.com/repos/redis/redis/milestones{/number}","notifications_url":"https://api.github.com/repos/redis/redis/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/redis/redis/labels{/name}","releases_url":"https://api.github.com/repos/redis/redis/releases{/id}","deployments_url":"https://api.github.com/repos/redis/redis/deployments","created_at":"2009-03-21T22:32:25Z","updated_at":"2025-11-10T01:47:26Z","pushed_at":"2025-11-09T07:49:54Z","git_url":"git://github.com/redis/redis.git","ssh_url":"git@github.com:redis/redis.git","clone_url":"https://github.com/redis/redis.git","svn_url":"https://github.com/redis/redis","homepage":"http://redis.io","size":204997,"stargazers_count":71629,"watchers_count":71629,"language":"C","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":24316,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":2706,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["cache","caching","database","distributed-systems","in-memory","in-memory-database","json","key-value","key-value-store","message-broker","message-queue","no-sql","nosql","open-source","real-time","realtime","redis","time-series","vector-databases","vector-search"],"visibility":"public","forks":24316,"open_issues":2706,"watchers":71629,"default_branch":"unstable","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/redis/redis/pulls/12888","html_url":"https://github.com/redis/redis/pull/12888","diff_url":"https://github.com/redis/redis/pull/12888.diff","patch_url":"https://github.com/redis/redis/pull/12888.patch","merged_at":null},"body":"Allow queuing of multi commands up to 32kb when server is at maxmemory as long as there are no DENY-OOM commands.\r\nFixes: https://github.com/redis/redis/issues/9926","reactions":{"url":"https://api.github.com/repos/redis/redis/issues/12888/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/redis/redis/issues/12888/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/redis/redis/issues/comments/1869617779","html_url":"https://github.com/redis/redis/issues/9926#issuecomment-1869617779","issue_url":"https://api.github.com/repos/redis/redis/issues/9926","id":1869617779,"node_id":"IC_kwDOAAJhcs5vcBpz","user":{"login":"madolson","id":34459052,"node_id":"MDQ6VXNlcjM0NDU5MDUy","avatar_url":"https://avatars.githubusercontent.com/u/34459052?v=4","gravatar_id":"","url":"https://api.github.com/users/madolson","html_url":"https://github.com/madolson","followers_url":"https://api.github.com/users/madolson/followers","following_url":"https://api.github.com/users/madolson/following{/other_user}","gists_url":"https://api.github.com/users/madolson/gists{/gist_id}","starred_url":"https://api.github.com/users/madolson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/madolson/subscriptions","organizations_url":"https://api.github.com/users/madolson/orgs","repos_url":"https://api.github.com/users/madolson/repos","events_url":"https://api.github.com/users/madolson/events{/privacy}","received_events_url":"https://api.github.com/users/madolson/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-26T15:31:08Z","updated_at":"2023-12-26T15:31:08Z","body":"> as such, i don't see a reason for a massive memory limit for that, even using proto_max_bulk_len (default to 512mb) seems far too high to me. a hard coded small value seems sufficient. or alternatively if can be a factor of the used memory (e.g. used_memory / 1000).\r\n\r\nThe use case that came to me is just doing a lot of small deletes, which I have seen in the 100s/1000s be done before. I think that still practically means a limit of like 1MB is probably high enough. (32K seems small) I would prefer we have most constants be tunable, and I'm not sure I really see the problem with having a high limit here, since it needs to be an authenticated connection (and malicious actors can already consume up to the proto_max_bulk_len).","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/redis/redis/issues/comments/1869617779/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"madolson","id":34459052,"node_id":"MDQ6VXNlcjM0NDU5MDUy","avatar_url":"https://avatars.githubusercontent.com/u/34459052?v=4","gravatar_id":"","url":"https://api.github.com/users/madolson","html_url":"https://github.com/madolson","followers_url":"https://api.github.com/users/madolson/followers","following_url":"https://api.github.com/users/madolson/following{/other_user}","gists_url":"https://api.github.com/users/madolson/gists{/gist_id}","starred_url":"https://api.github.com/users/madolson/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/madolson/subscriptions","organizations_url":"https://api.github.com/users/madolson/orgs","repos_url":"https://api.github.com/users/madolson/repos","events_url":"https://api.github.com/users/madolson/events{/privacy}","received_events_url":"https://api.github.com/users/madolson/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/redis/redis/issues/comments/1869645764","html_url":"https://github.com/redis/redis/issues/9926#issuecomment-1869645764","issue_url":"https://api.github.com/repos/redis/redis/issues/9926","id":1869645764,"node_id":"IC_kwDOAAJhcs5vcIfE","user":{"login":"oranagra","id":7045099,"node_id":"MDQ6VXNlcjcwNDUwOTk=","avatar_url":"https://avatars.githubusercontent.com/u/7045099?v=4","gravatar_id":"","url":"https://api.github.com/users/oranagra","html_url":"https://github.com/oranagra","followers_url":"https://api.github.com/users/oranagra/followers","following_url":"https://api.github.com/users/oranagra/following{/other_user}","gists_url":"https://api.github.com/users/oranagra/gists{/gist_id}","starred_url":"https://api.github.com/users/oranagra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oranagra/subscriptions","organizations_url":"https://api.github.com/users/oranagra/orgs","repos_url":"https://api.github.com/users/oranagra/repos","events_url":"https://api.github.com/users/oranagra/events{/privacy}","received_events_url":"https://api.github.com/users/oranagra/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-26T16:22:11Z","updated_at":"2023-12-26T16:22:11Z","body":"i don't like hard code values, but i also don't like confusing users with too many low level configs. in this case i think it is for a very specific corner case, and i don't think it should have a config.\r\n\r\nyes, users can consume to to max_bulk_len per argument, in each argument of each command, and they can always just avoid filling the last argument, so that argv will never be complete and the command won't be executed.\r\nso maybe this limit is more to protect against bugs and innocent abuse rather than an attack.\r\n\r\n@soloestoy maybe you can provide the reason behind https://github.com/redis/redis/pull/5454?\r\n\r\nsee short summary of the problems we want to solve in https://github.com/redis/redis/issues/9926#issuecomment-1869342111","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/redis/redis/issues/comments/1869645764/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"oranagra","id":7045099,"node_id":"MDQ6VXNlcjcwNDUwOTk=","avatar_url":"https://avatars.githubusercontent.com/u/7045099?v=4","gravatar_id":"","url":"https://api.github.com/users/oranagra","html_url":"https://github.com/oranagra","followers_url":"https://api.github.com/users/oranagra/followers","following_url":"https://api.github.com/users/oranagra/following{/other_user}","gists_url":"https://api.github.com/users/oranagra/gists{/gist_id}","starred_url":"https://api.github.com/users/oranagra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oranagra/subscriptions","organizations_url":"https://api.github.com/users/oranagra/orgs","repos_url":"https://api.github.com/users/oranagra/repos","events_url":"https://api.github.com/users/oranagra/events{/privacy}","received_events_url":"https://api.github.com/users/oranagra/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":11340203190,"node_id":"MEE_lADOAAJhcs5AMECIzwAAAAKj7cS2","url":"https://api.github.com/repos/redis/redis/issues/events/11340203190","actor":{"login":"soloestoy","id":24804835,"node_id":"MDQ6VXNlcjI0ODA0ODM1","avatar_url":"https://avatars.githubusercontent.com/u/24804835?v=4","gravatar_id":"","url":"https://api.github.com/users/soloestoy","html_url":"https://github.com/soloestoy","followers_url":"https://api.github.com/users/soloestoy/followers","following_url":"https://api.github.com/users/soloestoy/following{/other_user}","gists_url":"https://api.github.com/users/soloestoy/gists{/gist_id}","starred_url":"https://api.github.com/users/soloestoy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/soloestoy/subscriptions","organizations_url":"https://api.github.com/users/soloestoy/orgs","repos_url":"https://api.github.com/users/soloestoy/repos","events_url":"https://api.github.com/users/soloestoy/events{/privacy}","received_events_url":"https://api.github.com/users/soloestoy/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-12-26T16:22:12Z","performed_via_github_app":null},{"id":11340203194,"node_id":"SE_lADOAAJhcs5AMECIzwAAAAKj7cS6","url":"https://api.github.com/repos/redis/redis/issues/events/11340203194","actor":{"login":"soloestoy","id":24804835,"node_id":"MDQ6VXNlcjI0ODA0ODM1","avatar_url":"https://avatars.githubusercontent.com/u/24804835?v=4","gravatar_id":"","url":"https://api.github.com/users/soloestoy","html_url":"https://github.com/soloestoy","followers_url":"https://api.github.com/users/soloestoy/followers","following_url":"https://api.github.com/users/soloestoy/following{/other_user}","gists_url":"https://api.github.com/users/soloestoy/gists{/gist_id}","starred_url":"https://api.github.com/users/soloestoy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/soloestoy/subscriptions","organizations_url":"https://api.github.com/users/soloestoy/orgs","repos_url":"https://api.github.com/users/soloestoy/repos","events_url":"https://api.github.com/users/soloestoy/events{/privacy}","received_events_url":"https://api.github.com/users/soloestoy/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-12-26T16:22:12Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/redis/redis/issues/comments/1870106797","html_url":"https://github.com/redis/redis/issues/9926#issuecomment-1870106797","issue_url":"https://api.github.com/repos/redis/redis/issues/9926","id":1870106797,"node_id":"IC_kwDOAAJhcs5vd5Ct","user":{"login":"soloestoy","id":24804835,"node_id":"MDQ6VXNlcjI0ODA0ODM1","avatar_url":"https://avatars.githubusercontent.com/u/24804835?v=4","gravatar_id":"","url":"https://api.github.com/users/soloestoy","html_url":"https://github.com/soloestoy","followers_url":"https://api.github.com/users/soloestoy/followers","following_url":"https://api.github.com/users/soloestoy/following{/other_user}","gists_url":"https://api.github.com/users/soloestoy/gists{/gist_id}","starred_url":"https://api.github.com/users/soloestoy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/soloestoy/subscriptions","organizations_url":"https://api.github.com/users/soloestoy/orgs","repos_url":"https://api.github.com/users/soloestoy/repos","events_url":"https://api.github.com/users/soloestoy/events{/privacy}","received_events_url":"https://api.github.com/users/soloestoy/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-12-27T09:16:25Z","updated_at":"2023-12-27T09:16:25Z","body":">redis counts memory usage of (almost) everything, including client buffers and other non-keyspace allocations.\r\nthe maxmemory limit however, is enforced by evicting keys, or rejecting commands.\r\nredis does avoid rejecting some commands, namely read command and delete commands, or actually ones that it thinks are gonna increase the memory usage.\r\n>\r\n>i think the reason MULTI queuing is rejected since the client could otherwise abuse redis but sending more and more commands to be queued, and never send EXEC, which will result in an unbound memory usage.\r\n\r\n@oranagra 's response has already provided a very good explanation of my purpose in #5454 .\r\n\r\nTransactions are special that they are not executed immediately; instead, the commands are cached. Therefore, regardless of whether the commands themselves consume memory during execution, they consume memory while being cached. From this perspective, the cached commands such as `get`/`del`/`set` in a transaction are the same in an OOM scenario. Perhaps I am being inflexible in this respect, but I don't think we need to make any changes. I don't see any difference in an OOM scenario between `multi/del key` and `multi/keys *` or `multi/set key value`.\r\n\r\nHere, I also want to explain the reason for the restriction I made at that time in #5454. Before this, we had users who encountered situations where Redis consumed a lot of memory exceeding `maxmemory` (which could potentially cause machine OOM). After investigation, we found that this was due to users using transactions extensively, and each transaction had many cached commands. Additionally, there were also many connections. As a result, the cached commands in transactions consumed a lot of memory (and since the commands in the transactions were all read-only, no OOM error was triggered). In this scenario, `multi/del key` is no different from `multi/get key`; they both consume a large amount of memory.\r\n\r\nI don't know the original intention of `multi/del key/exec` in this issue. If it is to delete data when OOM is encountered, then there is no need to use transactions. If it is a normal requirement in the business, then, based on my understanding, there must be other transactional commands like `multi/set key value/exec` and `multi/get key/exec`, which will still encounter OOM errors. Therefore, there is no need to specifically exempt `multi/del/exec`. At this point, what the user should truly do is to scale up or clean up invalid data.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/redis/redis/issues/comments/1870106797/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"soloestoy","id":24804835,"node_id":"MDQ6VXNlcjI0ODA0ODM1","avatar_url":"https://avatars.githubusercontent.com/u/24804835?v=4","gravatar_id":"","url":"https://api.github.com/users/soloestoy","html_url":"https://github.com/soloestoy","followers_url":"https://api.github.com/users/soloestoy/followers","following_url":"https://api.github.com/users/soloestoy/following{/other_user}","gists_url":"https://api.github.com/users/soloestoy/gists{/gist_id}","starred_url":"https://api.github.com/users/soloestoy/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/soloestoy/subscriptions","organizations_url":"https://api.github.com/users/soloestoy/orgs","repos_url":"https://api.github.com/users/soloestoy/repos","events_url":"https://api.github.com/users/soloestoy/events{/privacy}","received_events_url":"https://api.github.com/users/soloestoy/received_events","type":"User","user_view_type":"public","site_admin":false}}]