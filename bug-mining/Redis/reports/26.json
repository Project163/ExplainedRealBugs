{"url":"https://api.github.com/repos/redis/redis/issues/7011","repository_url":"https://api.github.com/repos/redis/redis","labels_url":"https://api.github.com/repos/redis/redis/issues/7011/labels{/name}","comments_url":"https://api.github.com/repos/redis/redis/issues/7011/comments","events_url":"https://api.github.com/repos/redis/redis/issues/7011/events","html_url":"https://github.com/redis/redis/issues/7011","id":584683895,"node_id":"MDU6SXNzdWU1ODQ2ODM4OTU=","number":7011,"title":"ACL - Initial Login as the Default User if nopass set, Even with Default User Turned Off.","user":{"login":"IAmATeaPot418","id":5336227,"node_id":"MDQ6VXNlcjUzMzYyMjc=","avatar_url":"https://avatars.githubusercontent.com/u/5336227?v=4","gravatar_id":"","url":"https://api.github.com/users/IAmATeaPot418","html_url":"https://github.com/IAmATeaPot418","followers_url":"https://api.github.com/users/IAmATeaPot418/followers","following_url":"https://api.github.com/users/IAmATeaPot418/following{/other_user}","gists_url":"https://api.github.com/users/IAmATeaPot418/gists{/gist_id}","starred_url":"https://api.github.com/users/IAmATeaPot418/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/IAmATeaPot418/subscriptions","organizations_url":"https://api.github.com/users/IAmATeaPot418/orgs","repos_url":"https://api.github.com/users/IAmATeaPot418/repos","events_url":"https://api.github.com/users/IAmATeaPot418/events{/privacy}","received_events_url":"https://api.github.com/users/IAmATeaPot418/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2020-03-19T20:33:57Z","updated_at":"2020-03-20T12:45:01Z","closed_at":"2020-03-20T12:45:01Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"When you set the default user to off, if you have nopass set for the default users passwords you are still initially authenticated as the default user without requiring authentication.  However, if you set a password for the default user it appears like off is enforced.\r\n\r\nI'm not sure if this is by design and maybe something that will be covered in documentation, but if the default user is turned off shouldn't you require authentication before being logged in as a user?\r\n\r\nWhat are your thoughts here @antirez?\r\n\r\n**Example Below:**\r\n\r\n```\r\n127.0.0.1:6379> acl list\r\n1) \"user admin on #5e884898da28047151d0e56f8dc6292773603d0d6aabbdd62a11ef721d1542d8 ~* +@all\"\r\n2) \"user default off nopass ~* +@all\"\r\n127.0.0.1:6379> acl whoami\r\n\"admin\"\r\n127.0.0.1:6379> exit\r\nJamies-MacBook-Pro:~ jamie$ redis-cli\r\n127.0.0.1:6379> acl whoami\r\n\"default\"\r\n127.0.0.1:6379> set foo bar\r\nOK\r\n127.0.0.1:6379> acl setuser default >password\r\nOK\r\n127.0.0.1:6379> acl list\r\n1) \"user admin on #5e884898da28047151d0e56f8dc6292773603d0d6aabbdd62a11ef721d1542d8 ~* +@all\"\r\n2) \"user default off #5e884898da28047151d0e56f8dc6292773603d0d6aabbdd62a11ef721d1542d8 ~* +@all\"\r\n127.0.0.1:6379> exit\r\nJamies-MacBook-Pro:~ jamie$ redis-cli\r\n127.0.0.1:6379> acl whoami\r\n(error) NOAUTH Authentication required.\r\n127.0.0.1:6379> set foo bar\r\n(error) NOAUTH Authentication required.\r\n127.0.0.1:6379> auth default password\r\n(error) WRONGPASS invalid username-password pair\r\n```","closed_by":{"login":"antirez","id":65632,"node_id":"MDQ6VXNlcjY1NjMy","avatar_url":"https://avatars.githubusercontent.com/u/65632?v=4","gravatar_id":"","url":"https://api.github.com/users/antirez","html_url":"https://github.com/antirez","followers_url":"https://api.github.com/users/antirez/followers","following_url":"https://api.github.com/users/antirez/following{/other_user}","gists_url":"https://api.github.com/users/antirez/gists{/gist_id}","starred_url":"https://api.github.com/users/antirez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/antirez/subscriptions","organizations_url":"https://api.github.com/users/antirez/orgs","repos_url":"https://api.github.com/users/antirez/repos","events_url":"https://api.github.com/users/antirez/events{/privacy}","received_events_url":"https://api.github.com/users/antirez/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/redis/redis/issues/7011/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/redis/redis/issues/7011/timeline","performed_via_github_app":null,"state_reason":"completed"}