[{"url":"https://api.github.com/repos/redis/redis/issues/comments/1979816383","html_url":"https://github.com/redis/redis/issues/13113#issuecomment-1979816383","issue_url":"https://api.github.com/repos/redis/redis/issues/13113","id":1979816383,"node_id":"IC_kwDOAAJhcs52AZm_","user":{"login":"mdouglass","id":5410142,"node_id":"MDQ6VXNlcjU0MTAxNDI=","avatar_url":"https://avatars.githubusercontent.com/u/5410142?v=4","gravatar_id":"","url":"https://api.github.com/users/mdouglass","html_url":"https://github.com/mdouglass","followers_url":"https://api.github.com/users/mdouglass/followers","following_url":"https://api.github.com/users/mdouglass/following{/other_user}","gists_url":"https://api.github.com/users/mdouglass/gists{/gist_id}","starred_url":"https://api.github.com/users/mdouglass/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mdouglass/subscriptions","organizations_url":"https://api.github.com/users/mdouglass/orgs","repos_url":"https://api.github.com/users/mdouglass/repos","events_url":"https://api.github.com/users/mdouglass/events{/privacy}","received_events_url":"https://api.github.com/users/mdouglass/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-05T23:36:07Z","updated_at":"2024-03-05T23:36:07Z","body":"redis 7.0 behaves the same as redis 6.2, the error only appears in redis 7.2. For reference, these are the redis versions (though I'm just pulling 7.0 and 7.2 tags from docker).\r\n\r\ngood\r\n```\r\nredis_version:7.0.13\r\nredis_build_id:8a3b90fcd3d0bc72\r\nos:Linux 6.7.6-200.fc39.x86_64 x86_64\r\n```\r\n\r\nbad\r\n```\r\nredis_version:7.2.4\r\nredis_build_id:30468499a8bc54fe\r\nos:Linux 6.7.6-200.fc39.x86_64 x86_64\r\n```","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/redis/redis/issues/comments/1979816383/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mdouglass","id":5410142,"node_id":"MDQ6VXNlcjU0MTAxNDI=","avatar_url":"https://avatars.githubusercontent.com/u/5410142?v=4","gravatar_id":"","url":"https://api.github.com/users/mdouglass","html_url":"https://github.com/mdouglass","followers_url":"https://api.github.com/users/mdouglass/followers","following_url":"https://api.github.com/users/mdouglass/following{/other_user}","gists_url":"https://api.github.com/users/mdouglass/gists{/gist_id}","starred_url":"https://api.github.com/users/mdouglass/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mdouglass/subscriptions","organizations_url":"https://api.github.com/users/mdouglass/orgs","repos_url":"https://api.github.com/users/mdouglass/repos","events_url":"https://api.github.com/users/mdouglass/events{/privacy}","received_events_url":"https://api.github.com/users/mdouglass/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":12020766574,"node_id":"RTE_lADOAAJhcs6BWm5EzwAAAALMfldu","url":"https://api.github.com/repos/redis/redis/issues/events/12020766574","actor":{"login":"mdouglass","id":5410142,"node_id":"MDQ6VXNlcjU0MTAxNDI=","avatar_url":"https://avatars.githubusercontent.com/u/5410142?v=4","gravatar_id":"","url":"https://api.github.com/users/mdouglass","html_url":"https://github.com/mdouglass","followers_url":"https://api.github.com/users/mdouglass/followers","following_url":"https://api.github.com/users/mdouglass/following{/other_user}","gists_url":"https://api.github.com/users/mdouglass/gists{/gist_id}","starred_url":"https://api.github.com/users/mdouglass/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mdouglass/subscriptions","organizations_url":"https://api.github.com/users/mdouglass/orgs","repos_url":"https://api.github.com/users/mdouglass/repos","events_url":"https://api.github.com/users/mdouglass/events{/privacy}","received_events_url":"https://api.github.com/users/mdouglass/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"renamed","commit_id":null,"commit_url":null,"created_at":"2024-03-05T23:36:14Z","rename":{"from":"[BUG] hIncrBy from lua \"ERR value is not an integer or out of range\" with numeric values of the form 1,000,000,000 + n * 100,000,000 in redis 7.2, but not 6.2","to":"[BUG] hIncrBy from lua \"ERR value is not an integer or out of range\" with numeric values of the form 1,000,000,000 + n * 100,000,000 in redis 7.2, but not 6.2 or 7.0"},"performed_via_github_app":null},{"id":12020782292,"node_id":"RTE_lADOAAJhcs6BWm5EzwAAAALMfpTU","url":"https://api.github.com/repos/redis/redis/issues/events/12020782292","actor":{"login":"mdouglass","id":5410142,"node_id":"MDQ6VXNlcjU0MTAxNDI=","avatar_url":"https://avatars.githubusercontent.com/u/5410142?v=4","gravatar_id":"","url":"https://api.github.com/users/mdouglass","html_url":"https://github.com/mdouglass","followers_url":"https://api.github.com/users/mdouglass/followers","following_url":"https://api.github.com/users/mdouglass/following{/other_user}","gists_url":"https://api.github.com/users/mdouglass/gists{/gist_id}","starred_url":"https://api.github.com/users/mdouglass/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mdouglass/subscriptions","organizations_url":"https://api.github.com/users/mdouglass/orgs","repos_url":"https://api.github.com/users/mdouglass/repos","events_url":"https://api.github.com/users/mdouglass/events{/privacy}","received_events_url":"https://api.github.com/users/mdouglass/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"renamed","commit_id":null,"commit_url":null,"created_at":"2024-03-05T23:39:02Z","rename":{"from":"[BUG] hIncrBy from lua \"ERR value is not an integer or out of range\" with numeric values of the form 1,000,000,000 + n * 100,000,000 in redis 7.2, but not 6.2 or 7.0","to":"[BUG] hIncrBy from lua \"ERR value is not an integer or out of range\" with numeric values of the form n * 100,000,000 in redis 7.2, but not 6.2 or 7.0"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/redis/redis/issues/comments/1979951561","html_url":"https://github.com/redis/redis/issues/13113#issuecomment-1979951561","issue_url":"https://api.github.com/repos/redis/redis/issues/13113","id":1979951561,"node_id":"IC_kwDOAAJhcs52A6nJ","user":{"login":"sundb","id":965798,"node_id":"MDQ6VXNlcjk2NTc5OA==","avatar_url":"https://avatars.githubusercontent.com/u/965798?v=4","gravatar_id":"","url":"https://api.github.com/users/sundb","html_url":"https://github.com/sundb","followers_url":"https://api.github.com/users/sundb/followers","following_url":"https://api.github.com/users/sundb/following{/other_user}","gists_url":"https://api.github.com/users/sundb/gists{/gist_id}","starred_url":"https://api.github.com/users/sundb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sundb/subscriptions","organizations_url":"https://api.github.com/users/sundb/orgs","repos_url":"https://api.github.com/users/sundb/repos","events_url":"https://api.github.com/users/sundb/events{/privacy}","received_events_url":"https://api.github.com/users/sundb/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-06T02:10:24Z","updated_at":"2024-03-06T02:10:24Z","body":"@mdouglass thanks, ths is a bug introducted by #10587.\r\n`fpconv_dtoa` uses exponential expressions to convert 1000000000 (2e+8) and lead to  convert failed in `getLongLongFromObjectOrReply()`.\r\ndo you wanna make a PR to fix it?","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/redis/redis/issues/comments/1979951561/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sundb","id":965798,"node_id":"MDQ6VXNlcjk2NTc5OA==","avatar_url":"https://avatars.githubusercontent.com/u/965798?v=4","gravatar_id":"","url":"https://api.github.com/users/sundb","html_url":"https://github.com/sundb","followers_url":"https://api.github.com/users/sundb/followers","following_url":"https://api.github.com/users/sundb/following{/other_user}","gists_url":"https://api.github.com/users/sundb/gists{/gist_id}","starred_url":"https://api.github.com/users/sundb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sundb/subscriptions","organizations_url":"https://api.github.com/users/sundb/orgs","repos_url":"https://api.github.com/users/sundb/repos","events_url":"https://api.github.com/users/sundb/events{/privacy}","received_events_url":"https://api.github.com/users/sundb/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":12021625201,"node_id":"MEE_lADOAAJhcs6BWm5EzwAAAALMi3Fx","url":"https://api.github.com/repos/redis/redis/issues/events/12021625201","actor":{"login":"mdouglass","id":5410142,"node_id":"MDQ6VXNlcjU0MTAxNDI=","avatar_url":"https://avatars.githubusercontent.com/u/5410142?v=4","gravatar_id":"","url":"https://api.github.com/users/mdouglass","html_url":"https://github.com/mdouglass","followers_url":"https://api.github.com/users/mdouglass/followers","following_url":"https://api.github.com/users/mdouglass/following{/other_user}","gists_url":"https://api.github.com/users/mdouglass/gists{/gist_id}","starred_url":"https://api.github.com/users/mdouglass/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mdouglass/subscriptions","organizations_url":"https://api.github.com/users/mdouglass/orgs","repos_url":"https://api.github.com/users/mdouglass/repos","events_url":"https://api.github.com/users/mdouglass/events{/privacy}","received_events_url":"https://api.github.com/users/mdouglass/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2024-03-06T02:10:25Z","performed_via_github_app":null},{"id":12021625211,"node_id":"SE_lADOAAJhcs6BWm5EzwAAAALMi3F7","url":"https://api.github.com/repos/redis/redis/issues/events/12021625211","actor":{"login":"mdouglass","id":5410142,"node_id":"MDQ6VXNlcjU0MTAxNDI=","avatar_url":"https://avatars.githubusercontent.com/u/5410142?v=4","gravatar_id":"","url":"https://api.github.com/users/mdouglass","html_url":"https://github.com/mdouglass","followers_url":"https://api.github.com/users/mdouglass/followers","following_url":"https://api.github.com/users/mdouglass/following{/other_user}","gists_url":"https://api.github.com/users/mdouglass/gists{/gist_id}","starred_url":"https://api.github.com/users/mdouglass/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mdouglass/subscriptions","organizations_url":"https://api.github.com/users/mdouglass/orgs","repos_url":"https://api.github.com/users/mdouglass/repos","events_url":"https://api.github.com/users/mdouglass/events{/privacy}","received_events_url":"https://api.github.com/users/mdouglass/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2024-03-06T02:10:25Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/redis/redis/issues/comments/1980071219","html_url":"https://github.com/redis/redis/issues/13113#issuecomment-1980071219","issue_url":"https://api.github.com/repos/redis/redis/issues/13113","id":1980071219,"node_id":"IC_kwDOAAJhcs52BX0z","user":{"login":"enjoy-binbin","id":22811481,"node_id":"MDQ6VXNlcjIyODExNDgx","avatar_url":"https://avatars.githubusercontent.com/u/22811481?v=4","gravatar_id":"","url":"https://api.github.com/users/enjoy-binbin","html_url":"https://github.com/enjoy-binbin","followers_url":"https://api.github.com/users/enjoy-binbin/followers","following_url":"https://api.github.com/users/enjoy-binbin/following{/other_user}","gists_url":"https://api.github.com/users/enjoy-binbin/gists{/gist_id}","starred_url":"https://api.github.com/users/enjoy-binbin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/enjoy-binbin/subscriptions","organizations_url":"https://api.github.com/users/enjoy-binbin/orgs","repos_url":"https://api.github.com/users/enjoy-binbin/repos","events_url":"https://api.github.com/users/enjoy-binbin/events{/privacy}","received_events_url":"https://api.github.com/users/enjoy-binbin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-06T04:32:58Z","updated_at":"2024-03-06T04:32:58Z","body":"yes, it is a bug introduced in #10587. so it looks like we should revert the changes in script_lua.c in #10587? or should we find a way to support converting it in string2ll (i feel it is a bit too much)\r\n\r\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/redis/redis/issues/comments/1980071219/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"enjoy-binbin","id":22811481,"node_id":"MDQ6VXNlcjIyODExNDgx","avatar_url":"https://avatars.githubusercontent.com/u/22811481?v=4","gravatar_id":"","url":"https://api.github.com/users/enjoy-binbin","html_url":"https://github.com/enjoy-binbin","followers_url":"https://api.github.com/users/enjoy-binbin/followers","following_url":"https://api.github.com/users/enjoy-binbin/following{/other_user}","gists_url":"https://api.github.com/users/enjoy-binbin/gists{/gist_id}","starred_url":"https://api.github.com/users/enjoy-binbin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/enjoy-binbin/subscriptions","organizations_url":"https://api.github.com/users/enjoy-binbin/orgs","repos_url":"https://api.github.com/users/enjoy-binbin/repos","events_url":"https://api.github.com/users/enjoy-binbin/events{/privacy}","received_events_url":"https://api.github.com/users/enjoy-binbin/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/redis/redis/issues/comments/1980093210","html_url":"https://github.com/redis/redis/issues/13113#issuecomment-1980093210","issue_url":"https://api.github.com/repos/redis/redis/issues/13113","id":1980093210,"node_id":"IC_kwDOAAJhcs52BdMa","user":{"login":"sundb","id":965798,"node_id":"MDQ6VXNlcjk2NTc5OA==","avatar_url":"https://avatars.githubusercontent.com/u/965798?v=4","gravatar_id":"","url":"https://api.github.com/users/sundb","html_url":"https://github.com/sundb","followers_url":"https://api.github.com/users/sundb/followers","following_url":"https://api.github.com/users/sundb/following{/other_user}","gists_url":"https://api.github.com/users/sundb/gists{/gist_id}","starred_url":"https://api.github.com/users/sundb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sundb/subscriptions","organizations_url":"https://api.github.com/users/sundb/orgs","repos_url":"https://api.github.com/users/sundb/repos","events_url":"https://api.github.com/users/sundb/events{/privacy}","received_events_url":"https://api.github.com/users/sundb/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-06T05:03:09Z","updated_at":"2024-03-06T05:03:09Z","body":"@enjoy-binbin i don't like to put it in `string2ll`.\r\nmay be we can check if the lua_Number is a integer by `(long long)num == num`, then\r\ndecide whether to use `fpconv_dtoa` or `ll2string`. ","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/redis/redis/issues/comments/1980093210/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sundb","id":965798,"node_id":"MDQ6VXNlcjk2NTc5OA==","avatar_url":"https://avatars.githubusercontent.com/u/965798?v=4","gravatar_id":"","url":"https://api.github.com/users/sundb","html_url":"https://github.com/sundb","followers_url":"https://api.github.com/users/sundb/followers","following_url":"https://api.github.com/users/sundb/following{/other_user}","gists_url":"https://api.github.com/users/sundb/gists{/gist_id}","starred_url":"https://api.github.com/users/sundb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sundb/subscriptions","organizations_url":"https://api.github.com/users/sundb/orgs","repos_url":"https://api.github.com/users/sundb/repos","events_url":"https://api.github.com/users/sundb/events{/privacy}","received_events_url":"https://api.github.com/users/sundb/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":12022503734,"node_id":"MEE_lADOAAJhcs6BWm5EzwAAAALMmNk2","url":"https://api.github.com/repos/redis/redis/issues/events/12022503734","actor":{"login":"enjoy-binbin","id":22811481,"node_id":"MDQ6VXNlcjIyODExNDgx","avatar_url":"https://avatars.githubusercontent.com/u/22811481?v=4","gravatar_id":"","url":"https://api.github.com/users/enjoy-binbin","html_url":"https://github.com/enjoy-binbin","followers_url":"https://api.github.com/users/enjoy-binbin/followers","following_url":"https://api.github.com/users/enjoy-binbin/following{/other_user}","gists_url":"https://api.github.com/users/enjoy-binbin/gists{/gist_id}","starred_url":"https://api.github.com/users/enjoy-binbin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/enjoy-binbin/subscriptions","organizations_url":"https://api.github.com/users/enjoy-binbin/orgs","repos_url":"https://api.github.com/users/enjoy-binbin/repos","events_url":"https://api.github.com/users/enjoy-binbin/events{/privacy}","received_events_url":"https://api.github.com/users/enjoy-binbin/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2024-03-06T05:03:10Z","performed_via_github_app":null},{"id":12022503741,"node_id":"SE_lADOAAJhcs6BWm5EzwAAAALMmNk9","url":"https://api.github.com/repos/redis/redis/issues/events/12022503741","actor":{"login":"enjoy-binbin","id":22811481,"node_id":"MDQ6VXNlcjIyODExNDgx","avatar_url":"https://avatars.githubusercontent.com/u/22811481?v=4","gravatar_id":"","url":"https://api.github.com/users/enjoy-binbin","html_url":"https://github.com/enjoy-binbin","followers_url":"https://api.github.com/users/enjoy-binbin/followers","following_url":"https://api.github.com/users/enjoy-binbin/following{/other_user}","gists_url":"https://api.github.com/users/enjoy-binbin/gists{/gist_id}","starred_url":"https://api.github.com/users/enjoy-binbin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/enjoy-binbin/subscriptions","organizations_url":"https://api.github.com/users/enjoy-binbin/orgs","repos_url":"https://api.github.com/users/enjoy-binbin/repos","events_url":"https://api.github.com/users/enjoy-binbin/events{/privacy}","received_events_url":"https://api.github.com/users/enjoy-binbin/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2024-03-06T05:03:10Z","performed_via_github_app":null},{"id":12022704349,"node_id":"REFE_lADOAAJhcs6BWm5EzwAAAALMm-jd","url":"https://api.github.com/repos/redis/redis/issues/events/12022704349","actor":{"login":"mdouglass","id":5410142,"node_id":"MDQ6VXNlcjU0MTAxNDI=","avatar_url":"https://avatars.githubusercontent.com/u/5410142?v=4","gravatar_id":"","url":"https://api.github.com/users/mdouglass","html_url":"https://github.com/mdouglass","followers_url":"https://api.github.com/users/mdouglass/followers","following_url":"https://api.github.com/users/mdouglass/following{/other_user}","gists_url":"https://api.github.com/users/mdouglass/gists{/gist_id}","starred_url":"https://api.github.com/users/mdouglass/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mdouglass/subscriptions","organizations_url":"https://api.github.com/users/mdouglass/orgs","repos_url":"https://api.github.com/users/mdouglass/repos","events_url":"https://api.github.com/users/mdouglass/events{/privacy}","received_events_url":"https://api.github.com/users/mdouglass/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"fa1d0e2424a98db7e961263c17dcfd0c38883d71","commit_url":"https://api.github.com/repos/mdouglass/redis/commits/fa1d0e2424a98db7e961263c17dcfd0c38883d71","created_at":"2024-03-06T05:33:44Z","performed_via_github_app":null},{"id":12023117876,"node_id":"REFE_lADOAAJhcs6BWm5EzwAAAALMojg0","url":"https://api.github.com/repos/redis/redis/issues/events/12023117876","actor":{"login":"mdouglass","id":5410142,"node_id":"MDQ6VXNlcjU0MTAxNDI=","avatar_url":"https://avatars.githubusercontent.com/u/5410142?v=4","gravatar_id":"","url":"https://api.github.com/users/mdouglass","html_url":"https://github.com/mdouglass","followers_url":"https://api.github.com/users/mdouglass/followers","following_url":"https://api.github.com/users/mdouglass/following{/other_user}","gists_url":"https://api.github.com/users/mdouglass/gists{/gist_id}","starred_url":"https://api.github.com/users/mdouglass/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mdouglass/subscriptions","organizations_url":"https://api.github.com/users/mdouglass/orgs","repos_url":"https://api.github.com/users/mdouglass/repos","events_url":"https://api.github.com/users/mdouglass/events{/privacy}","received_events_url":"https://api.github.com/users/mdouglass/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"1b5dd0588aabfd9be1929d0b793b60c6fc7f9e50","commit_url":"https://api.github.com/repos/mdouglass/redis/commits/1b5dd0588aabfd9be1929d0b793b60c6fc7f9e50","created_at":"2024-03-06T06:32:12Z","performed_via_github_app":null},{"actor":{"login":"mdouglass","id":5410142,"node_id":"MDQ6VXNlcjU0MTAxNDI=","avatar_url":"https://avatars.githubusercontent.com/u/5410142?v=4","gravatar_id":"","url":"https://api.github.com/users/mdouglass","html_url":"https://github.com/mdouglass","followers_url":"https://api.github.com/users/mdouglass/followers","following_url":"https://api.github.com/users/mdouglass/following{/other_user}","gists_url":"https://api.github.com/users/mdouglass/gists{/gist_id}","starred_url":"https://api.github.com/users/mdouglass/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mdouglass/subscriptions","organizations_url":"https://api.github.com/users/mdouglass/orgs","repos_url":"https://api.github.com/users/mdouglass/repos","events_url":"https://api.github.com/users/mdouglass/events{/privacy}","received_events_url":"https://api.github.com/users/mdouglass/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-06T06:32:40Z","updated_at":"2024-03-06T06:32:40Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/redis/redis/issues/13115","repository_url":"https://api.github.com/repos/redis/redis","labels_url":"https://api.github.com/repos/redis/redis/issues/13115/labels{/name}","comments_url":"https://api.github.com/repos/redis/redis/issues/13115/comments","events_url":"https://api.github.com/repos/redis/redis/issues/13115/events","html_url":"https://github.com/redis/redis/pull/13115","id":2170744616,"node_id":"PR_kwDOAAJhcs5ozISX","number":13115,"title":"Fix conversion of numbers in lua args to redis args","user":{"login":"mdouglass","id":5410142,"node_id":"MDQ6VXNlcjU0MTAxNDI=","avatar_url":"https://avatars.githubusercontent.com/u/5410142?v=4","gravatar_id":"","url":"https://api.github.com/users/mdouglass","html_url":"https://github.com/mdouglass","followers_url":"https://api.github.com/users/mdouglass/followers","following_url":"https://api.github.com/users/mdouglass/following{/other_user}","gists_url":"https://api.github.com/users/mdouglass/gists{/gist_id}","starred_url":"https://api.github.com/users/mdouglass/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mdouglass/subscriptions","organizations_url":"https://api.github.com/users/mdouglass/orgs","repos_url":"https://api.github.com/users/mdouglass/repos","events_url":"https://api.github.com/users/mdouglass/events{/privacy}","received_events_url":"https://api.github.com/users/mdouglass/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":2219859425,"node_id":"MDU6TGFiZWwyMjE5ODU5NDI1","url":"https://api.github.com/repos/redis/redis/labels/release-notes","name":"release-notes","color":"b60205","default":false,"description":"indication that this issue needs to be mentioned in the release notes"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":14,"created_at":"2024-03-06T06:32:40Z","updated_at":"2024-03-10T07:52:47Z","closed_at":"2024-03-10T06:46:49Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":156018,"node_id":"MDEwOlJlcG9zaXRvcnkxNTYwMTg=","name":"redis","full_name":"redis/redis","private":false,"owner":{"login":"redis","id":1529926,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE1Mjk5MjY=","avatar_url":"https://avatars.githubusercontent.com/u/1529926?v=4","gravatar_id":"","url":"https://api.github.com/users/redis","html_url":"https://github.com/redis","followers_url":"https://api.github.com/users/redis/followers","following_url":"https://api.github.com/users/redis/following{/other_user}","gists_url":"https://api.github.com/users/redis/gists{/gist_id}","starred_url":"https://api.github.com/users/redis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/redis/subscriptions","organizations_url":"https://api.github.com/users/redis/orgs","repos_url":"https://api.github.com/users/redis/repos","events_url":"https://api.github.com/users/redis/events{/privacy}","received_events_url":"https://api.github.com/users/redis/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/redis/redis","description":"For developers, who are building real-time data-driven applications, Redis is the preferred, fastest, and most feature-rich cache, data structure server, and document and vector query engine.","fork":false,"url":"https://api.github.com/repos/redis/redis","forks_url":"https://api.github.com/repos/redis/redis/forks","keys_url":"https://api.github.com/repos/redis/redis/keys{/key_id}","collaborators_url":"https://api.github.com/repos/redis/redis/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/redis/redis/teams","hooks_url":"https://api.github.com/repos/redis/redis/hooks","issue_events_url":"https://api.github.com/repos/redis/redis/issues/events{/number}","events_url":"https://api.github.com/repos/redis/redis/events","assignees_url":"https://api.github.com/repos/redis/redis/assignees{/user}","branches_url":"https://api.github.com/repos/redis/redis/branches{/branch}","tags_url":"https://api.github.com/repos/redis/redis/tags","blobs_url":"https://api.github.com/repos/redis/redis/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/redis/redis/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/redis/redis/git/refs{/sha}","trees_url":"https://api.github.com/repos/redis/redis/git/trees{/sha}","statuses_url":"https://api.github.com/repos/redis/redis/statuses/{sha}","languages_url":"https://api.github.com/repos/redis/redis/languages","stargazers_url":"https://api.github.com/repos/redis/redis/stargazers","contributors_url":"https://api.github.com/repos/redis/redis/contributors","subscribers_url":"https://api.github.com/repos/redis/redis/subscribers","subscription_url":"https://api.github.com/repos/redis/redis/subscription","commits_url":"https://api.github.com/repos/redis/redis/commits{/sha}","git_commits_url":"https://api.github.com/repos/redis/redis/git/commits{/sha}","comments_url":"https://api.github.com/repos/redis/redis/comments{/number}","issue_comment_url":"https://api.github.com/repos/redis/redis/issues/comments{/number}","contents_url":"https://api.github.com/repos/redis/redis/contents/{+path}","compare_url":"https://api.github.com/repos/redis/redis/compare/{base}...{head}","merges_url":"https://api.github.com/repos/redis/redis/merges","archive_url":"https://api.github.com/repos/redis/redis/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/redis/redis/downloads","issues_url":"https://api.github.com/repos/redis/redis/issues{/number}","pulls_url":"https://api.github.com/repos/redis/redis/pulls{/number}","milestones_url":"https://api.github.com/repos/redis/redis/milestones{/number}","notifications_url":"https://api.github.com/repos/redis/redis/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/redis/redis/labels{/name}","releases_url":"https://api.github.com/repos/redis/redis/releases{/id}","deployments_url":"https://api.github.com/repos/redis/redis/deployments","created_at":"2009-03-21T22:32:25Z","updated_at":"2025-11-10T01:47:26Z","pushed_at":"2025-11-09T07:49:54Z","git_url":"git://github.com/redis/redis.git","ssh_url":"git@github.com:redis/redis.git","clone_url":"https://github.com/redis/redis.git","svn_url":"https://github.com/redis/redis","homepage":"http://redis.io","size":204997,"stargazers_count":71629,"watchers_count":71629,"language":"C","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":24316,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":2706,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["cache","caching","database","distributed-systems","in-memory","in-memory-database","json","key-value","key-value-store","message-broker","message-queue","no-sql","nosql","open-source","real-time","realtime","redis","time-series","vector-databases","vector-search"],"visibility":"public","forks":24316,"open_issues":2706,"watchers":71629,"default_branch":"unstable","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/redis/redis/pulls/13115","html_url":"https://github.com/redis/redis/pull/13115","diff_url":"https://github.com/redis/redis/pull/13115.diff","patch_url":"https://github.com/redis/redis/pull/13115.patch","merged_at":"2024-03-10T06:46:49Z"},"body":"Since lua_Number is not explicitly an integer or a double, we need to make an effort\r\nto convert it as an integer when that's possible, since the string could later be used\r\nin a context that doesn't support scientific notation (e.g. 1e9 instead of 100000000).\r\n\r\nSince fpconv_dtoa converts numbers with the equivalent of `%f` or `%e`, which ever is shorter,\r\nthis would break if we try to pass a long integer number to a command that takes integer.\r\nwe'll get an implicit conversion to string in Lua, and then the parsing in getLongLongFromObjectOrReply will fail.\r\n\r\n```\r\n> eval \"redis.call('hincrby', 'key', 'field', '1000000000')\" 0\r\n(nil)\r\n> eval \"redis.call('hincrby', 'key', 'field', tonumber('1000000000'))\" 0\r\n(error) ERR value is not an integer or out of range script: ac99c32e4daf7e300d593085b611de261954a946, on @user_script:1.\r\n```\r\n\r\nSwitch to using ll2string if the number can be safely represented as a\r\nlong long.\r\n\r\nThe problem was introduced in #10587 (Redis 7.2).\r\ncloses #13113.","reactions":{"url":"https://api.github.com/repos/redis/redis/issues/13115/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/redis/redis/issues/13115/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":12023149472,"node_id":"COE_lADOAAJhcs6BWm5EzwAAAALMorOg","url":"https://api.github.com/repos/redis/redis/issues/events/12023149472","actor":{"login":"enjoy-binbin","id":22811481,"node_id":"MDQ6VXNlcjIyODExNDgx","avatar_url":"https://avatars.githubusercontent.com/u/22811481?v=4","gravatar_id":"","url":"https://api.github.com/users/enjoy-binbin","html_url":"https://github.com/enjoy-binbin","followers_url":"https://api.github.com/users/enjoy-binbin/followers","following_url":"https://api.github.com/users/enjoy-binbin/following{/other_user}","gists_url":"https://api.github.com/users/enjoy-binbin/gists{/gist_id}","starred_url":"https://api.github.com/users/enjoy-binbin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/enjoy-binbin/subscriptions","organizations_url":"https://api.github.com/users/enjoy-binbin/orgs","repos_url":"https://api.github.com/users/enjoy-binbin/repos","events_url":"https://api.github.com/users/enjoy-binbin/events{/privacy}","received_events_url":"https://api.github.com/users/enjoy-binbin/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"connected","commit_id":null,"commit_url":null,"created_at":"2024-03-06T06:36:22Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/redis/redis/issues/comments/1980179331","html_url":"https://github.com/redis/redis/issues/13113#issuecomment-1980179331","issue_url":"https://api.github.com/repos/redis/redis/issues/13113","id":1980179331,"node_id":"IC_kwDOAAJhcs52ByOD","user":{"login":"mdouglass","id":5410142,"node_id":"MDQ6VXNlcjU0MTAxNDI=","avatar_url":"https://avatars.githubusercontent.com/u/5410142?v=4","gravatar_id":"","url":"https://api.github.com/users/mdouglass","html_url":"https://github.com/mdouglass","followers_url":"https://api.github.com/users/mdouglass/followers","following_url":"https://api.github.com/users/mdouglass/following{/other_user}","gists_url":"https://api.github.com/users/mdouglass/gists{/gist_id}","starred_url":"https://api.github.com/users/mdouglass/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mdouglass/subscriptions","organizations_url":"https://api.github.com/users/mdouglass/orgs","repos_url":"https://api.github.com/users/mdouglass/repos","events_url":"https://api.github.com/users/mdouglass/events{/privacy}","received_events_url":"https://api.github.com/users/mdouglass/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2024-03-06T06:36:36Z","updated_at":"2024-03-06T06:36:36Z","body":"I think that was enough guidance that I was able to figure out what to do. Let me know if there is anything else that I can do to make this work better.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/redis/redis/issues/comments/1980179331/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mdouglass","id":5410142,"node_id":"MDQ6VXNlcjU0MTAxNDI=","avatar_url":"https://avatars.githubusercontent.com/u/5410142?v=4","gravatar_id":"","url":"https://api.github.com/users/mdouglass","html_url":"https://github.com/mdouglass","followers_url":"https://api.github.com/users/mdouglass/followers","following_url":"https://api.github.com/users/mdouglass/following{/other_user}","gists_url":"https://api.github.com/users/mdouglass/gists{/gist_id}","starred_url":"https://api.github.com/users/mdouglass/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mdouglass/subscriptions","organizations_url":"https://api.github.com/users/mdouglass/orgs","repos_url":"https://api.github.com/users/mdouglass/repos","events_url":"https://api.github.com/users/mdouglass/events{/privacy}","received_events_url":"https://api.github.com/users/mdouglass/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":12064661712,"node_id":"CE_lADOAAJhcs6BWm5EzwAAAALPHCDQ","url":"https://api.github.com/repos/redis/redis/issues/events/12064661712","actor":{"login":"oranagra","id":7045099,"node_id":"MDQ6VXNlcjcwNDUwOTk=","avatar_url":"https://avatars.githubusercontent.com/u/7045099?v=4","gravatar_id":"","url":"https://api.github.com/users/oranagra","html_url":"https://github.com/oranagra","followers_url":"https://api.github.com/users/oranagra/followers","following_url":"https://api.github.com/users/oranagra/following{/other_user}","gists_url":"https://api.github.com/users/oranagra/gists{/gist_id}","starred_url":"https://api.github.com/users/oranagra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oranagra/subscriptions","organizations_url":"https://api.github.com/users/oranagra/orgs","repos_url":"https://api.github.com/users/oranagra/repos","events_url":"https://api.github.com/users/oranagra/events{/privacy}","received_events_url":"https://api.github.com/users/oranagra/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2024-03-10T06:46:51Z","state_reason":null,"performed_via_github_app":null},{"id":12064661724,"node_id":"REFE_lADOAAJhcs6BWm5EzwAAAALPHCDc","url":"https://api.github.com/repos/redis/redis/issues/events/12064661724","actor":{"login":"oranagra","id":7045099,"node_id":"MDQ6VXNlcjcwNDUwOTk=","avatar_url":"https://avatars.githubusercontent.com/u/7045099?v=4","gravatar_id":"","url":"https://api.github.com/users/oranagra","html_url":"https://github.com/oranagra","followers_url":"https://api.github.com/users/oranagra/followers","following_url":"https://api.github.com/users/oranagra/following{/other_user}","gists_url":"https://api.github.com/users/oranagra/gists{/gist_id}","starred_url":"https://api.github.com/users/oranagra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oranagra/subscriptions","organizations_url":"https://api.github.com/users/oranagra/orgs","repos_url":"https://api.github.com/users/oranagra/repos","events_url":"https://api.github.com/users/oranagra/events{/privacy}","received_events_url":"https://api.github.com/users/oranagra/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"5fdaa53d20c82c99042e79b737fb9bc157a73d60","commit_url":"https://api.github.com/repos/redis/redis/commits/5fdaa53d20c82c99042e79b737fb9bc157a73d60","created_at":"2024-03-10T06:46:51Z","performed_via_github_app":null},{"id":12828173174,"node_id":"REFE_lADOAAJhcs6BWm5EzwAAAAL8nmN2","url":"https://api.github.com/repos/redis/redis/issues/events/12828173174","actor":{"login":"YaacovHazan","id":31382944,"node_id":"MDQ6VXNlcjMxMzgyOTQ0","avatar_url":"https://avatars.githubusercontent.com/u/31382944?v=4","gravatar_id":"","url":"https://api.github.com/users/YaacovHazan","html_url":"https://github.com/YaacovHazan","followers_url":"https://api.github.com/users/YaacovHazan/followers","following_url":"https://api.github.com/users/YaacovHazan/following{/other_user}","gists_url":"https://api.github.com/users/YaacovHazan/gists{/gist_id}","starred_url":"https://api.github.com/users/YaacovHazan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/YaacovHazan/subscriptions","organizations_url":"https://api.github.com/users/YaacovHazan/orgs","repos_url":"https://api.github.com/users/YaacovHazan/repos","events_url":"https://api.github.com/users/YaacovHazan/events{/privacy}","received_events_url":"https://api.github.com/users/YaacovHazan/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"e397843b311a738ce077bbc3ae19b1753d769c2f","commit_url":"https://api.github.com/repos/YaacovHazan/redis/commits/e397843b311a738ce077bbc3ae19b1753d769c2f","created_at":"2024-05-16T07:14:49Z","performed_via_github_app":null},{"id":12857652995,"node_id":"REFE_lADOAAJhcs6BWm5EzwAAAAL-YDcD","url":"https://api.github.com/repos/redis/redis/issues/events/12857652995","actor":{"login":"YaacovHazan","id":31382944,"node_id":"MDQ6VXNlcjMxMzgyOTQ0","avatar_url":"https://avatars.githubusercontent.com/u/31382944?v=4","gravatar_id":"","url":"https://api.github.com/users/YaacovHazan","html_url":"https://github.com/YaacovHazan","followers_url":"https://api.github.com/users/YaacovHazan/followers","following_url":"https://api.github.com/users/YaacovHazan/following{/other_user}","gists_url":"https://api.github.com/users/YaacovHazan/gists{/gist_id}","starred_url":"https://api.github.com/users/YaacovHazan/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/YaacovHazan/subscriptions","organizations_url":"https://api.github.com/users/YaacovHazan/orgs","repos_url":"https://api.github.com/users/YaacovHazan/repos","events_url":"https://api.github.com/users/YaacovHazan/events{/privacy}","received_events_url":"https://api.github.com/users/YaacovHazan/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"1caaf581f108ffd0eb4409b6cc994bf683e47d27","commit_url":"https://api.github.com/repos/redis/redis/commits/1caaf581f108ffd0eb4409b6cc994bf683e47d27","created_at":"2024-05-19T06:12:38Z","performed_via_github_app":null},{"id":19751520920,"node_id":"REFE_lADOAAJhcs6BWm5EzwAAAASZSEqY","url":"https://api.github.com/repos/redis/redis/issues/events/19751520920","actor":{"login":"funny-dog","id":65377729,"node_id":"MDQ6VXNlcjY1Mzc3NzI5","avatar_url":"https://avatars.githubusercontent.com/u/65377729?v=4","gravatar_id":"","url":"https://api.github.com/users/funny-dog","html_url":"https://github.com/funny-dog","followers_url":"https://api.github.com/users/funny-dog/followers","following_url":"https://api.github.com/users/funny-dog/following{/other_user}","gists_url":"https://api.github.com/users/funny-dog/gists{/gist_id}","starred_url":"https://api.github.com/users/funny-dog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/funny-dog/subscriptions","organizations_url":"https://api.github.com/users/funny-dog/orgs","repos_url":"https://api.github.com/users/funny-dog/repos","events_url":"https://api.github.com/users/funny-dog/events{/privacy}","received_events_url":"https://api.github.com/users/funny-dog/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"0fa9171a6a6c0335f68e81c38ffb2ef7db83623a","commit_url":"https://api.github.com/repos/funny-dog/redis/commits/0fa9171a6a6c0335f68e81c38ffb2ef7db83623a","created_at":"2025-09-17T14:04:59Z","performed_via_github_app":null}]