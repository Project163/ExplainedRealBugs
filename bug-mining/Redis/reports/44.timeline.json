[{"id":4344544809,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDM0NDU0NDgwOQ==","url":"https://api.github.com/repos/redis/redis/issues/events/4344544809","actor":{"login":"yossigo","id":1481195,"node_id":"MDQ6VXNlcjE0ODExOTU=","avatar_url":"https://avatars.githubusercontent.com/u/1481195?v=4","gravatar_id":"","url":"https://api.github.com/users/yossigo","html_url":"https://github.com/yossigo","followers_url":"https://api.github.com/users/yossigo/followers","following_url":"https://api.github.com/users/yossigo/following{/other_user}","gists_url":"https://api.github.com/users/yossigo/gists{/gist_id}","starred_url":"https://api.github.com/users/yossigo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yossigo/subscriptions","organizations_url":"https://api.github.com/users/yossigo/orgs","repos_url":"https://api.github.com/users/yossigo/repos","events_url":"https://api.github.com/users/yossigo/events{/privacy}","received_events_url":"https://api.github.com/users/yossigo/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-02-18T03:02:53Z","performed_via_github_app":null},{"id":4344544813,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQzNDQ1NDQ4MTM=","url":"https://api.github.com/repos/redis/redis/issues/events/4344544813","actor":{"login":"yossigo","id":1481195,"node_id":"MDQ6VXNlcjE0ODExOTU=","avatar_url":"https://avatars.githubusercontent.com/u/1481195?v=4","gravatar_id":"","url":"https://api.github.com/users/yossigo","html_url":"https://github.com/yossigo","followers_url":"https://api.github.com/users/yossigo/followers","following_url":"https://api.github.com/users/yossigo/following{/other_user}","gists_url":"https://api.github.com/users/yossigo/gists{/gist_id}","starred_url":"https://api.github.com/users/yossigo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yossigo/subscriptions","organizations_url":"https://api.github.com/users/yossigo/orgs","repos_url":"https://api.github.com/users/yossigo/repos","events_url":"https://api.github.com/users/yossigo/events{/privacy}","received_events_url":"https://api.github.com/users/yossigo/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-02-18T03:02:53Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/redis/redis/issues/comments/781593829","html_url":"https://github.com/redis/redis/issues/8507#issuecomment-781593829","issue_url":"https://api.github.com/repos/redis/redis/issues/8507","id":781593829,"node_id":"MDEyOklzc3VlQ29tbWVudDc4MTU5MzgyOQ==","user":{"login":"yossigo","id":1481195,"node_id":"MDQ6VXNlcjE0ODExOTU=","avatar_url":"https://avatars.githubusercontent.com/u/1481195?v=4","gravatar_id":"","url":"https://api.github.com/users/yossigo","html_url":"https://github.com/yossigo","followers_url":"https://api.github.com/users/yossigo/followers","following_url":"https://api.github.com/users/yossigo/following{/other_user}","gists_url":"https://api.github.com/users/yossigo/gists{/gist_id}","starred_url":"https://api.github.com/users/yossigo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yossigo/subscriptions","organizations_url":"https://api.github.com/users/yossigo/orgs","repos_url":"https://api.github.com/users/yossigo/repos","events_url":"https://api.github.com/users/yossigo/events{/privacy}","received_events_url":"https://api.github.com/users/yossigo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-18T19:48:53Z","updated_at":"2021-02-18T19:48:53Z","body":"@satheeshaGowda I tried to look at it quickly (didn't have a lot of bandwidth for it) and I don't manage to see this reproduce. According to your configuration, all instances (also masters) should have `replica-announce-ip` set to their hostname but can you confirm this is really the case?\r\n\r\nNormally Sentinel should retain the hostnames it receives and use them, so if you're getting an IP I'd first suspect its origin is external.\r\n\r\nIt might also be useful to take a look at Sentinel logs and the output of `INFO replication` from all instances. ","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/redis/redis/issues/comments/781593829/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"yossigo","id":1481195,"node_id":"MDQ6VXNlcjE0ODExOTU=","avatar_url":"https://avatars.githubusercontent.com/u/1481195?v=4","gravatar_id":"","url":"https://api.github.com/users/yossigo","html_url":"https://github.com/yossigo","followers_url":"https://api.github.com/users/yossigo/followers","following_url":"https://api.github.com/users/yossigo/following{/other_user}","gists_url":"https://api.github.com/users/yossigo/gists{/gist_id}","starred_url":"https://api.github.com/users/yossigo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yossigo/subscriptions","organizations_url":"https://api.github.com/users/yossigo/orgs","repos_url":"https://api.github.com/users/yossigo/repos","events_url":"https://api.github.com/users/yossigo/events{/privacy}","received_events_url":"https://api.github.com/users/yossigo/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":4348632790,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDM0ODYzMjc5MA==","url":"https://api.github.com/repos/redis/redis/issues/events/4348632790","actor":{"login":"satheeshaGowda","id":7914152,"node_id":"MDQ6VXNlcjc5MTQxNTI=","avatar_url":"https://avatars.githubusercontent.com/u/7914152?v=4","gravatar_id":"","url":"https://api.github.com/users/satheeshaGowda","html_url":"https://github.com/satheeshaGowda","followers_url":"https://api.github.com/users/satheeshaGowda/followers","following_url":"https://api.github.com/users/satheeshaGowda/following{/other_user}","gists_url":"https://api.github.com/users/satheeshaGowda/gists{/gist_id}","starred_url":"https://api.github.com/users/satheeshaGowda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/satheeshaGowda/subscriptions","organizations_url":"https://api.github.com/users/satheeshaGowda/orgs","repos_url":"https://api.github.com/users/satheeshaGowda/repos","events_url":"https://api.github.com/users/satheeshaGowda/events{/privacy}","received_events_url":"https://api.github.com/users/satheeshaGowda/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-02-18T19:48:53Z","performed_via_github_app":null},{"id":4348632797,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQzNDg2MzI3OTc=","url":"https://api.github.com/repos/redis/redis/issues/events/4348632797","actor":{"login":"satheeshaGowda","id":7914152,"node_id":"MDQ6VXNlcjc5MTQxNTI=","avatar_url":"https://avatars.githubusercontent.com/u/7914152?v=4","gravatar_id":"","url":"https://api.github.com/users/satheeshaGowda","html_url":"https://github.com/satheeshaGowda","followers_url":"https://api.github.com/users/satheeshaGowda/followers","following_url":"https://api.github.com/users/satheeshaGowda/following{/other_user}","gists_url":"https://api.github.com/users/satheeshaGowda/gists{/gist_id}","starred_url":"https://api.github.com/users/satheeshaGowda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/satheeshaGowda/subscriptions","organizations_url":"https://api.github.com/users/satheeshaGowda/orgs","repos_url":"https://api.github.com/users/satheeshaGowda/repos","events_url":"https://api.github.com/users/satheeshaGowda/events{/privacy}","received_events_url":"https://api.github.com/users/satheeshaGowda/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-02-18T19:48:53Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/redis/redis/issues/comments/781636215","html_url":"https://github.com/redis/redis/issues/8507#issuecomment-781636215","issue_url":"https://api.github.com/repos/redis/redis/issues/8507","id":781636215,"node_id":"MDEyOklzc3VlQ29tbWVudDc4MTYzNjIxNQ==","user":{"login":"satheeshaGowda","id":7914152,"node_id":"MDQ6VXNlcjc5MTQxNTI=","avatar_url":"https://avatars.githubusercontent.com/u/7914152?v=4","gravatar_id":"","url":"https://api.github.com/users/satheeshaGowda","html_url":"https://github.com/satheeshaGowda","followers_url":"https://api.github.com/users/satheeshaGowda/followers","following_url":"https://api.github.com/users/satheeshaGowda/following{/other_user}","gists_url":"https://api.github.com/users/satheeshaGowda/gists{/gist_id}","starred_url":"https://api.github.com/users/satheeshaGowda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/satheeshaGowda/subscriptions","organizations_url":"https://api.github.com/users/satheeshaGowda/orgs","repos_url":"https://api.github.com/users/satheeshaGowda/repos","events_url":"https://api.github.com/users/satheeshaGowda/events{/privacy}","received_events_url":"https://api.github.com/users/satheeshaGowda/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-18T21:09:19Z","updated_at":"2021-02-18T21:09:19Z","body":"yes, as you can see in the yaml spec above `replica-announce-ip` was also set for redis master\r\n\r\n\r\n####Redis Master Initial Conf\r\n```\r\n# Generated by CONFIG REWRITE\r\nreplica-announce-ip  redis-0.redis.REDACTED\r\nreplica-announce-port 6379\r\nroot@redis-0:/data#\r\n```\r\n\r\n\r\n\r\n####Redis Replica Initial Conf\r\n```\r\n# Generated by CONFIG REWRITE\r\nreplica-announce-ip  redis-1.redis.REDACTED\r\nreplica-announce-port 6379\r\nreplicaof redis-0.redis.REDACTED 6379\r\n\r\n```\r\n\r\n\r\n#### Sentinel initial Conf  \r\n```\r\nroot@sentinel-0:/data# cat /etc/redis/sentinel.conf\r\nport 26379\r\nprotected-mode no\r\nsentinel resolve-hostnames yes\r\nsentinel announce-hostnames yes\r\nsentinel announce-ip \"sentinel-0.redis.REDACTED\"\r\nsentinel announce-port 26379\r\nsentinel monitor mymaster redis-0.redis.REDACTED 6379 2\r\nsentinel down-after-milliseconds mymaster 5000\r\nsentinel failover-timeout mymaster 60000\r\nsentinel auth-pass mymaster testpassword\r\n\r\n\r\n# Generated by CONFIG REWRITE\r\nuser default on nopass ~* &* +@all\r\ndir \"/data\"\r\nsentinel myid 8d757184d740e8ffca7de4400d7b510861562980\r\nsentinel resolve-hostnames yes\r\nsentinel announce-hostnames yes\r\nsentinel config-epoch mymaster 0\r\nsentinel leader-epoch mymaster 0\r\nsentinel current-epoch 0\r\nsentinel resolve-hostnames yes\r\nsentinel announce-hostnames yes\r\nsentinel known-replica mymaster IP_OF_REDIS_1_HERE 6379\r\nsentinel resolve-hostnames yes\r\nsentinel announce-hostnames yes\r\nsentinel known-sentinel mymaster sentinel-1.redis.REDACTED 26379 6c83d7d3d83253d6062d918c3296ebc57c86426b\r\nsentinel resolve-hostnames yes\r\nsentinel announce-hostnames yes\r\nsentinel known-sentinel mymaster sentinel-2.redis.REDACTED 26379 31c32ff1f24e173f04b5f93801f627574df37d11\r\n\r\n```\r\n\r\n\r\n\r\n####Redis Master logs\r\n```\r\n\r\nkubectl logs -f redis-0\r\n1:C 18 Feb 2021 20:23:10.789 # oO0OoO0OoO0Oo Redis is starting oO0OoO0OoO0Oo\r\n1:C 18 Feb 2021 20:23:10.789 # Redis version=6.1.242, bits=64, commit=00000000, modified=0, pid=1, just started\r\n1:C 18 Feb 2021 20:23:10.789 # Configuration loaded\r\n1:M 18 Feb 2021 20:23:10.789 * monotonic clock: POSIX clock_gettime\r\n                _._\r\n           _.-``__ ''-._\r\n      _.-``    `.  `_.  ''-._           Redis 6.1.242 (00000000/0) 64 bit\r\n  .-`` .-```.  ```\\/    _.,_ ''-._\r\n (    '      ,       .-`  | `,    )     Running in standalone mode\r\n |`-._`-...-` __...-.``-._|'` _.-'|     Port: 6379\r\n |    `-._   `._    /     _.-'    |     PID: 1\r\n  `-._    `-._  `-./  _.-'    _.-'\r\n |`-._`-._    `-.__.-'    _.-'_.-'|\r\n |    `-._`-._        _.-'_.-'    |           http://redis.io\r\n  `-._    `-._`-.__.-'_.-'    _.-'\r\n |`-._`-._    `-.__.-'    _.-'_.-'|\r\n |    `-._`-._        _.-'_.-'    |\r\n  `-._    `-._`-.__.-'_.-'    _.-'\r\n      `-._    `-.__.-'    _.-'\r\n          `-._        _.-'\r\n              `-.__.-'\r\n\r\n1:M 18 Feb 2021 20:23:10.790 # Server initialized\r\n1:M 18 Feb 2021 20:23:10.792 * Reading RDB preamble from AOF file...\r\n1:M 18 Feb 2021 20:23:10.792 * Loading RDB produced by version 6.0.10\r\n1:M 18 Feb 2021 20:23:10.792 * RDB age 68910 seconds\r\n1:M 18 Feb 2021 20:23:10.792 * RDB memory usage when created 1.79 Mb\r\n1:M 18 Feb 2021 20:23:10.792 * RDB has an AOF tail\r\n1:M 18 Feb 2021 20:23:10.792 * Reading the remaining AOF tail...\r\n1:M 18 Feb 2021 20:23:10.792 * DB loaded from append only file: 0.001 seconds\r\n1:M 18 Feb 2021 20:23:10.792 * Ready to accept connections\r\n1:M 18 Feb 2021 20:23:23.585 * Replica IP_OF_REDIS_1_HERE:6379 asks for synchronization\r\n1:M 18 Feb 2021 20:23:23.585 * Full resync requested by replica IP_OF_REDIS_1_HERE:6379\r\n1:M 18 Feb 2021 20:23:23.585 * Replication backlog created, my new replication IDs are '2a1711e52d7ac391529ecd4788431300fa7e7db2' and '0000000000000000000000000000000000000000'\r\n1:M 18 Feb 2021 20:23:23.585 * Starting BGSAVE for SYNC with target: disk\r\n1:M 18 Feb 2021 20:23:23.586 * Background saving started by pid 11\r\n11:C 18 Feb 2021 20:23:23.592 * DB saved on disk\r\n11:C 18 Feb 2021 20:23:23.593 * RDB: 0 MB of memory used by copy-on-write\r\n1:M 18 Feb 2021 20:23:23.616 * Background saving terminated with success\r\n1:M 18 Feb 2021 20:23:23.616 * Synchronization with replica IP_OF_REDIS_1_HERE:6379 succeeded\r\n\r\n```\r\n\r\n#### Redis Replica logs\r\n```\r\n➜  ~ kubectl logs -f redis-1\r\n1:C 18 Feb 2021 20:23:22.646 # oO0OoO0OoO0Oo Redis is starting oO0OoO0OoO0Oo\r\n1:C 18 Feb 2021 20:23:22.646 # Redis version=6.1.242, bits=64, commit=00000000, modified=0, pid=1, just started\r\n1:C 18 Feb 2021 20:23:22.646 # Configuration loaded\r\n1:S 18 Feb 2021 20:23:22.647 * monotonic clock: POSIX clock_gettime\r\n                _._\r\n           _.-``__ ''-._\r\n      _.-``    `.  `_.  ''-._           Redis 6.1.242 (00000000/0) 64 bit\r\n  .-`` .-```.  ```\\/    _.,_ ''-._\r\n (    '      ,       .-`  | `,    )     Running in standalone mode\r\n |`-._`-...-` __...-.``-._|'` _.-'|     Port: 6379\r\n |    `-._   `._    /     _.-'    |     PID: 1\r\n  `-._    `-._  `-./  _.-'    _.-'\r\n |`-._`-._    `-.__.-'    _.-'_.-'|\r\n |    `-._`-._        _.-'_.-'    |           http://redis.io\r\n  `-._    `-._`-.__.-'_.-'    _.-'\r\n |`-._`-._    `-.__.-'    _.-'_.-'|\r\n |    `-._`-._        _.-'_.-'    |\r\n  `-._    `-._`-.__.-'_.-'    _.-'\r\n      `-._    `-.__.-'    _.-'\r\n          `-._        _.-'\r\n              `-.__.-'\r\n\r\n1:S 18 Feb 2021 20:23:22.648 # Server initialized\r\n1:S 18 Feb 2021 20:23:22.650 * Reading RDB preamble from AOF file...\r\n1:S 18 Feb 2021 20:23:22.650 * Loading RDB produced by version 6.0.10\r\n1:S 18 Feb 2021 20:23:22.650 * RDB age 68752 seconds\r\n1:S 18 Feb 2021 20:23:22.650 * RDB memory usage when created 1.79 Mb\r\n1:S 18 Feb 2021 20:23:22.650 * RDB has an AOF tail\r\n1:S 18 Feb 2021 20:23:22.650 * Reading the remaining AOF tail...\r\n1:S 18 Feb 2021 20:23:22.650 * DB loaded from append only file: 0.001 seconds\r\n1:S 18 Feb 2021 20:23:22.650 * Ready to accept connections\r\n1:S 18 Feb 2021 20:23:23.552 * Connecting to MASTER redis-0.redis.REDACTED:6379\r\n1:S 18 Feb 2021 20:23:23.555 * MASTER <-> REPLICA sync started\r\n1:S 18 Feb 2021 20:23:23.580 * Non blocking connect for SYNC fired the event.\r\n1:S 18 Feb 2021 20:23:23.581 * Master replied to PING, replication can continue...\r\n1:S 18 Feb 2021 20:23:23.583 * (Non critical) Master does not understand REPLCONF ip-address: -ERR REPLCONF ip-address provided by replica instance is too long: 71 bytes\r\n1:S 18 Feb 2021 20:23:23.583 * Partial resynchronization not possible (no cached master)\r\n1:S 18 Feb 2021 20:23:23.585 * Full resync from master: 2a1711e52d7ac391529ecd4788431300fa7e7db2:0\r\n1:S 18 Feb 2021 20:23:23.615 * MASTER <-> REPLICA sync: receiving 200 bytes from master to disk\r\n1:S 18 Feb 2021 20:23:23.615 * MASTER <-> REPLICA sync: Flushing old data\r\n1:S 18 Feb 2021 20:23:23.616 * MASTER <-> REPLICA sync: Loading DB in memory\r\n1:S 18 Feb 2021 20:23:23.621 * Loading RDB produced by version 6.1.242\r\n1:S 18 Feb 2021 20:23:23.621 * RDB age 0 seconds\r\n1:S 18 Feb 2021 20:23:23.621 * RDB memory usage when created 1.83 Mb\r\n1:S 18 Feb 2021 20:23:23.621 * MASTER <-> REPLICA sync: Finished with success\r\n1:S 18 Feb 2021 20:23:23.621 * Background append only file rewriting started by pid 12\r\n1:S 18 Feb 2021 20:23:23.649 * AOF rewrite child asks to stop sending diffs.\r\n12:C 18 Feb 2021 20:23:23.649 * Parent agreed to stop sending diffs. Finalizing AOF...\r\n12:C 18 Feb 2021 20:23:23.649 * Concatenating 0.00 MB of AOF diff received from parent.\r\n12:C 18 Feb 2021 20:23:23.649 * SYNC append only file rewrite performed\r\n12:C 18 Feb 2021 20:23:23.649 * AOF rewrite: 0 MB of memory used by copy-on-write\r\n1:S 18 Feb 2021 20:23:23.655 * Background AOF rewrite terminated with success\r\n1:S 18 Feb 2021 20:23:23.655 * Residual parent diff successfully flushed to the rewritten AOF (0.00 MB)\r\n1:S 18 Feb 2021 20:23:23.655 * Background AOF rewrite finished successfully\r\n\r\n\r\n\r\n\r\n```\r\n\r\n\r\n####Sentinel logs\r\n```\r\n\r\n➜  ~ kubectl logs -f sentinel-0\r\n1:X 18 Feb 2021 20:23:27.147 # oO0OoO0OoO0Oo Redis is starting oO0OoO0OoO0Oo\r\n1:X 18 Feb 2021 20:23:27.147 # Redis version=6.1.242, bits=64, commit=00000000, modified=0, pid=1, just started\r\n1:X 18 Feb 2021 20:23:27.147 # Configuration loaded\r\n1:X 18 Feb 2021 20:23:27.148 * monotonic clock: POSIX clock_gettime\r\n1:X 18 Feb 2021 20:23:27.149 * Running mode=sentinel, port=26379.\r\n1:X 18 Feb 2021 20:23:27.151 # Sentinel ID is 8d757184d740e8ffca7de4400d7b510861562980\r\n1:X 18 Feb 2021 20:23:27.151 # +monitor master mymaster redis-0.redis.REDACTED 6379 quorum 2\r\n1:X 18 Feb 2021 20:23:27.165 * +slave slave IP_OF_REDIS_1_HERE:6379 IP_OF_REDIS_1_HERE 6379 @ mymaster redis-0.redis.REDACTED 6379\r\n1:X 18 Feb 2021 20:23:38.468 * +sentinel sentinel 6c83d7d3d83253d6062d918c3296ebc57c86426b sentinel-1.redis.REDACTED 26379 @ mymaster redis-0.redis.REDACTED 6379\r\n1:X 18 Feb 2021 20:23:57.263 * +sentinel sentinel 31c32ff1f24e173f04b5f93801f627574df37d11 sentinel-2.redis.REDACTED 26379 @ mymaster redis-0.redis.REDACTED 6379\r\n\r\n\r\n```\r\n\r\n\r\n\r\n\r\n####Sentinel Info sentinel\r\n```\r\n127.0.0.1:26379> info sentinel\r\n# Sentinel\r\nsentinel_masters:1\r\nsentinel_tilt:0\r\nsentinel_running_scripts:0\r\nsentinel_scripts_queue_length:0\r\nsentinel_simulate_failure_flags:0\r\nmaster0:name=mymaster,status=ok,address=redis-0.redis.REDACTED:6379,slaves=1,sentinels=3\r\n\r\n\r\n\r\n```\r\n\r\n####Redis Master Info  replication\r\n```\r\n127.0.0.1:6379> info replication\r\n# Replication\r\nrole:master\r\nconnected_slaves:1\r\nslave0:ip=IP_OF_REDIS_1_HERE,port=6379,state=online,offset=667975,lag=1\r\nmaster_failover_state:no-failover\r\nmaster_replid:2a1711e52d7ac391529ecd4788431300fa7e7db2\r\nmaster_replid2:0000000000000000000000000000000000000000\r\nmaster_repl_offset:667975\r\nsecond_repl_offset:-1\r\nrepl_backlog_active:1\r\nrepl_backlog_size:1048576\r\nrepl_backlog_first_byte_offset:1\r\nrepl_backlog_histlen:667975\r\n```\r\n\r\n\r\n####Redis Replica Info  replication\r\n```\r\n127.0.0.1:6379> info replication\r\n# Replication\r\nrole:slave\r\nmaster_host:redis-0.redis.REDACTED\r\nmaster_port:6379\r\nmaster_link_status:up\r\nmaster_last_io_seconds_ago:0\r\nmaster_sync_in_progress:0\r\nslave_repl_offset:699517\r\nslave_priority:100\r\nslave_read_only:1\r\nconnected_slaves:0\r\nmaster_failover_state:no-failover\r\nmaster_replid:2a1711e52d7ac391529ecd4788431300fa7e7db2\r\nmaster_replid2:0000000000000000000000000000000000000000\r\nmaster_repl_offset:699517\r\nsecond_repl_offset:-1\r\nrepl_backlog_active:1\r\nrepl_backlog_size:1048576\r\nrepl_backlog_first_byte_offset:1\r\nrepl_backlog_histlen:699517\r\n```\r\n\r\n\r\n\r\n\r\n\r\n## Query Sentinel for master \r\n```\r\n127.0.0.1:26379> sentinel get-master-addr-by-name mymaster\r\n1) \"redis-0.redis.REDACTED\"\r\n2) \"6379\"\r\n```\r\n\r\n## Query Sentinel for replicas\r\n```\r\n127.0.0.1:26379> sentinel slaves mymaster\r\n1)  1) \"name\"\r\n    2) \"IP_OF_REDIS_1_HERE:6379\"\r\n    3) \"ip\"\r\n    4) \"IP_OF_REDIS_1_HERE\"\r\n    5) \"port\"\r\n    6) \"6379\"\r\n    7) \"runid\"\r\n    8) \"9ceb7c4511021b347edccbc52a8e9b42ba5f72a7\"\r\n    9) \"flags\"\r\n   10) \"slave\"\r\n   11) \"link-pending-commands\"\r\n   12) \"0\"\r\n   13) \"link-refcount\"\r\n   14) \"1\"\r\n   15) \"last-ping-sent\"\r\n   16) \"0\"\r\n   17) \"last-ok-ping-reply\"\r\n   18) \"931\"\r\n   19) \"last-ping-reply\"\r\n   20) \"931\"\r\n   21) \"down-after-milliseconds\"\r\n   22) \"5000\"\r\n   23) \"info-refresh\"\r\n   24) \"3760\"\r\n   25) \"role-reported\"\r\n   26) \"slave\"\r\n   27) \"role-reported-time\"\r\n   28) \"1900736\"\r\n   29) \"master-link-down-time\"\r\n   30) \"0\"\r\n   31) \"master-link-status\"\r\n   32) \"ok\"\r\n   33) \"master-host\"\r\n   34) \"redis-0.redis.REDACTED\"\r\n   35) \"master-port\"\r\n   36) \"6379\"\r\n   37) \"slave-priority\"\r\n   38) \"100\"\r\n   39) \"slave-repl-offset\"\r\n   40) \"734477\"\r\n\r\n\r\n```\r\n\r\n\r\n\r\n\r\n   #### Now trigger failover on sentinel \r\n```\r\n   127.0.0.1:26379> sentinel failover mymaster\r\nOK\r\n\r\n```\r\n\r\n\r\n\r\n\r\n### Sentinel logs post failover\r\n```\r\n1:X 18 Feb 2021 20:56:42.294 # Executing user requested FAILOVER of 'mymaster'\r\n1:X 18 Feb 2021 20:56:42.294 # +new-epoch 1\r\n1:X 18 Feb 2021 20:56:42.294 # +try-failover master mymaster redis-0.redis.REDACTED 6379\r\n1:X 18 Feb 2021 20:56:42.341 # +vote-for-leader 8d757184d740e8ffca7de4400d7b510861562980 1\r\n1:X 18 Feb 2021 20:56:42.341 # +elected-leader master mymaster redis-0.redis.REDACTED 6379\r\n1:X 18 Feb 2021 20:56:42.341 # +failover-state-select-slave master mymaster redis-0.redis.REDACTED 6379\r\n1:X 18 Feb 2021 20:56:42.396 # +selected-slave slave IP_OF_REDIS_1_HERE:6379 IP_OF_REDIS_1_HERE 6379 @ mymaster redis-0.redis.REDACTED 6379\r\n1:X 18 Feb 2021 20:56:42.397 * +failover-state-send-slaveof-noone slave IP_OF_REDIS_1_HERE:6379 IP_OF_REDIS_1_HERE 6379 @ mymaster redis-0.redis.REDACTED 6379\r\n1:X 18 Feb 2021 20:56:42.487 * +failover-state-wait-promotion slave IP_OF_REDIS_1_HERE:6379 IP_OF_REDIS_1_HERE 6379 @ mymaster redis-0.redis.REDACTED 6379\r\n1:X 18 Feb 2021 20:56:43.407 # +promoted-slave slave IP_OF_REDIS_1_HERE:6379 IP_OF_REDIS_1_HERE 6379 @ mymaster redis-0.redis.REDACTED 6379\r\n1:X 18 Feb 2021 20:56:43.407 # +failover-state-reconf-slaves master mymaster redis-0.redis.REDACTED 6379\r\n1:X 18 Feb 2021 20:56:43.480 # +failover-end master mymaster redis-0.redis.REDACTED 6379\r\n1:X 18 Feb 2021 20:56:43.480 # +switch-master mymaster redis-0.redis.REDACTED 6379 IP_OF_REDIS_1_HERE 6379\r\n1:X 18 Feb 2021 20:56:43.482 * +slave slave IP_OF_REDIS_O_HERE:6379 redis-0.redis.REDACTED 6379 @ mymaster IP_OF_REDIS_1_HERE 6379\r\n\r\n\r\n\r\n```\r\n\r\n\r\n### Redis new master logs post failover\r\n```\r\n\r\n=========================\r\n1:M 18 Feb 2021 20:56:42.487 # Connection with master lost.\r\n1:M 18 Feb 2021 20:56:42.487 * Caching the disconnected master state.\r\n1:M 18 Feb 2021 20:56:42.487 * Discarding previously cached master state.\r\n1:M 18 Feb 2021 20:56:42.488 # Setting secondary replication ID to 2a1711e52d7ac391529ecd4788431300fa7e7db2, valid up to offset: 772898. New replication ID is e1e54c0c0217f9855c06ce9e15a1038ddf532332\r\n1:M 18 Feb 2021 20:56:42.488 * MASTER MODE enabled (user request from 'id=4 addr=IP_OF_SENTINEL_0_HERE:38476 laddr=IP_OF_REDIS_1_HERE:6379 fd=7 name=sentinel-8d757184-cmd age=1995 idle=0 flags=x db=0 sub=0 psub=0 multi=4 qbuf=188 qbuf-free=40766 argv-mem=4 obl=45 oll=0 omem=0 tot-mem=61468 events=r cmd=exec user=default redir=-1')\r\n1:M 18 Feb 2021 20:56:42.490 # CONFIG REWRITE executed with success.\r\n1:M 18 Feb 2021 20:56:53.522 * Replica IP_OF_REDIS_O_HERE:6379 asks for synchronization\r\n1:M 18 Feb 2021 20:56:53.523 * Partial resynchronization not accepted: Requested offset for second ID was 775646, but I can reply up to 772898\r\n1:M 18 Feb 2021 20:56:53.523 * Starting BGSAVE for SYNC with target: disk\r\n1:M 18 Feb 2021 20:56:53.523 * Background saving started by pid 23\r\n23:C 18 Feb 2021 20:56:53.528 * DB saved on disk\r\n23:C 18 Feb 2021 20:56:53.528 * RDB: 0 MB of memory used by copy-on-write\r\n1:M 18 Feb 2021 20:56:53.550 * Background saving terminated with success\r\n1:M 18 Feb 2021 20:56:53.550 * Synchronization with replica IP_OF_REDIS_O_HERE:6379 succeeded\r\n\r\n\r\n```\r\n\r\n\r\n#### Redis new replica (old master) log post failover\r\n```\r\n\r\n===========================\r\n1:M 18 Feb 2021 20:56:42.489 # Connection with replica IP_OF_REDIS_1_HERE:6379 lost.\r\n1:S 18 Feb 2021 20:56:53.518 * Before turning into a replica, using my own master parameters to synthesize a cached master: I may be able to synchronize with the new master with just a partial transfer.\r\n1:S 18 Feb 2021 20:56:53.518 * Connecting to MASTER IP_OF_REDIS_1_HERE:6379\r\n1:S 18 Feb 2021 20:56:53.519 * MASTER <-> REPLICA sync started\r\n1:S 18 Feb 2021 20:56:53.519 * REPLICAOF IP_OF_REDIS_1_HERE:6379 enabled (user request from 'id=11 addr=IP_OF_SENTINEL_1_HERE:45492 laddr=IP_OF_REDIS_O_HERE:6379 fd=8 name=sentinel-6c83d7d3-cmd age=10 idle=0 flags=x db=0 sub=0 psub=0 multi=4 qbuf=202 qbuf-free=40752 argv-mem=4 obl=45 oll=0 omem=0 tot-mem=61468 events=r cmd=exec user=default redir=-1')\r\n1:S 18 Feb 2021 20:56:53.521 # CONFIG REWRITE executed with success.\r\n1:S 18 Feb 2021 20:56:53.523 * Non blocking connect for SYNC fired the event.\r\n1:S 18 Feb 2021 20:56:53.523 * Master replied to PING, replication can continue...\r\n1:S 18 Feb 2021 20:56:53.524 * (Non critical) Master does not understand REPLCONF ip-address: -ERR REPLCONF ip-address provided by replica instance is too long: 71 bytes\r\n1:S 18 Feb 2021 20:56:53.524 * Trying a partial resynchronization (request 2a1711e52d7ac391529ecd4788431300fa7e7db2:775646).\r\n1:S 18 Feb 2021 20:56:53.525 * Full resync from master: e1e54c0c0217f9855c06ce9e15a1038ddf532332:776025\r\n1:S 18 Feb 2021 20:56:53.525 * Discarding previously cached master state.\r\n1:S 18 Feb 2021 20:56:53.551 * MASTER <-> REPLICA sync: receiving 203 bytes from master to disk\r\n1:S 18 Feb 2021 20:56:53.551 * MASTER <-> REPLICA sync: Flushing old data\r\n1:S 18 Feb 2021 20:56:53.552 * MASTER <-> REPLICA sync: Loading DB in memory\r\n1:S 18 Feb 2021 20:56:53.554 * Loading RDB produced by version 6.1.242\r\n1:S 18 Feb 2021 20:56:53.554 * RDB age 0 seconds\r\n1:S 18 Feb 2021 20:56:53.554 * RDB memory usage when created 1.95 Mb\r\n1:S 18 Feb 2021 20:56:53.554 * MASTER <-> REPLICA sync: Finished with success\r\n1:S 18 Feb 2021 20:56:53.555 * Background append only file rewriting started by pid 20\r\n1:S 18 Feb 2021 20:56:53.583 * AOF rewrite child asks to stop sending diffs.\r\n20:C 18 Feb 2021 20:56:53.583 * Parent agreed to stop sending diffs. Finalizing AOF...\r\n20:C 18 Feb 2021 20:56:53.583 * Concatenating 0.00 MB of AOF diff received from parent.\r\n20:C 18 Feb 2021 20:56:53.584 * SYNC append only file rewrite performed\r\n20:C 18 Feb 2021 20:56:53.584 * AOF rewrite: 0 MB of memory used by copy-on-write\r\n1:S 18 Feb 2021 20:56:53.683 * Background AOF rewrite terminated with success\r\n1:S 18 Feb 2021 20:56:53.683 * Residual parent diff successfully flushed to the rewritten AOF (0.00 MB)\r\n1:S 18 Feb 2021 20:56:53.684 * Background AOF rewrite finished successfully\r\n\r\n```\r\n\r\n\r\n\r\n## Now Query sentinel for shard master and slaves\r\n\r\n127.0.0.1:26379> sentinel get-master-addr-by-name mymaster\r\n1) \"IP_OF_REDIS_1_HERE\"\r\n2) \"6379\"\r\n127.0.0.1:26379> sentinel slaves mymaster\r\n1)  1) \"name\"\r\n    2) \"IP_OF_REDIS_O_HERE:6379\"\r\n    3) \"ip\"\r\n    4) \"redis-0.redis.REDACTED\"\r\n    5) \"port\"\r\n    6) \"6379\"\r\n    7) \"runid\"\r\n    8) \"8721b6897e67d8cbd1b5e3a6678d209d959fa91b\"\r\n    9) \"flags\"\r\n   10) \"slave\"\r\n   11) \"link-pending-commands\"\r\n   12) \"0\"\r\n   13) \"link-refcount\"\r\n   14) \"1\"\r\n   15) \"last-ping-sent\"\r\n   16) \"0\"\r\n   17) \"last-ok-ping-reply\"\r\n   18) \"855\"\r\n   19) \"last-ping-reply\"\r\n   20) \"855\"\r\n   21) \"down-after-milliseconds\"\r\n   22) \"5000\"\r\n   23) \"info-refresh\"\r\n   24) \"5624\"\r\n   25) \"role-reported\"\r\n   26) \"slave\"\r\n   27) \"role-reported-time\"\r\n   28) \"166211\"\r\n   29) \"master-link-down-time\"\r\n   30) \"0\"\r\n   31) \"master-link-status\"\r\n   32) \"ok\"\r\n   33) \"master-host\"\r\n   34) \"IP_OF_REDIS_1_HERE\"\r\n   35) \"master-port\"\r\n   36) \"6379\"\r\n   37) \"slave-priority\"\r\n   38) \"100\"\r\n   39) \"slave-repl-offset\"\r\n   40) \"825331\"\r\n127.0.0.1:26379>\r\n\r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/redis/redis/issues/comments/781636215/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"satheeshaGowda","id":7914152,"node_id":"MDQ6VXNlcjc5MTQxNTI=","avatar_url":"https://avatars.githubusercontent.com/u/7914152?v=4","gravatar_id":"","url":"https://api.github.com/users/satheeshaGowda","html_url":"https://github.com/satheeshaGowda","followers_url":"https://api.github.com/users/satheeshaGowda/followers","following_url":"https://api.github.com/users/satheeshaGowda/following{/other_user}","gists_url":"https://api.github.com/users/satheeshaGowda/gists{/gist_id}","starred_url":"https://api.github.com/users/satheeshaGowda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/satheeshaGowda/subscriptions","organizations_url":"https://api.github.com/users/satheeshaGowda/orgs","repos_url":"https://api.github.com/users/satheeshaGowda/repos","events_url":"https://api.github.com/users/satheeshaGowda/events{/privacy}","received_events_url":"https://api.github.com/users/satheeshaGowda/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/redis/redis/issues/comments/781638234","html_url":"https://github.com/redis/redis/issues/8507#issuecomment-781638234","issue_url":"https://api.github.com/repos/redis/redis/issues/8507","id":781638234,"node_id":"MDEyOklzc3VlQ29tbWVudDc4MTYzODIzNA==","user":{"login":"satheeshaGowda","id":7914152,"node_id":"MDQ6VXNlcjc5MTQxNTI=","avatar_url":"https://avatars.githubusercontent.com/u/7914152?v=4","gravatar_id":"","url":"https://api.github.com/users/satheeshaGowda","html_url":"https://github.com/satheeshaGowda","followers_url":"https://api.github.com/users/satheeshaGowda/followers","following_url":"https://api.github.com/users/satheeshaGowda/following{/other_user}","gists_url":"https://api.github.com/users/satheeshaGowda/gists{/gist_id}","starred_url":"https://api.github.com/users/satheeshaGowda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/satheeshaGowda/subscriptions","organizations_url":"https://api.github.com/users/satheeshaGowda/orgs","repos_url":"https://api.github.com/users/satheeshaGowda/repos","events_url":"https://api.github.com/users/satheeshaGowda/events{/privacy}","received_events_url":"https://api.github.com/users/satheeshaGowda/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-18T21:13:17Z","updated_at":"2021-02-18T21:13:17Z","body":"so as you can see sentinel \r\n1. Vending Replicas IP (always before/after failover)\r\n2. Vending Master IP post failover \r\n\r\n\r\nnoticed following log, may be its a bug or limitation on the length of the host name?\r\n\r\n```\r\n1:S 18 Feb 2021 20:23:23.583 * (Non critical) Master does not understand REPLCONF ip-address: -ERR REPLCONF ip-address provided by replica instance is too long: 71 bytes\r\n```","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/redis/redis/issues/comments/781638234/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"satheeshaGowda","id":7914152,"node_id":"MDQ6VXNlcjc5MTQxNTI=","avatar_url":"https://avatars.githubusercontent.com/u/7914152?v=4","gravatar_id":"","url":"https://api.github.com/users/satheeshaGowda","html_url":"https://github.com/satheeshaGowda","followers_url":"https://api.github.com/users/satheeshaGowda/followers","following_url":"https://api.github.com/users/satheeshaGowda/following{/other_user}","gists_url":"https://api.github.com/users/satheeshaGowda/gists{/gist_id}","starred_url":"https://api.github.com/users/satheeshaGowda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/satheeshaGowda/subscriptions","organizations_url":"https://api.github.com/users/satheeshaGowda/orgs","repos_url":"https://api.github.com/users/satheeshaGowda/repos","events_url":"https://api.github.com/users/satheeshaGowda/events{/privacy}","received_events_url":"https://api.github.com/users/satheeshaGowda/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/redis/redis/issues/comments/781639453","html_url":"https://github.com/redis/redis/issues/8507#issuecomment-781639453","issue_url":"https://api.github.com/repos/redis/redis/issues/8507","id":781639453,"node_id":"MDEyOklzc3VlQ29tbWVudDc4MTYzOTQ1Mw==","user":{"login":"yossigo","id":1481195,"node_id":"MDQ6VXNlcjE0ODExOTU=","avatar_url":"https://avatars.githubusercontent.com/u/1481195?v=4","gravatar_id":"","url":"https://api.github.com/users/yossigo","html_url":"https://github.com/yossigo","followers_url":"https://api.github.com/users/yossigo/followers","following_url":"https://api.github.com/users/yossigo/following{/other_user}","gists_url":"https://api.github.com/users/yossigo/gists{/gist_id}","starred_url":"https://api.github.com/users/yossigo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yossigo/subscriptions","organizations_url":"https://api.github.com/users/yossigo/orgs","repos_url":"https://api.github.com/users/yossigo/repos","events_url":"https://api.github.com/users/yossigo/events{/privacy}","received_events_url":"https://api.github.com/users/yossigo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-18T21:15:33Z","updated_at":"2021-02-18T21:15:33Z","body":"@satheeshaGowda This seems to be the problem, the `REPLCONF` fails and as a result the replica remains identified by its IP (the default), effectively ignoring `replica-announce-ip`.\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/redis/redis/issues/comments/781639453/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"yossigo","id":1481195,"node_id":"MDQ6VXNlcjE0ODExOTU=","avatar_url":"https://avatars.githubusercontent.com/u/1481195?v=4","gravatar_id":"","url":"https://api.github.com/users/yossigo","html_url":"https://github.com/yossigo","followers_url":"https://api.github.com/users/yossigo/followers","following_url":"https://api.github.com/users/yossigo/following{/other_user}","gists_url":"https://api.github.com/users/yossigo/gists{/gist_id}","starred_url":"https://api.github.com/users/yossigo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yossigo/subscriptions","organizations_url":"https://api.github.com/users/yossigo/orgs","repos_url":"https://api.github.com/users/yossigo/repos","events_url":"https://api.github.com/users/yossigo/events{/privacy}","received_events_url":"https://api.github.com/users/yossigo/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":4348962314,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDM0ODk2MjMxNA==","url":"https://api.github.com/repos/redis/redis/issues/events/4348962314","actor":{"login":"satheeshaGowda","id":7914152,"node_id":"MDQ6VXNlcjc5MTQxNTI=","avatar_url":"https://avatars.githubusercontent.com/u/7914152?v=4","gravatar_id":"","url":"https://api.github.com/users/satheeshaGowda","html_url":"https://github.com/satheeshaGowda","followers_url":"https://api.github.com/users/satheeshaGowda/followers","following_url":"https://api.github.com/users/satheeshaGowda/following{/other_user}","gists_url":"https://api.github.com/users/satheeshaGowda/gists{/gist_id}","starred_url":"https://api.github.com/users/satheeshaGowda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/satheeshaGowda/subscriptions","organizations_url":"https://api.github.com/users/satheeshaGowda/orgs","repos_url":"https://api.github.com/users/satheeshaGowda/repos","events_url":"https://api.github.com/users/satheeshaGowda/events{/privacy}","received_events_url":"https://api.github.com/users/satheeshaGowda/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-02-18T21:15:33Z","performed_via_github_app":null},{"id":4348962321,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQzNDg5NjIzMjE=","url":"https://api.github.com/repos/redis/redis/issues/events/4348962321","actor":{"login":"satheeshaGowda","id":7914152,"node_id":"MDQ6VXNlcjc5MTQxNTI=","avatar_url":"https://avatars.githubusercontent.com/u/7914152?v=4","gravatar_id":"","url":"https://api.github.com/users/satheeshaGowda","html_url":"https://github.com/satheeshaGowda","followers_url":"https://api.github.com/users/satheeshaGowda/followers","following_url":"https://api.github.com/users/satheeshaGowda/following{/other_user}","gists_url":"https://api.github.com/users/satheeshaGowda/gists{/gist_id}","starred_url":"https://api.github.com/users/satheeshaGowda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/satheeshaGowda/subscriptions","organizations_url":"https://api.github.com/users/satheeshaGowda/orgs","repos_url":"https://api.github.com/users/satheeshaGowda/repos","events_url":"https://api.github.com/users/satheeshaGowda/events{/privacy}","received_events_url":"https://api.github.com/users/satheeshaGowda/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-02-18T21:15:33Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/redis/redis/issues/comments/781650804","html_url":"https://github.com/redis/redis/issues/8507#issuecomment-781650804","issue_url":"https://api.github.com/repos/redis/redis/issues/8507","id":781650804,"node_id":"MDEyOklzc3VlQ29tbWVudDc4MTY1MDgwNA==","user":{"login":"satheeshaGowda","id":7914152,"node_id":"MDQ6VXNlcjc5MTQxNTI=","avatar_url":"https://avatars.githubusercontent.com/u/7914152?v=4","gravatar_id":"","url":"https://api.github.com/users/satheeshaGowda","html_url":"https://github.com/satheeshaGowda","followers_url":"https://api.github.com/users/satheeshaGowda/followers","following_url":"https://api.github.com/users/satheeshaGowda/following{/other_user}","gists_url":"https://api.github.com/users/satheeshaGowda/gists{/gist_id}","starred_url":"https://api.github.com/users/satheeshaGowda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/satheeshaGowda/subscriptions","organizations_url":"https://api.github.com/users/satheeshaGowda/orgs","repos_url":"https://api.github.com/users/satheeshaGowda/repos","events_url":"https://api.github.com/users/satheeshaGowda/events{/privacy}","received_events_url":"https://api.github.com/users/satheeshaGowda/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-18T21:36:54Z","updated_at":"2021-02-18T21:36:54Z","body":"@yossigo  according to [RFC 1035 section 2.3.4. ](https://tools.ietf.org/html/rfc1035)  my DNS entry is valid it has only 71 characters in total. \r\n\r\nalso verified that according to[ Domain Name Validator ](http://sqa.fyicenter.com/1000207_Domain_Name_Validator.html) my DNS entry is valid.\r\n\r\n\r\nfeels like its checking the IP lengh (holds 39 characters which is the maximum length of an ip6 address.) rather than DNS length, @yossigo something to confirm.\r\n\r\n```\r\n\r\n2.3.4. Size limits\r\n\r\nVarious objects and parameters in the DNS have size limits.  They are\r\nlisted below.  Some could be easily changed, others are more\r\nfundamental.\r\n\r\nlabels          63 octets or less\r\n\r\nnames           255 octets or less\r\n\r\nTTL             positive values of a signed 32 bit number.\r\n\r\nUDP messages    512 octets or less\r\n```","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/redis/redis/issues/comments/781650804/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"satheeshaGowda","id":7914152,"node_id":"MDQ6VXNlcjc5MTQxNTI=","avatar_url":"https://avatars.githubusercontent.com/u/7914152?v=4","gravatar_id":"","url":"https://api.github.com/users/satheeshaGowda","html_url":"https://github.com/satheeshaGowda","followers_url":"https://api.github.com/users/satheeshaGowda/followers","following_url":"https://api.github.com/users/satheeshaGowda/following{/other_user}","gists_url":"https://api.github.com/users/satheeshaGowda/gists{/gist_id}","starred_url":"https://api.github.com/users/satheeshaGowda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/satheeshaGowda/subscriptions","organizations_url":"https://api.github.com/users/satheeshaGowda/orgs","repos_url":"https://api.github.com/users/satheeshaGowda/repos","events_url":"https://api.github.com/users/satheeshaGowda/events{/privacy}","received_events_url":"https://api.github.com/users/satheeshaGowda/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":4349051239,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDM0OTA1MTIzOQ==","url":"https://api.github.com/repos/redis/redis/issues/events/4349051239","actor":{"login":"yossigo","id":1481195,"node_id":"MDQ6VXNlcjE0ODExOTU=","avatar_url":"https://avatars.githubusercontent.com/u/1481195?v=4","gravatar_id":"","url":"https://api.github.com/users/yossigo","html_url":"https://github.com/yossigo","followers_url":"https://api.github.com/users/yossigo/followers","following_url":"https://api.github.com/users/yossigo/following{/other_user}","gists_url":"https://api.github.com/users/yossigo/gists{/gist_id}","starred_url":"https://api.github.com/users/yossigo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yossigo/subscriptions","organizations_url":"https://api.github.com/users/yossigo/orgs","repos_url":"https://api.github.com/users/yossigo/repos","events_url":"https://api.github.com/users/yossigo/events{/privacy}","received_events_url":"https://api.github.com/users/yossigo/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-02-18T21:36:54Z","performed_via_github_app":null},{"id":4349051245,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQzNDkwNTEyNDU=","url":"https://api.github.com/repos/redis/redis/issues/events/4349051245","actor":{"login":"yossigo","id":1481195,"node_id":"MDQ6VXNlcjE0ODExOTU=","avatar_url":"https://avatars.githubusercontent.com/u/1481195?v=4","gravatar_id":"","url":"https://api.github.com/users/yossigo","html_url":"https://github.com/yossigo","followers_url":"https://api.github.com/users/yossigo/followers","following_url":"https://api.github.com/users/yossigo/following{/other_user}","gists_url":"https://api.github.com/users/yossigo/gists{/gist_id}","starred_url":"https://api.github.com/users/yossigo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yossigo/subscriptions","organizations_url":"https://api.github.com/users/yossigo/orgs","repos_url":"https://api.github.com/users/yossigo/repos","events_url":"https://api.github.com/users/yossigo/events{/privacy}","received_events_url":"https://api.github.com/users/yossigo/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-02-18T21:36:54Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/redis/redis/issues/comments/781653302","html_url":"https://github.com/redis/redis/issues/8507#issuecomment-781653302","issue_url":"https://api.github.com/repos/redis/redis/issues/8507","id":781653302,"node_id":"MDEyOklzc3VlQ29tbWVudDc4MTY1MzMwMg==","user":{"login":"satheeshaGowda","id":7914152,"node_id":"MDQ6VXNlcjc5MTQxNTI=","avatar_url":"https://avatars.githubusercontent.com/u/7914152?v=4","gravatar_id":"","url":"https://api.github.com/users/satheeshaGowda","html_url":"https://github.com/satheeshaGowda","followers_url":"https://api.github.com/users/satheeshaGowda/followers","following_url":"https://api.github.com/users/satheeshaGowda/following{/other_user}","gists_url":"https://api.github.com/users/satheeshaGowda/gists{/gist_id}","starred_url":"https://api.github.com/users/satheeshaGowda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/satheeshaGowda/subscriptions","organizations_url":"https://api.github.com/users/satheeshaGowda/orgs","repos_url":"https://api.github.com/users/satheeshaGowda/repos","events_url":"https://api.github.com/users/satheeshaGowda/events{/privacy}","received_events_url":"https://api.github.com/users/satheeshaGowda/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-18T21:42:10Z","updated_at":"2021-02-18T21:42:10Z","body":"looks like thats the case - https://github.com/redis/redis/blob/2dba1e391d3772a8da182d95bde050ffa9d01e4d/src/replication.c#L929","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/redis/redis/issues/comments/781653302/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"satheeshaGowda","id":7914152,"node_id":"MDQ6VXNlcjc5MTQxNTI=","avatar_url":"https://avatars.githubusercontent.com/u/7914152?v=4","gravatar_id":"","url":"https://api.github.com/users/satheeshaGowda","html_url":"https://github.com/satheeshaGowda","followers_url":"https://api.github.com/users/satheeshaGowda/followers","following_url":"https://api.github.com/users/satheeshaGowda/following{/other_user}","gists_url":"https://api.github.com/users/satheeshaGowda/gists{/gist_id}","starred_url":"https://api.github.com/users/satheeshaGowda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/satheeshaGowda/subscriptions","organizations_url":"https://api.github.com/users/satheeshaGowda/orgs","repos_url":"https://api.github.com/users/satheeshaGowda/repos","events_url":"https://api.github.com/users/satheeshaGowda/events{/privacy}","received_events_url":"https://api.github.com/users/satheeshaGowda/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/redis/redis/issues/comments/782732352","html_url":"https://github.com/redis/redis/issues/8507#issuecomment-782732352","issue_url":"https://api.github.com/repos/redis/redis/issues/8507","id":782732352,"node_id":"MDEyOklzc3VlQ29tbWVudDc4MjczMjM1Mg==","user":{"login":"yossigo","id":1481195,"node_id":"MDQ6VXNlcjE0ODExOTU=","avatar_url":"https://avatars.githubusercontent.com/u/1481195?v=4","gravatar_id":"","url":"https://api.github.com/users/yossigo","html_url":"https://github.com/yossigo","followers_url":"https://api.github.com/users/yossigo/followers","following_url":"https://api.github.com/users/yossigo/following{/other_user}","gists_url":"https://api.github.com/users/yossigo/gists{/gist_id}","starred_url":"https://api.github.com/users/yossigo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yossigo/subscriptions","organizations_url":"https://api.github.com/users/yossigo/orgs","repos_url":"https://api.github.com/users/yossigo/repos","events_url":"https://api.github.com/users/yossigo/events{/privacy}","received_events_url":"https://api.github.com/users/yossigo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-20T18:53:42Z","updated_at":"2021-02-20T18:53:42Z","body":"@satheeshaGowda yes, the assumption was clients will report their IP (or IPv6) and not a hostname. This will have to be fixed.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/redis/redis/issues/comments/782732352/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"yossigo","id":1481195,"node_id":"MDQ6VXNlcjE0ODExOTU=","avatar_url":"https://avatars.githubusercontent.com/u/1481195?v=4","gravatar_id":"","url":"https://api.github.com/users/yossigo","html_url":"https://github.com/yossigo","followers_url":"https://api.github.com/users/yossigo/followers","following_url":"https://api.github.com/users/yossigo/following{/other_user}","gists_url":"https://api.github.com/users/yossigo/gists{/gist_id}","starred_url":"https://api.github.com/users/yossigo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yossigo/subscriptions","organizations_url":"https://api.github.com/users/yossigo/orgs","repos_url":"https://api.github.com/users/yossigo/repos","events_url":"https://api.github.com/users/yossigo/events{/privacy}","received_events_url":"https://api.github.com/users/yossigo/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":4355591584,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDM1NTU5MTU4NA==","url":"https://api.github.com/repos/redis/redis/issues/events/4355591584","actor":{"login":"satheeshaGowda","id":7914152,"node_id":"MDQ6VXNlcjc5MTQxNTI=","avatar_url":"https://avatars.githubusercontent.com/u/7914152?v=4","gravatar_id":"","url":"https://api.github.com/users/satheeshaGowda","html_url":"https://github.com/satheeshaGowda","followers_url":"https://api.github.com/users/satheeshaGowda/followers","following_url":"https://api.github.com/users/satheeshaGowda/following{/other_user}","gists_url":"https://api.github.com/users/satheeshaGowda/gists{/gist_id}","starred_url":"https://api.github.com/users/satheeshaGowda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/satheeshaGowda/subscriptions","organizations_url":"https://api.github.com/users/satheeshaGowda/orgs","repos_url":"https://api.github.com/users/satheeshaGowda/repos","events_url":"https://api.github.com/users/satheeshaGowda/events{/privacy}","received_events_url":"https://api.github.com/users/satheeshaGowda/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-02-20T18:53:42Z","performed_via_github_app":null},{"id":4355591585,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQzNTU1OTE1ODU=","url":"https://api.github.com/repos/redis/redis/issues/events/4355591585","actor":{"login":"satheeshaGowda","id":7914152,"node_id":"MDQ6VXNlcjc5MTQxNTI=","avatar_url":"https://avatars.githubusercontent.com/u/7914152?v=4","gravatar_id":"","url":"https://api.github.com/users/satheeshaGowda","html_url":"https://github.com/satheeshaGowda","followers_url":"https://api.github.com/users/satheeshaGowda/followers","following_url":"https://api.github.com/users/satheeshaGowda/following{/other_user}","gists_url":"https://api.github.com/users/satheeshaGowda/gists{/gist_id}","starred_url":"https://api.github.com/users/satheeshaGowda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/satheeshaGowda/subscriptions","organizations_url":"https://api.github.com/users/satheeshaGowda/orgs","repos_url":"https://api.github.com/users/satheeshaGowda/repos","events_url":"https://api.github.com/users/satheeshaGowda/events{/privacy}","received_events_url":"https://api.github.com/users/satheeshaGowda/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-02-20T18:53:42Z","performed_via_github_app":null},{"id":4355672786,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDQzNTU2NzI3ODY=","url":"https://api.github.com/repos/redis/redis/issues/events/4355672786","actor":{"login":"yossigo","id":1481195,"node_id":"MDQ6VXNlcjE0ODExOTU=","avatar_url":"https://avatars.githubusercontent.com/u/1481195?v=4","gravatar_id":"","url":"https://api.github.com/users/yossigo","html_url":"https://github.com/yossigo","followers_url":"https://api.github.com/users/yossigo/followers","following_url":"https://api.github.com/users/yossigo/following{/other_user}","gists_url":"https://api.github.com/users/yossigo/gists{/gist_id}","starred_url":"https://api.github.com/users/yossigo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yossigo/subscriptions","organizations_url":"https://api.github.com/users/yossigo/orgs","repos_url":"https://api.github.com/users/yossigo/repos","events_url":"https://api.github.com/users/yossigo/events{/privacy}","received_events_url":"https://api.github.com/users/yossigo/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"153abf1b753ed44a94dd23bf7fad744333f21985","commit_url":"https://api.github.com/repos/yossigo/redis/commits/153abf1b753ed44a94dd23bf7fad744333f21985","created_at":"2021-02-20T20:32:39Z","performed_via_github_app":null},{"id":4355682085,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDQzNTU2ODIwODU=","url":"https://api.github.com/repos/redis/redis/issues/events/4355682085","actor":{"login":"yossigo","id":1481195,"node_id":"MDQ6VXNlcjE0ODExOTU=","avatar_url":"https://avatars.githubusercontent.com/u/1481195?v=4","gravatar_id":"","url":"https://api.github.com/users/yossigo","html_url":"https://github.com/yossigo","followers_url":"https://api.github.com/users/yossigo/followers","following_url":"https://api.github.com/users/yossigo/following{/other_user}","gists_url":"https://api.github.com/users/yossigo/gists{/gist_id}","starred_url":"https://api.github.com/users/yossigo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yossigo/subscriptions","organizations_url":"https://api.github.com/users/yossigo/orgs","repos_url":"https://api.github.com/users/yossigo/repos","events_url":"https://api.github.com/users/yossigo/events{/privacy}","received_events_url":"https://api.github.com/users/yossigo/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"84c39b2284ee8f77d46398138cad0fd0f924ade5","commit_url":"https://api.github.com/repos/yossigo/redis/commits/84c39b2284ee8f77d46398138cad0fd0f924ade5","created_at":"2021-02-20T20:45:29Z","performed_via_github_app":null},{"actor":{"login":"yossigo","id":1481195,"node_id":"MDQ6VXNlcjE0ODExOTU=","avatar_url":"https://avatars.githubusercontent.com/u/1481195?v=4","gravatar_id":"","url":"https://api.github.com/users/yossigo","html_url":"https://github.com/yossigo","followers_url":"https://api.github.com/users/yossigo/followers","following_url":"https://api.github.com/users/yossigo/following{/other_user}","gists_url":"https://api.github.com/users/yossigo/gists{/gist_id}","starred_url":"https://api.github.com/users/yossigo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yossigo/subscriptions","organizations_url":"https://api.github.com/users/yossigo/orgs","repos_url":"https://api.github.com/users/yossigo/repos","events_url":"https://api.github.com/users/yossigo/events{/privacy}","received_events_url":"https://api.github.com/users/yossigo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-20T20:46:17Z","updated_at":"2021-02-20T20:46:17Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/redis/redis/issues/8517","repository_url":"https://api.github.com/repos/redis/redis","labels_url":"https://api.github.com/repos/redis/redis/issues/8517/labels{/name}","comments_url":"https://api.github.com/repos/redis/redis/issues/8517/comments","events_url":"https://api.github.com/repos/redis/redis/issues/8517/events","html_url":"https://github.com/redis/redis/pull/8517","id":812703445,"node_id":"MDExOlB1bGxSZXF1ZXN0NTc3MDA0MDE1","number":8517,"title":"Fix allowed length for REPLCONF ip-address.","user":{"login":"yossigo","id":1481195,"node_id":"MDQ6VXNlcjE0ODExOTU=","avatar_url":"https://avatars.githubusercontent.com/u/1481195?v=4","gravatar_id":"","url":"https://api.github.com/users/yossigo","html_url":"https://github.com/yossigo","followers_url":"https://api.github.com/users/yossigo/followers","following_url":"https://api.github.com/users/yossigo/following{/other_user}","gists_url":"https://api.github.com/users/yossigo/gists{/gist_id}","starred_url":"https://api.github.com/users/yossigo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yossigo/subscriptions","organizations_url":"https://api.github.com/users/yossigo/orgs","repos_url":"https://api.github.com/users/yossigo/repos","events_url":"https://api.github.com/users/yossigo/events{/privacy}","received_events_url":"https://api.github.com/users/yossigo/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":2219859425,"node_id":"MDU6TGFiZWwyMjE5ODU5NDI1","url":"https://api.github.com/repos/redis/redis/labels/release-notes","name":"release-notes","color":"b60205","default":false,"description":"indication that this issue needs to be mentioned in the release notes"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-02-20T20:46:17Z","updated_at":"2021-02-21T09:22:39Z","closed_at":"2021-02-21T09:22:37Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":156018,"node_id":"MDEwOlJlcG9zaXRvcnkxNTYwMTg=","name":"redis","full_name":"redis/redis","private":false,"owner":{"login":"redis","id":1529926,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE1Mjk5MjY=","avatar_url":"https://avatars.githubusercontent.com/u/1529926?v=4","gravatar_id":"","url":"https://api.github.com/users/redis","html_url":"https://github.com/redis","followers_url":"https://api.github.com/users/redis/followers","following_url":"https://api.github.com/users/redis/following{/other_user}","gists_url":"https://api.github.com/users/redis/gists{/gist_id}","starred_url":"https://api.github.com/users/redis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/redis/subscriptions","organizations_url":"https://api.github.com/users/redis/orgs","repos_url":"https://api.github.com/users/redis/repos","events_url":"https://api.github.com/users/redis/events{/privacy}","received_events_url":"https://api.github.com/users/redis/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/redis/redis","description":"For developers, who are building real-time data-driven applications, Redis is the preferred, fastest, and most feature-rich cache, data structure server, and document and vector query engine.","fork":false,"url":"https://api.github.com/repos/redis/redis","forks_url":"https://api.github.com/repos/redis/redis/forks","keys_url":"https://api.github.com/repos/redis/redis/keys{/key_id}","collaborators_url":"https://api.github.com/repos/redis/redis/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/redis/redis/teams","hooks_url":"https://api.github.com/repos/redis/redis/hooks","issue_events_url":"https://api.github.com/repos/redis/redis/issues/events{/number}","events_url":"https://api.github.com/repos/redis/redis/events","assignees_url":"https://api.github.com/repos/redis/redis/assignees{/user}","branches_url":"https://api.github.com/repos/redis/redis/branches{/branch}","tags_url":"https://api.github.com/repos/redis/redis/tags","blobs_url":"https://api.github.com/repos/redis/redis/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/redis/redis/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/redis/redis/git/refs{/sha}","trees_url":"https://api.github.com/repos/redis/redis/git/trees{/sha}","statuses_url":"https://api.github.com/repos/redis/redis/statuses/{sha}","languages_url":"https://api.github.com/repos/redis/redis/languages","stargazers_url":"https://api.github.com/repos/redis/redis/stargazers","contributors_url":"https://api.github.com/repos/redis/redis/contributors","subscribers_url":"https://api.github.com/repos/redis/redis/subscribers","subscription_url":"https://api.github.com/repos/redis/redis/subscription","commits_url":"https://api.github.com/repos/redis/redis/commits{/sha}","git_commits_url":"https://api.github.com/repos/redis/redis/git/commits{/sha}","comments_url":"https://api.github.com/repos/redis/redis/comments{/number}","issue_comment_url":"https://api.github.com/repos/redis/redis/issues/comments{/number}","contents_url":"https://api.github.com/repos/redis/redis/contents/{+path}","compare_url":"https://api.github.com/repos/redis/redis/compare/{base}...{head}","merges_url":"https://api.github.com/repos/redis/redis/merges","archive_url":"https://api.github.com/repos/redis/redis/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/redis/redis/downloads","issues_url":"https://api.github.com/repos/redis/redis/issues{/number}","pulls_url":"https://api.github.com/repos/redis/redis/pulls{/number}","milestones_url":"https://api.github.com/repos/redis/redis/milestones{/number}","notifications_url":"https://api.github.com/repos/redis/redis/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/redis/redis/labels{/name}","releases_url":"https://api.github.com/repos/redis/redis/releases{/id}","deployments_url":"https://api.github.com/repos/redis/redis/deployments","created_at":"2009-03-21T22:32:25Z","updated_at":"2025-11-10T01:47:26Z","pushed_at":"2025-11-09T07:49:54Z","git_url":"git://github.com/redis/redis.git","ssh_url":"git@github.com:redis/redis.git","clone_url":"https://github.com/redis/redis.git","svn_url":"https://github.com/redis/redis","homepage":"http://redis.io","size":204997,"stargazers_count":71629,"watchers_count":71629,"language":"C","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":24316,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":2706,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["cache","caching","database","distributed-systems","in-memory","in-memory-database","json","key-value","key-value-store","message-broker","message-queue","no-sql","nosql","open-source","real-time","realtime","redis","time-series","vector-databases","vector-search"],"visibility":"public","forks":24316,"open_issues":2706,"watchers":71629,"default_branch":"unstable","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/redis/redis/pulls/8517","html_url":"https://github.com/redis/redis/pull/8517","diff_url":"https://github.com/redis/redis/pull/8517.diff","patch_url":"https://github.com/redis/redis/pull/8517.patch","merged_at":"2021-02-21T09:22:36Z"},"body":"Originally this was limited to IPv6 address length, but effectively it\r\nhas been used for host names and now that Sentinel accepts that as well\r\nwe need to be able to store full hostnames.\r\n\r\nAlso saves a few bytes per active client.\r\n\r\nFixes #8507","reactions":{"url":"https://api.github.com/repos/redis/redis/issues/8517/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/redis/redis/issues/8517/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":4356147278,"node_id":"MDExOkNsb3NlZEV2ZW50NDM1NjE0NzI3OA==","url":"https://api.github.com/repos/redis/redis/issues/events/4356147278","actor":{"login":"yossigo","id":1481195,"node_id":"MDQ6VXNlcjE0ODExOTU=","avatar_url":"https://avatars.githubusercontent.com/u/1481195?v=4","gravatar_id":"","url":"https://api.github.com/users/yossigo","html_url":"https://github.com/yossigo","followers_url":"https://api.github.com/users/yossigo/followers","following_url":"https://api.github.com/users/yossigo/following{/other_user}","gists_url":"https://api.github.com/users/yossigo/gists{/gist_id}","starred_url":"https://api.github.com/users/yossigo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yossigo/subscriptions","organizations_url":"https://api.github.com/users/yossigo/orgs","repos_url":"https://api.github.com/users/yossigo/repos","events_url":"https://api.github.com/users/yossigo/events{/privacy}","received_events_url":"https://api.github.com/users/yossigo/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2021-02-21T09:22:37Z","state_reason":null,"performed_via_github_app":null},{"id":4356147497,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDQzNTYxNDc0OTc=","url":"https://api.github.com/repos/redis/redis/issues/events/4356147497","actor":{"login":"yossigo","id":1481195,"node_id":"MDQ6VXNlcjE0ODExOTU=","avatar_url":"https://avatars.githubusercontent.com/u/1481195?v=4","gravatar_id":"","url":"https://api.github.com/users/yossigo","html_url":"https://github.com/yossigo","followers_url":"https://api.github.com/users/yossigo/followers","following_url":"https://api.github.com/users/yossigo/following{/other_user}","gists_url":"https://api.github.com/users/yossigo/gists{/gist_id}","starred_url":"https://api.github.com/users/yossigo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/yossigo/subscriptions","organizations_url":"https://api.github.com/users/yossigo/orgs","repos_url":"https://api.github.com/users/yossigo/repos","events_url":"https://api.github.com/users/yossigo/events{/privacy}","received_events_url":"https://api.github.com/users/yossigo/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"d828f90c26bf796cb54d6622389e5c14fcc9cbf0","commit_url":"https://api.github.com/repos/redis/redis/commits/d828f90c26bf796cb54d6622389e5c14fcc9cbf0","created_at":"2021-02-21T09:22:52Z","performed_via_github_app":null},{"id":4356739716,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDQzNTY3Mzk3MTY=","url":"https://api.github.com/repos/redis/redis/issues/events/4356739716","actor":{"login":"ningsongshen","id":12574693,"node_id":"MDQ6VXNlcjEyNTc0Njkz","avatar_url":"https://avatars.githubusercontent.com/u/12574693?v=4","gravatar_id":"","url":"https://api.github.com/users/ningsongshen","html_url":"https://github.com/ningsongshen","followers_url":"https://api.github.com/users/ningsongshen/followers","following_url":"https://api.github.com/users/ningsongshen/following{/other_user}","gists_url":"https://api.github.com/users/ningsongshen/gists{/gist_id}","starred_url":"https://api.github.com/users/ningsongshen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ningsongshen/subscriptions","organizations_url":"https://api.github.com/users/ningsongshen/orgs","repos_url":"https://api.github.com/users/ningsongshen/repos","events_url":"https://api.github.com/users/ningsongshen/events{/privacy}","received_events_url":"https://api.github.com/users/ningsongshen/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"e6f97e52837bf4c1b367ba2e02b9316192b3958c","commit_url":"https://api.github.com/repos/ningsongshen/redis/commits/e6f97e52837bf4c1b367ba2e02b9316192b3958c","created_at":"2021-02-21T20:16:04Z","performed_via_github_app":null},{"actor":{"login":"satheeshaGowda","id":7914152,"node_id":"MDQ6VXNlcjc5MTQxNTI=","avatar_url":"https://avatars.githubusercontent.com/u/7914152?v=4","gravatar_id":"","url":"https://api.github.com/users/satheeshaGowda","html_url":"https://github.com/satheeshaGowda","followers_url":"https://api.github.com/users/satheeshaGowda/followers","following_url":"https://api.github.com/users/satheeshaGowda/following{/other_user}","gists_url":"https://api.github.com/users/satheeshaGowda/gists{/gist_id}","starred_url":"https://api.github.com/users/satheeshaGowda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/satheeshaGowda/subscriptions","organizations_url":"https://api.github.com/users/satheeshaGowda/orgs","repos_url":"https://api.github.com/users/satheeshaGowda/repos","events_url":"https://api.github.com/users/satheeshaGowda/events{/privacy}","received_events_url":"https://api.github.com/users/satheeshaGowda/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-02-23T21:53:19Z","updated_at":"2021-02-23T21:53:19Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/redis/redis/issues/8540","repository_url":"https://api.github.com/repos/redis/redis","labels_url":"https://api.github.com/repos/redis/redis/issues/8540/labels{/name}","comments_url":"https://api.github.com/repos/redis/redis/issues/8540/comments","events_url":"https://api.github.com/repos/redis/redis/issues/8540/events","html_url":"https://github.com/redis/redis/issues/8540","id":814860274,"node_id":"MDU6SXNzdWU4MTQ4NjAyNzQ=","number":8540,"title":"[BUG]Sentinel  stuck with +sdown upon replica pod restart  ","user":{"login":"satheeshaGowda","id":7914152,"node_id":"MDQ6VXNlcjc5MTQxNTI=","avatar_url":"https://avatars.githubusercontent.com/u/7914152?v=4","gravatar_id":"","url":"https://api.github.com/users/satheeshaGowda","html_url":"https://github.com/satheeshaGowda","followers_url":"https://api.github.com/users/satheeshaGowda/followers","following_url":"https://api.github.com/users/satheeshaGowda/following{/other_user}","gists_url":"https://api.github.com/users/satheeshaGowda/gists{/gist_id}","starred_url":"https://api.github.com/users/satheeshaGowda/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/satheeshaGowda/subscriptions","organizations_url":"https://api.github.com/users/satheeshaGowda/orgs","repos_url":"https://api.github.com/users/satheeshaGowda/repos","events_url":"https://api.github.com/users/satheeshaGowda/events{/privacy}","received_events_url":"https://api.github.com/users/satheeshaGowda/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"moticless","id":24944278,"node_id":"MDQ6VXNlcjI0OTQ0Mjc4","avatar_url":"https://avatars.githubusercontent.com/u/24944278?v=4","gravatar_id":"","url":"https://api.github.com/users/moticless","html_url":"https://github.com/moticless","followers_url":"https://api.github.com/users/moticless/followers","following_url":"https://api.github.com/users/moticless/following{/other_user}","gists_url":"https://api.github.com/users/moticless/gists{/gist_id}","starred_url":"https://api.github.com/users/moticless/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/moticless/subscriptions","organizations_url":"https://api.github.com/users/moticless/orgs","repos_url":"https://api.github.com/users/moticless/repos","events_url":"https://api.github.com/users/moticless/events{/privacy}","received_events_url":"https://api.github.com/users/moticless/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"moticless","id":24944278,"node_id":"MDQ6VXNlcjI0OTQ0Mjc4","avatar_url":"https://avatars.githubusercontent.com/u/24944278?v=4","gravatar_id":"","url":"https://api.github.com/users/moticless","html_url":"https://github.com/moticless","followers_url":"https://api.github.com/users/moticless/followers","following_url":"https://api.github.com/users/moticless/following{/other_user}","gists_url":"https://api.github.com/users/moticless/gists{/gist_id}","starred_url":"https://api.github.com/users/moticless/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/moticless/subscriptions","organizations_url":"https://api.github.com/users/moticless/orgs","repos_url":"https://api.github.com/users/moticless/repos","events_url":"https://api.github.com/users/moticless/events{/privacy}","received_events_url":"https://api.github.com/users/moticless/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":13,"created_at":"2021-02-23T21:53:19Z","updated_at":"2022-01-29T19:00:29Z","closed_at":"2022-01-29T19:00:29Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":156018,"node_id":"MDEwOlJlcG9zaXRvcnkxNTYwMTg=","name":"redis","full_name":"redis/redis","private":false,"owner":{"login":"redis","id":1529926,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE1Mjk5MjY=","avatar_url":"https://avatars.githubusercontent.com/u/1529926?v=4","gravatar_id":"","url":"https://api.github.com/users/redis","html_url":"https://github.com/redis","followers_url":"https://api.github.com/users/redis/followers","following_url":"https://api.github.com/users/redis/following{/other_user}","gists_url":"https://api.github.com/users/redis/gists{/gist_id}","starred_url":"https://api.github.com/users/redis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/redis/subscriptions","organizations_url":"https://api.github.com/users/redis/orgs","repos_url":"https://api.github.com/users/redis/repos","events_url":"https://api.github.com/users/redis/events{/privacy}","received_events_url":"https://api.github.com/users/redis/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/redis/redis","description":"For developers, who are building real-time data-driven applications, Redis is the preferred, fastest, and most feature-rich cache, data structure server, and document and vector query engine.","fork":false,"url":"https://api.github.com/repos/redis/redis","forks_url":"https://api.github.com/repos/redis/redis/forks","keys_url":"https://api.github.com/repos/redis/redis/keys{/key_id}","collaborators_url":"https://api.github.com/repos/redis/redis/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/redis/redis/teams","hooks_url":"https://api.github.com/repos/redis/redis/hooks","issue_events_url":"https://api.github.com/repos/redis/redis/issues/events{/number}","events_url":"https://api.github.com/repos/redis/redis/events","assignees_url":"https://api.github.com/repos/redis/redis/assignees{/user}","branches_url":"https://api.github.com/repos/redis/redis/branches{/branch}","tags_url":"https://api.github.com/repos/redis/redis/tags","blobs_url":"https://api.github.com/repos/redis/redis/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/redis/redis/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/redis/redis/git/refs{/sha}","trees_url":"https://api.github.com/repos/redis/redis/git/trees{/sha}","statuses_url":"https://api.github.com/repos/redis/redis/statuses/{sha}","languages_url":"https://api.github.com/repos/redis/redis/languages","stargazers_url":"https://api.github.com/repos/redis/redis/stargazers","contributors_url":"https://api.github.com/repos/redis/redis/contributors","subscribers_url":"https://api.github.com/repos/redis/redis/subscribers","subscription_url":"https://api.github.com/repos/redis/redis/subscription","commits_url":"https://api.github.com/repos/redis/redis/commits{/sha}","git_commits_url":"https://api.github.com/repos/redis/redis/git/commits{/sha}","comments_url":"https://api.github.com/repos/redis/redis/comments{/number}","issue_comment_url":"https://api.github.com/repos/redis/redis/issues/comments{/number}","contents_url":"https://api.github.com/repos/redis/redis/contents/{+path}","compare_url":"https://api.github.com/repos/redis/redis/compare/{base}...{head}","merges_url":"https://api.github.com/repos/redis/redis/merges","archive_url":"https://api.github.com/repos/redis/redis/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/redis/redis/downloads","issues_url":"https://api.github.com/repos/redis/redis/issues{/number}","pulls_url":"https://api.github.com/repos/redis/redis/pulls{/number}","milestones_url":"https://api.github.com/repos/redis/redis/milestones{/number}","notifications_url":"https://api.github.com/repos/redis/redis/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/redis/redis/labels{/name}","releases_url":"https://api.github.com/repos/redis/redis/releases{/id}","deployments_url":"https://api.github.com/repos/redis/redis/deployments","created_at":"2009-03-21T22:32:25Z","updated_at":"2025-11-10T01:47:26Z","pushed_at":"2025-11-09T07:49:54Z","git_url":"git://github.com/redis/redis.git","ssh_url":"git@github.com:redis/redis.git","clone_url":"https://github.com/redis/redis.git","svn_url":"https://github.com/redis/redis","homepage":"http://redis.io","size":204997,"stargazers_count":71629,"watchers_count":71629,"language":"C","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":24316,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":2706,"license":{"key":"other","name":"Other","spdx_id":"NOASSERTION","url":null,"node_id":"MDc6TGljZW5zZTA="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["cache","caching","database","distributed-systems","in-memory","in-memory-database","json","key-value","key-value-store","message-broker","message-queue","no-sql","nosql","open-source","real-time","realtime","redis","time-series","vector-databases","vector-search"],"visibility":"public","forks":24316,"open_issues":2706,"watchers":71629,"default_branch":"unstable","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"Hellow Team,  @yossigo , thanks for releasing the 6.2.0 with sentinel host name support and fixing all the related issues.\r\n\r\nhttps://github.com/redis/redis/issues/8507\r\nhttps://github.com/redis/redis/pull/8517\r\nhttps://github.com/redis/redis/pull/8481\r\nhttps://github.com/redis/redis/issues/8300 \r\n\r\nWe are evaluating to run sentinel based redis cluster on kubernetes, so  went ahead and verified [6.2.0](https://hub.docker.com/_/redis/) from Docker Hub , but surprisingly find out that, upon replica pod restart, `sentinel replicas mymaster` stuck with `    9) \"flags\"\r\n   10) \"s_down,slave\"` state and never recovered.\r\n\r\n```\r\n127.0.0.1:26379> sentinel replicas mymaster\r\n1)  1) \"name\"\r\n    2) \"redis-1.redis.FQDN\"\r\n    3) \"ip\"\r\n    4) \"redis-1.redis.FQDN\"\r\n    5) \"port\"\r\n    6) \"6379\"\r\n    7) \"runid\"\r\n    8) \"7b69bdd9dec849aa17bd9912b7e994cb6095b524\"\r\n    9) \"flags\"\r\n   10) \"s_down,slave\"\r\n   11) \"link-pending-commands\"\r\n   12) \"39\"\r\n   13) \"link-refcount\"\r\n   14) \"1\"\r\n   15) \"last-ping-sent\"\r\n   16) \"704052\"\r\n   17) \"last-ok-ping-reply\"\r\n   18) \"704597\"\r\n   19) \"last-ping-reply\"\r\n   20) \"704597\"\r\n   21) \"s-down-time\"\r\n   22) \"699026\"\r\n   23) \"down-after-milliseconds\"\r\n   24) \"5000\"\r\n   25) \"info-refresh\"\r\n   26) \"706516\"\r\n   27) \"role-reported\"\r\n   28) \"slave\"\r\n   29) \"role-reported-time\"\r\n   30) \"887409\"\r\n   31) \"master-link-down-time\"\r\n   32) \"0\"\r\n   33) \"master-link-status\"\r\n   34) \"ok\"\r\n   35) \"master-host\"\r\n   36) \"redis-0.redis.FQDN\"\r\n   37) \"master-port\"\r\n   38) \"6379\"\r\n   39) \"slave-priority\"\r\n   40) \"100\"\r\n   41) \"slave-repl-offset\"\r\n   42) \"66025\"\r\n```\r\n\r\nlast log on sentinel \r\n\r\n```\r\n1:X 23 Feb 2021 21:21:47.545 # +sdown slave redis-1.redis.FQDN:6379 redis-1.redis.FQDN 6379 @ mymaster redis-0.redis.FQDN 6379\r\n```\r\n\r\n\r\nhappy to provide more details if required, thanks!","reactions":{"url":"https://api.github.com/repos/redis/redis/issues/8540/reactions","total_count":4,"+1":4,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/redis/redis/issues/8540/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"id":4392858105,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDQzOTI4NTgxMDU=","url":"https://api.github.com/repos/redis/redis/issues/events/4392858105","actor":{"login":"JackieXie168","id":8347113,"node_id":"MDQ6VXNlcjgzNDcxMTM=","avatar_url":"https://avatars.githubusercontent.com/u/8347113?v=4","gravatar_id":"","url":"https://api.github.com/users/JackieXie168","html_url":"https://github.com/JackieXie168","followers_url":"https://api.github.com/users/JackieXie168/followers","following_url":"https://api.github.com/users/JackieXie168/following{/other_user}","gists_url":"https://api.github.com/users/JackieXie168/gists{/gist_id}","starred_url":"https://api.github.com/users/JackieXie168/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JackieXie168/subscriptions","organizations_url":"https://api.github.com/users/JackieXie168/orgs","repos_url":"https://api.github.com/users/JackieXie168/repos","events_url":"https://api.github.com/users/JackieXie168/events{/privacy}","received_events_url":"https://api.github.com/users/JackieXie168/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"75d2867876572a3b1eb024b7e46b5ae7eb639699","commit_url":"https://api.github.com/repos/JackieXie168/redis/commits/75d2867876572a3b1eb024b7e46b5ae7eb639699","created_at":"2021-03-02T00:43:12Z","performed_via_github_app":null}]