{"url":"https://api.github.com/repos/redis/redis/issues/12891","repository_url":"https://api.github.com/repos/redis/redis","labels_url":"https://api.github.com/repos/redis/redis/issues/12891/labels{/name}","comments_url":"https://api.github.com/repos/redis/redis/issues/12891/comments","events_url":"https://api.github.com/repos/redis/redis/issues/12891/events","html_url":"https://github.com/redis/redis/issues/12891","id":2057466290,"node_id":"I_kwDOAAJhcs56onGy","number":12891,"title":"[BUG] `redis-cli --cluster create` reports different errors when trying to create a cluster with lesser than 3 master nodes","user":{"login":"ema-pe","id":21246809,"node_id":"MDQ6VXNlcjIxMjQ2ODA5","avatar_url":"https://avatars.githubusercontent.com/u/21246809?v=4","gravatar_id":"","url":"https://api.github.com/users/ema-pe","html_url":"https://github.com/ema-pe","followers_url":"https://api.github.com/users/ema-pe/followers","following_url":"https://api.github.com/users/ema-pe/following{/other_user}","gists_url":"https://api.github.com/users/ema-pe/gists{/gist_id}","starred_url":"https://api.github.com/users/ema-pe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ema-pe/subscriptions","organizations_url":"https://api.github.com/users/ema-pe/orgs","repos_url":"https://api.github.com/users/ema-pe/repos","events_url":"https://api.github.com/users/ema-pe/events{/privacy}","received_events_url":"https://api.github.com/users/ema-pe/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-12-27T14:53:19Z","updated_at":"2023-12-28T06:26:25Z","closed_at":"2023-12-28T06:26:25Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"**Describe the bug**\r\n\r\nHi!\r\n\r\nWhen using redis-cli 7.2.3, running `redis-cli --cluster create` with less than three nodes results in an error on the standard output. This is because redis-cli requires at least three master nodes to create a cluster. The error message is unclear when only one node is given. However, this issue does not occur when two or more nodes are used.\r\n\r\nFor the case when only one node is given, I suggest to output the same error message as when two nodes are given.\r\n\r\n**To reproduce**\r\n\r\n1. Start two redis-server instances that listen at 7000 and 7001 ports.\r\n\r\n2. Run the following commands:\r\n\r\n```\r\n$ redis-cli --cluster create 127.0.0.1:7000 127.0.0.1:7001 --cluster-replicas 0\r\n*** ERROR: Invalid configuration for cluster creation.\r\n*** Redis Cluster requires at least 3 master nodes.\r\n*** This is not possible with 2 nodes and 0 replicas per node.\r\n*** At least 3 nodes are required.\r\n$ redis-cli --cluster create 127.0.0.1:7000 --cluster-replicas 0\r\n[ERR] Wrong number of arguments for specified --cluster sub command\r\n```\r\n\r\n**Expected behavior**\r\n\r\nI suggest something like this:\r\n\r\n```\r\n$ redis-cli --cluster create 127.0.0.1:7000 --cluster-replicas 0\r\n*** ERROR: Invalid configuration for cluster creation.\r\n*** Redis Cluster requires at least 3 master nodes.\r\n*** This is not possible with 1 nodes and 0 replicas per node.\r\n*** At least 3 nodes are required.\r\n```\r\n","closed_by":{"login":"oranagra","id":7045099,"node_id":"MDQ6VXNlcjcwNDUwOTk=","avatar_url":"https://avatars.githubusercontent.com/u/7045099?v=4","gravatar_id":"","url":"https://api.github.com/users/oranagra","html_url":"https://github.com/oranagra","followers_url":"https://api.github.com/users/oranagra/followers","following_url":"https://api.github.com/users/oranagra/following{/other_user}","gists_url":"https://api.github.com/users/oranagra/gists{/gist_id}","starred_url":"https://api.github.com/users/oranagra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oranagra/subscriptions","organizations_url":"https://api.github.com/users/oranagra/orgs","repos_url":"https://api.github.com/users/oranagra/repos","events_url":"https://api.github.com/users/oranagra/events{/privacy}","received_events_url":"https://api.github.com/users/oranagra/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/redis/redis/issues/12891/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/redis/redis/issues/12891/timeline","performed_via_github_app":null,"state_reason":"completed"}