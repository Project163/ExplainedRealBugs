[{"url":"https://api.github.com/repos/redis/redis/issues/comments/439609551","html_url":"https://github.com/redis/redis/issues/5580#issuecomment-439609551","issue_url":"https://api.github.com/repos/redis/redis/issues/5580","id":439609551,"node_id":"MDEyOklzc3VlQ29tbWVudDQzOTYwOTU1MQ==","user":{"login":"itamarhaber","id":6059516,"node_id":"MDQ6VXNlcjYwNTk1MTY=","avatar_url":"https://avatars.githubusercontent.com/u/6059516?v=4","gravatar_id":"","url":"https://api.github.com/users/itamarhaber","html_url":"https://github.com/itamarhaber","followers_url":"https://api.github.com/users/itamarhaber/followers","following_url":"https://api.github.com/users/itamarhaber/following{/other_user}","gists_url":"https://api.github.com/users/itamarhaber/gists{/gist_id}","starred_url":"https://api.github.com/users/itamarhaber/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/itamarhaber/subscriptions","organizations_url":"https://api.github.com/users/itamarhaber/orgs","repos_url":"https://api.github.com/users/itamarhaber/repos","events_url":"https://api.github.com/users/itamarhaber/events{/privacy}","received_events_url":"https://api.github.com/users/itamarhaber/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-17T11:25:09Z","updated_at":"2018-11-17T11:25:09Z","body":"Hello @kevinlong206 \r\n\r\nThanks for reporting this insanity, it looks like there could be an underflow in that value - could you also include the remainder of INFO's memory section?","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/redis/redis/issues/comments/439609551/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"itamarhaber","id":6059516,"node_id":"MDQ6VXNlcjYwNTk1MTY=","avatar_url":"https://avatars.githubusercontent.com/u/6059516?v=4","gravatar_id":"","url":"https://api.github.com/users/itamarhaber","html_url":"https://github.com/itamarhaber","followers_url":"https://api.github.com/users/itamarhaber/followers","following_url":"https://api.github.com/users/itamarhaber/following{/other_user}","gists_url":"https://api.github.com/users/itamarhaber/gists{/gist_id}","starred_url":"https://api.github.com/users/itamarhaber/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/itamarhaber/subscriptions","organizations_url":"https://api.github.com/users/itamarhaber/orgs","repos_url":"https://api.github.com/users/itamarhaber/repos","events_url":"https://api.github.com/users/itamarhaber/events{/privacy}","received_events_url":"https://api.github.com/users/itamarhaber/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1972744945,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MTk3Mjc0NDk0NQ==","url":"https://api.github.com/repos/redis/redis/issues/events/1972744945","actor":{"login":"kevinlong206","id":1462345,"node_id":"MDQ6VXNlcjE0NjIzNDU=","avatar_url":"https://avatars.githubusercontent.com/u/1462345?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinlong206","html_url":"https://github.com/kevinlong206","followers_url":"https://api.github.com/users/kevinlong206/followers","following_url":"https://api.github.com/users/kevinlong206/following{/other_user}","gists_url":"https://api.github.com/users/kevinlong206/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinlong206/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinlong206/subscriptions","organizations_url":"https://api.github.com/users/kevinlong206/orgs","repos_url":"https://api.github.com/users/kevinlong206/repos","events_url":"https://api.github.com/users/kevinlong206/events{/privacy}","received_events_url":"https://api.github.com/users/kevinlong206/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2018-11-17T11:25:09Z","performed_via_github_app":null},{"id":1972744946,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDE5NzI3NDQ5NDY=","url":"https://api.github.com/repos/redis/redis/issues/events/1972744946","actor":{"login":"kevinlong206","id":1462345,"node_id":"MDQ6VXNlcjE0NjIzNDU=","avatar_url":"https://avatars.githubusercontent.com/u/1462345?v=4","gravatar_id":"","url":"https://api.github.com/users/kevinlong206","html_url":"https://github.com/kevinlong206","followers_url":"https://api.github.com/users/kevinlong206/followers","following_url":"https://api.github.com/users/kevinlong206/following{/other_user}","gists_url":"https://api.github.com/users/kevinlong206/gists{/gist_id}","starred_url":"https://api.github.com/users/kevinlong206/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kevinlong206/subscriptions","organizations_url":"https://api.github.com/users/kevinlong206/orgs","repos_url":"https://api.github.com/users/kevinlong206/repos","events_url":"https://api.github.com/users/kevinlong206/events{/privacy}","received_events_url":"https://api.github.com/users/kevinlong206/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2018-11-17T11:25:09Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/redis/redis/issues/comments/440385913","html_url":"https://github.com/redis/redis/issues/5580#issuecomment-440385913","issue_url":"https://api.github.com/repos/redis/redis/issues/5580","id":440385913,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MDM4NTkxMw==","user":{"login":"antirez","id":65632,"node_id":"MDQ6VXNlcjY1NjMy","avatar_url":"https://avatars.githubusercontent.com/u/65632?v=4","gravatar_id":"","url":"https://api.github.com/users/antirez","html_url":"https://github.com/antirez","followers_url":"https://api.github.com/users/antirez/followers","following_url":"https://api.github.com/users/antirez/following{/other_user}","gists_url":"https://api.github.com/users/antirez/gists{/gist_id}","starred_url":"https://api.github.com/users/antirez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/antirez/subscriptions","organizations_url":"https://api.github.com/users/antirez/orgs","repos_url":"https://api.github.com/users/antirez/repos","events_url":"https://api.github.com/users/antirez/events{/privacy}","received_events_url":"https://api.github.com/users/antirez/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-20T18:41:53Z","updated_at":"2018-11-20T18:41:53Z","body":"Probably @oranagra wants to see this. Here there are apparently about 111 MB of negative overflow. It is possible that the memory accounting can't be more precise and there is to just report zero when the number is negative.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/redis/redis/issues/comments/440385913/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"antirez","id":65632,"node_id":"MDQ6VXNlcjY1NjMy","avatar_url":"https://avatars.githubusercontent.com/u/65632?v=4","gravatar_id":"","url":"https://api.github.com/users/antirez","html_url":"https://github.com/antirez","followers_url":"https://api.github.com/users/antirez/followers","following_url":"https://api.github.com/users/antirez/following{/other_user}","gists_url":"https://api.github.com/users/antirez/gists{/gist_id}","starred_url":"https://api.github.com/users/antirez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/antirez/subscriptions","organizations_url":"https://api.github.com/users/antirez/orgs","repos_url":"https://api.github.com/users/antirez/repos","events_url":"https://api.github.com/users/antirez/events{/privacy}","received_events_url":"https://api.github.com/users/antirez/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1978170432,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MTk3ODE3MDQzMg==","url":"https://api.github.com/repos/redis/redis/issues/events/1978170432","actor":{"login":"oranagra","id":7045099,"node_id":"MDQ6VXNlcjcwNDUwOTk=","avatar_url":"https://avatars.githubusercontent.com/u/7045099?v=4","gravatar_id":"","url":"https://api.github.com/users/oranagra","html_url":"https://github.com/oranagra","followers_url":"https://api.github.com/users/oranagra/followers","following_url":"https://api.github.com/users/oranagra/following{/other_user}","gists_url":"https://api.github.com/users/oranagra/gists{/gist_id}","starred_url":"https://api.github.com/users/oranagra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oranagra/subscriptions","organizations_url":"https://api.github.com/users/oranagra/orgs","repos_url":"https://api.github.com/users/oranagra/repos","events_url":"https://api.github.com/users/oranagra/events{/privacy}","received_events_url":"https://api.github.com/users/oranagra/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2018-11-20T18:41:53Z","performed_via_github_app":null},{"id":1978170434,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDE5NzgxNzA0MzQ=","url":"https://api.github.com/repos/redis/redis/issues/events/1978170434","actor":{"login":"oranagra","id":7045099,"node_id":"MDQ6VXNlcjcwNDUwOTk=","avatar_url":"https://avatars.githubusercontent.com/u/7045099?v=4","gravatar_id":"","url":"https://api.github.com/users/oranagra","html_url":"https://github.com/oranagra","followers_url":"https://api.github.com/users/oranagra/followers","following_url":"https://api.github.com/users/oranagra/following{/other_user}","gists_url":"https://api.github.com/users/oranagra/gists{/gist_id}","starred_url":"https://api.github.com/users/oranagra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oranagra/subscriptions","organizations_url":"https://api.github.com/users/oranagra/orgs","repos_url":"https://api.github.com/users/oranagra/repos","events_url":"https://api.github.com/users/oranagra/events{/privacy}","received_events_url":"https://api.github.com/users/oranagra/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2018-11-20T18:41:53Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/redis/redis/issues/comments/440541040","html_url":"https://github.com/redis/redis/issues/5580#issuecomment-440541040","issue_url":"https://api.github.com/repos/redis/redis/issues/5580","id":440541040,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MDU0MTA0MA==","user":{"login":"oranagra","id":7045099,"node_id":"MDQ6VXNlcjcwNDUwOTk=","avatar_url":"https://avatars.githubusercontent.com/u/7045099?v=4","gravatar_id":"","url":"https://api.github.com/users/oranagra","html_url":"https://github.com/oranagra","followers_url":"https://api.github.com/users/oranagra/followers","following_url":"https://api.github.com/users/oranagra/following{/other_user}","gists_url":"https://api.github.com/users/oranagra/gists{/gist_id}","starred_url":"https://api.github.com/users/oranagra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oranagra/subscriptions","organizations_url":"https://api.github.com/users/oranagra/orgs","repos_url":"https://api.github.com/users/oranagra/repos","events_url":"https://api.github.com/users/oranagra/events{/privacy}","received_events_url":"https://api.github.com/users/oranagra/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-21T05:52:47Z","updated_at":"2018-11-21T05:52:47Z","body":"i suppose `mem_fragmentation_ratio` is showing a negative number... same as it would have in all previous versions of redis in your scenario.\r\nThis is a simple case were the process RSS is smaller than the used_memory.\r\nThis can easily happen when the program allocated a lot of memory and haven't written to it yet, in which case the kernel doesn't allocate any pages to the process.\r\n\r\nso considering the information it displayed is correct, and does indeed reflect the reality, and considering that negative mem_fragmentation_ratio is not a bug, i think that all that needs to be fixed is to turn the `_bytes` fields into signed integers, so that they'll also show negative number, and not an insane one.\r\n\r\nother than that unsigned type, the only thing here's that's invalid is the terminology.\r\ncalling this field \"fragmentation\" is wrong... obviously, true \"fragmentation\" cannot be negative.\r\nthe actual \"memory fragmentation\" is now reflected in `allocator_frag_ratio` and `allocator_frag_bytes`.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/redis/redis/issues/comments/440541040/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"oranagra","id":7045099,"node_id":"MDQ6VXNlcjcwNDUwOTk=","avatar_url":"https://avatars.githubusercontent.com/u/7045099?v=4","gravatar_id":"","url":"https://api.github.com/users/oranagra","html_url":"https://github.com/oranagra","followers_url":"https://api.github.com/users/oranagra/followers","following_url":"https://api.github.com/users/oranagra/following{/other_user}","gists_url":"https://api.github.com/users/oranagra/gists{/gist_id}","starred_url":"https://api.github.com/users/oranagra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oranagra/subscriptions","organizations_url":"https://api.github.com/users/oranagra/orgs","repos_url":"https://api.github.com/users/oranagra/repos","events_url":"https://api.github.com/users/oranagra/events{/privacy}","received_events_url":"https://api.github.com/users/oranagra/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":2012815718,"node_id":"MDExOkNsb3NlZEV2ZW50MjAxMjgxNTcxOA==","url":"https://api.github.com/repos/redis/redis/issues/events/2012815718","actor":{"login":"antirez","id":65632,"node_id":"MDQ6VXNlcjY1NjMy","avatar_url":"https://avatars.githubusercontent.com/u/65632?v=4","gravatar_id":"","url":"https://api.github.com/users/antirez","html_url":"https://github.com/antirez","followers_url":"https://api.github.com/users/antirez/followers","following_url":"https://api.github.com/users/antirez/following{/other_user}","gists_url":"https://api.github.com/users/antirez/gists{/gist_id}","starred_url":"https://api.github.com/users/antirez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/antirez/subscriptions","organizations_url":"https://api.github.com/users/antirez/orgs","repos_url":"https://api.github.com/users/antirez/repos","events_url":"https://api.github.com/users/antirez/events{/privacy}","received_events_url":"https://api.github.com/users/antirez/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"b587c54c24d0cfdc3cfb22303553ea5e780b87c1","commit_url":"https://api.github.com/repos/redis/redis/commits/b587c54c24d0cfdc3cfb22303553ea5e780b87c1","created_at":"2018-12-07T16:11:09Z","state_reason":null,"performed_via_github_app":null},{"id":2012815720,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDIwMTI4MTU3MjA=","url":"https://api.github.com/repos/redis/redis/issues/events/2012815720","actor":{"login":"antirez","id":65632,"node_id":"MDQ6VXNlcjY1NjMy","avatar_url":"https://avatars.githubusercontent.com/u/65632?v=4","gravatar_id":"","url":"https://api.github.com/users/antirez","html_url":"https://github.com/antirez","followers_url":"https://api.github.com/users/antirez/followers","following_url":"https://api.github.com/users/antirez/following{/other_user}","gists_url":"https://api.github.com/users/antirez/gists{/gist_id}","starred_url":"https://api.github.com/users/antirez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/antirez/subscriptions","organizations_url":"https://api.github.com/users/antirez/orgs","repos_url":"https://api.github.com/users/antirez/repos","events_url":"https://api.github.com/users/antirez/events{/privacy}","received_events_url":"https://api.github.com/users/antirez/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"03629ba0b6073836577bec1b537925e1c914c404","commit_url":"https://api.github.com/repos/redis/redis/commits/03629ba0b6073836577bec1b537925e1c914c404","created_at":"2018-12-07T16:11:09Z","performed_via_github_app":null},{"id":2019293431,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDIwMTkyOTM0MzE=","url":"https://api.github.com/repos/redis/redis/issues/events/2019293431","actor":{"login":"antirez","id":65632,"node_id":"MDQ6VXNlcjY1NjMy","avatar_url":"https://avatars.githubusercontent.com/u/65632?v=4","gravatar_id":"","url":"https://api.github.com/users/antirez","html_url":"https://github.com/antirez","followers_url":"https://api.github.com/users/antirez/followers","following_url":"https://api.github.com/users/antirez/following{/other_user}","gists_url":"https://api.github.com/users/antirez/gists{/gist_id}","starred_url":"https://api.github.com/users/antirez/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/antirez/subscriptions","organizations_url":"https://api.github.com/users/antirez/orgs","repos_url":"https://api.github.com/users/antirez/repos","events_url":"https://api.github.com/users/antirez/events{/privacy}","received_events_url":"https://api.github.com/users/antirez/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"40244b10f03383cc72640028cc9c7ec4783b8fb1","commit_url":"https://api.github.com/repos/redis/redis/commits/40244b10f03383cc72640028cc9c7ec4783b8fb1","created_at":"2018-12-11T17:01:56Z","performed_via_github_app":null},{"id":2029180409,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDIwMjkxODA0MDk=","url":"https://api.github.com/repos/redis/redis/issues/events/2029180409","actor":{"login":"JackieXie168","id":8347113,"node_id":"MDQ6VXNlcjgzNDcxMTM=","avatar_url":"https://avatars.githubusercontent.com/u/8347113?v=4","gravatar_id":"","url":"https://api.github.com/users/JackieXie168","html_url":"https://github.com/JackieXie168","followers_url":"https://api.github.com/users/JackieXie168/followers","following_url":"https://api.github.com/users/JackieXie168/following{/other_user}","gists_url":"https://api.github.com/users/JackieXie168/gists{/gist_id}","starred_url":"https://api.github.com/users/JackieXie168/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JackieXie168/subscriptions","organizations_url":"https://api.github.com/users/JackieXie168/orgs","repos_url":"https://api.github.com/users/JackieXie168/repos","events_url":"https://api.github.com/users/JackieXie168/events{/privacy}","received_events_url":"https://api.github.com/users/JackieXie168/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"99f13804a5b97b90e58e06e73ac76e59a08631f1","commit_url":"https://api.github.com/repos/JackieXie168/redis/commits/99f13804a5b97b90e58e06e73ac76e59a08631f1","created_at":"2018-12-17T02:08:59Z","performed_via_github_app":null},{"id":2029180418,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDIwMjkxODA0MTg=","url":"https://api.github.com/repos/redis/redis/issues/events/2029180418","actor":{"login":"JackieXie168","id":8347113,"node_id":"MDQ6VXNlcjgzNDcxMTM=","avatar_url":"https://avatars.githubusercontent.com/u/8347113?v=4","gravatar_id":"","url":"https://api.github.com/users/JackieXie168","html_url":"https://github.com/JackieXie168","followers_url":"https://api.github.com/users/JackieXie168/followers","following_url":"https://api.github.com/users/JackieXie168/following{/other_user}","gists_url":"https://api.github.com/users/JackieXie168/gists{/gist_id}","starred_url":"https://api.github.com/users/JackieXie168/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JackieXie168/subscriptions","organizations_url":"https://api.github.com/users/JackieXie168/orgs","repos_url":"https://api.github.com/users/JackieXie168/repos","events_url":"https://api.github.com/users/JackieXie168/events{/privacy}","received_events_url":"https://api.github.com/users/JackieXie168/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"be773ccf5df09ac7be3ba4196fb4ae0e59d4d02d","commit_url":"https://api.github.com/repos/JackieXie168/redis/commits/be773ccf5df09ac7be3ba4196fb4ae0e59d4d02d","created_at":"2018-12-17T02:08:59Z","performed_via_github_app":null},{"actor":{"login":"mstyura","id":385639,"node_id":"MDQ6VXNlcjM4NTYzOQ==","avatar_url":"https://avatars.githubusercontent.com/u/385639?v=4","gravatar_id":"","url":"https://api.github.com/users/mstyura","html_url":"https://github.com/mstyura","followers_url":"https://api.github.com/users/mstyura/followers","following_url":"https://api.github.com/users/mstyura/following{/other_user}","gists_url":"https://api.github.com/users/mstyura/gists{/gist_id}","starred_url":"https://api.github.com/users/mstyura/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mstyura/subscriptions","organizations_url":"https://api.github.com/users/mstyura/orgs","repos_url":"https://api.github.com/users/mstyura/repos","events_url":"https://api.github.com/users/mstyura/events{/privacy}","received_events_url":"https://api.github.com/users/mstyura/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-05-17T18:26:54Z","updated_at":"2023-05-17T18:26:54Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/dahomey-technologies/rustis/issues/29","repository_url":"https://api.github.com/repos/dahomey-technologies/rustis","labels_url":"https://api.github.com/repos/dahomey-technologies/rustis/issues/29/labels{/name}","comments_url":"https://api.github.com/repos/dahomey-technologies/rustis/issues/29/comments","events_url":"https://api.github.com/repos/dahomey-technologies/rustis/issues/29/events","html_url":"https://github.com/dahomey-technologies/rustis/pull/29","id":1714436864,"node_id":"PR_kwDOH5c7BM5Qvlfu","number":29,"title":"Fix deserializing of negative numbers in response to memory stats.","user":{"login":"mstyura","id":385639,"node_id":"MDQ6VXNlcjM4NTYzOQ==","avatar_url":"https://avatars.githubusercontent.com/u/385639?v=4","gravatar_id":"","url":"https://api.github.com/users/mstyura","html_url":"https://github.com/mstyura","followers_url":"https://api.github.com/users/mstyura/followers","following_url":"https://api.github.com/users/mstyura/following{/other_user}","gists_url":"https://api.github.com/users/mstyura/gists{/gist_id}","starred_url":"https://api.github.com/users/mstyura/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mstyura/subscriptions","organizations_url":"https://api.github.com/users/mstyura/orgs","repos_url":"https://api.github.com/users/mstyura/repos","events_url":"https://api.github.com/users/mstyura/events{/privacy}","received_events_url":"https://api.github.com/users/mstyura/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-05-17T18:26:54Z","updated_at":"2023-05-18T05:27:49Z","closed_at":"2023-05-17T22:04:05Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":530004740,"node_id":"R_kgDOH5c7BA","name":"rustis","full_name":"dahomey-technologies/rustis","private":false,"owner":{"login":"dahomey-technologies","id":29336625,"node_id":"MDEyOk9yZ2FuaXphdGlvbjI5MzM2NjI1","avatar_url":"https://avatars.githubusercontent.com/u/29336625?v=4","gravatar_id":"","url":"https://api.github.com/users/dahomey-technologies","html_url":"https://github.com/dahomey-technologies","followers_url":"https://api.github.com/users/dahomey-technologies/followers","following_url":"https://api.github.com/users/dahomey-technologies/following{/other_user}","gists_url":"https://api.github.com/users/dahomey-technologies/gists{/gist_id}","starred_url":"https://api.github.com/users/dahomey-technologies/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dahomey-technologies/subscriptions","organizations_url":"https://api.github.com/users/dahomey-technologies/orgs","repos_url":"https://api.github.com/users/dahomey-technologies/repos","events_url":"https://api.github.com/users/dahomey-technologies/events{/privacy}","received_events_url":"https://api.github.com/users/dahomey-technologies/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/dahomey-technologies/rustis","description":"An asynchronous Redis client for Rust","fork":false,"url":"https://api.github.com/repos/dahomey-technologies/rustis","forks_url":"https://api.github.com/repos/dahomey-technologies/rustis/forks","keys_url":"https://api.github.com/repos/dahomey-technologies/rustis/keys{/key_id}","collaborators_url":"https://api.github.com/repos/dahomey-technologies/rustis/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/dahomey-technologies/rustis/teams","hooks_url":"https://api.github.com/repos/dahomey-technologies/rustis/hooks","issue_events_url":"https://api.github.com/repos/dahomey-technologies/rustis/issues/events{/number}","events_url":"https://api.github.com/repos/dahomey-technologies/rustis/events","assignees_url":"https://api.github.com/repos/dahomey-technologies/rustis/assignees{/user}","branches_url":"https://api.github.com/repos/dahomey-technologies/rustis/branches{/branch}","tags_url":"https://api.github.com/repos/dahomey-technologies/rustis/tags","blobs_url":"https://api.github.com/repos/dahomey-technologies/rustis/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/dahomey-technologies/rustis/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/dahomey-technologies/rustis/git/refs{/sha}","trees_url":"https://api.github.com/repos/dahomey-technologies/rustis/git/trees{/sha}","statuses_url":"https://api.github.com/repos/dahomey-technologies/rustis/statuses/{sha}","languages_url":"https://api.github.com/repos/dahomey-technologies/rustis/languages","stargazers_url":"https://api.github.com/repos/dahomey-technologies/rustis/stargazers","contributors_url":"https://api.github.com/repos/dahomey-technologies/rustis/contributors","subscribers_url":"https://api.github.com/repos/dahomey-technologies/rustis/subscribers","subscription_url":"https://api.github.com/repos/dahomey-technologies/rustis/subscription","commits_url":"https://api.github.com/repos/dahomey-technologies/rustis/commits{/sha}","git_commits_url":"https://api.github.com/repos/dahomey-technologies/rustis/git/commits{/sha}","comments_url":"https://api.github.com/repos/dahomey-technologies/rustis/comments{/number}","issue_comment_url":"https://api.github.com/repos/dahomey-technologies/rustis/issues/comments{/number}","contents_url":"https://api.github.com/repos/dahomey-technologies/rustis/contents/{+path}","compare_url":"https://api.github.com/repos/dahomey-technologies/rustis/compare/{base}...{head}","merges_url":"https://api.github.com/repos/dahomey-technologies/rustis/merges","archive_url":"https://api.github.com/repos/dahomey-technologies/rustis/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/dahomey-technologies/rustis/downloads","issues_url":"https://api.github.com/repos/dahomey-technologies/rustis/issues{/number}","pulls_url":"https://api.github.com/repos/dahomey-technologies/rustis/pulls{/number}","milestones_url":"https://api.github.com/repos/dahomey-technologies/rustis/milestones{/number}","notifications_url":"https://api.github.com/repos/dahomey-technologies/rustis/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/dahomey-technologies/rustis/labels{/name}","releases_url":"https://api.github.com/repos/dahomey-technologies/rustis/releases{/id}","deployments_url":"https://api.github.com/repos/dahomey-technologies/rustis/deployments","created_at":"2022-08-28T23:27:20Z","updated_at":"2025-09-28T01:20:51Z","pushed_at":"2025-07-30T22:04:42Z","git_url":"git://github.com/dahomey-technologies/rustis.git","ssh_url":"git@github.com:dahomey-technologies/rustis.git","clone_url":"https://github.com/dahomey-technologies/rustis.git","svn_url":"https://github.com/dahomey-technologies/rustis","homepage":"https://docs.rs/rustis","size":1557,"stargazers_count":99,"watchers_count":99,"language":"Rust","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":true,"forks_count":17,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":3,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["async","database","redis","redis-client","redis-cluster","redis-database","redis-sentinel","redis-stack","rust","rust-crate","rust-lang","rust-library"],"visibility":"public","forks":17,"open_issues":3,"watchers":99,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/dahomey-technologies/rustis/pulls/29","html_url":"https://github.com/dahomey-technologies/rustis/pull/29","diff_url":"https://github.com/dahomey-technologies/rustis/pull/29.diff","patch_url":"https://github.com/dahomey-technologies/rustis/pull/29.patch","merged_at":"2023-05-17T22:04:05Z"},"body":"During `cargo test` I've got one test failure which tested response to `memory usage` command.\r\nThe failure was due to inability to de-serialize negative integer to `usize` field.\r\n![выява](https://github.com/dahomey-technologies/rustis/assets/385639/65033b1a-412c-4c4c-906d-a98572ca50ea)\r\n\r\nI can't find any robust documentation regarding the unsigned/signed types of values in response to `memory usage`. Except that according to [resp 3 specification](https://redis.io/docs/reference/protocol-spec/#resp-integers) the integer values are in range of signed 64-bit integers.\r\n\r\nI've found out an existing issue regarding [negative memory](https://github.com/redis/redis/issues/5580) metric which was \"fixed\"  for specific scenario.\r\n\r\nThe struct holding memory metrics have some values stored as `size_t` and other as `ssize_t`:\r\nhttps://github.com/redis/redis/blob/df1890ef7fc0691c0b940f00ddff14a1c395a52a/src/server.h#L1388C16-L1420\r\n\r\nBut the response is always written by (implicit?) conversion to `long long`:\r\nhttps://github.com/redis/redis/blob/df1890ef7fc0691c0b940f00ddff14a1c395a52a/src/object.c#L1554-L1656\r\n\r\nThe computation where subtraction of `size_t` values leading to wrap around is happen here:\r\nhttps://github.com/redis/redis/blob/df1890ef7fc0691c0b940f00ddff14a1c395a52a/src/object.c#L1172-L1187\r\n\r\nSo since there are 4 fields where subtraction with wrap around could happen I've decided to preemptively change types  to signed in `rustis`: 3 of them stored in redis code as `ssize_t` and one as `size_t`, but is serialized to negative value anyway.\r\n","reactions":{"url":"https://api.github.com/repos/dahomey-technologies/rustis/issues/29/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/dahomey-technologies/rustis/issues/29/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":9665468151,"node_id":"REFE_lADOAAJhcs4WwX_8zwAAAAJAG1b3","url":"https://api.github.com/repos/redis/redis/issues/events/9665468151","actor":{"login":"pulllock","id":5352960,"node_id":"MDQ6VXNlcjUzNTI5NjA=","avatar_url":"https://avatars.githubusercontent.com/u/5352960?v=4","gravatar_id":"","url":"https://api.github.com/users/pulllock","html_url":"https://github.com/pulllock","followers_url":"https://api.github.com/users/pulllock/followers","following_url":"https://api.github.com/users/pulllock/following{/other_user}","gists_url":"https://api.github.com/users/pulllock/gists{/gist_id}","starred_url":"https://api.github.com/users/pulllock/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pulllock/subscriptions","organizations_url":"https://api.github.com/users/pulllock/orgs","repos_url":"https://api.github.com/users/pulllock/repos","events_url":"https://api.github.com/users/pulllock/events{/privacy}","received_events_url":"https://api.github.com/users/pulllock/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"f3fe65fe9d6c101db121b665b7597b104fc6da24","commit_url":"https://api.github.com/repos/pulllock/redis/commits/f3fe65fe9d6c101db121b665b7597b104fc6da24","created_at":"2023-06-28T14:24:41Z","performed_via_github_app":null}]