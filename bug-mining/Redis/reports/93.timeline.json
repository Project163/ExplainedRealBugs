[{"url":"https://api.github.com/repos/redis/redis/issues/comments/1819015016","html_url":"https://github.com/redis/redis/issues/12785#issuecomment-1819015016","issue_url":"https://api.github.com/repos/redis/redis/issues/12785","id":1819015016,"node_id":"IC_kwDOAAJhcs5sa_do","user":{"login":"rishinair19","id":65503379,"node_id":"MDQ6VXNlcjY1NTAzMzc5","avatar_url":"https://avatars.githubusercontent.com/u/65503379?v=4","gravatar_id":"","url":"https://api.github.com/users/rishinair19","html_url":"https://github.com/rishinair19","followers_url":"https://api.github.com/users/rishinair19/followers","following_url":"https://api.github.com/users/rishinair19/following{/other_user}","gists_url":"https://api.github.com/users/rishinair19/gists{/gist_id}","starred_url":"https://api.github.com/users/rishinair19/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rishinair19/subscriptions","organizations_url":"https://api.github.com/users/rishinair19/orgs","repos_url":"https://api.github.com/users/rishinair19/repos","events_url":"https://api.github.com/users/rishinair19/events{/privacy}","received_events_url":"https://api.github.com/users/rishinair19/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-20T12:55:53Z","updated_at":"2023-11-20T12:55:53Z","body":"Is this because of redisearch module? ","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/redis/redis/issues/comments/1819015016/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"rishinair19","id":65503379,"node_id":"MDQ6VXNlcjY1NTAzMzc5","avatar_url":"https://avatars.githubusercontent.com/u/65503379?v=4","gravatar_id":"","url":"https://api.github.com/users/rishinair19","html_url":"https://github.com/rishinair19","followers_url":"https://api.github.com/users/rishinair19/followers","following_url":"https://api.github.com/users/rishinair19/following{/other_user}","gists_url":"https://api.github.com/users/rishinair19/gists{/gist_id}","starred_url":"https://api.github.com/users/rishinair19/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rishinair19/subscriptions","organizations_url":"https://api.github.com/users/rishinair19/orgs","repos_url":"https://api.github.com/users/rishinair19/repos","events_url":"https://api.github.com/users/rishinair19/events{/privacy}","received_events_url":"https://api.github.com/users/rishinair19/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/redis/redis/issues/comments/1820096113","html_url":"https://github.com/redis/redis/issues/12785#issuecomment-1820096113","issue_url":"https://api.github.com/repos/redis/redis/issues/12785","id":1820096113,"node_id":"IC_kwDOAAJhcs5sfHZx","user":{"login":"sundb","id":965798,"node_id":"MDQ6VXNlcjk2NTc5OA==","avatar_url":"https://avatars.githubusercontent.com/u/965798?v=4","gravatar_id":"","url":"https://api.github.com/users/sundb","html_url":"https://github.com/sundb","followers_url":"https://api.github.com/users/sundb/followers","following_url":"https://api.github.com/users/sundb/following{/other_user}","gists_url":"https://api.github.com/users/sundb/gists{/gist_id}","starred_url":"https://api.github.com/users/sundb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sundb/subscriptions","organizations_url":"https://api.github.com/users/sundb/orgs","repos_url":"https://api.github.com/users/sundb/repos","events_url":"https://api.github.com/users/sundb/events{/privacy}","received_events_url":"https://api.github.com/users/sundb/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-21T02:03:31Z","updated_at":"2023-11-21T05:31:36Z","body":"@rishinair19 Thx, It's possible that it's not due to redisearch module.\r\nLike follow example:\r\nThe example has reproduced the crash locally.\r\n\r\nconfig\r\n```\r\nio-threads 4\r\n```\r\n\r\n```diff\r\ndiff --git a/tests/modules/blockedclient.c b/tests/modules/blockedclient.c\r\nindex 92060fd33..7d0e044b9 100644\r\n--- a/tests/modules/blockedclient.c\r\n+++ b/tests/modules/blockedclient.c\r\n@@ -30,21 +30,21 @@ void *sub_worker(void *arg) {\r\n \r\n void *worker(void *arg) {\r\n     // Retrieve blocked client\r\n-    RedisModuleBlockedClient *bc = (RedisModuleBlockedClient *)arg;\r\n+    // RedisModuleBlockedClient *bc = (RedisModuleBlockedClient *)arg;\r\n \r\n     // Get Redis module context\r\n-    RedisModuleCtx *ctx = RedisModule_GetThreadSafeContext(bc);\r\n+    RedisModuleCtx *ctx = RedisModule_GetThreadSafeContext(NULL);\r\n \r\n     // Acquire GIL\r\n     RedisModule_ThreadSafeContextLock(ctx);\r\n \r\n     // Create another thread which will try to acquire the GIL\r\n-    pthread_t tid;\r\n-    int res = pthread_create(&tid, NULL, sub_worker, ctx);\r\n-    assert(res == 0);\r\n+    // pthread_t tid;\r\n+    // int res = pthread_create(&tid, NULL, sub_worker, ctx);\r\n+    // assert(res == 0);\r\n \r\n     // Wait for thread\r\n-    pthread_join(tid, NULL);\r\n+    // pthread_join(tid, NULL);\r\n \r\n     // Release GIL\r\n     RedisModule_ThreadSafeContextUnlock(ctx);\r\n@@ -53,7 +53,7 @@ void *worker(void *arg) {\r\n     RedisModule_ReplyWithSimpleString(ctx, \"OK\");\r\n \r\n     // Unblock client\r\n-    RedisModule_UnblockClient(bc, NULL);\r\n+    // RedisModule_UnblockClient(bc, NULL);\r\n \r\n     // Free the Redis module context\r\n     RedisModule_FreeThreadSafeContext(ctx);\r\n@@ -66,7 +66,7 @@ int acquire_gil(RedisModuleCtx *ctx, RedisModuleString **argv, int argc)\r\n     UNUSED(argv);\r\n     UNUSED(argc);\r\n \r\n-    int flags = RedisModule_GetContextFlags(ctx);\r\n+    /* int flags = RedisModule_GetContextFlags(ctx);\r\n     int allFlags = RedisModule_GetContextFlagsAll();\r\n     if ((allFlags & REDISMODULE_CTX_FLAGS_MULTI) &&\r\n         (flags & REDISMODULE_CTX_FLAGS_MULTI)) {\r\n@@ -78,19 +78,20 @@ int acquire_gil(RedisModuleCtx *ctx, RedisModuleString **argv, int argc)\r\n         (flags & REDISMODULE_CTX_FLAGS_DENY_BLOCKING)) {\r\n         RedisModule_ReplyWithSimpleString(ctx, \"Blocked client is not allowed\");\r\n         return REDISMODULE_OK;\r\n-    }\r\n+    } */\r\n \r\n     /* This command handler tries to acquire the GIL twice\r\n      * once in the worker thread using \"RedisModule_ThreadSafeContextLock\"\r\n      * second in the sub-worker thread\r\n      * using \"RedisModule_ThreadSafeContextTryLock\"\r\n      * as the GIL is already locked. */\r\n-    RedisModuleBlockedClient *bc = RedisModule_BlockClient(ctx, NULL, NULL, NULL, 0);\r\n+    // RedisModuleBlockedClient *bc = RedisModule_BlockClient(ctx, NULL, NULL, NULL, 0);\r\n \r\n     pthread_t tid;\r\n-    int res = pthread_create(&tid, NULL, worker, bc);\r\n+    int res = pthread_create(&tid, NULL, worker, NULL);\r\n     assert(res == 0);\r\n \r\n+    RedisModule_ReplyWithSimpleString(ctx, \"OK\");\r\n     return REDISMODULE_OK;\r\n }\r\n```\r\n\r\n```\r\n./src/redis-benchmark -n 100000000 acquire_gil\r\n```\r\n\r\nwhen call `RedisModule_FreeThreadSafeContext()` and free client after `RedisModule_ThreadSafeContextUnlock()`,\r\nit's possible to trigger this assertion.\r\nping @oranagra ","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/redis/redis/issues/comments/1820096113/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sundb","id":965798,"node_id":"MDQ6VXNlcjk2NTc5OA==","avatar_url":"https://avatars.githubusercontent.com/u/965798?v=4","gravatar_id":"","url":"https://api.github.com/users/sundb","html_url":"https://github.com/sundb","followers_url":"https://api.github.com/users/sundb/followers","following_url":"https://api.github.com/users/sundb/following{/other_user}","gists_url":"https://api.github.com/users/sundb/gists{/gist_id}","starred_url":"https://api.github.com/users/sundb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sundb/subscriptions","organizations_url":"https://api.github.com/users/sundb/orgs","repos_url":"https://api.github.com/users/sundb/repos","events_url":"https://api.github.com/users/sundb/events{/privacy}","received_events_url":"https://api.github.com/users/sundb/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":11018518657,"node_id":"MEE_lADOAAJhcs53Vi_nzwAAAAKQwUCB","url":"https://api.github.com/repos/redis/redis/issues/events/11018518657","actor":{"login":"oranagra","id":7045099,"node_id":"MDQ6VXNlcjcwNDUwOTk=","avatar_url":"https://avatars.githubusercontent.com/u/7045099?v=4","gravatar_id":"","url":"https://api.github.com/users/oranagra","html_url":"https://github.com/oranagra","followers_url":"https://api.github.com/users/oranagra/followers","following_url":"https://api.github.com/users/oranagra/following{/other_user}","gists_url":"https://api.github.com/users/oranagra/gists{/gist_id}","starred_url":"https://api.github.com/users/oranagra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oranagra/subscriptions","organizations_url":"https://api.github.com/users/oranagra/orgs","repos_url":"https://api.github.com/users/oranagra/repos","events_url":"https://api.github.com/users/oranagra/events{/privacy}","received_events_url":"https://api.github.com/users/oranagra/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-11-21T02:03:32Z","performed_via_github_app":null},{"id":11018518661,"node_id":"SE_lADOAAJhcs53Vi_nzwAAAAKQwUCF","url":"https://api.github.com/repos/redis/redis/issues/events/11018518661","actor":{"login":"oranagra","id":7045099,"node_id":"MDQ6VXNlcjcwNDUwOTk=","avatar_url":"https://avatars.githubusercontent.com/u/7045099?v=4","gravatar_id":"","url":"https://api.github.com/users/oranagra","html_url":"https://github.com/oranagra","followers_url":"https://api.github.com/users/oranagra/followers","following_url":"https://api.github.com/users/oranagra/following{/other_user}","gists_url":"https://api.github.com/users/oranagra/gists{/gist_id}","starred_url":"https://api.github.com/users/oranagra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oranagra/subscriptions","organizations_url":"https://api.github.com/users/oranagra/orgs","repos_url":"https://api.github.com/users/oranagra/repos","events_url":"https://api.github.com/users/oranagra/events{/privacy}","received_events_url":"https://api.github.com/users/oranagra/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-11-21T02:03:32Z","performed_via_github_app":null},{"id":11018518689,"node_id":"MEE_lADOAAJhcs53Vi_nzwAAAAKQwUCh","url":"https://api.github.com/repos/redis/redis/issues/events/11018518689","actor":{"login":"rishinair19","id":65503379,"node_id":"MDQ6VXNlcjY1NTAzMzc5","avatar_url":"https://avatars.githubusercontent.com/u/65503379?v=4","gravatar_id":"","url":"https://api.github.com/users/rishinair19","html_url":"https://github.com/rishinair19","followers_url":"https://api.github.com/users/rishinair19/followers","following_url":"https://api.github.com/users/rishinair19/following{/other_user}","gists_url":"https://api.github.com/users/rishinair19/gists{/gist_id}","starred_url":"https://api.github.com/users/rishinair19/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rishinair19/subscriptions","organizations_url":"https://api.github.com/users/rishinair19/orgs","repos_url":"https://api.github.com/users/rishinair19/repos","events_url":"https://api.github.com/users/rishinair19/events{/privacy}","received_events_url":"https://api.github.com/users/rishinair19/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-11-21T02:03:32Z","performed_via_github_app":null},{"id":11018518717,"node_id":"SE_lADOAAJhcs53Vi_nzwAAAAKQwUC9","url":"https://api.github.com/repos/redis/redis/issues/events/11018518717","actor":{"login":"rishinair19","id":65503379,"node_id":"MDQ6VXNlcjY1NTAzMzc5","avatar_url":"https://avatars.githubusercontent.com/u/65503379?v=4","gravatar_id":"","url":"https://api.github.com/users/rishinair19","html_url":"https://github.com/rishinair19","followers_url":"https://api.github.com/users/rishinair19/followers","following_url":"https://api.github.com/users/rishinair19/following{/other_user}","gists_url":"https://api.github.com/users/rishinair19/gists{/gist_id}","starred_url":"https://api.github.com/users/rishinair19/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rishinair19/subscriptions","organizations_url":"https://api.github.com/users/rishinair19/orgs","repos_url":"https://api.github.com/users/rishinair19/repos","events_url":"https://api.github.com/users/rishinair19/events{/privacy}","received_events_url":"https://api.github.com/users/rishinair19/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-11-21T02:03:32Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/redis/redis/issues/comments/1820256105","html_url":"https://github.com/redis/redis/issues/12785#issuecomment-1820256105","issue_url":"https://api.github.com/repos/redis/redis/issues/12785","id":1820256105,"node_id":"IC_kwDOAAJhcs5sfudp","user":{"login":"rishinair19","id":65503379,"node_id":"MDQ6VXNlcjY1NTAzMzc5","avatar_url":"https://avatars.githubusercontent.com/u/65503379?v=4","gravatar_id":"","url":"https://api.github.com/users/rishinair19","html_url":"https://github.com/rishinair19","followers_url":"https://api.github.com/users/rishinair19/followers","following_url":"https://api.github.com/users/rishinair19/following{/other_user}","gists_url":"https://api.github.com/users/rishinair19/gists{/gist_id}","starred_url":"https://api.github.com/users/rishinair19/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rishinair19/subscriptions","organizations_url":"https://api.github.com/users/rishinair19/orgs","repos_url":"https://api.github.com/users/rishinair19/repos","events_url":"https://api.github.com/users/rishinair19/events{/privacy}","received_events_url":"https://api.github.com/users/rishinair19/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-21T05:16:49Z","updated_at":"2023-11-21T05:16:49Z","body":"I had increased 'io-threads' in redis.conf to 3, reverted that change to default value and so far issue has not re-occurred. ","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/redis/redis/issues/comments/1820256105/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"rishinair19","id":65503379,"node_id":"MDQ6VXNlcjY1NTAzMzc5","avatar_url":"https://avatars.githubusercontent.com/u/65503379?v=4","gravatar_id":"","url":"https://api.github.com/users/rishinair19","html_url":"https://github.com/rishinair19","followers_url":"https://api.github.com/users/rishinair19/followers","following_url":"https://api.github.com/users/rishinair19/following{/other_user}","gists_url":"https://api.github.com/users/rishinair19/gists{/gist_id}","starred_url":"https://api.github.com/users/rishinair19/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rishinair19/subscriptions","organizations_url":"https://api.github.com/users/rishinair19/orgs","repos_url":"https://api.github.com/users/rishinair19/repos","events_url":"https://api.github.com/users/rishinair19/events{/privacy}","received_events_url":"https://api.github.com/users/rishinair19/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/redis/redis/issues/comments/1820261780","html_url":"https://github.com/redis/redis/issues/12785#issuecomment-1820261780","issue_url":"https://api.github.com/repos/redis/redis/issues/12785","id":1820261780,"node_id":"IC_kwDOAAJhcs5sfv2U","user":{"login":"sundb","id":965798,"node_id":"MDQ6VXNlcjk2NTc5OA==","avatar_url":"https://avatars.githubusercontent.com/u/965798?v=4","gravatar_id":"","url":"https://api.github.com/users/sundb","html_url":"https://github.com/sundb","followers_url":"https://api.github.com/users/sundb/followers","following_url":"https://api.github.com/users/sundb/following{/other_user}","gists_url":"https://api.github.com/users/sundb/gists{/gist_id}","starred_url":"https://api.github.com/users/sundb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sundb/subscriptions","organizations_url":"https://api.github.com/users/sundb/orgs","repos_url":"https://api.github.com/users/sundb/repos","events_url":"https://api.github.com/users/sundb/events{/privacy}","received_events_url":"https://api.github.com/users/sundb/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-21T05:24:01Z","updated_at":"2023-11-21T05:24:01Z","body":"@rishinair19 Yes, it will only occur when` io-threads` is turned on.","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/redis/redis/issues/comments/1820261780/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sundb","id":965798,"node_id":"MDQ6VXNlcjk2NTc5OA==","avatar_url":"https://avatars.githubusercontent.com/u/965798?v=4","gravatar_id":"","url":"https://api.github.com/users/sundb","html_url":"https://github.com/sundb","followers_url":"https://api.github.com/users/sundb/followers","following_url":"https://api.github.com/users/sundb/following{/other_user}","gists_url":"https://api.github.com/users/sundb/gists{/gist_id}","starred_url":"https://api.github.com/users/sundb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sundb/subscriptions","organizations_url":"https://api.github.com/users/sundb/orgs","repos_url":"https://api.github.com/users/sundb/repos","events_url":"https://api.github.com/users/sundb/events{/privacy}","received_events_url":"https://api.github.com/users/sundb/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":11019546822,"node_id":"MEE_lADOAAJhcs53Vi_nzwAAAAKQ0PDG","url":"https://api.github.com/repos/redis/redis/issues/events/11019546822","actor":{"login":"rishinair19","id":65503379,"node_id":"MDQ6VXNlcjY1NTAzMzc5","avatar_url":"https://avatars.githubusercontent.com/u/65503379?v=4","gravatar_id":"","url":"https://api.github.com/users/rishinair19","html_url":"https://github.com/rishinair19","followers_url":"https://api.github.com/users/rishinair19/followers","following_url":"https://api.github.com/users/rishinair19/following{/other_user}","gists_url":"https://api.github.com/users/rishinair19/gists{/gist_id}","starred_url":"https://api.github.com/users/rishinair19/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rishinair19/subscriptions","organizations_url":"https://api.github.com/users/rishinair19/orgs","repos_url":"https://api.github.com/users/rishinair19/repos","events_url":"https://api.github.com/users/rishinair19/events{/privacy}","received_events_url":"https://api.github.com/users/rishinair19/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-11-21T05:24:01Z","performed_via_github_app":null},{"id":11019546829,"node_id":"SE_lADOAAJhcs53Vi_nzwAAAAKQ0PDN","url":"https://api.github.com/repos/redis/redis/issues/events/11019546829","actor":{"login":"rishinair19","id":65503379,"node_id":"MDQ6VXNlcjY1NTAzMzc5","avatar_url":"https://avatars.githubusercontent.com/u/65503379?v=4","gravatar_id":"","url":"https://api.github.com/users/rishinair19","html_url":"https://github.com/rishinair19","followers_url":"https://api.github.com/users/rishinair19/followers","following_url":"https://api.github.com/users/rishinair19/following{/other_user}","gists_url":"https://api.github.com/users/rishinair19/gists{/gist_id}","starred_url":"https://api.github.com/users/rishinair19/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rishinair19/subscriptions","organizations_url":"https://api.github.com/users/rishinair19/orgs","repos_url":"https://api.github.com/users/rishinair19/repos","events_url":"https://api.github.com/users/rishinair19/events{/privacy}","received_events_url":"https://api.github.com/users/rishinair19/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-11-21T05:24:01Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/redis/redis/issues/comments/1820288564","html_url":"https://github.com/redis/redis/issues/12785#issuecomment-1820288564","issue_url":"https://api.github.com/repos/redis/redis/issues/12785","id":1820288564,"node_id":"IC_kwDOAAJhcs5sf2Y0","user":{"login":"rishinair19","id":65503379,"node_id":"MDQ6VXNlcjY1NTAzMzc5","avatar_url":"https://avatars.githubusercontent.com/u/65503379?v=4","gravatar_id":"","url":"https://api.github.com/users/rishinair19","html_url":"https://github.com/rishinair19","followers_url":"https://api.github.com/users/rishinair19/followers","following_url":"https://api.github.com/users/rishinair19/following{/other_user}","gists_url":"https://api.github.com/users/rishinair19/gists{/gist_id}","starred_url":"https://api.github.com/users/rishinair19/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rishinair19/subscriptions","organizations_url":"https://api.github.com/users/rishinair19/orgs","repos_url":"https://api.github.com/users/rishinair19/repos","events_url":"https://api.github.com/users/rishinair19/events{/privacy}","received_events_url":"https://api.github.com/users/rishinair19/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-21T05:58:08Z","updated_at":"2023-11-21T05:58:08Z","body":"Should I close this request then? I'm okay with io-thread being 1, not seeing issue anymore.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/redis/redis/issues/comments/1820288564/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"rishinair19","id":65503379,"node_id":"MDQ6VXNlcjY1NTAzMzc5","avatar_url":"https://avatars.githubusercontent.com/u/65503379?v=4","gravatar_id":"","url":"https://api.github.com/users/rishinair19","html_url":"https://github.com/rishinair19","followers_url":"https://api.github.com/users/rishinair19/followers","following_url":"https://api.github.com/users/rishinair19/following{/other_user}","gists_url":"https://api.github.com/users/rishinair19/gists{/gist_id}","starred_url":"https://api.github.com/users/rishinair19/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rishinair19/subscriptions","organizations_url":"https://api.github.com/users/rishinair19/orgs","repos_url":"https://api.github.com/users/rishinair19/repos","events_url":"https://api.github.com/users/rishinair19/events{/privacy}","received_events_url":"https://api.github.com/users/rishinair19/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/redis/redis/issues/comments/1820294079","html_url":"https://github.com/redis/redis/issues/12785#issuecomment-1820294079","issue_url":"https://api.github.com/repos/redis/redis/issues/12785","id":1820294079,"node_id":"IC_kwDOAAJhcs5sf3u_","user":{"login":"sundb","id":965798,"node_id":"MDQ6VXNlcjk2NTc5OA==","avatar_url":"https://avatars.githubusercontent.com/u/965798?v=4","gravatar_id":"","url":"https://api.github.com/users/sundb","html_url":"https://github.com/sundb","followers_url":"https://api.github.com/users/sundb/followers","following_url":"https://api.github.com/users/sundb/following{/other_user}","gists_url":"https://api.github.com/users/sundb/gists{/gist_id}","starred_url":"https://api.github.com/users/sundb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sundb/subscriptions","organizations_url":"https://api.github.com/users/sundb/orgs","repos_url":"https://api.github.com/users/sundb/repos","events_url":"https://api.github.com/users/sundb/events{/privacy}","received_events_url":"https://api.github.com/users/sundb/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-21T06:04:55Z","updated_at":"2023-11-21T06:04:55Z","body":"@rishinair19 Please leave this issue open and we will fix it.\r\n","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/redis/redis/issues/comments/1820294079/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sundb","id":965798,"node_id":"MDQ6VXNlcjk2NTc5OA==","avatar_url":"https://avatars.githubusercontent.com/u/965798?v=4","gravatar_id":"","url":"https://api.github.com/users/sundb","html_url":"https://github.com/sundb","followers_url":"https://api.github.com/users/sundb/followers","following_url":"https://api.github.com/users/sundb/following{/other_user}","gists_url":"https://api.github.com/users/sundb/gists{/gist_id}","starred_url":"https://api.github.com/users/sundb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sundb/subscriptions","organizations_url":"https://api.github.com/users/sundb/orgs","repos_url":"https://api.github.com/users/sundb/repos","events_url":"https://api.github.com/users/sundb/events{/privacy}","received_events_url":"https://api.github.com/users/sundb/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":11019811719,"node_id":"MEE_lADOAAJhcs53Vi_nzwAAAAKQ1PuH","url":"https://api.github.com/repos/redis/redis/issues/events/11019811719","actor":{"login":"rishinair19","id":65503379,"node_id":"MDQ6VXNlcjY1NTAzMzc5","avatar_url":"https://avatars.githubusercontent.com/u/65503379?v=4","gravatar_id":"","url":"https://api.github.com/users/rishinair19","html_url":"https://github.com/rishinair19","followers_url":"https://api.github.com/users/rishinair19/followers","following_url":"https://api.github.com/users/rishinair19/following{/other_user}","gists_url":"https://api.github.com/users/rishinair19/gists{/gist_id}","starred_url":"https://api.github.com/users/rishinair19/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rishinair19/subscriptions","organizations_url":"https://api.github.com/users/rishinair19/orgs","repos_url":"https://api.github.com/users/rishinair19/repos","events_url":"https://api.github.com/users/rishinair19/events{/privacy}","received_events_url":"https://api.github.com/users/rishinair19/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-11-21T06:04:55Z","performed_via_github_app":null},{"id":11019811734,"node_id":"SE_lADOAAJhcs53Vi_nzwAAAAKQ1PuW","url":"https://api.github.com/repos/redis/redis/issues/events/11019811734","actor":{"login":"rishinair19","id":65503379,"node_id":"MDQ6VXNlcjY1NTAzMzc5","avatar_url":"https://avatars.githubusercontent.com/u/65503379?v=4","gravatar_id":"","url":"https://api.github.com/users/rishinair19","html_url":"https://github.com/rishinair19","followers_url":"https://api.github.com/users/rishinair19/followers","following_url":"https://api.github.com/users/rishinair19/following{/other_user}","gists_url":"https://api.github.com/users/rishinair19/gists{/gist_id}","starred_url":"https://api.github.com/users/rishinair19/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rishinair19/subscriptions","organizations_url":"https://api.github.com/users/rishinair19/orgs","repos_url":"https://api.github.com/users/rishinair19/repos","events_url":"https://api.github.com/users/rishinair19/events{/privacy}","received_events_url":"https://api.github.com/users/rishinair19/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-11-21T06:04:55Z","performed_via_github_app":null},{"id":14877044820,"node_id":"ATPVTE_lADOAAJhcs53Vi_nzwAAAAN2vbBU","url":"https://api.github.com/repos/redis/redis/issues/events/14877044820","actor":{"login":"oranagra","id":7045099,"node_id":"MDQ6VXNlcjcwNDUwOTk=","avatar_url":"https://avatars.githubusercontent.com/u/7045099?v=4","gravatar_id":"","url":"https://api.github.com/users/oranagra","html_url":"https://github.com/oranagra","followers_url":"https://api.github.com/users/oranagra/followers","following_url":"https://api.github.com/users/oranagra/following{/other_user}","gists_url":"https://api.github.com/users/oranagra/gists{/gist_id}","starred_url":"https://api.github.com/users/oranagra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oranagra/subscriptions","organizations_url":"https://api.github.com/users/oranagra/orgs","repos_url":"https://api.github.com/users/oranagra/repos","events_url":"https://api.github.com/users/oranagra/events{/privacy}","received_events_url":"https://api.github.com/users/oranagra/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"added_to_project_v2","commit_id":null,"commit_url":null,"created_at":"2023-11-21T10:41:54Z","performed_via_github_app":null},{"id":14891017073,"node_id":"ATPVTE_lADOAAJhcs53Vi_nzwAAAAN3kuNx","url":"https://api.github.com/repos/redis/redis/issues/events/14891017073","actor":{"login":"oranagra","id":7045099,"node_id":"MDQ6VXNlcjcwNDUwOTk=","avatar_url":"https://avatars.githubusercontent.com/u/7045099?v=4","gravatar_id":"","url":"https://api.github.com/users/oranagra","html_url":"https://github.com/oranagra","followers_url":"https://api.github.com/users/oranagra/followers","following_url":"https://api.github.com/users/oranagra/following{/other_user}","gists_url":"https://api.github.com/users/oranagra/gists{/gist_id}","starred_url":"https://api.github.com/users/oranagra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oranagra/subscriptions","organizations_url":"https://api.github.com/users/oranagra/orgs","repos_url":"https://api.github.com/users/oranagra/repos","events_url":"https://api.github.com/users/oranagra/events{/privacy}","received_events_url":"https://api.github.com/users/oranagra/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"added_to_project_v2","commit_id":null,"commit_url":null,"created_at":"2023-11-21T10:41:54Z","performed_via_github_app":null},{"id":15094233056,"node_id":"PVTISC_lADOAAJhcs53Vi_nzwAAAAODr7fg","url":"https://api.github.com/repos/redis/redis/issues/events/15094233056","actor":{"login":"github-project-automation[bot]","id":113052574,"node_id":"BOT_kgDOBr0Lng","avatar_url":"https://avatars.githubusercontent.com/in/235829?v=4","gravatar_id":"","url":"https://api.github.com/users/github-project-automation%5Bbot%5D","html_url":"https://github.com/apps/github-project-automation","followers_url":"https://api.github.com/users/github-project-automation%5Bbot%5D/followers","following_url":"https://api.github.com/users/github-project-automation%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/github-project-automation%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/github-project-automation%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/github-project-automation%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/github-project-automation%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/github-project-automation%5Bbot%5D/repos","events_url":"https://api.github.com/users/github-project-automation%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/github-project-automation%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"event":"project_v2_item_status_changed","commit_id":null,"commit_url":null,"created_at":"2023-11-21T10:41:55Z","performed_via_github_app":null},{"id":15085082410,"node_id":"PVTISC_lADOAAJhcs53Vi_nzwAAAAODJBcq","url":"https://api.github.com/repos/redis/redis/issues/events/15085082410","actor":{"login":"github-project-automation[bot]","id":113052574,"node_id":"BOT_kgDOBr0Lng","avatar_url":"https://avatars.githubusercontent.com/in/235829?v=4","gravatar_id":"","url":"https://api.github.com/users/github-project-automation%5Bbot%5D","html_url":"https://github.com/apps/github-project-automation","followers_url":"https://api.github.com/users/github-project-automation%5Bbot%5D/followers","following_url":"https://api.github.com/users/github-project-automation%5Bbot%5D/following{/other_user}","gists_url":"https://api.github.com/users/github-project-automation%5Bbot%5D/gists{/gist_id}","starred_url":"https://api.github.com/users/github-project-automation%5Bbot%5D/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/github-project-automation%5Bbot%5D/subscriptions","organizations_url":"https://api.github.com/users/github-project-automation%5Bbot%5D/orgs","repos_url":"https://api.github.com/users/github-project-automation%5Bbot%5D/repos","events_url":"https://api.github.com/users/github-project-automation%5Bbot%5D/events{/privacy}","received_events_url":"https://api.github.com/users/github-project-automation%5Bbot%5D/received_events","type":"Bot","user_view_type":"public","site_admin":false},"event":"project_v2_item_status_changed","commit_id":null,"commit_url":null,"created_at":"2023-11-21T10:41:56Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/redis/redis/issues/comments/1820684453","html_url":"https://github.com/redis/redis/issues/12785#issuecomment-1820684453","issue_url":"https://api.github.com/repos/redis/redis/issues/12785","id":1820684453,"node_id":"IC_kwDOAAJhcs5shXCl","user":{"login":"oranagra","id":7045099,"node_id":"MDQ6VXNlcjcwNDUwOTk=","avatar_url":"https://avatars.githubusercontent.com/u/7045099?v=4","gravatar_id":"","url":"https://api.github.com/users/oranagra","html_url":"https://github.com/oranagra","followers_url":"https://api.github.com/users/oranagra/followers","following_url":"https://api.github.com/users/oranagra/following{/other_user}","gists_url":"https://api.github.com/users/oranagra/gists{/gist_id}","starred_url":"https://api.github.com/users/oranagra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oranagra/subscriptions","organizations_url":"https://api.github.com/users/oranagra/orgs","repos_url":"https://api.github.com/users/oranagra/repos","events_url":"https://api.github.com/users/oranagra/events{/privacy}","received_events_url":"https://api.github.com/users/oranagra/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-21T10:54:08Z","updated_at":"2023-11-21T10:54:08Z","body":"the thing is that the (fake) client is freed while the GIL is not locked, so this assertion could happen, and we can probably easily fix it by moving the code that handles clients_pending_write_node and pending_read_list_node into the `if (c->conn)` block (since this fake client will never have any IO anyway).\r\nbut also other portions of unlinkClient can be dangerous to run.\r\nlike removing it from unblocked_clients, the code in disableTracking, stat_clients_type_memory, etc.\r\n@MeirShpilraien PTAL","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/redis/redis/issues/comments/1820684453/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"oranagra","id":7045099,"node_id":"MDQ6VXNlcjcwNDUwOTk=","avatar_url":"https://avatars.githubusercontent.com/u/7045099?v=4","gravatar_id":"","url":"https://api.github.com/users/oranagra","html_url":"https://github.com/oranagra","followers_url":"https://api.github.com/users/oranagra/followers","following_url":"https://api.github.com/users/oranagra/following{/other_user}","gists_url":"https://api.github.com/users/oranagra/gists{/gist_id}","starred_url":"https://api.github.com/users/oranagra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oranagra/subscriptions","organizations_url":"https://api.github.com/users/oranagra/orgs","repos_url":"https://api.github.com/users/oranagra/repos","events_url":"https://api.github.com/users/oranagra/events{/privacy}","received_events_url":"https://api.github.com/users/oranagra/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":11022729971,"node_id":"MEE_lADOAAJhcs53Vi_nzwAAAAKRAYLz","url":"https://api.github.com/repos/redis/redis/issues/events/11022729971","actor":{"login":"MeirShpilraien","id":28348822,"node_id":"MDQ6VXNlcjI4MzQ4ODIy","avatar_url":"https://avatars.githubusercontent.com/u/28348822?v=4","gravatar_id":"","url":"https://api.github.com/users/MeirShpilraien","html_url":"https://github.com/MeirShpilraien","followers_url":"https://api.github.com/users/MeirShpilraien/followers","following_url":"https://api.github.com/users/MeirShpilraien/following{/other_user}","gists_url":"https://api.github.com/users/MeirShpilraien/gists{/gist_id}","starred_url":"https://api.github.com/users/MeirShpilraien/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MeirShpilraien/subscriptions","organizations_url":"https://api.github.com/users/MeirShpilraien/orgs","repos_url":"https://api.github.com/users/MeirShpilraien/repos","events_url":"https://api.github.com/users/MeirShpilraien/events{/privacy}","received_events_url":"https://api.github.com/users/MeirShpilraien/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-11-21T10:54:08Z","performed_via_github_app":null},{"id":11022729996,"node_id":"SE_lADOAAJhcs53Vi_nzwAAAAKRAYMM","url":"https://api.github.com/repos/redis/redis/issues/events/11022729996","actor":{"login":"MeirShpilraien","id":28348822,"node_id":"MDQ6VXNlcjI4MzQ4ODIy","avatar_url":"https://avatars.githubusercontent.com/u/28348822?v=4","gravatar_id":"","url":"https://api.github.com/users/MeirShpilraien","html_url":"https://github.com/MeirShpilraien","followers_url":"https://api.github.com/users/MeirShpilraien/followers","following_url":"https://api.github.com/users/MeirShpilraien/following{/other_user}","gists_url":"https://api.github.com/users/MeirShpilraien/gists{/gist_id}","starred_url":"https://api.github.com/users/MeirShpilraien/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MeirShpilraien/subscriptions","organizations_url":"https://api.github.com/users/MeirShpilraien/orgs","repos_url":"https://api.github.com/users/MeirShpilraien/repos","events_url":"https://api.github.com/users/MeirShpilraien/events{/privacy}","received_events_url":"https://api.github.com/users/MeirShpilraien/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-11-21T10:54:08Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/redis/redis/issues/comments/1821230272","html_url":"https://github.com/redis/redis/issues/12785#issuecomment-1821230272","issue_url":"https://api.github.com/repos/redis/redis/issues/12785","id":1821230272,"node_id":"IC_kwDOAAJhcs5sjcTA","user":{"login":"MeirShpilraien","id":28348822,"node_id":"MDQ6VXNlcjI4MzQ4ODIy","avatar_url":"https://avatars.githubusercontent.com/u/28348822?v=4","gravatar_id":"","url":"https://api.github.com/users/MeirShpilraien","html_url":"https://github.com/MeirShpilraien","followers_url":"https://api.github.com/users/MeirShpilraien/followers","following_url":"https://api.github.com/users/MeirShpilraien/following{/other_user}","gists_url":"https://api.github.com/users/MeirShpilraien/gists{/gist_id}","starred_url":"https://api.github.com/users/MeirShpilraien/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MeirShpilraien/subscriptions","organizations_url":"https://api.github.com/users/MeirShpilraien/orgs","repos_url":"https://api.github.com/users/MeirShpilraien/repos","events_url":"https://api.github.com/users/MeirShpilraien/events{/privacy}","received_events_url":"https://api.github.com/users/MeirShpilraien/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-21T16:14:01Z","updated_at":"2023-11-21T16:14:01Z","body":"So I was looking at the code and I believe the only issue is if allocating a thread safe ctx which is not attached to a blocked client. If the thread safe context is attached to a blocked client then when releasing it, the `freeClient` will not be called. After a discussion with @oranagra we believe that the right thing to do is to refactor `freeClient` function in such way that all the server data structures will only be touched if there is actually a connection attached to the client. If there are not connection attached to the client, it can safely be freed without touching any server globals and so it will be safe to free it without holding the GIL.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/redis/redis/issues/comments/1821230272/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"MeirShpilraien","id":28348822,"node_id":"MDQ6VXNlcjI4MzQ4ODIy","avatar_url":"https://avatars.githubusercontent.com/u/28348822?v=4","gravatar_id":"","url":"https://api.github.com/users/MeirShpilraien","html_url":"https://github.com/MeirShpilraien","followers_url":"https://api.github.com/users/MeirShpilraien/followers","following_url":"https://api.github.com/users/MeirShpilraien/following{/other_user}","gists_url":"https://api.github.com/users/MeirShpilraien/gists{/gist_id}","starred_url":"https://api.github.com/users/MeirShpilraien/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MeirShpilraien/subscriptions","organizations_url":"https://api.github.com/users/MeirShpilraien/orgs","repos_url":"https://api.github.com/users/MeirShpilraien/repos","events_url":"https://api.github.com/users/MeirShpilraien/events{/privacy}","received_events_url":"https://api.github.com/users/MeirShpilraien/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":11026516568,"node_id":"MEE_lADOAAJhcs53Vi_nzwAAAAKRO0pY","url":"https://api.github.com/repos/redis/redis/issues/events/11026516568","actor":{"login":"oranagra","id":7045099,"node_id":"MDQ6VXNlcjcwNDUwOTk=","avatar_url":"https://avatars.githubusercontent.com/u/7045099?v=4","gravatar_id":"","url":"https://api.github.com/users/oranagra","html_url":"https://github.com/oranagra","followers_url":"https://api.github.com/users/oranagra/followers","following_url":"https://api.github.com/users/oranagra/following{/other_user}","gists_url":"https://api.github.com/users/oranagra/gists{/gist_id}","starred_url":"https://api.github.com/users/oranagra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oranagra/subscriptions","organizations_url":"https://api.github.com/users/oranagra/orgs","repos_url":"https://api.github.com/users/oranagra/repos","events_url":"https://api.github.com/users/oranagra/events{/privacy}","received_events_url":"https://api.github.com/users/oranagra/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-11-21T16:14:01Z","performed_via_github_app":null},{"id":11026516587,"node_id":"SE_lADOAAJhcs53Vi_nzwAAAAKRO0pr","url":"https://api.github.com/repos/redis/redis/issues/events/11026516587","actor":{"login":"oranagra","id":7045099,"node_id":"MDQ6VXNlcjcwNDUwOTk=","avatar_url":"https://avatars.githubusercontent.com/u/7045099?v=4","gravatar_id":"","url":"https://api.github.com/users/oranagra","html_url":"https://github.com/oranagra","followers_url":"https://api.github.com/users/oranagra/followers","following_url":"https://api.github.com/users/oranagra/following{/other_user}","gists_url":"https://api.github.com/users/oranagra/gists{/gist_id}","starred_url":"https://api.github.com/users/oranagra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oranagra/subscriptions","organizations_url":"https://api.github.com/users/oranagra/orgs","repos_url":"https://api.github.com/users/oranagra/repos","events_url":"https://api.github.com/users/oranagra/events{/privacy}","received_events_url":"https://api.github.com/users/oranagra/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-11-21T16:14:01Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/redis/redis/issues/comments/1821524864","html_url":"https://github.com/redis/redis/issues/12785#issuecomment-1821524864","issue_url":"https://api.github.com/repos/redis/redis/issues/12785","id":1821524864,"node_id":"IC_kwDOAAJhcs5skkOA","user":{"login":"oranagra","id":7045099,"node_id":"MDQ6VXNlcjcwNDUwOTk=","avatar_url":"https://avatars.githubusercontent.com/u/7045099?v=4","gravatar_id":"","url":"https://api.github.com/users/oranagra","html_url":"https://github.com/oranagra","followers_url":"https://api.github.com/users/oranagra/followers","following_url":"https://api.github.com/users/oranagra/following{/other_user}","gists_url":"https://api.github.com/users/oranagra/gists{/gist_id}","starred_url":"https://api.github.com/users/oranagra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oranagra/subscriptions","organizations_url":"https://api.github.com/users/oranagra/orgs","repos_url":"https://api.github.com/users/oranagra/repos","events_url":"https://api.github.com/users/oranagra/events{/privacy}","received_events_url":"https://api.github.com/users/oranagra/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-21T19:12:11Z","updated_at":"2023-11-21T19:12:11Z","body":"few additional points:\r\n1. stressing again that this is not just a but with IO threads (the assertion), there are multi-threading issues here with module threads touching server globals without a lock.\r\n2. some of the actions in freeClient or unlinkClient can depend on c->conn being present, others can depend on the value of c->flags (doing things only if a certain flag is on, which could never happen for these fake clients).\r\n3. i'd like to try to understand when this problem started, which version, or under which conditions.\r\n\r\n@sundb maybe you want to try to tackle it?","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/redis/redis/issues/comments/1821524864/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"oranagra","id":7045099,"node_id":"MDQ6VXNlcjcwNDUwOTk=","avatar_url":"https://avatars.githubusercontent.com/u/7045099?v=4","gravatar_id":"","url":"https://api.github.com/users/oranagra","html_url":"https://github.com/oranagra","followers_url":"https://api.github.com/users/oranagra/followers","following_url":"https://api.github.com/users/oranagra/following{/other_user}","gists_url":"https://api.github.com/users/oranagra/gists{/gist_id}","starred_url":"https://api.github.com/users/oranagra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oranagra/subscriptions","organizations_url":"https://api.github.com/users/oranagra/orgs","repos_url":"https://api.github.com/users/oranagra/repos","events_url":"https://api.github.com/users/oranagra/events{/privacy}","received_events_url":"https://api.github.com/users/oranagra/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":11028269056,"node_id":"MEE_lADOAAJhcs53Vi_nzwAAAAKRVggA","url":"https://api.github.com/repos/redis/redis/issues/events/11028269056","actor":{"login":"sundb","id":965798,"node_id":"MDQ6VXNlcjk2NTc5OA==","avatar_url":"https://avatars.githubusercontent.com/u/965798?v=4","gravatar_id":"","url":"https://api.github.com/users/sundb","html_url":"https://github.com/sundb","followers_url":"https://api.github.com/users/sundb/followers","following_url":"https://api.github.com/users/sundb/following{/other_user}","gists_url":"https://api.github.com/users/sundb/gists{/gist_id}","starred_url":"https://api.github.com/users/sundb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sundb/subscriptions","organizations_url":"https://api.github.com/users/sundb/orgs","repos_url":"https://api.github.com/users/sundb/repos","events_url":"https://api.github.com/users/sundb/events{/privacy}","received_events_url":"https://api.github.com/users/sundb/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-11-21T19:12:11Z","performed_via_github_app":null},{"id":11028269070,"node_id":"SE_lADOAAJhcs53Vi_nzwAAAAKRVggO","url":"https://api.github.com/repos/redis/redis/issues/events/11028269070","actor":{"login":"sundb","id":965798,"node_id":"MDQ6VXNlcjk2NTc5OA==","avatar_url":"https://avatars.githubusercontent.com/u/965798?v=4","gravatar_id":"","url":"https://api.github.com/users/sundb","html_url":"https://github.com/sundb","followers_url":"https://api.github.com/users/sundb/followers","following_url":"https://api.github.com/users/sundb/following{/other_user}","gists_url":"https://api.github.com/users/sundb/gists{/gist_id}","starred_url":"https://api.github.com/users/sundb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sundb/subscriptions","organizations_url":"https://api.github.com/users/sundb/orgs","repos_url":"https://api.github.com/users/sundb/repos","events_url":"https://api.github.com/users/sundb/events{/privacy}","received_events_url":"https://api.github.com/users/sundb/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-11-21T19:12:12Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/redis/redis/issues/comments/1821939219","html_url":"https://github.com/redis/redis/issues/12785#issuecomment-1821939219","issue_url":"https://api.github.com/repos/redis/redis/issues/12785","id":1821939219,"node_id":"IC_kwDOAAJhcs5smJYT","user":{"login":"sundb","id":965798,"node_id":"MDQ6VXNlcjk2NTc5OA==","avatar_url":"https://avatars.githubusercontent.com/u/965798?v=4","gravatar_id":"","url":"https://api.github.com/users/sundb","html_url":"https://github.com/sundb","followers_url":"https://api.github.com/users/sundb/followers","following_url":"https://api.github.com/users/sundb/following{/other_user}","gists_url":"https://api.github.com/users/sundb/gists{/gist_id}","starred_url":"https://api.github.com/users/sundb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sundb/subscriptions","organizations_url":"https://api.github.com/users/sundb/orgs","repos_url":"https://api.github.com/users/sundb/repos","events_url":"https://api.github.com/users/sundb/events{/privacy}","received_events_url":"https://api.github.com/users/sundb/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2023-11-22T01:17:15Z","updated_at":"2023-11-22T01:17:15Z","body":"@oranagra i'll take it.","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/redis/redis/issues/comments/1821939219/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"sundb","id":965798,"node_id":"MDQ6VXNlcjk2NTc5OA==","avatar_url":"https://avatars.githubusercontent.com/u/965798?v=4","gravatar_id":"","url":"https://api.github.com/users/sundb","html_url":"https://github.com/sundb","followers_url":"https://api.github.com/users/sundb/followers","following_url":"https://api.github.com/users/sundb/following{/other_user}","gists_url":"https://api.github.com/users/sundb/gists{/gist_id}","starred_url":"https://api.github.com/users/sundb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sundb/subscriptions","organizations_url":"https://api.github.com/users/sundb/orgs","repos_url":"https://api.github.com/users/sundb/repos","events_url":"https://api.github.com/users/sundb/events{/privacy}","received_events_url":"https://api.github.com/users/sundb/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":11030779864,"node_id":"MEE_lADOAAJhcs53Vi_nzwAAAAKRfFfY","url":"https://api.github.com/repos/redis/redis/issues/events/11030779864","actor":{"login":"oranagra","id":7045099,"node_id":"MDQ6VXNlcjcwNDUwOTk=","avatar_url":"https://avatars.githubusercontent.com/u/7045099?v=4","gravatar_id":"","url":"https://api.github.com/users/oranagra","html_url":"https://github.com/oranagra","followers_url":"https://api.github.com/users/oranagra/followers","following_url":"https://api.github.com/users/oranagra/following{/other_user}","gists_url":"https://api.github.com/users/oranagra/gists{/gist_id}","starred_url":"https://api.github.com/users/oranagra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oranagra/subscriptions","organizations_url":"https://api.github.com/users/oranagra/orgs","repos_url":"https://api.github.com/users/oranagra/repos","events_url":"https://api.github.com/users/oranagra/events{/privacy}","received_events_url":"https://api.github.com/users/oranagra/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2023-11-22T01:17:15Z","performed_via_github_app":null},{"id":11030779868,"node_id":"SE_lADOAAJhcs53Vi_nzwAAAAKRfFfc","url":"https://api.github.com/repos/redis/redis/issues/events/11030779868","actor":{"login":"oranagra","id":7045099,"node_id":"MDQ6VXNlcjcwNDUwOTk=","avatar_url":"https://avatars.githubusercontent.com/u/7045099?v=4","gravatar_id":"","url":"https://api.github.com/users/oranagra","html_url":"https://github.com/oranagra","followers_url":"https://api.github.com/users/oranagra/followers","following_url":"https://api.github.com/users/oranagra/following{/other_user}","gists_url":"https://api.github.com/users/oranagra/gists{/gist_id}","starred_url":"https://api.github.com/users/oranagra/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oranagra/subscriptions","organizations_url":"https://api.github.com/users/oranagra/orgs","repos_url":"https://api.github.com/users/oranagra/repos","events_url":"https://api.github.com/users/oranagra/events{/privacy}","received_events_url":"https://api.github.com/users/oranagra/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2023-11-22T01:17:16Z","performed_via_github_app":null}]