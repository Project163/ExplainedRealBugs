diff --git a/src/debug.c b/src/debug.c
index facbd6104..192b69d9c 100644
--- a/src/debug.c
+++ b/src/debug.c
@@ -2076,7 +2076,7 @@ int memtest_test_linux_anonymous_maps(void) {
     int regions = 0, j;
 
     int fd = openDirectLogFiledes();
-    if (!fd) return 0;
+    if (fd == -1) return 0;
 
     fp = fopen("/proc/self/maps","r");
     if (!fp) {
