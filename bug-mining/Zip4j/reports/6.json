{"url":"https://api.github.com/repos/srikanth-lingala/zip4j/issues/10","repository_url":"https://api.github.com/repos/srikanth-lingala/zip4j","labels_url":"https://api.github.com/repos/srikanth-lingala/zip4j/issues/10/labels{/name}","comments_url":"https://api.github.com/repos/srikanth-lingala/zip4j/issues/10/comments","events_url":"https://api.github.com/repos/srikanth-lingala/zip4j/issues/10/events","html_url":"https://github.com/srikanth-lingala/zip4j/issues/10","id":463421734,"node_id":"MDU6SXNzdWU0NjM0MjE3MzQ=","number":10,"title":"CompressionMethod.STORE requires ZipParameters EntrySize to be set in advance","user":{"login":"fkirc","id":17876666,"node_id":"MDQ6VXNlcjE3ODc2NjY2","avatar_url":"https://avatars.githubusercontent.com/u/17876666?v=4","gravatar_id":"","url":"https://api.github.com/users/fkirc","html_url":"https://github.com/fkirc","followers_url":"https://api.github.com/users/fkirc/followers","following_url":"https://api.github.com/users/fkirc/following{/other_user}","gists_url":"https://api.github.com/users/fkirc/gists{/gist_id}","starred_url":"https://api.github.com/users/fkirc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fkirc/subscriptions","organizations_url":"https://api.github.com/users/fkirc/orgs","repos_url":"https://api.github.com/users/fkirc/repos","events_url":"https://api.github.com/users/fkirc/events{/privacy}","received_events_url":"https://api.github.com/users/fkirc/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1347122727,"node_id":"MDU6TGFiZWwxMzQ3MTIyNzI3","url":"https://api.github.com/repos/srikanth-lingala/zip4j/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"}],"state":"closed","locked":false,"assignee":{"login":"srikanth-lingala","id":3450302,"node_id":"MDQ6VXNlcjM0NTAzMDI=","avatar_url":"https://avatars.githubusercontent.com/u/3450302?v=4","gravatar_id":"","url":"https://api.github.com/users/srikanth-lingala","html_url":"https://github.com/srikanth-lingala","followers_url":"https://api.github.com/users/srikanth-lingala/followers","following_url":"https://api.github.com/users/srikanth-lingala/following{/other_user}","gists_url":"https://api.github.com/users/srikanth-lingala/gists{/gist_id}","starred_url":"https://api.github.com/users/srikanth-lingala/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/srikanth-lingala/subscriptions","organizations_url":"https://api.github.com/users/srikanth-lingala/orgs","repos_url":"https://api.github.com/users/srikanth-lingala/repos","events_url":"https://api.github.com/users/srikanth-lingala/events{/privacy}","received_events_url":"https://api.github.com/users/srikanth-lingala/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"srikanth-lingala","id":3450302,"node_id":"MDQ6VXNlcjM0NTAzMDI=","avatar_url":"https://avatars.githubusercontent.com/u/3450302?v=4","gravatar_id":"","url":"https://api.github.com/users/srikanth-lingala","html_url":"https://github.com/srikanth-lingala","followers_url":"https://api.github.com/users/srikanth-lingala/followers","following_url":"https://api.github.com/users/srikanth-lingala/following{/other_user}","gists_url":"https://api.github.com/users/srikanth-lingala/gists{/gist_id}","starred_url":"https://api.github.com/users/srikanth-lingala/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/srikanth-lingala/subscriptions","organizations_url":"https://api.github.com/users/srikanth-lingala/orgs","repos_url":"https://api.github.com/users/srikanth-lingala/repos","events_url":"https://api.github.com/users/srikanth-lingala/events{/privacy}","received_events_url":"https://api.github.com/users/srikanth-lingala/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":7,"created_at":"2019-07-02T20:30:33Z","updated_at":"2019-07-09T18:56:24Z","closed_at":"2019-07-09T18:56:24Z","author_association":"NONE","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"`ZipOutputStream.java` contains the following piece of code, which I do not understand:\r\n\r\n```Java\r\nprivate void verifyZipParameters(ZipParameters zipParameters) {\r\n    if (zipParameters.getCompressionMethod() == CompressionMethod.STORE\r\n        && zipParameters.getEntrySize() < 0\r\n        && !isEntryDirectory(zipParameters.getFileNameInZip())) {\r\n      throw new IllegalArgumentException(\"uncompressed size should be set for zip entries of compression type store\");\r\n    }\r\n  }\r\n```\r\n\r\nThis IllegalArgumentException is thrown when I call `zipFile.addStream(myInputStream, myParameters);`\r\n\r\nNote that the default entry size is set to -1 (hence the above exception is thrown).\r\nI can avoid this exception by calling `myParameters.setEntrySize(?)` with a nonnegative value.\r\n\r\nMy question is: Why do I need to set the entry size ahead of time? Why only for CompressionMethod.STORE? This was not necessary for 1.X versions of Zip4j.\r\nIs this a bug?\r\nIf it is not a bug: Please document this change.\r\nIt seems strange to set the entry size even before adding the input stream to the zip file.\r\n\r\nI would expect that the entry size is determined automatically once the InputStream has reached its end.\r\n","closed_by":{"login":"srikanth-lingala","id":3450302,"node_id":"MDQ6VXNlcjM0NTAzMDI=","avatar_url":"https://avatars.githubusercontent.com/u/3450302?v=4","gravatar_id":"","url":"https://api.github.com/users/srikanth-lingala","html_url":"https://github.com/srikanth-lingala","followers_url":"https://api.github.com/users/srikanth-lingala/followers","following_url":"https://api.github.com/users/srikanth-lingala/following{/other_user}","gists_url":"https://api.github.com/users/srikanth-lingala/gists{/gist_id}","starred_url":"https://api.github.com/users/srikanth-lingala/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/srikanth-lingala/subscriptions","organizations_url":"https://api.github.com/users/srikanth-lingala/orgs","repos_url":"https://api.github.com/users/srikanth-lingala/repos","events_url":"https://api.github.com/users/srikanth-lingala/events{/privacy}","received_events_url":"https://api.github.com/users/srikanth-lingala/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/srikanth-lingala/zip4j/issues/10/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/srikanth-lingala/zip4j/issues/10/timeline","performed_via_github_app":null,"state_reason":"completed"}