{"url":"https://api.github.com/repos/srikanth-lingala/zip4j/issues/432","repository_url":"https://api.github.com/repos/srikanth-lingala/zip4j","labels_url":"https://api.github.com/repos/srikanth-lingala/zip4j/issues/432/labels{/name}","comments_url":"https://api.github.com/repos/srikanth-lingala/zip4j/issues/432/comments","events_url":"https://api.github.com/repos/srikanth-lingala/zip4j/issues/432/events","html_url":"https://github.com/srikanth-lingala/zip4j/issues/432","id":1259574517,"node_id":"I_kwDOCwUnhM5LE5T1","number":432,"title":"Incorrect decoding of file names with some zip files","user":{"login":"KenobiTom","id":47024085,"node_id":"MDQ6VXNlcjQ3MDI0MDg1","avatar_url":"https://avatars.githubusercontent.com/u/47024085?v=4","gravatar_id":"","url":"https://api.github.com/users/KenobiTom","html_url":"https://github.com/KenobiTom","followers_url":"https://api.github.com/users/KenobiTom/followers","following_url":"https://api.github.com/users/KenobiTom/following{/other_user}","gists_url":"https://api.github.com/users/KenobiTom/gists{/gist_id}","starred_url":"https://api.github.com/users/KenobiTom/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/KenobiTom/subscriptions","organizations_url":"https://api.github.com/users/KenobiTom/orgs","repos_url":"https://api.github.com/users/KenobiTom/repos","events_url":"https://api.github.com/users/KenobiTom/events{/privacy}","received_events_url":"https://api.github.com/users/KenobiTom/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1347122727,"node_id":"MDU6TGFiZWwxMzQ3MTIyNzI3","url":"https://api.github.com/repos/srikanth-lingala/zip4j/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"},{"id":1623761937,"node_id":"MDU6TGFiZWwxNjIzNzYxOTM3","url":"https://api.github.com/repos/srikanth-lingala/zip4j/labels/resolved","name":"resolved","color":"b8dd11","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"srikanth-lingala","id":3450302,"node_id":"MDQ6VXNlcjM0NTAzMDI=","avatar_url":"https://avatars.githubusercontent.com/u/3450302?v=4","gravatar_id":"","url":"https://api.github.com/users/srikanth-lingala","html_url":"https://github.com/srikanth-lingala","followers_url":"https://api.github.com/users/srikanth-lingala/followers","following_url":"https://api.github.com/users/srikanth-lingala/following{/other_user}","gists_url":"https://api.github.com/users/srikanth-lingala/gists{/gist_id}","starred_url":"https://api.github.com/users/srikanth-lingala/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/srikanth-lingala/subscriptions","organizations_url":"https://api.github.com/users/srikanth-lingala/orgs","repos_url":"https://api.github.com/users/srikanth-lingala/repos","events_url":"https://api.github.com/users/srikanth-lingala/events{/privacy}","received_events_url":"https://api.github.com/users/srikanth-lingala/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"srikanth-lingala","id":3450302,"node_id":"MDQ6VXNlcjM0NTAzMDI=","avatar_url":"https://avatars.githubusercontent.com/u/3450302?v=4","gravatar_id":"","url":"https://api.github.com/users/srikanth-lingala","html_url":"https://github.com/srikanth-lingala","followers_url":"https://api.github.com/users/srikanth-lingala/followers","following_url":"https://api.github.com/users/srikanth-lingala/following{/other_user}","gists_url":"https://api.github.com/users/srikanth-lingala/gists{/gist_id}","starred_url":"https://api.github.com/users/srikanth-lingala/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/srikanth-lingala/subscriptions","organizations_url":"https://api.github.com/users/srikanth-lingala/orgs","repos_url":"https://api.github.com/users/srikanth-lingala/repos","events_url":"https://api.github.com/users/srikanth-lingala/events{/privacy}","received_events_url":"https://api.github.com/users/srikanth-lingala/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":3,"created_at":"2022-06-03T07:50:45Z","updated_at":"2022-06-20T15:14:57Z","closed_at":"2022-06-20T15:14:57Z","author_association":"NONE","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Due to the changes introduced with [#403](https://github.com/srikanth-lingala/zip4j/issues/403) zip files created with Windows and extracted via zip4j are no longer resulting in correct file names. The fix use of UTF-8 in this context destroys \"Umlaute\" (öäü...).\r\nFor example täglich.txt becomes t�glich.txt. \r\n\r\nThis behavior indicates that the original approach to fallback on the zip spec. encoding (cp437) rather than UTF-8 if there is no encoding supplied by the packing tool seemed to be the better one in this case.\r\n\r\nA solution for this could be to enable the user to choose the behavior of zip4j: fallback to zip spec or UTF-8 if there is no encoding supplied.\r\n\r\nThe corresponding change is here:\r\nhttps://github.com/srikanth-lingala/zip4j/commit/d80df16c0479776a65d0a290d59dad54c9bef540\r\n\r\nreturn new String(data, ZIP_STANDARD_CHARSET_NAME);  // Cp437\r\nvs.\r\nreturn new String(data, ZIP4J_DEFAULT_CHARSET); // UTF-8\r\n\r\n\r\n\r\nTest zip containing 1 file:\r\n[tester.zip](https://github.com/srikanth-lingala/zip4j/files/8830541/tester.zip)\r\n\r\n\r\n\r\nCode snippet:\r\n\r\nZipFile zipFile = new ZipFile(source);\r\n\r\n// Get a list of FileHeaders. \r\nList<FileHeader> fileHeaderList = zipFile.getFileHeaders();\r\n// Loop through all the fileHeaders\r\nfor (FileHeader fileHeader : fileHeaderList) {\r\n\tif (fileHeader != null) {\r\n        // Build the output file\r\n        File outFile = new File(destination, fileHeader.getFileName());\r\n\t//...\r\n}\r\n\r\n","closed_by":{"login":"srikanth-lingala","id":3450302,"node_id":"MDQ6VXNlcjM0NTAzMDI=","avatar_url":"https://avatars.githubusercontent.com/u/3450302?v=4","gravatar_id":"","url":"https://api.github.com/users/srikanth-lingala","html_url":"https://github.com/srikanth-lingala","followers_url":"https://api.github.com/users/srikanth-lingala/followers","following_url":"https://api.github.com/users/srikanth-lingala/following{/other_user}","gists_url":"https://api.github.com/users/srikanth-lingala/gists{/gist_id}","starred_url":"https://api.github.com/users/srikanth-lingala/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/srikanth-lingala/subscriptions","organizations_url":"https://api.github.com/users/srikanth-lingala/orgs","repos_url":"https://api.github.com/users/srikanth-lingala/repos","events_url":"https://api.github.com/users/srikanth-lingala/events{/privacy}","received_events_url":"https://api.github.com/users/srikanth-lingala/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/srikanth-lingala/zip4j/issues/432/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/srikanth-lingala/zip4j/issues/432/timeline","performed_via_github_app":null,"state_reason":"completed"}