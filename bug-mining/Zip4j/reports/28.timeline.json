[{"id":2609404231,"node_id":"MDEzOkFzc2lnbmVkRXZlbnQyNjA5NDA0MjMx","url":"https://api.github.com/repos/srikanth-lingala/zip4j/issues/events/2609404231","actor":{"login":"srikanth-lingala","id":3450302,"node_id":"MDQ6VXNlcjM0NTAzMDI=","avatar_url":"https://avatars.githubusercontent.com/u/3450302?v=4","gravatar_id":"","url":"https://api.github.com/users/srikanth-lingala","html_url":"https://github.com/srikanth-lingala","followers_url":"https://api.github.com/users/srikanth-lingala/followers","following_url":"https://api.github.com/users/srikanth-lingala/following{/other_user}","gists_url":"https://api.github.com/users/srikanth-lingala/gists{/gist_id}","starred_url":"https://api.github.com/users/srikanth-lingala/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/srikanth-lingala/subscriptions","organizations_url":"https://api.github.com/users/srikanth-lingala/orgs","repos_url":"https://api.github.com/users/srikanth-lingala/repos","events_url":"https://api.github.com/users/srikanth-lingala/events{/privacy}","received_events_url":"https://api.github.com/users/srikanth-lingala/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"assigned","commit_id":null,"commit_url":null,"created_at":"2019-09-05T06:28:31Z","assignee":{"login":"srikanth-lingala","id":3450302,"node_id":"MDQ6VXNlcjM0NTAzMDI=","avatar_url":"https://avatars.githubusercontent.com/u/3450302?v=4","gravatar_id":"","url":"https://api.github.com/users/srikanth-lingala","html_url":"https://github.com/srikanth-lingala","followers_url":"https://api.github.com/users/srikanth-lingala/followers","following_url":"https://api.github.com/users/srikanth-lingala/following{/other_user}","gists_url":"https://api.github.com/users/srikanth-lingala/gists{/gist_id}","starred_url":"https://api.github.com/users/srikanth-lingala/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/srikanth-lingala/subscriptions","organizations_url":"https://api.github.com/users/srikanth-lingala/orgs","repos_url":"https://api.github.com/users/srikanth-lingala/repos","events_url":"https://api.github.com/users/srikanth-lingala/events{/privacy}","received_events_url":"https://api.github.com/users/srikanth-lingala/received_events","type":"User","user_view_type":"public","site_admin":false},"performed_via_github_app":null},{"url":"https://api.github.com/repos/srikanth-lingala/zip4j/issues/comments/528220933","html_url":"https://github.com/srikanth-lingala/zip4j/issues/58#issuecomment-528220933","issue_url":"https://api.github.com/repos/srikanth-lingala/zip4j/issues/58","id":528220933,"node_id":"MDEyOklzc3VlQ29tbWVudDUyODIyMDkzMw==","user":{"login":"srikanth-lingala","id":3450302,"node_id":"MDQ6VXNlcjM0NTAzMDI=","avatar_url":"https://avatars.githubusercontent.com/u/3450302?v=4","gravatar_id":"","url":"https://api.github.com/users/srikanth-lingala","html_url":"https://github.com/srikanth-lingala","followers_url":"https://api.github.com/users/srikanth-lingala/followers","following_url":"https://api.github.com/users/srikanth-lingala/following{/other_user}","gists_url":"https://api.github.com/users/srikanth-lingala/gists{/gist_id}","starred_url":"https://api.github.com/users/srikanth-lingala/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/srikanth-lingala/subscriptions","organizations_url":"https://api.github.com/users/srikanth-lingala/orgs","repos_url":"https://api.github.com/users/srikanth-lingala/repos","events_url":"https://api.github.com/users/srikanth-lingala/events{/privacy}","received_events_url":"https://api.github.com/users/srikanth-lingala/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-05T06:36:44Z","updated_at":"2019-09-05T06:39:06Z","body":"I used the following code to test, and this code deletes the zip file. I tested it on a mac though. Which os are you using? Does your tests (or user running the tests) have the rights to delete a file?\r\n\r\n```\r\nZipFile zipFile = new ZipFile(\"/Users/srikanth/Downloads/test.zip\", \"password\".toCharArray());\r\n    ZipParameters zipParameters = new ZipParameters();\r\n    zipParameters.setEncryptFiles(true);\r\n    zipParameters.setEncryptionMethod(EncryptionMethod.AES);\r\n    zipFile.addFile(TestUtils.getTestFileFromResources(\"sample.pdf\"), zipParameters);\r\n\r\n    try {\r\n      zipFile = new ZipFile(\"/Users/srikanth/Downloads/test.zip\");\r\n      zipFile.extractAll(\"/Users/srikanth/Downloads/\");\r\n    } catch (Exception e) {\r\n      assertThat(zipFile.getFile().delete()).isTrue();\r\n      throw e;\r\n    }\r\n```","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/srikanth-lingala/zip4j/issues/comments/528220933/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"srikanth-lingala","id":3450302,"node_id":"MDQ6VXNlcjM0NTAzMDI=","avatar_url":"https://avatars.githubusercontent.com/u/3450302?v=4","gravatar_id":"","url":"https://api.github.com/users/srikanth-lingala","html_url":"https://github.com/srikanth-lingala","followers_url":"https://api.github.com/users/srikanth-lingala/followers","following_url":"https://api.github.com/users/srikanth-lingala/following{/other_user}","gists_url":"https://api.github.com/users/srikanth-lingala/gists{/gist_id}","starred_url":"https://api.github.com/users/srikanth-lingala/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/srikanth-lingala/subscriptions","organizations_url":"https://api.github.com/users/srikanth-lingala/orgs","repos_url":"https://api.github.com/users/srikanth-lingala/repos","events_url":"https://api.github.com/users/srikanth-lingala/events{/privacy}","received_events_url":"https://api.github.com/users/srikanth-lingala/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/srikanth-lingala/zip4j/issues/comments/528824118","html_url":"https://github.com/srikanth-lingala/zip4j/issues/58#issuecomment-528824118","issue_url":"https://api.github.com/repos/srikanth-lingala/zip4j/issues/58","id":528824118,"node_id":"MDEyOklzc3VlQ29tbWVudDUyODgyNDExOA==","user":{"login":"daelfdude","id":13697292,"node_id":"MDQ6VXNlcjEzNjk3Mjky","avatar_url":"https://avatars.githubusercontent.com/u/13697292?v=4","gravatar_id":"","url":"https://api.github.com/users/daelfdude","html_url":"https://github.com/daelfdude","followers_url":"https://api.github.com/users/daelfdude/followers","following_url":"https://api.github.com/users/daelfdude/following{/other_user}","gists_url":"https://api.github.com/users/daelfdude/gists{/gist_id}","starred_url":"https://api.github.com/users/daelfdude/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/daelfdude/subscriptions","organizations_url":"https://api.github.com/users/daelfdude/orgs","repos_url":"https://api.github.com/users/daelfdude/repos","events_url":"https://api.github.com/users/daelfdude/events{/privacy}","received_events_url":"https://api.github.com/users/daelfdude/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-06T11:51:09Z","updated_at":"2019-09-06T11:51:09Z","body":"I’m using Windows.  And if I remove the call to \nUnzipUtil.createZipInputStream() (or if that call succeeds) then the code is able to delete the file.  The delete only fails when \n\nUnzipUtil.createZipInputStream() fails to open the zip file.\n\nSent from Yahoo Mail for iPad\n\n\nOn Thursday, September 5, 2019, 1:36 AM, Srikanth Reddy Lingala <notifications@github.com> wrote:\n\n\nI used the following code to test, and this code deletes the zip file. I tested it on a mac though. Which os are you using? Does your tests (or user running the tests) have the rights to delete a file?\nZipFile zipFile = new ZipFile(\"/Users/slingala/Downloads/test.zip\", \"password\".toCharArray());\n    ZipParameters zipParameters = new ZipParameters();\n    zipParameters.setEncryptFiles(true);\n    zipParameters.setEncryptionMethod(EncryptionMethod.AES);\n    zipFile.addFile(TestUtils.getTestFileFromResources(\"sample.pdf\"), zipParameters);\n\n    try {\n      zipFile = new ZipFile(\"/Users/slingala/Downloads/test.zip\");\n      zipFile.extractAll(\"/Users/slingala/Downloads/\");\n    } catch (Exception e) {\n      assertThat(zipFile.getFile().delete()).isTrue();\n      throw e;\n    }\n\n—\nYou are receiving this because you authored the thread.\nReply to this email directly, view it on GitHub, or mute the thread.\n\n\n\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/srikanth-lingala/zip4j/issues/comments/528824118/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"daelfdude","id":13697292,"node_id":"MDQ6VXNlcjEzNjk3Mjky","avatar_url":"https://avatars.githubusercontent.com/u/13697292?v=4","gravatar_id":"","url":"https://api.github.com/users/daelfdude","html_url":"https://github.com/daelfdude","followers_url":"https://api.github.com/users/daelfdude/followers","following_url":"https://api.github.com/users/daelfdude/following{/other_user}","gists_url":"https://api.github.com/users/daelfdude/gists{/gist_id}","starred_url":"https://api.github.com/users/daelfdude/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/daelfdude/subscriptions","organizations_url":"https://api.github.com/users/daelfdude/orgs","repos_url":"https://api.github.com/users/daelfdude/repos","events_url":"https://api.github.com/users/daelfdude/events{/privacy}","received_events_url":"https://api.github.com/users/daelfdude/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/srikanth-lingala/zip4j/issues/comments/529239664","html_url":"https://github.com/srikanth-lingala/zip4j/issues/58#issuecomment-529239664","issue_url":"https://api.github.com/repos/srikanth-lingala/zip4j/issues/58","id":529239664,"node_id":"MDEyOklzc3VlQ29tbWVudDUyOTIzOTY2NA==","user":{"login":"srikanth-lingala","id":3450302,"node_id":"MDQ6VXNlcjM0NTAzMDI=","avatar_url":"https://avatars.githubusercontent.com/u/3450302?v=4","gravatar_id":"","url":"https://api.github.com/users/srikanth-lingala","html_url":"https://github.com/srikanth-lingala","followers_url":"https://api.github.com/users/srikanth-lingala/followers","following_url":"https://api.github.com/users/srikanth-lingala/following{/other_user}","gists_url":"https://api.github.com/users/srikanth-lingala/gists{/gist_id}","starred_url":"https://api.github.com/users/srikanth-lingala/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/srikanth-lingala/subscriptions","organizations_url":"https://api.github.com/users/srikanth-lingala/orgs","repos_url":"https://api.github.com/users/srikanth-lingala/repos","events_url":"https://api.github.com/users/srikanth-lingala/events{/privacy}","received_events_url":"https://api.github.com/users/srikanth-lingala/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-08T20:41:00Z","updated_at":"2019-09-08T20:41:26Z","body":"I was able to reproduce on Windows with the below code:\r\n\r\n```\r\n@Test\r\n  public void zipTest() throws IOException {\r\n\r\n    ZipFile zipFile = new ZipFile(\"c:\\\\test.zip\", \"password\".toCharArray());\r\n    ZipParameters zipParameters = new ZipParameters();\r\n    zipParameters.setEncryptFiles(true);\r\n    zipParameters.setEncryptionMethod(EncryptionMethod.AES);\r\n    zipFile.addFile(TestUtils.getTestFileFromResources(\"sample.pdf\"), zipParameters);\r\n\r\n    try {\r\n      zipFile = new ZipFile(\"c:\\\\test.zip\"); // intentionally not providing password to generate an exception\r\n      try(InputStream inputStream = zipFile.getInputStream(zipFile.getFileHeaders().get(0))) {\r\n        inputStream.read(new byte[4096]);\r\n      }\r\n      fail(\"Should throw an exception\");\r\n    } catch (Exception e) {\r\n      assertThat(zipFile.getFile().delete()).isTrue();\r\n      throw e;\r\n    }\r\n  }\r\n```\r\n\r\nI will include a fix for it.","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/srikanth-lingala/zip4j/issues/comments/529239664/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"srikanth-lingala","id":3450302,"node_id":"MDQ6VXNlcjM0NTAzMDI=","avatar_url":"https://avatars.githubusercontent.com/u/3450302?v=4","gravatar_id":"","url":"https://api.github.com/users/srikanth-lingala","html_url":"https://github.com/srikanth-lingala","followers_url":"https://api.github.com/users/srikanth-lingala/followers","following_url":"https://api.github.com/users/srikanth-lingala/following{/other_user}","gists_url":"https://api.github.com/users/srikanth-lingala/gists{/gist_id}","starred_url":"https://api.github.com/users/srikanth-lingala/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/srikanth-lingala/subscriptions","organizations_url":"https://api.github.com/users/srikanth-lingala/orgs","repos_url":"https://api.github.com/users/srikanth-lingala/repos","events_url":"https://api.github.com/users/srikanth-lingala/events{/privacy}","received_events_url":"https://api.github.com/users/srikanth-lingala/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":2616980360,"node_id":"MDEyOkxhYmVsZWRFdmVudDI2MTY5ODAzNjA=","url":"https://api.github.com/repos/srikanth-lingala/zip4j/issues/events/2616980360","actor":{"login":"srikanth-lingala","id":3450302,"node_id":"MDQ6VXNlcjM0NTAzMDI=","avatar_url":"https://avatars.githubusercontent.com/u/3450302?v=4","gravatar_id":"","url":"https://api.github.com/users/srikanth-lingala","html_url":"https://github.com/srikanth-lingala","followers_url":"https://api.github.com/users/srikanth-lingala/followers","following_url":"https://api.github.com/users/srikanth-lingala/following{/other_user}","gists_url":"https://api.github.com/users/srikanth-lingala/gists{/gist_id}","starred_url":"https://api.github.com/users/srikanth-lingala/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/srikanth-lingala/subscriptions","organizations_url":"https://api.github.com/users/srikanth-lingala/orgs","repos_url":"https://api.github.com/users/srikanth-lingala/repos","events_url":"https://api.github.com/users/srikanth-lingala/events{/privacy}","received_events_url":"https://api.github.com/users/srikanth-lingala/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2019-09-08T20:42:44Z","label":{"name":"bug","color":"d73a4a"},"performed_via_github_app":null},{"id":2616983483,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDI2MTY5ODM0ODM=","url":"https://api.github.com/repos/srikanth-lingala/zip4j/issues/events/2616983483","actor":{"login":"srikanth-lingala","id":3450302,"node_id":"MDQ6VXNlcjM0NTAzMDI=","avatar_url":"https://avatars.githubusercontent.com/u/3450302?v=4","gravatar_id":"","url":"https://api.github.com/users/srikanth-lingala","html_url":"https://github.com/srikanth-lingala","followers_url":"https://api.github.com/users/srikanth-lingala/followers","following_url":"https://api.github.com/users/srikanth-lingala/following{/other_user}","gists_url":"https://api.github.com/users/srikanth-lingala/gists{/gist_id}","starred_url":"https://api.github.com/users/srikanth-lingala/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/srikanth-lingala/subscriptions","organizations_url":"https://api.github.com/users/srikanth-lingala/orgs","repos_url":"https://api.github.com/users/srikanth-lingala/repos","events_url":"https://api.github.com/users/srikanth-lingala/events{/privacy}","received_events_url":"https://api.github.com/users/srikanth-lingala/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"c30ff5fed8915fce8f1142cfba1c2f902298802f","commit_url":"https://api.github.com/repos/srikanth-lingala/zip4j/commits/c30ff5fed8915fce8f1142cfba1c2f902298802f","created_at":"2019-09-08T20:48:10Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/srikanth-lingala/zip4j/issues/comments/529244916","html_url":"https://github.com/srikanth-lingala/zip4j/issues/58#issuecomment-529244916","issue_url":"https://api.github.com/repos/srikanth-lingala/zip4j/issues/58","id":529244916,"node_id":"MDEyOklzc3VlQ29tbWVudDUyOTI0NDkxNg==","user":{"login":"srikanth-lingala","id":3450302,"node_id":"MDQ6VXNlcjM0NTAzMDI=","avatar_url":"https://avatars.githubusercontent.com/u/3450302?v=4","gravatar_id":"","url":"https://api.github.com/users/srikanth-lingala","html_url":"https://github.com/srikanth-lingala","followers_url":"https://api.github.com/users/srikanth-lingala/followers","following_url":"https://api.github.com/users/srikanth-lingala/following{/other_user}","gists_url":"https://api.github.com/users/srikanth-lingala/gists{/gist_id}","starred_url":"https://api.github.com/users/srikanth-lingala/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/srikanth-lingala/subscriptions","organizations_url":"https://api.github.com/users/srikanth-lingala/orgs","repos_url":"https://api.github.com/users/srikanth-lingala/repos","events_url":"https://api.github.com/users/srikanth-lingala/events{/privacy}","received_events_url":"https://api.github.com/users/srikanth-lingala/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-09-08T21:49:49Z","updated_at":"2019-09-08T21:49:49Z","body":"Fixed in v2.1.3 released today","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/srikanth-lingala/zip4j/issues/comments/529244916/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"srikanth-lingala","id":3450302,"node_id":"MDQ6VXNlcjM0NTAzMDI=","avatar_url":"https://avatars.githubusercontent.com/u/3450302?v=4","gravatar_id":"","url":"https://api.github.com/users/srikanth-lingala","html_url":"https://github.com/srikanth-lingala","followers_url":"https://api.github.com/users/srikanth-lingala/followers","following_url":"https://api.github.com/users/srikanth-lingala/following{/other_user}","gists_url":"https://api.github.com/users/srikanth-lingala/gists{/gist_id}","starred_url":"https://api.github.com/users/srikanth-lingala/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/srikanth-lingala/subscriptions","organizations_url":"https://api.github.com/users/srikanth-lingala/orgs","repos_url":"https://api.github.com/users/srikanth-lingala/repos","events_url":"https://api.github.com/users/srikanth-lingala/events{/privacy}","received_events_url":"https://api.github.com/users/srikanth-lingala/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":2617012168,"node_id":"MDExOkNsb3NlZEV2ZW50MjYxNzAxMjE2OA==","url":"https://api.github.com/repos/srikanth-lingala/zip4j/issues/events/2617012168","actor":{"login":"srikanth-lingala","id":3450302,"node_id":"MDQ6VXNlcjM0NTAzMDI=","avatar_url":"https://avatars.githubusercontent.com/u/3450302?v=4","gravatar_id":"","url":"https://api.github.com/users/srikanth-lingala","html_url":"https://github.com/srikanth-lingala","followers_url":"https://api.github.com/users/srikanth-lingala/followers","following_url":"https://api.github.com/users/srikanth-lingala/following{/other_user}","gists_url":"https://api.github.com/users/srikanth-lingala/gists{/gist_id}","starred_url":"https://api.github.com/users/srikanth-lingala/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/srikanth-lingala/subscriptions","organizations_url":"https://api.github.com/users/srikanth-lingala/orgs","repos_url":"https://api.github.com/users/srikanth-lingala/repos","events_url":"https://api.github.com/users/srikanth-lingala/events{/privacy}","received_events_url":"https://api.github.com/users/srikanth-lingala/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2019-09-08T21:49:49Z","state_reason":null,"performed_via_github_app":null}]