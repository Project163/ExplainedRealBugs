[{"url":"https://api.github.com/repos/srikanth-lingala/zip4j/issues/comments/508720312","html_url":"https://github.com/srikanth-lingala/zip4j/issues/10#issuecomment-508720312","issue_url":"https://api.github.com/repos/srikanth-lingala/zip4j/issues/10","id":508720312,"node_id":"MDEyOklzc3VlQ29tbWVudDUwODcyMDMxMg==","user":{"login":"srikanth-lingala","id":3450302,"node_id":"MDQ6VXNlcjM0NTAzMDI=","avatar_url":"https://avatars.githubusercontent.com/u/3450302?v=4","gravatar_id":"","url":"https://api.github.com/users/srikanth-lingala","html_url":"https://github.com/srikanth-lingala","followers_url":"https://api.github.com/users/srikanth-lingala/followers","following_url":"https://api.github.com/users/srikanth-lingala/following{/other_user}","gists_url":"https://api.github.com/users/srikanth-lingala/gists{/gist_id}","starred_url":"https://api.github.com/users/srikanth-lingala/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/srikanth-lingala/subscriptions","organizations_url":"https://api.github.com/users/srikanth-lingala/orgs","repos_url":"https://api.github.com/users/srikanth-lingala/repos","events_url":"https://api.github.com/users/srikanth-lingala/events{/privacy}","received_events_url":"https://api.github.com/users/srikanth-lingala/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-05T10:54:02Z","updated_at":"2019-07-05T10:54:02Z","body":"This was a tough decision to make, but there was no other option left other than throwing an exception when entry size is not set in case os STORE compression. I again have to get a bit detailed into the zip file format. Please make sure you read [my post from the other issue][1] before you read any further.\r\n\r\nThis check had to be done to support streams. Zip4j 2.x is built around streams. Zip4j 1.x was not. So, I had the luxury to skip this check in v1.x. But with the added support for streams in 2.x, there was no other option left than to add this check.\r\n\r\nAs described in the linked post, if a data descriptor is present in the header, the file sizes are set to 0 in local file header. Actual file sizes are in data descriptor and file headers. Note that file headers are at the end of the zip file. Now, imagine reading a stream of zip file. The first thing we read is the local file header. And this has the size of 0. Zip4j has no way of knowing the compressed size of the entry. And therefore, Zip4j does not know where and when to stop reading content for this particular entry, because the actual file sizes are at the end of the entry, and without knowing the end, we can never know where to get this information from. In case of Deflate compression, we can determine the end of compressed data even without knowing the size of the compressed data. Unfortunately, we do not have this luxury with STORE compression. And that is the reason I had to add this check, so that a zip file created by zipoutpustream can then be read by zipinputstream, and not just the ZipFile api.\r\n\r\nIn fact, even jdk's zip utility [has this check][2]. It is quite understandable that they have it as well, because there is no way around it, especially if you want to support streams.\r\n\r\nOptions you have are:\r\n\r\n* Use deflate when adding content to a zip file via streams if entry sizes are unknown upfront. In this case, you do not have to set entry size.\r\n* Determine the entry size upfront and set it in the zipparameters. \r\n\r\nI will now close this issue, as it is not really a bug in zip4j, but a check that we cannot avoid for the reasons mentioned above.\r\n\r\n[1]: https://github.com/srikanth-lingala/zip4j/issues/11#issuecomment-508379209\r\n[2]: http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/687fd7c7986d/src/share/classes/java/util/zip/ZipOutputStream.java#l224","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/srikanth-lingala/zip4j/issues/comments/508720312/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"srikanth-lingala","id":3450302,"node_id":"MDQ6VXNlcjM0NTAzMDI=","avatar_url":"https://avatars.githubusercontent.com/u/3450302?v=4","gravatar_id":"","url":"https://api.github.com/users/srikanth-lingala","html_url":"https://github.com/srikanth-lingala","followers_url":"https://api.github.com/users/srikanth-lingala/followers","following_url":"https://api.github.com/users/srikanth-lingala/following{/other_user}","gists_url":"https://api.github.com/users/srikanth-lingala/gists{/gist_id}","starred_url":"https://api.github.com/users/srikanth-lingala/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/srikanth-lingala/subscriptions","organizations_url":"https://api.github.com/users/srikanth-lingala/orgs","repos_url":"https://api.github.com/users/srikanth-lingala/repos","events_url":"https://api.github.com/users/srikanth-lingala/events{/privacy}","received_events_url":"https://api.github.com/users/srikanth-lingala/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":2462417386,"node_id":"MDExOkNsb3NlZEV2ZW50MjQ2MjQxNzM4Ng==","url":"https://api.github.com/repos/srikanth-lingala/zip4j/issues/events/2462417386","actor":{"login":"srikanth-lingala","id":3450302,"node_id":"MDQ6VXNlcjM0NTAzMDI=","avatar_url":"https://avatars.githubusercontent.com/u/3450302?v=4","gravatar_id":"","url":"https://api.github.com/users/srikanth-lingala","html_url":"https://github.com/srikanth-lingala","followers_url":"https://api.github.com/users/srikanth-lingala/followers","following_url":"https://api.github.com/users/srikanth-lingala/following{/other_user}","gists_url":"https://api.github.com/users/srikanth-lingala/gists{/gist_id}","starred_url":"https://api.github.com/users/srikanth-lingala/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/srikanth-lingala/subscriptions","organizations_url":"https://api.github.com/users/srikanth-lingala/orgs","repos_url":"https://api.github.com/users/srikanth-lingala/repos","events_url":"https://api.github.com/users/srikanth-lingala/events{/privacy}","received_events_url":"https://api.github.com/users/srikanth-lingala/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2019-07-05T10:54:02Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/srikanth-lingala/zip4j/issues/comments/508724833","html_url":"https://github.com/srikanth-lingala/zip4j/issues/10#issuecomment-508724833","issue_url":"https://api.github.com/repos/srikanth-lingala/zip4j/issues/10","id":508724833,"node_id":"MDEyOklzc3VlQ29tbWVudDUwODcyNDgzMw==","user":{"login":"fkirc","id":17876666,"node_id":"MDQ6VXNlcjE3ODc2NjY2","avatar_url":"https://avatars.githubusercontent.com/u/17876666?v=4","gravatar_id":"","url":"https://api.github.com/users/fkirc","html_url":"https://github.com/fkirc","followers_url":"https://api.github.com/users/fkirc/followers","following_url":"https://api.github.com/users/fkirc/following{/other_user}","gists_url":"https://api.github.com/users/fkirc/gists{/gist_id}","starred_url":"https://api.github.com/users/fkirc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fkirc/subscriptions","organizations_url":"https://api.github.com/users/fkirc/orgs","repos_url":"https://api.github.com/users/fkirc/repos","events_url":"https://api.github.com/users/fkirc/events{/privacy}","received_events_url":"https://api.github.com/users/fkirc/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-05T11:12:54Z","updated_at":"2019-07-05T11:13:15Z","body":"Perhaps it would be a good idea to implement a special case for the ZipFile API:\r\n\r\nWe could seek back to the local fileheader within the `close` method of ZipOutputStream, and then just set the correct sizes within the local fileheader.\r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/srikanth-lingala/zip4j/issues/comments/508724833/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"fkirc","id":17876666,"node_id":"MDQ6VXNlcjE3ODc2NjY2","avatar_url":"https://avatars.githubusercontent.com/u/17876666?v=4","gravatar_id":"","url":"https://api.github.com/users/fkirc","html_url":"https://github.com/fkirc","followers_url":"https://api.github.com/users/fkirc/followers","following_url":"https://api.github.com/users/fkirc/following{/other_user}","gists_url":"https://api.github.com/users/fkirc/gists{/gist_id}","starred_url":"https://api.github.com/users/fkirc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fkirc/subscriptions","organizations_url":"https://api.github.com/users/fkirc/orgs","repos_url":"https://api.github.com/users/fkirc/repos","events_url":"https://api.github.com/users/fkirc/events{/privacy}","received_events_url":"https://api.github.com/users/fkirc/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/srikanth-lingala/zip4j/issues/comments/508725722","html_url":"https://github.com/srikanth-lingala/zip4j/issues/10#issuecomment-508725722","issue_url":"https://api.github.com/repos/srikanth-lingala/zip4j/issues/10","id":508725722,"node_id":"MDEyOklzc3VlQ29tbWVudDUwODcyNTcyMg==","user":{"login":"fkirc","id":17876666,"node_id":"MDQ6VXNlcjE3ODc2NjY2","avatar_url":"https://avatars.githubusercontent.com/u/17876666?v=4","gravatar_id":"","url":"https://api.github.com/users/fkirc","html_url":"https://github.com/fkirc","followers_url":"https://api.github.com/users/fkirc/followers","following_url":"https://api.github.com/users/fkirc/following{/other_user}","gists_url":"https://api.github.com/users/fkirc/gists{/gist_id}","starred_url":"https://api.github.com/users/fkirc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fkirc/subscriptions","organizations_url":"https://api.github.com/users/fkirc/orgs","repos_url":"https://api.github.com/users/fkirc/repos","events_url":"https://api.github.com/users/fkirc/events{/privacy}","received_events_url":"https://api.github.com/users/fkirc/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-05T11:16:47Z","updated_at":"2019-07-05T11:16:47Z","body":"Beside making the API easier to use, this would also have to added advantage of avoiding a DATA_DESCRIPTOR in case of the ZipFile API in conjunction with ZipOutputStream.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/srikanth-lingala/zip4j/issues/comments/508725722/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"fkirc","id":17876666,"node_id":"MDQ6VXNlcjE3ODc2NjY2","avatar_url":"https://avatars.githubusercontent.com/u/17876666?v=4","gravatar_id":"","url":"https://api.github.com/users/fkirc","html_url":"https://github.com/fkirc","followers_url":"https://api.github.com/users/fkirc/followers","following_url":"https://api.github.com/users/fkirc/following{/other_user}","gists_url":"https://api.github.com/users/fkirc/gists{/gist_id}","starred_url":"https://api.github.com/users/fkirc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fkirc/subscriptions","organizations_url":"https://api.github.com/users/fkirc/orgs","repos_url":"https://api.github.com/users/fkirc/repos","events_url":"https://api.github.com/users/fkirc/events{/privacy}","received_events_url":"https://api.github.com/users/fkirc/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/srikanth-lingala/zip4j/issues/comments/508733403","html_url":"https://github.com/srikanth-lingala/zip4j/issues/10#issuecomment-508733403","issue_url":"https://api.github.com/repos/srikanth-lingala/zip4j/issues/10","id":508733403,"node_id":"MDEyOklzc3VlQ29tbWVudDUwODczMzQwMw==","user":{"login":"srikanth-lingala","id":3450302,"node_id":"MDQ6VXNlcjM0NTAzMDI=","avatar_url":"https://avatars.githubusercontent.com/u/3450302?v=4","gravatar_id":"","url":"https://api.github.com/users/srikanth-lingala","html_url":"https://github.com/srikanth-lingala","followers_url":"https://api.github.com/users/srikanth-lingala/followers","following_url":"https://api.github.com/users/srikanth-lingala/following{/other_user}","gists_url":"https://api.github.com/users/srikanth-lingala/gists{/gist_id}","starred_url":"https://api.github.com/users/srikanth-lingala/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/srikanth-lingala/subscriptions","organizations_url":"https://api.github.com/users/srikanth-lingala/orgs","repos_url":"https://api.github.com/users/srikanth-lingala/repos","events_url":"https://api.github.com/users/srikanth-lingala/events{/privacy}","received_events_url":"https://api.github.com/users/srikanth-lingala/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-05T11:49:29Z","updated_at":"2019-07-05T11:49:29Z","body":"With ZipFile API (except for addStream) in v2.x, file sizes are always added in the local file header and data descriptor is always avoided. Data descriptor is only written when using `ZipOutputStream` directly or when using `ZipFile.addStream()`. Because in both these cases, it is impossible to traverse back to the location of file header.\r\n\r\nZip4j 1.3.3 used to add data descriptors even with ZipFile api, which is not the case anymore with v2.x","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/srikanth-lingala/zip4j/issues/comments/508733403/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"srikanth-lingala","id":3450302,"node_id":"MDQ6VXNlcjM0NTAzMDI=","avatar_url":"https://avatars.githubusercontent.com/u/3450302?v=4","gravatar_id":"","url":"https://api.github.com/users/srikanth-lingala","html_url":"https://github.com/srikanth-lingala","followers_url":"https://api.github.com/users/srikanth-lingala/followers","following_url":"https://api.github.com/users/srikanth-lingala/following{/other_user}","gists_url":"https://api.github.com/users/srikanth-lingala/gists{/gist_id}","starred_url":"https://api.github.com/users/srikanth-lingala/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/srikanth-lingala/subscriptions","organizations_url":"https://api.github.com/users/srikanth-lingala/orgs","repos_url":"https://api.github.com/users/srikanth-lingala/repos","events_url":"https://api.github.com/users/srikanth-lingala/events{/privacy}","received_events_url":"https://api.github.com/users/srikanth-lingala/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/srikanth-lingala/zip4j/issues/comments/508736892","html_url":"https://github.com/srikanth-lingala/zip4j/issues/10#issuecomment-508736892","issue_url":"https://api.github.com/repos/srikanth-lingala/zip4j/issues/10","id":508736892,"node_id":"MDEyOklzc3VlQ29tbWVudDUwODczNjg5Mg==","user":{"login":"fkirc","id":17876666,"node_id":"MDQ6VXNlcjE3ODc2NjY2","avatar_url":"https://avatars.githubusercontent.com/u/17876666?v=4","gravatar_id":"","url":"https://api.github.com/users/fkirc","html_url":"https://github.com/fkirc","followers_url":"https://api.github.com/users/fkirc/followers","following_url":"https://api.github.com/users/fkirc/following{/other_user}","gists_url":"https://api.github.com/users/fkirc/gists{/gist_id}","starred_url":"https://api.github.com/users/fkirc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fkirc/subscriptions","organizations_url":"https://api.github.com/users/fkirc/orgs","repos_url":"https://api.github.com/users/fkirc/repos","events_url":"https://api.github.com/users/fkirc/events{/privacy}","received_events_url":"https://api.github.com/users/fkirc/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-05T12:04:20Z","updated_at":"2019-07-05T12:14:05Z","body":"> Data descriptor is only written when using `ZipOutputStream` directly or when using `ZipFile.addStream()`. Because in both these cases, it is impossible to traverse back to the location of file header.\r\n\r\nI doubt that this is impossible in the second case.\r\nIf you call `myZipFile.addStream()`, then this looks like the streams API, but you are actually still operating on a conventional Zip file that is seekable.\r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/srikanth-lingala/zip4j/issues/comments/508736892/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"fkirc","id":17876666,"node_id":"MDQ6VXNlcjE3ODc2NjY2","avatar_url":"https://avatars.githubusercontent.com/u/17876666?v=4","gravatar_id":"","url":"https://api.github.com/users/fkirc","html_url":"https://github.com/fkirc","followers_url":"https://api.github.com/users/fkirc/followers","following_url":"https://api.github.com/users/fkirc/following{/other_user}","gists_url":"https://api.github.com/users/fkirc/gists{/gist_id}","starred_url":"https://api.github.com/users/fkirc/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fkirc/subscriptions","organizations_url":"https://api.github.com/users/fkirc/orgs","repos_url":"https://api.github.com/users/fkirc/repos","events_url":"https://api.github.com/users/fkirc/events{/privacy}","received_events_url":"https://api.github.com/users/fkirc/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/srikanth-lingala/zip4j/issues/comments/508742981","html_url":"https://github.com/srikanth-lingala/zip4j/issues/10#issuecomment-508742981","issue_url":"https://api.github.com/repos/srikanth-lingala/zip4j/issues/10","id":508742981,"node_id":"MDEyOklzc3VlQ29tbWVudDUwODc0Mjk4MQ==","user":{"login":"srikanth-lingala","id":3450302,"node_id":"MDQ6VXNlcjM0NTAzMDI=","avatar_url":"https://avatars.githubusercontent.com/u/3450302?v=4","gravatar_id":"","url":"https://api.github.com/users/srikanth-lingala","html_url":"https://github.com/srikanth-lingala","followers_url":"https://api.github.com/users/srikanth-lingala/followers","following_url":"https://api.github.com/users/srikanth-lingala/following{/other_user}","gists_url":"https://api.github.com/users/srikanth-lingala/gists{/gist_id}","starred_url":"https://api.github.com/users/srikanth-lingala/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/srikanth-lingala/subscriptions","organizations_url":"https://api.github.com/users/srikanth-lingala/orgs","repos_url":"https://api.github.com/users/srikanth-lingala/repos","events_url":"https://api.github.com/users/srikanth-lingala/events{/privacy}","received_events_url":"https://api.github.com/users/srikanth-lingala/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-05T12:29:11Z","updated_at":"2019-07-05T12:29:11Z","body":"Yes, you are right. I mixed things up. I correct myself: My comment above applies only for ZipOutputStream and not for `ZipFile.addStream()`. I will fix it. Reopening issue.","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/srikanth-lingala/zip4j/issues/comments/508742981/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"srikanth-lingala","id":3450302,"node_id":"MDQ6VXNlcjM0NTAzMDI=","avatar_url":"https://avatars.githubusercontent.com/u/3450302?v=4","gravatar_id":"","url":"https://api.github.com/users/srikanth-lingala","html_url":"https://github.com/srikanth-lingala","followers_url":"https://api.github.com/users/srikanth-lingala/followers","following_url":"https://api.github.com/users/srikanth-lingala/following{/other_user}","gists_url":"https://api.github.com/users/srikanth-lingala/gists{/gist_id}","starred_url":"https://api.github.com/users/srikanth-lingala/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/srikanth-lingala/subscriptions","organizations_url":"https://api.github.com/users/srikanth-lingala/orgs","repos_url":"https://api.github.com/users/srikanth-lingala/repos","events_url":"https://api.github.com/users/srikanth-lingala/events{/privacy}","received_events_url":"https://api.github.com/users/srikanth-lingala/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":2462613264,"node_id":"MDEzOlJlb3BlbmVkRXZlbnQyNDYyNjEzMjY0","url":"https://api.github.com/repos/srikanth-lingala/zip4j/issues/events/2462613264","actor":{"login":"srikanth-lingala","id":3450302,"node_id":"MDQ6VXNlcjM0NTAzMDI=","avatar_url":"https://avatars.githubusercontent.com/u/3450302?v=4","gravatar_id":"","url":"https://api.github.com/users/srikanth-lingala","html_url":"https://github.com/srikanth-lingala","followers_url":"https://api.github.com/users/srikanth-lingala/followers","following_url":"https://api.github.com/users/srikanth-lingala/following{/other_user}","gists_url":"https://api.github.com/users/srikanth-lingala/gists{/gist_id}","starred_url":"https://api.github.com/users/srikanth-lingala/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/srikanth-lingala/subscriptions","organizations_url":"https://api.github.com/users/srikanth-lingala/orgs","repos_url":"https://api.github.com/users/srikanth-lingala/repos","events_url":"https://api.github.com/users/srikanth-lingala/events{/privacy}","received_events_url":"https://api.github.com/users/srikanth-lingala/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"reopened","commit_id":null,"commit_url":null,"created_at":"2019-07-05T12:29:11Z","state_reason":null,"performed_via_github_app":null},{"id":2462687948,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDI0NjI2ODc5NDg=","url":"https://api.github.com/repos/srikanth-lingala/zip4j/issues/events/2462687948","actor":{"login":"srikanth-lingala","id":3450302,"node_id":"MDQ6VXNlcjM0NTAzMDI=","avatar_url":"https://avatars.githubusercontent.com/u/3450302?v=4","gravatar_id":"","url":"https://api.github.com/users/srikanth-lingala","html_url":"https://github.com/srikanth-lingala","followers_url":"https://api.github.com/users/srikanth-lingala/followers","following_url":"https://api.github.com/users/srikanth-lingala/following{/other_user}","gists_url":"https://api.github.com/users/srikanth-lingala/gists{/gist_id}","starred_url":"https://api.github.com/users/srikanth-lingala/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/srikanth-lingala/subscriptions","organizations_url":"https://api.github.com/users/srikanth-lingala/orgs","repos_url":"https://api.github.com/users/srikanth-lingala/repos","events_url":"https://api.github.com/users/srikanth-lingala/events{/privacy}","received_events_url":"https://api.github.com/users/srikanth-lingala/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"6e65b561fdacfd018d499154638335f980478713","commit_url":"https://api.github.com/repos/srikanth-lingala/zip4j/commits/6e65b561fdacfd018d499154638335f980478713","created_at":"2019-07-05T13:02:05Z","performed_via_github_app":null},{"id":2462719332,"node_id":"MDEzOkFzc2lnbmVkRXZlbnQyNDYyNzE5MzMy","url":"https://api.github.com/repos/srikanth-lingala/zip4j/issues/events/2462719332","actor":{"login":"srikanth-lingala","id":3450302,"node_id":"MDQ6VXNlcjM0NTAzMDI=","avatar_url":"https://avatars.githubusercontent.com/u/3450302?v=4","gravatar_id":"","url":"https://api.github.com/users/srikanth-lingala","html_url":"https://github.com/srikanth-lingala","followers_url":"https://api.github.com/users/srikanth-lingala/followers","following_url":"https://api.github.com/users/srikanth-lingala/following{/other_user}","gists_url":"https://api.github.com/users/srikanth-lingala/gists{/gist_id}","starred_url":"https://api.github.com/users/srikanth-lingala/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/srikanth-lingala/subscriptions","organizations_url":"https://api.github.com/users/srikanth-lingala/orgs","repos_url":"https://api.github.com/users/srikanth-lingala/repos","events_url":"https://api.github.com/users/srikanth-lingala/events{/privacy}","received_events_url":"https://api.github.com/users/srikanth-lingala/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"assigned","commit_id":null,"commit_url":null,"created_at":"2019-07-05T13:15:30Z","assignee":{"login":"srikanth-lingala","id":3450302,"node_id":"MDQ6VXNlcjM0NTAzMDI=","avatar_url":"https://avatars.githubusercontent.com/u/3450302?v=4","gravatar_id":"","url":"https://api.github.com/users/srikanth-lingala","html_url":"https://github.com/srikanth-lingala","followers_url":"https://api.github.com/users/srikanth-lingala/followers","following_url":"https://api.github.com/users/srikanth-lingala/following{/other_user}","gists_url":"https://api.github.com/users/srikanth-lingala/gists{/gist_id}","starred_url":"https://api.github.com/users/srikanth-lingala/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/srikanth-lingala/subscriptions","organizations_url":"https://api.github.com/users/srikanth-lingala/orgs","repos_url":"https://api.github.com/users/srikanth-lingala/repos","events_url":"https://api.github.com/users/srikanth-lingala/events{/privacy}","received_events_url":"https://api.github.com/users/srikanth-lingala/received_events","type":"User","user_view_type":"public","site_admin":false},"performed_via_github_app":null},{"id":2462719500,"node_id":"MDEyOkxhYmVsZWRFdmVudDI0NjI3MTk1MDA=","url":"https://api.github.com/repos/srikanth-lingala/zip4j/issues/events/2462719500","actor":{"login":"srikanth-lingala","id":3450302,"node_id":"MDQ6VXNlcjM0NTAzMDI=","avatar_url":"https://avatars.githubusercontent.com/u/3450302?v=4","gravatar_id":"","url":"https://api.github.com/users/srikanth-lingala","html_url":"https://github.com/srikanth-lingala","followers_url":"https://api.github.com/users/srikanth-lingala/followers","following_url":"https://api.github.com/users/srikanth-lingala/following{/other_user}","gists_url":"https://api.github.com/users/srikanth-lingala/gists{/gist_id}","starred_url":"https://api.github.com/users/srikanth-lingala/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/srikanth-lingala/subscriptions","organizations_url":"https://api.github.com/users/srikanth-lingala/orgs","repos_url":"https://api.github.com/users/srikanth-lingala/repos","events_url":"https://api.github.com/users/srikanth-lingala/events{/privacy}","received_events_url":"https://api.github.com/users/srikanth-lingala/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2019-07-05T13:15:35Z","label":{"name":"bug","color":"d73a4a"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/srikanth-lingala/zip4j/issues/comments/509764466","html_url":"https://github.com/srikanth-lingala/zip4j/issues/10#issuecomment-509764466","issue_url":"https://api.github.com/repos/srikanth-lingala/zip4j/issues/10","id":509764466,"node_id":"MDEyOklzc3VlQ29tbWVudDUwOTc2NDQ2Ng==","user":{"login":"srikanth-lingala","id":3450302,"node_id":"MDQ6VXNlcjM0NTAzMDI=","avatar_url":"https://avatars.githubusercontent.com/u/3450302?v=4","gravatar_id":"","url":"https://api.github.com/users/srikanth-lingala","html_url":"https://github.com/srikanth-lingala","followers_url":"https://api.github.com/users/srikanth-lingala/followers","following_url":"https://api.github.com/users/srikanth-lingala/following{/other_user}","gists_url":"https://api.github.com/users/srikanth-lingala/gists{/gist_id}","starred_url":"https://api.github.com/users/srikanth-lingala/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/srikanth-lingala/subscriptions","organizations_url":"https://api.github.com/users/srikanth-lingala/orgs","repos_url":"https://api.github.com/users/srikanth-lingala/repos","events_url":"https://api.github.com/users/srikanth-lingala/events{/privacy}","received_events_url":"https://api.github.com/users/srikanth-lingala/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-09T18:56:24Z","updated_at":"2019-07-09T18:56:24Z","body":"Fixed in v2.1.0","author_association":"OWNER","reactions":{"url":"https://api.github.com/repos/srikanth-lingala/zip4j/issues/comments/509764466/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"srikanth-lingala","id":3450302,"node_id":"MDQ6VXNlcjM0NTAzMDI=","avatar_url":"https://avatars.githubusercontent.com/u/3450302?v=4","gravatar_id":"","url":"https://api.github.com/users/srikanth-lingala","html_url":"https://github.com/srikanth-lingala","followers_url":"https://api.github.com/users/srikanth-lingala/followers","following_url":"https://api.github.com/users/srikanth-lingala/following{/other_user}","gists_url":"https://api.github.com/users/srikanth-lingala/gists{/gist_id}","starred_url":"https://api.github.com/users/srikanth-lingala/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/srikanth-lingala/subscriptions","organizations_url":"https://api.github.com/users/srikanth-lingala/orgs","repos_url":"https://api.github.com/users/srikanth-lingala/repos","events_url":"https://api.github.com/users/srikanth-lingala/events{/privacy}","received_events_url":"https://api.github.com/users/srikanth-lingala/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":2470356809,"node_id":"MDExOkNsb3NlZEV2ZW50MjQ3MDM1NjgwOQ==","url":"https://api.github.com/repos/srikanth-lingala/zip4j/issues/events/2470356809","actor":{"login":"srikanth-lingala","id":3450302,"node_id":"MDQ6VXNlcjM0NTAzMDI=","avatar_url":"https://avatars.githubusercontent.com/u/3450302?v=4","gravatar_id":"","url":"https://api.github.com/users/srikanth-lingala","html_url":"https://github.com/srikanth-lingala","followers_url":"https://api.github.com/users/srikanth-lingala/followers","following_url":"https://api.github.com/users/srikanth-lingala/following{/other_user}","gists_url":"https://api.github.com/users/srikanth-lingala/gists{/gist_id}","starred_url":"https://api.github.com/users/srikanth-lingala/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/srikanth-lingala/subscriptions","organizations_url":"https://api.github.com/users/srikanth-lingala/orgs","repos_url":"https://api.github.com/users/srikanth-lingala/repos","events_url":"https://api.github.com/users/srikanth-lingala/events{/privacy}","received_events_url":"https://api.github.com/users/srikanth-lingala/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2019-07-09T18:56:24Z","state_reason":null,"performed_via_github_app":null},{"actor":{"login":"jacob-fw","id":65678626,"node_id":"MDQ6VXNlcjY1Njc4NjI2","avatar_url":"https://avatars.githubusercontent.com/u/65678626?v=4","gravatar_id":"","url":"https://api.github.com/users/jacob-fw","html_url":"https://github.com/jacob-fw","followers_url":"https://api.github.com/users/jacob-fw/followers","following_url":"https://api.github.com/users/jacob-fw/following{/other_user}","gists_url":"https://api.github.com/users/jacob-fw/gists{/gist_id}","starred_url":"https://api.github.com/users/jacob-fw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jacob-fw/subscriptions","organizations_url":"https://api.github.com/users/jacob-fw/orgs","repos_url":"https://api.github.com/users/jacob-fw/repos","events_url":"https://api.github.com/users/jacob-fw/events{/privacy}","received_events_url":"https://api.github.com/users/jacob-fw/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-15T20:16:19Z","updated_at":"2022-09-15T20:16:19Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/srikanth-lingala/zip4j/issues/475","repository_url":"https://api.github.com/repos/srikanth-lingala/zip4j","labels_url":"https://api.github.com/repos/srikanth-lingala/zip4j/issues/475/labels{/name}","comments_url":"https://api.github.com/repos/srikanth-lingala/zip4j/issues/475/comments","events_url":"https://api.github.com/repos/srikanth-lingala/zip4j/issues/475/events","html_url":"https://github.com/srikanth-lingala/zip4j/issues/475","id":1375036267,"node_id":"I_kwDOCwUnhM5R9WNr","number":475,"title":"Seeking Clarification on Entry Size with STORE Compression","user":{"login":"jacob-fw","id":65678626,"node_id":"MDQ6VXNlcjY1Njc4NjI2","avatar_url":"https://avatars.githubusercontent.com/u/65678626?v=4","gravatar_id":"","url":"https://api.github.com/users/jacob-fw","html_url":"https://github.com/jacob-fw","followers_url":"https://api.github.com/users/jacob-fw/followers","following_url":"https://api.github.com/users/jacob-fw/following{/other_user}","gists_url":"https://api.github.com/users/jacob-fw/gists{/gist_id}","starred_url":"https://api.github.com/users/jacob-fw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jacob-fw/subscriptions","organizations_url":"https://api.github.com/users/jacob-fw/orgs","repos_url":"https://api.github.com/users/jacob-fw/repos","events_url":"https://api.github.com/users/jacob-fw/events{/privacy}","received_events_url":"https://api.github.com/users/jacob-fw/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1623763928,"node_id":"MDU6TGFiZWwxNjIzNzYzOTI4","url":"https://api.github.com/repos/srikanth-lingala/zip4j/labels/want%20feedback","name":"want feedback","color":"edab6a","default":false,"description":""},{"id":1637911442,"node_id":"MDU6TGFiZWwxNjM3OTExNDQy","url":"https://api.github.com/repos/srikanth-lingala/zip4j/labels/question","name":"question","color":"0052cc","default":true,"description":""}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2022-09-15T20:16:19Z","updated_at":"2023-02-22T15:57:30Z","closed_at":null,"author_association":"NONE","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":184887172,"node_id":"MDEwOlJlcG9zaXRvcnkxODQ4ODcxNzI=","name":"zip4j","full_name":"srikanth-lingala/zip4j","private":false,"owner":{"login":"srikanth-lingala","id":3450302,"node_id":"MDQ6VXNlcjM0NTAzMDI=","avatar_url":"https://avatars.githubusercontent.com/u/3450302?v=4","gravatar_id":"","url":"https://api.github.com/users/srikanth-lingala","html_url":"https://github.com/srikanth-lingala","followers_url":"https://api.github.com/users/srikanth-lingala/followers","following_url":"https://api.github.com/users/srikanth-lingala/following{/other_user}","gists_url":"https://api.github.com/users/srikanth-lingala/gists{/gist_id}","starred_url":"https://api.github.com/users/srikanth-lingala/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/srikanth-lingala/subscriptions","organizations_url":"https://api.github.com/users/srikanth-lingala/orgs","repos_url":"https://api.github.com/users/srikanth-lingala/repos","events_url":"https://api.github.com/users/srikanth-lingala/events{/privacy}","received_events_url":"https://api.github.com/users/srikanth-lingala/received_events","type":"User","user_view_type":"public","site_admin":false},"html_url":"https://github.com/srikanth-lingala/zip4j","description":"A Java library for zip files and streams","fork":false,"url":"https://api.github.com/repos/srikanth-lingala/zip4j","forks_url":"https://api.github.com/repos/srikanth-lingala/zip4j/forks","keys_url":"https://api.github.com/repos/srikanth-lingala/zip4j/keys{/key_id}","collaborators_url":"https://api.github.com/repos/srikanth-lingala/zip4j/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/srikanth-lingala/zip4j/teams","hooks_url":"https://api.github.com/repos/srikanth-lingala/zip4j/hooks","issue_events_url":"https://api.github.com/repos/srikanth-lingala/zip4j/issues/events{/number}","events_url":"https://api.github.com/repos/srikanth-lingala/zip4j/events","assignees_url":"https://api.github.com/repos/srikanth-lingala/zip4j/assignees{/user}","branches_url":"https://api.github.com/repos/srikanth-lingala/zip4j/branches{/branch}","tags_url":"https://api.github.com/repos/srikanth-lingala/zip4j/tags","blobs_url":"https://api.github.com/repos/srikanth-lingala/zip4j/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/srikanth-lingala/zip4j/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/srikanth-lingala/zip4j/git/refs{/sha}","trees_url":"https://api.github.com/repos/srikanth-lingala/zip4j/git/trees{/sha}","statuses_url":"https://api.github.com/repos/srikanth-lingala/zip4j/statuses/{sha}","languages_url":"https://api.github.com/repos/srikanth-lingala/zip4j/languages","stargazers_url":"https://api.github.com/repos/srikanth-lingala/zip4j/stargazers","contributors_url":"https://api.github.com/repos/srikanth-lingala/zip4j/contributors","subscribers_url":"https://api.github.com/repos/srikanth-lingala/zip4j/subscribers","subscription_url":"https://api.github.com/repos/srikanth-lingala/zip4j/subscription","commits_url":"https://api.github.com/repos/srikanth-lingala/zip4j/commits{/sha}","git_commits_url":"https://api.github.com/repos/srikanth-lingala/zip4j/git/commits{/sha}","comments_url":"https://api.github.com/repos/srikanth-lingala/zip4j/comments{/number}","issue_comment_url":"https://api.github.com/repos/srikanth-lingala/zip4j/issues/comments{/number}","contents_url":"https://api.github.com/repos/srikanth-lingala/zip4j/contents/{+path}","compare_url":"https://api.github.com/repos/srikanth-lingala/zip4j/compare/{base}...{head}","merges_url":"https://api.github.com/repos/srikanth-lingala/zip4j/merges","archive_url":"https://api.github.com/repos/srikanth-lingala/zip4j/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/srikanth-lingala/zip4j/downloads","issues_url":"https://api.github.com/repos/srikanth-lingala/zip4j/issues{/number}","pulls_url":"https://api.github.com/repos/srikanth-lingala/zip4j/pulls{/number}","milestones_url":"https://api.github.com/repos/srikanth-lingala/zip4j/milestones{/number}","notifications_url":"https://api.github.com/repos/srikanth-lingala/zip4j/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/srikanth-lingala/zip4j/labels{/name}","releases_url":"https://api.github.com/repos/srikanth-lingala/zip4j/releases{/id}","deployments_url":"https://api.github.com/repos/srikanth-lingala/zip4j/deployments","created_at":"2019-05-04T11:39:50Z","updated_at":"2025-11-07T02:32:48Z","pushed_at":"2024-06-27T19:05:18Z","git_url":"git://github.com/srikanth-lingala/zip4j.git","ssh_url":"git@github.com:srikanth-lingala/zip4j.git","clone_url":"https://github.com/srikanth-lingala/zip4j.git","svn_url":"https://github.com/srikanth-lingala/zip4j","homepage":"","size":5280,"stargazers_count":2190,"watchers_count":2190,"language":"Java","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":321,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":81,"license":{"key":"apache-2.0","name":"Apache License 2.0","spdx_id":"Apache-2.0","url":"https://api.github.com/licenses/apache-2.0","node_id":"MDc6TGljZW5zZTI="},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["java-zip","split-zip","zip-encryption","zip4j"],"visibility":"public","forks":321,"open_issues":81,"watchers":2190,"default_branch":"master","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"Just want to specify this upfront.  I have done my best to try and understand what's going on before posting here, so if there's something I'm missing, please feel free to correct me.\r\n\r\nI've read several of the other threads people have brought up related to the requirement to set the entry size when using CompressionMethods.STORE\r\n[https://github.com/srikanth-lingala/zip4j/issues/10](https://github.com/srikanth-lingala/zip4j/issues/10)\r\n[https://github.com/srikanth-lingala/zip4j/issues/11](https://github.com/srikanth-lingala/zip4j/issues/11)\r\n\r\nHad to read them a few times before it finally clicked for me, but I do see why it is desired; in order to keep the stream generated by ZipOutputStream usable by ZipInputStream.  From what was in those tickets though, it does sound like the zip file structure does allow for the possibility of ZipOutputStream not needing to have the entry size specified upfront for the STORE compression method.\r\nI'm looking to use ZipOutputStream to send out a completed zipfile, and don't need the final result to be able to be read by ZipInputStream, and depending upon the data I'm adding to the zip file, I would like to be able to choose which files get compressed and which don't.\r\n\r\nTo be clear I'm not asking to change the default behavior; I think the current option of requiring all entries to be streamable is completely reasonable, and allows for maximum compatibility of how the final zip file can be used.  But I also don't see why we can't have additional flexibility, especially when it sounds like 99% of what is needed is already there.\r\n\r\nMy suggestion is to add a new field to ZipParameters, StreamableEntry.  For backwards compatibility it will be true by default, but in cases where we want to add a file with STORE compressionMethod (which it seems like is really the only case where it would be needed as of now) and can't specify the entry size upfront, we can set it to false.\r\n\r\nHere's an example of how I think it could be used.\r\n`\r\n\r\n        zos = new ZipOutputStream();\r\n\r\n\tzipparam = new ZipParameters();\r\n\tzipparam.setCompressionMethod(CompressionMethod.STORE);\r\n\tzipparam.setStreamableEntry(false);    // NEW METHOD\r\n\tzipparam.setFileNameInZip(filename);\r\n\r\n\tzos.putNextEntry(zipparam);  // local file header has length set to 0\r\n\tcopyStream(entryStream, zos);  // copy our arbitrary length data.\r\n\tzos.closeEntry();  // data descriptor has the full size written to it\r\n        zos.close();  // File headers are written at the end\r\n\r\n`\r\n\r\nAgain, if there's something I'm misunderstanding about Zip4J or about how the Zip Structure works ,please feel free to correct me.\r\n","reactions":{"url":"https://api.github.com/repos/srikanth-lingala/zip4j/issues/475/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/srikanth-lingala/zip4j/issues/475/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"}]