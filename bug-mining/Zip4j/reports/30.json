{"url":"https://api.github.com/repos/srikanth-lingala/zip4j/issues/39","repository_url":"https://api.github.com/repos/srikanth-lingala/zip4j","labels_url":"https://api.github.com/repos/srikanth-lingala/zip4j/issues/39/labels{/name}","comments_url":"https://api.github.com/repos/srikanth-lingala/zip4j/issues/39/comments","events_url":"https://api.github.com/repos/srikanth-lingala/zip4j/issues/39/events","html_url":"https://github.com/srikanth-lingala/zip4j/issues/39","id":479393313,"node_id":"MDU6SXNzdWU0NzkzOTMzMTM=","number":39,"title":"ZipException while extracting in version 2.1.x, but works fine in 1.x ","user":{"login":"JensSchliesser","id":12368111,"node_id":"MDQ6VXNlcjEyMzY4MTEx","avatar_url":"https://avatars.githubusercontent.com/u/12368111?v=4","gravatar_id":"","url":"https://api.github.com/users/JensSchliesser","html_url":"https://github.com/JensSchliesser","followers_url":"https://api.github.com/users/JensSchliesser/followers","following_url":"https://api.github.com/users/JensSchliesser/following{/other_user}","gists_url":"https://api.github.com/users/JensSchliesser/gists{/gist_id}","starred_url":"https://api.github.com/users/JensSchliesser/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JensSchliesser/subscriptions","organizations_url":"https://api.github.com/users/JensSchliesser/orgs","repos_url":"https://api.github.com/users/JensSchliesser/repos","events_url":"https://api.github.com/users/JensSchliesser/events{/privacy}","received_events_url":"https://api.github.com/users/JensSchliesser/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1347122729,"node_id":"MDU6TGFiZWwxMzQ3MTIyNzI5","url":"https://api.github.com/repos/srikanth-lingala/zip4j/labels/new-feature","name":"new-feature","color":"a2eeef","default":false,"description":"New feature or request"}],"state":"closed","locked":false,"assignee":{"login":"srikanth-lingala","id":3450302,"node_id":"MDQ6VXNlcjM0NTAzMDI=","avatar_url":"https://avatars.githubusercontent.com/u/3450302?v=4","gravatar_id":"","url":"https://api.github.com/users/srikanth-lingala","html_url":"https://github.com/srikanth-lingala","followers_url":"https://api.github.com/users/srikanth-lingala/followers","following_url":"https://api.github.com/users/srikanth-lingala/following{/other_user}","gists_url":"https://api.github.com/users/srikanth-lingala/gists{/gist_id}","starred_url":"https://api.github.com/users/srikanth-lingala/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/srikanth-lingala/subscriptions","organizations_url":"https://api.github.com/users/srikanth-lingala/orgs","repos_url":"https://api.github.com/users/srikanth-lingala/repos","events_url":"https://api.github.com/users/srikanth-lingala/events{/privacy}","received_events_url":"https://api.github.com/users/srikanth-lingala/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"srikanth-lingala","id":3450302,"node_id":"MDQ6VXNlcjM0NTAzMDI=","avatar_url":"https://avatars.githubusercontent.com/u/3450302?v=4","gravatar_id":"","url":"https://api.github.com/users/srikanth-lingala","html_url":"https://github.com/srikanth-lingala","followers_url":"https://api.github.com/users/srikanth-lingala/followers","following_url":"https://api.github.com/users/srikanth-lingala/following{/other_user}","gists_url":"https://api.github.com/users/srikanth-lingala/gists{/gist_id}","starred_url":"https://api.github.com/users/srikanth-lingala/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/srikanth-lingala/subscriptions","organizations_url":"https://api.github.com/users/srikanth-lingala/orgs","repos_url":"https://api.github.com/users/srikanth-lingala/repos","events_url":"https://api.github.com/users/srikanth-lingala/events{/privacy}","received_events_url":"https://api.github.com/users/srikanth-lingala/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":27,"created_at":"2019-08-11T17:44:41Z","updated_at":"2020-03-19T14:00:59Z","closed_at":"2019-09-13T20:18:47Z","author_association":"NONE","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Hello,\r\n\r\nIÂ´m getting the following exception while extracting using 2.1.2. The same file works **fine** in 1.3.3. I also checked the file with unzip -t and with WinZIP and 7z -> no problems there.\r\n\r\n```\r\n Caused by: net.lingala.zip4j.exception.ZipException: Reached end of entry, but crc verification failed for {--file--}\r\n \tat net.lingala.zip4j.io.inputstream.ZipInputStream.verifyCrc(ZipInputStream.java:240) ~[zip4j-2.1.1.jar!/:na]\r\n \tat net.lingala.zip4j.io.inputstream.ZipInputStream.endOfCompressedDataReached(ZipInputStream.java:154) ~[zip4j-2.1.1.jar!/:na]\r\n \tat net.lingala.zip4j.io.inputstream.ZipInputStream.read(ZipInputStream.java:122) ~[zip4j-2.1.1.jar!/:na]\r\n \tat java.base/sun.nio.cs.StreamDecoder.readBytes(Unknown Source) ~[na:na]\r\n \tat java.base/sun.nio.cs.StreamDecoder.implRead(Unknown Source) ~[na:na]\r\n \tat java.base/sun.nio.cs.StreamDecoder.read(Unknown Source) ~[na:na]\r\n \tat java.base/java.io.InputStreamReader.read(Unknown Source) ~[na:na]\r\n \tat java.base/java.io.Reader.read(Unknown Source) ~[na:na]\r\n \tat org.apache.commons.io.IOUtils.copyLarge(IOUtils.java:2001) ~[commons-io-2.4.jar!/:2.4]\r\n \tat org.apache.commons.io.IOUtils.copyLarge(IOUtils.java:1980) ~[commons-io-2.4.jar!/:2.4]\r\n \tat org.apache.commons.io.IOUtils.copy(IOUtils.java:1957) ~[commons-io-2.4.jar!/:2.4]\r\n \tat org.apache.commons.io.IOUtils.copy(IOUtils.java:1907) ~[commons-io-2.4.jar!/:2.4]\r\n \tat org.apache.commons.io.IOUtils.toString(IOUtils.java:778) ~[commons-io-2.4.jar!/:2.4]\r\n \tat de.xxx.xxx.helper.ExtractImport.content(ExtractImport.java:90) ~[classes!/:1.5.0-SNAPSHOT]\r\n \t... 14 common frames omitted\r\n```\r\n```\r\nfinal Map<String, String> data = new HashMap<>();\r\nfinal Charset charset = Charset.forName(\"Cp1252\");\r\n\r\ntempFile = createTempFile(bin);\r\nZipFile zipFile = new ZipFile(tempFile, password.toCharArray());\r\nZipInputStream zis;\r\n\r\nfinal Map<String,FileHeader> fileheaders = zipFile.getFileHeaders()\r\n        .stream()\r\n        .collect(toMap(FileHeader::getFileName, Function.identity()));\r\n...\r\nfor(Map.Entry<String,IBaseModel> file: toParseFiles.entrySet()) {\r\n    final String filename = file.getKey();\r\n    final FileHeader fileHeader = fileheaders.get(filename);\r\n\r\n    if(fileHeader == null) {\r\n        ...\r\n    } else {\r\n        zis = zipFile.getInputStream(fileHeader);\r\n        data.put(filename, IOUtils.toString(zis, charset));\r\n        zis.close();\r\n    }\r\n}\r\n```\r\n\r\nand..Thanks for your great work!","closed_by":{"login":"srikanth-lingala","id":3450302,"node_id":"MDQ6VXNlcjM0NTAzMDI=","avatar_url":"https://avatars.githubusercontent.com/u/3450302?v=4","gravatar_id":"","url":"https://api.github.com/users/srikanth-lingala","html_url":"https://github.com/srikanth-lingala","followers_url":"https://api.github.com/users/srikanth-lingala/followers","following_url":"https://api.github.com/users/srikanth-lingala/following{/other_user}","gists_url":"https://api.github.com/users/srikanth-lingala/gists{/gist_id}","starred_url":"https://api.github.com/users/srikanth-lingala/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/srikanth-lingala/subscriptions","organizations_url":"https://api.github.com/users/srikanth-lingala/orgs","repos_url":"https://api.github.com/users/srikanth-lingala/repos","events_url":"https://api.github.com/users/srikanth-lingala/events{/privacy}","received_events_url":"https://api.github.com/users/srikanth-lingala/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/srikanth-lingala/zip4j/issues/39/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/srikanth-lingala/zip4j/issues/39/timeline","performed_via_github_app":null,"state_reason":"completed"}