{"url":"https://api.github.com/repos/srikanth-lingala/zip4j/issues/6","repository_url":"https://api.github.com/repos/srikanth-lingala/zip4j","labels_url":"https://api.github.com/repos/srikanth-lingala/zip4j/issues/6/labels{/name}","comments_url":"https://api.github.com/repos/srikanth-lingala/zip4j/issues/6/comments","events_url":"https://api.github.com/repos/srikanth-lingala/zip4j/issues/6/events","html_url":"https://github.com/srikanth-lingala/zip4j/issues/6","id":461695521,"node_id":"MDU6SXNzdWU0NjE2OTU1MjE=","number":6,"title":"Getting \"Incorrect password\" in version 2","user":{"login":"lespea","id":99605,"node_id":"MDQ6VXNlcjk5NjA1","avatar_url":"https://avatars.githubusercontent.com/u/99605?v=4","gravatar_id":"","url":"https://api.github.com/users/lespea","html_url":"https://github.com/lespea","followers_url":"https://api.github.com/users/lespea/followers","following_url":"https://api.github.com/users/lespea/following{/other_user}","gists_url":"https://api.github.com/users/lespea/gists{/gist_id}","starred_url":"https://api.github.com/users/lespea/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lespea/subscriptions","organizations_url":"https://api.github.com/users/lespea/orgs","repos_url":"https://api.github.com/users/lespea/repos","events_url":"https://api.github.com/users/lespea/events{/privacy}","received_events_url":"https://api.github.com/users/lespea/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1347122727,"node_id":"MDU6TGFiZWwxMzQ3MTIyNzI3","url":"https://api.github.com/repos/srikanth-lingala/zip4j/labels/bug","name":"bug","color":"d73a4a","default":true,"description":"Something isn't working"}],"state":"closed","locked":false,"assignee":{"login":"srikanth-lingala","id":3450302,"node_id":"MDQ6VXNlcjM0NTAzMDI=","avatar_url":"https://avatars.githubusercontent.com/u/3450302?v=4","gravatar_id":"","url":"https://api.github.com/users/srikanth-lingala","html_url":"https://github.com/srikanth-lingala","followers_url":"https://api.github.com/users/srikanth-lingala/followers","following_url":"https://api.github.com/users/srikanth-lingala/following{/other_user}","gists_url":"https://api.github.com/users/srikanth-lingala/gists{/gist_id}","starred_url":"https://api.github.com/users/srikanth-lingala/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/srikanth-lingala/subscriptions","organizations_url":"https://api.github.com/users/srikanth-lingala/orgs","repos_url":"https://api.github.com/users/srikanth-lingala/repos","events_url":"https://api.github.com/users/srikanth-lingala/events{/privacy}","received_events_url":"https://api.github.com/users/srikanth-lingala/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"srikanth-lingala","id":3450302,"node_id":"MDQ6VXNlcjM0NTAzMDI=","avatar_url":"https://avatars.githubusercontent.com/u/3450302?v=4","gravatar_id":"","url":"https://api.github.com/users/srikanth-lingala","html_url":"https://github.com/srikanth-lingala","followers_url":"https://api.github.com/users/srikanth-lingala/followers","following_url":"https://api.github.com/users/srikanth-lingala/following{/other_user}","gists_url":"https://api.github.com/users/srikanth-lingala/gists{/gist_id}","starred_url":"https://api.github.com/users/srikanth-lingala/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/srikanth-lingala/subscriptions","organizations_url":"https://api.github.com/users/srikanth-lingala/orgs","repos_url":"https://api.github.com/users/srikanth-lingala/repos","events_url":"https://api.github.com/users/srikanth-lingala/events{/privacy}","received_events_url":"https://api.github.com/users/srikanth-lingala/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":3,"created_at":"2019-06-27T18:53:17Z","updated_at":"2019-06-27T21:50:35Z","closed_at":"2019-06-27T21:50:35Z","author_association":"NONE","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"I'm migrating to version 2 and having issues getting encryption to work.  I'm just trying the standard zip method for now and it seems to create the zip fine, but both gnu unzip and 7z both say I have the wrong password when I try to decrypt it.  I have the same issue using Store instead of Deflate.\r\n\r\nSimple test program:\r\n```java\r\nimport net.lingala.zip4j.io.outputstream.ZipOutputStream;\r\nimport net.lingala.zip4j.model.ZipParameters;\r\nimport net.lingala.zip4j.model.enums.CompressionLevel;\r\nimport net.lingala.zip4j.model.enums.CompressionMethod;\r\nimport net.lingala.zip4j.model.enums.EncryptionMethod;\r\n\r\nimport java.io.ByteArrayInputStream;\r\nimport java.io.ByteArrayOutputStream;\r\nimport java.nio.file.Files;\r\nimport java.nio.file.Paths;\r\nimport java.nio.file.StandardCopyOption;\r\n\r\npublic class ztest {\r\n    public static void main(final String[] args) throws Exception {\r\n        ByteArrayOutputStream bao = new ByteArrayOutputStream(1024 * 64);\r\n\r\n        try (\r\n              ZipOutputStream zf = new ZipOutputStream(bao, \"t\".toCharArray())\r\n        ) {\r\n            ZipParameters zparam = new ZipParameters();\r\n            zparam.setCompressionLevel(CompressionLevel.NORMAL);\r\n            zparam.setCompressionMethod(CompressionMethod.DEFLATE);\r\n            zparam.setEncryptFiles(true);\r\n            zparam.setEncryptionMethod(EncryptionMethod.ZIP_STANDARD);\r\n\r\n            zparam.setFileNameInZip(\"test1.txt\");\r\n            zf.putNextEntry(zparam);\r\n            zf.write(\"test contents 1\".getBytes());\r\n            zf.closeEntry();\r\n        }\r\n\r\n        Files.copy(\r\n              new ByteArrayInputStream(bao.toByteArray()),\r\n              Paths.get(\"test.zip\"),\r\n              StandardCopyOption.REPLACE_EXISTING\r\n        );\r\n    }\r\n}\r\n```\r\n\r\nTrying to extract the file:\r\n```\r\n$ unzip test.zip\r\nArchive:  test.zip\r\n[test.zip] test1.txt password:\r\npassword incorrect--reenter:\r\n```\r\n\r\n```\r\n$ 7z -pt x test.zip\r\n\r\n7-Zip [64] 16.02 : Copyright (c) 1999-2016 Igor Pavlov : 2016-05-21\r\np7zip Version 16.02 (locale=utf8,Utf16=on,HugeFiles=on,64 bits,12 CPUs x64)\r\n\r\nScanning the drive for archives:\r\n1 file, 159 bytes (1 KiB)\r\n\r\nExtracting archive: test.zip\r\n--\r\nPath = test.zip\r\nType = zip\r\nPhysical Size = 159\r\n\r\nERROR: Wrong password : test1.txt\r\n\r\nSub items Errors: 1\r\n\r\nArchives with Errors: 1\r\n\r\nSub items Errors: 1\r\n```","closed_by":{"login":"lespea","id":99605,"node_id":"MDQ6VXNlcjk5NjA1","avatar_url":"https://avatars.githubusercontent.com/u/99605?v=4","gravatar_id":"","url":"https://api.github.com/users/lespea","html_url":"https://github.com/lespea","followers_url":"https://api.github.com/users/lespea/followers","following_url":"https://api.github.com/users/lespea/following{/other_user}","gists_url":"https://api.github.com/users/lespea/gists{/gist_id}","starred_url":"https://api.github.com/users/lespea/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lespea/subscriptions","organizations_url":"https://api.github.com/users/lespea/orgs","repos_url":"https://api.github.com/users/lespea/repos","events_url":"https://api.github.com/users/lespea/events{/privacy}","received_events_url":"https://api.github.com/users/lespea/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/srikanth-lingala/zip4j/issues/6/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/srikanth-lingala/zip4j/issues/6/timeline","performed_via_github_app":null,"state_reason":"completed"}