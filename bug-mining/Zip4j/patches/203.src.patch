diff --git a/src/main/java/net/lingala/zip4j/io/inputstream/DecompressedInputStream.java b/src/main/java/net/lingala/zip4j/io/inputstream/DecompressedInputStream.java
index ed36cbf..2c0da22 100644
--- a/src/main/java/net/lingala/zip4j/io/inputstream/DecompressedInputStream.java
+++ b/src/main/java/net/lingala/zip4j/io/inputstream/DecompressedInputStream.java
@@ -6,10 +6,10 @@ import java.io.PushbackInputStream;
 
 abstract class DecompressedInputStream extends InputStream {
 
-  private CipherInputStream cipherInputStream;
+  private CipherInputStream<?> cipherInputStream;
   protected byte[] oneByteBuffer = new byte[1];
 
-  public DecompressedInputStream(CipherInputStream cipherInputStream) {
+  public DecompressedInputStream(CipherInputStream<?> cipherInputStream) {
     this.cipherInputStream = cipherInputStream;
   }
 
diff --git a/src/main/java/net/lingala/zip4j/io/inputstream/InflaterInputStream.java b/src/main/java/net/lingala/zip4j/io/inputstream/InflaterInputStream.java
index 4c2709b..df434d0 100644
--- a/src/main/java/net/lingala/zip4j/io/inputstream/InflaterInputStream.java
+++ b/src/main/java/net/lingala/zip4j/io/inputstream/InflaterInputStream.java
@@ -14,7 +14,7 @@ public class InflaterInputStream extends DecompressedInputStream {
   private byte[] singleByteBuffer = new byte[1];
   private int len;
 
-  public InflaterInputStream(CipherInputStream cipherInputStream, int bufferSize) {
+  public InflaterInputStream(CipherInputStream<?> cipherInputStream, int bufferSize) {
     super(cipherInputStream);
     this.inflater = new Inflater(true);
     buff = new byte[bufferSize];
diff --git a/src/main/java/net/lingala/zip4j/io/inputstream/NoCipherInputStream.java b/src/main/java/net/lingala/zip4j/io/inputstream/NoCipherInputStream.java
index 18a3ecd..51bc283 100644
--- a/src/main/java/net/lingala/zip4j/io/inputstream/NoCipherInputStream.java
+++ b/src/main/java/net/lingala/zip4j/io/inputstream/NoCipherInputStream.java
@@ -5,7 +5,7 @@ import net.lingala.zip4j.model.LocalFileHeader;
 
 import java.io.IOException;
 
-class NoCipherInputStream extends CipherInputStream {
+class NoCipherInputStream extends CipherInputStream<NoCipherInputStream.NoDecrypter> {
 
   public NoCipherInputStream(ZipEntryInputStream zipEntryInputStream, LocalFileHeader localFileHeader,
                              char[] password, int bufferSize) throws IOException {
@@ -13,7 +13,7 @@ class NoCipherInputStream extends CipherInputStream {
   }
 
   @Override
-  protected Decrypter initializeDecrypter(LocalFileHeader localFileHeader, char[] password, boolean useUtf8ForPassword) {
+  protected NoDecrypter initializeDecrypter(LocalFileHeader localFileHeader, char[] password, boolean useUtf8ForPassword) {
     return new NoDecrypter();
   }
 
diff --git a/src/main/java/net/lingala/zip4j/io/inputstream/StoreInputStream.java b/src/main/java/net/lingala/zip4j/io/inputstream/StoreInputStream.java
index 81c0e15..39756bc 100644
--- a/src/main/java/net/lingala/zip4j/io/inputstream/StoreInputStream.java
+++ b/src/main/java/net/lingala/zip4j/io/inputstream/StoreInputStream.java
@@ -2,7 +2,7 @@ package net.lingala.zip4j.io.inputstream;
 
 class StoreInputStream extends DecompressedInputStream {
 
-  public StoreInputStream(CipherInputStream cipherInputStream) {
+  public StoreInputStream(CipherInputStream<?> cipherInputStream) {
     super(cipherInputStream);
   }
 }
diff --git a/src/main/java/net/lingala/zip4j/io/inputstream/ZipInputStream.java b/src/main/java/net/lingala/zip4j/io/inputstream/ZipInputStream.java
index cf3ca84..a11d3a6 100755
--- a/src/main/java/net/lingala/zip4j/io/inputstream/ZipInputStream.java
+++ b/src/main/java/net/lingala/zip4j/io/inputstream/ZipInputStream.java
@@ -244,11 +244,11 @@ public class ZipInputStream extends InputStream {
 
   private DecompressedInputStream initializeEntryInputStream(LocalFileHeader localFileHeader) throws IOException {
     ZipEntryInputStream zipEntryInputStream = new ZipEntryInputStream(inputStream, getCompressedSize(localFileHeader));
-    CipherInputStream cipherInputStream = initializeCipherInputStream(zipEntryInputStream, localFileHeader);
+    CipherInputStream<?> cipherInputStream = initializeCipherInputStream(zipEntryInputStream, localFileHeader);
     return initializeDecompressorForThisEntry(cipherInputStream, localFileHeader);
   }
 
-  private CipherInputStream initializeCipherInputStream(ZipEntryInputStream zipEntryInputStream,
+  private CipherInputStream<?> initializeCipherInputStream(ZipEntryInputStream zipEntryInputStream,
                                                         LocalFileHeader localFileHeader) throws IOException {
     if (!localFileHeader.isEncrypted()) {
       return new NoCipherInputStream(zipEntryInputStream, localFileHeader, password, zip4jConfig.getBufferSize());
@@ -266,7 +266,7 @@ public class ZipInputStream extends InputStream {
     }
   }
 
-  private DecompressedInputStream initializeDecompressorForThisEntry(CipherInputStream cipherInputStream,
+  private DecompressedInputStream initializeDecompressorForThisEntry(CipherInputStream<?> cipherInputStream,
                                                                      LocalFileHeader localFileHeader) throws ZipException {
     CompressionMethod compressionMethod = getCompressionMethod(localFileHeader);
 
diff --git a/src/main/java/net/lingala/zip4j/io/outputstream/CompressedOutputStream.java b/src/main/java/net/lingala/zip4j/io/outputstream/CompressedOutputStream.java
index 294fc44..5404bb6 100644
--- a/src/main/java/net/lingala/zip4j/io/outputstream/CompressedOutputStream.java
+++ b/src/main/java/net/lingala/zip4j/io/outputstream/CompressedOutputStream.java
@@ -5,9 +5,9 @@ import java.io.OutputStream;
 
 abstract class CompressedOutputStream extends OutputStream {
 
-  private CipherOutputStream cipherOutputStream;
+  private CipherOutputStream<?> cipherOutputStream;
 
-  public CompressedOutputStream(CipherOutputStream cipherOutputStream) {
+  public CompressedOutputStream(CipherOutputStream<?> cipherOutputStream) {
     this.cipherOutputStream = cipherOutputStream;
   }
 
diff --git a/src/main/java/net/lingala/zip4j/io/outputstream/DeflaterOutputStream.java b/src/main/java/net/lingala/zip4j/io/outputstream/DeflaterOutputStream.java
index e39930a..6d55eb1 100755
--- a/src/main/java/net/lingala/zip4j/io/outputstream/DeflaterOutputStream.java
+++ b/src/main/java/net/lingala/zip4j/io/outputstream/DeflaterOutputStream.java
@@ -26,7 +26,7 @@ class DeflaterOutputStream extends CompressedOutputStream {
   private byte[] buff;
   protected Deflater deflater;
 
-  public DeflaterOutputStream(CipherOutputStream cipherOutputStream, CompressionLevel compressionLevel, int bufferSize) {
+  public DeflaterOutputStream(CipherOutputStream<?> cipherOutputStream, CompressionLevel compressionLevel, int bufferSize) {
     super(cipherOutputStream);
     deflater = new Deflater(compressionLevel.getLevel(), true);
     buff = new byte[bufferSize];
diff --git a/src/main/java/net/lingala/zip4j/io/outputstream/StoreOutputStream.java b/src/main/java/net/lingala/zip4j/io/outputstream/StoreOutputStream.java
index 563fa6c..7a9b120 100644
--- a/src/main/java/net/lingala/zip4j/io/outputstream/StoreOutputStream.java
+++ b/src/main/java/net/lingala/zip4j/io/outputstream/StoreOutputStream.java
@@ -2,7 +2,7 @@ package net.lingala.zip4j.io.outputstream;
 
 class StoreOutputStream extends CompressedOutputStream {
 
-  public StoreOutputStream(CipherOutputStream cipherOutputStream) {
+  public StoreOutputStream(CipherOutputStream<?> cipherOutputStream) {
     super(cipherOutputStream);
   }
 
diff --git a/src/main/java/net/lingala/zip4j/io/outputstream/ZipOutputStream.java b/src/main/java/net/lingala/zip4j/io/outputstream/ZipOutputStream.java
index fa96aa8..bf585b0 100755
--- a/src/main/java/net/lingala/zip4j/io/outputstream/ZipOutputStream.java
+++ b/src/main/java/net/lingala/zip4j/io/outputstream/ZipOutputStream.java
@@ -190,11 +190,11 @@ public class ZipOutputStream extends OutputStream {
 
   private CompressedOutputStream initializeCompressedOutputStream(ZipParameters zipParameters) throws IOException {
     ZipEntryOutputStream zipEntryOutputStream = new ZipEntryOutputStream(countingOutputStream);
-    CipherOutputStream cipherOutputStream = initializeCipherOutputStream(zipEntryOutputStream, zipParameters);
+    CipherOutputStream<?> cipherOutputStream = initializeCipherOutputStream(zipEntryOutputStream, zipParameters);
     return initializeCompressedOutputStream(cipherOutputStream, zipParameters);
   }
 
-  private CipherOutputStream initializeCipherOutputStream(ZipEntryOutputStream zipEntryOutputStream,
+  private CipherOutputStream<?> initializeCipherOutputStream(ZipEntryOutputStream zipEntryOutputStream,
                                                           ZipParameters zipParameters) throws IOException {
     if (!zipParameters.isEncryptFiles()) {
       return new NoCipherOutputStream(zipEntryOutputStream, zipParameters, null);
@@ -215,7 +215,7 @@ public class ZipOutputStream extends OutputStream {
     }
   }
 
-  private CompressedOutputStream initializeCompressedOutputStream(CipherOutputStream cipherOutputStream,
+  private CompressedOutputStream initializeCompressedOutputStream(CipherOutputStream<?> cipherOutputStream,
                                                                   ZipParameters zipParameters) {
     if (zipParameters.getCompressionMethod() == CompressionMethod.DEFLATE) {
       return new DeflaterOutputStream(cipherOutputStream, zipParameters.getCompressionLevel(), zip4jConfig.getBufferSize());
diff --git a/src/main/java/net/lingala/zip4j/util/FileUtils.java b/src/main/java/net/lingala/zip4j/util/FileUtils.java
index 646250d..cdbb312 100644
--- a/src/main/java/net/lingala/zip4j/util/FileUtils.java
+++ b/src/main/java/net/lingala/zip4j/util/FileUtils.java
@@ -469,11 +469,11 @@ public class FileUtils {
 
     DosFileAttributeView fileAttributeView = Files.getFileAttributeView(file, DosFileAttributeView.class, LinkOption.NOFOLLOW_LINKS);
 
-    //IntelliJ complains that fileAttributes can never be null. But apparently it can.
+    //IntelliJ complains that fileAttributeView can never be null. But apparently it can.
     //See https://github.com/srikanth-lingala/zip4j/issues/435
     //Even the javadoc of Files.getFileAttributeView says it can be null
     //noinspection ConstantConditions
-    if (fileAttributes == null) {
+    if (fileAttributeView == null) {
       return;
     }
 
