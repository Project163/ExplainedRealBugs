diff --git a/src/main/java/net/lingala/zip4j/headers/FileHeaderFactory.java b/src/main/java/net/lingala/zip4j/headers/FileHeaderFactory.java
index 4d9c1dd..077d478 100644
--- a/src/main/java/net/lingala/zip4j/headers/FileHeaderFactory.java
+++ b/src/main/java/net/lingala/zip4j/headers/FileHeaderFactory.java
@@ -110,17 +110,18 @@ public class FileHeaderFactory {
       firstByte = setBit(firstByte, 0);
     }
 
-    if (zipParameters.getCompressionMethod() == CompressionMethod.DEFLATE) {
-      if (zipParameters.getCompressionLevel() == CompressionLevel.NORMAL) {
+    if (CompressionMethod.DEFLATE.equals(zipParameters.getCompressionMethod())) {
+      if (CompressionLevel.NORMAL.equals(zipParameters.getCompressionLevel())) {
         firstByte = unsetBit(firstByte, 1);
         firstByte = unsetBit(firstByte, 2);
-      } else if (zipParameters.getCompressionLevel() == CompressionLevel.MAXIMUM) {
+      } else if (CompressionLevel.MAXIMUM.equals(zipParameters.getCompressionLevel())) {
         firstByte = setBit(firstByte, 1);
         firstByte = unsetBit(firstByte, 2);
-      } else if (zipParameters.getCompressionLevel() == CompressionLevel.FAST) {
+      } else if (CompressionLevel.FAST.equals(zipParameters.getCompressionLevel())) {
         firstByte = unsetBit(firstByte, 1);
         firstByte = setBit(firstByte, 2);
-      } else if (zipParameters.getCompressionLevel() == CompressionLevel.FASTEST) {
+      } else if (CompressionLevel.FASTEST.equals(zipParameters.getCompressionLevel())
+          || CompressionLevel.ULTRA.equals(zipParameters.getCompressionLevel())) {
         firstByte = setBit(firstByte, 1);
         firstByte = setBit(firstByte, 2);
       }
diff --git a/src/main/java/net/lingala/zip4j/model/enums/CompressionLevel.java b/src/main/java/net/lingala/zip4j/model/enums/CompressionLevel.java
index 323f287..24394a3 100644
--- a/src/main/java/net/lingala/zip4j/model/enums/CompressionLevel.java
+++ b/src/main/java/net/lingala/zip4j/model/enums/CompressionLevel.java
@@ -5,7 +5,8 @@ public enum CompressionLevel {
   FASTEST(1),
   FAST(3),
   NORMAL(5),
-  MAXIMUM(7);
+  MAXIMUM(7),
+  ULTRA(9);
 
   private int level;
 
diff --git a/src/test/java/net/lingala/zip4j/ExtractZipFileIT.java b/src/test/java/net/lingala/zip4j/ExtractZipFileIT.java
index ada86e1..7f1be7f 100644
--- a/src/test/java/net/lingala/zip4j/ExtractZipFileIT.java
+++ b/src/test/java/net/lingala/zip4j/ExtractZipFileIT.java
@@ -307,7 +307,7 @@ public class ExtractZipFileIT extends AbstractIT {
 
   @Test
   public void testExtractZipFileWithChineseCharsetGBK() throws IOException {
-    String expactedFileName = "fff - 副本.txt";
+    String expectedFileName = "fff - 副本.txt";
     ZipFile zipFile = new ZipFile(getTestArchiveFromResources("testfile_with_chinese_filename_by_7zip.zip"));
 
     zipFile.setCharset(CHARSET_GBK);
@@ -316,7 +316,7 @@ public class ExtractZipFileIT extends AbstractIT {
     assertThat(zipFile.getFileHeaders()).hasSize(2);
     Set<String> filenameSet = new HashSet<>();
     Files.walk(outputFolder.toPath()).forEach(file -> filenameSet.add(file.getFileName().toString()));
-    assertThat(filenameSet.contains(expactedFileName)).isTrue();
+    assertThat(filenameSet.contains(expectedFileName)).isTrue();
   }
 
   @Test
diff --git a/src/test/java/net/lingala/zip4j/headers/FileHeaderFactoryTest.java b/src/test/java/net/lingala/zip4j/headers/FileHeaderFactoryTest.java
index 92aff42..dc841e9 100644
--- a/src/test/java/net/lingala/zip4j/headers/FileHeaderFactoryTest.java
+++ b/src/test/java/net/lingala/zip4j/headers/FileHeaderFactoryTest.java
@@ -188,6 +188,16 @@ public class FileHeaderFactoryTest {
     assertThat(fileHeader.getLastModifiedTime()).isEqualTo(javaToDosTime(zipParameters.getLastModifiedFileTime()));
   }
 
+  @Test
+  public void testGenerateFileHeaderWithCompressionLeveUltra() throws ZipException {
+    ZipParameters zipParameters = generateZipParameters();
+    zipParameters.setCompressionLevel(CompressionLevel.ULTRA);
+
+    FileHeader fileHeader = fileHeaderFactory.generateFileHeader(zipParameters, false, 0, InternalZipConstants.CHARSET_UTF_8);
+
+    verifyCompressionLevelGridForDeflate(CompressionLevel.ULTRA, fileHeader.getGeneralPurposeFlag()[0]);
+  }
+
   @Test
   public void testGenerateFileHeaderWithCompressionLevelMaximum() throws ZipException {
     ZipParameters zipParameters = generateZipParameters();
@@ -343,18 +353,21 @@ public class FileHeaderFactoryTest {
 
   private void verifyCompressionLevelGridForDeflate(CompressionLevel compressionLevel,
                                                     byte firstByteOfGeneralPurposeBytes) {
-    if (compressionLevel == CompressionLevel.NORMAL) {
+    if (CompressionLevel.NORMAL.equals(compressionLevel)) {
       assertThat(isBitSet(firstByteOfGeneralPurposeBytes, 1)).isFalse();
       assertThat(isBitSet(firstByteOfGeneralPurposeBytes, 2)).isFalse();
-    } else if (compressionLevel == CompressionLevel.MAXIMUM) {
+    } else if (CompressionLevel.MAXIMUM.equals(compressionLevel)) {
       assertThat(isBitSet(firstByteOfGeneralPurposeBytes, 1)).isTrue();
       assertThat(isBitSet(firstByteOfGeneralPurposeBytes, 2)).isFalse();
-    } else if (compressionLevel == CompressionLevel.FAST) {
+    } else if (CompressionLevel.FAST.equals(compressionLevel)) {
       assertThat(isBitSet(firstByteOfGeneralPurposeBytes, 1)).isFalse();
       assertThat(isBitSet(firstByteOfGeneralPurposeBytes, 2)).isTrue();
-    } else if (compressionLevel == CompressionLevel.FASTEST) {
+    } else if (CompressionLevel.FASTEST.equals(compressionLevel)
+        || CompressionLevel.ULTRA.equals(compressionLevel)) {
       assertThat(isBitSet(firstByteOfGeneralPurposeBytes, 1)).isTrue();
       assertThat(isBitSet(firstByteOfGeneralPurposeBytes, 2)).isTrue();
+    } else {
+      throw new RuntimeException("Invalid compression level");
     }
   }
 
