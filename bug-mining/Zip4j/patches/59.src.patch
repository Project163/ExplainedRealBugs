diff --git a/src/main/java/net/lingala/zip4j/headers/HeaderReader.java b/src/main/java/net/lingala/zip4j/headers/HeaderReader.java
index 798fe47..ea6bcc5 100755
--- a/src/main/java/net/lingala/zip4j/headers/HeaderReader.java
+++ b/src/main/java/net/lingala/zip4j/headers/HeaderReader.java
@@ -47,6 +47,7 @@ import java.util.List;
 import static net.lingala.zip4j.headers.HeaderUtil.decodeStringWithCharset;
 import static net.lingala.zip4j.util.BitUtils.isBitSet;
 import static net.lingala.zip4j.util.InternalZipConstants.ENDHDR;
+import static net.lingala.zip4j.util.InternalZipConstants.ZIP_64_NUMBER_OF_ENTRIES_LIMIT;
 import static net.lingala.zip4j.util.InternalZipConstants.ZIP_64_SIZE_LIMIT;
 import static net.lingala.zip4j.util.Zip4jUtil.readFully;
 
@@ -510,7 +511,7 @@ public class HeaderReader {
           counter += 8;
         }
 
-        if (counter < extraDataRecord.getSizeOfData()) {
+        if (counter < extraDataRecord.getSizeOfData() && offsetLocalHeader == ZIP_64_NUMBER_OF_ENTRIES_LIMIT) {
           zip64ExtendedInfo.setDiskNumberStart(rawIO.readIntLittleEndian(extraData, counter));
         }
 
diff --git a/src/main/java/net/lingala/zip4j/io/inputstream/ZipInputStream.java b/src/main/java/net/lingala/zip4j/io/inputstream/ZipInputStream.java
index 30f5e54..c359a36 100755
--- a/src/main/java/net/lingala/zip4j/io/inputstream/ZipInputStream.java
+++ b/src/main/java/net/lingala/zip4j/io/inputstream/ZipInputStream.java
@@ -295,12 +295,7 @@ public class ZipInputStream extends InputStream {
       return -1;
     }
 
-    long compressedSize = localFileHeader.getCompressedSize();
-    if (localFileHeader.getZip64ExtendedInfo() != null) {
-      compressedSize = localFileHeader.getZip64ExtendedInfo().getCompressedSize();
-    }
-
-    return compressedSize - getEncryptionHeaderSize(localFileHeader);
+    return localFileHeader.getCompressedSize() - getEncryptionHeaderSize(localFileHeader);
   }
 
   private int getEncryptionHeaderSize(LocalFileHeader localFileHeader) {
