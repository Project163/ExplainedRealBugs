diff --git a/src/main/java/net/lingala/zip4j/headers/HeaderWriter.java b/src/main/java/net/lingala/zip4j/headers/HeaderWriter.java
index e39a1c4..af3f548 100755
--- a/src/main/java/net/lingala/zip4j/headers/HeaderWriter.java
+++ b/src/main/java/net/lingala/zip4j/headers/HeaderWriter.java
@@ -540,7 +540,10 @@ public class HeaderWriter {
 
       rawIO.writeShortLittleEndian(outputStream, (int) extraDataRecord.getHeader());
       rawIO.writeShortLittleEndian(outputStream, extraDataRecord.getSizeOfData());
-      outputStream.write(extraDataRecord.getData());
+
+      if (extraDataRecord.getSizeOfData() > 0 && extraDataRecord.getData() != null) {
+        outputStream.write(extraDataRecord.getData());
+      }
     }
   }
 
