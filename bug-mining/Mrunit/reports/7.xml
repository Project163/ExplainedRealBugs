<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:41:15 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[MRUNIT-56] 0.8.0 release does not work with Hadoop 0.23</title>
                <link>https://issues.apache.org/jira/browse/MRUNIT-56</link>
                <project id="12311292" key="MRUNIT">MRUnit</project>
                    <description>&lt;p&gt;Unfortunately &lt;a href=&quot;https://issues.apache.org/jira/browse/MRUNIT-31&quot; title=&quot;Support Hadoop 0.22 and 0.23&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MRUNIT-31&quot;&gt;&lt;del&gt;MRUNIT-31&lt;/del&gt;&lt;/a&gt;doesn&apos;t fix this. I get this failure:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;java.lang.IncompatibleClassChangeError: Found interface org.apache.hadoop.mapreduce.TaskInputOutputContext, but class was expected
        at org.apache.hadoop.mrunit.mapreduce.mock.MockContextWrapper.createCommon(MockContextWrapper.java:51)
        at org.apache.hadoop.mrunit.mapreduce.mock.MockMapContextWrapper.create(MockMapContextWrapper.java:65)
        at org.apache.hadoop.mrunit.mapreduce.mock.MockMapContextWrapper.&amp;lt;init&amp;gt;(MockMapContextWrapper.java:57)
        at org.apache.hadoop.mrunit.mapreduce.MapDriver.run(MapDriver.java:195)
        at org.apache.hadoop.mrunit.MapDriverBase.runTest(MapDriverBase.java:185)
        at v5.MaxTemperatureMapperTest.parsesMissingTemperature(MaxTemperatureMapperTest.java:34)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12540975">MRUNIT-56</key>
            <summary>0.8.0 release does not work with Hadoop 0.23</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="brocknoland">Brock Noland</assignee>
                                    <reporter username="tomwhite">Thomas White</reporter>
                        <labels>
                    </labels>
                <created>Thu, 2 Feb 2012 18:43:28 +0000</created>
                <updated>Fri, 2 Mar 2012 05:32:25 +0000</updated>
                            <resolved>Thu, 16 Feb 2012 02:50:03 +0000</resolved>
                                    <version>0.8.0</version>
                                    <fixVersion>0.8.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13199078" author="tomwhite" created="Thu, 2 Feb 2012 18:45:46 +0000"  >&lt;p&gt;The problem is that the context objects changed from abstract classes to interfaces, and method invocation uses different bytecodes for the two, so the approach in MockContextWrapper won&apos;t work.&lt;/p&gt;

&lt;p&gt;It might be possible to use (more) reflection to avoid this, but it might be simpler to publish two artifacts.&lt;/p&gt;</comment>
                            <comment id="13200483" author="brocknoland" created="Sat, 4 Feb 2012 18:07:22 +0000"  >&lt;p&gt;I could be wrong, but the code itself works with both versions but the jar we distribute only works with the version we compiled against.&lt;/p&gt;

&lt;p&gt;From a tarball perspective, we could provide a single tar with two jars inside.  WIth maven, I guess users could select mrunit-0.8.0 or mrunit-0.8.0-hadoop-0.20?&lt;/p&gt;</comment>
                            <comment id="13200633" author="brocknoland" created="Sun, 5 Feb 2012 02:20:34 +0000"  >&lt;p&gt;Via profiles I was able to get a tar.gz file with a version of the code built with and 0.20 and 0.23 branch:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[noland@localhost mrunit-0.8.0-incubating]$ tar -ztvf target/mrunit-0.8.0-incubating-dist.tar.gz  | grep jar
-rw-rw-r-- noland/noland 77811 2012-02-04 20:09 mrunit-0.8.0-incubating/mrunit-0.8.0-incubating-0.23.1-SNAPSHOT.jar
-rw-rw-r-- noland/noland 75681 2012-02-04 20:10 mrunit-0.8.0-incubating/mrunit-0.8.0-incubating-hadoop-0.20.jar
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I used profiles as specified here:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://stackoverflow.com/questions/2132958/ant-to-maven-multiple-build-targets/2140819#2140819&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://stackoverflow.com/questions/2132958/ant-to-maven-multiple-build-targets/2140819#2140819&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;along with the current profiles we had. However, I am not clear on how this will work when we deploy to the maven repo since it appears to do a clean and I had to do mvn package -Phadoop.20 and separately mvn package -Phadoop-0.23 to build the two jars.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;mvn clean deploy -Pdeploy -Pjavadoc
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Next week I should have my maven book back which will probably help.&lt;/p&gt;</comment>
                            <comment id="13201662" author="tomwhite" created="Mon, 6 Feb 2012 22:07:19 +0000"  >&lt;p&gt;&amp;gt; I could be wrong, but the code itself works with both versions but the jar we distribute only works with the version we compiled against. &lt;/p&gt;

&lt;p&gt;That&apos;s correct.&lt;/p&gt;

&lt;p&gt;&amp;gt; From a tarball perspective, we could provide a single tar with two jars inside. WIth maven, I guess users could select mrunit-0.8.0 or mrunit-0.8.0-hadoop-0.20?&lt;/p&gt;

&lt;p&gt;That&apos;s probably the best solution. How about mrunit-0.8.0 and mrunit-hadoop1-0.8.0 for the names?&lt;/p&gt;</comment>
                            <comment id="13201667" author="tomwhite" created="Mon, 6 Feb 2012 22:08:44 +0000"  >&lt;p&gt;Also, it would be good to create a test module to run an integration test against these MRUnit JAR files.&lt;/p&gt;</comment>
                            <comment id="13202063" author="brocknoland" created="Tue, 7 Feb 2012 04:18:32 +0000"  >&lt;p&gt;Attached allows you to build a hadoop 1.0 version of the jar and a 0.23 version. This is not intended for commit.&lt;/p&gt;</comment>
                            <comment id="13202072" author="brocknoland" created="Tue, 7 Feb 2012 04:44:46 +0000"  >&lt;p&gt;Using profiles (attached patch) it looks like it&apos;s possible to build the two jars needed with two separate invocations of the mvn package. The steps are as follows:&lt;/p&gt;

&lt;p&gt;$ mvn clean package -Phadoop-1.0 -Dhadoop.version=1.0.0&lt;br/&gt;
$ mv target/mrunit-0.8.0-incubating-hadoop-1.0.jar /tmp/&lt;br/&gt;
$ mvn clean assembly:assembly verify -Phadoop-0.23 -Dhadoop.version=0.23.1-SNAPSHOT&lt;br/&gt;
$ mv /tmp/mrunit-0.8.0-incubating-hadoop-1.0.jar target/&lt;br/&gt;
$ mvn assembly:assembly verify -Phadoop-0.23 -Dhadoop.version=0.23.1-SNAPSHOT&lt;br/&gt;
$ mvn deploy -Pdeploy -Pjavadoc -Dhadoop.version=0.23.1-SNAPSHOT&lt;/p&gt;

&lt;p&gt;This gives you a tar which contain two builds of mrunit:&lt;/p&gt;

&lt;p&gt;mrunit-0.8.0-incubating-hadoop-1.0.jar  (for 1.0)&lt;br/&gt;
mrunit-0.8.0-incubating.jar   (for 0.23.1)&lt;/p&gt;

&lt;p&gt;The maven repo contains the archive but not the two jar files directly. It only contains mrunit-0.8.0-incubating.jar&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://repository.apache.org/content/repositories/orgapachemrunit-205/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/repositories/orgapachemrunit-205/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I think this gives us what we want but I am guessing there is a much better way of doing this.&lt;/p&gt;</comment>
                            <comment id="13202073" author="brocknoland" created="Tue, 7 Feb 2012 04:45:57 +0000"  >&lt;p&gt;&amp;gt; Also, it would be good to create a test module to run an integration test against these MRUnit JAR files.&lt;/p&gt;

&lt;p&gt;There is this:&lt;/p&gt;

&lt;p&gt;src/test/sh/run-artifact-unit-tests.sh&lt;/p&gt;

&lt;p&gt;but it should be modified to take the mrunit jar and hadoop jars on the command line as opposed to assuming them.&lt;/p&gt;</comment>
                            <comment id="13203017" author="tucu00" created="Wed, 8 Feb 2012 00:21:57 +0000"  >&lt;p&gt;I&apos;d suggest we publish 2 different versions for the same groupId/artifact, with the version of hadoop encoded in the version. By doing this users will get Maven to do dependency version resolution, otherwise for Maven the JARs would be for different entities and you could potentially end up with the 2 JARs in your project.&lt;/p&gt;</comment>
                            <comment id="13203780" author="brocknoland" created="Wed, 8 Feb 2012 17:55:14 +0000"  >&lt;p&gt;OK, so we could change our release process to do the following:&lt;/p&gt;

&lt;p&gt;Create a branch mrunit-X.Y.Z &lt;br/&gt;
Copy the branch to mrunit-hadoop-1.0-X.Y.Z&lt;br/&gt;
Change the pom version to mrunit-hadoop-1.0-X.Y.Z&lt;br/&gt;
Compile mrunit-X.Y.Z against 0.23 or newer&lt;br/&gt;
Compile mrunit-hadoop-1.0-X.Y.Z against hadoop 1.X or newer&lt;br/&gt;
Package and deploy to maven both versions&lt;/p&gt;

&lt;p&gt;Thoughts? Easier method?&lt;/p&gt;</comment>
                            <comment id="13209088" author="brocknoland" created="Thu, 16 Feb 2012 02:50:04 +0000"  >&lt;p&gt;1244827 in 0.8 and 1244828 in trunk&lt;/p&gt;</comment>
                            <comment id="13220678" author="jdonofrio" created="Fri, 2 Mar 2012 05:23:47 +0000"  >&lt;p&gt;Shouldnt the version for 0.23 be changed from &amp;lt;specificHadoopVersion&amp;gt;0.23.1-SNAPSHOT&amp;lt;/specificHadoopVersion&amp;gt; to &amp;lt;specificHadoopVersion&amp;gt;0.23.1&amp;lt;/specificHadoopVersion&amp;gt;&lt;/p&gt;</comment>
                            <comment id="13220681" author="brocknoland" created="Fri, 2 Mar 2012 05:32:25 +0000"  >&lt;p&gt;Yes, now that it has released we should update the version...&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12513568" name="mrunit-pom-test.diff" size="2336" author="brocknoland" created="Tue, 7 Feb 2012 04:18:32 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>226328</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 38 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0iytj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>108735</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>