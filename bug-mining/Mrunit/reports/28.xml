<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:41:22 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[MRUNIT-159] MRUnit not compiling with hadoop 0.23.3</title>
                <link>https://issues.apache.org/jira/browse/MRUNIT-159</link>
                <project id="12311292" key="MRUNIT">MRUnit</project>
                    <description>&lt;p&gt;I tried to write test using mrunit 1.0.0 ( i need to init cache, which is unavaliable in already relased versions)&lt;/p&gt;

&lt;p&gt;when I run my code I get:&lt;br/&gt;
java.lang.IncompatibleClassChangeError: Found interface org.apache.hadoop.mapreduce.TaskInputOutputContext, but class was expected&lt;br/&gt;
	at org.apache.hadoop.mrunit.internal.mapreduce.AbstractMockContextWrapper.createCommon(AbstractMockContextWrapper.java:53)&lt;/p&gt;


&lt;p&gt;I read other issues like &lt;a href=&quot;https://issues.apache.org/jira/browse/MRUNIT-56&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/MRUNIT-56&lt;/a&gt; and decided to recompile mrunit.&lt;br/&gt;
I&apos;ve downloaded source, and then:&lt;/p&gt;

&lt;p&gt;mvn install -DskipTests&lt;br/&gt;
Build succes&lt;/p&gt;

&lt;p&gt;mvn install -DskipTests -Dhadoop.version=2&lt;br/&gt;
Build success&lt;/p&gt;

&lt;p&gt;tried both output version with my code:&lt;br/&gt;
mrunit-1.0.0-SNAPSHOT-hadoop1.jar&lt;br/&gt;
mrunit-1.0.0-SNAPSHOT-hadoop2.jar &lt;/p&gt;

&lt;p&gt;but was still getting exception&lt;/p&gt;

&lt;p&gt;I&apos;ve changed pom.xml specificHadoopVersion to:&lt;br/&gt;
&amp;lt;specificHadoopVersion&amp;gt;0.23.3&amp;lt;/specificHadoopVersion&amp;gt;&lt;/p&gt;

&lt;p&gt;and then:&lt;/p&gt;

&lt;p&gt;mvn clean&lt;br/&gt;
mvn install -DskipTests -Dhadoop.version=2&lt;/p&gt;

&lt;p&gt;and there are compilation errors:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; COMPILATION ERROR : &lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; -------------------------------------------------------------&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; /home/kuba/studia/magisterka/mrunit/src/main/java/org/apache/hadoop/mrunit/TestDriver.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;464,24&amp;#93;&lt;/span&gt; error: cannot find symbol&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt;  class DistributedCache&lt;br/&gt;
/home/kuba/studia/magisterka/mrunit/src/main/java/org/apache/hadoop/mrunit/TestDriver.java:&lt;span class=&quot;error&quot;&gt;&amp;#91;478,24&amp;#93;&lt;/span&gt; error: cannot find symbol&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; 2 errors &lt;/p&gt;


&lt;p&gt;that&apos;s because initDistributedCache method uses DistributedCache.addLocalFiles(), which is unavaliable in Hadoop 0.23.3&lt;/p&gt;


&lt;p&gt;I tried to fix it, but I&apos;m new to hadoop ant havent succeed yet, any help, please?&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12615598">MRUNIT-159</key>
            <summary>MRUnit not compiling with hadoop 0.23.3</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dbeech">Dave Beech</assignee>
                                    <reporter username="pawloch">Jakub</reporter>
                        <labels>
                    </labels>
                <created>Sat, 10 Nov 2012 12:05:21 +0000</created>
                <updated>Mon, 12 Nov 2012 16:48:19 +0000</updated>
                            <resolved>Mon, 12 Nov 2012 16:48:19 +0000</resolved>
                                    <version>1.0.0</version>
                                    <fixVersion>1.0.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13494726" author="pawloch" created="Sat, 10 Nov 2012 16:49:39 +0000"  >&lt;p&gt;I&apos;ve got workaround:&lt;/p&gt;

&lt;p&gt;I completely removed content of TestDriver.initDistributedCache(), &lt;/p&gt;

&lt;p&gt;and&lt;/p&gt;

&lt;p&gt;Instead of using:&lt;br/&gt;
URI[] localURIs = context.getCacheFiles();&lt;/p&gt;

&lt;p&gt;I do:&lt;br/&gt;
URI[] localURIs = StringUtils.stringToURI(context.getConfiguration().getStrings(MRJobConfig.CACHE_FILES));&lt;br/&gt;
, and &lt;/p&gt;

&lt;p&gt;when I initalize my cache witch :&lt;br/&gt;
mrd.withCacheFile(new URI(&quot;file:///path/to/dict.txt&quot;));&lt;/p&gt;



&lt;p&gt;I tried adding in org.apache.hadoop.mrunit.internal.mapreduce.AbstractMockContextWrapper.createCommon something like:&lt;br/&gt;
  try{&lt;br/&gt;
    when(context.getCacheFiles()).thenAnswer(new Answer&amp;lt;URI[]&amp;gt;() {&lt;br/&gt;
        @Override&lt;br/&gt;
        public URI[] answer(final InvocationOnMock invocation) throws IOException &lt;/p&gt;
{
        	return DistributedCache.getCacheFiles(contextDriver.getConfiguration());
		}
&lt;p&gt;      });&lt;br/&gt;
    } catch (IOException e) &lt;/p&gt;
{
        throw new RuntimeException(e);
      }

&lt;p&gt;but it doesn&apos;t help&lt;/p&gt;


</comment>
                            <comment id="13494869" author="hudson" created="Sun, 11 Nov 2012 12:47:29 +0000"  >&lt;p&gt;Integrated in mrunit-trunk #432 (See &lt;a href=&quot;https://builds.apache.org/job/mrunit-trunk/432/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/mrunit-trunk/432/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/MRUNIT-159&quot; title=&quot;MRUnit not compiling with hadoop 0.23.3&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MRUNIT-159&quot;&gt;&lt;del&gt;MRUNIT-159&lt;/del&gt;&lt;/a&gt;: MRUnit not compiling with hadoop 0.23.3 (Revision 27b8505da44394456f4ae3d91220683e2e5977b5)&lt;/p&gt;

&lt;p&gt;     Result = SUCCESS&lt;br/&gt;
dbeech : &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=mrunit.git&amp;amp;a=commit&amp;amp;h=27b8505da44394456f4ae3d91220683e2e5977b5&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=mrunit.git&amp;amp;a=commit&amp;amp;h=27b8505da44394456f4ae3d91220683e2e5977b5&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;src/main/java/org/apache/hadoop/mrunit/internal/util/DistCacheUtils.java&lt;/li&gt;
	&lt;li&gt;src/main/java/org/apache/hadoop/mrunit/TestDriver.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13494870" author="dbeech" created="Sun, 11 Nov 2012 12:47:59 +0000"  >&lt;p&gt;Hi Jakub - thanks for reporting this. I&apos;ve replaced the use of the missing addLocalFiles and addLocalArchives methods with our own helper methods which set the cache config parameters directly. Can you test this and let me know if it solves your issue?&lt;/p&gt;</comment>
                            <comment id="13495402" author="pawloch" created="Mon, 12 Nov 2012 16:48:01 +0000"  >&lt;p&gt;Yes, it solves my issues, thanks.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>256897</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 1 week, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0iyn3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>108706</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>