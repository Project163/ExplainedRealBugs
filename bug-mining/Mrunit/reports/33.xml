<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 20:41:25 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[MRUNIT-161] some distributed cache apis not working - JobContext getCacheArchives()</title>
                <link>https://issues.apache.org/jira/browse/MRUNIT-161</link>
                <project id="12311292" key="MRUNIT">MRUnit</project>
                    <description>&lt;p&gt;I&apos;m using the new MRUnit method withCacheArchive available in 1.0.0.&lt;/p&gt;

&lt;p&gt;DistributedCache.getLocalCacheArchives(conf) returns a non-empty array, however&lt;/p&gt;

&lt;p&gt;org.apache.hadoop.mapreduce.JobContext.getCacheArchives()&lt;/p&gt;

&lt;p&gt;in the mapper returns null. It seems that the context mock doesn&apos;t have these methods implemented?&lt;/p&gt;

&lt;p&gt;I&apos;m using hadoop2, where getLocalCacheArchives is listed as deprecated.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12617149">MRUNIT-161</key>
            <summary>some distributed cache apis not working - JobContext getCacheArchives()</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="brocknoland">Brock Noland</assignee>
                                    <reporter username="phunt">Patrick D. Hunt</reporter>
                        <labels>
                    </labels>
                <created>Wed, 21 Nov 2012 17:58:59 +0000</created>
                <updated>Mon, 7 Jan 2013 20:18:31 +0000</updated>
                            <resolved>Mon, 7 Jan 2013 20:09:25 +0000</resolved>
                                    <version>1.0.0</version>
                                    <fixVersion>1.0.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                                                            <comments>
                            <comment id="13502791" author="brocknoland" created="Thu, 22 Nov 2012 14:21:05 +0000"  >&lt;p&gt;There are bunch of methods relating to Dcache in JobContextImpl. They look easy enough to implement, we&apos;d just need the configuration object to do so.&lt;/p&gt;

&lt;p&gt;  public URI[] getCacheArchives() throws IOException &lt;/p&gt;
{
    return DistributedCache.getCacheArchives(conf);
  }</comment>
                            <comment id="13503507" author="brocknoland" created="Sun, 25 Nov 2012 16:24:36 +0000"  >&lt;p&gt;Here is a patch which implements most of the requested functionality. I do, however, wonder about the getLocal* methods because we don&apos;t seem to be setting &quot;local&quot; files anywhere.&lt;/p&gt;</comment>
                            <comment id="13503508" author="brocknoland" created="Sun, 25 Nov 2012 16:26:15 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dbeech&quot; class=&quot;user-hover&quot; rel=&quot;dbeech&quot;&gt;dbeech&lt;/a&gt; Do you know the difference is between the getLocal*Cache* and getCache* methods? It looks like they are using a different configuration key.&lt;/p&gt;</comment>
                            <comment id="13503743" author="dbeech" created="Mon, 26 Nov 2012 11:48:10 +0000"  >&lt;p&gt;the getLocal* methods are what the user would call in a mapper or reducer class to access the cache files that have been &quot;localized&quot;. That&apos;s to say, copied to local disk into the task&apos;s working area by the mapreduce framework. &lt;/p&gt;

&lt;p&gt;We do set the &quot;local&quot; files in mrunit - it&apos;s done in TestDriver&apos;s initDistributedCache method.&lt;/p&gt;

&lt;p&gt;I&apos;ll take a look at the patch later - thanks Brock. &lt;/p&gt;</comment>
                            <comment id="13503752" author="brocknoland" created="Mon, 26 Nov 2012 12:16:57 +0000"  >&lt;p&gt;Ok cool, then the contents of that patch should work though we might consider allowing a configuration object in the driver constructors. &lt;/p&gt;




</comment>
                            <comment id="13509860" author="dbeech" created="Tue, 4 Dec 2012 17:02:49 +0000"  >&lt;p&gt;Hi Brock - I applied your patch but then the code won&apos;t build against hadoop 1. o.a.h.mapreduce.TaskInputOutputContext is missing some methods, like getSymlink&lt;/p&gt;</comment>
                            <comment id="13509877" author="brocknoland" created="Tue, 4 Dec 2012 17:16:51 +0000"  >&lt;p&gt;OK I&apos;ll see if I can get it compiling against hadoop 1.&lt;/p&gt;</comment>
                            <comment id="13538291" author="brocknoland" created="Fri, 21 Dec 2012 18:47:35 +0000"  >&lt;p&gt;Damn, it looks like the incompatibilies between hadoop1 and hadoop2 go well beyond the class -&amp;gt; interface chances AbstractMockContextWrapper was created to get around. None of the methods needed to support this fix are in hadoop1 ie context.getCacheArchives, context.getCacheFiles, etc.&lt;/p&gt;</comment>
                            <comment id="13538297" author="brocknoland" created="Fri, 21 Dec 2012 18:51:35 +0000"  >&lt;p&gt;Perhaps we should take AbstractMockContextWrapper and associated classes and create two seperate modules for hadoop1 and hadoop2. Then depending on what profile was picked it would pull in the appropriate module. The two modules could be kept in separate branches context-hadoop1 and context-hadoop2.&lt;/p&gt;</comment>
                            <comment id="13546220" author="brocknoland" created="Mon, 7 Jan 2013 20:09:25 +0000"  >&lt;p&gt;I have committed this patch to trunk and trunk-hadoop1. I removed the portions of it which don&apos;t compile against hadoop1 (ie the real meat of the patch) in &lt;a href=&quot;https://issues.apache.org/jira/browse/MRUNIT-174&quot; title=&quot;Remove portions of MRUNIT-161 which don&amp;#39;t compile on trunk-hadoop1&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MRUNIT-174&quot;&gt;&lt;del&gt;MRUNIT-174&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13546222" author="brocknoland" created="Mon, 7 Jan 2013 20:09:50 +0000"  >&lt;p&gt;If there are more items needed, please open a new JIRA linked to this one.&lt;/p&gt;</comment>
                            <comment id="13546229" author="hudson" created="Mon, 7 Jan 2013 20:18:31 +0000"  >&lt;p&gt;Integrated in mrunit-trunk #700 (See &lt;a href=&quot;https://builds.apache.org/job/mrunit-trunk/700/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/mrunit-trunk/700/&lt;/a&gt;)&lt;br/&gt;
    &lt;a href=&quot;https://issues.apache.org/jira/browse/MRUNIT-161&quot; title=&quot;some distributed cache apis not working - JobContext getCacheArchives()&quot; class=&quot;issue-link&quot; data-issue-key=&quot;MRUNIT-161&quot;&gt;&lt;del&gt;MRUNIT-161&lt;/del&gt;&lt;/a&gt;: some distributed cache apis not working - JobContext getCacheArchives() (Revision 5bc1086432700b27cb1a012bd3e3449f68b1174d)&lt;/p&gt;

&lt;p&gt;     Result = FAILURE&lt;br/&gt;
brock : &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=mrunit.git&amp;amp;a=commit&amp;amp;h=5bc1086432700b27cb1a012bd3e3449f68b1174d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=mrunit.git&amp;amp;a=commit&amp;amp;h=5bc1086432700b27cb1a012bd3e3449f68b1174d&lt;/a&gt;&lt;br/&gt;
Files : &lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;src/main/java/org/apache/hadoop/mrunit/mapreduce/MapReduceDriver.java&lt;/li&gt;
	&lt;li&gt;src/test/java/org/apache/hadoop/mrunit/mapreduce/TestDistributedCache.java&lt;/li&gt;
	&lt;li&gt;src/main/java/org/apache/hadoop/mrunit/internal/mapreduce/MockMapContextWrapper.java&lt;/li&gt;
	&lt;li&gt;src/main/java/org/apache/hadoop/mrunit/TestDriver.java&lt;/li&gt;
	&lt;li&gt;src/main/java/org/apache/hadoop/mrunit/MapReduceDriver.java&lt;/li&gt;
	&lt;li&gt;src/main/java/org/apache/hadoop/mrunit/mapreduce/MapDriver.java&lt;/li&gt;
	&lt;li&gt;src/main/java/org/apache/hadoop/mrunit/PipelineMapReduceDriver.java&lt;/li&gt;
	&lt;li&gt;src/main/java/org/apache/hadoop/mrunit/mapreduce/ReduceDriver.java&lt;/li&gt;
	&lt;li&gt;src/main/java/org/apache/hadoop/mrunit/internal/mapreduce/MockReduceContextWrapper.java&lt;/li&gt;
	&lt;li&gt;src/main/java/org/apache/hadoop/mrunit/internal/mapreduce/AbstractMockContextWrapper.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12554798" name="MRUNIT-161-0.patch" size="18663" author="brocknoland" created="Sun, 25 Nov 2012 16:24:36 +0000"/>
                    </attachments>
                <subtasks>
                            <subtask id="12626407">MRUNIT-174</subtask>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>259350</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 45 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0loiv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124623</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>