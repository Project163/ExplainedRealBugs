diff --git a/src/main/java/org/apache/sling/feature/cpconverter/handlers/AbstractConfigurationEntryHandler.java b/src/main/java/org/apache/sling/feature/cpconverter/handlers/AbstractConfigurationEntryHandler.java
index 4222219..1bbba74 100644
--- a/src/main/java/org/apache/sling/feature/cpconverter/handlers/AbstractConfigurationEntryHandler.java
+++ b/src/main/java/org/apache/sling/feature/cpconverter/handlers/AbstractConfigurationEntryHandler.java
@@ -103,7 +103,7 @@ abstract class AbstractConfigurationEntryHandler extends AbstractRegexEntryHandl
         }
         // check for old format for factory configurations (using dash instead of tilde)
         idx = pid.indexOf('-');
-        if ( idx != -1 ) {
+        if ( idx != -1 && pid.indexOf('~') == -1 ) {
             pid = pid.substring(0, idx).concat("~").concat(pid.substring(idx + 1));
         }
         return pid;
diff --git a/src/test/java/org/apache/sling/feature/cpconverter/handlers/AbstractConfigurationEntryHandlerTest.java b/src/test/java/org/apache/sling/feature/cpconverter/handlers/AbstractConfigurationEntryHandlerTest.java
index 7db5a4f..ca8f2b3 100644
--- a/src/test/java/org/apache/sling/feature/cpconverter/handlers/AbstractConfigurationEntryHandlerTest.java
+++ b/src/test/java/org/apache/sling/feature/cpconverter/handlers/AbstractConfigurationEntryHandlerTest.java
@@ -27,5 +27,6 @@ public class AbstractConfigurationEntryHandlerTest {
         assertEquals("org.apache.sling.Component", AbstractConfigurationEntryHandler.extractId("apath/org.apache.sling.Component"));
         assertEquals("org.apache.sling.Component~factory", AbstractConfigurationEntryHandler.extractId("org.apache.sling.Component~factory"));
         assertEquals("org.apache.sling.Component~factory", AbstractConfigurationEntryHandler.extractId("org.apache.sling.Component-factory"));
+        assertEquals("org.apache.sling.Component~factory-a", AbstractConfigurationEntryHandler.extractId("org.apache.sling.Component~factory-a"));
     }
 }
