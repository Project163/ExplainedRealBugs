diff --git a/src/main/java/org/apache/sling/feature/cpconverter/ContentPackage2FeatureModelConverter.java b/src/main/java/org/apache/sling/feature/cpconverter/ContentPackage2FeatureModelConverter.java
index 4094db2..7dff3a7 100644
--- a/src/main/java/org/apache/sling/feature/cpconverter/ContentPackage2FeatureModelConverter.java
+++ b/src/main/java/org/apache/sling/feature/cpconverter/ContentPackage2FeatureModelConverter.java
@@ -27,11 +27,6 @@ import java.util.Map;
 import java.util.Set;
 import java.util.concurrent.ConcurrentHashMap;
 
-import org.apache.jackrabbit.vault.fs.api.DumpContext;
-import org.apache.jackrabbit.vault.fs.api.ImportMode;
-import org.apache.jackrabbit.vault.fs.api.PathFilterSet;
-import org.apache.jackrabbit.vault.fs.config.DefaultWorkspaceFilter;
-import org.apache.jackrabbit.vault.fs.filter.DefaultPathFilter;
 import org.apache.jackrabbit.vault.fs.io.Archive;
 import org.apache.jackrabbit.vault.fs.io.Archive.Entry;
 import org.apache.jackrabbit.vault.packaging.CyclicDependencyException;
@@ -269,34 +264,7 @@ public class ContentPackage2FeatureModelConverter extends BaseVaultPackageScanne
         mainPackageAssembler.mergeFilters(vaultPackage.getMetaInf().getFilter());
 
         // add the metadata-only package one to the main package with overriden filter
-        DefaultWorkspaceFilter filter = new DefaultWorkspaceFilter();
-        PathFilterSet pfs = new PathFilterSet();
-        DefaultPathFilter dpf = new DefaultPathFilter() {
-            
-           @Override
-           public boolean matches(String path) {
-               return true;
-           }
-
-           @Override
-           public void dump(DumpContext ctx, boolean isLast) {
-               ctx.println(isLast, "ALL");
-           }
-
-           @Override
-           public boolean isAbsolute() {
-               return true;
-           }
-           
-           @Override
-           public String getPattern() {
-               return ".*";
-           }
-        };
-        pfs.addExclude(dpf);
-        pfs.setImportMode(ImportMode.MERGE);
-        filter.add(pfs);
-        File clonedPackage = VaultPackageAssembler.create(vaultPackage, filter).createPackage();
+        File clonedPackage = VaultPackageAssembler.createSynthetic(vaultPackage);
         mainPackageAssembler.addEntry(path, clonedPackage);
     }
 
diff --git a/src/main/java/org/apache/sling/feature/cpconverter/vltpkg/SyntheticPathFilter.java b/src/main/java/org/apache/sling/feature/cpconverter/vltpkg/SyntheticPathFilter.java
new file mode 100644
index 0000000..f3f8265
--- /dev/null
+++ b/src/main/java/org/apache/sling/feature/cpconverter/vltpkg/SyntheticPathFilter.java
@@ -0,0 +1,44 @@
+/*
+ * Licensed to the Apache Software Foundation (ASF) under one or more
+ * contributor license agreements. See the NOTICE file distributed with this
+ * work for additional information regarding copyright ownership. The ASF
+ * licenses this file to You under the Apache License, Version 2.0 (the
+ * "License"); you may not use this file except in compliance with the License.
+ * You may obtain a copy of the License at
+ *
+ * http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
+ * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
+ * License for the specific language governing permissions and limitations under
+ * the License.
+ */
+package org.apache.sling.feature.cpconverter.vltpkg;
+
+import org.apache.jackrabbit.vault.fs.api.DumpContext;
+import org.apache.jackrabbit.vault.fs.filter.DefaultPathFilter;
+
+final class SyntheticPathFilter extends DefaultPathFilter {
+
+    @Override
+    public boolean matches(String path) {
+        return true;
+    }
+
+    @Override
+    public void dump(DumpContext ctx, boolean isLast) {
+        ctx.println(isLast, "ALL");
+    }
+
+    @Override
+    public boolean isAbsolute() {
+        return true;
+    }
+
+    @Override
+    public String getPattern() {
+        return ".*";
+    }
+
+}
diff --git a/src/main/java/org/apache/sling/feature/cpconverter/vltpkg/VaultPackageAssembler.java b/src/main/java/org/apache/sling/feature/cpconverter/vltpkg/VaultPackageAssembler.java
index f24f2d9..b6cb964 100644
--- a/src/main/java/org/apache/sling/feature/cpconverter/vltpkg/VaultPackageAssembler.java
+++ b/src/main/java/org/apache/sling/feature/cpconverter/vltpkg/VaultPackageAssembler.java
@@ -28,6 +28,7 @@ import java.util.Properties;
 import java.util.regex.Pattern;
 
 import org.apache.commons.io.IOUtils;
+import org.apache.jackrabbit.vault.fs.api.ImportMode;
 import org.apache.jackrabbit.vault.fs.api.PathFilterSet;
 import org.apache.jackrabbit.vault.fs.api.WorkspaceFilter;
 import org.apache.jackrabbit.vault.fs.config.DefaultWorkspaceFilter;
@@ -58,12 +59,22 @@ public class VaultPackageAssembler implements EntryHandler {
     private static final File TMP_DIR = new File(System.getProperty("java.io.tmpdir"), "syntethic-content-packages");
 
     private static final Pattern OSGI_BUNDLE_PATTERN = Pattern.compile("(jcr_root)?/apps/[^/]+/install(\\.([^/]+))?/.+\\.jar");
-    
+
     public static VaultPackageAssembler create(VaultPackage vaultPackage) {
         return create(vaultPackage, vaultPackage.getMetaInf().getFilter());
     }
 
-    public static VaultPackageAssembler create(VaultPackage vaultPackage, WorkspaceFilter filter) {
+    public static File createSynthetic(VaultPackage vaultPackage) throws Exception {
+        DefaultWorkspaceFilter filter = new DefaultWorkspaceFilter();
+        PathFilterSet filterSet = new PathFilterSet();
+        SyntheticPathFilter pathFilter = new SyntheticPathFilter();
+        filterSet.addExclude(pathFilter);
+        filterSet.setImportMode(ImportMode.MERGE);
+        filter.add(filterSet);
+        return create(vaultPackage, filter).createPackage();
+    }
+
+    private static VaultPackageAssembler create(VaultPackage vaultPackage, WorkspaceFilter filter) {
         File storingDirectory = new File(TMP_DIR, vaultPackage.getFile().getName() + "-deflated");
         // avoid any possible Stream is not a content package. Missing 'jcr_root' error
         File jcrRootDirectory = new File(storingDirectory, JCR_ROOT_DIR_NAME);
