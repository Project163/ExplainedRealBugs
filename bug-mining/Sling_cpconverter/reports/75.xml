<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:36:40 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SLING-9953] ACEs on/below user nodes are ignored upon conversion</title>
                <link>https://issues.apache.org/jira/browse/SLING-9953</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;I had a look at the cp-feature-model-converter in the light of &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-9692&quot; title=&quot;Add support for principal-based access control entries&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-9692&quot;&gt;&lt;del&gt;SLING-9692&lt;/del&gt;&lt;/a&gt; and found a surprising comment pointing to &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-8561&quot; title=&quot;ACLs on service users should be ignored because of randomised node names&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-8561&quot;&gt;&lt;del&gt;SLING-8561&lt;/del&gt;&lt;/a&gt;:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-comment&quot;&gt;// clean the unneeded ACLs, see SLING-8561&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;code here:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/blob/master/src/main/java/org/apache/sling/feature/cpconverter/acl/DefaultAclManager.java#L146-L153&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/blob/master/src/main/java/org/apache/sling/feature/cpconverter/acl/DefaultAclManager.java#L146-L153&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;what it does in fact is omit any kind of permission setup that is defined for the service users home node. that&apos;s quite a serious bug IMHO.... and on top of that unnecessary because Sling repo-init allows to define those kind of ACEs using the &lt;tt&gt;home(userid)&lt;/tt&gt; notation (see &lt;a href=&quot;https://sling.apache.org/documentation/bundles/repository-initialization.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://sling.apache.org/documentation/bundles/repository-initialization.html&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;and btw: what does &lt;em&gt;unneeded ACLs&lt;/em&gt; mean? they are for sure not &apos;unneeded&apos; and omitting them will essentially result in an invalid permission setup (and thus break the feature using the service login).&lt;/p&gt;

&lt;p&gt;cc: &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cziegeler&quot; class=&quot;user-hover&quot; rel=&quot;cziegeler&quot;&gt;cziegeler&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=karlpauls&quot; class=&quot;user-hover&quot; rel=&quot;karlpauls&quot;&gt;karlpauls&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dsuess&quot; class=&quot;user-hover&quot; rel=&quot;dsuess&quot;&gt;dsuess&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13343515">SLING-9953</key>
            <summary>ACEs on/below user nodes are ignored upon conversion</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="karlpauls">Karl Pauls</assignee>
                                    <reporter username="angela">Angela Schreiber</reporter>
                        <labels>
                    </labels>
                <created>Tue, 1 Dec 2020 10:24:42 +0000</created>
                <updated>Mon, 17 May 2021 11:38:45 +0000</updated>
                            <resolved>Thu, 14 Jan 2021 17:31:08 +0000</resolved>
                                                    <fixVersion>Content-Package to Feature Model Converter 1.1.0</fixVersion>
                                    <component>Content-Package to Feature Model Converter</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17241493" author="dsuess" created="Tue, 1 Dec 2020 12:45:21 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=angela&quot; class=&quot;user-hover&quot; rel=&quot;angela&quot;&gt;angela&lt;/a&gt; - IIRC the background of &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-8561&quot; title=&quot;ACLs on service users should be ignored because of randomised node names&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-8561&quot;&gt;&lt;del&gt;SLING-8561&lt;/del&gt;&lt;/a&gt; was about legacy users from old AEM versions predating system users which due to the way these users were created in the past contained acls for the access on the service user itself (esp to be able to modify profile, manipulate password or set impersonators).&lt;br/&gt;
I am not sure how ommitting dedicated creation of those ACLs would cause a broken login feature as those ACLs are not set for other service users - this code does not remove ACLs that are generated by the service user creation it just ommits explicit acl creation found on the service users node.&lt;/p&gt;</comment>
                            <comment id="17241502" author="anchela" created="Tue, 1 Dec 2020 12:58:50 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dsuess&quot; class=&quot;user-hover&quot; rel=&quot;dsuess&quot;&gt;dsuess&lt;/a&gt;, service users by default don&apos;t have any access control setup created upon user-creation in the user manager (the corresponding action ignores service users). howeveer, some service users actually do need some sort of access to their home (read or write or full access), because of the nature of the tasks the corresponding service is performing. it has nothing to do with login.....&lt;br/&gt;
that&apos;s why i think it&apos;s a bug to ignore those entries.&lt;/p&gt;</comment>
                            <comment id="17242135" author="anchela" created="Wed, 2 Dec 2020 08:11:29 +0000"  >&lt;p&gt;note: i have the impression that this actually not only applies to the target service user home itself (e.g. a service user being granted access to its own home node). it might go further if a given service user was granted access to some other user/group home.... while this might not be super common, i suspect that this was the reason for &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-8586&quot; title=&quot;[cp2fm] &amp;quot;create service user&amp;quot; repoinit instruction throws javax.jcr.nodetype.ConstraintViolationException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-8586&quot;&gt;&lt;del&gt;SLING-8586&lt;/del&gt;&lt;/a&gt;  that lead to the bogus intermediate path creation (see &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-9961&quot; title=&quot;DefaultAclManager: redundant creation of intermediate path&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-9961&quot;&gt;&lt;del&gt;SLING-9961&lt;/del&gt;&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;if it is not possible during execution of the converter to determine the ID of another user to properly construct the &lt;tt&gt;home(userId)subpath&lt;/tt&gt; statements (the name of the user node usually is an arbitrary string and doesn&apos;t reflect the identifier), the converter either has to abort or log an error and omit the entries that cannot be processed.&lt;/p&gt;

&lt;p&gt;so: user/group nodes need to be identified as such and treated accordingly. also note that the path to all user/group nodes is a configuration option in Jackrabbit Oak that must not be hardcoded (unless the feature is designed to only work with one specific application or setup.... in this case it needs to be documented).&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="13324463">SLING-9692</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="13343622">SLING-9959</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13343791">SLING-9966</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 49 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0l328:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>