<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:36:54 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SLING-10468] Converted content package is missing some .content.xml</title>
                <link>https://issues.apache.org/jira/browse/SLING-10468</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kpauls&quot; class=&quot;user-hover&quot; rel=&quot;kpauls&quot;&gt;kpauls&lt;/a&gt;, when trying to install the converted content package as attached to&#160; &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-10467&quot; title=&quot;Converted content package referres to paths moved to repo-init&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-10467&quot;&gt;&lt;del&gt;SLING-10467&lt;/del&gt;&lt;/a&gt; the import failed with &lt;tt&gt;ConstraintViolationException&lt;/tt&gt; because the intermediate nodes for the demo-cp group and the regular user does no longer come with a &lt;em&gt;.content.xml&lt;/em&gt; defining it&apos;s node type and jackrabbit fvault resorting to it&apos;s &lt;em&gt;nt:folder&lt;/em&gt; default, which is not allowed by &lt;tt&gt;rep:AuthorizableFolder&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;In order to exclude the possibility that this is caused by the &lt;tt&gt;rep:policy&lt;/tt&gt; node attached to the user/group folder nodes containing an ACE for one of the service users in the package, I created a slightly modified package that doesn&apos;t come with a AC policy at &lt;em&gt;/home/groups/demo-cp&lt;/em&gt; (but still has one with &lt;em&gt;/home/users/demo-cp&lt;/em&gt;).&lt;/p&gt;

&lt;p&gt;Running the converter however returned the same output:&lt;br/&gt;
There is no longer exists a &lt;em&gt;.content.xml&lt;/em&gt; file with neither the intermediate authorizable folder mentioned above. Not sure where that gets lost, but it looks like a bug to me (and will essentially prevent the converted content package from being installed). &lt;br/&gt;
Am I missing something???&lt;/p&gt;</description>
                <environment></environment>
        <key id="13382668">SLING-10468</key>
            <summary>Converted content package is missing some .content.xml</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="angela">Angela Schreiber</assignee>
                                    <reporter username="angela">Angela Schreiber</reporter>
                        <labels>
                    </labels>
                <created>Tue, 8 Jun 2021 09:15:42 +0000</created>
                <updated>Tue, 6 Jul 2021 07:05:35 +0000</updated>
                            <resolved>Wed, 9 Jun 2021 14:11:11 +0000</resolved>
                                    <version>Content-Package to Feature Model Converter 1.1.4</version>
                                    <fixVersion>Content-Package to Feature Model Converter 1.1.6</fixVersion>
                                    <component>Content-Package to Feature Model Converter</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="17359408" author="anchela" created="Tue, 8 Jun 2021 15:03:13 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kpauls&quot; class=&quot;user-hover&quot; rel=&quot;kpauls&quot;&gt;kpauls&lt;/a&gt;, if i am not mistaken the culprit is the &lt;tt&gt;AbstractUserEntryHandler&lt;/tt&gt;, which catches all users, all groups and all intermediate paths and doesn&apos;t write those parts back that are not transformed to repo-init (namely groups, regular users and their intermediate paths). probably a regression from our goal to make sure we can properly identify service-user-permissions that point to user and group homes (in contrast to those pointing to other service users, which is supported).&lt;br/&gt;
probably &lt;tt&gt;AbstractUserEntryHandler&lt;/tt&gt; needs something similar to &lt;tt&gt;AbstractPolicyEntryHandler&lt;/tt&gt; i.e. the parser returned a boolean instead of void and subsequently writing the current entry back to the package if it has not been moved to repo-init. &lt;/p&gt;

&lt;p&gt;something like&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
            &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; rejectedUser;
            AbstractUserParser parser = createParser(converter, originalPath, intermediatePath);
            &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; (InputStream input = archive.openInputStream(entry)) {
                rejectedUser = parser.parse(input);
            }

            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (rejectedUser) {
                &lt;span class=&quot;code-comment&quot;&gt;// TODO write entry back to the &lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt;
&lt;/span&gt;            }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13026550" name="SLING-10468.patch" size="3743" author="angela" created="Tue, 8 Jun 2021 15:17:16 +0000"/>
                            <attachment id="13026528" name="demo-cp-no-su-ace-at-group-folder-0.0.0-cp2fm-converted.zip" size="5727" author="angela" created="Tue, 8 Jun 2021 09:16:12 +0000"/>
                            <attachment id="13026527" name="demo-cp-no-su-ace-at-group-folder.zip" size="16155" author="angela" created="Tue, 8 Jun 2021 09:16:07 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 22 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0rr5k:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>