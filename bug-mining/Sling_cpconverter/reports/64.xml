<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:36:34 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SLING-9959] SystemUser.getPath must reveal the path of the original user node</title>
                <link>https://issues.apache.org/jira/browse/SLING-9959</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;&lt;del&gt;found the following repo-init statement to create system users:&lt;/del&gt;&lt;/p&gt;

&lt;p&gt;&lt;del&gt;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/blob/master/src/main/java/org/apache/sling/feature/cpconverter/acl/DefaultAclManager.java#L109&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/blob/master/src/main/java/org/apache/sling/feature/cpconverter/acl/DefaultAclManager.java#L109&lt;/a&gt;&lt;/del&gt;&lt;/p&gt;

&lt;p&gt;&lt;del&gt;which states:&lt;/del&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
formatter.format(&lt;span class=&quot;code-quote&quot;&gt;&quot;create service user %s with path %s%n&quot;&lt;/span&gt;, systemUser.getId(), systemUser.getPath());
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;del&gt;now.... i might be mistaken, but if my reading of the &lt;tt&gt;SystemUserParser&lt;/tt&gt; is correct, the path defined with the &lt;tt&gt;SystemUser&lt;/tt&gt; instance actually reflects the path of the system user node itself:&lt;/del&gt;&lt;/p&gt;

&lt;p&gt;&lt;del&gt;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/blob/master/src/main/java/org/apache/sling/feature/cpconverter/handlers/SystemUsersEntryHandler.java#L70-L75&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/blob/master/src/main/java/org/apache/sling/feature/cpconverter/handlers/SystemUsersEntryHandler.java#L70-L75&lt;/a&gt;&lt;/del&gt;&lt;/p&gt;

&lt;p&gt;&lt;del&gt;if that was true the repo-init statements would be wrong, because the path argument doesn&apos;t specify that path of the user node itself but rather the intermediate path to be used.&lt;/del&gt;&lt;/p&gt;

&lt;p&gt;&lt;del&gt;so the statement should probably read:&lt;/del&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
formatter.format(&lt;span class=&quot;code-quote&quot;&gt;&quot;create service user %s with path %s%n&quot;&lt;/span&gt;, systemUser.getId(), systemUser.getParent().getPath());
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13343622">SLING-9959</key>
            <summary>SystemUser.getPath must reveal the path of the original user node</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="karlpauls">Karl Pauls</assignee>
                                    <reporter username="angela">Angela Schreiber</reporter>
                        <labels>
                    </labels>
                <created>Tue, 1 Dec 2020 17:37:53 +0000</created>
                <updated>Mon, 17 May 2021 11:38:33 +0000</updated>
                            <resolved>Wed, 9 Dec 2020 21:15:56 +0000</resolved>
                                                    <fixVersion>Content-Package to Feature Model Converter 1.1.0</fixVersion>
                                    <component>Content-Package to Feature Model Converter</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17243161" author="anchela" created="Thu, 3 Dec 2020 12:39:51 +0000"  >&lt;p&gt;update: i verified this again with using the test-content from &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-9970&quot; title=&quot;SystemUser.getPath doesn&amp;#39;t reflect the repository path&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-9970&quot;&gt;&lt;del&gt;SLING-9970&lt;/del&gt;&lt;/a&gt;.... &lt;tt&gt;SystemUser.getPath&lt;/tt&gt; in fact does point to the parent node, which IMHO is quite confusing given the name of the method.&lt;/p&gt;

&lt;p&gt;but the following line in &lt;tt&gt;SystemUserEntryHandler&lt;/tt&gt; makes it point to the parent folder node:&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/blob/master/src/main/java/org/apache/sling/feature/cpconverter/handlers/SystemUsersEntryHandler.java#L45&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/blob/master/src/main/java/org/apache/sling/feature/cpconverter/handlers/SystemUsersEntryHandler.java#L45&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
RepoPath currentPath = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; RepoPath(path).getParent(); &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;to make this less confusing i would suggest to&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;create &lt;tt&gt;SystemUser&lt;/tt&gt; with the actual user path&lt;/li&gt;
	&lt;li&gt;let &lt;tt&gt;SystemUser.getPath&lt;/tt&gt; return the user path&lt;/li&gt;
	&lt;li&gt;add &lt;tt&gt;SystemUser.getIntermediatePath()&lt;/tt&gt; to make sure the right path is used for the &apos;intermediate path&apos; statement of the &apos;create system user&apos; repo-init statement.&lt;/li&gt;
	&lt;li&gt;verify which usages of &lt;tt&gt;SystemUser.getPath&lt;/tt&gt; are actually intended to use the intermediate path and which intended to use the actually user path....&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17243385" author="anchela" created="Thu, 3 Dec 2020 17:24:41 +0000"  >&lt;p&gt;additional note: in order to be able to fix &lt;a href=&quot;https://issues.apache.org/jira/browse/SLING-9953&quot; title=&quot;ACEs on/below user nodes are ignored upon conversion&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SLING-9953&quot;&gt;&lt;del&gt;SLING-9953&lt;/del&gt;&lt;/a&gt; there must be a way to determine if a given access controlled path actually is located on the user home or in the subtree below. this is not possible if &lt;tt&gt;SystemUser.getPath()&lt;/tt&gt; reflects the path of the parent node used as &apos;intermediate path&apos; argument for repo-init.&lt;/p&gt;

&lt;p&gt;Adjusting subject accordingly.&lt;/p&gt;</comment>
                            <comment id="17246584" author="karlpauls" created="Wed, 9 Dec 2020 14:56:01 +0000"  >&lt;p&gt;I created a PR of what I understand the proposal is: &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/pull/40&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/pull/40&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17246682" author="karlpauls" created="Wed, 9 Dec 2020 17:10:09 +0000"  >&lt;p&gt;Done in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/pull/40&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/pull/40&lt;/a&gt; - thanks a lot for the review &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=angela&quot; class=&quot;user-hover&quot; rel=&quot;angela&quot;&gt;angela&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                            <outwardlinks description="blocks">
                                        <issuelink>
            <issuekey id="13343515">SLING-9953</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13343931">SLING-9969</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="13324463">SLING-9692</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 48 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0l3q0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>