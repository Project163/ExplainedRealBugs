<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:36:26 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SLING-8626] Content Package Converter is taking Group from Package Group instead of from Maven Group</title>
                <link>https://issues.apache.org/jira/browse/SLING-8626</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;There are two issues with the Content Package to Feature Model Converter with respect to groups:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;If a group is set in the Content Package then this group will be used in the Feature Id as well as for the folder where it is created&lt;/li&gt;
	&lt;li&gt;If anything changes in the Content Package Vault properties then this will not be reflected in the conversion on a Mac (10.14, Mojave). This is because the deflated file remains the same and in my testing the file did not change even though the package did.&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;The issue with the group is severe as the original POM file and the &apos;cp2fm-converted&apos; file are not in the same location causing issues with the launcher at least.&lt;/p&gt;</description>
                <environment>Sling 11, Java 8</environment>
        <key id="13249779">SLING-8626</key>
            <summary>Content Package Converter is taking Group from Package Group instead of from Maven Group</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="andysch">Andreas Schaefer</assignee>
                                    <reporter username="andysch">Andreas Schaefer</reporter>
                        <labels>
                    </labels>
                <created>Thu, 8 Aug 2019 22:42:16 +0000</created>
                <updated>Thu, 13 Feb 2020 08:46:03 +0000</updated>
                            <resolved>Wed, 14 Aug 2019 13:41:22 +0000</resolved>
                                                    <fixVersion>Content-Package to Feature Model Converter 1.0.2</fixVersion>
                                    <component>Content-Package to Feature Model Converter</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                <comments>
                            <comment id="16904873" author="schaefa" created="Mon, 12 Aug 2019 06:05:57 +0000"  >&lt;p&gt;After further investigation I see that there is a severe problem with naming the Content Packages as the content package do not need to have a MANIFEST.MF and that the package group can but does not have to reflect the Maven group.&lt;/p&gt;

&lt;p&gt;That said in the content of the Feature Model we can assume that Content Packages are indeed Maven Artifacts&#160;even though with just the CP file we cannot determine that.&lt;/p&gt;

&lt;p&gt;For the case of a CP that is a Maven Artifacts we should provide the converter with the reference to the POM and the Artifact. Then the group and artifact id and the version are taken from the POM file instead of the CP file. I would propose something along these lines:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void convert(CPArtifact...cpArtifacts);&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;With a CPArtifact class like this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;CPArtifact {
&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; File pomFile;
&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; File packageFile:

&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; CPArtifact(File pomFile, File packageFile) {&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The converter would then take the Artifact Id and with it the location where it is stored from the pomFile and not from the Package Properties.&lt;/p&gt;

&lt;p&gt;These changes should not change anything that already released.&lt;/p&gt;</comment>
                            <comment id="16904890" author="kwin" created="Mon, 12 Aug 2019 06:48:01 +0000"  >&lt;p&gt;Newer versions of the Maven Plugin for content-packages write the Maven group and artifactact id to the properties.xml in dedicated properties: groupId and artifactId (&lt;a href=&quot;https://jackrabbit.apache.org/filevault/properties.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://jackrabbit.apache.org/filevault/properties.html&lt;/a&gt;).&lt;/p&gt;</comment>
                            <comment id="16905320" author="dsuess" created="Mon, 12 Aug 2019 15:42:05 +0000"  >&lt;p&gt;I&apos;m not really sure if this is a bug - in fact this was originally implemented using the maven groups - yet &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=simone.tripodi&quot; class=&quot;user-hover&quot; rel=&quot;simone.tripodi&quot;&gt;simone.tripodi&lt;/a&gt; stumbled over packages were the metadata found in the pom file was broken. I&apos;m not sure how a reliable strategy would look like. For our case the approach was what was required as dependency management of vault relies on the package id (including the package group) not really depending on the maven identity.&lt;/p&gt;</comment>
                            <comment id="16905502" author="schaefa" created="Mon, 12 Aug 2019 19:09:42 +0000"  >&lt;p&gt;The problem is that the Feature Model depends on Maven to find the artifacts and so if the package group does not match up with the maven group then we are running into problems with the launcher because it needs the POM file of the package which is now not in the same location. Actually the caller of the convert() method does not know where the converted package was copied to.&lt;/p&gt;

&lt;p&gt;To showcase the issue I created a little test project: &lt;a href=&quot;https://github.com/schaefa/cpconverter-ssue-fm-starter/tree/issue/package-group&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/schaefa/cpconverter-ssue-fm-starter/tree/issue/package-group&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The test &apos;mvn package&apos; must be run twice to see the issue (see the Readme.md file) but then you see this issue:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;ERROR&amp;#93;&lt;/span&gt; Failed to execute goal on project org.apache.sling.cpconverter.issue: Could not resolve dependencies for project org.apache.sling:org.apache.sling.cpconverter.issue:slingosgifeature:1.0.0-SNAPSHOT: Could not find artifact test-group:ui.apps:zip:cp2fm-converted:1.0.0-SNAPSHOT in apache.snapshots (&lt;a href=&quot;https://repository.apache.org/snapshots)&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/snapshots)&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;If you run into issue with the test project let me know.&lt;/p&gt;</comment>
                            <comment id="16905622" author="schaefa" created="Mon, 12 Aug 2019 22:00:44 +0000"  >&lt;p&gt;There is another issue. According to &lt;a href=&quot;https://bnd.bndtools.org/chapters/800-headers.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://bnd.bndtools.org/chapters/800-headers.html&lt;/a&gt;&#160;the Bundle-Name header can contain spaces and for example for groovy-all.jar package the Bundle-Name is &apos;Groovy Runtime&apos;.&lt;br/&gt;
The converted is placing that a file under this folder and the Sling Feature Maven Plugin is failing because of it.&lt;/p&gt;

&lt;p&gt;To illustrate the issue I created another branch on the test project:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/schaefa/cpconverter-ssue-fm-starter/tree/issue/bundle-name&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/schaefa/cpconverter-ssue-fm-starter/tree/issue/bundle-name&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16906714" author="schaefa" created="Tue, 13 Aug 2019 23:33:32 +0000"  >&lt;p&gt;Created PR for fixes related to spaces in the Group and Artifact Id from Package configurations or Bundle Headers:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/pull/15&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/pull/15&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I updated the test project mentioned above with the updated Sling Feature Converter Maven Plugin.&lt;/p&gt;</comment>
                            <comment id="16907270" author="schaefa" created="Wed, 14 Aug 2019 13:41:22 +0000"  >&lt;p&gt;At the end it turned out that the issue was that group and artifact ids taken from the package properties&#160;(META-INF/vault/properties.xml) or Bundle Header can contain spaces and this is fixed now.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 13 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z05hko:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>