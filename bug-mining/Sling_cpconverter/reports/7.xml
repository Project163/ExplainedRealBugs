<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:36:14 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SLING-8396] Sling Content Package to Feature Model fails with embedded Bundles</title>
                <link>https://issues.apache.org/jira/browse/SLING-8396</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;When a content package contains an embedded bundle the bundle will not be listed inside the generated FM json file if content package requires more than one bundle.&lt;/p&gt;

&lt;p&gt;I have an ui.apps content package that has a bundle which is not provided and one embedded bundle (core). The not provided bundle is listed in the json file but the core is missing.&lt;/p&gt;

&lt;p&gt;If I have a content package with just the embedded bundle it is listed there.&lt;/p&gt;

&lt;p&gt;Failing json file:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-json&quot;&gt;
{

&#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;id&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;com.peregrine-cms:base.ui.apps:slingosgifeature:1.0-SNAPSHOT&quot;&lt;/span&gt;,
&#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;description&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;JCR Package &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the Peregrine CMS Platform including\n&#160; &#160; &#160; &#160; the Platform Core bundle.&quot;&lt;/span&gt;,
&#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;bundles&quot;&lt;/span&gt;:[
&#160; &#160; {
&#160; &#160; &#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;id&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.sling:org.apache.sling.servlet-helpers:1.1.8&quot;&lt;/span&gt;,
&#160; &#160; &#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;start-order&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;20&quot;&lt;/span&gt;
&#160; &#160; }
&#160; ],
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;br/&gt;
Working json file:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-json&quot;&gt;
{
&#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;id&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;com.peregrine-cms:felib.ui.apps:slingosgifeature:1.0-SNAPSHOT&quot;&lt;/span&gt;,
&#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;description&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;JCR Package &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the Peregrine CMS Felib module.&quot;&lt;/span&gt;,
&#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;bundles&quot;&lt;/span&gt;:[
&#160; &#160; {
&#160; &#160; &#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;id&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;com.peregrine-cms:felib.core:1.0-SNAPSHOT&quot;&lt;/span&gt;,
&#160; &#160; &#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;start-order&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;20&quot;&lt;/span&gt;
&#160; &#160; }
&#160; ],
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>Apache Sling 11, Mac OS X 10.13.6, Java 8</environment>
        <key id="13231612">SLING-8396</key>
            <summary>Sling Content Package to Feature Model fails with embedded Bundles</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="simone.tripodi">Simone Tripodi</assignee>
                                    <reporter username="andysch">Andreas Schaefer</reporter>
                        <labels>
                    </labels>
                <created>Sat, 4 May 2019 19:38:39 +0000</created>
                <updated>Wed, 5 Apr 2023 13:59:02 +0000</updated>
                            <resolved>Tue, 26 Nov 2019 22:23:32 +0000</resolved>
                                                    <fixVersion>Content-Package to Feature Model Converter 1.0.2</fixVersion>
                                    <component>Content-Package to Feature Model Converter</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16833780" author="simone.tripodi" created="Mon, 6 May 2019 12:40:15 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=andysch&quot; class=&quot;user-hover&quot; rel=&quot;andysch&quot;&gt;andysch&lt;/a&gt; kindly, is your content-package an OSS project I can check out and debug, please? Many thanks in advance!&lt;/p&gt;</comment>
                            <comment id="16833821" author="simone.tripodi" created="Mon, 6 May 2019 13:24:30 +0000"  >&lt;p&gt;Apologise &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=andysch&quot; class=&quot;user-hover&quot; rel=&quot;andysch&quot;&gt;andysch&lt;/a&gt;, just found &lt;a href=&quot;https://github.com/schaefa/sling-content-2-feature-issue/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/schaefa/sling-content-2-feature-issue/&lt;/a&gt; online, thanks!&lt;/p&gt;</comment>
                            <comment id="16833841" author="simone.tripodi" created="Mon, 6 May 2019 13:48:58 +0000"  >&lt;p&gt;what happens is that the &lt;tt&gt;core&lt;/tt&gt; artifacts contains multiple &lt;tt&gt;META-INF/maven/${groupId}/${artifactId}/pom.properties&lt;/tt&gt; declaration:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;$ jar -tvf /private/tmp/sling-content-2-feature-issue/core/target/core-1.0.0-SNAPSHOT.jar 
     0 Mon May 06 13:25:22 CEST 2019 META-INF/
  1990 Mon May 06 13:25:22 CEST 2019 META-INF/MANIFEST.MF
 11560 Thu Jan 13 23:06:36 CET 2011 META-INF/LICENSE.txt
   178 Thu Jan 13 23:06:36 CET 2011 META-INF/NOTICE.txt
     0 Mon May 06 13:25:22 CEST 2019 META-INF/maven/
     0 Mon May 06 13:25:22 CEST 2019 META-INF/maven/com.madplanet.sling.cp2sf/
     0 Mon May 06 13:25:22 CEST 2019 META-INF/maven/com.madplanet.sling.cp2sf/core/
   148 Mon May 06 13:25:22 CEST 2019 META-INF/maven/com.madplanet.sling.cp2sf/core/pom.properties
  6394 Mon May 06 13:24:14 CEST 2019 META-INF/maven/com.madplanet.sling.cp2sf/core/pom.xml
     0 Mon May 06 13:25:22 CEST 2019 META-INF/maven/commons-lang/
     0 Mon May 06 13:25:22 CEST 2019 META-INF/maven/commons-lang/commons-lang/
   112 Thu Jan 13 23:06:52 CET 2011 META-INF/maven/commons-lang/commons-lang/pom.properties
 17494 Thu Jan 13 23:05:12 CET 2011 META-INF/maven/commons-lang/commons-lang/pom.xml
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;the bundle handler was designed taking in mind that each maven artifact contains only ONE &lt;tt&gt;pom.properties&lt;/tt&gt;,&lt;br/&gt;
we don&apos;t have implemented any heuristic ATM to guess GAV from the artifact file name, we did something smart in the &lt;tt&gt;ApisJarMojo&lt;/tt&gt;, let me see if I can implement something smarter rather than just taking all the matching properties...&lt;/p&gt;</comment>
                            <comment id="16834261" author="simone.tripodi" created="Mon, 6 May 2019 23:06:20 +0000"  >&lt;p&gt;resolved in &lt;a href=&quot;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/commit/82e4b670f7d03088662f6f44421c6207f5fd4f62&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/sling-org-apache-sling-feature-cpconverter/commit/82e4b670f7d03088662f6f44421c6207f5fd4f62&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16834280" author="schaefa" created="Mon, 6 May 2019 23:45:09 +0000"  >&lt;p&gt;Testing it with my test project it is now using the embedded bundle but the commons-lang bundle is kicked out in the process.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I have another issue with a bundle than will contain another bundle (core contains commons) and this one is then used as bundle and not the core.&lt;/p&gt;</comment>
                            <comment id="16834501" author="simone.tripodi" created="Tue, 7 May 2019 08:31:00 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=andysch&quot; class=&quot;user-hover&quot; rel=&quot;andysch&quot;&gt;andysch&lt;/a&gt; for your feedback, very appreciated!&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Testing it with my test project it is now using the embedded bundle but the commons-lang bundle is kicked out in the process.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;If you are using an embedded bundle, this is enough to be declared in the Feature Model, you don&apos;t need to enlist also the embedded libraries&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;I have another issue with a bundle than will contain another bundle (core contains commons) and this one is then used as bundle and not the core.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Could you please attach a test case I can debug, please? Many thanks in advance!&lt;/p&gt;</comment>
                            <comment id="16982962" author="schaefa" created="Tue, 26 Nov 2019 22:23:08 +0000"  >&lt;p&gt;Turns out that the servlethelpers dependency is inlined into the maven module. In Peregrine commons-lang was retired and commons-lang3 seems to work just fine.&lt;/p&gt;</comment>
                            <comment id="16982963" author="schaefa" created="Tue, 26 Nov 2019 22:23:32 +0000"  >&lt;p&gt;As of now this issue seems to be resolved.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                            <outwardlinks description="causes">
                                        <issuelink>
            <issuekey id="13531591">SLING-11821</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 50 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z02e9k:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>