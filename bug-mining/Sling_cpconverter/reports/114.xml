<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:36:57 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SLING-10467] Converted content package referres to paths moved to repo-init</title>
                <link>https://issues.apache.org/jira/browse/SLING-10467</link>
                <project id="12310710" key="SLING">Sling</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kpauls&quot; class=&quot;user-hover&quot; rel=&quot;kpauls&quot;&gt;kpauls&lt;/a&gt;, in the light of the &lt;em&gt;enforce-principal-based-supported-path&lt;/em&gt; configuration option i had a look at the converted content packages, which probably need to be used instead of the original packages if the modifications applied by converted are not to be reverted by later installing the original content package.&lt;/p&gt;

&lt;p&gt;i therefore created a simple test content package &lt;em&gt;demo-cp.zip&lt;/em&gt; that contains:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;a regular user in &apos;demo-cp&apos; subfolder&lt;/li&gt;
	&lt;li&gt;a regular group in &apos;demo-cp&apos; subfolder&lt;/li&gt;
	&lt;li&gt;a bunch of service users both with resource-based and principal-based ac setup&lt;/li&gt;
	&lt;li&gt;content root at /demo-cp with a ac-policy (entries for user, group and service user)&lt;/li&gt;
	&lt;li&gt;a serviceusermapping configuration below /apps/demo-cp&lt;br/&gt;
 and had the converter generate &lt;em&gt;demo-cp-0.0.0-cp2fm-converted.zip&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;when trying to install the converted content package on a repository that content for service users and below /apps installed, i noticed that the converted package will actually remove that content.&lt;br/&gt;
 i suspect that this is caused by &lt;em&gt;META_INF/vault/filter.xml&lt;/em&gt; and/or &lt;em&gt;META-INF/vault/definition/content.xml&lt;/em&gt; still referring to those parts that got &apos;moved&apos; to repo-init. in case of the dependency/.content.xml it states that the import mode is &lt;em&gt;replace&lt;/em&gt; (same as in original package).&lt;/p&gt;

&lt;p&gt;maybe my test package is not correct.... but I would have expected that the paths that have been installed by repo-init statements should no longer be covered by the converted package (everything below /apps and /home/users/system) or/and should have the import-mode changed to the deprecated &lt;del&gt;MERGE&lt;/del&gt; or new MERGE_PROPERTIES. the latter would be needed for any kind of resource-based AC setup for service users at mutable content nodes (NOTE: doesn&apos;t apply in case ac-setup for service users is migrated to principal-based authorization which entirely resides below the service user home).&lt;/p&gt;

&lt;p&gt;edge case: if regular users were to be located below &lt;em&gt;/home/users/system&lt;/em&gt; excluding that path from the package definition obviously doesn&apos;t work.... changing import mode would be required. alternatively: spotting regular users below &lt;em&gt;home/users/system&lt;/em&gt; and abort converter.&lt;/p&gt;

&lt;p&gt;wdyt?&lt;/p&gt;</description>
                <environment></environment>
        <key id="13382651">SLING-10467</key>
            <summary>Converted content package referres to paths moved to repo-init</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="angela">Angela Schreiber</assignee>
                                    <reporter username="angela">Angela Schreiber</reporter>
                        <labels>
                    </labels>
                <created>Tue, 8 Jun 2021 08:31:55 +0000</created>
                <updated>Tue, 6 Jul 2021 07:05:37 +0000</updated>
                            <resolved>Wed, 30 Jun 2021 14:37:33 +0000</resolved>
                                    <version>Content-Package to Feature Model Converter 1.1.4</version>
                                    <fixVersion>Content-Package to Feature Model Converter 1.1.6</fixVersion>
                                    <component>Content-Package to Feature Model Converter</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="17372500" author="anchela" created="Thu, 1 Jul 2021 07:59:21 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=kpauls&quot; class=&quot;user-hover&quot; rel=&quot;kpauls&quot;&gt;kpauls&lt;/a&gt; thanks a lot for discussions, input and suggestions.... joint effort definitely results in better fixes &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="13386461">SLING-10571</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310760">
                    <name>Testing</name>
                                            <outwardlinks description="Testing discovered">
                                        <issuelink>
            <issuekey id="13383193">SLING-10481</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="13026522" name="demo-cp-0.0.0-cp2fm-converted.zip" size="5685" author="angela" created="Tue, 8 Jun 2021 08:32:47 +0000"/>
                            <attachment id="13026524" name="demo-cp.zip" size="16491" author="angela" created="Tue, 8 Jun 2021 08:33:41 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 19 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0rr1s:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>