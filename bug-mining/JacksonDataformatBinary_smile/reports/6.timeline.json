[{"id":1990838841,"node_id":"MDEyOkxhYmVsZWRFdmVudDE5OTA4Mzg4NDE=","url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/events/1990838841","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2018-11-27T21:39:34Z","label":{"name":"2.9","color":"c5def5"},"performed_via_github_app":null},{"id":1990838844,"node_id":"MDEyOkxhYmVsZWRFdmVudDE5OTA4Mzg4NDQ=","url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/events/1990838844","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2018-11-27T21:39:35Z","label":{"name":"active","color":"fbca04"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/comments/442227332","html_url":"https://github.com/FasterXML/jackson-dataformats-binary/issues/153#issuecomment-442227332","issue_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/153","id":442227332,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MjIyNzMzMg==","user":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-27T21:40:09Z","updated_at":"2018-11-27T21:40:09Z","body":"Thank you for reporting this. I hope to look into this soon -- decoration may not be properly tested for all codec factories, but obviously should work.\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/comments/442227332/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1990842144,"node_id":"MDEyOkxhYmVsZWRFdmVudDE5OTA4NDIxNDQ=","url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/events/1990842144","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2018-11-27T21:41:03Z","label":{"name":"smile","color":"0e8a16"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/comments/442720569","html_url":"https://github.com/FasterXML/jackson-dataformats-binary/issues/153#issuecomment-442720569","issue_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/153","id":442720569,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MjcyMDU2OQ==","user":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-29T06:23:46Z","updated_at":"2018-11-29T06:23:46Z","body":"Ah-ha. Looks like there's \"double decoration\" for particular parser factory method(s). I'll try to create good regression test here.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/comments/442720569/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/comments/442723473","html_url":"https://github.com/FasterXML/jackson-dataformats-binary/issues/153#issuecomment-442723473","issue_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/153","id":442723473,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MjcyMzQ3Mw==","user":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-29T06:39:44Z","updated_at":"2018-11-29T06:39:44Z","body":"@guidomedina I found the problem, and it affects `createParser()` methods that take `byte[]`: I can fix it for `2.9.8`. In the meantime you may want to explicitly construct `ByteArrayInputStream`, to work around the problem (that factory method does not \"double-decorate\" as far as I can see).\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/comments/442723473/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1994375216,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MTk5NDM3NTIxNg==","url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/events/1994375216","actor":{"login":"guidomedina","id":1789197,"node_id":"MDQ6VXNlcjE3ODkxOTc=","avatar_url":"https://avatars.githubusercontent.com/u/1789197?v=4","gravatar_id":"","url":"https://api.github.com/users/guidomedina","html_url":"https://github.com/guidomedina","followers_url":"https://api.github.com/users/guidomedina/followers","following_url":"https://api.github.com/users/guidomedina/following{/other_user}","gists_url":"https://api.github.com/users/guidomedina/gists{/gist_id}","starred_url":"https://api.github.com/users/guidomedina/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guidomedina/subscriptions","organizations_url":"https://api.github.com/users/guidomedina/orgs","repos_url":"https://api.github.com/users/guidomedina/repos","events_url":"https://api.github.com/users/guidomedina/events{/privacy}","received_events_url":"https://api.github.com/users/guidomedina/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2018-11-29T06:39:44Z","performed_via_github_app":null},{"id":1994375217,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDE5OTQzNzUyMTc=","url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/events/1994375217","actor":{"login":"guidomedina","id":1789197,"node_id":"MDQ6VXNlcjE3ODkxOTc=","avatar_url":"https://avatars.githubusercontent.com/u/1789197?v=4","gravatar_id":"","url":"https://api.github.com/users/guidomedina","html_url":"https://github.com/guidomedina","followers_url":"https://api.github.com/users/guidomedina/followers","following_url":"https://api.github.com/users/guidomedina/following{/other_user}","gists_url":"https://api.github.com/users/guidomedina/gists{/gist_id}","starred_url":"https://api.github.com/users/guidomedina/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guidomedina/subscriptions","organizations_url":"https://api.github.com/users/guidomedina/orgs","repos_url":"https://api.github.com/users/guidomedina/repos","events_url":"https://api.github.com/users/guidomedina/events{/privacy}","received_events_url":"https://api.github.com/users/guidomedina/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2018-11-29T06:39:44Z","performed_via_github_app":null},{"id":1994384986,"node_id":"MDE3OlJlbmFtZWRUaXRsZUV2ZW50MTk5NDM4NDk4Ng==","url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/events/1994384986","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"renamed","commit_id":null,"commit_url":null,"created_at":"2018-11-29T06:47:31Z","rename":{"from":"[smile] unable to set a compression input/output decorator to a SmileFactory","to":"Unable to set a compression input/output decorator to a `SmileFactory`"},"performed_via_github_app":null},{"id":1994392070,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDE5OTQzOTIwNzA=","url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/events/1994392070","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"155ec35e351a4b6d8a0aa428082866a292a30a22","commit_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/commits/155ec35e351a4b6d8a0aa428082866a292a30a22","created_at":"2018-11-29T06:52:38Z","performed_via_github_app":null},{"id":1994403262,"node_id":"MDExOkNsb3NlZEV2ZW50MTk5NDQwMzI2Mg==","url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/events/1994403262","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"155ec35e351a4b6d8a0aa428082866a292a30a22","commit_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/commits/155ec35e351a4b6d8a0aa428082866a292a30a22","created_at":"2018-11-29T07:00:28Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/comments/442755027","html_url":"https://github.com/FasterXML/jackson-dataformats-binary/issues/153#issuecomment-442755027","issue_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/153","id":442755027,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0Mjc1NTAyNw==","user":{"login":"guidomedina","id":1789197,"node_id":"MDQ6VXNlcjE3ODkxOTc=","avatar_url":"https://avatars.githubusercontent.com/u/1789197?v=4","gravatar_id":"","url":"https://api.github.com/users/guidomedina","html_url":"https://github.com/guidomedina","followers_url":"https://api.github.com/users/guidomedina/followers","following_url":"https://api.github.com/users/guidomedina/following{/other_user}","gists_url":"https://api.github.com/users/guidomedina/gists{/gist_id}","starred_url":"https://api.github.com/users/guidomedina/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guidomedina/subscriptions","organizations_url":"https://api.github.com/users/guidomedina/orgs","repos_url":"https://api.github.com/users/guidomedina/repos","events_url":"https://api.github.com/users/guidomedina/events{/privacy}","received_events_url":"https://api.github.com/users/guidomedina/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-29T08:55:46Z","updated_at":"2018-11-29T08:55:46Z","body":"Hi @cowtowncoder thanks for the fix, I'll wait for 2.9.8 because I also added converters from one or more mappers to another on the fly for our data so the migration happens seamlessly.\r\n\r\nWe basically use a mapper based on the `content-type` to read and write with a target mapper and `content-type`, for example here is a list of few `content-type` we are using:\r\n- `application/json; charset=UTF-8`\r\n- `application/smile; charset=UTF-8`\r\n- `application/compressed-smile; charset=UTF-8` - smile with `String` value check\r\n- `application/lz4-json; charset=UTF-8`\r\n- `application/gzip-json; charset=UTF-8`\r\n\r\nWith this fix now we will be able to add:\r\n- `application/lz4-smile; charset=UTF-8`\r\n- `application/gzip-smile; charset=UTF-8`\r\n\r\nI know this has nothing to do with the issue; I'm just trying to give you another scenario of how your awesome APIs are put to use, keep up the great work you do ;-)","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/comments/442755027/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"guidomedina","id":1789197,"node_id":"MDQ6VXNlcjE3ODkxOTc=","avatar_url":"https://avatars.githubusercontent.com/u/1789197?v=4","gravatar_id":"","url":"https://api.github.com/users/guidomedina","html_url":"https://github.com/guidomedina","followers_url":"https://api.github.com/users/guidomedina/followers","following_url":"https://api.github.com/users/guidomedina/following{/other_user}","gists_url":"https://api.github.com/users/guidomedina/gists{/gist_id}","starred_url":"https://api.github.com/users/guidomedina/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guidomedina/subscriptions","organizations_url":"https://api.github.com/users/guidomedina/orgs","repos_url":"https://api.github.com/users/guidomedina/repos","events_url":"https://api.github.com/users/guidomedina/events{/privacy}","received_events_url":"https://api.github.com/users/guidomedina/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1994603531,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MTk5NDYwMzUzMQ==","url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/events/1994603531","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2018-11-29T08:55:46Z","performed_via_github_app":null},{"id":1994603532,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDE5OTQ2MDM1MzI=","url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/events/1994603532","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2018-11-29T08:55:46Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/comments/443175997","html_url":"https://github.com/FasterXML/jackson-dataformats-binary/issues/153#issuecomment-443175997","issue_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/153","id":443175997,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MzE3NTk5Nw==","user":{"login":"guidomedina","id":1789197,"node_id":"MDQ6VXNlcjE3ODkxOTc=","avatar_url":"https://avatars.githubusercontent.com/u/1789197?v=4","gravatar_id":"","url":"https://api.github.com/users/guidomedina","html_url":"https://github.com/guidomedina","followers_url":"https://api.github.com/users/guidomedina/followers","following_url":"https://api.github.com/users/guidomedina/following{/other_user}","gists_url":"https://api.github.com/users/guidomedina/gists{/gist_id}","starred_url":"https://api.github.com/users/guidomedina/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guidomedina/subscriptions","organizations_url":"https://api.github.com/users/guidomedina/orgs","repos_url":"https://api.github.com/users/guidomedina/repos","events_url":"https://api.github.com/users/guidomedina/events{/privacy}","received_events_url":"https://api.github.com/users/guidomedina/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-30T11:28:53Z","updated_at":"2018-11-30T11:32:48Z","body":"@cowtowncoder do you have any ETA for releasing 2.9.8? I have to do some big data migration and I was hoping I could do it during the next weekend, I'm postponing it in order to get the `SmileFactory` advantage, again; many thanks for your support resolving this one.\r\n\r\nOr maybe in the meantime I use the work around but didn't understand from your previous comment how to do it exactly.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/comments/443175997/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"guidomedina","id":1789197,"node_id":"MDQ6VXNlcjE3ODkxOTc=","avatar_url":"https://avatars.githubusercontent.com/u/1789197?v=4","gravatar_id":"","url":"https://api.github.com/users/guidomedina","html_url":"https://github.com/guidomedina","followers_url":"https://api.github.com/users/guidomedina/followers","following_url":"https://api.github.com/users/guidomedina/following{/other_user}","gists_url":"https://api.github.com/users/guidomedina/gists{/gist_id}","starred_url":"https://api.github.com/users/guidomedina/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guidomedina/subscriptions","organizations_url":"https://api.github.com/users/guidomedina/orgs","repos_url":"https://api.github.com/users/guidomedina/repos","events_url":"https://api.github.com/users/guidomedina/events{/privacy}","received_events_url":"https://api.github.com/users/guidomedina/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1997706682,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MTk5NzcwNjY4Mg==","url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/events/1997706682","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2018-11-30T11:28:53Z","performed_via_github_app":null},{"id":1997706683,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDE5OTc3MDY2ODM=","url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/events/1997706683","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2018-11-30T11:28:53Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/comments/443365442","html_url":"https://github.com/FasterXML/jackson-dataformats-binary/issues/153#issuecomment-443365442","issue_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/153","id":443365442,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MzM2NTQ0Mg==","user":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-30T22:59:31Z","updated_at":"2018-11-30T22:59:31Z","body":"Hi there! I am quite close to having `2.9.8`, but waiting for some other work (related to Java 9+ forward compatibility), but next week may be a stretch from my perspective. Most likely mid-December, before christmas break.\r\n\r\nExciting to hear about usage: I am glad you found this feature useful -- it's one of those things that is bit under-utilized, and this is also why there was that bug (not enough usage to weed out). Funny part is that 3.0 branch (master) had a fix, due to sharing more code across stream factories.\r\n\r\nAs to workaround, I guess I now realized that if you do not control which `createParser` / `createGenerator` call is used by 3rd party, you can't use work-around. You could possibly sub-class `SmileFactory` and override the method but... that may be tricky, and is not very maintainable.\r\n\r\nOne other thing is that depending on how you release/deploy, you could perhaps do local build of `jackson-dataformat-smile`. But that also may not be an option.\r\n\r\n\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/comments/443365442/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"cowtowncoder","id":55065,"node_id":"MDQ6VXNlcjU1MDY1","avatar_url":"https://avatars.githubusercontent.com/u/55065?v=4","gravatar_id":"","url":"https://api.github.com/users/cowtowncoder","html_url":"https://github.com/cowtowncoder","followers_url":"https://api.github.com/users/cowtowncoder/followers","following_url":"https://api.github.com/users/cowtowncoder/following{/other_user}","gists_url":"https://api.github.com/users/cowtowncoder/gists{/gist_id}","starred_url":"https://api.github.com/users/cowtowncoder/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cowtowncoder/subscriptions","organizations_url":"https://api.github.com/users/cowtowncoder/orgs","repos_url":"https://api.github.com/users/cowtowncoder/repos","events_url":"https://api.github.com/users/cowtowncoder/events{/privacy}","received_events_url":"https://api.github.com/users/cowtowncoder/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/comments/443370761","html_url":"https://github.com/FasterXML/jackson-dataformats-binary/issues/153#issuecomment-443370761","issue_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/153","id":443370761,"node_id":"MDEyOklzc3VlQ29tbWVudDQ0MzM3MDc2MQ==","user":{"login":"guidomedina","id":1789197,"node_id":"MDQ6VXNlcjE3ODkxOTc=","avatar_url":"https://avatars.githubusercontent.com/u/1789197?v=4","gravatar_id":"","url":"https://api.github.com/users/guidomedina","html_url":"https://github.com/guidomedina","followers_url":"https://api.github.com/users/guidomedina/followers","following_url":"https://api.github.com/users/guidomedina/following{/other_user}","gists_url":"https://api.github.com/users/guidomedina/gists{/gist_id}","starred_url":"https://api.github.com/users/guidomedina/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guidomedina/subscriptions","organizations_url":"https://api.github.com/users/guidomedina/orgs","repos_url":"https://api.github.com/users/guidomedina/repos","events_url":"https://api.github.com/users/guidomedina/events{/privacy}","received_events_url":"https://api.github.com/users/guidomedina/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-11-30T23:28:15Z","updated_at":"2018-11-30T23:35:59Z","body":"This is the result with my newly build `2.9.7.5` from `2.9` branch, see how close `LZ4 Smile` is to `Smile` time wise and still faster than plain Json, that's what I was talking about:\r\n```\r\nJson size: 5509kb\r\nJson time: 57.203ms\r\n\r\nSmile size: 2120kb\r\nSmile time: 42.102ms\r\n\r\nCompressed smile size: 1862kb\r\nCompressed smile time: 39.552ms\r\n\r\nLZ4 Json size: 179kb\r\nLZ4 Json time: 64.011ms\r\n\r\nGzip Json size: 431kb\r\nGzip Json time: 110.644ms\r\n\r\nLZ4 Smile size: 384kb\r\nLZ4 Smile time: 46.552ms\r\n\r\nGzip Smile size: 439kb\r\nGzip Smile time: 84.553ms\r\n```","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/comments/443370761/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"guidomedina","id":1789197,"node_id":"MDQ6VXNlcjE3ODkxOTc=","avatar_url":"https://avatars.githubusercontent.com/u/1789197?v=4","gravatar_id":"","url":"https://api.github.com/users/guidomedina","html_url":"https://github.com/guidomedina","followers_url":"https://api.github.com/users/guidomedina/followers","following_url":"https://api.github.com/users/guidomedina/following{/other_user}","gists_url":"https://api.github.com/users/guidomedina/gists{/gist_id}","starred_url":"https://api.github.com/users/guidomedina/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guidomedina/subscriptions","organizations_url":"https://api.github.com/users/guidomedina/orgs","repos_url":"https://api.github.com/users/guidomedina/repos","events_url":"https://api.github.com/users/guidomedina/events{/privacy}","received_events_url":"https://api.github.com/users/guidomedina/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/comments/668176594","html_url":"https://github.com/FasterXML/jackson-dataformats-binary/issues/153#issuecomment-668176594","issue_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/153","id":668176594,"node_id":"MDEyOklzc3VlQ29tbWVudDY2ODE3NjU5NA==","user":{"login":"howardem","id":12344960,"node_id":"MDQ6VXNlcjEyMzQ0OTYw","avatar_url":"https://avatars.githubusercontent.com/u/12344960?v=4","gravatar_id":"","url":"https://api.github.com/users/howardem","html_url":"https://github.com/howardem","followers_url":"https://api.github.com/users/howardem/followers","following_url":"https://api.github.com/users/howardem/following{/other_user}","gists_url":"https://api.github.com/users/howardem/gists{/gist_id}","starred_url":"https://api.github.com/users/howardem/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/howardem/subscriptions","organizations_url":"https://api.github.com/users/howardem/orgs","repos_url":"https://api.github.com/users/howardem/repos","events_url":"https://api.github.com/users/howardem/events{/privacy}","received_events_url":"https://api.github.com/users/howardem/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-03T18:32:26Z","updated_at":"2020-08-03T18:35:33Z","body":"Hi Guido,\r\n\r\nI hope you are doing well through this COVID-19 time we are living. We have custom Spring Cloud Stream message converters to handle content negotiation based on the headers of the incoming RabbitMQ messages. LZ4 is one of the compressors we want to use by decorating the ObjectMapper (same thing you did), but couldn't get closer to the numbers you posted. We try 2 different implementations of the algorithm: \r\n- org.lz4:lz4-java:1.7.1 (compression is better with this library using LZ4 HC) \r\n- org.apache.commons:commons-compress:1.20\r\n\r\nWe are using Jackson v2.11.0. \r\n\r\nIf you don't mind could you share which LZ4 implementation you used? \r\n\r\nBest regards,","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/comments/668176594/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"howardem","id":12344960,"node_id":"MDQ6VXNlcjEyMzQ0OTYw","avatar_url":"https://avatars.githubusercontent.com/u/12344960?v=4","gravatar_id":"","url":"https://api.github.com/users/howardem","html_url":"https://github.com/howardem","followers_url":"https://api.github.com/users/howardem/followers","following_url":"https://api.github.com/users/howardem/following{/other_user}","gists_url":"https://api.github.com/users/howardem/gists{/gist_id}","starred_url":"https://api.github.com/users/howardem/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/howardem/subscriptions","organizations_url":"https://api.github.com/users/howardem/orgs","repos_url":"https://api.github.com/users/howardem/repos","events_url":"https://api.github.com/users/howardem/events{/privacy}","received_events_url":"https://api.github.com/users/howardem/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/comments/668476474","html_url":"https://github.com/FasterXML/jackson-dataformats-binary/issues/153#issuecomment-668476474","issue_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/153","id":668476474,"node_id":"MDEyOklzc3VlQ29tbWVudDY2ODQ3NjQ3NA==","user":{"login":"guidomedina","id":1789197,"node_id":"MDQ6VXNlcjE3ODkxOTc=","avatar_url":"https://avatars.githubusercontent.com/u/1789197?v=4","gravatar_id":"","url":"https://api.github.com/users/guidomedina","html_url":"https://github.com/guidomedina","followers_url":"https://api.github.com/users/guidomedina/followers","following_url":"https://api.github.com/users/guidomedina/following{/other_user}","gists_url":"https://api.github.com/users/guidomedina/gists{/gist_id}","starred_url":"https://api.github.com/users/guidomedina/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guidomedina/subscriptions","organizations_url":"https://api.github.com/users/guidomedina/orgs","repos_url":"https://api.github.com/users/guidomedina/repos","events_url":"https://api.github.com/users/guidomedina/events{/privacy}","received_events_url":"https://api.github.com/users/guidomedina/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-04T09:01:27Z","updated_at":"2020-08-04T09:57:10Z","body":"I'm using LZ4 double compression with 32KB block size, also because it is binary and Smile is faster than standard Json when I use some binary compression I'm using Smile straight forward, I'm using:\r\n- org.lz4:lz4-java:1.7.1\r\n- com.fasterxml.jackson.dataformat:jackson-dataformat-smile 2.11.1 (or 2.11.2 released yesterday)\r\n\r\nHere is the code for LZ4 Json mapper and LZ4 Smile mapper:\r\n```\r\nimport static com.fasterxml.jackson.dataformat.smile.SmileGenerator.Feature.ENCODE_BINARY_AS_7BIT;\r\nimport static java.nio.charset.StandardCharsets.UTF_8;\r\n// there are more imports but I'm sure you will be able to figure them out\r\n\r\n...\r\n...\r\n\r\n  public static final ParameterNamesModule PARAMETER_NAMES_MODULE = new ParameterNamesModule();\r\n  public static final JavaTimeModule JAVA_TIME_MODULE = new JavaTimeModule();\r\n  public static final Jdk8Module JDK_8_MODULE = new Jdk8Module();\r\n\r\n  // Just to configure some modules\r\n  public static ObjectMapper configureDefaultObjectMapper(ObjectMapper objectMapper)\r\n  {\r\n    return objectMapper\r\n      .disable(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES)\r\n      .disable(SerializationFeature.FAIL_ON_EMPTY_BEANS)\r\n      .setSerializationInclusion(JsonInclude.Include.NON_NULL)\r\n      .disable(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS)\r\n      .disable(DeserializationFeature.ADJUST_DATES_TO_CONTEXT_TIME_ZONE)\r\n      .registerModule(PARAMETER_NAMES_MODULE)\r\n      .registerModule(JAVA_TIME_MODULE)\r\n      .registerModule(JDK_8_MODULE);\r\n  }\r\n\r\n  public static final int LZ4_BLOCK_SIZE = 32 * 1024;\r\n\r\n  public static final ObjectMapper LZ4_JSON_MAPPER = configureDefaultObjectMapperForRiak(JsonMapper.builder(new JsonFactoryBuilder()\r\n    .inputDecorator(new InputDecorator()\r\n    {\r\n      @Override\r\n      public InputStream decorate(IOContext context, InputStream inputStream)\r\n      {\r\n        return new LZ4BlockInputStream(new LZ4BlockInputStream(inputStream));\r\n      }\r\n\r\n      @Override\r\n      public InputStream decorate(IOContext context, byte[] bytes, int offset, int length)\r\n      {\r\n        return new LZ4BlockInputStream(new LZ4BlockInputStream(new ByteArrayInputStream(bytes, offset, length)));\r\n      }\r\n\r\n      @Override\r\n      public Reader decorate(IOContext context, Reader reader)\r\n      {\r\n        return new InputStreamReader(new LZ4BlockInputStream(new LZ4BlockInputStream(new ReaderInputStream(reader, UTF_8))), UTF_8);\r\n      }\r\n    })\r\n    .outputDecorator(new OutputDecorator()\r\n    {\r\n      @Override\r\n      public OutputStream decorate(IOContext context, OutputStream outputStream)\r\n      {\r\n        return new LZ4BlockOutputStream(new LZ4BlockOutputStream(outputStream,\r\n          LZ4_BLOCK_SIZE, LZ4Factory.fastestInstance().fastCompressor()),\r\n          LZ4_BLOCK_SIZE, LZ4Factory.fastestInstance().fastCompressor());\r\n      }\r\n\r\n      @Override\r\n      public Writer decorate(IOContext context, Writer writer)\r\n      {\r\n        return new OutputStreamWriter(new LZ4BlockOutputStream(new LZ4BlockOutputStream(new WriterOutputStream(writer, UTF_8),\r\n          LZ4_BLOCK_SIZE, LZ4Factory.fastestInstance().fastCompressor()),\r\n          LZ4_BLOCK_SIZE, LZ4Factory.fastestInstance().fastCompressor())\r\n        );\r\n      }\r\n    }).build()).build());\r\n\r\n  public static final ObjectMapper LZ4_SMILE_MAPPER = configureDefaultObjectMapper(JsonMapper.builder(SmileFactory.builder()\r\n    .disable(ENCODE_BINARY_AS_7BIT)\r\n    .inputDecorator(new InputDecorator()\r\n    {\r\n      @Override\r\n      public InputStream decorate(IOContext context, InputStream inputStream)\r\n      {\r\n        return new LZ4BlockInputStream(new LZ4BlockInputStream(inputStream));\r\n      }\r\n\r\n      @Override\r\n      public InputStream decorate(IOContext context, byte[] bytes, int offset, int length)\r\n      {\r\n        return new LZ4BlockInputStream(new LZ4BlockInputStream(new ByteArrayInputStream(bytes, offset, length)));\r\n      }\r\n\r\n      @Override\r\n      public Reader decorate(IOContext context, Reader reader)\r\n      {\r\n        return new InputStreamReader(new LZ4BlockInputStream(new LZ4BlockInputStream(new ReaderInputStream(reader, UTF_8))), UTF_8);\r\n      }\r\n    })\r\n    .outputDecorator(new OutputDecorator()\r\n    {\r\n      @Override\r\n      public OutputStream decorate(IOContext context, OutputStream outputStream)\r\n      {\r\n        return new LZ4BlockOutputStream(new LZ4BlockOutputStream(outputStream,\r\n          LZ4_BLOCK_SIZE, LZ4Factory.fastestInstance().fastCompressor()),\r\n          LZ4_BLOCK_SIZE, LZ4Factory.fastestInstance().fastCompressor());\r\n      }\r\n\r\n      @Override\r\n      public Writer decorate(IOContext context, Writer writer)\r\n      {\r\n        return new OutputStreamWriter(new LZ4BlockOutputStream(new LZ4BlockOutputStream(new WriterOutputStream(writer, UTF_8),\r\n          LZ4_BLOCK_SIZE, LZ4Factory.fastestInstance().fastCompressor()),\r\n          LZ4_BLOCK_SIZE, LZ4Factory.fastestInstance().fastCompressor())\r\n        );\r\n      }\r\n    }).build()).build());\r\n```","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/comments/668476474/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"guidomedina","id":1789197,"node_id":"MDQ6VXNlcjE3ODkxOTc=","avatar_url":"https://avatars.githubusercontent.com/u/1789197?v=4","gravatar_id":"","url":"https://api.github.com/users/guidomedina","html_url":"https://github.com/guidomedina","followers_url":"https://api.github.com/users/guidomedina/followers","following_url":"https://api.github.com/users/guidomedina/following{/other_user}","gists_url":"https://api.github.com/users/guidomedina/gists{/gist_id}","starred_url":"https://api.github.com/users/guidomedina/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guidomedina/subscriptions","organizations_url":"https://api.github.com/users/guidomedina/orgs","repos_url":"https://api.github.com/users/guidomedina/repos","events_url":"https://api.github.com/users/guidomedina/events{/privacy}","received_events_url":"https://api.github.com/users/guidomedina/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/comments/668505659","html_url":"https://github.com/FasterXML/jackson-dataformats-binary/issues/153#issuecomment-668505659","issue_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/153","id":668505659,"node_id":"MDEyOklzc3VlQ29tbWVudDY2ODUwNTY1OQ==","user":{"login":"guidomedina","id":1789197,"node_id":"MDQ6VXNlcjE3ODkxOTc=","avatar_url":"https://avatars.githubusercontent.com/u/1789197?v=4","gravatar_id":"","url":"https://api.github.com/users/guidomedina","html_url":"https://github.com/guidomedina","followers_url":"https://api.github.com/users/guidomedina/followers","following_url":"https://api.github.com/users/guidomedina/following{/other_user}","gists_url":"https://api.github.com/users/guidomedina/gists{/gist_id}","starred_url":"https://api.github.com/users/guidomedina/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guidomedina/subscriptions","organizations_url":"https://api.github.com/users/guidomedina/orgs","repos_url":"https://api.github.com/users/guidomedina/repos","events_url":"https://api.github.com/users/guidomedina/events{/privacy}","received_events_url":"https://api.github.com/users/guidomedina/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-04T10:02:57Z","updated_at":"2020-08-04T10:02:57Z","body":"The result will vary, I tried with a Json with many repetitions (an array of objects) which Smile will compress very well before reaching the LZ4 or Gzip compression, also; for Gzip I just used the standard JDK implementation, I kind of avoid using Apache common compressors where possible, I have had bad experience with them.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/comments/668505659/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"guidomedina","id":1789197,"node_id":"MDQ6VXNlcjE3ODkxOTc=","avatar_url":"https://avatars.githubusercontent.com/u/1789197?v=4","gravatar_id":"","url":"https://api.github.com/users/guidomedina","html_url":"https://github.com/guidomedina","followers_url":"https://api.github.com/users/guidomedina/followers","following_url":"https://api.github.com/users/guidomedina/following{/other_user}","gists_url":"https://api.github.com/users/guidomedina/gists{/gist_id}","starred_url":"https://api.github.com/users/guidomedina/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/guidomedina/subscriptions","organizations_url":"https://api.github.com/users/guidomedina/orgs","repos_url":"https://api.github.com/users/guidomedina/repos","events_url":"https://api.github.com/users/guidomedina/events{/privacy}","received_events_url":"https://api.github.com/users/guidomedina/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/comments/668707162","html_url":"https://github.com/FasterXML/jackson-dataformats-binary/issues/153#issuecomment-668707162","issue_url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/153","id":668707162,"node_id":"MDEyOklzc3VlQ29tbWVudDY2ODcwNzE2Mg==","user":{"login":"howardem","id":12344960,"node_id":"MDQ6VXNlcjEyMzQ0OTYw","avatar_url":"https://avatars.githubusercontent.com/u/12344960?v=4","gravatar_id":"","url":"https://api.github.com/users/howardem","html_url":"https://github.com/howardem","followers_url":"https://api.github.com/users/howardem/followers","following_url":"https://api.github.com/users/howardem/following{/other_user}","gists_url":"https://api.github.com/users/howardem/gists{/gist_id}","starred_url":"https://api.github.com/users/howardem/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/howardem/subscriptions","organizations_url":"https://api.github.com/users/howardem/orgs","repos_url":"https://api.github.com/users/howardem/repos","events_url":"https://api.github.com/users/howardem/events{/privacy}","received_events_url":"https://api.github.com/users/howardem/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-04T16:48:53Z","updated_at":"2020-08-04T16:48:53Z","body":"Thank so much for posting the code and for your detailed explanation. I'm gonna your configurations and see how it goes!!","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/FasterXML/jackson-dataformats-binary/issues/comments/668707162/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"howardem","id":12344960,"node_id":"MDQ6VXNlcjEyMzQ0OTYw","avatar_url":"https://avatars.githubusercontent.com/u/12344960?v=4","gravatar_id":"","url":"https://api.github.com/users/howardem","html_url":"https://github.com/howardem","followers_url":"https://api.github.com/users/howardem/followers","following_url":"https://api.github.com/users/howardem/following{/other_user}","gists_url":"https://api.github.com/users/howardem/gists{/gist_id}","starred_url":"https://api.github.com/users/howardem/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/howardem/subscriptions","organizations_url":"https://api.github.com/users/howardem/orgs","repos_url":"https://api.github.com/users/howardem/repos","events_url":"https://api.github.com/users/howardem/events{/privacy}","received_events_url":"https://api.github.com/users/howardem/received_events","type":"User","user_view_type":"public","site_admin":false}}]