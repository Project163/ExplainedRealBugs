[{"url":"https://api.github.com/repos/rspec/rspec-core/issues/comments/627875","html_url":"https://github.com/rspec/rspec-core/issues/257#issuecomment-627875","issue_url":"https://api.github.com/repos/rspec/rspec-core/issues/257","id":627875,"node_id":"MDEyOklzc3VlQ29tbWVudDYyNzg3NQ==","user":{"login":"probablykabari","id":3994,"node_id":"MDQ6VXNlcjM5OTQ=","avatar_url":"https://avatars.githubusercontent.com/u/3994?v=4","gravatar_id":"","url":"https://api.github.com/users/probablykabari","html_url":"https://github.com/probablykabari","followers_url":"https://api.github.com/users/probablykabari/followers","following_url":"https://api.github.com/users/probablykabari/following{/other_user}","gists_url":"https://api.github.com/users/probablykabari/gists{/gist_id}","starred_url":"https://api.github.com/users/probablykabari/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/probablykabari/subscriptions","organizations_url":"https://api.github.com/users/probablykabari/orgs","repos_url":"https://api.github.com/users/probablykabari/repos","events_url":"https://api.github.com/users/probablykabari/events{/privacy}","received_events_url":"https://api.github.com/users/probablykabari/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2010-12-21T18:46:35Z","updated_at":"2010-12-21T18:46:35Z","body":"Upon further inspection, this happens when using _any_ mocking framework, including rspec-mocks.\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rspec/rspec-core/issues/comments/627875/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"probablykabari","id":3994,"node_id":"MDQ6VXNlcjM5OTQ=","avatar_url":"https://avatars.githubusercontent.com/u/3994?v=4","gravatar_id":"","url":"https://api.github.com/users/probablykabari","html_url":"https://github.com/probablykabari","followers_url":"https://api.github.com/users/probablykabari/followers","following_url":"https://api.github.com/users/probablykabari/following{/other_user}","gists_url":"https://api.github.com/users/probablykabari/gists{/gist_id}","starred_url":"https://api.github.com/users/probablykabari/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/probablykabari/subscriptions","organizations_url":"https://api.github.com/users/probablykabari/orgs","repos_url":"https://api.github.com/users/probablykabari/repos","events_url":"https://api.github.com/users/probablykabari/events{/privacy}","received_events_url":"https://api.github.com/users/probablykabari/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rspec/rspec-core/issues/comments/631467","html_url":"https://github.com/rspec/rspec-core/issues/257#issuecomment-631467","issue_url":"https://api.github.com/repos/rspec/rspec-core/issues/257","id":631467,"node_id":"MDEyOklzc3VlQ29tbWVudDYzMTQ2Nw==","user":{"login":"dchelimsky","id":1075,"node_id":"MDQ6VXNlcjEwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1075?v=4","gravatar_id":"","url":"https://api.github.com/users/dchelimsky","html_url":"https://github.com/dchelimsky","followers_url":"https://api.github.com/users/dchelimsky/followers","following_url":"https://api.github.com/users/dchelimsky/following{/other_user}","gists_url":"https://api.github.com/users/dchelimsky/gists{/gist_id}","starred_url":"https://api.github.com/users/dchelimsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dchelimsky/subscriptions","organizations_url":"https://api.github.com/users/dchelimsky/orgs","repos_url":"https://api.github.com/users/dchelimsky/repos","events_url":"https://api.github.com/users/dchelimsky/events{/privacy}","received_events_url":"https://api.github.com/users/dchelimsky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2010-12-23T04:49:45Z","updated_at":"2010-12-23T04:49:45Z","body":"This is a tricky one!\n\nThe problem is that mocks get verified at the end of the example unless something raises an error before verification. In this example, an error occurs after the expectation is set, but before it is verified. The pending method captures the error, so it is happy, and passes on control to the surrounding example, which then verifies the expectation.\n\nWithout the error after the expectation, the expectation is never verified within the pending block, so no error is raised from the pending block, so _it_ raises an error before we ever have a chance to verify the message expectation. Then we get the \"expected to fail but didn't\" message, but as soon as we remove the surrounding pending block, the message expectation fails.\n\nWe need some way to verify mocks _within_ the execution of the block in this case. Not sure how that would work yet, but does that make sense to you?\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rspec/rspec-core/issues/comments/631467/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dchelimsky","id":1075,"node_id":"MDQ6VXNlcjEwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1075?v=4","gravatar_id":"","url":"https://api.github.com/users/dchelimsky","html_url":"https://github.com/dchelimsky","followers_url":"https://api.github.com/users/dchelimsky/followers","following_url":"https://api.github.com/users/dchelimsky/following{/other_user}","gists_url":"https://api.github.com/users/dchelimsky/gists{/gist_id}","starred_url":"https://api.github.com/users/dchelimsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dchelimsky/subscriptions","organizations_url":"https://api.github.com/users/dchelimsky/orgs","repos_url":"https://api.github.com/users/dchelimsky/repos","events_url":"https://api.github.com/users/dchelimsky/events{/privacy}","received_events_url":"https://api.github.com/users/dchelimsky/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rspec/rspec-core/issues/comments/632311","html_url":"https://github.com/rspec/rspec-core/issues/257#issuecomment-632311","issue_url":"https://api.github.com/repos/rspec/rspec-core/issues/257","id":632311,"node_id":"MDEyOklzc3VlQ29tbWVudDYzMjMxMQ==","user":{"login":"probablykabari","id":3994,"node_id":"MDQ6VXNlcjM5OTQ=","avatar_url":"https://avatars.githubusercontent.com/u/3994?v=4","gravatar_id":"","url":"https://api.github.com/users/probablykabari","html_url":"https://github.com/probablykabari","followers_url":"https://api.github.com/users/probablykabari/followers","following_url":"https://api.github.com/users/probablykabari/following{/other_user}","gists_url":"https://api.github.com/users/probablykabari/gists{/gist_id}","starred_url":"https://api.github.com/users/probablykabari/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/probablykabari/subscriptions","organizations_url":"https://api.github.com/users/probablykabari/orgs","repos_url":"https://api.github.com/users/probablykabari/repos","events_url":"https://api.github.com/users/probablykabari/events{/privacy}","received_events_url":"https://api.github.com/users/probablykabari/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2010-12-23T15:54:44Z","updated_at":"2010-12-23T15:54:44Z","body":"Yep, I figured that part out (after quite a bit of head scratching). I'm trying to figure out how to make it work within #with_pending_capture, rather than trying to catch a different error outside of that block. I also don't quite understand how/where errors get changed from SomeFramework::ExpectationError to RSpec::Expectations::ExpectationNotMetError either.\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rspec/rspec-core/issues/comments/632311/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"probablykabari","id":3994,"node_id":"MDQ6VXNlcjM5OTQ=","avatar_url":"https://avatars.githubusercontent.com/u/3994?v=4","gravatar_id":"","url":"https://api.github.com/users/probablykabari","html_url":"https://github.com/probablykabari","followers_url":"https://api.github.com/users/probablykabari/followers","following_url":"https://api.github.com/users/probablykabari/following{/other_user}","gists_url":"https://api.github.com/users/probablykabari/gists{/gist_id}","starred_url":"https://api.github.com/users/probablykabari/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/probablykabari/subscriptions","organizations_url":"https://api.github.com/users/probablykabari/orgs","repos_url":"https://api.github.com/users/probablykabari/repos","events_url":"https://api.github.com/users/probablykabari/events{/privacy}","received_events_url":"https://api.github.com/users/probablykabari/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":233013,"node_id":"MDExOkNsb3NlZEV2ZW50MjMzMDEz","url":"https://api.github.com/repos/rspec/rspec-core/issues/events/233013","actor":{"login":"dchelimsky","id":1075,"node_id":"MDQ6VXNlcjEwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1075?v=4","gravatar_id":"","url":"https://api.github.com/users/dchelimsky","html_url":"https://github.com/dchelimsky","followers_url":"https://api.github.com/users/dchelimsky/followers","following_url":"https://api.github.com/users/dchelimsky/following{/other_user}","gists_url":"https://api.github.com/users/dchelimsky/gists{/gist_id}","starred_url":"https://api.github.com/users/dchelimsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dchelimsky/subscriptions","organizations_url":"https://api.github.com/users/dchelimsky/orgs","repos_url":"https://api.github.com/users/dchelimsky/repos","events_url":"https://api.github.com/users/dchelimsky/events{/privacy}","received_events_url":"https://api.github.com/users/dchelimsky/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"644e372968cd2f6aa641eb3584e87fb091a4e3c9","commit_url":"https://api.github.com/repos/rspec/rspec-core/commits/644e372968cd2f6aa641eb3584e87fb091a4e3c9","created_at":"2011-04-13T11:56:56Z","state_reason":null,"performed_via_github_app":null},{"id":274352,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDI3NDM1Mg==","url":"https://api.github.com/repos/rspec/rspec-core/issues/events/274352","actor":{"login":"kaiwren","id":19141,"node_id":"MDQ6VXNlcjE5MTQx","avatar_url":"https://avatars.githubusercontent.com/u/19141?v=4","gravatar_id":"","url":"https://api.github.com/users/kaiwren","html_url":"https://github.com/kaiwren","followers_url":"https://api.github.com/users/kaiwren/followers","following_url":"https://api.github.com/users/kaiwren/following{/other_user}","gists_url":"https://api.github.com/users/kaiwren/gists{/gist_id}","starred_url":"https://api.github.com/users/kaiwren/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/kaiwren/subscriptions","organizations_url":"https://api.github.com/users/kaiwren/orgs","repos_url":"https://api.github.com/users/kaiwren/repos","events_url":"https://api.github.com/users/kaiwren/events{/privacy}","received_events_url":"https://api.github.com/users/kaiwren/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"644e372968cd2f6aa641eb3584e87fb091a4e3c9","commit_url":"https://api.github.com/repos/rspec/rspec-core/commits/644e372968cd2f6aa641eb3584e87fb091a4e3c9","created_at":"2011-04-16T10:26:23Z","performed_via_github_app":null}]