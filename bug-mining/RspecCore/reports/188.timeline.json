[{"url":"https://api.github.com/repos/rspec/rspec-core/issues/comments/14000551","html_url":"https://github.com/rspec/rspec-core/issues/799#issuecomment-14000551","issue_url":"https://api.github.com/repos/rspec/rspec-core/issues/799","id":14000551,"node_id":"MDEyOklzc3VlQ29tbWVudDE0MDAwNTUx","user":{"login":"moll","id":156837,"node_id":"MDQ6VXNlcjE1NjgzNw==","avatar_url":"https://avatars.githubusercontent.com/u/156837?v=4","gravatar_id":"","url":"https://api.github.com/users/moll","html_url":"https://github.com/moll","followers_url":"https://api.github.com/users/moll/followers","following_url":"https://api.github.com/users/moll/following{/other_user}","gists_url":"https://api.github.com/users/moll/gists{/gist_id}","starred_url":"https://api.github.com/users/moll/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/moll/subscriptions","organizations_url":"https://api.github.com/users/moll/orgs","repos_url":"https://api.github.com/users/moll/repos","events_url":"https://api.github.com/users/moll/events{/privacy}","received_events_url":"https://api.github.com/users/moll/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2013-02-23T23:50:36Z","updated_at":"2013-02-23T23:50:36Z","body":"Though I couldn't even get them working by `dup` or `clone`ing. Is there something in RSpec that prevents a single lambda hook from running twice?\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rspec/rspec-core/issues/comments/14000551/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"moll","id":156837,"node_id":"MDQ6VXNlcjE1NjgzNw==","avatar_url":"https://avatars.githubusercontent.com/u/156837?v=4","gravatar_id":"","url":"https://api.github.com/users/moll","html_url":"https://github.com/moll","followers_url":"https://api.github.com/users/moll/followers","following_url":"https://api.github.com/users/moll/following{/other_user}","gists_url":"https://api.github.com/users/moll/gists{/gist_id}","starred_url":"https://api.github.com/users/moll/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/moll/subscriptions","organizations_url":"https://api.github.com/users/moll/orgs","repos_url":"https://api.github.com/users/moll/repos","events_url":"https://api.github.com/users/moll/events{/privacy}","received_events_url":"https://api.github.com/users/moll/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rspec/rspec-core/issues/comments/14000854","html_url":"https://github.com/rspec/rspec-core/issues/799#issuecomment-14000854","issue_url":"https://api.github.com/repos/rspec/rspec-core/issues/799","id":14000854,"node_id":"MDEyOklzc3VlQ29tbWVudDE0MDAwODU0","user":{"login":"dchelimsky","id":1075,"node_id":"MDQ6VXNlcjEwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1075?v=4","gravatar_id":"","url":"https://api.github.com/users/dchelimsky","html_url":"https://github.com/dchelimsky","followers_url":"https://api.github.com/users/dchelimsky/followers","following_url":"https://api.github.com/users/dchelimsky/following{/other_user}","gists_url":"https://api.github.com/users/dchelimsky/gists{/gist_id}","starred_url":"https://api.github.com/users/dchelimsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dchelimsky/subscriptions","organizations_url":"https://api.github.com/users/dchelimsky/orgs","repos_url":"https://api.github.com/users/dchelimsky/repos","events_url":"https://api.github.com/users/dchelimsky/events{/privacy}","received_events_url":"https://api.github.com/users/dchelimsky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2013-02-24T00:14:57Z","updated_at":"2013-02-24T00:14:57Z","body":"There is no intention to disallow lambdas from running twice, but common usage is `config.around { ... }`, not `config.around &reusable_lambda`, so this has never presented a problem before (at least not one that was reported).\n\nI'm curious - what is it that you're trying to do? Wondering if there's a way to accomplish the same in a different way.\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rspec/rspec-core/issues/comments/14000854/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dchelimsky","id":1075,"node_id":"MDQ6VXNlcjEwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1075?v=4","gravatar_id":"","url":"https://api.github.com/users/dchelimsky","html_url":"https://github.com/dchelimsky","followers_url":"https://api.github.com/users/dchelimsky/followers","following_url":"https://api.github.com/users/dchelimsky/following{/other_user}","gists_url":"https://api.github.com/users/dchelimsky/gists{/gist_id}","starred_url":"https://api.github.com/users/dchelimsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dchelimsky/subscriptions","organizations_url":"https://api.github.com/users/dchelimsky/orgs","repos_url":"https://api.github.com/users/dchelimsky/repos","events_url":"https://api.github.com/users/dchelimsky/events{/privacy}","received_events_url":"https://api.github.com/users/dchelimsky/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rspec/rspec-core/issues/comments/14000984","html_url":"https://github.com/rspec/rspec-core/issues/799#issuecomment-14000984","issue_url":"https://api.github.com/repos/rspec/rspec-core/issues/799","id":14000984,"node_id":"MDEyOklzc3VlQ29tbWVudDE0MDAwOTg0","user":{"login":"dchelimsky","id":1075,"node_id":"MDQ6VXNlcjEwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1075?v=4","gravatar_id":"","url":"https://api.github.com/users/dchelimsky","html_url":"https://github.com/dchelimsky","followers_url":"https://api.github.com/users/dchelimsky/followers","following_url":"https://api.github.com/users/dchelimsky/following{/other_user}","gists_url":"https://api.github.com/users/dchelimsky/gists{/gist_id}","starred_url":"https://api.github.com/users/dchelimsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dchelimsky/subscriptions","organizations_url":"https://api.github.com/users/dchelimsky/orgs","repos_url":"https://api.github.com/users/dchelimsky/repos","events_url":"https://api.github.com/users/dchelimsky/events{/privacy}","received_events_url":"https://api.github.com/users/dchelimsky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2013-02-24T00:25:15Z","updated_at":"2013-02-24T00:25:15Z","body":"FYI - from what I can tell it won't even run once, so I think `extend` is not the source of the problem.\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rspec/rspec-core/issues/comments/14000984/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dchelimsky","id":1075,"node_id":"MDQ6VXNlcjEwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1075?v=4","gravatar_id":"","url":"https://api.github.com/users/dchelimsky","html_url":"https://github.com/dchelimsky","followers_url":"https://api.github.com/users/dchelimsky/followers","following_url":"https://api.github.com/users/dchelimsky/following{/other_user}","gists_url":"https://api.github.com/users/dchelimsky/gists{/gist_id}","starred_url":"https://api.github.com/users/dchelimsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dchelimsky/subscriptions","organizations_url":"https://api.github.com/users/dchelimsky/orgs","repos_url":"https://api.github.com/users/dchelimsky/repos","events_url":"https://api.github.com/users/dchelimsky/events{/privacy}","received_events_url":"https://api.github.com/users/dchelimsky/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rspec/rspec-core/issues/comments/14001138","html_url":"https://github.com/rspec/rspec-core/issues/799#issuecomment-14001138","issue_url":"https://api.github.com/repos/rspec/rspec-core/issues/799","id":14001138,"node_id":"MDEyOklzc3VlQ29tbWVudDE0MDAxMTM4","user":{"login":"dchelimsky","id":1075,"node_id":"MDQ6VXNlcjEwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1075?v=4","gravatar_id":"","url":"https://api.github.com/users/dchelimsky","html_url":"https://github.com/dchelimsky","followers_url":"https://api.github.com/users/dchelimsky/followers","following_url":"https://api.github.com/users/dchelimsky/following{/other_user}","gists_url":"https://api.github.com/users/dchelimsky/gists{/gist_id}","starred_url":"https://api.github.com/users/dchelimsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dchelimsky/subscriptions","organizations_url":"https://api.github.com/users/dchelimsky/orgs","repos_url":"https://api.github.com/users/dchelimsky/repos","events_url":"https://api.github.com/users/dchelimsky/events{/privacy}","received_events_url":"https://api.github.com/users/dchelimsky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2013-02-24T00:38:58Z","updated_at":"2013-02-24T00:38:58Z","body":"Nevermind my last comment.\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rspec/rspec-core/issues/comments/14001138/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dchelimsky","id":1075,"node_id":"MDQ6VXNlcjEwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1075?v=4","gravatar_id":"","url":"https://api.github.com/users/dchelimsky","html_url":"https://github.com/dchelimsky","followers_url":"https://api.github.com/users/dchelimsky/followers","following_url":"https://api.github.com/users/dchelimsky/following{/other_user}","gists_url":"https://api.github.com/users/dchelimsky/gists{/gist_id}","starred_url":"https://api.github.com/users/dchelimsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dchelimsky/subscriptions","organizations_url":"https://api.github.com/users/dchelimsky/orgs","repos_url":"https://api.github.com/users/dchelimsky/repos","events_url":"https://api.github.com/users/dchelimsky/events{/privacy}","received_events_url":"https://api.github.com/users/dchelimsky/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rspec/rspec-core/issues/comments/14006016","html_url":"https://github.com/rspec/rspec-core/issues/799#issuecomment-14006016","issue_url":"https://api.github.com/repos/rspec/rspec-core/issues/799","id":14006016,"node_id":"MDEyOklzc3VlQ29tbWVudDE0MDA2MDE2","user":{"login":"moll","id":156837,"node_id":"MDQ6VXNlcjE1NjgzNw==","avatar_url":"https://avatars.githubusercontent.com/u/156837?v=4","gravatar_id":"","url":"https://api.github.com/users/moll","html_url":"https://github.com/moll","followers_url":"https://api.github.com/users/moll/followers","following_url":"https://api.github.com/users/moll/following{/other_user}","gists_url":"https://api.github.com/users/moll/gists{/gist_id}","starred_url":"https://api.github.com/users/moll/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/moll/subscriptions","organizations_url":"https://api.github.com/users/moll/orgs","repos_url":"https://api.github.com/users/moll/repos","events_url":"https://api.github.com/users/moll/events{/privacy}","received_events_url":"https://api.github.com/users/moll/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2013-02-24T09:50:46Z","updated_at":"2013-02-24T09:50:46Z","body":"I was using it for something similar:\n\n``` ruby\nconfig.around(:each, :tag1, &do_something)\n...\nconfig.around(:each, :tag2, &do_something)\n```\n\nAs a workaround I wrote a single lambda that did its conditional logic with `example.metadata`, but I still didn't find out why the last `config.around` even with `do_something.clone` clobbered the previous ones.\n\nHowever, I think modifying passed values is not kosher in any case and RSpec should do `clone` before. :)\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rspec/rspec-core/issues/comments/14006016/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"moll","id":156837,"node_id":"MDQ6VXNlcjE1NjgzNw==","avatar_url":"https://avatars.githubusercontent.com/u/156837?v=4","gravatar_id":"","url":"https://api.github.com/users/moll","html_url":"https://github.com/moll","followers_url":"https://api.github.com/users/moll/followers","following_url":"https://api.github.com/users/moll/following{/other_user}","gists_url":"https://api.github.com/users/moll/gists{/gist_id}","starred_url":"https://api.github.com/users/moll/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/moll/subscriptions","organizations_url":"https://api.github.com/users/moll/orgs","repos_url":"https://api.github.com/users/moll/repos","events_url":"https://api.github.com/users/moll/events{/privacy}","received_events_url":"https://api.github.com/users/moll/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rspec/rspec-core/issues/comments/14008847","html_url":"https://github.com/rspec/rspec-core/issues/799#issuecomment-14008847","issue_url":"https://api.github.com/repos/rspec/rspec-core/issues/799","id":14008847,"node_id":"MDEyOklzc3VlQ29tbWVudDE0MDA4ODQ3","user":{"login":"dchelimsky","id":1075,"node_id":"MDQ6VXNlcjEwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1075?v=4","gravatar_id":"","url":"https://api.github.com/users/dchelimsky","html_url":"https://github.com/dchelimsky","followers_url":"https://api.github.com/users/dchelimsky/followers","following_url":"https://api.github.com/users/dchelimsky/following{/other_user}","gists_url":"https://api.github.com/users/dchelimsky/gists{/gist_id}","starred_url":"https://api.github.com/users/dchelimsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dchelimsky/subscriptions","organizations_url":"https://api.github.com/users/dchelimsky/orgs","repos_url":"https://api.github.com/users/dchelimsky/repos","events_url":"https://api.github.com/users/dchelimsky/events{/privacy}","received_events_url":"https://api.github.com/users/dchelimsky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2013-02-24T14:07:28Z","updated_at":"2013-02-24T14:07:28Z","body":"I think it's a fair criticism, but I don't think it's as simple as cloning or duping. I tried and it didn't solve the problem (as you experienced when you tried same from outside rspec). I'll try some other approaches and get back to you, but I think the solution is going to be to refactor the entire hook filtering mechanism. As it is today, the blocks are extended such that filters can interact with them directly. We'll need to, instead, wrap them in a proxy of some sort that maintains the filter criteria to evaluate.\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rspec/rspec-core/issues/comments/14008847/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dchelimsky","id":1075,"node_id":"MDQ6VXNlcjEwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1075?v=4","gravatar_id":"","url":"https://api.github.com/users/dchelimsky","html_url":"https://github.com/dchelimsky","followers_url":"https://api.github.com/users/dchelimsky/followers","following_url":"https://api.github.com/users/dchelimsky/following{/other_user}","gists_url":"https://api.github.com/users/dchelimsky/gists{/gist_id}","starred_url":"https://api.github.com/users/dchelimsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dchelimsky/subscriptions","organizations_url":"https://api.github.com/users/dchelimsky/orgs","repos_url":"https://api.github.com/users/dchelimsky/repos","events_url":"https://api.github.com/users/dchelimsky/events{/privacy}","received_events_url":"https://api.github.com/users/dchelimsky/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rspec/rspec-core/issues/comments/14010202","html_url":"https://github.com/rspec/rspec-core/issues/799#issuecomment-14010202","issue_url":"https://api.github.com/repos/rspec/rspec-core/issues/799","id":14010202,"node_id":"MDEyOklzc3VlQ29tbWVudDE0MDEwMjAy","user":{"login":"dchelimsky","id":1075,"node_id":"MDQ6VXNlcjEwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1075?v=4","gravatar_id":"","url":"https://api.github.com/users/dchelimsky","html_url":"https://github.com/dchelimsky","followers_url":"https://api.github.com/users/dchelimsky/followers","following_url":"https://api.github.com/users/dchelimsky/following{/other_user}","gists_url":"https://api.github.com/users/dchelimsky/gists{/gist_id}","starred_url":"https://api.github.com/users/dchelimsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dchelimsky/subscriptions","organizations_url":"https://api.github.com/users/dchelimsky/orgs","repos_url":"https://api.github.com/users/dchelimsky/repos","events_url":"https://api.github.com/users/dchelimsky/events{/privacy}","received_events_url":"https://api.github.com/users/dchelimsky/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2013-02-24T15:41:59Z","updated_at":"2013-02-24T15:41:59Z","body":"Here's a quick and dirty proof of concept to show that a proxy works: 4e735e1\n\nFeel free to point your Gemfile to that commit for now, and I'll work on a more holistic solution.\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rspec/rspec-core/issues/comments/14010202/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dchelimsky","id":1075,"node_id":"MDQ6VXNlcjEwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1075?v=4","gravatar_id":"","url":"https://api.github.com/users/dchelimsky","html_url":"https://github.com/dchelimsky","followers_url":"https://api.github.com/users/dchelimsky/followers","following_url":"https://api.github.com/users/dchelimsky/following{/other_user}","gists_url":"https://api.github.com/users/dchelimsky/gists{/gist_id}","starred_url":"https://api.github.com/users/dchelimsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dchelimsky/subscriptions","organizations_url":"https://api.github.com/users/dchelimsky/orgs","repos_url":"https://api.github.com/users/dchelimsky/repos","events_url":"https://api.github.com/users/dchelimsky/events{/privacy}","received_events_url":"https://api.github.com/users/dchelimsky/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":39010922,"node_id":"MDExOkNsb3NlZEV2ZW50MzkwMTA5MjI=","url":"https://api.github.com/repos/rspec/rspec-core/issues/events/39010922","actor":{"login":"dchelimsky","id":1075,"node_id":"MDQ6VXNlcjEwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1075?v=4","gravatar_id":"","url":"https://api.github.com/users/dchelimsky","html_url":"https://github.com/dchelimsky","followers_url":"https://api.github.com/users/dchelimsky/followers","following_url":"https://api.github.com/users/dchelimsky/following{/other_user}","gists_url":"https://api.github.com/users/dchelimsky/gists{/gist_id}","starred_url":"https://api.github.com/users/dchelimsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dchelimsky/subscriptions","organizations_url":"https://api.github.com/users/dchelimsky/orgs","repos_url":"https://api.github.com/users/dchelimsky/repos","events_url":"https://api.github.com/users/dchelimsky/events{/privacy}","received_events_url":"https://api.github.com/users/dchelimsky/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"0c56b9b3e5dc1b5457814db1de31032ca012f839","commit_url":"https://api.github.com/repos/rspec/rspec-core/commits/0c56b9b3e5dc1b5457814db1de31032ca012f839","created_at":"2013-02-24T16:00:43Z","state_reason":null,"performed_via_github_app":null},{"id":39011072,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDM5MDExMDcy","url":"https://api.github.com/repos/rspec/rspec-core/issues/events/39011072","actor":{"login":"dchelimsky","id":1075,"node_id":"MDQ6VXNlcjEwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1075?v=4","gravatar_id":"","url":"https://api.github.com/users/dchelimsky","html_url":"https://github.com/dchelimsky","followers_url":"https://api.github.com/users/dchelimsky/followers","following_url":"https://api.github.com/users/dchelimsky/following{/other_user}","gists_url":"https://api.github.com/users/dchelimsky/gists{/gist_id}","starred_url":"https://api.github.com/users/dchelimsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dchelimsky/subscriptions","organizations_url":"https://api.github.com/users/dchelimsky/orgs","repos_url":"https://api.github.com/users/dchelimsky/repos","events_url":"https://api.github.com/users/dchelimsky/events{/privacy}","received_events_url":"https://api.github.com/users/dchelimsky/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"b486d2836cb425ae794fdd54d9fe84dd3df7809b","commit_url":"https://api.github.com/repos/rspec/rspec-core/commits/b486d2836cb425ae794fdd54d9fe84dd3df7809b","created_at":"2013-02-24T16:04:20Z","performed_via_github_app":null}]