{"url":"https://api.github.com/repos/rspec/rspec-core/issues/2488","repository_url":"https://api.github.com/repos/rspec/rspec-core","labels_url":"https://api.github.com/repos/rspec/rspec-core/issues/2488/labels{/name}","comments_url":"https://api.github.com/repos/rspec/rspec-core/issues/2488/comments","events_url":"https://api.github.com/repos/rspec/rspec-core/issues/2488/events","html_url":"https://github.com/rspec/rspec-core/issues/2488","id":284513564,"node_id":"MDU6SXNzdWUyODQ1MTM1NjQ=","number":2488,"title":"Test failures with ruby 2.5.0","user":{"login":"graaff","id":11150,"node_id":"MDQ6VXNlcjExMTUw","avatar_url":"https://avatars.githubusercontent.com/u/11150?v=4","gravatar_id":"","url":"https://api.github.com/users/graaff","html_url":"https://github.com/graaff","followers_url":"https://api.github.com/users/graaff/followers","following_url":"https://api.github.com/users/graaff/following{/other_user}","gists_url":"https://api.github.com/users/graaff/gists{/gist_id}","starred_url":"https://api.github.com/users/graaff/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/graaff/subscriptions","organizations_url":"https://api.github.com/users/graaff/orgs","repos_url":"https://api.github.com/users/graaff/repos","events_url":"https://api.github.com/users/graaff/events{/privacy}","received_events_url":"https://api.github.com/users/graaff/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2017-12-26T08:06:18Z","updated_at":"2018-01-02T06:00:26Z","closed_at":"2018-01-02T06:00:26Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"With ruby 2.5.0p0 (2017-12-25 revision 61468) [x86_64-linux] I'm seeing the following test failures with the released version of 3.7.0:\r\n\r\n```\r\n  1) RSpec behaves like library wide checks issues no warnings when the spec files are loaded\r\n     Failure/Error: @example_group_instance.instance_exec(self, &@example_block)\r\n     \r\n       expected: [\"\", \"\", 0]\r\n            got: [\"\", \"/var/tmp/portage/dev-ruby/rspec-core-3.7.0/work/ruby25/rspec-core-3.7.0/spec/rspec/core/metadat...y25/rspec-core-3.7.0/spec/rspec/core_spec.rb:250: warning: assigned but unused variable - group\", 0]\r\n     \r\n       (compared using ==)\r\n     Shared Example Group: \"library wide checks\" called from ./spec/rspec/core_spec.rb:31\r\n     # ./spec/support/sandboxing.rb:16:in `block (3 levels) in <top (required)>'\r\n     # ./spec/support/sandboxing.rb:7:in `block (2 levels) in <top (required)>'\r\n\r\n  2) config block hook filtering when hooks are defined after a group has been defined applies only to groups with matching metadata\r\n     Failure/Error:\r\n       expect(sequence).to eq [\r\n         :before_cont_1, :before_cont_2,\r\n         :around_before_ex, :before_ex_1, :before_ex_2, :ex_1, :after_ex_1, :after_ex_2, :around_after_ex,\r\n         :around_before_ex, :before_ex_1, :before_ex_2, :ex_2, :after_ex_1, :after_ex_2, :around_after_ex,\r\n         :after_cont_1, :after_cont_2\r\n       ]\r\n     \r\n       expected: [:before_cont_1, :before_cont_2, :around_before_ex, :before_ex_1, :before_ex_2, :ex_1, :after_ex_1, :...ex_1, :before_ex_2, :ex_2, :after_ex_1, :after_ex_2, :around_after_ex, :after_cont_1, :after_cont_2]\r\n            got: [:before_cont_1, :before_cont_2, :before_cont_1, :before_cont_2, :around_before_ex, :before_ex_1, :be...ter_ex_1, :after_ex_2, :around_after_ex, :after_cont_1, :after_cont_2, :after_cont_1, :after_cont_2]\r\n     \r\n       (compared using ==)\r\n     \r\n       Diff:\r\n       @@ -1,5 +1,7 @@\r\n        [:before_cont_1,\r\n         :before_cont_2,\r\n       + :before_cont_1,\r\n       + :before_cont_2,\r\n         :around_before_ex,\r\n         :before_ex_1,\r\n         :before_ex_2,\r\n       @@ -7,6 +9,10 @@\r\n         :after_ex_1,\r\n         :after_ex_2,\r\n         :around_after_ex,\r\n       + :after_cont_1,\r\n       + :after_cont_2,\r\n       + :before_cont_1,\r\n       + :before_cont_2,\r\n         :around_before_ex,\r\n         :before_ex_1,\r\n         :before_ex_2,\r\n       @@ -14,6 +20,8 @@\r\n         :after_ex_1,\r\n         :after_ex_2,\r\n         :around_after_ex,\r\n       + :after_cont_1,\r\n       + :after_cont_2,\r\n         :after_cont_1,\r\n         :after_cont_2]\r\n     # ./spec/rspec/core/hooks_filtering_spec.rb:78:in `block (3 levels) in <module:Core>'\r\n     # ./spec/support/sandboxing.rb:16:in `block (3 levels) in <top (required)>'\r\n     # ./spec/support/sandboxing.rb:7:in `block (2 levels) in <top (required)>'\r\n\r\n  3) config block hook filtering when hooks are defined after a group has been defined only runs context hooks around the highest level group with matching filters\r\n     Failure/Error: expect(sequence).to eq [:before_context, :before_hook, :example, :after_hook, :after_context]\r\n     \r\n       expected: [:before_context, :before_hook, :example, :after_hook, :after_context]\r\n            got: [:before_context, :before_hook, :before_hook, :example, :after_hook, :after_hook, :after_context]\r\n     \r\n       (compared using ==)\r\n     \r\n       Diff:\r\n       @@ -1,2 +1,8 @@\r\n       -[:before_context, :before_hook, :example, :after_hook, :after_context]\r\n       +[:before_context,\r\n       + :before_hook,\r\n       + :before_hook,\r\n       + :example,\r\n       + :after_hook,\r\n       + :after_hook,\r\n       + :after_context]\r\n     # ./spec/rspec/core/hooks_filtering_spec.rb:189:in `block (3 levels) in <module:Core>'\r\n     # ./spec/support/sandboxing.rb:16:in `block (3 levels) in <top (required)>'\r\n     # ./spec/support/sandboxing.rb:7:in `block (2 levels) in <top (required)>'\r\n\r\n  4) config block hook filtering when hooks are defined after a group has been defined still applies\r\n     Failure/Error:\r\n       expect(sequence).to eq [\r\n         :before_cont_1, :before_cont_2,\r\n         :around_before_ex, :before_ex_1, :before_ex_2, :ex_1, :after_ex_1, :after_ex_2, :around_after_ex,\r\n         :around_before_ex, :before_ex_1, :before_ex_2, :ex_2, :after_ex_1, :after_ex_2, :around_after_ex,\r\n         :after_cont_1, :after_cont_2\r\n       ]\r\n     \r\n       expected: [:before_cont_1, :before_cont_2, :around_before_ex, :before_ex_1, :before_ex_2, :ex_1, :after_ex_1, :...ex_1, :before_ex_2, :ex_2, :after_ex_1, :after_ex_2, :around_after_ex, :after_cont_1, :after_cont_2]\r\n            got: [:before_cont_1, :before_cont_2, :before_cont_1, :before_cont_2, :around_before_ex, :before_ex_1, :be...ter_ex_1, :after_ex_2, :around_after_ex, :after_cont_1, :after_cont_2, :after_cont_1, :after_cont_2]\r\n     \r\n       (compared using ==)\r\n     \r\n       Diff:\r\n       @@ -1,5 +1,7 @@\r\n        [:before_cont_1,\r\n         :before_cont_2,\r\n       + :before_cont_1,\r\n       + :before_cont_2,\r\n         :around_before_ex,\r\n         :before_ex_1,\r\n         :before_ex_2,\r\n       @@ -7,6 +9,10 @@\r\n         :after_ex_1,\r\n         :after_ex_2,\r\n         :around_after_ex,\r\n       + :after_cont_1,\r\n       + :after_cont_2,\r\n       + :before_cont_1,\r\n       + :before_cont_2,\r\n         :around_before_ex,\r\n         :before_ex_1,\r\n         :before_ex_2,\r\n       @@ -14,6 +20,8 @@\r\n         :after_ex_1,\r\n         :after_ex_2,\r\n         :around_after_ex,\r\n       + :after_cont_1,\r\n       + :after_cont_2,\r\n         :after_cont_1,\r\n         :after_cont_2]\r\n     # ./spec/rspec/core/hooks_filtering_spec.rb:34:in `block (3 levels) in <module:Core>'\r\n     # ./spec/support/sandboxing.rb:16:in `block (3 levels) in <top (required)>'\r\n     # ./spec/support/sandboxing.rb:7:in `block (2 levels) in <top (required)>'\r\n\r\n  5) RSpec::Core::Example#run leaves raised exceptions unmodified (GH-1103)\r\n     Failure/Error: expect(actual.__id__).to eq(exception.__id__)\r\n     \r\n       expected: 47445621819560\r\n            got: 47445621797760\r\n     \r\n       (compared using ==)\r\n     # ./spec/rspec/core/example_spec.rb:519:in `block (3 levels) in <top (required)>'\r\n     # ./spec/support/sandboxing.rb:16:in `block (3 levels) in <top (required)>'\r\n     # ./spec/support/sandboxing.rb:7:in `block (2 levels) in <top (required)>'\r\n\r\n  6) Module#define_method is still a private method\r\n     Failure/Error: expect { a_module.define_method(:name) { \"implementation\" } }.to raise_error NoMethodError\r\n       expected NoMethodError but nothing was raised\r\n     # ./spec/rspec/core/memoized_helpers_spec.rb:636:in `block (2 levels) in <module:Core>'\r\n     # ./spec/support/sandboxing.rb:16:in `block (3 levels) in <top (required)>'\r\n     # ./spec/support/sandboxing.rb:7:in `block (2 levels) in <top (required)>'\r\n```","closed_by":{"login":"myronmarston","id":49391,"node_id":"MDQ6VXNlcjQ5Mzkx","avatar_url":"https://avatars.githubusercontent.com/u/49391?v=4","gravatar_id":"","url":"https://api.github.com/users/myronmarston","html_url":"https://github.com/myronmarston","followers_url":"https://api.github.com/users/myronmarston/followers","following_url":"https://api.github.com/users/myronmarston/following{/other_user}","gists_url":"https://api.github.com/users/myronmarston/gists{/gist_id}","starred_url":"https://api.github.com/users/myronmarston/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/myronmarston/subscriptions","organizations_url":"https://api.github.com/users/myronmarston/orgs","repos_url":"https://api.github.com/users/myronmarston/repos","events_url":"https://api.github.com/users/myronmarston/events{/privacy}","received_events_url":"https://api.github.com/users/myronmarston/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/rspec/rspec-core/issues/2488/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rspec/rspec-core/issues/2488/timeline","performed_via_github_app":null,"state_reason":"completed"}