{"url":"https://api.github.com/repos/rspec/rspec-core/issues/1744","repository_url":"https://api.github.com/repos/rspec/rspec-core","labels_url":"https://api.github.com/repos/rspec/rspec-core/issues/1744/labels{/name}","comments_url":"https://api.github.com/repos/rspec/rspec-core/issues/1744/comments","events_url":"https://api.github.com/repos/rspec/rspec-core/issues/1744/events","html_url":"https://github.com/rspec/rspec-core/issues/1744","id":46478261,"node_id":"MDU6SXNzdWU0NjQ3ODI2MQ==","number":1744,"title":"Seed value incorrect in `--require`d files","user":{"login":"iangreenleaf","id":78887,"node_id":"MDQ6VXNlcjc4ODg3","avatar_url":"https://avatars.githubusercontent.com/u/78887?v=4","gravatar_id":"","url":"https://api.github.com/users/iangreenleaf","html_url":"https://github.com/iangreenleaf","followers_url":"https://api.github.com/users/iangreenleaf/followers","following_url":"https://api.github.com/users/iangreenleaf/following{/other_user}","gists_url":"https://api.github.com/users/iangreenleaf/gists{/gist_id}","starred_url":"https://api.github.com/users/iangreenleaf/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/iangreenleaf/subscriptions","organizations_url":"https://api.github.com/users/iangreenleaf/orgs","repos_url":"https://api.github.com/users/iangreenleaf/repos","events_url":"https://api.github.com/users/iangreenleaf/events{/privacy}","received_events_url":"https://api.github.com/users/iangreenleaf/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2014-10-22T06:55:37Z","updated_at":"2014-10-22T19:44:53Z","closed_at":"2014-10-22T19:44:53Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"In files pulled in by the `--require` option, the value of `RSpec.configuration.seed` does not match the seed used for the suite - it seems to be another altogether random & nondeterministic value.\n\nNote that if we were to require the same file at the very top of our spec file, the seed value would be correct. It's something specific to the timing of the CLI `--require` option. This was very surprising to me, and I think this is a bug and not a feature...?\n\nI managed to reproduce it with the following spec. I realize it's an awkward way to do it, and I don't know where to put it, but the spec does fail at the relevant point.\n\n``` ruby\n  describe '--seed defined on CLI with file required on CLI' do\n    after { remove_file 'foo.rb' }\n    after { remove_file 'spec/bar.rb' }\n    after { remove_file 'output.rb' }\n\n    it \"has seed configuration set in required file\" do\n      write_file 'foo.rb', \"\"\"\n        RSpec.configure do |config|\n          File.open('./output.rb', 'w') {|f| f << config.seed }\n        end\n      \"\"\"\n      write_file 'spec/bar.rb', ''\n\n      run_command 'spec/bar.rb --seed 345 --require ../../tmp/aruba/foo'\n\n      expect(File.read('tmp/aruba/output.rb')).to match(/\\b345\\b/)\n    end\n  end\n```\n","closed_by":{"login":"myronmarston","id":49391,"node_id":"MDQ6VXNlcjQ5Mzkx","avatar_url":"https://avatars.githubusercontent.com/u/49391?v=4","gravatar_id":"","url":"https://api.github.com/users/myronmarston","html_url":"https://github.com/myronmarston","followers_url":"https://api.github.com/users/myronmarston/followers","following_url":"https://api.github.com/users/myronmarston/following{/other_user}","gists_url":"https://api.github.com/users/myronmarston/gists{/gist_id}","starred_url":"https://api.github.com/users/myronmarston/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/myronmarston/subscriptions","organizations_url":"https://api.github.com/users/myronmarston/orgs","repos_url":"https://api.github.com/users/myronmarston/repos","events_url":"https://api.github.com/users/myronmarston/events{/privacy}","received_events_url":"https://api.github.com/users/myronmarston/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/rspec/rspec-core/issues/1744/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rspec/rspec-core/issues/1744/timeline","performed_via_github_app":null,"state_reason":"completed"}