{"url":"https://api.github.com/repos/rspec/rspec-core/issues/2084","repository_url":"https://api.github.com/repos/rspec/rspec-core","labels_url":"https://api.github.com/repos/rspec/rspec-core/issues/2084/labels{/name}","comments_url":"https://api.github.com/repos/rspec/rspec-core/issues/2084/comments","events_url":"https://api.github.com/repos/rspec/rspec-core/issues/2084/events","html_url":"https://github.com/rspec/rspec-core/issues/2084","id":110674232,"node_id":"MDU6SXNzdWUxMTA2NzQyMzI=","number":2084,"title":"Error in after(:all) hook doesn't fail rspec","user":{"login":"xam7247","id":5365467,"node_id":"MDQ6VXNlcjUzNjU0Njc=","avatar_url":"https://avatars.githubusercontent.com/u/5365467?v=4","gravatar_id":"","url":"https://api.github.com/users/xam7247","html_url":"https://github.com/xam7247","followers_url":"https://api.github.com/users/xam7247/followers","following_url":"https://api.github.com/users/xam7247/following{/other_user}","gists_url":"https://api.github.com/users/xam7247/gists{/gist_id}","starred_url":"https://api.github.com/users/xam7247/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/xam7247/subscriptions","organizations_url":"https://api.github.com/users/xam7247/orgs","repos_url":"https://api.github.com/users/xam7247/repos","events_url":"https://api.github.com/users/xam7247/events{/privacy}","received_events_url":"https://api.github.com/users/xam7247/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/rspec/rspec-core/milestones/14","html_url":"https://github.com/rspec/rspec-core/milestone/14","labels_url":"https://api.github.com/repos/rspec/rspec-core/milestones/14/labels","id":693817,"node_id":"MDk6TWlsZXN0b25lNjkzODE3","number":14,"title":"4.0","description":"Changes that will go in 4.0","creator":{"login":"myronmarston","id":49391,"node_id":"MDQ6VXNlcjQ5Mzkx","avatar_url":"https://avatars.githubusercontent.com/u/49391?v=4","gravatar_id":"","url":"https://api.github.com/users/myronmarston","html_url":"https://github.com/myronmarston","followers_url":"https://api.github.com/users/myronmarston/followers","following_url":"https://api.github.com/users/myronmarston/following{/other_user}","gists_url":"https://api.github.com/users/myronmarston/gists{/gist_id}","starred_url":"https://api.github.com/users/myronmarston/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/myronmarston/subscriptions","organizations_url":"https://api.github.com/users/myronmarston/orgs","repos_url":"https://api.github.com/users/myronmarston/repos","events_url":"https://api.github.com/users/myronmarston/events{/privacy}","received_events_url":"https://api.github.com/users/myronmarston/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":35,"state":"open","created_at":"2014-06-17T17:00:11Z","updated_at":"2024-11-27T20:22:17Z","due_on":null,"closed_at":null},"comments":5,"created_at":"2015-10-09T14:49:40Z","updated_at":"2016-09-02T04:00:52Z","closed_at":"2016-09-02T04:00:52Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"For my tests, I have the following hooks in my spec_helper:\n\n``` ruby\nRSpec.configure do |config|\n\n  config.before(:all) do\n    setup\n  end\n\n  config.after(:all) do\n     teardown\n  end\n\nend\n```\n\nAnd the teardown method has some logic for failure:\n\n``` Ruby\ndef teardown\n  # if some logic\n    raise \"Error occurred in after_all hook\"\nend\n```\n\nNow, when I execute my tests, and the after(:all) hook fails, it prints the error on console output, all specs have passed (which is right), but the overall execution is passed and ends with exit code 0.\nI don't understand why we do not fail rspec execution if a after hook failed. \n\nPS: This is also evident in https://www.relishapp.com/rspec/rspec-core/v/2-2/docs/hooks/before-and-after-hooks#failure-in-after(:all)-block\n\nAny help/explanation will be much appreciated.\n","closed_by":{"login":"JonRowe","id":162976,"node_id":"MDQ6VXNlcjE2Mjk3Ng==","avatar_url":"https://avatars.githubusercontent.com/u/162976?v=4","gravatar_id":"","url":"https://api.github.com/users/JonRowe","html_url":"https://github.com/JonRowe","followers_url":"https://api.github.com/users/JonRowe/followers","following_url":"https://api.github.com/users/JonRowe/following{/other_user}","gists_url":"https://api.github.com/users/JonRowe/gists{/gist_id}","starred_url":"https://api.github.com/users/JonRowe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JonRowe/subscriptions","organizations_url":"https://api.github.com/users/JonRowe/orgs","repos_url":"https://api.github.com/users/JonRowe/repos","events_url":"https://api.github.com/users/JonRowe/events{/privacy}","received_events_url":"https://api.github.com/users/JonRowe/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/rspec/rspec-core/issues/2084/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rspec/rspec-core/issues/2084/timeline","performed_via_github_app":null,"state_reason":"completed"}