{"url":"https://api.github.com/repos/rspec/rspec-core/issues/586","repository_url":"https://api.github.com/repos/rspec/rspec-core","labels_url":"https://api.github.com/repos/rspec/rspec-core/issues/586/labels{/name}","comments_url":"https://api.github.com/repos/rspec/rspec-core/issues/586/comments","events_url":"https://api.github.com/repos/rspec/rspec-core/issues/586/events","html_url":"https://github.com/rspec/rspec-core/issues/586","id":3768673,"node_id":"MDU6SXNzdWUzNzY4Njcz","number":586,"title":"can't use --example with SPEC_OPTS or .rspec file","user":{"login":"ghost","id":10137,"node_id":"MDQ6VXNlcjEwMTM3","avatar_url":"https://avatars.githubusercontent.com/u/10137?v=4","gravatar_id":"","url":"https://api.github.com/users/ghost","html_url":"https://github.com/ghost","followers_url":"https://api.github.com/users/ghost/followers","following_url":"https://api.github.com/users/ghost/following{/other_user}","gists_url":"https://api.github.com/users/ghost/gists{/gist_id}","starred_url":"https://api.github.com/users/ghost/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ghost/subscriptions","organizations_url":"https://api.github.com/users/ghost/orgs","repos_url":"https://api.github.com/users/ghost/repos","events_url":"https://api.github.com/users/ghost/events{/privacy}","received_events_url":"https://api.github.com/users/ghost/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2012-03-22T18:37:09Z","updated_at":"2012-03-23T06:33:29Z","closed_at":"2012-03-23T06:33:29Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"The parsing of --example from SPEC_OPTS or .rspec is broken.\n\nIn both cases the options are parsed by splitting it based on spaces, which means\nthat spaces can not be included in the example argument. For example:\n\n```\n$ SPEC_OPTS='--example \"foo bar\"' /usr/local/rvm/rubies/ruby-1.9.3-p125/bin/ruby -I /home/cross/tail/work/accept -I /home/cross/tail/accept /usr/local/rvm/gems/ruby-1.9.3-p125/bin/rspec -fn /home/cross/tail/accept/twtail_spec_short.rb /home/cross/tail/accept/twtail_spec.rb\nenv_options:\n  ENV[SPEC_OPTS]: --example \"foo bar\"\n  split: {:full_description=>/\"foo/}\nRun options: include {:full_description=>/(?-mix:\"foo)/}\n\nAll examples were filtered out\n\nFinished in 0.00003 seconds\n0 examples, 0 failures\n$\n```\n\nAs you can see rspec only associated the \"foo with the --example because the arguments\nare split based on spaces:\n\n```\n    ENV[\"SPEC_OPTS\"] ? Parser.parse!(ENV[\"SPEC_OPTS\"].split) : {}\n```\n\nTo get around this previously we would replace all spaces with .'s (periods) which would\nwork fine with Regexp, but with the newer versions of RSpec escape the Regexp:\n\n```\n    parser.on('-e', '--example STRING', \"Run examples whose full nested names include STRING\") do |o|\n      options[:full_description] = Regexp.compile(Regexp.escape(o))\n    end\n```\n\nWhile this corrects the behavior for processing --example from the command line it\nfurther breaks processing --example from SPEC_OPTS or the .rpsec file.\n","closed_by":{"login":"justinko","id":14007,"node_id":"MDQ6VXNlcjE0MDA3","avatar_url":"https://avatars.githubusercontent.com/u/14007?v=4","gravatar_id":"","url":"https://api.github.com/users/justinko","html_url":"https://github.com/justinko","followers_url":"https://api.github.com/users/justinko/followers","following_url":"https://api.github.com/users/justinko/following{/other_user}","gists_url":"https://api.github.com/users/justinko/gists{/gist_id}","starred_url":"https://api.github.com/users/justinko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/justinko/subscriptions","organizations_url":"https://api.github.com/users/justinko/orgs","repos_url":"https://api.github.com/users/justinko/repos","events_url":"https://api.github.com/users/justinko/events{/privacy}","received_events_url":"https://api.github.com/users/justinko/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/rspec/rspec-core/issues/586/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rspec/rspec-core/issues/586/timeline","performed_via_github_app":null,"state_reason":"completed"}