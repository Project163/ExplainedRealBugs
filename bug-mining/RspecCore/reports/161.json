{"url":"https://api.github.com/repos/rspec/rspec-core/issues/646","repository_url":"https://api.github.com/repos/rspec/rspec-core","labels_url":"https://api.github.com/repos/rspec/rspec-core/issues/646/labels{/name}","comments_url":"https://api.github.com/repos/rspec/rspec-core/issues/646/comments","events_url":"https://api.github.com/repos/rspec/rspec-core/issues/646/events","html_url":"https://github.com/rspec/rspec-core/issues/646","id":5575799,"node_id":"MDU6SXNzdWU1NTc1Nzk5","number":646,"title":"ExampleGroup custom #ancestors and introspection","user":{"login":"eregon","id":168854,"node_id":"MDQ6VXNlcjE2ODg1NA==","avatar_url":"https://avatars.githubusercontent.com/u/168854?v=4","gravatar_id":"","url":"https://api.github.com/users/eregon","html_url":"https://github.com/eregon","followers_url":"https://api.github.com/users/eregon/followers","following_url":"https://api.github.com/users/eregon/following{/other_user}","gists_url":"https://api.github.com/users/eregon/gists{/gist_id}","starred_url":"https://api.github.com/users/eregon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/eregon/subscriptions","organizations_url":"https://api.github.com/users/eregon/orgs","repos_url":"https://api.github.com/users/eregon/repos","events_url":"https://api.github.com/users/eregon/events{/privacy}","received_events_url":"https://api.github.com/users/eregon/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2012-07-12T16:20:16Z","updated_at":"2012-07-12T17:04:35Z","closed_at":"2012-07-12T16:36:17Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Hello,\n\nWhile testing around and wondering what #ancestors would look like in one of my specs, I was surprised to have an incorrect answer:\n\n``` ruby\ndescribe \"MySpec\" do\n  it \"should tell me what's included\" do\n    p self.class.ancestors\n  end\nend\n# => [RSpec::Core::ExampleGroup::Nested_1]\n```\n\nI think a class should avoids to change #ancestors, as this is breaking introspection possibilities.\nA solution might be to give another name to these \"ancestors\", which in this case seems more like the ancestors restricted to ExampleGroup inherited classes.\n\nThe only solution to see the real #ancestors is then for now:\n\n``` ruby\ndescribe \"MySpec\" do\n  it \"should tell me what's included\" do\n    p Module.instance_method(:ancestors).bind(self.class).call\n  end\nend\n# => [\nRSpec::Core::ExampleGroup::Nested_1, RSpec::Core::ExampleGroup, RSpec::Matchers,\nRSpec::Core::MockFrameworkAdapter, RSpec::Core::Let::ExampleMethods, RSpec::Core::Let,\nRSpec::Core::Pending, RSpec::Core::Subject::ExampleMethods,\nRSpec::Core::Extensions::InstanceEvalWithArgs, Object, RSpec::Mocks::Methods,\nPP::ObjectMixin, RSpec::Core::SharedExampleGroup, RSpec::Core::DSL,\nKernel, BasicObject]\n```\n","closed_by":{"login":"myronmarston","id":49391,"node_id":"MDQ6VXNlcjQ5Mzkx","avatar_url":"https://avatars.githubusercontent.com/u/49391?v=4","gravatar_id":"","url":"https://api.github.com/users/myronmarston","html_url":"https://github.com/myronmarston","followers_url":"https://api.github.com/users/myronmarston/followers","following_url":"https://api.github.com/users/myronmarston/following{/other_user}","gists_url":"https://api.github.com/users/myronmarston/gists{/gist_id}","starred_url":"https://api.github.com/users/myronmarston/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/myronmarston/subscriptions","organizations_url":"https://api.github.com/users/myronmarston/orgs","repos_url":"https://api.github.com/users/myronmarston/repos","events_url":"https://api.github.com/users/myronmarston/events{/privacy}","received_events_url":"https://api.github.com/users/myronmarston/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/rspec/rspec-core/issues/646/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rspec/rspec-core/issues/646/timeline","performed_via_github_app":null,"state_reason":"completed"}