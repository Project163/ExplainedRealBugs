[{"url":"https://api.github.com/repos/rspec/rspec-core/issues/comments/612939438","html_url":"https://github.com/rspec/rspec-core/issues/2721#issuecomment-612939438","issue_url":"https://api.github.com/repos/rspec/rspec-core/issues/2721","id":612939438,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMjkzOTQzOA==","user":{"login":"ArturT","id":662545,"node_id":"MDQ6VXNlcjY2MjU0NQ==","avatar_url":"https://avatars.githubusercontent.com/u/662545?v=4","gravatar_id":"","url":"https://api.github.com/users/ArturT","html_url":"https://github.com/ArturT","followers_url":"https://api.github.com/users/ArturT/followers","following_url":"https://api.github.com/users/ArturT/following{/other_user}","gists_url":"https://api.github.com/users/ArturT/gists{/gist_id}","starred_url":"https://api.github.com/users/ArturT/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ArturT/subscriptions","organizations_url":"https://api.github.com/users/ArturT/orgs","repos_url":"https://api.github.com/users/ArturT/repos","events_url":"https://api.github.com/users/ArturT/events{/privacy}","received_events_url":"https://api.github.com/users/ArturT/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-13T15:08:42Z","updated_at":"2020-04-13T15:08:42Z","body":"Hi @myronmarston , I saw you shared some knowledge with a bit similar problem https://github.com/rspec/rspec/issues/27 \r\n\r\nMaybe you will be able to point me where to look for? Thank you.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rspec/rspec-core/issues/comments/612939438/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ArturT","id":662545,"node_id":"MDQ6VXNlcjY2MjU0NQ==","avatar_url":"https://avatars.githubusercontent.com/u/662545?v=4","gravatar_id":"","url":"https://api.github.com/users/ArturT","html_url":"https://github.com/ArturT","followers_url":"https://api.github.com/users/ArturT/followers","following_url":"https://api.github.com/users/ArturT/following{/other_user}","gists_url":"https://api.github.com/users/ArturT/gists{/gist_id}","starred_url":"https://api.github.com/users/ArturT/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ArturT/subscriptions","organizations_url":"https://api.github.com/users/ArturT/orgs","repos_url":"https://api.github.com/users/ArturT/repos","events_url":"https://api.github.com/users/ArturT/events{/privacy}","received_events_url":"https://api.github.com/users/ArturT/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":3227395073,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MzIyNzM5NTA3Mw==","url":"https://api.github.com/repos/rspec/rspec-core/issues/events/3227395073","actor":{"login":"myronmarston","id":49391,"node_id":"MDQ6VXNlcjQ5Mzkx","avatar_url":"https://avatars.githubusercontent.com/u/49391?v=4","gravatar_id":"","url":"https://api.github.com/users/myronmarston","html_url":"https://github.com/myronmarston","followers_url":"https://api.github.com/users/myronmarston/followers","following_url":"https://api.github.com/users/myronmarston/following{/other_user}","gists_url":"https://api.github.com/users/myronmarston/gists{/gist_id}","starred_url":"https://api.github.com/users/myronmarston/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/myronmarston/subscriptions","organizations_url":"https://api.github.com/users/myronmarston/orgs","repos_url":"https://api.github.com/users/myronmarston/repos","events_url":"https://api.github.com/users/myronmarston/events{/privacy}","received_events_url":"https://api.github.com/users/myronmarston/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-04-13T15:08:42Z","performed_via_github_app":null},{"id":3227395076,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDMyMjczOTUwNzY=","url":"https://api.github.com/repos/rspec/rspec-core/issues/events/3227395076","actor":{"login":"myronmarston","id":49391,"node_id":"MDQ6VXNlcjQ5Mzkx","avatar_url":"https://avatars.githubusercontent.com/u/49391?v=4","gravatar_id":"","url":"https://api.github.com/users/myronmarston","html_url":"https://github.com/myronmarston","followers_url":"https://api.github.com/users/myronmarston/followers","following_url":"https://api.github.com/users/myronmarston/following{/other_user}","gists_url":"https://api.github.com/users/myronmarston/gists{/gist_id}","starred_url":"https://api.github.com/users/myronmarston/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/myronmarston/subscriptions","organizations_url":"https://api.github.com/users/myronmarston/orgs","repos_url":"https://api.github.com/users/myronmarston/repos","events_url":"https://api.github.com/users/myronmarston/events{/privacy}","received_events_url":"https://api.github.com/users/myronmarston/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-04-13T15:08:42Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rspec/rspec-core/issues/comments/612958160","html_url":"https://github.com/rspec/rspec-core/issues/2721#issuecomment-612958160","issue_url":"https://api.github.com/repos/rspec/rspec-core/issues/2721","id":612958160,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMjk1ODE2MA==","user":{"login":"pirj","id":6916,"node_id":"MDQ6VXNlcjY5MTY=","avatar_url":"https://avatars.githubusercontent.com/u/6916?v=4","gravatar_id":"","url":"https://api.github.com/users/pirj","html_url":"https://github.com/pirj","followers_url":"https://api.github.com/users/pirj/followers","following_url":"https://api.github.com/users/pirj/following{/other_user}","gists_url":"https://api.github.com/users/pirj/gists{/gist_id}","starred_url":"https://api.github.com/users/pirj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pirj/subscriptions","organizations_url":"https://api.github.com/users/pirj/orgs","repos_url":"https://api.github.com/users/pirj/repos","events_url":"https://api.github.com/users/pirj/events{/privacy}","received_events_url":"https://api.github.com/users/pirj/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-13T15:51:20Z","updated_at":"2020-04-13T15:51:20Z","body":"Hey @ArturT!\r\nMaybe [this](https://github.com/rspec/rspec-core/issues/2666) may give you a clue.\r\nYou seem to have asked a similar [question in the past](https://github.com/rspec/rspec-core/issues/2416), maybe you could consider using `RSpec.clear_examples` now?","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rspec/rspec-core/issues/comments/612958160/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"pirj","id":6916,"node_id":"MDQ6VXNlcjY5MTY=","avatar_url":"https://avatars.githubusercontent.com/u/6916?v=4","gravatar_id":"","url":"https://api.github.com/users/pirj","html_url":"https://github.com/pirj","followers_url":"https://api.github.com/users/pirj/followers","following_url":"https://api.github.com/users/pirj/following{/other_user}","gists_url":"https://api.github.com/users/pirj/gists{/gist_id}","starred_url":"https://api.github.com/users/pirj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pirj/subscriptions","organizations_url":"https://api.github.com/users/pirj/orgs","repos_url":"https://api.github.com/users/pirj/repos","events_url":"https://api.github.com/users/pirj/events{/privacy}","received_events_url":"https://api.github.com/users/pirj/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":3227547519,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MzIyNzU0NzUxOQ==","url":"https://api.github.com/repos/rspec/rspec-core/issues/events/3227547519","actor":{"login":"ArturT","id":662545,"node_id":"MDQ6VXNlcjY2MjU0NQ==","avatar_url":"https://avatars.githubusercontent.com/u/662545?v=4","gravatar_id":"","url":"https://api.github.com/users/ArturT","html_url":"https://github.com/ArturT","followers_url":"https://api.github.com/users/ArturT/followers","following_url":"https://api.github.com/users/ArturT/following{/other_user}","gists_url":"https://api.github.com/users/ArturT/gists{/gist_id}","starred_url":"https://api.github.com/users/ArturT/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ArturT/subscriptions","organizations_url":"https://api.github.com/users/ArturT/orgs","repos_url":"https://api.github.com/users/ArturT/repos","events_url":"https://api.github.com/users/ArturT/events{/privacy}","received_events_url":"https://api.github.com/users/ArturT/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-04-13T15:51:21Z","performed_via_github_app":null},{"id":3227547524,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDMyMjc1NDc1MjQ=","url":"https://api.github.com/repos/rspec/rspec-core/issues/events/3227547524","actor":{"login":"ArturT","id":662545,"node_id":"MDQ6VXNlcjY2MjU0NQ==","avatar_url":"https://avatars.githubusercontent.com/u/662545?v=4","gravatar_id":"","url":"https://api.github.com/users/ArturT","html_url":"https://github.com/ArturT","followers_url":"https://api.github.com/users/ArturT/followers","following_url":"https://api.github.com/users/ArturT/following{/other_user}","gists_url":"https://api.github.com/users/ArturT/gists{/gist_id}","starred_url":"https://api.github.com/users/ArturT/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ArturT/subscriptions","organizations_url":"https://api.github.com/users/ArturT/orgs","repos_url":"https://api.github.com/users/ArturT/repos","events_url":"https://api.github.com/users/ArturT/events{/privacy}","received_events_url":"https://api.github.com/users/ArturT/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-04-13T15:51:21Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rspec/rspec-core/issues/comments/612965038","html_url":"https://github.com/rspec/rspec-core/issues/2721#issuecomment-612965038","issue_url":"https://api.github.com/repos/rspec/rspec-core/issues/2721","id":612965038,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMjk2NTAzOA==","user":{"login":"JonRowe","id":162976,"node_id":"MDQ6VXNlcjE2Mjk3Ng==","avatar_url":"https://avatars.githubusercontent.com/u/162976?v=4","gravatar_id":"","url":"https://api.github.com/users/JonRowe","html_url":"https://github.com/JonRowe","followers_url":"https://api.github.com/users/JonRowe/followers","following_url":"https://api.github.com/users/JonRowe/following{/other_user}","gists_url":"https://api.github.com/users/JonRowe/gists{/gist_id}","starred_url":"https://api.github.com/users/JonRowe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JonRowe/subscriptions","organizations_url":"https://api.github.com/users/JonRowe/orgs","repos_url":"https://api.github.com/users/JonRowe/repos","events_url":"https://api.github.com/users/JonRowe/events{/privacy}","received_events_url":"https://api.github.com/users/JonRowe/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-13T16:07:14Z","updated_at":"2020-04-13T16:07:14Z","body":"You've only cleared your examples, not your filters, so you end up building combined filters.\r\n\r\nThere is a private api on configuration to reset your filters, but the public way to fix this is to change `clear_examples` for `reset`. e.g `RSpec.reset`","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rspec/rspec-core/issues/comments/612965038/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"JonRowe","id":162976,"node_id":"MDQ6VXNlcjE2Mjk3Ng==","avatar_url":"https://avatars.githubusercontent.com/u/162976?v=4","gravatar_id":"","url":"https://api.github.com/users/JonRowe","html_url":"https://github.com/JonRowe","followers_url":"https://api.github.com/users/JonRowe/followers","following_url":"https://api.github.com/users/JonRowe/following{/other_user}","gists_url":"https://api.github.com/users/JonRowe/gists{/gist_id}","starred_url":"https://api.github.com/users/JonRowe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JonRowe/subscriptions","organizations_url":"https://api.github.com/users/JonRowe/orgs","repos_url":"https://api.github.com/users/JonRowe/repos","events_url":"https://api.github.com/users/JonRowe/events{/privacy}","received_events_url":"https://api.github.com/users/JonRowe/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":3227601954,"node_id":"MDExOkNsb3NlZEV2ZW50MzIyNzYwMTk1NA==","url":"https://api.github.com/repos/rspec/rspec-core/issues/events/3227601954","actor":{"login":"JonRowe","id":162976,"node_id":"MDQ6VXNlcjE2Mjk3Ng==","avatar_url":"https://avatars.githubusercontent.com/u/162976?v=4","gravatar_id":"","url":"https://api.github.com/users/JonRowe","html_url":"https://github.com/JonRowe","followers_url":"https://api.github.com/users/JonRowe/followers","following_url":"https://api.github.com/users/JonRowe/following{/other_user}","gists_url":"https://api.github.com/users/JonRowe/gists{/gist_id}","starred_url":"https://api.github.com/users/JonRowe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JonRowe/subscriptions","organizations_url":"https://api.github.com/users/JonRowe/orgs","repos_url":"https://api.github.com/users/JonRowe/repos","events_url":"https://api.github.com/users/JonRowe/events{/privacy}","received_events_url":"https://api.github.com/users/JonRowe/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2020-04-13T16:07:14Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/rspec/rspec-core/issues/comments/612976253","html_url":"https://github.com/rspec/rspec-core/issues/2721#issuecomment-612976253","issue_url":"https://api.github.com/repos/rspec/rspec-core/issues/2721","id":612976253,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMjk3NjI1Mw==","user":{"login":"ArturT","id":662545,"node_id":"MDQ6VXNlcjY2MjU0NQ==","avatar_url":"https://avatars.githubusercontent.com/u/662545?v=4","gravatar_id":"","url":"https://api.github.com/users/ArturT","html_url":"https://github.com/ArturT","followers_url":"https://api.github.com/users/ArturT/followers","following_url":"https://api.github.com/users/ArturT/following{/other_user}","gists_url":"https://api.github.com/users/ArturT/gists{/gist_id}","starred_url":"https://api.github.com/users/ArturT/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ArturT/subscriptions","organizations_url":"https://api.github.com/users/ArturT/orgs","repos_url":"https://api.github.com/users/ArturT/repos","events_url":"https://api.github.com/users/ArturT/events{/privacy}","received_events_url":"https://api.github.com/users/ArturT/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-13T16:32:13Z","updated_at":"2020-04-13T16:32:13Z","body":"@pirj @JonRowe Thank you for the help. The `RSpec.reset` does help for the [example repo](https://github.com/ArturT/rspec-test-examples) I've created and I get expected output but when I try to use it with Rails and controller spec then with 2nd run of `RSpec::Core::Runner` that gets path to controller spec I get error like:\r\n\r\n```\r\nFailures:\r\n\r\n  1) ArticlesController#index should receive all(*(any args)) 1 time\r\n     Failure/Error: get :index\r\n\r\n     NoMethodError:\r\n       undefined method `get' for #<RSpec::ExampleGroups::ArticlesController::Index:0x00007fc98f711a00>\r\n\r\n....\r\n### NOTE: Here is an example for not working rails routes path\r\n\r\n  2) Calculator when add two numbers result is 0\r\n     Failure/Error: visit calculator_index_path\r\n\r\n     NameError:\r\n       undefined local variable or method `calculator_index_path' for #<RSpec::ExampleGroups::Calculator::WhenAddTwoNumbers:0x00007fdd2aec2318>\r\n\r\n...\r\n### NOTE: Here is are missing shared examples:\r\n\r\nAn error occurred while loading ./spec/services/calculator_spec.rb.\r\nFailure/Error: it_behaves_like 'calculator'\r\n\r\nArgumentError:\r\n  Could not find shared examples \"calculator\"\r\n```\r\n\r\nI added `RSpec.configuration.load_spec_files` but this seems to be not enough.\r\n\r\nI suspect RSpec config from `spec/rails_helper.rb` was reset and also shared examples removed. \r\n\r\n\r\n```ruby\r\noptions = RSpec::Core::ConfigurationOptions.new(cli_args)\r\nRSpec.configuration.load_spec_files\r\n\r\nRSpec::Core::Runner.new(options).run($stderr, $stdout)\r\n           \r\nRSpec.reset\r\n```\r\n\r\nI'm not sure what's the good direction to go. Should I somehow try to force Ruby to reload the content of `spec/rails_helper.rb` file to get my initial RSpec config state or maybe instead of using `RSpec.reset` I should try to monkey patch RSpec to somehow let me run test example `B1`. \r\n\r\nAny tips would be great. Thank you.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rspec/rspec-core/issues/comments/612976253/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ArturT","id":662545,"node_id":"MDQ6VXNlcjY2MjU0NQ==","avatar_url":"https://avatars.githubusercontent.com/u/662545?v=4","gravatar_id":"","url":"https://api.github.com/users/ArturT","html_url":"https://github.com/ArturT","followers_url":"https://api.github.com/users/ArturT/followers","following_url":"https://api.github.com/users/ArturT/following{/other_user}","gists_url":"https://api.github.com/users/ArturT/gists{/gist_id}","starred_url":"https://api.github.com/users/ArturT/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ArturT/subscriptions","organizations_url":"https://api.github.com/users/ArturT/orgs","repos_url":"https://api.github.com/users/ArturT/repos","events_url":"https://api.github.com/users/ArturT/events{/privacy}","received_events_url":"https://api.github.com/users/ArturT/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":3227685239,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MzIyNzY4NTIzOQ==","url":"https://api.github.com/repos/rspec/rspec-core/issues/events/3227685239","actor":{"login":"pirj","id":6916,"node_id":"MDQ6VXNlcjY5MTY=","avatar_url":"https://avatars.githubusercontent.com/u/6916?v=4","gravatar_id":"","url":"https://api.github.com/users/pirj","html_url":"https://github.com/pirj","followers_url":"https://api.github.com/users/pirj/followers","following_url":"https://api.github.com/users/pirj/following{/other_user}","gists_url":"https://api.github.com/users/pirj/gists{/gist_id}","starred_url":"https://api.github.com/users/pirj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pirj/subscriptions","organizations_url":"https://api.github.com/users/pirj/orgs","repos_url":"https://api.github.com/users/pirj/repos","events_url":"https://api.github.com/users/pirj/events{/privacy}","received_events_url":"https://api.github.com/users/pirj/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-04-13T16:32:13Z","performed_via_github_app":null},{"id":3227685243,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDMyMjc2ODUyNDM=","url":"https://api.github.com/repos/rspec/rspec-core/issues/events/3227685243","actor":{"login":"pirj","id":6916,"node_id":"MDQ6VXNlcjY5MTY=","avatar_url":"https://avatars.githubusercontent.com/u/6916?v=4","gravatar_id":"","url":"https://api.github.com/users/pirj","html_url":"https://github.com/pirj","followers_url":"https://api.github.com/users/pirj/followers","following_url":"https://api.github.com/users/pirj/following{/other_user}","gists_url":"https://api.github.com/users/pirj/gists{/gist_id}","starred_url":"https://api.github.com/users/pirj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pirj/subscriptions","organizations_url":"https://api.github.com/users/pirj/orgs","repos_url":"https://api.github.com/users/pirj/repos","events_url":"https://api.github.com/users/pirj/events{/privacy}","received_events_url":"https://api.github.com/users/pirj/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-04-13T16:32:13Z","performed_via_github_app":null},{"id":3227685249,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MzIyNzY4NTI0OQ==","url":"https://api.github.com/repos/rspec/rspec-core/issues/events/3227685249","actor":{"login":"JonRowe","id":162976,"node_id":"MDQ6VXNlcjE2Mjk3Ng==","avatar_url":"https://avatars.githubusercontent.com/u/162976?v=4","gravatar_id":"","url":"https://api.github.com/users/JonRowe","html_url":"https://github.com/JonRowe","followers_url":"https://api.github.com/users/JonRowe/followers","following_url":"https://api.github.com/users/JonRowe/following{/other_user}","gists_url":"https://api.github.com/users/JonRowe/gists{/gist_id}","starred_url":"https://api.github.com/users/JonRowe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JonRowe/subscriptions","organizations_url":"https://api.github.com/users/JonRowe/orgs","repos_url":"https://api.github.com/users/JonRowe/repos","events_url":"https://api.github.com/users/JonRowe/events{/privacy}","received_events_url":"https://api.github.com/users/JonRowe/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-04-13T16:32:13Z","performed_via_github_app":null},{"id":3227685252,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDMyMjc2ODUyNTI=","url":"https://api.github.com/repos/rspec/rspec-core/issues/events/3227685252","actor":{"login":"JonRowe","id":162976,"node_id":"MDQ6VXNlcjE2Mjk3Ng==","avatar_url":"https://avatars.githubusercontent.com/u/162976?v=4","gravatar_id":"","url":"https://api.github.com/users/JonRowe","html_url":"https://github.com/JonRowe","followers_url":"https://api.github.com/users/JonRowe/followers","following_url":"https://api.github.com/users/JonRowe/following{/other_user}","gists_url":"https://api.github.com/users/JonRowe/gists{/gist_id}","starred_url":"https://api.github.com/users/JonRowe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JonRowe/subscriptions","organizations_url":"https://api.github.com/users/JonRowe/orgs","repos_url":"https://api.github.com/users/JonRowe/repos","events_url":"https://api.github.com/users/JonRowe/events{/privacy}","received_events_url":"https://api.github.com/users/JonRowe/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-04-13T16:32:13Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rspec/rspec-core/issues/comments/612978810","html_url":"https://github.com/rspec/rspec-core/issues/2721#issuecomment-612978810","issue_url":"https://api.github.com/repos/rspec/rspec-core/issues/2721","id":612978810,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMjk3ODgxMA==","user":{"login":"JonRowe","id":162976,"node_id":"MDQ6VXNlcjE2Mjk3Ng==","avatar_url":"https://avatars.githubusercontent.com/u/162976?v=4","gravatar_id":"","url":"https://api.github.com/users/JonRowe","html_url":"https://github.com/JonRowe","followers_url":"https://api.github.com/users/JonRowe/followers","following_url":"https://api.github.com/users/JonRowe/following{/other_user}","gists_url":"https://api.github.com/users/JonRowe/gists{/gist_id}","starred_url":"https://api.github.com/users/JonRowe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JonRowe/subscriptions","organizations_url":"https://api.github.com/users/JonRowe/orgs","repos_url":"https://api.github.com/users/JonRowe/repos","events_url":"https://api.github.com/users/JonRowe/events{/privacy}","received_events_url":"https://api.github.com/users/JonRowe/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-13T16:37:43Z","updated_at":"2020-04-13T16:37:43Z","body":"Yes `RSpec.reset` is a complete reset of rspec back to basics and you will need to reload your config. As you are programatically loading specs here I would make your config programatic rather than relying on files.\r\n\r\nHowever you can also use `RSpec.configuration.clear_filters` with `clear_examples` its a private API so may change at a later date.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rspec/rspec-core/issues/comments/612978810/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"JonRowe","id":162976,"node_id":"MDQ6VXNlcjE2Mjk3Ng==","avatar_url":"https://avatars.githubusercontent.com/u/162976?v=4","gravatar_id":"","url":"https://api.github.com/users/JonRowe","html_url":"https://github.com/JonRowe","followers_url":"https://api.github.com/users/JonRowe/followers","following_url":"https://api.github.com/users/JonRowe/following{/other_user}","gists_url":"https://api.github.com/users/JonRowe/gists{/gist_id}","starred_url":"https://api.github.com/users/JonRowe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JonRowe/subscriptions","organizations_url":"https://api.github.com/users/JonRowe/orgs","repos_url":"https://api.github.com/users/JonRowe/repos","events_url":"https://api.github.com/users/JonRowe/events{/privacy}","received_events_url":"https://api.github.com/users/JonRowe/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/rspec/rspec-core/issues/comments/613030820","html_url":"https://github.com/rspec/rspec-core/issues/2721#issuecomment-613030820","issue_url":"https://api.github.com/repos/rspec/rspec-core/issues/2721","id":613030820,"node_id":"MDEyOklzc3VlQ29tbWVudDYxMzAzMDgyMA==","user":{"login":"ArturT","id":662545,"node_id":"MDQ6VXNlcjY2MjU0NQ==","avatar_url":"https://avatars.githubusercontent.com/u/662545?v=4","gravatar_id":"","url":"https://api.github.com/users/ArturT","html_url":"https://github.com/ArturT","followers_url":"https://api.github.com/users/ArturT/followers","following_url":"https://api.github.com/users/ArturT/following{/other_user}","gists_url":"https://api.github.com/users/ArturT/gists{/gist_id}","starred_url":"https://api.github.com/users/ArturT/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ArturT/subscriptions","organizations_url":"https://api.github.com/users/ArturT/orgs","repos_url":"https://api.github.com/users/ArturT/repos","events_url":"https://api.github.com/users/ArturT/events{/privacy}","received_events_url":"https://api.github.com/users/ArturT/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-13T18:32:36Z","updated_at":"2020-04-13T18:32:36Z","body":"@JonRowe Thanks for tips. I can't find a definition for `RSpec.configuration.clear_filters` https://github.com/rspec/rspec-core/search?q=clear_filters&unscoped_q=clear_filters and it's undefined method when I try to call it in the code. \r\n\r\nThere is a method `RSpec.configuration.reset_filters`. I guess it does what you meant but it still did not allow me to run example `B1`.\r\n\r\nI found that [clear_examples](https://github.com/rspec/rspec-core/blob/cbd6d47051b2050fd8dbd0e3a3751b2364bc3842/lib/rspec/core.rb#L74) already calls [`reset_filters`](https://github.com/rspec/rspec-core/blob/132a413925acf1c19808c0a10520ce9e2f0169fc/lib/rspec/core/configuration.rb#L582)","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/rspec/rspec-core/issues/comments/613030820/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ArturT","id":662545,"node_id":"MDQ6VXNlcjY2MjU0NQ==","avatar_url":"https://avatars.githubusercontent.com/u/662545?v=4","gravatar_id":"","url":"https://api.github.com/users/ArturT","html_url":"https://github.com/ArturT","followers_url":"https://api.github.com/users/ArturT/followers","following_url":"https://api.github.com/users/ArturT/following{/other_user}","gists_url":"https://api.github.com/users/ArturT/gists{/gist_id}","starred_url":"https://api.github.com/users/ArturT/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ArturT/subscriptions","organizations_url":"https://api.github.com/users/ArturT/orgs","repos_url":"https://api.github.com/users/ArturT/repos","events_url":"https://api.github.com/users/ArturT/events{/privacy}","received_events_url":"https://api.github.com/users/ArturT/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":3228090609,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MzIyODA5MDYwOQ==","url":"https://api.github.com/repos/rspec/rspec-core/issues/events/3228090609","actor":{"login":"JonRowe","id":162976,"node_id":"MDQ6VXNlcjE2Mjk3Ng==","avatar_url":"https://avatars.githubusercontent.com/u/162976?v=4","gravatar_id":"","url":"https://api.github.com/users/JonRowe","html_url":"https://github.com/JonRowe","followers_url":"https://api.github.com/users/JonRowe/followers","following_url":"https://api.github.com/users/JonRowe/following{/other_user}","gists_url":"https://api.github.com/users/JonRowe/gists{/gist_id}","starred_url":"https://api.github.com/users/JonRowe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JonRowe/subscriptions","organizations_url":"https://api.github.com/users/JonRowe/orgs","repos_url":"https://api.github.com/users/JonRowe/repos","events_url":"https://api.github.com/users/JonRowe/events{/privacy}","received_events_url":"https://api.github.com/users/JonRowe/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-04-13T18:32:37Z","performed_via_github_app":null},{"id":3228090613,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDMyMjgwOTA2MTM=","url":"https://api.github.com/repos/rspec/rspec-core/issues/events/3228090613","actor":{"login":"JonRowe","id":162976,"node_id":"MDQ6VXNlcjE2Mjk3Ng==","avatar_url":"https://avatars.githubusercontent.com/u/162976?v=4","gravatar_id":"","url":"https://api.github.com/users/JonRowe","html_url":"https://github.com/JonRowe","followers_url":"https://api.github.com/users/JonRowe/followers","following_url":"https://api.github.com/users/JonRowe/following{/other_user}","gists_url":"https://api.github.com/users/JonRowe/gists{/gist_id}","starred_url":"https://api.github.com/users/JonRowe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JonRowe/subscriptions","organizations_url":"https://api.github.com/users/JonRowe/orgs","repos_url":"https://api.github.com/users/JonRowe/repos","events_url":"https://api.github.com/users/JonRowe/events{/privacy}","received_events_url":"https://api.github.com/users/JonRowe/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-04-13T18:32:37Z","performed_via_github_app":null},{"actor":{"login":"ArturT","id":662545,"node_id":"MDQ6VXNlcjY2MjU0NQ==","avatar_url":"https://avatars.githubusercontent.com/u/662545?v=4","gravatar_id":"","url":"https://api.github.com/users/ArturT","html_url":"https://github.com/ArturT","followers_url":"https://api.github.com/users/ArturT/followers","following_url":"https://api.github.com/users/ArturT/following{/other_user}","gists_url":"https://api.github.com/users/ArturT/gists{/gist_id}","starred_url":"https://api.github.com/users/ArturT/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ArturT/subscriptions","organizations_url":"https://api.github.com/users/ArturT/orgs","repos_url":"https://api.github.com/users/ArturT/repos","events_url":"https://api.github.com/users/ArturT/events{/privacy}","received_events_url":"https://api.github.com/users/ArturT/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-15T16:17:32Z","updated_at":"2020-04-15T16:17:32Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/KnapsackPro/knapsack_pro-ruby/issues/37","repository_url":"https://api.github.com/repos/KnapsackPro/knapsack_pro-ruby","labels_url":"https://api.github.com/repos/KnapsackPro/knapsack_pro-ruby/issues/37/labels{/name}","comments_url":"https://api.github.com/repos/KnapsackPro/knapsack_pro-ruby/issues/37/comments","events_url":"https://api.github.com/repos/KnapsackPro/knapsack_pro-ruby/issues/37/events","html_url":"https://github.com/KnapsackPro/knapsack_pro-ruby/issues/37","id":227222304,"node_id":"MDU6SXNzdWUyMjcyMjIzMDQ=","number":37,"title":"Unable to run with a only a rspec \"include\" tags specified, they are ignored and all non-matching specs are run","user":{"login":"thewoolleyman","id":158,"node_id":"MDQ6VXNlcjE1OA==","avatar_url":"https://avatars.githubusercontent.com/u/158?v=4","gravatar_id":"","url":"https://api.github.com/users/thewoolleyman","html_url":"https://github.com/thewoolleyman","followers_url":"https://api.github.com/users/thewoolleyman/followers","following_url":"https://api.github.com/users/thewoolleyman/following{/other_user}","gists_url":"https://api.github.com/users/thewoolleyman/gists{/gist_id}","starred_url":"https://api.github.com/users/thewoolleyman/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/thewoolleyman/subscriptions","organizations_url":"https://api.github.com/users/thewoolleyman/orgs","repos_url":"https://api.github.com/users/thewoolleyman/repos","events_url":"https://api.github.com/users/thewoolleyman/events{/privacy}","received_events_url":"https://api.github.com/users/thewoolleyman/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":15,"created_at":"2017-05-09T01:36:04Z","updated_at":"2025-02-25T21:09:37Z","closed_at":"2020-05-29T14:47:43Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":33376036,"node_id":"MDEwOlJlcG9zaXRvcnkzMzM3NjAzNg==","name":"knapsack_pro-ruby","full_name":"KnapsackPro/knapsack_pro-ruby","private":false,"owner":{"login":"KnapsackPro","id":11784872,"node_id":"MDEyOk9yZ2FuaXphdGlvbjExNzg0ODcy","avatar_url":"https://avatars.githubusercontent.com/u/11784872?v=4","gravatar_id":"","url":"https://api.github.com/users/KnapsackPro","html_url":"https://github.com/KnapsackPro","followers_url":"https://api.github.com/users/KnapsackPro/followers","following_url":"https://api.github.com/users/KnapsackPro/following{/other_user}","gists_url":"https://api.github.com/users/KnapsackPro/gists{/gist_id}","starred_url":"https://api.github.com/users/KnapsackPro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/KnapsackPro/subscriptions","organizations_url":"https://api.github.com/users/KnapsackPro/orgs","repos_url":"https://api.github.com/users/KnapsackPro/repos","events_url":"https://api.github.com/users/KnapsackPro/events{/privacy}","received_events_url":"https://api.github.com/users/KnapsackPro/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/KnapsackPro/knapsack_pro-ruby","description":"Knapsack Pro gem splits tests across parallel CI nodes and makes sure that tests run in optimal time","fork":false,"url":"https://api.github.com/repos/KnapsackPro/knapsack_pro-ruby","forks_url":"https://api.github.com/repos/KnapsackPro/knapsack_pro-ruby/forks","keys_url":"https://api.github.com/repos/KnapsackPro/knapsack_pro-ruby/keys{/key_id}","collaborators_url":"https://api.github.com/repos/KnapsackPro/knapsack_pro-ruby/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/KnapsackPro/knapsack_pro-ruby/teams","hooks_url":"https://api.github.com/repos/KnapsackPro/knapsack_pro-ruby/hooks","issue_events_url":"https://api.github.com/repos/KnapsackPro/knapsack_pro-ruby/issues/events{/number}","events_url":"https://api.github.com/repos/KnapsackPro/knapsack_pro-ruby/events","assignees_url":"https://api.github.com/repos/KnapsackPro/knapsack_pro-ruby/assignees{/user}","branches_url":"https://api.github.com/repos/KnapsackPro/knapsack_pro-ruby/branches{/branch}","tags_url":"https://api.github.com/repos/KnapsackPro/knapsack_pro-ruby/tags","blobs_url":"https://api.github.com/repos/KnapsackPro/knapsack_pro-ruby/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/KnapsackPro/knapsack_pro-ruby/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/KnapsackPro/knapsack_pro-ruby/git/refs{/sha}","trees_url":"https://api.github.com/repos/KnapsackPro/knapsack_pro-ruby/git/trees{/sha}","statuses_url":"https://api.github.com/repos/KnapsackPro/knapsack_pro-ruby/statuses/{sha}","languages_url":"https://api.github.com/repos/KnapsackPro/knapsack_pro-ruby/languages","stargazers_url":"https://api.github.com/repos/KnapsackPro/knapsack_pro-ruby/stargazers","contributors_url":"https://api.github.com/repos/KnapsackPro/knapsack_pro-ruby/contributors","subscribers_url":"https://api.github.com/repos/KnapsackPro/knapsack_pro-ruby/subscribers","subscription_url":"https://api.github.com/repos/KnapsackPro/knapsack_pro-ruby/subscription","commits_url":"https://api.github.com/repos/KnapsackPro/knapsack_pro-ruby/commits{/sha}","git_commits_url":"https://api.github.com/repos/KnapsackPro/knapsack_pro-ruby/git/commits{/sha}","comments_url":"https://api.github.com/repos/KnapsackPro/knapsack_pro-ruby/comments{/number}","issue_comment_url":"https://api.github.com/repos/KnapsackPro/knapsack_pro-ruby/issues/comments{/number}","contents_url":"https://api.github.com/repos/KnapsackPro/knapsack_pro-ruby/contents/{+path}","compare_url":"https://api.github.com/repos/KnapsackPro/knapsack_pro-ruby/compare/{base}...{head}","merges_url":"https://api.github.com/repos/KnapsackPro/knapsack_pro-ruby/merges","archive_url":"https://api.github.com/repos/KnapsackPro/knapsack_pro-ruby/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/KnapsackPro/knapsack_pro-ruby/downloads","issues_url":"https://api.github.com/repos/KnapsackPro/knapsack_pro-ruby/issues{/number}","pulls_url":"https://api.github.com/repos/KnapsackPro/knapsack_pro-ruby/pulls{/number}","milestones_url":"https://api.github.com/repos/KnapsackPro/knapsack_pro-ruby/milestones{/number}","notifications_url":"https://api.github.com/repos/KnapsackPro/knapsack_pro-ruby/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/KnapsackPro/knapsack_pro-ruby/labels{/name}","releases_url":"https://api.github.com/repos/KnapsackPro/knapsack_pro-ruby/releases{/id}","deployments_url":"https://api.github.com/repos/KnapsackPro/knapsack_pro-ruby/deployments","created_at":"2015-04-03T18:09:58Z","updated_at":"2025-10-20T10:54:17Z","pushed_at":"2025-10-20T10:54:14Z","git_url":"git://github.com/KnapsackPro/knapsack_pro-ruby.git","ssh_url":"git@github.com:KnapsackPro/knapsack_pro-ruby.git","clone_url":"https://github.com/KnapsackPro/knapsack_pro-ruby.git","svn_url":"https://github.com/KnapsackPro/knapsack_pro-ruby","homepage":"https://knapsackpro.com","size":1803,"stargazers_count":144,"watchers_count":144,"language":"Ruby","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":33,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":5,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["auto-balancing","buildkite","ci-server","circle-ci","cucumber","minitest","parallelism","rspec","ruby","semaphore-ci","snap-ci","spinach","testing-tools","travis-ci","turnip"],"visibility":"public","forks":33,"open_issues":5,"watchers":144,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"Hello,\r\n\r\nThe README says you can do this, with the following example:\r\n\r\n```\r\n# run only tests with tagA\r\nKNAPSACK_PRO_TEST_SUITE_TOKEN_RSPEC=api_key_for_tagA bundle exec rake \"knapsack_pro:rspec[--tag tagA]\"\r\n```\r\n\r\nBut we are not able to make it work.   When we specify only two single tags to run, they is ignored with the message **\"All examples were filtered out; ignoring...\"** and rspec ends up running everything:\r\n\r\n```\r\nI, [2017-05-09T00:22:17.628995 #793]  INFO -- : [knapsack_pro] bundle exec rspec -t uses_extra_session --format progress  --default-path spec \"spec/selenium/projects/stories/comments_spec.rb\"\r\nD, [2017-05-09T00:22:18.152576 #793] DEBUG -- : [knapsack_pro] Test suite time execution queue recording enabled.\r\nRun options: include {:focus=>true, :uses_extra_session=>true}\r\n \r\nAll examples were filtered out; ignoring {:focus=>true, :uses_extra_session=>true}\r\n...\r\n<Knapsack Pro ends up running all non-matching examples>\r\n```\r\n\r\nWe tried setting the following Rspec config:\r\n`config.run_all_when_everything_filtered = false`\r\n\r\n...but this did not help.  Plus, this option is going away anyway (see https://github.com/rspec/rspec-core/issues/2266).\r\n\r\nThis is with Rspec v 3.4.4.\r\n\r\nThanks,\r\n-- Chad","reactions":{"url":"https://api.github.com/repos/KnapsackPro/knapsack_pro-ruby/issues/37/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/KnapsackPro/knapsack_pro-ruby/issues/37/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/rspec/rspec-core/issues/comments/618919786","html_url":"https://github.com/rspec/rspec-core/issues/2721#issuecomment-618919786","issue_url":"https://api.github.com/repos/rspec/rspec-core/issues/2721","id":618919786,"node_id":"MDEyOklzc3VlQ29tbWVudDYxODkxOTc4Ng==","user":{"login":"agis","id":827224,"node_id":"MDQ6VXNlcjgyNzIyNA==","avatar_url":"https://avatars.githubusercontent.com/u/827224?v=4","gravatar_id":"","url":"https://api.github.com/users/agis","html_url":"https://github.com/agis","followers_url":"https://api.github.com/users/agis/followers","following_url":"https://api.github.com/users/agis/following{/other_user}","gists_url":"https://api.github.com/users/agis/gists{/gist_id}","starred_url":"https://api.github.com/users/agis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/agis/subscriptions","organizations_url":"https://api.github.com/users/agis/orgs","repos_url":"https://api.github.com/users/agis/repos","events_url":"https://api.github.com/users/agis/events{/privacy}","received_events_url":"https://api.github.com/users/agis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-24T09:59:04Z","updated_at":"2020-04-24T10:05:58Z","body":"I'm too bumping into the same issue when using `RSpec.clear_examples` in the same process and then issue two `RSpec::Core::Runner.new().run` with id filters that point to the same spec file. I also observe the what the original issue describes, the second time that the same file is executed (albeit with a different ID filter), that example is not executed.\r\n\r\n(Note: I've tried `RSpec.reset` and `RSpec.world.reset` but I got a lot of weird failures. I've then tried to load `spec_helper.rb` everytime before the run but still no luck.)\r\n\r\nAnyway, I did some digging around and this is what I've found so far.\r\n\r\nThe reason that the example is not executed, is _not_ because the filters are wrong. It's because the  example metadata that RSpec populates are wrong, the second time the file is loaded. So if you have a spec file like this:\r\n\r\n```ruby\r\n# foo_spec.rb\r\ndescribe \"foo\"\r\n  it \"bar\" do\r\n    expect(true).to be true\r\n  end\r\nend\r\n```\r\n\r\nThe expected filter to run the example would be `foo_spec.rb[1:1]`. However, when we do:\r\n\r\n```ruby\r\n2.times do\r\n  RSpec.clear_examples\r\n  RSpec.world.prepare_example_filtering\r\n  opts = RSpec::Core::ConfigurationOptions.new([\"foo_spec[1:1]\"])\r\n  RSpec::Core::Runner.new(opts).run($stdout, $stderr)\r\nend\r\n```\r\n\r\nThe filter (`1:1`) is correctly picked up by RSpec and in the first iteration, the published example `Metadata#scoped_id` is populated as expected, `1:1`. In the second iteration though, the metadata `scoped_id` becomes `2:1` instead of `1:1`. This is set in: https://github.com/rspec/rspec-core/blob/b77634d5ca100b39968e14c94ec00ad660273ec3/lib/rspec/core/metadata.rb#L185-L189\r\n\r\nThat `index` variable is set to `2` . From there, the `FilterManager` naturally doesn't detect any examples to run, since `1:1` (what we requested) doesn't match `2:1` (what RSpec ended up publishing): https://github.com/rspec/rspec-core/blob/b77634d5ca100b39968e14c94ec00ad660273ec3/lib/rspec/core/world.rb#L34-L38\r\n\r\nSo `filter_manager.prune(group.examples)` returns an empty array.\r\n\r\nI haven't had the time to investigate further, so I don't know if there's anything that we can do in RSpec to make it handle such cases in a backwards compatible way. I'm not even sure that this behavior of the `index_provider` is expected.\r\n\r\n@JonRowe, @pirj, @myronmarston  any ideas?","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rspec/rspec-core/issues/comments/618919786/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"agis","id":827224,"node_id":"MDQ6VXNlcjgyNzIyNA==","avatar_url":"https://avatars.githubusercontent.com/u/827224?v=4","gravatar_id":"","url":"https://api.github.com/users/agis","html_url":"https://github.com/agis","followers_url":"https://api.github.com/users/agis/followers","following_url":"https://api.github.com/users/agis/following{/other_user}","gists_url":"https://api.github.com/users/agis/gists{/gist_id}","starred_url":"https://api.github.com/users/agis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/agis/subscriptions","organizations_url":"https://api.github.com/users/agis/orgs","repos_url":"https://api.github.com/users/agis/repos","events_url":"https://api.github.com/users/agis/events{/privacy}","received_events_url":"https://api.github.com/users/agis/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":3268715268,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MzI2ODcxNTI2OA==","url":"https://api.github.com/repos/rspec/rspec-core/issues/events/3268715268","actor":{"login":"pirj","id":6916,"node_id":"MDQ6VXNlcjY5MTY=","avatar_url":"https://avatars.githubusercontent.com/u/6916?v=4","gravatar_id":"","url":"https://api.github.com/users/pirj","html_url":"https://github.com/pirj","followers_url":"https://api.github.com/users/pirj/followers","following_url":"https://api.github.com/users/pirj/following{/other_user}","gists_url":"https://api.github.com/users/pirj/gists{/gist_id}","starred_url":"https://api.github.com/users/pirj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pirj/subscriptions","organizations_url":"https://api.github.com/users/pirj/orgs","repos_url":"https://api.github.com/users/pirj/repos","events_url":"https://api.github.com/users/pirj/events{/privacy}","received_events_url":"https://api.github.com/users/pirj/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-04-24T09:59:04Z","performed_via_github_app":null},{"id":3268715273,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDMyNjg3MTUyNzM=","url":"https://api.github.com/repos/rspec/rspec-core/issues/events/3268715273","actor":{"login":"pirj","id":6916,"node_id":"MDQ6VXNlcjY5MTY=","avatar_url":"https://avatars.githubusercontent.com/u/6916?v=4","gravatar_id":"","url":"https://api.github.com/users/pirj","html_url":"https://github.com/pirj","followers_url":"https://api.github.com/users/pirj/followers","following_url":"https://api.github.com/users/pirj/following{/other_user}","gists_url":"https://api.github.com/users/pirj/gists{/gist_id}","starred_url":"https://api.github.com/users/pirj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pirj/subscriptions","organizations_url":"https://api.github.com/users/pirj/orgs","repos_url":"https://api.github.com/users/pirj/repos","events_url":"https://api.github.com/users/pirj/events{/privacy}","received_events_url":"https://api.github.com/users/pirj/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-04-24T09:59:04Z","performed_via_github_app":null},{"id":3268715279,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MzI2ODcxNTI3OQ==","url":"https://api.github.com/repos/rspec/rspec-core/issues/events/3268715279","actor":{"login":"myronmarston","id":49391,"node_id":"MDQ6VXNlcjQ5Mzkx","avatar_url":"https://avatars.githubusercontent.com/u/49391?v=4","gravatar_id":"","url":"https://api.github.com/users/myronmarston","html_url":"https://github.com/myronmarston","followers_url":"https://api.github.com/users/myronmarston/followers","following_url":"https://api.github.com/users/myronmarston/following{/other_user}","gists_url":"https://api.github.com/users/myronmarston/gists{/gist_id}","starred_url":"https://api.github.com/users/myronmarston/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/myronmarston/subscriptions","organizations_url":"https://api.github.com/users/myronmarston/orgs","repos_url":"https://api.github.com/users/myronmarston/repos","events_url":"https://api.github.com/users/myronmarston/events{/privacy}","received_events_url":"https://api.github.com/users/myronmarston/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-04-24T09:59:04Z","performed_via_github_app":null},{"id":3268715281,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDMyNjg3MTUyODE=","url":"https://api.github.com/repos/rspec/rspec-core/issues/events/3268715281","actor":{"login":"myronmarston","id":49391,"node_id":"MDQ6VXNlcjQ5Mzkx","avatar_url":"https://avatars.githubusercontent.com/u/49391?v=4","gravatar_id":"","url":"https://api.github.com/users/myronmarston","html_url":"https://github.com/myronmarston","followers_url":"https://api.github.com/users/myronmarston/followers","following_url":"https://api.github.com/users/myronmarston/following{/other_user}","gists_url":"https://api.github.com/users/myronmarston/gists{/gist_id}","starred_url":"https://api.github.com/users/myronmarston/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/myronmarston/subscriptions","organizations_url":"https://api.github.com/users/myronmarston/orgs","repos_url":"https://api.github.com/users/myronmarston/repos","events_url":"https://api.github.com/users/myronmarston/events{/privacy}","received_events_url":"https://api.github.com/users/myronmarston/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-04-24T09:59:04Z","performed_via_github_app":null},{"id":3268715284,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MzI2ODcxNTI4NA==","url":"https://api.github.com/repos/rspec/rspec-core/issues/events/3268715284","actor":{"login":"JonRowe","id":162976,"node_id":"MDQ6VXNlcjE2Mjk3Ng==","avatar_url":"https://avatars.githubusercontent.com/u/162976?v=4","gravatar_id":"","url":"https://api.github.com/users/JonRowe","html_url":"https://github.com/JonRowe","followers_url":"https://api.github.com/users/JonRowe/followers","following_url":"https://api.github.com/users/JonRowe/following{/other_user}","gists_url":"https://api.github.com/users/JonRowe/gists{/gist_id}","starred_url":"https://api.github.com/users/JonRowe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JonRowe/subscriptions","organizations_url":"https://api.github.com/users/JonRowe/orgs","repos_url":"https://api.github.com/users/JonRowe/repos","events_url":"https://api.github.com/users/JonRowe/events{/privacy}","received_events_url":"https://api.github.com/users/JonRowe/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-04-24T09:59:04Z","performed_via_github_app":null},{"id":3268715285,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDMyNjg3MTUyODU=","url":"https://api.github.com/repos/rspec/rspec-core/issues/events/3268715285","actor":{"login":"JonRowe","id":162976,"node_id":"MDQ6VXNlcjE2Mjk3Ng==","avatar_url":"https://avatars.githubusercontent.com/u/162976?v=4","gravatar_id":"","url":"https://api.github.com/users/JonRowe","html_url":"https://github.com/JonRowe","followers_url":"https://api.github.com/users/JonRowe/followers","following_url":"https://api.github.com/users/JonRowe/following{/other_user}","gists_url":"https://api.github.com/users/JonRowe/gists{/gist_id}","starred_url":"https://api.github.com/users/JonRowe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JonRowe/subscriptions","organizations_url":"https://api.github.com/users/JonRowe/orgs","repos_url":"https://api.github.com/users/JonRowe/repos","events_url":"https://api.github.com/users/JonRowe/events{/privacy}","received_events_url":"https://api.github.com/users/JonRowe/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-04-24T09:59:04Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rspec/rspec-core/issues/comments/618930744","html_url":"https://github.com/rspec/rspec-core/issues/2721#issuecomment-618930744","issue_url":"https://api.github.com/repos/rspec/rspec-core/issues/2721","id":618930744,"node_id":"MDEyOklzc3VlQ29tbWVudDYxODkzMDc0NA==","user":{"login":"JonRowe","id":162976,"node_id":"MDQ6VXNlcjE2Mjk3Ng==","avatar_url":"https://avatars.githubusercontent.com/u/162976?v=4","gravatar_id":"","url":"https://api.github.com/users/JonRowe","html_url":"https://github.com/JonRowe","followers_url":"https://api.github.com/users/JonRowe/followers","following_url":"https://api.github.com/users/JonRowe/following{/other_user}","gists_url":"https://api.github.com/users/JonRowe/gists{/gist_id}","starred_url":"https://api.github.com/users/JonRowe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JonRowe/subscriptions","organizations_url":"https://api.github.com/users/JonRowe/orgs","repos_url":"https://api.github.com/users/JonRowe/repos","events_url":"https://api.github.com/users/JonRowe/events{/privacy}","received_events_url":"https://api.github.com/users/JonRowe/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-24T10:24:27Z","updated_at":"2020-04-24T10:24:27Z","body":"The issue you've encountered @agis is due to the filters not reseting between runs, `.reset` is your solution, you just need to capture the config before your first run, duplicate and reuse it, rather than letting the default occur (as you have rails helpers). You could also reload the rails helpers either would work but these are not mainstream use cases.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/rspec/rspec-core/issues/comments/618930744/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"JonRowe","id":162976,"node_id":"MDQ6VXNlcjE2Mjk3Ng==","avatar_url":"https://avatars.githubusercontent.com/u/162976?v=4","gravatar_id":"","url":"https://api.github.com/users/JonRowe","html_url":"https://github.com/JonRowe","followers_url":"https://api.github.com/users/JonRowe/followers","following_url":"https://api.github.com/users/JonRowe/following{/other_user}","gists_url":"https://api.github.com/users/JonRowe/gists{/gist_id}","starred_url":"https://api.github.com/users/JonRowe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JonRowe/subscriptions","organizations_url":"https://api.github.com/users/JonRowe/orgs","repos_url":"https://api.github.com/users/JonRowe/repos","events_url":"https://api.github.com/users/JonRowe/events{/privacy}","received_events_url":"https://api.github.com/users/JonRowe/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":3268802660,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MzI2ODgwMjY2MA==","url":"https://api.github.com/repos/rspec/rspec-core/issues/events/3268802660","actor":{"login":"agis","id":827224,"node_id":"MDQ6VXNlcjgyNzIyNA==","avatar_url":"https://avatars.githubusercontent.com/u/827224?v=4","gravatar_id":"","url":"https://api.github.com/users/agis","html_url":"https://github.com/agis","followers_url":"https://api.github.com/users/agis/followers","following_url":"https://api.github.com/users/agis/following{/other_user}","gists_url":"https://api.github.com/users/agis/gists{/gist_id}","starred_url":"https://api.github.com/users/agis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/agis/subscriptions","organizations_url":"https://api.github.com/users/agis/orgs","repos_url":"https://api.github.com/users/agis/repos","events_url":"https://api.github.com/users/agis/events{/privacy}","received_events_url":"https://api.github.com/users/agis/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-04-24T10:24:27Z","performed_via_github_app":null},{"id":3268802663,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDMyNjg4MDI2NjM=","url":"https://api.github.com/repos/rspec/rspec-core/issues/events/3268802663","actor":{"login":"agis","id":827224,"node_id":"MDQ6VXNlcjgyNzIyNA==","avatar_url":"https://avatars.githubusercontent.com/u/827224?v=4","gravatar_id":"","url":"https://api.github.com/users/agis","html_url":"https://github.com/agis","followers_url":"https://api.github.com/users/agis/followers","following_url":"https://api.github.com/users/agis/following{/other_user}","gists_url":"https://api.github.com/users/agis/gists{/gist_id}","starred_url":"https://api.github.com/users/agis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/agis/subscriptions","organizations_url":"https://api.github.com/users/agis/orgs","repos_url":"https://api.github.com/users/agis/repos","events_url":"https://api.github.com/users/agis/events{/privacy}","received_events_url":"https://api.github.com/users/agis/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-04-24T10:24:27Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/rspec/rspec-core/issues/comments/618933411","html_url":"https://github.com/rspec/rspec-core/issues/2721#issuecomment-618933411","issue_url":"https://api.github.com/repos/rspec/rspec-core/issues/2721","id":618933411,"node_id":"MDEyOklzc3VlQ29tbWVudDYxODkzMzQxMQ==","user":{"login":"agis","id":827224,"node_id":"MDQ6VXNlcjgyNzIyNA==","avatar_url":"https://avatars.githubusercontent.com/u/827224?v=4","gravatar_id":"","url":"https://api.github.com/users/agis","html_url":"https://github.com/agis","followers_url":"https://api.github.com/users/agis/followers","following_url":"https://api.github.com/users/agis/following{/other_user}","gists_url":"https://api.github.com/users/agis/gists{/gist_id}","starred_url":"https://api.github.com/users/agis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/agis/subscriptions","organizations_url":"https://api.github.com/users/agis/orgs","repos_url":"https://api.github.com/users/agis/repos","events_url":"https://api.github.com/users/agis/events{/privacy}","received_events_url":"https://api.github.com/users/agis/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-24T10:30:21Z","updated_at":"2020-04-24T10:30:21Z","body":"@JonRowe To make sure I understand, by \"filters\" you're referring `FilterManager`? If so, I believe this is not the culprit because I see that it is set as expected in `RSpec.world`:\r\n\r\n```ruby\r\n# 1st iteration/run\r\n=> #<RSpec::Core::FilterManager:0x000055698a282028\r\n @exclusions=\r\n  #<RSpec::Core::FilterRules:0x000055698a282000\r\n   @opposite=#<RSpec::Core::InclusionRules:0x000055698a281fb0 @opposite=#<RSpec::Core::FilterRules:0x000055698a282000 ...>, @rules={:ids=>{\"./spec/controllers/validation_controller_spec.rb\"=>[\"1:1:1\"]}}>,\r\n   @rules={}>,\r\n @inclusions=\r\n  #<RSpec::Core::InclusionRules:0x000055698a281fb0\r\n   @opposite=#<RSpec::Core::FilterRules:0x000055698a282000 @opposite=#<RSpec::Core::InclusionRules:0x000055698a281fb0 ...>, @rules={}>,\r\n   @rules={:ids=>{\"./spec/controllers/validation_controller_spec.rb\"=>[\"1:1:1\"]}}>>\r\n\r\n\r\n# 2nd iteration/run\r\n=> #<RSpec::Core::FilterManager:0x000055699d80f0c8\r\n @exclusions=\r\n  #<RSpec::Core::FilterRules:0x000055699d80f0a0\r\n   @opposite=#<RSpec::Core::InclusionRules:0x000055699d80f050 @opposite=#<RSpec::Core::FilterRules:0x000055699d80f0a0 ...>, @rules={:ids=>{\"./spec/controllers/validation_controller_spec.rb\"=>[\"1:1:1\"]}}>,\r\n   @rules={}>,\r\n @inclusions=\r\n  #<RSpec::Core::InclusionRules:0x000055699d80f050\r\n   @opposite=#<RSpec::Core::FilterRules:0x000055699d80f0a0 @opposite=#<RSpec::Core::InclusionRules:0x000055699d80f050 ...>, @rules={}>,\r\n   @rules={:ids=>{\"./spec/controllers/validation_controller_spec.rb\"=>[\"1:1:1\"]}}>>\r\n```\r\n\r\nThey do seem set up properly to me, but perhaps I'm missing something?","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/rspec/rspec-core/issues/comments/618933411/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"agis","id":827224,"node_id":"MDQ6VXNlcjgyNzIyNA==","avatar_url":"https://avatars.githubusercontent.com/u/827224?v=4","gravatar_id":"","url":"https://api.github.com/users/agis","html_url":"https://github.com/agis","followers_url":"https://api.github.com/users/agis/followers","following_url":"https://api.github.com/users/agis/following{/other_user}","gists_url":"https://api.github.com/users/agis/gists{/gist_id}","starred_url":"https://api.github.com/users/agis/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/agis/subscriptions","organizations_url":"https://api.github.com/users/agis/orgs","repos_url":"https://api.github.com/users/agis/repos","events_url":"https://api.github.com/users/agis/events{/privacy}","received_events_url":"https://api.github.com/users/agis/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":3268821609,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MzI2ODgyMTYwOQ==","url":"https://api.github.com/repos/rspec/rspec-core/issues/events/3268821609","actor":{"login":"JonRowe","id":162976,"node_id":"MDQ6VXNlcjE2Mjk3Ng==","avatar_url":"https://avatars.githubusercontent.com/u/162976?v=4","gravatar_id":"","url":"https://api.github.com/users/JonRowe","html_url":"https://github.com/JonRowe","followers_url":"https://api.github.com/users/JonRowe/followers","following_url":"https://api.github.com/users/JonRowe/following{/other_user}","gists_url":"https://api.github.com/users/JonRowe/gists{/gist_id}","starred_url":"https://api.github.com/users/JonRowe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JonRowe/subscriptions","organizations_url":"https://api.github.com/users/JonRowe/orgs","repos_url":"https://api.github.com/users/JonRowe/repos","events_url":"https://api.github.com/users/JonRowe/events{/privacy}","received_events_url":"https://api.github.com/users/JonRowe/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-04-24T10:30:21Z","performed_via_github_app":null}]