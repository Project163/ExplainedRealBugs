{"url":"https://api.github.com/repos/rspec/rspec-core/issues/1691","repository_url":"https://api.github.com/repos/rspec/rspec-core","labels_url":"https://api.github.com/repos/rspec/rspec-core/issues/1691/labels{/name}","comments_url":"https://api.github.com/repos/rspec/rspec-core/issues/1691/comments","events_url":"https://api.github.com/repos/rspec/rspec-core/issues/1691/events","html_url":"https://github.com/rspec/rspec-core/issues/1691","id":41755508,"node_id":"MDU6SXNzdWU0MTc1NTUwOA==","number":1691,"title":"Regression in rake task `pattern` option","user":{"login":"myronmarston","id":49391,"node_id":"MDQ6VXNlcjQ5Mzkx","avatar_url":"https://avatars.githubusercontent.com/u/49391?v=4","gravatar_id":"","url":"https://api.github.com/users/myronmarston","html_url":"https://github.com/myronmarston","followers_url":"https://api.github.com/users/myronmarston/followers","following_url":"https://api.github.com/users/myronmarston/following{/other_user}","gists_url":"https://api.github.com/users/myronmarston/gists{/gist_id}","starred_url":"https://api.github.com/users/myronmarston/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/myronmarston/subscriptions","organizations_url":"https://api.github.com/users/myronmarston/orgs","repos_url":"https://api.github.com/users/myronmarston/repos","events_url":"https://api.github.com/users/myronmarston/events{/privacy}","received_events_url":"https://api.github.com/users/myronmarston/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/rspec/rspec-core/milestones/15","html_url":"https://github.com/rspec/rspec-core/milestone/15","labels_url":"https://api.github.com/repos/rspec/rspec-core/milestones/15/labels","id":735110,"node_id":"MDk6TWlsZXN0b25lNzM1MTEw","number":15,"title":"3.1","description":"","creator":{"login":"myronmarston","id":49391,"node_id":"MDQ6VXNlcjQ5Mzkx","avatar_url":"https://avatars.githubusercontent.com/u/49391?v=4","gravatar_id":"","url":"https://api.github.com/users/myronmarston","html_url":"https://github.com/myronmarston","followers_url":"https://api.github.com/users/myronmarston/followers","following_url":"https://api.github.com/users/myronmarston/following{/other_user}","gists_url":"https://api.github.com/users/myronmarston/gists{/gist_id}","starred_url":"https://api.github.com/users/myronmarston/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/myronmarston/subscriptions","organizations_url":"https://api.github.com/users/myronmarston/orgs","repos_url":"https://api.github.com/users/myronmarston/repos","events_url":"https://api.github.com/users/myronmarston/events{/privacy}","received_events_url":"https://api.github.com/users/myronmarston/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":15,"state":"closed","created_at":"2014-07-29T05:32:41Z","updated_at":"2020-06-03T08:33:28Z","due_on":"2014-08-31T07:00:00Z","closed_at":"2020-06-03T08:33:28Z"},"comments":0,"created_at":"2014-09-02T21:13:26Z","updated_at":"2014-09-09T22:19:30Z","closed_at":"2014-09-04T04:52:29Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"As of #1653, there's a regression in the rake task's `pattern` option.\n\nBefore that was merged, you could do the following:\n\n``` ruby\nRSpec::Core::RakeTask.new(:acceptance) do |t|\n  t.pattern = \"./spec/acceptance\"\nend\n```\n\nNotice that `pattern` is not actually a file glob pattern but is a directory.  The old implementation used `FileList[pattern]`, which returns `[./spec/acceptance]`. This is passed on to the `rspec` command and the `rspec` command will find and run spec files under that directory.\n\nAs of #1653, the rake task passes along the value as the `--pattern` option, and as a file glob it matches no files and therefore does not run any specs.\n\nWhile it's a bit of a misuse of the rake task `pattern` option to pass a directory rather than a file glob, I consider this to be a regression and we should fix it.  We may want to deprecate support for passing directories and remove it in RSpec 4.\n\nI think the solution is to check to see if the given pattern is a directory, and if so, pass it along to the rspec command rather than passing it as a `--pattern` option.  I'm not 100% sure this will solve all cases since the approaches are fundamentally different.\n","closed_by":{"login":"JonRowe","id":162976,"node_id":"MDQ6VXNlcjE2Mjk3Ng==","avatar_url":"https://avatars.githubusercontent.com/u/162976?v=4","gravatar_id":"","url":"https://api.github.com/users/JonRowe","html_url":"https://github.com/JonRowe","followers_url":"https://api.github.com/users/JonRowe/followers","following_url":"https://api.github.com/users/JonRowe/following{/other_user}","gists_url":"https://api.github.com/users/JonRowe/gists{/gist_id}","starred_url":"https://api.github.com/users/JonRowe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/JonRowe/subscriptions","organizations_url":"https://api.github.com/users/JonRowe/orgs","repos_url":"https://api.github.com/users/JonRowe/repos","events_url":"https://api.github.com/users/JonRowe/events{/privacy}","received_events_url":"https://api.github.com/users/JonRowe/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/rspec/rspec-core/issues/1691/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rspec/rspec-core/issues/1691/timeline","performed_via_github_app":null,"state_reason":"completed"}