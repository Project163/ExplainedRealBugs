{"url":"https://api.github.com/repos/rspec/rspec-core/issues/802","repository_url":"https://api.github.com/repos/rspec/rspec-core","labels_url":"https://api.github.com/repos/rspec/rspec-core/issues/802/labels{/name}","comments_url":"https://api.github.com/repos/rspec/rspec-core/issues/802/comments","events_url":"https://api.github.com/repos/rspec/rspec-core/issues/802/events","html_url":"https://github.com/rspec/rspec-core/issues/802","id":11389013,"node_id":"MDU6SXNzdWUxMTM4OTAxMw==","number":802,"title":"subject { } is broken in rspec 2.13.x when before(:all) references a `let` declaration","user":{"login":"postmodern","id":12671,"node_id":"MDQ6VXNlcjEyNjcx","avatar_url":"https://avatars.githubusercontent.com/u/12671?v=4","gravatar_id":"","url":"https://api.github.com/users/postmodern","html_url":"https://github.com/postmodern","followers_url":"https://api.github.com/users/postmodern/followers","following_url":"https://api.github.com/users/postmodern/following{/other_user}","gists_url":"https://api.github.com/users/postmodern/gists{/gist_id}","starred_url":"https://api.github.com/users/postmodern/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/postmodern/subscriptions","organizations_url":"https://api.github.com/users/postmodern/orgs","repos_url":"https://api.github.com/users/postmodern/repos","events_url":"https://api.github.com/users/postmodern/events{/privacy}","received_events_url":"https://api.github.com/users/postmodern/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":true,"assignee":{"login":"myronmarston","id":49391,"node_id":"MDQ6VXNlcjQ5Mzkx","avatar_url":"https://avatars.githubusercontent.com/u/49391?v=4","gravatar_id":"","url":"https://api.github.com/users/myronmarston","html_url":"https://github.com/myronmarston","followers_url":"https://api.github.com/users/myronmarston/followers","following_url":"https://api.github.com/users/myronmarston/following{/other_user}","gists_url":"https://api.github.com/users/myronmarston/gists{/gist_id}","starred_url":"https://api.github.com/users/myronmarston/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/myronmarston/subscriptions","organizations_url":"https://api.github.com/users/myronmarston/orgs","repos_url":"https://api.github.com/users/myronmarston/repos","events_url":"https://api.github.com/users/myronmarston/events{/privacy}","received_events_url":"https://api.github.com/users/myronmarston/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"myronmarston","id":49391,"node_id":"MDQ6VXNlcjQ5Mzkx","avatar_url":"https://avatars.githubusercontent.com/u/49391?v=4","gravatar_id":"","url":"https://api.github.com/users/myronmarston","html_url":"https://github.com/myronmarston","followers_url":"https://api.github.com/users/myronmarston/followers","following_url":"https://api.github.com/users/myronmarston/following{/other_user}","gists_url":"https://api.github.com/users/myronmarston/gists{/gist_id}","starred_url":"https://api.github.com/users/myronmarston/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/myronmarston/subscriptions","organizations_url":"https://api.github.com/users/myronmarston/orgs","repos_url":"https://api.github.com/users/myronmarston/repos","events_url":"https://api.github.com/users/myronmarston/events{/privacy}","received_events_url":"https://api.github.com/users/myronmarston/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":7,"created_at":"2013-02-26T01:11:51Z","updated_at":"2013-09-11T13:23:41Z","closed_at":"2013-03-02T07:42:35Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Ran some specs that make heavy use of `subject { }` against rspec 2.13.x. It appears to be ignoring the `subject { }` blocks, and using `described_class` instead.\n- [ronin/url.rb](https://github.com/ronin-ruby/ronin/blob/master/lib/ronin/url.rb)\n- [spec/url_spec.rb](https://github.com/ronin-ruby/ronin/blob/master/spec/url_spec.rb)\n\n---\n\n```\n  16) Ronin::URL from should parse URL schemes\n     Failure/Error: subject.scheme.should_not be_nil\n     NoMethodError:\n       undefined property or relationship 'nil?' on Ronin::URLScheme\n     # ./spec/url_spec.rb:95:in `block (3 levels) in <top (required)>'\n\n  17) Ronin::URL from should parse host names\n     Failure/Error: subject.host_name.address.should == host_name\n       expected: \"www.example.com\"\n            got: #<DataMapper::Query::Path:0x000000028e5f60 @relationships=[#<DataMapper::Associations::ManyToOne::Relationship:0x00000001efea38 @required=true, @key=false, @unique=false, @child_model=Ronin::URL, @child_model_name=\"Ronin::URL\", @parent_model=Ronin::HostName, @parent_model_name=\"HostName\", @name=:host_name, @instance_variable_name=\"@host_name\", @options={:min=>1, :max=>1, :child_repository_name=>:default, :parent_repository_name=>nil}, @child_repository_name=:default, @parent_repository_name=nil, @min=1, @max=1, @reader_visibility=:public, @writer_visibility=:public, @default=nil, @query={}, @parent_key=[#<DataMapper::Property::Serial @model=Ronin::Address @name=:id>], @child_key=[#<DataMapper::Property::Integer @model=Ronin::URL @name=:host_name_id>], @inverse=#<DataMapper::Associations::OneToMany::Relationship:0x00000001ef1950 @child_model=Ronin::URL, @child_model_name=\"URL\", @parent_model=Ronin::HostName, @parent_model_name=\"Ronin::HostName\", @name=:urls, @instance_variable_name=\"@urls\", @options={:min=>0, :max=>Infinity, :child_repository_name=>nil, :parent_repository_name=>:default}, @child_repository_name=nil, @parent_repository_name=:default, @min=0, @max=Infinity, @reader_visibility=:public, @writer_visibility=:public, @default=nil, @query={}, @inverse=#<DataMapper::Associations::ManyToOne::Relationship:0x00000001efea38 ...>, @parent_key=[#<DataMapper::Property::Serial @model=Ronin::Address @name=:id>]>>], @repository_name=:default, @model=Ronin::HostName, @property=#<DataMapper::Property::String @model=Ronin::HostName @name=:address>> (using ==)\n       Diff:\n       @@ -1,2 +1,2 @@\n       -\"www.example.com\"\n       +#<DataMapper::Property::String @model=Ronin::HostName @name=:address>\n\n     # ./spec/url_spec.rb:100:in `block (3 levels) in <top (required)>'\n\n  18) Ronin::URL from should parse port numbers\n     Failure/Error: subject.port.number.should == port\n       expected: 8080\n            got: #<DataMapper::Query::Path:0x000000028f10e0 @relationships=[#<DataMapper::Associations::ManyToOne::Relationship:0x00000001f08588 @required=false, @key=false, @unique=false, @child_model=Ronin::URL, @child_model_name=\"Ronin::URL\", @parent_model=Ronin::TCPPort, @parent_model_name=\"TCPPort\", @name=:port, @instance_variable_name=\"@port\", @options={:min=>0, :max=>1, :required=>false, :child_repository_name=>:default, :parent_repository_name=>nil}, @child_repository_name=:default, @parent_repository_name=nil, @min=0, @max=1, @reader_visibility=:public, @writer_visibility=:public, @default=nil, @query={}, @parent_key=[#<DataMapper::Property::Serial @model=Ronin::Port @name=:id>], @child_key=[#<DataMapper::Property::Integer @model=Ronin::URL @name=:port_id>], @inverse=#<DataMapper::Associations::OneToMany::Relationship:0x0000000205a378 @child_model=Ronin::URL, @child_model_name=\"URL\", @parent_model=Ronin::TCPPort, @parent_model_name=\"Ronin::TCPPort\", @name=:urls, @instance_variable_name=\"@urls\", @options={:min=>0, :max=>Infinity, :child_key=>[:port_id], :child_repository_name=>nil, :parent_repository_name=>:default}, @child_repository_name=nil, @parent_repository_name=:default, @min=0, @max=Infinity, @reader_visibility=:public, @writer_visibility=:public, @default=nil, @query={}, @child_properties=[:port_id], @inverse=#<DataMapper::Associations::ManyToOne::Relationship:0x00000001f08588 ...>, @parent_key=[#<DataMapper::Property::Serial @model=Ronin::Port @name=:id>]>>], @repository_name=:default, @model=Ronin::TCPPort, @property=#<DataMapper::Property::Integer @model=Ronin::Port @name=:number>> (using ==)\n     # ./spec/url_spec.rb:104:in `block (3 levels) in <top (required)>'\n\n  19) Ronin::URL from should parse paths\n     Failure/Error: subject.path.should == path\n       expected: \"/path\"\n            got: #<DataMapper::Property::String @model=Ronin::URL @name=:path> (using ==)\n       Diff:\n       @@ -1,2 +1,2 @@\n       -\"/path\"\n       +#<DataMapper::Property::String @model=Ronin::URL @name=:path>\n\n     # ./spec/url_spec.rb:108:in `block (3 levels) in <top (required)>'\n\n  20) Ronin::URL from should parse query strings\n     Failure/Error: subject.query_string.should == query_string\n     NoMethodError:\n       undefined method `query_string' for Ronin::URL:Class\n     # ./spec/url_spec.rb:112:in `block (3 levels) in <top (required)>'\n\n  21) Ronin::URL from should parse URL fragments\n     Failure/Error: subject.fragment.should == fragment\n       expected: \"frag\"\n            got: #<DataMapper::Property::String @model=Ronin::URL @name=:fragment> (using ==)\n       Diff:\n       @@ -1,2 +1,2 @@\n       -\"frag\"\n       +#<DataMapper::Property::String @model=Ronin::URL @name=:fragment>\n\n     # ./spec/url_spec.rb:116:in `block (3 levels) in <top (required)>'\n\n  22) Ronin::URL#to_uri should convert the scheme\n     Failure/Error: subject.scheme.should == scheme\n     NoMethodError:\n       undefined property or relationship 'method' on Ronin::URLScheme\n     # ./spec/url_spec.rb:131:in `block (3 levels) in <top (required)>'\n\n  23) Ronin::URL#to_uri should convert the host name\n     Failure/Error: subject.host.should == host_name\n     NoMethodError:\n       undefined method `host' for Ronin::URL:Class\n     # ./spec/url_spec.rb:135:in `block (3 levels) in <top (required)>'\n\n  24) Ronin::URL#to_uri should convert the port number\n     Failure/Error: subject.port.should == port\n     NoMethodError:\n       undefined property or relationship 'method' on Ronin::TCPPort\n     # ./spec/url_spec.rb:139:in `block (3 levels) in <top (required)>'\n\n  25) Ronin::URL#to_uri should convert the path\n     Failure/Error: subject.path.should == path\n       expected: \"/path\"\n            got: #<DataMapper::Property::String @model=Ronin::URL @name=:path> (using ==)\n       Diff:\n       @@ -1,2 +1,2 @@\n       -\"/path\"\n       +#<DataMapper::Property::String @model=Ronin::URL @name=:path>\n\n     # ./spec/url_spec.rb:143:in `block (3 levels) in <top (required)>'\n\n  26) Ronin::URL#to_uri should convert the query string\n     Failure/Error: subject.query.should == query_string\n       expected: \"q=1\"\n            got: #<DataMapper::Query @repository=:default @model=Ronin::URL @fields=[#<DataMapper::Property::Serial @model=Ronin::URL @name=:id>, #<DataMapper::Property::String @model=Ronin::URL @name=:path>, #<DataMapper::Property::String @model=Ronin::URL @name=:fragment>, #<DataMapper::Property::Time @model=Ronin::URL @name=:last_scanned_at>, #<DataMapper::Property::DateTime @model=Ronin::URL @name=:created_at>, #<DataMapper::Property::Integer @model=Ronin::URL @name=:scheme_id>, #<DataMapper::Property::Integer @model=Ronin::URL @name=:host_name_id>, #<DataMapper::Property::Integer @model=Ronin::URL @name=:port_id>] @links=[] @conditions=nil @order=[#<DataMapper::Query::Direction @target=#<DataMapper::Property::Serial @model=Ronin::URL @name=:id> @operator=:asc>] @limit=nil @offset=0 @reload=false @unique=false> (using ==)\n       Diff:\n       @@ -1,2 +1,2 @@\n       -\"q=1\"\n       +#<DataMapper::Query @repository=:default @model=Ronin::URL @fields=[#<DataMapper::Property::Serial @model=Ronin::URL @name=:id>, #<DataMapper::Property::String @model=Ronin::URL @name=:path>, #<DataMapper::Property::String @model=Ronin::URL @name=:fragment>, #<DataMapper::Property::Time @model=Ronin::URL @name=:last_scanned_at>, #<DataMapper::Property::DateTime @model=Ronin::URL @name=:created_at>, #<DataMapper::Property::Integer @model=Ronin::URL @name=:scheme_id>, #<DataMapper::Property::Integer @model=Ronin::URL @name=:host_name_id>, #<DataMapper::Property::Integer @model=Ronin::URL @name=:port_id>] @links=[] @conditions=nil @order=[#<DataMapper::Query::Direction @target=#<DataMapper::Property::Serial @model=Ronin::URL @name=:id> @operator=:asc>] @limit=nil @offset=0 @reload=false @unique=false>\n\n     # ./spec/url_spec.rb:147:in `block (3 levels) in <top (required)>'\n\n  27) Ronin::URL#to_uri should convert the fragment\n     Failure/Error: subject.fragment.should == fragment\n       expected: \"frag\"\n            got: #<DataMapper::Property::String @model=Ronin::URL @name=:fragment> (using ==)\n       Diff:\n       @@ -1,2 +1,2 @@\n       -\"frag\"\n       +#<DataMapper::Property::String @model=Ronin::URL @name=:fragment>\n\n     # ./spec/url_spec.rb:158:in `block (3 levels) in <top (required)>'\n\n  28) Ronin::URL#to_s should convert the URL back into a String URI\n     Failure/Error: subject.should == uri.to_s\n       expected: \"https://www.example.com:8080/path?q=1#frag\"\n            got: Ronin::URL (using ==)\n       Diff:\n       @@ -1,2 +1,2 @@\n       -\"https://www.example.com:8080/path?q=1#frag\"\n       +Ronin::URL\n\n     # ./spec/url_spec.rb:166:in `block (3 levels) in <top (required)>'\n\n  29) Ronin::URL#inspect should include the full URL\n     Failure/Error: subject.should include(uri.to_s)\n       expected Ronin::URL to include \"https://www.example.com:8080/path?q=1#frag\"\n       Diff:\n       @@ -1,2 +1,2 @@\n       -[\"https://www.example.com:8080/path?q=1#frag\"]\n       +Ronin::URL\n\n     # ./spec/url_spec.rb:174:in `block (3 levels) in <top (required)>'\n```\n","closed_by":{"login":"myronmarston","id":49391,"node_id":"MDQ6VXNlcjQ5Mzkx","avatar_url":"https://avatars.githubusercontent.com/u/49391?v=4","gravatar_id":"","url":"https://api.github.com/users/myronmarston","html_url":"https://github.com/myronmarston","followers_url":"https://api.github.com/users/myronmarston/followers","following_url":"https://api.github.com/users/myronmarston/following{/other_user}","gists_url":"https://api.github.com/users/myronmarston/gists{/gist_id}","starred_url":"https://api.github.com/users/myronmarston/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/myronmarston/subscriptions","organizations_url":"https://api.github.com/users/myronmarston/orgs","repos_url":"https://api.github.com/users/myronmarston/repos","events_url":"https://api.github.com/users/myronmarston/events{/privacy}","received_events_url":"https://api.github.com/users/myronmarston/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/rspec/rspec-core/issues/802/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rspec/rspec-core/issues/802/timeline","performed_via_github_app":null,"state_reason":"completed"}