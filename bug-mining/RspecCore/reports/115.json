{"url":"https://api.github.com/repos/rspec/rspec-core/issues/366","repository_url":"https://api.github.com/repos/rspec/rspec-core","labels_url":"https://api.github.com/repos/rspec/rspec-core/issues/366/labels{/name}","comments_url":"https://api.github.com/repos/rspec/rspec-core/issues/366/comments","events_url":"https://api.github.com/repos/rspec/rspec-core/issues/366/events","html_url":"https://github.com/rspec/rspec-core/issues/366","id":860818,"node_id":"MDU6SXNzdWU4NjA4MTg=","number":366,"title":"spec failure when using drb returns exit status 0","user":{"login":"chrisb87","id":390988,"node_id":"MDQ6VXNlcjM5MDk4OA==","avatar_url":"https://avatars.githubusercontent.com/u/390988?v=4","gravatar_id":"","url":"https://api.github.com/users/chrisb87","html_url":"https://github.com/chrisb87","followers_url":"https://api.github.com/users/chrisb87/followers","following_url":"https://api.github.com/users/chrisb87/following{/other_user}","gists_url":"https://api.github.com/users/chrisb87/gists{/gist_id}","starred_url":"https://api.github.com/users/chrisb87/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chrisb87/subscriptions","organizations_url":"https://api.github.com/users/chrisb87/orgs","repos_url":"https://api.github.com/users/chrisb87/repos","events_url":"https://api.github.com/users/chrisb87/events{/privacy}","received_events_url":"https://api.github.com/users/chrisb87/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2011-05-06T20:57:38Z","updated_at":"2011-05-07T15:41:02Z","closed_at":"2011-05-07T15:41:02Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"I am using Rspec 2 with Spork and Watchr.  I would like to detect if the specs passed or not in my watchr script, but the rspec command always exits with 0 when run with the --drb flag. \n\nI opened a [ticket](https://github.com/timcharper/spork/issues/103) in the spork project and one of the developers determined that a small change to rspec can enable these three tools to play nicely together.\n\n> Ok, it looks like it's a change needed on rspec. Here's what's going on\n> \n> rspec calls Spork::Server#run via DRB, passing in args, stderr and stdout.\n> \n> Eventually, spork calls Spork::TestFramework::RSpec#run_tests, which then calls ::Spec::Runner::CommandLine#run with the same args, stderr and stdout it received.\n> \n> When ::Spec::Runner::CommandLine#run finishes, it returns true if all specs passed, and false if all specs didn't pass. I've confirmed that Spork::Server#run ultimately returns this value via DRB back to the rspec drb client.\n> \n> What needs to happen is the rspec drb client should take this result and modify the exit status based on the result: 1 if false (errors happened), 0 if true (all good).\n> \n> Can you pass this on to the rspec team? It should be a simple fix.\n","closed_by":{"login":"dchelimsky","id":1075,"node_id":"MDQ6VXNlcjEwNzU=","avatar_url":"https://avatars.githubusercontent.com/u/1075?v=4","gravatar_id":"","url":"https://api.github.com/users/dchelimsky","html_url":"https://github.com/dchelimsky","followers_url":"https://api.github.com/users/dchelimsky/followers","following_url":"https://api.github.com/users/dchelimsky/following{/other_user}","gists_url":"https://api.github.com/users/dchelimsky/gists{/gist_id}","starred_url":"https://api.github.com/users/dchelimsky/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dchelimsky/subscriptions","organizations_url":"https://api.github.com/users/dchelimsky/orgs","repos_url":"https://api.github.com/users/dchelimsky/repos","events_url":"https://api.github.com/users/dchelimsky/events{/privacy}","received_events_url":"https://api.github.com/users/dchelimsky/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/rspec/rspec-core/issues/366/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rspec/rspec-core/issues/366/timeline","performed_via_github_app":null,"state_reason":"completed"}