{"url":"https://api.github.com/repos/rspec/rspec-core/issues/1914","repository_url":"https://api.github.com/repos/rspec/rspec-core","labels_url":"https://api.github.com/repos/rspec/rspec-core/issues/1914/labels{/name}","comments_url":"https://api.github.com/repos/rspec/rspec-core/issues/1914/comments","events_url":"https://api.github.com/repos/rspec/rspec-core/issues/1914/events","html_url":"https://github.com/rspec/rspec-core/issues/1914","id":63291285,"node_id":"MDU6SXNzdWU2MzI5MTI4NQ==","number":1914,"title":"Example statuses not persisted when `--next-failure` (or `--fail-fast`) is used","user":{"login":"myronmarston","id":49391,"node_id":"MDQ6VXNlcjQ5Mzkx","avatar_url":"https://avatars.githubusercontent.com/u/49391?v=4","gravatar_id":"","url":"https://api.github.com/users/myronmarston","html_url":"https://github.com/myronmarston","followers_url":"https://api.github.com/users/myronmarston/followers","following_url":"https://api.github.com/users/myronmarston/following{/other_user}","gists_url":"https://api.github.com/users/myronmarston/gists{/gist_id}","starred_url":"https://api.github.com/users/myronmarston/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/myronmarston/subscriptions","organizations_url":"https://api.github.com/users/myronmarston/orgs","repos_url":"https://api.github.com/users/myronmarston/repos","events_url":"https://api.github.com/users/myronmarston/events{/privacy}","received_events_url":"https://api.github.com/users/myronmarston/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":59246474,"node_id":"MDU6TGFiZWw1OTI0NjQ3NA==","url":"https://api.github.com/repos/rspec/rspec-core/labels/Small","name":"Small","color":"0e8a16","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2015-03-20T19:44:47Z","updated_at":"2015-03-23T04:47:29Z","closed_at":"2015-03-23T04:47:29Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Playing around with `--next-failure`, I noticed that the example statuses are not persisted when using it, which prevents it from working as intended.  The cause is this here:\n\nhttps://github.com/rspec/rspec-core/blob/359745122c147233aa33c4b6389a50df159ad398/lib/rspec/core/example_group.rb#L517\n\nThat clears the example groups from `world` before their statuses have been persisted.  When we attempt to persist them there is nothing to persist.\n\nI don't remember why we clear example groups like that, so that's something that should be investigated.  Also, the [cucumber scenario](https://github.com/rspec/rspec-core/blob/359745122c147233aa33c4b6389a50df159ad398/features/command_line/only_failures.feature#L81-L101) that tests this end-to-end did not catch this bug so we should look into making it more robust.\n","closed_by":{"login":"myronmarston","id":49391,"node_id":"MDQ6VXNlcjQ5Mzkx","avatar_url":"https://avatars.githubusercontent.com/u/49391?v=4","gravatar_id":"","url":"https://api.github.com/users/myronmarston","html_url":"https://github.com/myronmarston","followers_url":"https://api.github.com/users/myronmarston/followers","following_url":"https://api.github.com/users/myronmarston/following{/other_user}","gists_url":"https://api.github.com/users/myronmarston/gists{/gist_id}","starred_url":"https://api.github.com/users/myronmarston/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/myronmarston/subscriptions","organizations_url":"https://api.github.com/users/myronmarston/orgs","repos_url":"https://api.github.com/users/myronmarston/repos","events_url":"https://api.github.com/users/myronmarston/events{/privacy}","received_events_url":"https://api.github.com/users/myronmarston/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/rspec/rspec-core/issues/1914/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/rspec/rspec-core/issues/1914/timeline","performed_via_github_app":null,"state_reason":"completed"}