<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:30:53 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[IMAGING-258] TiffReader.readDirectories() fails on EXIF data</title>
                <link>https://issues.apache.org/jira/browse/IMAGING-258</link>
                <project id="12313421" key="IMAGING">Commons Imaging</project>
                    <description>&lt;p&gt;When reading a TIFF directory that contains an EXIF sub directory, the TiffReader class throws an ImageReadException stating that &quot;ExifOffset has incorrect type IFD&quot;.&#160;&lt;/p&gt;

&lt;p&gt;This exception occurs in the TiffReader.readDirectories() call which attempts to read all IFD&apos;s (directories) in a TIFF file.&#160; It can be avoided by calling TiffReader.readFirstDirectory().&#160; Of course, if you do that, you will not be able to access the EXIF elements.&lt;/p&gt;

&lt;p&gt;This happens when accessing the TIFF element with TIFF Tag 0x8769.&#160; I suspect that it could also happen with TIFF files containing GPS extensions, Tag&#160;0x8825.&lt;/p&gt;

&lt;p&gt;I&apos;ve gotten this issue with GeoTIFF files from a couple of different sources.&#160; The one I&apos;d recommend for testing would be the public-domain &quot;Natural Earth Data&quot;&#160; medium-size Cross-blended Hypsometric Tints file at&#160;&lt;a href=&quot;https://www.naturalearthdata.com/downloads/10m-raster-data/10m-cross-blend-hypso/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.naturalearthdata.com/downloads/10m-raster-data/10m-cross-blend-hypso/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I am not experienced with the EXIF sub-directory specification and do not yet have a good sense of what the level of effort for a fix would be.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13308049">IMAGING-258</key>
            <summary>TiffReader.readDirectories() fails on EXIF data</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kinow">Bruno P. Kinoshita</assignee>
                                    <reporter username="gwlucas">Gary Lucas</reporter>
                        <labels>
                    </labels>
                <created>Thu, 28 May 2020 14:06:36 +0000</created>
                <updated>Fri, 7 Aug 2020 04:24:59 +0000</updated>
                            <resolved>Sun, 12 Jul 2020 11:01:51 +0000</resolved>
                                    <version>1.0-alpha1</version>
                                    <fixVersion>1.0-alpha2</fixVersion>
                                    <component>Format: TIFF</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="3600">1h</timespent>
                                <comments>
                            <comment id="17124128" author="gwlucas" created="Tue, 2 Jun 2020 17:41:31 +0000"  >&lt;p&gt;If anyone has a small TIFF file that exhibits this problem, it would be useful to have a test file for unit testing.   The Commons Imaging project has a bunch of TIFF files it uses for unit tests and there should be one to test EXIF tags.   The Natural Earth works just fine for development, but at 65 megabytes, it really doesn&apos;t belong in the project distribution.&lt;/p&gt;</comment>
                            <comment id="17147190" author="gwlucas" created="Sun, 28 Jun 2020 03:44:02 +0000"  >&lt;p&gt;I was able to create a small test file that exhibits this issue.  I have posted a the test file, a code fix, and a new unit test to github.&lt;/p&gt;

&lt;p&gt;I researched this problem and it turns out that it is related to the including a private IFD in a TIFF file (see TIFF Revision 6.0, June 1992, page 9).  The TIFF specification uses the term &quot;private IFD&quot; to mean basically what the same idea as a &quot;custom IFD&quot;, in other words one that contains metadata not covered in the standard TIFF definition.  To include a private IFD, a TIFF file needs to store a file-position for the IFD using a TiffField.  In the original 1992 specification, the relevant field was defined as having a type of Long.  But the file cited above uses a type of IFD:&lt;/p&gt;

&lt;p&gt;34665 (0x8769: ExifOffset): 699860352 (1 IFD)&lt;/p&gt;

&lt;p&gt;The IFD field type is not defined in the original TIFF specification, but is a later addition.  It turns out that some authoring tools use type Long for the ExifOffset tag while others use type IFD.  So the fix was simply to make Commons Imaging robust enough to accept either data type.&lt;/p&gt;

&lt;p&gt;The new test file is named Imaging258.tiff and is stored in the &quot;data&quot; subfolder under the &quot;test&quot; folder in the Commons Imaging software distribution.&lt;/p&gt;

</comment>
                            <comment id="17172814" author="kinow" created="Fri, 7 Aug 2020 04:24:59 +0000"  >&lt;p&gt;Commons Imaging 1.0-alpha2 released!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 14 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0f9qw:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>