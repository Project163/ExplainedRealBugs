<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:30:39 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[IMAGING-134] Invalid marker found in entropy data</title>
                <link>https://issues.apache.org/jira/browse/IMAGING-134</link>
                <project id="12313421" key="IMAGING">Commons Imaging</project>
                    <description>&lt;p&gt;I&apos;m getting the following exception when trying to read a JPEG:&lt;/p&gt;

&lt;p&gt;Exception in thread &quot;main&quot; org.apache.commons.imaging.ImageReadException: Invalid marker found in entropy data&lt;br/&gt;
	at org.apache.commons.imaging.formats.jpeg.decoder.JpegInputStream.nextBit(JpegInputStream.java:50)&lt;br/&gt;
	at org.apache.commons.imaging.formats.jpeg.decoder.JpegDecoder.decode(JpegDecoder.java:426)&lt;br/&gt;
	at org.apache.commons.imaging.formats.jpeg.decoder.JpegDecoder.readMCU(JpegDecoder.java:320)&lt;br/&gt;
	at org.apache.commons.imaging.formats.jpeg.decoder.JpegDecoder.visitSOS(JpegDecoder.java:124)&lt;br/&gt;
	at org.apache.commons.imaging.formats.jpeg.JpegUtils.traverseJFIF(JpegUtils.java:80)&lt;br/&gt;
	at org.apache.commons.imaging.formats.jpeg.decoder.JpegDecoder.decode(JpegDecoder.java:436)&lt;br/&gt;
	at org.apache.commons.imaging.formats.jpeg.JpegImageParser.getBufferedImage(JpegImageParser.java:98)&lt;br/&gt;
	at org.apache.commons.imaging.Imaging.getBufferedImage(Imaging.java:1378)&lt;br/&gt;
	at org.apache.commons.imaging.Imaging.getBufferedImage(Imaging.java:1341)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12718258">IMAGING-134</key>
            <summary>Invalid marker found in entropy data</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="kinow">Bruno P. Kinoshita</assignee>
                                    <reporter username="jahewson">John Hewson</reporter>
                        <labels>
                    </labels>
                <created>Tue, 3 Jun 2014 22:02:36 +0000</created>
                <updated>Fri, 7 Aug 2020 04:25:12 +0000</updated>
                            <resolved>Sun, 9 Jun 2019 21:49:10 +0000</resolved>
                                    <version>1.0-alpha1</version>
                                    <fixVersion>1.0-alpha2</fixVersion>
                                    <component>Format: JPEG</component>
                        <due></due>
                            <votes>6</votes>
                                    <watches>8</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="10800">3h</timespent>
                                <comments>
                            <comment id="14147566" author="rchilaka" created="Thu, 25 Sep 2014 09:16:23 +0000"  >&lt;p&gt;Is this related to &lt;a href=&quot;https://issues.apache.org/jira/browse/IMAGING-97?&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/IMAGING-97?&lt;/a&gt; &lt;/p&gt;</comment>
                            <comment id="14332340" author="mgmechanics" created="Sun, 22 Feb 2015 20:25:09 +0000"  >&lt;p&gt;I am working on it and try to find an answer. Yet I could reproduce the problem - the image files provided on both issues cause throwing of an ImageReadException. Here is the repository and branch where I am working: &lt;a href=&quot;http://github.com/mgmechanics/commons-imaging/tree/IMAGING-134&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://github.com/mgmechanics/commons-imaging/tree/IMAGING-134&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14332359" author="mgmechanics" created="Sun, 22 Feb 2015 20:53:11 +0000"  >&lt;p&gt;The exception is thrown from &lt;b&gt;org.apache.commons.imaging.formats.jpeg.decoder.JpegInputStream.nextBit()&lt;/b&gt; when a marker called &lt;b&gt;b2&lt;/b&gt; is not 220:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.commons.imaging.formats.jpeg.JpegConstants

public static final int DNL_MARKER = 0xFFdc;

org.apache.commons.imaging.formats.jpeg.decoder.JpegInputStream.nextBit()

if (b2 == (0xff &amp;amp; JpegConstants.DNL_MARKER)) {
    throw new ImageReadException(&quot;DNL not yet supported&quot;);
}
throw new ImageReadException(&quot;Invalid marker found &quot; + &quot;in entropy data&quot;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;0xff &amp;amp; 0xffdc = 0xdc = 220 =&amp;gt; if b2 is not 220 then throw an ImageReadException!&lt;/p&gt;

&lt;p&gt;So I modified &lt;b&gt;org.apache.commons.imaging.formats.jpeg.decoder.JpegInputStream.nextBit()&lt;/b&gt; to print &lt;b&gt;b2&lt;/b&gt; before the exception is thrown and executed the same test for image.jpeg from the issue and _DSC6099.jpg from &lt;a href=&quot;https://issues.apache.org/jira/browse/IMAGING-97&quot; title=&quot;Fails to read most Sony A100 JPG files generated from Photoshop CS2 &quot; class=&quot;issue-link&quot; data-issue-key=&quot;IMAGING-97&quot;&gt;IMAGING-97&lt;/a&gt;:&lt;br/&gt;
=== b2 is 208 ===&lt;br/&gt;
=== b2 is 208 ===&lt;/p&gt;

&lt;p&gt;Both issues are caused by the same problem: &lt;b&gt;b2&lt;/b&gt; is 208, not 220 as expected. Whatever &lt;b&gt;b2&lt;/b&gt; is - does someone know?&lt;/p&gt;
</comment>
                            <comment id="14335262" author="mgmechanics" created="Tue, 24 Feb 2015 19:07:02 +0000"  >&lt;p&gt;208 is 0xD0 and this is a &quot;restart marker&quot; in the JPEG file format. This is a valid marker which appears legally among the encoded image data in the image file.&lt;/p&gt;</comment>
                            <comment id="14335415" author="mgmechanics" created="Tue, 24 Feb 2015 20:47:38 +0000"  >&lt;p&gt;Added RST and DRI markers to a proposed patch. This patch also throws a exceptions with a proper message if the entropy data (= encoded image data) contain RST markers so that everyone knows whats going on.  &lt;/p&gt;</comment>
                            <comment id="14335429" author="mgmechanics" created="Tue, 24 Feb 2015 20:53:50 +0000"  >&lt;p&gt;This issue seems to be a doublette of &lt;a href=&quot;https://issues.apache.org/jira/browse/IMAGING-97&quot; title=&quot;Fails to read most Sony A100 JPG files generated from Photoshop CS2 &quot; class=&quot;issue-link&quot; data-issue-key=&quot;IMAGING-97&quot;&gt;IMAGING-97&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="14353516" author="mgmechanics" created="Mon, 9 Mar 2015 20:18:10 +0000"  >&lt;p&gt;Updated my proposal at &lt;a href=&quot;http://github.com/mgmechanics/commons-imaging/tree/IMAGING-134:&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://github.com/mgmechanics/commons-imaging/tree/IMAGING-134:&lt;/a&gt; With my patch commons-imaging can read JPEG image files which contain RST markers.&lt;/p&gt;</comment>
                            <comment id="16859097" author="kinow" created="Sat, 8 Jun 2019 03:57:35 +0000"  >&lt;p&gt;I got some description of reset/restart markers from other projects issues (Golang has an open issue similar to this one I think), and some useful information from StackOverflow answers. It looks like some useful information is hidden away in paid versions of ISO documents (may have access through work research subscriptions).&lt;/p&gt;

&lt;p&gt;But my understanding of this change was that we are adding the support for the reset markers, and some extra logic in the code handling the segments with the RST markers. It looks to me as if instead of going through a single input stream with the whole segment data, we split it by the RST markers (based on the length of the markers) into multiple blocks, and then process each block with MCU&apos;s (minimum coded units, or tiles).&lt;/p&gt;</comment>
                            <comment id="16859098" author="kinow" created="Sat, 8 Jun 2019 03:58:19 +0000"  >&lt;p&gt;Provided some initial feedback on GitHub on style, typos, etc. But will check test coverage as we have some if/elses with arrays, and recently had a couple CVE&apos;s due to infinite loops or not checking some conditions in if/else blocks.&lt;/p&gt;</comment>
                            <comment id="17172835" author="kinow" created="Fri, 7 Aug 2020 04:25:12 +0000"  >&lt;p&gt;Commons Imaging 1.0-alpha2 released!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="12614455">IMAGING-97</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12718257">IMAGING-133</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12720710">IMAGING-136</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12648239" name="image.jpeg" size="36660" author="jahewson" created="Tue, 3 Jun 2014 22:03:01 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>396460</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 14 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1w98v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>396581</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>