<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:29:54 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[IMAGING-33] Incorrect code for tiled TIFF files applyPredictor method </title>
                <link>https://issues.apache.org/jira/browse/IMAGING-33</link>
                <project id="12313421" key="IMAGING">Commons Imaging</project>
                    <description>&lt;p&gt;I believe that the DataReaderTiled class used for reading tiled TIFF files invokes the applyPredictor method with incorrect arguments and will not be able to properly decode TIFF files that use predictors.  The bug was found during a code inspection. Unfortunately, I do not have any samples of data in this format (there are none in the Apache Imaging test files) and cannot verify that this is the case.&lt;/p&gt;

&lt;p&gt;Some Background&lt;br/&gt;
TIFF files are often used to store images in technical applications where data must be faithfully preserved, so lossy compression methods like JPEG are inappropriate and non-lossy method like LZW must be used. However, continuous tone images like satellite images or photographs often do not compress well since there is little apparent redundancy in the data. To improve the redundancy of the data, TIFF uses a simple predictor.  The first pixel (gray tone or RGB value) in a tile is stored as a literal value.  All subsequent pixels are stored as differences.  To see how this works, imagine a monochrome picture where the gray tones gradually fade from white to black at a steady rate. Although no particular data value is ever repeated (so there is little apparent redundancy in the source data) the delta values remain constant (so a set of delta values will compress very well). When transformed in this matter, certain images show substantial improvements in compression ratio.&lt;/p&gt;

&lt;p&gt;The Probem&lt;br/&gt;
The DataReaderTiff class uses a method called applyPredictor that takes an argument telling it whether the sample passed in is the first value, and should be treated as a literal, or whether it is a subsequent value and should be treated as a delta.   Unfortunately, the parameter it uses is the x coordinate of the pixel to be decoded.  While this approach works for TIFF strip files (where the first pixel always has a coordinate of zero), it does not work for tiles where the first pixel in the tile could fall anywhere in the image. &lt;/p&gt;

&lt;p&gt;The Fix&lt;br/&gt;
While we could simply fix the argument passed into the predictor, there is a better solution. The predictor performs an if/then operation on the input parameter to find out if it is the first sample in the tile. Once it unpacks a sample, it retains it as the &quot;last&quot; value so that it may be added to the next delta value.  Why not simply get rid of the if/then operation and just ensure that the last value gets zeroed out before beginning the processing of a strip or tile.  This would save an if/then operation and fix the bug.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12554093">IMAGING-33</key>
            <summary>Incorrect code for tiled TIFF files applyPredictor method </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="gwlucas">Gary Lucas</reporter>
                        <labels>
                    </labels>
                <created>Sun, 6 May 2012 20:15:58 +0000</created>
                <updated>Fri, 3 May 2019 08:39:33 +0000</updated>
                            <resolved>Wed, 9 May 2012 06:42:27 +0000</resolved>
                                                    <fixVersion>1.0-alpha1</fixVersion>
                                    <component>Format: TIFF</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13271140" author="damjan" created="Wed, 9 May 2012 06:12:01 +0000"  >&lt;p&gt;You can use:&lt;br/&gt;
tiffcp -t -c lzw:2 in.tif out.tif&lt;br/&gt;
to generate a suitable tiled predicted image.&lt;/p&gt;</comment>
                            <comment id="13271154" author="damjan" created="Wed, 9 May 2012 06:42:28 +0000"  >&lt;p&gt;Thank you for your bug report.&lt;/p&gt;

&lt;p&gt;Patch and test images committed to SVN, resolving fixed.&lt;/p&gt;</comment>
                            <comment id="13271490" author="gwlucas" created="Wed, 9 May 2012 15:40:36 +0000"  >&lt;p&gt;Thanks.   Nice job on the changes, they&apos;re exactly what I had in mind...   Now the code is both more correct than it was before and also a little bit faster as well. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>238317</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 28 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0wncf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>188587</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>