<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:31:10 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[IMAGING-359] Faulty usage of URL.getFile() in tests</title>
                <link>https://issues.apache.org/jira/browse/IMAGING-359</link>
                <project id="12313421" key="IMAGING">Commons Imaging</project>
                    <description>&lt;p&gt;The unit tests contain a lot of code which obtains a &lt;tt&gt;URL&lt;/tt&gt; from &lt;tt&gt;Class.getResource(String)&lt;/tt&gt;, and then calls &lt;tt&gt;URL.getFile()&lt;/tt&gt; to use that as file path.&lt;/p&gt;

&lt;p&gt;The problem is that, despite sounding similar, &lt;tt&gt;URL.getFile()&lt;/tt&gt; is completely unrelated to file paths and actually returns an URL encoded value. So what this means is that you encounter a lot of test failures due to &lt;tt&gt;NoSuchFileException&lt;/tt&gt; if you have the project in a directory with space (or non-ASCII characters?) in its file path.&lt;/p&gt;

&lt;p&gt;The solution is to call &lt;tt&gt;URL.toURI()&lt;/tt&gt; and then either &lt;tt&gt;new File(URI)&lt;/tt&gt; or &lt;tt&gt;Paths.get(URI)&lt;/tt&gt; (respectively &lt;tt&gt;Path.of(URI)&lt;/tt&gt;).&lt;br/&gt;
Maybe a separate helper method shared by all test code is needed for this because &lt;tt&gt;toURI&lt;/tt&gt; unfortunately throws a checked &lt;tt&gt;URISyntaxException&lt;/tt&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13544554">IMAGING-359</key>
            <summary>Faulty usage of URL.getFile() in tests</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="Marcono1234">Marcono1234</reporter>
                        <labels>
                    </labels>
                <created>Sun, 23 Jul 2023 13:31:14 +0000</created>
                <updated>Tue, 2 Apr 2024 18:51:46 +0000</updated>
                            <resolved>Sat, 29 Jul 2023 17:58:42 +0000</resolved>
                                                    <fixVersion>1.0.0-alpha5</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17746077" author="garydgregory" created="Sun, 23 Jul 2023 14:20:12 +0000"  >&lt;p&gt;What about normalizing the tests to use NIO&apos;s Path?&lt;/p&gt;</comment>
                            <comment id="17746095" author="marcono1234" created="Sun, 23 Jul 2023 15:55:58 +0000"  >&lt;p&gt;Might be possible but I am not sure if that would be very useful at the moment because a lot of the API seems to take a &lt;tt&gt;File&lt;/tt&gt; currently so you might have to convert &lt;tt&gt;Path&lt;/tt&gt; back to &lt;tt&gt;File&lt;/tt&gt; again.&lt;br/&gt;
The main problem here is conversion from &lt;tt&gt;Class.getResource(String)&lt;/tt&gt; to &lt;tt&gt;File&lt;/tt&gt; / &lt;tt&gt;Path&lt;/tt&gt;, but for this issue here it does not matter whether &lt;tt&gt;File&lt;/tt&gt; or &lt;tt&gt;Path&lt;/tt&gt; is used.&lt;/p&gt;

&lt;p&gt;Have created a pull request for this issue: &lt;a href=&quot;https://github.com/apache/commons-imaging/pull/306&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-imaging/pull/306&lt;/a&gt;&lt;br/&gt;
At least locally with a space in the file path of the directory this seems to solve the test failures.&lt;/p&gt;</comment>
                            <comment id="17746096" author="garydgregory" created="Sun, 23 Jul 2023 15:57:49 +0000"  >&lt;p&gt;Where are the test failures? All GiHub builds are green.&lt;/p&gt;</comment>
                            <comment id="17746097" author="marcono1234" created="Sun, 23 Jul 2023 16:13:26 +0000"  >&lt;p&gt;Please see &lt;a href=&quot;https://github.com/apache/commons-imaging/pull/306#issuecomment-1646876210&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;my comment on the GitHub PR&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 15 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1jbj4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>