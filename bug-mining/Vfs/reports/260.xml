<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:15:16 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[VFS-790] VFS2 handles files with special characters incorrectly</title>
                <link>https://issues.apache.org/jira/browse/VFS-790</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;The following Testcase fails :&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@Test
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void testLocalFile() 
	&lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception
{
	&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; prefix = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;char&lt;/span&gt;[] { &lt;span class=&quot;code-quote&quot;&gt;&apos;\u0074&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;\u0065&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;\u00a0&apos;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&apos;\u0074&apos;&lt;/span&gt; });
	&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; File f = File.createTempFile(prefix + &lt;span class=&quot;code-quote&quot;&gt;&quot;-&quot;&lt;/span&gt; , &lt;span class=&quot;code-quote&quot;&gt;&quot;-&quot;&lt;/span&gt; + prefix);
	&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; f.exists();
		
	&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; URI uri = f.toURI();
		
	&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; ( &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; FileSystemManager m = VFS.getManager() )
	{
		&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; ( &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; FileObject s = m.resolveFile(uri) )
		{
			&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; ( &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; FileContent sourceContent = s.getContent() )
			{
				&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; size = sourceContent.getSize();
				&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt; size==f.length();
			}
		}
	}	
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>&lt;p&gt;windows 10&lt;/p&gt;

&lt;p&gt;java 8&lt;/p&gt;

&lt;p&gt;vfs 2.7&lt;/p&gt;</environment>
        <key id="13344073">VFS-790</key>
            <summary>VFS2 handles files with special characters incorrectly</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="vnashkev">Vitali Nashkevich</reporter>
                        <labels>
                    </labels>
                <created>Thu, 3 Dec 2020 18:04:03 +0000</created>
                <updated>Tue, 8 Dec 2020 20:46:44 +0000</updated>
                                            <version>2.2</version>
                    <version>2.7.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17243557" author="garydgregory" created="Thu, 3 Dec 2020 22:36:01 +0000"  >&lt;p&gt;Please show the failure in your description.&#160;&lt;/p&gt;</comment>
                            <comment id="17243835" author="vnashkev" created="Fri, 4 Dec 2020 08:34:56 +0000"  >
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;org.apache.commons.vfs2.FileSystemException: Could not determine the size of &quot;file:///C:/Users/NASHKE~1/AppData/Local/Temp/te&#194;&#160;t-7766545175922765294-te&#194;&#160;t&quot; because it is not a file.
	at org.apache.commons.vfs2.provider.DefaultFileContent.getSize(DefaultFileContent.java:125)
	at LocalFileProviderTest.testLocalFile(LocalFileProviderTest.java:29)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
	at java.lang.reflect.Method.invoke(Unknown Source)
	at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:124)
	at org.testng.internal.Invoker.invokeMethod(Invoker.java:571)
	at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:707)
	at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:979)
	at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125)
	at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109)
	at org.testng.TestRunner.privateRun(TestRunner.java:648)
	at org.testng.TestRunner.run(TestRunner.java:505)
	at org.testng.SuiteRunner.runTest(SuiteRunner.java:455)
	at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:450)
	at org.testng.SuiteRunner.privateRun(SuiteRunner.java:415)
	at org.testng.SuiteRunner.run(SuiteRunner.java:364)
	at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:52)
	at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:84)
	at org.testng.TestNG.runSuitesSequentially(TestNG.java:1187)
	at org.testng.TestNG.runSuitesLocally(TestNG.java:1116)
	at org.testng.TestNG.runSuites(TestNG.java:1028)
	at org.testng.TestNG.run(TestNG.java:996)
	at org.testng.remote.AbstractRemoteTestNG.run(AbstractRemoteTestNG.java:115)
	at org.testng.remote.RemoteTestNG.initAndRun(RemoteTestNG.java:251)
	at org.testng.remote.RemoteTestNG.main(RemoteTestNG.java:77)

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17244514" author="garydgregory" created="Sat, 5 Dec 2020 15:09:08 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vnashkev&quot; class=&quot;user-hover&quot; rel=&quot;vnashkev&quot;&gt;vnashkev&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I added a different version of this test case here: &lt;tt&gt;org.apache.commons.vfs2.provider.local.test.FileNameTests.testLocalFile()&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;Note that the above new test method creates a legal URI, it does not contain a NB-SP char (0xA0).&lt;/p&gt;

&lt;p&gt;Sadly, the URI class lets you create URIs with paths which contains character that are not escaped which end up causing havoc later when you try to use them as actual legal URIs when in fact they are not.&lt;/p&gt;

&lt;p&gt;The bottom line is that one must sanitize URI input before creating them.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17245149" author="vnashkev" created="Mon, 7 Dec 2020 11:45:54 +0000"  >&lt;p&gt;Thanks a lot for your attention,&lt;/p&gt;

&lt;p&gt;I think VFS must be conform to JDK URI class regardless of RIGHT-definition.&lt;br/&gt;
 As several sources ( &lt;a href=&quot;https://www.w3.org/International/O-URL-code.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.w3.org/International/O-URL-code.html&lt;/a&gt;, &lt;a href=&quot;https://en.wikipedia.org/wiki/Percent-encoding&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://en.wikipedia.org/wiki/Percent-encoding&lt;/a&gt; ) suggest that&lt;br/&gt;
 java character &apos;\u00a0&apos; must be&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;converted to 0xC2A0 UTF-8 character and then&lt;/li&gt;
	&lt;li&gt;encoded to &apos;%C2%A0&apos; URI-fragment&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Many online URI-encoders works this way. (&lt;a href=&quot;https://meyerweb.com/eric/tools/dencoder/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://meyerweb.com/eric/tools/dencoder/&lt;/a&gt;).&lt;br/&gt;
 Java URI does the same as well.&lt;/p&gt;

&lt;p&gt;VFS decodes &apos;%C2%A0&apos; sequence into 2-characters string&lt;/p&gt;

{ &apos;\u00C2&apos;, &apos;\u00A0&apos; }

&lt;p&gt;instead of 1-character string&lt;/p&gt;

{ &apos;\u00A0&apos;}

&lt;p&gt;.&lt;/p&gt;</comment>
                            <comment id="17245154" author="vnashkev" created="Mon, 7 Dec 2020 11:49:44 +0000"  >&lt;p&gt;Another interesting link&#160;[|&lt;a href=&quot;https://en.wikipedia.org/wiki/Internationalized_Resource_Identifier&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://en.wikipedia.org/wiki/Internationalized_Resource_Identifier&lt;/a&gt;]&lt;/p&gt;</comment>
                            <comment id="17246135" author="garydgregory" created="Tue, 8 Dec 2020 20:46:44 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=vnashkev&quot; class=&quot;user-hover&quot; rel=&quot;vnashkev&quot;&gt;vnashkev&lt;/a&gt;&lt;br/&gt;
Feel free to provide a PR so we can see what you are proposing. However, it is not clear to me that VFS should sanitize any input. Let&apos;s see if there are other opinions. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13016432" name="LocalFileProviderTest.java" size="873" author="vnashkev" created="Thu, 3 Dec 2020 18:02:18 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 48 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0l6i8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>