<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:14:49 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[VFS-398] FtpFileObject.getChildren() fails when a folder contains a file with a colon in the name</title>
                <link>https://issues.apache.org/jira/browse/VFS-398</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;In line 767 of DefaultFileSystemManager.java the UriParser&apos;s extractScheme() method is called:&lt;/p&gt;

&lt;p&gt;        String scheme = UriParser.extractScheme(buffer.toString());&lt;/p&gt;

&lt;p&gt;This code was added in revision 780730&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=780730&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=780730&lt;/a&gt;&lt;br/&gt;
It is not clear to me why this change was made.&lt;/p&gt;

&lt;p&gt;For the FTP provider, buffer contains a plain file name (i.e. without a path and definitely not in URI form)&lt;/p&gt;

&lt;p&gt;A colon is a valid character for a file name.&lt;br/&gt;
However a colon will be interpreted as a URI scheme name.&lt;br/&gt;
This causes an exception when the resolved path is checked using AbstractFileName.checkName()&lt;/p&gt;

&lt;p&gt;Sample code:&lt;/p&gt;

&lt;p&gt;FileObject fo = VFS.getManager().resolveFile(&quot;ftp://user:pass@host/some/path/some.file&quot;);&lt;br/&gt;
fo.getParent().getChildren();&lt;/p&gt;

&lt;p&gt;If /some/path/ contains a child such as PREFIX:SUFFIX then an exception is thrown:&lt;/p&gt;

&lt;p&gt;Exception in thread &quot;main&quot; org.apache.commons.vfs2.FileSystemException: Invalid descendent file name &quot;PREFIX:SUFFIX&quot;.&lt;br/&gt;
	at org.apache.commons.vfs2.impl.DefaultFileSystemManager.resolveName(DefaultFileSystemManager.java:791)&lt;br/&gt;
	at org.apache.commons.vfs2.provider.AbstractFileObject.getChildren(AbstractFileObject.java:710)&lt;br/&gt;
	at org.apache.commons.vfs2.provider.ftp.FtpFileObject.getChildren(FtpFileObject.java:420)&lt;/p&gt;

&lt;p&gt;Therefore calling code is unable to list the children of the specified folder.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Connecting via FTP to a host running SunOS 5.10&lt;/p&gt;</environment>
        <key id="12537519">VFS-398</key>
            <summary>FtpFileObject.getChildren() fails when a folder contains a file with a colon in the name</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="otto">Otto Fowler</assignee>
                                    <reporter username="markjleonard">Mark Leonard</reporter>
                        <labels>
                    </labels>
                <created>Fri, 6 Jan 2012 15:02:21 +0000</created>
                <updated>Wed, 20 Apr 2022 15:22:11 +0000</updated>
                            <resolved>Thu, 24 Jan 2019 22:52:08 +0000</resolved>
                                    <version>2.0</version>
                                    <fixVersion>2.3</fixVersion>
                                        <due></due>
                            <votes>9</votes>
                                    <watches>14</watches>
                                                                                                                <comments>
                            <comment id="13181372" author="markjleonard" created="Fri, 6 Jan 2012 15:08:27 +0000"  >&lt;p&gt;I searched for existing issues and found only the following:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/VFS-312&quot; title=&quot;Add FileObjectResolver to provide custom FileObject resolution (FileSystem.resolveFile(...))&quot; class=&quot;issue-link&quot; data-issue-key=&quot;VFS-312&quot;&gt;VFS-312&lt;/a&gt; (relating to creation of a file with a colon in the name on Windows)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/VFS-376&quot; title=&quot;SFTP uri is throwing error when .. is using in path&quot; class=&quot;issue-link&quot; data-issue-key=&quot;VFS-376&quot;&gt;VFS-376&lt;/a&gt; (which mentions normalization of a URI that contains a colon character)&lt;/p&gt;

&lt;p&gt;As an aside, I looked at RFC1378 and this confirms that a colon is valid in the path element of the FTP URI scheme. This isn&apos;t really relevant to the issue I&apos;ve raised, which concerns treating a plain file name as a URI.&lt;/p&gt;</comment>
                            <comment id="13181403" author="markjleonard" created="Fri, 6 Jan 2012 15:50:36 +0000"  >&lt;p&gt;A quick solution might be to escape the colon character when the file name is URI encoded&lt;/p&gt;

&lt;p&gt;FtpFileObject.doListChildren() calls UriParser.encode(childNames)&lt;/p&gt;

&lt;p&gt;In the following method:&lt;/p&gt;

&lt;p&gt;    public static String encode(final String decodedStr)&lt;/p&gt;
    {
        return encode(decodedStr, null);
    }

&lt;p&gt;The set of &quot;reserved&quot; (meaning &quot;to be encoded&quot;) characters is null - should a colon be considered &quot;reserved&quot;?&lt;/p&gt;</comment>
                            <comment id="13182660" author="markjleonard" created="Mon, 9 Jan 2012 17:39:00 +0000"  >&lt;p&gt;A similar error occurs using the SFTP provider:&lt;/p&gt;

&lt;p&gt;Exception in thread &quot;main&quot; org.apache.commons.vfs2.FileSystemException: Invalid descendent file name &quot;PREFIX:SUFFIX&quot;.&lt;br/&gt;
	at org.apache.commons.vfs2.impl.DefaultFileSystemManager.resolveName(DefaultFileSystemManager.java:791)&lt;br/&gt;
	at org.apache.commons.vfs2.provider.sftp.SftpFileObject.doListChildrenResolved(SftpFileObject.java:395)&lt;br/&gt;
	at org.apache.commons.vfs2.provider.AbstractFileObject.getChildren(AbstractFileObject.java:654)&lt;/p&gt;</comment>
                            <comment id="13195075" author="pkcinna" created="Fri, 27 Jan 2012 20:35:33 +0000"  >&lt;p&gt;This happens to be a show stopper for my app since many files have a colon in the name. &lt;/p&gt;

&lt;p&gt;org.apache.commons.vfs2.FileSystemException: Invalid descendent file name &quot;jcr:lastModified.txt&quot;.&lt;br/&gt;
	at org.apache.commons.vfs2.impl.DefaultFileSystemManager.resolveName(DefaultFileSystemManager.java:791)&lt;/p&gt;

&lt;p&gt;Is there a workaround?&lt;/p&gt;</comment>
                            <comment id="13196346" author="garydgregory" created="Mon, 30 Jan 2012 19:27:02 +0000"  >&lt;p&gt;Try to percent-encode the reserved URI character &quot;:&quot; according to RFC3986 (&lt;a href=&quot;https://tools.ietf.org/html/rfc3986)?&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://tools.ietf.org/html/rfc3986)?&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;For example: &quot;ftp://user:pass@host/some/path/some%3Afile&quot; instead of &quot;ftp://user:pass@host/some/path/some:file&quot;&lt;/p&gt;</comment>
                            <comment id="13206014" author="pkcinna" created="Sat, 11 Feb 2012 04:38:02 +0000"  >&lt;p&gt;As a user of the API, this is in the context of FtpFileObject.getChildren() so it is not possible to percent-encode.  From Mark&apos;s findings, it looks like this is a major bug that has to be fixed internally right? &lt;/p&gt;</comment>
                            <comment id="13502213" author="vbonamy" created="Wed, 21 Nov 2012 19:19:29 +0000"  >&lt;p&gt;Hello,&lt;/p&gt;

&lt;p&gt;As Mark Leonard said, the goal of the commit 780730 is not very clear for me too.&lt;br/&gt;
And this issue broke my app so that I had to fork commons-vfs2-project-2.0&lt;/p&gt;

&lt;p&gt;You can see the patch/diff I make on github here : &lt;br/&gt;
&lt;a href=&quot;https://github.com/vbonamy/commons-vfs2-project-2.0/commit/43de7e38a6a27f846c034eb3b824edd2e3b0fe12&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/vbonamy/commons-vfs2-project-2.0/commit/43de7e38a6a27f846c034eb3b824edd2e3b0fe12&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;It would be nice if this issue can find a resolution. Maybe my patch can be applied simply ?&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Vincent.&lt;/p&gt;
</comment>
                            <comment id="13502278" author="garydgregory" created="Wed, 21 Nov 2012 20:23:28 +0000"  >&lt;p&gt;The issue description mentions RFC1378 which is... AppleTalk? That must be a typo.&lt;/p&gt;</comment>
                            <comment id="13502293" author="garydgregory" created="Wed, 21 Nov 2012 20:34:17 +0000"  >&lt;p&gt;Since Ralph committed &lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=780730&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=780730&lt;/a&gt; I&apos;d like to hear his take on this patch.&lt;/p&gt;</comment>
                            <comment id="13502307" author="markjleonard" created="Wed, 21 Nov 2012 20:57:05 +0000"  >&lt;p&gt;Sorry - I meant to type RFC1738 which is the Uniform Resource Locators (URL) specification&lt;/p&gt;</comment>
                            <comment id="14021306" author="cobexer" created="Sun, 8 Jun 2014 20:14:32 +0000"  >&lt;p&gt;this also just bit me (and users of my app) is there any progress yet? I can even trigger if if the local filesystem contains a file with a colon in it&apos;s name - when listing the parent directory, which means that there is absolutely nothing I can do to avoid that.&lt;/p&gt;

&lt;p&gt;any ideas?&lt;/p&gt;

&lt;p&gt;Br,&lt;br/&gt;
cobexer&lt;/p&gt;</comment>
                            <comment id="14025476" author="garydgregory" created="Mon, 9 Jun 2014 18:11:04 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ralph_goers%40dslextreme.com&quot; class=&quot;user-hover&quot; rel=&quot;ralph_goers@dslextreme.com&quot;&gt;ralph_goers@dslextreme.com&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ralph.goers%40dslextreme.com&quot; class=&quot;user-hover&quot; rel=&quot;ralph.goers@dslextreme.com&quot;&gt;ralph.goers@dslextreme.com&lt;/a&gt; Can you help us by commenting on your commit and any hints you may have here?&lt;/p&gt;</comment>
                            <comment id="14025548" author="ralph.goers@dslextreme.com" created="Mon, 9 Jun 2014 18:53:57 +0000"  >&lt;p&gt;Gee, a commit that happened 5 years ago...&lt;/p&gt;

&lt;p&gt;In looking at the code it looks to me that it is trying to determine whether the path is relative or absolute.   A path with a svheme would be absolute.  This was almost certainly done when I was adding WebDAV support via Jackrabbit. However I don&apos;t remember what the specific problem was that required this fix. I can&apos;t really say what impact Vincent&apos;s fix would have without running all the tests.&lt;/p&gt;
</comment>
                            <comment id="14026105" author="pkcinna" created="Tue, 10 Jun 2014 04:15:06 +0000"  >&lt;p&gt;Please fix this if someone knows a solution!  We have been waiting for a 2.1 release to fix this bug for over a year and a half.  It cripples our app that uses webdav and sftp (both are effected).   There are lots of files starting with &quot;jcr:&quot; on our servers with webdav services.&lt;/p&gt;</comment>
                            <comment id="14026174" author="garydgregory" created="Tue, 10 Jun 2014 06:40:15 +0000"  >&lt;p&gt;A recent commit has messed up the build. Once that is fixed, I could test the proposed fix to see if breaks anything. If it does not, that is a good sign but there is no unit tests to prove that the change fixes anything, so that is needed.&lt;/p&gt;

&lt;p&gt;If you or anyone wants to help this issue move forward, please create a patch with a fix for trunk &lt;em&gt;with&lt;/em&gt; a unit test.&lt;/p&gt;

&lt;p&gt;Issues with patches usually go through the whole process a lot faster and smoother. We are all volunteers here with limited availability.&lt;/p&gt;

&lt;p&gt;Gary&lt;/p&gt;</comment>
                            <comment id="14220697" author="b.eckenfels" created="Fri, 21 Nov 2014 09:04:13 +0000"  >&lt;p&gt;Hm yes, extracting the scheme might be a problem here, on the other hand it is also possible that actually ftp has to escape the string before passing it to a URI handler.&lt;/p&gt;</comment>
                            <comment id="14710104" author="paul.williams@datuhealth.com" created="Mon, 24 Aug 2015 21:35:21 +0000"  >&lt;p&gt;I see this same behavior when accessing a LOCAL file that has a colon in it.  Like the OP, I&apos;m not passing a specific file name, rather using `FileObject.getChildren()` to get all the files in a directory.  Seems like a pretty severe bug.&lt;/p&gt;</comment>
                            <comment id="14710169" author="pkcinna" created="Mon, 24 Aug 2015 22:28:40 +0000"  >&lt;p&gt;Maybe this project is no longer active. &#160;I believe we submitted a bug for this a few years ago.&lt;br/&gt;
      From: Paul Williams (JIRA) &amp;lt;jira@apache.org&amp;gt;&lt;br/&gt;
 To: pkcinna@yahoo.com &lt;br/&gt;
 Sent: Monday, August 24, 2015 5:35 PM&lt;br/&gt;
 Subject: &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;Commented&amp;#93;&lt;/span&gt; (&lt;a href=&quot;https://issues.apache.org/jira/browse/VFS-398&quot; title=&quot;FtpFileObject.getChildren() fails when a folder contains a file with a colon in the name&quot; class=&quot;issue-link&quot; data-issue-key=&quot;VFS-398&quot;&gt;&lt;del&gt;VFS-398&lt;/del&gt;&lt;/a&gt;) FtpFileObject.getChildren() fails when a folder contains a file with a colon in the name&lt;/p&gt;


&lt;p&gt;&#160; &#160; [ &lt;a href=&quot;https://issues.apache.org/jira/browse/VFS-398?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel&amp;amp;focusedCommentId=14710104#comment-14710104&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/VFS-398?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel&amp;amp;focusedCommentId=14710104#comment-14710104&lt;/a&gt; ] &lt;/p&gt;

&lt;p&gt;Paul Williams commented on &lt;a href=&quot;https://issues.apache.org/jira/browse/VFS-398&quot; title=&quot;FtpFileObject.getChildren() fails when a folder contains a file with a colon in the name&quot; class=&quot;issue-link&quot; data-issue-key=&quot;VFS-398&quot;&gt;&lt;del&gt;VFS-398&lt;/del&gt;&lt;/a&gt;:&lt;br/&gt;
-----------------------------------&lt;/p&gt;

&lt;p&gt;I see this same behavior when accessing a LOCAL file that has a colon in it.&#160; Like the OP, I&apos;m not passing a specific file name, rather using `FileObject.getChildren()` to get all the files in a directory.&#160; Seems like a pretty severe bug.&lt;/p&gt;




&lt;p&gt;&amp;#8211;&lt;br/&gt;
This message was sent by Atlassian JIRA&lt;br/&gt;
(v6.3.4#6332)&lt;/p&gt;

</comment>
                            <comment id="14710250" author="b.eckenfels" created="Mon, 24 Aug 2015 23:17:06 +0000"  >&lt;p&gt;Please attach the patch if you have one.&lt;/p&gt;</comment>
                            <comment id="14876219" author="simon04" created="Fri, 18 Sep 2015 19:31:57 +0000"  >&lt;p&gt;I cannot reproduce:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;$ cd /tmp
$ mkdir foo:bar:baz
$ cd foo:bar:baz
$ touch `seq 10`
$ cd /tmp
$ python -m pyftpdlib
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Afterwards, both of the following calls list the files 1&#8230;10:&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;&lt;tt&gt;VFS.getManager().resolveFile(&quot;ftp://localhost:2121/foo:bar:baz&quot;).getChildren()&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;VFS.getManager().resolveFile(&quot;/tmp/foo:bar:baz&quot;).getChildren()&lt;/tt&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14877307" author="markjleonard" created="Sat, 19 Sep 2015 20:16:16 +0000"  >&lt;p&gt;To reproduce the problem it is not sufficient to have a colon in the full file path. It is necessary to have a colon in the file name (relative to its parent folder). Your chosen file name of `seq 10` does not contain a colon. If you additionally create a second file named &apos;seq:10&apos; does your test code still run successfully?&lt;/p&gt;
</comment>
                            <comment id="14906967" author="simon04" created="Thu, 24 Sep 2015 20:40:19 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=markjleonard&quot; class=&quot;user-hover&quot; rel=&quot;markjleonard&quot;&gt;markjleonard&lt;/a&gt;, thank you for the clarification.&lt;/p&gt;

&lt;p&gt;Consider a file &lt;tt&gt;/foo:bar:baz/foo:bar&lt;/tt&gt; relative to FTP root and calling &lt;tt&gt;VFS.getManager().resolveFile(&quot;ftp://localhost:2121/foo:bar:baz&quot;).getChildren()&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;In &lt;tt&gt;org.apache.commons.vfs2.impl.DefaultFileSystemManager#resolveName(org.apache.commons.vfs2.FileName, java.lang.String, org.apache.commons.vfs2.NameScope)&lt;/tt&gt; from the method parameter &lt;tt&gt;name&lt;/tt&gt; (which is considered relative to the root) a scheme is extracted. This yields &lt;tt&gt;foo&lt;/tt&gt; as scheme and subsequent test &lt;tt&gt;(scheme == null &amp;amp;&amp;amp; buffer.charAt(0) != FileName.SEPARATOR_CHAR)&lt;/tt&gt; is negative.&lt;/p&gt;

&lt;p&gt;The scheme extraction for the relative &lt;tt&gt;name&lt;/tt&gt; has been integrated in revision 780730.  I wonder why.&lt;/p&gt;</comment>
                            <comment id="15785760" author="wodencafe" created="Thu, 29 Dec 2016 17:48:06 +0000"  >&lt;p&gt;Building upon Gary&apos;s comment, here is how we worked around this issue successfully by overriding the resolveName method in DefaultFileSystemManager&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;border-bottom-style: solid;&quot;&gt;&lt;b&gt;DefaultFileSystemManager workaround&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; DefaultFileSystemManager()
{
        @Override
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; FileName resolveName( &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; FileName base, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; name, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; NameScope scope )
                &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; FileSystemException
        {
                &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;.resolveName( base, name.replace( &lt;span class=&quot;code-quote&quot;&gt;&quot;:&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;%3A&quot;&lt;/span&gt; ), scope );
        }

};
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16366257" author="ottobackwards" created="Thu, 15 Feb 2018 21:04:32 +0000"  >&lt;p&gt;resolveName takes a&#160;base name and the name.&lt;/p&gt;

&lt;p&gt;The issue is that the code was written to support the base name being a full URI as opposed to being &apos;just&apos; a name.&lt;/p&gt;

&lt;p&gt;So it supports both:&lt;/p&gt;

&lt;p&gt;base -&amp;gt; foo://test/data&lt;/p&gt;

&lt;p&gt;name -&amp;gt;bar&lt;/p&gt;

&lt;p&gt;AND&lt;/p&gt;

&lt;p&gt;base -&amp;gt; foo://test/data&lt;/p&gt;

&lt;p&gt;name -&amp;gt; foo://test/data/bar&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;It therefore needs to get the scheme from the &apos;name&apos; so it can decide if it needs to prepend the base or not.&lt;/p&gt;

&lt;p&gt;The issue is that the code to extract the schema just searches for the first &apos;:&apos; as the schema marker.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Therefore IF you pass in a &apos;name&apos; parameter that is NOT a full URI,&#160;&lt;/p&gt;

&lt;p&gt;base -&amp;gt; foo://test/data&lt;/p&gt;

&lt;p&gt;name -&amp;gt; b:ar&lt;/p&gt;

&lt;p&gt;You will see this because we then try to normalize the uri, thinking it has a scheme but it doesn&apos;t.&lt;/p&gt;

&lt;p&gt;If you have a full URI parameter, then you will probably not see this.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I ran this test in LocalProviderTestCase, FileNameTest&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testColonNames() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
     &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; FileObject readFolder = getReadFolder();
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; FileObject dirOfDeath = readFolder.resolveFile(&lt;span class=&quot;code-quote&quot;&gt;&quot;dirOfDeath&quot;&lt;/span&gt;);
        Assert.assertTrue(&lt;span class=&quot;code-quote&quot;&gt;&quot;Missing dirOfDeath&quot;&lt;/span&gt;, dirOfDeath.exists());

        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; FileName noBoom = getManager().resolveName(dirOfDeath.getName(), dirOfDeath.getURL() + &lt;span class=&quot;code-quote&quot;&gt;&quot;/file:GoBoom&quot;&lt;/span&gt;);
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;Made it!&quot;&lt;/span&gt;);
        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
          &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; FileName boom = getManager().resolveName(dirOfDeath.getName(), &lt;span class=&quot;code-quote&quot;&gt;&quot;file:GoBoom&quot;&lt;/span&gt;);
        }&lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt;(Exception e) {
          Assert.assertTrue(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
        }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Made it!

java.lang.AssertionError
at org.junit.Assert.fail(Assert.java:86)
at org.junit.Assert.assertTrue(Assert.java:41)
at org.junit.Assert.assertTrue(Assert.java:52)
at org.apache.commons.vfs2.provider.local.test.FileNameTests.testColonNames(FileNameTests.java:60)

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;So there is no need to mark up the names, or override. &#160;I think the correct fix is to have the parse schema function be a little smarter.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16366353" author="ottobackwards" created="Thu, 15 Feb 2018 22:28:49 +0000"  >&lt;p&gt;Would propose the following implementation/changes UriParser :&lt;/p&gt;

&lt;p&gt;I can do a PR if the change is acceptable.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; extractScheme(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; uri, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; StringBuilder buffer) {
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (buffer != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
        buffer.setLength(0);
        buffer.append(uri);
    }

    &lt;span class=&quot;code-comment&quot;&gt;// search &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; :/ &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the scheme marker
&lt;/span&gt;    &lt;span class=&quot;code-comment&quot;&gt;// we look &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; both because some filesystems
&lt;/span&gt;    &lt;span class=&quot;code-comment&quot;&gt;// support : in the name
&lt;/span&gt;    &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; maxPos = uri.length();
    &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; markColon = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;
    &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; pos = 0; pos &amp;lt; maxPos; pos++) {
        &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;char&lt;/span&gt; ch = uri.charAt(pos);

        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (ch == &lt;span class=&quot;code-quote&quot;&gt;&apos;:&apos;&lt;/span&gt;) {
            markColon = !markColon;
            &lt;span class=&quot;code-keyword&quot;&gt;continue&lt;/span&gt;;
        }
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (ch == &lt;span class=&quot;code-quote&quot;&gt;&apos;/&apos;&lt;/span&gt;) {
            &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; is the second slash in :/
&lt;/span&gt;            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (markColon) {
                &lt;span class=&quot;code-comment&quot;&gt;// Found the end of the scheme
&lt;/span&gt;                &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; scheme = uri.substring(0, pos - 1);
                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (scheme.length() &amp;lt;= 1 &amp;amp;&amp;amp; Os.isFamily(Os.OS_FAMILY_WINDOWS)) {
                    &lt;span class=&quot;code-comment&quot;&gt;// This is not a scheme, but a Windows drive letter
&lt;/span&gt;                    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
                }
                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (buffer != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
                    buffer.delete(0, pos);
                }
                &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; scheme.intern();
            } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
                &lt;span class=&quot;code-keyword&quot;&gt;break&lt;/span&gt;;
            }

        }
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(markColon) {
            &lt;span class=&quot;code-comment&quot;&gt;// : not followed by a /
&lt;/span&gt;            &lt;span class=&quot;code-comment&quot;&gt;// no scheme
&lt;/span&gt;            &lt;span class=&quot;code-keyword&quot;&gt;break&lt;/span&gt;;
        }
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; ((ch &amp;gt;= &lt;span class=&quot;code-quote&quot;&gt;&apos;a&apos;&lt;/span&gt; &amp;amp;&amp;amp; ch &amp;lt;= &lt;span class=&quot;code-quote&quot;&gt;&apos;z&apos;&lt;/span&gt;) || (ch &amp;gt;= &lt;span class=&quot;code-quote&quot;&gt;&apos;A&apos;&lt;/span&gt; &amp;amp;&amp;amp; ch &amp;lt;= &lt;span class=&quot;code-quote&quot;&gt;&apos;Z&apos;&lt;/span&gt;)) {
            &lt;span class=&quot;code-comment&quot;&gt;// A scheme character
&lt;/span&gt;            &lt;span class=&quot;code-keyword&quot;&gt;continue&lt;/span&gt;;
        }
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (pos &amp;gt; 0 &amp;amp;&amp;amp; ((ch &amp;gt;= &lt;span class=&quot;code-quote&quot;&gt;&apos;0&apos;&lt;/span&gt; &amp;amp;&amp;amp; ch &amp;lt;= &lt;span class=&quot;code-quote&quot;&gt;&apos;9&apos;&lt;/span&gt;) || ch == &lt;span class=&quot;code-quote&quot;&gt;&apos;+&apos;&lt;/span&gt; || ch == &lt;span class=&quot;code-quote&quot;&gt;&apos;-&apos;&lt;/span&gt; || ch == &lt;span class=&quot;code-quote&quot;&gt;&apos;.&apos;&lt;/span&gt;)) {
            &lt;span class=&quot;code-comment&quot;&gt;// A scheme character (these are not allowed as the first
&lt;/span&gt;            &lt;span class=&quot;code-comment&quot;&gt;// character of the scheme, but can be used as subsequent
&lt;/span&gt;            &lt;span class=&quot;code-comment&quot;&gt;// characters.
&lt;/span&gt;            &lt;span class=&quot;code-keyword&quot;&gt;continue&lt;/span&gt;;
        }

        &lt;span class=&quot;code-comment&quot;&gt;// Not a scheme character
&lt;/span&gt;        &lt;span class=&quot;code-keyword&quot;&gt;break&lt;/span&gt;;
    }

    &lt;span class=&quot;code-comment&quot;&gt;// No scheme in URI
&lt;/span&gt;    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
}

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16366566" author="ottobackwards" created="Fri, 16 Feb 2018 03:20:48 +0000"  >&lt;p&gt;Actually, I needed to read the spec again, the above is wrong wrt the spec. My apologies.&lt;/p&gt;</comment>
                            <comment id="16366599" author="ottobackwards" created="Fri, 16 Feb 2018 04:33:34 +0000"  >&lt;p&gt;OK.&lt;/p&gt;

&lt;p&gt;After further reflection and review, here it is:&lt;/p&gt;

&lt;p&gt;The code wants to support a string the may be a url or may not be at the same time.&lt;/p&gt;

&lt;p&gt;The issue is, that no matter what we do we can never know if the &apos;:&apos; is the scheme marker or part of the file name.&lt;/p&gt;

&lt;p&gt;each scheme by definition supports a different scheme part ( the part after the : ) and some don&apos;t even have one.&lt;/p&gt;

&lt;p&gt;Add to this, that the scheme is used in the system to map to a provider, and those can be registered with whatever scheme a developer wants.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;My proposal is to limit the recognized scheme&apos;s returned by extractScheme to those registered in the system. &#160;I believe this is the most correct way to do this.&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;it is only way to be sure that it is a scheme and not just a &apos;:&apos;&lt;/li&gt;
	&lt;li&gt;the system can only support registered schemes anyway&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I have all system tests passing ( along with new tests for this issue ) with the following replacement method being used in place of extractScheme&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; extractSupportedScheme(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Set&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; supportedScheme, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; uri) {
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; extractSupportedScheme(supportedScheme, uri, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
}

&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; extractSupportedScheme(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Set&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; supportedScheme, &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; uri, StringBuilder buffer) {
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (buffer != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
        buffer.setLength(0);
        buffer.append(uri);
    }

    &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; schema : supportedScheme) {
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(uri.startsWith(schema + &lt;span class=&quot;code-quote&quot;&gt;&quot;:&quot;&lt;/span&gt;)) {
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (buffer != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
                buffer.delete(0, uri.indexOf(&lt;span class=&quot;code-quote&quot;&gt;&apos;:&apos;&lt;/span&gt;) + 1);
            }
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; schema;
        }
    }
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Thoughts? &#160;Improvements?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16366602" author="ottobackwards" created="Fri, 16 Feb 2018 04:37:41 +0000"  >&lt;p&gt;A note on this, is that another layer of checks may be necessary.&lt;/p&gt;

&lt;p&gt;Because each scheme has a different scheme part but we do not verify that ftp:FOO &#160;and &lt;a href=&quot;ftp://foo/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;ftp://foo&lt;/a&gt;&#160;will both resolve to ftp scheme, but ftp:FOO is not a valid ftp url by definition.&lt;/p&gt;

&lt;p&gt;I think it is correct that we extract scheme this way, and leavel the invalid url error for later, but someone may disagree&lt;/p&gt;</comment>
                            <comment id="16367321" author="ottobackwards" created="Fri, 16 Feb 2018 13:55:22 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=garydgregory&quot; class=&quot;user-hover&quot; rel=&quot;garydgregory&quot;&gt;garydgregory&lt;/a&gt; ?&lt;/p&gt;</comment>
                            <comment id="16367903" author="b.eckenfels" created="Fri, 16 Feb 2018 21:31:52 +0000"  >&lt;p&gt;I agree that the design here is incomplete and that checking for registered prefixes/schema seems to be the most robust workaround.&lt;/p&gt;</comment>
                            <comment id="16370895" author="ottobackwards" created="Wed, 21 Feb 2018 03:05:48 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/commons-vfs/pull/29&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-vfs/pull/29&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16394181" author="ottobackwards" created="Sat, 10 Mar 2018 14:09:08 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=b.eckenfels&quot; class=&quot;user-hover&quot; rel=&quot;b.eckenfels&quot;&gt;b.eckenfels&lt;/a&gt;: Is it enough to change the DefaultFileSystemManager? &#160;any chance you can throw a review on the PR?&lt;/p&gt;</comment>
                            <comment id="16515102" author="ottobackwards" created="Sun, 17 Jun 2018 15:07:45 +0000"  >&lt;p&gt;PR&#160;&lt;/p&gt;</comment>
                            <comment id="16515103" author="ottobackwards" created="Sun, 17 Jun 2018 15:08:45 +0000"  >&lt;p&gt;Any chance of a review / comment / merge on this issue?&lt;/p&gt;</comment>
                            <comment id="16515258" author="pkcinna" created="Mon, 18 Jun 2018 00:08:00 +0000"  >&lt;p&gt;How is the list of accepted schemes initially populated?&#160; I see in test case they are explicitly assigned but would there have to be some default list so it is somewhat backward compatible?&lt;/p&gt;

&lt;p&gt;      From: Otto Fowler (JIRA) &amp;lt;jira@apache.org&amp;gt;&lt;br/&gt;
 To: pkcinna@yahoo.com &lt;br/&gt;
 Sent: Sunday, June 17, 2018 11:09 AM&lt;br/&gt;
 Subject: &lt;span class=&quot;error&quot;&gt;&amp;#91;jira&amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;Commented&amp;#93;&lt;/span&gt; (&lt;a href=&quot;https://issues.apache.org/jira/browse/VFS-398&quot; title=&quot;FtpFileObject.getChildren() fails when a folder contains a file with a colon in the name&quot; class=&quot;issue-link&quot; data-issue-key=&quot;VFS-398&quot;&gt;&lt;del&gt;VFS-398&lt;/del&gt;&lt;/a&gt;) FtpFileObject.getChildren() fails when a folder contains a file with a colon in the name&lt;/p&gt;


&lt;p&gt;&#160; &#160; [ &lt;a href=&quot;https://issues.apache.org/jira/browse/VFS-398?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel&amp;amp;focusedCommentId=16515103#comment-16515103&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/VFS-398?page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel&amp;amp;focusedCommentId=16515103#comment-16515103&lt;/a&gt; ] &lt;/p&gt;

&lt;p&gt;Otto Fowler commented on &lt;a href=&quot;https://issues.apache.org/jira/browse/VFS-398&quot; title=&quot;FtpFileObject.getChildren() fails when a folder contains a file with a colon in the name&quot; class=&quot;issue-link&quot; data-issue-key=&quot;VFS-398&quot;&gt;&lt;del&gt;VFS-398&lt;/del&gt;&lt;/a&gt;:&lt;br/&gt;
---------------------------------&lt;/p&gt;

&lt;p&gt;Any chance of a review / comment / merge on this issue?&lt;/p&gt;




&lt;p&gt;&amp;#8211;&lt;br/&gt;
This message was sent by Atlassian JIRA&lt;br/&gt;
(v7.6.3#76005)&lt;/p&gt;</comment>
                            <comment id="16515614" author="ottobackwards" created="Mon, 18 Jun 2018 11:44:16 +0000"  >&lt;p&gt;The DefaultFileSystemManager sends in the providers, see the changes to that file.&lt;/p&gt;</comment>
                            <comment id="16697185" author="ottobackwards" created="Fri, 23 Nov 2018 14:14:23 +0000"  >&lt;p&gt;Any chance anyone can ok this and land the pr? &#160;I hate having things laying around forever.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=garydgregory&quot; class=&quot;user-hover&quot; rel=&quot;garydgregory&quot;&gt;garydgregory&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=b.eckenfels&quot; class=&quot;user-hover&quot; rel=&quot;b.eckenfels&quot;&gt;b.eckenfels&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16709105" author="ottobackwards" created="Tue, 4 Dec 2018 18:56:30 +0000"  >&lt;p&gt;so, where are we at?&lt;/p&gt;</comment>
                            <comment id="16712066" author="garydgregory" created="Thu, 6 Dec 2018 21:58:21 +0000"  >&lt;p&gt;Hi&#160;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ottobackwards&quot; class=&quot;user-hover&quot; rel=&quot;ottobackwards&quot;&gt;ottobackwards&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I&apos;ve taken your patch and updated it as &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12950897/12950897_VFS-398-gg-00.patch&quot; title=&quot;VFS-398-gg-00.patch attached to VFS-398&quot;&gt;VFS-398-gg-00.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Name changes&lt;/li&gt;
	&lt;li&gt;Javadoc changes&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;What remains are the uses of the APIs you deprecated, namely:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;tt&gt;org.apache.commons.vfs2.provider.UriParser.extractScheme(String)&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;org.apache.commons.vfs2.provider.UriParser.extractScheme(String, StringBuilder)&lt;/tt&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The callers of these APIs must be updated to the new APIs. If not, you must rethink the need and/or usage of the new vs. old APIs...&lt;/p&gt;

&lt;p&gt;Thank you,&lt;br/&gt;
Gary&lt;/p&gt;</comment>
                            <comment id="16712168" author="ottobackwards" created="Fri, 7 Dec 2018 00:21:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=garydgregory&quot; class=&quot;user-hover&quot; rel=&quot;garydgregory&quot;&gt;garydgregory&lt;/a&gt; Thanks for the feedback. &#160;I will apply your patch, and get to work on that.&lt;/p&gt;</comment>
                            <comment id="16712748" author="ottobackwards" created="Fri, 7 Dec 2018 12:01:05 +0000"  >&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;~/src/apache/forks/commons-vfs &#57520; &#57504; VFS-398 &#57520; git apply 12950897_VFS-398-gg-00.patch
error: patch failed: pom.xml:135
error: pom.xml: patch does not apply
error: patch failed: commons-vfs2/src/main/java/org/apache/commons/vfs2/impl/DefaultFileSystemManager.java:764
error: commons-vfs2/src/main/java/org/apache/commons/vfs2/impl/DefaultFileSystemManager.java: patch does not apply
error: patch failed: commons-vfs2/src/main/java/org/apache/commons/vfs2/provider/UriParser.java:16
error: commons-vfs2/src/main/java/org/apache/commons/vfs2/provider/UriParser.java: patch does not apply
error: patch failed: commons-vfs2/src/test/java/org/apache/commons/vfs2/provider/UriParserTestCase.java:16
error: commons-vfs2/src/test/java/org/apache/commons/vfs2/provider/UriParserTestCase.java: patch does not apply
error: patch failed: commons-vfs2/src/test/java/org/apache/commons/vfs2/provider/local/test/FileNameTests.java:17
error: commons-vfs2/src/test/java/org/apache/commons/vfs2/provider/local/test/FileNameTests.java: patch does not apply&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I&apos;m going to hand apply the changes. &#160;I&apos;ll tag you in the commit&lt;/p&gt;</comment>
                            <comment id="16712758" author="ottobackwards" created="Fri, 7 Dec 2018 12:09:38 +0000"  >&lt;p&gt;Actually, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=garydgregory&quot; class=&quot;user-hover&quot; rel=&quot;garydgregory&quot;&gt;garydgregory&lt;/a&gt;, what is this patch? &#160;It is a patch on top of my changes, or a patch that includes my changes against trunk?&lt;/p&gt;

&lt;p&gt;Can you do a patch of just your changes that I can apply or submit a PR to my github branch?&lt;/p&gt;</comment>
                            <comment id="16712806" author="ottobackwards" created="Fri, 7 Dec 2018 12:46:25 +0000"  >&lt;p&gt;Nevermind, i was able to bring changes over from apache/&lt;a href=&quot;https://issues.apache.org/jira/browse/VFS-398&quot; title=&quot;FtpFileObject.getChildren() fails when a folder contains a file with a colon in the name&quot; class=&quot;issue-link&quot; data-issue-key=&quot;VFS-398&quot;&gt;&lt;del&gt;VFS-398&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16718900" author="ottobackwards" created="Wed, 12 Dec 2018 12:11:56 +0000"  >&lt;p&gt;If you look at latest, I think it is what you are looking for &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=garydgregory&quot; class=&quot;user-hover&quot; rel=&quot;garydgregory&quot;&gt;garydgregory&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16726201" author="ottobackwards" created="Thu, 20 Dec 2018 20:28:42 +0000"  >&lt;p&gt;ping&lt;/p&gt;</comment>
                            <comment id="16726317" author="garydgregory" created="Thu, 20 Dec 2018 23:29:24 +0000"  >&lt;p&gt;I am on the road with a dead laptop. It will be a few days before I can do anything, maybe even a week...&lt;/p&gt;</comment>
                            <comment id="16745066" author="ottobackwards" created="Thu, 17 Jan 2019 13:53:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=garydgregory&quot; class=&quot;user-hover&quot; rel=&quot;garydgregory&quot;&gt;garydgregory&lt;/a&gt; I would like to get this in, and possibly we can talk about a release, or other things that we want to land pursuant to a release. &#160;What do you think?&lt;/p&gt;</comment>
                            <comment id="16745277" author="garydgregory" created="Thu, 17 Jan 2019 16:46:07 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ottobackwards&quot; class=&quot;user-hover&quot; rel=&quot;ottobackwards&quot;&gt;ottobackwards&lt;/a&gt;:&lt;/p&gt;

&lt;p&gt;I&apos;m back with a new laptop. What is the state of the patch? I see my version of your patch attached to this ticket. How about my comments in &lt;a href=&quot;https://issues.apache.org/jira/browse/VFS-398?focusedCommentId=16712066&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16712066&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/VFS-398?focusedCommentId=16712066&amp;amp;page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-16712066&lt;/a&gt; ?&lt;/p&gt;

&lt;p&gt;Gary&lt;/p&gt;</comment>
                            <comment id="16745296" author="ottobackwards" created="Thu, 17 Jan 2019 17:05:50 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=garydgregory&quot; class=&quot;user-hover&quot; rel=&quot;garydgregory&quot;&gt;garydgregory&lt;/a&gt; :&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/commons-vfs/pull/29/commits/c7f5944f5c6d7b3e9bba49344bf5389346982f47&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-vfs/pull/29/commits/c7f5944f5c6d7b3e9bba49344bf5389346982f47&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16745377" author="garydgregory" created="Thu, 17 Jan 2019 18:43:51 +0000"  >&lt;p&gt;Looking at &lt;a href=&quot;https://github.com/apache/commons-vfs/pull/29/files&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/commons-vfs/pull/29/files&lt;/a&gt;, I see no new tests &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="16745463" author="ottobackwards" created="Thu, 17 Jan 2019 20:21:13 +0000"  >&lt;p&gt;There is a new test in the URIParserTestCase for the issue reported. &#160;What tests do you mean?&lt;/p&gt;</comment>
                            <comment id="16746265" author="garydgregory" created="Fri, 18 Jan 2019 13:05:32 +0000"  >&lt;p&gt;Apologies, I was looking the wrong PR!&lt;/p&gt;</comment>
                            <comment id="16746274" author="garydgregory" created="Fri, 18 Jan 2019 13:19:32 +0000"  >&lt;p&gt;The main PR applies cleanly and build is OK. I might not have the time to review today. A second set of eyes would help as this is a large-ish patch. I had to hand edit the test case class.&lt;/p&gt;</comment>
                            <comment id="16746328" author="ottobackwards" created="Fri, 18 Jan 2019 14:16:36 +0000"  >&lt;p&gt;maybe &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=b.eckenfels&quot; class=&quot;user-hover&quot; rel=&quot;b.eckenfels&quot;&gt;b.eckenfels&lt;/a&gt;?&lt;/p&gt;</comment>
                            <comment id="16746342" author="b.eckenfels" created="Fri, 18 Jan 2019 14:30:07 +0000"  >&lt;p&gt;I think the overall idea of checking for known schemes is an option to solve this dilemma (unclear when URI and when file names are used), but I am not sure about the implementation details: the change seems to use getScheme() very often and this method constructs a new response object every time, that might be performance critical (I havent measured it yet, but in the past I say a lot of resolves in normal operations).&lt;/p&gt;

&lt;p&gt;Also changing the sequence of cleanup when closing the manager was very tricky in the past, so hopefully providers.clear() is ok in the new patch.&lt;/p&gt;</comment>
                            <comment id="16746347" author="ottobackwards" created="Fri, 18 Jan 2019 14:33:18 +0000"  >&lt;p&gt;The point about getSchemes is a good one. &#160;I was more concerned with &apos;how to get the schemes correctly&apos; than that issue. &#160;Let me think about that and see if I can make it better.&lt;/p&gt;</comment>
                            <comment id="16747120" author="ottobackwards" created="Sat, 19 Jan 2019 14:32:36 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=b.eckenfels&quot; class=&quot;user-hover&quot; rel=&quot;b.eckenfels&quot;&gt;b.eckenfels&lt;/a&gt; please see the latest, i have tried to cut down on temp object creation, and cached the schemes.&lt;/p&gt;</comment>
                            <comment id="16751666" author="garydgregory" created="Thu, 24 Jan 2019 22:51:55 +0000"  >&lt;p&gt;In svn trunk. Please verify and close.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;commit -m &quot;[VFS-398] FtpFileObject.getChildren() fails when a folder contains a file with a colon in the name....&quot; -N (14 paths specified)
    Sending        C:/svn/apache/commons-vfs2/commons-vfs2/src/main/java/org/apache/commons/vfs2/impl/DefaultFileSystemManager.java
    Sending        C:/svn/apache/commons-vfs2/commons-vfs2/src/main/java/org/apache/commons/vfs2/provider/AbstractFileObject.java
    Sending        C:/svn/apache/commons-vfs2/commons-vfs2/src/main/java/org/apache/commons/vfs2/provider/CompositeFileProvider.java
    Sending        C:/svn/apache/commons-vfs2/commons-vfs2/src/main/java/org/apache/commons/vfs2/provider/DefaultURLStreamHandler.java
    Sending        C:/svn/apache/commons-vfs2/commons-vfs2/src/main/java/org/apache/commons/vfs2/provider/HostFileNameParser.java
    Sending        C:/svn/apache/commons-vfs2/commons-vfs2/src/main/java/org/apache/commons/vfs2/provider/LayeredFileNameParser.java
    Sending        C:/svn/apache/commons-vfs2/commons-vfs2/src/main/java/org/apache/commons/vfs2/provider/UriParser.java
    Sending        C:/svn/apache/commons-vfs2/commons-vfs2/src/main/java/org/apache/commons/vfs2/provider/local/LocalFileNameParser.java
    Sending        C:/svn/apache/commons-vfs2/commons-vfs2/src/main/java/org/apache/commons/vfs2/provider/res/ResourceFileProvider.java
    Sending        C:/svn/apache/commons-vfs2/commons-vfs2/src/main/java/org/apache/commons/vfs2/provider/temp/TemporaryFileProvider.java
    Sending        C:/svn/apache/commons-vfs2/commons-vfs2/src/test/java/org/apache/commons/vfs2/provider/UriParserTestCase.java
    Sending        C:/svn/apache/commons-vfs2/commons-vfs2/src/test/java/org/apache/commons/vfs2/provider/local/test/FileNameTests.java
    Sending        C:/svn/apache/commons-vfs2/pom.xml
    Sending        C:/svn/apache/commons-vfs2/src/changes/changes.xml
    Transmitting file data ...
    Unknown action received: commit finalizing
    Committed revision 1852077.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16752740" author="ottobackwards" created="Fri, 25 Jan 2019 22:14:12 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=garydgregory&quot; class=&quot;user-hover&quot; rel=&quot;garydgregory&quot;&gt;garydgregory&lt;/a&gt; I cannot close this jira. &#160;Can you check my rights?&lt;/p&gt;</comment>
                            <comment id="16752779" author="garydgregory" created="Fri, 25 Jan 2019 23:01:07 +0000"  >&lt;p&gt;I would guess that you are not in the Jira group &quot;Apache Commons Developer&quot; a.k.a. commons-developers &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=issues%40commons.apache.org&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=issues%40commons.apache.org&lt;/a&gt;&#160;which is likely due to a fact that you are not an official committer for Commons according to &lt;a href=&quot;https://people.apache.org/committer-index.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://people.apache.org/committer-index.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The good news which you know already is that as an Apache committer, you can commit to Commons since we&apos;ve opened up Commons to all Apache Committer.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16752780" author="garydgregory" created="Fri, 25 Jan 2019 23:01:24 +0000"  >&lt;p&gt;Closing by request from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ottobackwards&quot; class=&quot;user-hover&quot; rel=&quot;ottobackwards&quot;&gt;ottobackwards&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="16753114" author="ottobackwards" created="Sat, 26 Jan 2019 15:52:30 +0000"  >&lt;p&gt;Yeah, my Jira login pre-dates my apache id, I am in that list, but as &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;mailto:otto@apache.org.&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;otto@apache.org.&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/mail_small.gif&quot; height=&quot;12&quot; width=&quot;13&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;Who is on the PMC of commons who can give me rights in jira?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Once vfs is in git ( having gotten a couple of PRs landed ) I&apos;ll be more comfortable doing commit then review.&lt;/p&gt;</comment>
                            <comment id="16753126" author="garydgregory" created="Sat, 26 Jan 2019 16:26:26 +0000"  >&lt;p&gt;I was hoping I could but it is not a Jira thing I think. I think you need to be in the proper LDAP group OR infra needs to give you Jira karma specifically. Not 100% sure.&#160;&lt;/p&gt;</comment>
                            <comment id="16753130" author="ottobackwards" created="Sat, 26 Jan 2019 16:58:13 +0000"  >&lt;p&gt;A PMC member should be able to get into the project dashboard and assign users to roles. &#160;I can do this with METRON as I am on the pmc&lt;/p&gt;</comment>
                            <comment id="16753436" author="garydgregory" created="Sun, 27 Jan 2019 15:33:17 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ottobackwards&quot; class=&quot;user-hover&quot; rel=&quot;ottobackwards&quot;&gt;ottobackwards&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;May you attach a screen shot? I might have karma...&lt;/p&gt;</comment>
                            <comment id="16753969" author="ottobackwards" created="Mon, 28 Jan 2019 12:46:24 +0000"  >&lt;p&gt;&lt;img src=&quot;https://issues.apache.org/jira/images/icons/attach/noimage.png&quot; imagetext=&quot;image-2019-01-28-07-46-13-524.png&quot; align=&quot;absmiddle&quot; border=&quot;0&quot; /&gt;&lt;/p&gt;</comment>
                            <comment id="16753971" author="ottobackwards" created="Mon, 28 Jan 2019 12:47:18 +0000"  >&lt;p&gt;Here&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12950897" name="VFS-398-gg-00.patch" size="28827" author="ggregory" created="Thu, 6 Dec 2018 21:54:47 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12311024" key="com.atlassian.jira.plugin.system.customfieldtypes:textfield">
                        <customfieldname>External issue ID</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>29</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12311020" key="com.atlassian.jira.plugin.system.customfieldtypes:url">
                        <customfieldname>External issue URL</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[https://github.com/apache/commons-vfs/pull/29]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>223025</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 41 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0lom7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>124638</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>