<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:13:40 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[VFS-113] NullPointerException during getting InputStream from SftpFileObject</title>
                <link>https://issues.apache.org/jira/browse/VFS-113</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;Hi, &lt;/p&gt;

&lt;p&gt;I experienced unregular NullPointerExceptions while getting an InputStream from an SftpFileObject. It only occures in a multithreading environment.&lt;/p&gt;

&lt;p&gt;I made a patch. By now it seems to work!&lt;/p&gt;

&lt;p&gt;Regards,&lt;/p&gt;

&lt;p&gt;Tim&lt;/p&gt;</description>
                <environment></environment>
        <key id="12363784">VFS-113</key>
            <summary>NullPointerException during getting InputStream from SftpFileObject</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="timr">Tim Rademacher</reporter>
                        <labels>
                    </labels>
                <created>Wed, 28 Feb 2007 13:39:26 +0000</created>
                <updated>Wed, 27 Jul 2016 21:04:31 +0000</updated>
                            <resolved>Mon, 19 Mar 2007 19:52:14 +0000</resolved>
                                                    <fixVersion>2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12476586" author="timr" created="Wed, 28 Feb 2007 13:40:26 +0000"  >&lt;p&gt;Fix for the NullPointerException in SftpFileObject.getContent().getInputStream()&lt;/p&gt;</comment>
                            <comment id="12482197" author="imario" created="Mon, 19 Mar 2007 19:52:14 +0000"  >&lt;p&gt;I applied your patch, though, having a stacktrace of the npe to do further investigation would be great.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;br/&gt;
Ciao,&lt;br/&gt;
Mario&lt;/p&gt;</comment>
                            <comment id="12482326" author="timr" created="Tue, 20 Mar 2007 07:33:08 +0000"  >&lt;p&gt;It&apos;s been a while since I wrote this. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; So by now, the only exception I get while trying to reproduce this was this IOException. As far as I remember, this has the same origin as the NullPointerException.&lt;/p&gt;

&lt;p&gt;But I&apos;ll keep on trying to get you a stacktrace of the NullPointerException!&lt;/p&gt;

&lt;p&gt;Regards,&lt;/p&gt;

&lt;p&gt;Tim&lt;/p&gt;

&lt;p&gt;org.apache.commons.vfs.FileSystemException: Could not copy &quot;sftp://blavla@blabla/blabla.txt&quot; to &quot;sftp://blavla@blabla/archive/blabla.txt&quot;.&lt;br/&gt;
	at org.apache.commons.vfs.provider.AbstractFileObject.copyFrom(AbstractFileObject.java:919)&lt;br/&gt;
	at org.apache.commons.vfs.provider.AbstractFileObject.moveTo(AbstractFileObject.java:981)&lt;br/&gt;
	at de.inka.service.file.InkaFileSystemConnection.move(InkaFileSystemConnection.java:463)&lt;br/&gt;
	... 11 more&lt;br/&gt;
Caused by: org.apache.commons.vfs.FileSystemException: Could not read file &quot;sftp://blavla@blabla/blabla.txt&quot;.&lt;br/&gt;
	at org.apache.commons.vfs.provider.AbstractFileObject.getInputStream(AbstractFileObject.java:1140)&lt;br/&gt;
	at org.apache.commons.vfs.provider.DefaultFileContent.getInputStream(DefaultFileContent.java:320)&lt;br/&gt;
	at org.apache.commons.vfs.FileUtil.writeContent(FileUtil.java:71)&lt;br/&gt;
	at org.apache.commons.vfs.FileUtil.copyContent(FileUtil.java:103)&lt;br/&gt;
	at org.apache.commons.vfs.provider.AbstractFileObject.copyFrom(AbstractFileObject.java:910)&lt;br/&gt;
	... 13 more&lt;br/&gt;
Caused by: 4: &lt;br/&gt;
	at com.jcraft.jsch.ChannelSftp._get(ChannelSftp.java:968)&lt;br/&gt;
	at com.jcraft.jsch.ChannelSftp.get(ChannelSftp.java:861)&lt;br/&gt;
	at com.jcraft.jsch.ChannelSftp.get(ChannelSftp.java:837)&lt;br/&gt;
	at org.apache.commons.vfs.provider.sftp.SftpFileObject.doGetInputStream(SftpFileObject.java:385)&lt;br/&gt;
	at org.apache.commons.vfs.provider.AbstractFileObject.getInputStream(AbstractFileObject.java:1136)&lt;br/&gt;
	... 17 more&lt;br/&gt;
Caused by: java.io.IOException: inputstream is closed&lt;br/&gt;
	at com.jcraft.jsch.ChannelSftp.fill(ChannelSftp.java:2131)&lt;br/&gt;
	at com.jcraft.jsch.ChannelSftp.header(ChannelSftp.java:2155)&lt;br/&gt;
	at com.jcraft.jsch.ChannelSftp._get(ChannelSftp.java:906)&lt;br/&gt;
	... 21 more&lt;/p&gt;</comment>
                            <comment id="12482327" author="imario" created="Tue, 20 Mar 2007 07:47:20 +0000"  >&lt;p&gt;Yesterday I changed the sftp stuff to no longer read the whole file into memory but to use the stream based methods of jsch, so no it might be that this exception has goon .... or that it is even worse now &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Would be glad if you could give it a try.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;br/&gt;
Ciao,&lt;br/&gt;
Mario&lt;/p&gt;</comment>
                            <comment id="12483506" author="timr" created="Fri, 23 Mar 2007 10:38:15 +0000"  >&lt;p&gt;Hi, I experienced some errors while testing the new functionality:&lt;/p&gt;

&lt;p&gt;org.apache.commons.vfs.FileSystemException: Could not copy &quot;sftp://blavla@blabla/blabla.txt&quot; to &quot;sftp://blavla@blabla/archive/blabla.txt&quot;.&lt;br/&gt;
	at org.apache.commons.vfs.provider.AbstractFileObject.copyFrom(AbstractFileObject.java:919)&lt;br/&gt;
	at org.apache.commons.vfs.provider.AbstractFileObject.moveTo(AbstractFileObject.java:981)&lt;br/&gt;
	at de.inka.service.file.InkaFileSystemConnection.move(InkaFileSystemConnection.java:463)&lt;br/&gt;
	... 11 more&lt;br/&gt;
Caused by: org.apache.commons.vfs.FileSystemException: Could not close the input stream for file &quot;sftp://d290009@santiago/data_santiago/zdm/java_jobs/dvoimport/test/PositionenInka3_1015.asc&quot;.&lt;br/&gt;
	at org.apache.commons.vfs.provider.DefaultFileContent$FileContentInputStream.close(DefaultFileContent.java:525)&lt;br/&gt;
	at org.apache.commons.vfs.FileUtil.writeContent(FileUtil.java:87)&lt;br/&gt;
	at org.apache.commons.vfs.FileUtil.copyContent(FileUtil.java:103)&lt;br/&gt;
	at org.apache.commons.vfs.provider.AbstractFileObject.copyFrom(AbstractFileObject.java:910)&lt;br/&gt;
	... 13 more&lt;br/&gt;
Caused by: java.io.IOException: error&lt;br/&gt;
	at com.jcraft.jsch.ChannelSftp$2.close(ChannelSftp.java:1178)&lt;br/&gt;
	at java.io.BufferedInputStream.close(Unknown Source)&lt;br/&gt;
	at org.apache.commons.vfs.util.MonitorInputStream.close(MonitorInputStream.java:115)&lt;br/&gt;
	at java.io.BufferedInputStream.close(Unknown Source)&lt;br/&gt;
	at org.apache.commons.vfs.util.MonitorInputStream.close(MonitorInputStream.java:115)&lt;br/&gt;
	at org.apache.commons.vfs.provider.DefaultFileContent$FileContentInputStream.close(DefaultFileContent.java:521)&lt;br/&gt;
	... 16 more&lt;/p&gt;

&lt;p&gt;or&lt;/p&gt;

&lt;p&gt;java.lang.NullPointerException&lt;br/&gt;
	at com.jcraft.jsch.ChannelSftp.fill(ChannelSftp.java:2153)&lt;br/&gt;
	at com.jcraft.jsch.ChannelSftp.header(ChannelSftp.java:2179)&lt;br/&gt;
	at com.jcraft.jsch.ChannelSftp.access$7(ChannelSftp.java:2177)&lt;br/&gt;
	at com.jcraft.jsch.ChannelSftp$2.read(ChannelSftp.java:1100)&lt;br/&gt;
	at java.io.BufferedInputStream.read1(Unknown Source)&lt;br/&gt;
	at java.io.BufferedInputStream.read(Unknown Source)&lt;br/&gt;
	at org.apache.commons.vfs.util.MonitorInputStream.read(MonitorInputStream.java:88)&lt;br/&gt;
	at java.io.BufferedInputStream.read1(Unknown Source)&lt;br/&gt;
	at java.io.BufferedInputStream.read(Unknown Source)&lt;br/&gt;
	at org.apache.commons.vfs.util.MonitorInputStream.read(MonitorInputStream.java:88)&lt;br/&gt;
	at sun.nio.cs.StreamDecoder$CharsetSD.readBytes(Unknown Source)&lt;br/&gt;
	at sun.nio.cs.StreamDecoder$CharsetSD.implRead(Unknown Source)&lt;br/&gt;
	at sun.nio.cs.StreamDecoder.read(Unknown Source)&lt;br/&gt;
	at java.io.InputStreamReader.read(Unknown Source)&lt;br/&gt;
	at com.Ostermiller.util.CSVLexer.zzRefill(CSVLexer.java:605)&lt;br/&gt;
	at com.Ostermiller.util.CSVLexer.getNextToken(CSVLexer.java:789)&lt;br/&gt;
	at com.Ostermiller.util.CSVParser.getLine(CSVParser.java:335)&lt;br/&gt;
	at com.Ostermiller.util.LabeledCSVParser.setLabels(LabeledCSVParser.java:245)&lt;br/&gt;
	at com.Ostermiller.util.LabeledCSVParser.getLine(LabeledCSVParser.java:211)&lt;br/&gt;
	at de.inka.dvo.dao.FileImport.importFile(FileImport.java:199)&lt;br/&gt;
	at de.inka.dvo.ExportController.doOnNewFile(ExportController.java:345)&lt;br/&gt;
	at de.inka.dvo.dao.FileObserver.processForward(FileObserver.java:112)&lt;br/&gt;
	at de.inka.dvo.dao.FileObserver.processForward(FileObserver.java:1)&lt;br/&gt;
	at de.inka.util.observer.InkaObserver.update(InkaObserver.java:171)&lt;br/&gt;
	at de.inka.util.observer.InkaObservable.notifyObservers(InkaObservable.java:483)&lt;br/&gt;
	at de.inka.service.file.observer.FileObservable.processMessage(FileObservable.java:295)&lt;br/&gt;
	at de.inka.service.file.observer.FileObservable.processMessage(FileObservable.java:1)&lt;br/&gt;
	at de.inka.util.observer.InkaObservable$WorkerRunnable.run(InkaObservable.java:121)&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)&lt;br/&gt;
	at java.lang.Thread.run(Unknown Source)&lt;/p&gt;

&lt;p&gt;What I think is, that one thread opens the connection and returns the input stream to anywhere. While the input stream is processed, another thread does anything else with sftp. It gets the same SftpChannel from the FileSystem, opens it (again?) and closes it, when it&apos;s finished. Then the first thread seems to get the error.&lt;/p&gt;

&lt;p&gt;I also got sometimes an InputStreamClosed Exception, which seems to support my theory. &lt;/p&gt;

&lt;p&gt;I have to look further...&lt;/p&gt;

&lt;p&gt;Regards&lt;/p&gt;

&lt;p&gt;Tim&lt;/p&gt;</comment>
                            <comment id="12510167" author="vikas maan" created="Wed, 4 Jul 2007 13:01:34 +0000"  >&lt;p&gt;Hi Mario Ivankovits &lt;br/&gt;
   I am using commons-vfs-20070703.jar&lt;br/&gt;
I am facing this problem as in above comments:&lt;br/&gt;
Please give me some suggestion on this issue .&lt;br/&gt;
What can i do to resolve this problem in secure ftp.&lt;br/&gt;
there is any another way to resolve this problem.&lt;/p&gt;

&lt;p&gt;org.apache.commons.vfs.FileSystemException: Could not read file &quot;sftp://maan:maan@vikas/transport/source/students1.txt&quot;. &lt;br/&gt;
at org.apache.commons.vfs.provider.AbstractFileObject.getInputStream(AbstractFileObject.java:1163) &lt;br/&gt;
at org.apache.commons.vfs.provider.DefaultFileContent.getInputStream(DefaultFileContent.java:360) &lt;br/&gt;
at com.adeptia.indigo.services.transport.ftp.SecuredFtp.download(SecuredFtp.java:161) &lt;br/&gt;
at com.adeptia.indigo.services.transport.ftp.FtpSource.createInputStream(FtpSource.java:179) &lt;br/&gt;
at com.adeptia.indigo.services.transport.support.AbstractStreamSource.initialize(AbstractStreamSource.java:44) &lt;br/&gt;
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) &lt;br/&gt;
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) &lt;br/&gt;
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) &lt;br/&gt;
at java.lang.reflect.Method.invoke(Unknown Source) &lt;br/&gt;
at org.apache.commons.modeler.BaseModelMBean.invoke(BaseModelMBean.java:483) &lt;br/&gt;
at com.sun.jmx.mbeanserver.DynamicMetaDataImpl.invoke(Unknown Source) &lt;br/&gt;
at com.sun.jmx.mbeanserver.MetaDataImpl.invoke(Unknown Source) &lt;br/&gt;
at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(Unknown Source) &lt;br/&gt;
at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(Unknown Source) &lt;br/&gt;
at com.adeptia.indigo.utils.RemoteMBeanProxy$LocalHandler.invokeOperation(RemoteMBeanProxy.java:441) &lt;br/&gt;
at com.adeptia.indigo.utils.RemoteMBeanProxy$Handler.invoke(RemoteMBeanProxy.java:294) &lt;br/&gt;
at $Proxy2.initialize(Unknown Source) &lt;br/&gt;
at com.adeptia.indigo.jelly.ActivityTag.runSync(ActivityTag.java:313) &lt;br/&gt;
at com.adeptia.indigo.jelly.ActivityTag.doTag(ActivityTag.java:250) &lt;br/&gt;
at org.apache.commons.jelly.impl.TagScript.run(TagScript.java:278) &lt;br/&gt;
at org.apache.commons.jelly.impl.ScriptBlock.run(ScriptBlock.java:133) &lt;br/&gt;
at com.werken.blissed.jelly.JellyActivity.perform(JellyActivity.java:120) &lt;br/&gt;
at com.werken.blissed.ProcessEngine.enterState(ProcessEngine.java:391) &lt;br/&gt;
at com.werken.blissed.ProcessEngine.followTransition(ProcessEngine.java:509) &lt;br/&gt;
at com.werken.blissed.ProcessEngine.checkTransitions(ProcessEngine.java:458) &lt;br/&gt;
at com.werken.blissed.ProcessEngine.startProcess(ProcessEngine.java:366) &lt;br/&gt;
at com.werken.blissed.ProcessEngine.spawn(ProcessEngine.java:299) &lt;br/&gt;
at com.adeptia.indigo.processflow.BlissedProcessFlow.execute(BlissedProcessFlow.java:159) &lt;br/&gt;
at com.adeptia.indigo.transaction.IndigoTransaction.execute(IndigoTransaction.java:423) &lt;br/&gt;
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) &lt;br/&gt;
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) &lt;br/&gt;
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) &lt;br/&gt;
at java.lang.reflect.Method.invoke(Unknown Source) &lt;br/&gt;
at org.apache.commons.modeler.BaseModelMBean.invoke(BaseModelMBean.java:483) &lt;br/&gt;
at com.sun.jmx.mbeanserver.DynamicMetaDataImpl.invoke(Unknown Source) &lt;br/&gt;
at com.sun.jmx.mbeanserver.MetaDataImpl.invoke(Unknown Source) &lt;br/&gt;
at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(Unknown Source) &lt;br/&gt;
at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(Unknown Source) &lt;br/&gt;
at javax.management.remote.rmi.RMIConnectionImpl.doOperation(Unknown Source) &lt;br/&gt;
at javax.management.remote.rmi.RMIConnectionImpl.access$100(Unknown Source) &lt;br/&gt;
at javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(Unknown Source) &lt;br/&gt;
at javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(Unknown Source) &lt;br/&gt;
at javax.management.remote.rmi.RMIConnectionImpl.invoke(Unknown Source) &lt;br/&gt;
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) &lt;br/&gt;
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) &lt;br/&gt;
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) &lt;br/&gt;
at java.lang.reflect.Method.invoke(Unknown Source) &lt;br/&gt;
at sun.rmi.server.UnicastServerRef.dispatch(Unknown Source) &lt;br/&gt;
at sun.rmi.transport.Transport$1.run(Unknown Source) &lt;br/&gt;
at java.security.AccessController.doPrivileged(Native Method) &lt;br/&gt;
at sun.rmi.transport.Transport.serviceCall(Unknown Source) &lt;br/&gt;
at sun.rmi.transport.tcp.TCPTransport.handleMessages(Unknown Source) &lt;br/&gt;
at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(Unknown Source) &lt;br/&gt;
at java.lang.Thread.run(Unknown Source) &lt;/p&gt;

&lt;p&gt;Caused by: org.apache.commons.vfs.FileSystemException: Could not connect to SFTP server at &quot;sftp://maan:maan@vikas/&quot;. &lt;br/&gt;
at org.apache.commons.vfs.provider.sftp.SftpFileSystem.getChannel(SftpFileSystem.java:144) &lt;br/&gt;
at org.apache.commons.vfs.provider.sftp.SftpFileObject.doGetInputStream(SftpFileObject.java:380) &lt;br/&gt;
at org.apache.commons.vfs.provider.AbstractFileObject.getInputStream(AbstractFileObject.java:1159) &lt;br/&gt;
... 53 more &lt;/p&gt;


&lt;p&gt;Caused by: com.jcraft.jsch.JSchException: java.io.IOException: inputstream is closed &lt;br/&gt;
at com.jcraft.jsch.ChannelSftp.start(Unknown Source) &lt;br/&gt;
at com.jcraft.jsch.Channel.connect(Unknown Source) &lt;br/&gt;
at com.jcraft.jsch.Channel.connect(Unknown Source) &lt;br/&gt;
at org.apache.commons.vfs.provider.sftp.SftpFileSystem.getChannel(SftpFileSystem.java:123) &lt;br/&gt;
... 55 more &lt;/p&gt;


&lt;p&gt;Caused by: java.io.IOException: inputstream is closed &lt;br/&gt;
at com.jcraft.jsch.ChannelSftp.fill(Unknown Source) &lt;br/&gt;
at com.jcraft.jsch.ChannelSftp.header(Unknown Source) &lt;br/&gt;
... 59 more &lt;br/&gt;
2007-07-04 16:41:59,984 ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;Flow Thread(192168001166118354716240600002)&amp;#93;&lt;/span&gt; flow com.adeptia.indigo.jelly.ActivityTag.runSync(ActivityTag.java:320) - Process_Flow_For_SecureFTP|FTP_Source_Secure_Test|FtpSource|Failed|administrators|192168001166118294134403100005|192168001166118354716031200001|192168001166118294076370300003||admin|Error initializing activity FtpSource:FTP_Source_Secure_Test:192168001166118294076370300003&lt;span class=&quot;error&quot;&gt;&amp;#91;Could not read file &amp;quot;sftp://maan:maan@vikas/transport/source/students1.txt&amp;quot;.&amp;#93;&lt;/span&gt;|wshost &lt;br/&gt;
org.apache.commons.vfs.FileSystemException: Could not read file &quot;sftp://maan:maan@vikas/transport/source/students1.txt&quot;.&lt;/p&gt;


&lt;p&gt;please help me regards this&lt;/p&gt;</comment>
                            <comment id="12510170" author="imario" created="Wed, 4 Jul 2007 13:13:09 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;this is your real exception:&lt;/p&gt;

&lt;p&gt;Caused by: com.jcraft.jsch.JSchException: Session.connect: java.net.ConnectException: Connection refused: connect&lt;br/&gt;
at com.jcraft.jsch.Session.connect(Unknown Source)&lt;br/&gt;
at com.jcraft.jsch.Session.connect(Unknown Source)&lt;br/&gt;
at org.apache.commons.vfs.provider.sftp.SftpClientFactory.createConnection(SftpClientFactory.java:210)&lt;/p&gt;


&lt;p&gt;It looks like some sort of network configuration problem, could you try to enable debugging of your ssh daemon.&lt;/p&gt;

&lt;p&gt;In case you use OpenSSH, as far as I know you have to have the configuration option &quot;PasswordAuthentication&quot; set to yes to make the jsch library work.&lt;/p&gt;</comment>
                            <comment id="12510171" author="vikas maan" created="Wed, 4 Jul 2007 13:16:51 +0000"  >&lt;p&gt;no this is not my problem .&lt;br/&gt;
I resolved this problem by using jar jsch0.1.31&lt;/p&gt;</comment>
                            <comment id="12510174" author="imario" created="Wed, 4 Jul 2007 13:28:04 +0000"  >&lt;p&gt;Oh, sorry, mixed up things ... could you please provide a small test case to reproduce your exception.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="12510177" author="vikas maan" created="Wed, 4 Jul 2007 13:34:04 +0000"  >&lt;p&gt;rg.apache.commons.vfs.FileSystemException: Could not read file &quot;sftp://maan:maan@vikas/transport/source/students1.txt&quot;.&lt;br/&gt;
	at org.apache.commons.vfs.provider.AbstractFileObject.getInputStream(AbstractFileObject.java:1163)&lt;br/&gt;
	at org.apache.commons.vfs.provider.DefaultFileContent.getInputStream(DefaultFileContent.java:360)&lt;br/&gt;
	at com.adeptia.indigo.services.transport.ftp.SecuredFtp.download(SecuredFtp.java:161)&lt;br/&gt;
	at com.adeptia.indigo.services.transport.ftp.FtpSource.createInputStream(FtpSource.java:179)&lt;br/&gt;
	at com.adeptia.indigo.services.transport.support.AbstractStreamSource.initialize(AbstractStreamSource.java:44)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Unknown Source)&lt;br/&gt;
	at org.apache.commons.modeler.BaseModelMBean.invoke(BaseModelMBean.java:483)&lt;br/&gt;
	at com.sun.jmx.mbeanserver.DynamicMetaDataImpl.invoke(Unknown Source)&lt;br/&gt;
	at com.sun.jmx.mbeanserver.MetaDataImpl.invoke(Unknown Source)&lt;br/&gt;
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(Unknown Source)&lt;br/&gt;
	at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(Unknown Source)&lt;br/&gt;
	at com.adeptia.indigo.utils.RemoteMBeanProxy$LocalHandler.invokeOperation(RemoteMBeanProxy.java:441)&lt;br/&gt;
	at com.adeptia.indigo.utils.RemoteMBeanProxy$Handler.invoke(RemoteMBeanProxy.java:294)&lt;br/&gt;
	at $Proxy2.initialize(Unknown Source)&lt;br/&gt;
	at com.adeptia.indigo.jelly.ActivityTag.runSync(ActivityTag.java:313)&lt;br/&gt;
	at com.adeptia.indigo.jelly.ActivityTag.doTag(ActivityTag.java:250)&lt;br/&gt;
	at org.apache.commons.jelly.impl.TagScript.run(TagScript.java:278)&lt;br/&gt;
	at org.apache.commons.jelly.impl.ScriptBlock.run(ScriptBlock.java:133)&lt;br/&gt;
	at com.werken.blissed.jelly.JellyActivity.perform(JellyActivity.java:120)&lt;br/&gt;
	at com.werken.blissed.ProcessEngine.enterState(ProcessEngine.java:391)&lt;br/&gt;
	at com.werken.blissed.ProcessEngine.followTransition(ProcessEngine.java:509)&lt;br/&gt;
	at com.werken.blissed.ProcessEngine.checkTransitions(ProcessEngine.java:458)&lt;br/&gt;
	at com.werken.blissed.ProcessEngine.startProcess(ProcessEngine.java:366)&lt;br/&gt;
	at com.werken.blissed.ProcessEngine.spawn(ProcessEngine.java:299)&lt;br/&gt;
	at com.adeptia.indigo.processflow.BlissedProcessFlow.execute(BlissedProcessFlow.java:159)&lt;br/&gt;
	at com.adeptia.indigo.transaction.IndigoTransaction.execute(IndigoTransaction.java:423)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Unknown Source)&lt;br/&gt;
	at org.apache.commons.modeler.BaseModelMBean.invoke(BaseModelMBean.java:483)&lt;br/&gt;
	at com.sun.jmx.mbeanserver.DynamicMetaDataImpl.invoke(Unknown Source)&lt;br/&gt;
	at com.sun.jmx.mbeanserver.MetaDataImpl.invoke(Unknown Source)&lt;br/&gt;
	at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(Unknown Source)&lt;br/&gt;
	at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(Unknown Source)&lt;br/&gt;
	at javax.management.remote.rmi.RMIConnectionImpl.doOperation(Unknown Source)&lt;br/&gt;
	at javax.management.remote.rmi.RMIConnectionImpl.access$100(Unknown Source)&lt;br/&gt;
	at javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(Unknown Source)&lt;br/&gt;
	at javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(Unknown Source)&lt;br/&gt;
	at javax.management.remote.rmi.RMIConnectionImpl.invoke(Unknown Source)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Unknown Source)&lt;br/&gt;
	at sun.rmi.server.UnicastServerRef.dispatch(Unknown Source)&lt;br/&gt;
	at sun.rmi.transport.Transport$1.run(Unknown Source)&lt;br/&gt;
	at java.security.AccessController.doPrivileged(Native Method)&lt;br/&gt;
	at sun.rmi.transport.Transport.serviceCall(Unknown Source)&lt;br/&gt;
	at sun.rmi.transport.tcp.TCPTransport.handleMessages(Unknown Source)&lt;br/&gt;
	at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(Unknown Source)&lt;br/&gt;
	at java.lang.Thread.run(Unknown Source)&lt;/p&gt;

&lt;p&gt;Caused by: org.apache.commons.vfs.FileSystemException: Could not connect to SFTP server at &quot;sftp://maan:maan@vikas/&quot;.&lt;br/&gt;
	at org.apache.commons.vfs.provider.sftp.SftpFileSystem.getChannel(SftpFileSystem.java:144)&lt;br/&gt;
	at org.apache.commons.vfs.provider.sftp.SftpFileObject.doGetInputStream(SftpFileObject.java:380)&lt;br/&gt;
	at org.apache.commons.vfs.provider.AbstractFileObject.getInputStream(AbstractFileObject.java:1159)&lt;br/&gt;
	... 53 more&lt;/p&gt;

&lt;p&gt;Caused by: com.jcraft.jsch.JSchException: java.io.IOException: inputstream is closed&lt;br/&gt;
	at com.jcraft.jsch.ChannelSftp.start(Unknown Source)&lt;br/&gt;
	at com.jcraft.jsch.Channel.connect(Unknown Source)&lt;br/&gt;
	at com.jcraft.jsch.Channel.connect(Unknown Source)&lt;br/&gt;
	at org.apache.commons.vfs.provider.sftp.SftpFileSystem.getChannel(SftpFileSystem.java:123)&lt;br/&gt;
	... 55 more&lt;/p&gt;

&lt;p&gt;Caused by: java.io.IOException: inputstream is closed&lt;br/&gt;
	at com.jcraft.jsch.ChannelSftp.fill(Unknown Source)&lt;br/&gt;
	at com.jcraft.jsch.ChannelSftp.header(Unknown Source)&lt;br/&gt;
	... 59 more&lt;/p&gt;



&lt;p&gt;Tim Rademacher is saying right  i debug the code i found one thread opens the connectionand return the input syteam stream.While the input &lt;br/&gt;
stream is processed ,another thread does anything with sftp. It gets the same SftpChannel from the FileSystem, opens it (again?) and closes it, when it&apos;s finished. Then the first thread seems to get the error.&lt;/p&gt;

&lt;p&gt;I am facing this problem .&lt;br/&gt;
Please help me regards this.&lt;br/&gt;
What should i have done to resolve this problem&lt;br/&gt;
Thanks Vikas&lt;/p&gt;</comment>
                            <comment id="12510183" author="imario" created="Wed, 4 Jul 2007 13:42:02 +0000"  >&lt;p&gt;I am out of time at the moment.&lt;/p&gt;

&lt;p&gt;So if its a threading issue, you could create your own FileSystemManager per Thread.&lt;/p&gt;

&lt;p&gt;Just have a look at the VFS.java source and do the same, just store the reference in an ThreadLocal.&lt;/p&gt;

&lt;p&gt;Hope this is a appropriate workaround for the moment.&lt;/p&gt;</comment>
                            <comment id="12510333" author="vikas maan" created="Thu, 5 Jul 2007 09:59:51 +0000"  >&lt;p&gt;hi&lt;br/&gt;
Now it is working .&lt;br/&gt;
I have also one more problem.&lt;br/&gt;
By using  FTPClientWrapper.java class ,we call createConnection() method to create a new connection to server.&lt;br/&gt;
But if i am downloading a file and due to any problem(network broken ,ftp server connection failed)connection is broken.&lt;br/&gt;
We have to give number of attempts to connect FTP server.&lt;br/&gt;
I am not finding  code ,if the connection is broken How many times it tris to connect to FTP server.&lt;br/&gt;
Number of Attempts to connect to FTP server(Where is this code)&lt;br/&gt;
Help me to figure out&lt;br/&gt;
Vikas Kumar&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12352218" name="SftpFileObject.diff" size="1385" author="timr" created="Wed, 28 Feb 2007 13:40:26 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>200172</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 years, 21 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i13aw7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>227395</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>