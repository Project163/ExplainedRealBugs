<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:15:25 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[VFS-813] NullPointerException needs a better message in SftpClientFactory when connect with private key</title>
                <link>https://issues.apache.org/jira/browse/VFS-813</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;I&apos;m trying to use common-vfs2 to load files from sftp server.&lt;br/&gt;
Got NPE inside SftpClientFactory, when trying to connect to server.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;W 211222 162440.053 [ST3-Def] DxReconciliationFileLoader -
org.apache.commons.vfs2.FileSystemException: Could not connect to SFTP server at &quot;sftp://sftp.myhost.com/&quot;.
	at org.apache.commons.vfs2.provider.sftp.SftpFileProvider.createSession(SftpFileProvider.java:72) ~[commons-vfs2-2.9.0.jar:2.9.0]
	at org.apache.commons.vfs2.provider.sftp.SftpFileProvider.doCreateFileSystem(SftpFileProvider.java:92) ~[commons-vfs2-2.9.0.jar:2.9.0]
	at org.apache.commons.vfs2.provider.AbstractOriginatingFileProvider.getFileSystem(AbstractOriginatingFileProvider.java:92) ~[commons-vfs2-2.9.0.jar:2.9.0]
	at org.apache.commons.vfs2.provider.AbstractOriginatingFileProvider.findFile(AbstractOriginatingFileProvider.java:71) ~[commons-vfs2-2.9.0.jar:2.9.0]
	at org.apache.commons.vfs2.provider.AbstractOriginatingFileProvider.findFile(AbstractOriginatingFileProvider.java:55) ~[commons-vfs2-2.9.0.jar:2.9.0]
	at org.apache.commons.vfs2.impl.DefaultFileSystemManager.resolveFile(DefaultFileSystemManager.java:788) ~[commons-vfs2-2.9.0.jar:2.9.0]
	at org.apache.commons.vfs2.impl.DefaultFileSystemManager.resolveFile(DefaultFileSystemManager.java:835) ~[commons-vfs2-2.9.0.jar:2.9.0]
	at com.tools.DxReconciliationFileLoader.downloadFiles(DxReconciliationFileLoader.java:118) ~[classes/:?]
Caused by: org.apache.commons.vfs2.FileSystemException: Could not connect to SFTP server at &quot;sftp.myhost.com&quot;.
	at org.apache.commons.vfs2.provider.sftp.SftpClientFactory.createConnection(SftpClientFactory.java:228) ~[commons-vfs2-2.9.0.jar:2.9.0]
	at org.apache.commons.vfs2.provider.sftp.SftpFileProvider.createSession(SftpFileProvider.java:65) ~[commons-vfs2-2.9.0.jar:2.9.0]
	... 16 more
Caused by: java.lang.NullPointerException
	at java.lang.String.&amp;lt;init&amp;gt;(String.java:251) ~[?:?]
	at org.apache.commons.vfs2.provider.sftp.SftpClientFactory.createConnection(SftpClientFactory.java:159) ~[commons-vfs2-2.9.0.jar:2.9.0]
	at org.apache.commons.vfs2.provider.sftp.SftpFileProvider.createSession(SftpFileProvider.java:65) ~[commons-vfs2-2.9.0.jar:2.9.0]
	... 16 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;tt&gt;char[] username&lt;/tt&gt; is &lt;b&gt;null&lt;/b&gt;.&lt;br/&gt;
Looks like I should specify username somewhere.&lt;br/&gt;
I think if username is required for key-based auth, then library should handle it better, than throwing NPE.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13419020">VFS-813</key>
            <summary>NullPointerException needs a better message in SftpClientFactory when connect with private key</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="1" iconUrl="https://issues.apache.org/jira/images/icons/statuses/open.png" description="The issue is open and ready for the assignee to start work on it.">Open</status>
                    <statusCategory id="2" key="new" colorName="blue-gray"/>
                                    <resolution id="-1">Unresolved</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="turbanoff">Andrey Turbanov</reporter>
                        <labels>
                    </labels>
                <created>Wed, 22 Dec 2021 13:33:54 +0000</created>
                <updated>Wed, 22 Dec 2021 15:41:34 +0000</updated>
                                            <version>2.9.0</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17463810" author="michael-o" created="Wed, 22 Dec 2021 13:40:26 +0000"  >&lt;p&gt;I wonder whether it should derive the username from the system or throw an appropriate exception. I wonder also why the username is a char array at all.&lt;/p&gt;</comment>
                            <comment id="17463836" author="garydgregory" created="Wed, 22 Dec 2021 14:13:43 +0000"  >&lt;p&gt;One can/should use char[] for credentials instead of String to avoid problems like String&apos;s being interned dumped/captured, you can&apos;t intern a char[]. char[] toString() also removes the chance of credentials being revealed in logs as opposed to String.toString().&lt;/p&gt;</comment>
                            <comment id="17463848" author="michael-o" created="Wed, 22 Dec 2021 14:35:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ggregory&quot; class=&quot;user-hover&quot; rel=&quot;ggregory&quot;&gt;ggregory&lt;/a&gt;, username isn&apos;t a credential. There isn&apos;t any secret.&lt;/p&gt;</comment>
                            <comment id="17463854" author="garydgregory" created="Wed, 22 Dec 2021 14:42:33 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=michael-o&quot; class=&quot;user-hover&quot; rel=&quot;michael-o&quot;&gt;michael-o&lt;/a&gt; Don&apos;t tell that to some of my customers that want to follow GDPR and PII rules.&lt;/p&gt;</comment>
                            <comment id="17463866" author="garydgregory" created="Wed, 22 Dec 2021 14:50:02 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=turbanoff&quot; class=&quot;user-hover&quot; rel=&quot;turbanoff&quot;&gt;turbanoff&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;The method &lt;tt&gt;SftpClientFactory.createConnection(String, int, char[], char[], FileSystemOptions)&lt;/tt&gt; does indeed require a non-null &lt;tt&gt;username&lt;/tt&gt;; I&apos;ve added an explicit check &lt;tt&gt;Objects.requireNonNull(username, &quot;username&quot;);&lt;/tt&gt; at the start of the method. Please test git master or a snapshot build from our snapshot repo to see &quot;&lt;tt&gt;Caused by: java.lang.NullPointerException: username&lt;/tt&gt;&quot;&lt;/p&gt;</comment>
                            <comment id="17463880" author="michael-o" created="Wed, 22 Dec 2021 15:00:28 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ggregory&quot; class=&quot;user-hover&quot; rel=&quot;ggregory&quot;&gt;ggregory&lt;/a&gt;, you made my day. Very little APIs treat usernames as char arrays.&lt;/p&gt;</comment>
                            <comment id="17463881" author="turbanoff" created="Wed, 22 Dec 2021 15:01:40 +0000"  >&lt;p&gt;It would be nice to have some explanation, how to specify username for SFTP connection. I think this explanation can be added to exception message text.&lt;/p&gt;</comment>
                            <comment id="17463908" author="garydgregory" created="Wed, 22 Dec 2021 15:41:34 +0000"  >&lt;p&gt;I do not think exception messages should become programming guides, that&apos;s a job for Javadoc comments IMO.&lt;/p&gt;

&lt;p&gt;I am happy to welcome PRs on GitHub for better comments, more tests, anything that can improve the component &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 46 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0xync:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>