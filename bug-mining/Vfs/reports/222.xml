<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:15:00 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[VFS-726] getInputStream(int bufferSize) on SftpFileObject effectively ignores buffer size</title>
                <link>https://issues.apache.org/jira/browse/VFS-726</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;When calling&#160;getInputStream(int bufferSize) on an SftpFileObject&lt;/p&gt;

&lt;p&gt;the callstack looks like this :&lt;/p&gt;

&lt;p&gt;at java.io.BufferedInputStream.&amp;lt;init&amp;gt;(BufferedInputStream.java:199)&lt;br/&gt;
 at java.io.BufferedInputStream.&amp;lt;init&amp;gt;(BufferedInputStream.java:183)&lt;br/&gt;
 at org.apache.commons.vfs2.util.MonitorInputStream.&amp;lt;init&amp;gt;(MonitorInputStream.java:40)&lt;br/&gt;
 at org.apache.commons.vfs2.provider.sftp.SftpFileObject$SftpInputStream.&amp;lt;init&amp;gt;(SftpFileObject.java:485)&lt;br/&gt;
 at org.apache.commons.vfs2.provider.sftp.SftpFileObject.doGetInputStream(SftpFileObject.java:455)&lt;br/&gt;
 at org.apache.commons.vfs2.provider.AbstractFileObject.getInputStream(AbstractFileObject.java:1175)&lt;br/&gt;
 at org.apache.commons.vfs2.provider.DefaultFileContent.buildInputStream(DefaultFileContent.java:495)&lt;br/&gt;
 at org.apache.commons.vfs2.provider.DefaultFileContent.getInputStream(DefaultFileContent.java:356)&lt;/p&gt;

&lt;p&gt;The problem is that when initialising the BufferedInputstream it is done with the DEFAULT_BUFFER_SIZE of 8192.&lt;/p&gt;

&lt;p&gt;The problem seems to be that in DefaultFileContent.buildInputStream(final Integer bufferSize) the it tries to get a raw InputStream and then wrap it into a&#160;FileContentInputStream but in reality the&#160;fileObject.getInputStream() in line 495 already returns a BufferedInputStream instead of a raw InputStream. It is effectively double buffered.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13251230">VFS-726</key>
            <summary>getInputStream(int bufferSize) on SftpFileObject effectively ignores buffer size</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ggregory">Gary D. Gregory</assignee>
                                    <reporter username="GeeGee">Cornelius H&#246;fig</reporter>
                        <labels>
                    </labels>
                <created>Fri, 16 Aug 2019 11:39:02 +0000</created>
                <updated>Tue, 5 Nov 2019 15:53:04 +0000</updated>
                            <resolved>Mon, 19 Aug 2019 22:08:06 +0000</resolved>
                                    <version>2.4.1</version>
                                    <fixVersion>2.5.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="14400">4h</timeoriginalestimate>
                            <timeestimate seconds="14400">4h</timeestimate>
                                        <comments>
                            <comment id="16909369" author="garydgregory" created="Fri, 16 Aug 2019 20:19:40 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=GeeGee&quot; class=&quot;user-hover&quot; rel=&quot;GeeGee&quot;&gt;GeeGee&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;Please see git master for a change set that passes down the buffer size down to the lower levels. There still can be double buffering but I am looking for a solution or a suggestion.&lt;/p&gt;</comment>
                            <comment id="16909606" author="boris-petrov" created="Sat, 17 Aug 2019 06:20:35 +0000"  >&lt;p&gt;I think this issue is a duplicate of &lt;a href=&quot;https://issues.apache.org/jira/browse/VFS-704&quot; title=&quot;Some providers wrap their input/output streams twice in a BufferedInputStream&quot; class=&quot;issue-link&quot; data-issue-key=&quot;VFS-704&quot;&gt;&lt;del&gt;VFS-704&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="16910786" author="garydgregory" created="Mon, 19 Aug 2019 22:08:06 +0000"  >&lt;p&gt;In git master. Please verify and close. See also &lt;del&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/VFS-704&quot; title=&quot;Some providers wrap their input/output streams twice in a BufferedInputStream&quot; class=&quot;issue-link&quot; data-issue-key=&quot;VFS-704&quot;&gt;&lt;del&gt;VFS-704&lt;/del&gt;&lt;/a&gt;.&lt;/del&gt;&lt;/p&gt;</comment>
                            <comment id="16967622" author="geegee" created="Tue, 5 Nov 2019 15:53:04 +0000"  >&lt;p&gt;Code verified, looks good&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13229677">VFS-704</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10431"><![CDATA[Important]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 1 week, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z05qio:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>