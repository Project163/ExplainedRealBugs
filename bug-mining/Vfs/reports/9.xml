<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:13:37 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[VFS-78] DefaultFileMonitor does not register changes made on FTP FileObjects</title>
                <link>https://issues.apache.org/jira/browse/VFS-78</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;I don&apos;t know if it is a bug or a feature, but DefaultFileMonitor does not report a renaming of a folder ie.&lt;br/&gt;
It is signaled as a deletion event, but the folder was renamed.&lt;br/&gt;
So it is also not possible to register then any changes made in this subfolder until you renamed it again.&lt;/p&gt;

&lt;p&gt;The URL was something like &lt;a href=&quot;ftp://ftp.server/incoming/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;ftp://ftp.server/incoming/&lt;/a&gt; and the Monitor was started being recursive.&lt;/p&gt;</description>
                <environment>&lt;p&gt;WinXP, java  version &quot;1.5.0_06&quot;, commons-vfs nightly 20060814&lt;/p&gt;</environment>
        <key id="12348017">VFS-78</key>
            <summary>DefaultFileMonitor does not register changes made on FTP FileObjects</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="imario">Mario Ivankovits</assignee>
                                    <reporter username="creator79">Patrick Schulz</reporter>
                        <labels>
                    </labels>
                <created>Tue, 15 Aug 2006 17:35:12 +0000</created>
                <updated>Tue, 25 Mar 2008 07:52:18 +0000</updated>
                            <resolved>Tue, 3 Oct 2006 19:11:55 +0000</resolved>
                                    <version>Nightly Builds</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12428346" author="imario" created="Wed, 16 Aug 2006 07:38:03 +0000"  >&lt;p&gt;The DefaultFileMonitor do not report renamings as renamings but as delete/create events.&lt;br/&gt;
This is due to the polling nature of DefaultFileMonitor, it cant know if the file was renamed, even if you use VFS for this operation. It just compares snapshots of directory listings.&lt;/p&gt;

&lt;p&gt;But even if you attach a listener to the FileObject itself a rename will be delivered as delete/create events. There we might be able to improve the event stuff, but this might not be much of help for you, no?&lt;/p&gt;

&lt;p&gt;Back to your issue, don&apos;t you get the &quot;create&quot; event?&lt;/p&gt;</comment>
                            <comment id="12428629" author="creator79" created="Thu, 17 Aug 2006 11:34:23 +0000"  >&lt;p&gt;Hi Mario,&lt;/p&gt;

&lt;p&gt;you are right, it&apos;s not much of help.&lt;br/&gt;
And you are right again, I don&apos;t get the create event.&lt;br/&gt;
Some thing that might be useful: The FTP server is a proftpd.&lt;br/&gt;
The changes (folder renaming) are made via FileZilla, that passes the commands RNFR /incoming/test2 and RNTO /incoming/test ie.&lt;/p&gt;

&lt;p&gt;But even if I change the name on the server commandline, the expected create event isn&apos;t fired.&lt;/p&gt;</comment>
                            <comment id="12429045" author="creator79" created="Fri, 18 Aug 2006 15:32:50 +0000"  >&lt;p&gt;I investigated the problem a little bit.&lt;br/&gt;
If you change something while you have DFM hold on a breakpoint at the beginning of run method&apos;s mainloop, then the addition may be registered.&lt;br/&gt;
I suppose it has something to do with the children property of the FileMonitorAgent Objects.&lt;br/&gt;
It looks like the FileObjects in this map are referencing the new FileName, so that the checkForNewChildren method cannot detect them.&lt;br/&gt;
Or there could be timing issue before.... otherwise I cannot explain why it works while step-by-step debugging.&lt;/p&gt;</comment>
                            <comment id="12429457" author="creator79" created="Mon, 21 Aug 2006 16:55:23 +0000"  >&lt;p&gt;Okay, I made a little patch, which seems to work in any case.&lt;br/&gt;
The only problem is, that it is not guaranteed in which order the events are fired.&lt;/p&gt;

&lt;p&gt;May be another solution there?&lt;br/&gt;
Mario?&lt;/p&gt;


&lt;p&gt;Cheers,&lt;br/&gt;
Patrick&lt;/p&gt;</comment>
                            <comment id="12429632" author="imario" created="Tue, 22 Aug 2006 07:40:18 +0000"  >&lt;p&gt;I&apos;ll have a look at it.&lt;/p&gt;

&lt;p&gt;Regarding the order of events. I think we never can guarantee the order of them. And you should not treat a delete/create event as a &quot;rename event&quot;.&lt;br/&gt;
What if you delete two files and rename another one. Then you&apos;ll get three delete events and one create. You cant know which of the delete events corresponds to the create - there is no ticket which allows you to combine them.&lt;/p&gt;</comment>
                            <comment id="12429723" author="creator79" created="Tue, 22 Aug 2006 14:31:29 +0000"  >&lt;p&gt;Okay.&lt;/p&gt;

&lt;p&gt;It wasn&apos; t my aim to treat them as an rename event, also if it could be a nice feature to have.&lt;br/&gt;
I would say it could be treaten as. At a very low polling delay it &quot;should be&quot; possible to differ.&lt;br/&gt;
If a parent directory has some files or folders stored inside, then you have n &quot;delete events&quot; and also n &quot;create events&quot; where only the topmost folder differs. In my point of view it is an indicator for a folder renaming. But it is not guaranteed - there could be two identical folders with only different names that come into the scenario you described.&lt;/p&gt;

</comment>
                            <comment id="12439629" author="imario" created="Tue, 3 Oct 2006 19:11:55 +0000"  >&lt;p&gt;Could reporduce the behavior you described, though, I found that the DefaultFileMonitor had some problems detecting the removal of children if they already existed before the start of the monitor.&lt;/p&gt;

&lt;p&gt;This should be fixed, I hope this fixed your problem too.&lt;br/&gt;
Please give it a try.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12339257" name="DefaultFileMonitor.patch" size="525" author="creator79" created="Mon, 21 Aug 2006 16:55:23 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>200138</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            19 years, 8 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i05jp3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>30288</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>