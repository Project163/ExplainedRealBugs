<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:15:10 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[VFS-590] SFTP moveTo operation might fail on permission checks even if the operation itself might succeed</title>
                <link>https://issues.apache.org/jira/browse/VFS-590</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;Continuing with SFTP moveTo, see &lt;a href=&quot;https://issues.apache.org/jira/browse/VFS-588&quot; title=&quot;SftpProviderTestCase is not robbust in case a timeout is configured&quot; class=&quot;issue-link&quot; data-issue-key=&quot;VFS-588&quot;&gt;VFS-588&lt;/a&gt; and &lt;a href=&quot;https://issues.apache.org/jira/browse/VFS-589&quot; title=&quot;SFTP moveTo operation hangs if the server does not support SSH channelExec.&quot; class=&quot;issue-link&quot; data-issue-key=&quot;VFS-589&quot;&gt;&lt;del&gt;VFS-589&lt;/del&gt;&lt;/a&gt; for more details.&lt;/p&gt;

&lt;p&gt;The permission checks that VFS performs during moveTo() can result in failure. &lt;/p&gt;

&lt;p&gt;org.apache.commons.vfs2.provider.AbstractFileObject.moveTo(final FileObject destFile) starts with some checks:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    @Override
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void moveTo(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; FileObject destFile) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; FileSystemException
    {
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (canRenameTo(destFile))
        {
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!getParent().isWriteable())
            {
                &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileSystemException(&lt;span class=&quot;code-quote&quot;&gt;&quot;vfs.provider/rename-parent-read-only.error&quot;&lt;/span&gt;,
                        getName(),
                        getParent().getName());
            }
        }
        &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt;
        {
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!isWriteable())
            {
                &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileSystemException(&lt;span class=&quot;code-quote&quot;&gt;&quot;vfs.provider/rename-read-only.error&quot;&lt;/span&gt;, getName());
            }
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The problem is: isWriteable() might fail or even hang. Performing moveTo without this check might successfully rename the file.&lt;/p&gt;

&lt;p&gt;isWriteable() in case of SFTP can fail if the server disables SSH channelExec. Or if it does not support &quot;id&quot; command.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12916933">VFS-590</key>
            <summary>SFTP moveTo operation might fail on permission checks even if the operation itself might succeed</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="klv_m72">L</reporter>
                        <labels>
                    </labels>
                <created>Mon, 30 Nov 2015 10:51:20 +0000</created>
                <updated>Tue, 25 Oct 2022 13:35:45 +0000</updated>
                            <resolved>Mon, 23 Dec 2019 18:14:56 +0000</resolved>
                                    <version>Nightly Builds</version>
                                    <fixVersion>2.5.0</fixVersion>
                                        <due></due>
                            <votes>5</votes>
                                    <watches>9</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                <comments>
                            <comment id="16296786" author="klv_m72" created="Tue, 19 Dec 2017 13:29:38 +0000"  >&lt;p&gt;As I wrote in the description: &lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Performing moveTo without this check might successfully rename the file. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;In our case it worked: the server had disabled SSH channelExec. After patching commons-vfs not to perform all those isWriteable() moveTo() completed successfully. &lt;/p&gt;</comment>
                            <comment id="16296810" author="klv_m72" created="Tue, 19 Dec 2017 13:51:21 +0000"  >&lt;p&gt;I do not know how and when this issue will be fixed. &lt;/p&gt;

&lt;p&gt;There is a more active discussion of a very similar issue in &lt;a href=&quot;https://issues.apache.org/jira/browse/VFS-617&quot; title=&quot;SFTP isReadable fails if unable to determine group identity&quot; class=&quot;issue-link&quot; data-issue-key=&quot;VFS-617&quot;&gt;&lt;del&gt;VFS-617&lt;/del&gt;&lt;/a&gt;. IMO &lt;a href=&quot;https://issues.apache.org/jira/browse/VFS-617&quot; title=&quot;SFTP isReadable fails if unable to determine group identity&quot; class=&quot;issue-link&quot; data-issue-key=&quot;VFS-617&quot;&gt;&lt;del&gt;VFS-617&lt;/del&gt;&lt;/a&gt; fixes &lt;a href=&quot;https://issues.apache.org/jira/browse/VFS-590&quot; title=&quot;SFTP moveTo operation might fail on permission checks even if the operation itself might succeed&quot; class=&quot;issue-link&quot; data-issue-key=&quot;VFS-590&quot;&gt;&lt;del&gt;VFS-590&lt;/del&gt;&lt;/a&gt; as well.&lt;/p&gt;
</comment>
                            <comment id="16541427" author="braetkuegeli" created="Thu, 12 Jul 2018 10:11:00 +0000"  >&lt;p&gt;&#65279;&lt;br/&gt;
&#65279;Besten Dank f&#252;r Ihre Email. Ich bin bis und mit 20. Juli 2018 abwesend. Ihre Email wird in dieser Zeit weder gelesen noch weitergeleitet.&lt;/p&gt;

&lt;p&gt;Freundliche Gr&#252;sse&lt;br/&gt;
Jussi Prevost&lt;/p&gt;

&lt;p&gt;L&#246;wenfels Partner AG  I  Maihofstrasse 1 I  6004 Luzern&lt;br/&gt;
Telefon  +41 41 418 44 00  I  Fax +41 41 418 44 44&lt;br/&gt;
jussi.prevost@loewenfels.ch&amp;lt;&lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;mailto:jussi.prevost@loewenfels.ch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;jussi.prevost@loewenfels.ch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/mail_small.gif&quot; height=&quot;12&quot; width=&quot;13&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&amp;gt;  I  www.loewenfels.ch&amp;lt;&lt;a href=&quot;http://www.loewenfels.ch/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.loewenfels.ch/&lt;/a&gt;&amp;gt;&lt;/p&gt;</comment>
                            <comment id="16541526" author="garydgregory" created="Thu, 12 Jul 2018 12:04:37 +0000"  >&lt;p&gt;Feel free to provide a PR. A test is welcome as well.&lt;/p&gt;</comment>
                            <comment id="16541829" author="garydgregory" created="Thu, 12 Jul 2018 15:39:20 +0000"  >&lt;p&gt;We are volunteers here at Apache with jobs, responsibilities, and so on; so unless you are willing to help out by providing a patch preferably with a test, then yes, you might as well wish for a miracle &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17002421" author="garydgregory" created="Mon, 23 Dec 2019 18:14:56 +0000"  >&lt;p&gt;In git master. PR# 75. Please verify and close.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                            <outwardlinks description="causes">
                                        <issuelink>
            <issuekey id="13304881">VFS-772</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 46 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2p28f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>