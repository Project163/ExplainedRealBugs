<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:13:36 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[VFS-82] ClassCastException in AbstractFileObject when using OnCall caching</title>
                <link>https://issues.apache.org/jira/browse/VFS-82</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;When using OnCall caching in the file system, there is a ClassCastException in the AbstractFileObject because it assumes that every child it will encounter will also be an AbstractFileObject as well.&lt;/p&gt;

&lt;p&gt;Here is the stack trace in question:&lt;/p&gt;

&lt;p&gt;Exception in thread &quot;AWT-EventQueue-0&quot; java.lang.ClassCastException: org.apache.commons.vfs.cache.OnCallRefreshFileObject&lt;br/&gt;
	at org.apache.commons.vfs.provider.AbstractFileObject.delete(AbstractFileObject.java:748)&lt;br/&gt;
	at org.apache.commons.vfs.impl.DecoratedFileObject.delete(DecoratedFileObject.java:79)&lt;br/&gt;
	at org.apache.commons.vfs.cache.OnCallRefreshFileObject.delete(OnCallRefreshFileObject.java:74)&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows XP&lt;/p&gt;</environment>
        <key id="12351835">VFS-82</key>
            <summary>ClassCastException in AbstractFileObject when using OnCall caching</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="ekillian">Ethan Killian</reporter>
                        <labels>
                    </labels>
                <created>Tue, 26 Sep 2006 21:11:10 +0000</created>
                <updated>Tue, 25 Mar 2008 07:52:18 +0000</updated>
                            <resolved>Mon, 2 Oct 2006 19:51:27 +0000</resolved>
                                    <version>Nightly Builds</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12437956" author="ekillian" created="Tue, 26 Sep 2006 22:10:02 +0000"  >&lt;p&gt;Fix for ClassCastException problem.  Since the files that are resolved may not be AbstractFileObject&apos;s cannot just call deleteSelf() which is only an AbstractFileObject method.  Instead check if it is indeed an AbstractFileObject and call deleteSelf(), otherwise use the FileObject interface to delete a single file.&lt;/p&gt;</comment>
                            <comment id="12437967" author="ekillian" created="Tue, 26 Sep 2006 23:21:35 +0000"  >&lt;p&gt;Updated patch to include rename class cast exception as well.&lt;/p&gt;</comment>
                            <comment id="12437968" author="ekillian" created="Tue, 26 Sep 2006 23:23:09 +0000"  >&lt;p&gt;Patch for LocalFile which also has a class cast issue on a rename when dealing with decorator objects.&lt;/p&gt;</comment>
                            <comment id="12437969" author="ekillian" created="Tue, 26 Sep 2006 23:24:53 +0000"  >&lt;p&gt;In addition to the original delete issue with ClassCastException on a DecoratorFileObject there are additional issues with renames.  I have only looked at the Local provider and there may be additional issues in all of the other types of providers since for the rename it was an issue with the LocalFile.  I have included an updated patch for AbstractFileObject and included a patch for LocalFile.&lt;/p&gt;</comment>
                            <comment id="12438042" author="imario" created="Wed, 27 Sep 2006 06:57:08 +0000"  >&lt;p&gt;Thanks, just, could you please rework you patch to use&lt;/p&gt;

&lt;p&gt;AbstractFileObject afo = FileObjectUtils.getAbstractFileObject(fo);&lt;/p&gt;

&lt;p&gt;This will unwrap the decorated file object and you can use the AbstractFileObject as before.&lt;/p&gt;

&lt;p&gt;The decorated file object is primary meant to be used outside of VFS, within it should always be possible to unwrap it when required.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="12438147" author="ekillian" created="Wed, 27 Sep 2006 15:20:45 +0000"  >&lt;p&gt;Updated patches to use the more appropriate FileObjectUtils.getAbstractFileObject() method.  Using this method cleaned up the code a lot.&lt;/p&gt;</comment>
                            <comment id="12439295" author="imario" created="Mon, 2 Oct 2006 19:51:27 +0000"  >&lt;p&gt;Applied.&lt;/p&gt;

&lt;p&gt;Thanks for the patches!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12341804" name="AbstractFileObject.patch" size="906" author="ekillian" created="Wed, 27 Sep 2006 15:20:45 +0000"/>
                            <attachment id="12341756" name="AbstractFileObject.patch" size="2118" author="ekillian" created="Tue, 26 Sep 2006 23:21:35 +0000"/>
                            <attachment id="12341749" name="AbstractFileObject.patch" size="1179" author="ekillian" created="Tue, 26 Sep 2006 22:10:02 +0000"/>
                            <attachment id="12341805" name="LocalFile.patch" size="738" author="ekillian" created="Wed, 27 Sep 2006 15:20:45 +0000"/>
                            <attachment id="12341757" name="LocalFile.patch" size="1043" author="ekillian" created="Tue, 26 Sep 2006 23:23:09 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>200141</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            19 years, 8 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i05jon:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>30286</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>