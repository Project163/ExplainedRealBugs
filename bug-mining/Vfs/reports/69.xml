<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:14:01 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[VFS-245] FileName interface says that it is immutable, however AbstractFileName.setType(FileType type) flouts this rule</title>
                <link>https://issues.apache.org/jira/browse/VFS-245</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;FileName interface says that it is immutable, however AbstractFileName.setType(FileType type) flouts this rule.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12417075">VFS-245</key>
            <summary>FileName interface says that it is immutable, however AbstractFileName.setType(FileType type) flouts this rule</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="sebb">Sebb</reporter>
                        <labels>
                    </labels>
                <created>Tue, 17 Mar 2009 16:32:20 +0000</created>
                <updated>Thu, 25 Nov 2010 21:34:44 +0000</updated>
                            <resolved>Thu, 25 Nov 2010 21:34:44 +0000</resolved>
                                                    <fixVersion>2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12682717" author="sebb@apache.org" created="Tue, 17 Mar 2009 16:42:36 +0000"  >&lt;p&gt;Since FileType is used in equals() and hashCode() this could cause serious problems.&lt;/p&gt;</comment>
                            <comment id="12716775" author="vbonfanti" created="Fri, 5 Jun 2009 22:26:30 +0000"  >&lt;p&gt;Here&apos;s what I&apos;ve discovered about this problem:&lt;/p&gt;

&lt;p&gt; 1) The AbstractFileName equals() and hashcode() methods rely on its getRootUri() and getPath() methods.&lt;/p&gt;

&lt;p&gt; 2) The getRootUri() method invokes appendRootUri(), which is an abstract method. Since we can&apos;t know what the subclass might do within appendRootUri(), it&apos;s probably not a good idea for getRootUri() to be used by equals() or hashcode().&lt;/p&gt;

&lt;p&gt; 3) The getPath() method might invoke getUriTrailer() based on the setting of VFS.isUriStyle(). The getUriTrailer() method is the one that invokes getType() to determine whether to add a &quot;/&quot; to the path. Therefore, it&apos;s probably not a good idea for getPath() to be used by equals() or hashcode().&lt;/p&gt;

&lt;p&gt;I recommend that equals() and hashcode() be modified to rely only on the &quot;scheme&quot; and &quot;absPath&quot; properties, both of which are Strings and both of which are immutable. A patch file with the proposed change is attached.&lt;/p&gt;</comment>
                            <comment id="12935855" author="ralph.goers@dslextreme.com" created="Thu, 25 Nov 2010 19:52:05 +0000"  >&lt;p&gt;I&apos;ve experimented with various options for this.&lt;/p&gt;

&lt;p&gt;I looked at removing the FileType attribute. Unfortunately, resolveName in DefaultFileSystemManager relies on it to determine whether the FileName is a File vs a Folder so removing it would break that.&lt;/p&gt;

&lt;p&gt;I looked at making the FileType immutable and removing the setType method. This is doable but requires that AbstractFileObject change the setType method to create a new FileName when the type is changed instead of modifying the FileName. As a consequence this just moves the immutability problem since FileObjects are cached by their FileName.&lt;/p&gt;

&lt;p&gt;While the assessment above is correct, I disagree with the outcome. appendURI is provided to allow FileName implementations to include information such as the userid and password into the path. Furthermore, the only thing the FileType is used for is to determine whether to append a &apos;/&apos; to the path.  Given this it makes more sense to me to modify equals(), hashcode, and compareTo to use a method that generates a URI that contains the results from appendURI but does not try to append the &apos;/&apos; to the path. This will result in these three methods returning constant values regardless of what the FileType might be.&lt;/p&gt;</comment>
                            <comment id="12935884" author="ralph.goers@dslextreme.com" created="Thu, 25 Nov 2010 21:34:44 +0000"  >&lt;p&gt;Made the changes as described above. While this does not make the FileName immutable (as it should be) it does eliminate the consequences of the FileType changing.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12410033" name="AbstractFileName.java.patch" size="812" author="vbonfanti" created="Fri, 5 Jun 2009 22:27:27 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>200296</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1363z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>226620</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>