<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:13:51 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[VFS-169] Thrown exception reveals passwords</title>
                <link>https://issues.apache.org/jira/browse/VFS-169</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;If an exception occurs accessing a FileObject on a FileSystem that is addressed with an URL containing user and password the thrown exception contains the password as part of the error message:&lt;/p&gt;

&lt;p&gt;org.apache.commons.vfs.FileSystemException: Could not connect to SFTP server at &quot;sftp://user:password@apache.org/&quot;.&lt;/p&gt;

&lt;p&gt;In such a case the URL should be printed as &quot;sftp://user:***@apache.org/&quot;. Same applied to log messages - at least for INFO and higher.&lt;/p&gt;

&lt;p&gt;This is a security risk, since in big companies exceptions and logs are normally collected and archived in monitoring systems and may reveal the password to persons that have normally no authorization to the target system.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12373642">VFS-169</key>
            <summary>Thrown exception reveals passwords</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="joehni">Joerg Schaible</assignee>
                                    <reporter username="joehni">Joerg Schaible</reporter>
                        <labels>
                    </labels>
                <created>Thu, 12 Jul 2007 15:25:23 +0000</created>
                <updated>Tue, 24 Mar 2009 23:35:26 +0000</updated>
                            <resolved>Sun, 22 Mar 2009 20:29:41 +0000</resolved>
                                    <version>1.0</version>
                                    <fixVersion>2.0</fixVersion>
                                        <due></due>
                            <votes>1</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12619355" author="kleij" created="Sun, 3 Aug 2008 18:27:32 +0000"  >&lt;p&gt;I think too that the password should never ever be revealed once entered; not in exceptions, nor in other debug messages.&lt;/p&gt;

&lt;p&gt;Probably adapting the AbstractFileName.toString to not print the password would fix most of this. Then the method getFriendlyURI can be deprecated as well. &lt;/p&gt;

&lt;p&gt;I have one remark though. I really dislike the format &apos;scheme://user:***@host&apos; where the password is hidden with *** ; it is kind of ugly and I don&apos;t think it serves any purpose to show the ***. &lt;/p&gt;

&lt;p&gt;I would rather prefer &apos;scheme://user@host&apos; in all cases; it is shorter and more to the point.&lt;/p&gt;

&lt;p&gt;I hope you fix this soon.&lt;/p&gt;

&lt;p&gt;In my opinion, when the credentials of the user were not in the URI but have been given using the Authentication in the FileSystemOptions the username should also be in the FileName.toString(), which is currently not the case. &lt;/p&gt;
</comment>
                            <comment id="12619478" author="jwcarman" created="Mon, 4 Aug 2008 11:04:01 +0000"  >&lt;p&gt;&quot;I hope you fix this soon&quot;&lt;/p&gt;

&lt;p&gt;That&apos;s the beauty of open source software; you can help fix this!  Attaching a patch (including test cases) would be a good way to help get this thing fixed.  It seems like you&apos;ve already got a good idea about how it should be done.&lt;/p&gt;</comment>
                            <comment id="12660491" author="kleij" created="Sat, 3 Jan 2009 17:38:51 +0000"  >&lt;p&gt;This patch is a very local fix, that only changes the toString() method. I would prefer that the password would not be returned on methods like getURI either, but this has big implications on the whole URI parsing. The TODO in DefaultFileSystemManager.resolveName(FileName,String,NameScope) first has to be implemented to allow the URI parser to work on relative paths.&lt;/p&gt;</comment>
                            <comment id="12688167" author="joehni" created="Sun, 22 Mar 2009 20:29:41 +0000"  >&lt;p&gt;My original concern have been only the URLs in the FileSystemException. That&apos;s what I&apos;ve committed now - the info passed to the exception will be examined for URLs with password and passwords will be masked automatically. However, Frank&apos;s approach and patch is also reasonable - it depends on what we want. Main concern with his solution is the overridden toString method of the GenericFileName, because it changes silently the API. This method is normally inherited from AbstractFileName and the Javadoc states explicitly that toString is a call to getURI. Now, since we seem to head for 2.0 with the next release anyway, we might consider such a change. But in this case I would rather change AbstractFileName&apos;s toString method and call getFriendlyURI there as default.&lt;/p&gt;

&lt;p&gt;Please comment, if we decide to take the friendly URI approach, we will reopen this issue.&lt;/p&gt;</comment>
                            <comment id="12688664" author="bsp" created="Tue, 24 Mar 2009 12:37:27 +0000"  >&lt;p&gt;Joerg,&lt;/p&gt;

&lt;p&gt;Seems we have duplication of functionality now:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;GenericFileName has getSafeURI() method&lt;/li&gt;
	&lt;li&gt;FileName &amp;amp; AbstractFileName have getFriendlyURI() method&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;As for me, only getFriendlyURI() was okay (may be using *** to replace password should be added), and this (and only this) method should be used for toString() method.&lt;/p&gt;

&lt;p&gt;Also AbstractFileObject should be changed to use &quot;safe&quot; URI in toString()&lt;/p&gt;</comment>
                            <comment id="12688678" author="joehni" created="Tue, 24 Mar 2009 13:14:23 +0000"  >&lt;blockquote&gt;&lt;p&gt;Seems we have duplication of functionality now&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;?? As I said, I did not apply Frank&apos;s patch, I&apos;ve chosen a complete different approach.&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Also AbstractFileObject should be changed to use &quot;safe&quot; URI in toString()&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;This is the question. While it seems reasonable, we change silently the API. I&apos;d be definitely -1 for a next 1.x release, but since we&apos;re heading to 2.x, it might be a different case.&lt;/p&gt;</comment>
                            <comment id="12688931" author="bsp" created="Tue, 24 Mar 2009 23:16:25 +0000"  >&lt;p&gt;Sorry, Joerg, didn&apos;t check SVN, only patch file. Let me review it &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12688933" author="bsp" created="Tue, 24 Mar 2009 23:35:26 +0000"  >&lt;p&gt;Joerg,&lt;/p&gt;

&lt;p&gt;1) Personally, i completly unlike masking password in exception. It&apos;s not the place where it should be done. Looks like a hack for me.&lt;/p&gt;

&lt;p&gt;There is a lot of other places where passowrd inside of URI should be masked. For example - debug output of my own program (FileName.toString() or FileObject.toString() calls). They also should be masked.&lt;/p&gt;

&lt;p&gt;2) What about API? We already renamed (in SVN) version number to 2.0-SNAPSHOT, and, AFAIK, we can&apos;t change it back (some commercial projects already using snapshots under 2.x numbering)&lt;/p&gt;

&lt;p&gt;Anyway, if the question is only saving FileObject clean of additional methods, for 1.x version we can introduce getFriendlyURI() method in AbstractFileName and not to copy it to FileObject (do it only in 2.x).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12397051" name="vfs-pwd.patch" size="4488" author="kleij" created="Sat, 3 Jan 2009 17:38:51 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>200227</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 35 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1360n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>226605</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>