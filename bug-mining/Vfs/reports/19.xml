<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:13:41 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[VFS-107] large Sftp transfers fail with OutOfMemoryError: Java heap space</title>
                <link>https://issues.apache.org/jira/browse/VFS-107</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;Calling SftpFileObject.getOutputStream() returns a descendant of ByteArrayOutputStream; nothing is written to the remote sftp server until the OutputStream is closed.  For large data transfers, this exhausts local resources.&lt;/p&gt;

&lt;p&gt;This is noted in the source for SftpFileObject:&lt;/p&gt;

&lt;p&gt;	protected OutputStream doGetOutputStream(boolean bAppend) throws Exception&lt;/p&gt;
	{
		// TODO - Don&apos;t write the entire file into memory. Use the stream-based
		// methods on ChannelSftp once the work properly
		final ChannelSftp channel = fileSystem.getChannel();
		return new SftpOutputStream(channel);
	}

&lt;p&gt;although it is not clear what &quot;once the&lt;span class=&quot;error&quot;&gt;&amp;#91;y&amp;#93;&lt;/span&gt; work properly&quot; is referring to.&lt;/p&gt;</description>
                <environment>&lt;p&gt;java version &quot;1.5.0_04&quot;&lt;br/&gt;
Java(TM) 2 Runtime Environment, Standard Edition (build 1.5.0_04-b05)&lt;br/&gt;
Java HotSpot(TM) Client VM (build 1.5.0_04-b05, mixed mode, sharing)&lt;/p&gt;

&lt;p&gt;Linux version 2.6.17-1.2142_FC4 (bhcompile@hs20-bc1-4.build.redhat.com) (gcc version 4.0.2 20051125 (Red Hat 4.0.2-8)) #1 Tue Jul 11 22:41:14 EDT 2006&lt;/p&gt;</environment>
        <key id="12360549">VFS-107</key>
            <summary>large Sftp transfers fail with OutOfMemoryError: Java heap space</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="mlamb">Marty Lamb</reporter>
                        <labels>
                    </labels>
                <created>Mon, 15 Jan 2007 17:28:57 +0000</created>
                <updated>Wed, 27 Jul 2016 21:04:46 +0000</updated>
                            <resolved>Mon, 19 Mar 2007 20:18:16 +0000</resolved>
                                    <version>Nightly Builds</version>
                                    <fixVersion>2.0</fixVersion>
                                        <due></due>
                            <votes>2</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="12465113" author="imario" created="Tue, 16 Jan 2007 10:34:29 +0000"  >&lt;p&gt;Hi!&lt;/p&gt;

&lt;p&gt;The stream-based methods were dog slow in the past. And when I say dog slow, I mean they were &quot;double dog slow&quot; - to an unusable extent &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
As far as I remember it had something to do with the piped streams jsch has to use internally in case of stream based operations.&lt;/p&gt;

&lt;p&gt;I dont know if this has been fixed now, should give it another try.&lt;/p&gt;</comment>
                            <comment id="12465187" author="risto" created="Tue, 16 Jan 2007 16:00:23 +0000"  >&lt;p&gt;I don&apos;t know when you had the last try with jsch, but I read the change log of the latest version (0.1.30) and some of the fixed bugs might be related to your former problems. So please have a look at it.&lt;/p&gt;</comment>
                            <comment id="12479211" author="serff" created="Thu, 8 Mar 2007 04:11:25 +0000"  >&lt;p&gt;Any new news on this?  I really need this one fixed and soon.  If you point me to some documentation for the stream stuff you talk about, maybe I can take a stab at it.  Let me know.&lt;/p&gt;</comment>
                            <comment id="12479235" author="risto" created="Thu, 8 Mar 2007 06:08:04 +0000"  >&lt;p&gt;I attached the patched SFTPFileObject java class, that seems to be working without buffering the whole file using the latest jsch lib.&lt;/p&gt;

&lt;p&gt;The class is based on the &lt;a href=&quot;https://issues.apache.org/jira/browse/VFS-1&quot; title=&quot;VFS tries to &amp;quot;cwd /&amp;quot; on a hostname.com/path ftp url instead of &amp;quot;cwd path&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;VFS-1&quot;&gt;&lt;del&gt;VFS-1&lt;/del&gt;&lt;/a&gt;.0 source code. I only patched the buggy buffer part. If you are interested in what lines of code have changed, please diff it against the same file from &lt;a href=&quot;https://issues.apache.org/jira/browse/VFS-1&quot; title=&quot;VFS tries to &amp;quot;cwd /&amp;quot; on a hostname.com/path ftp url instead of &amp;quot;cwd path&amp;quot;&quot; class=&quot;issue-link&quot; data-issue-key=&quot;VFS-1&quot;&gt;&lt;del&gt;VFS-1&lt;/del&gt;&lt;/a&gt;.0.&lt;/p&gt;

&lt;p&gt;Hopefully this patch finds its way to VFS 1.1.&lt;/p&gt;
</comment>
                            <comment id="12479298" author="mlamb" created="Thu, 8 Mar 2007 12:55:51 +0000"  >&lt;p&gt;Sorry, should have commented on this much sooner.  That seems to work for me - thanks!&lt;/p&gt;</comment>
                            <comment id="12479501" author="serff" created="Fri, 9 Mar 2007 04:26:50 +0000"  >&lt;p&gt;Very cool.  Thanks!  Anyone know when v1.1 is slated to be released?  I&apos;m guess I&apos;m going to be using the patched version for a little while.  &lt;/p&gt;</comment>
                            <comment id="12482201" author="imario" created="Mon, 19 Mar 2007 20:18:16 +0000"  >&lt;p&gt;ok, I&apos;ve changed VFS head now to use the stream based methods, the test cases still work, so it looks like it works now.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;br/&gt;
Ciao,&lt;br/&gt;
Mario&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12389776">VFS-200</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12352903" name="SftpFileObject.java" size="11121" author="risto" created="Thu, 8 Mar 2007 06:08:04 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>200166</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 years, 36 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i13atr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>227384</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>