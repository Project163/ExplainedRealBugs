<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:13:40 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[VFS-111] Closed OutputStream from FileContent does not throw IOException if further written to</title>
                <link>https://issues.apache.org/jira/browse/VFS-111</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;I&apos;ve a question regarding the behaviour of OutputStreams received from&lt;br/&gt;
org.apache.commons.vfs.FileContent.getOutputStream(): If I call close()&lt;br/&gt;
on them and further write some bytes to the stream, these writes take&lt;br/&gt;
place silently without throwing an IOException (as it is done by &quot;usual&quot;&lt;br/&gt;
Java streams like java.io.FileOutputStream); the data written after close()&lt;br/&gt;
has been called does not appear in the target file, neither.&lt;/p&gt;

&lt;p&gt;As an example:&lt;/p&gt;

&lt;p&gt;byte[] SOME_BYTES = new byte[]&lt;/p&gt;
{70, 71, 72}
&lt;p&gt;;&lt;br/&gt;
FileObject tmpFile = VFS.getManager().resolveFile(&quot;tmp:test.txt&quot;);&lt;br/&gt;
OutputStream os = tmpFile.getContent().getOutputStream();&lt;br/&gt;
os.write(SOME_BYTES);&lt;br/&gt;
os.close();&lt;br/&gt;
os.write(SOME_BYTES); // Neither IOE is thrown nor bytes are written&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows XP, Java(TM) 2 Runtime Environment, Standard Edition (build 1.5.0_10-b03)&lt;/p&gt;</environment>
        <key id="12362915">VFS-111</key>
            <summary>Closed OutputStream from FileContent does not throw IOException if further written to</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="dcmoeller">Dr. Christian M&#246;ller</reporter>
                        <labels>
                    </labels>
                <created>Thu, 15 Feb 2007 12:30:27 +0000</created>
                <updated>Wed, 27 Jul 2016 21:04:25 +0000</updated>
                            <resolved>Mon, 19 Mar 2007 19:42:38 +0000</resolved>
                                    <version>1.0</version>
                                    <fixVersion>2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12473379" author="dcmoeller" created="Thu, 15 Feb 2007 13:52:21 +0000"  >&lt;p&gt;OK, I&apos;ve done some debugging to see what happens when calling write() on the OutputStream given by FileContent.getOutputStream(). Two steps further you reach java.io.BufferedOutputStream.write(byte[], int, int) - it seems that the OutputStream delivered by FileContent (in this case an instance of org.apache.commons.vfs.provider.DefaultFileContent$FileContentOutputStream) is a buffered one.&lt;br/&gt;
Now, java.io.BufferedOutputStream shows the same behaviour I&apos;ve mentioned to be erroneous: Closing it and writing further data to it won&apos;t throw an IOException (unless his internal buffer is filled up).&lt;br/&gt;
But why does this buffered decorator does not throw the expected IOException? Because it is a simple buffer and there is no possibility to ask the underlying stream for its state: No &quot;isClosed()&quot; method on java.io.OutputStream! So the only alternative would be to record the closed state within the buffered decorator a second time (the first time it is recorded by the underlying stream); this doesn&apos;t seem to be very elegant, does it?&lt;/p&gt;

&lt;p&gt;Referring to VFS there are two options I think:&lt;br/&gt;
a) Stay as it is, or&lt;br/&gt;
b) Deliver an unbuffered stream via FileContent.getOutputStream() instead of a buffered one.&lt;/p&gt;

&lt;p&gt;What do you think?&lt;/p&gt;

&lt;p&gt;Christian&lt;/p&gt;</comment>
                            <comment id="12482194" author="imario" created="Mon, 19 Mar 2007 19:42:38 +0000"  >&lt;p&gt;I&apos;ve added a check if the file has been closed to our MonitorOutputStream, so now it will fail fast.&lt;/p&gt;

&lt;p&gt;Thanks for pointing it out.&lt;/p&gt;

&lt;p&gt;Ciao,&lt;br/&gt;
Mario&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>200170</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 years, 36 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i13alj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>227347</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>