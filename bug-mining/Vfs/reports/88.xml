<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:14:09 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[VFS-200] [SFTP] Failure when files are very large</title>
                <link>https://issues.apache.org/jira/browse/VFS-200</link>
                <project id="12310495" key="VFS">Commons VFS</project>
                    <description>&lt;p&gt;We only get this error with very large files.  We are using the latest release of JSch (0.1.37).&lt;/p&gt;

&lt;p&gt;org.apache.commons.vfs.FileSystemException: Could not read file &quot;sftp://&lt;span class=&quot;error&quot;&gt;&amp;#91;useridRemoved&amp;#93;&lt;/span&gt;@&lt;span class=&quot;error&quot;&gt;&amp;#91;ipAddrRemoved&amp;#93;&lt;/span&gt;/returned/ccp_allusers.20080219010439.01.noe.clean_C_.txt&quot;.&lt;br/&gt;
	at org.apache.commons.vfs.provider.AbstractFileObject.getInputStream(AbstractFileObject.java:1052)&lt;br/&gt;
	at org.apache.commons.vfs.provider.DefaultFileContent.getInputStream(DefaultFileContent.java:312)&lt;br/&gt;
	at com.ibm.account.batch.jobs.gecs.SecureFTPHelper.retrieveGECSResultsFiles(SecureFTPHelper.java:155)&lt;br/&gt;
Caused by: 4: &lt;br/&gt;
	at com.jcraft.jsch.ChannelSftp._get(ChannelSftp.java(Compiled Code))&lt;br/&gt;
	at com.jcraft.jsch.ChannelSftp.get(ChannelSftp.java:855)&lt;br/&gt;
	at com.jcraft.jsch.ChannelSftp.get(ChannelSftp.java:834)&lt;br/&gt;
	at org.apache.commons.vfs.provider.sftp.SftpFileObject.doGetInputStream(SftpFileObject.java:362)&lt;br/&gt;
	at org.apache.commons.vfs.provider.AbstractFileObject.getInputStream(AbstractFileObject.java:1048)&lt;br/&gt;
	... 14 more&lt;br/&gt;
Caused by: java.io.IOException: inputstream is closed&lt;br/&gt;
	at com.jcraft.jsch.ChannelSftp.fill(ChannelSftp.java(Inlined Compiled Code))&lt;br/&gt;
	at com.jcraft.jsch.ChannelSftp.header(ChannelSftp.java(Compiled Code))&lt;br/&gt;
	... 19 more&lt;/p&gt;</description>
                <environment>&lt;p&gt;Java EE 5&lt;/p&gt;</environment>
        <key id="12389776">VFS-200</key>
            <summary>[SFTP] Failure when files are very large</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="mwmanion">Michael Manion</reporter>
                        <labels>
                    </labels>
                <created>Thu, 28 Feb 2008 13:12:13 +0000</created>
                <updated>Thu, 19 May 2016 18:25:43 +0000</updated>
                            <resolved>Mon, 14 May 2012 18:30:09 +0000</resolved>
                                    <version>1.0</version>
                                    <fixVersion>2.1</fixVersion>
                                        <due></due>
                            <votes>3</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="12581996" author="mwmanion" created="Tue, 25 Mar 2008 16:05:57 +0000"  >&lt;p&gt;Maybe it would help if I provide more information on this issue.  We are using Commons-VFS to login to an sftp server and download very 2 or 3 large files (several hundred MB each) every week.  The download fails consistently with the error message seen in my original problem description.  We have tested with smaller files and do not see the error.  We are using the official 1.0 version of the Commons-VFS jarfile, along with the latest JSch jarfile (0.1.37).&lt;/p&gt;

&lt;p&gt;We tried breaking one of the large files up into 20MB &quot;chunks&quot; on the remote sftp server.  The result was that the first 4 of these 20MB files would download correctly, and then we get the same error while downloading the 5th one.  Again, this is a consistent result.&lt;/p&gt;</comment>
                            <comment id="12637521" author="tmassi" created="Tue, 7 Oct 2008 15:36:13 +0000"  >&lt;p&gt;I think this is happening because the sftp provider for VFS is calling JSch methods that read the entire contents of the remote file into memory before providing the caller an input stream. In my situation, this caused an out of memory error.&lt;/p&gt;

&lt;p&gt;The fix for this is for the VFS sftp provider to call the JSch method that return InputStream (and OutputStream) objects.&lt;/p&gt;</comment>
                            <comment id="12637524" author="tmassi" created="Tue, 7 Oct 2008 15:45:35 +0000"  >&lt;p&gt;I think these issues are probably related.&lt;/p&gt;</comment>
                            <comment id="13114044" author="ralph.goers@dslextreme.com" created="Sat, 24 Sep 2011 19:12:25 +0000"  >&lt;p&gt;I see comments in SftpFileObject.getInputStream related to this. Unfortunately, I don&apos;t have a server to test this nor am I all that familiar with JSch. If someone could provide instructions on how to set up a functional test for this, provide a test that can be included to test it and then provide a patch I&apos;ll gladly apply it.&lt;/p&gt;</comment>
                            <comment id="13274829" author="garydgregory" created="Mon, 14 May 2012 18:29:51 +0000"  >&lt;p&gt;Yes, this was addressed by &lt;a href=&quot;https://issues.apache.org/jira/browse/VFS-410&quot; title=&quot;[SFTP] SftpFileObject getInputStream(long) reads the whole file into memory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;VFS-410&quot;&gt;&lt;del&gt;VFS-410&lt;/del&gt;&lt;/a&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;SFTP&amp;#93;&lt;/span&gt;: SftpFileObject getInputStream(long) reads the whole file into memory.&lt;/p&gt;

&lt;p&gt;It is in SVN as of revision 1328346.&lt;/p&gt;</comment>
                            <comment id="13274830" author="garydgregory" created="Mon, 14 May 2012 18:30:09 +0000"  >&lt;p&gt;In SVN as of revision 1328346.&lt;/p&gt;</comment>
                            <comment id="15291739" author="b.eckenfels" created="Thu, 19 May 2016 18:25:42 +0000"  >&lt;p&gt;Apache Commons VFS 2.1 has been released. It includes this (total 171) resolved issues.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12360549">VFS-107</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>59426</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 26 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i133h3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>226193</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>