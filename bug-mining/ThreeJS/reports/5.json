{"url":"https://api.github.com/repos/mrdoob/three.js/issues/24797","repository_url":"https://api.github.com/repos/mrdoob/three.js","labels_url":"https://api.github.com/repos/mrdoob/three.js/issues/24797/labels{/name}","comments_url":"https://api.github.com/repos/mrdoob/three.js/issues/24797/comments","events_url":"https://api.github.com/repos/mrdoob/three.js/issues/24797/events","html_url":"https://github.com/mrdoob/three.js/issues/24797","id":1409435871,"node_id":"I_kwDOAAjKyc5UAkjf","number":24797,"title":"MeshPhysicalMaterial attenuationDistance is null when exporting to JSON","user":{"login":"davcri","id":6860637,"node_id":"MDQ6VXNlcjY4NjA2Mzc=","avatar_url":"https://avatars.githubusercontent.com/u/6860637?v=4","gravatar_id":"","url":"https://api.github.com/users/davcri","html_url":"https://github.com/davcri","followers_url":"https://api.github.com/users/davcri/followers","following_url":"https://api.github.com/users/davcri/following{/other_user}","gists_url":"https://api.github.com/users/davcri/gists{/gist_id}","starred_url":"https://api.github.com/users/davcri/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/davcri/subscriptions","organizations_url":"https://api.github.com/users/davcri/orgs","repos_url":"https://api.github.com/users/davcri/repos","events_url":"https://api.github.com/users/davcri/events{/privacy}","received_events_url":"https://api.github.com/users/davcri/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":620412970,"node_id":"MDU6TGFiZWw2MjA0MTI5NzA=","url":"https://api.github.com/repos/mrdoob/three.js/labels/Regression","name":"Regression","color":"000000","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2022-10-14T14:24:08Z","updated_at":"2022-10-15T08:01:20Z","closed_at":"2022-10-15T08:01:20Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"**Describe the bug**\r\n\r\n```js\r\nconst mesh = new THREE.Mesh(new THREE.BoxGeometry(), new THREE.MeshPhysicalMaterial())\r\nconsole.log(mesh.material.attenuationDistance); // Infinity (correct)\r\nconst json = JSON.stringify(mesh.toJSON())\r\nconst x = new THREE.ObjectLoader().parse(JSON.parse(json))\r\nconsole.log(x.material.attenuationDistance); // null, but it should be Infinity\r\n```\r\n\r\n***Live example***\r\n\r\n- https://jsfiddle.net/we3c562t/5/ (open the console)\r\n\r\n**Expected behavior**\r\n\r\nSerializing and deserializing should preserve the material appearance.\r\n\r\nProbably we should avoid exporting `attenuationDistance` when it's equal to Infinity (the default value).\r\n\r\nRelated issue: https://github.com/mrdoob/three.js/pull/24622\r\n\r\n**Screenshots**\r\n\r\nI noticed this issue by exporting and re-importing a MeshPhysicalMaterial from the editor.\r\n\r\n<img width=300 src=\"https://user-images.githubusercontent.com/6860637/195865822-fc5efce9-6e6e-4f15-afba-eb5bf6934a19.png\" />\r\n\r\nAttenuation distance is `NaN` after importing [model.json](https://github.com/mrdoob/three.js/files/9786998/model.json.zip) with MeshPhysicalMaterial (with transmission = 1, roughness ~=0)\r\n<img width=300 src=\"https://user-images.githubusercontent.com/6860637/195867798-1f832498-e9c7-43fb-b269-1fc4ceb96bf1.png\" />\r\n\r\n**Platform:**\r\n\r\n - Device: Desktop, Mobile\r\n - OS: Windows, MacOS, Linux, Android, iOS\r\n - Browser: Chrome, Firefox, Safari, Edge\r\n - Three.js version: dev\r\n","closed_by":{"login":"Mugen87","id":12612165,"node_id":"MDQ6VXNlcjEyNjEyMTY1","avatar_url":"https://avatars.githubusercontent.com/u/12612165?v=4","gravatar_id":"","url":"https://api.github.com/users/Mugen87","html_url":"https://github.com/Mugen87","followers_url":"https://api.github.com/users/Mugen87/followers","following_url":"https://api.github.com/users/Mugen87/following{/other_user}","gists_url":"https://api.github.com/users/Mugen87/gists{/gist_id}","starred_url":"https://api.github.com/users/Mugen87/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Mugen87/subscriptions","organizations_url":"https://api.github.com/users/Mugen87/orgs","repos_url":"https://api.github.com/users/Mugen87/repos","events_url":"https://api.github.com/users/Mugen87/events{/privacy}","received_events_url":"https://api.github.com/users/Mugen87/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/mrdoob/three.js/issues/24797/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/mrdoob/three.js/issues/24797/timeline","performed_via_github_app":null,"state_reason":"completed"}