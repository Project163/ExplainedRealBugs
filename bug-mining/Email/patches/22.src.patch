diff --git a/pom.xml b/pom.xml
index 7e6d2d2..2191352 100644
--- a/pom.xml
+++ b/pom.xml
@@ -258,6 +258,11 @@
 
     <build>
         <sourceDirectory>src/java</sourceDirectory>
+        <resources>
+            <resource>
+                <directory>src/resources</directory>
+            </resource>
+        </resources>
         <testSourceDirectory>src/test</testSourceDirectory>
         <testResources>
             <testResource>
diff --git a/src/changes/changes.xml b/src/changes/changes.xml
index 0214859..57a66de 100644
--- a/src/changes/changes.xml
+++ b/src/changes/changes.xml
@@ -23,6 +23,10 @@
 
   <body>
     <release version="1.3" date="as in SVN">
+       <action dev="sgoeschl" type="fix" issue="EMAIL-107" date="2011-09-06" due-to="Claus Polanka, Michael Jakl">
+          Added mime.types to META-INF - the definition is actually found in activation.jar
+          but did not work.
+      </action>
        <action dev="sgoeschl" type="fix" issue="EMAIL-106" date="2011-09-06" due-to="Bruno Harbulot">
           STARTTLS can be used even without authenticator.
       </action>
diff --git a/src/resources/META-INF/mime.types b/src/resources/META-INF/mime.types
new file mode 100644
index 0000000..4ceb372
--- /dev/null
+++ b/src/resources/META-INF/mime.types
@@ -0,0 +1 @@
+image/png   png PNG
diff --git a/src/test/org/apache/commons/mail/EmailTest.java b/src/test/org/apache/commons/mail/EmailTest.java
index 6c622ed..f70a9e1 100644
--- a/src/test/org/apache/commons/mail/EmailTest.java
+++ b/src/test/org/apache/commons/mail/EmailTest.java
@@ -16,6 +16,7 @@
  */
 package org.apache.commons.mail;
 
+import java.io.File;
 import java.io.UnsupportedEncodingException;
 import java.nio.charset.Charset;
 import java.nio.charset.IllegalCharsetNameException;
@@ -27,14 +28,12 @@ import java.util.Iterator;
 import java.util.List;
 import java.util.Map;
 import java.util.Properties;
-
 import javax.mail.Authenticator;
 import javax.mail.Session;
 import javax.mail.internet.InternetAddress;
 import javax.mail.internet.MimeMessage;
 import javax.mail.internet.MimeMultipart;
 import javax.mail.internet.ParseException;
-
 import org.apache.commons.mail.mocks.MockEmailConcrete;
 
 /**
@@ -355,9 +354,9 @@ public class EmailTest extends BaseEmailTestCase
                 "joe.doe@apache.org",
                 "joe.doe@apache.org"));
         arrExpected.add(
-            new InternetAddress(
-                "someone_here@work-address.com.au",
-                "someone_here@work-address.com.au"));
+                new InternetAddress(
+                        "someone_here@work-address.com.au",
+                        "someone_here@work-address.com.au"));
 
         for (int i = 0; i < testEmails.length; i++)
         {
@@ -1320,18 +1319,18 @@ public class EmailTest extends BaseEmailTestCase
 
         testInetEmailValid.add(new InternetAddress("me@home.com", "Name1"));
         testInetEmailValid.add(
-            new InternetAddress(
-                "joe.doe@apache.org",
-                "joe.doe@apache.org"));
+                new InternetAddress(
+                        "joe.doe@apache.org",
+                        "joe.doe@apache.org"));
         testInetEmailValid.add(
-            new InternetAddress(
-                "someone_here@work-address.com.au",
-                "someone_here@work-address.com.au"));
+                new InternetAddress(
+                        "someone_here@work-address.com.au",
+                        "someone_here@work-address.com.au"));
 
         this.email.setBcc(testInetEmailValid);
         assertEquals(
-            testInetEmailValid.size(),
-            this.email.getBccAddresses().size());
+                testInetEmailValid.size(),
+                this.email.getBccAddresses().size());
     }
 
     /** */
@@ -1428,4 +1427,21 @@ public class EmailTest extends BaseEmailTestCase
         msg.saveChanges();
         assertEquals("application/octet-stream", msg.getContentType());
     }
+
+    public void testCorrectContentTypeForPNG() throws Exception
+    {
+        this.email.setHostName(this.strTestMailServer);
+        this.email.setSmtpPort(this.getMailServerPort());
+        this.email.setFrom("a@b.com");
+        this.email.addTo("c@d.com");
+        this.email.setSubject("test mail");
+
+        this.email.setCharset("ISO-8859-1");
+        File png = new File("./target/test-classes/images/logos/maven-feather.png");
+        this.email.setContent(png, "image/png");
+        this.email.buildMimeMessage();
+        MimeMessage msg = this.email.getMimeMessage();
+        msg.saveChanges();
+        assertEquals("image/png", msg.getContentType());
+    }
 }
diff --git a/src/test/org/apache/commons/mail/HtmlEmailTest.java b/src/test/org/apache/commons/mail/HtmlEmailTest.java
index d68f44f..39c6f3d 100644
--- a/src/test/org/apache/commons/mail/HtmlEmailTest.java
+++ b/src/test/org/apache/commons/mail/HtmlEmailTest.java
@@ -19,11 +19,15 @@ package org.apache.commons.mail;
 import java.io.File;
 import java.io.IOException;
 import java.net.URL;
+import java.util.List;
 
+import javax.activation.DataSource;
 import javax.activation.FileDataSource;
+import javax.mail.internet.MimeMessage;
 
 import org.apache.commons.mail.mocks.MockHtmlEmailConcrete;
 import org.apache.commons.mail.settings.EmailConfiguration;
+import org.apache.commons.mail.util.MimeMessageParser;
 
 /**
  * JUnit test case for HtmlEmail Class.
@@ -644,5 +648,40 @@ public class HtmlEmailTest extends BaseEmailTestCase
          // back?
          String returnedCid = this.email.embed(file);
          assertEquals("didn't get same CID after embedding same file twice", testCid, returnedCid);
-     }	    
+     }
+    
+    public void testHtmlMailMimeLayout() throws Exception
+    {
+        assertCorrectContentType("contentTypeTest.gif", "image/gif");
+        assertCorrectContentType("contentTypeTest.jpg", "image/jpeg");
+        assertCorrectContentType("contentTypeTest.png", "image/png");
+    }
+
+    private void assertCorrectContentType(String picture, String contentType) throws Exception {
+        HtmlEmail htmlEmail = createDefaultHtmlEmail();
+        String cid = htmlEmail.embed(new File("./src/test/images/" + picture), "Apache Logo");
+        String htmlMsg = "<html><img src=\"cid:" + cid + "\"><html>";
+        htmlEmail.setHtmlMsg(htmlMsg);
+        htmlEmail.buildMimeMessage();
+
+        MimeMessage mm = htmlEmail.getMimeMessage();
+        mm.saveChanges();
+        MimeMessageParser mmp = new MimeMessageParser(mm);
+        mmp.parse();
+
+        List attachments = mmp.getAttachmentList();
+        assertEquals("Attachment size", 1, attachments.size());
+
+        DataSource ds = (DataSource) attachments.get(0);
+        assertEquals("Content type", contentType, ds.getContentType());
+    }
+
+    private HtmlEmail createDefaultHtmlEmail() throws EmailException {
+        HtmlEmail htmlEmail = new HtmlEmail();
+        htmlEmail.setHostName(this.strTestMailServer);
+        htmlEmail.setSmtpPort(this.getMailServerPort());
+        htmlEmail.setFrom("a@b.com");
+        htmlEmail.addTo("c@d.com");
+        return htmlEmail;
+    }
 }
