<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:54:13 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[EMAIL-142] HtmlEmail with both html and text provided has invalid content-type </title>
                <link>https://issues.apache.org/jira/browse/EMAIL-142</link>
                <project id="12310474" key="EMAIL">Commons Email</project>
                    <description>&lt;p&gt;If I set both html and plain text for HtmlEmail i.e.:&lt;/p&gt;

&lt;p&gt;email.setHtmlMsg(htmlMessage);&lt;br/&gt;
email.setTextMsg(plainTextMessage);&lt;/p&gt;

&lt;p&gt;then message which is sent has Content-type: multipart/mixed;&lt;br/&gt;
This content type is recognized for example by Mozilla Thunderbird as a message with attachment.&lt;/p&gt;

&lt;p&gt;Correct content-type for this kind of email is Content-type: multipart/alternative;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12730269">EMAIL-142</key>
            <summary>HtmlEmail with both html and text provided has invalid content-type </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="marcintomiak">Marcin Tomiak</reporter>
                        <labels>
                    </labels>
                <created>Mon, 28 Jul 2014 18:12:45 +0000</created>
                <updated>Sat, 23 May 2015 07:02:36 +0000</updated>
                            <resolved>Thu, 2 Oct 2014 20:07:25 +0000</resolved>
                                    <version>1.3.2</version>
                                    <fixVersion>1.4</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="900">0.25h</timeoriginalestimate>
                            <timeestimate seconds="900">0.25h</timeestimate>
                                        <comments>
                            <comment id="14153695" author="tn" created="Tue, 30 Sep 2014 20:19:04 +0000"  >&lt;p&gt;The root container for the mime message will always be created with content-type multipart/mixed, but in case text and html message has been provided a child container with type multipart/alternative will be added containing the 2 messages, see the example mail below:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Date: Tue, 30 Sep 2014 22:11:35 +0200 (CEST)
From: test_from@apache.org
To: test_to@apache.org
Message-ID: &amp;lt;21953712.11.1412107895751.JavaMail.tn@tn-laptop&amp;gt;
Subject: [email] 1.Test: text + html content
MIME-Version: 1.0
Content-Type: multipart/mixed;
        boundary=&lt;span class=&quot;code-quote&quot;&gt;&quot;----=_Part_9_12877540.1412107867547&quot;&lt;/span&gt;

------=_Part_9_12877540.1412107867547
Content-Type: multipart/alternative;
        boundary=&lt;span class=&quot;code-quote&quot;&gt;&quot;----=_Part_10_11984121.1412107895170&quot;&lt;/span&gt;

------=_Part_10_11984121.1412107895170
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit

Your email client does not support HTML messages
------=_Part_10_11984121.1412107895170
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: 7bit

&amp;lt;html&amp;gt;&amp;lt;b&amp;gt;This is a HTML message without any image&amp;lt;/b&amp;gt;&amp;lt;html&amp;gt;
------=_Part_10_11984121.1412107895170--

------=_Part_9_12877540.1412107867547--
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If I open this message with thunderbird, it correctly displays the HTML message.&lt;/p&gt;</comment>
                            <comment id="14153708" author="marcintomiak" created="Tue, 30 Sep 2014 20:25:47 +0000"  >&lt;p&gt;Try to download this email via IMAP. &lt;/p&gt;

&lt;p&gt;As long as you don&apos;t click on the message in inbox (and thus read it), Mozilla Thunderbird will show attachment icon (because it read from header that this is multipart/mixed).&lt;/p&gt;

&lt;p&gt;Please refer to: &lt;a href=&quot;http://tools.ietf.org/html/rfc2046#section-5.1.4&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://tools.ietf.org/html/rfc2046#section-5.1.4&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;If the message has alternative representations of the message, and there is no attachment, then main content-type should be multipart/alternative (not multipart/mixed).&lt;/p&gt;</comment>
                            <comment id="14153731" author="tn" created="Tue, 30 Sep 2014 20:48:06 +0000"  >&lt;p&gt;I did check their rfc reference and your statement is correct, I was just wondering if modern email clients would still handle the message correctly.&lt;/p&gt;

&lt;p&gt;Fixing this would not require much changes, as we only need to check if there are other attachments and if not use the root mime container with type alternative to add the text and html message part.&lt;/p&gt;</comment>
                            <comment id="14157084" author="tn" created="Thu, 2 Oct 2014 20:07:25 +0000"  >&lt;p&gt;Fixed in r1629061.&lt;/p&gt;

&lt;p&gt;Thanks for the report!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>408342</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 7 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1y9hz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>408346</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>