<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:54:08 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[EMAIL-125] DataSourceClassPathResolver on ImageHtmlEmail with multiple image in template don&apos;t work</title>
                <link>https://issues.apache.org/jira/browse/EMAIL-125</link>
                <project id="12310474" key="EMAIL">Commons Email</project>
                    <description>&lt;p&gt;I&apos;m having a html template for sending with 3 images.&lt;br/&gt;
If I resolve the images using DataSourceClassPathResolve, only the first is replaced. The 2 others have same cid and thus are replaced by the first.&lt;br/&gt;
Using others DataSource resolver leads to the good result.&lt;/p&gt;

&lt;p&gt;Here is more details :&lt;br/&gt;
The template : &amp;lt;p&amp;gt;Une image en relatif &amp;lt;img src=&quot;testu/info.png&quot;/&amp;gt;&amp;lt;/p&amp;gt;&amp;lt;p&amp;gt;Une image en relatif &amp;lt;img src=&quot;testu/warning.png&quot;/&amp;gt;&amp;lt;/p&amp;gt;&amp;lt;p&amp;gt;Une image en relatif &amp;lt;img src=&quot;testu/error.png&quot;/&amp;gt;&amp;lt;/p&amp;gt;&lt;/p&gt;

&lt;p&gt;The code :&lt;br/&gt;
ImageHtmlEmail email = new ImageHtmlEmail();&lt;br/&gt;
email.setDataSourceResolver(new DataSourceClassPathResolver(&quot;/images/&quot;, true));&lt;br/&gt;
email.setHostName(...);&lt;br/&gt;
email.setCharset(&quot;utf-8&quot;);&lt;br/&gt;
email.addTo(...);&lt;br/&gt;
email.setFrom(...);&lt;br/&gt;
email.setSubject(...);&lt;br/&gt;
email.setHtmlMsg(corps /* ie the template above */);&lt;br/&gt;
email.setTextMsg(&quot;Your email client does not support HTML messages&quot;);&lt;br/&gt;
email.send();&lt;/p&gt;

&lt;p&gt;The result (source of the received mail) :&lt;br/&gt;
&amp;lt;p&amp;gt;Une image en relatif &amp;lt;img src=&quot;cid:afgsltqedp&quot;/&amp;gt;&amp;lt;/p&amp;gt;&amp;lt;p&amp;gt;Une image en relatif &amp;lt;img src=&quot;cid:afgsltqedp&quot;/&amp;gt;&amp;lt;/p&amp;gt;&amp;lt;p&amp;gt;Une image en relatif &amp;lt;img src=&quot;cid:afgsltqedp&quot;/&amp;gt;&amp;lt;/p&amp;gt;&lt;/p&gt;

&lt;p&gt;You will notice that all cid are the same. The lenient flag is true so I&apos;m sure that all images are present on classpath.&lt;/p&gt;
</description>
                <environment>&lt;p&gt;Windows7, Jdk 1.7&lt;/p&gt;</environment>
        <key id="12633574">EMAIL-125</key>
            <summary>DataSourceClassPathResolver on ImageHtmlEmail with multiple image in template don&apos;t work</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jmcollin92">Jean-Marc</reporter>
                        <labels>
                            <label>DataSourceClassPathResolver</label>
                            <label>ImageHtmlEmail</label>
                    </labels>
                <created>Fri, 22 Feb 2013 08:59:46 +0000</created>
                <updated>Mon, 4 Mar 2013 19:00:19 +0000</updated>
                            <resolved>Fri, 22 Feb 2013 10:42:14 +0000</resolved>
                                    <version>1.3</version>
                                    <fixVersion>1.3.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="10800">3h</timeoriginalestimate>
                            <timeestimate seconds="10800">3h</timeestimate>
                                        <comments>
                            <comment id="13584169" author="tn" created="Fri, 22 Feb 2013 10:42:14 +0000"  >&lt;p&gt;Fixed in r1448981.&lt;/p&gt;

&lt;p&gt;The problem existed because the DataSourceClassPathResolver created special DataSources that did not have a name set.&lt;/p&gt;

&lt;p&gt;The result was that each resource loaded by this resolver had the same name, and thus the cids where all equal.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>314069</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 39 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1i74n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>314414</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>