<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:54:14 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[EMAIL-149] EmailConstants.MAIL_SMTP_FROM value is incorrect</title>
                <link>https://issues.apache.org/jira/browse/EMAIL-149</link>
                <project id="12310474" key="EMAIL">Commons Email</project>
                    <description>&lt;p&gt;Per the JavaMail Javadoc (&lt;a href=&quot;https://javamail.java.net/nonav/docs/api/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://javamail.java.net/nonav/docs/api/&lt;/a&gt;), the standard property for the from address is &quot;mail.from&quot;, not &quot;mail.smtp.from&quot;.&lt;/p&gt;

&lt;p&gt;This incorrect value causes sending emails to fail if using a Session provided by an EE container that properly sets the from address. Observed on WildFly 8.2.0.Final.&lt;/p&gt;

&lt;p&gt;Workaround: add the &quot;mail.smtp.from&quot; value to the session properties. You don&apos;t need to set the actual value, the fact that it&apos;s there is enough:&lt;/p&gt;

&lt;p&gt;session.getProperties().setProperty(EmailConstants.MAIL_SMTP_FROM, &quot;&quot;);&lt;/p&gt;</description>
                <environment></environment>
        <key id="12768169">EMAIL-149</key>
            <summary>EmailConstants.MAIL_SMTP_FROM value is incorrect</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="rcd">Richard DiCroce</reporter>
                        <labels>
                    </labels>
                <created>Sat, 17 Jan 2015 00:46:16 +0000</created>
                <updated>Sat, 23 May 2015 07:02:36 +0000</updated>
                            <resolved>Tue, 10 Mar 2015 21:12:25 +0000</resolved>
                                    <version>1.3.3</version>
                                    <fixVersion>1.4</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14347655" author="tn" created="Wed, 4 Mar 2015 22:09:56 +0000"  >&lt;p&gt;The mail.smtp.from property defines the bounce address and is only set when one is defined.&lt;/p&gt;

&lt;p&gt;What do you mean with &quot;by an EE container that properly sets the from address&quot;?&lt;/p&gt;

&lt;p&gt;Edit: did you test with debug enabled and can you provide the output of it?&lt;/p&gt;</comment>
                            <comment id="14347764" author="rcd" created="Wed, 4 Mar 2015 23:22:03 +0000"  >&lt;p&gt;It&apos;s been a while since I filed this so I might not have all the details straight anymore. I don&apos;t have any debug output but the problem isn&apos;t hard to understand.&lt;/p&gt;

&lt;p&gt;I configure a mail Session in WildFly, including the &quot;from&quot; attribute in WildFly&apos;s configuration. WildFly creates the mail Session and binds it in JNDI. When creating the Session, WildFly notices the from attribute and sets the value of &quot;mail.from&quot; in the Session, which is the correct attribute to use according to the JavaMail Javadoc. I obtain the Session from JNDI and provide it to the Email object. The idea here is that all of the necessary configuration should have occurred when WildFly created the Session, so I should not need to call Email#setFrom().&lt;/p&gt;

&lt;p&gt;But when I try to send the Email, I get an exception saying &quot;From address required&quot;. This occurs because of the checks in Email#buildMimeMessage() at lines 1315 to 1325. It first checks if the fromAddress field in the Email itself is set. It isn&apos;t because I shouldn&apos;t need to set it, as WildFly has already set the property in the session. Because fromAddress is null, the code then checks whether the &quot;mail.smtp.from&quot; property is set in the session. It isn&apos;t set because that is a non-standard property. And so an exception is thrown and the message is not sent.&lt;/p&gt;

&lt;p&gt;It looks to me like &quot;mail.from&quot; and &quot;mail.smtp.from&quot; are trying to do the same thing, hence why I said the value of the MAIL_SMTP_FROM constant is incorrect. If they&apos;re not doing the same thing, then the code should at least be adjusted to check &quot;mail.from&quot; in addition to &quot;mail.smtp.from&quot; before throwing an exception.&lt;/p&gt;</comment>
                            <comment id="14348247" author="tn" created="Thu, 5 Mar 2015 06:34:15 +0000"  >&lt;p&gt;ok now it is clear, the case that you outlined should be handled correctly.&lt;/p&gt;</comment>
                            <comment id="14355730" author="tn" created="Tue, 10 Mar 2015 21:12:25 +0000"  >&lt;p&gt;Fixed in r1665699.&lt;/p&gt;

&lt;p&gt;Thanks for the report!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 36 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i24hcv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>