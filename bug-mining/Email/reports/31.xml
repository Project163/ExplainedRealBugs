<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 17:54:07 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[EMAIL-124] Header values are folded twice and thus creating defective emails</title>
                <link>https://issues.apache.org/jira/browse/EMAIL-124</link>
                <project id="12310474" key="EMAIL">Commons Email</project>
                    <description>&lt;p&gt;With &lt;a href=&quot;https://issues.apache.org/jira/browse/EMAIL-98&quot; title=&quot;Encoding and folding of headers should not be left to the user&quot; class=&quot;issue-link&quot; data-issue-key=&quot;EMAIL-98&quot;&gt;&lt;del&gt;EMAIL-98&lt;/del&gt;&lt;/a&gt;, header values now are folded by commons-email.&lt;/p&gt;

&lt;p&gt;Unfortunately, they are folded twice: once in &quot;Mail.addHeader&quot; or &quot;Mail.setHeaders&quot;, and once again in &quot;Mail.buildMimeMessage()&quot; while iterating over the headers.&lt;/p&gt;

&lt;p&gt;This results (in our test cases) in corrupted mail header lines having additional blank lines between the first and second line of a folded value - and thus ends in corrupted mails (as all headers after the first blank line are threatened as mail-body-content).&lt;/p&gt;

&lt;p&gt;As this renders &quot;additional headers&quot; useless in commons-mail and corrupts every mail having additionl headers with longer-than-folding-size values, i set the priority to blocker.&lt;/p&gt;

&lt;p&gt;The fix seems to be easy: just fold either in addHeader and setHeaders, or in buildMimeMessage (but not in both).&lt;/p&gt;

&lt;p&gt;My preferred solution would be to fold in buildMimeMessage, and to store the values &quot;as-is&quot; in addHeader and setHeaders so one is able to work with the plain values (if neccessary) until the mail is actually build and send.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12633374">EMAIL-124</key>
            <summary>Header values are folded twice and thus creating defective emails</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="schueffi">Stefan Schueffler</reporter>
                        <labels>
                    </labels>
                <created>Thu, 21 Feb 2013 10:44:42 +0000</created>
                <updated>Mon, 4 Mar 2013 19:00:18 +0000</updated>
                            <resolved>Thu, 21 Feb 2013 12:04:41 +0000</resolved>
                                    <version>1.3</version>
                                    <fixVersion>1.3.1</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="300">5m</timeoriginalestimate>
                            <timeestimate seconds="300">5m</timeestimate>
                                        <comments>
                            <comment id="13583137" author="tn" created="Thu, 21 Feb 2013 12:04:41 +0000"  >&lt;p&gt;Fixed in r1448617.&lt;/p&gt;

&lt;p&gt;Thanks for the report and analysis, we will try to push a 1.3.1 bugfix release for it.&lt;/p&gt;</comment>
                            <comment id="13583287" author="tn" created="Thu, 21 Feb 2013 15:38:30 +0000"  >&lt;p&gt;Can you check with the latest trunk version if the problem is solved for you?&lt;br/&gt;
I will then start a release tomorrow.&lt;/p&gt;

&lt;p&gt;Thanks,&lt;/p&gt;

&lt;p&gt;Thomas&lt;/p&gt;</comment>
                            <comment id="13587310" author="schueffi" created="Tue, 26 Feb 2013 17:50:17 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;due to my vacational out of office, i unfortunately can not test your commit. But as far as i can tell from reading your commit mentioned above, your fix looks exactly the same what i did while analyzing this issue.&lt;/p&gt;

&lt;p&gt;Regards,&lt;/p&gt;

&lt;p&gt;Stefan&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>313870</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 38 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1i5wf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>314215</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>