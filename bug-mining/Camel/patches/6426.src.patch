diff --git a/dsl/camel-kamelet-main/src/main/java/org/apache/camel/main/download/MavenDependencyDownloader.java b/dsl/camel-kamelet-main/src/main/java/org/apache/camel/main/download/MavenDependencyDownloader.java
index 0b2be581ba6..ac78c5b063d 100644
--- a/dsl/camel-kamelet-main/src/main/java/org/apache/camel/main/download/MavenDependencyDownloader.java
+++ b/dsl/camel-kamelet-main/src/main/java/org/apache/camel/main/download/MavenDependencyDownloader.java
@@ -221,9 +221,11 @@ public class MavenDependencyDownloader extends ServiceSupport implements Depende
             // to the ones detected from ~/.m2/settings.xml and configured in
             // org.apache.camel.main.download.MavenDependencyDownloader#repos
             Set<String> extraRepositories = new LinkedHashSet<>(resolveExtraRepositories(extraRepos));
-            // and from known extra repositories (if any)
-            String known = knownReposResolver.getRepo(artifactId);
-            extraRepositories.addAll(resolveExtraRepositories(known));
+            if (knownReposResolver != null) {
+                // and from known extra repositories (if any)
+                String known = knownReposResolver.getRepo(artifactId);
+                extraRepositories.addAll(resolveExtraRepositories(known));
+            }
 
             List<MavenArtifact> artifacts = resolveDependenciesViaAether(deps, extraRepositories,
                     transitively, useApacheSnaphots);
