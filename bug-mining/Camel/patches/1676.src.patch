diff --git a/camel-core/src/main/java/org/apache/camel/util/URISupport.java b/camel-core/src/main/java/org/apache/camel/util/URISupport.java
index 5e89385e5a8..921d062eac1 100644
--- a/camel-core/src/main/java/org/apache/camel/util/URISupport.java
+++ b/camel-core/src/main/java/org/apache/camel/util/URISupport.java
@@ -152,7 +152,7 @@ public final class URISupport {
         if (query != null) {
             s = s + "?" + query;
         }
-        if (uri.getFragment() != null) {
+        if ((!s.contains("#")) && (uri.getFragment() != null)) {
             s = s + "#" + uri.getFragment();
         }
 
diff --git a/camel-core/src/test/java/org/apache/camel/util/URISupportTest.java b/camel-core/src/test/java/org/apache/camel/util/URISupportTest.java
index d7608379063..c3ea7b1a817 100644
--- a/camel-core/src/test/java/org/apache/camel/util/URISupportTest.java
+++ b/camel-core/src/test/java/org/apache/camel/util/URISupportTest.java
@@ -106,6 +106,13 @@ public class URISupportTest extends ContextTestSupport {
         assertEquals("http://camel.apache.org?foo=123", s);
     }
 
+    public void testCreateURIWithQueryHasOneFragment() throws Exception {
+        URI uri = new URI("smtp://localhost#fragmentOne");
+        URI resultUri = URISupport.createURIWithQuery(uri, null);
+        assertNotNull(resultUri);
+        assertEquals("smtp://localhost#fragmentOne", resultUri.toString());
+    }
+
     public void testNormalizeEndpointWithEqualSignInParameter() throws Exception {
         String out = URISupport.normalizeUri("jms:queue:foo?selector=somekey='somevalue'&foo=bar");
         assertNotNull(out);
