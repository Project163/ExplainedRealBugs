diff --git a/core/camel-core-engine/src/main/java/org/apache/camel/impl/DefaultCamelContext.java b/core/camel-core-engine/src/main/java/org/apache/camel/impl/DefaultCamelContext.java
index 69cd55b57be..5b88933ef34 100644
--- a/core/camel-core-engine/src/main/java/org/apache/camel/impl/DefaultCamelContext.java
+++ b/core/camel-core-engine/src/main/java/org/apache/camel/impl/DefaultCamelContext.java
@@ -305,6 +305,9 @@ public class DefaultCamelContext extends SimpleCamelContext implements ModelCame
 
     @Override
     public List<RouteConfigurationDefinition> getRouteConfigurationDefinitions() {
+        if (model == null && isLightweight()) {
+            throw new IllegalStateException("Access to model not supported in lightweight mode");
+        }
         return model.getRouteConfigurationDefinitions();
     }
 
diff --git a/core/camel-main/src/main/java/org/apache/camel/main/MainBootstrapCloseable.java b/core/camel-main/src/main/java/org/apache/camel/main/MainBootstrapCloseable.java
index b73b6821e56..a5146dd5dfd 100644
--- a/core/camel-main/src/main/java/org/apache/camel/main/MainBootstrapCloseable.java
+++ b/core/camel-main/src/main/java/org/apache/camel/main/MainBootstrapCloseable.java
@@ -16,6 +16,7 @@
  */
 package org.apache.camel.main;
 
+import org.apache.camel.ExtendedCamelContext;
 import org.apache.camel.spi.BootstrapCloseable;
 
 public class MainBootstrapCloseable implements BootstrapCloseable {
@@ -28,21 +29,28 @@ public class MainBootstrapCloseable implements BootstrapCloseable {
 
     @Override
     public void close() {
-        // we are now bootstrapped and can clear up memory
-        if (main.initialProperties != null) {
-            main.initialProperties.clear();
-            main.initialProperties = null;
+        // in lightweight mode then clear up memory after bootstrap
+        boolean lightweight = true;
+        if (main.getCamelContext() != null) {
+            lightweight = main.getCamelContext().adapt(ExtendedCamelContext.class).isLightweight();
         }
-        if (main.overrideProperties != null) {
-            main.overrideProperties.clear();
-            main.overrideProperties = null;
-        }
-        main.wildcardProperties.clear();
-        main.wildcardProperties = null;
 
-        // no longer in use
-        main.mainConfigurationProperties.close();
-        main.mainConfigurationProperties = null;
-        main.routesCollector = null;
+        if (lightweight) {
+            if (main.initialProperties != null) {
+                main.initialProperties.clear();
+                main.initialProperties = null;
+            }
+            if (main.overrideProperties != null) {
+                main.overrideProperties.clear();
+                main.overrideProperties = null;
+            }
+            main.wildcardProperties.clear();
+            main.wildcardProperties = null;
+
+            // no longer in use
+            main.mainConfigurationProperties.close();
+            main.mainConfigurationProperties = null;
+            main.routesCollector = null;
+        }
     }
 }
diff --git a/core/camel-main/src/test/java/org/apache/camel/main/MainAddDynamicRouteTest.java b/core/camel-main/src/test/java/org/apache/camel/main/MainAddDynamicRouteTest.java
new file mode 100644
index 00000000000..bb61bfa4d49
--- /dev/null
+++ b/core/camel-main/src/test/java/org/apache/camel/main/MainAddDynamicRouteTest.java
@@ -0,0 +1,61 @@
+/*
+ * Licensed to the Apache Software Foundation (ASF) under one or more
+ * contributor license agreements.  See the NOTICE file distributed with
+ * this work for additional information regarding copyright ownership.
+ * The ASF licenses this file to You under the Apache License, Version 2.0
+ * (the "License"); you may not use this file except in compliance with
+ * the License.  You may obtain a copy of the License at
+ *
+ *      http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+package org.apache.camel.main;
+
+import java.util.ArrayList;
+import java.util.List;
+
+import org.apache.camel.BindToRegistry;
+import org.apache.camel.builder.RouteBuilder;
+import org.junit.jupiter.api.Assertions;
+import org.junit.jupiter.api.Test;
+
+public class MainAddDynamicRouteTest {
+
+    @BindToRegistry("lines")
+    private final List<String> lines = new ArrayList<>();
+
+    @Test
+    public void addDynamicRoute() throws Exception {
+        final Main main = new Main();
+        main.addInitialProperty("prop", "value");
+        main.configure().setDurationMaxMessages(2);
+
+        try (MainConfigurationProperties conf = main.configure()) {
+            conf.addRoutesBuilder(new RouteBuilder() {
+                @Override
+                public void configure() throws Exception {
+                    from("timer:one?repeatCount=1")
+                            .setBody().simple("{{prop}}").bean(lines, "add")
+                            .process(e -> e.getContext().addRoutes(new RouteBuilder() {
+                                @Override
+                                public void configure() throws Exception {
+                                    from("timer:two?repeatCount=1")
+                                            .setBody().simple("{{prop}}").bean(lines, "add");
+                                }
+                            }));
+                }
+            });
+
+            main.run();
+
+            Assertions.assertEquals(2, lines.size());
+            Assertions.assertEquals("value", lines.get(0));
+            Assertions.assertEquals("value", lines.get(1));
+        }
+    }
+}
