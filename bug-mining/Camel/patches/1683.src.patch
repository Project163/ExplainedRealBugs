diff --git a/camel-core/src/main/java/org/apache/camel/support/TokenPairExpressionIterator.java b/camel-core/src/main/java/org/apache/camel/support/TokenPairExpressionIterator.java
index 60750c70d08..9e87e2a8514 100644
--- a/camel-core/src/main/java/org/apache/camel/support/TokenPairExpressionIterator.java
+++ b/camel-core/src/main/java/org/apache/camel/support/TokenPairExpressionIterator.java
@@ -24,6 +24,7 @@ import java.util.Scanner;
 
 import org.apache.camel.Exchange;
 import org.apache.camel.InvalidPayloadException;
+import org.apache.camel.Predicate;
 import org.apache.camel.util.IOHelper;
 import org.apache.camel.util.ObjectHelper;
 
@@ -50,16 +51,43 @@ public class TokenPairExpressionIterator extends ExpressionAdapter {
         this.includeTokens = includeTokens;
     }
 
+    @Override
+    public boolean matches(Exchange exchange) {
+        // as a predicate we must close the stream, as we do not return an iterator that can be used
+        // afterwards to iterate the input stream
+        Object value = doEvaluate(exchange, true);
+        return ObjectHelper.evaluateValuePredicate(value);
+    }
+
     @Override
     public Object evaluate(Exchange exchange) {
+        // as we return an iterator to access the input stream, we should not close it
+        return doEvaluate(exchange, false);
+    }
+
+    /**
+     * Strategy to evaluate the exchange
+     *
+     * @param exchange   the exchange
+     * @param closeStream whether to close the stream before returning from this method.
+     * @return the evaluated value
+     */
+    protected Object doEvaluate(Exchange exchange, boolean closeStream) {
+        InputStream in = null;
         try {
-            InputStream in = exchange.getIn().getMandatoryBody(InputStream.class);
+            in = exchange.getIn().getMandatoryBody(InputStream.class);
             // we may read from a file, and want to support custom charset defined on the exchange
             String charset = IOHelper.getCharsetName(exchange);
             return createIterator(in, charset);
         } catch (InvalidPayloadException e) {
             exchange.setException(e);
+            // must close input stream
+            IOHelper.close(in);
             return null;
+        } finally {
+            if (closeStream) {
+                IOHelper.close(in);
+            }
         }
     }
 
diff --git a/camel-core/src/test/java/org/apache/camel/component/file/FileConsumerSuspendAndResumeTest.java b/camel-core/src/test/java/org/apache/camel/component/file/FileConsumerSuspendAndResumeTest.java
index 2f73a1fee9a..79cac1df8ba 100644
--- a/camel-core/src/test/java/org/apache/camel/component/file/FileConsumerSuspendAndResumeTest.java
+++ b/camel-core/src/test/java/org/apache/camel/component/file/FileConsumerSuspendAndResumeTest.java
@@ -48,7 +48,7 @@ public class FileConsumerSuspendAndResumeTest extends ContextTestSupport {
 
         assertMockEndpointsSatisfied();
 
-        Thread.sleep(100);
+        Thread.sleep(250);
 
         // the route is suspended by the policy so we should only receive one
         String[] files = new File("target/suspended/").getAbsoluteFile().list();
diff --git a/camel-core/src/test/java/org/apache/camel/component/file/NewFileConsumerTest.java b/camel-core/src/test/java/org/apache/camel/component/file/NewFileConsumerTest.java
index fa1290614c2..ce9fa9e0591 100644
--- a/camel-core/src/test/java/org/apache/camel/component/file/NewFileConsumerTest.java
+++ b/camel-core/src/test/java/org/apache/camel/component/file/NewFileConsumerTest.java
@@ -44,6 +44,8 @@ public class NewFileConsumerTest extends ContextTestSupport {
         assertMockEndpointsSatisfied();
         oneExchangeDone.matchesMockWaitTime();
 
+        Thread.sleep(250);
+
         assertTrue("Should have invoked postPollCheck", myFile.isPost());
     }
 
diff --git a/camel-core/src/test/java/org/apache/camel/processor/aggregator/AggregateProcessorTest.java b/camel-core/src/test/java/org/apache/camel/processor/aggregator/AggregateProcessorTest.java
index 6fc3ed1cc39..4d240cb6f87 100644
--- a/camel-core/src/test/java/org/apache/camel/processor/aggregator/AggregateProcessorTest.java
+++ b/camel-core/src/test/java/org/apache/camel/processor/aggregator/AggregateProcessorTest.java
@@ -280,52 +280,6 @@ public class AggregateProcessorTest extends ContextTestSupport {
         ap.stop();
     }
     
-    public void testAggregateInitialCompletionInterval() throws Exception {
-        // camel context must be started
-        context.start();
-
-        MockEndpoint mock = getMockEndpoint("mock:result");
-        mock.expectedBodiesReceived("A+B", "C+D");
-        mock.expectedPropertyReceived(Exchange.AGGREGATED_COMPLETED_BY, "interval");
-
-        Processor done = new SendProcessor(context.getEndpoint("mock:result"));
-        Expression corr = header("id");
-        AggregationStrategy as = new BodyInAggregatingStrategy();
-
-        AggregateProcessor ap = new AggregateProcessor(context, done, corr, as, executorService);
-        ap.setCompletionInterval(2000);
-        ap.start();
-
-        Exchange e1 = new DefaultExchange(context);
-        e1.getIn().setBody("A");
-        e1.getIn().setHeader("id", 123);
-
-        Exchange e2 = new DefaultExchange(context);
-        e2.getIn().setBody("B");
-        e2.getIn().setHeader("id", 123);
-
-        Exchange e3 = new DefaultExchange(context);
-        e3.getIn().setBody("C");
-        e3.getIn().setHeader("id", 123);
-
-        Exchange e4 = new DefaultExchange(context);
-        e4.getIn().setBody("D");
-        e4.getIn().setHeader("id", 123);
-
-        ap.process(e1);
-        
-        Thread.sleep(1500L);
-        ap.process(e2);
-        
-        Thread.sleep(500L);
-        ap.process(e3);
-        ap.process(e4);
-
-        assertMockEndpointsSatisfied();
-
-        ap.stop();
-    }
-
     public void testAggregateIgnoreInvalidCorrelationKey() throws Exception {
         MockEndpoint mock = getMockEndpoint("mock:result");
         mock.expectedBodiesReceived("A+C+END");
