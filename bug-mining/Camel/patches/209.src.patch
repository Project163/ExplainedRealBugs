diff --git a/apache-camel/bundle/pom.xml b/apache-camel/bundle/pom.xml
index b86431bbb9c..0bedb1e9e9e 100644
--- a/apache-camel/bundle/pom.xml
+++ b/apache-camel/bundle/pom.xml
@@ -232,21 +232,7 @@
       <groupId>org.apache.camel</groupId>
       <artifactId>camel-xstream</artifactId>
     </dependency>
-
-    <dependency>
-      <groupId>org.apache.camel</groupId>
-      <artifactId>camel-core</artifactId>
-      <type>test-jar</type>
-      <version>${project.version}</version>
-    </dependency>
-
-    <dependency>
-      <groupId>org.apache.camel</groupId>
-      <artifactId>camel-spring</artifactId>
-      <type>test-jar</type>
-      <version>${project.version}</version>
-    </dependency>
-
+        
   </dependencies>
 
   <build>
@@ -285,31 +271,17 @@
               <goal>shade</goal>
             </goals>
             <configuration>
+              <artifactSet>
+                <excludes>
+                  <exclude>org.apache.camel:camel-bundle</exclude>
+                  <exclude>org.apache.camel:camel-core:test-jar:tests</exclude>                  
+                </excludes>
+              </artifactSet> 
               <shadedGroupFilter>org.apache.camel</shadedGroupFilter>
               <shadedArtifactAttached>false</shadedArtifactAttached>
               <createSourcesJar>${createSourcesJar}</createSourcesJar>
               <promoteTransitiveDependencies>true</promoteTransitiveDependencies>
               <createDependencyReducedPom>true</createDependencyReducedPom>
-              <filters>
-                <filter>
-                  <artifact>org.apache.camel:camel-bundle</artifact>
-                  <excludes>
-                    <exclude>org/apache/camel/**</exclude>
-                  </excludes>
-                </filter>
-                <filter>
-                  <artifact>org.apache.camel:camel-core:test</artifact>
-                  <excludes>
-                    <exclude>org/apache/camel/**</exclude>
-                  </excludes>
-                </filter>
-                <filter>
-                  <artifact>org.apache.camel:camel-spring:test</artifact>
-                  <excludes>
-                    <exclude>org/apache/camel/spring/**</exclude>
-                  </excludes>
-                </filter>
-              </filters>
               <transformers>
                 <transformer implementation="org.apache.maven.plugins.shade.resource.AppendingTransformer">
                   <resource>META-INF/spring.handlers</resource>
diff --git a/apache-camel/pom.xml b/apache-camel/pom.xml
index a637f14b921..3d254d100b0 100644
--- a/apache-camel/pom.xml
+++ b/apache-camel/pom.xml
@@ -279,15 +279,7 @@
           <artifactId>camel-manual</artifactId>
         </dependency>
     -->
-
-    <dependency>
-      <groupId>org.apache.camel</groupId>
-      <artifactId>camel-core</artifactId>
-      <type>test-jar</type>
-      <version>${project.version}</version>
-      <optional>true</optional>
-    </dependency>
-
+    
     <dependency>
       <groupId>commons-logging</groupId>
       <artifactId>commons-logging-api</artifactId>
@@ -299,6 +291,12 @@
       <artifactId>geronimo-jms_1.1_spec</artifactId>
     </dependency>
 
+    <dependency>
+      <groupId>org.apache.felix</groupId>
+      <artifactId>org.osgi.core</artifactId>
+      <optional>true</optional>      
+    </dependency>
+
     <dependency>
       <groupId>org.apache.activemq</groupId>
       <artifactId>activemq-core</artifactId>
diff --git a/examples/camel-example-loan-broker/src/main/java/org/apache/camel/loanbroker/queue/version/LoanBroker.java b/examples/camel-example-loan-broker/src/main/java/org/apache/camel/loanbroker/queue/version/LoanBroker.java
index e51d0223e64..a0771e56034 100644
--- a/examples/camel-example-loan-broker/src/main/java/org/apache/camel/loanbroker/queue/version/LoanBroker.java
+++ b/examples/camel-example-loan-broker/src/main/java/org/apache/camel/loanbroker/queue/version/LoanBroker.java
@@ -85,13 +85,13 @@ public class LoanBroker extends RouteBuilder {
         from("test-jms:queue:creditResponseQueue").multicast().to("test-jms:queue:bank1", "test-jms:queue:bank2", "test-jms:queue:bank3");
 
         // Each bank processor will process the message and put the response message into the bankReplyQueue
-        from("test-jms:queue:bank1").process(new Bank("bank1")).to("direct:queue:bankReplyQueue");
-        from("test-jms:queue:bank2").process(new Bank("bank2")).to("direct:queue:bankReplyQueue");
-        from("test-jms:queue:bank3").process(new Bank("bank3")).to("direct:queue:bankReplyQueue");
+        from("test-jms:queue:bank1").process(new Bank("bank1")).to("test-jms:queue:bankReplyQueue");
+        from("test-jms:queue:bank2").process(new Bank("bank2")).to("test-jms:queue:bankReplyQueue");
+        from("test-jms:queue:bank3").process(new Bank("bank3")).to("test-jms:queue:bankReplyQueue");
 
         // Now we aggregating the response message by using the Constants.PROPERTY_SSN header
         // The aggregation will completed when all the three bank responses are received
-        from("direct:queue:bankReplyQueue")
+        from("test-jms:queue:bankReplyQueue")
             .aggregator(header(Constants.PROPERTY_SSN), new BankResponseAggregationStrategy())
             .completedPredicate(header("aggregated").isEqualTo(3))
 
