diff --git a/camel-core/src/main/java/org/apache/camel/main/MainSupport.java b/camel-core/src/main/java/org/apache/camel/main/MainSupport.java
index ab403d94cdb..eb151ec164c 100644
--- a/camel-core/src/main/java/org/apache/camel/main/MainSupport.java
+++ b/camel-core/src/main/java/org/apache/camel/main/MainSupport.java
@@ -308,9 +308,6 @@ public abstract class MainSupport extends ServiceSupport {
 
     public void enableTrace() {
         this.trace = true;
-        for (CamelContext context : camelContexts) {
-            context.setTracing(true);
-        }
     }
 
     protected void doStop() throws Exception {
@@ -419,6 +416,9 @@ public abstract class MainSupport extends ServiceSupport {
     }
 
     protected void postProcessCamelContext(CamelContext camelContext) throws Exception {
+        if (trace) {
+            camelContext.setTracing(true);
+        }
         // try to load the route builders from the routeBuilderClasses
         loadRouteBuilders(camelContext);
         for (RouteBuilder routeBuilder : routeBuilders) {
diff --git a/camel-core/src/test/java/org/apache/camel/main/MainTest.java b/camel-core/src/test/java/org/apache/camel/main/MainTest.java
index 0acfd53b3b7..132c5dc1419 100644
--- a/camel-core/src/test/java/org/apache/camel/main/MainTest.java
+++ b/camel-core/src/test/java/org/apache/camel/main/MainTest.java
@@ -19,11 +19,9 @@ package org.apache.camel.main;
 import java.util.List;
 
 import junit.framework.TestCase;
-
 import org.apache.camel.CamelContext;
 import org.apache.camel.builder.RouteBuilder;
 import org.apache.camel.component.mock.MockEndpoint;
-import org.apache.camel.impl.DefaultCamelContext;
 
 /**
  * @version 
@@ -34,19 +32,21 @@ public class MainTest extends TestCase {
         // lets make a simple route
         Main main = new Main();
         main.addRouteBuilder(new MyRouteBuilder());
+        main.enableTrace();
         main.bind("foo", new Integer(31));
         main.start();
 
-        main.getCamelTemplate().sendBody("direct:start", "<message>1</message>");
-        
         List<CamelContext> contextList = main.getCamelContexts();
         assertNotNull(contextList);
         assertEquals("Did not get the expected count of Camel contexts", 1, contextList.size());
         CamelContext camelContext = contextList.get(0);
-        assertEquals("Could not find the registry bound object", 31, ((DefaultCamelContext) camelContext).getRegistry().lookupByName("foo"));
+        assertEquals("Could not find the registry bound object", 31, camelContext.getRegistry().lookupByName("foo"));
 
         MockEndpoint endpoint = camelContext.getEndpoint("mock:results", MockEndpoint.class);
         endpoint.expectedMinimumMessageCount(1);
+
+        main.getCamelTemplate().sendBody("direct:start", "<message>1</message>");
+
         endpoint.assertIsSatisfied();
 
         main.stop();
@@ -57,9 +57,7 @@ public class MainTest extends TestCase {
         // let the main load the MyRouteBuilder
         main.parseArguments(new String[]{"-r", "org.apache.camel.main.MainTest$MyRouteBuilder"});
         main.start();
-        
-        main.getCamelTemplate().sendBody("direct:start", "<message>1</message>");
-        
+
         List<CamelContext> contextList = main.getCamelContexts();
         assertNotNull(contextList);
         assertEquals("Did not get the expected count of Camel contexts", 1, contextList.size());
@@ -67,6 +65,9 @@ public class MainTest extends TestCase {
         
         MockEndpoint endpoint = camelContext.getEndpoint("mock:results", MockEndpoint.class);
         endpoint.expectedMinimumMessageCount(1);
+
+        main.getCamelTemplate().sendBody("direct:start", "<message>1</message>");
+
         endpoint.assertIsSatisfied();
         main.stop();
     }
