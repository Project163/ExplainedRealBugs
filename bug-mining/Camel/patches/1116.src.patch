diff --git a/camel-core/src/main/java/org/apache/camel/FailedToCreateConsumerException.java b/camel-core/src/main/java/org/apache/camel/FailedToCreateConsumerException.java
index 0048267ceb9..5884aa04806 100644
--- a/camel-core/src/main/java/org/apache/camel/FailedToCreateConsumerException.java
+++ b/camel-core/src/main/java/org/apache/camel/FailedToCreateConsumerException.java
@@ -31,6 +31,11 @@ public class FailedToCreateConsumerException extends RuntimeCamelException {
         this.uri = endpoint.getEndpointUri();
     }
 
+    public FailedToCreateConsumerException(Endpoint endpoint, String message) {
+        super("Failed to create Consumer for endpoint: " + endpoint + ". Reason: " + message);
+        this.uri = endpoint.getEndpointUri();
+    }
+
     public FailedToCreateConsumerException(Endpoint endpoint, String message, Throwable cause) {
         super("Failed to create Consumer for endpoint: " + endpoint + ". Reason: " + message, cause);
         this.uri = endpoint.getEndpointUri();
diff --git a/camel-core/src/main/java/org/apache/camel/impl/DefaultUnitOfWork.java b/camel-core/src/main/java/org/apache/camel/impl/DefaultUnitOfWork.java
index b68bded4d75..7d078803f25 100644
--- a/camel-core/src/main/java/org/apache/camel/impl/DefaultUnitOfWork.java
+++ b/camel-core/src/main/java/org/apache/camel/impl/DefaultUnitOfWork.java
@@ -54,6 +54,9 @@ public class DefaultUnitOfWork implements UnitOfWork, Service {
     private final Stack<RouteContext> routeContextStack = new Stack<RouteContext>();
 
     public DefaultUnitOfWork(Exchange exchange) {
+        if (LOG.isTraceEnabled()) {
+            LOG.trace("UnitOfWork created for ExchangeId: " + exchange.getExchangeId() + " with " + exchange);
+        }
         tracedRouteNodes = new DefaultTracedRouteNodes();
 
         // TODO: the copy on facade strategy will help us here in the future
@@ -132,7 +135,7 @@ public class DefaultUnitOfWork implements UnitOfWork, Service {
 
             if (handover) {
                 if (LOG.isTraceEnabled()) {
-                    LOG.trace("Handover synchronization " + synchronization + " to Exchange: " + target);
+                    LOG.trace("Handover synchronization " + synchronization + " to: " + target);
                 }
                 target.addOnCompletion(synchronization);
                 // remove it if its handed over
@@ -147,6 +150,10 @@ public class DefaultUnitOfWork implements UnitOfWork, Service {
 
     @SuppressWarnings("unchecked")
     public void done(Exchange exchange) {
+        if (LOG.isTraceEnabled()) {
+            LOG.trace("UnitOfWork done for ExchangeId: " + exchange.getExchangeId() + " with " + exchange);
+        }
+
         boolean failed = exchange.isFailed();
 
         // fire event to signal the exchange is done
@@ -170,8 +177,14 @@ public class DefaultUnitOfWork implements UnitOfWork, Service {
             for (Synchronization synchronization : synchronizations) {
                 try {
                     if (failed) {
+                        if (LOG.isTraceEnabled()) {
+                            LOG.trace("Invoking synchronization.onFailure: " + synchronization + " with " + exchange);
+                        }
                         synchronization.onFailure(exchange);
                     } else {
+                        if (LOG.isTraceEnabled()) {
+                            LOG.trace("Invoking synchronization.onComplete: " + synchronization + " with " + exchange);
+                        }
                         synchronization.onComplete(exchange);
                     }
                 } catch (Exception e) {
diff --git a/camel-core/src/main/java/org/apache/camel/processor/MulticastProcessor.java b/camel-core/src/main/java/org/apache/camel/processor/MulticastProcessor.java
index 05e36c9a845..bfe1f5185c5 100644
--- a/camel-core/src/main/java/org/apache/camel/processor/MulticastProcessor.java
+++ b/camel-core/src/main/java/org/apache/camel/processor/MulticastProcessor.java
@@ -61,8 +61,8 @@ import static org.apache.camel.util.ObjectHelper.notNull;
  * Implements the Multicast pattern to send a message exchange to a number of
  * endpoints, each endpoint receiving a copy of the message exchange.
  *
- * @see Pipeline
  * @version $Revision$
+ * @see Pipeline
  */
 public class MulticastProcessor extends ServiceSupport implements AsyncProcessor, Navigate<Processor>, Traceable {
 
@@ -130,7 +130,7 @@ public class MulticastProcessor extends ServiceSupport implements AsyncProcessor
     public MulticastProcessor(CamelContext camelContext, Collection<Processor> processors, AggregationStrategy aggregationStrategy) {
         this(camelContext, processors, aggregationStrategy, false, null, false, false);
     }
-    
+
     public MulticastProcessor(CamelContext camelContext, Collection<Processor> processors, AggregationStrategy aggregationStrategy,
                               boolean parallelProcessing, ExecutorService executorService, boolean streaming, boolean stopOnException) {
         notNull(camelContext, "camelContext");
@@ -152,7 +152,7 @@ public class MulticastProcessor extends ServiceSupport implements AsyncProcessor
     public String getTraceLabel() {
         return "multicast";
     }
-    
+
     public CamelContext getCamelContext() {
         return camelContext;
     }
@@ -469,10 +469,10 @@ public class MulticastProcessor extends ServiceSupport implements AsyncProcessor
      * when using the asynchronous routing engine. And therefore we want the logic in one method instead
      * of being scattered.
      *
-     * @param original      the original exchange
-     * @param subExchange   the current sub exchange, can be <tt>null</tt> for the synchronous part
-     * @param callback      the callback
-     * @param doneSync      the <tt>doneSync</tt> parameter to call on callback
+     * @param original    the original exchange
+     * @param subExchange the current sub exchange, can be <tt>null</tt> for the synchronous part
+     * @param callback    the callback
+     * @param doneSync    the <tt>doneSync</tt> parameter to call on callback
      */
     protected void doDone(Exchange original, Exchange subExchange, AsyncCallback callback, boolean doneSync) {
         // cleanup any per exchange aggregation strategy
@@ -494,7 +494,7 @@ public class MulticastProcessor extends ServiceSupport implements AsyncProcessor
      * Aggregate the {@link Exchange} with the current result
      *
      * @param strategy the aggregation strategy to use
-     * @param result the current result
+     * @param result   the current result
      * @param exchange the exchange to be added to the result
      */
     protected synchronized void doAggregate(AggregationStrategy strategy, AtomicExchange result, Exchange exchange) {
@@ -521,8 +521,7 @@ public class MulticastProcessor extends ServiceSupport implements AsyncProcessor
 
         int index = 0;
         for (Processor processor : processors) {
-            Exchange copy = exchange.copy();
-            result.add(createProcessorExchangePair(index++, processor, copy));
+            result.add(createProcessorExchangePair(index++, processor, exchange));
         }
 
         return result;
@@ -534,15 +533,18 @@ public class MulticastProcessor extends ServiceSupport implements AsyncProcessor
      * You <b>must</b> use this method to create the instances of {@link ProcessorExchangePair} as they
      * need to be specially prepared before use.
      *
-     * @param processor  the processor
-     * @param exchange   the exchange
+     * @param processor the processor
+     * @param exchange  the exchange
      * @return prepared for use
      */
     protected ProcessorExchangePair createProcessorExchangePair(int index, Processor processor, Exchange exchange) {
         Processor prepared = processor;
 
+        // copy exchange, and do not share the unit of work
+        Exchange copy = ExchangeHelper.createCorrelatedCopy(exchange, false);
+
         // set property which endpoint we send to
-        setToEndpoint(exchange, prepared);
+        setToEndpoint(copy, prepared);
 
         // rework error handling to support fine grained error handling
         if (exchange.getUnitOfWork() != null && exchange.getUnitOfWork().getRouteContext() != null) {
@@ -556,12 +558,14 @@ public class MulticastProcessor extends ServiceSupport implements AsyncProcessor
             // instead of using ProcessorDefinition.wrapInErrorHandler)
             try {
                 prepared = builder.createErrorHandler(routeContext, prepared);
+                // and wrap in unit of work processor so the copy exchange also can run under UoW
+                prepared = new UnitOfWorkProcessor(prepared);
             } catch (Exception e) {
                 throw ObjectHelper.wrapRuntimeCamelException(e);
             }
         }
 
-        return new DefaultProcessorExchangePair(index, processor, prepared, exchange);
+        return new DefaultProcessorExchangePair(index, processor, prepared, copy);
     }
 
     protected void doStart() throws Exception {
@@ -594,7 +598,7 @@ public class MulticastProcessor extends ServiceSupport implements AsyncProcessor
 
     /**
      * Is the multicast processor working in streaming mode?
-     * 
+     * <p/>
      * In streaming mode:
      * <ul>
      * <li>we use {@link Iterable} to ensure we can send messages as soon as the data becomes available</li>
diff --git a/camel-core/src/main/java/org/apache/camel/processor/RecipientListProcessor.java b/camel-core/src/main/java/org/apache/camel/processor/RecipientListProcessor.java
index 14f7fbfc64e..d8cdc050072 100644
--- a/camel-core/src/main/java/org/apache/camel/processor/RecipientListProcessor.java
+++ b/camel-core/src/main/java/org/apache/camel/processor/RecipientListProcessor.java
@@ -173,8 +173,7 @@ public class RecipientListProcessor extends MulticastProcessor {
             }
 
             // then create the exchange pair
-            Exchange copy = exchange.copy();
-            result.add(createProcessorExchangePair(index++, endpoint, producer, copy));
+            result.add(createProcessorExchangePair(index++, endpoint, producer, exchange));
         }
 
         return result;
@@ -186,8 +185,11 @@ public class RecipientListProcessor extends MulticastProcessor {
     protected ProcessorExchangePair createProcessorExchangePair(int index, Endpoint endpoint, Producer producer, Exchange exchange) {
         Processor prepared = producer;
 
+        // copy exchange, and do not share the unit of work
+        Exchange copy = ExchangeHelper.createCorrelatedCopy(exchange, false);
+
         // set property which endpoint we send to
-        setToEndpoint(exchange, prepared);
+        setToEndpoint(copy, prepared);
 
         // rework error handling to support fine grained error handling
         if (exchange.getUnitOfWork() != null && exchange.getUnitOfWork().getRouteContext() != null) {
@@ -201,12 +203,14 @@ public class RecipientListProcessor extends MulticastProcessor {
             // instead of using ProcessorDefinition.wrapInErrorHandler)
             try {
                 prepared = builder.createErrorHandler(routeContext, prepared);
+                // and wrap in unit of work processor so the copy exchange also can run under UoW
+                prepared = new UnitOfWorkProcessor(prepared);
             } catch (Exception e) {
                 throw ObjectHelper.wrapRuntimeCamelException(e);
             }
         }
 
-        return new RecipientProcessorExchangePair(index, producerCache, endpoint, producer, prepared, exchange);
+        return new RecipientProcessorExchangePair(index, producerCache, endpoint, producer, prepared, copy);
     }
 
     protected static Endpoint resolveEndpoint(Exchange exchange, Object recipient) {
diff --git a/camel-core/src/main/java/org/apache/camel/processor/Splitter.java b/camel-core/src/main/java/org/apache/camel/processor/Splitter.java
index 6d7746646e2..f4b990c2152 100644
--- a/camel-core/src/main/java/org/apache/camel/processor/Splitter.java
+++ b/camel-core/src/main/java/org/apache/camel/processor/Splitter.java
@@ -35,6 +35,7 @@ import org.apache.camel.Processor;
 import org.apache.camel.processor.aggregate.AggregationStrategy;
 import org.apache.camel.processor.aggregate.UseOriginalAggregationStrategy;
 import org.apache.camel.util.CollectionHelper;
+import org.apache.camel.util.ExchangeHelper;
 import org.apache.camel.util.IOHelper;
 import org.apache.camel.util.ObjectHelper;
 import org.apache.commons.logging.Log;
@@ -183,6 +184,9 @@ public class Splitter extends MulticastProcessor implements AsyncProcessor, Trac
     @Override
     protected void updateNewExchange(Exchange exchange, int index, Iterable<ProcessorExchangePair> allPairs,
                                      Iterator<ProcessorExchangePair> it) {
+        // do not share unit of work
+        exchange.setUnitOfWork(null);
+
         exchange.setProperty(Exchange.SPLIT_INDEX, index);
         if (allPairs instanceof Collection) {
             exchange.setProperty(Exchange.SPLIT_SIZE, ((Collection<?>)allPairs).size());
diff --git a/camel-core/src/main/java/org/apache/camel/processor/exceptionpolicy/DefaultExceptionPolicyStrategy.java b/camel-core/src/main/java/org/apache/camel/processor/exceptionpolicy/DefaultExceptionPolicyStrategy.java
index 1772967d70b..01d86e31277 100644
--- a/camel-core/src/main/java/org/apache/camel/processor/exceptionpolicy/DefaultExceptionPolicyStrategy.java
+++ b/camel-core/src/main/java/org/apache/camel/processor/exceptionpolicy/DefaultExceptionPolicyStrategy.java
@@ -23,6 +23,8 @@ import java.util.TreeMap;
 
 import org.apache.camel.Exchange;
 import org.apache.camel.model.OnExceptionDefinition;
+import org.apache.camel.model.ProcessorDefinitionHelper;
+import org.apache.camel.model.RouteDefinition;
 import org.apache.camel.util.ObjectHelper;
 import org.apache.commons.logging.Log;
 import org.apache.commons.logging.LogFactory;
@@ -85,8 +87,8 @@ public class DefaultExceptionPolicyStrategy implements ExceptionPolicyStrategy {
 
 
     private boolean findMatchedExceptionPolicy(Map<ExceptionPolicyKey, OnExceptionDefinition> exceptionPolicies,
-                                                             Exchange exchange, Throwable exception,
-                                                             Map<Integer, OnExceptionDefinition> candidates) {
+                                               Exchange exchange, Throwable exception,
+                                               Map<Integer, OnExceptionDefinition> candidates) {
         if (LOG.isTraceEnabled()) {
             LOG.trace("Finding best suited exception policy for thrown exception " + exception.getClass().getName());
         }
@@ -104,6 +106,19 @@ public class DefaultExceptionPolicyStrategy implements ExceptionPolicyStrategy {
             Class<?> clazz = entry.getKey().getExceptionClass();
             OnExceptionDefinition type = entry.getValue();
 
+            // if OnException is route scoped then the current route (Exchange) must match
+            // so we will not pick an OnException from another route
+            if (exchange != null && exchange.getUnitOfWork() != null) {
+                RouteDefinition route = exchange.getUnitOfWork().getRouteContext() != null ? exchange.getUnitOfWork().getRouteContext().getRoute() : null;
+                RouteDefinition typeRoute = ProcessorDefinitionHelper.getRoute(type);
+                if (route != null && typeRoute != null && route != typeRoute) {
+                    if (LOG.isTraceEnabled()) {
+                        LOG.trace("The type is scoped for route: " + typeRoute.getId() + " however Exchange is at route: " + route.getId());
+                    }
+                    continue;
+                }
+            }
+
             if (filter(type, clazz, exception)) {
 
                 // must match
diff --git a/camel-core/src/test/java/org/apache/camel/processor/onexception/OnExceptionAndDLCErrorHandlerIssueReverseTest.java b/camel-core/src/test/java/org/apache/camel/processor/onexception/OnExceptionAndDLCErrorHandlerIssueReverseTest.java
new file mode 100644
index 00000000000..f58508f8d86
--- /dev/null
+++ b/camel-core/src/test/java/org/apache/camel/processor/onexception/OnExceptionAndDLCErrorHandlerIssueReverseTest.java
@@ -0,0 +1,68 @@
+/**
+ * Licensed to the Apache Software Foundation (ASF) under one or more
+ * contributor license agreements.  See the NOTICE file distributed with
+ * this work for additional information regarding copyright ownership.
+ * The ASF licenses this file to You under the Apache License, Version 2.0
+ * (the "License"); you may not use this file except in compliance with
+ * the License.  You may obtain a copy of the License at
+ *
+ *      http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+package org.apache.camel.processor.onexception;
+
+import org.apache.camel.ContextTestSupport;
+import org.apache.camel.builder.RouteBuilder;
+
+/**
+ * @version $Revision$
+ */
+public class OnExceptionAndDLCErrorHandlerIssueReverseTest extends ContextTestSupport {
+
+    public void testNoOnException() throws Exception {
+        getMockEndpoint("mock:foo").expectedMessageCount(1);
+        getMockEndpoint("mock:dead").expectedMessageCount(1);
+        getMockEndpoint("mock:handled").expectedMessageCount(0);
+
+        template.sendBody("direct:foo", "Hello World");
+
+        assertMockEndpointsSatisfied();
+    }
+
+    public void testOnException() throws Exception {
+        getMockEndpoint("mock:bar").expectedMessageCount(1);
+        getMockEndpoint("mock:dead").expectedMessageCount(0);
+        getMockEndpoint("mock:handled").expectedMessageCount(1);
+
+        template.sendBody("direct:bar", "Hello World");
+
+        assertMockEndpointsSatisfied();
+    }
+
+    @Override
+    protected RouteBuilder createRouteBuilder() throws Exception {
+        return new RouteBuilder() {
+            @Override
+            public void configure() throws Exception {
+                errorHandler(deadLetterChannel("mock:dead"));
+
+                from("direct:foo").routeId("foo")
+                    .to("mock:foo")
+                    .throwException(new IllegalArgumentException("Damn"));
+
+                from("direct:bar").routeId("bar")
+                    .onException(IllegalArgumentException.class)
+                        .handled(true)
+                        .to("mock:handled")
+                    .end()
+                    .to("mock:bar")
+                    .throwException(new IllegalArgumentException("Damn"));
+            }
+        };
+    }
+}
diff --git a/camel-core/src/test/java/org/apache/camel/processor/onexception/OnExceptionAndDLCErrorHandlerIssueTest.java b/camel-core/src/test/java/org/apache/camel/processor/onexception/OnExceptionAndDLCErrorHandlerIssueTest.java
new file mode 100644
index 00000000000..7ba28eef3de
--- /dev/null
+++ b/camel-core/src/test/java/org/apache/camel/processor/onexception/OnExceptionAndDLCErrorHandlerIssueTest.java
@@ -0,0 +1,68 @@
+/**
+ * Licensed to the Apache Software Foundation (ASF) under one or more
+ * contributor license agreements.  See the NOTICE file distributed with
+ * this work for additional information regarding copyright ownership.
+ * The ASF licenses this file to You under the Apache License, Version 2.0
+ * (the "License"); you may not use this file except in compliance with
+ * the License.  You may obtain a copy of the License at
+ *
+ *      http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+package org.apache.camel.processor.onexception;
+
+import org.apache.camel.ContextTestSupport;
+import org.apache.camel.builder.RouteBuilder;
+
+/**
+ * @version $Revision$
+ */
+public class OnExceptionAndDLCErrorHandlerIssueTest extends ContextTestSupport {
+
+    public void testNoOnException() throws Exception {
+        getMockEndpoint("mock:foo").expectedMessageCount(1);
+        getMockEndpoint("mock:dead").expectedMessageCount(1);
+        getMockEndpoint("mock:handled").expectedMessageCount(0);
+
+        template.sendBody("direct:foo", "Hello World");
+
+        assertMockEndpointsSatisfied();
+    }
+
+    public void testOnException() throws Exception {
+        getMockEndpoint("mock:bar").expectedMessageCount(1);
+        getMockEndpoint("mock:dead").expectedMessageCount(0);
+        getMockEndpoint("mock:handled").expectedMessageCount(1);
+
+        template.sendBody("direct:bar", "Hello World");
+
+        assertMockEndpointsSatisfied();
+    }
+
+    @Override
+    protected RouteBuilder createRouteBuilder() throws Exception {
+        return new RouteBuilder() {
+            @Override
+            public void configure() throws Exception {
+                errorHandler(deadLetterChannel("mock:dead"));
+
+                from("direct:bar").routeId("bar")
+                    .onException(IllegalArgumentException.class)
+                        .handled(true)
+                        .to("mock:handled")
+                    .end()
+                    .to("mock:bar")
+                    .throwException(new IllegalArgumentException("Damn"));
+
+                from("direct:foo").routeId("foo")
+                    .to("mock:foo")
+                    .throwException(new IllegalArgumentException("Damn"));
+            }
+        };
+    }
+}
diff --git a/camel-core/src/test/java/org/apache/camel/processor/onexception/OnExceptionGlobalAndDLCErrorHandlerIssueReverseTest.java b/camel-core/src/test/java/org/apache/camel/processor/onexception/OnExceptionGlobalAndDLCErrorHandlerIssueReverseTest.java
new file mode 100644
index 00000000000..8abd8f1512e
--- /dev/null
+++ b/camel-core/src/test/java/org/apache/camel/processor/onexception/OnExceptionGlobalAndDLCErrorHandlerIssueReverseTest.java
@@ -0,0 +1,74 @@
+/**
+ * Licensed to the Apache Software Foundation (ASF) under one or more
+ * contributor license agreements.  See the NOTICE file distributed with
+ * this work for additional information regarding copyright ownership.
+ * The ASF licenses this file to You under the Apache License, Version 2.0
+ * (the "License"); you may not use this file except in compliance with
+ * the License.  You may obtain a copy of the License at
+ *
+ *      http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+package org.apache.camel.processor.onexception;
+
+import org.apache.camel.ContextTestSupport;
+import org.apache.camel.builder.RouteBuilder;
+
+/**
+ * @version $Revision$
+ */
+public class OnExceptionGlobalAndDLCErrorHandlerIssueReverseTest extends ContextTestSupport {
+
+    public void testNoOnGlobalException() throws Exception {
+        getMockEndpoint("mock:foo").expectedMessageCount(1);
+        getMockEndpoint("mock:dead").expectedMessageCount(0);
+        getMockEndpoint("mock:global").expectedMessageCount(1);
+        getMockEndpoint("mock:local").expectedMessageCount(0);
+
+        template.sendBody("direct:foo", "Hello World");
+
+        assertMockEndpointsSatisfied();
+    }
+
+    public void testOnRouteException() throws Exception {
+        getMockEndpoint("mock:bar").expectedMessageCount(1);
+        getMockEndpoint("mock:dead").expectedMessageCount(0);
+        getMockEndpoint("mock:global").expectedMessageCount(0);
+        getMockEndpoint("mock:local").expectedMessageCount(1);
+
+        template.sendBody("direct:bar", "Hello World");
+
+        assertMockEndpointsSatisfied();
+    }
+
+    @Override
+    protected RouteBuilder createRouteBuilder() throws Exception {
+        return new RouteBuilder() {
+            @Override
+            public void configure() throws Exception {
+                errorHandler(deadLetterChannel("mock:dead"));
+
+                onException(Exception.class)
+                    .handled(true)
+                    .to("mock:global");
+
+                from("direct:foo").routeId("foo")
+                    .to("mock:foo")
+                    .throwException(new IllegalArgumentException("Damn"));
+
+                from("direct:bar").routeId("bar")
+                    .onException(IllegalArgumentException.class)
+                        .handled(true)
+                        .to("mock:local")
+                    .end()
+                    .to("mock:bar")
+                    .throwException(new IllegalArgumentException("Damn"));
+            }
+        };
+    }
+}
diff --git a/camel-core/src/test/java/org/apache/camel/processor/onexception/OnExceptionGlobalAndDLCErrorHandlerIssueTest.java b/camel-core/src/test/java/org/apache/camel/processor/onexception/OnExceptionGlobalAndDLCErrorHandlerIssueTest.java
new file mode 100644
index 00000000000..49d00082bd5
--- /dev/null
+++ b/camel-core/src/test/java/org/apache/camel/processor/onexception/OnExceptionGlobalAndDLCErrorHandlerIssueTest.java
@@ -0,0 +1,74 @@
+/**
+ * Licensed to the Apache Software Foundation (ASF) under one or more
+ * contributor license agreements.  See the NOTICE file distributed with
+ * this work for additional information regarding copyright ownership.
+ * The ASF licenses this file to You under the Apache License, Version 2.0
+ * (the "License"); you may not use this file except in compliance with
+ * the License.  You may obtain a copy of the License at
+ *
+ *      http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+package org.apache.camel.processor.onexception;
+
+import org.apache.camel.ContextTestSupport;
+import org.apache.camel.builder.RouteBuilder;
+
+/**
+ * @version $Revision$
+ */
+public class OnExceptionGlobalAndDLCErrorHandlerIssueTest extends ContextTestSupport {
+
+    public void testNoOnGlobalException() throws Exception {
+        getMockEndpoint("mock:foo").expectedMessageCount(1);
+        getMockEndpoint("mock:dead").expectedMessageCount(0);
+        getMockEndpoint("mock:global").expectedMessageCount(1);
+        getMockEndpoint("mock:local").expectedMessageCount(0);
+
+        template.sendBody("direct:foo", "Hello World");
+
+        assertMockEndpointsSatisfied();
+    }
+
+    public void testOnRouteException() throws Exception {
+        getMockEndpoint("mock:bar").expectedMessageCount(1);
+        getMockEndpoint("mock:dead").expectedMessageCount(0);
+        getMockEndpoint("mock:global").expectedMessageCount(0);
+        getMockEndpoint("mock:local").expectedMessageCount(1);
+
+        template.sendBody("direct:bar", "Hello World");
+
+        assertMockEndpointsSatisfied();
+    }
+
+    @Override
+    protected RouteBuilder createRouteBuilder() throws Exception {
+        return new RouteBuilder() {
+            @Override
+            public void configure() throws Exception {
+                errorHandler(deadLetterChannel("mock:dead"));
+
+                onException(Exception.class)
+                    .handled(true)
+                    .to("mock:global");
+
+                from("direct:bar").routeId("bar")
+                    .onException(IllegalArgumentException.class)
+                        .handled(true)
+                        .to("mock:local")
+                    .end()
+                    .to("mock:bar")
+                    .throwException(new IllegalArgumentException("Damn"));
+
+                from("direct:foo").routeId("foo")
+                    .to("mock:foo")
+                    .throwException(new IllegalArgumentException("Damn"));
+            }
+        };
+    }
+}
diff --git a/components/camel-core-xml/src/main/java/org/apache/camel/core/xml/AbstractCamelContextFactoryBean.java b/components/camel-core-xml/src/main/java/org/apache/camel/core/xml/AbstractCamelContextFactoryBean.java
index 769ba42a139..df1db8ba933 100644
--- a/components/camel-core-xml/src/main/java/org/apache/camel/core/xml/AbstractCamelContextFactoryBean.java
+++ b/components/camel-core-xml/src/main/java/org/apache/camel/core/xml/AbstractCamelContextFactoryBean.java
@@ -273,6 +273,9 @@ public abstract class AbstractCamelContextFactoryBean<T extends CamelContext> ex
         // using route builders. So we have here a little custom code to fix the JAXB gaps
         for (RouteDefinition route : getRoutes()) {
 
+            // at first init the parent
+            initParent(route);
+
             // abstracts is the cross cutting concerns
             List<ProcessorDefinition> abstracts = new ArrayList<ProcessorDefinition>();
 
@@ -295,11 +298,8 @@ public abstract class AbstractCamelContextFactoryBean<T extends CamelContext> ex
 
             // rebuild route as upper + lower
             route.clearOutput();
-            route.getOutputs().addAll(upper);
             route.getOutputs().addAll(lower);
-
-            // configure parents
-            initParent(route);
+            route.getOutputs().addAll(0, upper);
         }
 
         if (getDataFormats() != null) {
@@ -356,6 +356,10 @@ public abstract class AbstractCamelContextFactoryBean<T extends CamelContext> ex
         // add global on exceptions if any
         List<OnExceptionDefinition> onExceptions = getOnExceptions();
         if (onExceptions != null && !onExceptions.isEmpty()) {
+            // init the parent
+            for (OnExceptionDefinition global : onExceptions) {
+                initParent(global);
+            }
             abstracts.addAll(onExceptions);
         }
 
@@ -373,6 +377,8 @@ public abstract class AbstractCamelContextFactoryBean<T extends CamelContext> ex
         // configure intercept
         for (InterceptDefinition intercept : getIntercepts()) {
             intercept.afterPropertiesSet();
+            // init the parent
+            initParent(intercept);
             // add as first output so intercept is handled before the actual route and that gives
             // us the needed head start to init and be able to intercept all the remaining processing steps
             upper.add(0, intercept);
@@ -395,6 +401,8 @@ public abstract class AbstractCamelContextFactoryBean<T extends CamelContext> ex
 
             if (match) {
                 intercept.afterPropertiesSet();
+                // init the parent
+                initParent(intercept);
                 // add as first output so intercept is handled before the actual route and that gives
                 // us the needed head start to init and be able to intercept all the remaining processing steps
                 upper.add(0, intercept);
@@ -404,6 +412,8 @@ public abstract class AbstractCamelContextFactoryBean<T extends CamelContext> ex
         // configure intercept send to endpoint
         for (InterceptSendToEndpointDefinition intercept : getInterceptSendToEndpoints()) {
             intercept.afterPropertiesSet();
+            // init the parent
+            initParent(intercept);
             // add as first output so intercept is handled before the actual route and that gives
             // us the needed head start to init and be able to intercept all the remaining processing steps
             upper.add(0, intercept);
@@ -423,6 +433,10 @@ public abstract class AbstractCamelContextFactoryBean<T extends CamelContext> ex
         // only add global onCompletion if there are no route already
         if (completions.isEmpty()) {
             completions = getOnCompletions();
+            // init the parent
+            for (OnCompletionDefinition global : completions) {
+                initParent(global);
+            }
         }
 
         // are there any completions to init at all?
diff --git a/components/camel-spring/src/test/java/org/apache/camel/spring/config/OneRouteRefOnExceptionAndDLCErrorHandlerTest.java b/components/camel-spring/src/test/java/org/apache/camel/spring/config/OneRouteRefOnExceptionAndDLCErrorHandlerTest.java
new file mode 100644
index 00000000000..b94995ca2f5
--- /dev/null
+++ b/components/camel-spring/src/test/java/org/apache/camel/spring/config/OneRouteRefOnExceptionAndDLCErrorHandlerTest.java
@@ -0,0 +1,52 @@
+/**
+ * Licensed to the Apache Software Foundation (ASF) under one or more
+ * contributor license agreements.  See the NOTICE file distributed with
+ * this work for additional information regarding copyright ownership.
+ * The ASF licenses this file to You under the Apache License, Version 2.0
+ * (the "License"); you may not use this file except in compliance with
+ * the License.  You may obtain a copy of the License at
+ *
+ *      http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+package org.apache.camel.spring.config;
+
+import org.apache.camel.spring.SpringTestSupport;
+import org.springframework.context.support.AbstractXmlApplicationContext;
+import org.springframework.context.support.ClassPathXmlApplicationContext;
+
+/**
+ * @version $Revision: 938471 $
+ */
+public class OneRouteRefOnExceptionAndDLCErrorHandlerTest extends SpringTestSupport {
+
+    public void testOneRouteRefNoOnExceptionAndDLCErrorHandler() throws Exception {
+        getMockEndpoint("mock:foo").expectedMessageCount(1);
+        getMockEndpoint("mock:dead").expectedMessageCount(1);
+        getMockEndpoint("mock:handled").expectedMessageCount(0);
+
+        template.sendBody("direct:foo", "Hello World");
+
+        assertMockEndpointsSatisfied();
+    }
+
+    public void testOneRouteRefOnExceptionAndDLCErrorHandler() throws Exception {
+        getMockEndpoint("mock:bar").expectedMessageCount(1);
+        getMockEndpoint("mock:dead").expectedMessageCount(0);
+        getMockEndpoint("mock:handled").expectedMessageCount(1);
+
+        template.sendBody("direct:bar", "Hello World");
+
+        assertMockEndpointsSatisfied();
+    }
+
+    @Override
+    protected AbstractXmlApplicationContext createApplicationContext() {
+        return new ClassPathXmlApplicationContext("org/apache/camel/spring/config/OneRouteRefOnExceptionAndDLCErrorHandler.xml");
+    }
+}
diff --git a/components/camel-spring/src/test/java/org/apache/camel/spring/config/OneRouteRefOnExceptionAndTwoDLCErrorHandlerTest.java b/components/camel-spring/src/test/java/org/apache/camel/spring/config/OneRouteRefOnExceptionAndTwoDLCErrorHandlerTest.java
new file mode 100644
index 00000000000..d835c2c632a
--- /dev/null
+++ b/components/camel-spring/src/test/java/org/apache/camel/spring/config/OneRouteRefOnExceptionAndTwoDLCErrorHandlerTest.java
@@ -0,0 +1,54 @@
+/**
+ * Licensed to the Apache Software Foundation (ASF) under one or more
+ * contributor license agreements.  See the NOTICE file distributed with
+ * this work for additional information regarding copyright ownership.
+ * The ASF licenses this file to You under the Apache License, Version 2.0
+ * (the "License"); you may not use this file except in compliance with
+ * the License.  You may obtain a copy of the License at
+ *
+ *      http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+package org.apache.camel.spring.config;
+
+import org.apache.camel.spring.SpringTestSupport;
+import org.springframework.context.support.AbstractXmlApplicationContext;
+import org.springframework.context.support.ClassPathXmlApplicationContext;
+
+/**
+ * @version $Revision: 938471 $
+ */
+public class OneRouteRefOnExceptionAndTwoDLCErrorHandlerTest extends SpringTestSupport {
+
+    public void testOneRouteRefNoOnExceptionAndTwoDLCErrorHandler() throws Exception {
+        getMockEndpoint("mock:foo").expectedMessageCount(1);
+        getMockEndpoint("mock:dead").expectedMessageCount(0);
+        getMockEndpoint("mock:dead2").expectedMessageCount(1);
+        getMockEndpoint("mock:handled").expectedMessageCount(0);
+
+        template.sendBody("direct:foo", "Hello World");
+
+        assertMockEndpointsSatisfied();
+    }
+
+    public void testOneRouteRefOnExceptionAndTwoDLCErrorHandler() throws Exception {
+        getMockEndpoint("mock:bar").expectedMessageCount(1);
+        getMockEndpoint("mock:dead").expectedMessageCount(0);
+        getMockEndpoint("mock:dead2").expectedMessageCount(0);
+        getMockEndpoint("mock:handled").expectedMessageCount(1);
+
+        template.sendBody("direct:bar", "Hello World");
+
+        assertMockEndpointsSatisfied();
+    }
+
+    @Override
+    protected AbstractXmlApplicationContext createApplicationContext() {
+        return new ClassPathXmlApplicationContext("org/apache/camel/spring/config/OneRouteRefOnExceptionAndTwoDLCErrorHandler.xml");
+    }
+}
diff --git a/components/camel-spring/src/test/java/org/apache/camel/spring/config/OneRouteRefOnExceptionTest.java b/components/camel-spring/src/test/java/org/apache/camel/spring/config/OneRouteRefOnExceptionTest.java
new file mode 100644
index 00000000000..a0d81a72029
--- /dev/null
+++ b/components/camel-spring/src/test/java/org/apache/camel/spring/config/OneRouteRefOnExceptionTest.java
@@ -0,0 +1,57 @@
+/**
+ * Licensed to the Apache Software Foundation (ASF) under one or more
+ * contributor license agreements.  See the NOTICE file distributed with
+ * this work for additional information regarding copyright ownership.
+ * The ASF licenses this file to You under the Apache License, Version 2.0
+ * (the "License"); you may not use this file except in compliance with
+ * the License.  You may obtain a copy of the License at
+ *
+ *      http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+package org.apache.camel.spring.config;
+
+import org.apache.camel.CamelExecutionException;
+import org.apache.camel.spring.SpringTestSupport;
+import org.springframework.context.support.AbstractXmlApplicationContext;
+import org.springframework.context.support.ClassPathXmlApplicationContext;
+
+/**
+ * @version $Revision: 938471 $
+ */
+public class OneRouteRefOnExceptionTest extends SpringTestSupport {
+
+    public void testOneRouteRefNoOnException() throws Exception {
+        getMockEndpoint("mock:foo").expectedMessageCount(1);
+        getMockEndpoint("mock:handled").expectedMessageCount(0);
+
+        try {
+            template.sendBody("direct:foo", "Hello World");
+            fail("Should have thrown exception");
+        } catch (CamelExecutionException e) {
+            assertIsInstanceOf(IllegalArgumentException.class, e.getCause());
+            assertEquals("Damn", e.getCause().getMessage());
+        }
+
+        assertMockEndpointsSatisfied();
+    }
+
+    public void testOneRouteRefOnException() throws Exception {
+        getMockEndpoint("mock:bar").expectedMessageCount(1);
+        getMockEndpoint("mock:handled").expectedMessageCount(1);
+
+        template.sendBody("direct:bar", "Hello World");
+
+        assertMockEndpointsSatisfied();
+    }
+
+    @Override
+    protected AbstractXmlApplicationContext createApplicationContext() {
+        return new ClassPathXmlApplicationContext("org/apache/camel/spring/config/OneRouteRefOnException.xml");
+    }
+}
diff --git a/components/camel-spring/src/test/java/org/apache/camel/spring/config/OneRouteRefReverseOnExceptionAndDLCErrorHandlerTest.java b/components/camel-spring/src/test/java/org/apache/camel/spring/config/OneRouteRefReverseOnExceptionAndDLCErrorHandlerTest.java
new file mode 100644
index 00000000000..f81a280a168
--- /dev/null
+++ b/components/camel-spring/src/test/java/org/apache/camel/spring/config/OneRouteRefReverseOnExceptionAndDLCErrorHandlerTest.java
@@ -0,0 +1,52 @@
+/**
+ * Licensed to the Apache Software Foundation (ASF) under one or more
+ * contributor license agreements.  See the NOTICE file distributed with
+ * this work for additional information regarding copyright ownership.
+ * The ASF licenses this file to You under the Apache License, Version 2.0
+ * (the "License"); you may not use this file except in compliance with
+ * the License.  You may obtain a copy of the License at
+ *
+ *      http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+package org.apache.camel.spring.config;
+
+import org.apache.camel.spring.SpringTestSupport;
+import org.springframework.context.support.AbstractXmlApplicationContext;
+import org.springframework.context.support.ClassPathXmlApplicationContext;
+
+/**
+ * @version $Revision: 938471 $
+ */
+public class OneRouteRefReverseOnExceptionAndDLCErrorHandlerTest extends SpringTestSupport {
+
+    public void testOneRouteRefReverseNoOnExceptionAndDLCErrorHandler() throws Exception {
+        getMockEndpoint("mock:foo").expectedMessageCount(1);
+        getMockEndpoint("mock:dead").expectedMessageCount(1);
+        getMockEndpoint("mock:handled").expectedMessageCount(0);
+
+        template.sendBody("direct:foo", "Hello World");
+
+        assertMockEndpointsSatisfied();
+    }
+
+    public void testOneRouteRefReverseOnExceptionAndDLCErrorHandler() throws Exception {
+        getMockEndpoint("mock:bar").expectedMessageCount(1);
+        getMockEndpoint("mock:dead").expectedMessageCount(0);
+        getMockEndpoint("mock:handled").expectedMessageCount(1);
+
+        template.sendBody("direct:bar", "Hello World");
+
+        assertMockEndpointsSatisfied();
+    }
+
+    @Override
+    protected AbstractXmlApplicationContext createApplicationContext() {
+        return new ClassPathXmlApplicationContext("org/apache/camel/spring/config/OneRouteRefReverseOnExceptionAndDLCErrorHandler.xml");
+    }
+}
diff --git a/components/camel-spring/src/test/java/org/apache/camel/spring/config/OneRouteRefReverseOnExceptionTest.java b/components/camel-spring/src/test/java/org/apache/camel/spring/config/OneRouteRefReverseOnExceptionTest.java
new file mode 100644
index 00000000000..f4b778ebc18
--- /dev/null
+++ b/components/camel-spring/src/test/java/org/apache/camel/spring/config/OneRouteRefReverseOnExceptionTest.java
@@ -0,0 +1,57 @@
+/**
+ * Licensed to the Apache Software Foundation (ASF) under one or more
+ * contributor license agreements.  See the NOTICE file distributed with
+ * this work for additional information regarding copyright ownership.
+ * The ASF licenses this file to You under the Apache License, Version 2.0
+ * (the "License"); you may not use this file except in compliance with
+ * the License.  You may obtain a copy of the License at
+ *
+ *      http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+package org.apache.camel.spring.config;
+
+import org.apache.camel.CamelExecutionException;
+import org.apache.camel.spring.SpringTestSupport;
+import org.springframework.context.support.AbstractXmlApplicationContext;
+import org.springframework.context.support.ClassPathXmlApplicationContext;
+
+/**
+ * @version $Revision: 938471 $
+ */
+public class OneRouteRefReverseOnExceptionTest extends SpringTestSupport {
+
+    public void testOneRouteRefReverseNoOnException() throws Exception {
+        getMockEndpoint("mock:foo").expectedMessageCount(1);
+        getMockEndpoint("mock:handled").expectedMessageCount(0);
+
+        try {
+            template.sendBody("direct:foo", "Hello World");
+            fail("Should have thrown exception");
+        } catch (CamelExecutionException e) {
+            assertIsInstanceOf(IllegalArgumentException.class, e.getCause());
+            assertEquals("Damn", e.getCause().getMessage());
+        }
+
+        assertMockEndpointsSatisfied();
+    }
+
+    public void testOneRouteRefReverseOnException() throws Exception {
+        getMockEndpoint("mock:bar").expectedMessageCount(1);
+        getMockEndpoint("mock:handled").expectedMessageCount(1);
+
+        template.sendBody("direct:bar", "Hello World");
+
+        assertMockEndpointsSatisfied();
+    }
+
+    @Override
+    protected AbstractXmlApplicationContext createApplicationContext() {
+        return new ClassPathXmlApplicationContext("org/apache/camel/spring/config/OneRouteRefReverseOnException.xml");
+    }
+}
diff --git a/components/camel-spring/src/test/java/org/apache/camel/spring/config/TwoRouteRefOnExceptionAndDLCErrorHandlerTest.java b/components/camel-spring/src/test/java/org/apache/camel/spring/config/TwoRouteRefOnExceptionAndDLCErrorHandlerTest.java
new file mode 100644
index 00000000000..da0d7b38d28
--- /dev/null
+++ b/components/camel-spring/src/test/java/org/apache/camel/spring/config/TwoRouteRefOnExceptionAndDLCErrorHandlerTest.java
@@ -0,0 +1,52 @@
+/**
+ * Licensed to the Apache Software Foundation (ASF) under one or more
+ * contributor license agreements.  See the NOTICE file distributed with
+ * this work for additional information regarding copyright ownership.
+ * The ASF licenses this file to You under the Apache License, Version 2.0
+ * (the "License"); you may not use this file except in compliance with
+ * the License.  You may obtain a copy of the License at
+ *
+ *      http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+package org.apache.camel.spring.config;
+
+import org.apache.camel.spring.SpringTestSupport;
+import org.springframework.context.support.AbstractXmlApplicationContext;
+import org.springframework.context.support.ClassPathXmlApplicationContext;
+
+/**
+ * @version $Revision: 938471 $
+ */
+public class TwoRouteRefOnExceptionAndDLCErrorHandlerTest extends SpringTestSupport {
+
+    public void testTwoRouteRefNoOnExceptionAndDLCErrorHandler() throws Exception {
+        getMockEndpoint("mock:foo").expectedMessageCount(1);
+        getMockEndpoint("mock:dead").expectedMessageCount(1);
+        getMockEndpoint("mock:handled").expectedMessageCount(0);
+
+        template.sendBody("direct:foo", "Hello World");
+
+        assertMockEndpointsSatisfied();
+    }
+
+    public void testTwoRouteRefOnExceptionAndDLCErrorHandler() throws Exception {
+        getMockEndpoint("mock:bar").expectedMessageCount(1);
+        getMockEndpoint("mock:dead").expectedMessageCount(0);
+        getMockEndpoint("mock:handled").expectedMessageCount(1);
+
+        template.sendBody("direct:bar", "Hello World");
+
+        assertMockEndpointsSatisfied();
+    }
+
+    @Override
+    protected AbstractXmlApplicationContext createApplicationContext() {
+        return new ClassPathXmlApplicationContext("org/apache/camel/spring/config/TwoRouteRefOnExceptionAndDLCErrorHandler.xml");
+    }
+}
diff --git a/components/camel-spring/src/test/java/org/apache/camel/spring/config/TwoRouteRefOnExceptionTest.java b/components/camel-spring/src/test/java/org/apache/camel/spring/config/TwoRouteRefOnExceptionTest.java
new file mode 100644
index 00000000000..0b29b265377
--- /dev/null
+++ b/components/camel-spring/src/test/java/org/apache/camel/spring/config/TwoRouteRefOnExceptionTest.java
@@ -0,0 +1,57 @@
+/**
+ * Licensed to the Apache Software Foundation (ASF) under one or more
+ * contributor license agreements.  See the NOTICE file distributed with
+ * this work for additional information regarding copyright ownership.
+ * The ASF licenses this file to You under the Apache License, Version 2.0
+ * (the "License"); you may not use this file except in compliance with
+ * the License.  You may obtain a copy of the License at
+ *
+ *      http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+package org.apache.camel.spring.config;
+
+import org.apache.camel.CamelExecutionException;
+import org.apache.camel.spring.SpringTestSupport;
+import org.springframework.context.support.AbstractXmlApplicationContext;
+import org.springframework.context.support.ClassPathXmlApplicationContext;
+
+/**
+ * @version $Revision$
+ */
+public class TwoRouteRefOnExceptionTest extends SpringTestSupport {
+
+    public void testTwoRouteRefNoOnException() throws Exception {
+        getMockEndpoint("mock:foo").expectedMessageCount(1);
+        getMockEndpoint("mock:handled").expectedMessageCount(0);
+
+        try {
+            template.sendBody("direct:foo", "Hello World");
+            fail("Should have thrown exception");
+        } catch (CamelExecutionException e) {
+            assertIsInstanceOf(IllegalArgumentException.class, e.getCause());
+            assertEquals("Damn", e.getCause().getMessage());
+        }
+
+        assertMockEndpointsSatisfied();
+    }
+
+    public void testTwoRouteRefOnException() throws Exception {
+        getMockEndpoint("mock:bar").expectedMessageCount(1);
+        getMockEndpoint("mock:handled").expectedMessageCount(1);
+
+        template.sendBody("direct:bar", "Hello World");
+
+        assertMockEndpointsSatisfied();
+    }
+
+    @Override
+    protected AbstractXmlApplicationContext createApplicationContext() {
+        return new ClassPathXmlApplicationContext("org/apache/camel/spring/config/TwoRouteRefOnException.xml");
+    }
+}
diff --git a/components/camel-spring/src/test/java/org/apache/camel/spring/config/TwoRouteRefReverseOnExceptionAndDLCErrorHandlerTest.java b/components/camel-spring/src/test/java/org/apache/camel/spring/config/TwoRouteRefReverseOnExceptionAndDLCErrorHandlerTest.java
new file mode 100644
index 00000000000..53b4fcfe466
--- /dev/null
+++ b/components/camel-spring/src/test/java/org/apache/camel/spring/config/TwoRouteRefReverseOnExceptionAndDLCErrorHandlerTest.java
@@ -0,0 +1,52 @@
+/**
+ * Licensed to the Apache Software Foundation (ASF) under one or more
+ * contributor license agreements.  See the NOTICE file distributed with
+ * this work for additional information regarding copyright ownership.
+ * The ASF licenses this file to You under the Apache License, Version 2.0
+ * (the "License"); you may not use this file except in compliance with
+ * the License.  You may obtain a copy of the License at
+ *
+ *      http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+package org.apache.camel.spring.config;
+
+import org.apache.camel.spring.SpringTestSupport;
+import org.springframework.context.support.AbstractXmlApplicationContext;
+import org.springframework.context.support.ClassPathXmlApplicationContext;
+
+/**
+ * @version $Revision: 938471 $
+ */
+public class TwoRouteRefReverseOnExceptionAndDLCErrorHandlerTest extends SpringTestSupport {
+
+    public void testTwoRouteRefReverseNoOnExceptionAndDLCErrorHandler() throws Exception {
+        getMockEndpoint("mock:foo").expectedMessageCount(1);
+        getMockEndpoint("mock:dead").expectedMessageCount(1);
+        getMockEndpoint("mock:handled").expectedMessageCount(0);
+
+        template.sendBody("direct:foo", "Hello World");
+
+        assertMockEndpointsSatisfied();
+    }
+
+    public void testTwoRouteRefReverseOnExceptionAndDLCErrorHandler() throws Exception {
+        getMockEndpoint("mock:bar").expectedMessageCount(1);
+        getMockEndpoint("mock:dead").expectedMessageCount(0);
+        getMockEndpoint("mock:handled").expectedMessageCount(1);
+
+        template.sendBody("direct:bar", "Hello World");
+
+        assertMockEndpointsSatisfied();
+    }
+
+    @Override
+    protected AbstractXmlApplicationContext createApplicationContext() {
+        return new ClassPathXmlApplicationContext("org/apache/camel/spring/config/TwoRouteRefReverseOnExceptionAndDLCErrorHandler.xml");
+    }
+}
diff --git a/components/camel-spring/src/test/java/org/apache/camel/spring/config/TwoRouteRefReverseOnExceptionTest.java b/components/camel-spring/src/test/java/org/apache/camel/spring/config/TwoRouteRefReverseOnExceptionTest.java
new file mode 100644
index 00000000000..98110364a67
--- /dev/null
+++ b/components/camel-spring/src/test/java/org/apache/camel/spring/config/TwoRouteRefReverseOnExceptionTest.java
@@ -0,0 +1,57 @@
+/**
+ * Licensed to the Apache Software Foundation (ASF) under one or more
+ * contributor license agreements.  See the NOTICE file distributed with
+ * this work for additional information regarding copyright ownership.
+ * The ASF licenses this file to You under the Apache License, Version 2.0
+ * (the "License"); you may not use this file except in compliance with
+ * the License.  You may obtain a copy of the License at
+ *
+ *      http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+package org.apache.camel.spring.config;
+
+import org.apache.camel.CamelExecutionException;
+import org.apache.camel.spring.SpringTestSupport;
+import org.springframework.context.support.AbstractXmlApplicationContext;
+import org.springframework.context.support.ClassPathXmlApplicationContext;
+
+/**
+ * @version $Revision: 938471 $
+ */
+public class TwoRouteRefReverseOnExceptionTest extends SpringTestSupport {
+
+    public void testTwoRouteRefReverseNoOnException() throws Exception {
+        getMockEndpoint("mock:foo").expectedMessageCount(1);
+        getMockEndpoint("mock:handled").expectedMessageCount(0);
+
+        try {
+            template.sendBody("direct:foo", "Hello World");
+            fail("Should have thrown exception");
+        } catch (CamelExecutionException e) {
+            assertIsInstanceOf(IllegalArgumentException.class, e.getCause());
+            assertEquals("Damn", e.getCause().getMessage());
+        }
+
+        assertMockEndpointsSatisfied();
+    }
+
+    public void testTwoRouteRefReverseOnException() throws Exception {
+        getMockEndpoint("mock:bar").expectedMessageCount(1);
+        getMockEndpoint("mock:handled").expectedMessageCount(1);
+
+        template.sendBody("direct:bar", "Hello World");
+
+        assertMockEndpointsSatisfied();
+    }
+
+    @Override
+    protected AbstractXmlApplicationContext createApplicationContext() {
+        return new ClassPathXmlApplicationContext("org/apache/camel/spring/config/TwoRouteRefReverseOnException.xml");
+    }
+}
diff --git a/components/camel-spring/src/test/resources/org/apache/camel/spring/config/OneRouteRefOnException.xml b/components/camel-spring/src/test/resources/org/apache/camel/spring/config/OneRouteRefOnException.xml
new file mode 100644
index 00000000000..3121f2c2114
--- /dev/null
+++ b/components/camel-spring/src/test/resources/org/apache/camel/spring/config/OneRouteRefOnException.xml
@@ -0,0 +1,52 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<!--
+    Licensed to the Apache Software Foundation (ASF) under one or more
+    contributor license agreements.  See the NOTICE file distributed with
+    this work for additional information regarding copyright ownership.
+    The ASF licenses this file to You under the Apache License, Version 2.0
+    (the "License"); you may not use this file except in compliance with
+    the License.  You may obtain a copy of the License at
+
+    http://www.apache.org/licenses/LICENSE-2.0
+
+    Unless required by applicable law or agreed to in writing, software
+    distributed under the License is distributed on an "AS IS" BASIS,
+    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+    See the License for the specific language governing permissions and
+    limitations under the License.
+-->
+<beans xmlns="http://www.springframework.org/schema/beans"
+       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
+       xsi:schemaLocation="
+       http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
+       http://camel.apache.org/schema/spring http://camel.apache.org/schema/spring/camel-spring.xsd
+    ">
+
+    <bean id="damn" class="java.lang.IllegalArgumentException">
+        <constructor-arg index="0" value="Damn"/>
+    </bean>
+
+    <routeContext id="oneRoutes" xmlns="http://camel.apache.org/schema/spring">
+        <route id="foo">
+            <from uri="direct:foo"/>
+            <to uri="mock:foo"/>
+            <throwException ref="damn"/>
+        </route>
+
+        <route id="bar">
+            <from uri="direct:bar"/>
+            <to uri="mock:bar"/>
+            <onException>
+                <exception>java.lang.IllegalArgumentException</exception>
+                <handled><constant>true</constant></handled>
+                <to uri="mock:handled"/>
+            </onException>
+            <throwException ref="damn"/>
+        </route>
+    </routeContext>
+
+    <camelContext id="myCamel" xmlns="http://camel.apache.org/schema/spring">
+        <routeContextRef ref="oneRoutes"/>
+    </camelContext>
+
+</beans>
diff --git a/components/camel-spring/src/test/resources/org/apache/camel/spring/config/OneRouteRefOnExceptionAndDLCErrorHandler.xml b/components/camel-spring/src/test/resources/org/apache/camel/spring/config/OneRouteRefOnExceptionAndDLCErrorHandler.xml
new file mode 100644
index 00000000000..b2fc48561ea
--- /dev/null
+++ b/components/camel-spring/src/test/resources/org/apache/camel/spring/config/OneRouteRefOnExceptionAndDLCErrorHandler.xml
@@ -0,0 +1,53 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<!--
+    Licensed to the Apache Software Foundation (ASF) under one or more
+    contributor license agreements.  See the NOTICE file distributed with
+    this work for additional information regarding copyright ownership.
+    The ASF licenses this file to You under the Apache License, Version 2.0
+    (the "License"); you may not use this file except in compliance with
+    the License.  You may obtain a copy of the License at
+
+    http://www.apache.org/licenses/LICENSE-2.0
+
+    Unless required by applicable law or agreed to in writing, software
+    distributed under the License is distributed on an "AS IS" BASIS,
+    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+    See the License for the specific language governing permissions and
+    limitations under the License.
+-->
+<beans xmlns="http://www.springframework.org/schema/beans"
+       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
+       xsi:schemaLocation="
+       http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
+       http://camel.apache.org/schema/spring http://camel.apache.org/schema/spring/camel-spring.xsd
+    ">
+
+    <bean id="damn" class="java.lang.IllegalArgumentException">
+        <constructor-arg index="0" value="Damn"/>
+    </bean>
+
+    <routeContext id="oneRoutes" xmlns="http://camel.apache.org/schema/spring">
+        <route id="foo" errorHandlerRef="dlc">
+            <from uri="direct:foo"/>
+            <to uri="mock:foo"/>
+            <throwException ref="damn"/>
+        </route>
+
+        <route id="bar" errorHandlerRef="dlc">
+            <from uri="direct:bar"/>
+            <to uri="mock:bar"/>
+            <onException>
+                <exception>java.lang.IllegalArgumentException</exception>
+                <handled><constant>true</constant></handled>
+                <to uri="mock:handled"/>
+            </onException>
+            <throwException ref="damn"/>
+        </route>
+    </routeContext>
+
+    <camelContext id="myCamel" xmlns="http://camel.apache.org/schema/spring">
+        <errorHandler id="dlc" deadLetterUri="mock:dead" type="DeadLetterChannel"/>
+        <routeContextRef ref="oneRoutes"/>
+    </camelContext>
+
+</beans>
diff --git a/components/camel-spring/src/test/resources/org/apache/camel/spring/config/OneRouteRefOnExceptionAndTwoDLCErrorHandler.xml b/components/camel-spring/src/test/resources/org/apache/camel/spring/config/OneRouteRefOnExceptionAndTwoDLCErrorHandler.xml
new file mode 100644
index 00000000000..5a6fd4c93e7
--- /dev/null
+++ b/components/camel-spring/src/test/resources/org/apache/camel/spring/config/OneRouteRefOnExceptionAndTwoDLCErrorHandler.xml
@@ -0,0 +1,54 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<!--
+    Licensed to the Apache Software Foundation (ASF) under one or more
+    contributor license agreements.  See the NOTICE file distributed with
+    this work for additional information regarding copyright ownership.
+    The ASF licenses this file to You under the Apache License, Version 2.0
+    (the "License"); you may not use this file except in compliance with
+    the License.  You may obtain a copy of the License at
+
+    http://www.apache.org/licenses/LICENSE-2.0
+
+    Unless required by applicable law or agreed to in writing, software
+    distributed under the License is distributed on an "AS IS" BASIS,
+    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+    See the License for the specific language governing permissions and
+    limitations under the License.
+-->
+<beans xmlns="http://www.springframework.org/schema/beans"
+       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
+       xsi:schemaLocation="
+       http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
+       http://camel.apache.org/schema/spring http://camel.apache.org/schema/spring/camel-spring.xsd
+    ">
+
+    <bean id="damn" class="java.lang.IllegalArgumentException">
+        <constructor-arg index="0" value="Damn"/>
+    </bean>
+
+    <routeContext id="oneRoutes" xmlns="http://camel.apache.org/schema/spring">
+        <route id="foo" errorHandlerRef="dlc2">
+            <from uri="direct:foo"/>
+            <to uri="mock:foo"/>
+            <throwException ref="damn"/>
+        </route>
+
+        <route id="bar" errorHandlerRef="dlc">
+            <from uri="direct:bar"/>
+            <to uri="mock:bar"/>
+            <onException>
+                <exception>java.lang.IllegalArgumentException</exception>
+                <handled><constant>true</constant></handled>
+                <to uri="mock:handled"/>
+            </onException>
+            <throwException ref="damn"/>
+        </route>
+    </routeContext>
+
+    <camelContext id="myCamel" xmlns="http://camel.apache.org/schema/spring">
+        <errorHandler id="dlc" deadLetterUri="mock:dead" type="DeadLetterChannel"/>
+        <errorHandler id="dlc2" deadLetterUri="mock:dead2" type="DeadLetterChannel"/>
+        <routeContextRef ref="oneRoutes"/>
+    </camelContext>
+
+</beans>
diff --git a/components/camel-spring/src/test/resources/org/apache/camel/spring/config/OneRouteRefReverseOnException.xml b/components/camel-spring/src/test/resources/org/apache/camel/spring/config/OneRouteRefReverseOnException.xml
new file mode 100644
index 00000000000..2ad485f94ad
--- /dev/null
+++ b/components/camel-spring/src/test/resources/org/apache/camel/spring/config/OneRouteRefReverseOnException.xml
@@ -0,0 +1,52 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<!--
+    Licensed to the Apache Software Foundation (ASF) under one or more
+    contributor license agreements.  See the NOTICE file distributed with
+    this work for additional information regarding copyright ownership.
+    The ASF licenses this file to You under the Apache License, Version 2.0
+    (the "License"); you may not use this file except in compliance with
+    the License.  You may obtain a copy of the License at
+
+    http://www.apache.org/licenses/LICENSE-2.0
+
+    Unless required by applicable law or agreed to in writing, software
+    distributed under the License is distributed on an "AS IS" BASIS,
+    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+    See the License for the specific language governing permissions and
+    limitations under the License.
+-->
+<beans xmlns="http://www.springframework.org/schema/beans"
+       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
+       xsi:schemaLocation="
+       http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
+       http://camel.apache.org/schema/spring http://camel.apache.org/schema/spring/camel-spring.xsd
+    ">
+
+    <bean id="damn" class="java.lang.IllegalArgumentException">
+        <constructor-arg index="0" value="Damn"/>
+    </bean>
+
+    <routeContext id="oneRoutes" xmlns="http://camel.apache.org/schema/spring">
+        <route id="bar">
+            <from uri="direct:bar"/>
+            <to uri="mock:bar"/>
+            <onException>
+                <exception>java.lang.IllegalArgumentException</exception>
+                <handled><constant>true</constant></handled>
+                <to uri="mock:handled"/>
+            </onException>
+            <throwException ref="damn"/>
+        </route>
+
+        <route id="foo">
+            <from uri="direct:foo"/>
+            <to uri="mock:foo"/>
+            <throwException ref="damn"/>
+        </route>
+    </routeContext>
+
+    <camelContext id="myCamel" xmlns="http://camel.apache.org/schema/spring">
+        <routeContextRef ref="oneRoutes"/>
+    </camelContext>
+
+</beans>
diff --git a/components/camel-spring/src/test/resources/org/apache/camel/spring/config/OneRouteRefReverseOnExceptionAndDLCErrorHandler.xml b/components/camel-spring/src/test/resources/org/apache/camel/spring/config/OneRouteRefReverseOnExceptionAndDLCErrorHandler.xml
new file mode 100644
index 00000000000..cfbf91b00de
--- /dev/null
+++ b/components/camel-spring/src/test/resources/org/apache/camel/spring/config/OneRouteRefReverseOnExceptionAndDLCErrorHandler.xml
@@ -0,0 +1,53 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<!--
+    Licensed to the Apache Software Foundation (ASF) under one or more
+    contributor license agreements.  See the NOTICE file distributed with
+    this work for additional information regarding copyright ownership.
+    The ASF licenses this file to You under the Apache License, Version 2.0
+    (the "License"); you may not use this file except in compliance with
+    the License.  You may obtain a copy of the License at
+
+    http://www.apache.org/licenses/LICENSE-2.0
+
+    Unless required by applicable law or agreed to in writing, software
+    distributed under the License is distributed on an "AS IS" BASIS,
+    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+    See the License for the specific language governing permissions and
+    limitations under the License.
+-->
+<beans xmlns="http://www.springframework.org/schema/beans"
+       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
+       xsi:schemaLocation="
+       http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
+       http://camel.apache.org/schema/spring http://camel.apache.org/schema/spring/camel-spring.xsd
+    ">
+
+    <bean id="damn" class="java.lang.IllegalArgumentException">
+        <constructor-arg index="0" value="Damn"/>
+    </bean>
+
+    <routeContext id="oneRoutes" xmlns="http://camel.apache.org/schema/spring">
+        <route id="bar" errorHandlerRef="dlc">
+            <from uri="direct:bar"/>
+            <to uri="mock:bar"/>
+            <onException>
+                <exception>java.lang.IllegalArgumentException</exception>
+                <handled><constant>true</constant></handled>
+                <to uri="mock:handled"/>
+            </onException>
+            <throwException ref="damn"/>
+        </route>
+
+        <route id="foo" errorHandlerRef="dlc">
+            <from uri="direct:foo"/>
+            <to uri="mock:foo"/>
+            <throwException ref="damn"/>
+        </route>
+    </routeContext>
+
+    <camelContext id="myCamel" xmlns="http://camel.apache.org/schema/spring">
+        <errorHandler id="dlc" deadLetterUri="mock:dead" type="DeadLetterChannel"/>
+        <routeContextRef ref="oneRoutes"/>
+    </camelContext>
+
+</beans>
diff --git a/components/camel-spring/src/test/resources/org/apache/camel/spring/config/TwoRouteRefOnException.xml b/components/camel-spring/src/test/resources/org/apache/camel/spring/config/TwoRouteRefOnException.xml
new file mode 100644
index 00000000000..897f462df9a
--- /dev/null
+++ b/components/camel-spring/src/test/resources/org/apache/camel/spring/config/TwoRouteRefOnException.xml
@@ -0,0 +1,55 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<!--
+    Licensed to the Apache Software Foundation (ASF) under one or more
+    contributor license agreements.  See the NOTICE file distributed with
+    this work for additional information regarding copyright ownership.
+    The ASF licenses this file to You under the Apache License, Version 2.0
+    (the "License"); you may not use this file except in compliance with
+    the License.  You may obtain a copy of the License at
+
+    http://www.apache.org/licenses/LICENSE-2.0
+
+    Unless required by applicable law or agreed to in writing, software
+    distributed under the License is distributed on an "AS IS" BASIS,
+    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+    See the License for the specific language governing permissions and
+    limitations under the License.
+-->
+<beans xmlns="http://www.springframework.org/schema/beans"
+       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
+       xsi:schemaLocation="
+       http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
+       http://camel.apache.org/schema/spring http://camel.apache.org/schema/spring/camel-spring.xsd
+    ">
+
+    <bean id="damn" class="java.lang.IllegalArgumentException">
+        <constructor-arg index="0" value="Damn"/>
+    </bean>
+
+    <routeContext id="fooRoute" xmlns="http://camel.apache.org/schema/spring">
+        <route id="foo">
+            <from uri="direct:foo"/>
+            <to uri="mock:foo"/>
+            <throwException ref="damn"/>
+        </route>
+    </routeContext>
+
+    <routeContext id="barRoute" xmlns="http://camel.apache.org/schema/spring">
+        <route id="bar">
+            <from uri="direct:bar"/>
+            <to uri="mock:bar"/>
+            <onException>
+                <exception>java.lang.IllegalArgumentException</exception>
+                <handled><constant>true</constant></handled>
+                <to uri="mock:handled"/>
+            </onException>
+            <throwException ref="damn"/>
+        </route>
+    </routeContext>
+
+    <camelContext id="myCamel" xmlns="http://camel.apache.org/schema/spring">
+        <routeContextRef ref="fooRoute"/>
+        <routeContextRef ref="barRoute"/>
+    </camelContext>
+
+</beans>
diff --git a/components/camel-spring/src/test/resources/org/apache/camel/spring/config/TwoRouteRefOnExceptionAndDLCErrorHandler.xml b/components/camel-spring/src/test/resources/org/apache/camel/spring/config/TwoRouteRefOnExceptionAndDLCErrorHandler.xml
new file mode 100644
index 00000000000..62795a5cd64
--- /dev/null
+++ b/components/camel-spring/src/test/resources/org/apache/camel/spring/config/TwoRouteRefOnExceptionAndDLCErrorHandler.xml
@@ -0,0 +1,56 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<!--
+    Licensed to the Apache Software Foundation (ASF) under one or more
+    contributor license agreements.  See the NOTICE file distributed with
+    this work for additional information regarding copyright ownership.
+    The ASF licenses this file to You under the Apache License, Version 2.0
+    (the "License"); you may not use this file except in compliance with
+    the License.  You may obtain a copy of the License at
+
+    http://www.apache.org/licenses/LICENSE-2.0
+
+    Unless required by applicable law or agreed to in writing, software
+    distributed under the License is distributed on an "AS IS" BASIS,
+    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+    See the License for the specific language governing permissions and
+    limitations under the License.
+-->
+<beans xmlns="http://www.springframework.org/schema/beans"
+       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
+       xsi:schemaLocation="
+       http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
+       http://camel.apache.org/schema/spring http://camel.apache.org/schema/spring/camel-spring.xsd
+    ">
+
+    <bean id="damn" class="java.lang.IllegalArgumentException">
+        <constructor-arg index="0" value="Damn"/>
+    </bean>
+
+    <routeContext id="fooRoute" xmlns="http://camel.apache.org/schema/spring">
+        <route id="foo" errorHandlerRef="dlc">
+            <from uri="direct:foo"/>
+            <to uri="mock:foo"/>
+            <throwException ref="damn"/>
+        </route>
+    </routeContext>
+
+    <routeContext id="barRoute" xmlns="http://camel.apache.org/schema/spring">
+        <route id="bar" errorHandlerRef="dlc">
+            <from uri="direct:bar"/>
+            <to uri="mock:bar"/>
+            <onException>
+                <exception>java.lang.IllegalArgumentException</exception>
+                <handled><constant>true</constant></handled>
+                <to uri="mock:handled"/>
+            </onException>
+            <throwException ref="damn"/>
+        </route>
+    </routeContext>
+
+    <camelContext id="myCamel" xmlns="http://camel.apache.org/schema/spring">
+        <errorHandler id="dlc" deadLetterUri="mock:dead" type="DeadLetterChannel"/>
+        <routeContextRef ref="fooRoute"/>
+        <routeContextRef ref="barRoute"/>
+    </camelContext>
+
+</beans>
diff --git a/components/camel-spring/src/test/resources/org/apache/camel/spring/config/TwoRouteRefReverseOnException.xml b/components/camel-spring/src/test/resources/org/apache/camel/spring/config/TwoRouteRefReverseOnException.xml
new file mode 100644
index 00000000000..4074dad1f2f
--- /dev/null
+++ b/components/camel-spring/src/test/resources/org/apache/camel/spring/config/TwoRouteRefReverseOnException.xml
@@ -0,0 +1,55 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<!--
+    Licensed to the Apache Software Foundation (ASF) under one or more
+    contributor license agreements.  See the NOTICE file distributed with
+    this work for additional information regarding copyright ownership.
+    The ASF licenses this file to You under the Apache License, Version 2.0
+    (the "License"); you may not use this file except in compliance with
+    the License.  You may obtain a copy of the License at
+
+    http://www.apache.org/licenses/LICENSE-2.0
+
+    Unless required by applicable law or agreed to in writing, software
+    distributed under the License is distributed on an "AS IS" BASIS,
+    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+    See the License for the specific language governing permissions and
+    limitations under the License.
+-->
+<beans xmlns="http://www.springframework.org/schema/beans"
+       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
+       xsi:schemaLocation="
+       http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
+       http://camel.apache.org/schema/spring http://camel.apache.org/schema/spring/camel-spring.xsd
+    ">
+
+    <bean id="damn" class="java.lang.IllegalArgumentException">
+        <constructor-arg index="0" value="Damn"/>
+    </bean>
+
+    <routeContext id="barRoute" xmlns="http://camel.apache.org/schema/spring">
+        <route id="bar">
+            <from uri="direct:bar"/>
+            <to uri="mock:bar"/>
+            <onException>
+                <exception>java.lang.IllegalArgumentException</exception>
+                <handled><constant>true</constant></handled>
+                <to uri="mock:handled"/>
+            </onException>
+            <throwException ref="damn"/>
+        </route>
+    </routeContext>
+
+    <routeContext id="fooRoute" xmlns="http://camel.apache.org/schema/spring">
+        <route id="foo">
+            <from uri="direct:foo"/>
+            <to uri="mock:foo"/>
+            <throwException ref="damn"/>
+        </route>
+    </routeContext>
+
+    <camelContext id="myCamel" xmlns="http://camel.apache.org/schema/spring">
+        <routeContextRef ref="barRoute"/>
+        <routeContextRef ref="fooRoute"/>
+    </camelContext>
+
+</beans>
diff --git a/components/camel-spring/src/test/resources/org/apache/camel/spring/config/TwoRouteRefReverseOnExceptionAndDLCErrorHandler.xml b/components/camel-spring/src/test/resources/org/apache/camel/spring/config/TwoRouteRefReverseOnExceptionAndDLCErrorHandler.xml
new file mode 100644
index 00000000000..39a98c7e6bd
--- /dev/null
+++ b/components/camel-spring/src/test/resources/org/apache/camel/spring/config/TwoRouteRefReverseOnExceptionAndDLCErrorHandler.xml
@@ -0,0 +1,56 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<!--
+    Licensed to the Apache Software Foundation (ASF) under one or more
+    contributor license agreements.  See the NOTICE file distributed with
+    this work for additional information regarding copyright ownership.
+    The ASF licenses this file to You under the Apache License, Version 2.0
+    (the "License"); you may not use this file except in compliance with
+    the License.  You may obtain a copy of the License at
+
+    http://www.apache.org/licenses/LICENSE-2.0
+
+    Unless required by applicable law or agreed to in writing, software
+    distributed under the License is distributed on an "AS IS" BASIS,
+    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+    See the License for the specific language governing permissions and
+    limitations under the License.
+-->
+<beans xmlns="http://www.springframework.org/schema/beans"
+       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
+       xsi:schemaLocation="
+       http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
+       http://camel.apache.org/schema/spring http://camel.apache.org/schema/spring/camel-spring.xsd
+    ">
+
+    <bean id="damn" class="java.lang.IllegalArgumentException">
+        <constructor-arg index="0" value="Damn"/>
+    </bean>
+
+    <routeContext id="fooRoute" xmlns="http://camel.apache.org/schema/spring">
+        <route id="foo" errorHandlerRef="dlc">
+            <from uri="direct:foo"/>
+            <to uri="mock:foo"/>
+            <throwException ref="damn"/>
+        </route>
+    </routeContext>
+
+    <routeContext id="barRoute" xmlns="http://camel.apache.org/schema/spring">
+        <route id="bar" errorHandlerRef="dlc">
+            <from uri="direct:bar"/>
+            <to uri="mock:bar"/>
+            <onException>
+                <exception>java.lang.IllegalArgumentException</exception>
+                <handled><constant>true</constant></handled>
+                <to uri="mock:handled"/>
+            </onException>
+            <throwException ref="damn"/>
+        </route>
+    </routeContext>
+
+    <camelContext id="myCamel" xmlns="http://camel.apache.org/schema/spring">
+        <errorHandler id="dlc" deadLetterUri="mock:dead" type="DeadLetterChannel"/>
+        <routeContextRef ref="barRoute"/>
+        <routeContextRef ref="fooRoute"/>
+    </camelContext>
+
+</beans>
