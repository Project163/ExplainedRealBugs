diff --git a/camel-core/src/main/java/org/apache/camel/builder/xml/Namespaces.java b/camel-core/src/main/java/org/apache/camel/builder/xml/Namespaces.java
index 3cb8d6d28d3..e33e73410a3 100644
--- a/camel-core/src/main/java/org/apache/camel/builder/xml/Namespaces.java
+++ b/camel-core/src/main/java/org/apache/camel/builder/xml/Namespaces.java
@@ -140,6 +140,5 @@ public class Namespaces {
      */
     public void configure(NamespaceAware namespaceAware) {
         namespaceAware.setNamespaces(getNamespaces());
-
     }
 }
diff --git a/components/camel-spring/src/main/java/org/apache/camel/spring/handler/CamelNamespaceHandler.java b/components/camel-spring/src/main/java/org/apache/camel/spring/handler/CamelNamespaceHandler.java
index fdf36ce2f05..16cc61058b8 100644
--- a/components/camel-spring/src/main/java/org/apache/camel/spring/handler/CamelNamespaceHandler.java
+++ b/components/camel-spring/src/main/java/org/apache/camel/spring/handler/CamelNamespaceHandler.java
@@ -24,13 +24,14 @@ import java.util.Set;
 import javax.xml.bind.Binder;
 import javax.xml.bind.JAXBContext;
 import javax.xml.bind.JAXBException;
-
 import org.w3c.dom.Element;
 import org.w3c.dom.Node;
 import org.w3c.dom.NodeList;
 
 import org.apache.camel.ExchangePattern;
 import org.apache.camel.builder.xml.Namespaces;
+import org.apache.camel.model.FromType;
+import org.apache.camel.model.SendType;
 import org.apache.camel.model.dataformat.ArtixDSDataFormat;
 import org.apache.camel.model.dataformat.JaxbDataFormat;
 import org.apache.camel.model.dataformat.SerializationDataFormat;
@@ -69,12 +70,10 @@ public class CamelNamespaceHandler extends NamespaceHandlerSupport {
     private JAXBContext jaxbContext;
     private Map<String, BeanDefinitionParser> parserMap = new HashMap<String, BeanDefinitionParser>();
 
-
     public ModelFileGenerator createModelFileGenerator() throws JAXBException {
         return new ModelFileGenerator(getJaxbContext());
     }
 
-
     public void init() {
         // remoting
         addBeanDefinitionParser("proxy", CamelProxyFactoryBean.class);
@@ -96,9 +95,10 @@ public class CamelNamespaceHandler extends NamespaceHandlerSupport {
         // jmx agent
         addBeanDefinitionParser("jmxAgent", CamelJMXAgentType.class);
 
-        // TODO switch to use the above mechanism?
-        registerParser("endpoint", endpointParser);
+        // endpoint
+        addBeanDefinitionParser("endpoint", EndpointFactoryBean.class);
 
+        // camel context
         Class cl = CamelContextFactoryBean.class;
         try {
             cl = Class.forName("org.apache.camel.osgi.CamelContextFactoryBean");
@@ -125,8 +125,7 @@ public class CamelNamespaceHandler extends NamespaceHandlerSupport {
         registerParser(elementName, new ScriptDefinitionParser(engineName));
     }
 
-    protected void registerParser(String name,
-                                  org.springframework.beans.factory.xml.BeanDefinitionParser parser) {
+    protected void registerParser(String name, org.springframework.beans.factory.xml.BeanDefinitionParser parser) {
         parserElementNames.add(name);
         registerBeanDefinitionParser(name, parser);
     }
@@ -139,11 +138,6 @@ public class CamelNamespaceHandler extends NamespaceHandlerSupport {
         try {
             binder = getJaxbContext().createBinder();
             return binder.unmarshal(element);
-            /*
-             * Unmarshaller unmarshaller =
-             * getJaxbContext().createUnmarshaller(); return
-             * unmarshaller.unmarshal(element);
-             */
         } catch (JAXBException e) {
             throw new BeanDefinitionStoreException("Failed to parse JAXB element: " + e, e);
         }
@@ -190,8 +184,7 @@ public class CamelNamespaceHandler extends NamespaceHandlerSupport {
 
             String contextId = element.getAttribute("id");
 
-            // lets avoid folks having to explicitly give an ID to a camel
-            // context
+            // lets avoid folks having to explicitly give an ID to a camel context
             if (ObjectHelper.isEmpty(contextId)) {
                 contextId = "camelContext";
                 element.setAttribute("id", contextId);
@@ -225,16 +218,7 @@ public class CamelNamespaceHandler extends NamespaceHandlerSupport {
                         createBeanPostProcessor(parserContext, contextId, childElement, builder);
                         createdBeanPostProcessor = true;
                     } else if (localName.equals("endpoint")) {
-                        BeanDefinition definition = endpointParser.parse(childElement, parserContext);
-                        String id = childElement.getAttribute("id");
-                        if (ObjectHelper.isNotEmpty(id)) {
-                            // TODO we can zap this?
-                            definition.getPropertyValues()
-                                .addPropertyValue("camelContext", new RuntimeBeanReference(contextId));
-                            // definition.getPropertyValues().addPropertyValue("context",
-                            // builder.getBeanDefinition());
-                            parserContext.registerComponent(new BeanComponentDefinition(definition, id));
-                        }
+                        registerEndpoint(childElement, parserContext, contextId);
                     } else {
                         BeanDefinitionParser parser = parserMap.get(localName);
                         if (parser != null) {
@@ -251,6 +235,10 @@ public class CamelNamespaceHandler extends NamespaceHandlerSupport {
                     }
                 }
             }
+
+            // inject endpoints defined in routes where we can have set an id in the from/to types
+            injectWithinRoutesNodeIdsAsEndpoint(element, parserContext, contextId);
+
             // lets inject the namespaces into any namespace aware POJOs
             injectNamespaces(element);
             if (!createdBeanPostProcessor) {
@@ -282,4 +270,37 @@ public class CamelNamespaceHandler extends NamespaceHandlerSupport {
             }
         }
     }
+
+    protected void injectWithinRoutesNodeIdsAsEndpoint(Element element, ParserContext parserContext, String contextId) {
+        NodeList list = element.getChildNodes();
+        int size = list.getLength();
+        for (int i = 0; i < size; i++) {
+            Node child = list.item(i);
+            if (child instanceof Element) {
+                Element childElement = (Element)child;
+                Object object = binder.getJAXBNode(child);
+                // we only want from/to types to be registered as endpoints
+                if (object instanceof FromType || object instanceof SendType) {
+                    registerEndpoint(childElement, parserContext, contextId);
+                }
+                // recursive
+                injectWithinRoutesNodeIdsAsEndpoint(childElement, parserContext, contextId);
+            }
+        }
+    }
+
+    private void registerEndpoint(Element childElement, ParserContext parserContext, String contextId) {
+        String id = childElement.getAttribute("id");
+        // must have an id to be registered
+        if (ObjectHelper.isNotEmpty(id)) {
+            BeanDefinition definition = endpointParser.parse(childElement, parserContext);
+            // TODO we can zap this?
+            definition.getPropertyValues()
+                .addPropertyValue("camelContext", new RuntimeBeanReference(contextId));
+            // definition.getPropertyValues().addPropertyValue("context",
+            // builder.getBeanDefinition());
+            parserContext.registerComponent(new BeanComponentDefinition(definition, id));
+        }
+    }
+    
 }
diff --git a/components/camel-spring/src/test/java/org/apache/camel/spring/NodeIdReferenceTest.java b/components/camel-spring/src/test/java/org/apache/camel/spring/NodeIdReferenceTest.java
new file mode 100644
index 00000000000..b791e905476
--- /dev/null
+++ b/components/camel-spring/src/test/java/org/apache/camel/spring/NodeIdReferenceTest.java
@@ -0,0 +1,51 @@
+/**
+ * Licensed to the Apache Software Foundation (ASF) under one or more
+ * contributor license agreements.  See the NOTICE file distributed with
+ * this work for additional information regarding copyright ownership.
+ * The ASF licenses this file to You under the Apache License, Version 2.0
+ * (the "License"); you may not use this file except in compliance with
+ * the License.  You may obtain a copy of the License at
+ *
+ *      http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+package org.apache.camel.spring;
+
+import org.apache.camel.Endpoint;
+import org.apache.camel.EndpointInject;
+import org.apache.camel.ProducerTemplate;
+import org.apache.camel.component.mock.MockEndpoint;
+import org.springframework.beans.factory.annotation.Autowired;
+import org.springframework.test.context.ContextConfiguration;
+import org.springframework.test.context.junit38.AbstractJUnit38SpringContextTests;
+
+/**
+ * @version $Revision$
+ */
+@ContextConfiguration
+public class NodeIdReferenceTest extends AbstractJUnit38SpringContextTests {
+    protected String expectedBody = "Godday World";
+
+    @Autowired
+    protected ProducerTemplate producer;
+
+    @EndpointInject(name = "foo")
+    protected Endpoint start;
+
+    @EndpointInject(uri = "mock:result")
+    protected MockEndpoint result;
+
+    public void testNodeIdReference() throws Exception {
+        result.expectedBodiesReceived(expectedBody);
+
+        producer.sendBody(start, expectedBody);
+
+        result.assertIsSatisfied();
+    }
+
+}
\ No newline at end of file
diff --git a/components/camel-spring/src/test/resources/org/apache/camel/spring/NodeIdReferenceTest-context.xml b/components/camel-spring/src/test/resources/org/apache/camel/spring/NodeIdReferenceTest-context.xml
new file mode 100644
index 00000000000..f175bdddfd5
--- /dev/null
+++ b/components/camel-spring/src/test/resources/org/apache/camel/spring/NodeIdReferenceTest-context.xml
@@ -0,0 +1,34 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<!--
+    Licensed to the Apache Software Foundation (ASF) under one or more
+    contributor license agreements.  See the NOTICE file distributed with
+    this work for additional information regarding copyright ownership.
+    The ASF licenses this file to You under the Apache License, Version 2.0
+    (the "License"); you may not use this file except in compliance with
+    the License.  You may obtain a copy of the License at
+
+    http://www.apache.org/licenses/LICENSE-2.0
+
+    Unless required by applicable law or agreed to in writing, software
+    distributed under the License is distributed on an "AS IS" BASIS,
+    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+    See the License for the specific language governing permissions and
+    limitations under the License.
+-->
+<beans xmlns="http://www.springframework.org/schema/beans"
+       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
+       xsi:schemaLocation="
+       http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
+       http://camel.apache.org/schema/spring http://camel.apache.org/schema/spring/camel-spring.xsd
+    ">
+
+    <camelContext xmlns="http://camel.apache.org/schema/spring">
+        <template id="camelTemplate"/>
+
+        <route>
+            <from id="foo" uri="direct:start"/>
+            <to uri="mock:result"/>
+        </route>
+    </camelContext>
+
+</beans>
