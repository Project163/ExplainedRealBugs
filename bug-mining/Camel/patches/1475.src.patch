diff --git a/camel-core/src/main/java/org/apache/camel/impl/RouteService.java b/camel-core/src/main/java/org/apache/camel/impl/RouteService.java
index 6bbc91b6e5d..24b45381d38 100644
--- a/camel-core/src/main/java/org/apache/camel/impl/RouteService.java
+++ b/camel-core/src/main/java/org/apache/camel/impl/RouteService.java
@@ -238,6 +238,7 @@ public class RouteService extends ServiceSupport {
 
     protected void startChildService(Route route, List<Service> services) throws Exception {
         for (Service service : services) {
+            LOG.debug("Starting {}", service);
             for (LifecycleStrategy strategy : camelContext.getLifecycleStrategies()) {
                 strategy.onServiceAdd(camelContext, service, route);
             }
diff --git a/camel-core/src/main/java/org/apache/camel/model/ChoiceDefinition.java b/camel-core/src/main/java/org/apache/camel/model/ChoiceDefinition.java
index 11b8119fc30..c58bfc94663 100644
--- a/camel-core/src/main/java/org/apache/camel/model/ChoiceDefinition.java
+++ b/camel-core/src/main/java/org/apache/camel/model/ChoiceDefinition.java
@@ -16,9 +16,11 @@
  */
 package org.apache.camel.model;
 
+import java.util.AbstractList;
 import java.util.ArrayList;
 import java.util.Collections;
 import java.util.List;
+
 import javax.xml.bind.annotation.XmlAccessType;
 import javax.xml.bind.annotation.XmlAccessorType;
 import javax.xml.bind.annotation.XmlElement;
@@ -48,15 +50,69 @@ public class ChoiceDefinition extends ProcessorDefinition<ChoiceDefinition> {
 
     public ChoiceDefinition() {
     }
+    
+    @Override
+    public List<ProcessorDefinition> getOutputs() {
+        return new AbstractList<ProcessorDefinition>() {
+            public ProcessorDefinition get(int index) {
+                if (index < whenClauses.size()) {
+                    return whenClauses.get(index);
+                } 
+                if (index == whenClauses.size()) {
+                    return otherwise;
+                }
+                throw new IndexOutOfBoundsException();
+            }
+            public boolean add(ProcessorDefinition def) {
+                if (def instanceof WhenDefinition) {
+                    return whenClauses.add((WhenDefinition)def);
+                } else if (def instanceof OtherwiseDefinition) {
+                    otherwise = (OtherwiseDefinition)def;
+                    return true;
+                }
+                throw new IllegalArgumentException();
+            }
+            public int size() {
+                return whenClauses.size() + (otherwise == null ? 0 : 1);
+            }
+            public void clear() {
+                whenClauses.clear();
+                otherwise = null;
+            }
+            public ProcessorDefinition set(int index, ProcessorDefinition element) {
+                if (index < whenClauses.size()) {
+                    if (element instanceof WhenDefinition) {
+                        return whenClauses.set(index, (WhenDefinition)element);
+                    }
+                    throw new IllegalArgumentException();
+                } else if (index == whenClauses.size()) {
+                    ProcessorDefinition old = otherwise;
+                    otherwise = (OtherwiseDefinition)element;
+                    return old;
+                }
+                throw new IndexOutOfBoundsException();
+            }
+            public ProcessorDefinition remove(int index) {
+                if (index < whenClauses.size()) {
+                    return whenClauses.remove(index);
+                } else if (index == whenClauses.size()) {
+                    ProcessorDefinition old = otherwise;
+                    otherwise = null;
+                    return old;
+                }
+                throw new IndexOutOfBoundsException();
+            }
+        };
+    }
 
+    @Override
+    public boolean isOutputSupported() {
+        return true;
+    }
+    
     @Override
     public String toString() {
-        if (getOtherwise() != null) {
-            return "Choice[" + getWhenClauses() + " " + getOtherwise() + "]";
-        } else {
-            return "Choice[" + getWhenClauses() + "]";
-
-        }
+        return "Choice[" + getWhenClauses() + (getOtherwise() != null ? " " + getOtherwise() : "") + "]";
     }
 
     @Override
@@ -67,8 +123,8 @@ public class ChoiceDefinition extends ProcessorDefinition<ChoiceDefinition> {
     @Override
     public Processor createProcessor(RouteContext routeContext) throws Exception {
         List<FilterProcessor> filters = new ArrayList<FilterProcessor>();
-        for (WhenDefinition whenClaus : whenClauses) {
-            filters.add(whenClaus.createProcessor(routeContext));
+        for (WhenDefinition whenClause : whenClauses) {
+            filters.add(whenClause.createProcessor(routeContext));
         }
         Processor otherwiseProcessor = null;
         if (otherwise != null) {
@@ -87,9 +143,7 @@ public class ChoiceDefinition extends ProcessorDefinition<ChoiceDefinition> {
      * @return the builder
      */
     public ChoiceDefinition when(Predicate predicate) {
-        WhenDefinition when = new WhenDefinition(predicate);
-        when.setParent(this);
-        getWhenClauses().add(when);
+        addClause(new WhenDefinition(predicate));
         return this;
     }
 
@@ -99,14 +153,17 @@ public class ChoiceDefinition extends ProcessorDefinition<ChoiceDefinition> {
      * @return expression to be used as builder to configure the when node
      */
     public ExpressionClause<ChoiceDefinition> when() {
-        WhenDefinition when = new WhenDefinition();
-        when.setParent(this);
-        getWhenClauses().add(when);
         ExpressionClause<ChoiceDefinition> clause = new ExpressionClause<ChoiceDefinition>(this);
-        when.setExpression(clause);
+        addClause(new WhenDefinition(clause));
         return clause;
     }
-
+    
+    private void addClause(ProcessorDefinition when) {
+        popBlock();
+        addOutput(when);
+        pushBlock(when);
+    }
+    
     /**
      * Sets the otherwise node
      *
@@ -114,8 +171,7 @@ public class ChoiceDefinition extends ProcessorDefinition<ChoiceDefinition> {
      */
     public ChoiceDefinition otherwise() {
         OtherwiseDefinition answer = new OtherwiseDefinition();
-        answer.setParent(this);
-        setOtherwise(answer);
+        addClause(answer);
         return this;
     }
 
@@ -132,20 +188,6 @@ public class ChoiceDefinition extends ProcessorDefinition<ChoiceDefinition> {
         }
     }
 
-    @Override
-    public void addOutput(ProcessorDefinition output) {
-        super.addOutput(output);
-        // re-configure parent as its a tad more complex for the Content Based Router
-        if (otherwise != null) {
-            output.setParent(otherwise);
-        } else if (!getWhenClauses().isEmpty()) {
-            int size = getWhenClauses().size();
-            output.setParent(getWhenClauses().get(size - 1));
-        } else {
-            output.setParent(this);
-        }
-    }
-
     // Properties
     // -------------------------------------------------------------------------
 
@@ -167,22 +209,6 @@ public class ChoiceDefinition extends ProcessorDefinition<ChoiceDefinition> {
         this.whenClauses = whenClauses;
     }
 
-    @SuppressWarnings("unchecked")
-    public List<ProcessorDefinition> getOutputs() {
-        if (otherwise != null) {
-            return otherwise.getOutputs();
-        } else if (whenClauses.isEmpty()) {
-            return Collections.EMPTY_LIST;
-        } else {
-            WhenDefinition when = whenClauses.get(whenClauses.size() - 1);
-            return when.getOutputs();
-        }
-    }
-
-    public boolean isOutputSupported() {
-        return true;
-    }
-
     public OtherwiseDefinition getOtherwise() {
         return otherwise;
     }
diff --git a/camel-core/src/main/java/org/apache/camel/model/OtherwiseDefinition.java b/camel-core/src/main/java/org/apache/camel/model/OtherwiseDefinition.java
index 4ae6039eef0..7a6686f6d15 100644
--- a/camel-core/src/main/java/org/apache/camel/model/OtherwiseDefinition.java
+++ b/camel-core/src/main/java/org/apache/camel/model/OtherwiseDefinition.java
@@ -32,7 +32,7 @@ import org.apache.camel.util.CollectionStringBuffer;
  */
 @XmlRootElement(name = "otherwise")
 @XmlAccessorType(XmlAccessType.FIELD)
-public class OtherwiseDefinition extends OutputDefinition<OtherwiseDefinition> implements Block {
+public class OtherwiseDefinition extends OutputDefinition<OtherwiseDefinition> {
 
     public OtherwiseDefinition() {
     }
diff --git a/camel-core/src/main/java/org/apache/camel/model/ProcessorDefinition.java b/camel-core/src/main/java/org/apache/camel/model/ProcessorDefinition.java
index 4050419b7c8..a75c67c8979 100644
--- a/camel-core/src/main/java/org/apache/camel/model/ProcessorDefinition.java
+++ b/camel-core/src/main/java/org/apache/camel/model/ProcessorDefinition.java
@@ -160,16 +160,18 @@ public abstract class ProcessorDefinition<Type extends ProcessorDefinition<Type>
     }
 
     public void addOutput(ProcessorDefinition output) {
+        if (!blocks.isEmpty()) {
+            // let the Block deal with the output
+            Block block = blocks.getLast();
+            block.addOutput(output);
+            return;
+        }
+
         output.setParent(this);
         output.setNodeFactory(getNodeFactory());
         output.setErrorHandlerBuilder(getErrorHandlerBuilder());
         configureChild(output);
-        if (blocks.isEmpty()) {
-            getOutputs().add(output);
-        } else {
-            Block block = blocks.getLast();
-            block.addOutput(output);
-        }
+        getOutputs().add(output);
     }
 
     public void clearOutput() {
@@ -932,7 +934,18 @@ public abstract class ProcessorDefinition<Type extends ProcessorDefinition<Type>
             setId(id);
         } else {
             // set it on last output as this is what the user means to do
-            getOutputs().get(getOutputs().size() - 1).setId(id);
+            // for Block(s) with non empty getOutputs() the id probably refers
+            //  to the last definition in the current Block
+            List<ProcessorDefinition> outputs = getOutputs();
+            if (!blocks.isEmpty()) {
+                if (blocks.getLast() instanceof ProcessorDefinition) {
+                    ProcessorDefinition block = (ProcessorDefinition)blocks.getLast();
+                    if (!block.getOutputs().isEmpty()) {
+                        outputs = block.getOutputs();
+                    }
+                }
+            }
+            outputs.get(outputs.size() - 1).setId(id);
         }
 
         return (Type) this;
@@ -1120,7 +1133,9 @@ public abstract class ProcessorDefinition<Type extends ProcessorDefinition<Type>
         // when using doTry .. doCatch .. doFinally we should always
         // end the try definition to avoid having to use 2 x end() in the route
         // this is counter intuitive for end users
-        if (defn instanceof TryDefinition) {
+        // TODO (camel-3.0): this should be done inside of TryDefinition or even better
+        //  in Block(s) in general, but the api needs to be revisited for that.
+        if (defn instanceof TryDefinition || defn instanceof ChoiceDefinition) {
             popBlock();
         }
 
diff --git a/camel-core/src/main/java/org/apache/camel/processor/DefaultChannel.java b/camel-core/src/main/java/org/apache/camel/processor/DefaultChannel.java
index 164a9d272d5..6b9c5762349 100644
--- a/camel-core/src/main/java/org/apache/camel/processor/DefaultChannel.java
+++ b/camel-core/src/main/java/org/apache/camel/processor/DefaultChannel.java
@@ -168,6 +168,7 @@ public class DefaultChannel extends ServiceSupport implements Channel {
         // the definition to wrap should be the fine grained,
         // so if a child is set then use it, if not then its the original output used
         ProcessorDefinition<?> targetOutputDef = childDefinition != null ? childDefinition : outputDefinition;
+        LOG.debug("Initialize channel for target: '{}'", targetOutputDef);
 
         // fix parent/child relationship. This will be the case of the routes has been
         // defined using XML DSL or end user may have manually assembled a route from the model.
diff --git a/camel-core/src/test/java/org/apache/camel/management/ManagedCBRTest.java b/camel-core/src/test/java/org/apache/camel/management/ManagedCBRTest.java
index c55ca4b1bdb..c0e4d191de8 100644
--- a/camel-core/src/test/java/org/apache/camel/management/ManagedCBRTest.java
+++ b/camel-core/src/test/java/org/apache/camel/management/ManagedCBRTest.java
@@ -26,32 +26,33 @@ import org.apache.camel.builder.RouteBuilder;
  */
 public class ManagedCBRTest extends ManagementTestSupport {
 
+    // CAMEL-4044: mbeans not registered for children of choice
     public void testManagedCBR() throws Exception {
         MBeanServer mbeanServer = getMBeanServer();
 
         ObjectName on = ObjectName.getInstance("org.apache.camel:context=localhost/camel-1,type=routes,name=\"route\"");
-        mbeanServer.isRegistered(on);
+        assertTrue("MBean '" + on + "' not registered", mbeanServer.isRegistered(on));
 
         on = ObjectName.getInstance("org.apache.camel:context=localhost/camel-1,type=processors,name=\"task-a\"");
-        mbeanServer.isRegistered(on);
+        assertTrue("MBean '" + on + "' not registered", mbeanServer.isRegistered(on));
 
         on = ObjectName.getInstance("org.apache.camel:context=localhost/camel-1,type=processors,name=\"choice\"");
-        mbeanServer.isRegistered(on);
+        assertTrue("MBean '" + on + "' not registered", mbeanServer.isRegistered(on));
 
         on = ObjectName.getInstance("org.apache.camel:context=localhost/camel-1,type=processors,name=\"task-b\"");
-        mbeanServer.isRegistered(on);
-
+        assertTrue("MBean '" + on + "' not registered", mbeanServer.isRegistered(on));
+        
         on = ObjectName.getInstance("org.apache.camel:context=localhost/camel-1,type=processors,name=\"task-c\"");
-        mbeanServer.isRegistered(on);
+        assertTrue("MBean '" + on + "' not registered", mbeanServer.isRegistered(on));
 
         on = ObjectName.getInstance("org.apache.camel:context=localhost/camel-1,type=processors,name=\"task-d\"");
-        mbeanServer.isRegistered(on);
+        assertTrue("MBean '" + on + "' not registered", mbeanServer.isRegistered(on));
 
         on = ObjectName.getInstance("org.apache.camel:context=localhost/camel-1,type=processors,name=\"task-e\"");
-        mbeanServer.isRegistered(on);
+        assertTrue("MBean '" + on + "' not registered", mbeanServer.isRegistered(on));
 
         on = ObjectName.getInstance("org.apache.camel:context=localhost/camel-1,type=processors,name=\"task-done\"");
-        mbeanServer.isRegistered(on);
+        assertTrue("MBean '" + on + "' not registered", mbeanServer.isRegistered(on));
     }
 
     @Override
diff --git a/components/camel-spring/src/main/java/org/apache/camel/spring/spi/TransactionErrorHandlerBuilder.java b/components/camel-spring/src/main/java/org/apache/camel/spring/spi/TransactionErrorHandlerBuilder.java
index 0a97a1718c7..78afecb0589 100644
--- a/components/camel-spring/src/main/java/org/apache/camel/spring/spi/TransactionErrorHandlerBuilder.java
+++ b/components/camel-spring/src/main/java/org/apache/camel/spring/spi/TransactionErrorHandlerBuilder.java
@@ -84,7 +84,7 @@ public class TransactionErrorHandlerBuilder extends DefaultErrorHandlerBuilder {
                     LOG.trace("No TransactionTemplate found in registry.");
                 } else {
                     LOG.debug("Found {} TransactionTemplate in registry. Cannot determine which one to use. "
-                    		+ "Please configure a TransactionTemplate on the TransactionErrorHandlerBuilder", map.size());
+                              + "Please configure a TransactionTemplate on the TransactionErrorHandlerBuilder", map.size());
                 }
             }
 
@@ -97,7 +97,7 @@ public class TransactionErrorHandlerBuilder extends DefaultErrorHandlerBuilder {
                     LOG.trace("No PlatformTransactionManager found in registry.");
                 } else {
                     LOG.debug("Found {} PlatformTransactionManager in registry. Cannot determine which one to use for TransactionTemplate. "
-                    		+ "Please configure a TransactionTemplate on the TransactionErrorHandlerBuilder", map.size());
+                              + "Please configure a TransactionTemplate on the TransactionErrorHandlerBuilder", map.size());
                 }
             }
 
