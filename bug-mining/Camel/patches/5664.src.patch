diff --git a/core/camel-core/src/test/java/org/apache/camel/util/FileUtilTest.java b/core/camel-core/src/test/java/org/apache/camel/util/FileUtilTest.java
index ce878f14f27..4b77330a4fd 100644
--- a/core/camel-core/src/test/java/org/apache/camel/util/FileUtilTest.java
+++ b/core/camel-core/src/test/java/org/apache/camel/util/FileUtilTest.java
@@ -291,6 +291,42 @@ public class FileUtilTest extends TestSupport {
         assertEquals(in, out);
     }
 
+    @Test
+    public void testCompactFilePath() {
+        // should preserve the file: scheme prefix
+        if (FileUtil.isWindows()) {
+            assertEquals("file:..\\foo", FileUtil.compactPath("file:..\\foo"));
+            assertEquals("file:..\\..\\foo", FileUtil.compactPath("file:..\\..\\foo"));
+            assertEquals("file:..\\..\\foo\\bar", FileUtil.compactPath("file:..\\..\\foo\\bar"));
+            assertEquals("file:..\\..\\foo", FileUtil.compactPath("file:..\\..\\foo\\bar\\.."));
+            assertEquals("file:foo", FileUtil.compactPath("file:foo"));
+            assertEquals("file:bar", FileUtil.compactPath("file:foo\\..\\bar"));
+            assertEquals("file:bar\\baz", FileUtil.compactPath("file:foo\\..\\bar\\baz"));
+            assertEquals("file:foo\\baz", FileUtil.compactPath("file:foo\\bar\\..\\baz"));
+            assertEquals("file:baz", FileUtil.compactPath("file:foo\\bar\\..\\..\\baz"));
+            assertEquals("file:..\\baz", FileUtil.compactPath("file:foo\\bar\\..\\..\\..\\baz"));
+            assertEquals("file:..\\foo\\bar", FileUtil.compactPath("file:..\\foo\\bar"));
+            assertEquals("file:foo\\bar\\baz", FileUtil.compactPath("file:foo\\bar\\.\\baz"));
+            assertEquals("file:foo\\bar\\baz", FileUtil.compactPath("file:foo\\bar\\\\baz"));
+            assertEquals("file:\\foo\\bar\\baz", FileUtil.compactPath("file:\\foo\\bar\\baz"));
+        } else {
+            assertEquals("file:../foo", FileUtil.compactPath("file:../foo"));
+            assertEquals("file:../../foo", FileUtil.compactPath("file:../../foo"));
+            assertEquals("file:../../foo/bar", FileUtil.compactPath("file:../../foo/bar"));
+            assertEquals("file:../../foo", FileUtil.compactPath("file:../../foo/bar/.."));
+            assertEquals("file:foo", FileUtil.compactPath("file:foo"));
+            assertEquals("file:bar", FileUtil.compactPath("file:foo/../bar"));
+            assertEquals("file:bar/baz", FileUtil.compactPath("file:foo/../bar/baz"));
+            assertEquals("file:foo/baz", FileUtil.compactPath("file:foo/bar/../baz"));
+            assertEquals("file:baz", FileUtil.compactPath("file:foo/bar/../../baz"));
+            assertEquals("file:../baz", FileUtil.compactPath("file:foo/bar/../../../baz"));
+            assertEquals("file:../foo/bar", FileUtil.compactPath("file:../foo/bar"));
+            assertEquals("file:foo/bar/baz", FileUtil.compactPath("file:foo/bar/./baz"));
+            assertEquals("file:foo/bar/baz", FileUtil.compactPath("file:foo/bar//baz"));
+            assertEquals("file:/foo/bar/baz", FileUtil.compactPath("file:/foo/bar/baz"));
+        }
+    }
+
     @BeforeEach
     void createTestDir() throws IOException {
         Files.createDirectories(testDirectory());
diff --git a/core/camel-util/src/main/java/org/apache/camel/util/FileUtil.java b/core/camel-util/src/main/java/org/apache/camel/util/FileUtil.java
index e4c23cb31a3..b87d48d9e8a 100644
--- a/core/camel-util/src/main/java/org/apache/camel/util/FileUtil.java
+++ b/core/camel-util/src/main/java/org/apache/camel/util/FileUtil.java
@@ -301,6 +301,14 @@ public final class FileUtil {
         // need to normalize path before compacting
         path = normalizePath(path);
 
+        // preserve scheme
+        String scheme = null;
+        if (hasScheme(path)) {
+            int pos = path.indexOf(':');
+            scheme = path.substring(0, pos);
+            path = path.substring(pos + 1);
+        }
+
         // preserve ending slash if given in input path
         boolean endsWithSlash = path.endsWith("/") || path.endsWith("\\");
 
@@ -332,6 +340,10 @@ public final class FileUtil {
 
         // build path based on stack
         StringBuilder sb = new StringBuilder();
+        if (scheme != null) {
+            sb.append(scheme);
+            sb.append(":");
+        }
 
         for (int i = 0; i < cntSlashsAtStart; i++) {
             sb.append(separator);
@@ -554,4 +566,18 @@ public final class FileUtil {
         }
     }
 
+    /**
+     * Determines whether the URI has a scheme (e.g. file:, classpath: or http:)
+     *
+     * @param  uri the URI
+     * @return     <tt>true</tt> if the URI starts with a scheme
+     */
+    private static boolean hasScheme(String uri) {
+        if (uri == null) {
+            return false;
+        }
+
+        return uri.startsWith("file:") || uri.startsWith("classpath:") || uri.startsWith("http:");
+    }
+
 }
