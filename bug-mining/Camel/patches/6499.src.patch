diff --git a/core/camel-main/src/main/java/org/apache/camel/main/BaseMainSupport.java b/core/camel-main/src/main/java/org/apache/camel/main/BaseMainSupport.java
index 79b4804d40f..4e215c46c54 100644
--- a/core/camel-main/src/main/java/org/apache/camel/main/BaseMainSupport.java
+++ b/core/camel-main/src/main/java/org/apache/camel/main/BaseMainSupport.java
@@ -1132,14 +1132,13 @@ public abstract class BaseMainSupport extends BaseService {
 
         // and call after all properties are set
         DefaultConfigurationConfigurer.afterPropertiesSet(camelContext);
+        // and configure vault
+        DefaultConfigurationConfigurer.configureVault(camelContext);
     }
 
     /**
      * Main implementation may do some additional configuration of the {@link Registry} before it's used to
      * (re)configure Camel context.
-     *
-     * @param camelContext
-     * @param config
      */
     protected void preProcessCamelRegistry(CamelContext camelContext, MainConfigurationProperties config) {
     }
@@ -1147,9 +1146,6 @@ public abstract class BaseMainSupport extends BaseService {
     /**
      * Main implementation may do some additional configuration of the {@link Registry} after loading the routes, but
      * before the routes are started.
-     *
-     * @param camelContext
-     * @param config
      */
     protected void postProcessCamelRegistry(CamelContext camelContext, MainConfigurationProperties config) {
     }
diff --git a/core/camel-main/src/main/java/org/apache/camel/main/DefaultConfigurationConfigurer.java b/core/camel-main/src/main/java/org/apache/camel/main/DefaultConfigurationConfigurer.java
index d8fc0d5f117..28e9254e496 100644
--- a/core/camel-main/src/main/java/org/apache/camel/main/DefaultConfigurationConfigurer.java
+++ b/core/camel-main/src/main/java/org/apache/camel/main/DefaultConfigurationConfigurer.java
@@ -580,6 +580,10 @@ public final class DefaultConfigurationConfigurer {
                 devConsoleRegistry.register(console);
             }
         }
+
+        // set the default thread pool profile if defined
+        initThreadPoolProfiles(registry, camelContext);
+
         // vaults
         AwsVaultConfiguration aws = getSingleBeanOfType(registry, AwsVaultConfiguration.class);
         if (aws != null) {
@@ -602,9 +606,6 @@ public final class DefaultConfigurationConfigurer {
             vault.setHashicorpVaultConfiguration(hashicorp);
         }
         configureVault(camelContext);
-
-        // set the default thread pool profile if defined
-        initThreadPoolProfiles(registry, camelContext);
     }
 
     /**
