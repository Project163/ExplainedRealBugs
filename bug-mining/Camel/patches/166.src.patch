diff --git a/camel-core/src/main/java/org/apache/camel/builder/BuilderSupport.java b/camel-core/src/main/java/org/apache/camel/builder/BuilderSupport.java
index fcb76098642..21a5592c166 100644
--- a/camel-core/src/main/java/org/apache/camel/builder/BuilderSupport.java
+++ b/camel-core/src/main/java/org/apache/camel/builder/BuilderSupport.java
@@ -17,7 +17,8 @@
 package org.apache.camel.builder;
 
 import java.util.ArrayList;
-import java.util.List;import java.util.Arrays;
+import java.util.Arrays;
+import java.util.List;
 
 import org.apache.camel.CamelContext;
 import org.apache.camel.Endpoint;
diff --git a/camel-core/src/main/java/org/apache/camel/component/file/FileConsumer.java b/camel-core/src/main/java/org/apache/camel/component/file/FileConsumer.java
index dcaeacdb957..433b2307975 100644
--- a/camel-core/src/main/java/org/apache/camel/component/file/FileConsumer.java
+++ b/camel-core/src/main/java/org/apache/camel/component/file/FileConsumer.java
@@ -21,8 +21,8 @@ import java.util.concurrent.ConcurrentHashMap;
 
 import org.apache.camel.AsyncCallback;
 import org.apache.camel.Processor;
-import org.apache.camel.processor.DeadLetterChannel;
 import org.apache.camel.impl.ScheduledPollConsumer;
+import org.apache.camel.processor.DeadLetterChannel;
 import org.apache.commons.logging.Log;
 import org.apache.commons.logging.LogFactory;
 
diff --git a/camel-core/src/main/java/org/apache/camel/component/mock/MockEndpoint.java b/camel-core/src/main/java/org/apache/camel/component/mock/MockEndpoint.java
index c33b04eeccb..570f5454d62 100644
--- a/camel-core/src/main/java/org/apache/camel/component/mock/MockEndpoint.java
+++ b/camel-core/src/main/java/org/apache/camel/component/mock/MockEndpoint.java
@@ -19,10 +19,11 @@ package org.apache.camel.component.mock;
 import java.beans.PropertyChangeListener;
 import java.beans.PropertyChangeSupport;
 import java.util.ArrayList;
+import java.util.Arrays;
 import java.util.Collection;
 import java.util.HashMap;
 import java.util.List;
-import java.util.Map;import java.util.Arrays;
+import java.util.Map;
 import java.util.concurrent.CopyOnWriteArrayList;
 import java.util.concurrent.CountDownLatch;
 import java.util.concurrent.TimeUnit;
@@ -286,12 +287,12 @@ public class MockEndpoint extends DefaultEndpoint<Exchange> implements Browsable
         expects(new Runnable() {
             public void run() {
                 assertTrue("No header with name " + headerName + " found.", actualHeader != null);
-                
+
                 assertEquals("Header of message", headerValue, actualHeader);
             }
         });
-    }   
-    
+    }
+
     /**
      * Adds an expectation that the given body values are received by this
      * endpoint
diff --git a/camel-core/src/main/java/org/apache/camel/component/vm/VmComponent.java b/camel-core/src/main/java/org/apache/camel/component/vm/VmComponent.java
index 8a5615778e8..00d95d0b699 100644
--- a/camel-core/src/main/java/org/apache/camel/component/vm/VmComponent.java
+++ b/camel-core/src/main/java/org/apache/camel/component/vm/VmComponent.java
@@ -35,7 +35,7 @@ import org.apache.camel.component.seda.SedaEndpoint;
  * @version $Revision$
  */
 public class VmComponent extends SedaComponent {
-    protected static final Map<String, BlockingQueue> queues = new HashMap<String, BlockingQueue>();
+    protected static final Map<String, BlockingQueue> QUEUES = new HashMap<String, BlockingQueue>();
     private static final AtomicInteger START_COUNTER = new AtomicInteger();
 
 
@@ -46,11 +46,11 @@ public class VmComponent extends SedaComponent {
     }
 
     protected BlockingQueue<Exchange> getBlockingQueue(String uri, Map parameters) {
-        synchronized (queues) {
-            BlockingQueue<Exchange> answer = queues.get(uri);
+        synchronized (QUEUES) {
+            BlockingQueue<Exchange> answer = QUEUES.get(uri);
             if (answer == null) {
                 answer = createQueue(uri, parameters);
-                queues.put(uri, answer);
+                QUEUES.put(uri, answer);
             }
             return answer;
         }
@@ -66,11 +66,11 @@ public class VmComponent extends SedaComponent {
     protected void doStop() throws Exception {
         super.doStop();
         if (START_COUNTER.decrementAndGet() == 0) {
-            synchronized (queues) {
-                for (BlockingQueue q : queues.values()) {
+            synchronized (QUEUES) {
+                for (BlockingQueue q : QUEUES.values()) {
                     q.clear();
                 }
-                queues.clear();
+                QUEUES.clear();
             }
         }
     }
diff --git a/camel-core/src/main/java/org/apache/camel/management/InstrumentationLifecycleStrategy.java b/camel-core/src/main/java/org/apache/camel/management/InstrumentationLifecycleStrategy.java
index 5e2f00e49ef..4fc460e709e 100644
--- a/camel-core/src/main/java/org/apache/camel/management/InstrumentationLifecycleStrategy.java
+++ b/camel-core/src/main/java/org/apache/camel/management/InstrumentationLifecycleStrategy.java
@@ -31,6 +31,7 @@ import org.apache.camel.impl.DefaultCamelContext;
 import org.apache.camel.impl.ServiceSupport;
 import org.apache.camel.model.ProcessorType;
 import org.apache.camel.model.RouteType;
+import org.apache.camel.processor.interceptor.Debugger;
 import org.apache.camel.spi.InstrumentationAgent;
 import org.apache.camel.spi.LifecycleStrategy;
 import org.apache.camel.spi.RouteContext;
@@ -83,13 +84,13 @@ public class InstrumentationLifecycleStrategy implements LifecycleStrategy {
             try {
                 ManagedRoute mr = new ManagedRoute(route);
                 // retrieve the per-route intercept for this route
-                InstrumentationProcessor interceptor = interceptorMap.get(route.getEndpoint());
+                /*InstrumentationProcessor interceptor = interceptorMap.get(route.getEndpoint());
                 if (interceptor == null) {
                     LOG.warn("Instrumentation processor not found for route endpoint "
                              + route.getEndpoint());
                 } else {
                     interceptor.setCounter(mr);
-                }
+                }*/
                 agent.register(mr, getNamingStrategy().getObjectName(mr));
             } catch (JMException e) {
                 LOG.warn("Could not register Route MBean", e);
@@ -134,9 +135,15 @@ public class InstrumentationLifecycleStrategy implements LifecycleStrategy {
 
         routeContext.addInterceptStrategy(new InstrumentationInterceptStrategy(counterMap));
 
+        // TODO we need to find other way to instrument the route.
+        // below codes adding wrap the processor with all the processors which are already wrapped
+        // by the InstrumentationInterceptStrategy
+
+        /*
         // Add an InstrumentationProcessor at the beginning of each route and
         // set up the interceptorMap for onRoutesAdd() method to register the
         // ManagedRoute MBeans.
+
         RouteType routeType = routeContext.getRoute();
         if (routeType.getInputs() != null && !routeType.getInputs().isEmpty()) {
             if (routeType.getInputs().size() > 1) {
@@ -144,19 +151,13 @@ public class InstrumentationLifecycleStrategy implements LifecycleStrategy {
             }
 
             Endpoint endpoint  = routeType.getInputs().get(0).getEndpoint();
-            ProcessorType<?>[] outputs =
-                routeType.getOutputs().toArray(new ProcessorType<?>[0]);
 
-            //routeType.clearOutput();
             InstrumentationProcessor processor = new InstrumentationProcessor();
+
             routeType.addInterceptor(processor);
 
-            /*for (ProcessorType<?> output : outputs) {
-                routeType.addOutput(output);
-            }
-*/
             interceptorMap.put(endpoint, processor);
-        }
+        }*/
     }
 
     public CamelNamingStrategy getNamingStrategy() {
diff --git a/camel-core/src/main/java/org/apache/camel/model/ChoiceType.java b/camel-core/src/main/java/org/apache/camel/model/ChoiceType.java
index 5c498426485..da5d12b48da 100644
--- a/camel-core/src/main/java/org/apache/camel/model/ChoiceType.java
+++ b/camel-core/src/main/java/org/apache/camel/model/ChoiceType.java
@@ -47,7 +47,12 @@ public class ChoiceType extends ProcessorType<ChoiceType> {
 
     @Override
     public String toString() {
-        return "Choice[ " + getWhenClauses() + " " + getOtherwise() + "]";
+        if (getOtherwise() != null) {
+            return "Choice[ " + getWhenClauses() + " " + getOtherwise() + "]";
+        } else {
+            return "Choice[ " + getWhenClauses() + "]";
+
+        }
     }
 
     @Override
diff --git a/camel-core/src/main/java/org/apache/camel/model/ProcessorType.java b/camel-core/src/main/java/org/apache/camel/model/ProcessorType.java
index 7814ad3ca26..d133e97f952 100644
--- a/camel-core/src/main/java/org/apache/camel/model/ProcessorType.java
+++ b/camel-core/src/main/java/org/apache/camel/model/ProcessorType.java
@@ -18,12 +18,13 @@ package org.apache.camel.model;
 
 import java.rmi.registry.Registry;
 import java.util.ArrayList;
+import java.util.Arrays;
 import java.util.Collection;
 import java.util.Collections;
 import java.util.HashSet;
 import java.util.LinkedList;
 import java.util.List;
-import java.util.Set;import java.util.Arrays;
+import java.util.Set;
 import java.util.concurrent.ThreadPoolExecutor;
 
 import javax.xml.bind.annotation.XmlAccessType;
diff --git a/camel-core/src/main/java/org/apache/camel/view/NodeData.java b/camel-core/src/main/java/org/apache/camel/view/NodeData.java
index bcda82bb76e..fd3fb367a03 100644
--- a/camel-core/src/main/java/org/apache/camel/view/NodeData.java
+++ b/camel-core/src/main/java/org/apache/camel/view/NodeData.java
@@ -109,7 +109,9 @@ public class NodeData {
 
             ChoiceType choice = (ChoiceType)node;
             List<ProcessorType> outputs = new ArrayList<ProcessorType>(choice.getWhenClauses());
-            outputs.add(choice.getOtherwise());
+            if (choice.getOtherwise() != null) {
+                outputs.add(choice.getOtherwise());
+            }
             this.outputs = outputs;
         } else if (node instanceof RecipientListType) {
             this.image = imagePrefix + "RecipientListIcon.png";
@@ -131,7 +133,7 @@ public class NodeData {
         }
 
         // lets auto-default as many values as we can
-        if (isNullOrBlank(this.nodeType)) {
+        if (isNullOrBlank(this.nodeType) && node != null) {
             // TODO we could add this to the model?
             String name = node.getClass().getName();
             int idx = name.lastIndexOf('.');
diff --git a/camel-core/src/test/java/org/apache/camel/component/file/FileNoOpLockFileTest.java b/camel-core/src/test/java/org/apache/camel/component/file/FileNoOpLockFileTest.java
index 120a2151740..ee88666c8cc 100644
--- a/camel-core/src/test/java/org/apache/camel/component/file/FileNoOpLockFileTest.java
+++ b/camel-core/src/test/java/org/apache/camel/component/file/FileNoOpLockFileTest.java
@@ -1,3 +1,19 @@
+/**
+ * Licensed to the Apache Software Foundation (ASF) under one or more
+ * contributor license agreements.  See the NOTICE file distributed with
+ * this work for additional information regarding copyright ownership.
+ * The ASF licenses this file to You under the Apache License, Version 2.0
+ * (the "License"); you may not use this file except in compliance with
+ * the License.  You may obtain a copy of the License at
+ *
+ *      http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
 package org.apache.camel.component.file;
 
 import java.io.File;
diff --git a/camel-core/src/test/java/org/apache/camel/component/file/FilerProducerFileNamesTest.java b/camel-core/src/test/java/org/apache/camel/component/file/FilerProducerFileNamesTest.java
index a1ab9d0518e..c9b25366203 100644
--- a/camel-core/src/test/java/org/apache/camel/component/file/FilerProducerFileNamesTest.java
+++ b/camel-core/src/test/java/org/apache/camel/component/file/FilerProducerFileNamesTest.java
@@ -19,8 +19,8 @@ package org.apache.camel.component.file;
 import java.io.File;
 
 import org.apache.camel.ContextTestSupport;
-import org.apache.camel.Exchange;
 import org.apache.camel.Endpoint;
+import org.apache.camel.Exchange;
 import org.apache.camel.builder.RouteBuilder;
 
 /**
@@ -56,11 +56,11 @@ public class FilerProducerFileNamesTest extends ContextTestSupport {
     protected RouteBuilder createRouteBuilder() throws Exception {
         return new RouteBuilder() {
             public void configure() throws Exception {
-                from("direct:report").to( "file:target/reports/report.txt");
+                from("direct:report").to("file:target/reports/report.txt");
 
-                from("direct:report2").to( "file:target/report2.txt?autoCreate=false");
+                from("direct:report2").to("file:target/report2.txt?autoCreate=false");
 
-                from("direct:report3").setHeader(FileComponent.HEADER_FILE_NAME, "report-super.txt").to( "file:target/");
+                from("direct:report3").setHeader(FileComponent.HEADER_FILE_NAME, "report-super.txt").to("file:target/");
             }
         };
     }
