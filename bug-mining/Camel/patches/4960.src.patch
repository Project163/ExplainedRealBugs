diff --git a/components/camel-activemq/src/test/java/org/apache/camel/component/activemq/converter/InvokeMessageListenerTest.java b/components/camel-activemq/src/test/java/org/apache/camel/component/activemq/converter/InvokeMessageListenerTest.java
index b3cb9660bde..892a4c509fb 100644
--- a/components/camel-activemq/src/test/java/org/apache/camel/component/activemq/converter/InvokeMessageListenerTest.java
+++ b/components/camel-activemq/src/test/java/org/apache/camel/component/activemq/converter/InvokeMessageListenerTest.java
@@ -24,7 +24,6 @@ import javax.jms.TextMessage;
 import org.apache.activemq.spring.ConsumerBean;
 import org.apache.camel.CamelContext;
 import org.apache.camel.builder.RouteBuilder;
-import org.apache.camel.component.mock.MockEndpoint;
 import org.apache.camel.test.junit4.CamelTestSupport;
 import org.junit.Test;
 
@@ -34,7 +33,6 @@ import static org.apache.camel.component.activemq.ActiveMQComponent.activeMQComp
  * 
  */
 public class InvokeMessageListenerTest extends CamelTestSupport {
-    protected MockEndpoint resultEndpoint;
     protected String startEndpointUri = "activemq:queue:test.a";
     protected ConsumerBean listener = new ConsumerBean();
 
@@ -44,7 +42,7 @@ public class InvokeMessageListenerTest extends CamelTestSupport {
 
         template.sendBodyAndHeader(startEndpointUri, expectedBody, "cheese", 123);
 
-        listener.assertMessagesArrived(1);
+        listener.assertMessagesArrived(1, 5000);
 
         List<Message> list = listener.flushMessages();
         assertTrue("Should have received some messages!", !list.isEmpty());
diff --git a/components/camel-jms/src/main/java/org/apache/camel/component/jms/JmsBinding.java b/components/camel-jms/src/main/java/org/apache/camel/component/jms/JmsBinding.java
index 8499fe81195..fcfacd62e61 100644
--- a/components/camel-jms/src/main/java/org/apache/camel/component/jms/JmsBinding.java
+++ b/components/camel-jms/src/main/java/org/apache/camel/component/jms/JmsBinding.java
@@ -374,7 +374,7 @@ public class JmsBinding {
     public void appendJmsProperty(Message jmsMessage, Exchange exchange, org.apache.camel.Message in,
                                   String headerName, Object headerValue) throws JMSException {
         if (isStandardJMSHeader(headerName)) {
-            if (headerName.equals("JMSCorrelationID") && !endpoint.isUseMessageIDAsCorrelationID()) {
+            if (headerName.equals("JMSCorrelationID") && (endpoint == null || !endpoint.isUseMessageIDAsCorrelationID())) {
                 jmsMessage.setJMSCorrelationID(ExchangeHelper.convertToType(exchange, String.class, headerValue));
             } else if (headerName.equals("JMSReplyTo") && headerValue != null) {
                 if (headerValue instanceof String) {
@@ -405,7 +405,7 @@ public class JmsBinding {
             // see message properties: http://java.sun.com/j2ee/1.4/docs/api/javax/jms/Message.html
             Object value = getValidJMSHeaderValue(headerName, headerValue);
             // if the value was null, then it may be allowed as an additional header
-            if (value == null && endpoint.getConfiguration().getAllowAdditionalHeaders() != null) {
+            if (value == null && (endpoint != null && endpoint.getConfiguration().getAllowAdditionalHeaders() != null)) {
                 Iterator it = ObjectHelper.createIterator(endpoint.getConfiguration().getAllowAdditionalHeaders());
                 while (it.hasNext()) {
                     String pattern = (String) it.next();
