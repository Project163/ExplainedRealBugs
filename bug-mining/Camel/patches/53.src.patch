diff --git a/camel-core/src/main/java/org/apache/camel/component/file/FileEndpoint.java b/camel-core/src/main/java/org/apache/camel/component/file/FileEndpoint.java
index edd818f2b8e..1bab5f57f85 100644
--- a/camel-core/src/main/java/org/apache/camel/component/file/FileEndpoint.java
+++ b/camel-core/src/main/java/org/apache/camel/component/file/FileEndpoint.java
@@ -109,8 +109,7 @@ public class FileEndpoint extends ScheduledPollEndpoint<FileExchange> {
      */
     public void configureMessage(File file, Message message) {
         message.setBody(file);
-        String path = file.getPath();
-        String relativePath = path.substring(path.length());
+        String relativePath = file.getPath().substring(getFile().getPath().length());
         if (relativePath.startsWith(File.separator) || relativePath.startsWith("/")) {
             relativePath = relativePath.substring(1);
         }
diff --git a/camel-core/src/test/java/org/apache/camel/component/file/FileConfigureTest.java b/camel-core/src/test/java/org/apache/camel/component/file/FileConfigureTest.java
index b13e943a10c..7dee0185a29 100644
--- a/camel-core/src/test/java/org/apache/camel/component/file/FileConfigureTest.java
+++ b/camel-core/src/test/java/org/apache/camel/component/file/FileConfigureTest.java
@@ -19,12 +19,15 @@ package org.apache.camel.component.file;
 import java.io.File;
 
 import org.apache.camel.ContextTestSupport;
+import org.apache.camel.Message;
+import org.apache.camel.impl.DefaultMessage;
 
 /**
  * @version $Revision: 1.1 $
  */
 public class FileConfigureTest extends ContextTestSupport {
     private static final String EXPECT_PATH = "target" + File.separator + "foo" + File.separator + "bar";
+    private static final String EXPECT_FILE = "some" + File.separator + "nested" + File.separator + "filename.txt";
 
     public void testUriConfigurations() throws Exception {
         assertFileEndpoint("file://target/foo/bar", EXPECT_PATH);
@@ -47,5 +50,10 @@ public class FileConfigureTest extends ContextTestSupport {
         File file = endpoint.getFile();
         String path = file.getPath();
         assertEquals("For uri: " + endpointUri + " the file is not equal", expectedPath, path);
+        
+        File consumedFile = new File(expectedPath + (expectedPath.endsWith(File.separator) ? "" : File.separator) + EXPECT_FILE);
+        Message message = new DefaultMessage();
+        endpoint.configureMessage(consumedFile, message);
+        assertEquals(EXPECT_FILE, message.getHeader(FileComponent.HEADER_FILE_NAME));  
     }
 }
