diff --git a/apache-camel/pom.xml b/apache-camel/pom.xml
index d6095a6d3ce..2dc82efa20c 100644
--- a/apache-camel/pom.xml
+++ b/apache-camel/pom.xml
@@ -365,19 +365,20 @@
       <artifactId>geronimo-j2ee-jacc_1.0_spec</artifactId>
       <optional>true</optional>
     </dependency>
+    <!-- TODO: when upgraded to httpclient 4.0 use me
     <dependency>
       <groupId>org.apache.httpcomponents</groupId>
-      <artifactId>httpcore</artifactId>
+      <artifactId>httpclient</artifactId>
       <optional>true</optional>
-    </dependency>
+    </dependency> -->
     <dependency>
       <groupId>org.apache.httpcomponents</groupId>
-      <artifactId>httpcore-nio</artifactId>
+      <artifactId>httpcore</artifactId>
       <optional>true</optional>
     </dependency>
     <dependency>
       <groupId>org.apache.httpcomponents</groupId>
-      <artifactId>httpcore-niossl</artifactId>
+      <artifactId>httpcore-nio</artifactId>
       <optional>true</optional>
     </dependency>
   </dependencies>
diff --git a/camel-core/src/main/java/org/apache/camel/builder/ErrorHandlerBuilderRef.java b/camel-core/src/main/java/org/apache/camel/builder/ErrorHandlerBuilderRef.java
index 0a878711199..8acac12ab01 100644
--- a/camel-core/src/main/java/org/apache/camel/builder/ErrorHandlerBuilderRef.java
+++ b/camel-core/src/main/java/org/apache/camel/builder/ErrorHandlerBuilderRef.java
@@ -29,6 +29,7 @@ import org.apache.camel.util.ObjectHelper;
  * @version $Revision$
  */
 public class ErrorHandlerBuilderRef extends ErrorHandlerBuilderSupport {
+    public static final String DEFAULT_ERROR_HANDLER_BUILDER = "CamelDefaultErrorHandlerBuilder";
     private final String ref;
     private ErrorHandlerBuilder handler;
 
@@ -51,9 +52,47 @@ public class ErrorHandlerBuilderRef extends ErrorHandlerBuilderSupport {
         return handler.createErrorHandler(routeContext, processor);
     }
 
+    /**
+     * Returns whether a specific error handler builder has been configued or not.
+     * <p/>
+     * Can be used to test if none has been configued and then install a custom error handler builder
+     * replacing the default error handler (that would have been used as fallback).
+     * This is for instance used by the transacted policy to setup a TransactedErrorHandlerBuilder
+     * in camel-spring.
+     */
+    public boolean isErrorHandlerBuilderConfigued() {
+        return !DEFAULT_ERROR_HANDLER_BUILDER.equals(getRef());
+    }
+
     public ErrorHandlerBuilder lookupErrorHandlerBuilder(RouteContext routeContext) {
         if (handler == null) {
-            handler = routeContext.lookup(ref, ErrorHandlerBuilder.class);
+            // if the ref is the default then the we do not have any explicit error handler configured
+            // if that is the case then use error handlers configured on the route, as for instance
+            // the transacted error handler could have been configured on the route so we should use that one
+            if (!isErrorHandlerBuilderConfigued()) {
+                // see if there has been configured a route builder on the route
+                handler = routeContext.getRoute().getErrorHandlerBuilder();
+                if (handler == null) {
+                    handler = routeContext.lookup(routeContext.getRoute().getErrorHandlerRef(), ErrorHandlerBuilder.class);
+                }
+                if (handler == null) {
+                    // fallback to the default error handler if none configured on the route
+                    handler = new DefaultErrorHandlerBuilder();
+                }
+                // check if its also a ref with no error handler configuration like me
+                if (handler instanceof ErrorHandlerBuilderRef) {
+                    ErrorHandlerBuilderRef other = (ErrorHandlerBuilderRef) handler;
+                    if (!other.isErrorHandlerBuilderConfigued()) {
+                        // the other has also no explict error handler configured then fallback to the default error handler
+                        // otherwise we could recursive loop forever (triggered by createErrorHandler method)
+                        handler = new DefaultErrorHandlerBuilder();
+                    }
+                }
+            } else {
+                // use specific configured error handler
+                handler = routeContext.lookup(ref, ErrorHandlerBuilder.class);
+            }
+
             ObjectHelper.notNull(handler, "error handler '" + ref + "'");
             List<OnExceptionDefinition> list = getErrorHandlers();
             for (OnExceptionDefinition exceptionType : list) {
@@ -67,4 +106,8 @@ public class ErrorHandlerBuilderRef extends ErrorHandlerBuilderSupport {
         return ref;
     }
 
+    @Override
+    public String toString() {
+        return "ErrorHandlerBuilderRef[" + ref + "]";
+    }
 }
diff --git a/camel-core/src/main/java/org/apache/camel/impl/RouteService.java b/camel-core/src/main/java/org/apache/camel/impl/RouteService.java
index 04698707e3d..a89b040d852 100644
--- a/camel-core/src/main/java/org/apache/camel/impl/RouteService.java
+++ b/camel-core/src/main/java/org/apache/camel/impl/RouteService.java
@@ -35,17 +35,17 @@ import org.apache.camel.spi.RouteContext;
 public class RouteService extends ServiceSupport {
 
     private final DefaultCamelContext camelContext;
-    private final RouteDefinition routeType;
+    private final RouteDefinition routeDefinition;
     private final List<RouteContext> routeContexts;
     private final Collection<Route> routes;
     private final String id;
 
-    public RouteService(DefaultCamelContext camelContext, RouteDefinition routeType, List<RouteContext> routeContexts, Collection<Route> routes) {
+    public RouteService(DefaultCamelContext camelContext, RouteDefinition routeDefinition, List<RouteContext> routeContexts, Collection<Route> routes) {
         this.camelContext = camelContext;
-        this.routeType = routeType;
+        this.routeDefinition = routeDefinition;
         this.routeContexts = routeContexts;
         this.routes = routes;
-        this.id = routeType.idOrCreate();
+        this.id = routeDefinition.idOrCreate();
     }
 
     public String getId() {
@@ -60,8 +60,8 @@ public class RouteService extends ServiceSupport {
         return routeContexts;
     }
 
-    public RouteDefinition getRouteType() {
-        return routeType;
+    public RouteDefinition getRouteDefinition() {
+        return routeDefinition;
     }
 
     public Collection<Route> getRoutes() {
diff --git a/camel-core/src/main/java/org/apache/camel/model/ProcessorDefinition.java b/camel-core/src/main/java/org/apache/camel/model/ProcessorDefinition.java
index 9e317b975b0..794e2dcf8df 100644
--- a/camel-core/src/main/java/org/apache/camel/model/ProcessorDefinition.java
+++ b/camel-core/src/main/java/org/apache/camel/model/ProcessorDefinition.java
@@ -2090,8 +2090,9 @@ public abstract class ProcessorDefinition<Type extends ProcessorDefinition> exte
         if (errorHandlerRef != null) {
             return new ErrorHandlerBuilderRef(errorHandlerRef);
         }
-        // return a new default one
-        return new DefaultErrorHandlerBuilder();
+
+        // return a reference to the default error handler
+        return new ErrorHandlerBuilderRef(ErrorHandlerBuilderRef.DEFAULT_ERROR_HANDLER_BUILDER);
     }
 
     protected void configureChild(ProcessorDefinition output) {
diff --git a/camel-core/src/main/java/org/apache/camel/util/ProcessorDefinitionHelper.java b/camel-core/src/main/java/org/apache/camel/util/ProcessorDefinitionHelper.java
index 263e118a9e2..db025ddd14e 100644
--- a/camel-core/src/main/java/org/apache/camel/util/ProcessorDefinitionHelper.java
+++ b/camel-core/src/main/java/org/apache/camel/util/ProcessorDefinitionHelper.java
@@ -20,9 +20,8 @@ import java.util.List;
 
 import org.apache.camel.model.ChoiceDefinition;
 import org.apache.camel.model.ProcessorDefinition;
-import org.apache.camel.model.WhenDefinition;
 import org.apache.camel.model.SendDefinition;
-import org.apache.camel.processor.DelegateProcessor;
+import org.apache.camel.model.WhenDefinition;
 
 /**
  * Helper class for ProcessorType and the other model classes.
diff --git a/components/camel-http/pom.xml b/components/camel-http/pom.xml
index cbe7801e65b..b887b8e67cd 100644
--- a/components/camel-http/pom.xml
+++ b/components/camel-http/pom.xml
@@ -49,9 +49,10 @@
     </dependency>
 
     <dependency>
+	  <!-- TODO: update group and artifact id when upgrading to httpclient 4.0 -->
       <groupId>commons-httpclient</groupId>
       <artifactId>commons-httpclient</artifactId>
-      <version>3.1</version>
+      <version>${httpclient-version}</version>
       <optional>false</optional>
     </dependency>
 
diff --git a/components/camel-jetty/src/test/java/org/apache/camel/component/jetty/HttpClientRouteTest.java b/components/camel-jetty/src/test/java/org/apache/camel/component/jetty/HttpClientRouteTest.java
index c9c002a72ee..54b9d3dc3f4 100644
--- a/components/camel-jetty/src/test/java/org/apache/camel/component/jetty/HttpClientRouteTest.java
+++ b/components/camel-jetty/src/test/java/org/apache/camel/component/jetty/HttpClientRouteTest.java
@@ -18,25 +18,16 @@
 package org.apache.camel.component.jetty;
 
 import java.io.ByteArrayInputStream;
-import java.io.ByteArrayOutputStream;
 import java.io.InputStream;
 import java.util.List;
 import java.util.Map;
 
-import javax.xml.transform.dom.DOMSource;
-
-import org.apache.camel.CamelContext;
 import org.apache.camel.ContextTestSupport;
 import org.apache.camel.Exchange;
 import org.apache.camel.Message;
 import org.apache.camel.Processor;
 import org.apache.camel.builder.RouteBuilder;
 import org.apache.camel.component.mock.MockEndpoint;
-import org.apache.camel.impl.DefaultCamelContext;
-import org.apache.camel.processor.interceptor.StreamCaching;
-import org.apache.camel.processor.interceptor.StreamCachingInterceptor;
-import org.apache.commons.httpclient.ChunkedInputStream;
-import org.apache.commons.httpclient.ChunkedOutputStream;
 
 public class HttpClientRouteTest extends ContextTestSupport {
 
@@ -67,13 +58,14 @@ public class HttpClientRouteTest extends ContextTestSupport {
         return new RouteBuilder() {
             public void configure() {
                 errorHandler(noErrorHandler());
+
                 Processor clientProc = new Processor() {
                     public void process(Exchange exchange) throws Exception {
-                        InputStream is = (InputStream) exchange.getIn().getBody();                        
+                        assertIsInstanceOf(InputStream.class, exchange.getIn().getBody());
                     }
                 };
                 
-                from("direct:start").to("http://localhost:9080/hello").process(clientProc).intercept(new StreamCachingInterceptor()).convertBodyTo(String.class).to("mock:a");
+                from("direct:start").to("http://localhost:9080/hello").process(clientProc).convertBodyTo(String.class).to("mock:a");
                
                 Processor proc = new Processor() {
                     public void process(Exchange exchange) throws Exception {
@@ -82,8 +74,6 @@ public class HttpClientRouteTest extends ContextTestSupport {
                     }
                 };
                 from("jetty:http://localhost:9080/hello").process(proc);
-                
-                noStreamCaching();
             }
         };
     }    
diff --git a/components/camel-jetty/src/test/java/org/apache/camel/component/jetty/JettyContentTypeTest.java b/components/camel-jetty/src/test/java/org/apache/camel/component/jetty/JettyContentTypeTest.java
index 6e25408acec..a5a80db7996 100644
--- a/components/camel-jetty/src/test/java/org/apache/camel/component/jetty/JettyContentTypeTest.java
+++ b/components/camel-jetty/src/test/java/org/apache/camel/component/jetty/JettyContentTypeTest.java
@@ -67,7 +67,7 @@ public class JettyContentTypeTest extends ContextTestSupport {
     protected RouteBuilder createRouteBuilder() throws Exception {
         return new RouteBuilder() {
             public void configure() throws Exception {
-                from("jetty:http://localhost:9080/myapp/myservice").streamCaching().process(new MyBookService());
+                from("jetty:http://localhost:9080/myapp/myservice").process(new MyBookService());
             }
         };
     }
diff --git a/components/camel-jetty/src/test/java/org/apache/camel/component/jetty/JettyImageFileTest.java b/components/camel-jetty/src/test/java/org/apache/camel/component/jetty/JettyImageFileTest.java
index 2b194f312c0..7936eaafa03 100644
--- a/components/camel-jetty/src/test/java/org/apache/camel/component/jetty/JettyImageFileTest.java
+++ b/components/camel-jetty/src/test/java/org/apache/camel/component/jetty/JettyImageFileTest.java
@@ -54,7 +54,7 @@ public class JettyImageFileTest extends ContextTestSupport {
     protected RouteBuilder createRouteBuilder() throws Exception {
         return new RouteBuilder() {
             public void configure() throws Exception {
-                from("jetty:http://localhost:9080/myapp/myservice").streamCaching().process(new MyImageService());
+                from("jetty:http://localhost:9080/myapp/myservice").process(new MyImageService());
             }
         };
     }
diff --git a/components/camel-spring/src/main/java/org/apache/camel/spring/spi/SpringTransactionPolicy.java b/components/camel-spring/src/main/java/org/apache/camel/spring/spi/SpringTransactionPolicy.java
index 665943d1a9a..67382272424 100644
--- a/components/camel-spring/src/main/java/org/apache/camel/spring/spi/SpringTransactionPolicy.java
+++ b/components/camel-spring/src/main/java/org/apache/camel/spring/spi/SpringTransactionPolicy.java
@@ -59,13 +59,17 @@ public class SpringTransactionPolicy implements TransactedPolicy {
         answer.setOutput(processor);
 
         ErrorHandlerBuilder builder = routeContext.getRoute().getErrorHandlerBuilder();
+
         if (builder instanceof ErrorHandlerBuilderRef) {
             // its a reference to a error handler so lookup the reference
             ErrorHandlerBuilderRef ref = (ErrorHandlerBuilderRef) builder;
-            if (LOG.isDebugEnabled()) {
-                LOG.debug("Looking up ErrorHandlerBuilder with ref: " + ref.getRef());
+            // only lookup if there was explicit an error handler builder configured
+            if (ref.isErrorHandlerBuilderConfigued()) {
+                if (LOG.isDebugEnabled()) {
+                    LOG.debug("Looking up ErrorHandlerBuilder with ref: " + ref.getRef());
+                }
+                builder = ref.lookupErrorHandlerBuilder(routeContext);
             }
-            builder = ref.lookupErrorHandlerBuilder(routeContext);
         }
 
         if (builder instanceof TransactionErrorHandlerBuilder) {
@@ -93,6 +97,9 @@ public class SpringTransactionPolicy implements TransactedPolicy {
             }
             answer.setExceptionPolicy(txBuilder.getExceptionPolicyStrategy());
             txBuilder.configure(answer);
+
+            // set the route to use our transacted error handler builder
+            routeContext.getRoute().setErrorHandlerBuilder(txBuilder);
         }
 
         return answer;
diff --git a/components/camel-spring/src/main/java/org/apache/camel/spring/spi/TransactedRuntimeCamelException.java b/components/camel-spring/src/main/java/org/apache/camel/spring/spi/TransactedRuntimeCamelException.java
new file mode 100644
index 00000000000..477ce4dbf16
--- /dev/null
+++ b/components/camel-spring/src/main/java/org/apache/camel/spring/spi/TransactedRuntimeCamelException.java
@@ -0,0 +1,50 @@
+/**
+ * Licensed to the Apache Software Foundation (ASF) under one or more
+ * contributor license agreements.  See the NOTICE file distributed with
+ * this work for additional information regarding copyright ownership.
+ * The ASF licenses this file to You under the Apache License, Version 2.0
+ * (the "License"); you may not use this file except in compliance with
+ * the License.  You may obtain a copy of the License at
+ *
+ *      http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+package org.apache.camel.spring.spi;
+
+import org.apache.camel.RuntimeCamelException;
+
+/**
+ * @version $Revision$
+ */
+public class TransactedRuntimeCamelException extends RuntimeCamelException {
+
+    private boolean handled;
+
+    public TransactedRuntimeCamelException() {
+    }
+
+    public TransactedRuntimeCamelException(String message) {
+        super(message);
+    }
+
+    public TransactedRuntimeCamelException(String message, Throwable cause) {
+        super(message, cause);
+    }
+
+    public TransactedRuntimeCamelException(Throwable cause) {
+        super(cause);
+    }
+
+    public boolean isHandled() {
+        return handled;
+    }
+
+    public void setHandled(boolean handled) {
+        this.handled = handled;
+    }
+}
diff --git a/components/camel-spring/src/main/java/org/apache/camel/spring/spi/TransactionErrorHandler.java b/components/camel-spring/src/main/java/org/apache/camel/spring/spi/TransactionErrorHandler.java
index 35e1cf5b07e..f719475ecd4 100644
--- a/components/camel-spring/src/main/java/org/apache/camel/spring/spi/TransactionErrorHandler.java
+++ b/components/camel-spring/src/main/java/org/apache/camel/spring/spi/TransactionErrorHandler.java
@@ -19,9 +19,7 @@ package org.apache.camel.spring.spi;
 import org.apache.camel.Exchange;
 import org.apache.camel.Predicate;
 import org.apache.camel.Processor;
-import org.apache.camel.RuntimeCamelException;
 import org.apache.camel.model.OnExceptionDefinition;
-import org.apache.camel.processor.DelayPolicy;
 import org.apache.camel.processor.ErrorHandlerSupport;
 import org.apache.camel.processor.exceptionpolicy.ExceptionPolicyStrategy;
 import org.apache.camel.util.MessageHelper;
@@ -35,8 +33,6 @@ import org.springframework.transaction.support.TransactionCallbackWithoutResult;
 import org.springframework.transaction.support.TransactionSynchronizationManager;
 import org.springframework.transaction.support.TransactionTemplate;
 
-import static org.apache.camel.util.ObjectHelper.wrapRuntimeCamelException;
-
 /**
  * The <a href="http://camel.apache.org/transactional-client.html">Transactional Client</a>
  * EIP pattern.
@@ -82,7 +78,7 @@ public class TransactionErrorHandler extends ErrorHandlerSupport {
 
                 // wrapper exception to throw if the exchange failed
                 // IMPORTANT: Must be a runtime exception to let Spring regard it as to do "rollback"
-                RuntimeCamelException rce;
+                TransactedRuntimeCamelException rce;
 
                 // find out if there is an actual transaction alive, and thus we are in transacted mode
                 boolean activeTx = TransactionSynchronizationManager.isActualTransactionActive();
@@ -115,12 +111,21 @@ public class TransactionErrorHandler extends ErrorHandlerSupport {
                 // an exception occured maybe an onException can handle it
                 if (exchange.getException() != null) {
                     // handle onException
-                    handleException(exchange);
+                    // but test beforehand if we have already handled it, if so we should not do it again
+                    boolean handled = false;
+                    if (exchange.getException() instanceof TransactedRuntimeCamelException) {
+                        TransactedRuntimeCamelException trce = exchange.getException(TransactedRuntimeCamelException.class);
+                        handled = trce.isHandled();
+                    }
+                    if (!handled) {
+                        // not handled before so handle it once
+                        handleException(exchange);
+                    }
                 }
 
                 // after handling and still an exception or marked as rollback only then rollback
                 if (exchange.getException() != null || exchange.isRollbackOnly()) {
-                    rce = wrapRuntimeCamelException(exchange.getException());
+                    rce = wrapTransactedRuntimeException(exchange.getException());
 
                     if (activeTx) {
                         status.setRollbackOnly();
@@ -142,6 +147,22 @@ public class TransactionErrorHandler extends ErrorHandlerSupport {
         });
     }
 
+    protected TransactedRuntimeCamelException wrapTransactedRuntimeException(Exception exception) {
+        if (exception instanceof TransactedRuntimeCamelException) {
+            return (TransactedRuntimeCamelException) exception;
+        } else {
+            TransactedRuntimeCamelException answer = new TransactedRuntimeCamelException(exception);
+            // Mark as handled so we dont want to handle the same exception twice or more in other
+            // wrapped transaction error handlers in this route.
+            // We need to mark this information in the exception as we need to propagage
+            // the exception back by rehtrowing it. We cannot mark it on the exchange as Camel
+            // uses copies of exchanges in its pipeline and the data isnt copied back in case
+            // when an exception occured
+            answer.setHandled(true);
+            return answer;
+        }
+    }
+
     /**
      * Handles when an exception occured during processing. Is used to let the exception policy
      * deal with it, eg letting an onException handle it.
diff --git a/components/camel-spring/src/test/java/org/apache/camel/spring/interceptor/TransactionalClientDataSourceNotTransactedTest.java b/components/camel-spring/src/test/java/org/apache/camel/spring/interceptor/TransactionalClientDataSourceNotTransactedTest.java
new file mode 100644
index 00000000000..813301b7527
--- /dev/null
+++ b/components/camel-spring/src/test/java/org/apache/camel/spring/interceptor/TransactionalClientDataSourceNotTransactedTest.java
@@ -0,0 +1,56 @@
+/**
+ * Licensed to the Apache Software Foundation (ASF) under one or more
+ * contributor license agreements.  See the NOTICE file distributed with
+ * this work for additional information regarding copyright ownership.
+ * The ASF licenses this file to You under the Apache License, Version 2.0
+ * (the "License"); you may not use this file except in compliance with
+ * the License.  You may obtain a copy of the License at
+ *
+ *      http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+package org.apache.camel.spring.interceptor;
+
+import org.apache.camel.builder.RouteBuilder;
+import org.apache.camel.spring.SpringRouteBuilder;
+import org.apache.camel.RuntimeCamelException;
+
+/**
+ * Same route but not transacted
+ */
+public class TransactionalClientDataSourceNotTransactedTest extends TransactionalClientDataSourceTest {
+
+    public void testTransactionRollback() throws Exception {
+        try {
+            template.sendBody("direct:fail", "Hello World");
+        } catch (RuntimeCamelException e) {
+            // expeced as we fail
+            assertTrue(e.getCause() instanceof IllegalArgumentException);
+            assertEquals("We don't have Donkeys, only Camels", e.getCause().getMessage());
+        }
+
+        int count = jdbc.queryForInt("select count(*) from books");
+        // should get 2 books as the first operation will succeed and we are not transacted
+        assertEquals("Number of books", 2, count);
+    }
+
+    protected RouteBuilder createRouteBuilder() throws Exception {
+        return new SpringRouteBuilder() {
+            public void configure() throws Exception {
+                from("direct:okay")
+                    .setBody(constant("Tiger in Action")).beanRef("bookService")
+                    .setBody(constant("Elephant in Action")).beanRef("bookService");
+
+                from("direct:fail")
+                    .setBody(constant("Tiger in Action")).beanRef("bookService")
+                    .setBody(constant("Donkey in Action")).beanRef("bookService");
+            }
+        };
+    }
+
+}
\ No newline at end of file
diff --git a/components/camel-spring/src/test/java/org/apache/camel/spring/interceptor/TransactionalClientDataSourceWithOnExceptionTest.java b/components/camel-spring/src/test/java/org/apache/camel/spring/interceptor/TransactionalClientDataSourceWithOnExceptionTest.java
index b07944e2856..49cedbd0b56 100644
--- a/components/camel-spring/src/test/java/org/apache/camel/spring/interceptor/TransactionalClientDataSourceWithOnExceptionTest.java
+++ b/components/camel-spring/src/test/java/org/apache/camel/spring/interceptor/TransactionalClientDataSourceWithOnExceptionTest.java
@@ -33,9 +33,7 @@ public class TransactionalClientDataSourceWithOnExceptionTest extends Transactio
 
     public void testTransactionRollback() throws Exception {
         MockEndpoint mock = getMockEndpoint("mock:error");
-        // TODO: Until claus got the stream cache working nicely with TX
-        //mock.expectedMessageCount(1);
-        mock.expectedMessageCount(2);
+        mock.expectedMessageCount(1);
 
         try {
             template.sendBody("direct:fail", "Hello World");
@@ -48,8 +46,7 @@ public class TransactionalClientDataSourceWithOnExceptionTest extends Transactio
         assertMockEndpointsSatisfied();
 
         int count = jdbc.queryForInt("select count(*) from books");
-        // TODO: Until claus got the stream cache working nicely with TX
-        // assertEquals("Number of books", 1, count);
+        assertEquals("Number of books", 1, count);
     }
 
     protected RouteBuilder createRouteBuilder() throws Exception {
diff --git a/components/camel-spring/src/test/java/org/apache/camel/spring/interceptor/TransactionalClientWithRollbackTest.java b/components/camel-spring/src/test/java/org/apache/camel/spring/interceptor/TransactionalClientWithRollbackTest.java
index d0681e49f7b..3be67e106b6 100644
--- a/components/camel-spring/src/test/java/org/apache/camel/spring/interceptor/TransactionalClientWithRollbackTest.java
+++ b/components/camel-spring/src/test/java/org/apache/camel/spring/interceptor/TransactionalClientWithRollbackTest.java
@@ -87,20 +87,17 @@ public class TransactionalClientWithRollbackTest extends SpringTestSupport {
         return new SpringRouteBuilder() {
             public void configure() throws Exception {
                 // setup the transaction policy
-                SpringTransactionPolicy required = context.getRegistry()
-                        .lookup("PROPAGATION_REQUIRED", SpringTransactionPolicy.class);
+                SpringTransactionPolicy required = bean(SpringTransactionPolicy.class, "PROPAGATION_REQUIRED");
 
                 // use transaction error handler
                 errorHandler(transactionErrorHandler(required));
 
                 // must setup policy for each route
-                // TODO: CAMEL-1475 should fix this
                 from("direct:okay").policy(required)
                         .setBody(constant("Tiger in Action")).beanRef("bookService")
                         .setBody(constant("Elephant in Action")).beanRef("bookService");
 
                 // must setup policy for each route
-                // TODO: CAMEL-1475 should fix this
                 from("direct:fail").policy(required)
                         .setBody(constant("Tiger in Action")).beanRef("bookService")
                         // force a rollback
diff --git a/pom.xml b/pom.xml
index 5283d0d3727..ea59fbab706 100755
--- a/pom.xml
+++ b/pom.xml
@@ -47,7 +47,7 @@
     <felix-version>1.4.1</felix-version>
     <felix-osgi-version>1.2.0</felix-osgi-version>
     <httpcore-version>4.0</httpcore-version>
-    <httpcore-niossl-version>4.0</httpcore-niossl-version>
+    <httpclient-version>3.1</httpclient-version>
     <jetty-version>6.1.14</jetty-version>
     <slf4j-version>1.5.6</slf4j-version>
     <openjpa-version>1.2.0</openjpa-version>
@@ -823,11 +823,6 @@
         <artifactId>httpcore-nio</artifactId>
         <version>${httpcore-version}</version>
       </dependency>
-      <dependency>
-        <groupId>org.apache.httpcomponents</groupId>
-        <artifactId>httpcore-niossl</artifactId>
-        <version>${httpcore-niossl-version}</version>
-      </dependency>
 
       <!-- optional scripting support -->
       <dependency>
