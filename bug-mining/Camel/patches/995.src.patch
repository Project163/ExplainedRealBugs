diff --git a/components/camel-cxf/src/main/java/org/apache/camel/component/cxf/CxfConsumer.java b/components/camel-cxf/src/main/java/org/apache/camel/component/cxf/CxfConsumer.java
index 35c34d0a727..e2fa34928ce 100644
--- a/components/camel-cxf/src/main/java/org/apache/camel/component/cxf/CxfConsumer.java
+++ b/components/camel-cxf/src/main/java/org/apache/camel/component/cxf/CxfConsumer.java
@@ -52,7 +52,7 @@ public class CxfConsumer extends DefaultConsumer {
 
             // we receive a CXF request when this method is called
             public Object invoke(Exchange cxfExchange, Object o) {
-                
+
                 if (LOG.isTraceEnabled()) {
                     LOG.trace("Received CXF Request: " + cxfExchange);
                 }
@@ -63,8 +63,15 @@ public class CxfConsumer extends DefaultConsumer {
 
                 // create a Camel exchange
                 org.apache.camel.Exchange camelExchange = endpoint.createExchange();
+                DataFormat dataFormat = endpoint.getDataFormat();
+
+                BindingOperationInfo boi = cxfExchange.getBindingOperationInfo();
+                if (dataFormat == DataFormat.PAYLOAD && boi.isUnwrapped()) {
+                    boi = boi.getWrappedOperation();
+                    cxfExchange.put(BindingOperationInfo.class, boi);
+                }
                 
-                BindingOperationInfo boi = cxfExchange.get(BindingOperationInfo.class);
+                //BindingOperationInfo boi = cxfExchange.get(BindingOperationInfo.class);
                 if (boi != null) {
                     camelExchange.setProperty(BindingOperationInfo.class.getName(), boi);
                     if (LOG.isTraceEnabled()) {
@@ -73,7 +80,6 @@ public class CxfConsumer extends DefaultConsumer {
                 }
                 
                 // set data format mode in Camel exchange
-                DataFormat dataFormat = endpoint.getDataFormat();
                 camelExchange.setProperty(CxfConstants.DATA_FORMAT_PROPERTY, dataFormat);   
                 if (LOG.isTraceEnabled()) {
                     LOG.trace("Set Exchange property: " + DataFormat.class.getName() 
diff --git a/components/camel-cxf/src/main/java/org/apache/camel/component/cxf/CxfEndpoint.java b/components/camel-cxf/src/main/java/org/apache/camel/component/cxf/CxfEndpoint.java
index e7ee55d664b..62da6b33f0e 100644
--- a/components/camel-cxf/src/main/java/org/apache/camel/component/cxf/CxfEndpoint.java
+++ b/components/camel-cxf/src/main/java/org/apache/camel/component/cxf/CxfEndpoint.java
@@ -23,6 +23,8 @@ import java.util.concurrent.atomic.AtomicBoolean;
 
 import javax.xml.ws.WebServiceProvider;
 
+import org.w3c.dom.Element;
+
 import org.apache.camel.CamelContext;
 import org.apache.camel.CamelException;
 import org.apache.camel.Consumer;
@@ -41,12 +43,12 @@ import org.apache.commons.logging.Log;
 import org.apache.commons.logging.LogFactory;
 import org.apache.cxf.Bus;
 import org.apache.cxf.BusFactory;
-import org.apache.cxf.bus.spring.BusWiringBeanFactoryPostProcessor;
 import org.apache.cxf.common.classloader.ClassLoaderUtils;
 import org.apache.cxf.common.util.ClassHelper;
 import org.apache.cxf.endpoint.Client;
 import org.apache.cxf.endpoint.ClientImpl;
 import org.apache.cxf.endpoint.Endpoint;
+import org.apache.cxf.feature.LoggingFeature;
 import org.apache.cxf.frontend.ClientFactoryBean;
 import org.apache.cxf.frontend.ClientProxy;
 import org.apache.cxf.frontend.ClientProxyFactoryBean;
@@ -57,6 +59,9 @@ import org.apache.cxf.jaxws.JaxWsProxyFactoryBean;
 import org.apache.cxf.jaxws.JaxWsServerFactoryBean;
 import org.apache.cxf.message.Attachment;
 import org.apache.cxf.message.Message;
+import org.apache.cxf.message.MessageContentsList;
+import org.apache.cxf.service.model.BindingOperationInfo;
+import org.apache.cxf.service.model.MessagePartInfo;
 import org.springframework.context.ApplicationContext;
 
 /**
@@ -83,6 +88,7 @@ public class CxfEndpoint extends DefaultEndpoint implements HeaderFilterStrategy
     private HeaderFilterStrategy headerFilterStrategy;
     private AtomicBoolean getBusHasBeenCalled = new AtomicBoolean(false);
     private boolean isSetDefaultBus;
+    private boolean loggingFeatureEnabled;
 
     public CxfEndpoint(String remaining, CxfComponent cxfComponent) {
         super(remaining, cxfComponent);
@@ -144,6 +150,14 @@ public class CxfEndpoint extends DefaultEndpoint implements HeaderFilterStrategy
             }
         }
         
+        if (loggingFeatureEnabled) {
+            sfb.getFeatures().add(new LoggingFeature());
+        }
+
+        if (getDataFormat() == DataFormat.PAYLOAD) {
+            sfb.setDataBinding(new HybridSourceDataBinding());
+        }        
+        
         sfb.setBus(getBus());
         sfb.setStart(false);
     }
@@ -237,6 +251,11 @@ public class CxfEndpoint extends DefaultEndpoint implements HeaderFilterStrategy
             factoryBean.getFeatures().add(new MessageDataFormatFeature());
         } else if (getDataFormat() == DataFormat.PAYLOAD) {
             factoryBean.getFeatures().add(new PayLoadDataFormatFeature());
+            factoryBean.setDataBinding(new HybridSourceDataBinding());
+        }
+        
+        if (loggingFeatureEnabled) {
+            factoryBean.getFeatures().add(new LoggingFeature());
         }
         
         factoryBean.setBus(getBus());
@@ -267,6 +286,11 @@ public class CxfEndpoint extends DefaultEndpoint implements HeaderFilterStrategy
             factoryBean.getFeatures().add(new MessageDataFormatFeature());
         } else if (getDataFormat() == DataFormat.PAYLOAD) {
             factoryBean.getFeatures().add(new PayLoadDataFormatFeature());
+            factoryBean.setDataBinding(new HybridSourceDataBinding());
+        }
+        
+        if (loggingFeatureEnabled) {
+            factoryBean.getFeatures().add(new LoggingFeature());
         }
         
         factoryBean.setBus(getBus());        
@@ -453,6 +477,14 @@ public class CxfEndpoint extends DefaultEndpoint implements HeaderFilterStrategy
     public boolean isSetDefaultBus() {
         return isSetDefaultBus;
     }
+    
+    public void setLoggingFeatureEnabled(boolean loggingFeatureEnabled) {
+        this.loggingFeatureEnabled = loggingFeatureEnabled;
+    }
+
+    public boolean isLoggingFeatureEnabled() {
+        return loggingFeatureEnabled;
+    }    
 
     public void start() throws Exception {
         if (headerFilterStrategy == null) {
@@ -496,8 +528,21 @@ public class CxfEndpoint extends DefaultEndpoint implements HeaderFilterStrategy
             }
             
             if (DataFormat.PAYLOAD == message.get(DataFormat.class)) {
+                
                 CxfPayload<?> payload = (CxfPayload<?>)params[0];
-                message.put(List.class, payload.getBody());
+                List<Element> elements = payload.getBody();
+                
+                BindingOperationInfo boi = message.get(BindingOperationInfo.class);
+                MessageContentsList content = new MessageContentsList();
+                int i = 0;
+                
+                for (MessagePartInfo partInfo : boi.getOperationInfo().getInput().getMessageParts()) {
+                    if (elements.size() > i) {
+                        content.put(partInfo, elements.get(i++));
+                    }
+                }
+
+                message.setContent(List.class, content);
                 message.put(Header.HEADER_LIST, payload.getHeaders());
             } else {
                 super.setParameters(params, message);
diff --git a/components/camel-cxf/src/main/java/org/apache/camel/component/cxf/CxfProducer.java b/components/camel-cxf/src/main/java/org/apache/camel/component/cxf/CxfProducer.java
index cd5b1acf8e9..bcd6d234059 100644
--- a/components/camel-cxf/src/main/java/org/apache/camel/component/cxf/CxfProducer.java
+++ b/components/camel-cxf/src/main/java/org/apache/camel/component/cxf/CxfProducer.java
@@ -17,7 +17,6 @@
 package org.apache.camel.component.cxf;
 
 import java.io.InputStream;
-import java.util.ArrayList;
 import java.util.Collection;
 import java.util.HashMap;
 import java.util.Iterator;
@@ -113,14 +112,21 @@ public class CxfProducer extends DefaultProducer {
         BindingOperationInfo boi = getBindingOperationInfo(camelExchange);
         ObjectHelper.notNull(boi, "BindingOperationInfo");
         
+        // keep the message wrapper in PAYLOAD mode
+        if (dataFormat == DataFormat.PAYLOAD && boi.isUnwrapped()) {
+            boi = boi.getWrappedOperation();
+            cxfExchange.put(BindingOperationInfo.class, boi);
+            
+        } 
+        
         // store the original boi in the exchange
         camelExchange.setProperty(BindingOperationInfo.class.getName(), boi);
         if (LOG.isTraceEnabled()) {
             LOG.trace("Set exchange property: BindingOperationInfo: " + boi);
         }
-        
+
         // Unwrap boi before passing it to make a client call
-        if (!endpoint.isWrapped() && boi != null) {
+        if (dataFormat != DataFormat.PAYLOAD && !endpoint.isWrapped() && boi != null) {
             if (boi.isUnwrappedCapable()) {
                 boi = boi.getUnwrappedOperation();
                 if (LOG.isTraceEnabled()) {
@@ -128,7 +134,7 @@ public class CxfProducer extends DefaultProducer {
                 }
             }
         }
-        
+     
         // bind the request CXF exchange
         binding.populateCxfRequestFromExchange(cxfExchange, camelExchange, 
                 requestContext);
diff --git a/components/camel-cxf/src/main/java/org/apache/camel/component/cxf/DefaultCxfBinding.java b/components/camel-cxf/src/main/java/org/apache/camel/component/cxf/DefaultCxfBinding.java
index 2a0eff919ff..cc98a08a01c 100644
--- a/components/camel-cxf/src/main/java/org/apache/camel/component/cxf/DefaultCxfBinding.java
+++ b/components/camel-cxf/src/main/java/org/apache/camel/component/cxf/DefaultCxfBinding.java
@@ -27,8 +27,11 @@ import java.util.Set;
 
 import javax.activation.DataHandler;
 import javax.xml.namespace.QName;
+import javax.xml.transform.dom.DOMSource;
+import javax.xml.ws.Holder;
 
 import org.w3c.dom.Element;
+import org.w3c.dom.Node;
 
 import org.apache.camel.Exchange;
 import org.apache.camel.ExchangePattern;
@@ -43,6 +46,8 @@ import org.apache.cxf.endpoint.Endpoint;
 import org.apache.cxf.frontend.MethodDispatcher;
 import org.apache.cxf.headers.Header;
 import org.apache.cxf.helpers.CastUtils;
+import org.apache.cxf.helpers.DOMUtils;
+import org.apache.cxf.helpers.XMLUtils;
 import org.apache.cxf.jaxws.context.WrappedMessageContext;
 import org.apache.cxf.message.Attachment;
 import org.apache.cxf.message.Message;
@@ -50,6 +55,8 @@ import org.apache.cxf.message.MessageContentsList;
 import org.apache.cxf.service.Service;
 import org.apache.cxf.service.model.BindingMessageInfo;
 import org.apache.cxf.service.model.BindingOperationInfo;
+import org.apache.cxf.service.model.MessagePartInfo;
+import org.apache.cxf.service.model.OperationInfo;
 
 /**
  * The Default CXF binding implementation.
@@ -267,6 +274,9 @@ public class DefaultCxfBinding implements CxfBinding, HeaderFilterStrategyAware
         DataFormat dataFormat = camelExchange.getProperty(CxfConstants.DATA_FORMAT_PROPERTY,  
                 DataFormat.class);
         
+        // make sure the "requestor role" property does not get propagated as we do switch role
+        responseContext.remove(Message.REQUESTOR_ROLE);
+        
         // propagate contexts
         if (dataFormat != DataFormat.POJO) {
             // copying response context to out message seems to cause problem in POJO mode
@@ -284,7 +294,7 @@ public class DefaultCxfBinding implements CxfBinding, HeaderFilterStrategyAware
         if (outBody != null) {
             if (dataFormat == DataFormat.PAYLOAD) {
                 CxfPayload<?> payload = (CxfPayload<?>)outBody;
-                outMessage.put(List.class, payload.getBody());
+                outMessage.setContent(List.class, getResponsePayloadList(cxfExchange, payload.getBody()));
                 outMessage.put(Header.HEADER_LIST, payload.getHeaders());
             } else {
                 if (responseContext.get(Header.HEADER_LIST) != null) {
@@ -333,7 +343,6 @@ public class DefaultCxfBinding implements CxfBinding, HeaderFilterStrategyAware
         
     }
 
-    
     // HeaderFilterStrategyAware Methods
     // -------------------------------------------------------------------------
     
@@ -350,6 +359,30 @@ public class DefaultCxfBinding implements CxfBinding, HeaderFilterStrategyAware
     // Non public methods
     // -------------------------------------------------------------------------
     
+    protected MessageContentsList getResponsePayloadList(org.apache.cxf.message.Exchange exchange, 
+                                                         List<Element> elements) {
+        BindingOperationInfo boi = exchange.getBindingOperationInfo();
+
+        if (boi.isUnwrapped()) {
+            boi = boi.getWrappedOperation();
+            exchange.put(BindingOperationInfo.class, boi);
+        }
+        
+        MessageContentsList answer = new MessageContentsList();
+
+        int i = 0;
+        
+        for (MessagePartInfo partInfo : boi.getOperationInfo().getOutput().getMessageParts()) {
+            if (elements.size() > i) {
+                answer.put(partInfo, elements.get(i++));
+                
+            }
+        }
+
+        return answer;
+        
+    }
+    
     /**
      * @param camelExchange
      * @param cxfContext Request or Response context
@@ -500,7 +533,6 @@ public class DefaultCxfBinding implements CxfBinding, HeaderFilterStrategyAware
         }        
     }
 
-    @SuppressWarnings("unchecked")
     protected static Object getContentFromCxf(Message message, DataFormat dataFormat) {
         Set<Class<?>> contentFormats = message.getContentFormats();
         Object answer = null;
@@ -522,11 +554,9 @@ public class DefaultCxfBinding implements CxfBinding, HeaderFilterStrategyAware
                     }
                 }
             } else if (dataFormat == DataFormat.PAYLOAD) {
-                // TODO handle other message types in the future.  Currently, this binding only 
-                // deal with SOAP in PayLoad mode.
-                List<Element> body = message.get(List.class);
                 List<SoapHeader> headers = CastUtils.cast((List<?>)message.get(Header.HEADER_LIST));
-                answer = new CxfPayload<SoapHeader>(headers, body);
+                answer = new CxfPayload<SoapHeader>(headers, getPayloadBodyElements(message));
+                
             } else if (dataFormat == DataFormat.MESSAGE) {
                 answer = message.getContent(InputStream.class);
             }
@@ -538,6 +568,68 @@ public class DefaultCxfBinding implements CxfBinding, HeaderFilterStrategyAware
         return answer;
     }
     
+
+    protected static List<Element> getPayloadBodyElements(Message message) {
+        MessageContentsList inObjects = MessageContentsList.getContentsList(message);
+        org.apache.cxf.message.Exchange exchange = message.getExchange();
+        BindingOperationInfo boi = exchange.getBindingOperationInfo();
+
+        OperationInfo op = boi.getOperationInfo();
+        
+        if (boi.isUnwrapped()) {
+            op = boi.getWrappedOperation().getOperationInfo();
+        } 
+        
+        
+        List<MessagePartInfo> partInfos = null;
+        boolean client = Boolean.TRUE.equals(message.get(Message.REQUESTOR_ROLE));
+        if (client) {
+            // it is a response
+            partInfos = op.getOutput().getMessageParts();            
+            
+        } else {
+            // it is a request
+            partInfos = op.getInput().getMessageParts();            
+        }
+        
+        List<Element> answer = new ArrayList<Element>();
+
+        for (MessagePartInfo partInfo : partInfos) {
+            if (!inObjects.hasValue(partInfo)) {
+                continue;
+            }
+            
+            Object part = inObjects.get(partInfo);
+            
+            if (part instanceof Holder) {
+                part = ((Holder)part).value;
+            }
+                        
+            if (part instanceof DOMSource) {
+                Element element = getFirstElement(((DOMSource)part).getNode());
+
+                if (element != null) {
+                    answer.add(element);
+                }
+                
+                if (LOG.isTraceEnabled()) {
+                    LOG.trace("Extract body element " 
+                              + (element == null ? "null" : XMLUtils.toString(element)));
+                }
+                
+            } else if (part instanceof Element) {
+                answer.add((Element)part);
+            } else {
+                if (LOG.isDebugEnabled()) {
+                    LOG.debug("Unhandled part type '" + part.getClass());
+                }
+            }
+        }
+
+        return answer;
+    }
+
+
     public static Object getBodyFromCamel(org.apache.camel.Message out,
             DataFormat dataFormat) {
         Object answer = null;
@@ -552,6 +644,14 @@ public class DefaultCxfBinding implements CxfBinding, HeaderFilterStrategyAware
         return answer;
     }
 
+    private static Element getFirstElement(Node node) {
+        if (node.getNodeType() == Node.ELEMENT_NODE) {
+            return (Element)node;
+        } 
+        
+        return DOMUtils.getFirstElement(node);
+    }
+    
     public void copyJaxWsContext(org.apache.cxf.message.Exchange cxfExchange, Map<String, Object> context) {
         if (cxfExchange.getOutMessage() != null) {
             org.apache.cxf.message.Message outMessage = cxfExchange.getOutMessage();
diff --git a/components/camel-cxf/src/main/java/org/apache/camel/component/cxf/HybridSourceDataBinding.java b/components/camel-cxf/src/main/java/org/apache/camel/component/cxf/HybridSourceDataBinding.java
new file mode 100644
index 00000000000..eeeacc33bf2
--- /dev/null
+++ b/components/camel-cxf/src/main/java/org/apache/camel/component/cxf/HybridSourceDataBinding.java
@@ -0,0 +1,89 @@
+/**
+ * Licensed to the Apache Software Foundation (ASF) under one or more
+ * contributor license agreements.  See the NOTICE file distributed with
+ * this work for additional information regarding copyright ownership.
+ * The ASF licenses this file to You under the Apache License, Version 2.0
+ * (the "License"); you may not use this file except in compliance with
+ * the License.  You may obtain a copy of the License at
+ *
+ *      http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+package org.apache.camel.component.cxf;
+
+import javax.xml.stream.XMLStreamReader;
+import javax.xml.stream.XMLStreamWriter;
+
+import org.w3c.dom.Node;
+
+import org.apache.cxf.databinding.DataReader;
+import org.apache.cxf.databinding.DataWriter;
+import org.apache.cxf.databinding.source.NodeDataReader;
+import org.apache.cxf.databinding.source.NodeDataWriter;
+import org.apache.cxf.databinding.source.XMLStreamDataReader;
+import org.apache.cxf.databinding.source.XMLStreamDataWriter;
+import org.apache.cxf.jaxb.JAXBDataBinding;
+
+/**
+ * This is a hybrid DataBinding of {@link JAXBDataBinding} and {@link org.apache.cxf.databinding.source.SourceDataBinding}.
+ * Like the SourceDataBinding, this DataBinding de/serializes parameters as DOMSource objects.  And like the JAXBDataBinding, the 
+ * {@link #initialize(org.apache.cxf.service.Service)}
+ * method can initialize the service model's message part schema based on the service class in the message part info.  
+ * Hence, this DataBinding supports DOMSource object de/serialization without requiring users to provide a WSDL.
+ * 
+ * @version @Revision: 789534 $
+ */
+public class HybridSourceDataBinding extends JAXBDataBinding {
+    private XMLStreamDataReader xsrReader;
+    private XMLStreamDataWriter xswWriter;
+    private NodeDataWriter nodeWriter;
+    private NodeDataReader nodeReader;
+    
+    public HybridSourceDataBinding() {
+        super();
+        this.xsrReader = new XMLStreamDataReader();
+        this.xswWriter = new XMLStreamDataWriter();
+
+        this.nodeReader = new NodeDataReader();
+        this.nodeWriter = new NodeDataWriter(); 
+    }
+    
+    @SuppressWarnings("unchecked")
+    @Override
+    public <T> DataReader<T> createReader(Class<T> cls) {
+        if (cls == XMLStreamReader.class) {
+            return (DataReader<T>) xsrReader;
+        } else if (cls == Node.class) {
+            return (DataReader<T>) nodeReader;
+        } else {
+            throw new UnsupportedOperationException("The type " + cls.getName() + " is not supported.");
+        }
+    }
+
+    @Override
+    public Class<?>[] getSupportedReaderFormats() {
+        return new Class[] {XMLStreamReader.class, Node.class};
+    }
+    
+    @SuppressWarnings("unchecked")
+    @Override
+    public <T> DataWriter<T> createWriter(Class<T> cls) {
+        if (cls == XMLStreamWriter.class) {
+            return (DataWriter<T>) xswWriter;
+        } else if (cls == Node.class) {
+            return (DataWriter<T>) nodeWriter;
+        } else {
+            throw new UnsupportedOperationException("The type " + cls.getName() + " is not supported.");
+        }
+    }
+    
+    @Override
+    public Class<?>[] getSupportedWriterFormats() {
+        return new Class[] {XMLStreamWriter.class, Node.class};
+    }
+}
diff --git a/components/camel-cxf/src/main/java/org/apache/camel/component/cxf/cxfbean/CxfBeanEndpoint.java b/components/camel-cxf/src/main/java/org/apache/camel/component/cxf/cxfbean/CxfBeanEndpoint.java
index 0983d5ae65e..42d617de24c 100644
--- a/components/camel-cxf/src/main/java/org/apache/camel/component/cxf/cxfbean/CxfBeanEndpoint.java
+++ b/components/camel-cxf/src/main/java/org/apache/camel/component/cxf/cxfbean/CxfBeanEndpoint.java
@@ -29,6 +29,7 @@ import org.apache.camel.util.CamelContextHelper;
 import org.apache.cxf.Bus;
 import org.apache.cxf.BusFactory;
 import org.apache.cxf.endpoint.Server;
+import org.apache.cxf.feature.LoggingFeature;
 import org.apache.cxf.jaxrs.JAXRSServerFactoryBean;
 import org.apache.cxf.jaxws.JaxWsServerFactoryBean;
 import org.apache.cxf.transport.ConduitInitiatorManager;
@@ -48,7 +49,8 @@ public class CxfBeanEndpoint extends ProcessorEndpoint implements HeaderFilterSt
     private boolean isSetDefaultBus;
     private CxfBeanBinding cxfBeanBinding = new DefaultCxfBeanBinding();
     private HeaderFilterStrategy headerFilterStrategy = new CxfHeaderFilterStrategy();
-    
+    private boolean loggingFeatureEnabled;
+
     public CxfBeanEndpoint(String remaining, CxfBeanComponent component) {
         super(remaining, component);
     }
@@ -101,15 +103,21 @@ public class CxfBeanEndpoint extends ProcessorEndpoint implements HeaderFilterSt
             bean.setBus(bus);
             bean.setStart(true);
             bean.setAddress("camel://" + createEndpointUri());
+            if (loggingFeatureEnabled) {
+                bean.getFeatures().add(new LoggingFeature());
+            }            
             server = bean.create();
         } else {
-            JAXRSServerFactoryBean answer = new JAXRSServerFactoryBean();
-            answer.setServiceBeans(serviceBeans);
-            answer.setAddress("camel://" + createEndpointUri());
-            answer.setStart(true);
-            answer.setTransportId(CxfBeanTransportFactory.TRANSPORT_ID);
-            answer.setBus(bus);
-            server = answer.create();
+            JAXRSServerFactoryBean bean = new JAXRSServerFactoryBean();
+            bean.setServiceBeans(serviceBeans);
+            bean.setAddress("camel://" + createEndpointUri());
+            bean.setStart(true);
+            bean.setTransportId(CxfBeanTransportFactory.TRANSPORT_ID);
+            bean.setBus(bus);
+            if (loggingFeatureEnabled) {
+                bean.getFeatures().add(new LoggingFeature());
+            }  
+            server = bean.create();
         }
     }
     
@@ -167,5 +175,13 @@ public class CxfBeanEndpoint extends ProcessorEndpoint implements HeaderFilterSt
     public HeaderFilterStrategy getHeaderFilterStrategy() {
         return headerFilterStrategy;
     }
+    
+    public void setLoggingFeatureEnabled(boolean loggingFeatureEnabled) {
+        this.loggingFeatureEnabled = loggingFeatureEnabled;
+    }
+
+    public boolean isLoggingFeatureEnabled() {
+        return loggingFeatureEnabled;
+    }     
 
 }
diff --git a/components/camel-cxf/src/main/java/org/apache/camel/component/cxf/feature/PayLoadDataFormatFeature.java b/components/camel-cxf/src/main/java/org/apache/camel/component/cxf/feature/PayLoadDataFormatFeature.java
index a74df3b3116..4fb82683700 100644
--- a/components/camel-cxf/src/main/java/org/apache/camel/component/cxf/feature/PayLoadDataFormatFeature.java
+++ b/components/camel-cxf/src/main/java/org/apache/camel/component/cxf/feature/PayLoadDataFormatFeature.java
@@ -20,86 +20,40 @@ import java.util.ArrayList;
 import java.util.Collection;
 import java.util.logging.Logger;
 
-import org.apache.camel.component.cxf.interceptors.DOMInInterceptor;
-import org.apache.camel.component.cxf.interceptors.DOMOutInterceptor;
-import org.apache.camel.component.cxf.interceptors.PayloadContentRedirectInterceptor;
+import org.apache.camel.component.cxf.interceptors.ConfigureDocLitWrapperInterceptor;
+import org.apache.camel.component.cxf.interceptors.RemoveClassTypeInterceptor;
 import org.apache.cxf.Bus;
-import org.apache.cxf.binding.Binding;
 import org.apache.cxf.common.logging.LogUtils;
 import org.apache.cxf.endpoint.Client;
 import org.apache.cxf.endpoint.Server;
 import org.apache.cxf.interceptor.ClientFaultConverter;
-import org.apache.cxf.phase.Phase;
 
 /**
  * This feature just setting up the CXF endpoint interceptor for handling the
  * Message in PAYLOAD data format
  */
 public class PayLoadDataFormatFeature extends AbstractDataFormatFeature {
-    private static final Logger LOG = LogUtils.getL7dLogger(PayLoadDataFormatFeature.class);
-    // filter the unused phase
-    
-    // PRE_INVOKE needs to be removed.  Otherwise, HolderInInterceptor will interfere us
-    private static final String[] REMOVING_IN_PHASES = {
-        Phase.UNMARSHAL, Phase.PRE_LOGICAL, Phase.PRE_LOGICAL_ENDING, Phase.POST_LOGICAL,
-        Phase.POST_LOGICAL_ENDING, Phase.PRE_INVOKE
-    };
+    private static final Logger LOG = LogUtils.getL7dLogger(PayLoadDataFormatFeature.class);    
 
-    private static final String[] REMOVING_OUT_PHASES = {
-        Phase.MARSHAL, Phase.MARSHAL_ENDING, Phase.PRE_LOGICAL, Phase.PRE_LOGICAL_ENDING, Phase.POST_LOGICAL,
-        Phase.POST_LOGICAL_ENDING
-    };
-    
     private static final Collection<Class> REMOVING_FAULT_IN_INTERCEPTORS;
-    
+
+
     static {
         REMOVING_FAULT_IN_INTERCEPTORS = new ArrayList<Class>();
-        // remove ClientFaultConverter as it tries to unmarshal to java object.  
         REMOVING_FAULT_IN_INTERCEPTORS.add(ClientFaultConverter.class);
     }
     
     @Override
     public void initialize(Client client, Bus bus) {
-        removeInterceptorWhichIsInThePhases(client.getInInterceptors(), REMOVING_IN_PHASES);
-        removeInterceptorWhichIsInThePhases(client.getEndpoint().getService().getInInterceptors(), REMOVING_IN_PHASES);
-        removeInterceptorWhichIsInThePhases(client.getEndpoint().getInInterceptors(), REMOVING_IN_PHASES);
-        removeInterceptorWhichIsInThePhases(client.getEndpoint().getBinding().getInInterceptors(), REMOVING_IN_PHASES);
-
-        removeInterceptorWhichIsInThePhases(client.getOutInterceptors(), REMOVING_OUT_PHASES);
-        removeInterceptorWhichIsInThePhases(client.getEndpoint().getService().getOutInterceptors(), REMOVING_OUT_PHASES);
-        removeInterceptorWhichIsInThePhases(client.getEndpoint().getOutInterceptors(), REMOVING_OUT_PHASES);
-        removeInterceptorWhichIsInThePhases(client.getEndpoint().getBinding().getOutInterceptors(), REMOVING_OUT_PHASES);
-        
-        removeInterceptors(client.getInFaultInterceptors(), REMOVING_FAULT_IN_INTERCEPTORS);
-        removeInterceptors(client.getEndpoint().getService().getInFaultInterceptors(), REMOVING_FAULT_IN_INTERCEPTORS);
-        removeInterceptors(client.getEndpoint().getInFaultInterceptors(), REMOVING_FAULT_IN_INTERCEPTORS);
-        removeInterceptors(client.getEndpoint().getBinding().getInFaultInterceptors(), REMOVING_FAULT_IN_INTERCEPTORS);
-
-        addDataHandlingInterceptors(client.getEndpoint().getBinding());        
+        removeFaultInInterceptorFromClient(client);
+        client.getEndpoint().getBinding().getInInterceptors().add(new ConfigureDocLitWrapperInterceptor(true));
+        client.getEndpoint().getBinding().getInInterceptors().add(new RemoveClassTypeInterceptor());
     }
 
     @Override
-    public void initialize(Server server, Bus bus) {
-
-        removeInterceptorWhichIsInThePhases(server.getEndpoint().getService().getInInterceptors(), REMOVING_IN_PHASES);
-        removeInterceptorWhichIsInThePhases(server.getEndpoint().getInInterceptors(), REMOVING_IN_PHASES);
-        removeInterceptorWhichIsInThePhases(server.getEndpoint().getBinding().getInInterceptors(), REMOVING_IN_PHASES);
-
-        removeInterceptorWhichIsInThePhases(server.getEndpoint().getService().getOutInterceptors(), REMOVING_OUT_PHASES);
-        removeInterceptorWhichIsInThePhases(server.getEndpoint().getOutInterceptors(), REMOVING_OUT_PHASES);
-        removeInterceptorWhichIsInThePhases(server.getEndpoint().getBinding().getOutInterceptors(), REMOVING_OUT_PHASES);
-        
-        removeInterceptors(server.getEndpoint().getService().getInFaultInterceptors(), REMOVING_FAULT_IN_INTERCEPTORS);
-        removeInterceptors(server.getEndpoint().getInFaultInterceptors(), REMOVING_FAULT_IN_INTERCEPTORS);
-        removeInterceptors(server.getEndpoint().getBinding().getInFaultInterceptors(), REMOVING_FAULT_IN_INTERCEPTORS);
-
-        addDataHandlingInterceptors(server.getEndpoint().getBinding());        
-    }
-
-    private void addDataHandlingInterceptors(Binding binding) {
-        binding.getInInterceptors().add(new DOMInInterceptor());
-        binding.getOutInterceptors().add(new DOMOutInterceptor());
-        binding.getOutInterceptors().add(new PayloadContentRedirectInterceptor());
+    public void initialize(Server server, Bus bus) {               
+        server.getEndpoint().getBinding().getInInterceptors().add(new ConfigureDocLitWrapperInterceptor(true));
+        server.getEndpoint().getBinding().getInInterceptors().add(new RemoveClassTypeInterceptor());
     }
 
     @Override
@@ -107,5 +61,12 @@ public class PayLoadDataFormatFeature extends AbstractDataFormatFeature {
         return LOG;
     }
     
+    private void removeFaultInInterceptorFromClient(Client client) {
+        removeInterceptors(client.getInFaultInterceptors(), REMOVING_FAULT_IN_INTERCEPTORS);
+        removeInterceptors(client.getEndpoint().getService().getInFaultInterceptors(), REMOVING_FAULT_IN_INTERCEPTORS);
+        removeInterceptors(client.getEndpoint().getInFaultInterceptors(), REMOVING_FAULT_IN_INTERCEPTORS);
+        removeInterceptors(client.getEndpoint().getBinding().getInFaultInterceptors(), REMOVING_FAULT_IN_INTERCEPTORS);        
+    }
+
 
 }
diff --git a/components/camel-cxf/src/main/java/org/apache/camel/component/cxf/interceptors/AbstractMessageInInterceptor.java b/components/camel-cxf/src/main/java/org/apache/camel/component/cxf/interceptors/AbstractMessageInInterceptor.java
deleted file mode 100644
index c05aa9d40d3..00000000000
--- a/components/camel-cxf/src/main/java/org/apache/camel/component/cxf/interceptors/AbstractMessageInInterceptor.java
+++ /dev/null
@@ -1,163 +0,0 @@
-/**
- * Licensed to the Apache Software Foundation (ASF) under one or more
- * contributor license agreements.  See the NOTICE file distributed with
- * this work for additional information regarding copyright ownership.
- * The ASF licenses this file to You under the Apache License, Version 2.0
- * (the "License"); you may not use this file except in compliance with
- * the License.  You may obtain a copy of the License at
- *
- *      http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.camel.component.cxf.interceptors;
-
-import java.util.List;
-import java.util.logging.Level;
-import java.util.logging.Logger;
-
-import javax.xml.namespace.QName;
-import javax.xml.stream.XMLStreamException;
-import javax.xml.stream.XMLStreamReader;
-
-import org.w3c.dom.Document;
-import org.w3c.dom.Element;
-
-import org.apache.cxf.endpoint.Endpoint;
-import org.apache.cxf.interceptor.Fault;
-import org.apache.cxf.message.Exchange;
-import org.apache.cxf.message.Message;
-import org.apache.cxf.phase.AbstractPhaseInterceptor;
-import org.apache.cxf.service.model.BindingInfo;
-import org.apache.cxf.service.model.BindingMessageInfo;
-import org.apache.cxf.service.model.BindingOperationInfo;
-import org.apache.cxf.service.model.OperationInfo;
-import org.apache.cxf.staxutils.StaxUtils;
-
-/**
- * This is the base class for message interceptors that intercepts message as DOM content
- * infers the BindingOperationInfo and then set the
- *
- */
-public abstract class AbstractMessageInInterceptor<T extends Message>
-       extends AbstractPhaseInterceptor<T> {
-
-    public AbstractMessageInInterceptor(String phase) {
-        super(phase);
-    }
-
-    protected boolean isRequestor(Message message) {
-        return Boolean.TRUE.equals(message.get(Message.REQUESTOR_ROLE));
-    }
-
-    /**
-     * Infer the OperationInfo from the XML Document and get the list of
-     * parts as DOM Element
-     */
-    public void handleMessage(T message) throws Fault {
-        Logger logger = getLogger();
-
-        if (isFaultMessage(message)) {
-            message.getInterceptorChain().abort();
-            Endpoint ep = message.getExchange().get(Endpoint.class);
-            if (ep.getInFaultObserver() != null) {
-                ep.getInFaultObserver().onMessage(message);
-                return;
-            }
-            //Fault f = createFault(message, payloadEl);
-            //message.setContent(Exception.class, f);
-            //return;
-        }
-
-        Document document = createDOMMessage(message);
-        //Document document = message.getContent(Document.class);
-        Element payloadEl = (Element)document.getChildNodes().item(0);
-
-        Exchange ex = message.getExchange();
-        
-        // make sure BindingInfo put in the exchange
-        BindingInfo bi = ex.get(BindingInfo.class);
-        if (bi == null) {
-            Endpoint ep = ex.get(Endpoint.class);
-            bi = ep.getEndpointInfo().getBinding();
-            ex.put(BindingInfo.class, bi);            
-        }
-        
-        BindingOperationInfo boi = ex.get(BindingOperationInfo.class);
-        if (boi == null) {
-            
-            // handling inbound message
-            if (logger.isLoggable(Level.INFO)) {
-                logger.info("AbstractRoutingMessageInInterceptor Infer BindingOperationInfo.");
-            }
-
-            boi = getBindingOperation(message, document);
-
-            if (boi == null) {
-                QName startQName = new QName(payloadEl.getNamespaceURI(), payloadEl.getLocalName());
-
-                throw new Fault(new org.apache.cxf.common.i18n.Message(
-                                "REQ_NOT_UNDERSTOOD", getLogger(), startQName));
-            }
-
-            if (boi != null) {
-                ex.put(BindingOperationInfo.class, boi);
-                ex.put(OperationInfo.class, boi.getOperationInfo());
-                ex.setOneWay(boi.getOperationInfo().isOneWay());
-                if (logger.isLoggable(Level.INFO)) {
-                    logger.info("DOMInInterceptor- BindingOperation is:" + boi.getName());
-                }
-            }
-        }
-
-        BindingMessageInfo bmi = isRequestor(message) ?  boi.getOutput() : boi.getInput();
-        List<Element> partList = getPartList(message, payloadEl, bmi);
-        message.put(List.class, partList);
-        
-    }
-
-    /**
-     * This method is called to convert a incoming message format e.g Stax Stream
-     * to a DOM Tree. Default Implementation converts Stax Stream to a DOM
-     */
-    protected Document createDOMMessage(T message) {
-        Document doc = null;
-        try {
-            if (getLogger().isLoggable(Level.INFO)) {
-                getLogger().info("AbstractMessageInInterceptor Converting Stax Stream to DOM");
-            }
-            XMLStreamReader xsr = message.getContent(XMLStreamReader.class);
-            doc = StaxUtils.read(xsr);
-        } catch (XMLStreamException xe) {
-            throw new Fault(new org.apache.cxf.common.i18n.Message("STAX_READ_EXC", getLogger()), xe);
-        }
-        return doc;
-    }
-
-    protected abstract Logger getLogger();
-
-    /**
-     * This method is called on incoming to check if it is a fault.
-     */
-    protected abstract boolean isFaultMessage(T message);
-
-    /**
-     * This method is called when the routing message interceptor has received a inbound message
-     * It infers the binding operation by matching the root Element with a binding operation
-     * from the service model.
-     */
-    protected abstract BindingOperationInfo getBindingOperation(T inMessage, Document document);
-
-    /**
-     * This method is called when the routing message interceptor has intercepted a inbound
-     * message as a DOM Content.  It retreives the message parts as DOM Element
-     * and returns a List of Element.
-     */
-    protected abstract List<Element> getPartList(T inMessage, Element rootElement, BindingMessageInfo boi);
-
-   
-}
diff --git a/components/camel-cxf/src/main/java/org/apache/camel/component/cxf/interceptors/AbstractMessageOutInterceptor.java b/components/camel-cxf/src/main/java/org/apache/camel/component/cxf/interceptors/AbstractMessageOutInterceptor.java
deleted file mode 100644
index b254848b253..00000000000
--- a/components/camel-cxf/src/main/java/org/apache/camel/component/cxf/interceptors/AbstractMessageOutInterceptor.java
+++ /dev/null
@@ -1,80 +0,0 @@
-/**
- * Licensed to the Apache Software Foundation (ASF) under one or more
- * contributor license agreements.  See the NOTICE file distributed with
- * this work for additional information regarding copyright ownership.
- * The ASF licenses this file to You under the Apache License, Version 2.0
- * (the "License"); you may not use this file except in compliance with
- * the License.  You may obtain a copy of the License at
- *
- *      http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.camel.component.cxf.interceptors;
-
-import java.util.List;
-
-import java.util.logging.Logger;
-
-import javax.xml.namespace.QName;
-
-import org.w3c.dom.Document;
-import org.w3c.dom.Element;
-import org.w3c.dom.Node;
-
-import org.apache.cxf.helpers.DOMUtils;
-import org.apache.cxf.message.Message;
-import org.apache.cxf.phase.AbstractPhaseInterceptor;
-
-/**
- * This is the base class for message interceptors that intercepts
- * binding specific headers and message parts as DOM Element.
- * Then moves dom elements between header and message part list based on the
- * binding operation info provided in the exchange.
- */
-public abstract class AbstractMessageOutInterceptor<T extends Message>
-       extends AbstractPhaseInterceptor<T> {
-    
-    
-    public AbstractMessageOutInterceptor(String phase) {
-        super(phase);
-    }
-    protected boolean isRequestor(Message message) {
-        return Boolean.TRUE.equals(message.get(Message.REQUESTOR_ROLE));
-    }
-
-    protected abstract Logger getLogger();
-    
-    protected Element createElement(QName elName, List<Element> childEl) {
-        Document doc = DOMUtils.createDocument();
-
-        String prefix = elName.getPrefix();
-        StringBuilder tagName = new StringBuilder();
-        if (!"".equals(prefix)) {
-            tagName.append(prefix);
-            tagName.append(":");
-        }
-        tagName.append(elName.getLocalPart());
-        
-        Element el = doc.createElementNS(elName.getNamespaceURI(),
-                                         tagName.toString());
-
-        if (!"".equals(elName.getPrefix())) {
-            StringBuilder attrName = new StringBuilder("xmlns");        
-            attrName.append(':');
-            attrName.append(elName.getPrefix());
-            el.setAttribute(attrName.toString(), elName.getNamespaceURI());
-        }
-
-        for (Element part : childEl) {
-            Node adoptedNode = doc.adoptNode(part);
-            el.appendChild(adoptedNode);
-        }
-
-        return el;
-    }    
-}
diff --git a/components/camel-cxf/src/main/java/org/apache/camel/component/cxf/interceptors/ConfigureDocLitWrapperInterceptor.java b/components/camel-cxf/src/main/java/org/apache/camel/component/cxf/interceptors/ConfigureDocLitWrapperInterceptor.java
new file mode 100644
index 00000000000..38838ce335d
--- /dev/null
+++ b/components/camel-cxf/src/main/java/org/apache/camel/component/cxf/interceptors/ConfigureDocLitWrapperInterceptor.java
@@ -0,0 +1,52 @@
+/**
+ * Licensed to the Apache Software Foundation (ASF) under one or more
+ * contributor license agreements.  See the NOTICE file distributed with
+ * this work for additional information regarding copyright ownership.
+ * The ASF licenses this file to You under the Apache License, Version 2.0
+ * (the "License"); you may not use this file except in compliance with
+ * the License.  You may obtain a copy of the License at
+ *
+ *      http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+package org.apache.camel.component.cxf.interceptors;
+
+import org.apache.cxf.interceptor.AbstractInDatabindingInterceptor;
+import org.apache.cxf.interceptor.DocLiteralInInterceptor;
+import org.apache.cxf.interceptor.Fault;
+import org.apache.cxf.message.Message;
+import org.apache.cxf.phase.Phase;
+
+/**
+ * This interface configures the flag {@link DocLiteralInInterceptor#KEEP_PARAMETERS_WRAPPER}.
+ * 
+ * @version @Revision: 789534 $
+ */
+public class ConfigureDocLitWrapperInterceptor extends AbstractInDatabindingInterceptor {
+
+    boolean unwrapParameterFlag;
+    
+    public ConfigureDocLitWrapperInterceptor(boolean unwrapParameterFlag) {
+        super(Phase.UNMARSHAL);        
+        addBefore(DocLiteralInInterceptor.class.getName());
+        this.unwrapParameterFlag = unwrapParameterFlag;
+    }
+
+    public void handleMessage(Message message) throws Fault {
+        message.put(DocLiteralInInterceptor.KEEP_PARAMETERS_WRAPPER, unwrapParameterFlag);
+    }
+    
+    public boolean isUnwrapParameterFlag() {
+        return unwrapParameterFlag;
+    }
+
+    public void setUnwrapParameterFlag(boolean unwrapParameterFlag) {
+        this.unwrapParameterFlag = unwrapParameterFlag;
+    }
+
+}
diff --git a/components/camel-cxf/src/main/java/org/apache/camel/component/cxf/interceptors/DOMInInterceptor.java b/components/camel-cxf/src/main/java/org/apache/camel/component/cxf/interceptors/DOMInInterceptor.java
deleted file mode 100644
index 0d556f57c76..00000000000
--- a/components/camel-cxf/src/main/java/org/apache/camel/component/cxf/interceptors/DOMInInterceptor.java
+++ /dev/null
@@ -1,49 +0,0 @@
-/**
- * Licensed to the Apache Software Foundation (ASF) under one or more
- * contributor license agreements.  See the NOTICE file distributed with
- * this work for additional information regarding copyright ownership.
- * The ASF licenses this file to You under the Apache License, Version 2.0
- * (the "License"); you may not use this file except in compliance with
- * the License.  You may obtain a copy of the License at
- *
- *      http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.camel.component.cxf.interceptors;
-
-import java.util.logging.Logger;
-
-import org.apache.cxf.binding.soap.SoapMessage;
-import org.apache.cxf.binding.soap.interceptor.CheckFaultInterceptor;
-import org.apache.cxf.common.logging.LogUtils;
-import org.apache.cxf.interceptor.Fault;
-import org.apache.cxf.message.Message;
-import org.apache.cxf.message.XMLMessage;
-import org.apache.cxf.phase.AbstractPhaseInterceptor;
-import org.apache.cxf.phase.Phase;
-
-public class DOMInInterceptor extends AbstractPhaseInterceptor<Message> {
-    private static final Logger LOG = LogUtils.getL7dLogger(DOMOutInterceptor.class);
-    private final XMLMessageInInterceptor xmlInterceptor = new XMLMessageInInterceptor();
-    private final SoapMessageInInterceptor soapInterceptor = new SoapMessageInInterceptor();
-    public DOMInInterceptor() {
-        super(Phase.POST_PROTOCOL);
-        this.addAfter(CheckFaultInterceptor.class.getName());
-    }
-
-    public void handleMessage(Message message) throws Fault {
-        if (message instanceof XMLMessage) {
-            xmlInterceptor.handleMessage((XMLMessage)message);
-        } else if (message instanceof SoapMessage) {
-            soapInterceptor.handleMessage((SoapMessage)message);
-        } else {
-            throw new Fault(new org.apache.cxf.common.i18n.Message("NOT_SUPPORTED_MESSAGE",
-                                                                   LOG, message.getClass().getName()));
-        }
-    }
-}
diff --git a/components/camel-cxf/src/main/java/org/apache/camel/component/cxf/interceptors/DOMOutInterceptor.java b/components/camel-cxf/src/main/java/org/apache/camel/component/cxf/interceptors/DOMOutInterceptor.java
deleted file mode 100644
index 3f5e548ffa0..00000000000
--- a/components/camel-cxf/src/main/java/org/apache/camel/component/cxf/interceptors/DOMOutInterceptor.java
+++ /dev/null
@@ -1,52 +0,0 @@
-/**
- * Licensed to the Apache Software Foundation (ASF) under one or more
- * contributor license agreements.  See the NOTICE file distributed with
- * this work for additional information regarding copyright ownership.
- * The ASF licenses this file to You under the Apache License, Version 2.0
- * (the "License"); you may not use this file except in compliance with
- * the License.  You may obtain a copy of the License at
- *
- *      http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.camel.component.cxf.interceptors;
-
-import java.util.logging.Logger;
-
-import org.apache.cxf.binding.soap.SoapMessage;
-import org.apache.cxf.common.logging.LogUtils;
-import org.apache.cxf.interceptor.Fault;
-import org.apache.cxf.interceptor.MessageSenderInterceptor;
-import org.apache.cxf.message.Message;
-import org.apache.cxf.message.XMLMessage;
-import org.apache.cxf.phase.AbstractPhaseInterceptor;
-import org.apache.cxf.phase.Phase;
-
-public class DOMOutInterceptor extends AbstractPhaseInterceptor<Message> {
-    private static final Logger LOG = LogUtils.getL7dLogger(DOMOutInterceptor.class);
-
-
-    private final XMLMessageOutInterceptor xmlInterceptor = new XMLMessageOutInterceptor();
-    private final SoapMessageOutInterceptor soapInterceptor = new SoapMessageOutInterceptor();
-    
-    public DOMOutInterceptor() {
-        super(Phase.PREPARE_SEND);
-        this.addBefore(MessageSenderInterceptor.class.getName());
-    }
-    
-    public void handleMessage(Message message) throws Fault {
-        if (message instanceof XMLMessage) {
-            xmlInterceptor.handleMessage((XMLMessage)message);
-        } else if (message instanceof SoapMessage) {
-            soapInterceptor.handleMessage((SoapMessage)message);
-        } else {
-            throw new Fault(new org.apache.cxf.common.i18n.Message("NOT_SUPPORTED_MESSAGE", 
-                                                                   LOG, message.getClass().getName()));
-        }        
-    }
-}
diff --git a/components/camel-cxf/src/main/java/org/apache/camel/component/cxf/interceptors/PayloadContentRedirectInterceptor.java b/components/camel-cxf/src/main/java/org/apache/camel/component/cxf/interceptors/PayloadContentRedirectInterceptor.java
deleted file mode 100644
index cfd9160ff18..00000000000
--- a/components/camel-cxf/src/main/java/org/apache/camel/component/cxf/interceptors/PayloadContentRedirectInterceptor.java
+++ /dev/null
@@ -1,71 +0,0 @@
-/**
- * Licensed to the Apache Software Foundation (ASF) under one or more
- * contributor license agreements.  See the NOTICE file distributed with
- * this work for additional information regarding copyright ownership.
- * The ASF licenses this file to You under the Apache License, Version 2.0
- * (the "License"); you may not use this file except in compliance with
- * the License.  You may obtain a copy of the License at
- *
- *      http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.camel.component.cxf.interceptors;
-
-import java.util.List;
-import java.util.logging.Level;
-import java.util.logging.Logger;
-
-import javax.xml.stream.XMLStreamException;
-import javax.xml.stream.XMLStreamWriter;
-
-import org.w3c.dom.Element;
-
-import org.apache.cxf.interceptor.Fault;
-import org.apache.cxf.message.Message;
-import org.apache.cxf.phase.AbstractPhaseInterceptor;
-import org.apache.cxf.phase.Phase;
-import org.apache.cxf.staxutils.StaxUtils;
-
-public class PayloadContentRedirectInterceptor extends AbstractPhaseInterceptor<Message> {
-    private static final Logger LOG = Logger.getLogger(PayloadContentRedirectInterceptor.class.getName());
-
-    public PayloadContentRedirectInterceptor() {
-        super(Phase.POST_STREAM);
-    }
-
-    @SuppressWarnings("unchecked")
-    public void handleMessage(Message message) throws Fault {
-        
-        XMLStreamWriter out = message.getContent(XMLStreamWriter.class);
-
-        if (out == null) {
-            if (LOG.isLoggable(Level.FINEST)) {
-                LOG.finest("XMLStreamWriter is null");
-            }
-            return;
-        }
-
-        List<Element> in = message.get(List.class);
-
-        if (in == null) {
-            if (LOG.isLoggable(Level.FINEST)) {
-                LOG.finest("Payload List is null");
-            }
-            return;
-        }
-
-        try {
-            for (Element el : in) {
-                StaxUtils.writeElement(el, out, false, true);
-            }
-        } catch (XMLStreamException e) {
-            throw new Fault(e);
-        }
-        
-    }
-}
diff --git a/components/camel-cxf/src/main/java/org/apache/camel/component/cxf/interceptors/RemoveClassTypeInterceptor.java b/components/camel-cxf/src/main/java/org/apache/camel/component/cxf/interceptors/RemoveClassTypeInterceptor.java
new file mode 100644
index 00000000000..4f1d7b48063
--- /dev/null
+++ b/components/camel-cxf/src/main/java/org/apache/camel/component/cxf/interceptors/RemoveClassTypeInterceptor.java
@@ -0,0 +1,89 @@
+/**
+ * Licensed to the Apache Software Foundation (ASF) under one or more
+ * contributor license agreements.  See the NOTICE file distributed with
+ * this work for additional information regarding copyright ownership.
+ * The ASF licenses this file to You under the Apache License, Version 2.0
+ * (the "License"); you may not use this file except in compliance with
+ * the License.  You may obtain a copy of the License at
+ *
+ *      http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+package org.apache.camel.component.cxf.interceptors;
+
+import org.apache.cxf.binding.soap.interceptor.SoapHeaderInterceptor;
+import org.apache.cxf.interceptor.Fault;
+import org.apache.cxf.message.Exchange;
+import org.apache.cxf.message.Message;
+import org.apache.cxf.phase.AbstractPhaseInterceptor;
+import org.apache.cxf.phase.Phase;
+import org.apache.cxf.service.model.BindingMessageInfo;
+import org.apache.cxf.service.model.BindingOperationInfo;
+import org.apache.cxf.service.model.MessageInfo;
+import org.apache.cxf.service.model.MessagePartInfo;
+
+/**
+ * This interceptor traverses the {@link BindingOperationInfo} and  
+ * invokes the {@link MessagePartInfo#setTypeQName(javax.xml.namespace.QName)} method to set
+ * the service class to null.  The reason we may want to set the service class to null is 
+ * because CXF will try to use JAXB if the service class is present.  It affects DomSource
+ * payload to be processed correctly.
+ *  
+ * @version @Revision: 789534 $
+ */
+public class RemoveClassTypeInterceptor extends AbstractPhaseInterceptor<Message> {
+
+    public RemoveClassTypeInterceptor() {
+        super(Phase.UNMARSHAL);
+        addBefore(SoapHeaderInterceptor.class.getName());
+
+    }
+
+    public void handleMessage(Message message) throws Fault {
+        Exchange exchange = message.getExchange();
+        BindingOperationInfo bop = exchange.getBindingOperationInfo();
+        
+        if (bop == null) {
+            return;    
+        }
+        
+        if (bop.isUnwrapped()) {
+            bop = bop.getWrappedOperation();
+        }
+
+        if (bop.isUnwrappedCapable()) {
+            removePartTypeClass(bop.getWrappedOperation().getOperationInfo().getInput());
+            removePartTypeClass(bop.getWrappedOperation().getOperationInfo().getOutput());
+            removePartTypeClass(bop.getWrappedOperation().getInput());
+            removePartTypeClass(bop.getWrappedOperation().getOutput());
+        } else {
+            removePartTypeClass(bop.getOperationInfo().getInput());
+            removePartTypeClass(bop.getOperationInfo().getOutput());
+            removePartTypeClass(bop.getInput());
+            removePartTypeClass(bop.getOutput());
+        }
+        
+    }
+
+    protected void removePartTypeClass(BindingMessageInfo bmi) {
+        if (bmi != null) {
+            for (MessagePartInfo part : bmi.getMessageParts()) {
+                part.setTypeClass(null);
+            }     
+        }
+    }
+
+    protected void removePartTypeClass(MessageInfo msgInfo) {
+        if (msgInfo != null) {
+            for (MessagePartInfo part : msgInfo.getMessageParts()) {
+                part.setTypeClass(null);
+            }     
+        }
+    }
+
+}
diff --git a/components/camel-cxf/src/main/java/org/apache/camel/component/cxf/interceptors/SoapMessageInInterceptor.java b/components/camel-cxf/src/main/java/org/apache/camel/component/cxf/interceptors/SoapMessageInInterceptor.java
deleted file mode 100644
index 42bb9326377..00000000000
--- a/components/camel-cxf/src/main/java/org/apache/camel/component/cxf/interceptors/SoapMessageInInterceptor.java
+++ /dev/null
@@ -1,118 +0,0 @@
-/**
- * Licensed to the Apache Software Foundation (ASF) under one or more
- * contributor license agreements.  See the NOTICE file distributed with
- * this work for additional information regarding copyright ownership.
- * The ASF licenses this file to You under the Apache License, Version 2.0
- * (the "License"); you may not use this file except in compliance with
- * the License.  You may obtain a copy of the License at
- *
- *      http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.camel.component.cxf.interceptors;
-
-
-
-import java.util.ArrayList;
-import java.util.Collection;
-import java.util.List;
-
-import java.util.logging.Level;
-import java.util.logging.Logger;
-
-import javax.xml.namespace.QName;
-
-import org.w3c.dom.Document;
-import org.w3c.dom.Element;
-import org.w3c.dom.Node;
-
-
-import org.apache.cxf.binding.soap.SoapMessage;
-import org.apache.cxf.binding.soap.model.SoapBindingInfo;
-import org.apache.cxf.common.logging.LogUtils;
-
-
-import org.apache.cxf.helpers.DOMUtils;
-import org.apache.cxf.message.Exchange;
-import org.apache.cxf.phase.Phase;
-import org.apache.cxf.service.model.BindingInfo;
-import org.apache.cxf.service.model.BindingMessageInfo;
-import org.apache.cxf.service.model.BindingOperationInfo;
-import org.apache.cxf.service.model.MessagePartInfo;
-
-public class SoapMessageInInterceptor extends AbstractMessageInInterceptor<SoapMessage> {
-    private static final Logger LOG = LogUtils.getL7dLogger(SoapMessageInInterceptor.class);
-
-    public SoapMessageInInterceptor() {
-        super(Phase.READ);
-    }
-
-    protected Logger getLogger() {
-        return LOG;
-    }
-
-    protected boolean isFaultMessage(SoapMessage message) {
-        //Fault Processing is Handled in SOAP Binding in the ReadHeadersInterceptor.
-        return false;
-    }
-
-    protected BindingOperationInfo getBindingOperation(SoapMessage message, Document doc) {
-        Exchange ex = message.getExchange();
-        SoapBindingInfo soapBinding = (SoapBindingInfo)ex.get(BindingInfo.class);
-
-        Element payloadEl = (Element)doc.getChildNodes().item(0);
-        QName startQName = new QName(payloadEl.getNamespaceURI(), payloadEl.getLocalName());
-
-        // handling xml normal inbound message
-        boolean client = isRequestor(message);
-
-        List<BindingOperationInfo> boiList = new ArrayList<BindingOperationInfo>();
-        for (BindingOperationInfo boi : soapBinding.getOperations()) {
-            String style = soapBinding.getStyle(boi.getOperationInfo());
-            QName rootName = null;
-            if ("rpc".equals(style)) {
-                rootName = boi.getOperationInfo().getName();
-            } else {
-                BindingMessageInfo bmi = client ?  boi.getOutput() : boi.getInput();
-                if (bmi != null) {
-                    Collection<MessagePartInfo> bodyParts = bmi.getMessageParts();
-                    if (bodyParts.size() == 1) {
-                        MessagePartInfo p = bodyParts.iterator().next();
-                        rootName = p.getConcreteName();
-                    }
-                }
-            }
-
-            if (startQName.equals(rootName)) {
-                boiList.add(boi);
-            }
-        }
-
-        if (boiList.size() > 1
-            && LOG.isLoggable(Level.INFO)) {
-            LOG.info("Mulitple matching BindingOperationIno found in Binding.");
-        }
-
-        return boiList.size() != 1 ? null : boiList.get(0);
-    }
-
-    protected List<Element> getPartList(SoapMessage inMessage, Element rootNode, BindingMessageInfo bmi) {
-        List<Element> partList = new ArrayList<Element>();
-        Exchange ex = inMessage.getExchange();
-        SoapBindingInfo soapBinding = (SoapBindingInfo)ex.get(BindingInfo.class);
-
-        String style = soapBinding.getStyle(bmi.getBindingOperation().getOperationInfo());
-        if ("rpc".equals(style)) {
-            //Remove the operation element.
-            rootNode = (Element)DOMUtils.getChild(rootNode, Node.ELEMENT_NODE);
-        }
-        partList.add(rootNode);
-        return partList;
-    }
-
-}
diff --git a/components/camel-cxf/src/main/java/org/apache/camel/component/cxf/interceptors/SoapMessageOutInterceptor.java b/components/camel-cxf/src/main/java/org/apache/camel/component/cxf/interceptors/SoapMessageOutInterceptor.java
deleted file mode 100644
index 3d5e378a900..00000000000
--- a/components/camel-cxf/src/main/java/org/apache/camel/component/cxf/interceptors/SoapMessageOutInterceptor.java
+++ /dev/null
@@ -1,98 +0,0 @@
-/**
- * Licensed to the Apache Software Foundation (ASF) under one or more
- * contributor license agreements.  See the NOTICE file distributed with
- * this work for additional information regarding copyright ownership.
- * The ASF licenses this file to You under the Apache License, Version 2.0
- * (the "License"); you may not use this file except in compliance with
- * the License.  You may obtain a copy of the License at
- *
- *      http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.camel.component.cxf.interceptors;
-
-import java.util.ArrayList;
-import java.util.List;
-import java.util.logging.Level;
-import java.util.logging.Logger;
-
-import javax.wsdl.Definition;
-import javax.xml.namespace.QName;
-
-import org.w3c.dom.Element;
-
-import org.apache.cxf.binding.soap.SoapMessage;
-import org.apache.cxf.binding.soap.model.SoapBindingInfo;
-import org.apache.cxf.common.logging.LogUtils;
-import org.apache.cxf.endpoint.Endpoint;
-import org.apache.cxf.interceptor.Fault;
-import org.apache.cxf.message.Exchange;
-import org.apache.cxf.phase.Phase;
-import org.apache.cxf.service.model.BindingInfo;
-import org.apache.cxf.service.model.BindingMessageInfo;
-import org.apache.cxf.service.model.OperationInfo;
-import org.apache.cxf.wsdl11.WSDLServiceBuilder;
-
-public class SoapMessageOutInterceptor extends AbstractMessageOutInterceptor<SoapMessage> {
-    private static final Logger LOG = LogUtils.getL7dLogger(SoapMessageInInterceptor.class);
-
-
-    public SoapMessageOutInterceptor() {
-        super(Phase.PREPARE_SEND);
-        addAfter(DOMOutInterceptor.class.getName());
-    }
-
-    protected Logger getLogger() {
-        return LOG;
-    }
-
-    @SuppressWarnings("unchecked")
-    public void handleMessage(SoapMessage message) throws Fault {        
-
-        List<Element> payload = message.get(List.class);
-        Exchange exchange = message.getExchange();
-        BindingMessageInfo bmi = message.get(BindingMessageInfo.class);
-        //The soap header is handled by the SoapOutInterceptor
-
-        if (LOG.isLoggable(Level.INFO)) {
-            LOG.info("SoapMessageOutInterceptor binding operation style processing.");
-        }
-        SoapBindingInfo soapBinding = (SoapBindingInfo)exchange.get(BindingInfo.class);
-        String style = soapBinding.getStyle(bmi.getBindingOperation().getOperationInfo());
-        if ("rpc".equals(style)) {
-            //Add the Operation Node or Operation+"Response" node
-            //Remove the operation element.
-            OperationInfo oi = bmi.getBindingOperation().getOperationInfo();
-            Endpoint ep = exchange.get(Endpoint.class);
-            Definition def =
-                ep.getService().getServiceInfos().get(0).getProperty(WSDLServiceBuilder.WSDL_DEFINITION,
-                                                             Definition.class);
-            String prefix = def.getPrefix(oi.getName().getNamespaceURI());
-
-            if ("".equals(prefix)) {
-                prefix = "tns";
-            }
-            QName opName = null;
-            boolean isClient = isRequestor(message);
-            if (isClient) {
-                opName = new QName(oi.getName().getNamespaceURI(),
-                                   oi.getName().getLocalPart(),
-                                   prefix);
-            } else {
-                opName = new QName(oi.getName().getNamespaceURI(),
-                                   oi.getName().getLocalPart() + "Response",
-                                   prefix);
-            }
-            Element opEl = createElement(opName, payload);
-            payload = new ArrayList<Element>();
-            payload.add(opEl);
-        }
-
-        message.put(List.class, payload);
-    }
-}
diff --git a/components/camel-cxf/src/main/java/org/apache/camel/component/cxf/interceptors/XMLMessageInInterceptor.java b/components/camel-cxf/src/main/java/org/apache/camel/component/cxf/interceptors/XMLMessageInInterceptor.java
deleted file mode 100644
index af53a3d0c75..00000000000
--- a/components/camel-cxf/src/main/java/org/apache/camel/component/cxf/interceptors/XMLMessageInInterceptor.java
+++ /dev/null
@@ -1,142 +0,0 @@
-/**
- * Licensed to the Apache Software Foundation (ASF) under one or more
- * contributor license agreements.  See the NOTICE file distributed with
- * this work for additional information regarding copyright ownership.
- * The ASF licenses this file to You under the Apache License, Version 2.0
- * (the "License"); you may not use this file except in compliance with
- * the License.  You may obtain a copy of the License at
- *
- *      http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.camel.component.cxf.interceptors;
-
-import java.util.ArrayList;
-import java.util.Collection;
-import java.util.List;
-import java.util.logging.Level;
-import java.util.logging.Logger;
-
-import javax.xml.namespace.QName;
-import javax.xml.stream.XMLStreamException;
-import javax.xml.stream.XMLStreamReader;
-
-import org.w3c.dom.Document;
-import org.w3c.dom.Element;
-import org.w3c.dom.NodeList;
-
-import org.apache.cxf.binding.xml.XMLConstants;
-import org.apache.cxf.binding.xml.XMLFault;
-import org.apache.cxf.bindings.xformat.XMLBindingMessageFormat;
-import org.apache.cxf.common.logging.LogUtils;
-import org.apache.cxf.endpoint.Endpoint;
-import org.apache.cxf.interceptor.Fault;
-import org.apache.cxf.message.Exchange;
-import org.apache.cxf.message.XMLMessage;
-import org.apache.cxf.phase.Phase;
-import org.apache.cxf.service.model.BindingInfo;
-import org.apache.cxf.service.model.BindingMessageInfo;
-import org.apache.cxf.service.model.BindingOperationInfo;
-import org.apache.cxf.service.model.MessagePartInfo;
-import org.apache.cxf.staxutils.StaxUtils;
-
-public class XMLMessageInInterceptor extends AbstractMessageInInterceptor<XMLMessage> {
-    private static final Logger LOG = LogUtils.getL7dLogger(XMLMessageInInterceptor.class);
-    
-
-    public XMLMessageInInterceptor() {
-        super(Phase.READ);        
-    }
-
-    protected Logger getLogger() {
-        return LOG;
-    }
-    
-    protected boolean isFaultMessage(XMLMessage message) {
-        XMLStreamReader xsr = message.getContent(XMLStreamReader.class);
-        boolean isFault = false;
-        try {
-            if (StaxUtils.skipToStartOfElement(xsr)) {
-                QName startQName = xsr.getName();
-                isFault = XMLConstants.NS_XML_FORMAT.equals(startQName.getNamespaceURI())
-                          && XMLFault.XML_FAULT_ROOT.equals(startQName.getLocalPart());
-            }
-        } catch (XMLStreamException xse) {
-            throw new Fault(new org.apache.cxf.common.i18n.Message("STAX_READ_EXC", LOG));
-        }
-        
-        return isFault;
-    }
-    
-    protected BindingOperationInfo getBindingOperation(XMLMessage message, Document doc) {
-        Exchange ex = message.getExchange();
-        BindingInfo binding = ex.get(BindingInfo.class);
-        if (binding == null) {
-            Endpoint ep = ex.get(Endpoint.class);
-            binding = ep.getEndpointInfo().getBinding();
-        }
-        //TODO if binding is null throw exception.
-
-        Element payloadEl = (Element)doc.getChildNodes().item(0);
-        QName startQName = new QName(payloadEl.getNamespaceURI(), payloadEl.getLocalName());
-
-        // handling xml normal inbound message
-        boolean client = isRequestor(message);
-
-        List<BindingOperationInfo> boiList = new ArrayList<BindingOperationInfo>();
-        for (BindingOperationInfo boi : binding.getOperations()) {
-            BindingMessageInfo bmi = client ?  boi.getOutput() : boi.getInput();
-
-            QName rootName = null;
-            if (bmi != null) {
-                XMLBindingMessageFormat msgFormat =
-                    bmi.getExtensor(XMLBindingMessageFormat.class);
-
-                if (msgFormat != null) {
-                    rootName = msgFormat.getRootNode();
-                } else {
-                    Collection<MessagePartInfo> bodyParts = bmi.getMessageParts();
-                    if (bodyParts.size() == 1) {
-                        MessagePartInfo p = bodyParts.iterator().next();
-                        rootName = p.getConcreteName();
-                    }
-                }
-            }
-
-            if (startQName.equals(rootName)) {
-                boiList.add(boi);
-            }
-        }
-        
-        BindingOperationInfo match = null;
-        if (boiList.size() > 1) {
-            if (LOG.isLoggable(Level.INFO)) {
-                LOG.info("Mulitple matching BindingOperationIno found in Binding.");
-            }
-        } else if (!boiList.isEmpty()) {
-            match = boiList.get(0);
-        }
-        return match; 
-    }
-    
-    protected List<Element> getPartList(XMLMessage inMessage, Element rootNode, BindingMessageInfo bmi) {
-        List<Element> partList = new ArrayList<Element>();
-        XMLBindingMessageFormat msgFormat =
-            bmi.getExtensor(XMLBindingMessageFormat.class);
-        if (msgFormat != null) {
-            NodeList nodeList = rootNode.getChildNodes();
-            for (int idx = 0; idx < nodeList.getLength(); idx++) {
-                partList.add((Element)nodeList.item(idx));
-            }
-        } else {
-            partList.add(rootNode);
-        }
-        return partList;
-    }
-    
-}
diff --git a/components/camel-cxf/src/main/java/org/apache/camel/component/cxf/interceptors/XMLMessageOutInterceptor.java b/components/camel-cxf/src/main/java/org/apache/camel/component/cxf/interceptors/XMLMessageOutInterceptor.java
deleted file mode 100644
index ebedde68ee8..00000000000
--- a/components/camel-cxf/src/main/java/org/apache/camel/component/cxf/interceptors/XMLMessageOutInterceptor.java
+++ /dev/null
@@ -1,85 +0,0 @@
-/**
- * Licensed to the Apache Software Foundation (ASF) under one or more
- * contributor license agreements.  See the NOTICE file distributed with
- * this work for additional information regarding copyright ownership.
- * The ASF licenses this file to You under the Apache License, Version 2.0
- * (the "License"); you may not use this file except in compliance with
- * the License.  You may obtain a copy of the License at
- *
- *      http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.camel.component.cxf.interceptors;
-
-import java.util.ArrayList;
-import java.util.List;
-import java.util.logging.Level;
-import java.util.logging.Logger;
-
-import javax.xml.namespace.QName;
-
-import org.w3c.dom.Element;
-import org.apache.cxf.bindings.xformat.XMLBindingMessageFormat;
-import org.apache.cxf.common.logging.LogUtils;
-import org.apache.cxf.interceptor.Fault;
-import org.apache.cxf.message.Exchange;
-import org.apache.cxf.message.XMLMessage;
-import org.apache.cxf.phase.Phase;
-import org.apache.cxf.service.model.BindingMessageInfo;
-
-public class XMLMessageOutInterceptor extends AbstractMessageOutInterceptor<XMLMessage> {
-    private static final Logger LOG = LogUtils.getL7dLogger(XMLMessageOutInterceptor.class);
-   
-
-    public XMLMessageOutInterceptor() {
-        super(Phase.PREPARE_SEND);        
-        addAfter(DOMOutInterceptor.class.getName());
-    }
-
-    protected Logger getLogger() {
-        return LOG;
-    }
-
-    @SuppressWarnings("unchecked")
-    public void handleMessage(XMLMessage message) throws Fault {
-        Exchange exchange = message.getExchange();        
-        //BindingOperationInfo boi = exchange.get(BindingOperationInfo.class);
-        BindingMessageInfo bmi = exchange.get(BindingMessageInfo.class);
-
-        List<Element> payload = message.get(List.class);
-        if (bmi == null && payload.size() > 1) {
-            throw new Fault(new org.apache.cxf.common.i18n.Message(
-                            "NO_XML_ROOT_NODE", LOG));            
-        }
-        
-        if (bmi != null) {
-            
-            XMLBindingMessageFormat msgFormat = 
-                bmi.getExtensor(XMLBindingMessageFormat.class);
-            QName rootName = msgFormat != null ? msgFormat.getRootNode() : null;
-            
-            if (rootName == null) {
-                if (payload.size() > 1) {
-                    throw new Fault(new org.apache.cxf.common.i18n.Message(
-                                    "NO_XML_ROOT_NODE", LOG));
-                }
-            } else {
-                if (LOG.isLoggable(Level.INFO)) {
-                    LOG.info("DOMOutInterceptor Create xmlformat RootNode element");
-                }                
-                Element el = createElement(rootName, payload);
-                payload = new ArrayList<Element>();
-                payload.add(el);
-            }
-
-            message.put(List.class, payload);
-            message.remove(Element.class);
-        }
-    }
-    
-}
diff --git a/components/camel-cxf/src/test/java/org/apache/camel/component/cxf/CXFWsdlOnlyPayloadModeMultiPartNoSpringTest.java b/components/camel-cxf/src/test/java/org/apache/camel/component/cxf/CXFWsdlOnlyPayloadModeMultiPartNoSpringTest.java
new file mode 100644
index 00000000000..2154aed1eb4
--- /dev/null
+++ b/components/camel-cxf/src/test/java/org/apache/camel/component/cxf/CXFWsdlOnlyPayloadModeMultiPartNoSpringTest.java
@@ -0,0 +1,98 @@
+/**
+ * Licensed to the Apache Software Foundation (ASF) under one or more
+ * contributor license agreements.  See the NOTICE file distributed with
+ * this work for additional information regarding copyright ownership.
+ * The ASF licenses this file to You under the Apache License, Version 2.0
+ * (the "License"); you may not use this file except in compliance with
+ * the License.  You may obtain a copy of the License at
+ *
+ *      http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+package org.apache.camel.component.cxf;
+
+import java.net.URL;
+
+import javax.xml.namespace.QName;
+import javax.xml.ws.Endpoint;
+import javax.xml.ws.Holder;
+
+import org.apache.camel.builder.RouteBuilder;
+import org.apache.camel.test.junit4.CamelTestSupport;
+import org.apache.camel.wsdl_first.PersonMultiPartImpl;
+import org.apache.camel.wsdl_first.PersonMultiPartPortType;
+import org.apache.camel.wsdl_first.PersonMultiPartService;
+
+import org.junit.After;
+import org.junit.Before;
+import org.junit.Test;
+
+/**
+ * Unit test that verifies multi part SOAP message functionality
+ * 
+ * @version @Revision: 789534 $
+ */
+public class CXFWsdlOnlyPayloadModeMultiPartNoSpringTest extends CamelTestSupport {
+    
+    protected static final String SERVICE_NAME_PROP =  "serviceName=";
+    protected static final String PORT_NAME_PROP = "portName={http://camel.apache.org/wsdl-first}PersonMultiPartPort";
+    protected static final String WSDL_URL_PROP = "wsdlURL=classpath:person.wsdl";
+    protected static final String SERVICE_ADDRESS = "http://localhost:9093/PersonMultiPart";
+    protected Endpoint endpoint;
+
+    @Before
+    public void startService() {
+        endpoint = Endpoint.publish(SERVICE_ADDRESS, new PersonMultiPartImpl());
+    }
+    
+    @After
+    public void stopService() {
+        if (endpoint != null) {
+            endpoint.stop();
+        }
+    }
+
+    @Override
+    protected RouteBuilder createRouteBuilder() {
+        return new RouteBuilder() {
+            public void configure() {
+                from("cxf://http://localhost:9000/PersonMultiPart?" + PORT_NAME_PROP + "&" + SERVICE_NAME_PROP + getServiceName() + "&" + WSDL_URL_PROP + "&dataFormat=" 
+                     + getDataFormat() + "&loggingFeatureEnabled=true")                
+                    .to("cxf://http://localhost:9093/PersonMultiPart?" + PORT_NAME_PROP + "&" + SERVICE_NAME_PROP + getServiceName() + "&" + WSDL_URL_PROP + "&dataFormat=" 
+                        + getDataFormat() + "&loggingFeatureEnabled=true");
+            }
+        };
+    }
+ 
+    protected String getDataFormat() {
+        return "PAYLOAD";
+    }
+    
+    @Test
+    public void testMultiPartMessage() {
+        URL wsdlURL = getClass().getClassLoader().getResource("person.wsdl");
+        PersonMultiPartService ss = new PersonMultiPartService(wsdlURL, QName.valueOf(getServiceName()));
+
+        PersonMultiPartPortType client = ss.getPersonMultiPartPort();       
+        
+        Holder<Integer> ssn = new Holder<Integer>();
+        ssn.value = 0;
+        
+        Holder<String> name = new Holder<String>();
+        name.value = "Unknown name";
+        
+        client.getPersonMultiPartOperation("foo", 0, name, ssn);
+        assertEquals("New Person Name", name.value);
+        assertTrue(123456789 == ssn.value);
+       
+    }
+    
+    protected String getServiceName() {
+        return "{http://camel.apache.org/wsdl-first}PersonMultiPartService";
+    }
+}
diff --git a/components/camel-cxf/src/test/java/org/apache/camel/component/cxf/CxfWsdlFirstPayloadModeTest.java b/components/camel-cxf/src/test/java/org/apache/camel/component/cxf/CxfWsdlFirstPayloadModeTest.java
index 50ebc8ec3c1..081c9f65423 100644
--- a/components/camel-cxf/src/test/java/org/apache/camel/component/cxf/CxfWsdlFirstPayloadModeTest.java
+++ b/components/camel-cxf/src/test/java/org/apache/camel/component/cxf/CxfWsdlFirstPayloadModeTest.java
@@ -68,10 +68,14 @@ public class CxfWsdlFirstPayloadModeTest extends CxfWsdlFirstTest {
         
         assertTrue(t instanceof UnknownPersonFault);
         
-        // Note: Since unmarshal phase has been removed in PAYLOAD mode,
-        // it is not able to validate against the schema.
+        // schema validation will throw a parse exception
         personId.value = "Invoking getPerson with invalid length string, expecting exception...xxxxxxxxx";
-        client.getPerson(personId, ssn, name);      
+        try {            
+            client.getPerson(personId, ssn, name);
+            fail("We expect to get a message schema validation failure");        
+        } catch (Exception ex) {
+            assertEquals("Could not parse the XML stream.", ex.getMessage());         
+        }
 
         verifyJaxwsHandlers(fromHandler, toHandler);
     }
@@ -83,11 +87,11 @@ public class CxfWsdlFirstPayloadModeTest extends CxfWsdlFirstTest {
     
     @Override
     protected void verifyJaxwsHandlers(JaxwsTestHandler fromHandler, JaxwsTestHandler toHandler) { 
-        assertEquals(1, fromHandler.getFaultCount());
-        assertEquals(5, fromHandler.getMessageCount());
+        assertEquals(2, fromHandler.getFaultCount());
+        assertEquals(4, fromHandler.getMessageCount());
       //From CXF 2.2.7 the soap handler's getHeader() method will not be called if the SOAP message don't have headers
         //assertEquals(8, toHandler.getGetHeadersCount());
-        assertEquals(10, toHandler.getMessageCount());
+        assertEquals(8, toHandler.getMessageCount());
         assertEquals(6, toHandler.getFaultCount());
     }
 
diff --git a/components/camel-cxf/src/test/java/org/apache/camel/wsdl_first/PersonMultiPartImpl.java b/components/camel-cxf/src/test/java/org/apache/camel/wsdl_first/PersonMultiPartImpl.java
new file mode 100644
index 00000000000..2526d1a3937
--- /dev/null
+++ b/components/camel-cxf/src/test/java/org/apache/camel/wsdl_first/PersonMultiPartImpl.java
@@ -0,0 +1,39 @@
+/**
+ * Licensed to the Apache Software Foundation (ASF) under one or more
+ * contributor license agreements.  See the NOTICE file distributed with
+ * this work for additional information regarding copyright ownership.
+ * The ASF licenses this file to You under the Apache License, Version 2.0
+ * (the "License"); you may not use this file except in compliance with
+ * the License.  You may obtain a copy of the License at
+ *
+ *      http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+package org.apache.camel.wsdl_first;
+
+import javax.xml.ws.Holder;
+
+/**
+ * Test Impl class for PersonMultiPartType port type that verifies multi part SOAP message
+ * functionality.
+ * 
+ * @version @Revision: 789534 $
+ */
+
+
+public class PersonMultiPartImpl implements PersonMultiPartPortType {
+
+    public void getPersonMultiPartOperation(String nameIn, int ssnIn, Holder<String> nameOut,
+                                            Holder<Integer> ssnOut) {
+        
+        nameOut.value = "New Person Name";
+        ssnOut.value = 123456789;
+        
+    }
+
+}
diff --git a/components/camel-cxf/src/test/resources/person.wsdl b/components/camel-cxf/src/test/resources/person.wsdl
index f44d45c44a9..1718cf190b1 100644
--- a/components/camel-cxf/src/test/resources/person.wsdl
+++ b/components/camel-cxf/src/test/resources/person.wsdl
@@ -64,6 +64,13 @@
 					</xsd:sequence>
 				</xsd:complexType>
 			</xsd:element>
+
+			<xsd:element name="StringInputElem" type="xsd:string" />
+			<xsd:element name="IntegerInputElem" type="xsd:int" />
+
+			<xsd:element name="StringOutputElem" type="xsd:string" />
+			<xsd:element name="IntegerOutputElem" type="xsd:int" />
+				
 		</xsd:schema>
   </wsdl:types>
 	
@@ -76,6 +83,15 @@
 	<wsdl:message name="UnknownPersonFault">
 		<wsdl:part name="payload" element="typens:UnknownPersonFault"/>
 	</wsdl:message>
+	
+    <wsdl:message name="GetPersonMultiPartRequest">
+		<wsdl:part name="nameIn" element="typens:StringInputElem" />
+		<wsdl:part name="ssnIn" element="typens:IntegerInputElem" />
+	</wsdl:message>
+	<wsdl:message name="GetPersonMultiPartResponse">
+		<wsdl:part name="nameOut" element="typens:StringOutputElem" />
+		<wsdl:part name="ssnOut" element="typens:IntegerOutputElem" />
+	</wsdl:message>
 
     <wsdl:portType name="Person">
 		<wsdl:operation name="GetPerson">
@@ -85,6 +101,13 @@
 		</wsdl:operation>
 	</wsdl:portType>
 	
+	<wsdl:portType name="PersonMultiPartPortType">
+		<wsdl:operation name="GetPersonMultiPartOperation">
+			<wsdl:input message="tns:GetPersonMultiPartRequest" />
+			<wsdl:output message="tns:GetPersonMultiPartResponse" />
+		</wsdl:operation>
+	</wsdl:portType>
+	
     <wsdl:binding name="PersonSOAPBinding" type="tns:Person">
     	<soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http" />
 		<wsdl:operation name="GetPerson">
@@ -116,11 +139,11 @@
       </wsdl:operation>
    </wsdl:binding>   
    
-       <wsdl:binding name="PersonSOAPBinding2" type="tns:Person">
-    	<soap:binding style="document" transport="http://cxf.apache.org/transports/camel" />
-		<wsdl:operation name="GetPerson">
-			<wsdl:input>
-				<soap:body use="literal" />
+   <wsdl:binding name="PersonSOAPBinding2" type="tns:Person">
+       <soap:binding style="document" transport="http://cxf.apache.org/transports/camel" />
+	   <wsdl:operation name="GetPerson">
+           <wsdl:input>
+			    <soap:body use="literal" />
 			</wsdl:input>
 			<wsdl:output>
 				<soap:body use="literal" />
@@ -130,6 +153,22 @@
 			</wsdl:fault>
        </wsdl:operation>
    </wsdl:binding>
+   
+   <wsdl:binding name="PersonMultiPartSOAPBinding"
+		type="tns:PersonMultiPartPortType">
+		<soap:binding style="document"
+			transport="http://schemas.xmlsoap.org/soap/http" />
+		<wsdl:operation name="GetPersonMultiPartOperation">
+			<soap:operation soapAction="" style="document" />
+			<wsdl:input>
+				<soap:body use="literal" />
+			</wsdl:input>
+			<wsdl:output>
+				<soap:body use="literal" />
+			</wsdl:output>
+
+		</wsdl:operation>
+	</wsdl:binding>
 
 	<wsdl:service name="PersonService">
     	<wsdl:port binding="tns:PersonSOAPBinding" name="soap">
@@ -148,5 +187,11 @@
        <soap12:address location="http://localhost:8092/PersonService/" />
        </wsdl:port>
    </wsdl:service>      
+   
+	<wsdl:service name="PersonMultiPartService">
+		<wsdl:port name="PersonMultiPartPort" binding="tns:PersonMultiPartSOAPBinding">
+			<soap:address location="http://localhost:9000/PersonMultiPart" />
+		</wsdl:port>
+	</wsdl:service>   
 
 </wsdl:definitions>
