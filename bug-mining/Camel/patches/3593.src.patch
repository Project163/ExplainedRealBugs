diff --git a/tests/camel-itest-karaf/pom.xml b/tests/camel-itest-karaf/pom.xml
index e7ee566ba47..47f1c60f3bf 100644
--- a/tests/camel-itest-karaf/pom.xml
+++ b/tests/camel-itest-karaf/pom.xml
@@ -30,6 +30,10 @@
   <name>Camel :: Integration Tests :: Karaf</name>
   <description>Performs Karaf compliance integration tests</description>
 
+  <properties>
+    <karf-test-version>${karaf4-version}</karf-test-version>
+  </properties>
+
   <dependencies>
     <dependency>
       <groupId>org.ops4j.pax.exam</groupId>
@@ -54,7 +58,7 @@
     <dependency>
       <groupId>org.apache.karaf</groupId>
       <artifactId>apache-karaf</artifactId>
-      <version>${karaf-version}</version>
+      <version>${karf-test-version}</version>
       <type>tar.gz</type>
       <scope>test</scope>
       <exclusions>
@@ -231,18 +235,15 @@
         </plugins>
       </build>
     </profile>
+
+    <!-- test with older karaf 3.x -->
     <profile>
       <id>karaf3</id>
       <properties>
-        <karaf-version>${karaf3-version}</karaf-version>
-      </properties>
-    </profile>
-    <profile>
-      <id>karaf4</id>
-      <properties>
-        <karaf-version>${karaf4-version}</karaf-version>
+        <karf-test-version>${karaf3-version}</karf-test-version>
       </properties>
     </profile>
+
   </profiles>
 
 </project>
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/AbstractFeatureTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/AbstractFeatureTest.java
index 29faff6f0ba..609c47923e1 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/AbstractFeatureTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/AbstractFeatureTest.java
@@ -26,25 +26,23 @@ import java.util.Collection;
 import java.util.Dictionary;
 import java.util.EnumSet;
 import java.util.Enumeration;
-import java.util.List;
 import java.util.Properties;
 import javax.inject.Inject;
 
 import org.apache.camel.CamelContext;
 import org.apache.camel.Component;
-import org.apache.camel.blueprint.BlueprintCamelContext;
-import org.apache.camel.impl.DefaultRouteContext;
-import org.apache.camel.model.DataFormatDefinition;
+import org.apache.camel.spi.DataFormat;
+import org.apache.camel.spi.Language;
 import org.apache.karaf.features.FeaturesService;
 import org.junit.After;
 import org.junit.Before;
+import org.ops4j.pax.exam.Configuration;
 import org.ops4j.pax.exam.CoreOptions;
 import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.ProbeBuilder;
 import org.ops4j.pax.exam.TestProbeBuilder;
 import org.ops4j.pax.exam.karaf.options.KarafDistributionOption;
 import org.ops4j.pax.exam.karaf.options.LogLevelOption;
-import org.ops4j.pax.exam.options.MavenArtifactProvisionOption;
 import org.ops4j.pax.exam.options.UrlReference;
 import org.osgi.framework.BundleContext;
 import org.osgi.framework.Constants;
@@ -93,6 +91,16 @@ public abstract class AbstractFeatureTest {
         LOG.info("tearDown()");
     }
 
+    protected void installCamelFeature(String mainFeature) throws Exception {
+        if (!mainFeature.startsWith("camel-")) {
+            mainFeature = "camel-" + mainFeature;
+        }
+        LOG.info("Install main feature: {}", mainFeature);
+        // do not refresh bundles causing out bundle context to be invalid
+        // TODO: see if we can find a way maybe to install camel.xml as bundle/feature instead of part of unit test (see src/test/resources/OSGI-INF/blueprint)
+        featuresService.installFeature(mainFeature, EnumSet.of(FeaturesService.Option.NoAutoRefreshBundles));
+    }
+
     protected void testComponent(String component) throws Exception {
         testComponent("camel-" + component, component);
     }
@@ -100,10 +108,7 @@ public abstract class AbstractFeatureTest {
     protected void testComponent(String mainFeature, String component) throws Exception {
         LOG.info("Looking up CamelContext(myCamel) in OSGi Service Registry");
 
-        LOG.info("Install main feature: {}", mainFeature);
-        // do not refresh bundles causing out bundle context to be invalid
-        // TODO: see if we can find a way maybe to install camel.xml as bundle/feature instead of part of unit test (see src/test/resources/OSGI-INF/blueprint)
-        featuresService.installFeature(mainFeature, EnumSet.of(FeaturesService.Option.NoAutoRefreshBundles));
+        installCamelFeature(mainFeature);
 
         CamelContext camelContext = getOsgiService(bundleContext, CamelContext.class, "(camel.context.name=myCamel)", 20000);
         assertNotNull("Cannot find CamelContext with name myCamel", camelContext);
@@ -115,59 +120,42 @@ public abstract class AbstractFeatureTest {
         LOG.info("Found Camel component: {} instance: {} with className: {}", component, comp, comp.getClass());
     }
 
-    protected void testComponent() throws Exception {
-        testComponent(extractName(getClass()));
+    protected void testDataFormat(String dataFormat) throws Exception {
+        testDataFormat("camel-" + dataFormat, dataFormat);
     }
 
-    protected void testDataFormat(String format) throws Exception {
-        long max = System.currentTimeMillis() + 10000;
-        while (true) {
-            try {
-                DataFormatDefinition dataFormatDefinition = createDataformatDefinition(format);                
-                assertNotNull(dataFormatDefinition);
-                assertNotNull(dataFormatDefinition.getDataFormat(new DefaultRouteContext(createCamelContext())));
-                return;
-            } catch (Throwable t) {
-                if (System.currentTimeMillis() < max) {
-                    Thread.sleep(1000);
-                } else {
-                    throw t;
-                }
-            }
-        }
-    }
+    protected void testDataFormat(String mainFeature, String dataFormat) throws Exception {
+        LOG.info("Looking up CamelContext(myCamel) in OSGi Service Registry");
 
-    protected DataFormatDefinition createDataformatDefinition(String format) {
-        return null;
-    }
+        installCamelFeature(mainFeature);
 
-    protected void testLanguage(String lang) throws Exception {
-        long max = System.currentTimeMillis() + 10000;
-        while (true) {
-            try {
-                assertNotNull(createCamelContext().resolveLanguage(lang));
-                return;
-            } catch (Throwable t) {
-                if (System.currentTimeMillis() < max) {
-                    Thread.sleep(1000);
-                } else {
-                    throw t;
-                }
-            }
-        }
+        CamelContext camelContext = getOsgiService(bundleContext, CamelContext.class, "(camel.context.name=myCamel)", 20000);
+        assertNotNull("Cannot find CamelContext with name myCamel", camelContext);
+
+        LOG.info("Getting Camel dataformat: {}", dataFormat);
+        DataFormat df = camelContext.resolveDataFormat(dataFormat);
+        assertNotNull("Cannot get dataformat with name: " + dataFormat, df);
+
+        LOG.info("Found Camel dataformat: {} instance: {} with className: {}", dataFormat, df, df.getClass());
     }
 
-    @Deprecated
-    protected CamelContext createCamelContext() throws Exception {
-        LOG.info("Creating CamelContext using BundleContext: {} and BlueprintContainer: {}", bundleContext, blueprintContainer);
-        setThreadContextClassLoader();
-        BlueprintCamelContext context = new BlueprintCamelContext(bundleContext, blueprintContainer);
-        return context;
+    protected void testLanguage(String language) throws Exception {
+        testLanguage("camel-" + language, language);
     }
 
-    protected void setThreadContextClassLoader() {
-        // set the thread context classloader current bundle classloader
-        Thread.currentThread().setContextClassLoader(this.getClass().getClassLoader());
+    protected void testLanguage(String mainFeature, String language) throws Exception {
+        LOG.info("Looking up CamelContext(myCamel) in OSGi Service Registry");
+
+        installCamelFeature(mainFeature);
+
+        CamelContext camelContext = getOsgiService(bundleContext, CamelContext.class, "(camel.context.name=myCamel)", 20000);
+        assertNotNull("Cannot find CamelContext with name myCamel", camelContext);
+
+        LOG.info("Getting Camel language: {}", language);
+        Language lan = camelContext.resolveLanguage(language);
+        assertNotNull("Cannot get language with name: " + language, lan);
+
+        LOG.info("Found Camel language: {} instance: {} with className: {}", language, lan, lan.getClass());
     }
 
     public static String extractName(Class<?> clazz) {
@@ -191,7 +179,7 @@ public abstract class AbstractFeatureTest {
                 artifactId("apache-camel").
                 versionAsInProject().type("xml/features");
     }
-    
+
     private static void switchPlatformEncodingToUTF8() {
         try {
             System.setProperty("file.encoding", "UTF-8");
@@ -202,7 +190,7 @@ public abstract class AbstractFeatureTest {
             throw new RuntimeException(e);
         }
     }
-    
+
     private static String getKarafVersion() {
         InputStream ins = AbstractFeatureTest.class.getResourceAsStream("/META-INF/maven/dependencies.properties");
         Properties p = new Properties();
@@ -217,64 +205,46 @@ public abstract class AbstractFeatureTest {
         }
         if (karafVersion == null) {
             // setup the default version of it
-            karafVersion = "2.4.4";
+            karafVersion = "4.0.4";
         }
         return karafVersion;
     }
-    public static MavenArtifactProvisionOption getJUnitBundle() {
-        MavenArtifactProvisionOption mavenOption = mavenBundle().groupId("org.apache.servicemix.bundles")
-            .artifactId("org.apache.servicemix.bundles.junit");
-        mavenOption.versionAsInProject().start(true).startLevel(10);
-        return mavenOption;
-    }
 
-    public static Option[] configure(String mainFeature, String... extraFeatures) {
+    @Configuration
+    public static Option[] configure() {
         switchPlatformEncodingToUTF8();
         String karafVersion = getKarafVersion();
         LOG.info("*** Apache Karaf version is " + karafVersion + " ***");
 
-        List<String> list = new ArrayList<String>();
-        list.add("camel-core");
-        list.add("camel-blueprint");
-        list.add("camel-spring");
-        // we install main feature later
-        for (String extra : extraFeatures) {
-            list.add("camel-" + extra);
-        }
-        String[] features = list.toArray(new String[list.size()]);
-
-        Option[] options = new Option[] {
-            // for remote debugging
-            //org.ops4j.pax.exam.CoreOptions.vmOption("-Xdebug"),
-            //org.ops4j.pax.exam.CoreOptions.vmOption("-Xrunjdwp:transport=dt_socket,server=y,suspend=y,address=5008"),
+        Option[] options = new Option[]{
+                // for remote debugging
+                //org.ops4j.pax.exam.CoreOptions.vmOption("-Xdebug"),
+                //org.ops4j.pax.exam.CoreOptions.vmOption("-Xrunjdwp:transport=dt_socket,server=y,suspend=y,address=5008"),
 
-            // we need INFO logging otherwise we cannot see what happens
-            new LogLevelOption(LogLevelOption.LogLevel.INFO),
+                // we need INFO logging otherwise we cannot see what happens
+                new LogLevelOption(LogLevelOption.LogLevel.INFO),
 
-            KarafDistributionOption.karafDistributionConfiguration()
-                    .frameworkUrl(maven().groupId("org.apache.karaf").artifactId("apache-karaf").type("tar.gz").versionAsInProject())
-                    .karafVersion(karafVersion)
-                    .name("Apache Karaf")
-                    .useDeployFolder(false).unpackDirectory(new File("target/paxexam/unpack/")),
+                KarafDistributionOption.karafDistributionConfiguration()
+                        .frameworkUrl(maven().groupId("org.apache.karaf").artifactId("apache-karaf").type("tar.gz").versionAsInProject())
+                        .karafVersion(karafVersion)
+                        .name("Apache Karaf")
+                        .useDeployFolder(false).unpackDirectory(new File("target/paxexam/unpack/")),
 
-            // keep the folder so we can look inside when something fails
-            KarafDistributionOption.keepRuntimeFolder(),
+                // keep the folder so we can look inside when something fails
+                KarafDistributionOption.keepRuntimeFolder(),
 
-            vmOption("-Dfile.encoding=UTF-8"),
+                vmOption("-Dfile.encoding=UTF-8"),
 
-            CoreOptions.junitBundles(),
+                // install junit
+                CoreOptions.junitBundles(),
 
-            // install the features
-            KarafDistributionOption.features(getCamelKarafFeatureUrl(), features)
+                // install camel
+                KarafDistributionOption.features(getCamelKarafFeatureUrl(), "camel")
         };
 
         return options;
     }
 
-    protected Option[] configureComponent() {
-        return configure(extractName(getClass()));
-    }
-
     @SuppressWarnings("unchecked")
     public static <T> T getOsgiService(BundleContext bundleContext, Class<T> type, String filter, long timeout) {
         ServiceTracker tracker;
@@ -338,7 +308,7 @@ public abstract class AbstractFeatureTest {
      * Provides an iterable collection of references, even if the original array is <code>null</code>.
      */
     private static Collection<ServiceReference> asCollection(ServiceReference[] references) {
-        return references  == null ? new ArrayList<ServiceReference>(0) : Arrays.asList(references);
+        return references == null ? new ArrayList<ServiceReference>(0) : Arrays.asList(references);
     }
 
 }
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelAhcTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelAhcTest.java
index f888979cc0e..ccd0aa4c5ad 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelAhcTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelAhcTest.java
@@ -18,21 +18,16 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
 public class CamelAhcTest extends AbstractFeatureTest {
 
+    public static final String COMPONENT = extractName(CamelAhcTest.class);
+
     @Test
     public void test() throws Exception {
-        testComponent();
-    }
-
-    @Configuration
-    public Option[] configure() {
-        return configureComponent();
+        testComponent(COMPONENT);
     }
 
 }
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelAhcWsTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelAhcWsTest.java
index 5ec1ef1d027..212cef7a196 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelAhcWsTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelAhcWsTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -31,9 +29,4 @@ public class CamelAhcWsTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public Option[] configure() {
-        return configure(COMPONENT);
-    }
-
 }
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelAmqpTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelAmqpTest.java
index 99cf5ac452e..c7ba5484b8c 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelAmqpTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelAmqpTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,4 @@ public class CamelAmqpTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
-
 }
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelApnsTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelApnsTest.java
index a743e1fac3a..04cdf4353cb 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelApnsTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelApnsTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,4 @@ public class CamelApnsTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
-
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelAtmosphereWebsocketTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelAtmosphereWebsocketTest.java
index 9a85372efb0..3745453c0dc 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelAtmosphereWebsocketTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelAtmosphereWebsocketTest.java
@@ -18,12 +18,11 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
 public class CamelAtmosphereWebsocketTest extends AbstractFeatureTest {
+
     public static final String COMPONENT = extractName(CamelAtmosphereWebsocketTest.class);
 
     @Test
@@ -31,9 +30,4 @@ public class CamelAtmosphereWebsocketTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public Option[] configure() {
-        return configure(COMPONENT);
-    }
-
 }
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelAtomTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelAtomTest.java
index cd5cb1de75d..9051fea3ebd 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelAtomTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelAtomTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,4 @@ public class CamelAtomTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
-
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelAvroTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelAvroTest.java
index b5a0ebb8117..cd6626648f5 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelAvroTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelAvroTest.java
@@ -16,31 +16,18 @@
  */
 package org.apache.camel.itest.karaf;
 
-import org.apache.camel.model.DataFormatDefinition;
-import org.apache.camel.model.dataformat.AvroDataFormat;
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
 public class CamelAvroTest extends AbstractFeatureTest {
 
     public static final String COMPONENT = extractName(CamelAvroTest.class);
-    
-    protected DataFormatDefinition createDataformatDefinition(String format) {        
-        return new AvroDataFormat();
-    }
 
     @Test
     public void test() throws Exception {
         testDataFormat(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
-
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelAwsTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelAwsTest.java
index 119bd952286..5db6ef52b8e 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelAwsTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelAwsTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -29,19 +27,14 @@ public class CamelAwsTest extends AbstractFeatureTest {
 
     @Test
     public void test() throws Exception {
-        testComponent("aws-cw");
-        testComponent("aws-ddb");
-        testComponent("aws-s3");
-        testComponent("aws-sdb");
-        testComponent("aws-ses");
-        testComponent("aws-sns");
-        testComponent("aws-sqs");
-        testComponent("aws-swf");
-    }
-
-    @Configuration
-    public static Option[] configure() {
-        return configure("aws");
+        testComponent(COMPONENT, "aws-cw");
+        testComponent(COMPONENT, "aws-ddb");
+        testComponent(COMPONENT, "aws-s3");
+        testComponent(COMPONENT, "aws-sdb");
+        testComponent(COMPONENT, "aws-ses");
+        testComponent(COMPONENT, "aws-sns");
+        testComponent(COMPONENT, "aws-sqs");
+        testComponent(COMPONENT, "aws-swf");
     }
 
 }
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelBamTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelBamTest.java
index 49cc0259d8f..c934858434c 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelBamTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelBamTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -29,12 +27,7 @@ public class CamelBamTest extends AbstractFeatureTest {
 
     @Test
     public void test() throws Exception {
-        // TODO: how to actually test ?
-    }
-
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
+        installCamelFeature(COMPONENT);
     }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelBarcodeTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelBarcodeTest.java
index e98e006fbdc..5dbea9657ac 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelBarcodeTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelBarcodeTest.java
@@ -16,32 +16,18 @@
  */
 package org.apache.camel.itest.karaf;
 
-import org.apache.camel.model.DataFormatDefinition;
-import org.apache.camel.model.dataformat.BarcodeDataFormat;
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
 public class CamelBarcodeTest extends AbstractFeatureTest {
 
     public static final String COMPONENT = extractName(CamelBarcodeTest.class);
-    
-    protected DataFormatDefinition createDataformatDefinition(String format) {
-        BarcodeDataFormat dataformate = new BarcodeDataFormat();
-        return dataformate;
-    }
 
     @Test
     public void test() throws Exception {
         testDataFormat(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
-
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelBase64Test.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelBase64Test.java
index 3ba0fdfd3b8..239318ab42b 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelBase64Test.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelBase64Test.java
@@ -16,31 +16,18 @@
  */
 package org.apache.camel.itest.karaf;
 
-import org.apache.camel.model.DataFormatDefinition;
-import org.apache.camel.model.dataformat.Base64DataFormat;
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
 public class CamelBase64Test extends AbstractFeatureTest {
 
     public static final String COMPONENT = extractName(CamelBase64Test.class);
-    
-    protected DataFormatDefinition createDataformatDefinition(String format) {
-        return new Base64DataFormat();
-    }
 
     @Test
     public void test() throws Exception {
         testDataFormat(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
-
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelBeanValidatorTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelBeanValidatorTest.java
index b3a5352c45d..51592951c5a 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelBeanValidatorTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelBeanValidatorTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,4 @@ public class CamelBeanValidatorTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
-
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelBeanioTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelBeanioTest.java
index 73ced33e078..697535213c3 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelBeanioTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelBeanioTest.java
@@ -16,31 +16,18 @@
  */
 package org.apache.camel.itest.karaf;
 
-import org.apache.camel.model.DataFormatDefinition;
-import org.apache.camel.model.dataformat.BeanioDataFormat;
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
 public class CamelBeanioTest extends AbstractFeatureTest {
 
     public static final String COMPONENT = extractName(CamelBeanioTest.class);
-    
-    protected DataFormatDefinition createDataformatDefinition(String format) {        
-        return new BeanioDataFormat();
-    }
 
     @Test
     public void test() throws Exception {
         testDataFormat(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
-
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelBeanstalkTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelBeanstalkTest.java
index 7a79ba53976..69e851d2286 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelBeanstalkTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelBeanstalkTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,4 @@ public class CamelBeanstalkTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
-
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelBindyTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelBindyTest.java
index 28cdc365200..cb47be22d77 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelBindyTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelBindyTest.java
@@ -16,33 +16,18 @@
  */
 package org.apache.camel.itest.karaf;
 
-import org.apache.camel.model.DataFormatDefinition;
-import org.apache.camel.model.dataformat.BindyDataFormat;
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
 public class CamelBindyTest extends AbstractFeatureTest {
 
     public static final String COMPONENT = extractName(CamelBindyTest.class);
-    
-    protected DataFormatDefinition createDataformatDefinition(String format) {        
-        BindyDataFormat dataformate = new BindyDataFormat();
-        dataformate.setClassType(String.class);
-        return dataformate;
-    }
 
     @Test
     public void test() throws Exception {
         testDataFormat(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
-
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelBoonTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelBoonTest.java
index 5b5901b0e34..f24f8fe3531 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelBoonTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelBoonTest.java
@@ -16,12 +16,8 @@
  */
 package org.apache.camel.itest.karaf;
 
-import org.apache.camel.model.DataFormatDefinition;
-import org.apache.camel.model.dataformat.BoonDataFormat;
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -29,18 +25,9 @@ public class CamelBoonTest extends AbstractFeatureTest {
 
     public static final String COMPONENT = extractName(CamelBoonTest.class);
 
-    protected DataFormatDefinition createDataformatDefinition(String format) {
-        return new BoonDataFormat();
-    }
-
     @Test
     public void test() throws Exception {
         testDataFormat(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
-
 }
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelBoxTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelBoxTest.java
index c88e2bc3e4f..ac0f7976224 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelBoxTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelBoxTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,4 @@ public class CamelBoxTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
-
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelBraintreeTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelBraintreeTest.java
index 72617255862..c58fad54767 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelBraintreeTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelBraintreeTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,4 @@ public class CamelBraintreeTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
-
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelCacheTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelCacheTest.java
index 1cb2d9b1f91..fcabe459ed9 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelCacheTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelCacheTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,4 @@ public class CamelCacheTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
-
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelCassandraqlTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelCassandraqlTest.java
index 54121884c49..d54da7b2723 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelCassandraqlTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelCassandraqlTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,4 @@ public class CamelCassandraqlTest extends AbstractFeatureTest {
         testComponent(COMPONENT, "cql");
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
-
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelCastorTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelCastorTest.java
index 87807e05eb4..f383d403074 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelCastorTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelCastorTest.java
@@ -16,31 +16,18 @@
  */
 package org.apache.camel.itest.karaf;
 
-import org.apache.camel.model.DataFormatDefinition;
-import org.apache.camel.model.dataformat.CastorDataFormat;
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
 public class CamelCastorTest extends AbstractFeatureTest {
 
     public static final String COMPONENT = extractName(CamelCastorTest.class);
-    
-    protected DataFormatDefinition createDataformatDefinition(String format) {
-        return new CastorDataFormat();
-    }
 
     @Test
     public void test() throws Exception {
         testDataFormat(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
-
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelChunkTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelChunkTest.java
index 827181ecae4..86d2ee63d85 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelChunkTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelChunkTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,5 @@ public class CamelChunkTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelCmSmsTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelCmSmsTest.java
index 74d699e2142..0e29c118509 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelCmSmsTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelCmSmsTest.java
@@ -18,12 +18,11 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
 public class CamelCmSmsTest extends AbstractFeatureTest {
+
     public static final String COMPONENT = extractName(CamelCmSmsTest.class);
 
     @Test
@@ -31,9 +30,5 @@ public class CamelCmSmsTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelCmisTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelCmisTest.java
index 8db85e2d411..a2fe2ec5517 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelCmisTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelCmisTest.java
@@ -18,12 +18,11 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
 public class CamelCmisTest extends AbstractFeatureTest {
+
     public static final String COMPONENT = extractName(CamelCmisTest.class);
 
     @Test
@@ -31,9 +30,5 @@ public class CamelCmisTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelCometdTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelCometdTest.java
index dc8cb705fef..d3ec3f123e6 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelCometdTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelCometdTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,4 @@ public class CamelCometdTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
-
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelContextTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelContextTest.java
index 3790334d53c..b01efd7da69 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelContextTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelContextTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,4 @@ public class CamelContextTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
-
 }
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelCouchDBTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelCouchDBTest.java
index 7e2c126cd4c..e8d039efdd1 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelCouchDBTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelCouchDBTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,4 @@ public class CamelCouchDBTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
-
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelCryptoTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelCryptoTest.java
index 0be667018b9..021d404397e 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelCryptoTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelCryptoTest.java
@@ -16,12 +16,8 @@
  */
 package org.apache.camel.itest.karaf;
 
-import org.apache.camel.model.DataFormatDefinition;
-import org.apache.camel.model.dataformat.CryptoDataFormat;
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -29,18 +25,9 @@ public class CamelCryptoTest extends AbstractFeatureTest {
 
     public static final String COMPONENT = extractName(CamelCryptoTest.class);
 
-    protected DataFormatDefinition createDataformatDefinition(String format) {
-        return new CryptoDataFormat();
-    }
-
     @Test
     public void test() throws Exception {
         testDataFormat(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
-
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelCsvTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelCsvTest.java
index c389ebaa18a..15b97237d2e 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelCsvTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelCsvTest.java
@@ -16,12 +16,8 @@
  */
 package org.apache.camel.itest.karaf;
 
-import org.apache.camel.model.DataFormatDefinition;
-import org.apache.camel.model.dataformat.CsvDataFormat;
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -29,19 +25,9 @@ public class CamelCsvTest extends AbstractFeatureTest {
 
     public static final String COMPONENT = extractName(CamelCsvTest.class);
 
-    protected DataFormatDefinition createDataformatDefinition(String format) {
-        return new CsvDataFormat();
-    }
-    
-    
     @Test
     public void test() throws Exception {
         testDataFormat(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
-
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelCxfTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelCxfTest.java
index 6c55b9f3a6d..284de4afcb8 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelCxfTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelCxfTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -29,14 +27,9 @@ public class CamelCxfTest extends AbstractFeatureTest {
 
     @Test
     public void test() throws Exception {
-        testComponent(COMPONENT);
-        testComponent("cxfrs");
-        testComponent("cxfbean");
-    }
-
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT, "cxf-jaxb");
+        testComponent(COMPONENT, "cxf");
+        testComponent(COMPONENT, "cxfrs");
+        testComponent(COMPONENT, "cxfbean");
     }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelDisruptorTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelDisruptorTest.java
index 1dcd0b0e008..423098ddb24 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelDisruptorTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelDisruptorTest.java
@@ -18,22 +18,17 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
 public class CamelDisruptorTest extends AbstractFeatureTest {
 
+    public static final String COMPONENT = extractName(CamelDisruptorTest.class);
+
     @Test
     public void test() throws Exception {
-        testComponent("disruptor");
-        testComponent("disruptor-vm");
-    }
-
-    @Configuration
-    public static Option[] configure() {
-        return configure("disruptor");
+        testComponent(COMPONENT, "disruptor");
+        testComponent(COMPONENT, "disruptor-vm");
     }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelDnsTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelDnsTest.java
index 4e68a2df1e4..5534c4682f3 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelDnsTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelDnsTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,4 @@ public class CamelDnsTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
-
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelDockerTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelDockerTest.java
index 5e269d4ab87..445ec6163dd 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelDockerTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelDockerTest.java
@@ -19,8 +19,6 @@ package org.apache.camel.itest.karaf;
 import org.junit.Ignore;
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -34,9 +32,4 @@ public class CamelDockerTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
-
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelDozerTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelDozerTest.java
index c6aeed7b258..f6d5cf1fcc8 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelDozerTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelDozerTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,4 @@ public class CamelDozerTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
-
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelDropboxTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelDropboxTest.java
index 1c5e9d3dd2c..d0dd4528b5a 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelDropboxTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelDropboxTest.java
@@ -18,21 +18,16 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
 public class CamelDropboxTest extends AbstractFeatureTest {
 
+    public static final String COMPONENT = extractName(CamelDropboxTest.class);
+
     @Test
     public void test() throws Exception {
-        testComponent();
-    }
-
-    @Configuration
-    public Option[] configure() {
-        return configureComponent();
+        testComponent(COMPONENT);
     }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelElasticsearchTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelElasticsearchTest.java
index cfc4d290b81..6d5aaf2631b 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelElasticsearchTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelElasticsearchTest.java
@@ -18,13 +18,11 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
 public class CamelElasticsearchTest extends AbstractFeatureTest {
-    
+
     public static final String COMPONENT = extractName(CamelElasticsearchTest.class);
 
     @Test
@@ -32,9 +30,4 @@ public class CamelElasticsearchTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
-
 }
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelElsqlTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelElsqlTest.java
index 78eb7b2a4a3..e77722df3ea 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelElsqlTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelElsqlTest.java
@@ -18,13 +18,11 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
 public class CamelElsqlTest extends AbstractFeatureTest {
-    
+
     public static final String COMPONENT = extractName(CamelElsqlTest.class);
 
     @Test
@@ -32,9 +30,4 @@ public class CamelElsqlTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
-
 }
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelEtcdTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelEtcdTest.java
index 50cdc814739..62968eeee5f 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelEtcdTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelEtcdTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,4 @@ public class CamelEtcdTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
-
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelEventadminTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelEventadminTest.java
index 285491aea36..6f81fd4c773 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelEventadminTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelEventadminTest.java
@@ -18,13 +18,11 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
 public class CamelEventadminTest extends AbstractFeatureTest {
-    
+
     public static final String COMPONENT = extractName(CamelEventadminTest.class);
 
     @Test
@@ -32,9 +30,4 @@ public class CamelEventadminTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
-
 }
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelExecTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelExecTest.java
index 0711891a59b..731b10599ce 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelExecTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelExecTest.java
@@ -18,13 +18,11 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
 public class CamelExecTest extends AbstractFeatureTest {
-    
+
     public static final String COMPONENT = extractName(CamelExecTest.class);
 
     @Test
@@ -32,9 +30,4 @@ public class CamelExecTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
-
 }
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelFacebookTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelFacebookTest.java
index a7d25403210..a598d90fb10 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelFacebookTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelFacebookTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,10 +30,5 @@ public class CamelFacebookTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
-    
 }
 
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelFlatpackTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelFlatpackTest.java
index 236ec0cd128..b38af239946 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelFlatpackTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelFlatpackTest.java
@@ -16,12 +16,8 @@
  */
 package org.apache.camel.itest.karaf;
 
-import org.apache.camel.model.DataFormatDefinition;
-import org.apache.camel.model.dataformat.FlatpackDataFormat;
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -29,18 +25,9 @@ public class CamelFlatpackTest extends AbstractFeatureTest {
 
     public static final String COMPONENT = extractName(CamelFlatpackTest.class);
 
-    protected DataFormatDefinition createDataformatDefinition(String format) {
-        return new FlatpackDataFormat();
-    }
-
     @Test
     public void test() throws Exception {
         testDataFormat(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
-
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelFopTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelFopTest.java
index e613c6843b0..cb93dfa7a48 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelFopTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelFopTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,4 @@ public class CamelFopTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
-
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelFreemarkerTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelFreemarkerTest.java
index edceb4da8b5..e610b18d16d 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelFreemarkerTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelFreemarkerTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,4 @@ public class CamelFreemarkerTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
-
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelFtpTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelFtpTest.java
index d28efda4839..be0717c2615 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelFtpTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelFtpTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -29,13 +27,8 @@ public class CamelFtpTest extends AbstractFeatureTest {
 
     @Test
     public void test() throws Exception {
-        testComponent(COMPONENT);
-        testComponent("sftp");
-    }
-
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
+        testComponent(COMPONENT, "ftp");
+        testComponent(COMPONENT, "sftp");
     }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelGangliaTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelGangliaTest.java
index 5c3df1eacf6..67602ed5f40 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelGangliaTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelGangliaTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,4 @@ public class CamelGangliaTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
-
 }
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelGeocoderTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelGeocoderTest.java
index ff4e6af455b..ef79d882cdd 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelGeocoderTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelGeocoderTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,4 @@ public class CamelGeocoderTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
-
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelGitTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelGitTest.java
index b2fee0665d0..23570851b3b 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelGitTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelGitTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,4 @@ public class CamelGitTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
-
 }
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelGithubTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelGithubTest.java
index 15ffbb46724..3e710391481 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelGithubTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelGithubTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,4 @@ public class CamelGithubTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
-
 }
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelGoogleCalendarTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelGoogleCalendarTest.java
index 58330f3d26b..43e17c96ab1 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelGoogleCalendarTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelGoogleCalendarTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,4 @@ public class CamelGoogleCalendarTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
-
 }
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelGoogleDriveTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelGoogleDriveTest.java
index 5b64439914e..3ec7e84af86 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelGoogleDriveTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelGoogleDriveTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,4 @@ public class CamelGoogleDriveTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
-
 }
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelGoogleMailTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelGoogleMailTest.java
index c5186258b8d..ad0b93c57f5 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelGoogleMailTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelGoogleMailTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,4 @@ public class CamelGoogleMailTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
-
 }
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelGroovyTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelGroovyTest.java
index 0babdb10ca8..a9e7ecb703a 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelGroovyTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelGroovyTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,4 @@ public class CamelGroovyTest extends AbstractFeatureTest {
         testLanguage(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
-
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelGsonTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelGsonTest.java
index 8c73c6311ad..2f4daaa0864 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelGsonTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelGsonTest.java
@@ -16,13 +16,8 @@
  */
 package org.apache.camel.itest.karaf;
 
-import org.apache.camel.model.DataFormatDefinition;
-import org.apache.camel.model.dataformat.JsonDataFormat;
-import org.apache.camel.model.dataformat.JsonLibrary;
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -30,20 +25,9 @@ public class CamelGsonTest extends AbstractFeatureTest {
 
     public static final String COMPONENT = extractName(CamelGsonTest.class);
 
-    protected DataFormatDefinition createDataformatDefinition(String format) {
-        JsonDataFormat answer = new JsonDataFormat();
-        answer.setLibrary(JsonLibrary.Gson);
-        return answer;
-    }
-
     @Test
     public void test() throws Exception {
         testDataFormat(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
-
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelGuavaEventBusTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelGuavaEventBusTest.java
index 296342b9f2c..9f31f412c32 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelGuavaEventBusTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelGuavaEventBusTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,4 @@ public class CamelGuavaEventBusTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
-
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelGuiceTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelGuiceTest.java
index 002bac2109c..2cd16786ccb 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelGuiceTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelGuiceTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -29,12 +27,7 @@ public class CamelGuiceTest extends AbstractFeatureTest {
 
     @Test
     public void test() throws Exception {
-        // TODO: how to actually test ?
-    }
-
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
+        installCamelFeature(COMPONENT);
     }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelHazelcastTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelHazelcastTest.java
index 429d0d38ac8..5c6cd46aeb1 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelHazelcastTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelHazelcastTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,4 @@ public class CamelHazelcastTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
-
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelHbaseTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelHbaseTest.java
index d941ff52897..f436a7800a9 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelHbaseTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelHbaseTest.java
@@ -19,8 +19,6 @@ package org.apache.camel.itest.karaf;
 import org.junit.Ignore;
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -34,9 +32,4 @@ public class CamelHbaseTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
-
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelHdfs2Test.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelHdfs2Test.java
index 5cc649b9d4e..892b6887d91 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelHdfs2Test.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelHdfs2Test.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,4 @@ public class CamelHdfs2Test extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
-
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelHdfsTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelHdfsTest.java
index 8d35be9c018..b614a4e8bae 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelHdfsTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelHdfsTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,4 @@ public class CamelHdfsTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
-
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelHessianTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelHessianTest.java
index ed1be84a240..bd65a2c6be8 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelHessianTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelHessianTest.java
@@ -16,31 +16,18 @@
  */
 package org.apache.camel.itest.karaf;
 
-import org.apache.camel.model.DataFormatDefinition;
-import org.apache.camel.model.dataformat.HessianDataFormat;
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
 public class CamelHessianTest extends AbstractFeatureTest {
 
     public static final String COMPONENT = extractName(CamelHessianTest.class);
-    
-    protected DataFormatDefinition createDataformatDefinition(String format) {
-        return new HessianDataFormat();
-    }
 
     @Test
     public void test() throws Exception {
         testDataFormat(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
-
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelHipchatTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelHipchatTest.java
index 7b008fb9278..f9ba468b1a2 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelHipchatTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelHipchatTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,4 @@ public class CamelHipchatTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
-
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelHl7Test.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelHl7Test.java
index 71bbf4803fe..01a4d453f76 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelHl7Test.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelHl7Test.java
@@ -16,12 +16,8 @@
  */
 package org.apache.camel.itest.karaf;
 
-import org.apache.camel.model.DataFormatDefinition;
-import org.apache.camel.model.dataformat.HL7DataFormat;
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -29,18 +25,9 @@ public class CamelHl7Test extends AbstractFeatureTest {
 
     public static final String COMPONENT = extractName(CamelHl7Test.class);
 
-    protected DataFormatDefinition createDataformatDefinition(String format) {
-        return new HL7DataFormat();
-    }
-    
     @Test
     public void test() throws Exception {
         testDataFormat(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
-
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelHttp4Test.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelHttp4Test.java
index 3a6b4e5e6ee..f0339f9b394 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelHttp4Test.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelHttp4Test.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,4 @@ public class CamelHttp4Test extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
-
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelHttpTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelHttpTest.java
index 710e019a04d..1d2c7bfdb33 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelHttpTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelHttpTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,4 @@ public class CamelHttpTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
-
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelIbatisTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelIbatisTest.java
index 672e6c7b89c..60a4b407059 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelIbatisTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelIbatisTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,4 @@ public class CamelIbatisTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
-
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelIcalTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelIcalTest.java
index 185b9ac64dd..a19fd5c40ad 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelIcalTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelIcalTest.java
@@ -16,31 +16,18 @@
  */
 package org.apache.camel.itest.karaf;
 
-import org.apache.camel.model.DataFormatDefinition;
-import org.apache.camel.model.dataformat.IcalDataFormat;
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
 public class CamelIcalTest extends AbstractFeatureTest {
 
     public static final String COMPONENT = extractName(CamelIcalTest.class);
-    
-    protected DataFormatDefinition createDataformatDefinition(String format) {        
-        return new IcalDataFormat();
-    }
 
     @Test
     public void test() throws Exception {
         testDataFormat(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
-
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelIgniteTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelIgniteTest.java
index f697ad230a8..fc401261263 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelIgniteTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelIgniteTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,4 @@ public class CamelIgniteTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
-
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelInfinispanTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelInfinispanTest.java
index cb5743cbaf7..fac0c484400 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelInfinispanTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelInfinispanTest.java
@@ -18,12 +18,11 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
 public class CamelInfinispanTest extends AbstractFeatureTest {
+
     public static final String COMPONENT = extractName(CamelInfinispanTest.class);
 
     @Test
@@ -31,9 +30,4 @@ public class CamelInfinispanTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
-
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelIrcTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelIrcTest.java
index e27309d0028..1e53448646d 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelIrcTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelIrcTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,4 @@ public class CamelIrcTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
-
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJCacheTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJCacheTest.java
index 84ba7c14630..10ea4590f6b 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJCacheTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJCacheTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,5 @@ public class CamelJCacheTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJacksonTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJacksonTest.java
index 3aa7b43f934..ae47ec7da6a 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJacksonTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJacksonTest.java
@@ -16,13 +16,8 @@
  */
 package org.apache.camel.itest.karaf;
 
-import org.apache.camel.model.DataFormatDefinition;
-import org.apache.camel.model.dataformat.JsonDataFormat;
-import org.apache.camel.model.dataformat.JsonLibrary;
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -30,18 +25,10 @@ public class CamelJacksonTest extends AbstractFeatureTest {
 
     public static final String COMPONENT = extractName(CamelJacksonTest.class);
 
-    protected DataFormatDefinition createDataformatDefinition(String format) {
-        return new JsonDataFormat(JsonLibrary.Jackson);
-    }
-
     @Test
     public void test() throws Exception {
         testDataFormat(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJacksonxmlTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJacksonxmlTest.java
index a1a36555802..ae1dee4738d 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJacksonxmlTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJacksonxmlTest.java
@@ -16,12 +16,8 @@
  */
 package org.apache.camel.itest.karaf;
 
-import org.apache.camel.model.DataFormatDefinition;
-import org.apache.camel.model.dataformat.JacksonXMLDataFormat;
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -29,18 +25,10 @@ public class CamelJacksonxmlTest extends AbstractFeatureTest {
 
     public static final String COMPONENT = extractName(CamelJacksonxmlTest.class);
 
-    protected DataFormatDefinition createDataformatDefinition(String format) {
-        return new JacksonXMLDataFormat();
-    }
-
     @Test
     public void test() throws Exception {
         testDataFormat(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJasyptTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJasyptTest.java
index ce2b9d187aa..a7a8b0d0da7 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJasyptTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJasyptTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -29,12 +27,8 @@ public class CamelJasyptTest extends AbstractFeatureTest {
 
     @Test
     public void test() throws Exception {
-        // not a component
+        installCamelFeature(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJaxbTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJaxbTest.java
index 9aae8ba78ba..4edca64d41e 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJaxbTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJaxbTest.java
@@ -16,31 +16,19 @@
  */
 package org.apache.camel.itest.karaf;
 
-import org.apache.camel.model.DataFormatDefinition;
-import org.apache.camel.model.dataformat.JaxbDataFormat;
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
 public class CamelJaxbTest extends AbstractFeatureTest {
 
     public static final String COMPONENT = extractName(CamelJaxbTest.class);
-    
-    protected DataFormatDefinition createDataformatDefinition(String format) {
-        return new JaxbDataFormat();
-    }
 
     @Test
     public void test() throws Exception {
         testDataFormat(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJbpmTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJbpmTest.java
index 06a09bac635..743e527bee0 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJbpmTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJbpmTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,5 @@ public class CamelJbpmTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJcloudsTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJcloudsTest.java
index 87d7a558da7..136940015ea 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJcloudsTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJcloudsTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,5 @@ public class CamelJcloudsTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJcrTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJcrTest.java
index de660e34ec6..5c358aaabf1 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJcrTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJcrTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,5 @@ public class CamelJcrTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJdbcAggregatorTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJdbcAggregatorTest.java
deleted file mode 100644
index 4c3f227bdee..00000000000
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJdbcAggregatorTest.java
+++ /dev/null
@@ -1,41 +0,0 @@
-/**
- * Licensed to the Apache Software Foundation (ASF) under one or more
- * contributor license agreements.  See the NOTICE file distributed with
- * this work for additional information regarding copyright ownership.
- * The ASF licenses this file to You under the Apache License, Version 2.0
- * (the "License"); you may not use this file except in compliance with
- * the License.  You may obtain a copy of the License at
- *
- *      http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.camel.itest.karaf;
-
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
-import org.ops4j.pax.exam.junit.PaxExam;
-
-@RunWith(PaxExam.class)
-public class CamelJdbcAggregatorTest extends AbstractFeatureTest {
-
-    // the aggregator is included in the camel-sql artifact
-    public static final String COMPONENT = "sql";
-
-    @Test
-    public void test() throws Exception {
-        // its not a component
-    }
-
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
-
-}
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJdbcTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJdbcTest.java
index b50d1cdd1cf..8d97e034b31 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJdbcTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJdbcTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,5 @@ public class CamelJdbcTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJetty8Test.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJetty8Test.java
deleted file mode 100644
index 0a81006421e..00000000000
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJetty8Test.java
+++ /dev/null
@@ -1,41 +0,0 @@
-/**
- * Licensed to the Apache Software Foundation (ASF) under one or more
- * contributor license agreements.  See the NOTICE file distributed with
- * this work for additional information regarding copyright ownership.
- * The ASF licenses this file to You under the Apache License, Version 2.0
- * (the "License"); you may not use this file except in compliance with
- * the License.  You may obtain a copy of the License at
- *
- *      http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.camel.itest.karaf;
-
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
-import org.ops4j.pax.exam.junit.PaxExam;
-
-@RunWith(PaxExam.class)
-@Deprecated
-public class CamelJetty8Test extends AbstractFeatureTest {
-
-    public static final String COMPONENT = extractName(CamelJetty8Test.class);
-
-    @Test
-    public void test() throws Exception {
-        testComponent("jetty");
-    }
-
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
-
-}
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJetty9Test.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJetty9Test.java
deleted file mode 100644
index 07b2681950d..00000000000
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJetty9Test.java
+++ /dev/null
@@ -1,40 +0,0 @@
-/**
- * Licensed to the Apache Software Foundation (ASF) under one or more
- * contributor license agreements.  See the NOTICE file distributed with
- * this work for additional information regarding copyright ownership.
- * The ASF licenses this file to You under the Apache License, Version 2.0
- * (the "License"); you may not use this file except in compliance with
- * the License.  You may obtain a copy of the License at
- *
- *      http://www.apache.org/licenses/LICENSE-2.0
- *
- * Unless required by applicable law or agreed to in writing, software
- * distributed under the License is distributed on an "AS IS" BASIS,
- * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
- * See the License for the specific language governing permissions and
- * limitations under the License.
- */
-package org.apache.camel.itest.karaf;
-
-import org.junit.Test;
-import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
-import org.ops4j.pax.exam.junit.PaxExam;
-
-@RunWith(PaxExam.class)
-public class CamelJetty9Test extends AbstractFeatureTest {
-
-    public static final String COMPONENT = extractName(CamelJetty9Test.class);
-
-    @Test
-    public void test() throws Exception {
-        testComponent("jetty");
-    }
-
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
-
-}
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJettyTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJettyTest.java
index bed380e8c31..81b0cb673e4 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJettyTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJettyTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,5 @@ public class CamelJettyTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJgroupsTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJgroupsTest.java
index 34d3a9a16d1..01b4e27122d 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJgroupsTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJgroupsTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,5 @@ public class CamelJgroupsTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJibxTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJibxTest.java
index ae9a33b41db..6b911abeca5 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJibxTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJibxTest.java
@@ -16,31 +16,19 @@
  */
 package org.apache.camel.itest.karaf;
 
-import org.apache.camel.model.DataFormatDefinition;
-import org.apache.camel.model.dataformat.JibxDataFormat;
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
 public class CamelJibxTest extends AbstractFeatureTest {
 
     public static final String COMPONENT = extractName(CamelJibxTest.class);
-    
-    protected DataFormatDefinition createDataformatDefinition(String format) {
-        return new JibxDataFormat();
-    }
 
     @Test
     public void test() throws Exception {
         testDataFormat(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJingTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJingTest.java
index fe8f7d3fc15..874a9ca87e2 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJingTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJingTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,5 @@ public class CamelJingTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJmsTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJmsTest.java
index 537ff6a025c..9dc30fde7a3 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJmsTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJmsTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,5 @@ public class CamelJmsTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJmxTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJmxTest.java
index 2f34840682b..aa5be6bdaac 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJmxTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJmxTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,5 @@ public class CamelJmxTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJoltTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJoltTest.java
index 6c69b4c1195..d8ed96f5c61 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJoltTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJoltTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,5 @@ public class CamelJoltTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJosqlTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJosqlTest.java
index 3a2e82f7b32..265d35f48db 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJosqlTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJosqlTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -29,12 +27,8 @@ public class CamelJosqlTest extends AbstractFeatureTest {
 
     @Test
     public void test() throws Exception {
-        // TODO: how to test that?
+        testLanguage(COMPONENT, "sql");
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJpaTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJpaTest.java
index 5aa559c07a9..9f17b39bbb8 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJpaTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJpaTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,5 @@ public class CamelJpaTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJsonpathTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJsonpathTest.java
index 4f78f5a5bb5..3d42991cef9 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJsonpathTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJsonpathTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,5 @@ public class CamelJsonpathTest extends AbstractFeatureTest {
         testLanguage(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJt400Test.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJt400Test.java
index 6a5e58ea905..b06d26348be 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJt400Test.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJt400Test.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,5 @@ public class CamelJt400Test extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJuelTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJuelTest.java
index dc2d11cdec4..2fd2caf826e 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJuelTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJuelTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -29,12 +27,8 @@ public class CamelJuelTest extends AbstractFeatureTest {
 
     @Test
     public void test() throws Exception {
-        testLanguage("el");
+        testLanguage(COMPONENT, "el");
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJxpathTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJxpathTest.java
index 4003a067c84..3ade6daf147 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJxpathTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelJxpathTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,5 @@ public class CamelJxpathTest extends AbstractFeatureTest {
         testLanguage(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelKafkaTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelKafkaTest.java
index fc13ec49f61..90aab5fd2ef 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelKafkaTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelKafkaTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,5 @@ public class CamelKafkaTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelKratiTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelKratiTest.java
index 05538ba3f5d..825e58adabe 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelKratiTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelKratiTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,5 @@ public class CamelKratiTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelKubernetesTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelKubernetesTest.java
index eda3cf27ebd..3b863c7b5c7 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelKubernetesTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelKubernetesTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,5 @@ public class CamelKubernetesTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelLdapTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelLdapTest.java
index 6da6a95db66..0830fe051a6 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelLdapTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelLdapTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,5 @@ public class CamelLdapTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelLinkedinTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelLinkedinTest.java
index 091b918ab16..1c8012ed29e 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelLinkedinTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelLinkedinTest.java
@@ -18,12 +18,11 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
 public class CamelLinkedinTest extends AbstractFeatureTest {
+
     public static final String COMPONENT = extractName(CamelLinkedinTest.class);
 
     @Test
@@ -31,9 +30,4 @@ public class CamelLinkedinTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public Option[] configure() {
-        return configure(COMPONENT);
-    }
-
 }
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelLuceneTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelLuceneTest.java
index a4332aeb39b..274fd24c4eb 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelLuceneTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelLuceneTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,5 @@ public class CamelLuceneTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelLzfTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelLzfTest.java
index 55a728300af..e0a021c3cb2 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelLzfTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelLzfTest.java
@@ -16,31 +16,19 @@
  */
 package org.apache.camel.itest.karaf;
 
-import org.apache.camel.model.DataFormatDefinition;
-import org.apache.camel.model.dataformat.LZFDataFormat;
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
 public class CamelLzfTest extends AbstractFeatureTest {
 
     public static final String COMPONENT = extractName(CamelLzfTest.class);
-    
-    protected DataFormatDefinition createDataformatDefinition(String format) {        
-        return new LZFDataFormat();
-    }
 
     @Test
     public void test() throws Exception {
         testDataFormat(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelMailTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelMailTest.java
index c6cf7b904e3..56d0539e15d 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelMailTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelMailTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -29,12 +27,10 @@ public class CamelMailTest extends AbstractFeatureTest {
 
     @Test
     public void test() throws Exception {
-        testComponent("imap");
+        testComponent(COMPONENT, "smtp");
+        testComponent(COMPONENT, "imap");
+        testComponent(COMPONENT, "pop3");
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelMetricsTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelMetricsTest.java
index 6700fbdb853..2f65bb00dc3 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelMetricsTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelMetricsTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,5 @@ public class CamelMetricsTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelMina2Test.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelMina2Test.java
index 26ba8f83eef..7977518ff9c 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelMina2Test.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelMina2Test.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,5 @@ public class CamelMina2Test extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelMinaTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelMinaTest.java
index d267752dc70..453cb40a55c 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelMinaTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelMinaTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,5 @@ public class CamelMinaTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelMllpTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelMllpTest.java
index f46766667d0..32b48ca4152 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelMllpTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelMllpTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,5 @@ public class CamelMllpTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelMongodbTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelMongodbTest.java
index c0afeba5387..b9768be59f3 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelMongodbTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelMongodbTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,5 @@ public class CamelMongodbTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelMqttTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelMqttTest.java
index c77b34fcf9e..6c6a3b73f1d 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelMqttTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelMqttTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,5 @@ public class CamelMqttTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelMsvTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelMsvTest.java
index 961ef14ba8e..0a95fd9aa6e 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelMsvTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelMsvTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,5 @@ public class CamelMsvTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelMustacheTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelMustacheTest.java
index 86508b5b0e8..d989ee6d5a4 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelMustacheTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelMustacheTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,5 @@ public class CamelMustacheTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelMvelTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelMvelTest.java
index 461214eccc5..4ddc0844af6 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelMvelTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelMvelTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,5 @@ public class CamelMvelTest extends AbstractFeatureTest {
         testLanguage(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelMyBatisTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelMyBatisTest.java
index 119239d56bb..f0bdfb041e1 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelMyBatisTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelMyBatisTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,5 @@ public class CamelMyBatisTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelNatsTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelNatsTest.java
index 32ae4aee6d4..9d663c2ded3 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelNatsTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelNatsTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,5 @@ public class CamelNatsTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelNetty4HttpTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelNetty4HttpTest.java
index e48bc215c13..ae128264a46 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelNetty4HttpTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelNetty4HttpTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,5 @@ public class CamelNetty4HttpTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelNetty4Test.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelNetty4Test.java
index 438cf8eab9a..1730c5e348f 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelNetty4Test.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelNetty4Test.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,5 @@ public class CamelNetty4Test extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelNettyHttpTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelNettyHttpTest.java
index ace1c0441ec..2598cd7240d 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelNettyHttpTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelNettyHttpTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,5 @@ public class CamelNettyHttpTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelNettyTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelNettyTest.java
index 2c590cba589..20a14a2abb6 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelNettyTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelNettyTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,5 @@ public class CamelNettyTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelOgnlTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelOgnlTest.java
index 9cbdfc5be59..087b685a226 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelOgnlTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelOgnlTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,5 @@ public class CamelOgnlTest extends AbstractFeatureTest {
         testLanguage(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelOlingo2Test.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelOlingo2Test.java
index 3ca27e0018a..feaee45750e 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelOlingo2Test.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelOlingo2Test.java
@@ -18,12 +18,11 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
 public class CamelOlingo2Test extends AbstractFeatureTest {
+
     public static final String COMPONENT = extractName(CamelOlingo2Test.class);
 
     @Test
@@ -31,9 +30,4 @@ public class CamelOlingo2Test extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public Option[] configure() {
-        return configure(COMPONENT);
-    }
-
 }
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelOpenshiftTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelOpenshiftTest.java
index 0ee8cd6cd3d..ebd23df2efb 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelOpenshiftTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelOpenshiftTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,5 @@ public class CamelOpenshiftTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelOptaplannerTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelOptaplannerTest.java
index 1a975ba1719..811f82c1ed9 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelOptaplannerTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelOptaplannerTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,5 @@ public class CamelOptaplannerTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelPahoTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelPahoTest.java
index 9ec0e81cc27..e385c848e12 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelPahoTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelPahoTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,5 @@ public class CamelPahoTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelPaxloggingTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelPaxloggingTest.java
index cbbfec13ebc..86cf30f812a 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelPaxloggingTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelPaxloggingTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,5 @@ public class CamelPaxloggingTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelPdfTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelPdfTest.java
index 24327502f17..c5d73e2c740 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelPdfTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelPdfTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,5 @@ public class CamelPdfTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelPgeventTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelPgeventTest.java
index 56e0599d4cb..36ace8654fb 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelPgeventTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelPgeventTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,5 @@ public class CamelPgeventTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelPrinterTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelPrinterTest.java
index ff8ee68d48a..99f6fc3526c 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelPrinterTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelPrinterTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -29,12 +27,8 @@ public class CamelPrinterTest extends AbstractFeatureTest {
 
     @Test
     public void test() throws Exception {
-        testComponent("lpr");
+        testComponent(COMPONENT, "lpr");
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelProtobufTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelProtobufTest.java
index ffa78ade265..ae2eb58383c 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelProtobufTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelProtobufTest.java
@@ -16,12 +16,8 @@
  */
 package org.apache.camel.itest.karaf;
 
-import org.apache.camel.model.DataFormatDefinition;
-import org.apache.camel.model.dataformat.ProtobufDataFormat;
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -29,18 +25,10 @@ public class CamelProtobufTest extends AbstractFeatureTest {
 
     public static final String COMPONENT = extractName(CamelProtobufTest.class);
 
-    protected DataFormatDefinition createDataformatDefinition(String format) {
-        return new ProtobufDataFormat();
-    }
-
     @Test
     public void test() throws Exception {
         testDataFormat(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelQuartz2Test.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelQuartz2Test.java
index 830f3c6f47c..077fb4fd616 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelQuartz2Test.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelQuartz2Test.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,5 @@ public class CamelQuartz2Test extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelQuartzTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelQuartzTest.java
index 2acbf10a8f7..d2c0296acf6 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelQuartzTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelQuartzTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,5 @@ public class CamelQuartzTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelQuickFixTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelQuickFixTest.java
index 9390be90264..82bf53dd95f 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelQuickFixTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelQuickFixTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,5 @@ public class CamelQuickFixTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelRabbitmqTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelRabbitmqTest.java
index ecae39dc27a..f761fc3a305 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelRabbitmqTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelRabbitmqTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,10 +30,5 @@ public class CamelRabbitmqTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
-    
 
 }
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelRestletTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelRestletTest.java
index a8cfa0bc883..350fa607a57 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelRestletTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelRestletTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,5 @@ public class CamelRestletTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelRmiTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelRmiTest.java
index 1e4e06669a0..e69eea095fa 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelRmiTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelRmiTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,5 @@ public class CamelRmiTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelRouteboxTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelRouteboxTest.java
index f793d0caefb..64197125c4d 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelRouteboxTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelRouteboxTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,5 @@ public class CamelRouteboxTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelRssTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelRssTest.java
index a778cf5f8f6..775f371e349 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelRssTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelRssTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,5 @@ public class CamelRssTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelRxTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelRxTest.java
index 0bbd8159053..60e91252beb 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelRxTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelRxTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -29,12 +27,8 @@ public class CamelRxTest extends AbstractFeatureTest {
 
     @Test
     public void test() throws Exception {
-        // noop
+        installCamelFeature(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSalesforceTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSalesforceTest.java
index b231b144e7b..84aa9ea7158 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSalesforceTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSalesforceTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,5 @@ public class CamelSalesforceTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSapNetweaverTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSapNetweaverTest.java
index 1b503ae478e..a41d17b0569 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSapNetweaverTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSapNetweaverTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,5 @@ public class CamelSapNetweaverTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSaxonTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSaxonTest.java
index 521a9525356..95ddf90950c 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSaxonTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSaxonTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -29,13 +27,9 @@ public class CamelSaxonTest extends AbstractFeatureTest {
 
     @Test
     public void test() throws Exception {
-        testComponent("xquery");
-        testLanguage("xquery");
+        testComponent(COMPONENT, "xquery");
+        testLanguage(COMPONENT, "xquery");
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelScalaTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelScalaTest.java
index 16d422b4705..c79623d0b23 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelScalaTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelScalaTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -29,13 +27,8 @@ public class CamelScalaTest extends AbstractFeatureTest {
 
     @Test
     public void test() throws Exception {
-        //TODO need to find a way to test scala
-        //testLanguage(COMPONENT);
+        installCamelFeature(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSchematronTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSchematronTest.java
index 7f51d1d94f6..59c00cc586d 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSchematronTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSchematronTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,5 @@ public class CamelSchematronTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelScriptTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelScriptTest.java
index 3e432649a97..aa8f1007ee8 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelScriptTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelScriptTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -29,12 +27,8 @@ public class CamelScriptTest extends AbstractFeatureTest {
 
     @Test
     public void test() throws Exception {
-        testLanguage("Groovy");
-    }
-
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT, "script-groovy");
+        installCamelFeature("script-groovy");
+        testLanguage(COMPONENT, "Groovy");
     }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelServicenowTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelServicenowTest.java
index f275161826b..e65ec5de16d 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelServicenowTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelServicenowTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,5 @@ public class CamelServicenowTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelServletTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelServletTest.java
index 5f8d4bd1ab2..8858711ca37 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelServletTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelServletTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,5 @@ public class CamelServletTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSipTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSipTest.java
index 223db22bee5..ab93348202d 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSipTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSipTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,5 @@ public class CamelSipTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSjmsTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSjmsTest.java
index 9cbf842f177..01dbc507d44 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSjmsTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSjmsTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,5 @@ public class CamelSjmsTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSlackTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSlackTest.java
index 8c39d8d49b4..06dbd236647 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSlackTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSlackTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,5 @@ public class CamelSlackTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSmppTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSmppTest.java
index 42649572bd5..1d250e46332 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSmppTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSmppTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,5 @@ public class CamelSmppTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSnakeyamlTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSnakeyamlTest.java
index 2a8c416b63c..02188dccd35 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSnakeyamlTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSnakeyamlTest.java
@@ -18,23 +18,14 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
 public class CamelSnakeyamlTest extends AbstractFeatureTest {
 
-    public static final String COMPONENT = extractName(CamelSnakeyamlTest.class);
-
     @Test
     public void test() throws Exception {
-        testComponent(COMPONENT);
-    }
-
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
+        testComponent("camel-snakeyaml", "yaml-snakeyaml");
     }
 
 }
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSnmpTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSnmpTest.java
index c1b98df132f..c51d46b41f9 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSnmpTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSnmpTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,5 @@ public class CamelSnmpTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSoapTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSoapTest.java
index c53c8323552..ed22e3083ab 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSoapTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSoapTest.java
@@ -16,12 +16,8 @@
  */
 package org.apache.camel.itest.karaf;
 
-import org.apache.camel.model.DataFormatDefinition;
-import org.apache.camel.model.dataformat.SoapJaxbDataFormat;
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -29,18 +25,9 @@ public class CamelSoapTest extends AbstractFeatureTest {
 
     public static final String COMPONENT = extractName(CamelSoapTest.class);
 
-    protected DataFormatDefinition createDataformatDefinition(String format) {
-        return new SoapJaxbDataFormat();
-    }
-
     @Test
     public void test() throws Exception {
         testDataFormat(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
-
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSolrTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSolrTest.java
index 4c6b97946ab..d2d392a060f 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSolrTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSolrTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,5 @@ public class CamelSolrTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSplunkTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSplunkTest.java
index 17b5b1957a8..ccdaaef09cc 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSplunkTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSplunkTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,5 @@ public class CamelSplunkTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSpringBatchTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSpringBatchTest.java
index 8cd6e04a762..6b492f6c531 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSpringBatchTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSpringBatchTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,5 @@ public class CamelSpringBatchTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSpringJavaconfigTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSpringJavaconfigTest.java
index da244799ede..fa21995126c 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSpringJavaconfigTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSpringJavaconfigTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -29,12 +27,7 @@ public class CamelSpringJavaconfigTest extends AbstractFeatureTest {
 
     @Test
     public void test() throws Exception {
-        // TODO: spring javaconfig is being removed in Camel 3.0
-    }
-
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
+        installCamelFeature(COMPONENT);
     }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSpringLdapTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSpringLdapTest.java
index f96917de204..a1ab931bd5f 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSpringLdapTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSpringLdapTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,4 @@ public class CamelSpringLdapTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
-
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSpringRedisTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSpringRedisTest.java
index 3bd17853b5b..a0866918d78 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSpringRedisTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSpringRedisTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,5 @@ public class CamelSpringRedisTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSpringWebServiceTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSpringWebServiceTest.java
index 927d675660f..2f817db6b30 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSpringWebServiceTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSpringWebServiceTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,5 @@ public class CamelSpringWebServiceTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSqlTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSqlTest.java
index c6fbcdbe5cd..a93cf26ae45 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSqlTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSqlTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,5 @@ public class CamelSqlTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSshTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSshTest.java
index 6332ebc24f3..10e01337c99 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSshTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSshTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,5 @@ public class CamelSshTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelStAXTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelStAXTest.java
index c593de24bd1..f9f78a13aa5 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelStAXTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelStAXTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,5 @@ public class CamelStAXTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelStompTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelStompTest.java
index 81149b376a7..5879ca54393 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelStompTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelStompTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,5 @@ public class CamelStompTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelStreamTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelStreamTest.java
index 11f1e5a928a..97255683d73 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelStreamTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelStreamTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,5 @@ public class CamelStreamTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelStringTemplateTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelStringTemplateTest.java
index 3abfc15f7f4..666848fa9ba 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelStringTemplateTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelStringTemplateTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,5 @@ public class CamelStringTemplateTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSwaggerJavaTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSwaggerJavaTest.java
index b586aa5fbd6..9c982ef3828 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSwaggerJavaTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSwaggerJavaTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -29,12 +27,8 @@ public class CamelSwaggerJavaTest extends AbstractFeatureTest {
 
     @Test
     public void test() throws Exception {
-        // not a component
+        installCamelFeature(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSwaggerTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSwaggerTest.java
index 6a6fc51c9b4..4f47fa1a6bf 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSwaggerTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSwaggerTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -29,12 +27,8 @@ public class CamelSwaggerTest extends AbstractFeatureTest {
 
     @Test
     public void test() throws Exception {
-        // not a component
+        installCamelFeature(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSyslogTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSyslogTest.java
index d1c0321e470..80e887df1c9 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSyslogTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelSyslogTest.java
@@ -16,12 +16,8 @@
  */
 package org.apache.camel.itest.karaf;
 
-import org.apache.camel.model.DataFormatDefinition;
-import org.apache.camel.model.dataformat.SyslogDataFormat;
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -29,18 +25,10 @@ public class CamelSyslogTest extends AbstractFeatureTest {
 
     public static final String COMPONENT = extractName(CamelSyslogTest.class);
 
-    protected DataFormatDefinition createDataformatDefinition(String format) {
-        return new SyslogDataFormat();
-    }
-
     @Test
     public void test() throws Exception {
         testDataFormat(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelTagsoupTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelTagsoupTest.java
index a71fe4d12bf..dc5fec72d95 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelTagsoupTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelTagsoupTest.java
@@ -16,12 +16,8 @@
  */
 package org.apache.camel.itest.karaf;
 
-import org.apache.camel.model.DataFormatDefinition;
-import org.apache.camel.model.dataformat.TidyMarkupDataFormat;
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -29,18 +25,10 @@ public class CamelTagsoupTest extends AbstractFeatureTest {
 
     public static final String COMPONENT = extractName(CamelTagsoupTest.class);
 
-    protected DataFormatDefinition createDataformatDefinition(String format) {
-        return new TidyMarkupDataFormat();
-    }
-    
     @Test
     public void test() throws Exception {
         testDataFormat(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelTarfileTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelTarfileTest.java
index d41b90d49ed..a7e261c6412 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelTarfileTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelTarfileTest.java
@@ -16,31 +16,19 @@
  */
 package org.apache.camel.itest.karaf;
 
-import org.apache.camel.model.DataFormatDefinition;
-import org.apache.camel.model.dataformat.TarFileDataFormat;
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
 public class CamelTarfileTest extends AbstractFeatureTest {
 
     public static final String COMPONENT = extractName(CamelTarfileTest.class);
-    
-    protected DataFormatDefinition createDataformatDefinition(String format) {        
-        return new TarFileDataFormat();
-    }
 
     @Test
     public void test() throws Exception {
         testDataFormat(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelTestSpringTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelTestSpringTest.java
index a7de65d38bd..a1df58414fd 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelTestSpringTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelTestSpringTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -29,12 +27,8 @@ public class CamelTestSpringTest extends AbstractFeatureTest {
 
     @Test
     public void test() throws Exception {
-        // noop
+        installCamelFeature(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelTestTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelTestTest.java
index 17df5c18f81..c980b6d145a 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelTestTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelTestTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -29,12 +27,8 @@ public class CamelTestTest extends AbstractFeatureTest {
 
     @Test
     public void test() throws Exception {
-        // noop
+        installCamelFeature(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelTwitterTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelTwitterTest.java
index c3a14462848..9bc6a6ac98c 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelTwitterTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelTwitterTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,5 @@ public class CamelTwitterTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelUndertowTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelUndertowTest.java
index a8950b2ce66..309ec11e985 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelUndertowTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelUndertowTest.java
@@ -18,12 +18,11 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
 public class CamelUndertowTest extends AbstractFeatureTest {
+
     public static final String COMPONENT = extractName(CamelUndertowTest.class);
 
     @Test
@@ -31,9 +30,5 @@ public class CamelUndertowTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelUrlrewriteTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelUrlrewriteTest.java
index a7532cad3d9..0af37db8146 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelUrlrewriteTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelUrlrewriteTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -29,12 +27,8 @@ public class CamelUrlrewriteTest extends AbstractFeatureTest {
 
     @Test
     public void test() throws Exception {
-        // urlrewrite is not a Camel component
+        installCamelFeature(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelVelocityTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelVelocityTest.java
index 787d030e0c0..d3e7bcf81c4 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelVelocityTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelVelocityTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,5 @@ public class CamelVelocityTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelVertxTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelVertxTest.java
index 72dd6baeb38..77195af5a87 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelVertxTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelVertxTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -29,16 +27,8 @@ public class CamelVertxTest extends AbstractFeatureTest {
 
     @Test
     public void test() throws Exception {
-        // vertx requires Java 1.8
-        String javaVersion = System.getProperty("java.version");
-        if (javaVersion.startsWith("1.8")) {
-            testComponent(COMPONENT);
-        }
+        testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelWeatherTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelWeatherTest.java
index 70cd2383ee4..1beb867624d 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelWeatherTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelWeatherTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,5 @@ public class CamelWeatherTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelWebsocketTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelWebsocketTest.java
index 458d7dd437f..e9baf45bfce 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelWebsocketTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelWebsocketTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,5 @@ public class CamelWebsocketTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelXmlbeansTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelXmlbeansTest.java
index 611376227d4..0bff5f37bbb 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelXmlbeansTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelXmlbeansTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -29,12 +27,8 @@ public class CamelXmlbeansTest extends AbstractFeatureTest {
 
     @Test
     public void test() throws Exception {
-        // xmlbeans is just a converter
+        installCamelFeature(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelXmljsonTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelXmljsonTest.java
index 78c4e4b9f78..d702ac60261 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelXmljsonTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelXmljsonTest.java
@@ -16,31 +16,19 @@
  */
 package org.apache.camel.itest.karaf;
 
-import org.apache.camel.model.DataFormatDefinition;
-import org.apache.camel.model.dataformat.XmlJsonDataFormat;
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
 public class CamelXmljsonTest extends AbstractFeatureTest {
 
     public static final String COMPONENT = extractName(CamelXmljsonTest.class);
-    
-    protected DataFormatDefinition createDataformatDefinition(String format) {        
-        return new XmlJsonDataFormat();
-    }
 
     @Test
     public void test() throws Exception {
         testDataFormat(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelXmlrpcTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelXmlrpcTest.java
index 4cc07733dea..8bd7132e7e9 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelXmlrpcTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelXmlrpcTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,5 @@ public class CamelXmlrpcTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelXmlsecurityTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelXmlsecurityTest.java
index e819630d8b6..3ab75fd23ab 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelXmlsecurityTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelXmlsecurityTest.java
@@ -16,31 +16,19 @@
  */
 package org.apache.camel.itest.karaf;
 
-import org.apache.camel.model.DataFormatDefinition;
-import org.apache.camel.model.dataformat.XMLSecurityDataFormat;
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
 public class CamelXmlsecurityTest extends AbstractFeatureTest {
 
     public static final String COMPONENT = extractName(CamelXmlsecurityTest.class);
-    
-    protected DataFormatDefinition createDataformatDefinition(String format) {
-        return new XMLSecurityDataFormat();
-    }
 
     @Test
     public void test() throws Exception {
         testDataFormat(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelXmppTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelXmppTest.java
index 712ab1a9310..c93964a9f9f 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelXmppTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelXmppTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,5 @@ public class CamelXmppTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelXstreamTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelXstreamTest.java
index 035fd4e87e3..12fccad45a2 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelXstreamTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelXstreamTest.java
@@ -16,37 +16,20 @@
  */
 package org.apache.camel.itest.karaf;
 
-import org.apache.camel.model.DataFormatDefinition;
-import org.apache.camel.model.dataformat.JsonDataFormat;
-import org.apache.camel.model.dataformat.XStreamDataFormat;
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
 public class CamelXstreamTest extends AbstractFeatureTest {
 
     public static final String COMPONENT = extractName(CamelXstreamTest.class);
-    
-    protected DataFormatDefinition createDataformatDefinition(String format) {
-        if (format.equals("xstream")) {
-            return new XStreamDataFormat();
-        } else {
-            return new JsonDataFormat();
-        }
-    }
 
     @Test
     public void test() throws Exception {
-        testDataFormat(COMPONENT);
-        testDataFormat("json");
+        testDataFormat(COMPONENT, "xstream");
+        testDataFormat(COMPONENT, "json");
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelYamlTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelYamlTest.java
index 4990b4f7773..7e1b18a07f9 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelYamlTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelYamlTest.java
@@ -16,32 +16,19 @@
  */
 package org.apache.camel.itest.karaf;
 
-import org.apache.camel.model.DataFormatDefinition;
-import org.apache.camel.model.dataformat.YAMLDataFormat;
-import org.apache.camel.model.dataformat.YAMLLibrary;
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
 public class CamelYamlTest extends AbstractFeatureTest {
 
-    public static final String COMPONENT = extractName(CamelYamlTest.class);
-
-    protected DataFormatDefinition createDataformatDefinition(String format) {
-        return new YAMLDataFormat(YAMLLibrary.SnakeYAML);
-    }
+    public static final String COMPONENT = "snakeyaml";
 
     @Test
     public void test() throws Exception {
-        testDataFormat(COMPONENT);
+        testDataFormat(COMPONENT, "yaml");
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelYammerTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelYammerTest.java
index c96bdf03407..f8b700c99ef 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelYammerTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelYammerTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,5 @@ public class CamelYammerTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelZipfileTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelZipfileTest.java
index d4ca4230a1e..5c5369299d2 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelZipfileTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelZipfileTest.java
@@ -16,31 +16,19 @@
  */
 package org.apache.camel.itest.karaf;
 
-import org.apache.camel.model.DataFormatDefinition;
-import org.apache.camel.model.dataformat.ZipFileDataFormat;
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
 public class CamelZipfileTest extends AbstractFeatureTest {
 
     public static final String COMPONENT = extractName(CamelZipfileTest.class);
-    
-    protected DataFormatDefinition createDataformatDefinition(String format) {        
-        return new ZipFileDataFormat();
-    }
 
     @Test
     public void test() throws Exception {
         testDataFormat(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
\ No newline at end of file
diff --git a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelZookeeperTest.java b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelZookeeperTest.java
index db02a396f23..0938f3cdb59 100644
--- a/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelZookeeperTest.java
+++ b/tests/camel-itest-karaf/src/test/java/org/apache/camel/itest/karaf/CamelZookeeperTest.java
@@ -18,8 +18,6 @@ package org.apache.camel.itest.karaf;
 
 import org.junit.Test;
 import org.junit.runner.RunWith;
-import org.ops4j.pax.exam.Configuration;
-import org.ops4j.pax.exam.Option;
 import org.ops4j.pax.exam.junit.PaxExam;
 
 @RunWith(PaxExam.class)
@@ -32,9 +30,5 @@ public class CamelZookeeperTest extends AbstractFeatureTest {
         testComponent(COMPONENT);
     }
 
-    @Configuration
-    public static Option[] configure() {
-        return configure(COMPONENT);
-    }
 
 }
