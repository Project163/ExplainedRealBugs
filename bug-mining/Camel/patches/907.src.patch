diff --git a/camel-core/src/test/java/org/apache/camel/component/file/FromFileMulticastToFilesTest.java b/camel-core/src/test/java/org/apache/camel/component/file/FromFileMulticastToFilesTest.java
index 2ba30a87640..ee833f54d9d 100644
--- a/camel-core/src/test/java/org/apache/camel/component/file/FromFileMulticastToFilesTest.java
+++ b/camel-core/src/test/java/org/apache/camel/component/file/FromFileMulticastToFilesTest.java
@@ -33,6 +33,27 @@ public class FromFileMulticastToFilesTest extends ContextTestSupport {
     }
 
     public void testFromFileMulticastToFiles() throws Exception {
+        context.addRoutes(new RouteBuilder() {
+            @Override
+            public void configure() throws Exception {
+                from("file://target/multicast")
+                    .multicast()
+                        .pipeline()
+                            .transform(body().prepend("HEADER:"))
+                            .to("file://target/multicast/out/?fileName=header.txt")
+                            .to("mock:header")
+                        .end()
+                        .pipeline()
+                            .transform(body().prepend("FOOTER:"))
+                            .to("file://target/multicast/out/?fileName=footer.txt")
+                            .to("mock:footer")
+                        .end()
+                    .end()
+                    .to("mock:end");
+            }
+        });
+        context.start();
+
         MockEndpoint header = getMockEndpoint("mock:header");
         header.expectedBodiesReceived("HEADER:foo");
         header.expectedFileExists("./target/multicast/out/header.txt");
@@ -50,13 +71,12 @@ public class FromFileMulticastToFilesTest extends ContextTestSupport {
         assertMockEndpointsSatisfied();
     }
 
-    @Override
-    protected RouteBuilder createRouteBuilder() throws Exception {
-        return new RouteBuilder() {
+    public void testFromFileMulticastParallelToFiles() throws Exception {
+        context.addRoutes(new RouteBuilder() {
             @Override
             public void configure() throws Exception {
                 from("file://target/multicast")
-                    .multicast()
+                    .multicast().parallelProcessing()
                         .pipeline()
                             .transform(body().prepend("HEADER:"))
                             .to("file://target/multicast/out/?fileName=header.txt")
@@ -70,6 +90,28 @@ public class FromFileMulticastToFilesTest extends ContextTestSupport {
                     .end()
                     .to("mock:end");
             }
-        };
+        });
+        context.start();
+
+        MockEndpoint header = getMockEndpoint("mock:header");
+        header.expectedBodiesReceived("HEADER:foo");
+        header.expectedFileExists("./target/multicast/out/header.txt");
+
+        MockEndpoint footer = getMockEndpoint("mock:footer");
+        footer.expectedBodiesReceived("FOOTER:foo");
+        footer.expectedFileExists("./target/multicast/out/footer.txt");
+
+        MockEndpoint end = getMockEndpoint("mock:end");
+        end.expectedMessageCount(1);
+        end.expectedFileExists("./target/multicast/.camel/foo.txt");
+
+        template.sendBodyAndHeader("file://target/multicast", "foo", Exchange.FILE_NAME, "foo.txt");
+
+        assertMockEndpointsSatisfied();
+    }
+
+    @Override
+    public boolean isUseRouteBuilder() {
+        return false;
     }
 }
