diff --git a/camel-core/src/main/java/org/apache/camel/component/file/GenericFileEndpoint.java b/camel-core/src/main/java/org/apache/camel/component/file/GenericFileEndpoint.java
index 78b12a3debc..d1bf4e0b1a3 100644
--- a/camel-core/src/main/java/org/apache/camel/component/file/GenericFileEndpoint.java
+++ b/camel-core/src/main/java/org/apache/camel/component/file/GenericFileEndpoint.java
@@ -472,9 +472,9 @@ public abstract class GenericFileEndpoint<T> extends ScheduledPollEndpoint {
             String name = file.isAbsolute() ? file.getAbsoluteFilePath() : file.getRelativeFilePath();
 
             // skip leading endpoint configured directory
-            String endpointPath = getConfiguration().getDirectory();
+            String endpointPath = getConfiguration().getDirectory() + getFileSeparator();
             if (ObjectHelper.isNotEmpty(endpointPath) && name.startsWith(endpointPath)) {
-                name = ObjectHelper.after(name, getConfiguration().getDirectory() + File.separator);
+                name = ObjectHelper.after(name, endpointPath);
             }
 
             // adjust filename
diff --git a/camel-core/src/test/java/org/apache/camel/component/file/FileConsumerRelativeFileNameTest.java b/camel-core/src/test/java/org/apache/camel/component/file/FileConsumerRelativeFileNameTest.java
new file mode 100644
index 00000000000..42eb7b87aa7
--- /dev/null
+++ b/camel-core/src/test/java/org/apache/camel/component/file/FileConsumerRelativeFileNameTest.java
@@ -0,0 +1,61 @@
+/**
+ * Licensed to the Apache Software Foundation (ASF) under one or more
+ * contributor license agreements.  See the NOTICE file distributed with
+ * this work for additional information regarding copyright ownership.
+ * The ASF licenses this file to You under the Apache License, Version 2.0
+ * (the "License"); you may not use this file except in compliance with
+ * the License.  You may obtain a copy of the License at
+ *
+ *      http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+package org.apache.camel.component.file;
+
+import org.apache.camel.ContextTestSupport;
+import org.apache.camel.Exchange;
+import org.apache.camel.builder.RouteBuilder;
+import org.apache.camel.component.mock.MockEndpoint;
+
+/**
+ * @version $Revision$
+ */
+public class FileConsumerRelativeFileNameTest extends ContextTestSupport {
+
+    @Override
+    protected void setUp() throws Exception {
+        deleteDirectory("target/filename-consumer");
+        super.setUp();
+        // the file name is also starting with target/filename-consumer
+        template.sendBodyAndHeader("file:target/filename-consumer", "Hello World",
+                Exchange.FILE_NAME, "target/filename-consumer-hello.txt");
+        template.sendBodyAndHeader("file:target/filename-consumer", "Bye World",
+                Exchange.FILE_NAME, "target/filename-consumer-bye.txt");
+    }
+
+    public void testValidFilenameOnExchange() throws Exception {
+        MockEndpoint mock = getMockEndpoint("mock:result");
+        mock.expectedMessageCount(2);
+        // should have file name header set
+        mock.allMessages().header(Exchange.FILE_NAME).isNotNull();
+        // and expect name to contain target/filename-consumer-XXX.txt
+        mock.message(0).header(Exchange.FILE_NAME).isEqualTo("target/filename-consumer-bye.txt");
+        mock.message(1).header(Exchange.FILE_NAME).isEqualTo("target/filename-consumer-hello.txt");
+
+        assertMockEndpointsSatisfied();
+    }
+
+    @Override
+    protected RouteBuilder createRouteBuilder() throws Exception {
+        return new RouteBuilder() {
+            @Override
+            public void configure() throws Exception {
+                from("file:target/filename-consumer?recursive=true&sortBy=file:name").to("mock:result");
+            }
+        };
+    }
+}
diff --git a/camel-core/src/test/java/org/apache/camel/component/file/stress/FileAsyncStressReadLockLockFileTest.java b/camel-core/src/test/java/org/apache/camel/component/file/stress/FileAsyncStressReadLockLockFileTest.java
index 39bae9a9202..711807b6f80 100644
--- a/camel-core/src/test/java/org/apache/camel/component/file/stress/FileAsyncStressReadLockLockFileTest.java
+++ b/camel-core/src/test/java/org/apache/camel/component/file/stress/FileAsyncStressReadLockLockFileTest.java
@@ -35,7 +35,7 @@ public class FileAsyncStressReadLockLockFileTest extends FileAsyncStressTest {
                 // leverage the fact that we can limit to max 50 files per poll
                 // this will result in polling again and potentially picking up files
                 // that already are in progress
-                from("file:target/filestress?maxMessagesPerPoll=50&readLock=lockFile")
+                from("file:target/filestress?maxMessagesPerPoll=50&readLock=lockFile").routeId("foo").noAutoStartup()
                     .threads(10)
                     .process(new Processor() {
                         public void process(Exchange exchange) throws Exception {
diff --git a/camel-core/src/test/java/org/apache/camel/component/file/stress/FileAsyncStressReadLockNoneTest.java b/camel-core/src/test/java/org/apache/camel/component/file/stress/FileAsyncStressReadLockNoneTest.java
index 87631c0c7a4..8e0259f95d4 100644
--- a/camel-core/src/test/java/org/apache/camel/component/file/stress/FileAsyncStressReadLockNoneTest.java
+++ b/camel-core/src/test/java/org/apache/camel/component/file/stress/FileAsyncStressReadLockNoneTest.java
@@ -35,7 +35,7 @@ public class FileAsyncStressReadLockNoneTest extends FileAsyncStressTest {
                 // leverage the fact that we can limit to max 50 files per poll
                 // this will result in polling again and potentially picking up files
                 // that already are in progress
-                from("file:target/filestress?maxMessagesPerPoll=50&readLock=none")
+                from("file:target/filestress?maxMessagesPerPoll=50&readLock=none").routeId("foo").noAutoStartup()
                     .threads(10)
                     .process(new Processor() {
                         public void process(Exchange exchange) throws Exception {
diff --git a/camel-core/src/test/java/org/apache/camel/component/file/stress/FileAsyncStressReadLockRenameTest.java b/camel-core/src/test/java/org/apache/camel/component/file/stress/FileAsyncStressReadLockRenameTest.java
index fd35b2c69e5..f2257566ecc 100644
--- a/camel-core/src/test/java/org/apache/camel/component/file/stress/FileAsyncStressReadLockRenameTest.java
+++ b/camel-core/src/test/java/org/apache/camel/component/file/stress/FileAsyncStressReadLockRenameTest.java
@@ -35,7 +35,7 @@ public class FileAsyncStressReadLockRenameTest extends FileAsyncStressTest {
                 // leverage the fact that we can limit to max 50 files per poll
                 // this will result in polling again and potentially picking up files
                 // that already are in progress
-                from("file:target/filestress?maxMessagesPerPoll=50&readLock=rename")
+                from("file:target/filestress?maxMessagesPerPoll=50&readLock=rename").routeId("foo").noAutoStartup()
                     .threads(10)
                     .process(new Processor() {
                         public void process(Exchange exchange) throws Exception {
diff --git a/camel-core/src/test/java/org/apache/camel/component/file/stress/FileAsyncStressTest.java b/camel-core/src/test/java/org/apache/camel/component/file/stress/FileAsyncStressTest.java
index 3719a94892d..d6537d579d3 100644
--- a/camel-core/src/test/java/org/apache/camel/component/file/stress/FileAsyncStressTest.java
+++ b/camel-core/src/test/java/org/apache/camel/component/file/stress/FileAsyncStressTest.java
@@ -41,6 +41,9 @@ public class FileAsyncStressTest extends ContextTestSupport {
     }
 
     public void testAsyncStress() throws Exception {
+        // start route when all the files have been written
+        context.startRoute("foo");
+
         MockEndpoint mock = getMockEndpoint("mock:result");
         mock.expectedMinimumMessageCount(100);
         mock.setResultWaitTime(20000);
@@ -56,7 +59,7 @@ public class FileAsyncStressTest extends ContextTestSupport {
                 // leverage the fact that we can limit to max 50 files per poll
                 // this will result in polling again and potentially picking up files
                 // that already are in progress
-                from("file:target/filestress?maxMessagesPerPoll=50")
+                from("file:target/filestress?maxMessagesPerPoll=50").routeId("foo").noAutoStartup()
                     .threads(10)
                     .process(new Processor() {
                         public void process(Exchange exchange) throws Exception {
diff --git a/components/camel-ftp/src/test/java/org/apache/camel/component/file/remote/FtpConsumerRelativeFileNameTest.java b/components/camel-ftp/src/test/java/org/apache/camel/component/file/remote/FtpConsumerRelativeFileNameTest.java
new file mode 100644
index 00000000000..93fc9dcd8f0
--- /dev/null
+++ b/components/camel-ftp/src/test/java/org/apache/camel/component/file/remote/FtpConsumerRelativeFileNameTest.java
@@ -0,0 +1,63 @@
+/**
+ * Licensed to the Apache Software Foundation (ASF) under one or more
+ * contributor license agreements.  See the NOTICE file distributed with
+ * this work for additional information regarding copyright ownership.
+ * The ASF licenses this file to You under the Apache License, Version 2.0
+ * (the "License"); you may not use this file except in compliance with
+ * the License.  You may obtain a copy of the License at
+ *
+ *      http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+package org.apache.camel.component.file.remote;
+
+import org.apache.camel.Exchange;
+import org.apache.camel.builder.RouteBuilder;
+import org.apache.camel.component.mock.MockEndpoint;
+import org.junit.Test;
+
+public class FtpConsumerRelativeFileNameTest extends FtpServerTestSupport {
+
+    private String getFtpUrl() {
+        return "ftp://admin@localhost:" + getPort() + "/target/filename-consumer?password=admin&recursive=true&sortBy=file:name";
+    }
+
+    @Override
+    public void setUp() throws Exception {
+        super.setUp();
+        sendFile(getFtpUrl(), "Hello World", "target/filename-consumer-hello.txt");
+        sendFile(getFtpUrl(), "Bye World", "target/filename-consumer-bye.txt");
+    }
+
+    @Override
+    protected RouteBuilder createRouteBuilder() throws Exception {
+        return new RouteBuilder() {
+            @Override
+            public void configure() throws Exception {
+                from(getFtpUrl()).to("mock:result");
+            }
+        };
+    }
+
+    @Test
+    public void testValidFilenameOnExchange() throws Exception {
+        MockEndpoint mock = getMockEndpoint("mock:result");
+        mock.expectedMessageCount(2);
+        // should have file name header set
+        mock.allMessages().header(Exchange.FILE_NAME).isNotNull();
+        // and expect name to contain target/filename-consumer-XXX.txt
+        mock.message(0).header(Exchange.FILE_NAME).isEqualTo("target/filename-consumer-bye.txt");
+        mock.message(1).header(Exchange.FILE_NAME).isEqualTo("target/filename-consumer-hello.txt");
+
+        assertMockEndpointsSatisfied();
+
+        // give time for ftp consumer to disconnect
+        Thread.sleep(2000);
+    }
+
+}
\ No newline at end of file
