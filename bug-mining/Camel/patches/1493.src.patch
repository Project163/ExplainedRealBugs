diff --git a/examples/camel-example-loan-broker/src/main/resources/META-INF/spring/queueCamelContext.xml b/examples/camel-example-loan-broker/src/main/resources/META-INF/spring/queueCamelContext.xml
index 717d19ae3ec..53cd4b18643 100644
--- a/examples/camel-example-loan-broker/src/main/resources/META-INF/spring/queueCamelContext.xml
+++ b/examples/camel-example-loan-broker/src/main/resources/META-INF/spring/queueCamelContext.xml
@@ -19,28 +19,19 @@
 <beans xmlns="http://www.springframework.org/schema/beans"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:camel="http://camel.apache.org/schema/spring"
-       xmlns:broker="http://activemq.apache.org/schema/core"
        xsi:schemaLocation="
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
-       http://camel.apache.org/schema/spring http://camel.apache.org/schema/spring/camel-spring.xsd
-       http://activemq.apache.org/schema/core http://activemq.apache.org/schema/core/activemq-core-5.5.0.xsd">
-    
-    <!-- lets configure the ActiveMQ JMS broker server to listen on TCP 51616 -->
-    <broker:broker useJmx="false" persistent="false" brokerName="localhost">
-        <broker:transportConnectors>
-            <broker:transportConnector name="tcp" uri="tcp://localhost:51616"/>
-        </broker:transportConnectors>
-    </broker:broker>
+       http://camel.apache.org/schema/spring http://camel.apache.org/schema/spring/camel-spring.xsd">
     
     <!-- lets configure the Camel ActiveMQ to use the ActiveMQ broker declared above -->
     <bean id="jms" class="org.apache.activemq.camel.component.ActiveMQComponent">
-        <property name="brokerURL" value="tcp://localhost:51616"/>
+        <property name="brokerURL" value="tcp://localhost:61616"/>
     </bean>
     
-    <bean id="loanBroker" class="org.apache.camel.loanbroker.queue.version.LoanBroker"/>
+    <bean id="queueLoanBroker" class="org.apache.camel.loanbroker.queue.version.LoanBroker"/>
     
-    <camel:camelContext id="myCamel">
-       <camel:routeBuilder ref="loanBroker"/>
+    <camel:camelContext id="queue">
+       <camel:routeBuilder ref="queueLoanBroker"/>
     </camel:camelContext>
 
 
diff --git a/examples/camel-example-loan-broker/src/main/resources/META-INF/spring/webServiceCamelContext.xml b/examples/camel-example-loan-broker/src/main/resources/META-INF/spring/webServiceCamelContext.xml
index b5af1764fda..8ac269862f7 100644
--- a/examples/camel-example-loan-broker/src/main/resources/META-INF/spring/webServiceCamelContext.xml
+++ b/examples/camel-example-loan-broker/src/main/resources/META-INF/spring/webServiceCamelContext.xml
@@ -24,6 +24,8 @@
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://camel.apache.org/schema/spring http://camel.apache.org/schema/spring/camel-spring.xsd
        http://cxf.apache.org/jaxws http://cxf.apache.org/schemas/jaxws.xsd">
+ 
+ <import resource="classpath:META-INF/cxf/cxf.xml"/>
 
  <jaxws:endpoint id="creditAgent"
     		implementor="org.apache.camel.loanbroker.webservice.version.credit.CreditAgency"
@@ -54,11 +56,11 @@
     		implementor="#bank3"
     		address="http://localhost:9003/bank3"/>
 
-  <camel:camelContext id="myCamel">
-     <camel:routeBuilder ref="loanBroker"/>
+  <camel:camelContext id="webService">
+     <camel:routeBuilder ref="webServiceLoanBroker"/>
   </camel:camelContext>
   
-  <bean id="loanBroker" class="org.apache.camel.loanbroker.webservice.version.LoanBroker"/>
+  <bean id="webServiceLoanBroker" class="org.apache.camel.loanbroker.webservice.version.LoanBroker"/>
    
 
 </beans>
diff --git a/examples/camel-example-loan-broker/src/test/java/org/apache/camel/loanbroker/queue/version/LoanBrokerServerTest.java b/examples/camel-example-loan-broker/src/test/java/org/apache/camel/loanbroker/queue/version/LoanBrokerQueueServerTest.java
similarity index 64%
rename from examples/camel-example-loan-broker/src/test/java/org/apache/camel/loanbroker/queue/version/LoanBrokerServerTest.java
rename to examples/camel-example-loan-broker/src/test/java/org/apache/camel/loanbroker/queue/version/LoanBrokerQueueServerTest.java
index 17314e2291e..ee13f457958 100644
--- a/examples/camel-example-loan-broker/src/test/java/org/apache/camel/loanbroker/queue/version/LoanBrokerServerTest.java
+++ b/examples/camel-example-loan-broker/src/test/java/org/apache/camel/loanbroker/queue/version/LoanBrokerQueueServerTest.java
@@ -22,21 +22,27 @@ import org.junit.Test;
 import org.springframework.context.support.AbstractApplicationContext;
 import org.springframework.context.support.ClassPathXmlApplicationContext;
 
-public class LoanBrokerServerTest extends TestSupport {
+public class LoanBrokerQueueServerTest extends TestSupport {
     
     @Test
     public void startLoanBroker() throws Exception {
         deleteDirectory("activemq-data");
-
-        AbstractApplicationContext applicationContext =
-            new ClassPathXmlApplicationContext(new String[]{"/META-INF/spring/queueCamelContext.xml"});
-
-        CamelContext camelContext = (CamelContext)applicationContext.getBean("myCamel");
-        assertNotNull("The camel context should not be null", camelContext);
-
-        Thread.sleep(2000);
-        camelContext.stop();
-        applicationContext.stop();        
+        
+        JmsBroker broker = new JmsBroker("tcp://localhost:61616");
+        broker.start();
+        try {
+            AbstractApplicationContext applicationContext =
+                new ClassPathXmlApplicationContext(new String[]{"/META-INF/spring/queueCamelContext.xml"});
+    
+            CamelContext camelContext = (CamelContext)applicationContext.getBean("queue");
+            assertNotNull("The camel context should not be null", camelContext);
+    
+            Thread.sleep(2000);
+            camelContext.stop();
+            applicationContext.stop(); 
+        } finally {
+            broker.stop();
+        }
     }
 
 }
diff --git a/examples/camel-example-loan-broker/src/test/java/org/apache/camel/loanbroker/queue/version/LoanBrokerTest.java b/examples/camel-example-loan-broker/src/test/java/org/apache/camel/loanbroker/queue/version/LoanBrokerQueueTest.java
similarity index 96%
rename from examples/camel-example-loan-broker/src/test/java/org/apache/camel/loanbroker/queue/version/LoanBrokerTest.java
rename to examples/camel-example-loan-broker/src/test/java/org/apache/camel/loanbroker/queue/version/LoanBrokerQueueTest.java
index e89d78b31e6..b5f70404ede 100644
--- a/examples/camel-example-loan-broker/src/test/java/org/apache/camel/loanbroker/queue/version/LoanBrokerTest.java
+++ b/examples/camel-example-loan-broker/src/test/java/org/apache/camel/loanbroker/queue/version/LoanBrokerQueueTest.java
@@ -34,10 +34,10 @@ import org.junit.After;
 import org.junit.Before;
 import org.junit.Test;
 
-public class LoanBrokerTest extends TestSupport {
-    private CamelContext camelContext;
-    private JmsBroker broker;
-    private ProducerTemplate template;
+public class LoanBrokerQueueTest extends TestSupport {
+    protected CamelContext camelContext;
+    protected JmsBroker broker;
+    protected ProducerTemplate template;
  
     @Before
     public void startServices() throws Exception {
diff --git a/examples/camel-example-loan-broker/src/test/java/org/apache/camel/loanbroker/webservice/version/LoanBrokerTest.java b/examples/camel-example-loan-broker/src/test/java/org/apache/camel/loanbroker/webservice/version/LoanBrokerWSTest.java
similarity index 98%
rename from examples/camel-example-loan-broker/src/test/java/org/apache/camel/loanbroker/webservice/version/LoanBrokerTest.java
rename to examples/camel-example-loan-broker/src/test/java/org/apache/camel/loanbroker/webservice/version/LoanBrokerWSTest.java
index 810e8bdef05..395365b8c3c 100644
--- a/examples/camel-example-loan-broker/src/test/java/org/apache/camel/loanbroker/webservice/version/LoanBrokerTest.java
+++ b/examples/camel-example-loan-broker/src/test/java/org/apache/camel/loanbroker/webservice/version/LoanBrokerWSTest.java
@@ -24,7 +24,7 @@ import org.junit.Test;
 import org.springframework.context.support.AbstractApplicationContext;
 import org.springframework.context.support.ClassPathXmlApplicationContext;
 
-public class LoanBrokerTest extends Assert {
+public class LoanBrokerWSTest extends Assert {
     AbstractApplicationContext applicationContext;
     
     @Before
