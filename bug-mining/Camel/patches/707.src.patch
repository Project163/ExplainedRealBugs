diff --git a/camel-core/src/main/java/org/apache/camel/converter/stream/CachedOutputStream.java b/camel-core/src/main/java/org/apache/camel/converter/stream/CachedOutputStream.java
index ec704462aba..f0e582ef2ec 100644
--- a/camel-core/src/main/java/org/apache/camel/converter/stream/CachedOutputStream.java
+++ b/camel-core/src/main/java/org/apache/camel/converter/stream/CachedOutputStream.java
@@ -115,32 +115,31 @@ public class CachedOutputStream extends OutputStream {
 
     public void write(byte[] b, int off, int len) throws IOException {
         this.totalLength += len;
-        if (inMemory && totalLength > threshold && currentStream instanceof ByteArrayOutputStream) {
+        if (threshold > 0 && inMemory && totalLength > threshold && currentStream instanceof ByteArrayOutputStream) {
             pageToFileStream();
         }
         currentStream.write(b, off, len);
-        flush();
     }
 
     public void write(byte[] b) throws IOException {
         this.totalLength += b.length;
-        if (inMemory && totalLength > threshold && currentStream instanceof ByteArrayOutputStream) {
+        if (threshold > 0 && inMemory && totalLength > threshold && currentStream instanceof ByteArrayOutputStream) {
             pageToFileStream();
         }
         currentStream.write(b);
-        flush();
     }
 
     public void write(int b) throws IOException {
         this.totalLength++;
-        if (inMemory && totalLength > threshold && currentStream instanceof ByteArrayOutputStream) {
+        if (threshold > 0 && inMemory && totalLength > threshold && currentStream instanceof ByteArrayOutputStream) {
             pageToFileStream();
         }
         currentStream.write(b);
-        flush();
     }
 
     public InputStream getInputStream() throws IOException {
+        flush();
+
         if (inMemory) {
             if (currentStream instanceof ByteArrayOutputStream) {
                 return new ByteArrayInputStream(((ByteArrayOutputStream) currentStream).toByteArray());
@@ -158,6 +157,8 @@ public class CachedOutputStream extends OutputStream {
 
 
     public StreamCache getStreamCache() throws IOException {
+        flush();
+
         if (inMemory) {
             if (currentStream instanceof ByteArrayOutputStream) {
                 return new InputStreamCache(((ByteArrayOutputStream) currentStream).toByteArray());
@@ -174,6 +175,8 @@ public class CachedOutputStream extends OutputStream {
     }
 
     private void pageToFileStream() throws IOException {
+        flush();
+
         ByteArrayOutputStream bout = (ByteArrayOutputStream)currentStream;
         if (outputDir == null) {
             tempFile = FileUtil.createTempFile("cos", ".tmp");
diff --git a/camel-core/src/main/java/org/apache/camel/util/FileUtil.java b/camel-core/src/main/java/org/apache/camel/util/FileUtil.java
index 972d373cd02..bb6b6faf56a 100644
--- a/camel-core/src/main/java/org/apache/camel/util/FileUtil.java
+++ b/camel-core/src/main/java/org/apache/camel/util/FileUtil.java
@@ -248,7 +248,7 @@ public final class FileUtil {
                                    + " to an existing directory");
         }
 
-        // why do we create another tmp folder
+        // create a sub folder with a random number
         Random ran = new Random();
         int x = ran.nextInt(1000000);
 
diff --git a/camel-core/src/test/java/org/apache/camel/converter/stream/CachedOutputStreamTest.java b/camel-core/src/test/java/org/apache/camel/converter/stream/CachedOutputStreamTest.java
index 5e8692b3cf3..c0ad0686cbf 100644
--- a/camel-core/src/test/java/org/apache/camel/converter/stream/CachedOutputStreamTest.java
+++ b/camel-core/src/test/java/org/apache/camel/converter/stream/CachedOutputStreamTest.java
@@ -134,4 +134,23 @@ public class CachedOutputStreamTest extends ContextTestSupport {
 
         exchange.getUnitOfWork().done(exchange);
     }
+
+    public void testCacheStreamToMemoryAsDiskIsdisabled() throws IOException {
+        // -1 disables disk based cache
+        context.getProperties().put(CachedOutputStream.THRESHOLD, "-1");
+
+        CachedOutputStream cos = new CachedOutputStream(exchange);
+        cos.write(TEST_STRING.getBytes("UTF-8"));
+
+        File file = new File("./target/cachedir");
+        String[] files = file.list();
+
+        assertEquals("we should have no temp file", files.length, 0);
+        StreamCache cache = cos.getStreamCache();
+        assertTrue("Should get the InputStreamCache", cache instanceof InputStreamCache);
+        String temp = IOConverter.toString((InputStream)cache);
+        assertEquals("Cached a wrong file", temp, TEST_STRING);
+
+        exchange.getUnitOfWork().done(exchange);
+    }
 }
