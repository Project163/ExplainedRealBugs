diff --git a/camel-core/src/test/java/org/apache/camel/builder/xml/XPathTest.java b/camel-core/src/test/java/org/apache/camel/builder/xml/XPathTest.java
index fe875e0730a..4daab49250e 100644
--- a/camel-core/src/test/java/org/apache/camel/builder/xml/XPathTest.java
+++ b/camel-core/src/test/java/org/apache/camel/builder/xml/XPathTest.java
@@ -56,19 +56,19 @@ public class XPathTest extends TestSupport {
         // we may not have Xalan on the classpath
         try {
             instance = Class.forName("org.apache.xalan.extensions.XPathFunctionResolverImpl").newInstance();
+
+            if (instance instanceof XPathFunctionResolver) {
+                XPathFunctionResolver functionResolver = (XPathFunctionResolver)instance;
+    
+                XPathBuilder builder = xpath("java:" + getClass().getName() + ".func(string(/header/value))").namespace("java", "http://xml.apache.org/xalan/java").functionResolver(functionResolver);
+    
+                String xml = "<header><value>12</value></header>";
+                Object value = assertExpression(builder, xml, "modified12");
+                log.debug("Evaluated xpath: " + builder.getText() + " on XML: " + xml + " result: " + value);
+            }
         } catch (Throwable e) {
             log.debug("Could not find Xalan on the classpath so ignoring this test case: " + e);
         }
-
-        if (instance instanceof XPathFunctionResolver) {
-            XPathFunctionResolver functionResolver = (XPathFunctionResolver)instance;
-
-            XPathBuilder builder = xpath("java:" + getClass().getName() + ".func(string(/header/value))").namespace("java", "http://xml.apache.org/xalan/java").functionResolver(functionResolver);
-
-            String xml = "<header><value>12</value></header>";
-            Object value = assertExpression(builder, xml, "modified12");
-            log.debug("Evaluated xpath: " + builder.getText() + " on XML: " + xml + " result: " + value);
-        }
     }
 
     public static String func(String s) {
