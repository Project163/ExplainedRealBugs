diff --git a/core/camel-base/src/main/java/org/apache/camel/impl/engine/DefaultPackageScanResourceResolver.java b/core/camel-base/src/main/java/org/apache/camel/impl/engine/DefaultPackageScanResourceResolver.java
index 61b28b97217..8ffb3184f34 100644
--- a/core/camel-base/src/main/java/org/apache/camel/impl/engine/DefaultPackageScanResourceResolver.java
+++ b/core/camel-base/src/main/java/org/apache/camel/impl/engine/DefaultPackageScanResourceResolver.java
@@ -62,7 +62,7 @@ public class DefaultPackageScanResourceResolver extends BasePackageScanResolver
             if ("file:".equals(scheme)) {
                 // file based scanning
                 root = root.substring(scheme.length());
-                findInFileSystem(root, answer, subPattern);
+                findInFileSystem(new File(root), answer, subPattern);
             } else {
                 if ("classpath:".equals(scheme)) {
                     root = root.substring(scheme.length());
@@ -79,13 +79,15 @@ public class DefaultPackageScanResourceResolver extends BasePackageScanResolver
         return answer;
     }
 
-    protected void findInFileSystem(String root, Set<InputStream> resources, String subPattern) {
-        File dir = new File(root);
+    protected void findInFileSystem(File dir, Set<InputStream> resources, String subPattern) {
         if (dir.exists() && dir.isDirectory()) {
             File[] files = dir.listFiles();
             if (files != null) {
                 for (File file : files) {
-                    if (file.isFile()) {
+                    if (file.isDirectory() && !file.getName().startsWith(".")) {
+                        // skip hidden directories
+                        findInFileSystem(file, resources, subPattern);
+                    } else if (file.isFile()) {
                         boolean match = PATH_MATCHER.match(subPattern, file.getName());
                         log.debug("Found resource: {} matching pattern: {} -> {}", file.getName(), subPattern, match);
                         if (match) {
diff --git a/core/camel-main/src/test/java/org/apache/camel/main/xml/MainXmlTest.java b/core/camel-main/src/test/java/org/apache/camel/main/xml/MainXmlTest.java
index 7d03132f6d1..8b3b3315c1a 100644
--- a/core/camel-main/src/test/java/org/apache/camel/main/xml/MainXmlTest.java
+++ b/core/camel-main/src/test/java/org/apache/camel/main/xml/MainXmlTest.java
@@ -36,6 +36,12 @@ public class MainXmlTest extends Assert {
         doTestMain("org/apache/camel/main/xml/camel-*.xml");
     }
 
+    @Test
+    public void testMainRoutesCollectorScanWildcardDirClasspathPath() throws Exception {
+        // will load XML from target/classes when testing
+        doTestMain("org/apache/camel/main/**/*.xml");
+    }
+
     @Test
     public void testMainRoutesCollectorScanClasspathPrefix() throws Exception {
         // will load XML from target/classes when testing
@@ -53,6 +59,11 @@ public class MainXmlTest extends Assert {
         doTestMain("file:src/test/resources/org/apache/camel/main/xml/camel-*.xml");
     }
 
+    @Test
+    public void testMainRoutesCollectorScanWildcardDirFilePath() throws Exception {
+        doTestMain("file:src/test/resources/**/*.xml");
+    }
+
     @Test
     public void testMainRoutesCollectorFile() throws Exception {
         doTestMain("file:src/test/resources/org/apache/camel/main/xml/camel-dummy.xml,file:src/test/resources/org/apache/camel/main/xml/camel-scan.xml,");
