diff --git a/camel-core/src/main/java/org/apache/camel/converter/stream/CachedOutputStream.java b/camel-core/src/main/java/org/apache/camel/converter/stream/CachedOutputStream.java
index 3ebcc4f4c19..b1765f0fe82 100644
--- a/camel-core/src/main/java/org/apache/camel/converter/stream/CachedOutputStream.java
+++ b/camel-core/src/main/java/org/apache/camel/converter/stream/CachedOutputStream.java
@@ -25,6 +25,8 @@ import java.io.FileOutputStream;
 import java.io.IOException;
 import java.io.InputStream;
 import java.io.OutputStream;
+import java.util.ArrayList;
+import java.util.List;
 
 import org.apache.camel.Exchange;
 import org.apache.camel.StreamCache;
@@ -51,6 +53,8 @@ public class CachedOutputStream extends OutputStream {
     private boolean inMemory = true;
     private int totalLength;
     private File tempFile;
+    
+    private List<FileInputStreamCache> fileInputStreamCaches = new ArrayList<FileInputStreamCache>(4);
 
     private long threshold = 64 * 1024;
     private File outputDir;
@@ -70,10 +74,13 @@ public class CachedOutputStream extends OutputStream {
             @Override
             public void onDone(Exchange exchange) {
                 try {
+                    // close the stream and FileInputStreamCache
+                    close();
+                    for (FileInputStreamCache cache : fileInputStreamCaches) {
+                        cache.close();
+                    }
                     // cleanup temporary file
                     if (tempFile != null) {
-                        // close the stream first and than delete the file
-                        close();
                         boolean deleted = tempFile.delete();
                         if (!deleted) {
                             LOG.warn("Cannot delete temporary cache file: " + tempFile);
@@ -149,7 +156,9 @@ public class CachedOutputStream extends OutputStream {
             }
         } else {
             try {
-                return new FileInputStreamCache(tempFile, this);
+                FileInputStreamCache answer = new FileInputStreamCache(tempFile, this);
+                fileInputStreamCaches.add(answer);
+                return answer;
             } catch (FileNotFoundException e) {
                 throw IOHelper.createIOException("Cached file " + tempFile + " not found", e);
             }
@@ -168,7 +177,9 @@ public class CachedOutputStream extends OutputStream {
             }
         } else {
             try {
-                return new FileInputStreamCache(tempFile, this);
+                FileInputStreamCache answer = new FileInputStreamCache(tempFile, this);
+                fileInputStreamCaches.add(answer);
+                return answer;
             } catch (FileNotFoundException e) {
                 throw IOHelper.createIOException("Cached file " + tempFile + " not found", e);
             }
diff --git a/camel-core/src/test/java/org/apache/camel/converter/stream/CachedOutputStreamTest.java b/camel-core/src/test/java/org/apache/camel/converter/stream/CachedOutputStreamTest.java
index 55f420aee6f..d7ef82cc85f 100644
--- a/camel-core/src/test/java/org/apache/camel/converter/stream/CachedOutputStreamTest.java
+++ b/camel-core/src/test/java/org/apache/camel/converter/stream/CachedOutputStreamTest.java
@@ -109,10 +109,7 @@ public class CachedOutputStreamTest extends ContextTestSupport {
         cache.reset();
         temp = toString((InputStream)cache);
         assertEquals("Cached a wrong file", temp, TEST_STRING);
-        // windows can't delet the file which is open , so we close the stream first
-        if (System.getProperty("os.name").startsWith("Windows")) {
-            ((InputStream)cache).close();
-        }
+        
         exchange.getUnitOfWork().done(exchange);
         ((InputStream)cache).close();
         
