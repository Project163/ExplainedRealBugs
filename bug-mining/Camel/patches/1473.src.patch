diff --git a/camel-core/src/main/java/org/apache/camel/component/file/GenericFileEndpoint.java b/camel-core/src/main/java/org/apache/camel/component/file/GenericFileEndpoint.java
index 6b61ef60140..55486b6e7b7 100644
--- a/camel-core/src/main/java/org/apache/camel/component/file/GenericFileEndpoint.java
+++ b/camel-core/src/main/java/org/apache/camel/component/file/GenericFileEndpoint.java
@@ -39,6 +39,7 @@ import org.apache.camel.spi.IdempotentRepository;
 import org.apache.camel.spi.Language;
 import org.apache.camel.util.FileUtil;
 import org.apache.camel.util.ObjectHelper;
+import org.apache.camel.util.ServiceHelper;
 import org.apache.camel.util.StringHelper;
 import org.slf4j.Logger;
 import org.slf4j.LoggerFactory;
@@ -720,4 +721,15 @@ public abstract class GenericFileEndpoint<T> extends ScheduledPollEndpoint {
         }
     }
 
+    @Override
+    protected void doStart() throws Exception {
+        ServiceHelper.startServices(inProgressRepository, idempotentRepository);
+        super.doStart();
+    }
+
+    @Override
+    protected void doStop() throws Exception {
+        super.doStop();
+        ServiceHelper.stopServices(inProgressRepository, idempotentRepository);
+    }
 }
diff --git a/camel-core/src/test/java/org/apache/camel/processor/FileIdempotentConsumerLoadStoreTest.java b/camel-core/src/test/java/org/apache/camel/processor/FileIdempotentConsumerLoadStoreTest.java
new file mode 100644
index 00000000000..c387365f53c
--- /dev/null
+++ b/camel-core/src/test/java/org/apache/camel/processor/FileIdempotentConsumerLoadStoreTest.java
@@ -0,0 +1,105 @@
+/**
+ * Licensed to the Apache Software Foundation (ASF) under one or more
+ * contributor license agreements.  See the NOTICE file distributed with
+ * this work for additional information regarding copyright ownership.
+ * The ASF licenses this file to You under the Apache License, Version 2.0
+ * (the "License"); you may not use this file except in compliance with
+ * the License.  You may obtain a copy of the License at
+ *
+ *      http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+package org.apache.camel.processor;
+
+import java.io.File;
+import java.io.FileOutputStream;
+
+import org.apache.camel.ContextTestSupport;
+import org.apache.camel.Endpoint;
+import org.apache.camel.Exchange;
+import org.apache.camel.Message;
+import org.apache.camel.Processor;
+import org.apache.camel.builder.RouteBuilder;
+import org.apache.camel.component.mock.MockEndpoint;
+import org.apache.camel.processor.idempotent.FileIdempotentRepository;
+import org.apache.camel.spi.IdempotentRepository;
+
+/**
+ * @version 
+ */
+public class FileIdempotentConsumerLoadStoreTest extends ContextTestSupport {
+    protected Endpoint startEndpoint;
+    protected MockEndpoint resultEndpoint;
+    private File store = new File("target/idempotentfilestore.dat");
+    private IdempotentRepository<String> repo;
+
+    public void testLoadStore() throws Exception {
+        assertFalse(repo.contains("1"));
+        assertFalse(repo.contains("2"));
+        assertFalse(repo.contains("3"));
+        assertTrue(repo.contains("4"));
+
+        resultEndpoint.expectedBodiesReceived("one", "two", "three");
+
+        sendMessage("1", "one");
+        sendMessage("2", "two");
+        sendMessage("1", "one");
+        sendMessage("2", "two");
+        sendMessage("4", "four");
+        sendMessage("1", "one");
+        sendMessage("3", "three");
+
+        resultEndpoint.assertIsSatisfied();
+
+        assertTrue(repo.contains("1"));
+        assertTrue(repo.contains("2"));
+        assertTrue(repo.contains("3"));
+        assertTrue(repo.contains("4"));
+    }
+
+    protected void sendMessage(final Object messageId, final Object body) {
+        template.send(startEndpoint, new Processor() {
+            public void process(Exchange exchange) {
+                // now lets fire in a message
+                Message in = exchange.getIn();
+                in.setBody(body);
+                in.setHeader("messageId", messageId);
+            }
+        });
+    }
+
+    @Override
+    protected void setUp() throws Exception {
+        // delete file store before testing
+        if (store.exists()) {
+            store.delete();
+        }
+
+        // insert existing to store
+        FileOutputStream fos = new FileOutputStream(store);
+        fos.write("4\n".getBytes());
+        fos.close();
+
+        repo = FileIdempotentRepository.fileIdempotentRepository(store);
+
+        super.setUp();
+
+        startEndpoint = resolveMandatoryEndpoint("direct:start");
+        resultEndpoint = getMockEndpoint("mock:result");
+    }
+
+    protected RouteBuilder createRouteBuilder() {
+        return new RouteBuilder() {
+            public void configure() {
+                from("direct:start")
+                    .idempotentConsumer(header("messageId"), repo)
+                    .to("mock:result");
+            }
+        };
+    }
+}
\ No newline at end of file
diff --git a/components/camel-spring/src/test/java/org/apache/camel/spring/processor/idempotent/FileConsumerIdempotentLoadStoreTest.java b/components/camel-spring/src/test/java/org/apache/camel/spring/processor/idempotent/FileConsumerIdempotentLoadStoreTest.java
new file mode 100644
index 00000000000..6d324b0ae52
--- /dev/null
+++ b/components/camel-spring/src/test/java/org/apache/camel/spring/processor/idempotent/FileConsumerIdempotentLoadStoreTest.java
@@ -0,0 +1,82 @@
+/**
+ * Licensed to the Apache Software Foundation (ASF) under one or more
+ * contributor license agreements.  See the NOTICE file distributed with
+ * this work for additional information regarding copyright ownership.
+ * The ASF licenses this file to You under the Apache License, Version 2.0
+ * (the "License"); you may not use this file except in compliance with
+ * the License.  You may obtain a copy of the License at
+ *
+ *      http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+package org.apache.camel.spring.processor.idempotent;
+
+import java.io.File;
+import java.io.FileOutputStream;
+
+import org.apache.camel.CamelContext;
+import org.apache.camel.ContextTestSupport;
+import org.apache.camel.Exchange;
+import org.apache.camel.component.mock.MockEndpoint;
+import org.apache.camel.spi.IdempotentRepository;
+import org.apache.camel.util.FileUtil;
+
+import static org.apache.camel.spring.processor.SpringTestHelper.createSpringCamelContext;
+
+public class FileConsumerIdempotentLoadStoreTest extends ContextTestSupport {
+
+    private IdempotentRepository<String> repo;
+
+    protected CamelContext createCamelContext() throws Exception {
+        return createSpringCamelContext(this, "org/apache/camel/spring/processor/idempotent/fileConsumerIdempotentTest.xml");
+    }
+
+    @SuppressWarnings("unchecked")
+    @Override
+    protected void setUp() throws Exception {
+        deleteDirectory("target/fileidempotent");
+        createDirectory("target/fileidempotent");
+
+        File file = new File("target/fileidempotent/.filestore.dat");
+        FileOutputStream fos = new FileOutputStream(file);
+
+        // insert existing name to the file repo, so we should skip this file
+        String name = FileUtil.normalizePath(new File("target/fileidempotent/report.txt").getAbsolutePath());
+        fos.write(name.getBytes());
+        fos.write("\n".getBytes());
+
+        fos.close();
+
+        super.setUp();
+
+        // add a file to the repo
+        repo = context.getRegistry().lookup("fileStore", IdempotentRepository.class);
+    }
+
+    public void testIdempotentLoad() throws Exception {
+        // send two files (report.txt exists already in idempotent repo)
+        template.sendBodyAndHeader("file://target/fileidempotent/", "Hello World", Exchange.FILE_NAME, "report.txt");
+        template.sendBodyAndHeader("file://target/fileidempotent/", "Bye World", Exchange.FILE_NAME, "report2.txt");
+
+        // consume the file the first time
+        MockEndpoint mock = getMockEndpoint("mock:result");
+        mock.expectedBodiesReceived("Bye World");
+
+        assertMockEndpointsSatisfied();
+        // wait for the exchange to be done, as it only append to idempotent repo after success
+        oneExchangeDone.matchesMockWaitTime();
+
+        String name = FileUtil.normalizePath(new File("target/fileidempotent/report.txt").getAbsolutePath());
+        assertTrue("Should contain file: " + name, repo.contains(name));
+
+        String name2 = FileUtil.normalizePath(new File("target/fileidempotent/report2.txt").getAbsolutePath());
+        assertTrue("Should contain file: " + name2, repo.contains(name2));
+    }
+
+}
+
