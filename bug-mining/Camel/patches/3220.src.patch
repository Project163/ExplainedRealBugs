diff --git a/components/camel-hdfs2/pom.xml b/components/camel-hdfs2/pom.xml
index a2f66057aa0..b45740967d9 100644
--- a/components/camel-hdfs2/pom.xml
+++ b/components/camel-hdfs2/pom.xml
@@ -46,6 +46,9 @@
       org.apache.hadoop.hdfs.protocol.proto,
       org.apache.hadoop.hdfs.protocol.datatransfer
     </camel.osgi.import.additional>
+    <camel.osgi.activator>
+      org.apache.camel.component.hdfs2.HdfsActivator
+    </camel.osgi.activator>
   </properties>
 
   <dependencies>
@@ -127,6 +130,13 @@
       <scope>test</scope>
     </dependency>
 
+    <dependency>
+      <groupId>org.osgi</groupId>
+      <artifactId>org.osgi.core</artifactId>
+      <scope>provided</scope>
+      <optional>true</optional>
+    </dependency>
+
   </dependencies>
 
     <!-- skip tests on Windows due CAMEL-8445 -->
diff --git a/components/camel-hdfs2/src/main/java/org/apache/camel/component/hdfs2/HdfsActivator.java b/components/camel-hdfs2/src/main/java/org/apache/camel/component/hdfs2/HdfsActivator.java
new file mode 100644
index 00000000000..dafaa08ffd4
--- /dev/null
+++ b/components/camel-hdfs2/src/main/java/org/apache/camel/component/hdfs2/HdfsActivator.java
@@ -0,0 +1,51 @@
+/**
+ * Licensed to the Apache Software Foundation (ASF) under one or more
+ * contributor license agreements.  See the NOTICE file distributed with
+ * this work for additional information regarding copyright ownership.
+ * The ASF licenses this file to You under the Apache License, Version 2.0
+ * (the "License"); you may not use this file except in compliance with
+ * the License.  You may obtain a copy of the License at
+ *
+ *      http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+package org.apache.camel.component.hdfs2;
+
+import org.apache.hadoop.util.ShutdownHookManager;
+import org.osgi.framework.BundleActivator;
+import org.osgi.framework.BundleContext;
+
+public class HdfsActivator implements BundleActivator {
+
+    @Override
+    public void start(BundleContext context) throws Exception {
+    }
+
+    @Override
+    public void stop(BundleContext context) throws Exception {
+        // There's problem inside OSGi when framwork is being shutdown
+        // hadoop.fs code registers some JVM shutdown hooks throughout the code and this ordered
+        // list of hooks is run in shutdown thread.
+        // At that time bundle class loader / bundle wiring is no longer valid (bundle is stopped)
+        // so ShutdownHookManager can't load additional classes. But there are some inner classes
+        // loaded when iterating over registered hadoop shutdown hooks.
+        // Let's explicitely load these inner classes when bundle is stopped, as there's last chance
+        // to use valid bundle class loader.
+        // This is based on the knowledge of what's contained in SMX bundle
+        // org.apache.servicemix.bundles.hadoop-client-*.jar
+        // the above is just a warning that hadopp may have some quirks when running inside OSGi
+        ClassLoader hadoopCl = ShutdownHookManager.class.getClassLoader();
+        if (hadoopCl != null) {
+            String shm = ShutdownHookManager.class.getName();
+            hadoopCl.loadClass(shm + "$1");
+            hadoopCl.loadClass(shm + "$2");
+            hadoopCl.loadClass(shm + "$HookEntry");
+        }
+    }
+
+}
