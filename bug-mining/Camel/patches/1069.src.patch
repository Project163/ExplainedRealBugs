diff --git a/camel-core/src/main/java/org/apache/camel/model/FromDefinition.java b/camel-core/src/main/java/org/apache/camel/model/FromDefinition.java
index 65f7aedb24a..8d551222ddb 100644
--- a/camel-core/src/main/java/org/apache/camel/model/FromDefinition.java
+++ b/camel-core/src/main/java/org/apache/camel/model/FromDefinition.java
@@ -119,7 +119,7 @@ public class FromDefinition extends OptionalIdentifiedDefinition<FromDefinition>
      * Returns the endpoint URI or the name of the reference to it
      */
     public Object getUriOrRef() {
-        if (ObjectHelper.isEmpty(uri)) {
+        if (ObjectHelper.isNotEmpty(uri)) {
             return uri;
         } else if (endpoint != null) {
             return endpoint.getEndpointUri();
diff --git a/camel-core/src/main/java/org/apache/camel/model/SendDefinition.java b/camel-core/src/main/java/org/apache/camel/model/SendDefinition.java
index 74be5db74b7..4aeb059ce40 100644
--- a/camel-core/src/main/java/org/apache/camel/model/SendDefinition.java
+++ b/camel-core/src/main/java/org/apache/camel/model/SendDefinition.java
@@ -105,7 +105,7 @@ public abstract class SendDefinition<Type extends ProcessorDefinition<Type>> ext
      */
     public Object getUriOrRef() {
         String uri = getUri();
-        if (ObjectHelper.isEmpty(uri)) {
+        if (ObjectHelper.isNotEmpty(uri)) {
             return uri;
         } else if (endpoint != null) {
             return endpoint.getEndpointUri();
diff --git a/camel-core/src/main/java/org/apache/camel/view/GraphSupport.java b/camel-core/src/main/java/org/apache/camel/view/GraphSupport.java
index 3fceb626c4b..f30c0f4aa57 100644
--- a/camel-core/src/main/java/org/apache/camel/view/GraphSupport.java
+++ b/camel-core/src/main/java/org/apache/camel/view/GraphSupport.java
@@ -67,7 +67,10 @@ public class GraphSupport {
             ToDefinition toType = (ToDefinition) node;
             key = toType.getUriOrRef();
         }
-        NodeData answer = nodeMap.get(key);
+        NodeData answer = null;
+        if (key != null) {
+            answer = nodeMap.get(key);
+        }
         if (answer == null) {
             String id = "node" + (nodeMap.size() + 1);
             answer = new NodeData(id, node, imagePrefix);
