diff --git a/components/camel-websocket/pom.xml b/components/camel-websocket/pom.xml
index 954115da346..eb09fa7d508 100644
--- a/components/camel-websocket/pom.xml
+++ b/components/camel-websocket/pom.xml
@@ -52,24 +52,34 @@
         </dependency>
         <!-- Jetty -->
         <dependency>
-            <groupId>org.eclipse.jetty</groupId>
-            <artifactId>jetty-websocket</artifactId>
-            <version>${jetty8-version}</version>
+            <groupId>org.eclipse.jetty.websocket</groupId>
+            <artifactId>websocket-server</artifactId>
+            <version>${jetty9-version}</version>
+        </dependency>
+        <dependency>
+            <groupId>org.eclipse.jetty.websocket</groupId>
+            <artifactId>websocket-client</artifactId>
+            <version>${jetty9-version}</version>
+        </dependency>
+        <dependency>
+            <groupId>org.eclipse.jetty.websocket</groupId>
+            <artifactId>websocket-api</artifactId>
+            <version>${jetty9-version}</version>
         </dependency>
         <dependency>
             <groupId>org.eclipse.jetty</groupId>
             <artifactId>jetty-servlet</artifactId>
-            <version>${jetty8-version}</version>
+            <version>${jetty9-version}</version>
         </dependency>
         <dependency>
             <groupId>org.eclipse.jetty</groupId>
             <artifactId>jetty-servlets</artifactId>
-            <version>${jetty8-version}</version>
+            <version>${jetty9-version}</version>
         </dependency>
         <dependency>
             <groupId>org.eclipse.jetty</groupId>
             <artifactId>jetty-jmx</artifactId>
-            <version>${jetty8-version}</version>
+            <version>${jetty9-version}</version>
         </dependency>
         
         <!-- test dependencies -->
diff --git a/components/camel-websocket/src/main/java/org/apache/camel/component/websocket/DefaultWebsocket.java b/components/camel-websocket/src/main/java/org/apache/camel/component/websocket/DefaultWebsocket.java
index 60dbec31d19..8cf91a1af11 100644
--- a/components/camel-websocket/src/main/java/org/apache/camel/component/websocket/DefaultWebsocket.java
+++ b/components/camel-websocket/src/main/java/org/apache/camel/component/websocket/DefaultWebsocket.java
@@ -19,19 +19,22 @@ package org.apache.camel.component.websocket;
 import java.io.Serializable;
 import java.util.UUID;
 
-import org.eclipse.jetty.websocket.WebSocket;
-import org.eclipse.jetty.websocket.WebSocket.OnBinaryMessage;
-import org.eclipse.jetty.websocket.WebSocket.OnTextMessage;
+import org.eclipse.jetty.websocket.api.Session;
+import org.eclipse.jetty.websocket.api.annotations.OnWebSocketClose;
+import org.eclipse.jetty.websocket.api.annotations.OnWebSocketConnect;
+import org.eclipse.jetty.websocket.api.annotations.OnWebSocketMessage;
+import org.eclipse.jetty.websocket.api.annotations.WebSocket;
 import org.slf4j.Logger;
 import org.slf4j.LoggerFactory;
 
-public class DefaultWebsocket implements WebSocket, OnTextMessage, OnBinaryMessage, Serializable {
+@WebSocket
+public class DefaultWebsocket implements Serializable {
     private static final long serialVersionUID = 1L;
     private static final Logger LOG = LoggerFactory.getLogger(DefaultWebsocket.class);
 
     private final WebsocketConsumer consumer;
     private final NodeSynchronization sync;
-    private Connection connection;
+    private Session session;
     private String connectionKey;
 
     public DefaultWebsocket(NodeSynchronization sync, WebsocketConsumer consumer) {
@@ -39,21 +42,21 @@ public class DefaultWebsocket implements WebSocket, OnTextMessage, OnBinaryMessa
         this.consumer = consumer;
     }
 
-    @Override
+    @OnWebSocketClose
     public void onClose(int closeCode, String message) {
         LOG.trace("onClose {} {}", closeCode, message);
         sync.removeSocket(this);
     }
 
-    @Override
-    public void onOpen(Connection connection) {
-        LOG.trace("onOpen {}", connection);
-        this.connection = connection;
+    @OnWebSocketConnect
+    public void onConnect(Session session) {
+        LOG.trace("onConnect {}", session);
+        this.session = session;
         this.connectionKey = UUID.randomUUID().toString();
         sync.addSocket(this);
     }
 
-    @Override
+    @OnWebSocketMessage
     public void onMessage(String message) {
         LOG.debug("onMessage: {}", message);
         if (this.consumer != null) {
@@ -64,7 +67,7 @@ public class DefaultWebsocket implements WebSocket, OnTextMessage, OnBinaryMessa
     }
 
 
-    @Override
+    @OnWebSocketMessage
     public void onMessage(byte[] data, int offset, int length) {
         LOG.debug("onMessage: byte[]");
         if (this.consumer != null) {
@@ -76,12 +79,12 @@ public class DefaultWebsocket implements WebSocket, OnTextMessage, OnBinaryMessa
         }
     }
 
-    public Connection getConnection() {
-        return connection;
+    public Session getSession() {
+        return session;
     }
 
-    public void setConnection(Connection connection) {
-        this.connection = connection;
+    public void setSession(Session session) {
+        this.session = session;
     }
 
     public String getConnectionKey() {
diff --git a/components/camel-websocket/src/main/java/org/apache/camel/component/websocket/WebsocketComponent.java b/components/camel-websocket/src/main/java/org/apache/camel/component/websocket/WebsocketComponent.java
index dee57b06574..71c4191a529 100644
--- a/components/camel-websocket/src/main/java/org/apache/camel/component/websocket/WebsocketComponent.java
+++ b/components/camel-websocket/src/main/java/org/apache/camel/component/websocket/WebsocketComponent.java
@@ -16,6 +16,7 @@
  */
 package org.apache.camel.component.websocket;
 
+import java.lang.management.ManagementFactory;
 import java.lang.reflect.InvocationTargetException;
 import java.lang.reflect.Method;
 import java.net.URL;
@@ -23,36 +24,33 @@ import java.util.EnumSet;
 import java.util.HashMap;
 import java.util.List;
 import java.util.Map;
-import javax.management.MBeanServer;
 import javax.servlet.DispatcherType;
 
 import org.apache.camel.Endpoint;
 import org.apache.camel.RuntimeCamelException;
 import org.apache.camel.impl.UriEndpointComponent;
-import org.apache.camel.spi.ManagementAgent;
-import org.apache.camel.spi.ManagementStrategy;
 import org.apache.camel.util.ObjectHelper;
 import org.apache.camel.util.jsse.SSLContextParameters;
-import org.eclipse.jetty.http.ssl.SslContextFactory;
 import org.eclipse.jetty.jmx.MBeanContainer;
 import org.eclipse.jetty.server.Connector;
 import org.eclipse.jetty.server.Handler;
+import org.eclipse.jetty.server.HttpConfiguration;
+import org.eclipse.jetty.server.HttpConnectionFactory;
 import org.eclipse.jetty.server.Server;
+import org.eclipse.jetty.server.ServerConnector;
 import org.eclipse.jetty.server.SessionManager;
 import org.eclipse.jetty.server.handler.ContextHandlerCollection;
 import org.eclipse.jetty.server.handler.HandlerCollection;
 import org.eclipse.jetty.server.handler.HandlerWrapper;
-import org.eclipse.jetty.server.nio.SelectChannelConnector;
 import org.eclipse.jetty.server.session.HashSessionManager;
 import org.eclipse.jetty.server.session.SessionHandler;
-import org.eclipse.jetty.server.ssl.SslConnector;
-import org.eclipse.jetty.server.ssl.SslSelectChannelConnector;
 import org.eclipse.jetty.servlet.DefaultServlet;
 import org.eclipse.jetty.servlet.FilterHolder;
 import org.eclipse.jetty.servlet.ServletContextHandler;
 import org.eclipse.jetty.servlet.ServletHolder;
 import org.eclipse.jetty.servlets.CrossOriginFilter;
 import org.eclipse.jetty.util.resource.Resource;
+import org.eclipse.jetty.util.ssl.SslContextFactory;
 import org.eclipse.jetty.util.thread.QueuedThreadPool;
 import org.eclipse.jetty.util.thread.ThreadPool;
 import org.slf4j.Logger;
@@ -88,12 +86,12 @@ public class WebsocketComponent extends UriEndpointComponent {
 
     class ConnectorRef {
         Server server;
-        Connector connector;
+        ServerConnector connector;
         WebsocketComponentServlet servlet;
         MemoryWebsocketStore memoryStore;
         int refCount;
 
-        public ConnectorRef(Server server, Connector connector, WebsocketComponentServlet servlet, MemoryWebsocketStore memoryStore) {
+        public ConnectorRef(Server server, ServerConnector connector, WebsocketComponentServlet servlet, MemoryWebsocketStore memoryStore) {
             this.server = server;
             this.connector = connector;
             this.servlet = servlet;
@@ -136,11 +134,16 @@ public class WebsocketComponent extends UriEndpointComponent {
         synchronized (CONNECTORS) {
             ConnectorRef connectorRef = CONNECTORS.get(connectorKey);
             if (connectorRef == null) {
-                Connector connector;
+                ServerConnector connector;
+                // Create Server and add connector
+                server = createServer();
+                if (endpoint.isEnableJmx()) {
+                    enableJmx(server);
+                }
                 if (endpoint.getSslContextParameters() != null) {
-                    connector = getSslSocketConnector(endpoint.getSslContextParameters());
+                    connector = getSslSocketConnector(server, endpoint.getSslContextParameters());
                 } else {
-                    connector = new SelectChannelConnector();
+                    connector = new ServerConnector(server);
                 }
 
                 if (endpoint.getPort() != null) {
@@ -155,11 +158,6 @@ public class WebsocketComponent extends UriEndpointComponent {
                     connector.setHost(host);
                 }
 
-                // Create Server and add connector
-                server = createServer();
-                if (endpoint.isEnableJmx()) {
-                    enableJmx(server);
-                }
                 server.addConnector(connector);
                 LOG.trace("Jetty Connector added: {}", connector.getName());
 
@@ -246,8 +244,8 @@ public class WebsocketComponent extends UriEndpointComponent {
                     // Camel controls the lifecycle of these entities so remove the
                     // registered MBeans when Camel is done with the managed objects.
                     if (mbContainer != null) {
-                        mbContainer.removeBean(connectorRef.server);
-                        mbContainer.removeBean(connectorRef.connector);
+                        mbContainer.beanRemoved(null, connectorRef.server);
+                        mbContainer.beanRemoved(null,connectorRef.connector);
                     }
                 }
                 if (prodcon instanceof WebsocketConsumer) {
@@ -263,20 +261,7 @@ public class WebsocketComponent extends UriEndpointComponent {
     public synchronized MBeanContainer getMbContainer() {
         // If null, provide the default implementation.
         if (mbContainer == null) {
-            MBeanServer mbs = null;
-
-            final ManagementStrategy mStrategy = this.getCamelContext().getManagementStrategy();
-            final ManagementAgent mAgent = mStrategy.getManagementAgent();
-            if (mAgent != null) {
-                mbs = mAgent.getMBeanServer();
-            }
-
-            if (mbs != null) {
-                mbContainer = new MBeanContainer(mbs);
-                startMbContainer();
-            } else {
-                LOG.warn("JMX disabled in CamelContext. Jetty JMX extensions will remain disabled.");
-            }
+            mbContainer=new MBeanContainer(ManagementFactory.getPlatformMBeanServer());
         }
 
         return this.mbContainer;
@@ -354,9 +339,7 @@ public class WebsocketComponent extends UriEndpointComponent {
     }
 
     protected Server createServer() throws Exception {
-        Server server = new Server();
-        ContextHandlerCollection collection = new ContextHandlerCollection();
-        server.setHandler(collection);
+        Server server = null;
 
         // configure thread pool if min/max given
         if (minThreads != null || maxThreads != null) {
@@ -377,11 +360,15 @@ public class WebsocketComponent extends UriEndpointComponent {
             } catch (Exception e) {
                 throw new RuntimeCamelException("Error starting JettyWebSocketServer thread pool: " + qtp, e);
             }
-            server.setThreadPool(qtp);
+            server = new Server(qtp);
+            ContextHandlerCollection collection = new ContextHandlerCollection();
+            server.setHandler(collection);
         }
 
         if (getThreadPool() != null) {
-            server.setThreadPool(getThreadPool());
+            server = new Server(getThreadPool());
+            ContextHandlerCollection collection = new ContextHandlerCollection();
+            server.setHandler(collection);
         }
 
         return server;
@@ -425,7 +412,8 @@ public class WebsocketComponent extends UriEndpointComponent {
 
     protected Server createStaticResourcesServer(ServletContextHandler context, String host, int port, String home) throws Exception {
         Server server = new Server();
-        Connector connector = new SelectChannelConnector();
+        HttpConfiguration http_config = new HttpConfiguration();
+        ServerConnector connector = new ServerConnector(server, new HttpConnectionFactory(http_config));
         connector.setHost(host);
         connector.setPort(port);
         server.addConnector(connector);
@@ -467,7 +455,7 @@ public class WebsocketComponent extends UriEndpointComponent {
 
     protected ServletContextHandler createContext(Server server, Connector connector, List<Handler> handlers) throws Exception {
         ServletContextHandler context = new ServletContextHandler(server, "/", ServletContextHandler.NO_SECURITY | ServletContextHandler.NO_SESSIONS);
-        context.setConnectorNames(new String[]{connector.getName()});
+        server.addConnector(connector);
 
         if (handlers != null && !handlers.isEmpty()) {
             for (Handler handler : handlers) {
@@ -486,24 +474,6 @@ public class WebsocketComponent extends UriEndpointComponent {
         return context;
     }
 
-    /**
-     * Starts {@link #mbContainer} and registers the container with itself as a managed bean
-     * logging an error if there is a problem starting the container.
-     * Does nothing if {@link #mbContainer} is {@code null}.
-     */
-    protected void startMbContainer() {
-        if (mbContainer != null && !mbContainer.isStarted()) {
-            try {
-                mbContainer.start();
-                // Publish the container itself for consistency with
-                // traditional embedded Jetty configurations.
-                mbContainer.addBean(mbContainer);
-            } catch (Throwable e) {
-                LOG.warn("Could not start JettyWebSocket MBeanContainer. Jetty JMX extensions will remain disabled.", e);
-            }
-        }
-    }
-
     private void enableSessionSupport(Server server, String connectorKey) throws Exception {
         ServletContextHandler context = server.getChildHandlerByClass(ServletContextHandler.class);
         if (context.getSessionHandler() == null) {
@@ -516,21 +486,20 @@ public class WebsocketComponent extends UriEndpointComponent {
         }
     }
 
-    private SslConnector getSslSocketConnector(SSLContextParameters sslContextParameters) throws Exception {
-        SslSelectChannelConnector sslSocketConnector = null;
+    private ServerConnector getSslSocketConnector(Server server, SSLContextParameters sslContextParameters) throws Exception {
+        ServerConnector sslSocketConnector = null;
         if (sslContextParameters != null) {
             SslContextFactory sslContextFactory = new WebSocketComponentSslContextFactory();
             sslContextFactory.setSslContext(sslContextParameters.createSSLContext());
-            sslSocketConnector = new SslSelectChannelConnector(sslContextFactory);
+            sslSocketConnector = new ServerConnector(server, sslContextFactory);
         } else {
-            sslSocketConnector = new SslSelectChannelConnector();
-            // with default null values, jetty ssl system properties
-            // and console will be read by jetty implementation
-            sslSocketConnector.getSslContextFactory().setKeyManagerPassword(sslPassword);
-            sslSocketConnector.getSslContextFactory().setKeyStorePassword(sslKeyPassword);
+            SslContextFactory sslContextFactory = new SslContextFactory();
+            sslContextFactory.setKeyStorePassword(sslKeyPassword);
+            sslContextFactory.setKeyManagerPassword(sslPassword);
             if (sslKeystore != null) {
-                sslSocketConnector.getSslContextFactory().setKeyStorePath(sslKeystore);
+            	sslContextFactory.setKeyStorePath(sslKeystore);
             }
+            sslSocketConnector = new ServerConnector(server, sslContextFactory);
 
         }
         return sslSocketConnector;
@@ -550,12 +519,6 @@ public class WebsocketComponent extends UriEndpointComponent {
                 return true;
             }
         }
-
-        // This method is for Jetty 7.5.x
-        @Override
-        public void checkKeyStore() {
-            // here we don't check the SslContext as it is already created
-        }
     }
 
     private static boolean checkSSLContextFactoryConfig(Object instance) {
@@ -615,7 +578,7 @@ public class WebsocketComponent extends UriEndpointComponent {
         MBeanContainer containerToRegister = getMbContainer();
         if (containerToRegister != null) {
             LOG.info("Jetty JMX Extensions is enabled");
-            server.getContainer().addEventListener(containerToRegister);
+            server.addEventListener(containerToRegister);
             // Since we may have many Servers running, don't tie the MBeanContainer
             // to a Server lifecycle or we end up closing it while it is still in use.
             //server.addBean(mbContainer);
@@ -798,7 +761,7 @@ public class WebsocketComponent extends UriEndpointComponent {
             ServletContextHandler context = new ServletContextHandler(ServletContextHandler.SESSIONS);
             staticResourcesServer = createStaticResourcesServer(context, host, port, staticResources);
             staticResourcesServer.start();
-            Connector connector = staticResourcesServer.getConnectors()[0];
+            ServerConnector connector = (ServerConnector) staticResourcesServer.getConnectors()[0];
 
             // must add static resource server to CONNECTORS in case the websocket producers/consumers
             // uses the same port number, and therefore we must be part of this
diff --git a/components/camel-websocket/src/main/java/org/apache/camel/component/websocket/WebsocketComponentServlet.java b/components/camel-websocket/src/main/java/org/apache/camel/component/websocket/WebsocketComponentServlet.java
index 078c61a867c..91173b554bd 100644
--- a/components/camel-websocket/src/main/java/org/apache/camel/component/websocket/WebsocketComponentServlet.java
+++ b/components/camel-websocket/src/main/java/org/apache/camel/component/websocket/WebsocketComponentServlet.java
@@ -21,8 +21,9 @@ import java.util.concurrent.ConcurrentHashMap;
 import java.util.concurrent.ConcurrentMap;
 import javax.servlet.http.HttpServletRequest;
 
-import org.eclipse.jetty.websocket.WebSocket;
-import org.eclipse.jetty.websocket.WebSocketServlet;
+import org.eclipse.jetty.websocket.api.annotations.WebSocket;
+import org.eclipse.jetty.websocket.servlet.WebSocketServlet;
+import org.eclipse.jetty.websocket.servlet.WebSocketServletFactory;
 import org.slf4j.Logger;
 import org.slf4j.LoggerFactory;
 
@@ -59,7 +60,6 @@ public class WebsocketComponentServlet extends WebSocketServlet {
         consumers.remove(consumer.getPath());
     }
 
-    @Override
     public WebSocket doWebSocketConnect(HttpServletRequest request, String protocol) {
         String protocolKey = protocol;
 
@@ -79,4 +79,10 @@ public class WebsocketComponentServlet extends WebSocketServlet {
     public void setSocketFactory(Map<String, WebSocketFactory> socketFactory) {
         this.socketFactory = socketFactory;
     }
+
+	@Override
+	public void configure(WebSocketServletFactory factory) {
+		// TODO Auto-generated method stub
+		
+	}
 }
diff --git a/components/camel-websocket/src/main/java/org/apache/camel/component/websocket/WebsocketProducer.java b/components/camel-websocket/src/main/java/org/apache/camel/component/websocket/WebsocketProducer.java
index 91cfb5eb02c..17ca06ab534 100644
--- a/components/camel-websocket/src/main/java/org/apache/camel/component/websocket/WebsocketProducer.java
+++ b/components/camel-websocket/src/main/java/org/apache/camel/component/websocket/WebsocketProducer.java
@@ -17,6 +17,7 @@
 package org.apache.camel.component.websocket;
 
 import java.io.IOException;
+import java.nio.ByteBuffer;
 import java.util.Collection;
 
 import org.apache.camel.CamelExchangeException;
@@ -101,12 +102,13 @@ public class WebsocketProducer extends DefaultProducer implements WebsocketProdu
 
     void sendMessage(DefaultWebsocket websocket, Object message) throws IOException {
         // in case there is web socket and socket connection is open - send message
-        if (websocket != null && websocket.getConnection().isOpen()) {
+        if (websocket != null && websocket.getSession().isOpen()) {
             log.trace("Sending to websocket {} -> {}", websocket.getConnectionKey(), message);
             if (message instanceof String) {
-                websocket.getConnection().sendMessage((String) message);
+                websocket.getSession().getRemote().sendString((String) message);
             } else if (message instanceof byte[]) {
-                websocket.getConnection().sendMessage((byte[]) message, 0, ((byte[]) message).length);
+            	ByteBuffer buf = ByteBuffer.wrap((byte[]) message);
+                websocket.getSession().getRemote().sendBytes(buf);
             }
         }
     }
diff --git a/components/camel-websocket/src/test/java/org/apache/camel/component/websocket/DefaultWebsocketTest.java b/components/camel-websocket/src/test/java/org/apache/camel/component/websocket/DefaultWebsocketTest.java
index 015503685ab..f7a29f34037 100644
--- a/components/camel-websocket/src/test/java/org/apache/camel/component/websocket/DefaultWebsocketTest.java
+++ b/components/camel-websocket/src/test/java/org/apache/camel/component/websocket/DefaultWebsocketTest.java
@@ -16,7 +16,7 @@
  */
 package org.apache.camel.component.websocket;
 
-import org.eclipse.jetty.websocket.WebSocket.Connection;
+import org.eclipse.jetty.websocket.api.Session;
 import org.junit.Before;
 import org.junit.Test;
 import org.junit.runner.RunWith;
@@ -41,7 +41,7 @@ public class DefaultWebsocketTest {
     private static final String CONNECTION_KEY = "random-connection-key";
 
     @Mock
-    private Connection connection;
+    private Session session;
     @Mock
     private WebsocketConsumer consumer;
     @Mock
@@ -58,14 +58,14 @@ public class DefaultWebsocketTest {
     @Test
     public void testOnClose() {
         defaultWebsocket.onClose(CLOSE_CODE, MESSAGE);
-        InOrder inOrder = inOrder(connection, consumer, sync);
+        InOrder inOrder = inOrder(session, consumer, sync);
         inOrder.verify(sync, times(1)).removeSocket(defaultWebsocket);
         inOrder.verifyNoMoreInteractions();
     }
 
     @Test
     public void testOnOpen() {
-        defaultWebsocket.onOpen(connection);
+        defaultWebsocket.onConnect(session);
 
         /*
          * keyCaptor not functional anymore, because addSocket cannot be called with connectionKey
@@ -74,14 +74,14 @@ public class DefaultWebsocketTest {
          * times(1)).addSocket((eq(defaultWebsocket))); inOrder.verifyNoMoreInteractions();
          */
 
-        assertEquals(connection, defaultWebsocket.getConnection());
+        assertEquals(session, defaultWebsocket.getSession());
     }
 
     @Test
     public void testOnMessage() {
         defaultWebsocket.setConnectionKey(CONNECTION_KEY);
         defaultWebsocket.onMessage(MESSAGE);
-        InOrder inOrder = inOrder(connection, consumer, sync);
+        InOrder inOrder = inOrder(session, consumer, sync);
         inOrder.verify(consumer, times(1)).sendMessage(CONNECTION_KEY, MESSAGE);
         inOrder.verifyNoMoreInteractions();
     }
@@ -91,20 +91,20 @@ public class DefaultWebsocketTest {
         defaultWebsocket = new DefaultWebsocket(sync, null);
         defaultWebsocket.setConnectionKey(CONNECTION_KEY);
         defaultWebsocket.onMessage(MESSAGE);
-        InOrder inOrder = inOrder(connection, consumer, sync);
+        InOrder inOrder = inOrder(session, consumer, sync);
         inOrder.verify(consumer, times(0)).sendMessage(CONNECTION_KEY, MESSAGE);
         inOrder.verifyNoMoreInteractions();
     }
 
     @Test
     public void testGetConnection() {
-        assertNull(defaultWebsocket.getConnection());
-        defaultWebsocket.onOpen(connection);
-        assertEquals(connection, defaultWebsocket.getConnection());
-        defaultWebsocket.setConnection(null);
-        assertNull(defaultWebsocket.getConnection());
-        defaultWebsocket.setConnection(connection);
-        assertEquals(connection, defaultWebsocket.getConnection());
+        assertNull(defaultWebsocket.getSession());
+        defaultWebsocket.onConnect(session);
+        assertEquals(session, defaultWebsocket.getSession());
+        defaultWebsocket.setSession(null);
+        assertNull(defaultWebsocket.getSession());
+        defaultWebsocket.setSession(session);
+        assertEquals(session, defaultWebsocket.getSession());
     }
 
     @Test
@@ -116,7 +116,7 @@ public class DefaultWebsocketTest {
     public void testGetConnectionKey() {
         defaultWebsocket.setConnectionKey(null);
         assertNull(defaultWebsocket.getConnectionKey());
-        defaultWebsocket.onOpen(connection);
+        defaultWebsocket.onConnect(session);
         assertNotNull(defaultWebsocket.getConnectionKey());
         defaultWebsocket.setConnectionKey(CONNECTION_KEY);
         assertEquals(CONNECTION_KEY, defaultWebsocket.getConnectionKey());
