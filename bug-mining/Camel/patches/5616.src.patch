diff --git a/core/camel-api/src/main/java/org/apache/camel/ExtendedCamelContext.java b/core/camel-api/src/main/java/org/apache/camel/ExtendedCamelContext.java
index 4689df9f7f7..c68403e981f 100644
--- a/core/camel-api/src/main/java/org/apache/camel/ExtendedCamelContext.java
+++ b/core/camel-api/src/main/java/org/apache/camel/ExtendedCamelContext.java
@@ -753,4 +753,9 @@ public interface ExtendedCamelContext extends CamelContext {
      */
     void disposeModel();
 
+    /**
+     * Used during unit-testing where its possible to specify a set of routes to exclude from discovery
+     */
+    String getTestExcludeRoutes();
+
 }
diff --git a/core/camel-base-engine/src/main/java/org/apache/camel/impl/engine/SimpleCamelContext.java b/core/camel-base-engine/src/main/java/org/apache/camel/impl/engine/SimpleCamelContext.java
index 90f7a6229c6..6a0137d061e 100644
--- a/core/camel-base-engine/src/main/java/org/apache/camel/impl/engine/SimpleCamelContext.java
+++ b/core/camel-base-engine/src/main/java/org/apache/camel/impl/engine/SimpleCamelContext.java
@@ -597,4 +597,8 @@ public class SimpleCamelContext extends AbstractCamelContext {
         throw new UnsupportedOperationException();
     }
 
+    @Override
+    public String getTestExcludeRoutes() {
+        throw new UnsupportedOperationException();
+    }
 }
diff --git a/core/camel-core-engine/src/main/java/org/apache/camel/impl/DefaultCamelContext.java b/core/camel-core-engine/src/main/java/org/apache/camel/impl/DefaultCamelContext.java
index 050d306cbcc..c482064e841 100644
--- a/core/camel-core-engine/src/main/java/org/apache/camel/impl/DefaultCamelContext.java
+++ b/core/camel-core-engine/src/main/java/org/apache/camel/impl/DefaultCamelContext.java
@@ -140,6 +140,11 @@ public class DefaultCamelContext extends SimpleCamelContext implements ModelCame
         return getOptions().disableJmx;
     }
 
+    @Override
+    public String getTestExcludeRoutes() {
+        return getExcludeRoutes();
+    }
+
     public static String getExcludeRoutes() {
         return getOptions().excludeRoutes;
     }
diff --git a/core/camel-core-engine/src/main/java/org/apache/camel/impl/lw/LightweightCamelContext.java b/core/camel-core-engine/src/main/java/org/apache/camel/impl/lw/LightweightCamelContext.java
index 85f642e4a6f..5b122bdd1e2 100644
--- a/core/camel-core-engine/src/main/java/org/apache/camel/impl/lw/LightweightCamelContext.java
+++ b/core/camel-core-engine/src/main/java/org/apache/camel/impl/lw/LightweightCamelContext.java
@@ -1597,6 +1597,11 @@ public class LightweightCamelContext implements ExtendedCamelContext, CatalogCam
         getExtendedCamelContext().setStartupStepRecorder(startupStepRecorder);
     }
 
+    @Override
+    public String getTestExcludeRoutes() {
+        return getExtendedCamelContext().getTestExcludeRoutes();
+    }
+
     //
     // CatalogCamelContext
     //
diff --git a/core/camel-core-engine/src/main/java/org/apache/camel/impl/lw/LightweightRuntimeCamelContext.java b/core/camel-core-engine/src/main/java/org/apache/camel/impl/lw/LightweightRuntimeCamelContext.java
index 931073b6a13..97dba596697 100644
--- a/core/camel-core-engine/src/main/java/org/apache/camel/impl/lw/LightweightRuntimeCamelContext.java
+++ b/core/camel-core-engine/src/main/java/org/apache/camel/impl/lw/LightweightRuntimeCamelContext.java
@@ -1903,6 +1903,11 @@ public class LightweightRuntimeCamelContext implements ExtendedCamelContext, Cat
         return true;
     }
 
+    @Override
+    public String getTestExcludeRoutes() {
+        return null;
+    }
+
     @Override
     public RouteController getInternalRouteController() {
         return new RouteController() {
diff --git a/core/camel-main/src/main/java/org/apache/camel/main/DefaultRoutesCollector.java b/core/camel-main/src/main/java/org/apache/camel/main/DefaultRoutesCollector.java
index 648bd5c9143..7570a663672 100644
--- a/core/camel-main/src/main/java/org/apache/camel/main/DefaultRoutesCollector.java
+++ b/core/camel-main/src/main/java/org/apache/camel/main/DefaultRoutesCollector.java
@@ -74,6 +74,26 @@ public class DefaultRoutesCollector implements RoutesCollector {
                 name = name.replace('.', '/');
 
                 boolean match = !"false".equals(includePattern);
+
+                // special support for testing with @ExcludeRoutes annotation with camel-test modules
+                String exclude = camelContext.adapt(ExtendedCamelContext.class).getTestExcludeRoutes();
+                // exclude take precedence over include
+                if (match && ObjectHelper.isNotEmpty(exclude)) {
+                    // this property is a comma separated list of FQN class names, so we need to make
+                    // name as path so we can use ant patch matcher
+                    exclude = exclude.replace('.', '/');
+                    // there may be multiple separated by comma
+                    String[] parts = exclude.split(",");
+                    for (String part : parts) {
+                        // must negate when excluding, and hence !
+                        match = !matcher.match(part, name);
+                        log.trace("Java RoutesBuilder: {} exclude filter: {} -> {}", name, part, match);
+                        if (!match) {
+                            break;
+                        }
+                    }
+                }
+
                 // exclude take precedence over include
                 if (match && ObjectHelper.isNotEmpty(excludePattern)) {
                     // there may be multiple separated by comma
