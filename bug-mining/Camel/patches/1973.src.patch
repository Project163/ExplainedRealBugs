diff --git a/components/camel-test-blueprint/src/main/java/org/apache/camel/test/blueprint/CamelBlueprintHelper.java b/components/camel-test-blueprint/src/main/java/org/apache/camel/test/blueprint/CamelBlueprintHelper.java
index fbd92045573..8fe33ca3cd6 100644
--- a/components/camel-test-blueprint/src/main/java/org/apache/camel/test/blueprint/CamelBlueprintHelper.java
+++ b/components/camel-test-blueprint/src/main/java/org/apache/camel/test/blueprint/CamelBlueprintHelper.java
@@ -16,21 +16,10 @@
  */
 package org.apache.camel.test.blueprint;
 
-import java.io.File;
-import java.io.FileInputStream;
-import java.io.FileNotFoundException;
-import java.io.FileOutputStream;
+import java.io.*;
 import java.net.MalformedURLException;
 import java.net.URL;
-import java.util.ArrayList;
-import java.util.Arrays;
-import java.util.Collection;
-import java.util.Dictionary;
-import java.util.Enumeration;
-import java.util.HashMap;
-import java.util.Iterator;
-import java.util.List;
-import java.util.Map;
+import java.util.*;
 import java.util.jar.JarInputStream;
 
 import de.kalpatec.pojosr.framework.PojoServiceRegistryFactoryImpl;
@@ -46,13 +35,7 @@ import org.apache.camel.util.ObjectHelper;
 import org.apache.camel.util.ResourceHelper;
 import org.ops4j.pax.swissbox.tinybundles.core.TinyBundle;
 import org.ops4j.pax.swissbox.tinybundles.core.TinyBundles;
-import org.osgi.framework.BundleContext;
-import org.osgi.framework.BundleException;
-import org.osgi.framework.Constants;
-import org.osgi.framework.Filter;
-import org.osgi.framework.FrameworkUtil;
-import org.osgi.framework.InvalidSyntaxException;
-import org.osgi.framework.ServiceReference;
+import org.osgi.framework.*;
 import org.osgi.util.tracker.ServiceTracker;
 import org.slf4j.Logger;
 import org.slf4j.LoggerFactory;
@@ -91,18 +74,23 @@ public final class CamelBlueprintHelper {
     }
 
     public static BundleContext createBundleContext(String name, String bundleFilter, TinyBundle bundle) throws Exception {
-        deleteDirectory("target/bundles");
-        createDirectory("target/bundles");
-
         // ensure pojosr stores bundles in an unique target directory
-        System.setProperty("org.osgi.framework.storage", "target/bundles/" + System.currentTimeMillis());
+        String uid = "" + System.currentTimeMillis();
+        String tempDir = "target/bundles/" + uid;
+        System.setProperty("org.osgi.framework.storage", tempDir);
+        createDirectory(tempDir);
+
+        // use another directory for the jar of the bundle as it cannot be in the same directory
+        // as it has a file lock during running the tests which will cause the temp dir to not be
+        // fully deleted between tests
+        createDirectory("target/test-bundles");
 
         // get the bundles
         List<BundleDescriptor> bundles = getBundleDescriptors(bundleFilter);
 
         if (bundle != null) {
-            String jarName = name.toLowerCase();
-            bundles.add(getBundleDescriptor("target/bundles/" + jarName + ".jar", bundle));
+            String jarName = name.toLowerCase(Locale.ENGLISH) + "-" + uid + ".jar";
+            bundles.add(getBundleDescriptor("target/test-bundles/" + jarName, bundle));
         }
 
         if (LOG.isDebugEnabled()) {
@@ -124,10 +112,22 @@ public final class CamelBlueprintHelper {
     public static void disposeBundleContext(BundleContext bundleContext) throws BundleException {
         try {
             if (bundleContext != null) {
-                bundleContext.getBundle().stop();
+                List<Bundle> bundles = new ArrayList<Bundle>();
+                bundles.addAll(Arrays.asList(bundleContext.getBundles()));
+                Collections.reverse(bundles);
+                for (Bundle bundle : bundles) {
+                    LOG.debug("Stopping bundle {}", bundle);
+                    bundle.stop();
+                }
             }
+        } catch (Exception e) {
+            LOG.warn("Error during disposing BundleContext. This exception will be ignored.", e);
         } finally {
-            System.clearProperty("org.osgi.framework.storage");
+            String tempDir = System.clearProperty("org.osgi.framework.storage");
+            if (tempDir != null) {
+                LOG.info("Deleting work directory {}", tempDir);
+                deleteDirectory(tempDir);
+            }
         }
     }
 
@@ -296,13 +296,19 @@ public final class CamelBlueprintHelper {
 
     private static BundleDescriptor getBundleDescriptor(String path, TinyBundle bundle) throws Exception {
         File file = new File(path);
-        FileOutputStream fos = new FileOutputStream(file, true);
+        // tell the JVM its okay to delete this file on exit as its a temporary file
+        // the JVM may not successfully delete the file though
+        file.deleteOnExit();
+
+        FileOutputStream fos = new FileOutputStream(file, false);
+        InputStream is = bundle.build();
         try {
-            IOHelper.copyAndCloseInput(bundle.build(), fos);
+            IOHelper.copyAndCloseInput(is, fos);
         } finally {
-            IOHelper.close(fos);
+            IOHelper.close(is, fos);
         }
 
+        BundleDescriptor answer = null;
         FileInputStream fis = null;
         JarInputStream jis = null;
         try {
@@ -313,13 +319,15 @@ public final class CamelBlueprintHelper {
                 headers.put(entry.getKey().toString(), entry.getValue().toString());
             }
 
-            return new BundleDescriptor(
+            answer = new BundleDescriptor(
                     bundle.getClass().getClassLoader(),
                     new URL("jar:" + file.toURI().toString() + "!/"),
                     headers);
         } finally {
-            IOHelper.close(fis, jis);
+            IOHelper.close(jis, fis);
         }
+
+        return answer;
     }
 
 }
diff --git a/components/camel-test-blueprint/src/main/java/org/apache/camel/test/blueprint/CamelBlueprintTestSupport.java b/components/camel-test-blueprint/src/main/java/org/apache/camel/test/blueprint/CamelBlueprintTestSupport.java
index 2636d68cb05..c921efb40b7 100644
--- a/components/camel-test-blueprint/src/main/java/org/apache/camel/test/blueprint/CamelBlueprintTestSupport.java
+++ b/components/camel-test-blueprint/src/main/java/org/apache/camel/test/blueprint/CamelBlueprintTestSupport.java
@@ -63,7 +63,6 @@ public abstract class CamelBlueprintTestSupport extends CamelTestSupport {
 
     /**
      * Return the system bundle context
-     * @return
      */
     protected BundleContext getBundleContext() {
         return bundleContext;
diff --git a/components/camel-test-blueprint/src/test/java/org/apache/camel/test/blueprint/FilterTest.java b/components/camel-test-blueprint/src/test/java/org/apache/camel/test/blueprint/FilterTest.java
index a8764dd7208..148eb21b3d9 100644
--- a/components/camel-test-blueprint/src/test/java/org/apache/camel/test/blueprint/FilterTest.java
+++ b/components/camel-test-blueprint/src/test/java/org/apache/camel/test/blueprint/FilterTest.java
@@ -20,6 +20,7 @@ import org.apache.camel.EndpointInject;
 import org.apache.camel.Produce;
 import org.apache.camel.ProducerTemplate;
 import org.apache.camel.component.mock.MockEndpoint;
+import org.junit.Ignore;
 import org.junit.Test;
 
 /**
