diff --git a/camel-core/src/main/java/org/apache/camel/builder/ExpressionClauseSupport.java b/camel-core/src/main/java/org/apache/camel/builder/ExpressionClauseSupport.java
index e18572fa1bd..988df68cf59 100644
--- a/camel-core/src/main/java/org/apache/camel/builder/ExpressionClauseSupport.java
+++ b/camel-core/src/main/java/org/apache/camel/builder/ExpressionClauseSupport.java
@@ -19,11 +19,25 @@ package org.apache.camel.builder;
 import java.util.Map;
 
 import org.apache.camel.CamelContext;
-import org.apache.camel.ExchangePattern;
 import org.apache.camel.Expression;
 import org.apache.camel.builder.xml.Namespaces;
+import org.apache.camel.model.language.ConstantExpression;
+import org.apache.camel.model.language.ELExpression;
 import org.apache.camel.model.language.ExpressionDefinition;
+import org.apache.camel.model.language.GroovyExpression;
+import org.apache.camel.model.language.HeaderExpression;
+import org.apache.camel.model.language.JXPathExpression;
+import org.apache.camel.model.language.JavaScriptExpression;
 import org.apache.camel.model.language.MethodCallExpression;
+import org.apache.camel.model.language.MvelExpression;
+import org.apache.camel.model.language.OgnlExpression;
+import org.apache.camel.model.language.PhpExpression;
+import org.apache.camel.model.language.PropertyExpression;
+import org.apache.camel.model.language.PythonExpression;
+import org.apache.camel.model.language.RubyExpression;
+import org.apache.camel.model.language.SimpleExpression;
+import org.apache.camel.model.language.SpELExpression;
+import org.apache.camel.model.language.SqlExpression;
 import org.apache.camel.model.language.XPathExpression;
 import org.apache.camel.model.language.XQueryExpression;
 import org.apache.camel.spi.Language;
@@ -57,11 +71,20 @@ public class ExpressionClauseSupport<T> {
         return result;
     }
 
+    public T expression(ExpressionDefinition expression) {
+        setExpressionType(expression);
+        return result;
+    }
+
     /**
      * Specify the constant expression value
      */
     public T constant(Object value) {
-        return expression(ExpressionBuilder.constantExpression(value));
+        if (value instanceof String) {
+            return expression(new ConstantExpression((String) value));
+        } else {
+            return expression(ExpressionBuilder.constantExpression(value));
+        }
     }
 
     /**
@@ -119,7 +142,7 @@ public class ExpressionClauseSupport<T> {
      * An expression of an inbound message header of the given name
      */
     public T header(String name) {
-        return expression(ExpressionBuilder.headerExpression(name));
+        return expression(new HeaderExpression(name));
     }
 
     /**
@@ -154,7 +177,7 @@ public class ExpressionClauseSupport<T> {
      * An expression of an exchange property of the given name
      */
     public T property(String name) {
-        return expression(ExpressionBuilder.propertyExpression(name));
+        return expression(new PropertyExpression(name));
     }
 
     /**
@@ -177,9 +200,7 @@ public class ExpressionClauseSupport<T> {
      * @return the builder to continue processing the DSL
      */
     public T method(String bean) {
-        MethodCallExpression expression = new MethodCallExpression(bean);
-        setExpressionType(expression);
-        return result;
+        return expression(new MethodCallExpression(bean));
     }
 
     /**
@@ -192,9 +213,7 @@ public class ExpressionClauseSupport<T> {
      * @return the builder to continue processing the DSL
      */
     public T method(Object instance) {
-        MethodCallExpression expression = new MethodCallExpression(instance);
-        setExpressionType(expression);
-        return result;
+        return expression(new MethodCallExpression(instance));
     }
 
     /**
@@ -207,9 +226,7 @@ public class ExpressionClauseSupport<T> {
      * @return the builder to continue processing the DSL
      */
     public T method(Class<?> beanType) {
-        MethodCallExpression expression = new MethodCallExpression(beanType);
-        setExpressionType(expression);
-        return result;
+        return expression(new MethodCallExpression(beanType));
     }
 
     /**
@@ -223,9 +240,7 @@ public class ExpressionClauseSupport<T> {
      * @return the builder to continue processing the DSL
      */
     public T method(String bean, String method) {
-        MethodCallExpression expression = new MethodCallExpression(bean, method);
-        setExpressionType(expression);
-        return result;
+        return expression(new MethodCallExpression(bean, method));
     }
 
     /**
@@ -239,9 +254,7 @@ public class ExpressionClauseSupport<T> {
      * @return the builder to continue processing the DSL
      */
     public T method(Object instance, String method) {
-        MethodCallExpression expression = new MethodCallExpression(instance, method);
-        setExpressionType(expression);
-        return result;
+        return expression(new MethodCallExpression(instance, method));
     }
 
     /**
@@ -255,9 +268,7 @@ public class ExpressionClauseSupport<T> {
      * @return the builder to continue processing the DSL
      */
     public T method(Class<?> beanType, String method) {
-        MethodCallExpression expression = new MethodCallExpression(beanType, method);
-        setExpressionType(expression);
-        return result;
+        return expression(new MethodCallExpression(beanType, method));
     }
 
     /**
@@ -269,7 +280,7 @@ public class ExpressionClauseSupport<T> {
      * @return the builder to continue processing the DSL
      */
     public T el(String text) {
-        return language("el", text);
+        return expression(new ELExpression(text));
     }
 
     /**
@@ -280,7 +291,7 @@ public class ExpressionClauseSupport<T> {
      * @return the builder to continue processing the DSL
      */
     public T groovy(String text) {
-        return language("groovy", text);
+        return expression(new GroovyExpression(text));
     }
 
     /**
@@ -292,7 +303,7 @@ public class ExpressionClauseSupport<T> {
      * @return the builder to continue processing the DSL
      */
     public T javaScript(String text) {
-        return language("js", text);
+        return expression(new JavaScriptExpression(text));
     }
 
     /**
@@ -302,7 +313,7 @@ public class ExpressionClauseSupport<T> {
      * @return the builder to continue processing the DSL
      */
     public T jxpath(String text) {
-        return language("jxpath", text);
+        return expression(new JXPathExpression(text));
     }
 
     /**
@@ -313,7 +324,7 @@ public class ExpressionClauseSupport<T> {
      * @return the builder to continue processing the DSL
      */
     public T ognl(String text) {
-        return language("ognl", text);
+        return expression(new OgnlExpression(text));
     }
 
     /**
@@ -324,7 +335,7 @@ public class ExpressionClauseSupport<T> {
      * @return the builder to continue processing the DSL
      */
     public T mvel(String text) {
-        return language("mvel", text);
+        return expression(new MvelExpression(text));
     }
 
     /**
@@ -335,7 +346,7 @@ public class ExpressionClauseSupport<T> {
      * @return the builder to continue processing the DSL
      */
     public T php(String text) {
-        return language("php", text);
+        return expression(new PhpExpression(text));
     }
 
     /**
@@ -346,7 +357,7 @@ public class ExpressionClauseSupport<T> {
      * @return the builder to continue processing the DSL
      */
     public T python(String text) {
-        return language("python", text);
+        return expression(new PythonExpression(text));
     }
 
     /**
@@ -357,7 +368,7 @@ public class ExpressionClauseSupport<T> {
      * @return the builder to continue processing the DSL
      */
     public T ruby(String text) {
-        return language("ruby", text);
+        return expression(new RubyExpression(text));
     }
 
     /**
@@ -368,7 +379,7 @@ public class ExpressionClauseSupport<T> {
      * @return the builder to continue processing the DSL
      */
     public T spel(String text) {
-        return language("spel", text);
+        return expression(new SpELExpression(text));
     }
     
     /**
@@ -379,7 +390,7 @@ public class ExpressionClauseSupport<T> {
      * @return the builder to continue processing the DSL
      */
     public T sql(String text) {
-        return language("sql", text);
+        return expression(new SqlExpression(text));
     }
 
     /**
@@ -390,7 +401,7 @@ public class ExpressionClauseSupport<T> {
      * @return the builder to continue processing the DSL
      */
     public T simple(String text) {
-        return language("simple", text);
+        return expression(new SimpleExpression(text));
     }
 
     /**
@@ -401,7 +412,7 @@ public class ExpressionClauseSupport<T> {
      * @return the builder to continue processing the DSL
      */
     public T xpath(String text) {
-        return language("xpath", text);
+        return expression(new XPathExpression(text));
     }
 
     /**
@@ -486,7 +497,7 @@ public class ExpressionClauseSupport<T> {
      * @return the builder to continue processing the DSL
      */
     public T xquery(String text) {
-        return language("xquery", text);
+        return expression(new XQueryExpression(text));
     }
 
     /**
@@ -495,7 +506,7 @@ public class ExpressionClauseSupport<T> {
      * with the specified result type
      *
      * @param text the expression to be evaluated
-     * @param resultType the return type expected by the expressiopn
+     * @param resultType the return type expected by the expression
      * @return the builder to continue processing the DSL
      */
     public T xquery(String text, Class<?> resultType) {
@@ -579,6 +590,8 @@ public class ExpressionClauseSupport<T> {
         return result;
     }
 
+    // TODO: Add support for TokenizerExpression
+
     // Properties
     // -------------------------------------------------------------------------
     public String getLanguage() {
diff --git a/camel-core/src/main/java/org/apache/camel/component/mock/AssertionClause.java b/camel-core/src/main/java/org/apache/camel/component/mock/AssertionClause.java
index 7a4b3924fbc..ed9b37fb16f 100644
--- a/camel-core/src/main/java/org/apache/camel/component/mock/AssertionClause.java
+++ b/camel-core/src/main/java/org/apache/camel/component/mock/AssertionClause.java
@@ -26,6 +26,7 @@ import org.apache.camel.Predicate;
 import org.apache.camel.builder.ExpressionClause;
 import org.apache.camel.builder.ExpressionClauseSupport;
 import org.apache.camel.builder.ValueBuilder;
+import org.apache.camel.model.language.ExpressionDefinition;
 import org.apache.camel.util.PredicateAssertHelper;
 
 /**
@@ -48,11 +49,19 @@ public abstract class AssertionClause extends ExpressionClauseSupport<ValueBuild
 
     // Builder methods
     // -------------------------------------------------------------------------
+
     public ValueBuilder expression(Expression expression) {
+        // must override this method as we provide null in the constructor
         super.expression(expression);
         return new PredicateValueBuilder(getExpressionValue());
     }
 
+    public ValueBuilder expression(ExpressionDefinition expression) {
+        // must override this method as we provide null in the constructor
+        super.expression(expression);
+        return new PredicateValueBuilder(expression.createExpression(mock.getCamelContext()));
+    }
+
     /**
      * Adds the given predicate to this assertion clause
      */
diff --git a/camel-core/src/main/java/org/apache/camel/component/mock/MockEndpoint.java b/camel-core/src/main/java/org/apache/camel/component/mock/MockEndpoint.java
index f68cc9f03af..2a7d3eae582 100644
--- a/camel-core/src/main/java/org/apache/camel/component/mock/MockEndpoint.java
+++ b/camel-core/src/main/java/org/apache/camel/component/mock/MockEndpoint.java
@@ -565,23 +565,21 @@ public class MockEndpoint extends DefaultEndpoint implements BrowsableEndpoint {
     /**
      * Adds an expectation that the given body value are received by this endpoint
      */
-    public ExpressionClause<?> expectedBodyReceived() {
-        final ExpressionClause<?> clause = new ExpressionClause<MockEndpoint>(this);
-
+    public AssertionClause expectedBodyReceived() {
         expectedMessageCount(1);
-
-        expects(new Runnable() {
+        final AssertionClause clause = new AssertionClause(this) {
             public void run() {
                 Exchange exchange = getReceivedExchanges().get(0);
                 assertTrue("No exchange received for counter: " + 0, exchange != null);
 
                 Object actualBody = exchange.getIn().getBody();
-                Object expectedBody = clause.evaluate(exchange, Object.class);
+                Expression exp = createExpression(getCamelContext());
+                Object expectedBody = exp.evaluate(exchange, Object.class);
 
                 assertEquals("Body of message: " + 0, expectedBody, actualBody);
             }
-        });
-
+        };
+        expects(clause);
         return clause;
     }
 
@@ -693,13 +691,13 @@ public class MockEndpoint extends DefaultEndpoint implements BrowsableEndpoint {
      * Adds an expectation that messages received should have ascending values
      * of the given expression such as a user generated counter value
      */
-    public ExpressionClause<?> expectsAscending() {
-        final ExpressionClause<?> clause = new ExpressionClause<MockEndpoint>(this);
-        expects(new Runnable() {
+    public AssertionClause expectsAscending() {
+        final AssertionClause clause = new AssertionClause(this) {
             public void run() {
-                assertMessagesAscending(clause.getExpressionValue());
+                assertMessagesAscending(createExpression(getCamelContext()));
             }
-        });
+        };
+        expects(clause);
         return clause;
     }
 
@@ -719,13 +717,13 @@ public class MockEndpoint extends DefaultEndpoint implements BrowsableEndpoint {
      * Adds an expectation that messages received should have descending values
      * of the given expression such as a user generated counter value
      */
-    public ExpressionClause<?> expectsDescending() {
-        final ExpressionClause<?> clause = new ExpressionClause<MockEndpoint>(this);
-        expects(new Runnable() {
+    public AssertionClause expectsDescending() {
+        final AssertionClause clause = new AssertionClause(this) {
             public void run() {
-                assertMessagesDescending(clause.getExpressionValue());
+                assertMessagesDescending(createExpression(getCamelContext()));
             }
-        });
+        };
+        expects(clause);
         return clause;
     }
 
@@ -751,13 +749,13 @@ public class MockEndpoint extends DefaultEndpoint implements BrowsableEndpoint {
      * Adds an expectation that no duplicate messages should be received using
      * the expression to determine the message ID
      */
-    public ExpressionClause<?> expectsNoDuplicates() {
-        final ExpressionClause<?> clause = new ExpressionClause<MockEndpoint>(this);
-        expects(new Runnable() {
+    public AssertionClause expectsNoDuplicates() {
+        final AssertionClause clause = new AssertionClause(this) {
             public void run() {
-                assertNoDuplicates(clause.getExpressionValue());
+                assertNoDuplicates(createExpression(getCamelContext()));
             }
-        });
+        };
+        expects(clause);
         return clause;
     }
 
diff --git a/camel-core/src/main/java/org/apache/camel/model/AggregateDefinition.java b/camel-core/src/main/java/org/apache/camel/model/AggregateDefinition.java
index 9adff3977ca..303f7a4f8db 100644
--- a/camel-core/src/main/java/org/apache/camel/model/AggregateDefinition.java
+++ b/camel-core/src/main/java/org/apache/camel/model/AggregateDefinition.java
@@ -138,12 +138,6 @@ public class AggregateDefinition extends ProcessorDefinition<AggregateDefinition
         return createAggregator(routeContext);
     }
 
-    public ExpressionClause<AggregateDefinition> createAndSetExpression() {
-        ExpressionClause<AggregateDefinition> clause = new ExpressionClause<AggregateDefinition>(this);
-        this.setExpression(clause);
-        return clause;
-    }
-
     protected AggregateProcessor createAggregator(RouteContext routeContext) throws Exception {
         Processor processor = this.createChildProcessor(routeContext, true);
         // wrap the aggregated route in a unit of work processor
@@ -212,6 +206,24 @@ public class AggregateDefinition extends ProcessorDefinition<AggregateDefinition
         return answer;
     }
 
+    @Override
+    protected void configureChild(ProcessorDefinition output) {
+        if (expression != null && expression instanceof ExpressionClause) {
+            ExpressionClause clause = (ExpressionClause) expression;
+            if (clause.getExpressionType() != null) {
+                // if using the Java DSL then the expression may have been set using the
+                // ExpressionClause which is a fancy builder to define expressions and predicates
+                // using fluent builders in the DSL. However we need afterwards a callback to
+                // reset the expression to the expression type the ExpressionClause did build for us
+                expression = clause.getExpressionType();
+                // set the correlation expression from the expression type, as the model definition
+                // would then be accurate
+                correlationExpression = new ExpressionSubElementDefinition();
+                correlationExpression.setExpressionType(clause.getExpressionType());
+            }
+        }
+    }
+
     private AggregationStrategy createAggregationStrategy(RouteContext routeContext) {
         AggregationStrategy strategy = getAggregationStrategy();
         if (strategy == null && strategyRef != null) {
@@ -617,18 +629,6 @@ public class AggregateDefinition extends ProcessorDefinition<AggregateDefinition
         return this;
     }
 
-    /**
-     * Sets the predicate used to determine if the aggregation is completed
-     *
-     * @return the clause used to create the predicate
-     */
-    public ExpressionClause<AggregateDefinition> completionPredicate() {
-        checkNoCompletedPredicate();
-        ExpressionClause<AggregateDefinition> clause = new ExpressionClause<AggregateDefinition>(this);
-        setCompletionPredicate(new ExpressionSubElementDefinition((Expression)clause));
-        return clause;
-    }
-
     /**
      * Sets the predicate used to determine if the aggregation is completed
      *
diff --git a/camel-core/src/main/java/org/apache/camel/model/CatchDefinition.java b/camel-core/src/main/java/org/apache/camel/model/CatchDefinition.java
index 70ad9ea2521..14eff2ebc33 100644
--- a/camel-core/src/main/java/org/apache/camel/model/CatchDefinition.java
+++ b/camel-core/src/main/java/org/apache/camel/model/CatchDefinition.java
@@ -30,7 +30,6 @@ import org.apache.camel.Expression;
 import org.apache.camel.Predicate;
 import org.apache.camel.Processor;
 import org.apache.camel.builder.ExpressionBuilder;
-import org.apache.camel.builder.ExpressionClause;
 import org.apache.camel.processor.CatchProcessor;
 import org.apache.camel.spi.RouteContext;
 import org.apache.camel.util.CastUtils;
@@ -158,22 +157,6 @@ public class CatchDefinition extends ProcessorDefinition<CatchDefinition> {
         return this;
     }
 
-    /**
-     * Creates an expression to configure an additional predicate that should be true before the
-     * onCatch is triggered.
-     * <p/>
-     * To be used for fine grained controlling whether a thrown exception should be intercepted
-     * by this exception type or not.
-     *
-     * @return the expression clause to configure
-     */
-    public ExpressionClause<CatchDefinition> onWhen() {
-        onWhen = new WhenDefinition();
-        ExpressionClause<CatchDefinition> clause = new ExpressionClause<CatchDefinition>(this);
-        onWhen.setExpression(clause);
-        return clause;
-    }
-
     /**
      * Sets whether the exchange should be marked as handled or not.
      *
diff --git a/camel-core/src/main/java/org/apache/camel/model/ChoiceDefinition.java b/camel-core/src/main/java/org/apache/camel/model/ChoiceDefinition.java
index 9254bcfac6e..c63d3ffd185 100644
--- a/camel-core/src/main/java/org/apache/camel/model/ChoiceDefinition.java
+++ b/camel-core/src/main/java/org/apache/camel/model/ChoiceDefinition.java
@@ -163,4 +163,22 @@ public class ChoiceDefinition extends ProcessorDefinition<ChoiceDefinition> {
         this.otherwise = otherwise;
     }
 
+    @Override
+    protected void configureChild(ProcessorDefinition output) {
+        if (whenClauses == null || whenClauses.isEmpty()) {
+            return;
+        }
+        for (WhenDefinition when : whenClauses) {
+            if (when.getExpression() instanceof ExpressionClause) {
+                ExpressionClause clause = (ExpressionClause) when.getExpression();
+                if (clause.getExpressionType() != null) {
+                    // if using the Java DSL then the expression may have been set using the
+                    // ExpressionClause which is a fancy builder to define expressions and predicates
+                    // using fluent builders in the DSL. However we need afterwards a callback to
+                    // reset the expression to the expression type the ExpressionClause did build for us
+                    when.setExpression(clause.getExpressionType());
+                }
+            }
+        }
+    }
 }
diff --git a/camel-core/src/main/java/org/apache/camel/model/ExpressionNode.java b/camel-core/src/main/java/org/apache/camel/model/ExpressionNode.java
index ae7d6ea7608..0502cbb682b 100644
--- a/camel-core/src/main/java/org/apache/camel/model/ExpressionNode.java
+++ b/camel-core/src/main/java/org/apache/camel/model/ExpressionNode.java
@@ -25,6 +25,7 @@ import javax.xml.bind.annotation.XmlElementRef;
 import org.apache.camel.Expression;
 import org.apache.camel.Predicate;
 import org.apache.camel.Processor;
+import org.apache.camel.builder.ExpressionClause;
 import org.apache.camel.model.language.ExpressionDefinition;
 import org.apache.camel.processor.FilterProcessor;
 import org.apache.camel.spi.Required;
@@ -101,4 +102,18 @@ public class ExpressionNode extends ProcessorDefinition<ExpressionNode> {
         return new FilterProcessor(getExpression().createPredicate(routeContext), childProcessor);
     }
 
+    @Override
+    protected void configureChild(ProcessorDefinition output) {
+        if (expression instanceof ExpressionClause) {
+            ExpressionClause clause = (ExpressionClause) expression;
+            if (clause.getExpressionType() != null) {
+                // if using the Java DSL then the expression may have been set using the
+                // ExpressionClause which is a fancy builder to define expressions and predicates
+                // using fluent builders in the DSL. However we need afterwards a callback to
+                // reset the expression to the expression type the ExpressionClause did build for us
+                expression = clause.getExpressionType();
+            }
+        }
+    }
+
 }
diff --git a/camel-core/src/main/java/org/apache/camel/model/IdempotentConsumerDefinition.java b/camel-core/src/main/java/org/apache/camel/model/IdempotentConsumerDefinition.java
index 4e923f25c54..b9455264e47 100644
--- a/camel-core/src/main/java/org/apache/camel/model/IdempotentConsumerDefinition.java
+++ b/camel-core/src/main/java/org/apache/camel/model/IdempotentConsumerDefinition.java
@@ -24,7 +24,6 @@ import javax.xml.bind.annotation.XmlTransient;
 
 import org.apache.camel.Expression;
 import org.apache.camel.Processor;
-import org.apache.camel.builder.ExpressionClause;
 import org.apache.camel.processor.idempotent.IdempotentConsumer;
 import org.apache.camel.spi.IdempotentRepository;
 import org.apache.camel.spi.RouteContext;
@@ -67,14 +66,7 @@ public class IdempotentConsumerDefinition extends ExpressionNode {
     
     // Fluent API
     //-------------------------------------------------------------------------
-    /**
-     * Set the expression that the idempotent consumer will use
-     * @return the builder
-     */
-    public ExpressionClause<IdempotentConsumerDefinition> expression() {
-        return ExpressionClause.createAndSetExpression(this);
-    }
-    
+
     /**
      * Sets the reference name of the message id repository
      *
diff --git a/camel-core/src/main/java/org/apache/camel/model/OnCompletionDefinition.java b/camel-core/src/main/java/org/apache/camel/model/OnCompletionDefinition.java
index 917db570ba3..1e04f807871 100644
--- a/camel-core/src/main/java/org/apache/camel/model/OnCompletionDefinition.java
+++ b/camel-core/src/main/java/org/apache/camel/model/OnCompletionDefinition.java
@@ -30,7 +30,6 @@ import javax.xml.bind.annotation.XmlTransient;
 
 import org.apache.camel.Predicate;
 import org.apache.camel.Processor;
-import org.apache.camel.builder.ExpressionClause;
 import org.apache.camel.processor.OnCompletionProcessor;
 import org.apache.camel.processor.UnitOfWorkProcessor;
 import org.apache.camel.spi.RouteContext;
@@ -179,21 +178,6 @@ public class OnCompletionDefinition extends ProcessorDefinition<OnCompletionDefi
         return this;
     }
 
-    /**
-     * Creates an expression to configure an additional predicate that should be true before the
-     * onCompletion is triggered.
-     * <p/>
-     * To be used for fine grained controlling whether a completion callback should be invoked or not
-     *
-     * @return the expression clause to configure
-     */
-    public ExpressionClause<OnCompletionDefinition> onWhen() {
-        onWhen = new WhenDefinition();
-        ExpressionClause<OnCompletionDefinition> clause = new ExpressionClause<OnCompletionDefinition>(this);
-        onWhen.setExpression(clause);
-        return clause;
-    }
-
     /**
      * Will use the original input body when an {@link org.apache.camel.Exchange} for this on completion.
      * <p/>
diff --git a/camel-core/src/main/java/org/apache/camel/model/OnExceptionDefinition.java b/camel-core/src/main/java/org/apache/camel/model/OnExceptionDefinition.java
index 827649c1cbe..e5a19ba1a7f 100644
--- a/camel-core/src/main/java/org/apache/camel/model/OnExceptionDefinition.java
+++ b/camel-core/src/main/java/org/apache/camel/model/OnExceptionDefinition.java
@@ -35,7 +35,6 @@ import org.apache.camel.Processor;
 import org.apache.camel.Route;
 import org.apache.camel.builder.ErrorHandlerBuilder;
 import org.apache.camel.builder.ExpressionBuilder;
-import org.apache.camel.builder.ExpressionClause;
 import org.apache.camel.processor.CatchProcessor;
 import org.apache.camel.processor.RedeliveryPolicy;
 import org.apache.camel.spi.RouteContext;
@@ -277,22 +276,6 @@ public class OnExceptionDefinition extends ProcessorDefinition<OnExceptionDefini
         return this;
     }
 
-    /**
-     * Creates an expression to configure an additional predicate that should be true before the
-     * onException is triggered.
-     * <p/>
-     * To be used for fine grained controlling whether a thrown exception should be intercepted
-     * by this exception type or not.
-     *
-     * @return the expression clause to configure
-     */
-    public ExpressionClause<OnExceptionDefinition> onWhen() {
-        onWhen = new WhenDefinition();
-        ExpressionClause<OnExceptionDefinition> clause = new ExpressionClause<OnExceptionDefinition>(this);
-        onWhen.setExpression(clause);
-        return clause;
-    }
-
     /**
      * Sets the retry while predicate.
      * <p/>
diff --git a/camel-core/src/main/java/org/apache/camel/model/ProcessorDefinition.java b/camel-core/src/main/java/org/apache/camel/model/ProcessorDefinition.java
index 69274658afe..5858cab6939 100644
--- a/camel-core/src/main/java/org/apache/camel/model/ProcessorDefinition.java
+++ b/camel-core/src/main/java/org/apache/camel/model/ProcessorDefinition.java
@@ -73,8 +73,6 @@ import org.apache.camel.util.ObjectHelper;
 import org.slf4j.Logger;
 import org.slf4j.LoggerFactory;
 
-import static org.apache.camel.builder.Builder.body;
-
 /**
  * Base class for processor types that most XML types extend.
  *
@@ -120,6 +118,14 @@ public abstract class ProcessorDefinition<Type extends ProcessorDefinition<Type>
         return false;
     }
 
+    /**
+     * Executes any custom preparation logic before the runtime routes is being built using the
+     * model definitions.
+     */
+    public void prepare() {
+        // noop
+    }
+
     /**
      * Override this in definition class and implement logic to create the processor
      * based on the definition model.
@@ -163,6 +169,8 @@ public abstract class ProcessorDefinition<Type extends ProcessorDefinition<Type>
 
     public void addOutput(ProcessorDefinition output) {
         output.setParent(this);
+        output.setNodeFactory(getNodeFactory());
+        output.setErrorHandlerBuilder(getErrorHandlerBuilder());
         configureChild(output);
         if (blocks.isEmpty()) {
             getOutputs().add(output);
@@ -531,9 +539,13 @@ public abstract class ProcessorDefinition<Type extends ProcessorDefinition<Type>
         return new ErrorHandlerBuilderRef(ErrorHandlerBuilderRef.DEFAULT_ERROR_HANDLER_BUILDER);
     }
 
+    /**
+     * Strategy for children to do any custom configuration
+     *
+     * @param output the child to be added as output to this
+     */
     protected void configureChild(ProcessorDefinition output) {
-        output.setNodeFactory(getNodeFactory());
-        output.setErrorHandlerBuilder(getErrorHandlerBuilder());
+        // noop
     }
 
     // Fluent API
@@ -1107,19 +1119,6 @@ public abstract class ProcessorDefinition<Type extends ProcessorDefinition<Type>
         return (ChoiceDefinition) end();
     }
 
-    /**
-     * <a href="http://camel.apache.org/idempotent-consumer.html">Idempotent consumer EIP:</a>
-     * Creates an {@link org.apache.camel.processor.idempotent.IdempotentConsumer IdempotentConsumer}
-     * to avoid duplicate messages
-     *      
-     * @return the builder
-     */
-    public IdempotentConsumerDefinition idempotentConsumer() {
-        IdempotentConsumerDefinition answer = new IdempotentConsumerDefinition();
-        addOutput(answer);
-        return answer;
-    }
-
     /**
      * <a href="http://camel.apache.org/idempotent-consumer.html">Idempotent consumer EIP:</a>
      * Creates an {@link org.apache.camel.processor.idempotent.IdempotentConsumer IdempotentConsumer}
@@ -1681,8 +1680,10 @@ public abstract class ProcessorDefinition<Type extends ProcessorDefinition<Type>
      */
     public ExpressionClause<ResequenceDefinition> resequence() {
         ResequenceDefinition answer = new ResequenceDefinition();
+        ExpressionClause<ResequenceDefinition> clause = new ExpressionClause<ResequenceDefinition>(answer);
+        answer.setExpression(clause);
         addOutput(answer);
-        return answer.createAndSetExpression();
+        return clause;
     }
 
     /**
@@ -1707,8 +1708,10 @@ public abstract class ProcessorDefinition<Type extends ProcessorDefinition<Type>
      */
     public ExpressionClause<AggregateDefinition> aggregate() {
         AggregateDefinition answer = new AggregateDefinition();
+        ExpressionClause<AggregateDefinition> clause = new ExpressionClause<AggregateDefinition>(answer);
+        answer.setExpression(clause);
         addOutput(answer);
-        return answer.createAndSetExpression();
+        return clause;
     }
 
     /**
@@ -1720,9 +1723,11 @@ public abstract class ProcessorDefinition<Type extends ProcessorDefinition<Type>
      */
     public ExpressionClause<AggregateDefinition> aggregate(AggregationStrategy aggregationStrategy) {
         AggregateDefinition answer = new AggregateDefinition();
+        ExpressionClause<AggregateDefinition> clause = new ExpressionClause<AggregateDefinition>(answer);
+        answer.setExpression(clause);
         answer.setAggregationStrategy(aggregationStrategy);
         addOutput(answer);
-        return answer.createAndSetExpression();
+        return clause;
     }
 
     /**
diff --git a/camel-core/src/main/java/org/apache/camel/model/ResequenceDefinition.java b/camel-core/src/main/java/org/apache/camel/model/ResequenceDefinition.java
index cf9dee461d0..caa78eefee0 100644
--- a/camel-core/src/main/java/org/apache/camel/model/ResequenceDefinition.java
+++ b/camel-core/src/main/java/org/apache/camel/model/ResequenceDefinition.java
@@ -28,7 +28,6 @@ import javax.xml.bind.annotation.XmlTransient;
 
 import org.apache.camel.Expression;
 import org.apache.camel.Processor;
-import org.apache.camel.builder.ExpressionClause;
 import org.apache.camel.model.config.BatchResequencerConfig;
 import org.apache.camel.model.config.ResequencerConfig;
 import org.apache.camel.model.config.StreamResequencerConfig;
@@ -226,12 +225,6 @@ public class ResequenceDefinition extends ProcessorDefinition<ResequenceDefiniti
         return this;
     }
 
-    public ExpressionClause<ResequenceDefinition> createAndSetExpression() {
-        ExpressionClause<ResequenceDefinition> clause = new ExpressionClause<ResequenceDefinition>(this);
-        this.setExpression(clause);
-        return clause;
-    }
-
     @Override
     public String toString() {
         return "Resequencer[" + getExpression() + " -> " + getOutputs() + "]";
diff --git a/camel-core/src/main/java/org/apache/camel/model/SplitDefinition.java b/camel-core/src/main/java/org/apache/camel/model/SplitDefinition.java
index ab3ea6f9d1e..5dba5399999 100644
--- a/camel-core/src/main/java/org/apache/camel/model/SplitDefinition.java
+++ b/camel-core/src/main/java/org/apache/camel/model/SplitDefinition.java
@@ -25,7 +25,6 @@ import javax.xml.bind.annotation.XmlTransient;
 
 import org.apache.camel.Expression;
 import org.apache.camel.Processor;
-import org.apache.camel.builder.ExpressionClause;
 import org.apache.camel.model.language.ExpressionDefinition;
 import org.apache.camel.processor.Splitter;
 import org.apache.camel.processor.aggregate.AggregationStrategy;
@@ -124,14 +123,6 @@ public class SplitDefinition extends ExpressionNode implements ExecutorServiceAw
     // Fluent API
     // -------------------------------------------------------------------------
 
-    /**
-     * Set the expression that the splitter will use
-     *
-     * @return the builder
-     */
-    public ExpressionClause<SplitDefinition> expression() {
-        return ExpressionClause.createAndSetExpression(this);
-    }
     /**
      * Set the aggregationStrategy
      *
diff --git a/camel-core/src/main/java/org/apache/camel/model/TryDefinition.java b/camel-core/src/main/java/org/apache/camel/model/TryDefinition.java
index 1042cdac56d..32f1dd63bc1 100644
--- a/camel-core/src/main/java/org/apache/camel/model/TryDefinition.java
+++ b/camel-core/src/main/java/org/apache/camel/model/TryDefinition.java
@@ -30,7 +30,6 @@ import org.apache.camel.Expression;
 import org.apache.camel.Predicate;
 import org.apache.camel.Processor;
 import org.apache.camel.builder.ExpressionBuilder;
-import org.apache.camel.builder.ExpressionClause;
 import org.apache.camel.processor.CatchProcessor;
 import org.apache.camel.processor.TryProcessor;
 import org.apache.camel.spi.RouteContext;
@@ -147,31 +146,6 @@ public class TryDefinition extends OutputDefinition<TryDefinition> {
         return this;
     }
 
-    /**
-     * Creates an expression to configure an additional predicate that should be true before the
-     * onCatch is triggered.
-     * <p/>
-     * To be used for fine grained controlling whether a thrown exception should be intercepted
-     * by this exception type or not.
-     *
-     * @return the expression clause to configure
-     */
-    public ExpressionClause<TryDefinition> onWhen() {
-        // we must use a delegate so we can use the fluent builder based on TryDefinition
-        // to configure all with try .. catch .. finally
-        WhenDefinition answer = new WhenDefinition();
-        // set the onWhen definition on all the catch definitions
-        Iterator<CatchDefinition> it = ProcessorDefinitionHelper.filterTypeInOutputs(getOutputs(), CatchDefinition.class);
-        while (it.hasNext()) {
-            CatchDefinition doCatch = it.next();
-            doCatch.setOnWhen(answer);
-        }
-        // return a expression clause as builder to set the predicate on the onWhen definition
-        ExpressionClause<TryDefinition> clause = new ExpressionClause<TryDefinition>(this);
-        answer.setExpression(clause);
-        return clause;
-    }
-
     /**
      * Sets whether the exchange should be marked as handled or not.
      *
diff --git a/camel-core/src/main/java/org/apache/camel/model/WhenDefinition.java b/camel-core/src/main/java/org/apache/camel/model/WhenDefinition.java
index 98c0fbf1a27..5b54cb99a34 100644
--- a/camel-core/src/main/java/org/apache/camel/model/WhenDefinition.java
+++ b/camel-core/src/main/java/org/apache/camel/model/WhenDefinition.java
@@ -19,7 +19,6 @@ package org.apache.camel.model;
 import javax.xml.bind.annotation.XmlRootElement;
 
 import org.apache.camel.Predicate;
-import org.apache.camel.builder.ExpressionClause;
 import org.apache.camel.model.language.ExpressionDefinition;
 import org.apache.camel.processor.FilterProcessor;
 import org.apache.camel.spi.RouteContext;
@@ -69,15 +68,4 @@ public class WhenDefinition extends ExpressionNode {
         return createFilterProcessor(routeContext);
     }
     
-    // Fluent API
-    //-------------------------------------------------------------------------
-    /**
-     * Set the expression that WhenType will use
-     * @return the builder
-     * @deprecated will be removed in the near future. The expression is often already set.
-     */
-    @Deprecated
-    public ExpressionClause<WhenDefinition> expression() {
-        return ExpressionClause.createAndSetExpression(this);
-    }
 }
diff --git a/camel-core/src/main/java/org/apache/camel/model/language/ExpressionDefinition.java b/camel-core/src/main/java/org/apache/camel/model/language/ExpressionDefinition.java
index 5d7d163e8ca..fa03e2475c0 100644
--- a/camel-core/src/main/java/org/apache/camel/model/language/ExpressionDefinition.java
+++ b/camel-core/src/main/java/org/apache/camel/model/language/ExpressionDefinition.java
@@ -34,7 +34,6 @@ import org.apache.camel.Exchange;
 import org.apache.camel.Expression;
 import org.apache.camel.Predicate;
 import org.apache.camel.builder.PredicateBuilder;
-import org.apache.camel.impl.DefaultRouteContext;
 import org.apache.camel.spi.Language;
 import org.apache.camel.spi.Required;
 import org.apache.camel.spi.RouteContext;
diff --git a/camel-core/src/test/java/org/apache/camel/management/ManagedCamelContextDumpRoutesAsXmlTest.java b/camel-core/src/test/java/org/apache/camel/management/ManagedCamelContextDumpRoutesAsXmlTest.java
index e73b262cf65..26d0d0b00a0 100644
--- a/camel-core/src/test/java/org/apache/camel/management/ManagedCamelContextDumpRoutesAsXmlTest.java
+++ b/camel-core/src/test/java/org/apache/camel/management/ManagedCamelContextDumpRoutesAsXmlTest.java
@@ -42,6 +42,7 @@ public class ManagedCamelContextDumpRoutesAsXmlTest extends ManagementTestSuppor
         assertTrue(xml.contains("mock:result"));
         assertTrue(xml.contains("seda:bar"));
         assertTrue(xml.contains("mock:bar"));
+        assertTrue(xml.contains("<header>bar</header>"));
     }
 
     @Override
diff --git a/camel-core/src/test/java/org/apache/camel/util/DumpModelAsXmlAggregateRouteTest.java b/camel-core/src/test/java/org/apache/camel/util/DumpModelAsXmlAggregateRouteTest.java
new file mode 100644
index 00000000000..ac93cf1c217
--- /dev/null
+++ b/camel-core/src/test/java/org/apache/camel/util/DumpModelAsXmlAggregateRouteTest.java
@@ -0,0 +1,52 @@
+/**
+ * Licensed to the Apache Software Foundation (ASF) under one or more
+ * contributor license agreements.  See the NOTICE file distributed with
+ * this work for additional information regarding copyright ownership.
+ * The ASF licenses this file to You under the Apache License, Version 2.0
+ * (the "License"); you may not use this file except in compliance with
+ * the License.  You may obtain a copy of the License at
+ *
+ *      http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+package org.apache.camel.util;
+
+import org.apache.camel.ContextTestSupport;
+import org.apache.camel.builder.RouteBuilder;
+
+/**
+ *
+ */
+public class DumpModelAsXmlAggregateRouteTest extends ContextTestSupport {
+
+    public void testDumpModelAsXml() throws Exception {
+        String xml = ModelHelper.dumpModelAsXml(context.getRouteDefinition("myRoute"));
+        assertNotNull(xml);
+        log.info(xml);
+
+        assertTrue(xml.contains("<correlationExpression>"));
+        assertTrue(xml.contains("<header>userId</header>"));
+        assertTrue(xml.contains("</correlationExpression>"));
+    }
+
+    @Override
+    protected RouteBuilder createRouteBuilder() throws Exception {
+        return new RouteBuilder() {
+            @Override
+            public void configure() throws Exception {
+                from("direct:start").routeId("myRoute")
+                    .to("log:input")
+                    .aggregate().header("userId")
+                        .groupExchanges().completionSize(3)
+                        .to("mock:aggregate")
+                    .end()
+                    .to("mock:result");
+            }
+        };
+    }
+}
diff --git a/camel-core/src/test/java/org/apache/camel/util/DumpModelAsXmlChoiceFilterRouteTest.java b/camel-core/src/test/java/org/apache/camel/util/DumpModelAsXmlChoiceFilterRouteTest.java
new file mode 100644
index 00000000000..619ea020849
--- /dev/null
+++ b/camel-core/src/test/java/org/apache/camel/util/DumpModelAsXmlChoiceFilterRouteTest.java
@@ -0,0 +1,59 @@
+/**
+ * Licensed to the Apache Software Foundation (ASF) under one or more
+ * contributor license agreements.  See the NOTICE file distributed with
+ * this work for additional information regarding copyright ownership.
+ * The ASF licenses this file to You under the Apache License, Version 2.0
+ * (the "License"); you may not use this file except in compliance with
+ * the License.  You may obtain a copy of the License at
+ *
+ *      http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+package org.apache.camel.util;
+
+import org.apache.camel.ContextTestSupport;
+import org.apache.camel.builder.RouteBuilder;
+
+/**
+ *
+ */
+public class DumpModelAsXmlChoiceFilterRouteTest extends ContextTestSupport {
+
+    public void testDumpModelAsXml() throws Exception {
+        String xml = ModelHelper.dumpModelAsXml(context.getRouteDefinition("myRoute"));
+        assertNotNull(xml);
+        log.info(xml);
+
+        assertTrue(xml.contains("<header>gold</header>"));
+        assertTrue(xml.contains("<header>extra-gold</header>"));
+        assertTrue(xml.contains("<simple>${body} contains Camel</simple>"));
+    }
+
+    @Override
+    protected RouteBuilder createRouteBuilder() throws Exception {
+        return new RouteBuilder() {
+            @Override
+            public void configure() throws Exception {
+                from("direct:start").routeId("myRoute")
+                    .to("log:input")
+                    .choice()
+                        .when().header("gold")
+                            .to("mock:gold")
+                            .filter().header("extra-gold")
+                                .to("mock:extra-gold")
+                            .endChoice()
+                        .when().simple("${body} contains Camel")
+                            .to("mock:camel")
+                        .otherwise()
+                            .to("mock:other")
+                    .end()
+                    .to("mock:result");
+            }
+        };
+    }
+}
