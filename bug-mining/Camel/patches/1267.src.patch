diff --git a/components/camel-blueprint/src/main/java/org/apache/camel/blueprint/BlueprintContainerRegistry.java b/components/camel-blueprint/src/main/java/org/apache/camel/blueprint/BlueprintContainerRegistry.java
index 4a7a66512e6..67d36edd9e6 100644
--- a/components/camel-blueprint/src/main/java/org/apache/camel/blueprint/BlueprintContainerRegistry.java
+++ b/components/camel-blueprint/src/main/java/org/apache/camel/blueprint/BlueprintContainerRegistry.java
@@ -16,11 +16,12 @@
  */
 package org.apache.camel.blueprint;
 
+import org.apache.aries.blueprint.ExtendedBeanMetadata;
+import org.apache.aries.blueprint.mutable.MutableReferenceMetadata;
 import org.apache.camel.spi.Registry;
+import org.osgi.framework.Bundle;
 import org.osgi.service.blueprint.container.BlueprintContainer;
-import org.osgi.service.blueprint.reflect.BeanMetadata;
-import org.osgi.service.blueprint.reflect.ComponentMetadata;
-import org.osgi.service.blueprint.reflect.ReferenceMetadata;
+import org.osgi.service.blueprint.container.NoSuchComponentException;
 
 import java.util.LinkedHashMap;
 import java.util.Map;
@@ -38,7 +39,11 @@ public class BlueprintContainerRegistry implements Registry {
     }
 
     public <T> T lookup(String name, Class<T> type) {
-        return type.cast(blueprintContainer.getComponentInstance(name));
+        try {
+            return type.cast(blueprintContainer.getComponentInstance(name));
+        } catch (NoSuchComponentException e) {
+            return null;
+        }
     }
 
     public <T> Map<String, T> lookupByType(Class<T> type) {
@@ -47,16 +52,34 @@ public class BlueprintContainerRegistry implements Registry {
 
     public static <T> Map<String, T> lookupByType(BlueprintContainer blueprintContainer, Class<T> type) {
         Map<String, T> objects = new LinkedHashMap<String, T>();
-        for (ComponentMetadata metadata : blueprintContainer.getMetadata(ComponentMetadata.class)) {
-            boolean isSingleton = metadata instanceof BeanMetadata
-                        && (BeanMetadata.SCOPE_SINGLETON.equals(((BeanMetadata) metadata).getScope())
-                            || ((BeanMetadata) metadata).getScope() == null);
-            boolean isReference = metadata instanceof ReferenceMetadata;
-            if (isSingleton || isReference) {
-                Object o = blueprintContainer.getComponentInstance( metadata.getId() );
-                if (type.isInstance( o )) {
+        for (ExtendedBeanMetadata metadata : blueprintContainer.getMetadata(ExtendedBeanMetadata.class)) {
+            try {
+                Class cl = metadata.getRuntimeClass();
+                if (cl == null && metadata.getClassName() != null) {
+                    Bundle bundle  = (Bundle) blueprintContainer.getComponentInstance("blueprintBundle");
+                    cl = bundle.loadClass(metadata.getClassName());
+                }
+                if (cl == null || type.isAssignableFrom(cl)) {
+                    Object o = blueprintContainer.getComponentInstance( metadata.getId() );
+                    objects.put( metadata.getId(), type.cast(o) );
+                }
+            } catch (Throwable t) {
+                // ignore
+            }
+        }
+        for (MutableReferenceMetadata metadata : blueprintContainer.getMetadata(MutableReferenceMetadata.class)) {
+            try {
+                Class cl = metadata.getRuntimeInterface();
+                if (cl == null && metadata.getInterface() != null) {
+                    Bundle bundle  = (Bundle) blueprintContainer.getComponentInstance("blueprintBundle");
+                    cl = bundle.loadClass(metadata.getInterface());
+                }
+                if (cl == null || type.isAssignableFrom(cl)) {
+                    Object o = blueprintContainer.getComponentInstance( metadata.getId() );
                     objects.put( metadata.getId(), type.cast(o) );
                 }
+            } catch (Throwable t) {
+                // ignore
             }
         }
         return objects;
diff --git a/components/camel-blueprint/src/main/java/org/apache/camel/blueprint/handler/CamelNamespaceHandler.java b/components/camel-blueprint/src/main/java/org/apache/camel/blueprint/handler/CamelNamespaceHandler.java
index f8ab2791c42..0887756225d 100644
--- a/components/camel-blueprint/src/main/java/org/apache/camel/blueprint/handler/CamelNamespaceHandler.java
+++ b/components/camel-blueprint/src/main/java/org/apache/camel/blueprint/handler/CamelNamespaceHandler.java
@@ -16,50 +16,28 @@
  */
 package org.apache.camel.blueprint.handler;
 
-import java.net.URL;
-import java.util.ArrayList;
-import java.util.Arrays;
-import java.util.HashSet;
-import java.util.List;
-import java.util.Set;
-import java.util.concurrent.Callable;
-
-import javax.xml.bind.Binder;
-import javax.xml.bind.JAXBContext;
-import javax.xml.bind.JAXBException;
-
+import org.apache.aries.blueprint.BeanProcessor;
 import org.apache.aries.blueprint.ComponentDefinitionRegistry;
 import org.apache.aries.blueprint.ComponentDefinitionRegistryProcessor;
-import org.w3c.dom.Document;
-import org.w3c.dom.Element;
-import org.w3c.dom.Node;
-import org.w3c.dom.NodeList;
-
 import org.apache.aries.blueprint.NamespaceHandler;
 import org.apache.aries.blueprint.ParserContext;
 import org.apache.aries.blueprint.PassThroughMetadata;
 import org.apache.aries.blueprint.mutable.MutableBeanMetadata;
 import org.apache.aries.blueprint.mutable.MutablePassThroughMetadata;
+import org.apache.aries.blueprint.mutable.MutableRefMetadata;
 import org.apache.aries.blueprint.mutable.MutableReferenceMetadata;
+import org.apache.aries.blueprint.mutable.MutableValueMetadata;
+import org.apache.camel.CamelContext;
+import org.apache.camel.CamelContextAware;
+import org.apache.camel.EndpointInject;
+import org.apache.camel.Produce;
 import org.apache.camel.blueprint.BlueprintCamelContext;
 import org.apache.camel.blueprint.CamelContextFactoryBean;
 import org.apache.camel.core.xml.AbstractCamelContextFactoryBean;
+import org.apache.camel.core.xml.AbstractCamelFactoryBean;
+import org.apache.camel.impl.CamelPostProcessorHelper;
 import org.apache.camel.impl.DefaultCamelContextNameStrategy;
-import org.apache.camel.model.AggregateDefinition;
-import org.apache.camel.model.CatchDefinition;
-import org.apache.camel.model.DataFormatDefinition;
-import org.apache.camel.model.ExpressionNode;
-import org.apache.camel.model.ExpressionSubElementDefinition;
-import org.apache.camel.model.FromDefinition;
-import org.apache.camel.model.MarshalDefinition;
-import org.apache.camel.model.OnExceptionDefinition;
-import org.apache.camel.model.ProcessorDefinition;
-import org.apache.camel.model.ResequenceDefinition;
-import org.apache.camel.model.RouteDefinition;
-import org.apache.camel.model.SendDefinition;
-import org.apache.camel.model.SortDefinition;
-import org.apache.camel.model.UnmarshalDefinition;
-import org.apache.camel.model.WireTapDefinition;
+import org.apache.camel.model.*;
 import org.apache.camel.model.language.ExpressionDefinition;
 import org.apache.camel.spi.CamelContextNameStrategy;
 import org.apache.camel.spi.ComponentResolver;
@@ -68,13 +46,31 @@ import org.apache.camel.spi.LanguageResolver;
 import org.apache.camel.util.ObjectHelper;
 import org.apache.commons.logging.Log;
 import org.apache.commons.logging.LogFactory;
-
 import org.osgi.framework.Bundle;
-import org.osgi.framework.BundleContext;
 import org.osgi.service.blueprint.container.BlueprintContainer;
 import org.osgi.service.blueprint.container.ComponentDefinitionException;
+import org.osgi.service.blueprint.reflect.BeanMetadata;
 import org.osgi.service.blueprint.reflect.ComponentMetadata;
 import org.osgi.service.blueprint.reflect.Metadata;
+import org.osgi.service.blueprint.reflect.RefMetadata;
+import org.osgi.service.blueprint.reflect.ValueMetadata;
+import org.w3c.dom.Document;
+import org.w3c.dom.Element;
+import org.w3c.dom.Node;
+import org.w3c.dom.NodeList;
+
+import javax.xml.bind.Binder;
+import javax.xml.bind.JAXBContext;
+import javax.xml.bind.JAXBException;
+import java.lang.reflect.Field;
+import java.lang.reflect.Method;
+import java.lang.reflect.Modifier;
+import java.net.URL;
+import java.util.Arrays;
+import java.util.HashSet;
+import java.util.List;
+import java.util.Set;
+import java.util.concurrent.Callable;
 
 public class CamelNamespaceHandler implements NamespaceHandler {
 
@@ -140,27 +136,7 @@ public class CamelNamespaceHandler implements NamespaceHandler {
             }
 
             CamelContextFactoryBean ccfb = (CamelContextFactoryBean) value;
-            try {
-                PassThroughMetadata ptm = (PassThroughMetadata) context.getComponentDefinitionRegistry().getComponentDefinition("blueprintContainer");
-                ccfb.setBlueprintContainer((BlueprintContainer) ptm.getObject());
-                ptm = (PassThroughMetadata) context.getComponentDefinitionRegistry().getComponentDefinition("blueprintBundleContext");
-                ccfb.setBundleContext((BundleContext) ptm.getObject());
-                ccfb.setImplicitId(implicitId);
-            } catch (Exception e) {
-                throw new ComponentDefinitionException("Unable to initialize camel context factory", e);
-            }
-
-            //
-            // gnodet: the initialization of the CamelContextFactoryBean is now done at the end of the blueprint
-            //    container creation through the use of a ComponentDefinitionRegistryProcessor (those are called
-            //    after all the beans have been initialized.  That's why the calls to #afterPropertiesSet and
-            //    #init are commented.
-            //       This mechanism is now required because the #afterPropertiesSet method on the CamelContext
-            //    will search through the blueprint beans for beans implementing known interfaces such as
-            //    LifeCycle strategies, etc... so that they are automatically wired to the CamelContext.
-            //    However, Blueprint does not support real factories, so in order to do so, we need to actually
-            //    access the beans which lead to a circular exception while looking for the CamelContext itself.
-            //
+            ccfb.setImplicitId(implicitId);
 
             MutablePassThroughMetadata factory = context.createMetadata(MutablePassThroughMetadata.class);
             factory.setId(".camelBlueprint.passThrough." + contextId);
@@ -170,33 +146,98 @@ public class CamelNamespaceHandler implements NamespaceHandler {
             factory2.setId(".camelBlueprint.factory." + contextId);
             factory2.setFactoryComponent(factory);
             factory2.setFactoryMethod("call");
-//            factory2.setInitMethod("afterPropertiesSet");
+            factory2.setInitMethod("afterPropertiesSet");
             factory2.setDestroyMethod("destroy");
+            factory2.addProperty("blueprintContainer", createRef(context, "blueprintContainer"));
+            factory2.addProperty("bundleContext", createRef(context, "blueprintBundleContext"));
 
             MutableBeanMetadata ctx = context.createMetadata(MutableBeanMetadata.class);
             ctx.setId(contextId);
+            ctx.setRuntimeClass(BlueprintCamelContext.class);
             ctx.setFactoryComponent(factory2);
             ctx.setFactoryMethod("getContext");
-//            ctx.setInitMethod("init");
+            ctx.setInitMethod("init");
             ctx.setDestroyMethod("destroy");
 
-            MutablePassThroughMetadata processorFactory = context.createMetadata(MutablePassThroughMetadata.class);
-            processorFactory.setId(".camelBlueprint.processor.passThrough." + contextId);
-            processorFactory.setObject(new PassThroughCallable<Object>(new CamelDependenciesFinder(ccfb, context)));
-
-            MutableBeanMetadata processor = context.createMetadata(MutableBeanMetadata.class);
-            processor.setId(".camelBlueprint.processor." + contextId);
-            processor.setRuntimeClass(ComponentDefinitionRegistryProcessor.class);
-            processor.setFactoryComponent(processorFactory);
-            processor.setFactoryMethod("call");
-            processor.setProcessor(true);
-            context.getComponentDefinitionRegistry().registerComponentDefinition( processor );
+            // Register objects
+            registerBeans(context, contextId, ccfb.getEndpoints());
+            registerBeans(context, contextId, ccfb.getThreadPools());
+            registerBeans(context, contextId, ccfb.getBeans());
+
+            // Register processors
+            MutablePassThroughMetadata beanProcessorFactory = context.createMetadata(MutablePassThroughMetadata.class);
+            beanProcessorFactory.setId(".camelBlueprint.processor.bean.passThrough." + contextId);
+            beanProcessorFactory.setObject(new PassThroughCallable<Object>(new CamelInjector(contextId)));
+
+            MutableBeanMetadata beanProcessor = context.createMetadata(MutableBeanMetadata.class);
+            beanProcessor.setId(".camelBlueprint.processor.bean." + contextId);
+            beanProcessor.setRuntimeClass(CamelInjector.class);
+            beanProcessor.setFactoryComponent(beanProcessorFactory);
+            beanProcessor.setFactoryMethod("call");
+            beanProcessor.setProcessor(true);
+            beanProcessor.addProperty("blueprintContainer", createRef(context, "blueprintContainer"));
+            context.getComponentDefinitionRegistry().registerComponentDefinition(beanProcessor);
+
+            MutablePassThroughMetadata regProcessorFactory = context.createMetadata(MutablePassThroughMetadata.class);
+            regProcessorFactory.setId(".camelBlueprint.processor.registry.passThrough." + contextId);
+            regProcessorFactory.setObject(new PassThroughCallable<Object>(new CamelDependenciesFinder(contextId, context)));
+
+            MutableBeanMetadata regProcessor = context.createMetadata(MutableBeanMetadata.class);
+            regProcessor.setId(".camelBlueprint.processor.registry." + contextId);
+            regProcessor.setRuntimeClass(CamelDependenciesFinder.class);
+            regProcessor.setFactoryComponent(regProcessorFactory);
+            regProcessor.setFactoryMethod("call");
+            regProcessor.setProcessor(true);
+            regProcessor.addDependsOn(".camelBlueprint.processor.bean." + contextId);
+            regProcessor.addProperty("blueprintContainer", createRef(context, "blueprintContainer"));
+            context.getComponentDefinitionRegistry().registerComponentDefinition(regProcessor);
 
             return ctx;
         }
         return null;
     }
 
+    private void registerBeans(ParserContext context, String contextId, List<?> beans) {
+        if (beans != null) {
+            for (Object bean : beans) {
+                if (bean instanceof AbstractCamelFactoryBean) {
+                    registerBean(context, contextId, (AbstractCamelFactoryBean) bean);
+                }
+            }
+        }
+    }
+
+    protected void registerBean(ParserContext context, String contextId, AbstractCamelFactoryBean<?> fact) {
+        String id = fact.getId();
+
+        fact.setCamelContextId(contextId);
+
+        MutablePassThroughMetadata eff = context.createMetadata(MutablePassThroughMetadata.class);
+        eff.setId(".camelBlueprint.bean.factory." + id);
+        eff.setObject(new PassThroughCallable<Object>(fact));
+
+        MutableBeanMetadata ef = context.createMetadata(MutableBeanMetadata.class);
+        ef.setId(".camelBlueprint.bean.factory." + contextId);
+        ef.setFactoryComponent(eff);
+        ef.setFactoryMethod("call");
+        ef.addProperty("blueprintContainer", createRef(context, "blueprintContainer"));
+        ef.setInitMethod("afterPropertiesSet");
+        ef.setDestroyMethod("destroy");
+
+        MutableBeanMetadata e = context.createMetadata(MutableBeanMetadata.class);
+        e.setId(id);
+        e.setRuntimeClass(fact.getObjectType());
+        e.setFactoryComponent(ef);
+        e.setFactoryMethod("getObject");
+
+        context.getComponentDefinitionRegistry().registerComponentDefinition(e);
+    }
+
+    protected BlueprintContainer getBlueprintContainer(ParserContext context) {
+        PassThroughMetadata ptm = (PassThroughMetadata) context.getComponentDefinitionRegistry().getComponentDefinition("blueprintContainer");
+        return (BlueprintContainer) ptm.getObject();
+    }
+
     public ComponentMetadata decorate(Node node, ComponentMetadata component, ParserContext context) {
         return null;
     }
@@ -240,6 +281,18 @@ public class CamelNamespaceHandler implements NamespaceHandler {
         return classes;
     }
 
+    private ValueMetadata createValue(ParserContext context, String value) {
+        MutableValueMetadata v = context.createMetadata(MutableValueMetadata.class);
+        v.setStringValue(value);
+        return v;
+    }
+
+    private RefMetadata createRef(ParserContext context, String value) {
+        MutableRefMetadata r = context.createMetadata(MutableRefMetadata.class);
+        r.setComponentId(value);
+        return r;
+    }
+
     public static class PassThroughCallable<T> implements Callable<T> {
 
         private T value;
@@ -253,29 +306,152 @@ public class CamelNamespaceHandler implements NamespaceHandler {
         }
     }
 
+    public static class CamelInjector extends CamelPostProcessorHelper implements BeanProcessor {
+
+        private final String camelContextName;
+        private BlueprintContainer blueprintContainer;
+
+        public CamelInjector(String camelContextName) {
+            this.camelContextName = camelContextName;
+        }
+
+        public void setBlueprintContainer(BlueprintContainer blueprintContainer) {
+            this.blueprintContainer = blueprintContainer;
+        }
+
+        public Object beforeInit(Object bean, String beanName, BeanCreator beanCreator, BeanMetadata beanMetadata) {
+            injectFields(bean, beanName);
+            injectMethods(bean, beanName);
+            if (bean instanceof CamelContextAware) {
+                ((CamelContextAware) bean).setCamelContext(getCamelContext());
+            }
+            return bean;
+        }
+
+        @Override
+        public CamelContext getCamelContext() {
+            return (CamelContext) blueprintContainer.getComponentInstance(camelContextName);
+        }
+
+        /**
+         * A strategy method to allow implementations to perform some custom JBI
+         * based injection of the POJO
+         *
+         * @param bean the bean to be injected
+         */
+        protected void injectFields(final Object bean, final String beanName) {
+            Class clazz = bean.getClass();
+            do {
+                Field[] fields = clazz.getDeclaredFields();
+                for (Field field : fields) {
+                    EndpointInject endpointInject = field.getAnnotation(EndpointInject.class);
+                    if (endpointInject != null && matchContext(endpointInject.context())) {
+                        injectField(field, endpointInject.uri(), endpointInject.ref(), bean, beanName);
+                    }
+
+                    Produce produce = field.getAnnotation(Produce.class);
+                    if (produce != null && matchContext(produce.context())) {
+                        injectField(field, produce.uri(), produce.ref(), bean, beanName);
+                    }
+                }
+                clazz = clazz.getSuperclass();
+            } while (clazz != null && clazz != Object.class);
+        }
+
+        protected void injectField(Field field, String endpointUri, String endpointRef, Object bean, String beanName) {
+            setField(field, bean, getInjectionValue(field.getType(), endpointUri, endpointRef, field.getName(), bean, beanName));
+        }
+
+        protected static void setField(Field field, Object instance, Object value) {
+            try {
+                boolean oldAccessible = field.isAccessible();
+                boolean shouldSetAccessible = !Modifier.isPublic(field.getModifiers()) && !oldAccessible;
+                if (shouldSetAccessible) {
+                    field.setAccessible(true);
+                }
+                field.set(instance, value);
+                if (shouldSetAccessible) {
+                    field.setAccessible(oldAccessible);
+                }
+            } catch (IllegalArgumentException ex) {
+                throw new UnsupportedOperationException("Cannot inject value of class: " + value.getClass() + " into: " + field);
+            } catch (IllegalAccessException ex) {
+                throw new IllegalStateException("Could not access method: " + ex.getMessage());
+            }
+        }
+
+        protected void injectMethods(final Object bean, final String beanName) {
+            Class clazz = bean.getClass();
+            do {
+                Method[] methods = clazz.getDeclaredMethods();
+                for (Method method : methods) {
+                    setterInjection(method, bean, beanName);
+                    consumerInjection(method, bean, beanName);
+                }
+                clazz = clazz.getSuperclass();
+            } while (clazz != null && clazz != Object.class);
+        }
+
+        protected void setterInjection(Method method, Object bean, String beanName) {
+            EndpointInject endpointInject = method.getAnnotation(EndpointInject.class);
+            if (endpointInject != null && matchContext(endpointInject.context())) {
+                setterInjection(method, bean, beanName, endpointInject.uri(), endpointInject.ref());
+            }
+
+            Produce produce = method.getAnnotation(Produce.class);
+            if (produce != null && matchContext(produce.context())) {
+                setterInjection(method, bean, beanName, produce.uri(), produce.ref());
+            }
+        }
+
+        protected void setterInjection(Method method, Object bean, String beanName, String endpointUri, String endpointRef) {
+            Class<?>[] parameterTypes = method.getParameterTypes();
+            if (parameterTypes != null) {
+                if (parameterTypes.length != 1) {
+                    LOG.warn("Ignoring badly annotated method for injection due to incorrect number of parameters: " + method);
+                } else {
+                    String propertyName = ObjectHelper.getPropertyName(method);
+                    Object value = getInjectionValue(parameterTypes[0], endpointUri, endpointRef, propertyName, bean, beanName);
+                    ObjectHelper.invokeMethod(method, bean, value);
+                }
+            }
+        }
+
+        public Object afterInit(Object o, String s, BeanCreator beanCreator, BeanMetadata beanMetadata) {
+            return o;
+        }
+
+        public void beforeDestroy(Object o, String s) {
+        }
+
+        public void afterDestroy(Object o, String s) {
+        }
+
+    }
+
     public static class CamelDependenciesFinder implements ComponentDefinitionRegistryProcessor {
 
-        private final CamelContextFactoryBean ccfb;
+        private final String camelContextName;
         private final ParserContext context;
+        private BlueprintContainer blueprintContainer;
 
-        public CamelDependenciesFinder(CamelContextFactoryBean ccfb, ParserContext context) {
-            this.ccfb = ccfb;
+        public CamelDependenciesFinder(String camelContextName, ParserContext context) {
+            this.camelContextName = camelContextName;
             this.context = context;
         }
 
+        public void setBlueprintContainer(BlueprintContainer blueprintContainer) {
+            this.blueprintContainer = blueprintContainer;
+        }
+
         public void process(ComponentDefinitionRegistry componentDefinitionRegistry) {
-            try {
-                ccfb.afterPropertiesSet();
-                ccfb.getContext().init();
-            } catch (Exception e) {
-                throw new ComponentDefinitionException("Unable to initialize camel context factory", e);
-            }
+            CamelContext camelContext = (CamelContext) blueprintContainer.getComponentInstance(camelContextName);
 
             Set<String> components = new HashSet<String>();
             Set<String> languages = new HashSet<String>();
             Set<String> dataformats = new HashSet<String>();
             Set<String> dependsOn = new HashSet<String>();
-            for (RouteDefinition rd : ccfb.getContext().getRouteDefinitions()) {
+            for (RouteDefinition rd : camelContext.getRouteDefinitions()) {
                 findInputComponents(rd.getInputs(), components, languages, dataformats);
                 findOutputComponents(rd.getOutputs(), components, languages, dataformats);
             }
@@ -365,6 +541,8 @@ public class CamelNamespaceHandler implements NamespaceHandler {
                 languages.clear();
                 dataformats.clear();
             }
+
+
         }
 
         public <T extends org.osgi.service.blueprint.reflect.Metadata> T createMetadata(java.lang.Class<T> tClass) {
diff --git a/components/camel-core-xml/src/main/java/org/apache/camel/core/xml/AbstractCamelConsumerTemplateFactoryBean.java b/components/camel-core-xml/src/main/java/org/apache/camel/core/xml/AbstractCamelConsumerTemplateFactoryBean.java
index fdf63e90632..e1a00508f18 100644
--- a/components/camel-core-xml/src/main/java/org/apache/camel/core/xml/AbstractCamelConsumerTemplateFactoryBean.java
+++ b/components/camel-core-xml/src/main/java/org/apache/camel/core/xml/AbstractCamelConsumerTemplateFactoryBean.java
@@ -37,29 +37,14 @@ import org.apache.camel.util.ServiceHelper;
  * @version $Revision: 934375 $
  */
 @XmlAccessorType(XmlAccessType.FIELD)
-public abstract class AbstractCamelConsumerTemplateFactoryBean extends IdentifiedType implements CamelContextAware {
+public abstract class AbstractCamelConsumerTemplateFactoryBean extends AbstractCamelFactoryBean<ConsumerTemplate> {
     @XmlTransient
     private ConsumerTemplate template;
     @XmlAttribute
-    private String camelContextId;
-    @XmlTransient
-    private CamelContext camelContext;
-    @XmlAttribute
     private Integer maximumCacheSize;
 
-    public void afterPropertiesSet() throws Exception {
-        if (camelContext == null && camelContextId != null) {
-            camelContext = getCamelContextWithId(camelContextId);
-        }
-        if (camelContext == null) {
-            throw new IllegalArgumentException("A CamelContext or a CamelContextId must be injected!");
-        }
-    }
-
-    protected abstract CamelContext getCamelContextWithId(String camelContextId);
-
-    public Object getObject() throws Exception {
-        template = new DefaultConsumerTemplate(camelContext);
+    public ConsumerTemplate getObject() throws Exception {
+        template = new DefaultConsumerTemplate(getCamelContext());
 
         // set custom cache size if provided
         if (maximumCacheSize != null) {
@@ -71,14 +56,10 @@ public abstract class AbstractCamelConsumerTemplateFactoryBean extends Identifie
         return template;
     }
 
-    public Class getObjectType() {
+    public Class<DefaultConsumerTemplate> getObjectType() {
         return DefaultConsumerTemplate.class;
     }
 
-    public boolean isSingleton() {
-        return true;
-    }
-
     public void destroy() throws Exception {
         ServiceHelper.stopService(template);
     }
@@ -86,22 +67,6 @@ public abstract class AbstractCamelConsumerTemplateFactoryBean extends Identifie
     // Properties
     // -------------------------------------------------------------------------
 
-    public CamelContext getCamelContext() {
-        return camelContext;
-    }
-
-    public void setCamelContext(CamelContext camelContext) {
-        this.camelContext = camelContext;
-    }
-
-    public String getCamelContextId() {
-        return camelContextId;
-    }
-
-    public void setCamelContextId(String camelContextId) {
-        this.camelContextId = camelContextId;
-    }
-
     public Integer getMaximumCacheSize() {
         return maximumCacheSize;
     }
diff --git a/components/camel-core-xml/src/main/java/org/apache/camel/core/xml/AbstractCamelEndpointFactoryBean.java b/components/camel-core-xml/src/main/java/org/apache/camel/core/xml/AbstractCamelEndpointFactoryBean.java
index b63e8b98bbd..a1d3f0c2d98 100644
--- a/components/camel-core-xml/src/main/java/org/apache/camel/core/xml/AbstractCamelEndpointFactoryBean.java
+++ b/components/camel-core-xml/src/main/java/org/apache/camel/core/xml/AbstractCamelEndpointFactoryBean.java
@@ -32,29 +32,19 @@ import static org.apache.camel.util.ObjectHelper.notNull;
 
 
 @XmlAccessorType(XmlAccessType.FIELD)
-public abstract class AbstractCamelEndpointFactoryBean extends IdentifiedType implements CamelContextAware {
+public abstract class AbstractCamelEndpointFactoryBean extends AbstractCamelFactoryBean<Endpoint> {
     @XmlAttribute
     @Deprecated
     private Boolean singleton = Boolean.FALSE;
     @XmlAttribute
     private String uri;
-    @XmlAttribute
-    private String camelContextId;
-    @XmlTransient
-    private CamelContext context;
     @XmlTransient
     private Endpoint endpoint;
 
-    public Object getObject() throws Exception {
+    public Endpoint getObject() throws Exception {
         if (endpoint == null || !endpoint.isSingleton()) {
-            if (context == null && camelContextId != null) {
-                context = getCamelContextWithId(camelContextId);
-            }
-
-            notNull(context, "context");
             notNull(uri, "uri");
-
-            endpoint = context.getEndpoint(uri);
+            endpoint = getCamelContext().getEndpoint(uri);
             if (endpoint == null) {
                 throw new NoSuchEndpointException(uri);
             }
@@ -62,33 +52,10 @@ public abstract class AbstractCamelEndpointFactoryBean extends IdentifiedType im
         return endpoint;
     }
 
-    protected abstract CamelContext getCamelContextWithId(String camelContextId);
-
-    public Class getObjectType() {
+    public Class<Endpoint> getObjectType() {
         return Endpoint.class;
     }
 
-    public boolean isSingleton() {
-        return false;
-    }
-
-    public void setSingleton(boolean singleton) {
-    }
-
-    public CamelContext getCamelContext() {
-        return context;
-    }
-
-
-    /**
-     * Sets the context to use to resolve endpoints
-     *
-     * @param context the context used to resolve endpoints
-     */
-    public void setCamelContext(CamelContext context) {
-        this.context = context;
-    }
-
     public String getUri() {
         return uri;
     }
@@ -102,12 +69,4 @@ public abstract class AbstractCamelEndpointFactoryBean extends IdentifiedType im
         this.uri = uri;
     }
 
-    public String getCamelContextId() {
-        return camelContextId;
-    }
-
-    public void setCamelContextId(String camelContextId) {
-        this.camelContextId = camelContextId;
-    }
-
 }
diff --git a/components/camel-core-xml/src/main/java/org/apache/camel/core/xml/AbstractCamelFactoryBean.java b/components/camel-core-xml/src/main/java/org/apache/camel/core/xml/AbstractCamelFactoryBean.java
new file mode 100644
index 00000000000..2048ebdbb2e
--- /dev/null
+++ b/components/camel-core-xml/src/main/java/org/apache/camel/core/xml/AbstractCamelFactoryBean.java
@@ -0,0 +1,74 @@
+/**
+ * Licensed to the Apache Software Foundation (ASF) under one or more
+ * contributor license agreements.  See the NOTICE file distributed with
+ * this work for additional information regarding copyright ownership.
+ * The ASF licenses this file to You under the Apache License, Version 2.0
+ * (the "License"); you may not use this file except in compliance with
+ * the License.  You may obtain a copy of the License at
+ *
+ *      http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+package org.apache.camel.core.xml;
+
+import org.apache.camel.CamelContext;
+import org.apache.camel.CamelContextAware;
+import org.apache.camel.model.IdentifiedType;
+
+import javax.xml.bind.annotation.XmlAccessType;
+import javax.xml.bind.annotation.XmlAccessorType;
+import javax.xml.bind.annotation.XmlAttribute;
+import javax.xml.bind.annotation.XmlTransient;
+
+@XmlAccessorType(XmlAccessType.FIELD)
+public abstract class AbstractCamelFactoryBean<T> extends IdentifiedType implements CamelContextAware {
+
+    @XmlAttribute
+    private String camelContextId;
+    @XmlTransient
+    private CamelContext camelContext;
+
+    public abstract T getObject() throws Exception;
+
+    protected abstract CamelContext getCamelContextWithId(String camelContextId);
+
+    public void afterPropertiesSet() throws Exception {
+    }
+
+    public void destroy() throws Exception {
+    }
+
+    public CamelContext getCamelContext() {
+        if (camelContext == null && camelContextId != null) {
+            camelContext = getCamelContextWithId(camelContextId);
+        }
+        if (camelContext == null) {
+            throw new IllegalArgumentException("A CamelContext or a CamelContextId must be injected!");
+        }
+        return camelContext;
+    }
+
+    public void setCamelContext(CamelContext camelContext) {
+        this.camelContext = camelContext;
+    }
+
+    public String getCamelContextId() {
+        return camelContextId;
+    }
+
+    public void setCamelContextId(String camelContextId) {
+        this.camelContextId = camelContextId;
+    }
+
+    public boolean isSingleton() {
+        return true;
+    }
+
+    public abstract Class<? extends T> getObjectType();
+
+}
diff --git a/components/camel-core-xml/src/main/java/org/apache/camel/core/xml/AbstractCamelProducerTemplateFactoryBean.java b/components/camel-core-xml/src/main/java/org/apache/camel/core/xml/AbstractCamelProducerTemplateFactoryBean.java
index c9ef451ab5e..6538b522133 100644
--- a/components/camel-core-xml/src/main/java/org/apache/camel/core/xml/AbstractCamelProducerTemplateFactoryBean.java
+++ b/components/camel-core-xml/src/main/java/org/apache/camel/core/xml/AbstractCamelProducerTemplateFactoryBean.java
@@ -37,30 +37,15 @@ import org.apache.camel.util.ServiceHelper;
  * @version $Revision: 934375 $
  */
 @XmlAccessorType(XmlAccessType.FIELD)
-public abstract class AbstractCamelProducerTemplateFactoryBean extends IdentifiedType implements CamelContextAware {
+public abstract class AbstractCamelProducerTemplateFactoryBean extends AbstractCamelFactoryBean<ProducerTemplate> {
     @XmlTransient
     private ProducerTemplate template;
     @XmlAttribute(required = false)
     private String defaultEndpoint;
     @XmlAttribute
-    private String camelContextId;
-    @XmlTransient
-    private CamelContext camelContext;
-    @XmlAttribute
     private Integer maximumCacheSize;
 
-    public void afterPropertiesSet() throws Exception {
-        if (camelContext == null && camelContextId != null) {
-            camelContext = getCamelContextWithId(camelContextId);
-        }
-        if (camelContext == null) {
-            throw new IllegalArgumentException("A CamelContext or a CamelContextId must be injected!");
-        }
-    }
-
-    protected abstract CamelContext getCamelContextWithId(String camelContextId);
-
-    public Object getObject() throws Exception {
+    public ProducerTemplate getObject() throws Exception {
         CamelContext context = getCamelContext();
         if (defaultEndpoint != null) {
             Endpoint endpoint = context.getEndpoint(defaultEndpoint);
@@ -83,28 +68,16 @@ public abstract class AbstractCamelProducerTemplateFactoryBean extends Identifie
         return template;
     }
 
-    public Class getObjectType() {
+    public Class<DefaultProducerTemplate> getObjectType() {
         return DefaultProducerTemplate.class;
     }
 
-    public boolean isSingleton() {
-        return true;
-    }
-
     public void destroy() throws Exception {
         ServiceHelper.stopService(template);
     }
 
     // Properties
     // -------------------------------------------------------------------------
-    public CamelContext getCamelContext() {
-        return camelContext;
-    }
-
-    public void setCamelContext(CamelContext camelContext) {
-        this.camelContext = camelContext;
-    }
-
     public String getDefaultEndpoint() {
         return defaultEndpoint;
     }
@@ -116,14 +89,6 @@ public abstract class AbstractCamelProducerTemplateFactoryBean extends Identifie
         this.defaultEndpoint = defaultEndpoint;
     }
 
-    public String getCamelContextId() {
-        return camelContextId;
-    }
-
-    public void setCamelContextId(String camelContextId) {
-        this.camelContextId = camelContextId;
-    }
-
     public Integer getMaximumCacheSize() {
         return maximumCacheSize;
     }
diff --git a/components/camel-core-xml/src/main/java/org/apache/camel/core/xml/AbstractCamelThreadPoolFactoryBean.java b/components/camel-core-xml/src/main/java/org/apache/camel/core/xml/AbstractCamelThreadPoolFactoryBean.java
index e37a7fe8ae1..e833bd5e18e 100644
--- a/components/camel-core-xml/src/main/java/org/apache/camel/core/xml/AbstractCamelThreadPoolFactoryBean.java
+++ b/components/camel-core-xml/src/main/java/org/apache/camel/core/xml/AbstractCamelThreadPoolFactoryBean.java
@@ -41,7 +41,7 @@ import static org.apache.camel.util.ObjectHelper.notNull;
  * @version $Revision: 925208 $
  */
 @XmlAccessorType(XmlAccessType.FIELD)
-public abstract class AbstractCamelThreadPoolFactoryBean extends IdentifiedType implements CamelContextAware {
+public abstract class AbstractCamelThreadPoolFactoryBean extends AbstractCamelFactoryBean<ExecutorService> {
 
     @XmlAttribute(required = true)
     private Integer poolSize;
@@ -60,17 +60,8 @@ public abstract class AbstractCamelThreadPoolFactoryBean extends IdentifiedType
     private String threadName;
     @XmlAttribute
     private Boolean daemon = Boolean.TRUE;
-    @XmlAttribute
-    private String camelContextId;
-    @XmlTransient
-    private CamelContext camelContext;
-
-    public Object getObject() throws Exception {
-        if (camelContext == null && camelContextId != null) {
-            camelContext = getCamelContextWithId(camelContextId);
-        }
 
-        notNull(camelContext, "camelContext");
+    public ExecutorService getObject() throws Exception {
         if (poolSize == null || poolSize <= 0) {
             throw new IllegalArgumentException("PoolSize must be a positive number");
         }
@@ -81,21 +72,17 @@ public abstract class AbstractCamelThreadPoolFactoryBean extends IdentifiedType
             rejected = rejectedPolicy.asRejectedExecutionHandler();
         }
 
-        ExecutorService answer = camelContext.getExecutorServiceStrategy().newThreadPool(getId(), getThreadName(), getPoolSize(), max,
+        ExecutorService answer = getCamelContext().getExecutorServiceStrategy().newThreadPool(getId(), getThreadName(), getPoolSize(), max,
                     getKeepAliveTime(), getTimeUnit(), getMaxQueueSize(), rejected, isDaemon());
         return answer;
     }
 
     protected abstract CamelContext getCamelContextWithId(String camelContextId);
 
-    public Class getObjectType() {
+    public Class<ExecutorService> getObjectType() {
         return ExecutorService.class;
     }
 
-    public boolean isSingleton() {
-        return true;
-    }
-
     public Integer getPoolSize() {
         return poolSize;
     }
@@ -160,20 +147,4 @@ public abstract class AbstractCamelThreadPoolFactoryBean extends IdentifiedType
         this.daemon = daemon;
     }
 
-    public String getCamelContextId() {
-        return camelContextId;
-    }
-
-    public void setCamelContextId(String camelContextId) {
-        this.camelContextId = camelContextId;
-    }
-
-    public CamelContext getCamelContext() {
-        return camelContext;
-    }
-
-    public void setCamelContext(CamelContext camelContext) {
-        this.camelContext = camelContext;
-    }
-
 }
\ No newline at end of file
diff --git a/tests/camel-itest-osgi/src/test/java/org/apache/camel/itest/osgi/blueprint/OSGiBlueprintTestSupport.java b/tests/camel-itest-osgi/src/test/java/org/apache/camel/itest/osgi/blueprint/OSGiBlueprintTestSupport.java
index ff9c225d873..b898dfc7f78 100644
--- a/tests/camel-itest-osgi/src/test/java/org/apache/camel/itest/osgi/blueprint/OSGiBlueprintTestSupport.java
+++ b/tests/camel-itest-osgi/src/test/java/org/apache/camel/itest/osgi/blueprint/OSGiBlueprintTestSupport.java
@@ -20,6 +20,7 @@ import java.io.Closeable;
 import java.io.IOException;
 import java.io.InputStream;
 import java.io.OutputStream;
+import java.lang.reflect.Method;
 
 import org.apache.camel.CamelContext;
 import org.apache.camel.component.seda.SedaComponent;
@@ -150,6 +151,18 @@ public class OSGiBlueprintTestSupport extends AbstractIntegrationTest {
         assertEquals(1, ctx.getRoutes().size());
     }
 
+    @Test
+    public void testEndpointInjection() throws Exception {
+        getInstalledBundle("CamelBlueprintTestBundle10").start();
+        BlueprintContainer ctn = getOsgiService(BlueprintContainer.class, "(osgi.blueprint.container.symbolicname=CamelBlueprintTestBundle10)", 5000);
+        CamelContext ctx = getOsgiService(CamelContext.class, "(camel.context.symbolicname=CamelBlueprintTestBundle10)", 5000);
+        Object producer = ctn.getComponentInstance("producer");
+        assertNotNull(producer);
+        assertEquals(TestProducer.class.getName(), producer.getClass().getName());
+        Method mth = producer.getClass().getMethod("getTestEndpoint");
+        assertNotNull(mth.invoke(producer));
+    }
+
     @Before
     public void setUp() throws Exception {
     }
@@ -182,39 +195,49 @@ public class OSGiBlueprintTestSupport extends AbstractIntegrationTest {
                         .add("OSGI-INF/blueprint/test.xml", OSGiBlueprintTestSupport.class.getResource("blueprint-4.xml"))
                         .add(TestRouteBuilder.class)
                         .set(Constants.BUNDLE_SYMBOLICNAME, "CamelBlueprintTestBundle4")
-                        .build(withBnd())).noStart(),
+                        .set(Constants.DYNAMICIMPORT_PACKAGE, "*")
+                        .build()).noStart(),
 
                 bundle(newBundle()
                         .add("OSGI-INF/blueprint/test.xml", OSGiBlueprintTestSupport.class.getResource("blueprint-5.xml"))
                         .add(TestRouteBuilder.class)
                         .set(Constants.BUNDLE_SYMBOLICNAME, "CamelBlueprintTestBundle5")
-                        .build(withBnd())).noStart(),
+                        .set(Constants.DYNAMICIMPORT_PACKAGE, "*")
+                        .build()).noStart(),
 
                 bundle(newBundle()
                         .add("OSGI-INF/blueprint/test.xml", OSGiBlueprintTestSupport.class.getResource("blueprint-6.xml"))
-                        .set(Constants.DYNAMICIMPORT_PACKAGE, "*")
                         .set(Constants.BUNDLE_SYMBOLICNAME, "CamelBlueprintTestBundle6")
-                        .build(withBnd())).noStart(),
+                        .set(Constants.DYNAMICIMPORT_PACKAGE, "*")
+                        .build()).noStart(),
 
                 bundle(newBundle()
                         .add("OSGI-INF/blueprint/test.xml", OSGiBlueprintTestSupport.class.getResource("blueprint-7.xml"))
                         .add(TestInterceptStrategy.class)
-                        .set(Constants.DYNAMICIMPORT_PACKAGE, "*")
                         .set(Constants.BUNDLE_SYMBOLICNAME, "CamelBlueprintTestBundle7")
+                        .set(Constants.DYNAMICIMPORT_PACKAGE, "*")
                         .build()).noStart(),
 
                 bundle(newBundle()
                         .add("OSGI-INF/blueprint/test.xml", OSGiBlueprintTestSupport.class.getResource("blueprint-8.xml"))
                         .add("org/apache/camel/component/properties/cheese.properties", OSGiBlueprintTestSupport.class.getResource("cheese.properties"))
-                        .set(Constants.DYNAMICIMPORT_PACKAGE, "*")
                         .set(Constants.BUNDLE_SYMBOLICNAME, "CamelBlueprintTestBundle8")
+                        .set(Constants.DYNAMICIMPORT_PACKAGE, "*")
                         .build()).noStart(),
 
                 bundle(newBundle()
                         .add("OSGI-INF/blueprint/test.xml", OSGiBlueprintTestSupport.class.getResource("blueprint-9.xml"))
                         .add(TestRouteBuilder.class)
                         .set(Constants.BUNDLE_SYMBOLICNAME, "CamelBlueprintTestBundle9")
-                        .build(withBnd())).noStart(),
+                        .set(Constants.DYNAMICIMPORT_PACKAGE, "*")
+                        .build()).noStart(),
+
+                bundle(newBundle()
+                        .add("OSGI-INF/blueprint/test.xml", OSGiBlueprintTestSupport.class.getResource("blueprint-10.xml"))
+                        .add(TestProducer.class)
+                        .set(Constants.BUNDLE_SYMBOLICNAME, "CamelBlueprintTestBundle10")
+                        .set(Constants.DYNAMICIMPORT_PACKAGE, "*")
+                        .build()).noStart(),
 
                 // install the spring dm profile
                 profile("spring.dm").version("1.2.0"),
@@ -234,7 +257,7 @@ public class OSGiBlueprintTestSupport extends AbstractIntegrationTest {
 
                 workingDirectory("target/paxrunner/"),
 
-//                vmOption("-Xdebug -Xrunjdwp:transport=dt_socket,server=y,suspend=y,address=5005"),
+//                vmOption("-Xdebug -Xrunjdwp:transport=dt_socket,server=y,suspend=y,address=5008"),
 
                 //felix(),
                 equinox());
diff --git a/tests/camel-itest-osgi/src/test/java/org/apache/camel/itest/osgi/blueprint/TestProducer.java b/tests/camel-itest-osgi/src/test/java/org/apache/camel/itest/osgi/blueprint/TestProducer.java
new file mode 100644
index 00000000000..1d9df600c55
--- /dev/null
+++ b/tests/camel-itest-osgi/src/test/java/org/apache/camel/itest/osgi/blueprint/TestProducer.java
@@ -0,0 +1,30 @@
+/**
+ * Licensed to the Apache Software Foundation (ASF) under one or more
+ * contributor license agreements.  See the NOTICE file distributed with
+ * this work for additional information regarding copyright ownership.
+ * The ASF licenses this file to You under the Apache License, Version 2.0
+ * (the "License"); you may not use this file except in compliance with
+ * the License.  You may obtain a copy of the License at
+ *
+ *      http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+package org.apache.camel.itest.osgi.blueprint;
+
+import org.apache.camel.EndpointInject;
+import org.apache.camel.ProducerTemplate;
+
+public class TestProducer {
+
+    @EndpointInject(ref = "testEndpoint")
+    private ProducerTemplate testEndpoint;
+
+    public ProducerTemplate getTestEndpoint() {
+        return testEndpoint;
+    }
+}
diff --git a/tests/camel-itest-osgi/src/test/resources/org/apache/camel/itest/osgi/blueprint/blueprint-10.xml b/tests/camel-itest-osgi/src/test/resources/org/apache/camel/itest/osgi/blueprint/blueprint-10.xml
new file mode 100644
index 00000000000..d1c9dfd0954
--- /dev/null
+++ b/tests/camel-itest-osgi/src/test/resources/org/apache/camel/itest/osgi/blueprint/blueprint-10.xml
@@ -0,0 +1,26 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<!--
+    Licensed to the Apache Software Foundation (ASF) under one or more
+    contributor license agreements.  See the NOTICE file distributed with
+    this work for additional information regarding copyright ownership.
+    The ASF licenses this file to You under the Apache License, Version 2.0
+    (the "License"); you may not use this file except in compliance with
+    the License.  You may obtain a copy of the License at
+
+    http://www.apache.org/licenses/LICENSE-2.0
+
+    Unless required by applicable law or agreed to in writing, software
+    distributed under the License is distributed on an "AS IS" BASIS,
+    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+    See the License for the specific language governing permissions and
+    limitations under the License.
+-->
+<blueprint xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0">
+
+    <camelContext xmlns="http://camel.apache.org/schema/blueprint">
+        <endpoint id="testEndpoint" uri="seda:test.queue" />
+    </camelContext>
+
+    <bean id="producer" class="org.apache.camel.itest.osgi.blueprint.TestProducer"/>
+
+</blueprint>
