diff --git a/components/camel-websocket/src/main/java/org/apache/camel/component/websocket/DefaultWebsocket.java b/components/camel-websocket/src/main/java/org/apache/camel/component/websocket/DefaultWebsocket.java
index 8cf91a1af11..aa1402a6664 100644
--- a/components/camel-websocket/src/main/java/org/apache/camel/component/websocket/DefaultWebsocket.java
+++ b/components/camel-websocket/src/main/java/org/apache/camel/component/websocket/DefaultWebsocket.java
@@ -17,8 +17,10 @@
 package org.apache.camel.component.websocket;
 
 import java.io.Serializable;
+import java.lang.annotation.Annotation;
 import java.util.UUID;
 
+import org.eclipse.jetty.websocket.api.BatchMode;
 import org.eclipse.jetty.websocket.api.Session;
 import org.eclipse.jetty.websocket.api.annotations.OnWebSocketClose;
 import org.eclipse.jetty.websocket.api.annotations.OnWebSocketConnect;
@@ -28,7 +30,7 @@ import org.slf4j.Logger;
 import org.slf4j.LoggerFactory;
 
 @WebSocket
-public class DefaultWebsocket implements Serializable {
+public class DefaultWebsocket implements Serializable, WebSocket {
     private static final long serialVersionUID = 1L;
     private static final Logger LOG = LoggerFactory.getLogger(DefaultWebsocket.class);
 
@@ -94,4 +96,40 @@ public class DefaultWebsocket implements Serializable {
     public void setConnectionKey(String connectionKey) {
         this.connectionKey = connectionKey;
     }
+
+	@Override
+	public Class<? extends Annotation> annotationType() {
+		// TODO Auto-generated method stub
+		return null;
+	}
+
+	@Override
+	public int inputBufferSize() {
+		// TODO Auto-generated method stub
+		return 0;
+	}
+
+	@Override
+	public int maxBinaryMessageSize() {
+		// TODO Auto-generated method stub
+		return 0;
+	}
+
+	@Override
+	public int maxIdleTime() {
+		// TODO Auto-generated method stub
+		return 0;
+	}
+
+	@Override
+	public int maxTextMessageSize() {
+		// TODO Auto-generated method stub
+		return 0;
+	}
+
+	@Override
+	public BatchMode batchMode() {
+		// TODO Auto-generated method stub
+		return null;
+	}
 }
diff --git a/components/camel-websocket/src/main/java/org/apache/camel/component/websocket/DefaultWebsocketFactory.java b/components/camel-websocket/src/main/java/org/apache/camel/component/websocket/DefaultWebsocketFactory.java
index 6fb01243af9..d37f288c7ce 100644
--- a/components/camel-websocket/src/main/java/org/apache/camel/component/websocket/DefaultWebsocketFactory.java
+++ b/components/camel-websocket/src/main/java/org/apache/camel/component/websocket/DefaultWebsocketFactory.java
@@ -18,7 +18,8 @@ package org.apache.camel.component.websocket;
 
 import javax.servlet.http.HttpServletRequest;
 
-import org.eclipse.jetty.websocket.WebSocket;
+import org.eclipse.jetty.websocket.api.annotations.WebSocket;
+import org.eclipse.jetty.websocket.servlet.ServletUpgradeRequest;
 
 /**
  * Default websocket factory.
@@ -27,7 +28,7 @@ import org.eclipse.jetty.websocket.WebSocket;
 public class DefaultWebsocketFactory implements WebSocketFactory {
 
     @Override
-    public WebSocket newInstance(HttpServletRequest request, String protocol, NodeSynchronization sync, WebsocketConsumer consumer) {
+    public DefaultWebsocket newInstance(ServletUpgradeRequest request, String protocol, NodeSynchronization sync, WebsocketConsumer consumer) {
         return new DefaultWebsocket(sync, consumer);
     }
 }
diff --git a/components/camel-websocket/src/main/java/org/apache/camel/component/websocket/JettyClassPathResource.java b/components/camel-websocket/src/main/java/org/apache/camel/component/websocket/JettyClassPathResource.java
index 9e4e87676d9..69fa843744d 100644
--- a/components/camel-websocket/src/main/java/org/apache/camel/component/websocket/JettyClassPathResource.java
+++ b/components/camel-websocket/src/main/java/org/apache/camel/component/websocket/JettyClassPathResource.java
@@ -22,6 +22,7 @@ import java.io.InputStream;
 import java.io.OutputStream;
 import java.net.MalformedURLException;
 import java.net.URL;
+import java.nio.channels.ReadableByteChannel;
 
 import org.apache.camel.spi.ClassResolver;
 import org.apache.camel.util.IOHelper;
@@ -49,11 +50,6 @@ public class JettyClassPathResource extends Resource {
         return false;
     }
 
-    @Override
-    public void release() {
-        // noop
-    }
-
     @Override
     public boolean exists() {
         InputStream is = resolver.loadResourceAsStream(path);
@@ -102,11 +98,6 @@ public class JettyClassPathResource extends Resource {
         return resolver.loadResourceAsStream(path);
     }
 
-    @Override
-    public OutputStream getOutputStream() throws IOException, SecurityException {
-        return null;
-    }
-
     @Override
     public boolean delete() throws SecurityException {
         return false;
@@ -126,4 +117,15 @@ public class JettyClassPathResource extends Resource {
     public Resource addPath(String path) throws IOException, MalformedURLException {
         return new JettyClassPathResource(resolver, this.path + "/" + path);
     }
+
+	@Override
+	public void close() {
+		// noop
+		
+	}
+
+	@Override
+	public ReadableByteChannel getReadableByteChannel() throws IOException {
+		return null;
+	}
 }
diff --git a/components/camel-websocket/src/main/java/org/apache/camel/component/websocket/WebSocketFactory.java b/components/camel-websocket/src/main/java/org/apache/camel/component/websocket/WebSocketFactory.java
index 6f06038d49e..3e5e641d6b9 100644
--- a/components/camel-websocket/src/main/java/org/apache/camel/component/websocket/WebSocketFactory.java
+++ b/components/camel-websocket/src/main/java/org/apache/camel/component/websocket/WebSocketFactory.java
@@ -18,13 +18,14 @@ package org.apache.camel.component.websocket;
 
 import javax.servlet.http.HttpServletRequest;
 
-import org.eclipse.jetty.websocket.WebSocket;
+import org.eclipse.jetty.websocket.api.annotations.WebSocket;
+import org.eclipse.jetty.websocket.servlet.ServletUpgradeRequest;
 
 /**
  * Web socket factory interface.
  */
 public interface WebSocketFactory {
 
-    WebSocket newInstance(HttpServletRequest request, String protocol, NodeSynchronization sync, WebsocketConsumer consumer);
+    DefaultWebsocket newInstance(ServletUpgradeRequest request, String protocol, NodeSynchronization sync, WebsocketConsumer consumer);
 
 }
diff --git a/components/camel-websocket/src/main/java/org/apache/camel/component/websocket/WebsocketComponent.java b/components/camel-websocket/src/main/java/org/apache/camel/component/websocket/WebsocketComponent.java
index 71c4191a529..d9ab59b2543 100644
--- a/components/camel-websocket/src/main/java/org/apache/camel/component/websocket/WebsocketComponent.java
+++ b/components/camel-websocket/src/main/java/org/apache/camel/component/websocket/WebsocketComponent.java
@@ -340,7 +340,6 @@ public class WebsocketComponent extends UriEndpointComponent {
 
     protected Server createServer() throws Exception {
         Server server = null;
-
         // configure thread pool if min/max given
         if (minThreads != null || maxThreads != null) {
             if (getThreadPool() != null) {
@@ -354,7 +353,7 @@ public class WebsocketComponent extends UriEndpointComponent {
                 qtp.setMaxThreads(maxThreads.intValue());
             }
             // let the thread names indicate they are from the server
-            qtp.setName("CamelJettyWebSocketServer(" + ObjectHelper.getIdentityHashCode(server) + ")");
+            qtp.setName("CamelJettyWebSocketServer(" + "test" + ")");
             try {
                 qtp.start();
             } catch (Exception e) {
diff --git a/components/camel-websocket/src/main/java/org/apache/camel/component/websocket/WebsocketComponentServlet.java b/components/camel-websocket/src/main/java/org/apache/camel/component/websocket/WebsocketComponentServlet.java
index 91173b554bd..c675722bfe8 100644
--- a/components/camel-websocket/src/main/java/org/apache/camel/component/websocket/WebsocketComponentServlet.java
+++ b/components/camel-websocket/src/main/java/org/apache/camel/component/websocket/WebsocketComponentServlet.java
@@ -22,6 +22,9 @@ import java.util.concurrent.ConcurrentMap;
 import javax.servlet.http.HttpServletRequest;
 
 import org.eclipse.jetty.websocket.api.annotations.WebSocket;
+import org.eclipse.jetty.websocket.servlet.ServletUpgradeRequest;
+import org.eclipse.jetty.websocket.servlet.ServletUpgradeResponse;
+import org.eclipse.jetty.websocket.servlet.WebSocketCreator;
 import org.eclipse.jetty.websocket.servlet.WebSocketServlet;
 import org.eclipse.jetty.websocket.servlet.WebSocketServletFactory;
 import org.slf4j.Logger;
@@ -60,7 +63,7 @@ public class WebsocketComponentServlet extends WebSocketServlet {
         consumers.remove(consumer.getPath());
     }
 
-    public WebSocket doWebSocketConnect(HttpServletRequest request, String protocol) {
+    public WebSocket doWebSocketConnect(ServletUpgradeRequest request, String protocol) {
         String protocolKey = protocol;
 
         if (protocol == null || !socketFactory.containsKey(protocol)) {
@@ -82,7 +85,14 @@ public class WebsocketComponentServlet extends WebSocketServlet {
 
 	@Override
 	public void configure(WebSocketServletFactory factory) {
-		// TODO Auto-generated method stub
-		
+		 factory.setCreator(new WebSocketCreator() {
+			    @Override
+			    public Object createWebSocket(ServletUpgradeRequest req, ServletUpgradeResponse resp) {
+	             String protocolKey = "default";
+	
+	              WebSocketFactory factory = socketFactory.get(protocolKey);
+			      return factory.newInstance(req, protocolKey, sync, consumer);
+			    }
+	});
 	}
 }
diff --git a/components/camel-websocket/src/test/java/org/apache/camel/component/websocket/WebscoketEndpointConfigurationTest.java b/components/camel-websocket/src/test/java/org/apache/camel/component/websocket/WebscoketEndpointConfigurationTest.java
index 91c12637154..029529d7064 100644
--- a/components/camel-websocket/src/test/java/org/apache/camel/component/websocket/WebscoketEndpointConfigurationTest.java
+++ b/components/camel-websocket/src/test/java/org/apache/camel/component/websocket/WebscoketEndpointConfigurationTest.java
@@ -43,6 +43,8 @@ public class WebscoketEndpointConfigurationTest extends CamelTestSupport {
         String uri = "websocket://localhost:" + port + "/bar?bufferSize=65000&maxIdleTime=3000";
         WebsocketEndpoint websocketEndpoint = (WebsocketEndpoint)context.getEndpoint(uri);
         WebsocketComponent component = websocketEndpoint.getComponent();
+        component.setMinThreads(1);
+        component.setMaxThreads(11);
         Consumer consumer = websocketEndpoint.createConsumer(processor);
         component.connect((WebsocketProducerConsumer) consumer);
         
diff --git a/components/camel-websocket/src/test/java/org/apache/camel/component/websocket/WebsocketClientCamelRouteTest.java b/components/camel-websocket/src/test/java/org/apache/camel/component/websocket/WebsocketClientCamelRouteTest.java
index ca44a401fa6..f226a273a30 100644
--- a/components/camel-websocket/src/test/java/org/apache/camel/component/websocket/WebsocketClientCamelRouteTest.java
+++ b/components/camel-websocket/src/test/java/org/apache/camel/component/websocket/WebsocketClientCamelRouteTest.java
@@ -96,6 +96,8 @@ public class WebsocketClientCamelRouteTest extends CamelTestSupport {
             public void configure() {
                 WebsocketComponent websocketComponent = getContext().getComponent("websocket", WebsocketComponent.class);
                 websocketComponent.setPort(port);
+                websocketComponent.setMinThreads(1);
+                websocketComponent.setMaxThreads(11);
 
                 from("websocket://test")
                         .log(">>> Message received from WebSocket Client : ${body}")
diff --git a/components/camel-websocket/src/test/java/org/apache/camel/component/websocket/WebsocketComponentRouteExampleTest.java b/components/camel-websocket/src/test/java/org/apache/camel/component/websocket/WebsocketComponentRouteExampleTest.java
index 254e01672c1..76b14a03b8a 100644
--- a/components/camel-websocket/src/test/java/org/apache/camel/component/websocket/WebsocketComponentRouteExampleTest.java
+++ b/components/camel-websocket/src/test/java/org/apache/camel/component/websocket/WebsocketComponentRouteExampleTest.java
@@ -92,6 +92,8 @@ public class WebsocketComponentRouteExampleTest extends CamelTestSupport {
                 WebsocketComponent websocketComponent = getContext().getComponent("websocket", WebsocketComponent.class);
                 websocketComponent.setHost("localhost");
                 websocketComponent.setPort(port);
+                websocketComponent.setMaxThreads(11);
+                websocketComponent.setMinThreads(1);
 
                 from("websocket://echo")
                     .log(">>> Message received from WebSocket Client : ${body}")
diff --git a/components/camel-websocket/src/test/java/org/apache/camel/component/websocket/WebsocketComponentServletTest.java b/components/camel-websocket/src/test/java/org/apache/camel/component/websocket/WebsocketComponentServletTest.java
index 2b24fa592d1..063d7ca0856 100644
--- a/components/camel-websocket/src/test/java/org/apache/camel/component/websocket/WebsocketComponentServletTest.java
+++ b/components/camel-websocket/src/test/java/org/apache/camel/component/websocket/WebsocketComponentServletTest.java
@@ -21,7 +21,8 @@ import java.util.Map;
 
 import javax.servlet.http.HttpServletRequest;
 
-import org.eclipse.jetty.websocket.WebSocket;
+import org.eclipse.jetty.websocket.api.annotations.WebSocket;
+import org.eclipse.jetty.websocket.servlet.ServletUpgradeRequest;
 import org.junit.Before;
 import org.junit.Test;
 import org.junit.runner.RunWith;
@@ -50,7 +51,7 @@ public class WebsocketComponentServletTest {
     @Mock
     private NodeSynchronization sync;
     @Mock
-    private HttpServletRequest request;
+    private ServletUpgradeRequest request;
 
     private WebsocketComponentServlet websocketComponentServlet;
 
diff --git a/components/camel-websocket/src/test/java/org/apache/camel/component/websocket/WebsocketComponentTest.java b/components/camel-websocket/src/test/java/org/apache/camel/component/websocket/WebsocketComponentTest.java
index 621eb9fb4e2..9966ab62ba1 100644
--- a/components/camel-websocket/src/test/java/org/apache/camel/component/websocket/WebsocketComponentTest.java
+++ b/components/camel-websocket/src/test/java/org/apache/camel/component/websocket/WebsocketComponentTest.java
@@ -22,7 +22,7 @@ import org.apache.camel.Endpoint;
 import org.apache.camel.impl.DefaultCamelContext;
 import org.eclipse.jetty.server.Connector;
 import org.eclipse.jetty.server.Server;
-import org.eclipse.jetty.server.nio.SelectChannelConnector;
+import org.eclipse.jetty.server.ServerConnector;
 import org.eclipse.jetty.servlet.ServletContextHandler;
 import org.eclipse.jetty.servlet.ServletHolder;
 import org.junit.Before;
@@ -73,12 +73,12 @@ public class WebsocketComponentTest {
     public void setUp() throws Exception {
         component = new WebsocketComponent();
         component.setCamelContext(new DefaultCamelContext());
-
-        Connector connector = new SelectChannelConnector();
+        System.out.println("Server : " + server.isStarted());
+        server = component.createServer();
+        System.out.println("Server : " + server.isStarted());
+        ServerConnector connector = new ServerConnector(server);
         connector.setHost("localhost");
         connector.setPort(1988);
-
-        server = component.createServer();
         server.addConnector(connector);
 
         WebsocketEndpoint endpoint = (WebsocketEndpoint) component.createEndpoint("websocket://x");
@@ -99,8 +99,8 @@ public class WebsocketComponentTest {
     public void testCreateServerWithoutStaticContent() throws Exception {
         ServletContextHandler handler = component.createContext(server, server.getConnectors()[0], null);
         assertEquals(1, server.getConnectors().length);
-        assertEquals("localhost", server.getConnectors()[0].getHost());
-        assertEquals(1988, server.getConnectors()[0].getPort());
+        assertEquals("localhost", ((ServerConnector) server.getConnectors()[0]).getHost());
+        assertEquals(1988,((ServerConnector) server.getConnectors()[0]).getPort());
         assertFalse(server.getConnectors()[0].isStarted());
         assertEquals(handler, server.getHandler());
         assertEquals(1, server.getHandlers().length);
@@ -116,8 +116,8 @@ public class WebsocketComponentTest {
         ServletContextHandler handler = component.createContext(server, server.getConnectors()[0], null);
         Server server = component.createStaticResourcesServer(handler, "localhost", 1988, "classpath:public");
         assertEquals(1, server.getConnectors().length);
-        assertEquals("localhost", server.getConnectors()[0].getHost());
-        assertEquals(1988, server.getConnectors()[0].getPort());
+        assertEquals("localhost", ((ServerConnector) server.getConnectors()[0]).getHost());
+        assertEquals(1988,((ServerConnector) server.getConnectors()[0]).getPort());
         assertFalse(server.getConnectors()[0].isStarted());
         assertEquals(handler, server.getHandler());
         assertEquals(1, server.getHandlers().length);
diff --git a/components/camel-websocket/src/test/java/org/apache/camel/component/websocket/WebsocketConsumerRouteTest.java b/components/camel-websocket/src/test/java/org/apache/camel/component/websocket/WebsocketConsumerRouteTest.java
index 3f76c00cd25..ea1874a213d 100644
--- a/components/camel-websocket/src/test/java/org/apache/camel/component/websocket/WebsocketConsumerRouteTest.java
+++ b/components/camel-websocket/src/test/java/org/apache/camel/component/websocket/WebsocketConsumerRouteTest.java
@@ -109,6 +109,8 @@ public class WebsocketConsumerRouteTest extends CamelTestSupport {
             public void configure() {
                 WebsocketComponent websocketComponent = (WebsocketComponent) context.getComponent("websocket");
                 websocketComponent.setPort(port);
+                websocketComponent.setMaxThreads(11);
+                websocketComponent.setMinThreads(1);
 
                 from("websocket://echo")
                     .log(">>> Message received from WebSocket Client : ${body}")
diff --git a/components/camel-websocket/src/test/java/org/apache/camel/component/websocket/WebsocketProducerRouteExampleTest.java b/components/camel-websocket/src/test/java/org/apache/camel/component/websocket/WebsocketProducerRouteExampleTest.java
index 50429d9153f..aea401a6bb5 100644
--- a/components/camel-websocket/src/test/java/org/apache/camel/component/websocket/WebsocketProducerRouteExampleTest.java
+++ b/components/camel-websocket/src/test/java/org/apache/camel/component/websocket/WebsocketProducerRouteExampleTest.java
@@ -145,6 +145,9 @@ public class WebsocketProducerRouteExampleTest extends CamelTestSupport {
     protected RouteBuilder createRouteBuilder() throws Exception {
         return new RouteBuilder() {
             public void configure() {
+                WebsocketComponent websocketComponent = (WebsocketComponent) context.getComponent("websocket");
+                websocketComponent.setMaxThreads(11);
+                websocketComponent.setMinThreads(1);
                 from("direct:shop")
                     .log(">>> Message received from Shopping center : ${body}")
                     .to("websocket://localhost:" + port + "/shop");
diff --git a/components/camel-websocket/src/test/java/org/apache/camel/component/websocket/WebsocketProducerRouteRestartTest.java b/components/camel-websocket/src/test/java/org/apache/camel/component/websocket/WebsocketProducerRouteRestartTest.java
index b1b2ce20830..3f9c4d2a94b 100644
--- a/components/camel-websocket/src/test/java/org/apache/camel/component/websocket/WebsocketProducerRouteRestartTest.java
+++ b/components/camel-websocket/src/test/java/org/apache/camel/component/websocket/WebsocketProducerRouteRestartTest.java
@@ -120,6 +120,9 @@ public class WebsocketProducerRouteRestartTest extends CamelTestSupport {
     protected RouteBuilder createRouteBuilder() throws Exception {
         return new RouteBuilder() {
             public void configure() {
+                WebsocketComponent websocketComponent = (WebsocketComponent) context.getComponent("websocket");
+                websocketComponent.setMaxThreads(11);
+                websocketComponent.setMinThreads(1);
                 from("direct:shop")
                     .id(ROUTE_ID)
                     .log(">>> Message received from Shopping center : ${body}")
diff --git a/components/camel-websocket/src/test/java/org/apache/camel/component/websocket/WebsocketProducerTest.java b/components/camel-websocket/src/test/java/org/apache/camel/component/websocket/WebsocketProducerTest.java
index a05f6d8ccb7..f518eaa61b4 100644
--- a/components/camel-websocket/src/test/java/org/apache/camel/component/websocket/WebsocketProducerTest.java
+++ b/components/camel-websocket/src/test/java/org/apache/camel/component/websocket/WebsocketProducerTest.java
@@ -22,7 +22,8 @@ import java.util.Collection;
 
 import org.apache.camel.Exchange;
 import org.apache.camel.Message;
-import org.eclipse.jetty.websocket.WebSocket.Connection;
+import org.eclipse.jetty.websocket.api.RemoteEndpoint;
+import org.eclipse.jetty.websocket.api.Session;
 import org.junit.Before;
 import org.junit.Test;
 import org.junit.runner.RunWith;
@@ -55,7 +56,7 @@ public class WebsocketProducerTest {
     @Mock
     private WebsocketStore store;
     @Mock
-    private Connection connection;
+    private Session session;
     @Mock
     private DefaultWebsocket defaultWebsocket1;
     @Mock
@@ -64,6 +65,8 @@ public class WebsocketProducerTest {
     private Exchange exchange;
     @Mock
     private Message inMessage;
+    @Mock
+    private RemoteEndpoint remoteEndpoint;
 
     private IOException exception = new IOException("BAD NEWS EVERYONE!");
     private WebsocketProducer websocketProducer;
@@ -83,21 +86,22 @@ public class WebsocketProducerTest {
         when(inMessage.getHeader(WebsocketConstants.SEND_TO_ALL, false, Boolean.class)).thenReturn(false);
         when(inMessage.getHeader(WebsocketConstants.CONNECTION_KEY, String.class)).thenReturn(SESSION_KEY);
         when(store.get(SESSION_KEY)).thenReturn(defaultWebsocket1);
-        when(defaultWebsocket1.getConnection()).thenReturn(connection);
-        when(connection.isOpen()).thenReturn(true);
+        when(defaultWebsocket1.getSession()).thenReturn(session);
+        when(session.isOpen()).thenReturn(true);
+        when(session.getRemote()).thenReturn(remoteEndpoint);
 
         websocketProducer.process(exchange);
 
-        InOrder inOrder = inOrder(endpoint, store, connection, defaultWebsocket1, defaultWebsocket2, exchange, inMessage);
+        InOrder inOrder = inOrder(endpoint, store, session, defaultWebsocket1, defaultWebsocket2, exchange, inMessage, remoteEndpoint);
         inOrder.verify(exchange, times(1)).getIn();
         inOrder.verify(inMessage, times(1)).getMandatoryBody();
         inOrder.verify(inMessage, times(1)).getHeader(WebsocketConstants.SEND_TO_ALL, false, Boolean.class);
         inOrder.verify(inMessage, times(1)).getHeader(WebsocketConstants.CONNECTION_KEY, String.class);
         inOrder.verify(store, times(1)).get(SESSION_KEY);
-        inOrder.verify(defaultWebsocket1, times(1)).getConnection();
-        inOrder.verify(connection, times(1)).isOpen();
-        inOrder.verify(defaultWebsocket1, times(1)).getConnection();
-        inOrder.verify(connection, times(1)).sendMessage(MESSAGE);
+        inOrder.verify(defaultWebsocket1, times(1)).getSession();
+        inOrder.verify(session, times(1)).isOpen();
+        inOrder.verify(defaultWebsocket1, times(1)).getSession();
+        inOrder.verify(remoteEndpoint, times(1)).sendString(MESSAGE);
         inOrder.verifyNoMoreInteractions();
     }
 
@@ -108,9 +112,10 @@ public class WebsocketProducerTest {
         when(inMessage.getHeader(WebsocketConstants.SEND_TO_ALL, false, Boolean.class)).thenReturn(false);
         when(inMessage.getHeader(WebsocketConstants.CONNECTION_KEY, String.class)).thenReturn(SESSION_KEY);
         when(store.get(SESSION_KEY)).thenReturn(defaultWebsocket1);
-        when(defaultWebsocket1.getConnection()).thenReturn(connection);
-        when(connection.isOpen()).thenReturn(true);
-        doThrow(exception).when(connection).sendMessage(MESSAGE);
+        when(defaultWebsocket1.getSession()).thenReturn(session);
+        when(session.isOpen()).thenReturn(true);
+        when(session.getRemote()).thenReturn(remoteEndpoint);
+        doThrow(exception).when(remoteEndpoint).sendString(MESSAGE);
 
         try {
             websocketProducer.process(exchange);
@@ -119,16 +124,16 @@ public class WebsocketProducerTest {
             assertEquals(exception, ioe);
         }
 
-        InOrder inOrder = inOrder(endpoint, store, connection, defaultWebsocket1, defaultWebsocket2, exchange, inMessage);
+        InOrder inOrder = inOrder(endpoint, store, session, defaultWebsocket1, defaultWebsocket2, exchange, inMessage, remoteEndpoint);
         inOrder.verify(exchange, times(1)).getIn();
         inOrder.verify(inMessage, times(1)).getMandatoryBody();
         inOrder.verify(inMessage, times(1)).getHeader(WebsocketConstants.SEND_TO_ALL, false, Boolean.class);
         inOrder.verify(inMessage, times(1)).getHeader(WebsocketConstants.CONNECTION_KEY, String.class);
         inOrder.verify(store, times(1)).get(SESSION_KEY);
-        inOrder.verify(defaultWebsocket1, times(1)).getConnection();
-        inOrder.verify(connection, times(1)).isOpen();
-        inOrder.verify(defaultWebsocket1, times(1)).getConnection();
-        inOrder.verify(connection, times(1)).sendMessage(MESSAGE);
+        inOrder.verify(defaultWebsocket1, times(1)).getSession();
+        inOrder.verify(session, times(1)).isOpen();
+        inOrder.verify(defaultWebsocket1, times(1)).getSession();
+        inOrder.verify(remoteEndpoint, times(1)).sendString(MESSAGE);
         inOrder.verifyNoMoreInteractions();
     }
 
@@ -138,25 +143,26 @@ public class WebsocketProducerTest {
         when(inMessage.getMandatoryBody()).thenReturn(MESSAGE);
         when(inMessage.getHeader(WebsocketConstants.SEND_TO_ALL, false, Boolean.class)).thenReturn(true);
         when(store.getAll()).thenReturn(sockets);
-        when(defaultWebsocket1.getConnection()).thenReturn(connection);
-        when(defaultWebsocket2.getConnection()).thenReturn(connection);
-        when(connection.isOpen()).thenReturn(true);
+        when(defaultWebsocket1.getSession()).thenReturn(session);
+        when(defaultWebsocket2.getSession()).thenReturn(session);
+        when(session.isOpen()).thenReturn(true);
+        when(session.getRemote()).thenReturn(remoteEndpoint);
 
         websocketProducer.process(exchange);
 
-        InOrder inOrder = inOrder(endpoint, store, connection, defaultWebsocket1, defaultWebsocket2, exchange, inMessage);
+        InOrder inOrder = inOrder(endpoint, store, session, defaultWebsocket1, defaultWebsocket2, exchange, inMessage, remoteEndpoint);
         inOrder.verify(exchange, times(1)).getIn();
         inOrder.verify(inMessage, times(1)).getMandatoryBody();
         inOrder.verify(inMessage, times(1)).getHeader(WebsocketConstants.SEND_TO_ALL, false, Boolean.class);
         inOrder.verify(store, times(1)).getAll();
-        inOrder.verify(defaultWebsocket1, times(1)).getConnection();
-        inOrder.verify(connection, times(1)).isOpen();
-        inOrder.verify(defaultWebsocket1, times(1)).getConnection();
-        inOrder.verify(connection, times(1)).sendMessage(MESSAGE);
-        inOrder.verify(defaultWebsocket2, times(1)).getConnection();
-        inOrder.verify(connection, times(1)).isOpen();
-        inOrder.verify(defaultWebsocket2, times(1)).getConnection();
-        inOrder.verify(connection, times(1)).sendMessage(MESSAGE);
+        inOrder.verify(defaultWebsocket1, times(1)).getSession();
+        inOrder.verify(session, times(1)).isOpen();
+        inOrder.verify(defaultWebsocket1, times(1)).getSession();
+        inOrder.verify(remoteEndpoint, times(1)).sendString(MESSAGE);
+        inOrder.verify(defaultWebsocket2, times(1)).getSession();
+        inOrder.verify(session, times(1)).isOpen();
+        inOrder.verify(defaultWebsocket2, times(1)).getSession();
+        inOrder.verify(remoteEndpoint, times(1)).sendString(MESSAGE);
         inOrder.verifyNoMoreInteractions();
     }
 
@@ -166,10 +172,11 @@ public class WebsocketProducerTest {
         when(inMessage.getMandatoryBody()).thenReturn(MESSAGE);
         when(inMessage.getHeader(WebsocketConstants.SEND_TO_ALL, false, Boolean.class)).thenReturn(true);
         when(store.getAll()).thenReturn(sockets);
-        when(defaultWebsocket1.getConnection()).thenReturn(connection);
-        when(defaultWebsocket2.getConnection()).thenReturn(connection);
-        doThrow(exception).when(connection).sendMessage(MESSAGE);
-        when(connection.isOpen()).thenReturn(true);
+        when(defaultWebsocket1.getSession()).thenReturn(session);
+        when(defaultWebsocket2.getSession()).thenReturn(session);
+        when(session.getRemote()).thenReturn(remoteEndpoint);
+        doThrow(exception).when(remoteEndpoint).sendString(MESSAGE);
+        when(session.isOpen()).thenReturn(true);
 
         try {
             websocketProducer.process(exchange);
@@ -178,19 +185,19 @@ public class WebsocketProducerTest {
             assertEquals(exception, e.getCause());
         }
 
-        InOrder inOrder = inOrder(endpoint, store, connection, defaultWebsocket1, defaultWebsocket2, exchange, inMessage);
+        InOrder inOrder = inOrder(endpoint, store, session, defaultWebsocket1, defaultWebsocket2, exchange, inMessage, remoteEndpoint);
         inOrder.verify(exchange, times(1)).getIn();
         inOrder.verify(inMessage, times(1)).getMandatoryBody();
         inOrder.verify(inMessage, times(1)).getHeader(WebsocketConstants.SEND_TO_ALL, false, Boolean.class);
         inOrder.verify(store, times(1)).getAll();
-        inOrder.verify(defaultWebsocket1, times(1)).getConnection();
-        inOrder.verify(connection, times(1)).isOpen();
-        inOrder.verify(defaultWebsocket1, times(1)).getConnection();
-        inOrder.verify(connection, times(1)).sendMessage(MESSAGE);
-        inOrder.verify(defaultWebsocket2, times(1)).getConnection();
-        inOrder.verify(connection, times(1)).isOpen();
-        inOrder.verify(defaultWebsocket2, times(1)).getConnection();
-        inOrder.verify(connection, times(1)).sendMessage(MESSAGE);
+        inOrder.verify(defaultWebsocket1, times(1)).getSession();
+        inOrder.verify(session, times(1)).isOpen();
+        inOrder.verify(defaultWebsocket1, times(1)).getSession();
+        inOrder.verify(remoteEndpoint, times(1)).sendString(MESSAGE);
+        inOrder.verify(defaultWebsocket2, times(1)).getSession();
+        inOrder.verify(session, times(1)).isOpen();
+        inOrder.verify(defaultWebsocket2, times(1)).getSession();
+        inOrder.verify(remoteEndpoint, times(1)).sendString(MESSAGE);
         inOrder.verifyNoMoreInteractions();
     }
 
@@ -210,7 +217,7 @@ public class WebsocketProducerTest {
             assertNull(e.getCause());
         }
 
-        InOrder inOrder = inOrder(endpoint, store, connection, defaultWebsocket1, defaultWebsocket2, exchange, inMessage);
+        InOrder inOrder = inOrder(endpoint, store, session, defaultWebsocket1, defaultWebsocket2, exchange, inMessage);
         inOrder.verify(exchange, times(1)).getIn();
         inOrder.verify(inMessage, times(1)).getMandatoryBody();
         inOrder.verify(inMessage, times(1)).getHeader(WebsocketConstants.SEND_TO_ALL, false, Boolean.class);
@@ -220,37 +227,40 @@ public class WebsocketProducerTest {
 
     @Test
     public void testSendMessage() throws Exception {
-        when(defaultWebsocket1.getConnection()).thenReturn(connection);
-        when(connection.isOpen()).thenReturn(true);
+        when(defaultWebsocket1.getSession()).thenReturn(session);
+        when(session.isOpen()).thenReturn(true);
+        when(session.getRemote()).thenReturn(remoteEndpoint);
 
         websocketProducer.sendMessage(defaultWebsocket1, MESSAGE);
 
-        InOrder inOrder = inOrder(endpoint, store, connection, defaultWebsocket1, defaultWebsocket2, exchange, inMessage);
-        inOrder.verify(defaultWebsocket1, times(1)).getConnection();
-        inOrder.verify(connection, times(1)).isOpen();
-        inOrder.verify(defaultWebsocket1, times(1)).getConnection();
-        inOrder.verify(connection, times(1)).sendMessage(MESSAGE);
+        InOrder inOrder = inOrder(endpoint, store, session, defaultWebsocket1, defaultWebsocket2, exchange, inMessage,remoteEndpoint);
+        inOrder.verify(defaultWebsocket1, times(1)).getSession();
+        inOrder.verify(session, times(1)).isOpen();
+        inOrder.verify(defaultWebsocket1, times(1)).getSession();
+        inOrder.verify(remoteEndpoint, times(1)).sendString(MESSAGE);
         inOrder.verifyNoMoreInteractions();
     }
 
     @Test
     public void testSendMessageConnetionIsClosed() throws Exception {
-        when(defaultWebsocket1.getConnection()).thenReturn(connection);
-        when(connection.isOpen()).thenReturn(false);
+        when(defaultWebsocket1.getSession()).thenReturn(session);
+        when(session.isOpen()).thenReturn(false);
+        when(session.getRemote()).thenReturn(remoteEndpoint);
 
         websocketProducer.sendMessage(defaultWebsocket1, MESSAGE);
 
-        InOrder inOrder = inOrder(endpoint, store, connection, defaultWebsocket1, defaultWebsocket2, exchange, inMessage);
-        inOrder.verify(defaultWebsocket1, times(1)).getConnection();
-        inOrder.verify(connection, times(1)).isOpen();
+        InOrder inOrder = inOrder(endpoint, store, session, defaultWebsocket1, defaultWebsocket2, exchange, inMessage, remoteEndpoint);
+        inOrder.verify(defaultWebsocket1, times(1)).getSession();
+        inOrder.verify(session, times(1)).isOpen();
         inOrder.verifyNoMoreInteractions();
     }
 
     @Test
     public void testSendMessageWithException() throws Exception {
-        when(defaultWebsocket1.getConnection()).thenReturn(connection);
-        when(connection.isOpen()).thenReturn(true);
-        doThrow(exception).when(connection).sendMessage(MESSAGE);
+        when(defaultWebsocket1.getSession()).thenReturn(session);
+        when(session.isOpen()).thenReturn(true);
+        when(session.getRemote()).thenReturn(remoteEndpoint);
+        doThrow(exception).when(remoteEndpoint).sendString(MESSAGE);
 
         try {
             websocketProducer.sendMessage(defaultWebsocket1, MESSAGE);
@@ -259,11 +269,11 @@ public class WebsocketProducerTest {
             assertEquals(exception, ioe);
         }
 
-        InOrder inOrder = inOrder(endpoint, store, connection, defaultWebsocket1, defaultWebsocket2, exchange, inMessage);
-        inOrder.verify(defaultWebsocket1, times(1)).getConnection();
-        inOrder.verify(connection, times(1)).isOpen();
-        inOrder.verify(defaultWebsocket1, times(1)).getConnection();
-        inOrder.verify(connection, times(1)).sendMessage(MESSAGE);
+        InOrder inOrder = inOrder(endpoint, store, session, defaultWebsocket1, defaultWebsocket2, exchange, inMessage, remoteEndpoint);
+        inOrder.verify(defaultWebsocket1, times(1)).getSession();
+        inOrder.verify(session, times(1)).isOpen();
+        inOrder.verify(defaultWebsocket1, times(1)).getSession();
+        inOrder.verify(remoteEndpoint, times(1)).sendString(MESSAGE);
         inOrder.verifyNoMoreInteractions();
     }
 
@@ -289,32 +299,34 @@ public class WebsocketProducerTest {
     @Test
     public void testSendToAll() throws Exception {
         when(store.getAll()).thenReturn(sockets);
-        when(defaultWebsocket1.getConnection()).thenReturn(connection);
-        when(defaultWebsocket2.getConnection()).thenReturn(connection);
-        when(connection.isOpen()).thenReturn(true);
+        when(defaultWebsocket1.getSession()).thenReturn(session);
+        when(defaultWebsocket2.getSession()).thenReturn(session);
+        when(session.getRemote()).thenReturn(remoteEndpoint);
+        when(session.isOpen()).thenReturn(true);
 
         websocketProducer.sendToAll(store, MESSAGE, exchange);
 
-        InOrder inOrder = inOrder(store, connection, defaultWebsocket1, defaultWebsocket2);
+        InOrder inOrder = inOrder(store, session, defaultWebsocket1, defaultWebsocket2, remoteEndpoint);
         inOrder.verify(store, times(1)).getAll();
-        inOrder.verify(defaultWebsocket1, times(1)).getConnection();
-        inOrder.verify(connection, times(1)).isOpen();
-        inOrder.verify(defaultWebsocket1, times(1)).getConnection();
-        inOrder.verify(connection, times(1)).sendMessage(MESSAGE);
-        inOrder.verify(defaultWebsocket2, times(1)).getConnection();
-        inOrder.verify(connection, times(1)).isOpen();
-        inOrder.verify(defaultWebsocket2, times(1)).getConnection();
-        inOrder.verify(connection, times(1)).sendMessage(MESSAGE);
+        inOrder.verify(defaultWebsocket1, times(1)).getSession();
+        inOrder.verify(session, times(1)).isOpen();
+        inOrder.verify(defaultWebsocket1, times(1)).getSession();
+        inOrder.verify(remoteEndpoint, times(1)).sendString(MESSAGE);
+        inOrder.verify(defaultWebsocket2, times(1)).getSession();
+        inOrder.verify(session, times(1)).isOpen();
+        inOrder.verify(defaultWebsocket2, times(1)).getSession();
+        inOrder.verify(remoteEndpoint, times(1)).sendString(MESSAGE);
         inOrder.verifyNoMoreInteractions();
     }
 
     @Test
     public void testSendToAllWithExcpetion() throws Exception {
         when(store.getAll()).thenReturn(sockets);
-        when(defaultWebsocket1.getConnection()).thenReturn(connection);
-        when(defaultWebsocket2.getConnection()).thenReturn(connection);
-        doThrow(exception).when(connection).sendMessage(MESSAGE);
-        when(connection.isOpen()).thenReturn(true);
+        when(defaultWebsocket1.getSession()).thenReturn(session);
+        when(defaultWebsocket2.getSession()).thenReturn(session);
+        when(session.getRemote()).thenReturn(remoteEndpoint);
+        doThrow(exception).when(remoteEndpoint).sendString(MESSAGE);
+        when(session.isOpen()).thenReturn(true);
 
         try {
             websocketProducer.sendToAll(store, MESSAGE, exchange);
@@ -323,16 +335,16 @@ public class WebsocketProducerTest {
             assertEquals(exception, e.getCause());
         }
 
-        InOrder inOrder = inOrder(store, connection, defaultWebsocket1, defaultWebsocket2);
+        InOrder inOrder = inOrder(store, session, defaultWebsocket1, defaultWebsocket2, remoteEndpoint);
         inOrder.verify(store, times(1)).getAll();
-        inOrder.verify(defaultWebsocket1, times(1)).getConnection();
-        inOrder.verify(connection, times(1)).isOpen();
-        inOrder.verify(defaultWebsocket1, times(1)).getConnection();
-        inOrder.verify(connection, times(1)).sendMessage(MESSAGE);
-        inOrder.verify(defaultWebsocket2, times(1)).getConnection();
-        inOrder.verify(connection, times(1)).isOpen();
-        inOrder.verify(defaultWebsocket2, times(1)).getConnection();
-        inOrder.verify(connection, times(1)).sendMessage(MESSAGE);
+        inOrder.verify(defaultWebsocket1, times(1)).getSession();
+        inOrder.verify(session, times(1)).isOpen();
+        inOrder.verify(defaultWebsocket1, times(1)).getSession();
+        inOrder.verify(remoteEndpoint, times(1)).sendString(MESSAGE);
+        inOrder.verify(defaultWebsocket2, times(1)).getSession();
+        inOrder.verify(session, times(1)).isOpen();
+        inOrder.verify(defaultWebsocket2, times(1)).getSession();
+        inOrder.verify(remoteEndpoint, times(1)).sendString(MESSAGE);
         inOrder.verifyNoMoreInteractions();
     }
 }
diff --git a/components/camel-websocket/src/test/java/org/apache/camel/component/websocket/WebsocketRouteExampleTest.java b/components/camel-websocket/src/test/java/org/apache/camel/component/websocket/WebsocketRouteExampleTest.java
index 52989c2d225..3606a27f196 100644
--- a/components/camel-websocket/src/test/java/org/apache/camel/component/websocket/WebsocketRouteExampleTest.java
+++ b/components/camel-websocket/src/test/java/org/apache/camel/component/websocket/WebsocketRouteExampleTest.java
@@ -88,6 +88,8 @@ public class WebsocketRouteExampleTest extends CamelTestSupport {
             public void configure() {
                 WebsocketComponent websocketComponent = (WebsocketComponent) context.getComponent("websocket");
                 websocketComponent.setPort(port);
+                websocketComponent.setMinThreads(1);
+                websocketComponent.setMaxThreads(11);
 
                 // START SNIPPET: e1
                 // expose a echo websocket client, that sends back an echo
diff --git a/components/camel-websocket/src/test/java/org/apache/camel/component/websocket/WebsocketSSLContextInUriRouteExampleTest.java b/components/camel-websocket/src/test/java/org/apache/camel/component/websocket/WebsocketSSLContextInUriRouteExampleTest.java
index a12fadcb6b1..5f6e8d56ae7 100644
--- a/components/camel-websocket/src/test/java/org/apache/camel/component/websocket/WebsocketSSLContextInUriRouteExampleTest.java
+++ b/components/camel-websocket/src/test/java/org/apache/camel/component/websocket/WebsocketSSLContextInUriRouteExampleTest.java
@@ -164,7 +164,9 @@ public class WebsocketSSLContextInUriRouteExampleTest extends CamelTestSupport {
     protected RouteBuilder createRouteBuilder() throws Exception {
         return new RouteBuilder() {
             public void configure() {
-
+                WebsocketComponent websocketComponent = (WebsocketComponent) context.getComponent("websocket");
+                websocketComponent.setMinThreads(1);
+                websocketComponent.setMaxThreads(11);
                 from(uri)
                      .log(">>> Message received from WebSocket Client : ${body}")
                      .to("mock:client")
diff --git a/components/camel-websocket/src/test/java/org/apache/camel/component/websocket/WebsocketSSLRouteExampleTest.java b/components/camel-websocket/src/test/java/org/apache/camel/component/websocket/WebsocketSSLRouteExampleTest.java
index 13c42b4c6d2..251cccc3ac2 100644
--- a/components/camel-websocket/src/test/java/org/apache/camel/component/websocket/WebsocketSSLRouteExampleTest.java
+++ b/components/camel-websocket/src/test/java/org/apache/camel/component/websocket/WebsocketSSLRouteExampleTest.java
@@ -161,6 +161,8 @@ public class WebsocketSSLRouteExampleTest extends CamelTestSupport {
                 WebsocketComponent websocketComponent = (WebsocketComponent) context.getComponent("websocket");
                 websocketComponent.setSslContextParameters(defineSSLContextParameters());
                 websocketComponent.setPort(port);
+                websocketComponent.setMinThreads(1);
+                websocketComponent.setMaxThreads(11);
 
                 from("websocket://test")
                         .log(">>> Message received from WebSocket Client : ${body}")
diff --git a/components/camel-websocket/src/test/java/org/apache/camel/component/websocket/WebsocketTwoRoutesExampleTest.java b/components/camel-websocket/src/test/java/org/apache/camel/component/websocket/WebsocketTwoRoutesExampleTest.java
index 0c18045516e..eb8d8f7915a 100644
--- a/components/camel-websocket/src/test/java/org/apache/camel/component/websocket/WebsocketTwoRoutesExampleTest.java
+++ b/components/camel-websocket/src/test/java/org/apache/camel/component/websocket/WebsocketTwoRoutesExampleTest.java
@@ -129,7 +129,10 @@ public class WebsocketTwoRoutesExampleTest extends CamelTestSupport {
     protected RouteBuilder createRouteBuilder() throws Exception {
         return new RouteBuilder() {
             public void configure() {
-
+                WebsocketComponent websocketComponent = (WebsocketComponent) context.getComponent("websocket");
+                websocketComponent.setMinThreads(1);
+                websocketComponent.setMaxThreads(11);
+                
                 from("websocket://localhost:" + port + "/bar")
                     .log(">>> Message received from BAR WebSocket Client : ${body}")
                     .transform().simple("The bar has ${body}")
diff --git a/components/camel-websocket/src/test/java/org/apache/camel/component/websocket/WebsocketTwoRoutesToSIndividualAndBroadcastEndpointExampleTest.java b/components/camel-websocket/src/test/java/org/apache/camel/component/websocket/WebsocketTwoRoutesToSIndividualAndBroadcastEndpointExampleTest.java
index 20b5b36adfe..d4aa92fb5eb 100644
--- a/components/camel-websocket/src/test/java/org/apache/camel/component/websocket/WebsocketTwoRoutesToSIndividualAndBroadcastEndpointExampleTest.java
+++ b/components/camel-websocket/src/test/java/org/apache/camel/component/websocket/WebsocketTwoRoutesToSIndividualAndBroadcastEndpointExampleTest.java
@@ -92,7 +92,10 @@ public class WebsocketTwoRoutesToSIndividualAndBroadcastEndpointExampleTest exte
     protected RouteBuilder createRouteBuilder() throws Exception {
         return new RouteBuilder() {
             public void configure() {
-
+                WebsocketComponent websocketComponent = (WebsocketComponent) context.getComponent("websocket");
+                websocketComponent.setMinThreads(1);
+                websocketComponent.setMaxThreads(11);
+                
                 from("websocket://localhost:" + port + "/bar")
                         .log(">>> Message received from BAR WebSocket Client : ${body}")
                         .transform().simple("The bar has ${body}")
diff --git a/components/camel-websocket/src/test/java/org/apache/camel/component/websocket/WebsocketTwoRoutesToSameEndpointExampleTest.java b/components/camel-websocket/src/test/java/org/apache/camel/component/websocket/WebsocketTwoRoutesToSameEndpointExampleTest.java
index fd639a436a2..7c0b1459869 100644
--- a/components/camel-websocket/src/test/java/org/apache/camel/component/websocket/WebsocketTwoRoutesToSameEndpointExampleTest.java
+++ b/components/camel-websocket/src/test/java/org/apache/camel/component/websocket/WebsocketTwoRoutesToSameEndpointExampleTest.java
@@ -92,7 +92,10 @@ public class WebsocketTwoRoutesToSameEndpointExampleTest extends CamelTestSuppor
     protected RouteBuilder createRouteBuilder() throws Exception {
         return new RouteBuilder() {
             public void configure() {
-
+                WebsocketComponent websocketComponent = (WebsocketComponent) context.getComponent("websocket");
+                websocketComponent.setMinThreads(1);
+                websocketComponent.setMaxThreads(11);
+                
                 from("websocket://localhost:" + port + "/bar")
                         .log(">>> Message received from BAR WebSocket Client : ${body}")
                         .transform().simple("The bar has ${body}")
