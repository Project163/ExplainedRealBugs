diff --git a/camel-core/src/main/data/bar.xml b/camel-core/src/main/data/bar.xml
new file mode 100644
index 00000000000..74de0b0b728
--- /dev/null
+++ b/camel-core/src/main/data/bar.xml
@@ -0,0 +1 @@
+<hello>bar</hello>
\ No newline at end of file
diff --git a/camel-core/src/main/data/foo.xml b/camel-core/src/main/data/foo.xml
new file mode 100644
index 00000000000..1f501c46b41
--- /dev/null
+++ b/camel-core/src/main/data/foo.xml
@@ -0,0 +1 @@
+<hello>foo</hello>
\ No newline at end of file
diff --git a/camel-core/src/main/java/org/apache/camel/component/file/FileConsumer.java b/camel-core/src/main/java/org/apache/camel/component/file/FileConsumer.java
index c3a6f659d14..1420a39b43f 100644
--- a/camel-core/src/main/java/org/apache/camel/component/file/FileConsumer.java
+++ b/camel-core/src/main/java/org/apache/camel/component/file/FileConsumer.java
@@ -16,14 +16,14 @@
  */
 package org.apache.camel.component.file;
 
-import java.io.File;
-
 import org.apache.camel.Processor;
-import org.apache.camel.component.file.strategy.FileStrategy;
+import org.apache.camel.component.file.strategy.FileProcessStrategy;
 import org.apache.camel.impl.ScheduledPollConsumer;
 import org.apache.commons.logging.Log;
 import org.apache.commons.logging.LogFactory;
 
+import java.io.File;
+
 /**
  * @version $Revision: 523016 $
  */
@@ -47,7 +47,8 @@ public class FileConsumer extends ScheduledPollConsumer<FileExchange> {
     protected void pollFileOrDirectory(File fileOrDirectory, boolean processDir) {
         if (!fileOrDirectory.isDirectory()) {
             pollFile(fileOrDirectory); // process the file
-        } else if (processDir) {
+        }
+        else if (processDir) {
             if (isValidFile(fileOrDirectory)) {
                 LOG.debug("Polling directory " + fileOrDirectory);
                 File[] files = fileOrDirectory.listFiles();
@@ -55,33 +56,48 @@ public class FileConsumer extends ScheduledPollConsumer<FileExchange> {
                     pollFileOrDirectory(files[i], isRecursive()); // self-recursion
                 }
             }
-        } else {
+        }
+        else {
             LOG.debug("Skipping directory " + fileOrDirectory);
         }
     }
 
     protected void pollFile(final File file) {
-        if (file.exists() && file.lastModified() > lastPollTime) {
-            if (isValidFile(file)) {
-                FileStrategy strategy = endpoint.getFileStrategy();
-                FileExchange exchange = endpoint.createExchange(file);
-
-                try {
+        if (!file.exists()) {
+            return;
+        }
+        if (isValidFile(file)) {
+            // we only care about file modified times if we are not deleting/moving files
+            if (endpoint.isNoop()) {
+                long fileModified = file.lastModified();
+                if (fileModified <= lastPollTime) {
                     if (LOG.isDebugEnabled()) {
-                        LOG.debug("About to process file:  " + file + " using exchange: " + exchange);
+                        LOG.debug("Ignoring file: " + file + " as modified time: " + fileModified + " less than last poll time: " + lastPollTime);
                     }
-                    if (strategy.begin(endpoint, exchange, file)) {
-                        getProcessor().process(exchange);
-                        strategy.commit(endpoint, exchange, file);
-                    } else {
-                        if (LOG.isDebugEnabled()) {
-                            LOG.debug(endpoint + " cannot process file: " + file);
-                        }
+                    return;
+                }
+            }
+
+            FileProcessStrategy processStrategy = endpoint.getFileStrategy();
+            FileExchange exchange = endpoint.createExchange(file);
+
+            try {
+                if (LOG.isDebugEnabled()) {
+                    LOG.debug("About to process file:  " + file + " using exchange: " + exchange);
+                }
+                if (processStrategy.begin(endpoint, exchange, file)) {
+                    getProcessor().process(exchange);
+                    processStrategy.commit(endpoint, exchange, file);
+                }
+                else {
+                    if (LOG.isDebugEnabled()) {
+                        LOG.debug(endpoint + " cannot process file: " + file);
                     }
-                } catch (Throwable e) {
-                    handleException(e);
                 }
             }
+            catch (Throwable e) {
+                handleException(e);
+            }
         }
     }
 
@@ -103,9 +119,19 @@ public class FileConsumer extends ScheduledPollConsumer<FileExchange> {
             }
         }
         String[] prefixes = endpoint.getExcludedNamePrefixes();
-        for (String prefix : prefixes) {
-            if (name.startsWith(prefix)) {
-                return false;
+        if (prefixes != null) {
+            for (String prefix : prefixes) {
+                if (name.startsWith(prefix)) {
+                    return false;
+                }
+            }
+        }
+        String[] postfixes = endpoint.getExcludedNamePostfixes();
+        if (postfixes != null) {
+            for (String postfix : postfixes) {
+                if (name.endsWith(postfix)) {
+                    return false;
+                }
             }
         }
         return true;
diff --git a/camel-core/src/main/java/org/apache/camel/component/file/FileEndpoint.java b/camel-core/src/main/java/org/apache/camel/component/file/FileEndpoint.java
index 0d0fb8dbf15..e231042743a 100644
--- a/camel-core/src/main/java/org/apache/camel/component/file/FileEndpoint.java
+++ b/camel-core/src/main/java/org/apache/camel/component/file/FileEndpoint.java
@@ -16,19 +16,21 @@
  */
 package org.apache.camel.component.file;
 
-import java.io.File;
-
 import org.apache.camel.Consumer;
 import org.apache.camel.Processor;
 import org.apache.camel.Producer;
-import org.apache.camel.component.file.strategy.DeleteFileStrategy;
-import org.apache.camel.component.file.strategy.FileStrategy;
-import org.apache.camel.component.file.strategy.NoOpFileStrategy;
-import org.apache.camel.component.file.strategy.RenameFileStrategy;
+import org.apache.camel.component.file.strategy.DefaultFileRenamer;
+import org.apache.camel.component.file.strategy.DeleteFileProcessStrategy;
+import org.apache.camel.component.file.strategy.FileProcessStrategy;
+import org.apache.camel.component.file.strategy.FileProcessStrategySupport;
+import org.apache.camel.component.file.strategy.NoOpFileProcessStrategy;
+import org.apache.camel.component.file.strategy.RenameFileProcessStrategy;
 import org.apache.camel.impl.ScheduledPollEndpoint;
 import org.apache.commons.logging.Log;
 import org.apache.commons.logging.LogFactory;
 
+import java.io.File;
+
 /**
  * A <a href="http://activemq.apache.org/camel/file.html">File Endpoint</a> for
  * working with file systems
@@ -38,7 +40,7 @@ import org.apache.commons.logging.LogFactory;
 public class FileEndpoint extends ScheduledPollEndpoint<FileExchange> {
     private static final transient Log LOG = LogFactory.getLog(FileEndpoint.class);
     private File file;
-    private FileStrategy fileStrategy;
+    private FileProcessStrategy fileProcessStrategy;
     private boolean autoCreate = true;
     private boolean lock = true;
     private boolean delete;
@@ -47,6 +49,8 @@ public class FileEndpoint extends ScheduledPollEndpoint<FileExchange> {
     private String moveNamePrefix;
     private String moveNamePostfix;
     private String[] excludedNamePrefixes = {"."};
+    private String[] excludedNamePostfixes = { FileProcessStrategySupport.DEFAULT_LOCK_FILE_POSTFIX };
+    private int bufferSize = 128 * 1024;
 
     protected FileEndpoint(File file, String endpointUri, FileComponent component) {
         super(endpointUri, component);
@@ -117,22 +121,22 @@ public class FileEndpoint extends ScheduledPollEndpoint<FileExchange> {
         this.autoCreate = autoCreate;
     }
 
-    public FileStrategy getFileStrategy() {
-        if (fileStrategy == null) {
-            fileStrategy = createFileStrategy();
-            LOG.debug("" + this + " using strategy: " + fileStrategy);
+    public FileProcessStrategy getFileStrategy() {
+        if (fileProcessStrategy == null) {
+            fileProcessStrategy = createFileStrategy();
+            LOG.debug("" + this + " using strategy: " + fileProcessStrategy);
         }
-        return fileStrategy;
+        return fileProcessStrategy;
     }
 
     /**
      * Sets the strategy to be used when the file has been processed such as
      * deleting or renaming it etc.
      * 
-     * @param fileStrategy the new stategy to use
+     * @param fileProcessStrategy the new stategy to use
      */
-    public void setFileStrategy(FileStrategy fileStrategy) {
-        this.fileStrategy = fileStrategy;
+    public void setFileStrategy(FileProcessStrategy fileProcessStrategy) {
+        this.fileProcessStrategy = fileProcessStrategy;
     }
 
     public boolean isDelete() {
@@ -160,7 +164,7 @@ public class FileEndpoint extends ScheduledPollEndpoint<FileExchange> {
      * the files from * to *.done set this value to ".done"
      * 
      * @param moveNamePostfix
-     * @see RenameFileStrategy#setNamePostfix(String)
+     * @see DefaultFileRenamer#setNamePostfix(String)
      */
     public void setMoveNamePostfix(String moveNamePostfix) {
         this.moveNamePostfix = moveNamePostfix;
@@ -175,7 +179,7 @@ public class FileEndpoint extends ScheduledPollEndpoint<FileExchange> {
      * processed files into a hidden directory called ".camel" set this value to
      * ".camel/"
      * 
-     * @see RenameFileStrategy#setNamePrefix(String)
+     * @see DefaultFileRenamer#setNamePrefix(String)
      */
     public void setMoveNamePrefix(String moveNamePrefix) {
         this.moveNamePrefix = moveNamePrefix;
@@ -193,13 +197,25 @@ public class FileEndpoint extends ScheduledPollEndpoint<FileExchange> {
         this.excludedNamePrefixes = excludedNamePrefixes;
     }
 
+    public String[] getExcludedNamePostfixes() {
+        return excludedNamePostfixes;
+    }
+
+    /**
+     * Sets the excluded file name postfixes, such as {@link FileProcessStrategySupport#DEFAULT_LOCK_FILE_POSTFIX}
+     * to ignore lock files by default.
+     */
+    public void setExcludedNamePostfixes(String[] excludedNamePostfixes) {
+        this.excludedNamePostfixes = excludedNamePostfixes;
+    }
+
     public boolean isNoop() {
         return noop;
     }
 
     /**
-     * If set to true then the default {@link FileStrategy} will be to use the
-     * {@link NoOpFileStrategy} to not move or copy processed files
+     * If set to true then the default {@link FileProcessStrategy} will be to use the
+     * {@link NoOpFileProcessStrategy} to not move or copy processed files
      * 
      * @param noop
      */
@@ -221,22 +237,33 @@ public class FileEndpoint extends ScheduledPollEndpoint<FileExchange> {
         this.append = append;
     }
 
+    public int getBufferSize() {
+        return bufferSize;
+    }
+
+    /**
+     * Sets the buffer size used to read/write files
+     */
+    public void setBufferSize(int bufferSize) {
+        this.bufferSize = bufferSize;
+    }
+
     /**
      * A strategy method to lazily create the file strategy
      */
-    protected FileStrategy createFileStrategy() {
+    protected FileProcessStrategy createFileStrategy() {
         if (isNoop()) {
-            return new NoOpFileStrategy();
+            return new NoOpFileProcessStrategy();
         } else if (moveNamePostfix != null || moveNamePrefix != null) {
             if (isDelete()) {
                 throw new IllegalArgumentException(
                                                    "You cannot set the deleteFiles property and a moveFilenamePostfix or moveFilenamePrefix");
             }
-            return new RenameFileStrategy(isLock(), moveNamePrefix, moveNamePostfix);
+            return new RenameFileProcessStrategy(isLock(), moveNamePrefix, moveNamePostfix);
         } else if (isDelete()) {
-            return new DeleteFileStrategy(isLock());
+            return new DeleteFileProcessStrategy(isLock());
         } else {
-            return new RenameFileStrategy(isLock());
+            return new RenameFileProcessStrategy(isLock());
         }
     }
 }
diff --git a/camel-core/src/main/java/org/apache/camel/component/file/FileProducer.java b/camel-core/src/main/java/org/apache/camel/component/file/FileProducer.java
index d43047f40e9..aff31285b92 100644
--- a/camel-core/src/main/java/org/apache/camel/component/file/FileProducer.java
+++ b/camel-core/src/main/java/org/apache/camel/component/file/FileProducer.java
@@ -25,6 +25,7 @@ import org.apache.commons.logging.LogFactory;
 
 import java.io.File;
 import java.io.FileOutputStream;
+import java.io.IOException;
 import java.io.InputStream;
 import java.io.RandomAccessFile;
 import java.nio.ByteBuffer;
@@ -32,7 +33,7 @@ import java.nio.channels.FileChannel;
 
 /**
  * A {@link Producer} implementation for File
- * 
+ *
  * @version $Revision: 523016 $
  */
 public class FileProducer extends DefaultProducer {
@@ -57,6 +58,58 @@ public class FileProducer extends DefaultProducer {
     }
 
     public void process(FileExchange exchange) throws Exception {
+        InputStream in = ExchangeHelper.getMandatoryInBody(exchange, InputStream.class);
+        File file = createFileName(exchange);
+        buildDirectory(file);
+        if (LOG.isDebugEnabled()) {
+            LOG.debug("About to write to: " + file + " from exchange: " + exchange);
+        }
+        FileChannel fc = null;
+        try {
+            if (getEndpoint().isAppend()) {
+                fc = new RandomAccessFile(file, "rw").getChannel();
+                fc.position(fc.size());
+            }
+            else {
+                fc = new FileOutputStream(file).getChannel();
+            }
+            int size = getEndpoint().getBufferSize();
+            byte[] buffer = new byte[size];
+            ByteBuffer byteBuffer = ByteBuffer.wrap(buffer);
+            while (true) {
+                int count = in.read(buffer);
+                if (count <= 0) {
+                    break;
+                }
+                else if (count < size) {
+                    byteBuffer = ByteBuffer.wrap(buffer, 0, count);
+                    fc.write(byteBuffer);
+                    break;
+                }
+                else {
+                    fc.write(byteBuffer);
+                }
+            }
+        }
+        finally {
+            if (in != null) {
+                try {
+                    in.close();
+                }
+                catch (IOException e) {
+                    LOG.warn("Failed to close input: " + e, e);
+                }
+            }
+            if (fc != null) {
+                try {
+                    fc.close();
+                }
+                catch (IOException e) {
+                    LOG.warn("Failed to close output: " + e, e);
+                }
+            }
+        }
+        /*
         ByteBuffer payload = exchange.getIn().getBody(ByteBuffer.class);
         if (payload == null) {
             InputStream in = ExchangeHelper.getMandatoryInBody(exchange, InputStream.class);
@@ -87,6 +140,7 @@ public class FileProducer extends DefaultProducer {
                 fc.close();
             }
         }
+        */
     }
 
     protected File createFileName(FileExchange exchange) {
@@ -98,13 +152,15 @@ public class FileProducer extends DefaultProducer {
             File answer = new File(endpointFile, name);
             if (answer.isDirectory()) {
                 return new File(answer, fileName);
-            } else {
+            }
+            else {
                 return answer;
             }
         }
         if (endpointFile != null && endpointFile.isDirectory()) {
             return new File(endpointFile, fileName);
-        } else {
+        }
+        else {
             return new File(fileName);
         }
     }
diff --git a/camel-core/src/main/java/org/apache/camel/component/file/strategy/DefaultFileRenamer.java b/camel-core/src/main/java/org/apache/camel/component/file/strategy/DefaultFileRenamer.java
new file mode 100644
index 00000000000..d76c085f311
--- /dev/null
+++ b/camel-core/src/main/java/org/apache/camel/component/file/strategy/DefaultFileRenamer.java
@@ -0,0 +1,80 @@
+/**
+ *
+ * Licensed to the Apache Software Foundation (ASF) under one or more
+ * contributor license agreements.  See the NOTICE file distributed with
+ * this work for additional information regarding copyright ownership.
+ * The ASF licenses this file to You under the Apache License, Version 2.0
+ * (the "License"); you may not use this file except in compliance with
+ * the License.  You may obtain a copy of the License at
+ *
+ * http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+package org.apache.camel.component.file.strategy;
+
+import java.io.File;
+
+/**
+ * @version $Revision: 1.1 $
+ */
+public class DefaultFileRenamer implements FileRenamer {
+    private String namePrefix;
+    private String namePostfix;
+
+    public DefaultFileRenamer() {
+    }
+
+    public DefaultFileRenamer(String namePrefix, String namePostfix) {
+        this.namePrefix = namePrefix;
+        this.namePostfix = namePostfix;
+    }
+
+    public File renameFile(File file) {
+        File parent = file.getParentFile();
+        String name = renameFileName(file);
+        return new File(parent, name);
+    }
+
+    public String getNamePostfix() {
+        return namePostfix;
+    }
+
+    /**
+     * Sets the name postfix appended to moved files. For example
+     * to rename all the files from * to *.done set this value to ".done"
+     */
+    public void setNamePostfix(String namePostfix) {
+        this.namePostfix = namePostfix;
+    }
+
+    public String getNamePrefix() {
+        return namePrefix;
+    }
+
+    /**
+     * Sets the name prefix appended to moved files. For example
+     * to move processed files into a hidden directory called ".camel"
+     * set this value to ".camel/"
+     */
+    public void setNamePrefix(String namePrefix) {
+        this.namePrefix = namePrefix;
+    }
+
+
+    protected String renameFileName(File file) {
+        StringBuffer buffer = new StringBuffer();
+        if (namePrefix != null) {
+            buffer.append(namePrefix);
+        }
+        buffer.append(file.getName());
+        if (namePostfix != null) {
+            buffer.append(namePostfix);
+        }
+        return buffer.toString();
+    }
+}
diff --git a/camel-core/src/main/java/org/apache/camel/component/file/strategy/DeleteFileProcessStrategy.java b/camel-core/src/main/java/org/apache/camel/component/file/strategy/DeleteFileProcessStrategy.java
new file mode 100644
index 00000000000..7281d495597
--- /dev/null
+++ b/camel-core/src/main/java/org/apache/camel/component/file/strategy/DeleteFileProcessStrategy.java
@@ -0,0 +1,48 @@
+/**
+ * Licensed to the Apache Software Foundation (ASF) under one or more
+ * contributor license agreements.  See the NOTICE file distributed with
+ * this work for additional information regarding copyright ownership.
+ * The ASF licenses this file to You under the Apache License, Version 2.0
+ * (the "License"); you may not use this file except in compliance with
+ * the License.  You may obtain a copy of the License at
+ *
+ *      http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+package org.apache.camel.component.file.strategy;
+
+import java.io.File;
+
+import org.apache.camel.component.file.FileEndpoint;
+import org.apache.camel.component.file.FileExchange;
+import org.apache.commons.logging.Log;
+import org.apache.commons.logging.LogFactory;
+
+/**
+ * A strategy which will delete the file when its processed
+ *
+ * @version $Revision: 1.1 $
+ */
+public class DeleteFileProcessStrategy extends FileProcessStrategySupport {
+    private static final transient Log LOG = LogFactory.getLog(DeleteFileProcessStrategy.class);
+
+    public DeleteFileProcessStrategy() {
+    }
+
+    public DeleteFileProcessStrategy(boolean lockFile) {
+        super(lockFile);
+    }
+
+    public void commit(FileEndpoint endpoint, FileExchange exchange, File file) throws Exception {
+        if (LOG.isDebugEnabled()) {
+            LOG.debug("Deleting file: " + file);
+        }
+        file.delete();
+        super.commit(endpoint, exchange, file);
+    }
+}
diff --git a/camel-core/src/main/java/org/apache/camel/component/file/strategy/FileProcessStrategy.java b/camel-core/src/main/java/org/apache/camel/component/file/strategy/FileProcessStrategy.java
new file mode 100644
index 00000000000..27e733c39af
--- /dev/null
+++ b/camel-core/src/main/java/org/apache/camel/component/file/strategy/FileProcessStrategy.java
@@ -0,0 +1,42 @@
+/**
+ * Licensed to the Apache Software Foundation (ASF) under one or more
+ * contributor license agreements.  See the NOTICE file distributed with
+ * this work for additional information regarding copyright ownership.
+ * The ASF licenses this file to You under the Apache License, Version 2.0
+ * (the "License"); you may not use this file except in compliance with
+ * the License.  You may obtain a copy of the License at
+ *
+ *      http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+package org.apache.camel.component.file.strategy;
+
+import java.io.File;
+
+import org.apache.camel.component.file.FileEndpoint;
+import org.apache.camel.component.file.FileExchange;
+
+/**
+ * Represents a strategy for marking that a file is processed.
+ *
+ * @version $Revision: 1.1 $
+ */
+public interface FileProcessStrategy {
+    /**
+     * Called when work is about to begin on this file. This method may attempt to acquire some file lock before
+     * returning true; returning false if the file lock could not be obtained so that the file should be ignored.
+     *
+     * @return true if the file can be processed (such as if a file lock could be obtained)
+     */
+    boolean begin(FileEndpoint endpoint, FileExchange exchange, File file) throws Exception;
+
+    /**
+     * Releases any file locks and possibly deletes or moves the file
+     */
+    void commit(FileEndpoint endpoint, FileExchange exchange, File file) throws Exception;
+}
diff --git a/camel-core/src/main/java/org/apache/camel/component/file/strategy/FileProcessStrategySupport.java b/camel-core/src/main/java/org/apache/camel/component/file/strategy/FileProcessStrategySupport.java
new file mode 100644
index 00000000000..f796f8dfd00
--- /dev/null
+++ b/camel-core/src/main/java/org/apache/camel/component/file/strategy/FileProcessStrategySupport.java
@@ -0,0 +1,103 @@
+/**
+ * Licensed to the Apache Software Foundation (ASF) under one or more
+ * contributor license agreements.  See the NOTICE file distributed with
+ * this work for additional information regarding copyright ownership.
+ * The ASF licenses this file to You under the Apache License, Version 2.0
+ * (the "License"); you may not use this file except in compliance with
+ * the License.  You may obtain a copy of the License at
+ *
+ *      http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+package org.apache.camel.component.file.strategy;
+
+import java.io.File;
+import java.io.RandomAccessFile;
+import java.nio.channels.Channel;
+import java.nio.channels.FileChannel;
+import java.nio.channels.FileLock;
+
+import org.apache.camel.component.file.FileEndpoint;
+import org.apache.camel.component.file.FileExchange;
+import org.apache.camel.util.ExchangeHelper;
+import org.apache.commons.logging.Log;
+import org.apache.commons.logging.LogFactory;
+
+/**
+ * @version $Revision: 1.1 $
+ */
+public abstract class FileProcessStrategySupport implements FileProcessStrategy {
+    public static final String DEFAULT_LOCK_FILE_POSTFIX = ".cameLock";
+    
+    private static final transient Log LOG = LogFactory.getLog(FileProcessStrategySupport.class);
+    private boolean lockFile;
+    private FileRenamer lockFileRenamer;
+
+    protected FileProcessStrategySupport() {
+        this(true);
+    }
+
+    protected FileProcessStrategySupport(boolean lockFile) {
+        this(lockFile, new DefaultFileRenamer(null, DEFAULT_LOCK_FILE_POSTFIX));
+    }
+
+    protected FileProcessStrategySupport(boolean lockFile, FileRenamer lockFileRenamer) {
+        this.lockFile = lockFile;
+        this.lockFileRenamer = lockFileRenamer;
+    }
+
+    public boolean begin(FileEndpoint endpoint, FileExchange exchange, File file) throws Exception {
+        if (isLockFile()) {
+            File newFile = lockFileRenamer.renameFile(file);
+            String lockFileName = newFile.getAbsolutePath();
+            if (LOG.isDebugEnabled()) {
+                LOG.debug("Locking the file: " + file + " using the lock file name: " + lockFileName);
+            }
+
+            FileChannel channel = new RandomAccessFile(lockFileName, "rw").getChannel();
+            FileLock lock = channel.lock();
+            if (lock != null) {
+                exchange.setProperty("org.apache.camel.fileChannel", channel);
+                exchange.setProperty("org.apache.camel.file.lock", lock);
+                exchange.setProperty("org.apache.camel.file.lock.name", lockFileName);
+                return true;
+            }
+            return false;
+        }
+        return true;
+    }
+
+    public void commit(FileEndpoint endpoint, FileExchange exchange, File file) throws Exception {
+        if (isLockFile()) {
+            Channel channel = ExchangeHelper.getMandatoryProperty(exchange, "org.apache.camel.fileChannel", Channel.class);
+            String lockfile = ExchangeHelper.getMandatoryProperty(exchange, "org.apache.camel.file.lock.name", String.class);
+            if (LOG.isDebugEnabled()) {
+                LOG.debug("Unlocking file: " + file);
+            }
+            channel.close();
+            File lock = new File(lockfile);
+            lock.delete();
+        }
+    }
+
+    public boolean isLockFile() {
+        return lockFile;
+    }
+
+    public void setLockFile(boolean lockFile) {
+        this.lockFile = lockFile;
+    }
+
+    public FileRenamer getLockFileRenamer() {
+        return lockFileRenamer;
+    }
+
+    public void setLockFileRenamer(FileRenamer lockFileRenamer) {
+        this.lockFileRenamer = lockFileRenamer;
+    }
+}
diff --git a/camel-core/src/main/java/org/apache/camel/component/file/strategy/FileRenamer.java b/camel-core/src/main/java/org/apache/camel/component/file/strategy/FileRenamer.java
new file mode 100644
index 00000000000..2a9e7608168
--- /dev/null
+++ b/camel-core/src/main/java/org/apache/camel/component/file/strategy/FileRenamer.java
@@ -0,0 +1,28 @@
+/**
+ *
+ * Licensed to the Apache Software Foundation (ASF) under one or more
+ * contributor license agreements.  See the NOTICE file distributed with
+ * this work for additional information regarding copyright ownership.
+ * The ASF licenses this file to You under the Apache License, Version 2.0
+ * (the "License"); you may not use this file except in compliance with
+ * the License.  You may obtain a copy of the License at
+ *
+ * http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+package org.apache.camel.component.file.strategy;
+
+import java.io.File;
+
+/**
+ * @version $Revision: 1.1 $
+ */
+public interface FileRenamer {
+
+    File renameFile(File file);
+}
diff --git a/camel-core/src/main/java/org/apache/camel/component/file/strategy/NoOpFileProcessStrategy.java b/camel-core/src/main/java/org/apache/camel/component/file/strategy/NoOpFileProcessStrategy.java
new file mode 100644
index 00000000000..3d57c88491e
--- /dev/null
+++ b/camel-core/src/main/java/org/apache/camel/component/file/strategy/NoOpFileProcessStrategy.java
@@ -0,0 +1,30 @@
+/**
+ * Licensed to the Apache Software Foundation (ASF) under one or more
+ * contributor license agreements.  See the NOTICE file distributed with
+ * this work for additional information regarding copyright ownership.
+ * The ASF licenses this file to You under the Apache License, Version 2.0
+ * (the "License"); you may not use this file except in compliance with
+ * the License.  You may obtain a copy of the License at
+ *
+ *      http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+package org.apache.camel.component.file.strategy;
+
+/**
+ * A simple strategy which just locks the file but does not modify it
+ *
+ * @version $Revision: 1.1 $
+ */
+public class NoOpFileProcessStrategy extends FileProcessStrategySupport {
+    public NoOpFileProcessStrategy() {
+        super(false);
+    }
+
+}
+
diff --git a/camel-core/src/main/java/org/apache/camel/component/file/strategy/RenameFileProcessStrategy.java b/camel-core/src/main/java/org/apache/camel/component/file/strategy/RenameFileProcessStrategy.java
new file mode 100644
index 00000000000..392f483819b
--- /dev/null
+++ b/camel-core/src/main/java/org/apache/camel/component/file/strategy/RenameFileProcessStrategy.java
@@ -0,0 +1,74 @@
+/**
+ * Licensed to the Apache Software Foundation (ASF) under one or more
+ * contributor license agreements.  See the NOTICE file distributed with
+ * this work for additional information regarding copyright ownership.
+ * The ASF licenses this file to You under the Apache License, Version 2.0
+ * (the "License"); you may not use this file except in compliance with
+ * the License.  You may obtain a copy of the License at
+ *
+ *      http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+package org.apache.camel.component.file.strategy;
+
+import java.io.File;
+import java.io.IOException;
+
+import org.apache.camel.component.file.FileEndpoint;
+import org.apache.camel.component.file.FileExchange;
+import org.apache.commons.logging.Log;
+import org.apache.commons.logging.LogFactory;
+
+/**
+ * A strategy to rename a file
+ * 
+ * @version $Revision: 1.1 $
+ */
+public class RenameFileProcessStrategy extends FileProcessStrategySupport {
+    private static final transient Log LOG = LogFactory.getLog(RenameFileProcessStrategy.class);
+    private FileRenamer renamer;
+
+    public RenameFileProcessStrategy() {
+        this(true);
+    }
+
+    public RenameFileProcessStrategy(boolean lock) {
+        this(lock, ".camel/", "");
+    }
+
+    public RenameFileProcessStrategy(boolean lock, String namePrefix, String namePostfix) {
+        this(lock, new DefaultFileRenamer(namePrefix, namePostfix));
+    }
+
+    public RenameFileProcessStrategy(boolean lock, FileRenamer renamer) {
+        super(lock);
+        this.renamer = renamer;
+    }
+
+    public void commit(FileEndpoint endpoint, FileExchange exchange, File file) throws Exception {
+        File newName = renamer.renameFile(file);
+        newName.getParentFile().mkdirs();
+
+        if (LOG.isDebugEnabled()) {
+            LOG.debug("Renaming file: " + file + " to: " + newName);
+        }
+        boolean renamed = file.renameTo(newName);
+        if (!renamed) {
+            throw new IOException("Could not rename file from: " + file + " to " + newName);
+        }
+        super.commit(endpoint, exchange, file);
+    }
+
+    public FileRenamer getRenamer() {
+        return renamer;
+    }
+
+    public void setRenamer(FileRenamer renamer) {
+        this.renamer = renamer;
+    }
+}
\ No newline at end of file
diff --git a/camel-core/src/main/java/org/apache/camel/converter/NIOConverter.java b/camel-core/src/main/java/org/apache/camel/converter/NIOConverter.java
index d8c8e412326..9f22f8ecade 100644
--- a/camel-core/src/main/java/org/apache/camel/converter/NIOConverter.java
+++ b/camel-core/src/main/java/org/apache/camel/converter/NIOConverter.java
@@ -18,6 +18,10 @@ package org.apache.camel.converter;
 
 import org.apache.camel.Converter;
 
+import java.io.BufferedInputStream;
+import java.io.File;
+import java.io.FileInputStream;
+import java.io.IOException;
 import java.io.InputStream;
 import java.nio.ByteBuffer;
 
@@ -51,6 +55,14 @@ public class NIOConverter {
         return ByteBuffer.wrap(data);
     }
     
+    @Converter
+    public static ByteBuffer toByteBuffer(File file) throws IOException {
+       byte[] buf = new byte[(int) file.length()];
+       InputStream in = new BufferedInputStream(new FileInputStream(file));
+       in.read(buf);
+       return ByteBuffer.wrap(buf);
+    }
+
     @Converter
     public static ByteBuffer toByteBuffer(String value) {
         ByteBuffer buf = ByteBuffer.allocate(value.length());
diff --git a/camel-core/src/test/java/org/apache/camel/component/file/FileConsumerProducerRouteTest.java b/camel-core/src/test/java/org/apache/camel/component/file/FileConsumerProducerRouteTest.java
new file mode 100644
index 00000000000..f02903f3225
--- /dev/null
+++ b/camel-core/src/test/java/org/apache/camel/component/file/FileConsumerProducerRouteTest.java
@@ -0,0 +1,44 @@
+/**
+ * Licensed to the Apache Software Foundation (ASF) under one or more
+ * contributor license agreements.  See the NOTICE file distributed with
+ * this work for additional information regarding copyright ownership.
+ * The ASF licenses this file to You under the Apache License, Version 2.0
+ * (the "License"); you may not use this file except in compliance with
+ * the License.  You may obtain a copy of the License at
+ *
+ *      http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing, software
+ * distributed under the License is distributed on an "AS IS" BASIS,
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+ * See the License for the specific language governing permissions and
+ * limitations under the License.
+ */
+package org.apache.camel.component.file;
+
+import org.apache.camel.ContextTestSupport;
+import org.apache.camel.builder.RouteBuilder;
+import org.apache.camel.component.mock.MockEndpoint;
+
+/**
+ * @version $Revision: 529902 $
+ */
+public class FileConsumerProducerRouteTest extends ContextTestSupport {
+    public void testFileRoute() throws Exception {
+        MockEndpoint result = resolveMandatoryEndpoint("mock:result", MockEndpoint.class);
+        result.expectedMessageCount(2);
+        result.setDefaulResultWaitMillis(10000);
+
+        result.assertIsSatisfied();
+    }
+
+    @Override
+    protected RouteBuilder createRouteBuilder() {
+        return new RouteBuilder() {
+            public void configure() {
+                from("file:src/main/data?noop=true").to("file:target/test-consumer-produer-inbox");
+                from("file:target/test-consumer-produer-inbox").to("mock:result");
+            }
+        };
+    }
+}
\ No newline at end of file
diff --git a/camel-core/src/test/java/org/apache/camel/component/file/FileRenameRouteTest.java b/camel-core/src/test/java/org/apache/camel/component/file/FileRenameRouteTest.java
index d52e2f6490e..dd85f730e15 100644
--- a/camel-core/src/test/java/org/apache/camel/component/file/FileRenameRouteTest.java
+++ b/camel-core/src/test/java/org/apache/camel/component/file/FileRenameRouteTest.java
@@ -22,7 +22,7 @@ package org.apache.camel.component.file;
 public class FileRenameRouteTest extends FileRouteTest {
     @Override
     protected void setUp() throws Exception {
-        uri = "file:target/test-rename-inbox?moveNamePrefix=.foo/";
+        uri = "file:target/test-rename-inbox?moveNamePrefix=foo/";
         super.setUp();
     }
 }
\ No newline at end of file
