diff --git a/core/camel-main/src/main/java/org/apache/camel/main/BaseMainSupport.java b/core/camel-main/src/main/java/org/apache/camel/main/BaseMainSupport.java
index 20388ccb182..5432b7704f9 100644
--- a/core/camel-main/src/main/java/org/apache/camel/main/BaseMainSupport.java
+++ b/core/camel-main/src/main/java/org/apache/camel/main/BaseMainSupport.java
@@ -579,8 +579,8 @@ public abstract class BaseMainSupport extends ServiceSupport {
             listener.beforeConfigure(this);
         }
 
-        configureLifecycle(camelContext);
         autoconfigure(camelContext);
+        configureLifecycle(camelContext);
         configureRoutes(camelContext);
 
         // allow to do configuration before its started
diff --git a/core/camel-main/src/test/java/org/apache/camel/main/MainTest.java b/core/camel-main/src/test/java/org/apache/camel/main/MainTest.java
index b5e95ae00b8..3fb84066a20 100644
--- a/core/camel-main/src/test/java/org/apache/camel/main/MainTest.java
+++ b/core/camel-main/src/test/java/org/apache/camel/main/MainTest.java
@@ -16,12 +16,17 @@
  */
 package org.apache.camel.main;
 
+import java.util.concurrent.atomic.AtomicInteger;
+
 import org.apache.camel.CamelContext;
 import org.apache.camel.builder.RouteBuilder;
 import org.apache.camel.component.mock.MockEndpoint;
+import org.apache.camel.spi.ManagementStrategy;
 import org.junit.Assert;
 import org.junit.Test;
 
+import static org.apache.camel.util.CollectionHelper.propertiesOf;
+
 public class MainTest extends Assert {
 
     @Test
@@ -116,6 +121,30 @@ public class MainTest extends Assert {
         main.stop();
     }
 
+    @Test
+    public void testLifecycleConfiguration() throws Exception {
+        AtomicInteger durationMaxMessages = new AtomicInteger();
+
+        Main main = new Main() {
+            @Override
+            protected void configureLifecycle(CamelContext camelContext) throws Exception {
+                durationMaxMessages.set(configure().getDurationMaxMessages());
+                super.configureLifecycle(camelContext);
+            }
+        };
+
+        main.setOverrideProperties(propertiesOf("camel.main.duration-max-messages", "1"));
+        main.start();
+
+        CamelContext camelContext = main.getCamelContext();
+        ManagementStrategy strategy = camelContext.getManagementStrategy();
+
+        assertEquals("DurationMaxMessages should be set to 1", 1, durationMaxMessages.get());
+        assertTrue(strategy.getEventNotifiers().stream().anyMatch(n -> n instanceof MainDurationEventNotifier));
+
+        main.stop();
+    }
+
     public static class MyRouteBuilder extends RouteBuilder {
         @Override
         public void configure() throws Exception {
