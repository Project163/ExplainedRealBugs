<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 09:35:41 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-2144] A null-Message to a cxf-endpoint (e.g. HTTP-GET) can disable accepting regular requests</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-2144</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;Start a fine configured system with came-cxf consumer endpoint using http. Make some tests with valid SOAP-Messages. Then just send a HTTP-Get-Request to the endpoint (e.g. with Browser). You&apos;ll get some kind of Exception saying&lt;/p&gt;

&lt;p&gt;java.lang.ClassCastException: org.apache.cxf.message.MessageContentsList cannot be cast to org.w3c.dom.Node&lt;/p&gt;

&lt;p&gt;Ok, this could be interpreted as &quot;There is no content to convert into Node...&quot; as, if you debug, you&apos;ll see, that an empty MessageContentsList is provided by camel-cxf as the body of the camel message. Of course, if the Request would contain a body, the camel body would be a non empty MessageContentsList and the type converter mechanism would find a way to convert the list into a w3c Document, but that&apos;s not the point. The Bug is, that this null-body-request puts the DefaultTypeConverter into a state, that let always return null for bodies of type MessageContentsList, even if it&apos;s not empty (which is normal). I think that there is certain &apos;misses&apos;-map responsible for that kind of &apos;miss&apos;-state...&lt;/p&gt;</description>
                <environment></environment>
        <key id="12486882">CAMEL-2144</key>
            <summary>A null-Message to a cxf-endpoint (e.g. HTTP-GET) can disable accepting regular requests</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="njiang">Willem Jiang</assignee>
                                    <reporter username="jonny.newald">Jonny Newald</reporter>
                        <labels>
                    </labels>
                <created>Fri, 6 Nov 2009 13:38:40 +0000</created>
                <updated>Thu, 3 Jun 2010 07:25:17 +0000</updated>
                            <resolved>Mon, 16 Nov 2009 07:50:42 +0000</resolved>
                                    <version>2.0.0</version>
                                    <fixVersion>2.1.0</fixVersion>
                                    <component>camel-core</component>
                    <component>camel-cxf</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12952891" author="davsclaus" created="Tue, 10 Nov 2009 06:33:39 +0000"  >&lt;p&gt;A patch with a suggestion for a fix&lt;/p&gt;</comment>
                            <comment id="12952898" author="davsclaus" created="Tue, 10 Nov 2009 06:35:02 +0000"  >&lt;p&gt;Willem can you take a look at this later. I have attached a suggestion for a patch. The basic idea is to return VOID when you cannot convert at this given time, such as when the MessageContextList contains empty bodies etc.&lt;/p&gt;

&lt;p&gt;You may want to work with it a bit and add some unit test, e.g. that send in a HTTP GET with no XML data and then later do a real webservice call.&lt;/p&gt;</comment>
                            <comment id="12952852" author="njiang" created="Tue, 10 Nov 2009 10:54:15 +0000"  >&lt;p&gt;@Jonny&lt;/p&gt;

&lt;p&gt;I tried to reproduce the error on the &lt;a href=&quot;https://svn.apache.org/repos/asf/camel/trunk/components/camel-cxf/src/test/java/org/apache/camel/component/cxf/CxfConsumerTest.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;CxfConsumerTest &lt;/a&gt; , but no luck with it.&lt;br/&gt;
Can you submit the stack trace and the  route to this JIRA?&lt;/p&gt;</comment>
                            <comment id="12952851" author="njiang" created="Tue, 10 Nov 2009 10:59:00 +0000"  >&lt;p&gt;@Claus, &lt;br/&gt;
I tried to apply your patch and tried to feed the converter with some empty MessageContentsList.&lt;br/&gt;
I found your patch doesn&apos;t change anything &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
The last line&apos;s return null will cover the situation of empty MessageContextList.&lt;/p&gt;</comment>
                            <comment id="12953180" author="davsclaus" created="Tue, 10 Nov 2009 11:10:25 +0000"  >&lt;p&gt;The idea is to return Void when you &lt;b&gt;cannot&lt;/b&gt; convert such as in a situation where there MessageContextList is invalid. Then it wont be regarded as a &lt;b&gt;miss&lt;/b&gt; and Camel will try this converter combination later on.&lt;/p&gt;</comment>
                            <comment id="12951629" author="jonny.newald" created="Wed, 11 Nov 2009 09:14:53 +0000"  >&lt;p&gt;Test procedure after starting camel context:&lt;/p&gt;

&lt;p&gt;1. Send a &quot;ping&quot;-Message to &lt;a href=&quot;http://localhost:8080/test/service&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080/test/service&lt;/a&gt; (HTTP-POST, e.g. with soapUI-Tool):&lt;/p&gt;

&lt;p&gt;&amp;lt;soapenv:Envelope xmlns:soapenv=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot; xmlns:ser=&quot;test/service&quot;&amp;gt;&lt;br/&gt;
   &amp;lt;soapenv:Header/&amp;gt;&lt;br/&gt;
   &amp;lt;soapenv:Body&amp;gt;&lt;br/&gt;
      &amp;lt;ser:ping/&amp;gt;&lt;br/&gt;
   &amp;lt;/soapenv:Body&amp;gt;&lt;br/&gt;
&amp;lt;/soapenv:Envelope&amp;gt;&lt;/p&gt;

&lt;p&gt;You should get a response like this:&lt;/p&gt;

&lt;p&gt;&amp;lt;soap:Envelope xmlns:soap=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot;&amp;gt;&lt;br/&gt;
   &amp;lt;soap:Body&amp;gt;&lt;br/&gt;
      &amp;lt;pong xmlns=&quot;test/service&quot;/&amp;gt;&lt;br/&gt;
   &amp;lt;/soap:Body&amp;gt;&lt;br/&gt;
&amp;lt;/soap:Envelope&amp;gt;&lt;/p&gt;

&lt;p&gt;2. Open browser with URL &lt;a href=&quot;http://localhost:8080/test/service&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080/test/service&lt;/a&gt; (=HTTP-GET)&lt;/p&gt;

&lt;p&gt;You&apos;ll get a server-fault with the message of the exception you can see with stacktrace in stdout-console:&lt;/p&gt;

&lt;p&gt;org.apache.cxf.interceptor.Fault: org.apache.cxf.message.MessageContentsList cannot be cast to org.w3c.dom.Node&lt;br/&gt;
        at org.apache.camel.component.cxf.CxfConsumer$1.invoke(CxfConsumer.java:95)&lt;br/&gt;
        at org.apache.cxf.interceptor.ServiceInvokerInterceptor$1.run(ServiceInvokerInterceptor.java:57)&lt;br/&gt;
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)&lt;br/&gt;
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)&lt;br/&gt;
        at java.util.concurrent.FutureTask.run(FutureTask.java:138)&lt;br/&gt;
        at org.apache.cxf.workqueue.SynchronousExecutor.execute(SynchronousExecutor.java:37)&lt;br/&gt;
        at org.apache.cxf.interceptor.ServiceInvokerInterceptor.handleMessage(ServiceInvokerInterceptor.java:95)&lt;br/&gt;
        at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:236)&lt;br/&gt;
        at org.apache.cxf.transport.ChainInitiationObserver.onMessage(ChainInitiationObserver.java:89)&lt;br/&gt;
        at org.apache.cxf.transport.http_jetty.JettyHTTPDestination.serviceRequest(JettyHTTPDestination.java:302)&lt;br/&gt;
        at org.apache.cxf.transport.http_jetty.JettyHTTPDestination.doService(JettyHTTPDestination.java:265)&lt;br/&gt;
        at org.apache.cxf.transport.http_jetty.JettyHTTPHandler.handle(JettyHTTPHandler.java:70)&lt;br/&gt;
        at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)&lt;br/&gt;
        at org.mortbay.jetty.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:230)&lt;br/&gt;
        at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)&lt;br/&gt;
        at org.mortbay.jetty.Server.handle(Server.java:324)&lt;br/&gt;
        at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:535)&lt;br/&gt;
        at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:865)&lt;br/&gt;
        at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:539)&lt;br/&gt;
        at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:212)&lt;br/&gt;
        at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)&lt;br/&gt;
        at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)&lt;br/&gt;
        at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:520)&lt;br/&gt;
Caused by: java.lang.ClassCastException: org.apache.cxf.message.MessageContentsList cannot be cast to org.w3c.dom.Node&lt;br/&gt;
        at com.sun.org.apache.xpath.internal.jaxp.XPathExpressionImpl.eval(XPathExpressionImpl.java:116)&lt;br/&gt;
        at com.sun.org.apache.xpath.internal.jaxp.XPathExpressionImpl.eval(XPathExpressionImpl.java:98)&lt;br/&gt;
        at com.sun.org.apache.xpath.internal.jaxp.XPathExpressionImpl.evaluate(XPathExpressionImpl.java:180)&lt;br/&gt;
        at org.apache.camel.builder.xml.XPathBuilder.evaluateAs(XPathBuilder.java:438)&lt;br/&gt;
        at org.apache.camel.builder.xml.XPathBuilder.matches(XPathBuilder.java:104)&lt;br/&gt;
        at org.apache.camel.processor.FilterProcessor.process(FilterProcessor.java:41)&lt;br/&gt;
        at org.apache.camel.processor.RedeliveryErrorHandler.processExchange(RedeliveryErrorHandler.java:186)&lt;br/&gt;
        at org.apache.camel.processor.RedeliveryErrorHandler.processErrorHandler(RedeliveryErrorHandler.java:155)&lt;br/&gt;
        at org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:88)&lt;br/&gt;
        at org.apache.camel.processor.DefaultErrorHandler.process(DefaultErrorHandler.java:49)&lt;br/&gt;
        at org.apache.camel.processor.DefaultChannel.process(DefaultChannel.java:148)&lt;br/&gt;
        at org.apache.camel.processor.UnitOfWorkProcessor.processNext(UnitOfWorkProcessor.java:54)&lt;br/&gt;
        at org.apache.camel.processor.DelegateProcessor.process(DelegateProcessor.java:48)&lt;br/&gt;
        at org.apache.camel.component.cxf.CxfConsumer$1.invoke(CxfConsumer.java:85)&lt;br/&gt;
        ... 22 more&lt;/p&gt;

&lt;p&gt;That could be treated as &quot;ok&quot; because HTTP-GET doesn&apos;t make sense in this case.&lt;/p&gt;

&lt;p&gt;3. Repeat step 1 and instead of getting the expected pong-response you&apos;ll get the same exception with same stacktrace as in step 2&lt;/p&gt;</comment>
                            <comment id="12952584" author="njiang" created="Mon, 16 Nov 2009 07:49:55 +0000"  >&lt;p&gt;Yes, I can reproduce the issue.&lt;br/&gt;
This looks like the Null Message will make the cxfConverter treat the MessageContentsList to Node be impossible if there is a null message passed in.&lt;/p&gt;

&lt;p&gt;Claus&apos; fix resolved this issue, and I just added a test to verify it.&lt;/p&gt;
</comment>
                            <comment id="12952583" author="njiang" created="Mon, 16 Nov 2009 07:50:42 +0000"  >&lt;p&gt;trunk&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?rev=880644&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=880644&amp;amp;view=rev&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12956148" author="davsclaus" created="Thu, 3 Jun 2010 07:25:17 +0000"  >&lt;p&gt;Closing old resolved issues&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12462929" name="ServiceProvider.java" size="655" author="jonny.newald" created="Wed, 11 Nov 2009 09:14:53 +0000"/>
                            <attachment id="12462814" name="camel-2144.patch" size="587" author="davsclaus" created="Tue, 10 Nov 2009 06:33:39 +0000"/>
                            <attachment id="12462927" name="camel-bug.xml" size="1287" author="jonny.newald" created="Wed, 11 Nov 2009 09:14:53 +0000"/>
                            <attachment id="12462928" name="service.wsdl" size="1443" author="jonny.newald" created="Wed, 11 Nov 2009 09:14:53 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>76623</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 25 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i01ms7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7460</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>