<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:39:02 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-14268] Component auto configuration fails in Java 11</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-14268</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;I have the following configuration in my application.properties&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
camel.component.fhir.configuration = #&lt;span class=&quot;code-keyword&quot;&gt;class:&lt;/span&gt;org.apache.camel.component.fhir.FhirConfiguration
camel.component.fhir.configuration.log = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
camel.component.fhir.configuration.server-url = {{camel.fhir.test-url}}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;While running this code in against Java 8, the auto configuration works as expected:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[org.apa.cam.mai.BaseMainSupport] (main) Auto-configuration summary:
[org.apa.cam.mai.BaseMainSupport] (main) 	camel.component.fhir.configuration=#&lt;span class=&quot;code-keyword&quot;&gt;class:&lt;/span&gt;org.apache.camel.component.fhir.FhirConfiguration
[org.apa.cam.mai.BaseMainSupport] (main) 	camel.component.fhir.configuration.log=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
[org.apa.cam.mai.BaseMainSupport] (main) 	camel.component.fhir.configuration.server-url={{camel.fhir.test-url}}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;When running on Java 11 instead it fails with:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Error binding property (camel.component.fhir..configuration.server-url={{camel.fhir.test-url}}) with name: configuration.serverurl on bean: org.apache.camel.component.fhir.FhirComponent@5e557671 with value: {{camel.fhir.test-url}}
Caused by: org.apache.camel.PropertyBindingException: Error binding property (camel.component.fhir..configuration.server-url={{camel.fhir.test-url}}) with name: configuration.serverurl on bean: org.apache.camel.component.fhir.FhirComponent@5e557671 with value: {{camel.fhir.test-url}}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13272815">CAMEL-14268</key>
            <summary>Component auto configuration fails in Java 11</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lb">Luca Burgazzoli</assignee>
                                    <reporter username="lb">Luca Burgazzoli</reporter>
                        <labels>
                    </labels>
                <created>Fri, 6 Dec 2019 17:40:59 +0000</created>
                <updated>Tue, 10 Dec 2019 09:43:34 +0000</updated>
                            <resolved>Tue, 10 Dec 2019 09:43:33 +0000</resolved>
                                    <version>3.0.0</version>
                                    <fixVersion>3.0.1</fixVersion>
                    <fixVersion>3.1.0</fixVersion>
                                    <component>camel-main</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                <comments>
                            <comment id="16991250" author="lb" created="Mon, 9 Dec 2019 08:52:21 +0000"  >&lt;p&gt;looks like the issue is caused by different iteration order so  &lt;a href=&quot;https://github.com/apache/camel/blob/11bf04ceb2d6072aef137bc0acc86ae4b3a37425/core/camel-main/src/main/java/org/apache/camel/main/BaseMainSupport.java#L926-L931&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;this loop&lt;/a&gt; behave differently in Java 8 vs Java 11&lt;/p&gt;</comment>
                            <comment id="16991515" author="davsclaus" created="Mon, 9 Dec 2019 11:44:58 +0000"  >&lt;p&gt;Whoa are you sure as its a LinkedHashSet isnt it? I would have thought the keys are iterated in the inserted order.&lt;/p&gt;</comment>
                            <comment id="16991525" author="lb" created="Mon, 9 Dec 2019 11:58:36 +0000"  >&lt;p&gt;I suspect the issues is that if you have a properties loader in place, in this case based on MP Config, then you are not sure about the order the loader uses to list properties thus it may happen they are not in the order you may expect-&lt;/p&gt;</comment>
                            <comment id="16991533" author="davsclaus" created="Mon, 9 Dec 2019 12:16:44 +0000"  >&lt;p&gt;Okay so its possible a MP Config issue which can&apos;t return ordered properties. They may use a HashMap or Hashtable / Properties component which is not ordered etc.&lt;/p&gt;</comment>
                            <comment id="16991549" author="davsclaus" created="Mon, 9 Dec 2019 12:43:30 +0000"  >&lt;p&gt;Can we see what they do, and maybe suggest them to fix it to be ordered across JDK versions. &lt;/p&gt;

&lt;p&gt;We have an ordered properties impl in Camel we use&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/camel/blob/master/core/camel-util/src/main/java/org/apache/camel/util/OrderedProperties.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/blob/master/core/camel-util/src/main/java/org/apache/camel/util/OrderedProperties.java&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16991557" author="davsclaus" created="Mon, 9 Dec 2019 12:52:13 +0000"  >&lt;p&gt;Yeah they are using HashSet&lt;/p&gt;

&lt;p&gt;    public Iterable&amp;lt;String&amp;gt; getPropertyNames() {&lt;br/&gt;
        Set&amp;lt;String&amp;gt; names = new HashSet();&lt;br/&gt;
        Iterator var2 = this.getConfigSources().iterator();&lt;/p&gt;

&lt;p&gt;        while(var2.hasNext()) &lt;/p&gt;
{
            ConfigSource configSource = (ConfigSource)var2.next();
            names.addAll(configSource.getProperties().keySet());
        }

&lt;p&gt;        return names;&lt;br/&gt;
    }&lt;/p&gt;</comment>
                            <comment id="16991558" author="davsclaus" created="Mon, 9 Dec 2019 12:55:16 +0000"  >&lt;p&gt;That is for 1.3, this may be better in 1.5&lt;/p&gt;</comment>
                            <comment id="16991559" author="davsclaus" created="Mon, 9 Dec 2019 12:58:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/quarkusio/quarkus/commit/598c1cebc1601384702855aca8238ec382d52f11&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/quarkusio/quarkus/commit/598c1cebc1601384702855aca8238ec382d52f11&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16991562" author="davsclaus" created="Mon, 9 Dec 2019 13:03:40 +0000"  >&lt;p&gt;Upgraded Camel to smallrye-config 1.5. Quarkus has also been upgraded on master branch so for quarkus 1.1.&lt;/p&gt;</comment>
                            <comment id="16991572" author="davsclaus" created="Mon, 9 Dec 2019 13:10:38 +0000"  >&lt;p&gt;Luca so it looks its improved on 1.5 so we may get this fixed in next quarkus release (the camel component only use smallrye for testing)&lt;/p&gt;</comment>
                            <comment id="16991574" author="davsclaus" created="Mon, 9 Dec 2019 13:13:31 +0000"  >&lt;p&gt;Argh darn there is some code in smallryet that loads from url and uses unordered properties&lt;br/&gt;
        try &lt;/p&gt;
{
            Properties p = new Properties();
            p.load(reader);
            var4 = propertiesToMap(p);
        }
&lt;p&gt; catch (Throwable var13) {&lt;/p&gt;</comment>
                            <comment id="16991582" author="lb" created="Mon, 9 Dec 2019 13:21:05 +0000"  >&lt;p&gt;Created this experimental PR: &lt;a href=&quot;https://github.com/apache/camel/pull/3392&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/3392&lt;/a&gt; to partially address the issue&lt;/p&gt;</comment>
                            <comment id="16991583" author="davsclaus" created="Mon, 9 Dec 2019 13:21:17 +0000"  >&lt;p&gt;I created a ticket in smallrye-config&lt;br/&gt;
&lt;a href=&quot;https://github.com/smallrye/smallrye-config/issues/210&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/smallrye/smallrye-config/issues/210&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16991634" author="davsclaus" created="Mon, 9 Dec 2019 14:25:03 +0000"  >&lt;p&gt;Okay had to revert the mp config upgrade as mp health uses the older version and there is testing failure when upgrading.&lt;br/&gt;
So this should maybe be a bulk upgrade &lt;/p&gt;</comment>
                            <comment id="16991635" author="davsclaus" created="Mon, 9 Dec 2019 14:25:03 +0000"  >&lt;p&gt;Okay had to revert the mp config upgrade as mp health uses the older version and there is testing failure when upgrading.&lt;br/&gt;
So this should maybe be a bulk upgrade &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13273403">CAMEL-14278</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 49 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z09dtk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>