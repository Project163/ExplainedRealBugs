<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 09:55:43 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-5774] ActiveMQ target endpoint with transferExchange=true does not work together with source File endpoint with preMove option set</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-5774</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;Got failure on a simple route reading from file and sending to ActiveMQ queue.&lt;br/&gt;
On source File endpoint set preMove option to some folder, and on target activemq endpoint set transferExchange=true.&lt;br/&gt;
It fails with FileNotFound exception, trying to read file from original location, not from temporary preMoved one.&lt;br/&gt;
Without preMove all works perfect.&lt;/p&gt;

&lt;p&gt;Simplified Spring application context with Camel routes looks like this:&lt;/p&gt;

&lt;p&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;&lt;br/&gt;
&amp;lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;&lt;br/&gt;
       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&lt;br/&gt;
       xsi:schemaLocation=&quot;&lt;br/&gt;
         &lt;a href=&quot;http://www.springframework.org/schema/beans&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.springframework.org/schema/beans&lt;/a&gt; &lt;a href=&quot;http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&lt;/a&gt;&lt;br/&gt;
         &lt;a href=&quot;http://camel.apache.org/schema/spring&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://camel.apache.org/schema/spring&lt;/a&gt; &lt;a href=&quot;http://camel.apache.org/schema/spring/camel-spring.xsd&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://camel.apache.org/schema/spring/camel-spring.xsd&lt;/a&gt;&quot;&amp;gt;&lt;/p&gt;

&lt;p&gt;    &amp;lt;bean id=&quot;brokerService&quot; class=&quot;org.apache.activemq.broker.BrokerService&quot; init-method=&quot;start&quot; destroy-method=&quot;stop&quot;&amp;gt;&lt;br/&gt;
        &amp;lt;property name=&quot;brokerName&quot; value=&quot;localhost&quot; /&amp;gt;&lt;br/&gt;
        &amp;lt;property name=&quot;useJmx&quot; value=&quot;false&quot; /&amp;gt;&lt;br/&gt;
        &amp;lt;property name=&quot;transportConnectorURIs&quot;&amp;gt;&lt;br/&gt;
            &amp;lt;list&amp;gt;&lt;br/&gt;
                &amp;lt;value&amp;gt;vm://localhost&amp;lt;/value&amp;gt;&lt;br/&gt;
            &amp;lt;/list&amp;gt;&lt;br/&gt;
        &amp;lt;/property&amp;gt;&lt;br/&gt;
    &amp;lt;/bean&amp;gt;&lt;/p&gt;

&lt;p&gt;    &amp;lt;bean id=&quot;jmsConnectionFactory&quot; class=&quot;org.apache.activemq.ActiveMQConnectionFactory&quot; depends-on=&quot;brokerService&quot;&amp;gt;&lt;br/&gt;
        &amp;lt;property name=&quot;brokerURL&quot; value=&quot;vm://localhost&quot;/&amp;gt;&lt;br/&gt;
        &amp;lt;property name=&quot;redeliveryPolicy&quot; ref=&quot;redeliveryPolicyConfigActiveMQ&quot;/&amp;gt;&lt;br/&gt;
    &amp;lt;/bean&amp;gt;&lt;/p&gt;

&lt;p&gt;    &amp;lt;bean id=&quot;pooledConnectionFactory&quot; class=&quot;org.apache.activemq.pool.PooledConnectionFactory&quot; init-method=&quot;start&quot; destroy-method=&quot;stop&quot;&amp;gt;&lt;br/&gt;
        &amp;lt;property name=&quot;maxConnections&quot; value=&quot;8&quot; /&amp;gt;&lt;br/&gt;
        &amp;lt;property name=&quot;maximumActive&quot; value=&quot;500&quot; /&amp;gt;&lt;br/&gt;
        &amp;lt;property name=&quot;connectionFactory&quot; ref=&quot;jmsConnectionFactory&quot; /&amp;gt;&lt;br/&gt;
    &amp;lt;/bean&amp;gt;&lt;/p&gt;

&lt;p&gt;     &amp;lt;bean id=&quot;redeliveryPolicyConfigActiveMQ&quot; class=&quot;org.apache.activemq.RedeliveryPolicy&quot;&amp;gt;&lt;br/&gt;
        &amp;lt;property name=&quot;maximumRedeliveries&quot; value=&quot;1&quot;/&amp;gt;&lt;br/&gt;
        &amp;lt;property name=&quot;redeliveryDelay&quot; value=&quot;5000&quot;/&amp;gt;&lt;br/&gt;
    &amp;lt;/bean&amp;gt;&lt;/p&gt;


&lt;p&gt;    &amp;lt;camelContext id=&quot;testCustomer&quot; xmlns=&quot;http://camel.apache.org/schema/spring&quot;&amp;gt;&lt;/p&gt;

&lt;p&gt;		&amp;lt;endpoint id=&quot;sourceEndpoint&quot; uri=&quot;file:e:/work/ids/testCustomer/input/?preMove=.tmp&amp;amp;delay=1000&amp;amp;readLock=rename&amp;amp;copyAndDeleteOnRenameFail=false&amp;amp;move=.archive&amp;amp;moveFailed=.failed&quot; /&amp;gt;&lt;br/&gt;
		&amp;lt;endpoint id=&quot;destJms&quot; uri=&quot;activemq:queue:source?transferExchange=true&amp;amp;connectionFactory=#pooledConnectionFactory&quot; /&amp;gt;&lt;/p&gt;

&lt;p&gt;        &amp;lt;route id=&quot;testRoute&quot;&amp;gt;&lt;br/&gt;
            &amp;lt;from ref=&quot;sourceEndpoint&quot; /&amp;gt;&lt;br/&gt;
            &amp;lt;to ref=&quot;destJms&quot; /&amp;gt;&lt;br/&gt;
        &amp;lt;/route&amp;gt;&lt;br/&gt;
    &amp;lt;/camelContext&amp;gt;&lt;br/&gt;
&amp;lt;/beans&amp;gt;&lt;/p&gt;


&lt;p&gt;Exception trace:&lt;br/&gt;
org.apache.camel.TypeConversionException: Error during type conversion from type: java.io.File to the required type: byte[] with value e:\work\ids\testCustomer\input\payment.xml due java.io.FileNotFoundException: e:\work\ids\testCustomer\input\payment.xml (The system cannot find the file specified)&lt;br/&gt;
	at com.it.ids.exceptions.HandleException.process(HandleException.java:20)&lt;br/&gt;
	at org.apache.camel.util.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:61)&lt;br/&gt;
	at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73)&lt;br/&gt;
	at org.apache.camel.processor.DelegateAsyncProcessor.processNext(DelegateAsyncProcessor.java:99)&lt;br/&gt;
	at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90)&lt;br/&gt;
	at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73)&lt;br/&gt;
	at org.apache.camel.processor.DelegateAsyncProcessor.processNext(DelegateAsyncProcessor.java:99)&lt;br/&gt;
	at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90)&lt;br/&gt;
	at org.apache.camel.management.InstrumentationProcessor.process(InstrumentationProcessor.java:73)&lt;br/&gt;
	at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73)&lt;br/&gt;
	at org.apache.camel.processor.DelegateAsyncProcessor.processNext(DelegateAsyncProcessor.java:99)&lt;br/&gt;
	at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90)&lt;br/&gt;
	at org.apache.camel.processor.interceptor.TraceInterceptor.process(TraceInterceptor.java:163)&lt;br/&gt;
	at org.apache.camel.processor.RouteContextProcessor.processNext(RouteContextProcessor.java:45)&lt;br/&gt;
	at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90)&lt;br/&gt;
	at org.apache.camel.processor.interceptor.DefaultChannel.process(DefaultChannel.java:303)&lt;br/&gt;
	at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73)&lt;br/&gt;
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:117)&lt;br/&gt;
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:80)&lt;br/&gt;
	at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73)&lt;br/&gt;
	at org.apache.camel.processor.DelegateAsyncProcessor.processNext(DelegateAsyncProcessor.java:99)&lt;br/&gt;
	at org.apache.camel.processor.FatalFallbackErrorHandler.processNext(FatalFallbackErrorHandler.java:42)&lt;br/&gt;
	at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90)&lt;br/&gt;
	at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73)&lt;br/&gt;
	at org.apache.camel.processor.RedeliveryErrorHandler.deliverToFailureProcessor(RedeliveryErrorHandler.java:766)&lt;br/&gt;
	at org.apache.camel.processor.RedeliveryErrorHandler.processErrorHandler(RedeliveryErrorHandler.java:273)&lt;br/&gt;
	at org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:220)&lt;br/&gt;
	at org.apache.camel.processor.RouteContextProcessor.processNext(RouteContextProcessor.java:45)&lt;br/&gt;
	at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90)&lt;br/&gt;
	at org.apache.camel.processor.interceptor.DefaultChannel.process(DefaultChannel.java:303)&lt;br/&gt;
	at org.apache.camel.processor.RouteContextProcessor.processNext(RouteContextProcessor.java:45)&lt;br/&gt;
	at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90)&lt;br/&gt;
	at org.apache.camel.processor.UnitOfWorkProcessor.processAsync(UnitOfWorkProcessor.java:150)&lt;br/&gt;
	at org.apache.camel.processor.UnitOfWorkProcessor.process(UnitOfWorkProcessor.java:117)&lt;br/&gt;
	at org.apache.camel.processor.RouteInflightRepositoryProcessor.processNext(RouteInflightRepositoryProcessor.java:48)&lt;br/&gt;
	at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90)&lt;br/&gt;
	at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73)&lt;br/&gt;
	at org.apache.camel.processor.DelegateAsyncProcessor.processNext(DelegateAsyncProcessor.java:99)&lt;br/&gt;
	at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90)&lt;br/&gt;
	at org.apache.camel.management.InstrumentationProcessor.process(InstrumentationProcessor.java:73)&lt;br/&gt;
	at org.apache.camel.component.file.GenericFileConsumer.processExchange(GenericFileConsumer.java:336)&lt;br/&gt;
	at org.apache.camel.component.file.GenericFileConsumer.processBatch(GenericFileConsumer.java:189)&lt;br/&gt;
	at org.apache.camel.component.file.GenericFileConsumer.poll(GenericFileConsumer.java:155)&lt;br/&gt;
	at org.apache.camel.impl.ScheduledPollConsumer.doRun(ScheduledPollConsumer.java:142)&lt;br/&gt;
	at org.apache.camel.impl.ScheduledPollConsumer.run(ScheduledPollConsumer.java:92)&lt;br/&gt;
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)&lt;br/&gt;
	at java.util.concurrent.FutureTask$Sync.innerRunAndReset(FutureTask.java:317)&lt;br/&gt;
	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:150)&lt;br/&gt;
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$101(ScheduledThreadPoolExecutor.java:98)&lt;br/&gt;
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.runPeriodic(ScheduledThreadPoolExecutor.java:180)&lt;br/&gt;
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:204)&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)&lt;br/&gt;
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:662)&lt;br/&gt;
Caused by: org.apache.camel.RuntimeCamelException: java.io.FileNotFoundException: e:\work\ids\testCustomer\input\payment.xml (The system cannot find the file specified)&lt;br/&gt;
	at org.apache.camel.util.ObjectHelper.wrapRuntimeCamelException(ObjectHelper.java:1270)&lt;br/&gt;
	at org.apache.camel.util.ObjectHelper.invokeMethod(ObjectHelper.java:926)&lt;br/&gt;
	at org.apache.camel.impl.converter.StaticMethodTypeConverter.convertTo(StaticMethodTypeConverter.java:47)&lt;br/&gt;
	at org.apache.camel.impl.converter.BaseTypeConverterRegistry.doConvertTo(BaseTypeConverterRegistry.java:253)&lt;br/&gt;
	at org.apache.camel.impl.converter.BaseTypeConverterRegistry.mandatoryConvertTo(BaseTypeConverterRegistry.java:155)&lt;br/&gt;
	at org.apache.camel.component.file.FileBinding.loadContent(FileBinding.java:57)&lt;br/&gt;
	at org.apache.camel.component.file.GenericFileConverter.genericFileToInputStream(GenericFileConverter.java:123)&lt;br/&gt;
	at org.apache.camel.component.file.GenericFileConverter.genericFileToSerializable(GenericFileConverter.java:152)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
	at org.apache.camel.util.ObjectHelper.invokeMethod(ObjectHelper.java:922)&lt;br/&gt;
	at org.apache.camel.impl.converter.StaticMethodTypeConverter.convertTo(StaticMethodTypeConverter.java:47)&lt;br/&gt;
	at org.apache.camel.impl.converter.BaseTypeConverterRegistry.doConvertTo(BaseTypeConverterRegistry.java:253)&lt;br/&gt;
	at org.apache.camel.impl.converter.BaseTypeConverterRegistry.convertTo(BaseTypeConverterRegistry.java:111)&lt;br/&gt;
	at org.apache.camel.impl.DefaultExchangeHolder.checkMapSerializableObjects(DefaultExchangeHolder.java:209)&lt;br/&gt;
	at org.apache.camel.impl.DefaultExchangeHolder.safeSetProperties(DefaultExchangeHolder.java:177)&lt;br/&gt;
	at org.apache.camel.impl.DefaultExchangeHolder.marshal(DefaultExchangeHolder.java:93)&lt;br/&gt;
	at org.apache.camel.impl.DefaultExchangeHolder.marshal(DefaultExchangeHolder.java:71)&lt;br/&gt;
	at org.apache.camel.component.jms.JmsBinding.createJmsMessage(JmsBinding.java:439)&lt;br/&gt;
	at org.apache.camel.component.jms.JmsBinding.makeJmsMessage(JmsBinding.java:287)&lt;br/&gt;
	at org.apache.camel.component.jms.JmsProducer$2.createMessage(JmsProducer.java:266)&lt;br/&gt;
	at org.apache.camel.component.jms.JmsConfiguration$CamelJmsTemplate.doSendToDestination(JmsConfiguration.java:215)&lt;br/&gt;
	at org.apache.camel.component.jms.JmsConfiguration$CamelJmsTemplate.access$100(JmsConfiguration.java:158)&lt;br/&gt;
	at org.apache.camel.component.jms.JmsConfiguration$CamelJmsTemplate$3.doInJms(JmsConfiguration.java:192)&lt;br/&gt;
	at org.springframework.jms.core.JmsTemplate.execute(JmsTemplate.java:466)&lt;br/&gt;
	at org.apache.camel.component.jms.JmsConfiguration$CamelJmsTemplate.send(JmsConfiguration.java:189)&lt;br/&gt;
	at org.apache.camel.component.jms.JmsProducer.doSend(JmsProducer.java:398)&lt;br/&gt;
	at org.apache.camel.component.jms.JmsProducer.processInOnly(JmsProducer.java:352)&lt;br/&gt;
	at org.apache.camel.component.jms.JmsProducer.process(JmsProducer.java:132)&lt;br/&gt;
	at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73)&lt;br/&gt;
	at org.apache.camel.processor.SendProcessor$2.doInAsyncProducer(SendProcessor.java:122)&lt;br/&gt;
	at org.apache.camel.impl.ProducerCache.doInAsyncProducer(ProducerCache.java:298)&lt;br/&gt;
	at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:117)&lt;br/&gt;
	at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73)&lt;br/&gt;
	at org.apache.camel.processor.DelegateAsyncProcessor.processNext(DelegateAsyncProcessor.java:99)&lt;br/&gt;
	at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90)&lt;br/&gt;
	at org.apache.camel.management.InstrumentationProcessor.process(InstrumentationProcessor.java:73)&lt;br/&gt;
	at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73)&lt;br/&gt;
	at org.apache.camel.processor.DelegateAsyncProcessor.processNext(DelegateAsyncProcessor.java:99)&lt;br/&gt;
	at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90)&lt;br/&gt;
	at org.apache.camel.processor.interceptor.TraceInterceptor.process(TraceInterceptor.java:163)&lt;br/&gt;
	at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73)&lt;br/&gt;
	at org.apache.camel.processor.RedeliveryErrorHandler.processErrorHandler(RedeliveryErrorHandler.java:334)&lt;br/&gt;
	... 28 more&lt;br/&gt;
Caused by: java.io.FileNotFoundException: e:\work\ids\testCustomer\input\payment.xml (The system cannot find the file specified)&lt;br/&gt;
	at java.io.FileInputStream.open(Native Method)&lt;br/&gt;
	at java.io.FileInputStream.&amp;lt;init&amp;gt;(FileInputStream.java:106)&lt;br/&gt;
	at org.apache.camel.converter.IOConverter.toInputStream(IOConverter.java:73)&lt;br/&gt;
	at org.apache.camel.converter.IOConverter.toByteArray(IOConverter.java:243)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
	at org.apache.camel.util.ObjectHelper.invokeMethod(ObjectHelper.java:922)&lt;br/&gt;
	... 71 more&lt;/p&gt;</description>
                <environment></environment>
        <key id="12614928">CAMEL-5774</key>
            <summary>ActiveMQ target endpoint with transferExchange=true does not work together with source File endpoint with preMove option set</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="vvnick">Viktor Nikolenko</reporter>
                        <labels>
                    </labels>
                <created>Tue, 6 Nov 2012 10:04:20 +0000</created>
                <updated>Sun, 3 Feb 2013 08:55:59 +0000</updated>
                            <resolved>Sun, 3 Feb 2013 08:55:59 +0000</resolved>
                                    <version>2.10.2</version>
                                    <fixVersion>2.10.4</fixVersion>
                    <fixVersion>2.11.0</fixVersion>
                                    <component>camel-activemq</component>
                    <component>camel-core</component>
                    <component>camel-jms</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13492160" author="davsclaus" created="Wed, 7 Nov 2012 06:43:28 +0000"  >&lt;p&gt;Post your Camel routes as well, this makes it much easier to look into with more details.&lt;/p&gt;</comment>
                            <comment id="13492279" author="vvnick" created="Wed, 7 Nov 2012 11:29:25 +0000"  >&lt;p&gt;Added routes in issue description.&lt;/p&gt;</comment>
                            <comment id="13568583" author="tvautrin" created="Fri, 1 Feb 2013 08:46:01 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;You can fix this problem with following change in org.apache.camel.component.file.FileBinding (camel-core)&lt;/p&gt;

&lt;p&gt;Replace line 57 :&lt;br/&gt;
     content = exchange.getContext().getTypeConverter().mandatoryConvertTo(byte[].class, exchange, file.getFile());&lt;br/&gt;
with :&lt;br/&gt;
     content = exchange.getContext().getTypeConverter().mandatoryConvertTo(byte[].class, exchange, file);&lt;/p&gt;

&lt;p&gt;it works for us&lt;/p&gt;</comment>
                            <comment id="13569622" author="davsclaus" created="Sat, 2 Feb 2013 18:59:34 +0000"  >&lt;p&gt;You shouldn&apos;t really use transferExchange to transfer a java.io.File over JMS.&lt;br/&gt;
Camel will by default detect its a java.io.File and load the file content into memory and send the data over JMS as a bytes message, when you dont have transferExchange=true.&lt;/p&gt;


</comment>
                            <comment id="13569736" author="davsclaus" created="Sun, 3 Feb 2013 08:55:59 +0000"  >&lt;p&gt;Viktor, thanks for reporting.&lt;br/&gt;
And Thomas for the hint for the solution.&lt;/p&gt;

&lt;p&gt;But there was other problems on the receiver side when using transferExchange=true and with files. So this is not supported any longer.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>255441</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 42 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0eryv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>84295</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>