<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:50:58 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-17202] camel-rest-openapi - If two openapi spec uses the same path only one rest endpoint is created</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-17202</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;If two openapi spec uses the same method, basePath and uriTemplate the componentEndpointUri will be the same. Then the second endpoint is created the first one &#160;is found in the camel context and the host property is overwritten. This causes all calls to these operations in routes goes to the second api.&lt;/p&gt;

&lt;p&gt;API One:&lt;br/&gt;
host: &lt;a href=&quot;https://api.one.com/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://api.one.com&lt;/a&gt;&lt;br/&gt;
method: GET&lt;br/&gt;
basePath: /api&lt;br/&gt;
uriTemplate: /users/{email}&lt;br/&gt;
title: api-one&lt;br/&gt;
version: 1.0.2&lt;/p&gt;

&lt;p&gt;API Two:&lt;br/&gt;
host: &lt;a href=&quot;https://api.one.com/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://api.two.com&lt;/a&gt;&lt;br/&gt;
method: GET&lt;br/&gt;
basePath: /api&lt;br/&gt;
uriTemplate: /users/{email}&lt;br/&gt;
title: api-two&lt;br/&gt;
version: 2.0.1&lt;/p&gt;

&lt;p&gt;In RestOpenApiEndpoint.createProducerFor() the componentEndpointUri is created like this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; componentEndpointUri = &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;rest&lt;/span&gt;:&quot;&lt;/span&gt; + method + &lt;span class=&quot;code-quote&quot;&gt;&quot;:&quot;&lt;/span&gt; + basePath + &lt;span class=&quot;code-quote&quot;&gt;&quot;:&quot;&lt;/span&gt; + uriTemplate &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;For both of the operations described above the componentEndpointUri will be&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;&quot;rest:GET:/api:/users/{email}&quot;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;When the camelContext.getEndpoint is called with this uri for API Two the endpoint for created for API One is returned instead of creating a new and the host parameter is set to &apos;&lt;a href=&quot;https://api.two.com&amp;#39;./&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://api.two.com&apos;.&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To solve this I&apos;ve added title and version from the openapi spec as query parameters to the componentEndpointUri:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; componentEndpointUri = &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;rest&lt;/span&gt;:&quot;&lt;/span&gt; + method + &lt;span class=&quot;code-quote&quot;&gt;&quot;:&quot;&lt;/span&gt; + basePath + &lt;span class=&quot;code-quote&quot;&gt;&quot;:&quot;&lt;/span&gt; + uriTemplate
    + &lt;span class=&quot;code-quote&quot;&gt;&quot;?title=&quot;&lt;/span&gt; + openapi.info.title + &lt;span class=&quot;code-quote&quot;&gt;&quot;&amp;amp;version=&quot;&lt;/span&gt; + openapi.info.version; &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Title and version are required in OpenAPI 3.x so they should always be available.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13412222">CAMEL-17202</key>
            <summary>camel-rest-openapi - If two openapi spec uses the same path only one rest endpoint is created</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="henka-rl">Henrik Karlsson</reporter>
                        <labels>
                    </labels>
                <created>Wed, 17 Nov 2021 10:23:42 +0000</created>
                <updated>Tue, 23 Nov 2021 05:41:26 +0000</updated>
                            <resolved>Mon, 22 Nov 2021 13:46:12 +0000</resolved>
                                    <version>3.13.0</version>
                                    <fixVersion>3.14.0</fixVersion>
                                    <component>camel-rest-openapi</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17445064" author="davsclaus" created="Wed, 17 Nov 2021 10:32:21 +0000"  >&lt;p&gt;Why do you have two API endpoint with the same uri combination ?&lt;/p&gt;</comment>
                            <comment id="17445106" author="henka-rl" created="Wed, 17 Nov 2021 11:29:57 +0000"  >&lt;p&gt;It&apos;s two different apis. They use different hostnames, but one operation in both apis happens to use the same basePath and uriTemplate.&lt;/p&gt;</comment>
                            <comment id="17445166" author="davsclaus" created="Wed, 17 Nov 2021 13:38:31 +0000"  >&lt;p&gt;Ah yeah its on the producer side&lt;/p&gt;</comment>
                            <comment id="17445195" author="davsclaus" created="Wed, 17 Nov 2021 14:12:05 +0000"  >&lt;p&gt;We should use id of rest() that can be unique and use that as part of the producer uri&lt;br/&gt;
Using a combination of version and title is not ideal&lt;/p&gt;</comment>
                            <comment id="17446345" author="henka-rl" created="Fri, 19 Nov 2021 07:59:44 +0000"  >&lt;p&gt;But isn&apos;t rest() only used for consumer?&lt;/p&gt;</comment>
                            <comment id="17446423" author="davsclaus" created="Fri, 19 Nov 2021 10:31:56 +0000"  >&lt;p&gt;Can you put together a reproducer example of this&lt;/p&gt;</comment>
                            <comment id="17447241" author="henka-rl" created="Mon, 22 Nov 2021 08:20:27 +0000"  >&lt;p&gt;Yes, I&apos;ll fix an example of this.&#160;&lt;/p&gt;</comment>
                            <comment id="17447293" author="henka-rl" created="Mon, 22 Nov 2021 10:24:52 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/henka-rl/camel-17202-example&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/henka-rl/camel-17202-example&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17447328" author="davsclaus" created="Mon, 22 Nov 2021 10:54:46 +0000"  >&lt;p&gt;Thanks for the example&lt;/p&gt;</comment>
                            <comment id="17447411" author="davsclaus" created="Mon, 22 Nov 2021 13:46:12 +0000"  >&lt;p&gt;Thanks for the example, I found a fix, and your app now works and passes its test&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 51 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0wt7s:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>