<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 09:58:59 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-6187] http4 component should default to charset based on content type</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-6187</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;HttpProducer determines the charset of an outgoing StringEntity based on an Exchange property (Exchange.CHARSET_NAME), using null if that property is not set. It also sets the content-type based on the content-type of the camel message (this may also contain a character encoding). &lt;br/&gt;
If these two don&apos;t match the receiver of the http request will probably not be able to parse the message. &lt;/p&gt;

&lt;p&gt;It would be better if the charset of the StringEntity would by default match the charset specified in the content-type. Matching these two is done when receiving response messages (in HttpProducer.extractResponseBody())...&lt;/p&gt;

&lt;p&gt;Suggested fix (in HttpProducer.createRequestEntity()), you could of course also do something like org.apache.camel.component.http4.helper.HttpHelper.setCharsetFromContentType() but my approach uses org.apache.http.entity.ContentType and java.nio.charset.Charset instead of trying to determine the correct charset itself):&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-comment&quot;&gt;// be a bit careful with &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; as any type can most likely be converted to &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;
&lt;/span&gt;&lt;span class=&quot;code-comment&quot;&gt;// so we only &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; an &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; check and accept &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; the body is really a &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;
&lt;/span&gt;&lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; not fallback to use the &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; charset as it can influence the request
&lt;/span&gt;&lt;span class=&quot;code-comment&quot;&gt;// (&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; example application/x-www-form-urlencoded forms being sent)
&lt;/span&gt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; charset = IOHelper.getCharsetName(exchange, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (charset == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; contentType != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)
{
    ContentType ct = ContentType.parse(contentType);
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (ct != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
        Charset cs = ct.getCharset();
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (cs != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;)
        {
            charset = cs.name();
        }
    }
}
StringEntity entity = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; StringEntity((&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;) data, charset);
entity.setContentType(contentType);
answer = entity;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12637961">CAMEL-6187</key>
            <summary>http4 component should default to charset based on content type</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="fhoeben">Fried Hoeben</reporter>
                        <labels>
                    </labels>
                <created>Wed, 20 Mar 2013 12:01:34 +0000</created>
                <updated>Mon, 26 Aug 2013 17:40:23 +0000</updated>
                            <resolved>Mon, 26 Aug 2013 17:40:23 +0000</resolved>
                                    <version>2.10.4</version>
                                    <fixVersion>2.11.2</fixVersion>
                    <fixVersion>2.12.0</fixVersion>
                                    <component>camel-http</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13750291" author="davsclaus" created="Mon, 26 Aug 2013 17:40:23 +0000"  >&lt;p&gt;Thanks for reporting and providing a solution.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>318439</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 13 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1iy2f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>318780</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>