<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 09:53:28 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-5616] Share properties configuration between CDI and CamelContext</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-5616</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;Apache DeltaSpike provides convenient way to inject configuration using @ConfigProperty value.&lt;br/&gt;
In ideal world @ConfigProperty injected by deltaspike should be same as configuration property visible from Camel Context.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12607664">CAMEL-5616</key>
            <summary>Share properties configuration between CDI and CamelContext</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hadrian">Hadrian Zbarcea</assignee>
                                    <reporter username="ldywicki">&#321;ukasz Dywicki</reporter>
                        <labels>
                    </labels>
                <created>Fri, 14 Sep 2012 15:39:34 +0000</created>
                <updated>Fri, 21 Sep 2012 07:05:15 +0000</updated>
                            <resolved>Thu, 20 Sep 2012 00:30:44 +0000</resolved>
                                                    <fixVersion>2.11.0</fixVersion>
                                    <component>camel-cdi</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13455878" author="splatch" created="Fri, 14 Sep 2012 15:47:00 +0000"  >&lt;p&gt;Proposed solution.&lt;/p&gt;</comment>
                            <comment id="13458203" author="splatch" created="Tue, 18 Sep 2012 21:37:48 +0000"  >&lt;p&gt;New version of patch with null check.&lt;/p&gt;</comment>
                            <comment id="13458343" author="hadrian" created="Wed, 19 Sep 2012 01:22:53 +0000"  >&lt;p&gt;Thanks Lukasz for patch&lt;/p&gt;</comment>
                            <comment id="13458442" author="davsclaus" created="Wed, 19 Sep 2012 06:14:52 +0000"  >&lt;p&gt;Lukasz, does DeltaSpike supports resolving multiple properties in the same text?&lt;/p&gt;

&lt;p&gt;The API on CamelContext supports resolving placeholders intermixed withe regular text (eg hence the name ending with ...s, and as stated in its javadoc, which maybe could be emphasized a bit on that part). An example would be a camel endpoint uri, eg&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-quote&quot;&gt;&quot;ftp:{{myServer}}:{{port}}/foo/bar&quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Then it resolves the 2 placeholders, myServer and port, returning lets say&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-quote&quot;&gt;&quot;ftp:someserver.com:21/foo/bar&quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If DeltaSpike cannot do that, then the patch is wrong; which I suspect is the case. &lt;/p&gt;

&lt;p&gt;You should integrate this on the component level instead. There is a PropertiesComponent that supports pluggable property resolver, that lookup a single property at a time. This is how we eg do it with blueprint. Take a look in camel-blueprint. &lt;/p&gt;</comment>
                            <comment id="13458499" author="splatch" created="Wed, 19 Sep 2012 08:31:29 +0000"  >&lt;p&gt;Claus,&lt;br/&gt;
Way how the properties component is glued with context is one huge hack. PropertiesResolver API does not match CDI cases, it&apos;s influenced by spring property placeholder stuff (it was replacement for it so I&apos;m not surprised it looks like original). In CDI you don&apos;t care about config location, whatever it is because config sources are automatically registered by cdi extension. You ask just about property to resolve (no access from API to grab all properties with names). Thus even if you will pass location of properties you would like to load nobody knows what to with it.&lt;/p&gt;</comment>
                            <comment id="13458504" author="davsclaus" created="Wed, 19 Sep 2012 08:40:17 +0000"  >&lt;p&gt;Yeah that may be the case, but the patch is IMHO wrong if CDI does not support the mixed resolution which is that the API on CamelContext is &lt;b&gt;all&lt;/b&gt; about. That API is not for a single property lookup by its key. &lt;/p&gt;

&lt;p&gt;To lookup by key, then use the properties component, not the CamelContext API.&lt;/p&gt;

&lt;p&gt;If config location doesn&apos;t matter in CDI, then its simple to configure as you would set the location to &quot;cdi&quot;, eg as we have for &quot;blueprint&quot; etc.&lt;/p&gt;

&lt;p&gt;What you need to hook is the PropertiesParser so you can do your CDI lookup there. The java.util.Properties parameter will just be null in this case. Just as its not used in the camel-blueprint implementation.&lt;/p&gt;</comment>
                            <comment id="13458519" author="splatch" created="Wed, 19 Sep 2012 09:10:47 +0000"  >&lt;p&gt;After extending deltaspike API we&apos;ll be able to implement custom properties resolver.&lt;/p&gt;</comment>
                            <comment id="13458740" author="splatch" created="Wed, 19 Sep 2012 15:07:13 +0000"  >&lt;p&gt;Solution with custom properties component overriding PropertiesParser.&lt;/p&gt;</comment>
                            <comment id="13459249" author="hadrian" created="Thu, 20 Sep 2012 00:30:44 +0000"  >&lt;p&gt;Patch using custom PropertiesParser applied. Thanks Lukasz, keep them coming.&lt;/p&gt;</comment>
                            <comment id="13460299" author="davsclaus" created="Fri, 21 Sep 2012 07:05:15 +0000"  >&lt;p&gt;Lukasz&lt;/p&gt;

&lt;p&gt;Yeah the current API is based on the needs back them for people to use placeholders with Spring and Camel. Later spring-dm and blueprint as well. &lt;br/&gt;
It may be that in Camel 3.0 the property placeholder API could warrant an API in the spi package instead of being based on a Camel component.&lt;/p&gt;

&lt;p&gt;Though a Camel component comes very natural to Camel, after all there is 100+ in the box. And for example the bean component could maybe have been implemented as a EIP instead as a service activator etc.&lt;/p&gt;

&lt;p&gt;Lukasz, do you mind helping with documentation as well? I guess a few spots to add some details about this could be at:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;a href=&quot;http://camel.apache.org/cdi&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://camel.apache.org/cdi&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://camel.apache.org/properties&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://camel.apache.org/properties&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://camel.apache.org/using-propertyplaceholder.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://camel.apache.org/using-propertyplaceholder.html&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12597560">CAMEL-5422</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310040">
                    <name>Required</name>
                                            <outwardlinks description="requires">
                                        <issuelink>
            <issuekey id="12608213">DELTASPIKE-273</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12545741" name="CAMEL-5616-component.patch" size="11031" author="ldywicki" created="Wed, 19 Sep 2012 15:07:13 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>241489</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 9 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0286v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>10928</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>