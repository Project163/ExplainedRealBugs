<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:59:12 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-18840] camel-http - HTTP broken followRedirection </title>
                <link>https://issues.apache.org/jira/browse/CAMEL-18840</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;Look like in 3.20.0 broken functionallity for disable follow redirections (HTTP 300-399 statuses) by set automatic-retries-disabled. Now need also set&#160;&lt;b&gt;RedirectHandlingDisabled&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Here simple example:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.camel.CamelContext;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.camel.Exchange;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.camel.builder.RouteBuilder;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.camel.component.http.HttpComponent;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.camel.impl.DefaultCamelContext;

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; org.apache.camel.builder.endpoint.StaticEndpointBuilders.http;

&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Scratch {
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        &lt;span class=&quot;code-comment&quot;&gt;//1
&lt;/span&gt;        CamelContext context1 = createContext(8080);
        &lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; httpComponent1 = context1.getComponent(&lt;span class=&quot;code-quote&quot;&gt;&quot;http&quot;&lt;/span&gt;, HttpComponent.class);
        httpComponent1.setFollowRedirects(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
        context1.start();

        &lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; response1 = context1.createProducerTemplate().requestBody(&lt;span class=&quot;code-quote&quot;&gt;&quot;direct:http&quot;&lt;/span&gt;, &quot;&quot;);
        &lt;span class=&quot;code-comment&quot;&gt;//Redirect to Apache Camel Page without any errors
&lt;/span&gt;        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(response1);


        &lt;span class=&quot;code-comment&quot;&gt;//2
&lt;/span&gt;        CamelContext context2 = createContext(8081);
        &lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; httpComponent2 = context2.getComponent(&lt;span class=&quot;code-quote&quot;&gt;&quot;http&quot;&lt;/span&gt;, HttpComponent.class);
        httpComponent2.setFollowRedirects(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
        httpComponent2.setAutomaticRetriesDisabled(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
        context2.start();
        &lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; response2 = context2.createProducerTemplate().requestBody(&lt;span class=&quot;code-quote&quot;&gt;&quot;direct:http&quot;&lt;/span&gt;, &quot;&quot;);
        &lt;span class=&quot;code-comment&quot;&gt;//Redirect to Apache Camel Page without any errors
&lt;/span&gt;        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(response2);

        &lt;span class=&quot;code-comment&quot;&gt;//3
&lt;/span&gt;        CamelContext context3 = createContext(8082);
        &lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; httpComponent3 = context3.getComponent(&lt;span class=&quot;code-quote&quot;&gt;&quot;http&quot;&lt;/span&gt;, HttpComponent.class);
        httpComponent3.setFollowRedirects(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
        httpComponent3.setAutomaticRetriesDisabled(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
        httpComponent3.setRedirectHandlingDisabled(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
        context3.start();
        &lt;span class=&quot;code-keyword&quot;&gt;var&lt;/span&gt; response3 = context3.createProducerTemplate().requestBody(&lt;span class=&quot;code-quote&quot;&gt;&quot;direct:http&quot;&lt;/span&gt;, &quot;&quot;);
        &lt;span class=&quot;code-comment&quot;&gt;//work as expected - error &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt;
&lt;/span&gt;        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(response3);

    }

    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; CamelContext createContext(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; port) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        CamelContext context = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; DefaultCamelContext();
        context.addRoutes(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; RouteBuilder() {
            @Override
            &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void configure() {
                restConfiguration().component(&lt;span class=&quot;code-quote&quot;&gt;&quot;jetty&quot;&lt;/span&gt;).host(&lt;span class=&quot;code-quote&quot;&gt;&quot;localhost&quot;&lt;/span&gt;).port(port);
                &lt;span class=&quot;code-keyword&quot;&gt;rest&lt;/span&gt;().get(&lt;span class=&quot;code-quote&quot;&gt;&quot;test303&quot;&lt;/span&gt;).to(&lt;span class=&quot;code-quote&quot;&gt;&quot;direct:addLocation&quot;&lt;/span&gt;);
                from(&lt;span class=&quot;code-quote&quot;&gt;&quot;direct:addLocation&quot;&lt;/span&gt;)
                        .setHeader(&lt;span class=&quot;code-quote&quot;&gt;&quot;Location&quot;&lt;/span&gt;, constant(&lt;span class=&quot;code-quote&quot;&gt;&quot;https:&lt;span class=&quot;code-comment&quot;&gt;//camel.apache.org&quot;&lt;/span&gt;))
&lt;/span&gt;                        .setHeader(Exchange.HTTP_RESPONSE_CODE, constant(303));

                from(&lt;span class=&quot;code-quote&quot;&gt;&quot;direct:http&quot;&lt;/span&gt;)
                        .setHeader(Exchange.HTTP_METHOD, constant(&lt;span class=&quot;code-quote&quot;&gt;&quot;GET&quot;&lt;/span&gt;))
                        .to(http(&lt;span class=&quot;code-quote&quot;&gt;&quot;localhost:&quot;&lt;/span&gt; + port + &lt;span class=&quot;code-quote&quot;&gt;&quot;/test303&quot;&lt;/span&gt;)
                                .bridgeEndpoint(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;)
                                .throwExceptionOnFailure(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;)
                                .advanced()
                                .okStatusCodeRange(&lt;span class=&quot;code-quote&quot;&gt;&quot;200-299&quot;&lt;/span&gt;))
                        .convertBodyTo(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;.class);
            }
        });
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; context;
    }
} &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;In version 3.11.1 exaption throws on 2 step with setAutomaticRetriesDisabled &#160;(for run it - need remove setFollowRedirects)&lt;/li&gt;
&lt;/ul&gt;


&lt;ul&gt;
	&lt;li&gt;In version 3.20.0 exaption throws&#160; &lt;b&gt;only on 3 step&lt;/b&gt;.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Please fix it or add description of this new behavior to your documentaions.&lt;/p&gt;

&lt;p&gt;Also I don&apos;t understan how to use option &lt;b&gt;camel.component.http.follow-redirects&lt;/b&gt;&#160;because seems it does not works as expected &quot;Whether to the HTTP request should follow redirects.&quot;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13515367">CAMEL-18840</key>
            <summary>camel-http - HTTP broken followRedirection </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="akvel">Valeriy Ak</reporter>
                        <labels>
                            <label>camel-http</label>
                    </labels>
                <created>Fri, 23 Dec 2022 12:09:34 +0000</created>
                <updated>Mon, 30 Jan 2023 08:59:48 +0000</updated>
                            <resolved>Tue, 27 Dec 2022 11:24:52 +0000</resolved>
                                    <version>3.20.0</version>
                                    <fixVersion>3.20.1</fixVersion>
                    <fixVersion>3.21.0</fixVersion>
                    <fixVersion>4.0-M1</fixVersion>
                    <fixVersion>4.0.0</fixVersion>
                                    <component>camel-http</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17651702" author="davsclaus" created="Fri, 23 Dec 2022 18:14:52 +0000"  >&lt;p&gt;It looks like it was a mistake in older Camel versions that has been fixed for 3.20 onwards&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/camel/commit/f99c22e53559abe20f60ef37b663cd672fe95add&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/commit/f99c22e53559abe20f60ef37b663cd672fe95add&lt;/a&gt;&lt;/p&gt;
</comment>
                            <comment id="17652200" author="akvel" created="Tue, 27 Dec 2022 09:13:52 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davsclaus&quot; class=&quot;user-hover&quot; rel=&quot;davsclaus&quot;&gt;davsclaus&lt;/a&gt;&#160; I do not think that it fiex in 3.20, because follow-redirects and automatic-retries-disabled param does not works as expected&lt;b&gt;{&lt;/b&gt;}&lt;/p&gt;</comment>
                            <comment id="17652215" author="davsclaus" created="Tue, 27 Dec 2022 10:50:04 +0000"  >&lt;p&gt;No its how the http client works (its that client that handles the redirect handling - not Camel), you need to enable both of them as in #3&lt;/p&gt;
</comment>
                            <comment id="17652228" author="davsclaus" created="Tue, 27 Dec 2022 11:21:26 +0000"  >&lt;p&gt;However I agree that its not as intuitive, so we can make it better so if followRedirect=true then it will follow, and if followRedirect=false, then it will not. Then you do not have to tweak these other advanced options.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13361020">CAMEL-16262</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12314421" key="com.atlassian.jira.plugin.system.customfieldtypes:labels">
                        <customfieldname>Language</customfieldname>
                        <customfieldvalues>
                                        <label>English</label>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 46 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1ec94:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>