<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 11:01:48 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-19650] Camel Kafka doesn&apos;t honor &apos;workerPool&apos; configuration</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-19650</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;When we set the &quot;&lt;b&gt;workerPool&quot;&lt;/b&gt;&#160;property in the Kafka configuration it&apos;s not honored and &quot;KafkaProducer&quot; falls back to creating a new thread pool with the default 10 threads.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;As mentioned in &lt;a href=&quot;https://camel.apache.org/components/3.14.x/kafka-component.html#_component_options&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://camel.apache.org/components/3.14.x/kafka-component.html#_component_options&lt;/a&gt; There is a component option to provide custom thread pool &quot;&lt;b&gt;workerPool (producer)&lt;/b&gt;&quot;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;So in KafkaProducer.java&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-comment&quot;&gt;// code placeholder
&lt;/span&gt;
    @Override
    @SuppressWarnings(&lt;span class=&quot;code-quote&quot;&gt;&quot;rawtypes&quot;&lt;/span&gt;)
    &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; void doStart() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        Properties props = getProps();
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (kafkaProducer == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
            createProducer(props);
        }

        &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; we are in asynchronous mode we need a worker pool
&lt;/span&gt;        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!configuration.isSynchronous() &amp;amp;&amp;amp; workerPool == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
            workerPool = endpoint.createProducerExecutor();
            &lt;span class=&quot;code-comment&quot;&gt;// we create a thread pool so we should also shut it down
&lt;/span&gt;            shutdownWorkerPool = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
        }
    }

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&quot; &lt;em&gt;&lt;b&gt;if (!configuration.isSynchronous() &amp;amp;&amp;amp; workerPool == null) {&lt;/b&gt;&lt;/em&gt; &quot;&lt;/p&gt;

&lt;p&gt;we only check for synchronization, since the worker pool is &quot;null&quot; when created, it goes ahead and creates a new pool with default threads by calling &quot;createProducerExecutor()&quot;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Ideally, we should check if &quot;configuration.getWorkerPool()&quot; and if it&apos;s not null, we should assign this to the worker pool instead of creating the new one.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Fix.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-comment&quot;&gt;// code placeholder
&lt;/span&gt;
&lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; void doStart() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
    Properties props = &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.getProps();
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.kafkaProducer == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
        &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.createProducer(props);
    }

    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.configuration.isSynchronous() &amp;amp;&amp;amp; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.workerPool == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.configuration.getWorkerPool() != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
            &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.workerPool = &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.configuration.getWorkerPool();
            &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.shutdownWorkerPool = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;
        } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
            &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.workerPool = &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.endpoint.createProducerExecutor();
            &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.shutdownWorkerPool = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;
        }
    }

} &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment>&lt;p&gt;Java - 8&lt;/p&gt;

&lt;p&gt;Camel 3.14.9&lt;/p&gt;

&lt;p&gt;Kafka 3.x broker&lt;/p&gt;</environment>
        <key id="13544800">CAMEL-19650</key>
            <summary>Camel Kafka doesn&apos;t honor &apos;workerPool&apos; configuration</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="kartikvk1996">Kartik</reporter>
                        <labels>
                            <label>camel-component</label>
                    </labels>
                <created>Tue, 25 Jul 2023 11:53:08 +0000</created>
                <updated>Thu, 10 Aug 2023 06:41:16 +0000</updated>
                            <resolved>Wed, 26 Jul 2023 15:27:00 +0000</resolved>
                                    <version>3.14.9</version>
                                    <fixVersion>3.14.10</fixVersion>
                    <fixVersion>3.20.7</fixVersion>
                    <fixVersion>3.21.1</fixVersion>
                    <fixVersion>3.22.0</fixVersion>
                    <fixVersion>4.0.0</fixVersion>
                                    <component>camel-kafka</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17746943" author="davsclaus" created="Tue, 25 Jul 2023 11:56:56 +0000"  >&lt;p&gt;You are welcome to send a PR.&lt;br/&gt;
And can you check if its fixed in 3.20.x / 3.21.x releases already&lt;/p&gt;</comment>
                            <comment id="17746961" author="kartikvk1996" created="Tue, 25 Jul 2023 12:13:59 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davsclaus&quot; class=&quot;user-hover&quot; rel=&quot;davsclaus&quot;&gt;davsclaus&lt;/a&gt;&#160; We are on java 8 and we need it in 3.14.x is that possible&lt;/p&gt;</comment>
                            <comment id="17746977" author="kartikvk1996" created="Tue, 25 Jul 2023 12:39:01 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davsclaus&quot; class=&quot;user-hover&quot; rel=&quot;davsclaus&quot;&gt;davsclaus&lt;/a&gt; I don&apos;t see this fixed in 3.21.x &lt;a href=&quot;https://github.com/apache/camel/blob/camel-3.21.x/components/camel-kafka/src/main/java/org/apache/camel/component/kafka/KafkaProducer.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/blob/camel-3.21.x/components/camel-kafka/src/main/java/org/apache/camel/component/kafka/KafkaProducer.java&lt;/a&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17746991" author="JIRAUSER285918" created="Tue, 25 Jul 2023 13:01:36 +0000"  >&lt;p&gt;Yes, it is still possible to have it fixed in 3.14 but please note that its EOL is December 2023 see &lt;a href=&quot;https://camel.apache.org/blog/2021/09/eol-java8/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://camel.apache.org/blog/2021/09/eol-java8/&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Regarding your issue and fix, I agree with both, could you please submit a PR? &lt;/p&gt;</comment>
                            <comment id="17747320" author="kartikvk1996" created="Wed, 26 Jul 2023 07:22:23 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davsclaus&quot; class=&quot;user-hover&quot; rel=&quot;davsclaus&quot;&gt;davsclaus&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nfilotto&quot; class=&quot;user-hover&quot; rel=&quot;nfilotto&quot;&gt;nfilotto&lt;/a&gt; PR is raised kindly review &lt;a href=&quot;https://github.com/apache/camel/pull/10827&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/10827&lt;/a&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17752623" author="kartikvk1996" created="Thu, 10 Aug 2023 05:06:38 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davsclaus&quot; class=&quot;user-hover&quot; rel=&quot;davsclaus&quot;&gt;davsclaus&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nfilotto&quot; class=&quot;user-hover&quot; rel=&quot;nfilotto&quot;&gt;nfilotto&lt;/a&gt;&#160; When 3.14.10 is getting released, we need to consume this fix as we have 1000+ routes running.&lt;/p&gt;</comment>
                            <comment id="17752641" author="davsclaus" created="Thu, 10 Aug 2023 06:41:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/projects/CAMEL?selectedItem=com.atlassian.jira.jira-projects-plugin%3Arelease-page&amp;amp;status=released-unreleased&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/projects/CAMEL?selectedItem=com.atlassian.jira.jira-projects-plugin%3Arelease-page&amp;amp;status=released-unreleased&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10061"><![CDATA[Novice]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 13 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1jd1s:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>