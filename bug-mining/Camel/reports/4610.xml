<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:30:50 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-12229] Some RabbitMQ channels are never started when target queue doesn&apos;t exist during component startup</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-12229</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;Commit&#160;8311af003ab888ca53a042ce5e9955b7cd5a845b reveals previously hidden bug.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Steps to reproduce&lt;/b&gt;:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;configure rabbitmq consumer to connect to existing rabbitmq server but to non existing queue Q1&lt;/li&gt;
	&lt;li&gt;start rabbitmq consumer with several channels.&lt;/li&gt;
	&lt;li&gt;after some time create Q1 on target rabbitmq server&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;&lt;b&gt;Expected result&lt;/b&gt;:&lt;/p&gt;

&lt;p&gt;All channels are connected to&#160;&#160;rabbitmq server and can consume messages from Q1&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Actual result&lt;/b&gt;:&lt;/p&gt;

&lt;p&gt;All channels are connected to&#160;&#160;rabbitmq server and but only one channel can consume messages from Q1&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Note:&lt;/p&gt;

&lt;p&gt;Separation on channels creating and their starting causes that channels are not&#160;started in reconnect loop if&#160; they were successfully created in&#160;createConsumer&#160;but not started in&#160;startConsumers().&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13136276">CAMEL-12229</key>
            <summary>Some RabbitMQ channels are never started when target queue doesn&apos;t exist during component startup</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="vbystricky">Vaclav Bystricky</reporter>
                        <labels>
                    </labels>
                <created>Mon, 5 Feb 2018 13:59:06 +0000</created>
                <updated>Thu, 23 Aug 2018 12:09:10 +0000</updated>
                            <resolved>Thu, 23 Aug 2018 12:09:10 +0000</resolved>
                                    <version>2.20.2</version>
                                    <fixVersion>2.23.0</fixVersion>
                                    <component>camel-rabbitmq</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                                                            <comments>
                            <comment id="16355138" author="davsclaus" created="Wed, 7 Feb 2018 08:42:10 +0000"  >&lt;p&gt;You are welcome to attempt to work on a patch for this which you can also test with your rabbit mq broker&lt;/p&gt;</comment>
                            <comment id="16392563" author="davsclaus" created="Fri, 9 Mar 2018 08:18:03 +0000"  >&lt;p&gt;Can you possible provide some details on how to create Q1 on the rabbitmq server. We have an instance running via Docker and the integration test suite we have runs automatic and have the queues auto-created. But if we can find a way to reproduce this either auto or manually it would be good to help track down and implement a fix for this.&lt;/p&gt;</comment>
                            <comment id="16588832" author="githubbot" created="Wed, 22 Aug 2018 13:26:37 +0000"  >&lt;p&gt;davsclaus opened a new pull request #2491: &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12229&quot; title=&quot;Some RabbitMQ channels are never started when target queue doesn&amp;#39;t exist during component startup&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12229&quot;&gt;&lt;del&gt;CAMEL-12229&lt;/del&gt;&lt;/a&gt;: camel-rabbitmq consumer should be more resilient on star&#8230;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/camel/pull/2491&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2491&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   &#8230;ting. There may be a situation where a connection is created but cannot be started, and then the reconnect logic would reconnect but not start the consumer. Now we have logic that calls the start method, and we leverage Camels ServiceSupport for lifecycle of start/stop.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16588834" author="githubbot" created="Wed, 22 Aug 2018 13:26:37 +0000"  >&lt;p&gt;GitHub user davsclaus opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/2491&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2491&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12229&quot; title=&quot;Some RabbitMQ channels are never started when target queue doesn&amp;#39;t exist during component startup&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12229&quot;&gt;&lt;del&gt;CAMEL-12229&lt;/del&gt;&lt;/a&gt;: camel-rabbitmq consumer should be more resilient on star&#8230;&lt;/p&gt;

&lt;p&gt;    &#8230;ting. There may be a situation where a connection is created but cannot be started, and then the reconnect logic would reconnect but not start the consumer. Now we have logic that calls the start method, and we leverage Camels ServiceSupport for lifecycle of start/stop.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/apache/camel&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel&lt;/a&gt; camel-12229&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/2491.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2491.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #2491&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit f081f6328c9559a32f9d8ae88c06c7cb7d168e58&lt;br/&gt;
Author: Claus Ibsen &amp;lt;claus.ibsen@...&amp;gt;&lt;br/&gt;
Date:   2018-08-22T13:26:13Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12229&quot; title=&quot;Some RabbitMQ channels are never started when target queue doesn&amp;#39;t exist during component startup&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12229&quot;&gt;&lt;del&gt;CAMEL-12229&lt;/del&gt;&lt;/a&gt;: camel-rabbitmq consumer should be more resilient on starting. There may be a situation where a connection is created but cannot be started, and then the reconnect logic would reconnect but not start the consumer. Now we have logic that calls the start method, and we leverage Camels ServiceSupport for lifecycle of start/stop.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16588835" author="davsclaus" created="Wed, 22 Aug 2018 13:26:55 +0000"  >&lt;p&gt;Okay I looked at this a bit and have a potential fix in a PR&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/camel/pull/2491&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2491&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Feedback and review is welcome.&lt;/p&gt;</comment>
                            <comment id="16590138" author="githubbot" created="Thu, 23 Aug 2018 12:08:13 +0000"  >&lt;p&gt;davsclaus closed pull request #2491: &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12229&quot; title=&quot;Some RabbitMQ channels are never started when target queue doesn&amp;#39;t exist during component startup&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12229&quot;&gt;&lt;del&gt;CAMEL-12229&lt;/del&gt;&lt;/a&gt;: camel-rabbitmq consumer should be more resilient on star&#8230;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/camel/pull/2491&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2491&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16590139" author="githubbot" created="Thu, 23 Aug 2018 12:08:14 +0000"  >&lt;p&gt;Github user davsclaus closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/2491&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2491&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16590141" author="davsclaus" created="Thu, 23 Aug 2018 12:09:10 +0000"  >&lt;p&gt;We have tried to fix this&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                            <subtask id="13136862">CAMEL-12240</subtask>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 12 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3pst3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>