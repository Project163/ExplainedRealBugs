<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:51:16 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-17295] REST DSL (With Servlet Component) Fails to Resolve Endpoint if Query Parameter Is Part of URI Parameter</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-17295</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;The following works with Camel versions &lt;tt&gt;3.11.3&lt;/tt&gt; and &lt;tt&gt;3.13.0&lt;/tt&gt; but fails with version &lt;tt&gt;3.11.4&lt;/tt&gt;:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;rest&lt;/span&gt;(&lt;span class=&quot;code-quote&quot;&gt;&quot;/Assertion?authTokenSourceUri={&quot;&lt;/span&gt; + HEADER_AUTH_TOKEN_SOURCE_URI + &lt;span class=&quot;code-quote&quot;&gt;&quot;}&quot;&lt;/span&gt;).id(ROUTE_REST_GET_ASSERTION)
    .get()
    .produces(MediaType.TEXT_XML_VALUE)
    .route()
    &lt;span class=&quot;code-comment&quot;&gt;// route definition omitted&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;With version &lt;tt&gt;3.11.4&lt;/tt&gt; this yields an &lt;tt&gt;org.apache.camel.ResolveEndpointFailedException&lt;/tt&gt;:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Caused by: org.apache.camel.ResolveEndpointFailedException: Failed to resolve endpoint: servlet:///Assertion?httpMethodRestrict=GET due to: There are 1 parameters that couldn&apos;t be set on the endpoint. Check the uri if the parameters are spelt correctly and that they are properties of the endpoint. Unknown parameters=[{authTokenSourceUri={authTokenSourceUri}?consumerComponentName=servlet}]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Specifying the query parameter via DSL works with all three versions:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;rest&lt;/span&gt;(&lt;span class=&quot;code-quote&quot;&gt;&quot;/Assertion&quot;&lt;/span&gt;).id(ROUTE_REST_GET_ASSERTION)
    .get()
    .param()
        .name(HEADER_AUTH_TOKEN_SOURCE_URI)
        .type(RestParamType.query)
    .endParam()
    &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;rest&lt;/span&gt; is same as above&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13415903">CAMEL-17295</key>
            <summary>REST DSL (With Servlet Component) Fails to Resolve Endpoint if Query Parameter Is Part of URI Parameter</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="ralfsteppacher">Ralf Steppacher</reporter>
                        <labels>
                    </labels>
                <created>Tue, 7 Dec 2021 20:30:21 +0000</created>
                <updated>Fri, 10 Dec 2021 09:50:24 +0000</updated>
                            <resolved>Fri, 10 Dec 2021 09:50:24 +0000</resolved>
                                    <version>3.11.4</version>
                                    <fixVersion>3.14.0</fixVersion>
                                    <component>camel-core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17454997" author="davsclaus" created="Wed, 8 Dec 2021 06:57:13 +0000"  >&lt;p&gt;Can you test with 3.13.0&lt;/p&gt;</comment>
                            <comment id="17455088" author="ralfsteppacher" created="Wed, 8 Dec 2021 09:46:34 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davsclaus&quot; class=&quot;user-hover&quot; rel=&quot;davsclaus&quot;&gt;davsclaus&lt;/a&gt;, it is already in the description. It works with Camel&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;3.11.3&lt;/li&gt;
	&lt;li&gt;3.13.0&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;It does not work with Camel&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;3.11.4&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17455097" author="davsclaus" created="Wed, 8 Dec 2021 10:21:58 +0000"  >&lt;p&gt;Okay are you able to try 3.14.0-SNAPSHOT&lt;/p&gt;</comment>
                            <comment id="17455190" author="ralfsteppacher" created="Wed, 8 Dec 2021 11:46:46 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davsclaus&quot; class=&quot;user-hover&quot; rel=&quot;davsclaus&quot;&gt;davsclaus&lt;/a&gt;, version &lt;tt&gt;3.14.0-SNAPSHOT&lt;/tt&gt; gives me the same error about the unresolvable endpoint due to the unknown parameter.&lt;/p&gt;</comment>
                            <comment id="17455199" author="davsclaus" created="Wed, 8 Dec 2021 12:06:39 +0000"  >&lt;p&gt;Can you attach some kind of reproducer, or unit test, or make something more easy to use for reproducing&lt;/p&gt;</comment>
                            <comment id="17456522" author="davsclaus" created="Thu, 9 Dec 2021 15:52:46 +0000"  >&lt;p&gt;One last bug to fix before the release.&lt;/p&gt;</comment>
                            <comment id="17456586" author="davsclaus" created="Thu, 9 Dec 2021 17:27:04 +0000"  >&lt;p&gt;Using the param does give you more power as you can specify if the query param is required.&lt;br/&gt;
And if you have the client request validation enabled it can pre-validate and fail the request if the param is missing&lt;/p&gt;</comment>
                            <comment id="17456667" author="davsclaus" created="Thu, 9 Dec 2021 18:38:23 +0000"  >&lt;p&gt;I have reproducer this on main branch. So it looks like query parameters was not detected in rest-dsl when you use those { } placeholders. So before it worked because of &lt;em&gt;luck&lt;/em&gt;.&lt;br/&gt;
We can try to detect those like we do for context-path, and setup it as a query param automatic.&lt;/p&gt;</comment>
                            <comment id="17456726" author="ralfsteppacher" created="Thu, 9 Dec 2021 20:51:13 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davsclaus&quot; class=&quot;user-hover&quot; rel=&quot;davsclaus&quot;&gt;davsclaus&lt;/a&gt;, thank you for the addtl. info on the param DSL method!&lt;/p&gt;</comment>
                            <comment id="17456912" author="davsclaus" created="Fri, 10 Dec 2021 06:49:09 +0000"  >&lt;p&gt;This is a bigger fix/improvement so landing in 3.14.0 only&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 48 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0xfwo:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>