<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 09:52:10 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-5381] Exchange&apos;s headers lost after pass through dynamicRouter if the consume from activemq</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-5381</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;Please see the unit test below, if consume from other endpoint such as direct, things work properly but does not when consume from activemq&lt;/p&gt;</description>
                <environment></environment>
        <key id="12595207">CAMEL-5381</key>
            <summary>Exchange&apos;s headers lost after pass through dynamicRouter if the consume from activemq</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="somchaij">Somchai </reporter>
                        <labels>
                    </labels>
                <created>Wed, 20 Jun 2012 05:05:05 +0000</created>
                <updated>Mon, 25 Jun 2012 10:16:57 +0000</updated>
                            <resolved>Wed, 20 Jun 2012 07:57:38 +0000</resolved>
                                    <version>2.8.5</version>
                    <version>2.9.2</version>
                    <version>2.10.0</version>
                                    <fixVersion>2.8.6</fixVersion>
                    <fixVersion>2.9.3</fixVersion>
                    <fixVersion>2.10.0</fixVersion>
                                    <component>camel-activemq</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13397300" author="davsclaus" created="Wed, 20 Jun 2012 06:45:16 +0000"  >&lt;p&gt;Try with 2.9.3 or 2.10 as it should be fixed.&lt;/p&gt;</comment>
                            <comment id="13397307" author="somchaij" created="Wed, 20 Jun 2012 07:02:31 +0000"  >&lt;p&gt;I try this unit test over the trunk (2.10-SNAPSHOT) and it&apos;s failed&lt;/p&gt;</comment>
                            <comment id="13397341" author="davsclaus" created="Wed, 20 Jun 2012 07:57:39 +0000"  >&lt;p&gt;Fixed now&lt;/p&gt;</comment>
                            <comment id="13397342" author="davsclaus" created="Wed, 20 Jun 2012 07:58:49 +0000"  >&lt;p&gt;A workaround is to convert the message to a String prior to setting the header, eg&lt;/p&gt;

&lt;p&gt;.convertBodyTo(String.class)&lt;/p&gt;</comment>
                            <comment id="13397360" author="somchaij" created="Wed, 20 Jun 2012 08:37:31 +0000"  >&lt;p&gt;Can you also, give me the example on how this workaround being used ?&lt;/p&gt;</comment>
                            <comment id="13397366" author="davsclaus" created="Wed, 20 Jun 2012 09:14:55 +0000"  >&lt;p&gt;Yes just add the piece of code from above, before you do the .setHeader&lt;/p&gt;</comment>
                            <comment id="13397378" author="somchaij" created="Wed, 20 Jun 2012 09:31:46 +0000"  >&lt;p&gt;I try with version 2.9.2, does not seem to be the workaround., can you show me more of the example ? or explanation why convert the body to String class can help on this. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13397509" author="davsclaus" created="Wed, 20 Jun 2012 13:47:41 +0000"  >&lt;p&gt;The convert will transform the message from JmsMessage to DefaultMessage. And the bug was in JmsMessage with the header lost, when using the dynamic eip pattern (also the routing slip eip as well).&lt;/p&gt;</comment>
                            <comment id="13397518" author="davsclaus" created="Wed, 20 Jun 2012 14:01:46 +0000"  >&lt;p&gt;Fixed this in jcr and spring-integration components as well.&lt;/p&gt;</comment>
                            <comment id="13398263" author="somchaij" created="Thu, 21 Jun 2012 07:53:04 +0000"  >&lt;p&gt;Seem like ConvertBodyProcessor does not changes the Message type (from JMSMessage to DefaultMessage), then I found this workaround instead (used of class SetBodyProcessor)&lt;/p&gt;

&lt;p&gt;.setBody(body(String.class))&lt;/p&gt;

&lt;p&gt;Any mistakes please do correct me.&lt;/p&gt;</comment>
                            <comment id="13398266" author="davsclaus" created="Thu, 21 Jun 2012 07:55:50 +0000"  >&lt;p&gt;Convert body has been fixed to act like setBody in a later release&lt;/p&gt;</comment>
                            <comment id="13400392" author="somchaij" created="Mon, 25 Jun 2012 10:12:56 +0000"  >&lt;p&gt;Just curios, will this actually be fixed in 2.10.0 (from your update of the &quot;Fix Version/s&quot; field) ? (did not see the source code from tag 2.10) (OR you will then update the tag of 2.10 to newer revision ?)&lt;/p&gt;</comment>
                            <comment id="13400395" author="davsclaus" created="Mon, 25 Jun 2012 10:16:57 +0000"  >&lt;p&gt;2.10 has not been released. There was a RC but its been cancelled, and a new RC is being cut later today/tomorrow. So yes this fix will be in the 2.10 release when its GA.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12532646" name="DynamicRoutersWithJMSMessageLostHeadersIssueTest.java" size="3091" author="somchaij" created="Wed, 20 Jun 2012 05:05:30 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>241254</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 22 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i026qn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>10693</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>