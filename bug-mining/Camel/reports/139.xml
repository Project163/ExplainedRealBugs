<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 09:26:03 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-361] @Component seems to cause configure() being called before @EndpointInject is invoked</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-361</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description></description>
                <environment></environment>
        <key id="12485160">CAMEL-361</key>
            <summary>@Component seems to cause configure() being called before @EndpointInject is invoked</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="njiang">Willem Jiang</assignee>
                                    <reporter username="jstrachan">James Strachan</reporter>
                        <labels>
                    </labels>
                <created>Wed, 5 Mar 2008 13:37:19 +0000</created>
                <updated>Thu, 5 Jun 2008 09:04:51 +0000</updated>
                            <resolved>Wed, 14 May 2008 06:27:39 +0000</resolved>
                                                    <fixVersion>1.4.0</fixVersion>
                                    <component>camel-spring</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12946427" author="magnusheino" created="Wed, 5 Mar 2008 13:47:08 +0000"  >&lt;p&gt;@Componet doesn&apos;t seem to matter. Same thing if I remove @Component. (Component was only there because I injected some spring stuff also)&lt;/p&gt;

&lt;p&gt;My context looks like this:&lt;/p&gt;

&lt;p&gt;&amp;lt;camelContext&amp;gt;&lt;br/&gt;
        &amp;lt;package&amp;gt;se.lantmateriet.origo&amp;lt;/package&amp;gt;&lt;br/&gt;
        &amp;lt;endpoint id=&quot;receiptChannel&quot; uri=&quot;mock:updateReceipt&quot; /&amp;gt;&lt;br/&gt;
        &amp;lt;endpoint id=&quot;updateChannel&quot; uri=&quot;file://src/test/data/EmptyChangeTransactionWithSoap.xml?noop=true&quot; /&amp;gt;&lt;br/&gt;
        &amp;lt;endpoint id=&quot;updateServiceChannel&quot; uri=&quot;bean:updateService&quot; /&amp;gt;&lt;br/&gt;
    &amp;lt;/camelContext&amp;gt;&lt;/p&gt;

&lt;p&gt;and in se.lantmateriet.origo.service.internal.ServiceRoutes that extends SpringRouteBuilder, configure is called before and @EndpointInject&apos;s are injected.&lt;/p&gt;</comment>
                            <comment id="12947008" author="jstrachan" created="Mon, 12 May 2008 15:10:50 +0000"  >&lt;p&gt;wonder if you fancy taking a look at this?&lt;/p&gt;</comment>
                            <comment id="12947032" author="njiang" created="Tue, 13 May 2008 07:28:39 +0000"  >&lt;p&gt;Hi Magnus&lt;/p&gt;

&lt;p&gt;Did you specify the &amp;lt;component-scan xmlns=&quot;http://www.springframework.org/schema/context&quot; base-package=&quot;*** /&amp;gt; in you spring configuration file?&lt;br/&gt;
You could take a look at the SpringComponentScanTest&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;, which is workable for injecting the @component.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;https://svn.apache.org/repos/asf/activemq/camel/trunk/components/camel-spring/src/test/java/org/apache/camel/spring/config/scan/SpringComponentScanTest.java&lt;/p&gt;

&lt;p&gt;Willem    &lt;/p&gt;</comment>
                            <comment id="12947091" author="magnusheino" created="Tue, 13 May 2008 08:53:10 +0000"  >&lt;p&gt;I&apos;m not sure I understand.&lt;/p&gt;

&lt;p&gt;Create a class that extends SpringRouteBuilder.&lt;/p&gt;

&lt;p&gt;Add @EndpointInject to inject endpoints created in the camelcontext, as the xml above.&lt;/p&gt;

&lt;p&gt;Now, SpringRouteBuilder.configure is called before @EndpointInject is populated, so it is not possible to refer to the endpoints when you configure the route.&lt;/p&gt;

&lt;p&gt;Ok?&lt;/p&gt;

&lt;p&gt;/Magnus&lt;/p&gt;</comment>
                            <comment id="12947071" author="njiang" created="Tue, 13 May 2008 10:04:52 +0000"  >&lt;p&gt;Hi Magnus,&lt;/p&gt;

&lt;p&gt;You need add @Autowired before the  @EndpointInject(name = &quot;yourEndpoint&quot;) .&lt;br/&gt;
I just added a test to show that , please check out the MyRouteBuilder&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; for more information.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://svn.apache.org/repos/asf/activemq/camel/trunk/components/camel-spring/src/test/java/org/apache/camel/spring/config/scan/route/MyRouteBuilder.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/repos/asf/activemq/camel/trunk/components/camel-spring/src/test/java/org/apache/camel/spring/config/scan/route/MyRouteBuilder.java&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Willem&lt;/p&gt;</comment>
                            <comment id="12947111" author="jstrachan" created="Tue, 13 May 2008 10:11:23 +0000"  >&lt;p&gt;I wonder if we can avoid having to use @Autowired? Are you sure that @EndpointInject is even being used? (e.g. is it just @Autowired thats finding the Endpoint in the context?)&lt;/p&gt;

&lt;p&gt;Is there some way to mark the @EndpointInject annotation so Spring knows its an injection point or something?&lt;/p&gt;</comment>
                            <comment id="12947132" author="njiang" created="Tue, 13 May 2008 10:32:38 +0000"  >&lt;p&gt;Hi James,&lt;/p&gt;

&lt;p&gt;I just traced the code and found only the CamelBeanPostProcessor is in charge of the @EndpointInject. &lt;br/&gt;
But the builder is not the bean that is created by spring, so the CamelBeanPostProcessor can&apos;t work here.&lt;br/&gt;
How can I touch the CamelBeanPostProcessor with the builder ?&lt;/p&gt;

&lt;p&gt;Willem&lt;/p&gt;</comment>
                            <comment id="12947142" author="jstrachan" created="Tue, 13 May 2008 10:37:41 +0000"  >&lt;p&gt;So I guess the problem is if we use Camel&apos;s package scan, we&apos;re not using Spring to instantiate the RouteBuilder maybe? I wonder if we could use Spring to instantiate the RouteBuilder it&apos;d invoke the CamelBeanPostProcessor? I wonder how we get Spring to invoke the BeanPostProcessor if a bean doesn&apos;t exist in the spring.xml?&lt;/p&gt;

&lt;p&gt;I guess ultimately we should reuse Spring&apos;s @Component mechanism instead of the camel &apos;package&apos; mechanism maybe?&lt;/p&gt;</comment>
                            <comment id="12947078" author="njiang" created="Wed, 14 May 2008 06:27:39 +0000"  >&lt;p&gt;The patch was committed into the trunk in Revision  656103, please check it out &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>103015</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 years, 29 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i01brb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5674</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>