<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 11:06:25 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-20840] Cannot cast ResumeActionAwareAdapter to KinesisResumeAdapter</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-20840</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;When setting up the KinesisConsumer to use the KinesisResumeAdapter this error is thrown.&lt;/p&gt;

&lt;p&gt;java.lang.ClassCastException: Cannot cast org.apache.camel.support.resume.ResumeActionAwareAdapter to org.apache.camel.component.aws2.kinesis.consumer.KinesisResumeAdapter&lt;br/&gt;
&#160; &#160; at java.base/java.lang.Class.cast(Class.java:3889)&lt;br/&gt;
&#160; &#160; at org.apache.camel.resume.ResumeStrategy.getAdapter(ResumeStrategy.java:62)&lt;/p&gt;

&lt;p&gt;I have isolated this to the following problem.&lt;/p&gt;

&lt;p&gt;The KinesisConsumer DOES NOT override the default method in ResumeAware that specified the adapter name:&lt;br/&gt;
&#160;&lt;br/&gt;
default String adapterFactoryService() &lt;/p&gt;
{
return &quot;adapter-factory&quot;;
}
&lt;p&gt;&#160;&lt;br/&gt;
This leads to a classpath clash with the camel-support jar that is also use the name adapter-factory.&#160; In this case the factory service when called for Kinesis creates the wrong type of adapter as above.&lt;br/&gt;
&#160;&lt;br/&gt;
Other Resumable consumers have renamed their factory files for instance the file consumer uses file-adapter-factory.&lt;br/&gt;
&#160;&lt;br/&gt;
I have created a work around locally (that I dont like) by creating in my own classpath a duplicate of the adapter factory.&#160; This is loaded in preference to the jar resources but is not a perm fix.&lt;br/&gt;
&#160;&lt;br/&gt;
The fix required is to: * Change the Kinesis2Consumer to override the method above and return its own factory name such as kinesis-adapter-factory&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Change the build so that the adapter-factory file is replaced with kinesis-adapter-factory&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="13581673">CAMEL-20840</key>
            <summary>Cannot cast ResumeActionAwareAdapter to KinesisResumeAdapter</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="orpiske">Otavio Rodolfo Piske</assignee>
                                    <reporter username="markwimpory">Mark Wimpory</reporter>
                        <labels>
                    </labels>
                <created>Wed, 5 Jun 2024 15:16:37 +0000</created>
                <updated>Sun, 16 Jun 2024 06:47:36 +0000</updated>
                            <resolved>Sun, 16 Jun 2024 06:47:36 +0000</resolved>
                                    <version>4.6.0</version>
                                    <fixVersion>4.7.0</fixVersion>
                                    <component>camel-aws2-kinesis</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17855194" author="davsclaus" created="Sat, 15 Jun 2024 07:04:42 +0000"  >&lt;p&gt;I assume this is fixed now&lt;/p&gt;</comment>
                            <comment id="17855285" author="orpiske" created="Sun, 16 Jun 2024 06:47:36 +0000"  >&lt;p&gt;Yes. This was fixed with the linked PR.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13069410" name="camel-reproducer.zip" size="26977" author="markwimpory" created="Mon, 10 Jun 2024 12:15:16 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 21 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1pmsg:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>