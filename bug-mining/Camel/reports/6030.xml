<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:51:58 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-17506] olingo4 should always look for a single entity when a predicate key is used</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-17506</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;In org.apache.camel.component.olingo4.api.impl.Olingo4AppImpl , the following snippet of code is used to decide wether we receive an entity or an entitySet on a read query with a keyPredicate:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
List&amp;lt;UriParameter&amp;gt; keyPredicates = uriResourceEntitySet.getKeyPredicates();
&lt;span class=&quot;code-comment&quot;&gt;// Check result type: single Entity or EntitySet based
&lt;/span&gt;&lt;span class=&quot;code-comment&quot;&gt;// on key predicate detection
&lt;/span&gt;&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (keyPredicates.size() == 1) {
  response = (T) odataReader.readEntity(content, getResourceContentType(uriInfo));
} &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
  response = (T) odataReader.readEntitySet(content, getResourceContentType(uriInfo));
} &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;It assumes that if we have multiple parts in the key predicate, then we expect several entities in the response. But as we can see in &lt;a href=&quot;https://docs.oasis-open.org/odata/odata/v4.01/odata-v4.01-part2-url-conventions.html#sec_KeyasSegmentConvention&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;OData Version 4.01. Part 2: URL Conventions (oasis-open.org)&lt;/a&gt; 4.3.6 example 26, a key predicate with several parts is just that, a multi-part key predicate still adressing a single entity.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13423079">CAMEL-17506</key>
            <summary>olingo4 should always look for a single entity when a predicate key is used</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="damienb">Damien B</reporter>
                        <labels>
                    </labels>
                <created>Mon, 17 Jan 2022 14:51:51 +0000</created>
                <updated>Tue, 18 Jan 2022 18:20:22 +0000</updated>
                            <resolved>Tue, 18 Jan 2022 18:20:15 +0000</resolved>
                                    <version>2.25.2</version>
                    <version>3.14.0</version>
                                    <fixVersion>3.14.1</fixVersion>
                    <fixVersion>3.15.0</fixVersion>
                                    <component>camel-olingo4</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17477310" author="davsclaus" created="Mon, 17 Jan 2022 16:24:03 +0000"  >&lt;p&gt;Tis code is from the creator of the component about the predicate.&lt;/p&gt;

&lt;p&gt;The switch case is a entitySet so its a bit weird if the result is not a set.&lt;/p&gt;
</comment>
                            <comment id="17477334" author="damienb" created="Mon, 17 Jan 2022 17:31:12 +0000"  >&lt;p&gt;In OData 4, when you query with a (primary) key predicate, you expect either a single entity or nothing. If some OData 4 servers reply with an entity set, then it&apos;s a misuse of the protocol.&lt;/p&gt;</comment>
                            <comment id="17477365" author="davsclaus" created="Mon, 17 Jan 2022 18:57:30 +0000"  >&lt;p&gt;Okay, are you able to fix this by sending a PR against the main or 3.14.x branch&lt;/p&gt;</comment>
                            <comment id="17477668" author="damienb" created="Tue, 18 Jan 2022 08:47:06 +0000"  >&lt;p&gt;I&apos;ll take the time yes.&lt;/p&gt;</comment>
                            <comment id="17478010" author="damienb" created="Tue, 18 Jan 2022 16:12:38 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/camel/pull/6781&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/6781&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17478107" author="davsclaus" created="Tue, 18 Jan 2022 18:20:22 +0000"  >&lt;p&gt;Thanks for the PR&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 43 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0ynmw:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>