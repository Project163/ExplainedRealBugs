<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 09:55:15 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-5877] Sporadic Source Conversion issues with CxfPayload</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-5877</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;There is one concrete issue to report and there is an additional point that I would like to bring up.&lt;/p&gt;

&lt;p&gt;First, the concrete issue is that CxfEndpoints&apos; findName does not currently handle SAXSource. Consequently, the it fails to find the element name when the payload source is of SAXSource.&lt;/p&gt;

&lt;p&gt;This issue can be observed sporadically, as there is a chance the Source could be SAXSource. Because of the nature of this problem explained below, this issue may be observed non-deterministically and consequently it is not often observed.&lt;/p&gt;

&lt;p&gt;What is happening is that, when a conversion to CxfPayload is triggered, CxfPayloadConverter&apos;s convertTo method arbitrarily picks a converter that can convert the input to Source. The code goes into BaseTypeConverterRegistry and searches for a matching converter in its type mappings&apos; entry set. As this set has no deterministic ordering and there are several matching converters, an arbitrary converter is picked up. THe chance of getting the SAXSource converter is small but not zero. Therefore, when this happens, CxfEndpoint&apos;s findName is not finding the element name as there is no handling for SAXSource. Interestingly, the DOMSource converter is the most frequently picked converter, followed by the StaxSource converter.&lt;/p&gt;

&lt;p&gt;So, SAXSource handling needs to be added in CXFEndpoint&apos;s findName method.&lt;/p&gt;

&lt;p&gt;The second point is about the preferred Source held in CxfPayload. I think for jdk 1.6 or above, StAXSource could be the preferred source. In that case, we can use the StAXSource converter instead of arbitrarily picking one of the Source converters. We can adjust CxfPayloadConverter&apos;s convertTo method to look up for the StAXSource converter first.&lt;/p&gt;

&lt;p&gt;I am attaching a proposed patch (the correction for the first issue and the suggestion regarding the second point, assuming StAXSource is preferred.). Could you review it and comment on it?&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;

&lt;p&gt;Regards, aki&lt;/p&gt;

</description>
                <environment></environment>
        <key id="12623943">CAMEL-5877</key>
            <summary>Sporadic Source Conversion issues with CxfPayload</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dkulp">Daniel Kulp</assignee>
                                    <reporter username="ay">Akitoshi Yoshida</reporter>
                        <labels>
                    </labels>
                <created>Fri, 14 Dec 2012 12:01:08 +0000</created>
                <updated>Wed, 19 Dec 2012 19:52:46 +0000</updated>
                            <resolved>Tue, 18 Dec 2012 21:15:54 +0000</resolved>
                                    <version>2.10.3</version>
                                    <fixVersion>2.10.4</fixVersion>
                                    <component>camel-cxf</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13532256" author="ay" created="Fri, 14 Dec 2012 12:02:53 +0000"  >&lt;p&gt;from trunk&lt;/p&gt;</comment>
                            <comment id="13535333" author="dkulp" created="Tue, 18 Dec 2012 21:15:54 +0000"  >&lt;p&gt;&lt;br/&gt;
I&apos;ve done some heavy modifications to the patch and committed a fix.  For the most part, if the incoming object/message is in a form that we can directly create a Source for it, I did that to avoid any of the &quot;magic&quot;.   For some things (like xalan or Saxon) that may prefer a StreamSource, the may allow it to remain as a StreamSource.  If it&apos;s already a DOM, it can use a DOMSource as well.  Can you give that a look and see if that works better for your use case?&lt;/p&gt;</comment>
                            <comment id="13536356" author="ay" created="Wed, 19 Dec 2012 19:52:46 +0000"  >&lt;p&gt;Hi Dan,&lt;br/&gt;
it looks very good.&lt;br/&gt;
thanks.&lt;br/&gt;
regards, aki&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12560958" name="camel-cxf-payload-source-20121214.patch" size="3804" author="ay" created="Fri, 14 Dec 2012 12:02:53 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>297842</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 48 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i14vkf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>236579</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>