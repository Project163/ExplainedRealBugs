<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:31:25 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-12831] Camel-zipkin: useFallbackServiceNames leaks passwords</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-12831</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;If you do not define service names and useFallbackServiceNames is true (the default setting) camel uses endpoints URIs as services names.&lt;/p&gt;

&lt;p&gt;Passwords in these URIs are not masked and therefore visible in Zipkin traces.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13187095">CAMEL-12831</key>
            <summary>Camel-zipkin: useFallbackServiceNames leaks passwords</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="pascalschumacher">Pascal Schumacher</assignee>
                                    <reporter username="pascalschumacher">Pascal Schumacher</reporter>
                        <labels>
                    </labels>
                <created>Mon, 24 Sep 2018 17:53:35 +0000</created>
                <updated>Mon, 24 Sep 2018 19:07:29 +0000</updated>
                            <resolved>Mon, 24 Sep 2018 19:07:29 +0000</resolved>
                                    <version>2.22.1</version>
                                    <fixVersion>2.22.2</fixVersion>
                    <fixVersion>2.23.0</fixVersion>
                                    <component>camel-zipkin</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16626177" author="githubbot" created="Mon, 24 Sep 2018 17:55:54 +0000"  >&lt;p&gt;PascalSchumacher opened a new pull request #2531: &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12831&quot; title=&quot;Camel-zipkin: useFallbackServiceNames leaks passwords&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12831&quot;&gt;&lt;del&gt;CAMEL-12831&lt;/del&gt;&lt;/a&gt;: Camel-zipkin: useFallbackServiceNames leaks passwords&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/camel/pull/2531&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2531&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16626178" author="githubbot" created="Mon, 24 Sep 2018 17:55:55 +0000"  >&lt;p&gt;GitHub user PascalSchumacher opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/2531&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2531&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12831&quot; title=&quot;Camel-zipkin: useFallbackServiceNames leaks passwords&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12831&quot;&gt;&lt;del&gt;CAMEL-12831&lt;/del&gt;&lt;/a&gt;: Camel-zipkin: useFallbackServiceNames leaks passwords&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/PascalSchumacher/camel&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/PascalSchumacher/camel&lt;/a&gt; hide_passwords_in_zipkin_fallback_service_names&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/2531.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2531.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #2531&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 74a5e078f41cfff9b3a606ba63d1d07093a75e91&lt;br/&gt;
Author: Pascal Schumacher &amp;lt;pascalschumacher@...&amp;gt;&lt;br/&gt;
Date:   2018-09-24T17:55:00Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12831&quot; title=&quot;Camel-zipkin: useFallbackServiceNames leaks passwords&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12831&quot;&gt;&lt;del&gt;CAMEL-12831&lt;/del&gt;&lt;/a&gt;: Camel-zipkin: useFallbackServiceNames leaks passwords&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16626278" author="githubbot" created="Mon, 24 Sep 2018 19:04:10 +0000"  >&lt;p&gt;Github user PascalSchumacher closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/2531&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2531&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16626279" author="githubbot" created="Mon, 24 Sep 2018 19:04:11 +0000"  >&lt;p&gt;PascalSchumacher commented on issue #2531: &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12831&quot; title=&quot;Camel-zipkin: useFallbackServiceNames leaks passwords&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12831&quot;&gt;&lt;del&gt;CAMEL-12831&lt;/del&gt;&lt;/a&gt;: Camel-zipkin: useFallbackServiceNames leaks passwords&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/camel/pull/2531#issuecomment-424088562&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2531#issuecomment-424088562&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Merged in &lt;a href=&quot;https://github.com/apache/camel/commit/4b6773785e2031cf54485e4ad2c9634df3a10231&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/commit/4b6773785e2031cf54485e4ad2c9634df3a10231&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;   @davsclaus Thanks for the review!&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16626281" author="githubbot" created="Mon, 24 Sep 2018 19:04:11 +0000"  >&lt;p&gt;PascalSchumacher closed pull request #2531: &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12831&quot; title=&quot;Camel-zipkin: useFallbackServiceNames leaks passwords&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12831&quot;&gt;&lt;del&gt;CAMEL-12831&lt;/del&gt;&lt;/a&gt;: Camel-zipkin: useFallbackServiceNames leaks passwords&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/camel/pull/2531&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2531&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/components/camel-zipkin/src/main/java/org/apache/camel/zipkin/ZipkinTracer.java b/components/camel-zipkin/src/main/java/org/apache/camel/zipkin/ZipkinTracer.java&lt;br/&gt;
index f069c782e41..7314a5dfffa 100644&lt;br/&gt;
&amp;#8212; a/components/camel-zipkin/src/main/java/org/apache/camel/zipkin/ZipkinTracer.java&lt;br/&gt;
+++ b/components/camel-zipkin/src/main/java/org/apache/camel/zipkin/ZipkinTracer.java&lt;br/&gt;
@@ -61,6 +61,7 @@&lt;br/&gt;
 import org.apache.camel.util.IOHelper;&lt;br/&gt;
 import org.apache.camel.util.ObjectHelper;&lt;br/&gt;
 import org.apache.camel.util.ServiceHelper;&lt;br/&gt;
+import org.apache.camel.util.URISupport;&lt;br/&gt;
 import org.slf4j.Logger;&lt;br/&gt;
 import org.slf4j.LoggerFactory;&lt;br/&gt;
 import org.slf4j.MDC;&lt;br/&gt;
@@ -516,10 +517,11 @@ private String getServiceName(Exchange exchange, Endpoint endpoint, Map&amp;lt;String,&lt;br/&gt;
                     return null;&lt;br/&gt;
                 }&lt;br/&gt;
             }&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if (LOG.isTraceEnabled() &amp;amp;&amp;amp; key != null) {&lt;/li&gt;
	&lt;li&gt;LOG.trace(&quot;Using serviceName: {} as fallback&quot;, key);&lt;br/&gt;
+            String sanitizedKey = URISupport.sanitizeUri(key);&lt;br/&gt;
+            if (LOG.isTraceEnabled() &amp;amp;&amp;amp; sanitizedKey != null) {&lt;br/&gt;
+                LOG.trace(&quot;Using serviceName: {} as fallback&quot;, sanitizedKey);&lt;br/&gt;
             }&lt;/li&gt;
	&lt;li&gt;return key;&lt;br/&gt;
+            return sanitizedKey;&lt;br/&gt;
         } else {&lt;br/&gt;
             if (LOG.isTraceEnabled() &amp;amp;&amp;amp; answer != null) {&lt;br/&gt;
                 LOG.trace(&quot;Using serviceName: {}&quot;, answer);&lt;/li&gt;
&lt;/ul&gt;





&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 8 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3yflj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>