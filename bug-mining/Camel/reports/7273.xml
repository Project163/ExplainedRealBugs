<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 11:12:56 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-22415] camel-http Changes Content-type while Building StringEntity  </title>
                <link>https://issues.apache.org/jira/browse/CAMEL-22415</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;In &lt;a href=&quot;https://github.com/apache/camel/blob/0321fd79a129b20fc83895e2608aae9dd96e1a83/components/camel-http/src/main/java/org/apache/camel/component/http/HttpProducer.java#L780&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;HttpProducer.java&lt;/a&gt; Content-Type is getting modified it appends &quot;charset&quot;.&lt;/p&gt;

&lt;p&gt;It creates problem&#160; when some backend http servers doesn&apos;t accept &quot;charset&quot; in Content-Type and return 500 error.&#160;&lt;/p&gt;

&lt;p&gt;If request payload needs to be encoded with specific charset then it must be passed&#160; by caller only in a Content-Type Header and should not be modified in &lt;a href=&quot;https://github.com/apache/camel/blob/0321fd79a129b20fc83895e2608aae9dd96e1a83/components/camel-http/src/main/java/org/apache/camel/component/http/HttpProducer.java#L780&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;HttpProducer&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;As there is no other way to get it working for above mentioned case where backend http servers doesn&apos;t accept &quot;charset&quot;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13628868">CAMEL-22415</key>
            <summary>camel-http Changes Content-type while Building StringEntity  </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="aniketjadhav840">Aniket Jadhav</reporter>
                        <labels>
                    </labels>
                <created>Mon, 15 Sep 2025 05:53:06 +0000</created>
                <updated>Thu, 16 Oct 2025 07:37:46 +0000</updated>
                            <resolved>Wed, 15 Oct 2025 12:48:32 +0000</resolved>
                                    <version>4.10.5</version>
                                    <fixVersion>4.16.0</fixVersion>
                                    <component>camel-http</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="18020274" author="squakez" created="Mon, 15 Sep 2025 08:31:17 +0000"  >&lt;p&gt;For the records, the code you highlight refers to &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-19768&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/CAMEL-19768&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="18020276" author="squakez" created="Mon, 15 Sep 2025 08:38:54 +0000"  >&lt;p&gt;According to the http spec, the presence of optional parameters is allowed. Any parser should tolerate and ignore those parameters that it cannot process for any reason. Before going deeper, could you please provide more context to &quot;It creates problem  when some backend http servers doesn&apos;t accept &quot;charset&quot; in Content-Type and return 500 error. &quot;: what kind of server is failing? is it a custom http server of your own or a regular solution?&lt;/p&gt;</comment>
                            <comment id="18020279" author="squakez" created="Mon, 15 Sep 2025 08:49:11 +0000"  >&lt;p&gt;Another experiment you can try is to forcibly set CamelCharsetName on the exchange to null, as this should skip the setting of the charset.&lt;/p&gt;</comment>
                            <comment id="18020286" author="JIRAUSER293402" created="Mon, 15 Sep 2025 09:25:21 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=squakez&quot; class=&quot;user-hover&quot; rel=&quot;squakez&quot;&gt;squakez&lt;/a&gt; Yeah I thought to set CamelCharsetName&#160; to null. But is it safe?&lt;/p&gt;

&lt;p&gt;Also I will check on server type.&lt;/p&gt;</comment>
                            <comment id="18020289" author="squakez" created="Mon, 15 Sep 2025 09:35:24 +0000"  >&lt;p&gt;I think it is, at least in your case. As you&apos;ve mentioned this is a value not used by your backend server, then, it really is not important if it has or not any specific value. It is worth some test of course.&lt;/p&gt;</comment>
                            <comment id="18020292" author="JIRAUSER293402" created="Mon, 15 Sep 2025 09:44:51 +0000"  >&lt;p&gt;Ok, great.&lt;/p&gt;

&lt;p&gt;and I think server has custom validation on &quot;Content-type&quot; header as we are getting below error with http status 500&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Invalid header value contains a newline not followed by whitespace: 415 Context-type should be application/json. &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="18020316" author="JIRAUSER293402" created="Mon, 15 Sep 2025 11:32:58 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=squakez&quot; class=&quot;user-hover&quot; rel=&quot;squakez&quot;&gt;squakez&lt;/a&gt; one more thing: for charset first preference is given to &lt;a href=&quot;https://github.com/apache/camel/blob/0321fd79a129b20fc83895e2608aae9dd96e1a83/components/camel-http/src/main/java/org/apache/camel/component/http/HttpProducer.java#L769&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Exchange&lt;/a&gt;. shouldn&apos;t it be to &quot;Content-Type&quot; ?&lt;/p&gt;

&lt;p&gt;and setting CamelCharsetName&#160; to null requires&#160; extra overhead as it will cause issues in further processing of exchange, so need extra handling to preserve it in some other exchange property and resetting it after http call.&lt;/p&gt;</comment>
                            <comment id="18020341" author="squakez" created="Mon, 15 Sep 2025 12:24:31 +0000"  >&lt;p&gt;CamelCharsetName will be retrieved in that method call. For now the goal is to identify if the workaround would solve the problem. We can reason around performances once that is proven to work or not.&lt;/p&gt;</comment>
                            <comment id="18030071" author="davsclaus" created="Wed, 15 Oct 2025 12:11:41 +0000"  >&lt;p&gt;There will be a new option you can use to turn this off via:&#160;&lt;br/&gt;
contentTypeCharsetEnabled=false&lt;/p&gt;</comment>
                            <comment id="18030258" author="JIRAUSER293402" created="Thu, 16 Oct 2025 07:37:46 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davsclaus&quot; class=&quot;user-hover&quot; rel=&quot;davsclaus&quot;&gt;davsclaus&lt;/a&gt;&#160;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13548064">CAMEL-19768</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1xooo:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>