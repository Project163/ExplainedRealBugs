<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 11:10:05 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-21833] Kafka Batch Manual commit doesn&apos;t work if used in Kamelets</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-21833</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;if you try this example: &lt;a href=&quot;https://github.com/apache/camel-kamelets-examples/tree/main/jbang/kafka-batch-s3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel-kamelets-examples/tree/main/jbang/kafka-batch-s3&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;you&apos;ll notice the manual commit never happens. If you try to log the content of the header in the batch-manual-commit-action using&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/camel/blob/main/components/camel-kamelet/src/main/java/o[&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/blob/main/components/camel-kamelet/src/main/java/o[&lt;/a&gt;&#8230;]/component/kamelet/utils/transform/kafka/BatchManualCommit.java&lt;/p&gt;

&lt;p&gt;it seems on line 34 &lt;br/&gt;
the processor is not able to access the KafkaManualCommit instance&lt;br/&gt;
If you run the integration test in the kafka component, everything seems to work, but with Kamelets it&apos;s not&lt;/p&gt;</description>
                <environment></environment>
        <key id="13610720">CAMEL-21833</key>
            <summary>Kafka Batch Manual commit doesn&apos;t work if used in Kamelets</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="acosentino">Andrea Cosentino</reporter>
                        <labels>
                    </labels>
                <created>Wed, 5 Mar 2025 11:46:17 +0000</created>
                <updated>Thu, 6 Mar 2025 16:51:06 +0000</updated>
                            <resolved>Thu, 6 Mar 2025 12:14:25 +0000</resolved>
                                                    <fixVersion>4.11.0</fixVersion>
                                    <component>camel-kafka</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17932890" author="ancosen" created="Thu, 6 Mar 2025 08:30:24 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=orpiske&quot; class=&quot;user-hover&quot; rel=&quot;orpiske&quot;&gt;orpiske&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17932913" author="orpiske" created="Thu, 6 Mar 2025 09:23:17 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=acosentino&quot; class=&quot;user-hover&quot; rel=&quot;acosentino&quot;&gt;acosentino&lt;/a&gt; that sounds very strange. I want to take a closer look at it. &lt;/p&gt;</comment>
                            <comment id="17932914" author="orpiske" created="Thu, 6 Mar 2025 09:24:00 +0000"  >&lt;p&gt;Ah, I&apos;ve just seen &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davsclaus&quot; class=&quot;user-hover&quot; rel=&quot;davsclaus&quot;&gt;davsclaus&lt;/a&gt; is looking at it, so just let me know if I can help somehow. &lt;/p&gt;</comment>
                            <comment id="17932935" author="davsclaus" created="Thu, 6 Mar 2025 10:36:01 +0000"  >&lt;p&gt;Okay so its some weird classloding issue, if you use reflection on the manual commit instance then it works. Also we should store the commit header on the outer exchange as then it wont be lost in case end user do various message transformations in the routes&lt;/p&gt;</comment>
                            <comment id="17932939" author="davsclaus" created="Thu, 6 Mar 2025 10:58:47 +0000"  >&lt;p&gt;Okay so we should move the kamelet util code away from camel-kamelet and into their correct components such as camel-kafka / camel-jackson and so on. And avoid this provided classpath scope stuff that is causing pain.&lt;/p&gt;</comment>
                            <comment id="17932944" author="davsclaus" created="Thu, 6 Mar 2025 11:04:31 +0000"  >&lt;p&gt;The kamelets should then be changed to use classes from camel-kafka&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;org.apache.camel.component.kafka.BatchManualCommit&lt;/p&gt;

&lt;p&gt;org.apache.camel.component.kafka.ManualCommit&lt;/p&gt;</comment>
                            <comment id="17932950" author="ancosen" created="Thu, 6 Mar 2025 11:11:27 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/camel-kamelets/issues/2409&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel-kamelets/issues/2409&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13610878">CAMEL-21843</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            35 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1ul2g:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>