<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 09:39:07 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-2716] Incomplete cleanup of jmx mbeans after context stop</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-2716</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;There is a fair amount of cleanup on context stop, but it is incomplete. Most of it has to do with JMX and if one creates and starts a new CamelContext she may end up with managed objects pointing nowhere or have duplicates or other minor side-effects. One of the nasty side effects is that we are pretty much forced to use &quot;&amp;lt;forkMode&amp;gt;pertest&amp;lt;/forkMode&amp;gt;&quot; in our surefire plugin configuration, ensuring a clean slate for every test.&lt;/p&gt;

&lt;p&gt;For long running apps in which you may have multiple CamelContext running at various times during the lifetime of the application we must properly cleanup when stopping the context. I have a series of patches fixing that which I hope to finish before 2.3. Once we&apos;re comfortable and tested with multiple jdk implementations and versions, I&apos;d change the forkMode to &quot;once&quot;. In my local copy this reduces the test time in core from 40+ mins to under 15 mins. Since interactions between tests is still possible and might lead us on a wild-goose we could add another profile that uses the safer yet time consuming &quot;pertest&quot; forkMode.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12486121">CAMEL-2716</key>
            <summary>Incomplete cleanup of jmx mbeans after context stop</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hadrian">Hadrian Zbarcea</assignee>
                                    <reporter username="hadrian">Hadrian Zbarcea</reporter>
                        <labels>
                    </labels>
                <created>Wed, 12 May 2010 19:14:26 +0000</created>
                <updated>Sun, 24 Apr 2011 09:58:09 +0000</updated>
                            <resolved>Thu, 8 Jul 2010 15:22:46 +0000</resolved>
                                    <version>2.2.0</version>
                                    <fixVersion>2.4.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12956023" author="hadrian" created="Wed, 12 May 2010 19:35:20 +0000"  >&lt;p&gt;r943644 - first cut. &lt;/p&gt;

&lt;p&gt;Also added a way to reset the counters to have predictable ObjectNames during tests. DefaultNodeIdFactory.resetAllCounters() could lead to name conflicts if used without care, reason why I made it protected, so it cannot be invoked directly.&lt;/p&gt;</comment>
                            <comment id="12956461" author="davsclaus" created="Fri, 28 May 2010 08:06:54 +0000"  >&lt;p&gt;Hadrian I se no more bug in there, in the cleanup. I think your commit fixed that.&lt;/p&gt;

&lt;p&gt;So I think we should resolve this ticket. And if you need a ticket for &lt;em&gt;speeding up unit tests&lt;/em&gt; then just create a new ticket.&lt;/p&gt;
</comment>
                            <comment id="12956468" author="hadrian" created="Fri, 28 May 2010 19:25:36 +0000"  >&lt;p&gt;@Claus, there is one more issue I am working on. This should stay open. My previous commit was done in time for 2.3.0, where things are already better, but still not fully fixed.&lt;/p&gt;</comment>
                            <comment id="12952967" author="hadrian" created="Thu, 8 Jul 2010 06:34:15 +0000"  >&lt;p&gt;With the last commit at r961588 camel-core is done. I changed the forkMode to &quot;once&quot; in the surefire plugin which saves me about 45 mins of testing just in camel-core.&lt;/p&gt;</comment>
                            <comment id="13024078" author="davsclaus" created="Sun, 24 Apr 2011 09:58:09 +0000"  >&lt;p&gt;Closing all resolved tickets from 2010 or older&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>76454</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 31 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i01qaf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>8028</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>