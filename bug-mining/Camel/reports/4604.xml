<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:30:45 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-12740] Olingo4Component creates and ignores HttpAsyncClientBuilder</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-12740</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;The Olingo4Component will create an instance of HttpAsyncClientBuilder is the provided Olingo4Configuration does not contain one. The new instance of HttpAsyncClientBuilder will be configured with timeout settings, proxy and SSL, but will never be used.&lt;/p&gt;

&lt;p&gt;Extract from Olingo4Component.createOlingo4App:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; clientBuilder = configuration.getHttpAsyncClientBuilder();
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (clientBuilder == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
    HttpAsyncClientBuilder asyncClientBuilder = HttpAsyncClientBuilder.create();
    Builder requestConfigBuilder = RequestConfig.custom();
    requestConfigBuilder.setConnectTimeout(configuration.getConnectTimeout());
    requestConfigBuilder.setSocketTimeout(configuration.getSocketTimeout());
    HttpHost proxy = configuration.getProxy();
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (proxy != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
        requestConfigBuilder.setProxy(proxy);
    }

    asyncClientBuilder.setDefaultRequestConfig(requestConfigBuilder.build());
    SSLContextParameters sslContextParameters = configuration.getSslContextParameters();
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (sslContextParameters == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
        sslContextParameters = &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.retrieveGlobalSslContextParameters();
    }

    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (sslContextParameters == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
        sslContextParameters = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SSLContextParameters();
    }

    &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
        asyncClientBuilder.setSSLContext(sslContextParameters.createSSLContext(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.getCamelContext()));
    } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (GeneralSecurityException var8) {
        &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; ObjectHelper.wrapRuntimeCamelException(var8);
    } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (IOException var9) {
        &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; ObjectHelper.wrapRuntimeCamelException(var9);
    }
}

Olingo4AppImpl olingo4App;
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (clientBuilder != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; !(clientBuilder &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; HttpAsyncClientBuilder)) {
    olingo4App = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Olingo4AppImpl(configuration.getServiceUri(), (HttpClientBuilder)clientBuilder);
} &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
    olingo4App = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Olingo4AppImpl(configuration.getServiceUri(), (HttpAsyncClientBuilder)clientBuilder);
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The class Olingo4AppImpl gets a null clientBuilder reference and then instantiates its own:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Olingo4AppImpl(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; serviceUri, HttpAsyncClientBuilder builder) {
    &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.odataClient = ODataClientFactory.getClient();
    &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.odataReader = &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.odataClient.getReader();
    &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.odataWriter = &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.odataClient.getWriter();
    &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.setServiceUri(serviceUri);
    CloseableHttpAsyncClient asyncClient;
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (builder == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
        asyncClient = HttpAsyncClients.createDefault();
    } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
        asyncClient = builder.build();
    }

    asyncClient.start();
    &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.client = asyncClient;
    &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.contentType = DEFAULT_CONTENT_TYPE;
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Because of this, none of the Olingo4Configuration settings are used and for example connect and socket timeout defaults to -1.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13179585">CAMEL-12740</key>
            <summary>Olingo4Component creates and ignores HttpAsyncClientBuilder</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="ninckblokje">Jeroen NB</reporter>
                        <labels>
                    </labels>
                <created>Fri, 17 Aug 2018 13:27:34 +0000</created>
                <updated>Mon, 20 Aug 2018 18:48:36 +0000</updated>
                            <resolved>Mon, 20 Aug 2018 17:27:11 +0000</resolved>
                                    <version>2.22.0</version>
                                    <fixVersion>2.21.3</fixVersion>
                    <fixVersion>2.22.1</fixVersion>
                    <fixVersion>2.23.0</fixVersion>
                                    <component>camel-olingo2</component>
                    <component>camel-olingo4</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16583938" author="ninckblokje" created="Fri, 17 Aug 2018 13:27:57 +0000"  >&lt;p&gt;I am working on a pull request for this issue.&lt;/p&gt;</comment>
                            <comment id="16583954" author="dmvolod" created="Fri, 17 Aug 2018 13:40:59 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ninckblokje&quot; class=&quot;user-hover&quot; rel=&quot;ninckblokje&quot;&gt;ninckblokje&lt;/a&gt;, the camel-olingo2 component need to be fixed too.&lt;/p&gt;</comment>
                            <comment id="16586028" author="githubbot" created="Mon, 20 Aug 2018 14:45:03 +0000"  >&lt;p&gt;ninckblokje opened a new pull request #2487: &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12740&quot; title=&quot;Olingo4Component creates and ignores HttpAsyncClientBuilder&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12740&quot;&gt;&lt;del&gt;CAMEL-12740&lt;/del&gt;&lt;/a&gt;: HttpAsyncClientBuilder is now used when no ClientBuilder&#8230;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/camel/pull/2487&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2487&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   I have changed the Olingo2 and Olingo4 components do use the created HttpAsyncClientBuilder when no builder is specified. In the previous scenario the created HttpAsyncClientBuilder was ignored.&lt;/p&gt;

&lt;p&gt;   See &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12740&quot; title=&quot;Olingo4Component creates and ignores HttpAsyncClientBuilder&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12740&quot;&gt;&lt;del&gt;CAMEL-12740&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16586029" author="githubbot" created="Mon, 20 Aug 2018 14:45:04 +0000"  >&lt;p&gt;GitHub user ninckblokje opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/2487&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2487&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12740&quot; title=&quot;Olingo4Component creates and ignores HttpAsyncClientBuilder&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12740&quot;&gt;&lt;del&gt;CAMEL-12740&lt;/del&gt;&lt;/a&gt;: HttpAsyncClientBuilder is now used when no ClientBuilder&#8230;&lt;/p&gt;

&lt;p&gt;    I have changed the Olingo2 and Olingo4 components do use the created HttpAsyncClientBuilder when no builder is specified. In the previous scenario the created HttpAsyncClientBuilder was ignored.&lt;/p&gt;

&lt;p&gt;    See &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12740&quot; title=&quot;Olingo4Component creates and ignores HttpAsyncClientBuilder&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12740&quot;&gt;&lt;del&gt;CAMEL-12740&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/ninckblokje/camel&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/ninckblokje/camel&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12740&quot; title=&quot;Olingo4Component creates and ignores HttpAsyncClientBuilder&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12740&quot;&gt;&lt;del&gt;CAMEL-12740&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/2487.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2487.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #2487&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 602ba1c50a997b9bad7375a673b36a4fab8dbb4e&lt;br/&gt;
Author: ninckblokje &amp;lt;jeroen.ninckblok@...&amp;gt;&lt;br/&gt;
Date:   2018-08-19T16:09:21Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12740&quot; title=&quot;Olingo4Component creates and ignores HttpAsyncClientBuilder&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12740&quot;&gt;&lt;del&gt;CAMEL-12740&lt;/del&gt;&lt;/a&gt;: HttpAsyncClientBuilder is now used when no ClientBuilder is specified&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16586256" author="githubbot" created="Mon, 20 Aug 2018 17:23:23 +0000"  >&lt;p&gt;davsclaus closed pull request #2487: &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12740&quot; title=&quot;Olingo4Component creates and ignores HttpAsyncClientBuilder&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12740&quot;&gt;&lt;del&gt;CAMEL-12740&lt;/del&gt;&lt;/a&gt;: HttpAsyncClientBuilder is now used when no ClientBuilder&#8230;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/camel/pull/2487&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2487&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/components/camel-olingo2/camel-olingo2-component/src/main/java/org/apache/camel/component/olingo2/Olingo2Component.java b/components/camel-olingo2/camel-olingo2-component/src/main/java/org/apache/camel/component/olingo2/Olingo2Component.java&lt;br/&gt;
index 4e7973df754..77b9864b078 100644&lt;br/&gt;
&amp;#8212; a/components/camel-olingo2/camel-olingo2-component/src/main/java/org/apache/camel/component/olingo2/Olingo2Component.java&lt;br/&gt;
+++ b/components/camel-olingo2/camel-olingo2-component/src/main/java/org/apache/camel/component/olingo2/Olingo2Component.java&lt;br/&gt;
@@ -176,6 +176,8 @@ private Olingo2AppWrapper createOlingo2App(Olingo2Configuration configuration) {&lt;br/&gt;
             } catch (IOException e) &lt;/p&gt;
{
                 throw ObjectHelper.wrapRuntimeCamelException(e);
             }&lt;br/&gt;
+&lt;br/&gt;
+            clientBuilder = asyncClientBuilder;&lt;br/&gt;
         }&lt;br/&gt;
 &lt;br/&gt;
         Olingo2AppImpl olingo2App;&lt;br/&gt;
diff --git a/components/camel-olingo4/camel-olingo4-component/src/main/java/org/apache/camel/component/olingo4/Olingo4Component.java b/components/camel-olingo4/camel-olingo4-component/src/main/java/org/apache/camel/component/olingo4/Olingo4Component.java&lt;br/&gt;
index 0f17d73ed71..b6a7b442408 100644&lt;br/&gt;
&amp;#8212; a/components/camel-olingo4/camel-olingo4-component/src/main/java/org/apache/camel/component/olingo4/Olingo4Component.java&lt;br/&gt;
+++ b/components/camel-olingo4/camel-olingo4-component/src/main/java/org/apache/camel/component/olingo4/Olingo4Component.java&lt;br/&gt;
@@ -162,6 +162,8 @@ private Olingo4AppWrapper createOlingo4App(Olingo4Configuration configuration) {&lt;br/&gt;
             } catch (IOException e) {                 throw ObjectHelper.wrapRuntimeCamelException(e);             }
&lt;p&gt;+&lt;br/&gt;
+            clientBuilder = asyncClientBuilder;&lt;br/&gt;
         }&lt;/p&gt;

&lt;p&gt;         Olingo4AppImpl olingo4App;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16586257" author="githubbot" created="Mon, 20 Aug 2018 17:23:24 +0000"  >&lt;p&gt;Github user davsclaus closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/2487&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2487&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16586263" author="davsclaus" created="Mon, 20 Aug 2018 17:27:11 +0000"  >&lt;p&gt;Thanks for reporting and the PR&lt;/p&gt;</comment>
                            <comment id="16586370" author="ninckblokje" created="Mon, 20 Aug 2018 18:48:36 +0000"  >&lt;p&gt;Thank you for accepting the PR &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 13 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3x5mf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>