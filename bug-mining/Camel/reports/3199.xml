<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:08:26 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-7849] Decrypting properties via Jasypt outside of &lt;camelContext&gt;</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-7849</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;File default.properties contains an entry like: key=ENC(..)

The following Camel Spring DSL snippet decrypts the 
property value inside &amp;lt;camelContext&amp;gt; via {{key}} but does 
not decrypt it outside of the &amp;lt;camelContext&amp;gt; via ${key}:

&amp;lt;bean id=&quot;jasypt&quot; class=&quot;org.apache.camel.component.jasypt.JasyptPropertiesParser&quot;&amp;gt;
    &amp;lt;property name=&quot;password&quot; value=&quot;sysenv:PROPERTIES_KEY&quot;/&amp;gt;
&amp;lt;/bean&amp;gt;

&amp;lt;bean id=&quot;bridgePropertyPlaceholder&quot; class=
  &quot;org.apache.camel.spring.spi.BridgePropertyPlaceholderConfigurer&quot;&amp;gt;
  &amp;lt;property name=&quot;locations&quot; &amp;gt;
  &amp;lt;list&amp;gt;
    &amp;lt;value&amp;gt;classpath:default.properties&amp;lt;/value&amp;gt;
  &amp;lt;/list&amp;gt;&amp;lt;/property&amp;gt;
  &amp;lt;property name=&apos;parser&apos; ref=&apos;jasypt&apos;/&amp;gt;
&amp;lt;/bean&amp;gt;

In order to get ${} to decrypt, first I remove all of the above. 
Then I add jasypt dependencies to pom.xml:

&amp;lt;dependency&amp;gt;
  &amp;lt;groupId&amp;gt;org.jasypt&amp;lt;/groupId&amp;gt;
  &amp;lt;artifactId&amp;gt;jasypt&amp;lt;/artifactId&amp;gt;
  &amp;lt;classifier&amp;gt;lite&amp;lt;/classifier&amp;gt;
  &amp;lt;version&amp;gt;1.9.2&amp;lt;/version&amp;gt;
&amp;lt;/dependency&amp;gt;

 &amp;lt;dependency&amp;gt;
  &amp;lt;groupId&amp;gt;org.jasypt&amp;lt;/groupId&amp;gt;
  &amp;lt;artifactId&amp;gt;jasypt-spring3&amp;lt;/artifactId&amp;gt;
  &amp;lt;version&amp;gt;1.9.2&amp;lt;/version&amp;gt;
 &amp;lt;/dependency&amp;gt; 

And add the following to Camel Spring DSL:

&amp;lt;bean id=&quot;environmentVariablesConfiguration&quot;
     class=&quot;org.jasypt.encryption.pbe.config.EnvironmentStringPBEConfig&quot;&amp;gt;
   &amp;lt;property name=&quot;algorithm&quot; value=&quot;PBEWithMD5AndDES&quot; /&amp;gt;
   &amp;lt;property name=&quot;passwordEnvName&quot; value=&quot;PROPERTIES_KEY&quot; /&amp;gt;
 &amp;lt;/bean&amp;gt;
 &amp;lt;bean id=&quot;configurationEncryptor&quot;
     class=&quot;org.jasypt.encryption.pbe.StandardPBEStringEncryptor&quot;&amp;gt;
   &amp;lt;property name=&quot;config&quot; ref=&quot;environmentVariablesConfiguration&quot; /&amp;gt;
&amp;lt;/bean&amp;gt;
&amp;lt;bean id=&quot;propertyConfigurer&quot; class=
  &apos;org.jasypt.spring3.properties.EncryptablePropertyPlaceholderConfigurer&apos;&amp;gt;
 &amp;lt;constructor-arg ref=&quot;configurationEncryptor&quot;/&amp;gt;
   &amp;lt;property name=&quot;locations&quot; &amp;gt;
  &amp;lt;list&amp;gt;
    &amp;lt;value&amp;gt;classpath:default.properties&amp;lt;/value&amp;gt;
  &amp;lt;/list&amp;gt;&amp;lt;/property&amp;gt;
&amp;lt;/bean&amp;gt;
&amp;lt;bean id=&quot;jasypt&quot; class=
  &quot;org.apache.camel.component.jasypt.JasyptPropertiesParser&quot;&amp;gt;
    &amp;lt;property name=&quot;password&quot; value=&quot;sysenv:PROPERTIES_KEY&quot;/&amp;gt;
&amp;lt;/bean&amp;gt;

&amp;lt;!-- And inside the camelContext... --&amp;gt;

&amp;lt;camelContext xmlns=&quot;http://camel.apache.org/schema/spring&quot;&amp;gt;

&amp;lt;propertyPlaceholder id=&quot;properties&quot;
 propertiesParserRef=&quot;jasypt&quot; 
 location=&quot;classpath:default.properties&quot;/&amp;gt; 

This is the only solution that I could discover. Using BridgePropertyPlaceholder 
didn&apos;t work. &amp;lt;propertyPlaceholder&amp;gt; must be used inside &amp;lt;camelContext&amp;gt;.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12743265">CAMEL-7849</key>
            <summary>Decrypting properties via Jasypt outside of &lt;camelContext&gt;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="njiang">Willem Jiang</assignee>
                                    <reporter username="camelguy">Camel Guy</reporter>
                        <labels>
                    </labels>
                <created>Mon, 22 Sep 2014 17:43:14 +0000</created>
                <updated>Sat, 11 Apr 2015 20:08:49 +0000</updated>
                            <resolved>Fri, 10 Apr 2015 02:14:42 +0000</resolved>
                                    <version>2.13.2</version>
                    <version>2.14.0</version>
                                    <fixVersion>2.14.3</fixVersion>
                    <fixVersion>2.15.2</fixVersion>
                    <fixVersion>2.16.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14144200" author="njiang" created="Tue, 23 Sep 2014 02:18:51 +0000"  >&lt;p&gt;As the Spring doesn&apos;t  provide the nice parser API for camel to use, we end up to implement our own property component to handle the same use case as we meet in spring. BridgePropertyPlaceholderConfigurer just work as the org.jasypt.spring3.properties.EncryptablePropertyPlaceholderConfigurer, they are just injected into Spring as a customer configure parser.  Because they don&apos;t know each other, it is not surprise me that they cannot work together.&lt;/p&gt;</comment>
                            <comment id="14144233" author="camelguy" created="Tue, 23 Sep 2014 02:48:11 +0000"  >&lt;p&gt;The Camel documentation for Jasypt reads like the examples work for both ${} and {}. It took me about 24 solid working hours to figure this out. This could just be a documentation problem. However, the downside is the additional CPU/memory overhead caused by loading the same .properties files twice. In my code, I load two properties files. Not a huge problem. The real problem is that this isn&apos;t as easy as it could be.&lt;/p&gt;

&lt;p&gt;My use case involves restlet realms. I want to encrypt user passwords. I also want to encrypt JDBC passwords. Therefore, I very much need ${} to work.&lt;/p&gt;</comment>
                            <comment id="14241371" author="wesssel" created="Wed, 10 Dec 2014 16:52:58 +0000"  >&lt;p&gt;Did you also run this Camel route inside an osgi container? I&apos;m trying to run it in JBoss Fuse 6.1.0 but am getting the following error:&lt;/p&gt;

&lt;p&gt;Error creating bean with name &apos;propertyConfigurer&apos; defined in URL &lt;span class=&quot;error&quot;&gt;&amp;#91;bundle://325.0:0/META-INF/spring/camel-context-dev.xml&amp;#93;&lt;/span&gt;: Unsatisfied dependency expressed through constructor argument with index 0 of type &lt;span class=&quot;error&quot;&gt;&amp;#91;org.jasypt.encryption.StringEncryptor&amp;#93;&lt;/span&gt;: Could not convert constructor argument value of type &lt;span class=&quot;error&quot;&gt;&amp;#91;org.jasypt.encryption.pbe.StandardPBEStringEncryptor&amp;#93;&lt;/span&gt; to required type &lt;span class=&quot;error&quot;&gt;&amp;#91;org.jasypt.encryption.StringEncryptor&amp;#93;&lt;/span&gt;: Failed to convert value of type &apos;org.jasypt.encryption.pbe.StandardPBEStringEncryptor&apos; to required type &apos;org.jasypt.encryption.StringEncryptor&apos;; nested exception is java.lang.IllegalStateException: Cannot convert value of type &lt;span class=&quot;error&quot;&gt;&amp;#91;org.jasypt.encryption.pbe.StandardPBEStringEncryptor&amp;#93;&lt;/span&gt; to required type &lt;span class=&quot;error&quot;&gt;&amp;#91;org.jasypt.encryption.StringEncryptor&amp;#93;&lt;/span&gt;: no matching editors or conversion strategy found&lt;br/&gt;
Related cause: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &apos;propertyConfigurer&apos; defined in URL &lt;span class=&quot;error&quot;&gt;&amp;#91;bundle://325.0:0/META-INF/spring/camel-context-dev.xml&amp;#93;&lt;/span&gt;: Unsatisfied dependency expressed through constructor argument with index 0 of type &lt;span class=&quot;error&quot;&gt;&amp;#91;org.jasypt.util.text.TextEncryptor&amp;#93;&lt;/span&gt;: Could not convert constructor argument value of type &lt;span class=&quot;error&quot;&gt;&amp;#91;org.jasypt.encryption.pbe.StandardPBEStringEncryptor&amp;#93;&lt;/span&gt; to required type &lt;span class=&quot;error&quot;&gt;&amp;#91;org.jasypt.util.text.TextEncryptor&amp;#93;&lt;/span&gt;: Failed to convert value of type &apos;org.jasypt.encryption.pbe.StandardPBEStringEncryptor&apos; to required type &apos;org.jasypt.util.text.TextEncryptor&apos;; nested exception is java.lang.IllegalStateException: Cannot convert value of type &lt;span class=&quot;error&quot;&gt;&amp;#91;org.jasypt.encryption.pbe.StandardPBEStringEncryptor&amp;#93;&lt;/span&gt; to required type &lt;span class=&quot;error&quot;&gt;&amp;#91;org.jasypt.util.text.TextEncryptor&amp;#93;&lt;/span&gt;: no matching editors or conversion strategy found&lt;/p&gt;


&lt;p&gt;If so, do you know how to fix this?&lt;/p&gt;

&lt;p&gt;Works fine when running mvn camel:run from the commandline. Using Camel version 2.12.0-redhat and jasypt-spring31 version 1.9.2&lt;/p&gt;</comment>
                            <comment id="14242051" author="camelguy" created="Thu, 11 Dec 2014 02:56:59 +0000"  >&lt;p&gt;Was not using OSGI container.&lt;/p&gt;</comment>
                            <comment id="14487347" author="njiang" created="Thu, 9 Apr 2015 13:33:17 +0000"  >&lt;p&gt;After writing a simple test case, I found I made a mistake that BridgePropertyPlaceholderConfigurer doesn&apos;t know anything about the palceholder outside of the camel context. It turns out the BridgePropertyPlaceholderConfigurer doesn&apos;t override the method of String resolvePlaceholder(String placeholder, Properties props) to apply the parser setting of the BridgePropertyPlaceholderConfigurer. &lt;/p&gt;

&lt;p&gt;I will commit a quick fix of it shortly.&lt;/p&gt;</comment>
                            <comment id="14487381" author="wesssel" created="Thu, 9 Apr 2015 13:59:19 +0000"  >&lt;p&gt;This is the same behavior I am seeing. Camel 2.12.0&lt;/p&gt;</comment>
                            <comment id="14487727" author="camelguy" created="Thu, 9 Apr 2015 17:38:31 +0000"  >&lt;p&gt;That&apos;s great news. How long until 2.15.2 is released?&lt;/p&gt;</comment>
                            <comment id="14488762" author="njiang" created="Fri, 10 Apr 2015 02:14:42 +0000"  >&lt;p&gt;Applied the patch into camel master, camel-2.15.x and camel-2.14.x branches.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 32 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i20ck7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>