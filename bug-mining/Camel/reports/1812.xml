<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 09:50:51 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-4900] Quartz component doesn&apos;t start with a persistent scheduler</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-4900</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;I have scheduler persistence on but clustering is not turned on. When starting my app the first time, it starts OK. After shutting down and staring a second time, an exception is thrown and the app doesn&apos;t start up. This did not occur in 2.8.3. The following exception occurs:&lt;/p&gt;

&lt;p&gt;Caused by: org.quartz.SchedulerException: Trigger&apos;s related Job&apos;s name cannot be null&lt;br/&gt;
	at org.quartz.Trigger.validate(Trigger.java:955) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;quartz-1.8.5.jar:na&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.quartz.core.QuartzScheduler.rescheduleJob(QuartzScheduler.java:982) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;quartz-1.8.5.jar:na&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.quartz.impl.StdScheduler.rescheduleJob(StdScheduler.java:302) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;quartz-1.8.5.jar:na&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.camel.component.quartz.QuartzComponent.doAddJob(QuartzComponent.java:233) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;camel-quartz-2.9.0.jar:2.9.0&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;In 2.9.0, the code was changed here and this is where it craashes:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!isClustered()) {
    trigger.setStartTime(Calendar.getInstance().getTime());
    scheduler.rescheduleJob(trigger.getName(), trigger.getGroup(), trigger);
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;My component definition looks like this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;lt;endpoint id=&lt;span class=&quot;code-quote&quot;&gt;&quot;myschedule&quot;&lt;/span&gt; uri=&lt;span class=&quot;code-quote&quot;&gt;&quot;quartz:&lt;span class=&quot;code-comment&quot;&gt;//fmc/mycron=${myschedule.cron}&amp;amp;amp;stateful=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Again, this affects 2.9.0 but not 2.8.3. I have not found a workaround yet.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Java 1.6.0_29 64-bit, Mac OS X 10.7 and CentOS 6&lt;/p&gt;</environment>
        <key id="12538454">CAMEL-4900</key>
            <summary>Quartz component doesn&apos;t start with a persistent scheduler</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="bryanck">Bryan Keller</reporter>
                        <labels>
                    </labels>
                <created>Sun, 15 Jan 2012 20:04:06 +0000</created>
                <updated>Fri, 16 Mar 2012 15:06:24 +0000</updated>
                            <resolved>Fri, 16 Mar 2012 10:22:05 +0000</resolved>
                                    <version>2.8.4</version>
                    <version>2.9.0</version>
                                    <fixVersion>2.8.5</fixVersion>
                    <fixVersion>2.9.2</fixVersion>
                    <fixVersion>2.10.0</fixVersion>
                                    <component>camel-quartz</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13186585" author="bvahdat" created="Sun, 15 Jan 2012 20:26:53 +0000"  >&lt;p&gt;I &lt;b&gt;assume&lt;/b&gt; this relates to the change done by &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-4794&quot; title=&quot;After restarting route a camel-quartz component fires right away (and it shouldn&amp;#39;t)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-4794&quot;&gt;&lt;del&gt;CAMEL-4794&lt;/del&gt;&lt;/a&gt; in QuartzComponent from:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!isClustered()) {
  scheduler.resumeTrigger(trigger.getName(), trigger.getGroup());
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;to:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!isClustered()) {
  trigger.setStartTime(Calendar.getInstance().getTime());
  scheduler.rescheduleJob(trigger.getName(), trigger.getGroup(), trigger);
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</comment>
                            <comment id="13186586" author="bvahdat" created="Sun, 15 Jan 2012 20:29:30 +0000"  >&lt;p&gt;@Bryan&lt;br/&gt;
Sorry, just realized that you have pasted the same code-snippet by the Description field.&lt;/p&gt;</comment>
                            <comment id="13187053" author="bryanck" created="Mon, 16 Jan 2012 18:06:41 +0000"  >&lt;p&gt;Yes, I suspect that change is what is causing this. The call to rescheduleJob() validates that the trigger&apos;s job name is not null. But the job name IS null. I tried adding a job.name=xxx property to the endpoint URL, but that did not fix the problem.&lt;/p&gt;</comment>
                            <comment id="13187528" author="bvahdat" created="Tue, 17 Jan 2012 08:26:04 +0000"  >&lt;p&gt;@Bryan would you have the possibility to provide a unit-test demonstrating the regression failure you mentioned or provide maybe a snippet of your routing logic so that we can reproduce this regression failure on the trunk. &lt;/p&gt;</comment>
                            <comment id="13187813" author="bryanck" created="Tue, 17 Jan 2012 17:19:24 +0000"  >&lt;p&gt;I can put together a test program. It will have to wait until this weekend though as it will require a little work (needs a database for persistence, etc.)&lt;/p&gt;</comment>
                            <comment id="13190676" author="bryanck" created="Sun, 22 Jan 2012 13:47:40 +0000"  >&lt;p&gt;Here is a simple app that demonstrates the problem. It uses gradle (v1.0m7). Unzip and run &quot;gradle runClean&quot;. This will run with a fresh database. Then run &quot;gradle run&quot; to run with the existing database. The exception will be thrown.&lt;/p&gt;</comment>
                            <comment id="13190727" author="hadrian" created="Sun, 22 Jan 2012 17:56:01 +0000"  >&lt;p&gt;Bryan, thanks for the test case. I am looking into it. Babak suggested that my changes may be the culprit.&lt;/p&gt;</comment>
                            <comment id="13190733" author="bvahdat" created="Sun, 22 Jan 2012 18:10:00 +0000"  >&lt;p&gt;Hadrian, &lt;/p&gt;

&lt;p&gt;Thanks alot for looking into it! As I now can silently leave my box and play a bit with my small kids, right now yelling at me &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13199266" author="bryanck" created="Thu, 2 Feb 2012 21:51:36 +0000"  >&lt;p&gt;This also affects the newly released 2.8.4 now.&lt;/p&gt;</comment>
                            <comment id="13218284" author="davsclaus" created="Tue, 28 Feb 2012 15:40:31 +0000"  >&lt;p&gt;So what is the status of this? &lt;/p&gt;</comment>
                            <comment id="13230963" author="davsclaus" created="Fri, 16 Mar 2012 08:05:26 +0000"  >&lt;p&gt;Bryan thanks for your sample application.&lt;br/&gt;
I am adding unit tests based upon your work.&lt;/p&gt;
</comment>
                            <comment id="13230975" author="davsclaus" created="Fri, 16 Mar 2012 08:41:01 +0000"  >&lt;p&gt;Bryan which container do you run your app?&lt;br/&gt;
And how do you restart your app?&lt;/p&gt;</comment>
                            <comment id="13230978" author="davsclaus" created="Fri, 16 Mar 2012 08:49:37 +0000"  >&lt;p&gt;I can only reproduce this, if the &quot;restart&quot; does not run cleanly. Then upon starting again, then the trigger still exists, and causes that exception reported by Bryan.&lt;/p&gt;</comment>
                            <comment id="13231026" author="davsclaus" created="Fri, 16 Mar 2012 10:22:57 +0000"  >&lt;p&gt;Another way of reproducing was just to stop/start the route itself.&lt;/p&gt;</comment>
                            <comment id="13231048" author="bvahdat" created="Fri, 16 Mar 2012 10:50:27 +0000"  >&lt;p&gt;Claus&lt;/p&gt;

&lt;p&gt;Thanks for digging into this issue and resolving it.&lt;/p&gt;

&lt;p&gt;Mange tak &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13231276" author="bryanck" created="Fri, 16 Mar 2012 15:06:24 +0000"  >&lt;p&gt;I tested the latest 2.8.x branch. This fixed the issue for me. Thanks!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12511429" name="quartztest.zip" size="6804" author="bryanck" created="Sun, 22 Jan 2012 13:47:39 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>223958</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 36 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i023rr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>10212</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>