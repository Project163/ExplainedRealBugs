<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 09:38:08 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-2614] Camel-cxf can&apos;t handle multi part message in PAYLOAD mode</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-2614</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;If I have a multi part (bare) message defined in WSDL (such as follow), camel-cxf component cannot parse the incoming message in PAYLOAD mode.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;	&amp;lt;wsdl:message name=&lt;span class=&quot;code-quote&quot;&gt;&quot;MultiPartStringIntRequest&quot;&lt;/span&gt;&amp;gt;
		&amp;lt;wsdl:part name=&lt;span class=&quot;code-quote&quot;&gt;&quot;StringDefaultInput&quot;&lt;/span&gt; element=&lt;span class=&quot;code-quote&quot;&gt;&quot;MultiPartStringInt:StringDefaultInputElem&quot;&lt;/span&gt; /&amp;gt;
		&amp;lt;wsdl:part name=&lt;span class=&quot;code-quote&quot;&gt;&quot;IntParamIn&quot;&lt;/span&gt; element=&lt;span class=&quot;code-quote&quot;&gt;&quot;MultiPartStringInt:IntParamInElem&quot;&lt;/span&gt; /&amp;gt;
	&amp;lt;/wsdl:message&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I get a stack trace similar to this.&lt;/p&gt;

&lt;p&gt;Mar 12, 2010 7:15:48 PM org.apache.camel.component.cxf.interceptors.AbstractMessageInInterceptor createDOMMessage&lt;br/&gt;
INFO: AbstractMessageInInterceptor Converting Stax Stream to DOM&lt;br/&gt;
Mar 12, 2010 7:15:48 PM org.apache.camel.component.cxf.interceptors.AbstractMessageInInterceptor handleMessage&lt;br/&gt;
INFO: AbstractRoutingMessageInInterceptor Infer BindingOperationInfo.&lt;br/&gt;
Mar 12, 2010 7:15:48 PM org.apache.cxf.phase.PhaseInterceptorChain doIntercept&lt;br/&gt;
WARNING: Interceptor has thrown exception, unwinding now&lt;br/&gt;
org.apache.cxf.interceptor.Fault: Could not read request. Operation &lt;/p&gt;
{urn:MultiPart/resources/wsdl/MultiPartStringInt/MultiPartStringInt/types}
&lt;p&gt;StringDefaultInputElem is unknown.&lt;br/&gt;
                at org.apache.camel.component.cxf.interceptors.AbstractMessageInInterceptor.handleMessage(AbstractMessageInInterceptor.java:103)&lt;br/&gt;
                at org.apache.camel.component.cxf.interceptors.DOMInInterceptor.handleMessage(DOMInInterceptor.java:43)&lt;br/&gt;
                at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:236)&lt;br/&gt;
                at org.apache.cxf.transport.ChainInitiationObserver.onMessage(ChainInitiationObserver.java:109)&lt;br/&gt;
                at org.apache.cxf.transport.http_jetty.JettyHTTPDestination.serviceRequest(JettyHTTPDestination.java:312)&lt;br/&gt;
                at org.apache.cxf.transport.http_jetty.JettyHTTPDestination.doService(JettyHTTPDestination.java:276)&lt;br/&gt;
                at org.apache.cxf.transport.http_jetty.JettyHTTPHandler.handle(JettyHTTPHandler.java:70)&lt;br/&gt;
                at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)&lt;br/&gt;
                at org.mortbay.jetty.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:230)&lt;br/&gt;
                at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)&lt;br/&gt;
                at org.mortbay.jetty.Server.handle(Server.java:326)&lt;br/&gt;
                at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:536)&lt;br/&gt;
                at org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:930)&lt;br/&gt;
                at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:747)&lt;br/&gt;
                at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:218)&lt;br/&gt;
                at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:405)&lt;br/&gt;
                at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)&lt;br/&gt;
                at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)&lt;/p&gt;</description>
                <environment></environment>
        <key id="12487332">CAMEL-2614</key>
            <summary>Camel-cxf can&apos;t handle multi part message in PAYLOAD mode</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="wtam">William Tam</assignee>
                                    <reporter username="wtam">William Tam</reporter>
                        <labels>
                    </labels>
                <created>Mon, 5 Apr 2010 21:16:36 +0000</created>
                <updated>Sun, 24 Apr 2011 10:01:36 +0000</updated>
                            <resolved>Thu, 6 May 2010 18:12:14 +0000</resolved>
                                                    <fixVersion>2.3.0</fixVersion>
                                    <component>camel-cxf</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12955420" author="wtam" created="Mon, 5 Apr 2010 21:55:59 +0000"  >&lt;p&gt;Fix depends on: &lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-2732&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/CXF-2732&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-2753&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/CXF-2753&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12954737" author="davsclaus" created="Tue, 6 Apr 2010 13:43:25 +0000"  >&lt;p&gt;Great work.&lt;/p&gt;

&lt;p&gt;I wonder why you have commented out the last line in the patch&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;-                BindingOperationInfo boi = cxfExchange.get(BindingOperationInfo.class);
+                &lt;span class=&quot;code-comment&quot;&gt;//BindingOperationInfo boi = cxfExchange.get(BindingOperationInfo.class);&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Maybe if not needed, then delete all together.&lt;/p&gt;</comment>
                            <comment id="12955175" author="wtam" created="Tue, 6 Apr 2010 14:02:21 +0000"  >&lt;p&gt;@clause&lt;/p&gt;

&lt;p&gt;The commented line should have been removed.   I&apos;ll clean it up.  (Thanks for pointing it out).   The retrieving of &quot;boi&quot; have been performed in the previous lines.   The idea is to make sure the &quot;boi&quot; is remained as wrapped in PAYLOAD mode, so that CXF will not put a wrapper element again when it marshals the request.  I&apos;ll add some comment in the code, too.&lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;                 &lt;span class=&quot;code-comment&quot;&gt;// create a Camel exchange
&lt;/span&gt;                 org.apache.camel.Exchange camelExchange = endpoint.createExchange();
+                DataFormat dataFormat = endpoint.getDataFormat();
+
+                BindingOperationInfo boi = cxfExchange.getBindingOperationInfo();
+                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (dataFormat == DataFormat.PAYLOAD &amp;amp;&amp;amp; boi.isUnwrapped()) {
+                    boi = boi.getWrappedOperation();
+                    cxfExchange.put(BindingOperationInfo.class, boi);
+                }
                 
-                BindingOperationInfo boi = cxfExchange.get(BindingOperationInfo.class);
+                &lt;span class=&quot;code-comment&quot;&gt;//BindingOperationInfo boi = cxfExchange.get(BindingOperationInfo.class);
&lt;/span&gt;                 &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (boi != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
                     camelExchange.setProperty(BindingOperationInfo.&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;getName(), boi);
                     &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (LOG.isTraceEnabled()) {
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12955900" author="njiang" created="Thu, 6 May 2010 09:51:03 +0000"  >&lt;p&gt;Committed the patch into Camel trunk  in reversion 941623.&lt;/p&gt;</comment>
                            <comment id="13024552" author="davsclaus" created="Sun, 24 Apr 2011 10:01:36 +0000"  >&lt;p&gt;Closing all resolved tickets from 2010 or older&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="12487321">CAMEL-2696</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12463174" name="CAMEL-2614.patch" size="86950" author="wtam" created="Mon, 5 Apr 2010 21:57:14 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>76483</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 31 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i01pnr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7926</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>