<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:25:37 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-11690] Done() called two times in RoutingSlip processor</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-11690</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;I found the following issue, if I use the RoutingSlip with an InterceptStrategy. The done()-method of the interceptor, which intercepts the RoutingSlip, is called twice instead of only once. The attached test case reproduces this behavior.&lt;/p&gt;

&lt;p&gt;Best regards&lt;/p&gt;

&lt;p&gt;STefan  &lt;/p&gt;</description>
                <environment></environment>
        <key id="13096717">CAMEL-11690</key>
            <summary>Done() called two times in RoutingSlip processor</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="stefanbo72">Stefan Boller</reporter>
                        <labels>
                    </labels>
                <created>Tue, 22 Aug 2017 12:31:37 +0000</created>
                <updated>Thu, 7 Sep 2017 12:57:56 +0000</updated>
                            <resolved>Thu, 7 Sep 2017 12:57:56 +0000</resolved>
                                    <version>2.17.7</version>
                    <version>2.18.4</version>
                    <version>2.19.1</version>
                                    <fixVersion>2.18.5</fixVersion>
                    <fixVersion>2.19.3</fixVersion>
                    <fixVersion>2.20.0</fixVersion>
                                    <component>camel-core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16143476" author="stefanbo" created="Mon, 28 Aug 2017 07:28:12 +0000"  >&lt;p&gt;Any comments on this?&lt;/p&gt;</comment>
                            <comment id="16151734" author="davsclaus" created="Sun, 3 Sep 2017 08:10:42 +0000"  >&lt;p&gt;Dont use InterceptStrategy its being deprecated&lt;/p&gt;</comment>
                            <comment id="16152188" author="stefanbo" created="Mon, 4 Sep 2017 07:01:35 +0000"  >&lt;p&gt;What should I use instead?&lt;/p&gt;

&lt;p&gt;And isn&apos;t calling the done()-method twice a wrong behavior of the RoutingSlip independent of the InterceptStrategy?&lt;/p&gt;</comment>
                            <comment id="16155172" author="stefanbo72" created="Wed, 6 Sep 2017 10:41:01 +0000"  >&lt;p&gt;Can you answer my question, please?&lt;/p&gt;</comment>
                            <comment id="16156623" author="davsclaus" created="Thu, 7 Sep 2017 07:40:14 +0000"  >&lt;p&gt;Its being deprecated onwards and intended as internal API from Camel 3.0 onwards. The API is a bit too low-level and complex for end users.&lt;/p&gt;

&lt;p&gt;What is your use-case?&lt;/p&gt;</comment>
                            <comment id="16156637" author="stefanbo72" created="Thu, 7 Sep 2017 07:48:40 +0000"  >&lt;p&gt;We use it for monitoring the message processing in the camel routes.&lt;/p&gt;

&lt;p&gt;But independent of the InterceptStrategy: Shouldn&apos;t the done()-method be called only once by an asynchronous processor?&lt;/p&gt;</comment>
                            <comment id="16156672" author="davsclaus" created="Thu, 7 Sep 2017 08:25:08 +0000"  >&lt;p&gt;Yeah its being called for the routing slip itself, and each slip endpoint that was sent to, eg in your example there is 1 slip, so its 1 + 1 = 2.&lt;/p&gt;

&lt;p&gt;However yes ideally it should only be called when the routing slip itself is done, and be 1. This is how some of the other EIPs do it like recipient list, splitter etc.&lt;/p&gt;

&lt;p&gt;But routing slip is implemented on a different foundation than those, and hence why it was different.&lt;/p&gt;
</comment>
                            <comment id="16156777" author="davsclaus" created="Thu, 7 Sep 2017 10:16:05 +0000"  >&lt;p&gt;I am currently testing a fix to only call the done once for the interceptor strategy.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12883109" name="RoutingSlipWithInterceptorTest.java" size="3226" author="stefanbo72" created="Tue, 22 Aug 2017 12:32:40 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 10 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3j50n:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>