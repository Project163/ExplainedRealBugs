<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:28:11 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-12222] ResrSwaggerServlet removes last part of context root</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-12222</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;The method within RestSwaggerServlet, looks for the last &quot;/&quot; in the context root, and drops anything after that slash.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; translateContextPath(HttpServletRequest request) {
  &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; path = request.getContextPath();
  &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (path.isEmpty() || path.equals(&lt;span class=&quot;code-quote&quot;&gt;&quot;/&quot;&lt;/span&gt;)) {
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &quot;&quot;;
  } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
     &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; idx = path.lastIndexOf(&lt;span class=&quot;code-quote&quot;&gt;&quot;/&quot;&lt;/span&gt;);
     &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (idx &amp;gt; 0) {
         &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; path.substring(0, idx);
     }
  }
  &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; path;
}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Even though this has been deprecated, it would be good to fix it.&#160;&lt;/p&gt;

&lt;p&gt;An approach could be to add a servlet init parameter named &quot;translateContextPath&quot; which would default to true, and would work exactly as it does today by default. if set to false, it would return whatever value is in request.getContextPath() , with no translation.&lt;/p&gt;

&lt;p&gt;Also, to avoid the NPE thrown, pass in an empty RestConfiguration to RestSwaggerSupport.renderResourceListing()&#160;&lt;/p&gt;

&lt;p&gt;(See: &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12038&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/CAMEL-12038&lt;/a&gt;)&#160;&lt;/p&gt;

&lt;p&gt;I plan on working on this. Creating a Jira to get feedback on the approach&lt;/p&gt;</description>
                <environment></environment>
        <key id="13135655">CAMEL-12222</key>
            <summary>ResrSwaggerServlet removes last part of context root</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="dariusx">Darius Cooper</reporter>
                        <labels>
                    </labels>
                <created>Fri, 2 Feb 2018 00:53:51 +0000</created>
                <updated>Tue, 13 Feb 2018 14:32:13 +0000</updated>
                            <resolved>Tue, 13 Feb 2018 14:32:13 +0000</resolved>
                                                    <fixVersion>2.19.5</fixVersion>
                    <fixVersion>2.20.3</fixVersion>
                    <fixVersion>2.21.0</fixVersion>
                                    <component>camel-swagger</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16360028" author="githubbot" created="Sun, 11 Feb 2018 17:37:28 +0000"  >&lt;p&gt;DariusX opened a new pull request #2220: &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12222&quot; title=&quot;ResrSwaggerServlet removes last part of context root&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12222&quot;&gt;&lt;del&gt;CAMEL-12222&lt;/del&gt;&lt;/a&gt;: RestSwaggerServlet - added option to suppress &quot;translate&#8230;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/camel/pull/2220&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2220&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Added an option to suppress &quot;translateContextPath&quot;&lt;br/&gt;
   Also, added a fix to allow this class to be used in the 2.20.1 version, even though it is deprecated&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16360029" author="githubbot" created="Sun, 11 Feb 2018 17:37:28 +0000"  >&lt;p&gt;GitHub user DariusX opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/2220&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2220&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12222&quot; title=&quot;ResrSwaggerServlet removes last part of context root&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12222&quot;&gt;&lt;del&gt;CAMEL-12222&lt;/del&gt;&lt;/a&gt;: RestSwaggerServlet - added option to suppress &quot;translate&#8230;&lt;/p&gt;

&lt;p&gt;    Added an option to suppress &quot;translateContextPath&quot;&lt;br/&gt;
    Also, added a fix to allow this class to be used in the 2.20.1 version, even though it is deprecated&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/DariusX/camel&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/DariusX/camel&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12222&quot; title=&quot;ResrSwaggerServlet removes last part of context root&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12222&quot;&gt;&lt;del&gt;CAMEL-12222&lt;/del&gt;&lt;/a&gt;-Rest-Swagger-Context&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/2220.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2220.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #2220&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit ec87c965f92ca04e874bae115f16f01c5034985e&lt;br/&gt;
Author: realistTheorist &amp;lt;realisttheorist@...&amp;gt;&lt;br/&gt;
Date:   2018-02-11T17:35:22Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12222&quot; title=&quot;ResrSwaggerServlet removes last part of context root&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12222&quot;&gt;&lt;del&gt;CAMEL-12222&lt;/del&gt;&lt;/a&gt;: RestSwaggerServlet - added option to suppress &quot;translateContextPath&quot;&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16362397" author="githubbot" created="Tue, 13 Feb 2018 14:27:28 +0000"  >&lt;p&gt;davsclaus closed pull request #2220: &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12222&quot; title=&quot;ResrSwaggerServlet removes last part of context root&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12222&quot;&gt;&lt;del&gt;CAMEL-12222&lt;/del&gt;&lt;/a&gt;: RestSwaggerServlet - added option to suppress &quot;translate&#8230;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/camel/pull/2220&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2220&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/components/camel-swagger-java/src/main/java/org/apache/camel/swagger/servlet/RestSwaggerServlet.java b/components/camel-swagger-java/src/main/java/org/apache/camel/swagger/servlet/RestSwaggerServlet.java&lt;br/&gt;
index 51ca3d2e0d7..15f9d001627 100644&lt;br/&gt;
&amp;#8212; a/components/camel-swagger-java/src/main/java/org/apache/camel/swagger/servlet/RestSwaggerServlet.java&lt;br/&gt;
+++ b/components/camel-swagger-java/src/main/java/org/apache/camel/swagger/servlet/RestSwaggerServlet.java&lt;br/&gt;
@@ -34,6 +34,7 @@&lt;br/&gt;
 import org.apache.camel.Exchange;&lt;br/&gt;
 import org.apache.camel.impl.DefaultClassResolver;&lt;br/&gt;
 import org.apache.camel.spi.ClassResolver;&lt;br/&gt;
+import org.apache.camel.spi.RestConfiguration;&lt;br/&gt;
 import org.apache.camel.swagger.RestApiResponseAdapter;&lt;br/&gt;
 import org.apache.camel.swagger.RestSwaggerSupport;&lt;br/&gt;
 import org.apache.camel.util.EndpointHelper;&lt;br/&gt;
@@ -61,6 +62,19 @@&lt;/p&gt;

&lt;p&gt;     private String apiContextIdPattern;&lt;br/&gt;
     private boolean apiContextIdListing;&lt;br/&gt;
+    private boolean translateContextPath = true;&lt;br/&gt;
+&lt;br/&gt;
+&lt;br/&gt;
+    public boolean isTranslateContextPath() &lt;/p&gt;
{ return translateContextPath; }
&lt;p&gt;+&lt;br/&gt;
+    /**&lt;br/&gt;
+     * Sets whether the context path of the request should be translated (true) or used as-is (false)&lt;br/&gt;
+     * Optional, Defaults to true&lt;br/&gt;
+     * @param translateContextPath&lt;br/&gt;
+     */&lt;br/&gt;
+    public void setTranslateContextPath(boolean translateContextPath) &lt;/p&gt;
{ this.translateContextPath = translateContextPath; }
&lt;p&gt;+&lt;br/&gt;
+&lt;/p&gt;

&lt;p&gt;     public String getApiContextIdPattern() {&lt;br/&gt;
         return apiContextIdPattern;&lt;br/&gt;
@@ -115,6 +129,11 @@ public void init(final ServletConfig config) throws ServletException {&lt;br/&gt;
         if (listing != null) &lt;/p&gt;
{
             apiContextIdListing = Boolean.valueOf(listing.toString());
         }
&lt;p&gt;+        Object translate = parameters.remove(&quot;translateContextPath&quot;);&lt;br/&gt;
+        if (translate != null) &lt;/p&gt;
{
+            translateContextPath = Boolean.valueOf(translate.toString());
+        }
&lt;p&gt;+&lt;br/&gt;
     }&lt;/p&gt;

&lt;p&gt;     @Override&lt;br/&gt;
@@ -192,7 +211,7 @@ protected void doGet(HttpServletRequest request, HttpServletResponse response) t&lt;br/&gt;
                 if (!match) &lt;/p&gt;
{
                     adapter.noContent();
                 }
&lt;p&gt; else &lt;/p&gt;
{
-                    support.renderResourceListing(adapter, swaggerConfig, name, route, json, yaml, classResolver, null);
+                    support.renderResourceListing(adapter, swaggerConfig, name, route, json, yaml, classResolver, new RestConfiguration());
                 }
&lt;p&gt;             }&lt;br/&gt;
         } catch (Exception e) {&lt;br/&gt;
@@ -229,6 +248,9 @@ private void initBaseAndApiPaths(HttpServletRequest request) throws MalformedURL&lt;br/&gt;
      */&lt;br/&gt;
     private String translateContextPath(HttpServletRequest request) {&lt;br/&gt;
         String path = request.getContextPath();&lt;br/&gt;
+        if (!translateContextPath) &lt;/p&gt;
{
+            return path;
+        }
&lt;p&gt;         if (path.isEmpty() || path.equals(&quot;/&quot;)) &lt;/p&gt;
{
             return &quot;&quot;;
         }
&lt;p&gt; else {&lt;br/&gt;
@@ -240,4 +262,4 @@ private String translateContextPath(HttpServletRequest request) &lt;/p&gt;
{
         return path;
     }

&lt;p&gt;-}&lt;br/&gt;
+}&lt;br/&gt;
\ No newline at end of file&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16362398" author="githubbot" created="Tue, 13 Feb 2018 14:27:28 +0000"  >&lt;p&gt;Github user davsclaus closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/2220&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2220&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16362402" author="davsclaus" created="Tue, 13 Feb 2018 14:32:13 +0000"  >&lt;p&gt;Thanks for the PR.&lt;/p&gt;

&lt;p&gt;I fixed the checkstyle issue&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://camel.apache.org/building.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://camel.apache.org/building.html&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10062"><![CDATA[Moderate]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 40 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3pozb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>