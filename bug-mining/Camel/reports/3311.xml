<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:10:02 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-8955] Processor for .pollEnrich incorrectly handles provided AggregationStrategy</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-8955</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;As it can be concluded from AggregationStrategy javadoc, and also from available implementations such as GroupedExchangeAggregationStrategy, it should be used in the following manner:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;AggregationStrategy strategy = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; GroupedExchangeAggregationStrategy();

Exchange result = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
result = strategy.aggregate(result, exchange1);
result = strategy.aggregate(result, exchange2);
&lt;span class=&quot;code-comment&quot;&gt;// ... and so on
&lt;/span&gt;&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; result;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;But PollEnricher do it in following manner:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;AggregationStrategy strategy = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; GroupedExchangeAggregationStrategy();

Exchange result = strategy.aggregate(exchange1, exchange2);
&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; result;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This leads to incorrect result returned after aggregation and lost exchanges.&lt;/p&gt;

&lt;p&gt;Also PollEnricher doesn&apos;t handle CompletionAwareAggregationStrategy and does not call onCompletion(). Consequently GroupedExchangeAggregationStrategy does not return aggregated result in the Exchange body.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12844425">CAMEL-8955</key>
            <summary>Processor for .pollEnrich incorrectly handles provided AggregationStrategy</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="andy.fedotov">Andy Fedotov</reporter>
                        <labels>
                    </labels>
                <created>Sun, 12 Jul 2015 11:55:31 +0000</created>
                <updated>Sun, 12 Jul 2015 17:58:35 +0000</updated>
                            <resolved>Sun, 12 Jul 2015 14:02:54 +0000</resolved>
                                    <version>2.14.3</version>
                                                    <component>camel-core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14623764" author="andy.fedotov" created="Sun, 12 Jul 2015 11:56:51 +0000"  >&lt;p&gt;Added Unit Test - &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/12744928/12744928_PollEnrichAggregationStrategyTest.java&quot; title=&quot;PollEnrichAggregationStrategyTest.java attached to CAMEL-8955&quot;&gt;PollEnrichAggregationStrategyTest.java&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="14623819" author="davsclaus" created="Sun, 12 Jul 2015 14:02:54 +0000"  >&lt;p&gt;That strategy is only for the aggregator eip and not poll enrich - I will update its javadoc.&lt;/p&gt;</comment>
                            <comment id="14623914" author="andy.fedotov" created="Sun, 12 Jul 2015 17:29:20 +0000"  >&lt;p&gt;Thanks, Claus!&lt;br/&gt;
It is somewhat confusing, hope you clarify a little bit.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;AggregationStrategy that is used for Aggregator EIP and for PollEnrich EIP shares same Java interface, but behavior of it&apos;s implementation logic should be different? This looks like bad idea...&lt;/li&gt;
	&lt;li&gt;How developers can distinguish them from each other?&lt;/li&gt;
&lt;/ol&gt;

</comment>
                            <comment id="14623923" author="davsclaus" created="Sun, 12 Jul 2015 17:58:35 +0000"  >&lt;p&gt;Read the EIP patterns, and see that the aggregator has options of on completion and whatnot. The enrich is only using agg strategy to merge the source with the received target - not to group N+ together and have different completion triggers and whatnot. All that latter is only for the aggregator EIP.&lt;/p&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12744928" name="PollEnrichAggregationStrategyTest.java" size="3185" author="andy.fedotov" created="Sun, 12 Jul 2015 11:56:51 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 19 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2h5af:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>