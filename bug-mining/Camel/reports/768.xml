<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 09:34:55 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-2033] java.io.NotSerializableException: org.apache.camel.component.jms.JmsQueueEndpoint (polling consumer with POJO)</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-2033</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;The following error is generated when a POJO defined as a polling consumer try to consume messages from an activemq queue&lt;/p&gt;

&lt;p&gt;CaughtExceptionType:java.io.NotSerializableException,&lt;br/&gt;
CaughtExceptionMessage:org.apache.camel.component.jms.JmsQueueEndpoint,&lt;br/&gt;
StackTrace:java.io.NotSerializableException:&lt;br/&gt;
org.apache.camel.component.jms.JmsQueueEndpoint&lt;br/&gt;
       at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1081)&lt;br/&gt;
       at java.io.ObjectOutputStream.writeArray(ObjectOutputStream.java:1251)&lt;br/&gt;
       at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1075)&lt;br/&gt;
       at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:302)&lt;br/&gt;
       at org.apache.camel.component.bean.BeanInvocation.writeExternal(BeanInvocation.java:104)&lt;br/&gt;
       at java.io.ObjectOutputStream.writeExternalData(ObjectOutputStream.java:1310)&lt;br/&gt;
       at java.io.ObjectOutputStream.writeOrdinaryObject(ObjectOutputStream.java:1288)&lt;br/&gt;
       at java.io.ObjectOutputStream.writeObject0(ObjectOutputStream.java:1079)&lt;br/&gt;
       at java.io.ObjectOutputStream.writeObject(ObjectOutputStream.java:302)&lt;br/&gt;
       at org.apache.activemq.command.ActiveMQObjectMessage.storeContent(ActiveMQObjectMessage.java:98)&lt;/p&gt;


&lt;p&gt;Here is the code of the POJO&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;ReportingConsumer {
	
	@EndpointInject(name = &lt;span class=&quot;code-quote&quot;&gt;&quot;queueReportingEndpoint&quot;&lt;/span&gt;)
	&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; ConsumerTemplate consumer;
	
       @EndpointInject(name = &lt;span class=&quot;code-quote&quot;&gt;&quot;queueReportingEndpoint&quot;&lt;/span&gt;)
	&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; Endpoint endpoint;
	
	&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; List&amp;lt;Map&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt;&amp;gt; collectMessages() {

    	List&amp;lt;Map&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt;&amp;gt; result = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ArrayList&amp;lt;Map&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt;&amp;gt;();
    	List&amp;lt;Map&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt;&amp;gt; received = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ArrayList&amp;lt;Map&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt;&amp;gt;();
    	
	received = consumer.receiveBody(endpoint, List.class);
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;Everything works fine when the POJO is designed like this :&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;@Consume(ref=&lt;span class=&quot;code-quote&quot;&gt;&quot;queueToBeRead&quot;&lt;/span&gt;)
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; List&amp;lt;&amp;gt; method(List&amp;lt;&amp;gt;) {

...

}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;but in this case it is not a polling consumer&lt;/p&gt;</description>
                <environment></environment>
        <key id="12486959">CAMEL-2033</key>
            <summary>java.io.NotSerializableException: org.apache.camel.component.jms.JmsQueueEndpoint (polling consumer with POJO)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="cmoulliard">Moulliard Charles</reporter>
                        <labels>
                    </labels>
                <created>Tue, 22 Sep 2009 07:27:38 +0000</created>
                <updated>Thu, 3 Jun 2010 07:24:35 +0000</updated>
                            <resolved>Tue, 22 Sep 2009 09:52:32 +0000</resolved>
                                                    <fixVersion>2.1.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12946717" author="davsclaus" created="Tue, 22 Sep 2009 09:52:32 +0000"  >&lt;p&gt;trunk: 817576.&lt;/p&gt;</comment>
                            <comment id="12950129" author="cmoulliard" created="Tue, 22 Sep 2009 10:38:12 +0000"  >&lt;p&gt;Thx for the correction.&lt;/p&gt;

&lt;p&gt;Top of Karaf (osgi server), we have a strange error generated when I update my camel bundle containing this route and the code of the consumer. Here is the error :&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;12:34:36,633 | INFO  | heduler_Worker-2 | x3s                              | rg.apache.camel.processor.Logger   88 | Exchange[
, BodyType:org.quartz.JobDetail
, Body:JobDetail &lt;span class=&quot;code-quote&quot;&gt;&apos;DEFAULT.quartz:&lt;span class=&quot;code-comment&quot;&gt;//x3sReporting/clientError?cron=0+0%2F2+9-18+%3F+*+MON-FRI&apos;&lt;/span&gt;:  jobClass: &apos;org.apache.camel.component.quartz.CamelJob isStateful: &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt; isVolatile: &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt; isDurable: &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt; requestsRecovers: &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;
&lt;/span&gt;, CaughtExceptionType:java.lang.IllegalStateException, CaughtExceptionMessage:Invalid BundleContext., StackTrace:java.lang.IllegalStateException: Invalid BundleContext.
	at org.apache.felix.framework.BundleContextImpl.checkValidity(BundleContextImpl.java:393)
	at org.apache.felix.framework.BundleContextImpl.getServiceReference(BundleContextImpl.java:257)
	at org.apache.camel.osgi.OsgiServiceRegistry.lookup(OsgiServiceRegistry.java:47)
	at org.apache.camel.osgi.CompositeRegistry.lookup(CompositeRegistry.java:59)
	at org.apache.camel.impl.DefaultCamelContext.createEndpoint(DefaultCamelContext.java:1101)
	at org.apache.camel.impl.DefaultCamelContext.getEndpoint(DefaultCamelContext.java:408)
	at org.apache.camel.util.CamelContextHelper.getMandatoryEndpoint(CamelContextHelper.java:52)
	at org.apache.camel.impl.DefaultConsumerTemplate.resolveMandatoryEndpoint(DefaultConsumerTemplate.java:134)
	at org.apache.camel.impl.DefaultConsumerTemplate.receive(DefaultConsumerTemplate.java:53)
	at org.apache.camel.impl.DefaultConsumerTemplate.receiveBody(DefaultConsumerTemplate.java:80)
	at org.apache.camel.impl.DefaultConsumerTemplate.receiveBody(DefaultConsumerTemplate.java:107)
	at org.apache.camel.impl.DefaultConsumerTemplate.receiveBody(DefaultConsumerTemplate.java:112)
	at com.xpectis.x3s.core.util.ReportingConsumer.collectMessages(ReportingConsumer.java:29)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12956302" author="davsclaus" created="Thu, 3 Jun 2010 07:24:35 +0000"  >&lt;p&gt;Closing old resolved issues&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>76658</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 25 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i01m33:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7347</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>