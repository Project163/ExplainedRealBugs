<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:26:13 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-11898] camel-spring-ws - Attachments are lost</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-11898</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;The below scenario is failing in 2.19.3 and was working 2.14.0.&lt;br/&gt;
May be we&apos;re doing something wrong but i cannot find out where the problem is originated.&lt;br/&gt;
Any help would be appreciated &lt;/p&gt;

&lt;p&gt;&lt;b&gt;Some debug information&lt;/b&gt;&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;I&apos;ve debugged the code in 2.14.0 and 2.19.3 in the &apos;old&apos; ConvertBodyProcessor the out was put back on the DefaultMessage&lt;/li&gt;
	&lt;li&gt;In the SpringWebserviceConsumer (2.19.3) there is no out message after the processor. The in message is present including the attachments.&lt;/li&gt;
	&lt;li&gt;In the BasicMessageFilter#filterConsumer(2.19.3) the out is read without checking hasOut(). I think the solution is to look if there is out available, when not available using the in message&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;&lt;b&gt;Scenario&lt;/b&gt;&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Sending a request to a soap service in this case the spring-ws component&lt;/li&gt;
	&lt;li&gt;A bean is responsible for retrieving some information and attachments&lt;/li&gt;
	&lt;li&gt;The soap response no longer contains the attachment&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;&lt;b&gt;Below is part of spring configuration&lt;/b&gt;&lt;br/&gt;
&amp;lt;camel:from uri=&quot;spring-ws:uri:/contextPath/soapServices?endpointMapping=#endpointMapping&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;camel:to uri=&quot;bean:someBean?method=onMessage(&apos;myMethod&apos;)&quot; /&amp;gt;&lt;br/&gt;
&amp;lt;camel:convertBodyTo type=&quot;java.lang.String&quot;/&amp;gt;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Snippet of the bean&lt;/b&gt;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
exchange.getOut().copyFrom(exchange.getIn());
exchange.getOut().setHeader(Exchange.CHARSET_NAME, CamelConstants.DEFAULT_CHARACTER_SET);
exchange.getOut().setBody(response.getResponse());
exchange.getOut().addAttachment(id, attachment.getAttachment());

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13108850">CAMEL-11898</key>
            <summary>camel-spring-ws - Attachments are lost</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="r.groote@beinformed.com">Richard Groote</reporter>
                        <labels>
                    </labels>
                <created>Thu, 12 Oct 2017 09:22:40 +0000</created>
                <updated>Thu, 12 Oct 2017 14:00:53 +0000</updated>
                            <resolved>Thu, 12 Oct 2017 14:00:53 +0000</resolved>
                                    <version>2.19.3</version>
                                    <fixVersion>2.19.4</fixVersion>
                    <fixVersion>2.20.1</fixVersion>
                    <fixVersion>2.21.0</fixVersion>
                                    <component>camel-spring-ws</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16201687" author="davsclaus" created="Thu, 12 Oct 2017 09:25:04 +0000"  >&lt;p&gt;Yeah you are welcome to provide a github PR with a fix in that BasicMessageFilter to check for hasOut&lt;/p&gt;</comment>
                            <comment id="16201699" author="githubbot" created="Thu, 12 Oct 2017 09:33:51 +0000"  >&lt;p&gt;GitHub user richardgroote opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/2030&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2030&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-11898&quot; title=&quot;camel-spring-ws - Attachments are lost&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-11898&quot;&gt;&lt;del&gt;CAMEL-11898&lt;/del&gt;&lt;/a&gt;: Attachment are not in the response&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/richardgroote/camel&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/richardgroote/camel&lt;/a&gt; patch-2&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/2030.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2030.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #2030&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 808168a6f89d5f3fddca97e45b1671b98bbf5f80&lt;br/&gt;
Author: richardgroote &amp;lt;32516488+richardgroote@users.noreply.github.com&amp;gt;&lt;br/&gt;
Date:   2017-10-12T09:33:35Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-11898&quot; title=&quot;camel-spring-ws - Attachments are lost&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-11898&quot;&gt;&lt;del&gt;CAMEL-11898&lt;/del&gt;&lt;/a&gt;: Attachment are not in the response&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16201977" author="githubbot" created="Thu, 12 Oct 2017 14:00:46 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/2030&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2030&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16201978" author="davsclaus" created="Thu, 12 Oct 2017 14:00:53 +0000"  >&lt;p&gt;Thanks for the PR&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10061"><![CDATA[Novice]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 5 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3l6ev:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>