<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:46:24 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-16345] camel-main fails to load component properties from Enviroment variables</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-16345</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;This bug was originally reported in &lt;a href=&quot;#narrow/stream/257302-camel-quarkus/topic/Components.20configuration.20via.20environment.20variables].&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;camel.zulipchat.com&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;When trying to configure camel components using environment variables like &lt;tt&gt;CAMEL_COMPONENT_AWS2_S3_ACCESSKEY&lt;/tt&gt;, camel fails to configure with the following error:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Failed to start application: java.lang.IllegalArgumentException: Error configuring property: camel.component.aws2.s3.overrideendpoint because cannot find component with name aws2. Make sure you have the component on the classpath
        at org.apache.camel.main.BaseMainSupport.lambda$autoConfigurationFromProperties$24(BaseMainSupport.java:1216)
        at org.apache.camel.main.MainHelper.computeProperties(MainHelper.java:266)
        at org.apache.camel.main.BaseMainSupport.autoConfigurationFromProperties(BaseMainSupport.java:1212)
        at org.apache.camel.main.BaseMainSupport.autoconfigure(BaseMainSupport.java:400)
        at org.apache.camel.main.BaseMainSupport.postProcessCamelContext(BaseMainSupport.java:528)
        at org.apache.camel.quarkus.main.CamelMain.initCamelContext(CamelMain.java:108)
        at org.apache.camel.quarkus.main.CamelMain.doInit(CamelMain.java:78)
        at org.apache.camel.support.service.BaseService.init(BaseService.java:83)
        at org.apache.camel.quarkus.main.CamelMain.startEngine(CamelMain.java:129)
        at org.apache.camel.quarkus.main.CamelMainRuntime.start(CamelMainRuntime.java:49)
        at org.apache.camel.quarkus.core.CamelBootstrapRecorder.start(CamelBootstrapRecorder.java:45)
        ...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Also using &lt;tt&gt;CAMEL_COMPONENT_AWS2-S3_ACCESSKEY&lt;/tt&gt; is not an option as it won&apos;t work and uses non-allowed characters for environment variables.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;In the thread the following suggestions where made by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cibsen%40e-ma.net&quot; class=&quot;user-hover&quot; rel=&quot;cibsen@e-ma.net&quot;&gt;cibsen@e-ma.net&lt;/a&gt;:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;em&gt;we could make the ENV only be able to configure 1 level deep, and count the _ then we know if its part of component name or not&lt;/em&gt;&lt;/li&gt;
	&lt;li&gt;&lt;em&gt;some magic word, like _DASH&lt;/em&gt; eg so you do AWS2_DASH_SQS_SECRET_TOKEN = 123_&lt;/li&gt;
	&lt;li&gt;&lt;em&gt;make a known list of component names via camel-catalog, and source code generate it into camel-main so it knows that AWS2_SQS is the component name&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;The issue was pinpointed to the following line: &lt;a href=&quot;https://github.com/apache/camel/blob/690d64b19d813ee429857557f28c82f8d755d402/core/camel-main/src/main/java/org/apache/camel/main/MainHelper.java#L59&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/blob/690d64b19d813ee429857557f28c82f8d755d402/core/camel-main/src/main/java/org/apache/camel/main/MainHelper.java#L59&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13364674">CAMEL-16345</key>
            <summary>camel-main fails to load component properties from Enviroment variables</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="goncalonsp">Gon&#231;alo Pereira</reporter>
                        <labels>
                    </labels>
                <created>Fri, 12 Mar 2021 15:12:33 +0000</created>
                <updated>Sat, 13 Mar 2021 11:57:59 +0000</updated>
                            <resolved>Sat, 13 Mar 2021 09:05:26 +0000</resolved>
                                    <version>3.8.0</version>
                                    <fixVersion>3.9.0</fixVersion>
                                    <component>camel-main</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                    <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                            <outwardlinks description="duplicates">
                                        <issuelink>
            <issuekey id="13364675">CAMEL-16346</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13364964">CAMEL-16349</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 35 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0ooyw:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>