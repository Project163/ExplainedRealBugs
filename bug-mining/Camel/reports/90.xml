<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 09:25:34 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-363] camel-cxf component can&apos;t deal with the exception message in MESSAGE dataFormat</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-363</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;From: Willem Jiang&lt;br/&gt;
To: camel-user@activemq.apache.org&lt;br/&gt;
Subject: Re: camel-cxf throwing a fault&lt;br/&gt;
Date: Wed, 05 Mar 2008 16:26:41 +0800&lt;br/&gt;
Reply-To: camel-user@activemq.apache.org&lt;/p&gt;

&lt;p&gt;Hi Marc,&lt;/p&gt;

&lt;p&gt;It looks like camel-cxf component&apos;s issue which can&apos;t deal with the &lt;br/&gt;
exception message in MESSAGE dataFormat.&lt;br/&gt;
Could you fill a JIRA for it ? I will fix it later this week.&lt;br/&gt;
As usual ,you just need throw the exception from the processor , CXF &lt;br/&gt;
will try to marshal it into a soap fault.&lt;/p&gt;

&lt;p&gt;Regards,&lt;br/&gt;
Willem&lt;/p&gt;

&lt;p&gt;Marc Giger wrote:&lt;br/&gt;
&amp;gt; Hi,&lt;br/&gt;
&amp;gt;&lt;br/&gt;
&amp;gt; I&apos;m trying to get the following camel route working where the&lt;br/&gt;
&amp;gt; dataformat is MESSAGE.&lt;br/&gt;
&amp;gt;&lt;br/&gt;
&amp;gt; &amp;lt;from uri=&quot;cxf:bean:routerEndpoint?dataFormat=MESSAGE&quot;/&amp;gt;            &lt;br/&gt;
&amp;gt; &amp;lt;process ref=&quot;decryptProcessor&quot;/&amp;gt;  &lt;br/&gt;
&amp;gt; &amp;lt;choice&amp;gt;&lt;br/&gt;
&amp;gt;     &amp;lt;when&amp;gt;  &lt;br/&gt;
&amp;gt;     	&amp;lt;methodCall bean=&quot;endpointSelector&quot; method=&quot;matches&quot;/&amp;gt;&lt;br/&gt;
&amp;gt; 	    &amp;lt;to uri=&quot;cxf:bean:serviceEndpoint?dataFormat=MESSAGE&quot;/&amp;gt;  &lt;br/&gt;
&amp;gt;     &amp;lt;/when&amp;gt;&lt;br/&gt;
&amp;gt;     &amp;lt;otherwise&amp;gt;  &lt;br/&gt;
&amp;gt;     	&amp;lt;to uri=&quot;cxf:bean:localEndpoint?dataFormat=MESSAGE&quot;/&amp;gt;   &lt;br/&gt;
&amp;gt;     &amp;lt;/otherwise&amp;gt;&lt;br/&gt;
&amp;gt; &amp;lt;/choice&amp;gt;  &lt;br/&gt;
&amp;gt;&lt;br/&gt;
&amp;gt; if the endpointSelector bean returns true the request is redirected to&lt;br/&gt;
&amp;gt; a remote webservice.&lt;br/&gt;
&amp;gt; otherwise the request is forwarded to a local cxf service (with&lt;br/&gt;
&amp;gt; local-transport)&lt;br/&gt;
&amp;gt;&lt;br/&gt;
&amp;gt; Now, if I invoke the routerEndpoint and somewhere in the pipeline&lt;br/&gt;
&amp;gt; happens an exception (in my case in the decryptProcessor), I get the&lt;br/&gt;
&amp;gt; following Exception in the outFault chain:&lt;br/&gt;
&amp;gt;&lt;br/&gt;
&amp;gt; Mar 4, 2008 10:48:35 PM org.apache.cxf.phase.PhaseInterceptorChain&lt;br/&gt;
&amp;gt; doIntercept INFO: Interceptor has thrown exception, unwinding now&lt;br/&gt;
&amp;gt; org.apache.cxf.interceptor.Fault&lt;br/&gt;
&amp;gt;         at&lt;br/&gt;
&amp;gt; org.apache.camel.component.cxf.interceptors.RawMessageContentRedirectInterceptor.handleMessage(RawMessageContentRedirectInterceptor.java:43)&lt;br/&gt;
&amp;gt; at&lt;br/&gt;
&amp;gt; org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:208)&lt;br/&gt;
&amp;gt; at&lt;br/&gt;
&amp;gt; org.apache.cxf.interceptor.OutgoingChainInterceptor.handleMessage(OutgoingChainInterceptor.java:74)&lt;br/&gt;
&amp;gt; at&lt;br/&gt;
&amp;gt; org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:208)&lt;br/&gt;
&amp;gt; at&lt;br/&gt;
&amp;gt; org.apache.cxf.transport.ChainInitiationObserver.onMessage(ChainInitiationObserver.java:77)&lt;br/&gt;
&amp;gt; at&lt;br/&gt;
&amp;gt; org.apache.cxf.transport.servlet.ServletDestination.doMessage(ServletDestination.java:79)&lt;br/&gt;
&amp;gt; at&lt;br/&gt;
&amp;gt; org.apache.cxf.transport.servlet.ServletController.invokeDestination(ServletController.java:264)&lt;br/&gt;
&amp;gt; at&lt;br/&gt;
&amp;gt; org.apache.cxf.transport.servlet.ServletController.invoke(ServletController.java:160)&lt;br/&gt;
&amp;gt; at&lt;br/&gt;
&amp;gt; org.apache.cxf.transport.servlet.AbstractCXFServlet.invoke(AbstractCXFServlet.java:170)&lt;br/&gt;
&amp;gt; at&lt;br/&gt;
&amp;gt; org.apache.cxf.transport.servlet.AbstractCXFServlet.doPost(AbstractCXFServlet.java:148)&lt;br/&gt;
&amp;gt; at javax.servlet.http.HttpServlet.service(HttpServlet.java:727) at&lt;br/&gt;
&amp;gt; javax.servlet.http.HttpServlet.service(HttpServlet.java:820) at&lt;br/&gt;
&amp;gt; org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:487)&lt;br/&gt;
&amp;gt; at&lt;br/&gt;
&amp;gt; org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:362)&lt;br/&gt;
&amp;gt; at&lt;br/&gt;
&amp;gt; org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)&lt;br/&gt;
&amp;gt; at&lt;br/&gt;
&amp;gt; org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:181)&lt;br/&gt;
&amp;gt; at&lt;br/&gt;
&amp;gt; org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:712)&lt;br/&gt;
&amp;gt; at&lt;br/&gt;
&amp;gt; org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:405)&lt;br/&gt;
&amp;gt; at&lt;br/&gt;
&amp;gt; org.mortbay.jetty.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:211)&lt;br/&gt;
&amp;gt; at&lt;br/&gt;
&amp;gt; org.mortbay.jetty.handler.HandlerCollection.handle(HandlerCollection.java:114)&lt;br/&gt;
&amp;gt; at&lt;br/&gt;
&amp;gt; org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:139)&lt;br/&gt;
&amp;gt; at org.mortbay.jetty.Server.handle(Server.java:313) at&lt;br/&gt;
&amp;gt; org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:506)&lt;br/&gt;
&amp;gt; at&lt;br/&gt;
&amp;gt; org.mortbay.jetty.HttpConnection$RequestHandler.content(HttpConnection.java:844)&lt;br/&gt;
&amp;gt; at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:644) at&lt;br/&gt;
&amp;gt; org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:211) at&lt;br/&gt;
&amp;gt; org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:381) at&lt;br/&gt;
&amp;gt; org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:396)&lt;br/&gt;
&amp;gt; at&lt;br/&gt;
&amp;gt; org.mortbay.thread.BoundedThreadPool$PoolThread.run(BoundedThreadPool.java:442)&lt;br/&gt;
&amp;gt; Caused by: java.lang.NullPointerException at&lt;br/&gt;
&amp;gt; org.apache.commons.io.IOUtils.copyLarge(IOUtils.java:1025) at&lt;br/&gt;
&amp;gt; org.apache.commons.io.IOUtils.copy(IOUtils.java:999) at&lt;br/&gt;
&amp;gt; org.apache.camel.component.cxf.interceptors.RawMessageContentRedirectInterceptor.handleMessage(RawMessageContentRedirectInterceptor.java:39) ...&lt;br/&gt;
&amp;gt; 28 more&lt;br/&gt;
&amp;gt;&lt;br/&gt;
&amp;gt; This is because the InputStream is null in&lt;br/&gt;
&amp;gt; RawMessageContentRedirectInterceptor:&lt;br/&gt;
&amp;gt;&lt;br/&gt;
&amp;gt; public void handleMessage(Message message) throws Fault {&lt;br/&gt;
&amp;gt;&lt;br/&gt;
&amp;gt;         InputStream is = message.getContent(InputStream.class);&lt;br/&gt;
&amp;gt;         OutputStream os = message.getContent(OutputStream.class);&lt;br/&gt;
&amp;gt;         &lt;br/&gt;
&amp;gt;         try &lt;/p&gt;
{            
&amp;gt;             IOUtils.copy(is, os);
&amp;gt;             is.close();
&amp;gt;             os.flush();
&amp;gt;         }
&lt;p&gt; catch (Exception e) &lt;/p&gt;
{
&amp;gt;             throw new Fault(e);
&amp;gt;         }
&lt;p&gt;&amp;gt;     }&lt;br/&gt;
&amp;gt;&lt;br/&gt;
&amp;gt; How can I return a custom soap-fault in a processor/filter?&lt;br/&gt;
&amp;gt;&lt;br/&gt;
&amp;gt; Thanks,&lt;br/&gt;
&amp;gt;&lt;br/&gt;
&amp;gt; Marc&lt;br/&gt;
&amp;gt;&lt;br/&gt;
&amp;gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12485137">CAMEL-363</key>
            <summary>camel-cxf component can&apos;t deal with the exception message in MESSAGE dataFormat</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="njiang">Willem Jiang</assignee>
                                    <reporter username="gigerstyle">Marc Giger</reporter>
                        <labels>
                    </labels>
                <created>Wed, 5 Mar 2008 18:10:04 +0000</created>
                <updated>Mon, 12 May 2008 12:45:33 +0000</updated>
                            <resolved>Tue, 11 Mar 2008 14:34:02 +0000</resolved>
                                    <version>1.3.0</version>
                                    <fixVersion>1.3.0</fixVersion>
                                    <component>camel-cxf</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12946523" author="njiang" created="Tue, 11 Mar 2008 14:34:02 +0000"  >&lt;p&gt;The patch is committed, please check it out &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12947001" author="davsclaus" created="Mon, 12 May 2008 12:45:33 +0000"  >&lt;p&gt;Closed all 1.3 tickets&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>83244</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 years, 29 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i01brr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5676</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>