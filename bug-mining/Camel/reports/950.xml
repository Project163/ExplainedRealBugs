<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 09:37:32 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-1913] camel-jetty - Should support multipart/form posted data in the message body better</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-1913</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;See &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-1801&quot; title=&quot;FTP component - add option to specify retry login attempts&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-1801&quot;&gt;&lt;del&gt;CAMEL-1801&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;It does not work as expected as the posted data should be in the &lt;b&gt;body&lt;/b&gt; and not as it does currently stored as a message header with the body as a key and with an empty value!&lt;/p&gt;

&lt;p&gt;For instance sending a file using curl&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;curl -F data=@src/test/data/plain.txt http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:9080/myapp/myservice&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You want Camel to provide the file content in the body and the other as headers. But what you get in the body is&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;------------------------------30cc29f24df6
Content-Disposition: form-data; name=&lt;span class=&quot;code-quote&quot;&gt;&quot;data&quot;&lt;/span&gt;; filename=&lt;span class=&quot;code-quote&quot;&gt;&quot;plain.txt&quot;&lt;/span&gt;
Content-Type: text/plain

Hello World
This is the second line
------------------------------30cc29f24df6--
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</description>
                <environment></environment>
        <key id="12485597">CAMEL-1913</key>
            <summary>camel-jetty - Should support multipart/form posted data in the message body better</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="njiang">Willem Jiang</assignee>
                                    <reporter username="davsclaus">Claus Ibsen</reporter>
                        <labels>
                    </labels>
                <created>Sat, 15 Aug 2009 10:22:51 +0000</created>
                <updated>Sun, 24 Apr 2011 10:00:42 +0000</updated>
                            <resolved>Thu, 18 Mar 2010 13:49:46 +0000</resolved>
                                    <version>2.0-M3</version>
                                    <fixVersion>2.3.0</fixVersion>
                                    <component>camel-http</component>
                    <component>camel-jetty</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12952025" author="davsclaus" created="Sat, 15 Aug 2009 15:14:42 +0000"  >&lt;p&gt;Whether it should be stored in the body directly or as an attachment I really dont know.&lt;/p&gt;</comment>
                            <comment id="12951850" author="davsclaus" created="Sat, 15 Aug 2009 15:17:38 +0000"  >&lt;p&gt;You could for instance upload multiple files in same POST so I wonder what is the correct solution with Camel&lt;/p&gt;

&lt;p&gt;More details at&lt;br/&gt;
&lt;a href=&quot;http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.w3.org/TR/html401/interact/forms.html#h-17.13.4.1&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12952079" author="iamryadh" created="Thu, 10 Sep 2009 10:37:35 +0000"  >&lt;p&gt;While understanding that it should stay as it is, conforming to the spec, I still believe it should be in the body, the next endpoint could be a file, with an implicit converter which will pull the uploaded file from the request&lt;br/&gt;
in the case there are multiple attachments, the same implicit converter would be able to detect this fact, and produce the files.&lt;/p&gt;</comment>
                            <comment id="12954445" author="muellerc" created="Sun, 17 Jan 2010 14:19:30 +0000"  >&lt;p&gt;Any new ideas?&lt;/p&gt;

&lt;p&gt;In my opinion, it&apos;s not possible to put the content of the file in the body, because the user could upload more than one file in one request. The sample from the spec is:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;   Content-Type: multipart/form-data; boundary=AaB03x

   --AaB03x
   Content-Disposition: form-data; name=&lt;span class=&quot;code-quote&quot;&gt;&quot;submit-name&quot;&lt;/span&gt;

   Larry
   --AaB03x
   Content-Disposition: form-data; name=&lt;span class=&quot;code-quote&quot;&gt;&quot;files&quot;&lt;/span&gt;
   Content-Type: multipart/mixed; boundary=BbC04y

   --BbC04y
   Content-Disposition: file; filename=&lt;span class=&quot;code-quote&quot;&gt;&quot;file1.txt&quot;&lt;/span&gt;
   Content-Type: text/plain

   ... contents of file1.txt ...
   --BbC04y
   Content-Disposition: file; filename=&lt;span class=&quot;code-quote&quot;&gt;&quot;file2.gif&quot;&lt;/span&gt;
   Content-Type: image/gif
   Content-Transfer-Encoding: binary

   ...contents of file2.gif...
   --BbC04y--
   --AaB03x--

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;When I try to map all of these information to the message exchange, I came to the following result:&lt;br/&gt;
The submitted form-data could be mapped into the header. We could create an attachment for each uploaded file. The file name is mapped to the name of the attachment. The content type is set as the content type of the attachment (which is an instance of DataHandler). This would be result in the following sample code:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        Message in = exchange.getIn();
        in.setHeader(&lt;span class=&quot;code-quote&quot;&gt;&quot;submit-name&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;Larry&quot;&lt;/span&gt;);
        in.addAttachment(&lt;span class=&quot;code-quote&quot;&gt;&quot;file1.txt&quot;&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; DataHandler(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; TextDataSource(&lt;span class=&quot;code-quote&quot;&gt;&quot;file1.txt&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;text/plain&quot;&lt;/span&gt;, file1Content)));
        in.addAttachment(&lt;span class=&quot;code-quote&quot;&gt;&quot;file2.txt&quot;&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; DataHandler(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ImageDataSource(&lt;span class=&quot;code-quote&quot;&gt;&quot;file2.txt&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;image/gif&quot;&lt;/span&gt;, file2Content)));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I don&apos;t know, if Camel already uses/implements some javax.activation.DataSource classes we should use...&lt;br/&gt;
What do you think?&lt;/p&gt;

&lt;p&gt;Regards,&lt;br/&gt;
Christian&lt;/p&gt;</comment>
                            <comment id="12954463" author="davsclaus" created="Tue, 19 Jan 2010 06:35:15 +0000"  >&lt;p&gt;The Message API already supports attachments.&lt;br/&gt;
See addAttachment, getAttachments etc.&lt;/p&gt;</comment>
                            <comment id="12954462" author="muellerc" created="Tue, 19 Jan 2010 08:32:13 +0000"  >&lt;p&gt;@Claus,&lt;br/&gt;
I know this. My last post was my proposal how we could map the uploaded files into the message. I think the body is not the right place (or my knowledge about the Camel TypeConverter system is to bad). &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Regards,&lt;br/&gt;
Christian&lt;/p&gt;</comment>
                            <comment id="12955435" author="njiang" created="Thu, 18 Mar 2010 13:49:46 +0000"  >&lt;p&gt;By leveraging the Jetty&apos;s MultiPartFilter, it&apos;s easy to implements this feature.&lt;br/&gt;
I also updated the wiki page for this feature.&lt;/p&gt;</comment>
                            <comment id="13024231" author="davsclaus" created="Sun, 24 Apr 2011 10:00:42 +0000"  >&lt;p&gt;Closing all resolved tickets from 2010 or older&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>76698</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 31 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i01lcf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7227</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>