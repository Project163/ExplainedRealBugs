<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 09:43:23 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-3795] java.util.concurrent.RejectedExecutionException using interceptSendToEndpoint</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-3795</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;in some circumstances interceptSendToEndpoint in conjunction with recipientList is running in exception. this seems to be the case when an http endpoint is sent in the recipient list after having processed and ftp in the previous exchange.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12501970">CAMEL-3795</key>
            <summary>java.util.concurrent.RejectedExecutionException using interceptSendToEndpoint</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="crive">Marco Crivellaro</reporter>
                        <labels>
                    </labels>
                <created>Mon, 21 Mar 2011 18:48:36 +0000</created>
                <updated>Tue, 25 Oct 2011 11:36:06 +0000</updated>
                            <resolved>Wed, 30 Mar 2011 16:14:39 +0000</resolved>
                                    <version>2.7.0</version>
                                    <fixVersion>2.7.3</fixVersion>
                    <fixVersion>2.8.0</fixVersion>
                                    <component>camel-core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13009285" author="crive" created="Mon, 21 Mar 2011 18:50:14 +0000"  >&lt;p&gt;JUnit test showing the exception&lt;/p&gt;</comment>
                            <comment id="13011774" author="davsclaus" created="Sun, 27 Mar 2011 10:54:12 +0000"  >&lt;p&gt;Please remember to add link to discussion using nabble&lt;br/&gt;
&lt;a href=&quot;http://camel.465427.n5.nabble.com/java-util-concurrent-RejectedExecutionException-using-interceptSendToEndpoint-td3425179.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://camel.465427.n5.nabble.com/java-util-concurrent-RejectedExecutionException-using-interceptSendToEndpoint-td3425179.html&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13011775" author="davsclaus" created="Sun, 27 Mar 2011 10:56:37 +0000"  >&lt;p&gt;The problem is that the end user is using a custom thread pool where the default strategy is to reject executing tasks, when the thread pool do not have any free threads. And thus you get the rejected exception.&lt;/p&gt;

&lt;p&gt;Not a problem in Camel.&lt;/p&gt;</comment>
                            <comment id="13012388" author="crive" created="Tue, 29 Mar 2011 08:36:42 +0000"  >&lt;p&gt;The unit test uses mock up endpoint which does not show the wrong behaviour. &lt;br/&gt;
The test attached to the ticket does not make use of custom thread pool: &lt;/p&gt;

&lt;p&gt;from(&quot;direct:start&quot;).recipientList(header(InterceptSendToEndpointException.recipientListHeaderName).tokenize(&quot;,&quot;)).to(&quot;mock:end&quot;);&lt;/p&gt;</comment>
                            <comment id="13012568" author="davsclaus" created="Tue, 29 Mar 2011 17:35:08 +0000"  >&lt;p&gt;Can you attach the unit test which fails for you.&lt;br/&gt;
The attached test case works just fine! In fact it doesn&apos;t use any thread pool at all.&lt;/p&gt;</comment>
                            <comment id="13012893" author="crive" created="Wed, 30 Mar 2011 09:28:23 +0000"  >&lt;p&gt;Attaching another unit test showing the exception, the difference with previous one is that it is using real endpoints.&lt;/p&gt;</comment>
                            <comment id="13012974" author="davsclaus" created="Wed, 30 Mar 2011 14:15:04 +0000"  >&lt;p&gt;Okay I found the culprint. The lifecycle of the interceptor was affected by ftp producer as it was a pooled resource and thus its lifecycle is unusual. &lt;/p&gt;</comment>
                            <comment id="13013527" author="davsclaus" created="Wed, 30 Mar 2011 16:14:39 +0000"  >&lt;p&gt;It should be fixed now&lt;/p&gt;</comment>
                            <comment id="13015458" author="crive" created="Mon, 4 Apr 2011 15:17:56 +0000"  >&lt;p&gt;I am still experiencing the same issue with the latest test attached. I am using camel 2.8-snapshot&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12474211" name="InterceptSendToEndpointException.java" size="2221" author="crive" created="Mon, 21 Mar 2011 18:50:14 +0000"/>
                            <attachment id="12474956" name="InterceptSendToEndpointExecutionException.java" size="2418" author="crive" created="Wed, 30 Mar 2011 09:28:23 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>14177</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 34 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i01wxz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9106</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>