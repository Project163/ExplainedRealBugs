<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 09:46:16 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-4401] StreamResequencer poisoned by bad Exchange</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-4401</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;If a StreamResequencer&apos;s configured Expression returns null for an Exchange (e.g., if a header does not exist) and the resequencer&apos;s pipeline is currently empty, the bad Exchange will be added to the pipeline. ResequencerEnginer.insert() succeeds in calling sequence.add() with the bad Exchange, but throws an Exception when calling sequence.successor(). This results in the message ending up at the Error Handler but the bad Exchange still in the Engine&apos;s sequence. Probably insert() should be probably be more transactional.&lt;/p&gt;

&lt;p&gt;After this happens:&lt;br/&gt;
1) Trying to add a further exchange (even a &quot;good&quot; one) results in an Exception when calling sequence.add().&lt;br/&gt;
2) ResequencerEngine.deliverNext() results in an Exception so no further messages will be delievered.&lt;/p&gt;

&lt;p&gt;I will attach a unit test to reproduce when I get a chance.&lt;/p&gt;</description>
                <environment>&lt;p&gt;JDK 1.6.0_20, Linux x86_64&lt;/p&gt;</environment>
        <key id="12520947">CAMEL-4401</key>
            <summary>StreamResequencer poisoned by bad Exchange</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="dgtombs">David Tombs</reporter>
                        <labels>
                    </labels>
                <created>Wed, 31 Aug 2011 17:15:34 +0000</created>
                <updated>Wed, 14 Sep 2011 09:31:30 +0000</updated>
                            <resolved>Tue, 13 Sep 2011 15:43:47 +0000</resolved>
                                    <version>2.7.1</version>
                                    <fixVersion>2.9.0</fixVersion>
                                    <component>camel-core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13094707" author="dgtombs" created="Wed, 31 Aug 2011 17:17:05 +0000"  >&lt;p&gt;A possible kludge-fix could be to compare() every Exchange with itself before adding to the Engine&apos;s sequence. This should weed out un-comparable Exchanges.&lt;/p&gt;</comment>
                            <comment id="13103605" author="davsclaus" created="Tue, 13 Sep 2011 13:02:17 +0000"  >&lt;p&gt;David do you have an unit test reproducing this issue?&lt;/p&gt;</comment>
                            <comment id="13103651" author="davsclaus" created="Tue, 13 Sep 2011 14:19:25 +0000"  >&lt;p&gt;I can reproduce the issue and I am working on a fix.&lt;/p&gt;</comment>
                            <comment id="13103703" author="davsclaus" created="Tue, 13 Sep 2011 15:43:47 +0000"  >&lt;p&gt;Resequencer will now validate the incoming Exchange before enqueing. If invalid an exception is thrown. Added new option ignoreInvalidExchanges to ignore invalid exchanges.&lt;/p&gt;</comment>
                            <comment id="13104129" author="dgtombs" created="Wed, 14 Sep 2011 00:57:56 +0000"  >&lt;p&gt;Thanks for the fix. Are you sure you don&apos;t want to just catch IllegalArugmentException in StreamResequencer.process(), though?&lt;/p&gt;</comment>
                            <comment id="13104381" author="davsclaus" created="Wed, 14 Sep 2011 09:31:30 +0000"  >&lt;p&gt;Thanks David, changed the code accordingly.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>60679</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 11 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i020pj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9716</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>