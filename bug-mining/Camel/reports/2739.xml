<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:02:30 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-7459] parseQuery Drops Char When Last Parameter is RAW with value ending in &apos;)&apos;</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-7459</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;org.apache.camel.util.URISupport&lt;/p&gt;

&lt;p&gt;When processing RAW parameters as part of parseQuery a look ahead to the next char is needed in order to determine the end of the RAW value.  The logic to prevent a &lt;em&gt;StringIndexOutOfBoundsException&lt;/em&gt; drops the last char when evaluating for &lt;em&gt;next&lt;/em&gt; char when the current char (&lt;em&gt;i&lt;/em&gt;) is the second to last char of the string.&lt;/p&gt;

&lt;p&gt;This becomes an issue when the RAW value ends in &apos;)&apos; &lt;/p&gt;

&lt;p&gt;Consider:&lt;br/&gt;
uri = &quot;foo=RAW(ba(r))&quot;&lt;br/&gt;
uri.length() = 14&lt;br/&gt;
i = 12&lt;br/&gt;
uri.charAt(12) = &apos;)&apos;&lt;br/&gt;
uri.charAt(13) = &apos;)&apos;&lt;/p&gt;

&lt;p&gt;(i &amp;lt; uri.legnth() - 2) = 12 &amp;lt; (14 - 2) = 12 &amp;lt; 12 = false&lt;br/&gt;
thus next = &quot;\u0000&quot;&lt;/p&gt;

&lt;p&gt;The RAW value now ends satisfying the requirements and the char at index 13 is never read.  The resulting parameter is &quot;foo=RAW(ba(r)&quot;.&lt;/p&gt;

&lt;p&gt;The logic to prevent the index exception should be &quot;(i &amp;lt;&lt;b&gt;=&lt;/b&gt; uri.legnth() -2)&quot; or &quot;(i &amp;lt; uri.legnth() - &lt;b&gt;1&lt;/b&gt;)&quot;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12716176">CAMEL-7459</key>
            <summary>parseQuery Drops Char When Last Parameter is RAW with value ending in &apos;)&apos;</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="gillmatthewj">Matthew Gill</reporter>
                        <labels>
                    </labels>
                <created>Thu, 22 May 2014 19:36:09 +0000</created>
                <updated>Fri, 23 May 2014 07:00:16 +0000</updated>
                            <resolved>Fri, 23 May 2014 07:00:15 +0000</resolved>
                                    <version>2.11.0</version>
                                    <fixVersion>2.12.4</fixVersion>
                    <fixVersion>2.13.2</fixVersion>
                    <fixVersion>2.14.0</fixVersion>
                                    <component>camel-core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14006933" author="davsclaus" created="Fri, 23 May 2014 07:00:16 +0000"  >&lt;p&gt;Thanks.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10061"><![CDATA[Novice]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>394385</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 26 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1vwm7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>394526</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>