<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:18:23 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-10217] Remove logging implementations from compile scope</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-10217</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;Some components include logging implementations among their dependencies. If it is applicable (eg. if they are not hardcoded), they should be removed.&lt;/p&gt;

&lt;p&gt;A quick script:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; comp in $(ls | grep &lt;span class=&quot;code-quote&quot;&gt;&quot;camel-&quot;&lt;/span&gt; | grep -v &lt;span class=&quot;code-quote&quot;&gt;&quot;.iml&quot;&lt;/span&gt;); &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt;
	cd $comp
	mvn dependency:tree | grep &lt;span class=&quot;code-quote&quot;&gt;&apos;log4j\|logback\|slf4j-simple\|slf4j-jdk14\|slf4j-log4j12&apos;&lt;/span&gt; | grep -v test | xargs -I line echo &lt;span class=&quot;code-quote&quot;&gt;&quot;$(pwd) line&quot;&lt;/span&gt;
	cd ..
done
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Shows the following problems:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;./camel/components/camel-atmos [INFO] |  +- log4j:log4j:jar:1.2.17:compile
./camel/components/camel-gora [INFO] |  +- org.slf4j:slf4j-log4j12:jar:1.7.21:compile
./camel/components/camel-gora [INFO] |  - log4j:log4j:jar:1.2.17:compile
./camel/components/camel-hbase [INFO] |  +- log4j:log4j:jar:1.2.17:compile
./camel/components/camel-jbpm [INFO] +- org.slf4j:slf4j-log4j12:jar:1.7.21:compile
./camel/components/camel-jbpm [INFO] |  - log4j:log4j:jar:1.2.17:compile
./camel/components/camel-jt400 [INFO] +- org.slf4j:slf4j-log4j12:jar:1.7.21:compile
./camel/components/camel-jt400 [INFO] |  - log4j:log4j:jar:1.2.17:compile
./camel/components/camel-krati [INFO] |  - log4j:log4j:jar:1.2.17:compile
./camel/components/camel-openshift [INFO] |  - log4j:log4j:jar:1.2.17:compile
./camel/components/camel-salesforce [INFO] +- log4j:log4j:jar:1.2.17:compile
./camel/components/camel-scr [INFO] +- org.slf4j:slf4j-log4j12:jar:1.7.21:compile
./camel/components/camel-scr [INFO] +- log4j:log4j:jar:1.2.17:compile
./camel/components/camel-spark [INFO] |  +- log4j:log4j:jar:1.2.17:compile
./camel/components/camel-spark [INFO] |  |  +- log4j:apache-log4j-extras:jar:1.2.17:compile
./camel/components/camel-spark-rest [INFO] |  +- org.slf4j:slf4j-simple:jar:1.7.21:compile
./camel/components/camel-spring-boot [INFO] |  |  +- ch.qos.logback:logback-classic:jar:1.1.7:compile
./camel/components/camel-spring-boot [INFO] |  |  |  - ch.qos.logback:logback-core:jar:1.1.7:compile
./camel/components/camel-spring-boot [INFO] |  |  - org.slf4j:log4j-over-slf4j:jar:1.7.21:compile
./camel/components/camel-spring-boot-starter [INFO] |  |  +- ch.qos.logback:logback-classic:jar:1.1.7:compile
./camel/components/camel-spring-boot-starter [INFO] |  |  |  - ch.qos.logback:logback-core:jar:1.1.7:compile
./camel/components/camel-spring-boot-starter [INFO] |  |  - org.slf4j:log4j-over-slf4j:jar:1.7.21:compile
./camel/components/camel-zipkin-starter [INFO] |  |  +- ch.qos.logback:logback-classic:jar:1.1.7:compile
./camel/components/camel-zipkin-starter [INFO] |  |  |  - ch.qos.logback:logback-core:jar:1.1.7:compile
./camel/components/camel-zipkin-starter [INFO] |  |  - org.slf4j:log4j-over-slf4j:jar:1.7.21:compile
./camel/components/camel-zookeeper [INFO] |  +- log4j:log4j:jar:1.2.17:compile
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Spring-boot starters are allowed to have logging implementations. &lt;em&gt;org.slf4j:log4j-over-slf4j&lt;/em&gt; is not an implementation.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12994292">CAMEL-10217</key>
            <summary>Remove logging implementations from compile scope</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="5" iconUrl="https://issues.apache.org/jira/images/icons/priorities/trivial.svg">Trivial</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="nferraro">Nicola Ferraro</assignee>
                                    <reporter username="nferraro">Nicola Ferraro</reporter>
                        <labels>
                    </labels>
                <created>Tue, 2 Aug 2016 14:47:11 +0000</created>
                <updated>Mon, 8 Aug 2016 08:01:15 +0000</updated>
                            <resolved>Mon, 8 Aug 2016 08:01:14 +0000</resolved>
                                                    <fixVersion>2.18.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15405783" author="davsclaus" created="Wed, 3 Aug 2016 11:56:37 +0000"  >&lt;p&gt;Maybe some of the archetypes uses log4j 1.x in their generated sample code. It could be a good idea to upgrade those to use lo4j v2 also&lt;/p&gt;</comment>
                            <comment id="15409321" author="nferraro" created="Fri, 5 Aug 2016 11:00:22 +0000"  >&lt;p&gt;After a bit of analysis, the number of modules with logging issues is higher than expected, as &lt;em&gt;commons-logging&lt;/em&gt; was missing in the script (it is not an implementation, but needs to be bridged to work with slf4j):&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; comp in $(ls | grep &lt;span class=&quot;code-quote&quot;&gt;&quot;camel-&quot;&lt;/span&gt; | grep -v &lt;span class=&quot;code-quote&quot;&gt;&quot;.iml&quot;&lt;/span&gt;); &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt;
	cd $comp
	mvn dependency:tree | grep &lt;span class=&quot;code-quote&quot;&gt;&apos;log4j\|logback\|slf4j-simple\|slf4j-jdk14\|slf4j-log4j12\|commons-logging&apos;&lt;/span&gt; | grep -v test | xargs -I line echo &lt;span class=&quot;code-quote&quot;&gt;&quot;$(pwd) line&quot;&lt;/span&gt;
	cd ..
done
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;A clean solution to bring all modules to sl4j would be:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Exclude all dependencies on logging implementation&lt;/li&gt;
	&lt;li&gt;Include a slf4j legacy binding library (eg. &lt;em&gt;jcl-over-sl4fj&lt;/em&gt;, &lt;em&gt;log4j-over-slf4j&lt;/em&gt;) to replace the removed implementation&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The main problems of the approach:&lt;br/&gt;
1) &lt;br/&gt;
The number of exclusions that need to be put in each pom.xml is huge.&lt;br/&gt;
There are a number of hacks that can be used to prevent this pollution, but all of them have many drawbacks (eg. empty libraries, marking them as provided).&lt;/p&gt;

&lt;p&gt;2)&lt;br/&gt;
Once I put a eg. &lt;em&gt;log4j-over-slf4j&lt;/em&gt; dependency in a pom.xml, people are not free to use &lt;em&gt;slf4j_log4jxx&lt;/em&gt; in their app (application closed to prevent stack overflow). If they want to use log4j (version 1 or 2) they will need to exclude &lt;em&gt;log4j-over-slf4j&lt;/em&gt; when importing the camel module. So this change does not simplify things for end users.&lt;br/&gt;
The only problem-free logging implementation for end-users will be &lt;em&gt;logback&lt;/em&gt;.&lt;/p&gt;


&lt;p&gt;When the target logging system is known a-priori, or a default system is used, as in spring-boot (where the logging system can be changed, but starters are configured to use &lt;em&gt;logback&lt;/em&gt;), logging dependencies can be fixed.&lt;/p&gt;

&lt;p&gt;For this Jira, I&apos;m going to remove logging libraries from modules not using an implementation directly, because bridging libraries in camel modules does not seem to solve problems for the end users. I&apos;ll take also a look at generated sample code for the log4j12 issue.&lt;/p&gt;

&lt;p&gt;For spring-boot, logging issues can be completely solved in (&lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-10222&quot; title=&quot;camel-spring-boot - New starters and BOMs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-10222&quot;&gt;&lt;del&gt;CAMEL-10222&lt;/del&gt;&lt;/a&gt;).&lt;/p&gt;</comment>
                            <comment id="15409352" author="lb" created="Fri, 5 Aug 2016 11:46:47 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davsclaus&quot; class=&quot;user-hover&quot; rel=&quot;davsclaus&quot;&gt;davsclaus&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=nferraro&quot; class=&quot;user-hover&quot; rel=&quot;nferraro&quot;&gt;nferraro&lt;/a&gt; &lt;/p&gt;

&lt;p&gt;I&apos;m having a look on how complex it is to migrate all the test stuffs to log4j2 (&lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-10224&quot; title=&quot;Upgrade log4j to lg4j2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-10224&quot;&gt;&lt;del&gt;CAMEL-10224&lt;/del&gt;&lt;/a&gt;), so far the properties migration seems to work fine.&lt;br/&gt;
I should have a branch ready for review by end of the day beginning next week.&lt;/p&gt;</comment>
                            <comment id="15409426" author="githubbot" created="Fri, 5 Aug 2016 13:13:04 +0000"  >&lt;p&gt;GitHub user nicolaferraro opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/1110&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/1110&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-10217&quot; title=&quot;Remove logging implementations from compile scope&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-10217&quot;&gt;&lt;del&gt;CAMEL-10217&lt;/del&gt;&lt;/a&gt;: Removed logging implementation from compile scope in jbp&#8230;&lt;/p&gt;

&lt;p&gt;    &#8230;m, jt400, scr, spark-rest&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/nicolaferraro/camel&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/nicolaferraro/camel&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-10217&quot; title=&quot;Remove logging implementations from compile scope&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-10217&quot;&gt;&lt;del&gt;CAMEL-10217&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/1110.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/1110.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #1110&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 2d9c0a177708a83756f70a230c8ae405df3f656d&lt;br/&gt;
Author: Nicola Ferraro &amp;lt;ni.ferraro@gmail.com&amp;gt;&lt;br/&gt;
Date:   2016-08-05T13:12:14Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-10217&quot; title=&quot;Remove logging implementations from compile scope&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-10217&quot;&gt;&lt;del&gt;CAMEL-10217&lt;/del&gt;&lt;/a&gt;: Removed logging implementation from compile scope in jbpm, jt400, scr, spark-rest&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15409431" author="nferraro" created="Fri, 5 Aug 2016 13:18:15 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lb&quot; class=&quot;user-hover&quot; rel=&quot;lb&quot;&gt;lb&lt;/a&gt; I fixed the scope only where it was safe to do so. Some dependencies (eg. &lt;em&gt;slf4j-log4j12&lt;/em&gt;) need to be changed in the upgrade to log4j v2.&lt;/p&gt;</comment>
                            <comment id="15410948" author="githubbot" created="Sun, 7 Aug 2016 14:09:11 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/1110&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/1110&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15411447" author="nferraro" created="Mon, 8 Aug 2016 08:01:14 +0000"  >&lt;p&gt;Upgrade to log4j v2 to be handled in &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-10224&quot; title=&quot;Upgrade log4j to lg4j2&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-10224&quot;&gt;&lt;del&gt;CAMEL-10224&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 15 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i31szb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>