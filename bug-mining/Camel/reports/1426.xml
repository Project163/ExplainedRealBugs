<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 09:43:54 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-3531] scala - xpath not working together with choice/when</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-3531</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;When using the Scala DSL, xpath expressions inside when() do not work as expected. As an example:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-none&quot;&gt;     &quot;direct:a&quot; ==&amp;gt; {
     choice {
        when (xpath(&quot;//hello&quot;)) to (&quot;mock:english&quot;)
        when (xpath(&quot;//hallo&quot;)) {
          to (&quot;mock:dutch&quot;)
          to (&quot;mock:german&quot;)
        } 
        otherwise to (&quot;mock:french&quot;)
      }
    }

// Send messages
&quot;direct:a&quot; ! (&quot;&amp;lt;hello/&amp;gt;&quot;, &quot;&amp;lt;hallo/&amp;gt;&quot;, &quot;&amp;lt;hellos/&amp;gt;&quot;)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Here we should receive 1 message in each of the mocks. For whatever reason, all 3 messages go to mock:english. Similar routes work as expected with the Java DSL. &lt;/p&gt;</description>
                <environment>&lt;p&gt;Ubuntu Linux 10.04, java 1.6&lt;/p&gt;</environment>
        <key id="12495334">CAMEL-3531</key>
            <summary>scala - xpath not working together with choice/when</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="cpmcdaniel">Craig McDaniel</reporter>
                        <labels>
                    </labels>
                <created>Wed, 12 Jan 2011 05:17:11 +0000</created>
                <updated>Tue, 25 Oct 2011 11:35:19 +0000</updated>
                            <resolved>Sun, 24 Apr 2011 17:00:43 +0000</resolved>
                                    <version>2.5.0</version>
                                    <fixVersion>2.7.3</fixVersion>
                    <fixVersion>2.8.0</fixVersion>
                                    <component>camel-scala</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12980563" author="cpmcdaniel" created="Wed, 12 Jan 2011 05:18:44 +0000"  >&lt;p&gt;Here is the unit test that exercises this bug. &lt;/p&gt;</comment>
                            <comment id="12981131" author="cpmcdaniel" created="Thu, 13 Jan 2011 04:36:45 +0000"  >&lt;p&gt;From what I can tell so far, the same method is being used for both the splitter and when/filter. The first message hits the //hello XPath expression and returns a NodeList of size 1, the message goes to mock:english. The second and third messages hit the //hello XPath and return a NodeList of size 0. I&apos;m guessing since this is not a Boolean, it is assuming a non-null result is true. I&apos;m not sure yet how to patch this. &lt;/p&gt;</comment>
                            <comment id="12982318" author="davsclaus" created="Sun, 16 Jan 2011 15:31:15 +0000"  >&lt;p&gt;Thanks Craig for looking into this.&lt;/p&gt;

&lt;p&gt;We could use some help with the camel-scala component. So if you got the time and energy. For example look for EIPs and options which hasn&apos;t been ported to the scala DSL yet.&lt;/p&gt;</comment>
                            <comment id="13024644" author="davsclaus" created="Sun, 24 Apr 2011 16:00:04 +0000"  >&lt;p&gt;Yeah I have reproduced the issue as well. The problem is that the xpath is evaluated as an expression and not as a predicate in the filter EIP in Scala DSL.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12468109" name="XPathContentBasedRouterTest.scala" size="1736" author="cpmcdaniel" created="Wed, 12 Jan 2011 05:18:44 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>14125</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 31 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i01vbb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>8842</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>