<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 09:57:48 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-6404] cCXF route proxy cannot return Fault message to client when Dataformat is CXF_MESSAGE</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-6404</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;use CXF component with CXF_MESSAGE dataFormat to call any service, and the response of this service is a fault, then you can see this exception.&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt; 
Exception in thread &quot;default-workqueue-1&quot; java.lang.NullPointerException
	at org.apache.camel.component.cxf.DefaultCxfBinding.getContentFromCxf(DefaultCxfBinding.java:642)
	at org.apache.camel.component.cxf.DefaultCxfBinding.populateExchangeFromCxfResponse(DefaultCxfBinding.java:151)
	at org.apache.camel.component.cxf.CxfClientCallback.handleException(CxfClientCallback.java:81)
	at org.apache.cxf.interceptor.ClientOutFaultObserver.onMessage(ClientOutFaultObserver.java:59)
	at org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream$1.run(HTTPConduit.java:1132)
	at org.apache.cxf.workqueue.AutomaticWorkQueueImpl$3.run(AutomaticWorkQueueImpl.java:428)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at org.apache.cxf.workqueue.AutomaticWorkQueueImpl$AWQThreadFactory$1.run(AutomaticWorkQueueImpl.java:353)
	at java.lang.Thread.run(Thread.java:662)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt; </description>
                <environment></environment>
        <key id="12649847">CAMEL-6404</key>
            <summary>cCXF route proxy cannot return Fault message to client when Dataformat is CXF_MESSAGE</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="njiang">Willem Jiang</assignee>
                                    <reporter username="mfshen">Meifang Shen</reporter>
                        <labels>
                    </labels>
                <created>Wed, 29 May 2013 05:55:37 +0000</created>
                <updated>Thu, 10 Oct 2013 13:19:59 +0000</updated>
                            <resolved>Fri, 31 May 2013 15:18:49 +0000</resolved>
                                                    <fixVersion>2.10.5</fixVersion>
                    <fixVersion>2.11.1</fixVersion>
                    <fixVersion>2.12.0</fixVersion>
                                    <component>camel-cxf</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="13671191" author="gangliu" created="Fri, 31 May 2013 06:07:56 +0000"  >&lt;p&gt;Attached an example&lt;/p&gt;</comment>
                            <comment id="13671205" author="davsclaus" created="Fri, 31 May 2013 06:39:39 +0000"  >&lt;p&gt;What version of Camel and CXF are you using?&lt;/p&gt;</comment>
                            <comment id="13671209" author="gangliu" created="Fri, 31 May 2013 06:57:10 +0000"  >&lt;p&gt;I&apos;m using Camel-2.10.4, &lt;a href=&quot;https://issues.apache.org/jira/browse/CXF-2&quot; title=&quot;Complete JAX-WS frontend&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CXF-2&quot;&gt;&lt;del&gt;CXF-2&lt;/del&gt;&lt;/a&gt;.7.5, see the attached example&lt;/p&gt;</comment>
                            <comment id="13671509" author="njiang" created="Fri, 31 May 2013 14:21:20 +0000"  >&lt;p&gt;I just checked the code, the NPE is caused by the DefaultCxfBinding try to find the processed object from CXF message. As the CXF_MESSAGE consume the input stream and throw out the exception, the DefaultCxfBing get the NPE. &lt;br/&gt;
This issue can be fixed by letting DefaultCxfBinding ignore the CXF message content when there is nothing. camel-cxf will take care of the fault message (which is turned into an exception) then.&lt;/p&gt;</comment>
                            <comment id="13671562" author="njiang" created="Fri, 31 May 2013 15:18:49 +0000"  >&lt;p&gt;Applied the patch into master, camel-2.11.x and camel-2.10.x branches.&lt;/p&gt;</comment>
                            <comment id="13671581" author="gangliu" created="Fri, 31 May 2013 15:36:42 +0000"  >&lt;p&gt;But by this way, the answer returns null, right? then user can give the expect fault response message?&lt;br/&gt;
thanks&lt;/p&gt;

&lt;p&gt;Now, I resolved this problem by extracting &lt;b&gt;W3CDOMStreamWriter.class&lt;/b&gt; content, and then wrap it into a &lt;b&gt;List&lt;/b&gt; object.&lt;/p&gt;</comment>
                            <comment id="13671586" author="njiang" created="Fri, 31 May 2013 15:42:26 +0000"  >&lt;p&gt;The exception will be marshalled and sent to client, you don&apos;t need to wrap the W3CDOMStreamWriter.class.&lt;/p&gt;</comment>
                            <comment id="13672488" author="gangliu" created="Sun, 2 Jun 2013 12:43:42 +0000"  >&lt;p&gt;Hi Willem: &lt;br/&gt;
But this only happens after the fix, right? for now, I always get the NullPointerException, So I have to find a workaround to make it works.&lt;/p&gt;

&lt;p&gt;And BTW, when I want to call a WebService by creating request from scratch, for example, timer -&amp;gt; setBody -&amp;gt; CXF (&lt;b&gt;with RAW dataFormat&lt;/b&gt;), I found if the body type isn&apos;t &lt;b&gt;javax.xml.tranform.Source.class&lt;/b&gt;, then the body will always be empty, no matter what I&apos;ve set in setBody component. I think the convert should be done inside Camel instead of client. Could you also have a check? &lt;/p&gt;

&lt;p&gt;Thanks alot.&lt;/p&gt;</comment>
                            <comment id="13672768" author="njiang" created="Mon, 3 Jun 2013 02:44:57 +0000"  >&lt;p&gt;I think you are talking about other issue, we&apos;d better start a new thread for it.&lt;br/&gt;
When you using the RAW dataFormat, you need to cache the input stream before you read it.&lt;br/&gt;
If you don&apos;t cache it, you cannot read the input stream again if you already consumed it.&lt;/p&gt;</comment>
                            <comment id="13672790" author="gangliu" created="Mon, 3 Jun 2013 03:40:16 +0000"  >&lt;p&gt;OK, thanks. &lt;/p&gt;</comment>
                            <comment id="13672964" author="ay" created="Mon, 3 Jun 2013 10:02:33 +0000"  >&lt;p&gt;Hi Willem,&lt;br/&gt;
I am not sure about this handling and wanted to ask you or Dan about it.&lt;/p&gt;

&lt;p&gt;Instead of trying to get the List object and return its content, could we use SOAPMessage directly in this case?&lt;br/&gt;
That means,&lt;/p&gt;

&lt;p&gt;+import javax.xml.soap.SOAPMessage;&lt;br/&gt;
...&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;answer = message.getContent(List.class).get(0);&lt;br/&gt;
+                answer = message.getContent(SOAPMessage.class);&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;regards, aki&lt;/p&gt;</comment>
                            <comment id="13673179" author="njiang" created="Mon, 3 Jun 2013 14:54:04 +0000"  >&lt;p&gt;Hi Aki,&lt;/p&gt;

&lt;p&gt;I just did a quick test on your suggestion, it look like the below code is much like each other&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;answer = message.getContent(List.class).get(0);
answer = message.getContent(SOAPMessage.class);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;But if the camel-cxf producer get an exception (fault message), we still cannot get the SOAPMessage from the cxf message.&lt;/p&gt;

&lt;p&gt;Regards,&lt;/p&gt;

&lt;p&gt;Willem&lt;/p&gt;</comment>
                            <comment id="13673906" author="gangliu" created="Tue, 4 Jun 2013 01:20:38 +0000"  >&lt;p&gt;Now, I&apos;m using message.getContent(W3CDOMStreamWriter.class) for workaround in fault case&lt;/p&gt;</comment>
                            <comment id="13673932" author="njiang" created="Tue, 4 Jun 2013 01:46:59 +0000"  >&lt;p&gt;Hi liugang,&lt;/p&gt;

&lt;p&gt;Can you verify my fix by running the test case with the latest Camel 2.12-SNAPSHOT?&lt;br/&gt;
I did the test last weekend, it works &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Willem&lt;/p&gt;</comment>
                            <comment id="13674091" author="gangliu" created="Tue, 4 Jun 2013 05:50:52 +0000"  >&lt;p&gt;sure, The Maven Repository is &lt;a href=&quot;https://repository.apache.org/content/repositories/snapshots&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/repositories/snapshots&lt;/a&gt; , right?&lt;/p&gt;</comment>
                            <comment id="13674128" author="njiang" created="Tue, 4 Jun 2013 07:15:30 +0000"  >&lt;p&gt;yes, it is.&lt;/p&gt;</comment>
                            <comment id="13674174" author="gangliu" created="Tue, 4 Jun 2013 08:39:18 +0000"  >&lt;p&gt;OK, I just gave a try on 2.12.SNAPSHOT version. the same route which doen&apos;t work on 2.10.4, works fine on this snapshot version.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12641139">CAMEL-6243</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12585557" name="CXFFaultExample.zip" size="36359" author="gangliu" created="Fri, 31 May 2013 06:07:56 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>330174</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 25 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1kyo7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>330508</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>