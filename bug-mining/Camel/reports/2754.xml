<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:02:41 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-7476] cxfrs throwExceptionOnFailure option not working</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-7476</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;(1) The cxfrs option throwExceptionOnFailure=true does not suppress exceptions from being thrown when an invoked REST service returns a http status &amp;gt; 207.  i.e. the following does not work:&lt;/p&gt;

&lt;p&gt;...&lt;br/&gt;
.to(&quot;cxfrs:bean:rsClient?throwExceptionOnFailure=false&quot;)&lt;br/&gt;
....&lt;/p&gt;

&lt;p&gt;(2) The cxfrs throwExceptionOnFailure option should default to false; to make it easier to process status codes in the route.&lt;/p&gt;

&lt;p&gt;When invoking REST services, the logic is currently complicated by the fact that common status&apos; need to be processed in exception handlers. i,e (404 not found, 412 precondition failed).  It would be more useful to filter on statuses with a main route.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12718102">CAMEL-7476</key>
            <summary>cxfrs throwExceptionOnFailure option not working</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="7">Later</resolution>
                                        <assignee username="njiang">Willem Jiang</assignee>
                                    <reporter username="techbird">Gareth Bird</reporter>
                        <labels>
                    </labels>
                <created>Tue, 3 Jun 2014 09:25:14 +0000</created>
                <updated>Tue, 28 Feb 2017 14:38:44 +0000</updated>
                            <resolved>Tue, 28 Feb 2017 14:38:44 +0000</resolved>
                                    <version>2.13.0</version>
                    <version>2.13.1</version>
                                                    <component>camel-cxf</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14017818" author="sergey_beryozkin" created="Wed, 4 Jun 2014 16:20:46 +0000"  >&lt;p&gt;Regarding 2), IMHO we should keep the existing default (&quot;true&quot;) as is to prevent the existing code out there from breaking, possibly default to &apos;false&apos; later on...&lt;/p&gt;</comment>
                            <comment id="14018538" author="njiang" created="Thu, 5 Jun 2014 06:52:49 +0000"  >&lt;p&gt;I think we need more information about the description 1. &lt;br/&gt;
If the option throwExceptionOnFailure set to be false, camel doesn&apos;t throw an exception if the response http status is &amp;gt; 207. &lt;br/&gt;
I don&apos;t know what&apos;s wrong the below code?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        &lt;span class=&quot;code-comment&quot;&gt;//Throw exception on a response &amp;gt; 207
&lt;/span&gt;        &lt;span class=&quot;code-comment&quot;&gt;//http://en.wikipedia.org/wiki/List_of_HTTP_status_codes
&lt;/span&gt;        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (throwException) {
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (response &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; Response) {
                &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt; respCode = ((Response) response).getStatus();
                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (respCode &amp;gt; 207) {
                    &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; populateCxfRsProducerException(exchange, (Response) response, respCode);
                }
            }
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;For 2) question, I agree with Sergey. &lt;/p&gt;</comment>
                            <comment id="14018566" author="techbird" created="Thu, 5 Jun 2014 07:56:19 +0000"  >&lt;p&gt;Hi Willem - firstly can I just say simply thank you for your commitment and energy you put into everything you do (I&apos;ve been reading your work online for years).  You and Sergey are exemplary; I feel  rather small in comparison. Amazing abilities.  I&apos;m a huge huge fan.  Thank you for everything you do for the community.&lt;/p&gt;

&lt;p&gt;Secondly forgive me, if this problem turns out to be a user (looser!) error.  From using the cxfrs option throwExceptionOnFailure=false in an cxfrs endpoint, I&apos;ve been unable to to set throwException to false.  I think it stems down to setThrowExceptionOnFailure(boolean throwExceptionOnFailure) in CxfRsEndpoint.java; I don&apos;t think the code is called - well not from my route.&lt;/p&gt;

&lt;p&gt;As quoted the code looks good; but is it possible to set throwException to false?&lt;/p&gt;

&lt;p&gt;&amp;#8212;&lt;br/&gt;
Can I sneak in a quick off topic question:- Surgery hinted that there might a new version of cxfrs - would this cover jaxrs 2.0 (jsr339)?&lt;/p&gt;</comment>
                            <comment id="14018591" author="sergey_beryozkin" created="Thu, 5 Jun 2014 08:48:00 +0000"  >&lt;p&gt;Hi&lt;br/&gt;
&amp;gt; You and Sergey are exemplary; I feel rather small in comparison&lt;br/&gt;
I feel small too &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;, I haven&apos;t contributed much to Camel yet.&lt;/p&gt;

&lt;p&gt;Re your other question: CXF 2.7.x supports most of JAX-RS 2.0 so CXFRS depending on CXF 2.7.x can utilize most of 2.0 features. CXFRS which will depend on CXF 3.0.0 will be fully 2.0 aware.&lt;/p&gt;

&lt;p&gt;Sergey&lt;/p&gt;</comment>
                            <comment id="14040617" author="techbird" created="Mon, 23 Jun 2014 10:58:48 +0000"  >&lt;p&gt;Thank you for taking the time Willem for writing the test case to prove that throwExceptionOnFailure=false suppresses exceptions.&lt;/p&gt;

&lt;p&gt;I still do have exceptions being raised in the route. &lt;/p&gt;

&lt;p&gt;I&apos;ve been looking at my code, your code, and the cxfrs source - what I am now thinking is that the exception may be being raised on this line in (CxfRsProducer.java):&lt;/p&gt;

&lt;p&gt;       // invoke the client&lt;br/&gt;
        Object response = null;&lt;br/&gt;
        if (responseClass == null || Response.class.equals(responseClass)) &lt;/p&gt;
{
            response = client.invoke(httpMethod, body);
        }
&lt;p&gt; else { ...&lt;/p&gt;

&lt;p&gt;The exception type is javax.ws.rs.ClientErrorException, so it may be being raised by CXF during invoke.  The REST service being called is returning a status of 412 (already exists).  &lt;/p&gt;

&lt;p&gt;For reference - this is how I am calling the service in the route:&lt;/p&gt;

&lt;p&gt;  .to(&quot;cxfrs://&lt;a href=&quot;http://www.example.com:8080/opendj-rest2ldap-servlet-2.6.0-servlet/?httpClientAPI=true&amp;amp;throwExceptionOnFailure=false&amp;amp;providers=#jaxproviders&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.example.com:8080/opendj-rest2ldap-servlet-2.6.0-servlet/?httpClientAPI=true&amp;amp;throwExceptionOnFailure=false&amp;amp;providers=#jaxproviders&lt;/a&gt;&quot;)&lt;/p&gt;

&lt;p&gt;[ As an aside I am invoking OpenDJ - LDAP REST service - to create a user ]&lt;/p&gt;

&lt;p&gt;If response status 4xx, CXF will wrap response in javax.ws.rs.ClientErrorException and throws out;&lt;/p&gt;

&lt;p&gt;So to re-cap I think that CXF is raising the exception - should these type of exception  be caught by and suppressed in the method invokeHttpClient?&lt;/p&gt;





</comment>
                            <comment id="14040628" author="sergey_beryozkin" created="Mon, 23 Jun 2014 11:09:00 +0000"  >&lt;p&gt;Hi, CXF itself won&apos;t throw the exception if response class is Response.&lt;br/&gt;
WebClient has the following pseudo-code: &lt;/p&gt;

&lt;p&gt;&quot;if (r.getStatus() &amp;gt;= 300 &amp;amp;&amp;amp; responseClass != Response.class) =&amp;gt; throw the exception...&quot;&lt;/p&gt;

&lt;p&gt;So I wonder do we have responseClass set to something else in the route ?&lt;/p&gt;

&lt;p&gt;Cheers, Sergey&lt;/p&gt;

</comment>
                            <comment id="14040649" author="techbird" created="Mon, 23 Jun 2014 11:37:09 +0000"  >&lt;p&gt;Yes  Sergey...&lt;/p&gt;

&lt;p&gt;.setHeader(CxfConstants.CAMEL_CXF_RS_RESPONSE_CLASS, constant(java.util.Map.class))&lt;/p&gt;

&lt;p&gt;This allows CXF to unmarhsall (using Jackson) the JSON payload to a map.&lt;/p&gt;

&lt;p&gt;Is there another way I should be doing this?&lt;/p&gt;</comment>
                            <comment id="14040664" author="sergey_beryozkin" created="Mon, 23 Jun 2014 12:04:22 +0000"  >&lt;p&gt;Do not let CXF do the unmarshalling,&lt;/p&gt;

&lt;p&gt;You can do response.readEntity(Map.class) later on on the received Response instance.&lt;/p&gt;

&lt;p&gt;There&apos;s another JIRA pending that would make it possible to integrate CXF Responses with Camel-level unmarshallers, you can do it right now too by extracting Response.getEntity() which will be InputStream before Camel unmarshaller is used.&lt;/p&gt;

&lt;p&gt;Cheers, Sergey&lt;/p&gt;</comment>
                            <comment id="14041929" author="techbird" created="Tue, 24 Jun 2014 09:54:40 +0000"  >&lt;p&gt;Understood Sergey - you&apos;ve saved me a lot of time. I&apos;ll recode my example and let Camel unmarshall.&lt;/p&gt;

&lt;p&gt;I&apos;ve always had a choice which way I architect the system I am shaping.  Should I use CXFRS or CXF/JAXRS as an endpoint for REST services.  If I use CXF directly I can use CAMEL for mediation and call out to routes by proxy (DI).   If I use CXFRS - I can keep both the endpoint/mediation logic in Camel.  Too much choice &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Thanks for your assistance (again), Gareth&lt;/p&gt;</comment>
                            <comment id="14043450" author="sergey_beryozkin" created="Wed, 25 Jun 2014 13:41:35 +0000"  >&lt;p&gt;Hi Gareth, &lt;/p&gt;

&lt;p&gt;Can you please let us know if you can have throwExceptionOnfailure=false having an effect when you do not ask CXFRS to unmarshall to Map ?&lt;br/&gt;
Basically, JAX-RS clients are not expected to throw the exceptions if Response only is returned.&lt;br/&gt;
So if you have a code that unmarshalls Response entities later and also have throwExceptionOnfailure=false then indeed CXFRS should not throw the exceptions with HTTP statues &amp;gt;= 300&lt;/p&gt;

&lt;p&gt;Thanks, Sergey&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>396304</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 21 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1w8av:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>396426</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>