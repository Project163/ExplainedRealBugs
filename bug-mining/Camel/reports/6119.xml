<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:53:33 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-17948] Race condition in MockEndpoint with PER_CLASS tests</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-17948</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;While working on &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-17945&quot; title=&quot;Fix the unstable test HazelcastSedaTransferExchangeTest&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-17945&quot;&gt;&lt;del&gt;CAMEL-17945&lt;/del&gt;&lt;/a&gt;, I realized that the tests with the scope &lt;tt&gt;PER_CLASS&lt;/tt&gt;&#160;leveraging the &lt;tt&gt;MockEndpoint&lt;/tt&gt; to define their assertions can fail randomly because of a race condition issue. Indeed, with the current code, a message of a previous test method can potentially call the method &lt;tt&gt;countDown&lt;/tt&gt; on the latch of the following test method causing unexpected behavior.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13439180">CAMEL-17948</key>
            <summary>Race condition in MockEndpoint with PER_CLASS tests</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="essobedo">Nicolas Filotto</assignee>
                                    <reporter username="essobedo">Nicolas Filotto</reporter>
                        <labels>
                    </labels>
                <created>Tue, 12 Apr 2022 12:35:19 +0000</created>
                <updated>Thu, 14 Apr 2022 09:39:55 +0000</updated>
                            <resolved>Thu, 14 Apr 2022 09:39:55 +0000</resolved>
                                    <version>3.16.0</version>
                                    <fixVersion>3.17.0</fixVersion>
                                    <component>camel-mock</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17521128" author="essobedo" created="Tue, 12 Apr 2022 12:53:21 +0000"  >&lt;p&gt;The related PR &lt;a href=&quot;https://github.com/apache/camel/pull/7420&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/7420&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17521232" author="davsclaus" created="Tue, 12 Apr 2022 16:15:29 +0000"  >&lt;p&gt;This test in camel-core ThrottlingExceptionRoutePolicyTest is now failing. It may be that the test source code can be updated after this PR, or that its a fringe error. Its something about expecting the mock to be slower.&lt;/p&gt;</comment>
                            <comment id="17521241" author="essobedo" created="Tue, 12 Apr 2022 16:48:20 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davsclaus&quot; class=&quot;user-hover&quot; rel=&quot;davsclaus&quot;&gt;davsclaus&lt;/a&gt; Are there other failing tests? Did you create a ticket for that? I will have a look to it&lt;/p&gt;</comment>
                            <comment id="17521242" author="davsclaus" created="Tue, 12 Apr 2022 16:50:46 +0000"  >&lt;p&gt;No its the only test failing. No ticket created.&lt;/p&gt;</comment>
                            <comment id="17521538" author="essobedo" created="Wed, 13 Apr 2022 08:25:22 +0000"  >&lt;p&gt;The PR of a second fix that limits the impact &lt;a href=&quot;https://github.com/apache/camel/pull/7430&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/7430&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17521780" author="davsclaus" created="Wed, 13 Apr 2022 15:36:51 +0000"  >&lt;p&gt;False alarm, its fast again&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Camel :: Core ...................................... SUCCESS &lt;span class=&quot;error&quot;&gt;&amp;#91;03:48 min&amp;#93;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="17522161" author="essobedo" created="Thu, 14 Apr 2022 08:35:44 +0000"  >&lt;p&gt;One test is failing due to this change which is &lt;tt&gt;org.apache.camel.component.ahc.ws.WsProducerConsumerTest.testRestartServer&lt;/tt&gt; more details  here &lt;a href=&quot;https://ci-builds.apache.org/job/Camel/job/Apache%20Camel/job/main/247/testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://ci-builds.apache.org/job/Camel/job/Apache%20Camel/job/main/247/testReport/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17522164" author="essobedo" created="Thu, 14 Apr 2022 08:43:03 +0000"  >&lt;p&gt;The fix for the regression &lt;a href=&quot;https://github.com/apache/camel/pull/7448&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/7448&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13439341">CAMEL-17955</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310040">
                    <name>Required</name>
                                                                <inwardlinks description="is required by">
                                        <issuelink>
            <issuekey id="13439134">CAMEL-17945</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 30 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z11e0g:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310080" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Regression</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10091"><![CDATA[Regression]]></customfieldvalue>
    <customfieldvalue key="10092"><![CDATA[Unit Test Broken]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>