<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:16:25 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-9805] camel-sql - body not copied from in to out when useing outputHeader and outputType=SelectOne when sql doesn&apos;t return a result</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-9805</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;When using the options outputHeader and outputType=SelectOne the body of the Exchange is not copied from in to out when the select returns no data..&lt;/p&gt;

&lt;p&gt;Probably root is line 175-185 of SqlProducer.java that is missing an else for the above mentioned case.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (data != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) { &lt;span class=&quot;code-comment&quot;&gt;// &amp;lt;--- Missing the &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt;
&lt;/span&gt;&lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; noop=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; we still want to enrich with the row count header
&lt;/span&gt;  &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (getEndpoint().isNoop()) {
    exchange.getOut().setBody(exchange.getIn().getBody());
  } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (getEndpoint().getOutputHeader() != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
    exchange.getOut().setBody(exchange.getIn().getBody());
    exchange.getOut().setHeader(getEndpoint().getOutputHeader(), data);
  } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
    exchange.getOut().setBody(data); 
  }
  exchange.getOut().setHeader(SqlConstants.SQL_ROW_COUNT, 1);
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;following could be added (untested)&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; { &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; data == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
&lt;/span&gt;&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (getEndpoint().isNoop()) {
                                        exchange.getOut().setBody(exchange.getIn().getBody());
                                    } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (getEndpoint().getOutputHeader() != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
                                        exchange.getOut().setBody(exchange.getIn().getBody());
                                    }
 exchange.getOut().setHeader(SqlConstants.SQL_ROW_COUNT, 0);
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</description>
                <environment></environment>
        <key id="12955685">CAMEL-9805</key>
            <summary>camel-sql - body not copied from in to out when useing outputHeader and outputType=SelectOne when sql doesn&apos;t return a result</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="acosentino">Andrea Cosentino</assignee>
                                    <reporter username="Thomas.Bender@flatironssolutions.com">Thomas Bender</reporter>
                        <labels>
                    </labels>
                <created>Mon, 4 Apr 2016 06:24:11 +0000</created>
                <updated>Thu, 28 Apr 2016 08:15:57 +0000</updated>
                            <resolved>Thu, 28 Apr 2016 08:15:57 +0000</resolved>
                                    <version>2.17.0</version>
                                    <fixVersion>2.16.4</fixVersion>
                    <fixVersion>2.17.1</fixVersion>
                    <fixVersion>2.18.0</fixVersion>
                                    <component>camel-sql</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15223715" author="thomas.bender@flatironssolutions.com" created="Mon, 4 Apr 2016 06:26:01 +0000"  >&lt;p&gt;Attached a testcase.&lt;/p&gt;</comment>
                            <comment id="15261651" author="davsclaus" created="Thu, 28 Apr 2016 07:12:46 +0000"  >&lt;p&gt;Andrea do you have time to work on this today so we can get this fixed in the upcoming 2.17.1 release?&lt;/p&gt;</comment>
                            <comment id="15261653" author="ancosen" created="Thu, 28 Apr 2016 07:14:33 +0000"  >&lt;p&gt;Yes, sorry I forget about this issue.&lt;/p&gt;</comment>
                            <comment id="15261729" author="ancosen" created="Thu, 28 Apr 2016 08:15:57 +0000"  >&lt;p&gt;Resolved.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Thomas.Bender%40flatironssolutions.com&quot; class=&quot;user-hover&quot; rel=&quot;Thomas.Bender@flatironssolutions.com&quot;&gt;Thomas.Bender@flatironssolutions.com&lt;/a&gt;, sorry for the delay. Thanks for spotting this and for the test case too.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12796779" name="CamelSqlComponentTest.java" size="2333" author="Thomas.Bender@flatironssolutions.com" created="Mon, 4 Apr 2016 06:26:01 +0000"/>
                            <attachment id="12796780" name="db-camel-data.sql" size="56" author="Thomas.Bender@flatironssolutions.com" created="Mon, 4 Apr 2016 06:26:01 +0000"/>
                            <attachment id="12796781" name="db-camel-schema.sql" size="82" author="Thomas.Bender@flatironssolutions.com" created="Mon, 4 Apr 2016 06:26:01 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 29 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2vkzb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>