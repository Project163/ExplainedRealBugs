<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 11:06:30 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-20890] Use Step ID&apos;s in routeTemplate</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-20890</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;I like to use steps in my routeTemplates. This works, however when I want to specify the ID I cannot use template parameter:&lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;routeTemplates id=&lt;span class=&quot;code-quote&quot;&gt;&quot;camel&quot;&lt;/span&gt; xmlns=&lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//camel.apache.org/schema/spring&quot;&lt;/span&gt;&amp;gt;
&lt;/span&gt;    &amp;lt;!-- create a route template with the given name --&amp;gt;
    &amp;lt;routeTemplate id=&lt;span class=&quot;code-quote&quot;&gt;&quot;myTemplate&quot;&lt;/span&gt;&amp;gt;
        &amp;lt;!-- here we define the required input parameters (can have &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; values) --&amp;gt;
        &amp;lt;templateParameter name=&lt;span class=&quot;code-quote&quot;&gt;&quot;name&quot;&lt;/span&gt;/&amp;gt;
        &amp;lt;templateParameter name=&lt;span class=&quot;code-quote&quot;&gt;&quot;greeting&quot;&lt;/span&gt;/&amp;gt;
        &amp;lt;templateParameter name=&lt;span class=&quot;code-quote&quot;&gt;&quot;myPeriod&quot;&lt;/span&gt; defaultValue=&lt;span class=&quot;code-quote&quot;&gt;&quot;3s&quot;&lt;/span&gt;/&amp;gt;
        &amp;lt;route&amp;gt;
            &amp;lt;from uri=&lt;span class=&quot;code-quote&quot;&gt;&quot;timer:{{name}}?period={{myPeriod}}&quot;&lt;/span&gt;/&amp;gt;
            &amp;lt;step id=&lt;span class=&quot;code-quote&quot;&gt;&quot;{{name}}&quot;&lt;/span&gt;&amp;gt;
                &amp;lt;setBody&amp;gt;
                    &amp;lt;simple&amp;gt;{{greeting}} {{name}}&amp;lt;/simple&amp;gt;
                &amp;lt;/setBody&amp;gt;
                &amp;lt;log message=&lt;span class=&quot;code-quote&quot;&gt;&quot;${body}&quot;&lt;/span&gt;/&amp;gt;
            &amp;lt;/step&amp;gt;
        &amp;lt;/route&amp;gt;
    &amp;lt;/routeTemplate&amp;gt;
&amp;lt;/routeTemplates&amp;gt; &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;When I create 2 routes with the above template I get the following error:&lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java.lang.reflect.InvocationTargetException
&#160; &#160; at jdk.internal.reflect.DirectMethodHandleAccessor.invoke (DirectMethodHandleAccessor.java:118)
&#160; &#160; at java.lang.reflect.Method.invoke (Method.java:580)
&#160; &#160; at org.apache.camel.maven.RunMojo$1.run (RunMojo.java:402)
&#160; &#160; at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run (&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:1583)
Caused by: org.apache.camel.FailedToCreateRouteFromTemplateException: Failed to create route deux from template myTemplate because of duplicate id detected: {{name}}. Please correct ids to be unique among all your routes.
&#160; &#160; at org.apache.camel.impl.DefaultModel.addRouteFromTemplate (DefaultModel.java:518)
&#160; &#160; at org.apache.camel.impl.DefaultModel.addRouteFromTemplatedRoute (DefaultModel.java:566)
&#160; &#160; at org.apache.camel.impl.DefaultCamelContext.addRouteFromTemplatedRoute (DefaultCamelContext.java:384)
&#160; &#160; at org.apache.camel.model.Model.addRouteFromTemplatedRoutes (Model.java:275)
&#160; &#160; at org.apache.camel.builder.RouteBuilder.populateTemplatedRoutes (RouteBuilder.java:822)
&#160; &#160; at org.apache.camel.builder.RouteBuilder.addTemplatedRoutesToCamelContext (RouteBuilder.java:678)
&#160; &#160; at org.apache.camel.impl.engine.AbstractCamelContext.addTemplatedRoutes (AbstractCamelContext.java:993)
&#160; &#160; at org.apache.camel.main.RoutesConfigurer.addDiscoveredRoutes (RoutesConfigurer.java:259)
&#160; &#160; at org.apache.camel.main.RoutesConfigurer.configureRoutes (RoutesConfigurer.java:236)
&#160; &#160; at org.apache.camel.main.BaseMainSupport.configureRoutes (BaseMainSupport.java:613)
&#160; &#160; at org.apache.camel.main.BaseMainSupport.postProcessCamelContext (BaseMainSupport.java:693)
&#160; &#160; at org.apache.camel.main.MainSupport.initCamelContext (MainSupport.java:339)
&#160; &#160; at org.apache.camel.main.Main.doInit (Main.java:133)
&#160; &#160; at org.apache.camel.support.service.BaseService.init (BaseService.java:78)
&#160; &#160; at org.apache.camel.main.MainSupport.run (MainSupport.java:84)
&#160; &#160; at org.apache.camel.main.MainCommandLineSupport.run (MainCommandLineSupport.java:237)
&#160; &#160; at org.apache.camel.example.MyApplication.main (MyApplication.java:41)
&#160; &#160; at jdk.internal.reflect.DirectMethodHandleAccessor.invoke (DirectMethodHandleAccessor.java:103)
&#160; &#160; at java.lang.reflect.Method.invoke (Method.java:580)
&#160; &#160; at org.apache.camel.maven.RunMojo$1.run (RunMojo.java:402)
&#160; &#160; at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run (&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:1583)
 &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The step ID doesn&apos;t get interpolated and is used a the literal &quot;&lt;tt&gt;name&lt;/tt&gt;&quot;. I need to set the step id myself to get information about the specific route.&lt;/p&gt;

&lt;p&gt;Note that I run into when I was using kamelets with the step EIP, but this is a smaller example.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13583067">CAMEL-20890</key>
            <summary>Use Step ID&apos;s in routeTemplate</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="skin27">Raymond</reporter>
                        <labels>
                    </labels>
                <created>Tue, 18 Jun 2024 15:42:55 +0000</created>
                <updated>Wed, 19 Jun 2024 13:48:22 +0000</updated>
                            <resolved>Wed, 19 Jun 2024 13:48:22 +0000</resolved>
                                    <version>4.6.0</version>
                                    <fixVersion>4.7.0</fixVersion>
                                    <component>camel-core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="17855980" author="skin27" created="Tue, 18 Jun 2024 15:43:23 +0000"  >&lt;p&gt;Added reproducer&lt;/p&gt;</comment>
                            <comment id="17856227" author="skin27" created="Wed, 19 Jun 2024 09:24:30 +0000"  >&lt;p&gt;A sidenote:&lt;/p&gt;

&lt;p&gt;In the reproducer I get the following error message:&lt;/p&gt;


&lt;p&gt;Failed to create route deux from template myTemplate because of duplicate id detected: &lt;tt&gt;name&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;But when loading a kamelet I got something like the following error message&lt;/p&gt;



&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Failed to create route deux from template setbody-action because of duplicate id detected: one.&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;


&lt;p&gt;This puzzled me a bit, because the id &quot;one&quot; doesn&apos;t exist on route deux. Not as template parameter or value. It seems like it interpolates the parameter the first time, but then keeps it in memory somehow and use it again the second time.&lt;/p&gt;

&lt;p&gt;It was also not fully clear that the id of the step was meant, instead of another id (like the route id). It would be nice to give a bit more information something like:&lt;/p&gt;



&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Failed to create route deux from template setbody-action because of duplicate id detected.
Details:
id: one
node: step
route: deux
already used in route: one
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;









&lt;p&gt;&#160;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310660">
                    <name>Completes</name>
                                                                <inwardlinks description="is fixed by">
                                        <issuelink>
            <issuekey id="13583196">CAMEL-20898</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="13069575" name="routetemplate-xml.zip" size="20614" author="skin27" created="Tue, 18 Jun 2024 15:43:11 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 21 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1pve8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>