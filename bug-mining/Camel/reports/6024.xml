<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:51:53 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-17501] camel-core - FailedToCreateRouteException issue if route is very long and complex uris that cannot be sanitized</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-17501</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;In my case, the route string is a bit complex and long.&lt;/p&gt;

&lt;p&gt;So the sanitizeUri function was not finished and camel context was stuck.&lt;/p&gt;

&lt;p&gt;How about cut the route string first, then check and sanitize string.&lt;/p&gt;

&lt;p&gt;I think it is better way and improving performance.&lt;/p&gt;

&lt;p&gt;Please check this and let me change this.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; getRouteMessage(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; route) {
    &lt;span class=&quot;code-comment&quot;&gt;// ensure to sanitize uri&apos;s in the route so we &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; not show sensitive information such as passwords
&lt;/span&gt;    route = URISupport.sanitizeUri(route);

    &lt;span class=&quot;code-comment&quot;&gt;// cut the route after 60 chars so it won&apos;t be too big in the message
&lt;/span&gt;    &lt;span class=&quot;code-comment&quot;&gt;// users just need to be able to identify the route so they know where to look
&lt;/span&gt;    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (route.length() &amp;gt; 60) {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; route.substring(0, 60) + &lt;span class=&quot;code-quote&quot;&gt;&quot;...&quot;&lt;/span&gt;;
    } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; route;
    }
} &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13422920">CAMEL-17501</key>
            <summary>camel-core - FailedToCreateRouteException issue if route is very long and complex uris that cannot be sanitized</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="songmingu">Mingu Song</reporter>
                        <labels>
                    </labels>
                <created>Sun, 16 Jan 2022 16:14:33 +0000</created>
                <updated>Mon, 17 Jan 2022 22:46:49 +0000</updated>
                            <resolved>Mon, 17 Jan 2022 11:08:07 +0000</resolved>
                                    <version>3.7.5</version>
                                    <fixVersion>3.11.6</fixVersion>
                    <fixVersion>3.14.1</fixVersion>
                    <fixVersion>3.15.0</fixVersion>
                                    <component>camel-core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17476854" author="davsclaus" created="Sun, 16 Jan 2022 18:22:36 +0000"  >&lt;p&gt;Can you explain in more details what your problem was, what was not finished, and what was stuck&lt;/p&gt;</comment>
                            <comment id="17476896" author="JIRAUSER283669" created="Sun, 16 Jan 2022 23:11:01 +0000"  >&lt;p&gt;Ok, our project use camel xml format with spring boot. (camel-spring-boot-starter:3.7.5)&lt;/p&gt;

&lt;p&gt;Please see the attachment &quot;sample_xml.txt&quot;. (This xml has syntax errors.)&lt;/p&gt;

&lt;p&gt;And I test as blow.&lt;/p&gt;

&lt;p&gt;In processing addRouteDefinitions, URISupport.sanitizeUri() function was not finished in&#160;FailedToCreateRouteException.getRouteMessage().&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
ExtendedCamelContext extendedCamelContext = camelContext.adapt(ExtendedCamelContext.class);
ModelCamelContext modelCamelContext = camelContext.adapt(ModelCamelContext.class);

&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
    InputStream is = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ByteArrayInputStream(routeXml.getBytes(StandardCharsets.UTF_8));
    RoutesDefinition routes = (RoutesDefinition) extendedCamelContext.getXMLRoutesDefinitionLoader().loadRoutesDefinition(camelContext, is);

    camelContext.getShutdownStrategy().setTimeout(5);
    camelContext.getShutdownStrategy().setSuppressLoggingOnTimeout(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
    camelContext.getShutdownStrategy().setLogInflightExchangesOnTimeout(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
    camelContext.setShutdownRunningTask(ShutdownRunningTask.CompleteCurrentTaskOnly);
    modelCamelContext.addRouteDefinitions(routes.getRoutes());
} &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Exception exception) {
    exception.printStackTrace();
} &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17477252" author="JIRAUSER283669" created="Mon, 17 Jan 2022 14:33:53 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davsclaus&quot; class=&quot;user-hover&quot; rel=&quot;davsclaus&quot;&gt;davsclaus&lt;/a&gt; Our project use camel 3.7.5 version. Could you add to fix for 3.7.5 version?&lt;/p&gt;</comment>
                            <comment id="17477263" author="davsclaus" created="Mon, 17 Jan 2022 14:50:15 +0000"  >&lt;p&gt;No Camel 3.7.x is EOL and not supported anymore&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13038881" name="sample_xml.txt" size="15610" author="songmingu" created="Sun, 16 Jan 2022 23:04:32 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 43 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0ymnk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>