<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:45:35 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-16079] aws-sn2 does not recognise FIFO queue configured though arn</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-16079</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;When configuring an AWS SNS that is a fifo through the topic, the code that identify it as FIFO does not pick up the information, and so does not provide the provide the required attribute messageGroupId.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Issues is in file&#160;&lt;a href=&quot;https://github.com/apache/camel/blob/master/components/camel-aws2-sns/src/main/java/org/apache/camel/component/aws2/sns/Sns2Configuration.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/blob/master/components/camel-aws2-sns/src/main/java/org/apache/camel/component/aws2/sns/Sns2Configuration.java&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; isFifoTopic() {        
 &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; topicName.endsWith(&lt;span class=&quot;code-quote&quot;&gt;&quot;.fifo&quot;&lt;/span&gt;);    
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Likely this would fix it as the topicName is null, but the topicArn is not null whether it has been configured by topic or by arn :&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; isFifoTopic() { 
 &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; topicArn.endsWith(&lt;span class=&quot;code-quote&quot;&gt;&quot;.fifo&quot;&lt;/span&gt;) ; 
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>&lt;p&gt;Likely any, but tested on a docker image of&#160;amazoncorretto:11&lt;/p&gt;</environment>
        <key id="13354479">CAMEL-16079</key>
            <summary>aws-sn2 does not recognise FIFO queue configured though arn</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="acosentino">Andrea Cosentino</assignee>
                                    <reporter username="aurorew">Aurore Weber</reporter>
                        <labels>
                    </labels>
                <created>Mon, 25 Jan 2021 15:46:30 +0000</created>
                <updated>Thu, 11 Feb 2021 08:23:28 +0000</updated>
                            <resolved>Thu, 11 Feb 2021 06:35:43 +0000</resolved>
                                    <version>3.7.0</version>
                    <version>3.7.1</version>
                    <version>3.7.2</version>
                    <version>3.8.0</version>
                                    <fixVersion>3.7.3</fixVersion>
                    <fixVersion>3.9.0</fixVersion>
                                    <component>camel-aws2</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17271379" author="aurorew" created="Mon, 25 Jan 2021 15:47:31 +0000"  >&lt;p&gt;It was introduced when the support of SNS FIFO queue started&lt;/p&gt;</comment>
                            <comment id="17271384" author="ancosen" created="Mon, 25 Jan 2021 15:51:43 +0000"  >&lt;p&gt;Thanks, I think we need to address this in SQS too, maybe. I&apos;ll fix this, if you&apos;re not creating a PR already&lt;/p&gt;</comment>
                            <comment id="17271396" author="aurorew" created="Mon, 25 Jan 2021 16:02:18 +0000"  >&lt;p&gt;Was trying but unsure on which branch if should go to as I don&apos;t know the project branching / forking / good practise. I believe you will be quicker than me on this.&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;del&gt;FIFO seemed to work on SQS though as it was my first use case and it was successfully working.&lt;/del&gt; (I was not using the aws-sqs2 conponent but the aws-sqs one)&lt;/p&gt;</comment>
                            <comment id="17282650" author="antauri" created="Wed, 10 Feb 2021 19:17:46 +0000"  >&lt;p&gt;Not sure it&apos;s fixed in 3.7.2 as we&apos;ve just tested this today.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java.lang.NullPointerException: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
	at org.apache.camel.component.aws2.sns.Sns2Configuration.isFifoTopic(Sns2Configuration.java:354) ~[camel-aws2-sns-3.7.2.jar:3.7.2]
	at org.apache.camel.component.aws2.sns.Sns2Producer.configureFifoAttributes(Sns2Producer.java:138) ~[camel-aws2-sns-3.7.2.jar:3.7.2]
	at org.apache.camel.component.aws2.sns.Sns2Producer.process(Sns2Producer.java:65) ~[camel-aws2-sns-3.7.2.jar:3.7.2]
	at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:66) ~[camel-support-3.7.2.jar:3.7.2]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Here&apos;s how we declare the SNS endpoint.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  fromF (direct (&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;))
    .routeId (currentRoute)
    .process (&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;::notifyViaSns)
    .toF (&lt;span class=&quot;code-quote&quot;&gt;&quot;log:%s?level=INFO&quot;&lt;/span&gt;, currentRoute)
    .to (&lt;span class=&quot;code-quote&quot;&gt;&quot;aws2-sns:&lt;span class=&quot;code-comment&quot;&gt;//{{output.sns-topic}}?amazonSNSClient=#snsClient&quot;&lt;/span&gt;);&lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Is there a test that can confirm this works in 3.7.2? Could be an idea to pass it via testcontainers (with localstack). We&apos;re a bit blocked going to production by this and may have to revert to 3.6.x. Somehow feels like a regression.&lt;/p&gt;

&lt;p&gt;This happens at run-time (the application starts). If indeed the topicName is null, maybe the component initialization should fail? (given the topic is part of the path). Though this may hinder dynamic endpoints ...&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17282658" author="ancosen" created="Wed, 10 Feb 2021 19:26:09 +0000"  >&lt;p&gt;Can you explain why the topic name should be null? It&apos;s not really clear.&lt;/p&gt;</comment>
                            <comment id="17282659" author="antauri" created="Wed, 10 Feb 2021 19:27:20 +0000"  >&lt;p&gt;Here&apos;s a full stack:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java.lang.NullPointerException: nulljava.lang.NullPointerException: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; at org.apache.camel.component.aws2.sns.Sns2Configuration.isFifoTopic(Sns2Configuration.java:354) ~[camel-aws2-sns-3.7.2.jar:3.7.2] at org.apache.camel.component.aws2.sns.Sns2Producer.configureFifoAttributes(Sns2Producer.java:138) ~[camel-aws2-sns-3.7.2.jar:3.7.2] at org.apache.camel.component.aws2.sns.Sns2Producer.process(Sns2Producer.java:65) ~[camel-aws2-sns-3.7.2.jar:3.7.2] at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:66) ~[camel-support-3.7.2.jar:3.7.2] at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:169) ~[camel-core-processor-3.7.2.jar:3.7.2] at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:395) ~[camel-core-processor-3.7.2.jar:3.7.2] at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148) [camel-base-engine-3.7.2.jar:3.7.2] at org.apache.camel.impl.engine.DefaultReactiveExecutor.scheduleMain(DefaultReactiveExecutor.java:60) [camel-base-engine-3.7.2.jar:3.7.2] at org.apache.camel.processor.Pipeline.process(Pipeline.java:147) [camel-core-processor-3.7.2.jar:3.7.2] at org.apache.camel.impl.engine.CamelInternalProcessor.process(CamelInternalProcessor.java:312) [camel-base-engine-3.7.2.jar:3.7.2] at org.apache.camel.component.timer.TimerConsumer.sendTimerExchange(TimerConsumer.java:207) [camel-timer-3.7.2.jar:3.7.2] at org.apache.camel.component.timer.TimerConsumer$1.run(TimerConsumer.java:76) [camel-timer-3.7.2.jar:3.7.2] at java.util.TimerThread.mainLoop(Timer.java:555) [na:1.8.0_275] at java.util.TimerThread.run(Timer.java:505) [na:1.8.0_275]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Here&apos;s the shortest code to reproduce it:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
        from (&lt;span class=&quot;code-quote&quot;&gt;&quot;timer:&lt;span class=&quot;code-comment&quot;&gt;//runOnce?repeatCount=1&amp;amp;delay=2000&quot;&lt;/span&gt;)
&lt;/span&gt;          .setBody (constant (&lt;span class=&quot;code-quote&quot;&gt;&quot;Not required, but added a body&quot;&lt;/span&gt;))
          .to (&lt;span class=&quot;code-quote&quot;&gt;&quot;aws2-sns:&lt;span class=&quot;code-comment&quot;&gt;//arn:aws:sns:eu-west-1:123456789:somewhere-over-the-rainbow?amazonSNSClient=#snsClient&quot;&lt;/span&gt;);&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;We are compiling against JDK8 and running on JDK8 as more information. For the moment until 3.7.3 or some other version is released with the bug-fix we&apos;ll try to re-configure the component/endpoint as an workaround and set the topicName/topicArn in the SnsConfiguration in the hope that it passes over the NPE. That or we revert to a pre 3.7 version, we&apos;ll see. Hopefully this will be a valid workaround, without the need to revert:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Sns2Component sns2Component; &lt;span class=&quot;code-comment&quot;&gt;// Auto-wired
&lt;/span&gt;sns2Component.getConfiguration ().setTopicName/setTopicArn
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17282674" author="ancosen" created="Wed, 10 Feb 2021 19:52:32 +0000"  >&lt;p&gt;We need a guard on the check. My bad, my bad.&lt;/p&gt;</comment>
                            <comment id="17282706" author="dogerzz" created="Wed, 10 Feb 2021 20:48:55 +0000"  >&lt;p&gt;A valid workaround would be:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-comment&quot;&gt;// code placeholder
&lt;/span&gt;Sns2Component sns2Component = camelContext.getComponent (&lt;span class=&quot;code-quote&quot;&gt;&quot;aws2-sns&quot;&lt;/span&gt;,Sns2Component.class);
sns2Component.getConfiguration ().setTopicArn (&lt;span class=&quot;code-quote&quot;&gt;&quot;arn:aws:sns:eu-west-1:123456789&quot;&lt;/span&gt;);
sns2Component.getConfiguration ().setTopicName (&lt;span class=&quot;code-quote&quot;&gt;&quot;somewhere-over-the-rainbow&quot;&lt;/span&gt;);&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17282872" author="ancosen" created="Thu, 11 Feb 2021 06:36:12 +0000"  >&lt;p&gt;Fixed with a check guard, will be in 3.9.0 and 3.7.3&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13338812">CAMEL-15806</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10061"><![CDATA[Novice]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 39 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0myv4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>