<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:37:10 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-13958] XPathBuilder threadSafe mode should also be enabled when the NodeList contains only 1 item</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-13958</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;In &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-10225&quot; title=&quot;Camel-Saxon is not thread safe&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-10225&quot;&gt;&lt;del&gt;CAMEL-10225&lt;/del&gt;&lt;/a&gt; the &quot;threadSafety&quot; property was added. But looking at the code, it is only enabled when the NodeList contains 2 or more items:&lt;/p&gt;

&lt;p&gt;XPathBuilder: &lt;a href=&quot;https://github.com/apache/camel/blob/master/components/camel-xpath/src/main/java/org/apache/camel/language/xpath/XPathBuilder.java#L1064&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/blob/master/components/camel-xpath/src/main/java/org/apache/camel/language/xpath/XPathBuilder.java#L1064&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (threadSafety &amp;amp;&amp;amp; answer != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; answer &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; NodeList) {
            &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
                NodeList list = (NodeList)answer;                &lt;span class=&quot;code-comment&quot;&gt;// when the result is NodeList and it has 2+ elements then its
&lt;/span&gt;                &lt;span class=&quot;code-comment&quot;&gt;// not thread-safe to use concurrently
&lt;/span&gt;                &lt;span class=&quot;code-comment&quot;&gt;// and we need to clone each node and build a thread-safe list
&lt;/span&gt;                &lt;span class=&quot;code-comment&quot;&gt;// to be used instead
&lt;/span&gt;                &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; threadSafetyNeeded = list.getLength() &amp;gt;= 2;
                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (threadSafetyNeeded) {
                    answer = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ThreadSafeNodeList(list);
                    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (LOG.isDebugEnabled()) {
                        LOG.debug(&lt;span class=&quot;code-quote&quot;&gt;&quot;Created thread-safe result from: {} as: {}&quot;&lt;/span&gt;, list.getClass().getName(), answer.getClass().getName());
                    }
                }
            } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Exception e) {
                &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; ObjectHelper.wrapRuntimeCamelException(e);
            }
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;But I get the same type of error as mentioned in &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-10225&quot; title=&quot;Camel-Saxon is not thread safe&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-10225&quot;&gt;&lt;del&gt;CAMEL-10225&lt;/del&gt;&lt;/a&gt; when my NodeList only contains 1 item:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
org.apache.camel.TypeConversionException: Error during type conversion from type: java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; to the required type: java.io.InputStream with value &amp;lt;ssin&amp;gt;84073120992&amp;lt;/ssin&amp;gt; due java.lang.NullPointerException
    at org.apache.camel.impl.converter.BaseTypeConverterRegistry.createTypeConversionException(BaseTypeConverterRegistry.java:666)
    at org.apache.camel.impl.converter.BaseTypeConverterRegistry.convertTo(BaseTypeConverterRegistry.java:157)
    at org.apache.camel.impl.MessageSupport.getBody(MessageSupport.java:87)
    at org.apache.camel.impl.MessageSupport.getBody(MessageSupport.java:61)
    at org.apache.camel.builder.xml.XsltBuilder.process(XsltBuilder.java:124)
    at org.apache.camel.impl.ProcessorEndpoint.onExchange(ProcessorEndpoint.java:103)
    at org.apache.camel.component.xslt.XsltEndpoint.onExchange(XsltEndpoint.java:139)
    at org.apache.camel.impl.ProcessorEndpoint$1.process(ProcessorEndpoint.java:71)
    at org.apache.camel.util.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:61)
    at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:148)
    at org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:548)
    at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:201)
    at org.apache.camel.processor.Pipeline.process(Pipeline.java:138)
    at org.apache.camel.processor.Pipeline.process(Pipeline.java:101)
    at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:201)
    at org.apache.camel.component.direct.DirectProducer.process(DirectProducer.java:76)
    at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:148)
    at org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:548)
    at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:201)
    at org.apache.camel.processor.Pipeline.process(Pipeline.java:138)
    at org.apache.camel.processor.Pipeline.process(Pipeline.java:101)
    at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:201)
    at org.apache.camel.component.direct.DirectProducer.process(DirectProducer.java:76)
    at org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:548)
    at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:201)
    at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:109)
    at org.apache.camel.processor.MulticastProcessor.doProcessParallel(MulticastProcessor.java:859)
    at org.apache.camel.processor.MulticastProcessor.access$200(MulticastProcessor.java:86)
    at org.apache.camel.processor.MulticastProcessor$1.call(MulticastProcessor.java:330)
    at org.apache.camel.processor.MulticastProcessor$1.call(MulticastProcessor.java:316)
    at java.util.concurrent.FutureTask.run(FutureTask.java:266)
    at be.fgov.kszbcss.tracer.concurrent.TracerRunnable.run(TracerRunnable.java:27)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
    at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:748)
Caused by: org.apache.camel.RuntimeCamelException: java.lang.NullPointerException
    at org.apache.camel.util.ObjectHelper.wrapRuntimeCamelException(ObjectHelper.java:1826)
    at org.apache.camel.util.ObjectHelper.invokeMethod(ObjectHelper.java:1405)
    at org.apache.camel.impl.converter.InstanceMethodTypeConverter.convertTo(InstanceMethodTypeConverter.java:79)
    at org.apache.camel.impl.converter.BaseTypeConverterRegistry.doConvertTo(BaseTypeConverterRegistry.java:325)
    at org.apache.camel.impl.converter.BaseTypeConverterRegistry.convertTo(BaseTypeConverterRegistry.java:140)
    ... 33 more
Caused by: java.lang.NullPointerException
    at com.sun.org.apache.xerces.internal.dom.DeferredDocumentImpl.clearChunkValue(DeferredDocumentImpl.java:2038)
    at com.sun.org.apache.xerces.internal.dom.DeferredDocumentImpl.getNodeValueString(DeferredDocumentImpl.java:1149)
    at com.sun.org.apache.xerces.internal.dom.DeferredDocumentImpl.getNodeValueString(DeferredDocumentImpl.java:1134)
    at com.sun.org.apache.xerces.internal.dom.DeferredTextImpl.synchronizeData(DeferredTextImpl.java:96)
    at com.sun.org.apache.xerces.internal.dom.CharacterDataImpl.getData(CharacterDataImpl.java:163)
    at net.sf.saxon.dom.DOMSender.walkNode(DOMSender.java:266)
    at net.sf.saxon.dom.DOMSender.outputElement(DOMSender.java:334)
    at net.sf.saxon.dom.DOMSender.sendElement(DOMSender.java:190)
    at net.sf.saxon.dom.DOMSender.send(DOMSender.java:101)
    at net.sf.saxon.dom.DOMObjectModel.sendDOMSource(DOMObjectModel.java:282)
    at net.sf.saxon.dom.DOMObjectModel.sendSource(DOMObjectModel.java:264)
    at net.sf.saxon.event.Sender.send(Sender.java:207)
    at net.sf.saxon.jaxp.IdentityTransformer.transform(IdentityTransformer.java:366)
    at org.apache.camel.converter.jaxp.XmlConverter.toResult(XmlConverter.java:146)
    at org.apache.camel.converter.jaxp.XmlConverter.toResult(XmlConverter.java:125)
    at org.apache.camel.converter.jaxp.XmlConverter.toString(XmlConverter.java:248)
    at org.apache.camel.converter.jaxp.XmlConverter.toString(XmlConverter.java:292)
    at org.apache.camel.converter.jaxp.DomConverter.toString(DomConverter.java:105)
    at org.apache.camel.converter.jaxp.DomConverter.toString(DomConverter.java:74)
    at org.apache.camel.converter.jaxp.DomConverter.toByteArray(DomConverter.java:144)
    at org.apache.camel.converter.jaxp.DomConverter.toInputStream(DomConverter.java:139)
    at sun.reflect.GeneratedMethodAccessor89.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:498)
    at org.apache.camel.util.ObjectHelper.invokeMethod(ObjectHelper.java:1401)
    ... 36 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13255657">CAMEL-13958</key>
            <summary>XPathBuilder threadSafe mode should also be enabled when the NodeList contains only 1 item</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ramu11">Ramu</assignee>
                                    <reporter username="jpraet">Jimmy Praet</reporter>
                        <labels>
                    </labels>
                <created>Mon, 9 Sep 2019 14:29:07 +0000</created>
                <updated>Mon, 30 Sep 2019 08:43:40 +0000</updated>
                            <resolved>Mon, 30 Sep 2019 08:43:40 +0000</resolved>
                                    <version>2.24.1</version>
                                    <fixVersion>3.0.0.RC2</fixVersion>
                    <fixVersion>3.0.0</fixVersion>
                                    <component>camel-saxon</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16940636" author="davsclaus" created="Mon, 30 Sep 2019 03:45:32 +0000"  >&lt;p&gt;Ramu, are you working on this?&lt;/p&gt;</comment>
                            <comment id="16940676" author="ramu11" created="Mon, 30 Sep 2019 06:42:08 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davsclaus&quot; class=&quot;user-hover&quot; rel=&quot;davsclaus&quot;&gt;davsclaus&lt;/a&gt;  yup, will work &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 7 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z06gu8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>