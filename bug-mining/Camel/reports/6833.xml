<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 11:07:08 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-20995] camel-azure-storage-blob uploadBlockBlob retry operation fails due to mark and reset issue / Flux</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-20995</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;camel-azure-storage-blob uploadBlockBlob retry operation fails due to mark and reset issue / Flux&lt;/p&gt;


&lt;p&gt;Due to some of the issues Azure blob storage retrying for upload again, but it is failed to upload due to the input stream length is 0 which is not expected.&lt;/p&gt;



&lt;p&gt;As per the azure core/common bode Flux code suggestion it is suggested to make markAndreset request parameter to &lt;b&gt;true,&lt;/b&gt; But the out camel component always send the parameter value as false.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Solution:&lt;/b&gt; Instead of sending the default value to false, we can use inputStream.markSupported() method.&lt;/p&gt;

&lt;p&gt;Here I am adding traces and screenshots, for easy understanding.&lt;/p&gt;

&lt;p&gt;Thanks.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13586324">CAMEL-20995</key>
            <summary>camel-azure-storage-blob uploadBlockBlob retry operation fails due to mark and reset issue / Flux</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="acosentino">Andrea Cosentino</assignee>
                                    <reporter username="hareeshbilla">Hareesh Billa</reporter>
                        <labels>
                    </labels>
                <created>Fri, 19 Jul 2024 03:45:26 +0000</created>
                <updated>Tue, 23 Jul 2024 13:45:57 +0000</updated>
                            <resolved>Tue, 23 Jul 2024 13:28:16 +0000</resolved>
                                    <version>4.0.0</version>
                    <version>4.4.0</version>
                    <version>4.7.0</version>
                                    <fixVersion>4.0.6</fixVersion>
                    <fixVersion>4.4.4</fixVersion>
                    <fixVersion>4.8.0</fixVersion>
                                    <component>camel-azure</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17867300" author="JIRAUSER280844" created="Fri, 19 Jul 2024 12:09:51 +0000"  >&lt;p&gt;Issue introduced by&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-18808&quot; title=&quot;camel-azure-storage-blob producer doesn&amp;#39;t use CamelAzureStorageBlobBlobSize-header&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-18808&quot;&gt;&lt;del&gt;CAMEL-18808&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
Retry was working with input stream that supported mark()/reset().&lt;br/&gt;
It&apos;s no longer working since &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-18808&quot; title=&quot;camel-azure-storage-blob producer doesn&amp;#39;t use CamelAzureStorageBlobBlobSize-header&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-18808&quot;&gt;&lt;del&gt;CAMEL-18808&lt;/del&gt;&lt;/a&gt; changes in BlobClientWrapper&lt;/p&gt;</comment>
                            <comment id="17868073" author="JIRAUSER301268" created="Tue, 23 Jul 2024 13:45:57 +0000"  >&lt;p&gt;Your quick support is greatly appreciated, thank you all.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=acosentino&quot; class=&quot;user-hover&quot; rel=&quot;acosentino&quot;&gt;acosentino&lt;/a&gt;: &#160;Do you have any idea what the next versions (4.0.x and 4.4.x) release dates are?&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13513132">CAMEL-18808</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="13070275" name="Code snip.png" size="349572" author="hareeshbilla" created="Fri, 19 Jul 2024 03:45:25 +0000"/>
                            <attachment id="13070276" name="Log trace" size="6715" author="hareeshbilla" created="Fri, 19 Jul 2024 03:42:03 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 16 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1qfg8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>