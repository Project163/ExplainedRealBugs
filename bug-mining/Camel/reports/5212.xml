<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:40:12 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-14561] Camel-Blueprint fails on JDK8 with NPE</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-14561</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
17:59:47.865 ERROR [fileinstall-/home/oscerd/playground/apache-karaf-4.2.7/deploy] Unable to start container &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; blueprint bundle camel-context.xml/0.0.0org.osgi.service.blueprint.container.ComponentDefinitionException: Failed to create the JAXB binder : javax.xml.bind.JAXBException: Provider &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;com.sun.xml.internal.bind.v2.ContextFactory could not be instantiated: java.lang.NullPointerException	 - with linked exception:[java.lang.NullPointerException]	at org.apache.camel.blueprint.handler.CamelNamespaceHandler.parseCamelContextNode(CamelNamespaceHandler.java:252) ~[?:?]	at org.apache.camel.blueprint.handler.CamelNamespaceHandler.parse(CamelNamespaceHandler.java:204) ~[?:?]	at org.apache.aries.blueprint.parser.Parser.parseCustomElement(Parser.java:1369) ~[!/:1.10.2]	at org.apache.aries.blueprint.parser.Parser.loadComponents(Parser.java:427) ~[!/:1.10.2]	at org.apache.aries.blueprint.parser.Parser.populate(Parser.java:331) ~[!/:1.10.2]	at org.apache.aries.blueprint.container.BlueprintContainerImpl.doRun(BlueprintContainerImpl.java:371) [!/:1.10.2]	at org.apache.aries.blueprint.container.BlueprintContainerImpl.run(BlueprintContainerImpl.java:298) [!/:1.10.2]	at org.apache.aries.blueprint.container.BlueprintExtender.createContainer(BlueprintExtender.java:311) [!/:1.10.2]	at org.apache.aries.blueprint.container.BlueprintExtender.createContainer(BlueprintExtender.java:280) [!/:1.10.2]	at org.apache.aries.blueprint.container.BlueprintExtender.createContainer(BlueprintExtender.java:276) [!/:1.10.2]	at org.apache.aries.blueprint.container.BlueprintExtender.modifiedBundle(BlueprintExtender.java:266) [!/:1.10.2]	at org.apache.aries.util.tracker.hook.BundleHookBundleTracker$Tracked.customizerModified(BundleHookBundleTracker.java:500) [!/:1.10.2]	at org.apache.aries.util.tracker.hook.BundleHookBundleTracker$Tracked.customizerModified(BundleHookBundleTracker.java:433) [!/:1.10.2]	at org.apache.aries.util.tracker.hook.BundleHookBundleTracker$AbstractTracked.track(BundleHookBundleTracker.java:725) [!/:1.10.2]	at org.apache.aries.util.tracker.hook.BundleHookBundleTracker$Tracked.bundleChanged(BundleHookBundleTracker.java:463) [!/:1.10.2]	at org.apache.aries.util.tracker.hook.BundleHookBundleTracker$BundleEventHook.event(BundleHookBundleTracker.java:422) [!/:1.10.2]	at org.apache.felix.framework.util.SecureAction.invokeBundleEventHook(SecureAction.java:1179) [org.apache.felix.framework-5.6.12.jar:?]	at org.apache.felix.framework.EventDispatcher.createWhitelistFromHooks(EventDispatcher.java:730) [org.apache.felix.framework-5.6.12.jar:?]	at org.apache.felix.framework.EventDispatcher.fireBundleEvent(EventDispatcher.java:485) [org.apache.felix.framework-5.6.12.jar:?]	at org.apache.felix.framework.Felix.fireBundleEvent(Felix.java:4579) [org.apache.felix.framework-5.6.12.jar:?]	at org.apache.felix.framework.Felix.startBundle(Felix.java:2174) [org.apache.felix.framework-5.6.12.jar:?]	at org.apache.felix.framework.BundleImpl.start(BundleImpl.java:998) [org.apache.felix.framework-5.6.12.jar:?]	at org.apache.felix.fileinstall.internal.DirectoryWatcher.startBundle(DirectoryWatcher.java:1260) [!/:3.6.4]	at org.apache.felix.fileinstall.internal.DirectoryWatcher.startBundles(DirectoryWatcher.java:1233) [!/:3.6.4]	at org.apache.felix.fileinstall.internal.DirectoryWatcher.doProcess(DirectoryWatcher.java:520) [!/:3.6.4]	at org.apache.felix.fileinstall.internal.DirectoryWatcher.process(DirectoryWatcher.java:365) [!/:3.6.4]	at org.apache.felix.fileinstall.internal.DirectoryWatcher.run(DirectoryWatcher.java:316) [!/:3.6.4]Caused by: javax.xml.bind.JAXBException: Provider &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;com.sun.xml.internal.bind.v2.ContextFactory could not be instantiated: java.lang.NullPointerException		at javax.xml.bind.ContextFinder.newInstance(ContextFinder.java:202) ~[?:1.8.0_201]	at javax.xml.bind.ContextFinder.newInstance(ContextFinder.java:129) ~[?:1.8.0_201]	at javax.xml.bind.ContextFinder.find(ContextFinder.java:318) ~[?:1.8.0_201]	at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:478) ~[?:1.8.0_201]	at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:435) ~[?:1.8.0_201]	at org.apache.camel.impl.DefaultModelJAXBContextFactory.newJAXBContext(DefaultModelJAXBContextFactory.java:38) ~[?:?]	at org.apache.camel.blueprint.handler.CamelNamespaceHandler.getJaxbContext(CamelNamespaceHandler.java:678) ~[?:?]	at org.apache.camel.blueprint.handler.CamelNamespaceHandler.parseCamelContextNode(CamelNamespaceHandler.java:250) ~[?:?]	... 26 moreCaused by: java.lang.NullPointerException	at javax.xml.bind.ContextFinder.handleClassCastException(ContextFinder.java:114) ~[?:1.8.0_201]	at javax.xml.bind.ContextFinder.newInstance(ContextFinder.java:187) ~[?:1.8.0_201]	at javax.xml.bind.ContextFinder.newInstance(ContextFinder.java:129) ~[?:1.8.0_201]	at javax.xml.bind.ContextFinder.find(ContextFinder.java:318) ~[?:1.8.0_201]	at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:478) ~[?:1.8.0_201]	at javax.xml.bind.JAXBContext.newInstance(JAXBContext.java:435) ~[?:1.8.0_201]	at org.apache.camel.impl.DefaultModelJAXBContextFactory.newJAXBContext(DefaultModelJAXBContextFactory.java:38) ~[?:?]	at org.apache.camel.blueprint.handler.CamelNamespaceHandler.getJaxbContext(CamelNamespaceHandler.java:678) ~[?:?]	at org.apache.camel.blueprint.handler.CamelNamespaceHandler.parseCamelContextNode(CamelNamespaceHandler.java:250) ~[?:?]	... 26 more17:59:47.871 DEBUG [fileinstall-/home/oscerd/playground/apache-karaf-4.2.7/deploy] Sending blueprint container event BlueprintEvent[type=FAILURE, exception=Failed to create the JAXB binder : javax.xml.bind.JAXBException: Provider &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;com.sun.xml.internal.bind.v2.ContextFactory could not be instantiated: java.lang.NullPointerException
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;With a simple blueprint.xml. With JDK11 this is ok.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13285150">CAMEL-14561</key>
            <summary>Camel-Blueprint fails on JDK8 with NPE</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gnodet">Guillaume Nodet</assignee>
                                    <reporter username="acosentino">Andrea Cosentino</reporter>
                        <labels>
                    </labels>
                <created>Thu, 13 Feb 2020 18:23:14 +0000</created>
                <updated>Fri, 14 Feb 2020 15:14:23 +0000</updated>
                            <resolved>Fri, 14 Feb 2020 15:14:23 +0000</resolved>
                                                    <fixVersion>3.1.0</fixVersion>
                                    <component>camel-blueprint</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17036732" author="davsclaus" created="Fri, 14 Feb 2020 06:58:52 +0000"  >&lt;p&gt;So its JAXBContext that seems to load an implementation that is not an instanceof JAXBContext and then when it attempts to report this, then it has a NPE in its own code, because getClassloader returns null.&lt;/p&gt;

&lt;p&gt;So its some OSGi classloading hell on Karaf that is causing this. &lt;/p&gt;

&lt;p&gt;I wonder if we could generate the ObjectFactory classes instead of using jaxb.index files and rely on JAXB itself. But its a big change as you would need to add annotations to refer to the factory classes in the model.&lt;/p&gt;

&lt;p&gt;This is also only on JDK8 and Karaf. And JDK8 will become dropped in the future.&lt;/p&gt;

&lt;p&gt;For Camel 3.1.0 we can release with a known issue and then see if we can find a fix for 3.1.1.&lt;/p&gt;</comment>
                            <comment id="17037026" author="gnt" created="Fri, 14 Feb 2020 15:01:01 +0000"  >&lt;p&gt;The problem is caused by &lt;tt&gt;camel-xml-jaxb&lt;/tt&gt; having an import package on &lt;tt&gt;javax.xml.bind&lt;/tt&gt; with a range &lt;tt&gt;[2.3.0,3.00)&lt;/tt&gt;, while Karaf system bundle exports the package in version 2.2.&lt;br/&gt;
To work around the problem, the camel features install its own jaxb-api bundle, but it does not work as the &lt;tt&gt;JAXBContext&lt;/tt&gt; interface used by the internal jaxb implementation from the JDK does not use the one that is wired to camel (hence the &lt;tt&gt;ClassCastException&lt;/tt&gt;).&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 39 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0bgxk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>