<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:01:15 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-6922] XmlConverter cannot convert from ElementNSImpl to Document</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-6922</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;XmlConvertor cannot convert from org.apache.xerces.dom.ElementNSImpl to org.w3c.dom.Document. Class ElementNSImpl implements both interfaces org.w3c.dom.Node and org.w3c.dom.NodeList. While type converter lookup iterates from ElementNSImpl through it&apos;s superclasses and implemented interfaces, it reaches NodeList first. Therefore the&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;&lt;br/&gt;
Node toDOMNodeFromSingleNodeList(NodeList)&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;method is selected for conversion. However this method returns null for any NodeList with more than one node. This leads to null in a message&apos;s body.&lt;br/&gt;
This issue is not detected on Linux, because on Oracle JDK lookup reaches Node before NodeList and the&lt;br/&gt;
&lt;font color=&quot;green&quot;&gt;&lt;br/&gt;
Document toDOMDocument(Node)&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;method is selected for conversion.&lt;/p&gt;</description>
                <environment>&lt;p&gt;HP-UX, JDK 6.14, 7.06&lt;/p&gt;</environment>
        <key id="12677019">CAMEL-6922</key>
            <summary>XmlConverter cannot convert from ElementNSImpl to Document</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="arseniy">Arseniy Tashoyan</reporter>
                        <labels>
                            <label>converter</label>
                            <label>dom</label>
                            <label>xml</label>
                    </labels>
                <created>Fri, 1 Nov 2013 07:57:38 +0000</created>
                <updated>Wed, 29 Jan 2014 05:07:46 +0000</updated>
                            <resolved>Tue, 28 Jan 2014 16:27:30 +0000</resolved>
                                    <version>2.11.2</version>
                                    <fixVersion>2.11.4</fixVersion>
                    <fixVersion>2.12.3</fixVersion>
                    <fixVersion>2.13.0</fixVersion>
                                    <component>camel-core</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="13818413" author="davsclaus" created="Sun, 10 Nov 2013 10:19:59 +0000"  >&lt;p&gt;What JDK are you using?&lt;/p&gt;

&lt;p&gt;The Oracle JDK on osx, the ElementNSImpl class only implements Node (does NOT implement NodeList)&lt;/p&gt;</comment>
                            <comment id="13818414" author="davsclaus" created="Sun, 10 Nov 2013 10:20:51 +0000"  >&lt;p&gt;And do you have a sample unit test or something to use?&lt;/p&gt;</comment>
                            <comment id="13852238" author="rene avontuur" created="Wed, 18 Dec 2013 22:23:15 +0000"  >&lt;p&gt;I wrote a unit test for this issue, which is attached as NodeListToDoumentTest.java.&lt;br/&gt;
It shows that ElementNSImpl implements the NodeList interface, the responsible superclass is NodeImpl.&lt;br/&gt;
This unit test passes on my machine, running an Oracle JDK.&lt;/p&gt;

&lt;p&gt;The same unit test fails, after making the following change in&lt;br/&gt;
class BaseTypeConverterRegistry:&lt;/p&gt;

&lt;p&gt;            // try the interfaces (in reverse order)&lt;br/&gt;
            for (int i=fromType.getInterfaces().length-1;i&amp;gt;=0;i--) {&lt;br/&gt;
                Class&amp;lt;?&amp;gt; type = fromType.getInterfaces()&lt;span class=&quot;error&quot;&gt;&amp;#91;i&amp;#93;&lt;/span&gt;;&lt;/p&gt;

&lt;p&gt;instead of:&lt;br/&gt;
            // try the interfaces&lt;br/&gt;
            for (Class&amp;lt;?&amp;gt; type : fromType.getInterfaces()) &lt;/p&gt;

&lt;p&gt;This may explain why a different JDK may have an issue with this conversion.&lt;/p&gt;</comment>
                            <comment id="13853398" author="rene avontuur" created="Thu, 19 Dec 2013 22:32:30 +0000"  >&lt;p&gt;I added a patch file (patchfile.txt), which will most likely solve this issue.&lt;br/&gt;
After this patch, if toDOMDocumentFromSingleNodeList(Nodelist) is selected for conversion, then a second try using toDOMDocument(Node) will occur if applicable.&lt;br/&gt;
The attached unit test is not really fit for inclusion in the camel-core project, but helpful for debugging purposes.&lt;/p&gt;</comment>
                            <comment id="13884296" author="davsclaus" created="Tue, 28 Jan 2014 16:27:30 +0000"  >&lt;p&gt;Thanks for reporting and the patch.&lt;/p&gt;</comment>
                            <comment id="13885011" author="arseniy" created="Wed, 29 Jan 2014 05:07:46 +0000"  >&lt;p&gt;Did you have a chance to test the fix on HP-UX Java? On Oracle Java the issue does not occur.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12619422" name="NodeListToDocumentTest.java" size="2037" author="rene avontuur" created="Wed, 18 Dec 2013 22:23:15 +0000"/>
                            <attachment id="12619679" name="patchfile.txt" size="866" author="rene avontuur" created="Thu, 19 Dec 2013 22:32:30 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10061"><![CDATA[Novice]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>356395</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 43 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1pfuv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>356683</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>