<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:26:06 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-11871] Stomp component should not modify the destination name</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-11871</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;Stomp Camel Component modifies the destination name passed via endpoint URI by prepending a slash to it and by replacing &apos;:&apos; with &apos;/&apos; &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;. This turns out to be problematic when targeting an ActiveMQ Artemis instance embedded in WildFly. For whatever reason, it expects queue names to start with &quot;jms.queue.&quot; without the initial slash.&lt;/p&gt;

&lt;p&gt;There is a WildFly Camel integration test demonstrating the issue: &lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;StompComponent should not assume anything about the naming scheme, because it has no control over the decisions made on the broker side.&lt;/p&gt;


&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/apache/camel/blob/98b3d7eae9959645c4bc023bf4896d036ce75642/components/camel-stomp/src/main/java/org/apache/camel/component/stomp/StompComponent.java#L57&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/blob/98b3d7eae9959645c4bc023bf4896d036ce75642/components/camel-stomp/src/main/java/org/apache/camel/component/stomp/StompComponent.java#L57&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;2&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/ppalaga/wildfly-camel/commit/15e3e6098b3976cb057f4208565296ea6bd54017#diff-bf122ce705f9ef0b3920d968d1f13f2a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/ppalaga/wildfly-camel/commit/15e3e6098b3976cb057f4208565296ea6bd54017#diff-bf122ce705f9ef0b3920d968d1f13f2a&lt;/a&gt;&lt;/p&gt;
</description>
                <environment></environment>
        <key id="13106366">CAMEL-11871</key>
            <summary>Stomp component should not modify the destination name</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ppalaga">Peter Palaga</assignee>
                                    <reporter username="ppalaga">Peter Palaga</reporter>
                        <labels>
                    </labels>
                <created>Mon, 2 Oct 2017 09:30:25 +0000</created>
                <updated>Wed, 4 Oct 2017 08:08:31 +0000</updated>
                            <resolved>Wed, 4 Oct 2017 07:59:16 +0000</resolved>
                                                    <fixVersion>2.20.0</fixVersion>
                                    <component>camel-stomp</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="16187814" author="githubbot" created="Mon, 2 Oct 2017 09:36:12 +0000"  >&lt;p&gt;GitHub user ppalaga opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/1989&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/1989&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-11871&quot; title=&quot;Stomp component should not modify the destination name&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-11871&quot;&gt;&lt;del&gt;CAMEL-11871&lt;/del&gt;&lt;/a&gt;: Stomp component should not modify the destination name&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-11871&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/CAMEL-11871&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/ppalaga/camel&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/ppalaga/camel&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-11871&quot; title=&quot;Stomp component should not modify the destination name&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-11871&quot;&gt;&lt;del&gt;CAMEL-11871&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/1989.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/1989.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #1989&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit c7c5ba04dc4a3b22de6ae2c9b4ce9cc9808a731d&lt;br/&gt;
Author: Peter Palaga &amp;lt;ppalaga@redhat.com&amp;gt;&lt;br/&gt;
Date:   2017-10-02T09:33:32Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-11871&quot; title=&quot;Stomp component should not modify the destination name&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-11871&quot;&gt;&lt;del&gt;CAMEL-11871&lt;/del&gt;&lt;/a&gt;: Stomp component should not modify the destination name&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16187867" author="dejanb" created="Mon, 2 Oct 2017 10:59:45 +0000"  >&lt;p&gt;The proposed change breaks unit tests written against ActiveMQ 5.x, which expects destinations names with /topic/ or /queue/ prefixes. &lt;br/&gt;
We can see how to provide more flexibility to destination name mapping. BTW. Which version of Artemis are you using? I&apos;m guessing 1.x, as in 2.x there is a flexible address model which should eliminate this problem.&lt;/p&gt;</comment>
                            <comment id="16189427" author="ppalaga" created="Tue, 3 Oct 2017 09:11:06 +0000"  >&lt;blockquote&gt;&lt;p&gt;The proposed change breaks unit tests written against ActiveMQ 5.x, which expects destinations names with /topic/ or /queue/ prefixes. &lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Good to know, but I still wonder whether the initial slash cannot be passed via route URI? &lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Which version of Artemis are you using? I&apos;m guessing 1.x, as in 2.x there is a flexible address model which should eliminate this problem.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Yes, both WildFly 10 and 11 embed Artemis 1.x.&lt;/p&gt;
</comment>
                            <comment id="16189458" author="dejanb" created="Tue, 3 Oct 2017 09:35:13 +0000"  >&lt;p&gt;I think at this point the best thing would be to introduce another configuration parameter that can turn this off, so we can keep backward compatibility and support other addressing schemes.&lt;/p&gt;</comment>
                            <comment id="16189590" author="davsclaus" created="Tue, 3 Oct 2017 11:49:02 +0000"  >&lt;p&gt;Yeah good idea Dejan. However coming up with a good name for such an option can be tricky. &lt;br/&gt;
And can we get this tested with Artemis 2.x. to see if that works OOTB as-is.&lt;/p&gt;

&lt;p&gt;Then we would know the option is only needed for Artemis 1.x support&lt;/p&gt;</comment>
                            <comment id="16189697" author="ppalaga" created="Tue, 3 Oct 2017 13:22:03 +0000"  >&lt;blockquote&gt;&lt;p&gt;proposed change breaks unit tests written against ActiveMQ 5.x&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;In b81e09d &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; I checked that the stomp unit tests can be fixed to work with the proposed fix.&lt;/p&gt;

&lt;p&gt;Backwards compatibility is a valid concern as long as the old behavior can be called correct. The old behavior is rather incorrect because it does not properly cover the whole range of the applicability of the stomp protocol. Keeping the incorrect behavior a default and making the correct behavior optional is doable but sounds strange.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/apache/camel/pull/1989/commits/b81e09da51eff29d4b17a392a9d4a4ca564d6d88&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/1989/commits/b81e09da51eff29d4b17a392a9d4a4ca564d6d88&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16190946" author="githubbot" created="Wed, 4 Oct 2017 07:59:20 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/1989&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/1989&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16190954" author="ppalaga" created="Wed, 4 Oct 2017 08:08:31 +0000"  >&lt;p&gt;For the record, why this was actually accepted:&lt;/p&gt;

&lt;p&gt;The STOMP spec &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; says &lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;The STOMP protocol treats destinations as opaque string and their syntax is server implementation specific.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The user knows with which STOMP broker is he speaking, hence the user should know the proper naming scheme. To the very opposite, the stomp Camel component has no info which specific stomp implementation is on the other side. Stomp Camel component can thus make no assumptions about the naming scheme.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://stomp.github.io/stomp-specification-1.2.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://stomp.github.io/stomp-specification-1.2.html&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 7 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3krpj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>