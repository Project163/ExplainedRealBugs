<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:32:51 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-13008] Odata-connector assumes &apos;/&apos; at end of URI</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-13008</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;An issue comes to light when testing certain odata implementations that do not handle a &apos;/&apos; being added to the end of the consumed URI, eg.&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Implementation of the olingo4 &lt;a href=&quot;https://olingo.apache.org/doc/odata4/tutorials/read/tutorial_read.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;tutorial&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;Services deployed using current implementations of &lt;a href=&quot;http://teiid.io/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;teiid&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Use of the odata-connector on these services results in a &lt;em&gt;malformed URI&lt;/em&gt; error.&lt;/p&gt;

&lt;p&gt;Essentially, when the service URI is concatenated with the resource path, the constructed URI is &lt;a href=&quot;https://github.com/apache/camel/blob/master/components/camel-olingo4/camel-olingo4-api/src/main/java/org/apache/camel/component/olingo4/api/impl/Olingo4AppImpl.java#L781&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;appended&lt;/a&gt; with a &apos;/&apos; and a &apos;?&apos; prior to the addition of the query parameters.&lt;/p&gt;

&lt;p&gt;This works fine for the reference odata &lt;a href=&quot;https://services.odata.org/TripPinRESTierService/(S(4gus0w41xmxedlzbywj2srqo))/People/?$filter=FirstName%20eq%20%27Scott%27&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;implementation&lt;/a&gt; since can handle the extra &apos;/&apos;.&lt;/p&gt;

&lt;p&gt;Since both teiid and the olingo4 tutorial use the olingo4 libraries, it would seem that the problem might be solved with them. However, it might be advantageous, given odata implementations already deployed, whether this odata-connector might check whether the &apos;/&apos; was supported before appending it?&lt;/p&gt;

&lt;p&gt;(note. a bug &lt;a href=&quot;https://issues.jboss.org/browse/TEIID-5573&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;report&lt;/a&gt; has been logged with the teiid project to this affect).&lt;/p&gt;
</description>
                <environment></environment>
        <key id="13204575">CAMEL-13008</key>
            <summary>Odata-connector assumes &apos;/&apos; at end of URI</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dmvolod">Dmitry Volodin</assignee>
                                    <reporter username="phantomjinx">Paul Richardson</reporter>
                        <labels>
                    </labels>
                <created>Fri, 14 Dec 2018 21:01:58 +0000</created>
                <updated>Sat, 22 Dec 2018 21:36:05 +0000</updated>
                            <resolved>Sat, 22 Dec 2018 21:36:05 +0000</resolved>
                                    <version>2.21.0</version>
                                    <fixVersion>2.21.4</fixVersion>
                    <fixVersion>2.22.3</fixVersion>
                    <fixVersion>2.23.1</fixVersion>
                    <fixVersion>2.24.0</fixVersion>
                    <fixVersion>3.0.0</fixVersion>
                                    <component>camel-olingo4</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                <comments>
                            <comment id="16724288" author="dmvolod" created="Tue, 18 Dec 2018 17:38:48 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=phantomjinx&quot; class=&quot;user-hover&quot; rel=&quot;phantomjinx&quot;&gt;phantomjinx&lt;/a&gt;, could you please to test this issue with camel-olingo4 component as this fix looks like already present in implementation &lt;a href=&quot;https://github.com/apache/camel/blob/44dacd6a5528c85c31c8a3de708ddeb0e7e4b52b/components/camel-olingo4/camel-olingo4-api/src/main/java/org/apache/camel/component/olingo4/api/impl/Olingo4AppImpl.java#L199&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/blob/44dacd6a5528c85c31c8a3de708ddeb0e7e4b52b/components/camel-olingo4/camel-olingo4-api/src/main/java/org/apache/camel/component/olingo4/api/impl/Olingo4AppImpl.java#L199&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16724304" author="dmvolod" created="Tue, 18 Dec 2018 17:55:20 +0000"  >&lt;p&gt;Added test and it&apos;s working fine from my point of view &lt;a href=&quot;https://github.com/dmvolod/camel/tree/CAMEL-13008&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/dmvolod/camel/tree/CAMEL-13008&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16724447" author="phantomjinx" created="Tue, 18 Dec 2018 20:31:02 +0000"  >&lt;p&gt;So couple of things to consider:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/apache/camel/blob/44dacd6a5528c85c31c8a3de708ddeb0e7e4b52b/components/camel-olingo4/camel-olingo4-api/src/main/java/org/apache/camel/component/olingo4/api/impl/Olingo4AppImpl.java#L199&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;L199&lt;/a&gt; only handles trailing forward slashes at the end of the service uri and not the whole uri. The whole uri is not constructed until &lt;a href=&quot;https://github.com/apache/camel/blob/44dacd6a5528c85c31c8a3de708ddeb0e7e4b52b/components/camel-olingo4/camel-olingo4-api/src/main/java/org/apache/camel/component/olingo4/api/impl/Olingo4AppImpl.java#L781&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;L781&lt;/a&gt;, where the service uri, resource name and query options are concatenated together, eg.&lt;/li&gt;
&lt;/ul&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
ServiceURI (as seen at L199) -&amp;gt; http:&lt;span class=&quot;code-comment&quot;&gt;//192.168.88.5:8090/odata4/Products.svc
&lt;/span&gt;Method Name (Resource) -&amp;gt; Products
QueryOptions -&amp;gt; $filter=FirstName eq &lt;span class=&quot;code-quote&quot;&gt;&apos;Scott&apos;&lt;/span&gt;

Full URI built at L781 (note the &lt;span class=&quot;code-quote&quot;&gt;&apos;/?&apos;&lt;/span&gt; added after &lt;span class=&quot;code-quote&quot;&gt;&apos;/Products&apos;&lt;/span&gt;):
http:&lt;span class=&quot;code-comment&quot;&gt;//192.168.88.5:8090/odata4/Products.svc/Products/?$filter=FirstName eq &lt;span class=&quot;code-quote&quot;&gt;&apos;Scott&apos;&lt;/span&gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;The test you&apos;ve added uses the &lt;a href=&quot;https://services.odata.org/TripPinRESTierService/(S(4gus0w41xmxedlzbywj2srqo))/People/?$filter=FirstName%20eq%20%27Scott%27&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;reference&lt;/a&gt; odata service, which handles trailing slashes correctly. If you construct a test server based on the olingo4 &lt;a href=&quot;https://olingo.apache.org/doc/odata4/tutorials/read/tutorial_read.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;tutorial&lt;/a&gt;, it will fail. If you would like to run up an existing implementation then feel free to copy the one I have created &lt;a href=&quot;https://github.com/phantomjinx/syndesis/blob/odata-connector-wip/app/connector/odata/src/test/java/io/syndesis/connector/odata/server/ODataTestServer.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;The issue to reflect upon is the assumption of adding a slash with the question mark at L781. Obviously, some odata services will handle it but just in testing I have found that olingo&apos;s own tutorial and implementations of teiid both throw an error. There could well be many more odata services already deployed that would also fail in this fashion. Thus, maybe the slash should be removed entirely or a test done to check whether the slash is supported then acted on accordingly.&lt;/p&gt;</comment>
                            <comment id="16724641" author="dmvolod" created="Wed, 19 Dec 2018 02:57:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=phantomjinx&quot; class=&quot;user-hover&quot; rel=&quot;phantomjinx&quot;&gt;phantomjinx&lt;/a&gt;, thanks for explanation, understood the problem root. Will fix it.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 48 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|s01jl4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>