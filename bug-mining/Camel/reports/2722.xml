<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:02:17 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-7405] SQS endpoint - HttpRoute class not found at route startup</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-7405</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;I have a bundle using aws-sqs endpoint that works in Karaf 2.3.3 and Camel 2.12.1.  We have to upgrade Karaf 2.3.5 and Camel to 2.13.0 for required improvements, and now my bundle fails to load because of missing classes.  I would be satisfied to know which packages to include in my imports or which feature I may be missing,  I have run the below steps in two versions of Camel.  The bundle works in 2.12.1 and fails in 2.13.0.  Here are the steps for version 2.13.0:&lt;/p&gt;

&lt;p&gt;$ mvn archetype:generate -DarchetypeGroupId=org.apache.camel.archetypes -DarchetypeArtifactId=camel-archetype-blueprint -DarchetypeVersion=2.13.0 -DgroupId=com.example.aws -DartifactId=example-aws -Dpackage=com.example.aws -Dversion=2.13.0&lt;br/&gt;
$ mvn package&lt;br/&gt;
$ mvn camel:run&lt;br/&gt;
(verifies archetype runs)&lt;/p&gt;

&lt;p&gt;Add dependency to pom.xml&lt;br/&gt;
	&amp;lt;dependency&amp;gt;    &lt;br/&gt;
	  &amp;lt;groupId&amp;gt;org.apache.camel&amp;lt;/groupId&amp;gt;    &lt;br/&gt;
	  &amp;lt;artifactId&amp;gt;camel-aws&amp;lt;/artifactId&amp;gt;    &lt;br/&gt;
	  &amp;lt;version&amp;gt;2.13.0&amp;lt;/version&amp;gt;&lt;br/&gt;
	&amp;lt;/dependency&amp;gt;&lt;/p&gt;

&lt;p&gt;Add following to maven-bundle-plugin in pom.xml&lt;br/&gt;
    &amp;lt;Import-Package&amp;gt;&lt;br/&gt;
      org.apache.http.conn.routing;version=&quot;[4.3.3,5)&quot;,&lt;br/&gt;
      *&lt;br/&gt;
    &amp;lt;/Import-Package&amp;gt;&lt;/p&gt;

&lt;p&gt;Change endpoint in blueprint.xml&lt;br/&gt;
    &amp;lt;to uri=&quot;aws-sqs://test-queue?accessKey=yourkey&amp;amp;secretKey=yourkey&quot; /&amp;gt;&lt;/p&gt;

&lt;p&gt;(need to change or skip test to package)&lt;br/&gt;
$ mvn -Dmaven.test.skip=true package&lt;br/&gt;
$ mvn camel:run&lt;br/&gt;
(above works, so maven is including all classes)&lt;/p&gt;

&lt;p&gt;Install Karaf 2.3.5&lt;br/&gt;
Set JAVA_HOME to JDK 1.7.0_51&lt;br/&gt;
karaf@root&amp;gt; features:chooseurl camel 2.13.0&lt;br/&gt;
karaf@root&amp;gt; features:install camel-core&lt;br/&gt;
karaf@root&amp;gt; features:install camel-blueprint&lt;br/&gt;
karaf@root&amp;gt; features:install camel-aws&lt;/p&gt;

&lt;p&gt;Drop bundle into deploy folder and observe the following stack trace in the Karaf console:&lt;br/&gt;
karaf@root&amp;gt; ERROR: Bundle example-aws &lt;span class=&quot;error&quot;&gt;&amp;#91;70&amp;#93;&lt;/span&gt; EventDispatcher: Error during dispatch. (java.lang.NoClassDefFoundError: org.apache.http.conn.routing.HttpRoute not found by org.apache.servicemix.bundles.aws-java-sdk &lt;span class=&quot;error&quot;&gt;&amp;#91;68&amp;#93;&lt;/span&gt;)&lt;br/&gt;
java.lang.NoClassDefFoundError: org.apache.http.conn.routing.HttpRoute not found by org.apache.servicemix.bundles.aws-java-sdk &lt;span class=&quot;error&quot;&gt;&amp;#91;68&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at com.amazonaws.http.conn.$Proxy36.&amp;lt;clinit&amp;gt;(Unknown Source)&lt;br/&gt;
        at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)&lt;br/&gt;
        at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)&lt;br/&gt;
        at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)&lt;br/&gt;
        at java.lang.reflect.Constructor.newInstance(Constructor.java:526)&lt;br/&gt;
        at java.lang.reflect.Proxy.newInstance(Proxy.java:748)&lt;br/&gt;
        at java.lang.reflect.Proxy.newProxyInstance(Proxy.java:739)&lt;br/&gt;
        at com.amazonaws.http.conn.ClientConnectionManagerFactory.wrap(ClientConnectionManagerFactory.java:42)&lt;br/&gt;
        at com.amazonaws.http.impl.client.SdkHttpClient.&amp;lt;init&amp;gt;(SdkHttpClient.java:29)&lt;br/&gt;
        at com.amazonaws.http.HttpClientFactory.createHttpClient(HttpClientFactory.java:98)&lt;br/&gt;
        at com.amazonaws.http.AmazonHttpClient.&amp;lt;init&amp;gt;(AmazonHttpClient.java:155)&lt;br/&gt;
        at com.amazonaws.AmazonWebServiceClient.&amp;lt;init&amp;gt;(AmazonWebServiceClient.java:118)&lt;br/&gt;
        at com.amazonaws.AmazonWebServiceClient.&amp;lt;init&amp;gt;(AmazonWebServiceClient.java:102)&lt;br/&gt;
        at com.amazonaws.services.sqs.AmazonSQSClient.&amp;lt;init&amp;gt;(AmazonSQSClient.java:166)&lt;br/&gt;
        at com.amazonaws.services.sqs.AmazonSQSClient.&amp;lt;init&amp;gt;(AmazonSQSClient.java:147)&lt;br/&gt;
        at org.apache.camel.component.aws.sqs.SqsEndpoint.createClient(SqsEndpoint.java:219)&lt;br/&gt;
        at org.apache.camel.component.aws.sqs.SqsEndpoint.getClient(SqsEndpoint.java:204)&lt;br/&gt;
        at org.apache.camel.component.aws.sqs.SqsEndpoint.doStart(SqsEndpoint.java:81)&lt;br/&gt;
        at org.apache.camel.support.ServiceSupport.start(ServiceSupport.java:61)&lt;/p&gt;

&lt;p&gt;(remaining stack omitted)&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows 7 Ent SP1 AND GNU/Linux 2.6.18-274.17.1.0.1.el5&lt;br/&gt;
JDK: 1.7.0_51&lt;br/&gt;
Apache Karaf (2.3.5)&lt;br/&gt;
camel-core (2.13.0)&lt;br/&gt;
camel-karaf-commands (2.13.0)&lt;br/&gt;
camel-blueprint (2.13.0)&lt;br/&gt;
Apache Apache HttpCore OSGi bundle (4.3.2)&lt;br/&gt;
Apache Apache HttpClient OSGi bundle (4.3.3)&lt;br/&gt;
Commons Codec (1.8.0)&lt;br/&gt;
Jackson JSON processor (1.9.12)&lt;br/&gt;
Data mapper for Jackson JSON processor (1.9.12)&lt;br/&gt;
Apache ServiceMix :: Bundles :: aws-java-sdk (1.7.1.1)&lt;br/&gt;
camel-aws (2.13.0)&lt;/p&gt;</environment>
        <key id="12711718">CAMEL-7405</key>
            <summary>SQS endpoint - HttpRoute class not found at route startup</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="jeltgroth">Jeff Eltgroth</reporter>
                        <labels>
                    </labels>
                <created>Thu, 1 May 2014 14:59:27 +0000</created>
                <updated>Thu, 26 Jun 2014 18:22:31 +0000</updated>
                            <resolved>Thu, 26 Jun 2014 18:22:31 +0000</resolved>
                                    <version>2.13.0</version>
                                    <fixVersion>2.13.2</fixVersion>
                    <fixVersion>2.14.0</fixVersion>
                                    <component>camel-aws</component>
                    <component>karaf</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13987429" author="davsclaus" created="Fri, 2 May 2014 06:32:03 +0000"  >&lt;p&gt;Yes the aws-sdk bundle is flawed, logged a ticket &lt;a href=&quot;https://issues.apache.org/jira/browse/SMX4-1751&quot; title=&quot;aws-sdk 1.7.1_1 bundle is flawed &quot; class=&quot;issue-link&quot; data-issue-key=&quot;SMX4-1751&quot;&gt;&lt;del&gt;SMX4-1751&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="13987441" author="davsclaus" created="Fri, 2 May 2014 06:45:39 +0000"  >&lt;p&gt;If you enabled dynamic import on the aws-sdk bundle you can get it working&lt;/p&gt;

&lt;p&gt;dev:dynamic-import &amp;lt;bundleId&amp;gt;&lt;/p&gt;

&lt;p&gt;Also install joda-time 2.3, as that is required. And maybe uninstall the older 1.x first.&lt;/p&gt;</comment>
                            <comment id="13987442" author="davsclaus" created="Fri, 2 May 2014 06:48:14 +0000"  >&lt;p&gt;karaf@root&amp;gt; features:chooseurl camel 2.13.1-SNAPSHOT&lt;br/&gt;
adding feature url mvn:org.apache.camel.karaf/apache-camel/2.13.1-SNAPSHOT/xml/features&lt;br/&gt;
karaf@root&amp;gt; features:install camel&lt;br/&gt;
karaf@root&amp;gt; features:install camel-aws&lt;br/&gt;
karaf@root&amp;gt; list&lt;br/&gt;
[  70] &lt;span class=&quot;error&quot;&gt;&amp;#91;Active     &amp;#93;&lt;/span&gt; [            ] [   50] Apache ServiceMix :: Bundles :: aws-java-sdk (1.7.1.1)&lt;br/&gt;
[  71] &lt;span class=&quot;error&quot;&gt;&amp;#91;Active     &amp;#93;&lt;/span&gt; [            ] [   50] camel-aws (2.13.1.SNAPSHOT)&lt;br/&gt;
karaf@root&amp;gt; dynamic-import 70&lt;br/&gt;
Enabling dynamic imports on bundle org.apache.servicemix.bundles.aws-java-sdk &lt;span class=&quot;error&quot;&gt;&amp;#91;70&amp;#93;&lt;/span&gt;&lt;br/&gt;
karaf@root&amp;gt; install -s mvn:com.example.aws/example-aws/2.13.0&lt;br/&gt;
Bundle ID: 72&lt;br/&gt;
karaf@root&amp;gt; list&lt;br/&gt;
[  72] &lt;span class=&quot;error&quot;&gt;&amp;#91;Active     &amp;#93;&lt;/span&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;Created     &amp;#93;&lt;/span&gt; [       ] [   80] A Camel Blueprint Route (2.13.0)&lt;/p&gt;</comment>
                            <comment id="13987444" author="davsclaus" created="Fri, 2 May 2014 06:50:12 +0000"  >&lt;p&gt;Okay we have a workaround until a new aws-sdk bundle is released.&lt;/p&gt;</comment>
                            <comment id="13987657" author="jeltgroth" created="Fri, 2 May 2014 13:05:41 +0000"  >&lt;p&gt;Great, I just verified my bundle is functional with that workaround.&lt;/p&gt;</comment>
                            <comment id="14014982" author="davsclaus" created="Sun, 1 Jun 2014 13:34:03 +0000"  >&lt;p&gt;Waiting for new SMX bundle releases which has the fix.&lt;/p&gt;</comment>
                            <comment id="14044979" author="davsclaus" created="Thu, 26 Jun 2014 18:22:31 +0000"  >&lt;p&gt;We have upgraded to 1.7.12_1 bundle&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="12711888">SMX4-1751</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>390039</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 21 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1v6lj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>390277</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>