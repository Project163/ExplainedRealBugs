<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:26:53 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-12025] Possible Intermittent failures in ReactorStreamsServiceTest</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-12025</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;The copy of the test we have in WildFly Camel fails intermittently - see &lt;a href=&quot;https://github.com/wildfly-extras/wildfly-camel/issues/2320&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/wildfly-extras/wildfly-camel/issues/2320&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The fix available in &lt;a href=&quot;https://github.com/wildfly-extras/wildfly-camel/pull/2324&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/wildfly-extras/wildfly-camel/pull/2324&lt;/a&gt; just needs to be ported back to Camel.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13120404">CAMEL-12025</key>
            <summary>Possible Intermittent failures in ReactorStreamsServiceTest</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ppalaga">Peter Palaga</assignee>
                                    <reporter username="ppalaga">Peter Palaga</reporter>
                        <labels>
                    </labels>
                <created>Thu, 23 Nov 2017 07:47:43 +0000</created>
                <updated>Fri, 24 Nov 2017 11:59:32 +0000</updated>
                            <resolved>Thu, 23 Nov 2017 12:46:30 +0000</resolved>
                                                    <fixVersion>2.20.2</fixVersion>
                    <fixVersion>2.21.0</fixVersion>
                                    <component>camel-reactor</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16264003" author="githubbot" created="Thu, 23 Nov 2017 08:51:58 +0000"  >&lt;p&gt;ppalaga opened a new pull request #2110: &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12025&quot; title=&quot;Possible Intermittent failures in ReactorStreamsServiceTest&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12025&quot;&gt;&lt;del&gt;CAMEL-12025&lt;/del&gt;&lt;/a&gt;: Possible Intermittent failures in ReactorStreamsServiceTest&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/camel/pull/2110&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2110&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @lburgazzoli this is the backport from &lt;a href=&quot;https://github.com/wildfly-extras/wildfly-camel/pull/2324&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/wildfly-extras/wildfly-camel/pull/2324&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16264004" author="githubbot" created="Thu, 23 Nov 2017 08:51:59 +0000"  >&lt;p&gt;GitHub user ppalaga opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/2110&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2110&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12025&quot; title=&quot;Possible Intermittent failures in ReactorStreamsServiceTest&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12025&quot;&gt;&lt;del&gt;CAMEL-12025&lt;/del&gt;&lt;/a&gt;: Possible Intermittent failures in ReactorStreamsServiceTest&lt;/p&gt;

&lt;p&gt;    @lburgazzoli this is the backport from &lt;a href=&quot;https://github.com/wildfly-extras/wildfly-camel/pull/2324&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/wildfly-extras/wildfly-camel/pull/2324&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/ppalaga/camel&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/ppalaga/camel&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12025&quot; title=&quot;Possible Intermittent failures in ReactorStreamsServiceTest&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12025&quot;&gt;&lt;del&gt;CAMEL-12025&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/2110.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2110.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #2110&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit adc1cb0cdc45572bdad8eee838c2d24cc460aa1d&lt;br/&gt;
Author: Peter Palaga &amp;lt;ppalaga@redhat.com&amp;gt;&lt;br/&gt;
Date:   2017-11-23T08:50:32Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12025&quot; title=&quot;Possible Intermittent failures in ReactorStreamsServiceTest&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12025&quot;&gt;&lt;del&gt;CAMEL-12025&lt;/del&gt;&lt;/a&gt;: Possible Intermittent failures in ReactorStreamsServiceTest&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16265087" author="githubbot" created="Fri, 24 Nov 2017 09:38:39 +0000"  >&lt;p&gt;davsclaus commented on issue #2110: &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12025&quot; title=&quot;Possible Intermittent failures in ReactorStreamsServiceTest&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12025&quot;&gt;&lt;del&gt;CAMEL-12025&lt;/del&gt;&lt;/a&gt;: Possible Intermittent failures in ReactorStreamsServiceTest&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/camel/pull/2110#issuecomment-346784838&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2110#issuecomment-346784838&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Thanks for the PR it has been merged. Do you mind closing this?&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16265210" author="githubbot" created="Fri, 24 Nov 2017 11:59:31 +0000"  >&lt;p&gt;ppalaga closed pull request #2110: &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12025&quot; title=&quot;Possible Intermittent failures in ReactorStreamsServiceTest&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12025&quot;&gt;&lt;del&gt;CAMEL-12025&lt;/del&gt;&lt;/a&gt;: Possible Intermittent failures in ReactorStreamsServiceTest&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/camel/pull/2110&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2110&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/components/camel-reactor/src/test/java/org/apache/camel/component/reactor/engine/ReactorStreamsServiceTest.java b/components/camel-reactor/src/test/java/org/apache/camel/component/reactor/engine/ReactorStreamsServiceTest.java&lt;br/&gt;
index 19a1f5ce997..9b9df6b3a30 100644&lt;br/&gt;
&amp;#8212; a/components/camel-reactor/src/test/java/org/apache/camel/component/reactor/engine/ReactorStreamsServiceTest.java&lt;br/&gt;
+++ b/components/camel-reactor/src/test/java/org/apache/camel/component/reactor/engine/ReactorStreamsServiceTest.java&lt;br/&gt;
@@ -16,6 +16,10 @@&lt;br/&gt;
  */&lt;br/&gt;
 package org.apache.camel.component.reactor.engine;&lt;/p&gt;

&lt;p&gt;+import java.util.Arrays;&lt;br/&gt;
+import java.util.Collections;&lt;br/&gt;
+import java.util.Set;&lt;br/&gt;
+import java.util.TreeSet;&lt;br/&gt;
 import java.util.concurrent.CountDownLatch;&lt;br/&gt;
 import java.util.concurrent.TimeUnit;&lt;br/&gt;
 import java.util.concurrent.atomic.AtomicInteger;&lt;br/&gt;
@@ -35,7 +39,7 @@&lt;br/&gt;
 import reactor.core.publisher.Flux;&lt;/p&gt;

&lt;p&gt; public class ReactorStreamsServiceTest extends ReactorStreamsServiceTestSupport {&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;p&gt;+&lt;br/&gt;
     // ************************************************&lt;br/&gt;
     // Setup&lt;br/&gt;
     // ************************************************&lt;br/&gt;
@@ -287,70 +291,74 @@ public void configure() {&lt;br/&gt;
     public void testTo() throws Exception &lt;/p&gt;
{
         context.start();
 
-        AtomicInteger value = new AtomicInteger(0);
-        CountDownLatch latch = new CountDownLatch(1);
+        Set&amp;lt;String&amp;gt; values = Collections.synchronizedSet(new TreeSet&amp;lt;&amp;gt;());
+        CountDownLatch latch = new CountDownLatch(3);
 
         Flux.just(1, 2, 3)
             .flatMap(e -&amp;gt; crs.to(&quot;bean:hello&quot;, e, String.class))
-            .doOnNext(res -&amp;gt; Assert.assertEquals(&quot;Hello &quot; + value.incrementAndGet(), res))
+            .doOnNext(res -&amp;gt; values.add(res))
             .doOnNext(res -&amp;gt; latch.countDown())
             .subscribe();
 
         Assert.assertTrue(latch.await(2, TimeUnit.SECONDS));
+        Assert.assertEquals(new TreeSet&amp;lt;&amp;gt;(Arrays.asList(&quot;Hello 1&quot;, &quot;Hello 2&quot;, &quot;Hello 3&quot;)), values);
     }&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;     @Test&lt;br/&gt;
     public void testToWithExchange() throws Exception &lt;/p&gt;
{
         context.start();
 
-        AtomicInteger value = new AtomicInteger(0);
-        CountDownLatch latch = new CountDownLatch(1);
+        Set&amp;lt;String&amp;gt; values = Collections.synchronizedSet(new TreeSet&amp;lt;&amp;gt;());
+        CountDownLatch latch = new CountDownLatch(3);
 
         Flux.just(1, 2, 3)
             .flatMap(e -&amp;gt; crs.to(&quot;bean:hello&quot;, e))
             .map(e -&amp;gt; e.getOut())
             .map(e -&amp;gt; e.getBody(String.class))
-            .doOnNext(res -&amp;gt; Assert.assertEquals(&quot;Hello &quot; + value.incrementAndGet(), res))
+            .doOnNext(res -&amp;gt; values.add(res))
             .doOnNext(res -&amp;gt; latch.countDown())
             .subscribe();
 
         Assert.assertTrue(latch.await(2, TimeUnit.SECONDS));
+        Assert.assertEquals(new TreeSet&amp;lt;&amp;gt;(Arrays.asList(&quot;Hello 1&quot;, &quot;Hello 2&quot;, &quot;Hello 3&quot;)), values);
     }

&lt;p&gt;     @Test&lt;br/&gt;
     public void testToFunction() throws Exception &lt;/p&gt;
{
         context.start();
 
-        AtomicInteger value = new AtomicInteger(0);
-        CountDownLatch latch = new CountDownLatch(1);
+        Set&amp;lt;String&amp;gt; values = Collections.synchronizedSet(new TreeSet&amp;lt;&amp;gt;());
+        CountDownLatch latch = new CountDownLatch(3);
         Function&amp;lt;Object, Publisher&amp;lt;String&amp;gt;&amp;gt; fun = crs.to(&quot;bean:hello&quot;, String.class);
 
         Flux.just(1, 2, 3)
             .flatMap(fun)
-            .doOnNext(res -&amp;gt; Assert.assertEquals(&quot;Hello &quot; + value.incrementAndGet(), res))
+            .doOnNext(res -&amp;gt; values.add(res))
             .doOnNext(res -&amp;gt; latch.countDown())
             .subscribe();
 
         Assert.assertTrue(latch.await(2, TimeUnit.SECONDS));
+        Assert.assertEquals(new TreeSet&amp;lt;&amp;gt;(Arrays.asList(&quot;Hello 1&quot;, &quot;Hello 2&quot;, &quot;Hello 3&quot;)), values);
     }

&lt;p&gt;     @Test&lt;br/&gt;
     public void testToFunctionWithExchange() throws Exception &lt;/p&gt;
{
         context.start();
 
-        AtomicInteger value = new AtomicInteger(0);
-        CountDownLatch latch = new CountDownLatch(1);
+        Set&amp;lt;String&amp;gt; values = Collections.synchronizedSet(new TreeSet&amp;lt;&amp;gt;());
+        CountDownLatch latch = new CountDownLatch(3);
         Function&amp;lt;Object, Publisher&amp;lt;Exchange&amp;gt;&amp;gt; fun = crs.to(&quot;bean:hello&quot;);
 
         Flux.just(1, 2, 3)
             .flatMap(fun)
             .map(e -&amp;gt; e.getOut())
             .map(e -&amp;gt; e.getBody(String.class))
-            .doOnNext(res -&amp;gt; Assert.assertEquals(&quot;Hello &quot; + value.incrementAndGet(), res))
+            .doOnNext(res -&amp;gt; values.add(res))
             .doOnNext(res -&amp;gt; latch.countDown())
             .subscribe();
 
         Assert.assertTrue(latch.await(2, TimeUnit.SECONDS));
+        Assert.assertEquals(new TreeSet&amp;lt;&amp;gt;(Arrays.asList(&quot;Hello 1&quot;, &quot;Hello 2&quot;, &quot;Hello 3&quot;)), values);
     }

&lt;p&gt;     // ************************************************&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16265211" author="githubbot" created="Fri, 24 Nov 2017 11:59:32 +0000"  >&lt;p&gt;Github user ppalaga closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/2110&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2110&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 51 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3n4nb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>