<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 11:07:20 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-21056] Delay when using readLockMinAge</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-21056</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;When using the file component with the readLockMinAge setting, consuming each file incurs a delay the length of readLockMinAge . So when `readLockMinAge=5s` and there are 1000 files, it takes 5000 seconds to consume all files.&lt;/p&gt;

&lt;p&gt;Example route URL: &lt;a href=&quot;file:/tmp/test?readLock=changed&amp;amp;readLockMinAge=5s&amp;amp;recursive=true&amp;amp;delete=true&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:/tmp/test?readLock=changed&amp;amp;amp;readLockMinAge=5s&amp;amp;amp;recursive=true&amp;amp;amp;delete=true&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This has two disadvantages:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;The maximal rate at which files are processed is 1/readLockMinAge. This severly limits throughput on a route.&lt;/li&gt;
	&lt;li&gt;When a route is started it will initially wait for readLockMinAge before processing a file. Even if the file was written long ago.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Camel up to version 3.20.5 processes files instantly as soon as the min age is reached. Since version 3.20.6 files are not processed instantly even if they are older than min age. Instead, the file component will wait for readLockMinAge for each file individually.&lt;/p&gt;

&lt;p&gt;This regression was introduced in commit &lt;a href=&quot;https://github.com/apache/camel/commit/5459f1da2673205a6c24041a8631ac99088b5eae&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/commit/5459f1da2673205a6c24041a8631ac99088b5eae &lt;/a&gt;I can sympathize with the goal of that change, as I&apos;ve experienced that problem as well because file-managers preserve last-changed dates when copying files to new places. However I do judge the importance of throughput in the usual case higher than avoiding premature processing of files in the edge case. I think the change should be reverted. A separate strategy or option for that use-case could be introduced.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13588170">CAMEL-21056</key>
            <summary>Delay when using readLockMinAge</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="sbalmer">Stephan Balmer</reporter>
                        <labels>
                    </labels>
                <created>Wed, 7 Aug 2024 15:33:28 +0000</created>
                <updated>Fri, 9 Aug 2024 11:08:53 +0000</updated>
                            <resolved>Thu, 8 Aug 2024 09:40:24 +0000</resolved>
                                    <version>3.20.6</version>
                                    <fixVersion>3.22.3</fixVersion>
                                    <component>camel-file</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17871726" author="davsclaus" created="Wed, 7 Aug 2024 16:51:59 +0000"  >&lt;p&gt;Try with latest 3.22.x version&lt;/p&gt;</comment>
                            <comment id="17871730" author="davsclaus" created="Wed, 7 Aug 2024 17:02:53 +0000"  >&lt;p&gt;This has been reverted here&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/camel/commit/b89d9573f6e591eee7030605af65a213367b4fa0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/commit/b89d9573f6e591eee7030605af65a213367b4fa0&lt;/a&gt;&lt;/p&gt;
</comment>
                            <comment id="17871731" author="davsclaus" created="Wed, 7 Aug 2024 17:04:00 +0000"  >&lt;p&gt;Its a bit tricky to change in a patch release for 3.22.x as 3.x is EOL soon.&lt;/p&gt;</comment>
                            <comment id="17871921" author="davsclaus" created="Thu, 8 Aug 2024 09:40:24 +0000"  >&lt;p&gt;Okay we have reverted this for the 3.22.3 release. Added a note in the upgrade guide as well.&lt;/p&gt;</comment>
                            <comment id="17871922" author="davsclaus" created="Thu, 8 Aug 2024 09:40:53 +0000"  >&lt;p&gt;You can use 3.20.5, or use a custom read lock strategy and copy the old code and use that with 3.20.6&lt;/p&gt;</comment>
                            <comment id="17872312" author="JIRAUSER287443" created="Fri, 9 Aug 2024 11:08:53 +0000"  >&lt;p&gt;Thanks for the quick reply and action! That motivates me to take the plunge into Camel 4 &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13537164">CAMEL-19378</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 13 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1qqug:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310080" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Regression</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10091"><![CDATA[Regression]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>