<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:32:38 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-12991] SftpEndpoint does not allow to use custom process strategy</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-12991</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;SftpEndpoint always create generic file strategy even processStrategy object is set in endpoint, same code is used in FtpEndpoint so it&apos;s not working also&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@Override
&lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; RemoteFileConsumer&amp;lt;SftpRemoteFile&amp;gt; buildConsumer(Processor processor) {
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SftpConsumer(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;, processor, createRemoteFileOperations(), createGenericFileStrategy());
}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;it is working in FileEnpoint&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; FileConsumer newFileConsumer(Processor processor, GenericFileOperations&amp;lt;File&amp;gt; operations) {
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; FileConsumer(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;, processor, operations, processStrategy != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; ? processStrategy : createGenericFileStrategy());
}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13203680">CAMEL-12991</key>
            <summary>SftpEndpoint does not allow to use custom process strategy</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="kolas">Seweryn Walendzik</reporter>
                        <labels>
                    </labels>
                <created>Tue, 11 Dec 2018 10:45:43 +0000</created>
                <updated>Wed, 12 Dec 2018 09:32:30 +0000</updated>
                            <resolved>Wed, 12 Dec 2018 09:32:30 +0000</resolved>
                                    <version>2.23.0</version>
                                    <fixVersion>2.23.1</fixVersion>
                    <fixVersion>2.24.0</fixVersion>
                    <fixVersion>3.0.0</fixVersion>
                                    <component>camel-ftp</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16717110" author="davsclaus" created="Tue, 11 Dec 2018 13:16:20 +0000"  >&lt;p&gt;You are welcome to provide a PR with a fix&lt;/p&gt;</comment>
                            <comment id="16717382" author="githubbot" created="Tue, 11 Dec 2018 15:30:21 +0000"  >&lt;p&gt;swalendzik opened a new pull request #2665: &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12991&quot; title=&quot;SftpEndpoint does not allow to use custom process strategy&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12991&quot;&gt;&lt;del&gt;CAMEL-12991&lt;/del&gt;&lt;/a&gt; setting processStrategy for sftp/ftp endpoints&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/camel/pull/2665&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2665&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16717402" author="githubbot" created="Tue, 11 Dec 2018 15:41:09 +0000"  >&lt;p&gt;onderson commented on a change in pull request #2665: &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12991&quot; title=&quot;SftpEndpoint does not allow to use custom process strategy&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12991&quot;&gt;&lt;del&gt;CAMEL-12991&lt;/del&gt;&lt;/a&gt; setting processStrategy for sftp/ftp endpoints&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/camel/pull/2665#discussion_r240663382&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2665#discussion_r240663382&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: components/camel-ftp/src/test/java/org/apache/camel/component/file/remote/FtpConsumerProcessStrategyTest.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -0,0 +1,93 @@&lt;br/&gt;
+/**&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one or more&lt;br/&gt;
+ * contributor license agreements.  See the NOTICE file distributed with&lt;br/&gt;
+ * this work for additional information regarding copyright ownership.&lt;br/&gt;
+ * The ASF licenses this file to You under the Apache License, Version 2.0&lt;br/&gt;
+ * (the &quot;License&quot;); you may not use this file except in compliance with&lt;br/&gt;
+ * the License.  You may obtain a copy of the License at&lt;br/&gt;
+ * &amp;lt;p&amp;gt;&lt;br/&gt;
+ * &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ * &amp;lt;p&amp;gt;&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
+ * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
+ * See the License for the specific language governing permissions and&lt;br/&gt;
+ * limitations under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+package org.apache.camel.component.file.remote;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.camel.Exchange;&lt;br/&gt;
+import org.apache.camel.component.file.GenericFile;&lt;br/&gt;
+import org.apache.camel.component.file.GenericFileEndpoint;&lt;br/&gt;
+import org.apache.camel.component.file.GenericFileOperations;&lt;br/&gt;
+import org.apache.camel.component.file.GenericFileProcessStrategy;&lt;br/&gt;
+import org.apache.camel.impl.JndiRegistry;&lt;br/&gt;
+import org.junit.Test;&lt;br/&gt;
+&lt;br/&gt;
+/**&lt;br/&gt;
+ * @author Seweryn Walendzik on 12/11/18.&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   please remove&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16717403" author="githubbot" created="Tue, 11 Dec 2018 15:41:09 +0000"  >&lt;p&gt;onderson commented on a change in pull request #2665: &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12991&quot; title=&quot;SftpEndpoint does not allow to use custom process strategy&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12991&quot;&gt;&lt;del&gt;CAMEL-12991&lt;/del&gt;&lt;/a&gt; setting processStrategy for sftp/ftp endpoints&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/camel/pull/2665#discussion_r240663223&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2665#discussion_r240663223&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: components/camel-ftp/src/test/java/org/apache/camel/component/file/remote/sftp/SftpConsumerProcessStrategyTest.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -0,0 +1,96 @@&lt;br/&gt;
+/**&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one or more&lt;br/&gt;
+ * contributor license agreements.  See the NOTICE file distributed with&lt;br/&gt;
+ * this work for additional information regarding copyright ownership.&lt;br/&gt;
+ * The ASF licenses this file to You under the Apache License, Version 2.0&lt;br/&gt;
+ * (the &quot;License&quot;); you may not use this file except in compliance with&lt;br/&gt;
+ * the License.  You may obtain a copy of the License at&lt;br/&gt;
+ * &amp;lt;p&amp;gt;&lt;br/&gt;
+ * &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ * &amp;lt;p&amp;gt;&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
+ * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
+ * See the License for the specific language governing permissions and&lt;br/&gt;
+ * limitations under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+package org.apache.camel.component.file.remote.sftp;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.camel.Exchange;&lt;br/&gt;
+import org.apache.camel.component.file.GenericFile;&lt;br/&gt;
+import org.apache.camel.component.file.GenericFileEndpoint;&lt;br/&gt;
+import org.apache.camel.component.file.GenericFileOperations;&lt;br/&gt;
+import org.apache.camel.component.file.GenericFileProcessStrategy;&lt;br/&gt;
+import org.apache.camel.impl.JndiRegistry;&lt;br/&gt;
+import org.junit.Test;&lt;br/&gt;
+&lt;br/&gt;
+/**&lt;br/&gt;
+ * @author Seweryn Walendzik on 12/11/18.&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   please remove&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16717404" author="githubbot" created="Tue, 11 Dec 2018 15:41:29 +0000"  >&lt;p&gt;onderson commented on issue #2665: &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12991&quot; title=&quot;SftpEndpoint does not allow to use custom process strategy&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12991&quot;&gt;&lt;del&gt;CAMEL-12991&lt;/del&gt;&lt;/a&gt; setting processStrategy for sftp/ftp endpoints&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/camel/pull/2665#issuecomment-446248024&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2665#issuecomment-446248024&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   LGTM&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16717552" author="githubbot" created="Tue, 11 Dec 2018 17:10:23 +0000"  >&lt;p&gt;swalendzik commented on a change in pull request #2665: &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12991&quot; title=&quot;SftpEndpoint does not allow to use custom process strategy&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12991&quot;&gt;&lt;del&gt;CAMEL-12991&lt;/del&gt;&lt;/a&gt; setting processStrategy for sftp/ftp endpoints&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/camel/pull/2665#discussion_r240705851&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2665#discussion_r240705851&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: components/camel-ftp/src/test/java/org/apache/camel/component/file/remote/sftp/SftpConsumerProcessStrategyTest.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -0,0 +1,96 @@&lt;br/&gt;
+/**&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one or more&lt;br/&gt;
+ * contributor license agreements.  See the NOTICE file distributed with&lt;br/&gt;
+ * this work for additional information regarding copyright ownership.&lt;br/&gt;
+ * The ASF licenses this file to You under the Apache License, Version 2.0&lt;br/&gt;
+ * (the &quot;License&quot;); you may not use this file except in compliance with&lt;br/&gt;
+ * the License.  You may obtain a copy of the License at&lt;br/&gt;
+ * &amp;lt;p&amp;gt;&lt;br/&gt;
+ * &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ * &amp;lt;p&amp;gt;&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
+ * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
+ * See the License for the specific language governing permissions and&lt;br/&gt;
+ * limitations under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+package org.apache.camel.component.file.remote.sftp;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.camel.Exchange;&lt;br/&gt;
+import org.apache.camel.component.file.GenericFile;&lt;br/&gt;
+import org.apache.camel.component.file.GenericFileEndpoint;&lt;br/&gt;
+import org.apache.camel.component.file.GenericFileOperations;&lt;br/&gt;
+import org.apache.camel.component.file.GenericFileProcessStrategy;&lt;br/&gt;
+import org.apache.camel.impl.JndiRegistry;&lt;br/&gt;
+import org.junit.Test;&lt;br/&gt;
+&lt;br/&gt;
+/**&lt;br/&gt;
+ * @author Seweryn Walendzik on 12/11/18.&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   removed&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16717553" author="githubbot" created="Tue, 11 Dec 2018 17:10:31 +0000"  >&lt;p&gt;swalendzik commented on a change in pull request #2665: &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12991&quot; title=&quot;SftpEndpoint does not allow to use custom process strategy&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12991&quot;&gt;&lt;del&gt;CAMEL-12991&lt;/del&gt;&lt;/a&gt; setting processStrategy for sftp/ftp endpoints&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/camel/pull/2665#discussion_r240705944&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2665#discussion_r240705944&lt;/a&gt;&lt;/p&gt;



&lt;p&gt; ##########&lt;br/&gt;
 File path: components/camel-ftp/src/test/java/org/apache/camel/component/file/remote/FtpConsumerProcessStrategyTest.java&lt;br/&gt;
 ##########&lt;br/&gt;
 @@ -0,0 +1,93 @@&lt;br/&gt;
+/**&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one or more&lt;br/&gt;
+ * contributor license agreements.  See the NOTICE file distributed with&lt;br/&gt;
+ * this work for additional information regarding copyright ownership.&lt;br/&gt;
+ * The ASF licenses this file to You under the Apache License, Version 2.0&lt;br/&gt;
+ * (the &quot;License&quot;); you may not use this file except in compliance with&lt;br/&gt;
+ * the License.  You may obtain a copy of the License at&lt;br/&gt;
+ * &amp;lt;p&amp;gt;&lt;br/&gt;
+ * &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ * &amp;lt;p&amp;gt;&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
+ * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
+ * See the License for the specific language governing permissions and&lt;br/&gt;
+ * limitations under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+package org.apache.camel.component.file.remote;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.camel.Exchange;&lt;br/&gt;
+import org.apache.camel.component.file.GenericFile;&lt;br/&gt;
+import org.apache.camel.component.file.GenericFileEndpoint;&lt;br/&gt;
+import org.apache.camel.component.file.GenericFileOperations;&lt;br/&gt;
+import org.apache.camel.component.file.GenericFileProcessStrategy;&lt;br/&gt;
+import org.apache.camel.impl.JndiRegistry;&lt;br/&gt;
+import org.junit.Test;&lt;br/&gt;
+&lt;br/&gt;
+/**&lt;br/&gt;
+ * @author Seweryn Walendzik on 12/11/18.&lt;/p&gt;

&lt;p&gt; Review comment:&lt;br/&gt;
   removed&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16718668" author="githubbot" created="Wed, 12 Dec 2018 09:19:19 +0000"  >&lt;p&gt;davsclaus closed pull request #2665: &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12991&quot; title=&quot;SftpEndpoint does not allow to use custom process strategy&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12991&quot;&gt;&lt;del&gt;CAMEL-12991&lt;/del&gt;&lt;/a&gt; setting processStrategy for sftp/ftp endpoints&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/camel/pull/2665&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2665&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/components/camel-ftp/src/main/java/org/apache/camel/component/file/remote/FtpEndpoint.java b/components/camel-ftp/src/main/java/org/apache/camel/component/file/remote/FtpEndpoint.java&lt;br/&gt;
index 22a72ca61dc..51a590c9ae7 100644&lt;br/&gt;
&amp;#8212; a/components/camel-ftp/src/main/java/org/apache/camel/component/file/remote/FtpEndpoint.java&lt;br/&gt;
+++ b/components/camel-ftp/src/main/java/org/apache/camel/component/file/remote/FtpEndpoint.java&lt;br/&gt;
@@ -96,7 +96,7 @@ public String getScheme() {&lt;br/&gt;
     @Override&lt;br/&gt;
     protected RemoteFileConsumer&amp;lt;FTPFile&amp;gt; buildConsumer(Processor processor) {&lt;br/&gt;
         try &lt;/p&gt;
{
-            return new FtpConsumer(this, processor, createRemoteFileOperations(), createGenericFileStrategy());
+            return new FtpConsumer(this, processor, createRemoteFileOperations(), processStrategy != null ? processStrategy : createGenericFileStrategy());
         }
&lt;p&gt; catch (Exception e) &lt;/p&gt;
{
             throw new FailedToCreateConsumerException(this, e);
         }
&lt;p&gt;diff --git a/components/camel-ftp/src/main/java/org/apache/camel/component/file/remote/SftpEndpoint.java b/components/camel-ftp/src/main/java/org/apache/camel/component/file/remote/SftpEndpoint.java&lt;br/&gt;
index 069dfa7411d..41456f5d25b 100644&lt;br/&gt;
&amp;#8212; a/components/camel-ftp/src/main/java/org/apache/camel/component/file/remote/SftpEndpoint.java&lt;br/&gt;
+++ b/components/camel-ftp/src/main/java/org/apache/camel/component/file/remote/SftpEndpoint.java&lt;br/&gt;
@@ -62,7 +62,7 @@ public void setConfiguration(GenericFileConfiguration configuration) {&lt;/p&gt;

&lt;p&gt;     @Override&lt;br/&gt;
     protected RemoteFileConsumer&amp;lt;SftpRemoteFile&amp;gt; buildConsumer(Processor processor) &lt;/p&gt;
{
-        return new SftpConsumer(this, processor, createRemoteFileOperations(), createGenericFileStrategy());
+        return new SftpConsumer(this, processor, createRemoteFileOperations(), processStrategy != null ? processStrategy : createGenericFileStrategy());
     }

&lt;p&gt;     protected GenericFileProducer&amp;lt;SftpRemoteFile&amp;gt; buildProducer() {&lt;br/&gt;
diff --git a/components/camel-ftp/src/test/java/org/apache/camel/component/file/remote/FtpConsumerProcessStrategyTest.java b/components/camel-ftp/src/test/java/org/apache/camel/component/file/remote/FtpConsumerProcessStrategyTest.java&lt;br/&gt;
new file mode 100644&lt;br/&gt;
index 00000000000..13b2c45d9bb&lt;br/&gt;
&amp;#8212; /dev/null&lt;br/&gt;
+++ b/components/camel-ftp/src/test/java/org/apache/camel/component/file/remote/FtpConsumerProcessStrategyTest.java&lt;br/&gt;
@@ -0,0 +1,90 @@&lt;br/&gt;
+/**&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one or more&lt;br/&gt;
+ * contributor license agreements.  See the NOTICE file distributed with&lt;br/&gt;
+ * this work for additional information regarding copyright ownership.&lt;br/&gt;
+ * The ASF licenses this file to You under the Apache License, Version 2.0&lt;br/&gt;
+ * (the &quot;License&quot;); you may not use this file except in compliance with&lt;br/&gt;
+ * the License.  You may obtain a copy of the License at&lt;br/&gt;
+ * &amp;lt;p&amp;gt;&lt;br/&gt;
+ * &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ * &amp;lt;p&amp;gt;&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
+ * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
+ * See the License for the specific language governing permissions and&lt;br/&gt;
+ * limitations under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+package org.apache.camel.component.file.remote;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.camel.Exchange;&lt;br/&gt;
+import org.apache.camel.component.file.GenericFile;&lt;br/&gt;
+import org.apache.camel.component.file.GenericFileEndpoint;&lt;br/&gt;
+import org.apache.camel.component.file.GenericFileOperations;&lt;br/&gt;
+import org.apache.camel.component.file.GenericFileProcessStrategy;&lt;br/&gt;
+import org.apache.camel.impl.JndiRegistry;&lt;br/&gt;
+import org.junit.Test;&lt;br/&gt;
+&lt;br/&gt;
+public class FtpConsumerProcessStrategyTest extends FtpServerTestSupport {&lt;br/&gt;
+&lt;br/&gt;
+    private MyStrategy myStrategy;&lt;br/&gt;
+&lt;br/&gt;
+    @Override&lt;br/&gt;
+    protected JndiRegistry createRegistry() throws Exception &lt;/p&gt;
{
+        JndiRegistry jndi = super.createRegistry();
+        myStrategy = new MyStrategy();
+        jndi.bind(&quot;myStrategy&quot;, myStrategy);
+        return jndi;
+    }&lt;br/&gt;
+&lt;br/&gt;
+    private String getFtpUrl() {
+        return &quot;ftp://admin@localhost:&quot; + getPort() + &quot;/&quot; + FTP_ROOT_DIR + &quot;?password=admin&amp;amp;processStrategy=#myStrategy&quot;;
+    }&lt;br/&gt;
+&lt;br/&gt;
+    @Test&lt;br/&gt;
+    public void testFtpConsume() throws Exception {&lt;br/&gt;
+        if (!canTest()) {
+            return;
+        }&lt;br/&gt;
+&lt;br/&gt;
+        sendFile(getFtpUrl(), &quot;Hello World&quot;, &quot;hello.txt&quot;);&lt;br/&gt;
+&lt;br/&gt;
+        String out = consumer.receiveBody(getFtpUrl(), 5000, String.class);&lt;br/&gt;
+        assertNotNull(out);&lt;br/&gt;
+        assertTrue(out.startsWith(&quot;Hello World&quot;));&lt;br/&gt;
+        assertEquals(&quot;Begin should have been invoked 1 times&quot;, 1, myStrategy.getInvoked());&lt;br/&gt;
+    }&lt;br/&gt;
+&lt;br/&gt;
+    private static class MyStrategy implements GenericFileProcessStrategy {&lt;br/&gt;
+&lt;br/&gt;
+        private volatile int invoked;&lt;br/&gt;
+&lt;br/&gt;
+        @Override&lt;br/&gt;
+        public void prepareOnStartup(GenericFileOperations operations, GenericFileEndpoint endpoint) throws Exception {
+            //noop
+        }&lt;br/&gt;
+&lt;br/&gt;
+        @Override&lt;br/&gt;
+        public boolean begin(GenericFileOperations operations, GenericFileEndpoint endpoint, Exchange exchange, GenericFile file) throws Exception {
+            return true;
+        }&lt;br/&gt;
+&lt;br/&gt;
+        @Override&lt;br/&gt;
+        public void abort(GenericFileOperations operations, GenericFileEndpoint endpoint, Exchange exchange, GenericFile file) throws Exception {+            //noop+        }&lt;br/&gt;
+&lt;br/&gt;
+        @Override&lt;br/&gt;
+        public void commit(GenericFileOperations operations, GenericFileEndpoint endpoint, Exchange exchange, GenericFile file) throws Exception {
+            invoked++;
+        }&lt;br/&gt;
+&lt;br/&gt;
+        @Override&lt;br/&gt;
+        public void rollback(GenericFileOperations operations, GenericFileEndpoint endpoint, Exchange exchange, GenericFile file) throws Exception {
+            //noop
+        }&lt;br/&gt;
+&lt;br/&gt;
+        int getInvoked() {
+            return invoked;
+        }&lt;br/&gt;
+    }&lt;br/&gt;
+}&lt;br/&gt;
\ No newline at end of file&lt;br/&gt;
diff --git a/components/camel-ftp/src/test/java/org/apache/camel/component/file/remote/sftp/SftpConsumerProcessStrategyTest.java b/components/camel-ftp/src/test/java/org/apache/camel/component/file/remote/sftp/SftpConsumerProcessStrategyTest.java&lt;br/&gt;
new file mode 100644&lt;br/&gt;
index 00000000000..d3147285b49&lt;br/&gt;
&amp;#8212; /dev/null&lt;br/&gt;
+++ b/components/camel-ftp/src/test/java/org/apache/camel/component/file/remote/sftp/SftpConsumerProcessStrategyTest.java&lt;br/&gt;
@@ -0,0 +1,93 @@&lt;br/&gt;
+/**&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one or more&lt;br/&gt;
+ * contributor license agreements.  See the NOTICE file distributed with&lt;br/&gt;
+ * this work for additional information regarding copyright ownership.&lt;br/&gt;
+ * The ASF licenses this file to You under the Apache License, Version 2.0&lt;br/&gt;
+ * (the &quot;License&quot;); you may not use this file except in compliance with&lt;br/&gt;
+ * the License.  You may obtain a copy of the License at&lt;br/&gt;
+ * &amp;lt;p&amp;gt;&lt;br/&gt;
+ * &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ * &amp;lt;p&amp;gt;&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
+ * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
+ * See the License for the specific language governing permissions and&lt;br/&gt;
+ * limitations under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+package org.apache.camel.component.file.remote.sftp;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.camel.Exchange;&lt;br/&gt;
+import org.apache.camel.component.file.GenericFile;&lt;br/&gt;
+import org.apache.camel.component.file.GenericFileEndpoint;&lt;br/&gt;
+import org.apache.camel.component.file.GenericFileOperations;&lt;br/&gt;
+import org.apache.camel.component.file.GenericFileProcessStrategy;&lt;br/&gt;
+import org.apache.camel.impl.JndiRegistry;&lt;br/&gt;
+import org.junit.Test;&lt;br/&gt;
+&lt;br/&gt;
+public class SftpConsumerProcessStrategyTest extends SftpServerTestSupport {&lt;br/&gt;
+&lt;br/&gt;
+    private MyStrategy myStrategy;&lt;br/&gt;
+&lt;br/&gt;
+    @Override&lt;br/&gt;
+    public boolean isUseRouteBuilder() {
+        return false;
+    }&lt;br/&gt;
+&lt;br/&gt;
+    @Override&lt;br/&gt;
+    protected JndiRegistry createRegistry() throws Exception {+        JndiRegistry jndi = super.createRegistry();+        myStrategy = new MyStrategy();+        jndi.bind(&quot;myStrategy&quot;, myStrategy);+        return jndi;+    }
&lt;p&gt;+&lt;br/&gt;
+    @Test&lt;br/&gt;
+    public void testSftpConsume() throws Exception {&lt;br/&gt;
+        if (!canTest()) &lt;/p&gt;
{
+            return;
+        }
&lt;p&gt;+&lt;br/&gt;
+        // create file using regular file&lt;br/&gt;
+        template.sendBodyAndHeader(&quot;file://&quot; + FTP_ROOT_DIR, &quot;Hello World&quot;, Exchange.FILE_NAME, &quot;hello.txt&quot;);&lt;br/&gt;
+&lt;br/&gt;
+        String out = consumer.receiveBody(&quot;sftp://localhost:&quot; + getPort() + &quot;/&quot; + FTP_ROOT_DIR + &quot;?username=admin&amp;amp;password=admin&amp;amp;processStrategy=#myStrategy&quot;, 5000, String.class);&lt;br/&gt;
+        assertNotNull(out);&lt;br/&gt;
+        // Apache SSHD appends \u0000 at last byte in retrieved file&lt;br/&gt;
+        assertTrue(out.startsWith(&quot;Hello World&quot;));&lt;br/&gt;
+        assertEquals(&quot;CustomProcessStrategy should have been invoked 1 times&quot;, 1, myStrategy.getInvoked());&lt;br/&gt;
+    }&lt;br/&gt;
+&lt;br/&gt;
+    private static class MyStrategy implements GenericFileProcessStrategy {&lt;br/&gt;
+&lt;br/&gt;
+        private volatile int invoked;&lt;br/&gt;
+&lt;br/&gt;
+        @Override&lt;br/&gt;
+        public void prepareOnStartup(GenericFileOperations operations, GenericFileEndpoint endpoint) throws Exception &lt;/p&gt;
{
+            //noop
+        }&lt;br/&gt;
+&lt;br/&gt;
+        @Override&lt;br/&gt;
+        public boolean begin(GenericFileOperations operations, GenericFileEndpoint endpoint, Exchange exchange, GenericFile file) throws Exception {
+            return true;
+        }&lt;br/&gt;
+&lt;br/&gt;
+        @Override&lt;br/&gt;
+        public void abort(GenericFileOperations operations, GenericFileEndpoint endpoint, Exchange exchange, GenericFile file) throws Exception {+            //noop+        }
&lt;p&gt;+&lt;br/&gt;
+        @Override&lt;br/&gt;
+        public void commit(GenericFileOperations operations, GenericFileEndpoint endpoint, Exchange exchange, GenericFile file) throws Exception &lt;/p&gt;
{
+            invoked++;
+        }
&lt;p&gt;+&lt;br/&gt;
+        @Override&lt;br/&gt;
+        public void rollback(GenericFileOperations operations, GenericFileEndpoint endpoint, Exchange exchange, GenericFile file) throws Exception &lt;/p&gt;
{
+            //noop
+        }
&lt;p&gt;+&lt;br/&gt;
+        int getInvoked() &lt;/p&gt;
{
+            return invoked;
+        }
&lt;p&gt;+    }&lt;br/&gt;
+}&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16718678" author="davsclaus" created="Wed, 12 Dec 2018 09:32:30 +0000"  >&lt;p&gt;Thanks for the PR&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10061"><![CDATA[Novice]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 49 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|s01e3k:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>