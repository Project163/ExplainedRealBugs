<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:34:35 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-13338] ConsumerRebalanceListener is not registered when topicIsPattern is turned off. Causing message loss or too many duplicates</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-13338</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;Not registering&#160;ConsumerRebalanceListener when&#160;topicIsPattern turned off, causes either too many duplicate messages getting delivered to message processing layer or causes message loss depending on&#160;autoOffsetReset flag value.&lt;br/&gt;
&#160;&lt;br/&gt;
Issue is noticed with below test scenario&lt;br/&gt;
Topic: e.g. TestMessage&lt;br/&gt;
Number of partitions: 25 (this is not completely relevant to issue)&lt;br/&gt;
ConsumerUri: kafka:&amp;lt;kafka-broker-uris&amp;gt;?topic=TestMessage&amp;amp;groupId=TestMessage_GROUP&amp;amp;consumersCount=5&amp;amp;autoCommitEnable=false&amp;amp;offsetRepository=#&amp;lt;DB-state-repository&amp;gt;&lt;br/&gt;
Number processes running consumers: 2 or more; e.g. two instances of Docker containers listening from same topic each with 5 consumer threads&lt;br/&gt;
&#160;&lt;br/&gt;
Please note that offset management is done in DB with an implementation of Camel&apos;s StateRepository interface to eliminate too duplicate messages arriving at the message processor (at most one message processing needed for my use case)&lt;br/&gt;
&#160;&lt;br/&gt;
When a second process instance (say second container) brought up, since ConsumerRebalanceListener is not registered, partitions start processing at earliest offsets if&#160;autoOffsetReset is set to earliest as expected. In this case, too many duplicate messages arrive at the message processing layer. If&#160;autoOffsetReset is set to latest, message loss occurs for certain partitions. If&#160;autoOffsetReset is set to none, no valid offset exception thrown by broker&lt;br/&gt;
&#160;&lt;br/&gt;
Issue would be noticed consistently when simulating slow message processing for the above test scenario&lt;br/&gt;
&#160;&lt;br/&gt;
&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13222372">CAMEL-13338</key>
            <summary>ConsumerRebalanceListener is not registered when topicIsPattern is turned off. Causing message loss or too many duplicates</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="viswaram">Viswa Ramamoorthy</reporter>
                        <labels>
                    </labels>
                <created>Mon, 18 Mar 2019 17:13:12 +0000</created>
                <updated>Mon, 25 Mar 2019 12:53:55 +0000</updated>
                            <resolved>Sun, 24 Mar 2019 09:22:19 +0000</resolved>
                                    <version>2.23.0</version>
                                    <fixVersion>2.23.2</fixVersion>
                    <fixVersion>2.24.0</fixVersion>
                    <fixVersion>2.22.4</fixVersion>
                    <fixVersion>3.0.0-M2</fixVersion>
                    <fixVersion>3.0.0</fixVersion>
                                    <component>camel-kafka</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="2400">40m</timespent>
                                <comments>
                            <comment id="16795220" author="viswaram" created="Mon, 18 Mar 2019 17:14:32 +0000"  >&lt;p&gt;To solve, ConsumerRebalanceListener should be registered while subscribing to Kafka topics even though topicIsPattern is turned off. I tried this fix locally and when I use camel-kafka with fix, I do not see any issues. I would be happy to send a PR.&#160;&lt;/p&gt;</comment>
                            <comment id="16795754" author="davsclaus" created="Tue, 19 Mar 2019 06:58:10 +0000"  >&lt;p&gt;Yes you are very welcome to send a PR. We love contributions&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/camel/blob/master/CONTRIBUTING.md&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/blob/master/CONTRIBUTING.md&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16797240" author="viswaram" created="Wed, 20 Mar 2019 14:54:46 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davsclaus&quot; class=&quot;user-hover&quot; rel=&quot;davsclaus&quot;&gt;davsclaus&lt;/a&gt; Thanks. I have raised a PR with fix.&#160;&lt;/p&gt;</comment>
                            <comment id="16799960" author="davsclaus" created="Sun, 24 Mar 2019 09:22:19 +0000"  >&lt;p&gt;Thanks for the PR&lt;/p&gt;</comment>
                            <comment id="16800652" author="viswaram" created="Mon, 25 Mar 2019 12:53:55 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davsclaus&quot; class=&quot;user-hover&quot; rel=&quot;davsclaus&quot;&gt;davsclaus&lt;/a&gt; Thanks for merging PR. I see that you have merged fix into 2.23.x branch as well. Do you know when 2.23.2 would be released?&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 34 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z00ts8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>