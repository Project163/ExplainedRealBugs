<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:10:50 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-8923] Kafka: Topic name lookup from message headers in the producer causes infinite loop</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-8923</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;Refer changes done for &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-7331&quot; title=&quot;Kafka: producer lookup the destination topic in the message header&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-7331&quot;&gt;&lt;del&gt;CAMEL-7331&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The change causes a critical bug.&lt;br/&gt;
For a camel route as follows:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;from(&lt;span class=&quot;code-quote&quot;&gt;&quot;kafka:&lt;span class=&quot;code-comment&quot;&gt;//&amp;lt;broker&amp;gt;?topic=T1&quot;&lt;/span&gt;)
&lt;/span&gt;.process(myProcessor)
.to(&lt;span class=&quot;code-quote&quot;&gt;&quot;kafka:&lt;span class=&quot;code-comment&quot;&gt;//&amp;lt;broker&amp;gt;?topic=T2&quot;&lt;/span&gt;)&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;KafkaExchange will be created by KafkaConsumer and the topic will be set to &quot;T1&quot; in the header.&lt;br/&gt;
For the &apos;to&apos; endpoint, KafkaProducer will try to read the topic from the exchange header which is still &quot;T1&quot; instead of &quot;T2&quot; thereby causing an infinite loop.&lt;/p&gt;

&lt;p&gt;As discussed in user-group, a different header should be used to read the topic name from message. &lt;/p&gt;</description>
                <environment></environment>
        <key id="12841928">CAMEL-8923</key>
            <summary>Kafka: Topic name lookup from message headers in the producer causes infinite loop</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="njiang">Willem Jiang</assignee>
                                    <reporter username="rahulj51">RAHUL JAIN</reporter>
                        <labels>
                    </labels>
                <created>Wed, 1 Jul 2015 08:21:52 +0000</created>
                <updated>Fri, 4 Sep 2015 08:28:33 +0000</updated>
                            <resolved>Wed, 1 Jul 2015 15:20:37 +0000</resolved>
                                    <version>2.15.1</version>
                                    <fixVersion>2.16.0</fixVersion>
                    <fixVersion>2.15.4</fixVersion>
                                    <component>camel-kafka</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14609737" author="njiang" created="Wed, 1 Jul 2015 08:33:39 +0000"  >&lt;p&gt;You can workaround this issue by removing the topic header before sending the message to another topic.&lt;br/&gt;
We can add bridgeEndpoint option to let the producer ignore the topic header to fix this kind of issue.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;from(&lt;span class=&quot;code-quote&quot;&gt;&quot;kafka:&lt;span class=&quot;code-comment&quot;&gt;//&amp;lt;broker&amp;gt;?topic=T1&quot;&lt;/span&gt;)
&lt;/span&gt;.process(myProcessor)
.removeHeader(&lt;span class=&quot;code-quote&quot;&gt;&quot;kafka.TOPIC&quot;&lt;/span&gt;)
.to(&lt;span class=&quot;code-quote&quot;&gt;&quot;kafka:&lt;span class=&quot;code-comment&quot;&gt;//&amp;lt;broker&amp;gt;?topic=T2&quot;&lt;/span&gt;)&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14609747" author="rahulj51" created="Wed, 1 Jul 2015 08:42:29 +0000"  >&lt;p&gt;Yes. For now, I am doing exactly that. &lt;/p&gt;</comment>
                            <comment id="14610450" author="njiang" created="Wed, 1 Jul 2015 15:20:37 +0000"  >&lt;p&gt;Added the option of bridgeEndpoint.&lt;/p&gt;</comment>
                            <comment id="14728141" author="raulvk" created="Wed, 2 Sep 2015 22:24:54 +0000"  >&lt;p&gt;Backported to 2.15.4.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12861112">CAMEL-9108</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 11 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2gq6f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>