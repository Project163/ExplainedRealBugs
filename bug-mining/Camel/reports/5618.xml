<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:45:46 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-16063] should consider multiple ApplicationContext instances when specifying another management.server.port</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-16063</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;As the attached reproducer, when the SB camel application has another management.server.port specified, not all camel routes from the classpath(xml, java) can be collected.&lt;br/&gt;
The output is like &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2021-01-19 13:43:25.932  INFO 61489 --- [1 - timer:&lt;span class=&quot;code-comment&quot;&gt;//foo] hello from Java DSL                      : Exchange[ExchangePattern: InOnly, BodyType: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, Body: [Body is &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;]]
&lt;/span&gt;2021-01-19 13:43:25.933  INFO 61489 --- [1 - timer:&lt;span class=&quot;code-comment&quot;&gt;//foo] hello from Camel XML                     : Exchange[ExchangePattern: InOnly, BodyType: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, Body: [Body is &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;]]
&lt;/span&gt;2021-01-19 13:43:25.933  INFO 61489 --- [1 - timer:&lt;span class=&quot;code-comment&quot;&gt;//foo] hello from Spring XML                    : Exchange[ExchangePattern: InOnly, BodyType: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, Body: [Body is &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;]]&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;if no management.server.port specified. Otherwise, if management.server.port specified for spring-boot-acturator, then the output is like&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2021-01-19 13:19:38.236  INFO 61101 --- [1 - timer:&lt;span class=&quot;code-comment&quot;&gt;//foo] hello from Spring XML                    : Exchange[ExchangePattern: InOnly, BodyType: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, Body: [Body is &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;]]
&lt;/span&gt;2021-01-19 13:19:39.227  INFO 61101 --- [1 - timer:&lt;span class=&quot;code-comment&quot;&gt;//foo] hello from Spring XML                    : Exchange[ExchangePattern: InOnly, BodyType: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, Body: [Body is &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;]]
&lt;/span&gt;2021-01-19 13:19:40.228  INFO 61101 --- [1 - timer:&lt;span class=&quot;code-comment&quot;&gt;//foo] hello from Spring XML                    : Exchange[ExchangePattern: InOnly, BodyType: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, Body: [Body is &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;]]
&lt;/span&gt;2021-01-19 13:19:41.228  INFO 61101 --- [1 - timer:&lt;span class=&quot;code-comment&quot;&gt;//foo] hello from Spring XML                    : Exchange[ExchangePattern: InOnly, BodyType: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, Body: [Body is &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;]]
&lt;/span&gt;2021-01-19 13:19:42.227  INFO 61101 --- [1 - timer:&lt;span class=&quot;code-comment&quot;&gt;//foo] hello from Spring XML                    : Exchange[ExchangePattern: InOnly, BodyType: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, Body: [Body is &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;]]&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Camel route from classpath not collected&lt;/p&gt;</description>
                <environment></environment>
        <key id="13353341">CAMEL-16063</key>
            <summary>should consider multiple ApplicationContext instances when specifying another management.server.port</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ffang">Freeman Yue Fang</assignee>
                                    <reporter username="ffang">Freeman Yue Fang</reporter>
                        <labels>
                    </labels>
                <created>Tue, 19 Jan 2021 18:47:35 +0000</created>
                <updated>Tue, 2 Mar 2021 14:37:26 +0000</updated>
                            <resolved>Tue, 2 Mar 2021 14:36:57 +0000</resolved>
                                                    <fixVersion>2.25.4</fixVersion>
                    <fixVersion>3.7.3</fixVersion>
                    <fixVersion>3.9.0</fixVersion>
                                    <component>camel-spring-boot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17268143" author="ffang" created="Tue, 19 Jan 2021 18:54:53 +0000"  >&lt;p&gt;The problem comes from that if management.server.port specified, there are two ApplicationContext, one is for the default Web Container(8080) with ID &quot;Application&quot;, another one is for the actuator management port(8081) with ID &quot;Application Management&quot;, and the second one is the child of the first one. We should consider this when running CamelRouteCollector&lt;/p&gt;</comment>
                            <comment id="17268154" author="ffang" created="Tue, 19 Jan 2021 19:07:37 +0000"  >&lt;p&gt;Send PR &lt;a href=&quot;https://github.com/apache/camel-spring-boot/pull/260&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel-spring-boot/pull/260&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17289172" author="squakez" created="Tue, 23 Feb 2021 16:24:12 +0000"  >&lt;p&gt;With this change I think we can have a problem when we include external routes, (ie, camel.springboot.java-routes-include-pattern = io/syndesis/example/*). In such situation it seems we duplicate the Post-processing CamelContext, see:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2021-02-23 17:18:28.406 DEBUG 97383 --- [           main] o.a.camel.spring.boot.RoutesCollector    : Post-processing CamelContext bean: tea
2021-02-23 17:18:28.407 DEBUG 97383 --- [           main] o.a.camel.spring.boot.RoutesCollector    : Java RoutesBuilder: io/syndesis/example/RestRouteConfiguration$1 accepted by include/exclude filter: &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
2021-02-23 17:18:28.407 DEBUG 97383 --- [           main] o.a.camel.spring.boot.RoutesCollector    : Injecting following route into the CamelContext: Routes: []
2021-02-23 17:18:28.420 DEBUG 97383 --- [           main] o.a.camel.spring.boot.RoutesCollector    : Java RoutesBuilder: io/syndesis/example/RestRoute accepted by include/exclude filter: &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
2021-02-23 17:18:28.420 DEBUG 97383 --- [           main] o.a.camel.spring.boot.RoutesCollector    : Injecting following route into the CamelContext: Routes: []
...
2021-02-23 17:18:28.835 DEBUG 97383 --- [           main] o.a.camel.spring.boot.RoutesCollector    : Post-processing CamelContext bean: tea
2021-02-23 17:18:28.835 DEBUG 97383 --- [           main] o.a.camel.spring.boot.RoutesCollector    : Java RoutesBuilder: io/syndesis/example/RestRouteConfiguration$1 accepted by include/exclude filter: &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
2021-02-23 17:18:28.835 DEBUG 97383 --- [           main] o.a.camel.spring.boot.RoutesCollector    : Injecting following route into the CamelContext: Routes: [Route(route1)[[From[&lt;span class=&quot;code-keyword&quot;&gt;rest&lt;/span&gt;:get:/openapi.json?description=Returns+the+OpenAPI+specification+&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;+&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;+service&amp;amp;componentName=servlet]] -&amp;gt; [SetHeader[Content-Type, constant{application/vnd.oai.openapi+json}], SetBody[constant{resource:classpath:openapi.json}]]]]
2021-02-23 17:18:28.835 DEBUG 97383 --- [           main] o.a.camel.spring.boot.RoutesCollector    : Java RoutesBuilder: io/syndesis/example/RestRoute accepted by include/exclude filter: &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
2021-02-23 17:18:28.835 DEBUG 97383 --- [           main] o.a.camel.spring.boot.RoutesCollector    : Injecting following route into the CamelContext: Routes: [Route(route2)[[From[&lt;span class=&quot;code-keyword&quot;&gt;rest&lt;/span&gt;:get:/api:/{id}?produces=application%2Fjson&amp;amp;description=Fetches+task+by+given+identifier&amp;amp;componentName=servlet]] -&amp;gt; [To[direct:79aeded8-c57a-4403-bdc4-5838678bf503]]]]
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;in this particular case, it results with an Exception due to multiple consumer on the same route. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ffang&quot; class=&quot;user-hover&quot; rel=&quot;ffang&quot;&gt;ffang&lt;/a&gt; what do you think?&lt;/p&gt;</comment>
                            <comment id="17289192" author="ffang" created="Tue, 23 Feb 2021 17:04:55 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=squakez&quot; class=&quot;user-hover&quot; rel=&quot;squakez&quot;&gt;squakez&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;Thanks for reporting this!&lt;/p&gt;

&lt;p&gt;I think I can do more stricter check to see if the child application context ID is &quot;Application Management&quot;(for the management.server.port web container) to avoid messing up other cases.&lt;/p&gt;

&lt;p&gt;Any chance you can append your reproducer, so that ensure we are on the same page.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;br/&gt;
Freeman &lt;/p&gt;</comment>
                            <comment id="17290123" author="squakez" created="Wed, 24 Feb 2021 17:32:30 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ffang&quot; class=&quot;user-hover&quot; rel=&quot;ffang&quot;&gt;ffang&lt;/a&gt;. While making the reproducer I realized that maybe the issue is on my side, so, for now please just disregard this issue. I will come back and let you know if I found something else.&lt;/p&gt;

&lt;p&gt;Cheers,&lt;br/&gt;
Pasquale.&lt;/p&gt;</comment>
                            <comment id="17292070" author="davsclaus" created="Sat, 27 Feb 2021 09:15:31 +0000"  >&lt;p&gt;This causes more problem that pain, as it can trigger camel spring boot to start twice. &lt;br/&gt;
Reverting this.&lt;/p&gt;</comment>
                            <comment id="17292071" author="davsclaus" created="Sat, 27 Feb 2021 09:21:05 +0000"  >&lt;p&gt;I suggest to ignore those events from that self management app context if there is a way to find out - thats not the context camel should be associated with&lt;/p&gt;</comment>
                            <comment id="17293172" author="ffang" created="Mon, 1 Mar 2021 21:12:27 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davsclaus&quot; class=&quot;user-hover&quot; rel=&quot;davsclaus&quot;&gt;davsclaus&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;A new PR to address this is here&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/camel/pull/5149&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/5149&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Just ignore the event from self management app context(ID: application:management) can resolve this problem.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;br/&gt;
Freeman&lt;/p&gt;</comment>
                            <comment id="17293461" author="davsclaus" created="Tue, 2 Mar 2021 07:38:21 +0000"  >&lt;p&gt;Freeman, I wonder if you could create a PR for the 3.7.x branch.&lt;/p&gt;</comment>
                            <comment id="17293743" author="ffang" created="Tue, 2 Mar 2021 14:37:26 +0000"  >&lt;p&gt;Hi Claus,&lt;/p&gt;

&lt;p&gt;Backported to 3.7.x and 2.25.x branches.&lt;/p&gt;

&lt;p&gt;Cheers&lt;br/&gt;
Freeman&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                            <outwardlinks description="causes">
                                        <issuelink>
            <issuekey id="13359904">CAMEL-16244</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="13019022" name="camel-springboot-example.tar" size="36864" author="ffang" created="Tue, 19 Jan 2021 18:48:10 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 37 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0mru0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>