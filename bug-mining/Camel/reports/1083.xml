<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 09:39:11 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-2927] Compilation error when using .to, .log, .wireTap, etc. before calling .aggregate() in the Java DSL</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-2927</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;The following code generates a compile time exception:&lt;/p&gt;

&lt;p&gt;from(&quot;direct:example&quot;)&lt;br/&gt;
    .log(&quot;This will break during compile time.&quot;)&lt;br/&gt;
    .aggregate().constant(true).completionSize(2)&lt;br/&gt;
    .completionTimeout(500L)&lt;br/&gt;
    .to(&quot;mock:result&quot;)&lt;br/&gt;
    ;&lt;/p&gt;

&lt;p&gt;Compile time exception:&lt;/p&gt;

&lt;p&gt;symbol  : method completionSize(int)&lt;br/&gt;
location: class java.lang.Object&lt;/p&gt;

&lt;p&gt;When removing .log(&quot;This will break during compile time.&quot;), the project compiles successfully. I verified this holds true for .to and .wireTap as well.&lt;/p&gt;

&lt;p&gt;Taking the example from &lt;a href=&quot;https://svn.apache.org/repos/asf/camel/trunk/camel-core/src/test/java/org/apache/camel/processor/aggregator/AggregateGroupedExchangeBatchSizeTest.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/repos/asf/camel/trunk/camel-core/src/test/java/org/apache/camel/processor/aggregator/AggregateGroupedExchangeBatchSizeTest.java&lt;/a&gt; and placing a .log or .to after the .from(..) reproduces the problem as well.&lt;/p&gt;</description>
                <environment>&lt;p&gt;java version &quot;1.6.0_17&quot;&lt;br/&gt;
Java(TM) SE Runtime Environment (build 1.6.0_17-b04-248-10M3025)&lt;br/&gt;
Java HotSpot(TM) 64-Bit Server VM (build 14.3-b01-101, mixed mode)&lt;/p&gt;

&lt;p&gt;Darwin richard-burtons-macbook-pro.local 10.2.0 Darwin Kernel Version 10.2.0: Tue Nov  3 10:37:10 PST 2009; root:xnu-1486.2.11~1/RELEASE_I386 i386&lt;/p&gt;</environment>
        <key id="12486081">CAMEL-2927</key>
            <summary>Compilation error when using .to, .log, .wireTap, etc. before calling .aggregate() in the Java DSL</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="rburton">Richard Burton</reporter>
                        <labels>
                    </labels>
                <created>Thu, 8 Jul 2010 20:40:29 +0000</created>
                <updated>Sun, 24 Apr 2011 09:57:54 +0000</updated>
                            <resolved>Fri, 9 Jul 2010 06:05:19 +0000</resolved>
                                    <version>2.3.0</version>
                                    <fixVersion>2.4.0</fixVersion>
                                    <component>camel-core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12952726" author="davsclaus" created="Fri, 9 Jul 2010 06:00:16 +0000"  >&lt;p&gt;If you supply the expression as a parameter then you wont confuse the JDK compiler.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;aggregate().constant(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;).completionSize(2)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Should be&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;aggregate(constant(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;)).completionSize(2)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Java Generics is really stretched to a max in terms of creating a DSL. And you can hit some odd combos with expressions and EIP patterns with sub routes (such as splitter, aggregator, choice etc.). The rule of thumb is to provide the expression as a parameter instead of the fluent builder.&lt;/p&gt;</comment>
                            <comment id="12955680" author="davsclaus" created="Fri, 9 Jul 2010 06:05:19 +0000"  >&lt;p&gt;I have updated the examples. But we can&apos;t fix the limitation of generics as a means of DSL in Java.&lt;/p&gt;

&lt;p&gt;trunk: 962423.&lt;/p&gt;</comment>
                            <comment id="12952416" author="davsclaus" created="Fri, 9 Jul 2010 08:03:00 +0000"  >&lt;p&gt;We should most likely @deprecate those fluent builder methods which can lead to this issue, to force end users to provide the expression as a parameter. This only applies for the complex EIPs such as Aggregator, Splitter etc.&lt;/p&gt;</comment>
                            <comment id="13023977" author="davsclaus" created="Sun, 24 Apr 2011 09:57:54 +0000"  >&lt;p&gt;Closing all resolved tickets from 2010 or older&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>104741</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 31 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i01rlb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>8239</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>