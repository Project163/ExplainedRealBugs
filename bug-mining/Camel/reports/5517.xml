<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:44:19 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-15815] endpoint-dsl should support dynamic uri in Enrich EIP</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-15815</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;Hello,&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I found something which seems unexpected&#160;with the enrich processor and Camel 3.6.0.&lt;/p&gt;

&lt;p&gt;&#160;If you consider those 2 routes:&lt;/p&gt;

&lt;p&gt;&#160;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
from(timer(&lt;span class=&quot;code-quote&quot;&gt;&quot;foo&quot;&lt;/span&gt;))
 &#160;&#160;&#160;&#160;&#160;&#160;&#160; .setBody(constant(&lt;span class=&quot;code-quote&quot;&gt;&quot;1&quot;&lt;/span&gt;))
 &#160;&#160;&#160;&#160;&#160;&#160;&#160; .enrich(&lt;span class=&quot;code-quote&quot;&gt;&quot;seda:&lt;span class=&quot;code-comment&quot;&gt;//test-${body}&quot;&lt;/span&gt;);
&lt;/span&gt; 
 from(timer(&lt;span class=&quot;code-quote&quot;&gt;&quot;bar&quot;&lt;/span&gt;))
 &#160;&#160;&#160;&#160;&#160;&#160;&#160; .setBody(constant(&lt;span class=&quot;code-quote&quot;&gt;&quot;2&quot;&lt;/span&gt;))
 &#160;&#160;&#160;&#160;&#160;&#160;&#160; .enrich(seda(&lt;span class=&quot;code-quote&quot;&gt;&quot;test-${body}&quot;&lt;/span&gt;));&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;In the log, it says:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[mel-1) thread #6 - timer:&lt;span class=&quot;code-comment&quot;&gt;//bar] SedaEndpoint&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; INFO&#160; Endpoint seda://test-2 is using shared queue: seda://test-2 with size: 1000
&lt;/span&gt;[mel-1) thread #5 - timer:&lt;span class=&quot;code-comment&quot;&gt;//foo] SedaEndpoint&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; INFO&#160; Endpoint seda://test-$%7Bbody%7D is using shared queue: seda://test-$%7Bbody%7D with size: 1000&#160;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;So the route using the enrich with &#8220;EndpointRouteBuilder style&#8221; seems to consider the endpoint URI as a &#8220;simple&#8221; expression (and resolves it), and the other one like a &#8220;constant&#8221; expression (which is what I expected). In the first case, it means that the endpoint is resolved for every exchange processed.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;It&#8217;s possible to &#8220;force&#8221; the constant expression using this though:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
from(timer(&lt;span class=&quot;code-quote&quot;&gt;&quot;biz&quot;&lt;/span&gt;))
 &#160;&#160;&#160;&#160;&#160;&#160;&#160; .setBody(constant(&lt;span class=&quot;code-quote&quot;&gt;&quot;3&quot;&lt;/span&gt;))
 &#160;&#160;&#160;&#160;&#160;&#160;&#160; .enrich().constant(seda(&lt;span class=&quot;code-quote&quot;&gt;&quot;test-${body}&quot;&lt;/span&gt;));&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Regards,&lt;/p&gt;

&lt;p&gt;Nicolas&lt;/p&gt;</description>
                <environment></environment>
        <key id="13338968">CAMEL-15815</key>
            <summary>endpoint-dsl should support dynamic uri in Enrich EIP</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="ncasaux">ncasaux</reporter>
                        <labels>
                    </labels>
                <created>Thu, 5 Nov 2020 09:04:28 +0000</created>
                <updated>Fri, 4 Dec 2020 12:33:21 +0000</updated>
                            <resolved>Fri, 4 Dec 2020 12:33:21 +0000</resolved>
                                    <version>3.6.0</version>
                                    <fixVersion>3.7.0</fixVersion>
                                    <component>came-core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17226591" author="davsclaus" created="Thu, 5 Nov 2020 09:15:13 +0000"  >&lt;p&gt;We need to do something like we do in toD and wireTap where we have special support for this.&lt;/p&gt;

&lt;p&gt;This would be for Enrich and pollEnrich EIP both of them&lt;/p&gt;</comment>
                            <comment id="17226599" author="ncasaux" created="Thu, 5 Nov 2020 09:26:37 +0000"  >&lt;p&gt;From my tests, the issue is not happening with pollEnrich:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
from(timer(&lt;span class=&quot;code-quote&quot;&gt;&quot;foo&quot;&lt;/span&gt;))
 .setBody(constant(&lt;span class=&quot;code-quote&quot;&gt;&quot;1&quot;&lt;/span&gt;))
 .pollEnrich(&lt;span class=&quot;code-quote&quot;&gt;&quot;seda:&lt;span class=&quot;code-comment&quot;&gt;//test1-${body}&quot;&lt;/span&gt;);
&lt;/span&gt;
from(timer(&lt;span class=&quot;code-quote&quot;&gt;&quot;bar&quot;&lt;/span&gt;))
 .setBody(constant(&lt;span class=&quot;code-quote&quot;&gt;&quot;2&quot;&lt;/span&gt;))
 .pollEnrich(seda(&lt;span class=&quot;code-quote&quot;&gt;&quot;test2-${body}&quot;&lt;/span&gt;));&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[ main] SedaEndpoint INFO Endpoint seda:&lt;span class=&quot;code-comment&quot;&gt;//test1-$%7Bbody%7D is using shared queue: seda://test1-$%7Bbody%7D with size: 1000
&lt;/span&gt;[ main] SedaEndpoint INFO Endpoint seda:&lt;span class=&quot;code-comment&quot;&gt;//test2-$%7Bbody%7D is using shared queue: seda://test2-$%7Bbody%7D with size: 1000&lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 1 week, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0kb1s:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>