<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:14:46 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-9672] ClassCastException with interceptFrom</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-9672</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;If a statement like&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;interceptFrom().when(simple(&lt;span class=&quot;code-quote&quot;&gt;&quot;${header.foo} == &lt;span class=&quot;code-quote&quot;&gt;&apos;bar&apos;&lt;/span&gt;&quot;&lt;/span&gt;)).to(&lt;span class=&quot;code-quote&quot;&gt;&quot;mock:intercepted&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;is available in a route builder with JMX enabled the startup will fail in Camel 2.16.2 (and the current 2.17-SNAPSHOT) with a ClassCastException in line 310 of DefaultManagementObjectStrategy.&lt;/p&gt;

&lt;p&gt;The generated processor is a FilterProcessor, but the resulting definition is a WhenDefinition not a FilterDefinition.&lt;/p&gt;

&lt;p&gt;The reason is that &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-8992&quot; title=&quot;EIPs with Expression - Allow to detail those in jmx friendly information&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-8992&quot;&gt;&lt;del&gt;CAMEL-8992&lt;/del&gt;&lt;/a&gt; introduced a too precise class check for this.&lt;/p&gt;

&lt;p&gt;The attached patch relexes the class constraint on the definition.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12947623">CAMEL-9672</key>
            <summary>ClassCastException with interceptFrom</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="siano">Stephan Siano</reporter>
                        <labels>
                    </labels>
                <created>Mon, 7 Mar 2016 06:55:12 +0000</created>
                <updated>Mon, 7 Mar 2016 08:58:46 +0000</updated>
                            <resolved>Mon, 7 Mar 2016 08:58:46 +0000</resolved>
                                    <version>2.16.2</version>
                                    <fixVersion>2.16.3</fixVersion>
                    <fixVersion>2.17.0</fixVersion>
                                    <component>camel-core</component>
                    <component>jmx</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15182666" author="siano" created="Mon, 7 Mar 2016 07:03:40 +0000"  >&lt;p&gt;One more comment about the patch: It does not contain a unit test because I was unsure where that would go. For testing I edited an arbitrary test in camel-test by adding above line to the route builder and overloding the useJms() method (that it always returns true instead of false) but I rather guess this is not the real place where the unit test for this should go.&lt;/p&gt;</comment>
                            <comment id="15182675" author="davsclaus" created="Mon, 7 Mar 2016 07:11:47 +0000"  >&lt;p&gt;Thanks yeah JMX tests should go in the management directory. Maybe you can work on an unit test there as it would be great to have one to ensure this bug do not re-appear.&lt;/p&gt;</comment>
                            <comment id="15182699" author="siano" created="Mon, 7 Mar 2016 07:38:29 +0000"  >&lt;p&gt;The attached patch does also contain a test for the issue (and the fix is improved)&lt;/p&gt;</comment>
                            <comment id="15182771" author="davsclaus" created="Mon, 7 Mar 2016 08:58:46 +0000"  >&lt;p&gt;Thanks for the patch.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12791731" name="0001-CAMEL-9672-ClassCastException-with-interceptFrom.patch" size="6136" author="siano" created="Mon, 7 Mar 2016 07:38:29 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 37 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2u9nr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>