<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 09:58:17 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-6461] camel-quartz - Stateful job - Redeploying bundle/war and having changed endpoint uri issue</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-6461</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;See&lt;br/&gt;
&lt;a href=&quot;http://camel.465427.n5.nabble.com/In-came-quartz-route-after-bundle-update-jobs-are-not-triggred-tp5734196.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://camel.465427.n5.nabble.com/In-came-quartz-route-after-bundle-update-jobs-are-not-triggred-tp5734196.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;In these situations we should use job.name to name the job unique so when you change the endpoint uri and redeploy the apps/bundles, then camel-quartz can find the old job in the quartz persistent store.&lt;/p&gt;

&lt;p&gt;There may be logic needed to lookup using job.name as the unique name in these situations, and then allow endpoint uri options to change over time, such as the cron trigger etc. Which should be adjusted accordingly as well.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12653140">CAMEL-6461</key>
            <summary>camel-quartz - Stateful job - Redeploying bundle/war and having changed endpoint uri issue</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="davsclaus">Claus Ibsen</reporter>
                        <labels>
                    </labels>
                <created>Mon, 17 Jun 2013 07:28:53 +0000</created>
                <updated>Mon, 22 Jul 2013 15:32:38 +0000</updated>
                            <resolved>Mon, 22 Jul 2013 15:32:38 +0000</resolved>
                                    <version>2.10.4</version>
                                    <fixVersion>2.10.7</fixVersion>
                    <fixVersion>2.11.2</fixVersion>
                    <fixVersion>2.12.0</fixVersion>
                                    <component>camel-quartz</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13714101" author="saltnlight5" created="Fri, 19 Jul 2013 21:33:48 +0000"  >&lt;p&gt;Hello Claus,&lt;/p&gt;

&lt;p&gt;I can confirm this problem. Further more, this problem only occur if we enabled Quartz clustering. For non-cluster config, the quartz endpoint will remove the job data upon restart.&lt;/p&gt;

&lt;p&gt;I also tried by given job.name unique name, but still same problem.&lt;/p&gt;

&lt;p&gt;I would propose to look up the endpoint by trigerName and avoid to store the endpointUri into the jobDetail dataMap to avoid this kind of mismatched problem.&lt;/p&gt;</comment>
                            <comment id="13714347" author="saltnlight5" created="Sat, 20 Jul 2013 05:50:59 +0000"  >&lt;p&gt;I have a patch (git diff) that changed the lookup of endpoint by trigger name and group. This is done in CamelJob.java&lt;/p&gt;

&lt;p&gt;Also I have to change QuartzComponent.java on how to handle existing trigger. It didn&apos;t set the correct job name/group before. So the patch will do that properly.&lt;/p&gt;</comment>
                            <comment id="13714434" author="saltnlight5" created="Sat, 20 Jul 2013 14:04:03 +0000"  >&lt;p&gt;I noticed my patch has cause this test to fail: QuartzCronRouteWithSmallCacheTest&lt;/p&gt;

&lt;p&gt;I am not familiar with the endpoint caching. Would anyone know how exactly does the endpoints are removed and should be recreated when caching is full? What methods are called on QuartzEndpoint when this happens?&lt;/p&gt;
</comment>
                            <comment id="13714488" author="saltnlight5" created="Sat, 20 Jul 2013 17:52:22 +0000"  >&lt;p&gt;Okay, I see my own mistake in my patch now (I retrieved the wrong group name during lookup.), so I have uploaded second patch: &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-6461&quot; title=&quot;camel-quartz - Stateful job - Redeploying bundle/war and having changed endpoint uri issue&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-6461&quot;&gt;&lt;del&gt;CAMEL-6461&lt;/del&gt;&lt;/a&gt;-v2.path&lt;/p&gt;

&lt;p&gt;This time all tests in camel-quartz passed.&lt;/p&gt;</comment>
                            <comment id="13715293" author="davsclaus" created="Mon, 22 Jul 2013 15:32:38 +0000"  >&lt;p&gt;Thanks for the patch.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12593354" name="CAMEL-6461-v2.patch" size="8596" author="saltnlight5" created="Sat, 20 Jul 2013 17:52:22 +0000"/>
                            <attachment id="12593321" name="CAMEL-6461.patch" size="7911" author="saltnlight5" created="Sat, 20 Jul 2013 05:50:59 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>333463</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 18 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1liw7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>333791</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>