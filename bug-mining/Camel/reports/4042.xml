<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:22:40 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-11028] camel-spark-rest - Adds duplicate content-type</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-11028</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;This is essentially the same as &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-9613&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/CAMEL-9613&lt;/a&gt; . When I send a request containing a &apos;content-type&apos; header it will get sent with duplicate values. E.g. Content-Type: [application/json, application/json].&lt;/p&gt;

&lt;p&gt;My RouteBuilder is very simple at the moment:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;restConfiguration().component(&lt;span class=&quot;code-quote&quot;&gt;&quot;spark-&lt;span class=&quot;code-keyword&quot;&gt;rest&lt;/span&gt;&quot;&lt;/span&gt;).port(8585);

&lt;span class=&quot;code-keyword&quot;&gt;rest&lt;/span&gt;(&lt;span class=&quot;code-quote&quot;&gt;&quot;/&quot;&lt;/span&gt;).post(&lt;span class=&quot;code-quote&quot;&gt;&quot;/charges&quot;&lt;/span&gt;).to(&lt;span class=&quot;code-quote&quot;&gt;&quot;direct:charges&quot;&lt;/span&gt;);

from(&lt;span class=&quot;code-quote&quot;&gt;&quot;direct:charges&quot;&lt;/span&gt;).to(&lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:8080/charges?bridgeEndpoint=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&amp;amp;throwExceptionOnFailure=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&quot;&lt;/span&gt;);&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Having looked at the code I can see it being added in two places:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/camel/blob/master/components/camel-spark-rest/src/main/java/org/apache/camel/component/sparkrest/DefaultSparkBinding.java#L73&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/blob/master/components/camel-spark-rest/src/main/java/org/apache/camel/component/sparkrest/DefaultSparkBinding.java#L73&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/camel/blob/master/components/camel-spark-rest/src/main/java/org/apache/camel/component/sparkrest/DefaultSparkBinding.java#L109&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/blob/master/components/camel-spark-rest/src/main/java/org/apache/camel/component/sparkrest/DefaultSparkBinding.java#L109&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Is this intended behaviour? If so, how would I disable it? Thanks&lt;/p&gt;</description>
                <environment></environment>
        <key id="13056715">CAMEL-11028</key>
            <summary>camel-spark-rest - Adds duplicate content-type</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="acosentino">Andrea Cosentino</assignee>
                                    <reporter username="adamdougal">Adam Dougal</reporter>
                        <labels>
                    </labels>
                <created>Thu, 16 Mar 2017 16:19:08 +0000</created>
                <updated>Sat, 8 Jan 2022 09:23:42 +0000</updated>
                            <resolved>Sun, 26 Mar 2017 08:08:44 +0000</resolved>
                                    <version>2.18.3</version>
                                    <fixVersion>2.18.4</fixVersion>
                    <fixVersion>2.19.0</fixVersion>
                                    <component>rest</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="15928620" author="davsclaus" created="Thu, 16 Mar 2017 18:43:56 +0000"  >&lt;p&gt;Ah yeah the 2nd does an append.&lt;/p&gt;

&lt;p&gt;We could add those standard headers from the top at the end, and maybe only put if not already exists an header with that key.&lt;/p&gt;

&lt;p&gt;You are welcome to work on a github PR&lt;br/&gt;
&lt;a href=&quot;http://camel.apache.org/contributing&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://camel.apache.org/contributing&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15940146" author="githubbot" created="Fri, 24 Mar 2017 10:48:04 +0000"  >&lt;p&gt;GitHub user jbridger opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/1568&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/1568&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-11028&quot; title=&quot;camel-spark-rest - Adds duplicate content-type&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-11028&quot;&gt;&lt;del&gt;CAMEL-11028&lt;/del&gt;&lt;/a&gt;: Avoid duplicating content-type headers for camel-spark-rest&lt;/p&gt;

&lt;p&gt;    Fix for: &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-11028&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/CAMEL-11028&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Fix is as suggested in the Jira issue. Additionally, we changed the `DefaultSparkBindingTest.java` to exclude the `Content-Type` header when adding request headers to the camel headers map.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/sky-uk/camel&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/sky-uk/camel&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-11028&quot; title=&quot;camel-spark-rest - Adds duplicate content-type&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-11028&quot;&gt;&lt;del&gt;CAMEL-11028&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/1568.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/1568.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #1568&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit ca175b9344113fef2bc3960611cf24513ae26afa&lt;br/&gt;
Author: Charlie McNeill, Karthikeyan Gurunathan and Jonathan Bridger &amp;lt;jonathan.bridger@sky.uk&amp;gt;&lt;br/&gt;
Date:   2017-03-23T14:35:35Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-11028&quot; title=&quot;camel-spark-rest - Adds duplicate content-type&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-11028&quot;&gt;&lt;del&gt;CAMEL-11028&lt;/del&gt;&lt;/a&gt;: Avoid duplicating content-type headers for camel-spark-rest&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15942193" author="githubbot" created="Sun, 26 Mar 2017 08:08:45 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/1568&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/1568&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15942823" author="barmybuckle" created="Mon, 27 Mar 2017 08:23:58 +0000"  >&lt;p&gt;Hi, Thanks for looking at this and getting this merged back in so quickly. Do you know when version 2.18.4 will be released? Thanks&lt;/p&gt;</comment>
                            <comment id="15943223" author="davsclaus" created="Mon, 27 Mar 2017 13:03:48 +0000"  >&lt;p&gt;That would take some time as 2.18.3 was just recently released. Keep an eye on the @dev mailing list for updates&lt;/p&gt;</comment>
                            <comment id="17470621" author="jpmoresmau" created="Fri, 7 Jan 2022 13:40:29 +0000"  >&lt;p&gt;I get the same issue in 3.14. Using rest with a JSON RESTBindingMode causes a duplicate content-type to be set.&lt;/p&gt;</comment>
                            <comment id="17471033" author="davsclaus" created="Sat, 8 Jan 2022 09:11:46 +0000"  >&lt;p&gt;Camel 3.x does not have camel-spark-rest component anymore - so you must be using some other component&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13421461">CAMEL-17454</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 44 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3cdkf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>