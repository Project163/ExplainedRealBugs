<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 09:34:49 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-1974] Package scanning cannot be used for folders containing special characters</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-1974</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;I found out this problem developing a test case with cargo on my macbook. Temporary directory on leopard is something like (/private/var/folders/is/ispMf0ylEtCIOP8skg0va++++TI/&lt;del&gt;Tmp&lt;/del&gt;) and cargo deploys the embedded container there.&lt;br/&gt;
Problem happens when camel tries to find converters by using DefaultPackageScanClassResolver class; it converts the temporary path, using URLDecoder, in the invalid path &quot;/private/var/folders/is/ispMf0ylEtCIOP8skg0va    TI/&lt;del&gt;Tmp&lt;/del&gt;&quot;&lt;/p&gt;

&lt;p&gt;You can reproduce this bug by patching the DefaultPackageScanClassResolverTest and adding the following resource file, that I&apos;m going to attach to this issue.&lt;/p&gt;</description>
                <environment>&lt;p&gt;macbook pro, osx leopard&lt;/p&gt;</environment>
        <key id="12487049">CAMEL-1974</key>
            <summary>Package scanning cannot be used for folders containing special characters</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="fmarinelli">Fabio Marinelli</reporter>
                        <labels>
                    </labels>
                <created>Tue, 1 Sep 2009 09:24:25 +0000</created>
                <updated>Thu, 3 Jun 2010 07:24:09 +0000</updated>
                            <resolved>Wed, 16 Sep 2009 14:41:56 +0000</resolved>
                                    <version>2.0.0</version>
                                    <fixVersion>2.1.0</fixVersion>
                                    <component>camel-core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12951603" author="fmarinelli" created="Tue, 1 Sep 2009 09:26:02 +0000"  >&lt;p&gt;Files needed to reproduce this bug&lt;/p&gt;</comment>
                            <comment id="12951698" author="fmarinelli" created="Tue, 1 Sep 2009 13:07:26 +0000"  >&lt;p&gt;I found this interesting issue ( &lt;a href=&quot;https://issues.apache.org/jira/browse/LAUNCHER-10&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/LAUNCHER-10&lt;/a&gt; ) on another apache project. &lt;br/&gt;
They had the same problem and it seems that the solution comes with:&lt;/p&gt;

&lt;p&gt;new URI(resource).getPath()&lt;/p&gt;

&lt;p&gt;instead of &lt;/p&gt;

&lt;p&gt;URLDecoder.decode(resource, &quot;UTF-8&quot;)&lt;/p&gt;

&lt;p&gt;at least for file protocol.&lt;/p&gt;

&lt;p&gt;Bye&lt;/p&gt;</comment>
                            <comment id="12952557" author="davsclaus" created="Mon, 14 Sep 2009 06:58:00 +0000"  >&lt;p&gt;Thanks Fabio for reporting and showing how to fix it.&lt;/p&gt;

&lt;p&gt;trunk: 814499.&lt;/p&gt;</comment>
                            <comment id="12951403" author="taylorjohn" created="Wed, 16 Sep 2009 12:58:02 +0000"  >&lt;p&gt;Discussion at &lt;a href=&quot;http://www.nabble.com/Fix-for-CAMEL-1974-seems-to-cause-problem-on-Windows-td25458041s22882.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.nabble.com/Fix-for-CAMEL-1974-seems-to-cause-problem-on-Windows-td25458041s22882.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This fix causes a problem on windows with spaces in the path.&lt;/p&gt;

&lt;p&gt;Trace:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt; classloader: java.net.URLClassLoader@189acb5
[pache.camel.spring.Main.main()] efaultPackageScanClassResolver TRACE URL from classloader: jar:file:/C:/Documents and Settings/TaylorJohn.
GS/.m2/repository/org/apache/camel/camel-core/2.1-SNAPSHOT/camel-core-2.1-SNAPSHOT.jar!/org/apache/camel/component/file/
[pache.camel.spring.Main.main()] efaultPackageScanClassResolver TRACE Decoded urlPath: file:/C:/Documents and Settings/TaylorJohn.SGS/.m2/r
pository/org/apache/camel/camel-core/2.1-SNAPSHOT/camel-core-2.1-SNAPSHOT.jar!/org/apache/camel/component/file/
[pache.camel.spring.Main.main()] efaultPackageScanClassResolver WARN  Could not read entries in url: jar:file:/C:/Documents and Settings/Ta
lorJohn.SGS/.m2/repository/org/apache/camel/camel-core/2.1-SNAPSHOT/camel-core-2.1-SNAPSHOT.jar!/org/apache/camel/component/file/
java.net.URISyntaxException: Illegal character in path at index 18: file:/C:/Documents and Settings/TaylorJohn.SGS/.m2/repository/org/apach
/camel/camel-core/2.1-SNAPSHOT/camel-core-2.1-SNAPSHOT.jar!/org/apache/camel/component/file/
        at java.net.URI$Parser.fail(URI.java:2809)
        at java.net.URI$Parser.checkChars(URI.java:2982)
        at java.net.URI$Parser.parseHierarchical(URI.java:3066)
        at java.net.URI$Parser.parse(URI.java:3014)
        at java.net.URI.&amp;lt;init&amp;gt;(URI.java:578)
        at org.apache.camel.impl.DefaultPackageScanClassResolver.find(DefaultPackageScanClassResolver.java:222)
        at org.apache.camel.impl.DefaultPackageScanClassResolver.find(DefaultPackageScanClassResolver.java:180)
        at org.apache.camel.impl.DefaultPackageScanClassResolver.findAnnotated(DefaultPackageScanClassResolver.java:100)
        at org.apache.camel.impl.converter.AnnotationTypeConverterLoader.load(AnnotationTypeConverterLoader.java:62)
        at org.apache.camel.impl.converter.DefaultTypeConverter.checkLoaded(DefaultTypeConverter.java:359)
        at org.apache.camel.impl.converter.DefaultTypeConverter.doConvertTo(DefaultTypeConverter.java:153)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

</comment>
                            <comment id="12951437" author="davsclaus" created="Wed, 16 Sep 2009 14:41:56 +0000"  >&lt;p&gt;trunk: 815810.&lt;/p&gt;

&lt;p&gt;John can you test from your windows environment again with the latest commit I did?&lt;/p&gt;</comment>
                            <comment id="12956368" author="davsclaus" created="Thu, 3 Jun 2010 07:24:09 +0000"  >&lt;p&gt;Closing old resolved issues&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12462704" name="DefaultPackageScanClassResolverTest.diff" size="1301" author="fmarinelli" created="Tue, 1 Sep 2009 09:26:02 +0000"/>
                            <attachment id="12462581" name="package+scan+test.jar" size="1041" author="fmarinelli" created="Tue, 1 Sep 2009 09:26:01 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>41683</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 25 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i01lpz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7288</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>