<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 09:46:33 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-4489] camel-http4 sends out a &apos;http4&apos; GET request</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-4489</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;When I try to do : from(&quot;http4://www.google.com/&quot;).to(&quot;mock:results&quot;) using apache camel-http4 scheme, a GET request is being sent out with &apos;http4&apos; as the protocol - my proxy server fails to understand this as a protocol. &lt;/p&gt;

&lt;p&gt;This is what the log looks like: &lt;/p&gt;

&lt;p&gt;  DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;Camel (camel-1) thread #0 - http4://www.google.com/&amp;#93;&lt;/span&gt; (RequestAddCookies.java132) - CookieSpec selected: best-match&lt;br/&gt;
  DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;Camel (camel-1) thread #0 - http4://www.google.com/&amp;#93;&lt;/span&gt; (RequestAuthCache.java75) - Auth cache not set in the context&lt;br/&gt;
  DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;Camel (camel-1) thread #0 - http4://www.google.com/&amp;#93;&lt;/span&gt; (DefaultRequestDirector.java643) - Attempt 1 to execute request&lt;br/&gt;
  DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;Camel (camel-1) thread #0 - http4://www.google.com/&amp;#93;&lt;/span&gt; (DefaultClientConnection.java264) - Sending request: GET http4://www.google.com/ HTTP/1.1&lt;br/&gt;
  DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;Camel (camel-1) thread #0 - http4://www.google.com/&amp;#93;&lt;/span&gt; (Wire.java63) - &amp;gt;&amp;gt; &quot;GET http4://www.google.com/ HTTP/1.1&lt;span class=&quot;error&quot;&gt;&amp;#91;\r&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;\n&amp;#93;&lt;/span&gt;&quot;&lt;br/&gt;
  DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;Camel (camel-1) thread #0 - http4://www.google.com/&amp;#93;&lt;/span&gt; (Wire.java63) - &amp;gt;&amp;gt; &quot;Host: www.google.com&lt;span class=&quot;error&quot;&gt;&amp;#91;\r&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;\n&amp;#93;&lt;/span&gt;&quot;&lt;br/&gt;
  DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;Camel (camel-1) thread #0 - http4://www.google.com/&amp;#93;&lt;/span&gt; (Wire.java63) - &amp;gt;&amp;gt; &quot;Proxy-Connection: Keep-Alive&lt;span class=&quot;error&quot;&gt;&amp;#91;\r&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;\n&amp;#93;&lt;/span&gt;&quot;&lt;br/&gt;
  DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;Camel (camel-1) thread #0 - http4://www.google.com/&amp;#93;&lt;/span&gt; (Wire.java63) - &amp;gt;&amp;gt; &quot;&lt;span class=&quot;error&quot;&gt;&amp;#91;\r&amp;#93;&lt;/span&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;\n&amp;#93;&lt;/span&gt;&quot;&lt;br/&gt;
  DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;Camel (camel-1) thread #0 - http4://www.google.com/&amp;#93;&lt;/span&gt; (DefaultClientConnection.java268) - &amp;gt;&amp;gt; GET http4://www.google.com/ HTTP/1.1&lt;br/&gt;
  DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;Camel (camel-1) thread #0 - http4://www.google.com/&amp;#93;&lt;/span&gt; (DefaultClientConnection.java271) - &amp;gt;&amp;gt; Host: www.google.com&lt;br/&gt;
  DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;Camel (camel-1) thread #0 - http4://www.google.com/&amp;#93;&lt;/span&gt; (DefaultClientConnection.java271) - &amp;gt;&amp;gt; Proxy-Connection: Keep-Alive&lt;br/&gt;
  DEBUG &lt;span class=&quot;error&quot;&gt;&amp;#91;Camel (camel-1) thread #0 - http4://www.google.com/&amp;#93;&lt;/span&gt; (Wire.java63) - &amp;lt;&amp;lt; &quot;HTTP/1.1 502 Proxy Error &lt;/p&gt;


</description>
                <environment>&lt;p&gt;Windows XP, JDK 1.6&lt;/p&gt;</environment>
        <key id="12524630">CAMEL-4489</key>
            <summary>camel-http4 sends out a &apos;http4&apos; GET request</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="njiang">Willem Jiang</assignee>
                                    <reporter username="fedexp">Josh Deanor</reporter>
                        <labels>
                            <label>http</label>
                            <label>http4</label>
                    </labels>
                <created>Mon, 26 Sep 2011 13:23:13 +0000</created>
                <updated>Tue, 25 Oct 2011 11:35:32 +0000</updated>
                            <resolved>Sun, 9 Oct 2011 14:52:51 +0000</resolved>
                                                    <fixVersion>2.7.4</fixVersion>
                    <fixVersion>2.8.2</fixVersion>
                    <fixVersion>2.9.0</fixVersion>
                                    <component>camel-http</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13114902" author="fedexp" created="Mon, 26 Sep 2011 20:39:48 +0000"  >&lt;p&gt;I checked the same code from a non-proxy env and it seems to work fine. &lt;br/&gt;
In my proxy environment however, ethereal trace tells me that a request for http4://www.google.com is being sent to the proxy!&lt;/p&gt;</comment>
                            <comment id="13115312" author="davsclaus" created="Tue, 27 Sep 2011 08:06:47 +0000"  >&lt;p&gt;Josh what are you trying to archive?&lt;/p&gt;

&lt;p&gt;from(&quot;http4:xxx&quot;) will repeatable invoke a HTTP GET to that external url, and route the response as a message. What is your use case for doing that? &lt;/p&gt;</comment>
                            <comment id="13115382" author="fedexp" created="Tue, 27 Sep 2011 10:18:51 +0000"  >&lt;p&gt;Claus, Did you mean to ask - what am I trying to achieve? &lt;br/&gt;
I am trying to read from a streaming http url... I know polling it won&apos;t help coz, I would need to have a connection open and kept-alive (I&apos;ll have to find a way around it). &lt;/p&gt;

&lt;p&gt;The issue here is that camel is sending a &quot;GET &lt;b&gt;http4&lt;/b&gt;://www.google.com&quot; instead of &quot;GET &lt;b&gt;http&lt;/b&gt;://www.google.com&quot; - this happens only when I use it in my proxy environment. I am not sure what the issue is, coz httpclient 4 works perfectly fine when used standalone, using the same proxy.&lt;/p&gt;</comment>
                            <comment id="13115383" author="fedexp" created="Tue, 27 Sep 2011 10:22:25 +0000"  >&lt;p&gt;I can confirm it coz, I&apos;ve used a packet sniffer  (ethereal) and observed the GET request and it is indeed a http4 protocol and not http - I can attach the trace if you want.&lt;/p&gt;</comment>
                            <comment id="13115392" author="davsclaus" created="Tue, 27 Sep 2011 10:47:28 +0000"  >&lt;p&gt;I think Willem have fixed this on trunk. There is a commit&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?rev=1176274&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=1176274&amp;amp;view=rev&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13115397" author="njiang" created="Tue, 27 Sep 2011 10:54:27 +0000"  >&lt;p&gt;Hi Josh,&lt;/p&gt;

&lt;p&gt;Can you try the patch that I just committed? you can merge it into the camel version that you are using without any trouble &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;.&lt;br/&gt;
I will merge the patch to the other branch of camel.&lt;/p&gt;

&lt;p&gt;Willem&lt;/p&gt;</comment>
                            <comment id="13115439" author="njiang" created="Tue, 27 Sep 2011 12:28:02 +0000"  >&lt;p&gt;committed the patch into trunk, camel-2.8.x, camel-2.7.x.&lt;/p&gt;</comment>
                            <comment id="13115596" author="fedexp" created="Tue, 27 Sep 2011 16:04:12 +0000"  >&lt;p&gt;I tried with the patch, it does not work. I did something to make it work, but I&apos;ll leave it to you to figure out what the issue is.&lt;/p&gt;

&lt;p&gt;I see the changes you&apos;ve made, but that doesn&apos;t change what is returned here:&lt;/p&gt;

&lt;p&gt;In HttpPollingConsumer.java:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; HttpRequestBase createMethod() 
   {
        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; uri = endpoint.getEndpointUri();
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HttpGet(uri);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I had a debug point here on String uri=endpoint.getEndpointUri(); and I noticed that it pointed to &apos;http4://www.google.com&apos; and to make it work, I changed the uri to &quot;http://www.google.com&quot; (during debug) and it returned the correct response (HTTP 200). &lt;/p&gt;
</comment>
                            <comment id="13115598" author="fedexp" created="Tue, 27 Sep 2011 16:06:01 +0000"  >&lt;p&gt;what you really need to fix, I believe, is the EndPoint URI. It cannot contain a http4 instead of http as protocol.&lt;br/&gt;
Your changes were made to HttpEndPoint and HttpProducer files, but somehow my code never breaks in HttpProducer, instead it goes to HttpPollingConsumer all the time - may be you should look here to fix this issue?&lt;/p&gt;</comment>
                            <comment id="13116278" author="njiang" created="Wed, 28 Sep 2011 08:04:59 +0000"  >&lt;p&gt;Hi Josh,&lt;/p&gt;

&lt;p&gt;I&apos;m sorry I didn&apos;t check all the path that could effect the http method url.&lt;br/&gt;
After went through the code and I found a way to verify my change and find a minor issue of http component.&lt;/p&gt;

&lt;p&gt;I will commit a better patch shortly.&lt;/p&gt;

&lt;p&gt;Willem&lt;/p&gt;</comment>
                            <comment id="13116283" author="fedexp" created="Wed, 28 Sep 2011 08:12:59 +0000"  >&lt;p&gt;Willem, &lt;/p&gt;

&lt;p&gt;Thank you. I will look forward to your patch.&lt;/p&gt;</comment>
                            <comment id="13116285" author="fedexp" created="Wed, 28 Sep 2011 08:15:19 +0000"  >&lt;p&gt;I&apos;ve an out-of-context question here... I understand that by default the HttpConsumer polls the target website, but how do I make it work in a &apos;http streaming&apos; scenario? For instance, say you are connected to a twitter stream, which keeps pushing chunked data on a http connection that you would keep open, how would I handle this scenario using camel? &lt;/p&gt;</comment>
                            <comment id="13116293" author="njiang" created="Wed, 28 Sep 2011 08:43:36 +0000"  >&lt;p&gt;Hi Josh,&lt;/p&gt;

&lt;p&gt;I don&apos;t think current HttpConsumer support this &apos;http streaming&apos; out of box.&lt;br/&gt;
You may take a look at the camel-cometd component to see if it can do the job for you.&lt;/p&gt;

&lt;p&gt;Willem&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10062"><![CDATA[Moderate]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>779</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 9 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0218v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9803</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>