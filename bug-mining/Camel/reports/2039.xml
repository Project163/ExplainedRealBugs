<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 09:54:02 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-5704] Split inside Split - Parallel processing issue - Thread is getting wrong Exchange when leaving inner split </title>
                <link>https://issues.apache.org/jira/browse/CAMEL-5704</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;A small JUnit recreation case is attached.&lt;br/&gt;
When using embedded split inside a split with parallel processing, threads are getting a wrong exchange (or wrong exchange copy) just after leaving the inner split and returning to the parent split.&lt;/p&gt;

&lt;p&gt;In the test case, we split a file by comma in a parent split (Block split), then by line separator in inner split (Line Split). &lt;br/&gt;
We expect 2 files in output, each of them containing the respective Blocks.&lt;/p&gt;

&lt;p&gt;However, once inner split is complete, each thread is supposed to add a 11th line in the result&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/information.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;.txt file saying split&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/information.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; is complete.  &lt;br/&gt;
Bug is that one of the thread ends up with parent split Exchange (copy?) from the other thread, and appends wrong information into the wrong file.&lt;/p&gt;

&lt;p&gt;Expected:&lt;br/&gt;
---------&lt;br/&gt;
(result0.txt)&lt;br/&gt;
Block1 Line 1:Status=OK&lt;br/&gt;
Block1 Line 2:Status=OK&lt;br/&gt;
Block1 Line 0:Status=OK&lt;br/&gt;
Block1 Line 4:Status=OK&lt;br/&gt;
Block1 Line 3:Status=OK&lt;br/&gt;
Block1 Line 8:Status=OK&lt;br/&gt;
Block1 Line 5:Status=OK&lt;br/&gt;
Block1 Line 6:Status=OK&lt;br/&gt;
Block1 Line 7:Status=OK&lt;br/&gt;
Block1 Line 9:Status=OK&lt;br/&gt;
0 complete&lt;/p&gt;

&lt;p&gt;(result1.txt)&lt;br/&gt;
Block2 Line 0:Status=OK&lt;br/&gt;
Block2 Line 3:Status=OK&lt;br/&gt;
Block2 Line 1:Status=OK&lt;br/&gt;
Block2 Line 2:Status=OK&lt;br/&gt;
Block2 Line 6:Status=OK&lt;br/&gt;
Block2 Line 4:Status=OK&lt;br/&gt;
Block2 Line 7:Status=OK&lt;br/&gt;
Block2 Line 9:Status=OK&lt;br/&gt;
Block2 Line 5:Status=OK&lt;br/&gt;
Block2 Line 8:Status=OK&lt;br/&gt;
1 complete&lt;/p&gt;

&lt;p&gt;Actual:&lt;br/&gt;
-------&lt;br/&gt;
(result0.txt)&lt;br/&gt;
Block1 Line 1:Status=OK&lt;br/&gt;
Block1 Line 2:Status=OK&lt;br/&gt;
Block1 Line 0:Status=OK&lt;br/&gt;
Block1 Line 4:Status=OK&lt;br/&gt;
Block1 Line 3:Status=OK&lt;br/&gt;
Block1 Line 8:Status=OK&lt;br/&gt;
Block1 Line 5:Status=OK&lt;br/&gt;
Block1 Line 6:Status=OK&lt;br/&gt;
Block1 Line 7:Status=OK&lt;br/&gt;
Block1 Line 9:Status=OK&lt;br/&gt;
0 complete0 complete&lt;/p&gt;

&lt;p&gt;(result1.txt)&lt;br/&gt;
Block2 Line 0:Status=OK&lt;br/&gt;
Block2 Line 3:Status=OK&lt;br/&gt;
Block2 Line 1:Status=OK&lt;br/&gt;
Block2 Line 2:Status=OK&lt;br/&gt;
Block2 Line 6:Status=OK&lt;br/&gt;
Block2 Line 4:Status=OK&lt;br/&gt;
Block2 Line 7:Status=OK&lt;br/&gt;
Block2 Line 9:Status=OK&lt;br/&gt;
Block2 Line 5:Status=OK&lt;br/&gt;
Block2 Line 8:Status=OK&lt;/p&gt;


&lt;p&gt;This issue exist in 2.8.x, and probably in 2.10.x as well.&lt;br/&gt;
This is a Splitter/MulticastProcessor or Pipeline issue but not quite familiar with the code, I am having hard time tracking it. &lt;/p&gt;</description>
                <environment>&lt;p&gt;java version &quot;1.6.0_35&quot;&lt;br/&gt;
Java(TM) SE Runtime Environment (build 1.6.0_35-b10-428-11M3811)&lt;br/&gt;
Java HotSpot(TM) 64-Bit Server VM (build 20.10-b01-428, mixed mode)&lt;/p&gt;

&lt;p&gt;MacOsX 10.7.5&lt;/p&gt;

&lt;p&gt;URL: &lt;a href=&quot;https://svn.apache.org/repos/asf/camel/branches/camel-2.9.x&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/repos/asf/camel/branches/camel-2.9.x&lt;/a&gt;&lt;br/&gt;
Repository Root: &lt;a href=&quot;https://svn.apache.org/repos/asf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/repos/asf&lt;/a&gt;&lt;br/&gt;
Repository UUID: 13f79535-47bb-0310-9956-ffa450edef68&lt;br/&gt;
Revision: 1396229&lt;br/&gt;
Node Kind: directory&lt;br/&gt;
Schedule: normal&lt;br/&gt;
Last Changed Author: dkulp&lt;br/&gt;
Last Changed Rev: 1396218&lt;br/&gt;
Last Changed Date: 2012-10-09 21:36:47 +0200 (Tue, 09 Oct 2012)&lt;/p&gt;</environment>
        <key id="12611766">CAMEL-5704</key>
            <summary>Split inside Split - Parallel processing issue - Thread is getting wrong Exchange when leaving inner split </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="njiang">Willem Jiang</assignee>
                                    <reporter username="gill3s">Gilles Huron</reporter>
                        <labels>
                    </labels>
                <created>Sun, 14 Oct 2012 19:09:47 +0000</created>
                <updated>Mon, 23 Sep 2013 20:14:34 +0000</updated>
                            <resolved>Wed, 17 Oct 2012 13:12:10 +0000</resolved>
                                    <version>2.9.3</version>
                                    <fixVersion>2.9.5</fixVersion>
                    <fixVersion>2.10.3</fixVersion>
                    <fixVersion>2.11.0</fixVersion>
                                    <component>camel-core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13477015" author="njiang" created="Tue, 16 Oct 2012 14:06:57 +0000"  >&lt;p&gt;The issue is caused by when exchange copy, it doesn&apos;t do the deep copy on the map property, and it will cause some side effect on the MulticastProcessor&apos;s setAggregationStrategyOnExchange. &lt;br/&gt;
It can be resolve by creating a new map when calling the setAggregationStrategyOnExchange.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310010">
                    <name>Incorporates</name>
                                            <outwardlinks description="incorporates">
                                        <issuelink>
            <issuekey id="12669608">CAMEL-6771</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12549083" name="FileSplitInSplitTest.java" size="3246" author="gill3s" created="Sun, 14 Oct 2012 19:11:18 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>248578</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 6 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i09w5z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>55652</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>