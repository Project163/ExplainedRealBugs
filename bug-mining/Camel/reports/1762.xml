<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 09:50:13 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-4954] Camel 2.9.0 incapable of working with % in endpoint URIs</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-4954</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;In the class org.apache.camel.util.URISupport which will be used to resolve endpoints (DefaultCamelContext#normalizeEndpointUri) the method parseParameters will be called.&lt;br/&gt;
At first the java.net.Uri#getQuery will be called with according to the javadoc &quot;Returns the decoded query component of this URI&quot; returns a decoded URI. If that fails the java.net.Uri#getSchemeSpecificPart method will be called which according to the javadoc &quot;Returns the decoded scheme-specific part of this URI.&quot; returns a decoded URI.&lt;br/&gt;
So to summarize we get in any case a decoded URI.&lt;br/&gt;
This URI will then be than in the method org.apache.camel.util.URISupport#parseQuery(String) again decoded with java.net.URLDecoder#decode(String,String).&lt;br/&gt;
This code leads to the following behaviour:&lt;br/&gt;
 If a % is properly encoded with %25test the %25test will be substituted by the first call to %test and the decoded again which leads to an Exception.&lt;/p&gt;

&lt;p&gt;In the &lt;a href=&quot;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1166508&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?view=revision&amp;amp;revision=1166508&lt;/a&gt; commit you can see that the % was uncommented from org.apache.camel.util#UnsafeUriCharactersEncoder. Maybe this is related.&lt;/p&gt;

&lt;p&gt;However... Double encoding of URIs seems quite odd. With any URI char there is no issue with that. But with % the % will be decoded again, which makes a % unusable in Camel.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Mac 10.7 Java 1.6.0_29&lt;/p&gt;</environment>
        <key id="12540342">CAMEL-4954</key>
            <summary>Camel 2.9.0 incapable of working with % in endpoint URIs</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hadrian">Hadrian Zbarcea</assignee>
                                    <reporter username="sruehl">Sebastian R&#252;hl</reporter>
                        <labels>
                    </labels>
                <created>Mon, 30 Jan 2012 10:26:34 +0000</created>
                <updated>Mon, 18 Mar 2013 18:15:46 +0000</updated>
                            <resolved>Fri, 3 Feb 2012 22:16:58 +0000</resolved>
                                    <version>2.9.0</version>
                                    <fixVersion>2.9.1</fixVersion>
                    <fixVersion>2.10.0</fixVersion>
                                    <component>camel-core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13196031" author="sruehl" created="Mon, 30 Jan 2012 10:28:54 +0000"  >&lt;p&gt;Maybe this issue is a side effect&lt;/p&gt;</comment>
                            <comment id="13196036" author="sruehl" created="Mon, 30 Jan 2012 10:35:23 +0000"  >&lt;p&gt;FYI %2525test leads to the excepted behavior (%test).&lt;/p&gt;</comment>
                            <comment id="13198820" author="sruehl" created="Thu, 2 Feb 2012 14:19:33 +0000"  >&lt;p&gt;Attached jUnit test which demonstrates the issue.&lt;/p&gt;</comment>
                            <comment id="13198853" author="hadrian" created="Thu, 2 Feb 2012 15:03:23 +0000"  >&lt;p&gt;Thanks a lot for reporting this and especially for providing a unit test. That is a problem I will fix today. In general however, the aim is to get rid of the normalizeEndpointUri. It is used because the uri design for some components allows the creation of invalid URIs that cannot be passed, so using it was a workaround in the first place (from almost the very beginning). The endpoint creation is quite convoluted and is due for some refactoring anyway, but I thought it could wait until 3.0.&lt;/p&gt;

&lt;p&gt;The goal for 3.0 is to ensure that all components only accept valid URIs, so it&apos;s the responsibility of the user to encode whatever needs encoding, as it the case with any other technology the uses URIs. There is a new method a component can override now, preProcessUri(String) that would convert (and log) the original invalid Uri into a valid one, which could be used instead of the original one. This should also help with migration.&lt;/p&gt;

&lt;p&gt;On a side note, using clear passwords in the uri is not the most secure thing to do. You may want to take a look at camel-jasypt. It may provide a different, safer, workaround.&lt;/p&gt;</comment>
                            <comment id="13199568" author="hadrian" created="Fri, 3 Feb 2012 07:20:16 +0000"  >&lt;p&gt;@Sebastian, I committed a fix, actually more like a workaround on trunk. It took a while because I had to run the full tests to make sure I didn&apos;t break something. A better fix is possible and get rid of the double decode, but that only after we fix all components to not rely on unsafe URIs and then we can remove the double decode and more importantly the normalize.&lt;/p&gt;

&lt;p&gt;It should work for you now. It would be great if you could test it from trunk. I will merge to 2.9.1 in a few hours.&lt;/p&gt;</comment>
                            <comment id="13203110" author="njiang" created="Wed, 8 Feb 2012 01:32:05 +0000"  >&lt;p&gt;@Hadrian,&lt;/p&gt;

&lt;p&gt;A lot of test failed because of patch merging into the Camel 2.8.x.&lt;br/&gt;
Can you take a look at it ?&lt;/p&gt;
</comment>
                            <comment id="13205264" author="njiang" created="Fri, 10 Feb 2012 06:26:17 +0000"  >&lt;p&gt;Revert the patch of 1240189 in camel 2.8.x branch to fix the build.&lt;/p&gt;</comment>
                            <comment id="13205530" author="sruehl" created="Fri, 10 Feb 2012 16:37:20 +0000"  >&lt;p&gt;@Hadrian I wasn&apos;t able to build the trunk by myself (the camel build tips won&apos;t help) so I can&apos;t test it. But thanks for the tip for camel-jasypt.&lt;/p&gt;

&lt;p&gt;@Willem Im quite not sure of the content of patch 1240189 but could you link to the hudson output (or a place where the test output can be found)?&lt;/p&gt;

&lt;p&gt;Because its reverted shouldn&apos;t then this Issue reopened?&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10020">
                    <name>Cloners</name>
                                                                <inwardlinks description="is cloned by">
                                        <issuelink>
            <issuekey id="12637597">CAMEL-6176</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12521636">CAMEL-4425</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12512949" name="PercentTest.java" size="679" author="sruehl" created="Thu, 2 Feb 2012 14:19:33 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>225755</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 41 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0243j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>10265</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>