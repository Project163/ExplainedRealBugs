<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:41:11 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-14969] Failed to start route [A] because of duplicate id detected: [B]</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-14969</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;When loading rest definitions via &quot;xml-rests&quot; path defined in property&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;font color=&quot;#403294&quot;&gt;camel.springboot.xml-rests =&#160;classpath:folder-camel/folder-rest/*.xml&lt;/font&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;The camel 3.2 fails with error&#160;&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;font color=&quot;#de350b&quot;&gt;Failed to start route first-test-get-id because of duplicate id detected: first-test-to-id. Please correct ids to be unique among all your routes.&lt;/font&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;My rest XML file is defined as&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;&lt;/tt&gt;&lt;br/&gt;
 &lt;tt&gt;&amp;lt;rests xmlns=&quot;http://camel.apache.org/schema/spring&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&lt;/tt&gt;&lt;br/&gt;
 {{ xsi:schemaLocation=&quot;}}&lt;br/&gt;
 {{ &#160; &#160;&lt;a href=&quot;http://camel.apache.org/schema/spring&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://camel.apache.org/schema/spring&lt;/a&gt; &lt;a href=&quot;https://camel.apache.org/schema/spring/camel-spring-3.2.0.xsd&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://camel.apache.org/schema/spring/camel-spring-3.2.0.xsd&lt;/a&gt;}}&lt;br/&gt;
 {{ &#160; &#160;&quot;&amp;gt;}}&lt;br/&gt;
 {{ &amp;lt;rest id=&quot;id1&quot; path=&quot;/test&quot;&amp;gt;}}&lt;br/&gt;
 {{ &amp;lt;get id=&quot;id2&quot; uri=&quot;/folderuri&quot;&amp;gt;}}&lt;br/&gt;
 &lt;font color=&quot;#de350b&quot;&gt;{\{ &amp;lt;to id=&quot;id3&quot; uri=&quot;log:test-log-rest&quot; /&amp;gt;}}&lt;/font&gt;&lt;br/&gt;
 {{ &amp;lt;/get&amp;gt;}}&lt;br/&gt;
 {{ &amp;lt;/rest&amp;gt;}}&lt;br/&gt;
 &lt;tt&gt;&amp;lt;/rests&amp;gt;&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;However, when I envelope TO tag in the ROUTE tag, the issue gets resolved&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;&amp;lt;rest id=&quot;id1&quot; path=&quot;/test&quot;&amp;gt;&lt;/tt&gt;&lt;br/&gt;
 &lt;tt&gt;&amp;lt;get id=&quot;id2&quot; uri=&quot;/folderuri&quot;&amp;gt;&lt;/tt&gt;&lt;br/&gt;
 &lt;tt&gt;&lt;font color=&quot;#4c9aff&quot;&gt;&amp;lt;route id=&quot;id4&quot;&amp;gt;&lt;/font&gt;&lt;/tt&gt;&lt;br/&gt;
 &lt;tt&gt;&lt;font color=&quot;#de350b&quot;&gt;&amp;lt;to id=&quot;id3&quot; uri=&quot;log:test-log-rest&quot; /&amp;gt;&lt;/font&gt;&lt;/tt&gt;&lt;br/&gt;
 &lt;tt&gt;&lt;font color=&quot;#4c9aff&quot;&gt;&amp;lt;/route&amp;gt;&lt;/font&gt;&lt;/tt&gt;&lt;br/&gt;
 &lt;tt&gt;&amp;lt;/get&amp;gt;&lt;/tt&gt;&lt;br/&gt;
 &lt;tt&gt;&amp;lt;/rest&amp;gt;&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13301061">CAMEL-14969</key>
            <summary>Failed to start route [A] because of duplicate id detected: [B]</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="mindiga">Nenad Nesovanovic</reporter>
                        <labels>
                    </labels>
                <created>Sun, 26 Apr 2020 09:03:05 +0000</created>
                <updated>Thu, 30 Apr 2020 07:27:24 +0000</updated>
                            <resolved>Thu, 30 Apr 2020 07:27:05 +0000</resolved>
                                    <version>3.2.0</version>
                                    <fixVersion>3.3.0</fixVersion>
                                    <component>camel-spring-boot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17092599" author="mindiga" created="Sun, 26 Apr 2020 09:09:15 +0000"  >&lt;p&gt;After investigating the issue found out that it is due to the &lt;b&gt;&lt;font color=&quot;#4c9aff&quot;&gt;&quot;RouteDefinitionHelper.validateUniqueIds&quot;&lt;/font&gt;&lt;/b&gt; method comparing&#160;RouteDefinition objects by using == sign and&#160;RouteDefinition does not implement &lt;b&gt;&lt;font color=&quot;#4c9aff&quot;&gt;&quot;equals&quot;&lt;/font&gt;&lt;/b&gt; method to compare route URI but leaves it to the basic object reference comparison. This causes that when REST endpoint URI is added to the list of routes of clashes with the endpoint route provided in route XML.&#160;&lt;/p&gt;</comment>
                            <comment id="17092602" author="mindiga" created="Sun, 26 Apr 2020 09:15:02 +0000"  >&lt;p&gt;Route Definitions are compared by reference instead of URI&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13001206/13001206_eclipse1_compare_by_ref.PNG&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;And this causes duplicates in the routes list&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13001207/13001207_eclipse2_causes_duplicate.PNG&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;Which results in multiple routes with the same URI&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13001208/13001208_eclipse3-two-routes.PNG&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;Which than fails validation on having duplicate ROUTES and multiple subscribers routers on the same endpoint&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13001204/13001204_eclipse4-comparison-conflict.PNG&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;And throws exception&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13001205/13001205_eclipse5-comparison-conflict.PNG&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17092604" author="mindiga" created="Sun, 26 Apr 2020 09:20:26 +0000"  >&lt;p&gt;Stack traces of the debug points are below&lt;/p&gt;

&lt;p&gt;1. RouteDefinition object does not implement &quot;equals&quot; method&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;RouteDefinition(Object).equals(Object) line: 156 RouteDefinition(Object).equals(Object) line: 156 ArrayList&amp;lt;E&amp;gt;.remove(Object) line: 622 DefaultModel.removeRouteDefinition(RouteDefinition) line: 108 DefaultModel.removeRouteDefinitions(Collection&amp;lt;RouteDefinition&amp;gt;) line: 94 DefaultModel.addRouteDefinitions(Collection&amp;lt;RouteDefinition&amp;gt;) line: 79 SpringCamelContext(DefaultCamelContext).addRouteDefinitions(Collection&amp;lt;RouteDefinition&amp;gt;) line: 126 CamelContextFactoryBean(AbstractCamelContextFactoryBean&amp;lt;T&amp;gt;).setupRoutes() line: 476 CamelContextFactoryBean.start() line: 367 CamelContextFactoryBean.onApplicationEvent(ContextRefreshedEvent) line: 420 CamelContextFactoryBean.onApplicationEvent(ApplicationEvent) line: 94 SimpleApplicationEventMulticaster.doInvokeListener(ApplicationListener, ApplicationEvent) line: 172 SimpleApplicationEventMulticaster.invokeListener(ApplicationListener&amp;lt;?&amp;gt;, ApplicationEvent) line: 165 SimpleApplicationEventMulticaster.multicastEvent(ApplicationEvent, ResolvableType) line: 139 AnnotationConfigApplicationContext(AbstractApplicationContext).publishEvent(Object, ResolvableType) line: 403 AnnotationConfigApplicationContext(AbstractApplicationContext).publishEvent(ApplicationEvent) line: 360 AnnotationConfigApplicationContext(AbstractApplicationContext).finishRefresh() line: 897 AnnotationConfigApplicationContext(AbstractApplicationContext).refresh() line: 553 SpringApplication.refresh(ApplicationContext) line: 747 SpringApplication.refreshContext(ConfigurableApplicationContext) line: 397 SpringApplication.run(String...) line: 315 SpringApplication.run(Class&amp;lt;?&amp;gt;[], String[]) line: 1226 SpringApplication.run(Class&amp;lt;?&amp;gt;, String...) line: 1215 NexusApp.main(String[]) line: 13 &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;2. And because of that when rest endpoint route is created, it is the duplicate of the actual route&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;DefaultModel.addRouteDefinitions(Collection&amp;lt;RouteDefinition&amp;gt;) line: 81 DefaultModel.addRouteDefinitions(Collection&amp;lt;RouteDefinition&amp;gt;) line: 81 SpringCamelContext(DefaultCamelContext).addRouteDefinitions(Collection&amp;lt;RouteDefinition&amp;gt;) line: 126 CamelContextFactoryBean(AbstractCamelContextFactoryBean&amp;lt;T&amp;gt;).setupRoutes() line: 476 CamelContextFactoryBean.start() line: 367 CamelContextFactoryBean.onApplicationEvent(ContextRefreshedEvent) line: 420 CamelContextFactoryBean.onApplicationEvent(ApplicationEvent) line: 94 SimpleApplicationEventMulticaster.doInvokeListener(ApplicationListener, ApplicationEvent) line: 172 SimpleApplicationEventMulticaster.invokeListener(ApplicationListener&amp;lt;?&amp;gt;, ApplicationEvent) line: 165 SimpleApplicationEventMulticaster.multicastEvent(ApplicationEvent, ResolvableType) line: 139 AnnotationConfigApplicationContext(AbstractApplicationContext).publishEvent(Object, ResolvableType) line: 403 AnnotationConfigApplicationContext(AbstractApplicationContext).publishEvent(ApplicationEvent) line: 360 AnnotationConfigApplicationContext(AbstractApplicationContext).finishRefresh() line: 897 AnnotationConfigApplicationContext(AbstractApplicationContext).refresh() line: 553 SpringApplication.refresh(ApplicationContext) line: 747 SpringApplication.refreshContext(ConfigurableApplicationContext) line: 397 SpringApplication.run(String...) line: 315 SpringApplication.run(Class&amp;lt;?&amp;gt;[], String[]) line: 1226 SpringApplication.run(Class&amp;lt;?&amp;gt;, String...) line: 1215 NexusApp.main(String[]) line: 13 &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;3. Which then fails duplicate Id validation&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;RouteDefinitionHelper.validateUniqueIds(RouteDefinition, List&amp;lt;RouteDefinition&amp;gt;) line: 267 RouteDefinitionHelper.validateUniqueIds(RouteDefinition, List&amp;lt;RouteDefinition&amp;gt;) line: 267 SpringCamelContext(DefaultCamelContext).startRouteDefinitions(List&amp;lt;RouteDefinition&amp;gt;) line: 342 SpringCamelContext(DefaultCamelContext).startRouteDefinitions() line: 327 SpringCamelContext(AbstractCamelContext).doInit() line: 2598 SpringCamelContext(BaseService).init() line: 83 SpringCamelContext(AbstractCamelContext).init() line: 2431 SpringCamelContext(BaseService).start() line: 111 SpringCamelContext(AbstractCamelContext).start() line: 2448 SpringCamelContext.start() line: 121 CamelContextFactoryBean.start() line: 373 CamelContextFactoryBean.onApplicationEvent(ContextRefreshedEvent) line: 420 CamelContextFactoryBean.onApplicationEvent(ApplicationEvent) line: 94 SimpleApplicationEventMulticaster.doInvokeListener(ApplicationListener, ApplicationEvent) line: 172 SimpleApplicationEventMulticaster.invokeListener(ApplicationListener&amp;lt;?&amp;gt;, ApplicationEvent) line: 165 SimpleApplicationEventMulticaster.multicastEvent(ApplicationEvent, ResolvableType) line: 139 AnnotationConfigApplicationContext(AbstractApplicationContext).publishEvent(Object, ResolvableType) line: 403 AnnotationConfigApplicationContext(AbstractApplicationContext).publishEvent(ApplicationEvent) line: 360 AnnotationConfigApplicationContext(AbstractApplicationContext).finishRefresh() line: 897 AnnotationConfigApplicationContext(AbstractApplicationContext).refresh() line: 553 SpringApplication.refresh(ApplicationContext) line: 747 SpringApplication.refreshContext(ConfigurableApplicationContext) line: 397 SpringApplication.run(String...) line: 315 SpringApplication.run(Class&amp;lt;?&amp;gt;[], String[]) line: 1226 SpringApplication.run(Class&amp;lt;?&amp;gt;, String...) line: 1215 NexusApp.main(String[]) line: 13 &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17092608" author="mindiga" created="Sun, 26 Apr 2020 09:26:27 +0000"  >&lt;p&gt;Might be conceptually similar to &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-13651&quot; title=&quot;Rest DSL seems to duplicate the routes, therefore we can experience on having duplicated ids issues&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-13651&quot;&gt;&lt;del&gt;CAMEL-13651&lt;/del&gt;&lt;/a&gt;, but it is a different bug.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-13651&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/CAMEL-13651&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17092610" author="mindiga" created="Sun, 26 Apr 2020 09:29:01 +0000"  >&lt;p&gt;When I remove &quot;id&quot; attribute I get different exceptions&lt;/p&gt;

&lt;p&gt;&amp;lt;rest path=&quot;/test&quot;&amp;gt;&lt;br/&gt;
&amp;lt;get uri=&quot;/folderuri&quot;&amp;gt;&lt;br/&gt;
&amp;lt;to uri=&quot;log:test-nexus-rest&quot; /&amp;gt;&lt;br/&gt;
&amp;lt;/get&amp;gt;&lt;br/&gt;
&amp;lt;/rest&amp;gt;&lt;/p&gt;

&lt;p&gt;org.apache.camel.FailedToStartRouteException: Failed to start route route2 because of Multiple consumers for the same endpoint is not allowed: &lt;a href=&quot;http://0.0.0.0:8080/test/folderpath?httpMethodRestrict=GET%2COPTIONS&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://0.0.0.0:8080/test/folderpath?httpMethodRestrict=GET%2COPTIONS&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17092611" author="mindiga" created="Sun, 26 Apr 2020 09:30:24 +0000"  >&lt;p&gt;Trace level log included below&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/13001211/13001211_trace_log1.zip&quot; title=&quot;trace_log1.zip attached to CAMEL-14969&quot;&gt;trace_log1.zip&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&#160;&lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/13001210/13001210_trace_log2.zip&quot; title=&quot;trace_log2.zip attached to CAMEL-14969&quot;&gt;trace_log2.zip&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="17092955" author="mindiga" created="Mon, 27 Apr 2020 02:54:28 +0000"  >&lt;p&gt;My assessment is that for the REST endpoint Camel Spring is automatically creating producer and consumer route with the same name and as REST XML discovered resources are discovered first, then Camel Context end up creating them again from the routes definition created during the XML rest import.&lt;/p&gt;

&lt;p&gt;If Camel Context XML is importing the same routes through the restContextRef tag, then this issue does not occur, as rest definitions and endpoints are created after the Camel Context is initialised.&lt;/p&gt;

&lt;p&gt;Happy to provide more details if needed, but you should first go through the attached logs and images and please pay attention to the variable watch list on the images and debug stack trace that points out to the code lines and variable values to prove that route definitions list ends up having two route definitions for the single XML entry.&lt;/p&gt;</comment>
                            <comment id="17093083" author="davsclaus" created="Mon, 27 Apr 2020 07:14:05 +0000"  >&lt;p&gt;Are you able to attach a zip file with a sample project that reproduces this, its easier for us to use to work on this. &lt;/p&gt;</comment>
                            <comment id="17093609" author="mindiga" created="Mon, 27 Apr 2020 15:09:05 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davsclaus&quot; class=&quot;user-hover&quot; rel=&quot;davsclaus&quot;&gt;davsclaus&lt;/a&gt;, attached is the test project in Eclipse that will reproduce the issue.&#160;&lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/13001333/13001333_CAMEL-14969-Eclipse-Project.zip&quot; title=&quot;CAMEL-14969-Eclipse-Project.zip attached to CAMEL-14969&quot;&gt;CAMEL-14969-Eclipse-Project.zip&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;In the file named &quot;src/main/resources/nenad-rest/nenad-rest.xml&quot; you will find 4 rest definitions.&lt;/p&gt;

&lt;p&gt;Two that will fail and two that will work. You can uncomment them to test this.&lt;/p&gt;</comment>
                            <comment id="17093614" author="mindiga" created="Mon, 27 Apr 2020 15:12:42 +0000"  >&lt;p&gt;Project test parameters are&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;main-class:    com.nenad.test.CAMEL14969
jvm-arguments: -Xms256m -Xmx512m --add-opens java.base/sun.nio.ch=ALL-UNNAMED 
maven command: mvn clean install spring-boot:run
test-url:      http://0.0.0.0:8080/test/nenad&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17093620" author="mindiga" created="Mon, 27 Apr 2020 15:17:30 +0000"  >&lt;p&gt;Here are the two failing and two working rest definitions from the project&#160;&lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/13001333/13001333_CAMEL-14969-Eclipse-Project.zip&quot; title=&quot;CAMEL-14969-Eclipse-Project.zip attached to CAMEL-14969&quot;&gt;CAMEL-14969-Eclipse-Project.zip&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;
&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;
&amp;lt;rests xmlns=&quot;http://camel.apache.org/schema/spring&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
 xsi:schemaLocation=&quot;
 &#160; &#160;http://camel.apache.org/schema/spring https://camel.apache.org/schema/spring/camel-spring-3.2.0.xsd
 &#160; &#160;&quot;&amp;gt;
 &amp;lt;!-- fail1 --&amp;gt;
 &amp;lt;!-- rest path=&quot;/test&quot;&amp;gt;
 &amp;lt;get uri=&quot;/nenad&quot;&amp;gt;
 &amp;lt;to uri=&quot;direct:test_nenad&quot; /&amp;gt;
 &amp;lt;/get&amp;gt;
 &amp;lt;/rest--&amp;gt;
 &amp;lt;!-- fail2 --&amp;gt;
 &amp;lt;rest id=&quot;d1&quot; path=&quot;/test&quot;&amp;gt;
 &amp;lt;get id=&quot;d2&quot; uri=&quot;/nenad&quot;&amp;gt;
 &amp;lt;to id=&quot;d3&quot; uri=&quot;direct:test_nenad&quot; /&amp;gt;
 &amp;lt;/get&amp;gt;
 &amp;lt;/rest&amp;gt;
 &amp;lt;!-- works1 --&amp;gt;
 &amp;lt;!--rest path=&quot;/test&quot;&amp;gt;
 &amp;lt;get uri=&quot;/nenad&quot;&amp;gt;
 &amp;lt;route id=&quot;test_nenad_rest_get_route_id&quot;&amp;gt;
 &amp;lt;to uri=&quot;direct:test_nenad&quot; /&amp;gt;
 &amp;lt;/route&amp;gt;
 &amp;lt;/get&amp;gt;
 &amp;lt;/rest--&amp;gt;
 &amp;lt;!-- works2 --&amp;gt;
 &amp;lt;!--rest id=&quot;d1&quot; path=&quot;/test&quot;&amp;gt;
 &amp;lt;get id=&quot;d2&quot; uri=&quot;/nenad&quot;&amp;gt;
 &amp;lt;route id=&quot;test_nenad_rest_get_route_id&quot;&amp;gt;
 &amp;lt;to id=&quot;d3&quot; uri=&quot;direct:test_nenad&quot; /&amp;gt;
 &amp;lt;/route&amp;gt;
 &amp;lt;/get&amp;gt;
 &amp;lt;/rest--&amp;gt;
&amp;lt;/rests&amp;gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17094036" author="mindiga" created="Tue, 28 Apr 2020 00:16:09 +0000"  >&lt;p&gt;Added workaround links on the stackoverflow, so workaround can be accessed in the meantime&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#00875a&quot;&gt;&lt;b&gt;Failed to start route A because of duplicate id detected: B&lt;/b&gt;&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://stackoverflow.com/questions/61438807/failed-to-start-route-a-because-of-duplicate-id-detected-b&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://stackoverflow.com/questions/61438807/failed-to-start-route-a-because-of-duplicate-id-detected-b&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#00875a&quot;&gt;&lt;b&gt;Failed to start route A because of Multiple consumers for the same endpoint is not allowed: E&lt;/b&gt;&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://stackoverflow.com/questions/61439993/failed-to-start-route-a-because-of-multiple-consumers-for-the-same-endpoint-is&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://stackoverflow.com/questions/61439993/failed-to-start-route-a-because-of-multiple-consumers-for-the-same-endpoint-is&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17094880" author="mindiga" created="Tue, 28 Apr 2020 21:11:17 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davsclaus&quot; class=&quot;user-hover&quot; rel=&quot;davsclaus&quot;&gt;davsclaus&lt;/a&gt;, my take is that this is the primary reason that for years Camel had issues with running multiple Camel Contexts in the same JVM. Because Route Definition objects are compared by reference instead of URI, and each Context with have its own autonumbering, you would be much more likely to detect duplicates this way, which would cause phantom errors. Hence route definition comparison has to include Camel Context ID and URI ID in addition to the Route Definition ID, instead of using only Java Object ID as it is done currently. Changing this would require significant framework changes, so I opted to report this as an issue, instead of fixing it myself.&lt;/p&gt;</comment>
                            <comment id="17095533" author="davsclaus" created="Wed, 29 Apr 2020 15:07:29 +0000"  >&lt;p&gt;multiple camel contexts dont share route definitions. &lt;/p&gt;

&lt;p&gt;This is related to having rest xml and routes xml files loaded indepdently and rests are converted into routes&lt;/p&gt;</comment>
                            <comment id="17095913" author="mindiga" created="Wed, 29 Apr 2020 21:59:36 +0000"  >&lt;p&gt;Thanks for looking at this &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davsclaus&quot; class=&quot;user-hover&quot; rel=&quot;davsclaus&quot;&gt;davsclaus&lt;/a&gt;, appreciate your knowledgable insight. Warm Regards&lt;/p&gt;</comment>
                            <comment id="17096175" author="davsclaus" created="Thu, 30 Apr 2020 06:20:24 +0000"  >&lt;p&gt;Okay so its because you are mixing spring xml with spring-boot, with the &lt;/p&gt;

&lt;p&gt;@ImportResource( &lt;/p&gt;
{ &quot;classpath:camel-context.xml&quot;}
&lt;p&gt;)&lt;/p&gt;

&lt;p&gt;If you dont do this then it works&lt;/p&gt;</comment>
                            <comment id="17096243" author="davsclaus" created="Thu, 30 Apr 2020 07:04:41 +0000"  >&lt;p&gt;Okay have a fix in the works, so when you mix spring boot and xml dsl via those &amp;lt;beans&amp;gt; xml files.&lt;/p&gt;</comment>
                            <comment id="17096260" author="davsclaus" created="Thu, 30 Apr 2020 07:27:24 +0000"  >&lt;p&gt;Thanks for the detailed reported and the attached test-case&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13001333" name="CAMEL-14969-Eclipse-Project.zip" size="6493" author="mindiga" created="Mon, 27 Apr 2020 15:06:38 +0000"/>
                            <attachment id="13001206" name="eclipse1_compare_by_ref.PNG" size="293697" author="mindiga" created="Sun, 26 Apr 2020 09:10:15 +0000"/>
                            <attachment id="13001207" name="eclipse2_causes_duplicate.PNG" size="277290" author="mindiga" created="Sun, 26 Apr 2020 09:10:15 +0000"/>
                            <attachment id="13001208" name="eclipse3-two-routes.PNG" size="281168" author="mindiga" created="Sun, 26 Apr 2020 09:10:15 +0000"/>
                            <attachment id="13001204" name="eclipse4-comparison-conflict.PNG" size="260069" author="mindiga" created="Sun, 26 Apr 2020 09:10:15 +0000"/>
                            <attachment id="13001205" name="eclipse5-comparison-conflict.PNG" size="315300" author="mindiga" created="Sun, 26 Apr 2020 09:10:15 +0000"/>
                            <attachment id="13001211" name="trace_log1.zip" size="47378" author="mindiga" created="Sun, 26 Apr 2020 09:29:45 +0000"/>
                            <attachment id="13001210" name="trace_log2.zip" size="65343" author="mindiga" created="Sun, 26 Apr 2020 09:29:45 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>8.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 28 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0e300:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>