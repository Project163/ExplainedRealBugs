<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:20:31 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-10562] UnsupportedOperationException in DefaultCamelContext#safelyStartRouteServices</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-10562</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;DefaultCamelContext#safelyStartRouteServices the following code is called:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Collections.sort(startupListeners, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; OrderedComparator());
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;tt&gt;startupListeners&lt;/tt&gt; is a &lt;tt&gt;CopyOnWriteArrayList&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;In the specification of Collections.sort it is stated, that an UnsupportedOperationException is thrown if the collections listiterator doesn&apos;t support the set-operation.&lt;br/&gt;
Sadly, the documentation of CopyOnWriteArrayList#listIterator states, that the listiterator doesn&apos;t support this operation.&lt;br/&gt;
As expected in this szenario, the UnsupportedOperationException is thrown during startup of the camel context if an Oracle JDK 1.8.0 with patchlevel lower than 20 is used.&lt;br/&gt;
In 1.8.0_20 the operation Collections#sort(List,Comparator) is rewritten to delegate to List#sort(Comparator) so it doesn&apos;t matter anymore if the lists listIterator supports the set-operation.&lt;/p&gt;

&lt;p&gt;The issue can trivially been fixed by replacing the line by&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;startupListeners.sort(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; OrderedComparator());
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment>&lt;p&gt;Oracle JDK 1.8.0_(&amp;lt;20)&lt;/p&gt;</environment>
        <key id="13026008">CAMEL-10562</key>
            <summary>UnsupportedOperationException in DefaultCamelContext#safelyStartRouteServices</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="sschulze">Stefan</reporter>
                        <labels>
                    </labels>
                <created>Tue, 6 Dec 2016 16:18:38 +0000</created>
                <updated>Thu, 8 Dec 2016 08:43:22 +0000</updated>
                            <resolved>Thu, 8 Dec 2016 08:43:22 +0000</resolved>
                                    <version>2.18.0</version>
                    <version>2.18.1</version>
                                    <fixVersion>2.18.2</fixVersion>
                    <fixVersion>2.19.0</fixVersion>
                                    <component>camel-core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15725955" author="sschulze" created="Tue, 6 Dec 2016 16:24:21 +0000"  >&lt;p&gt;This issue is a blocker in our environment, because we can not simply change the JRE in use on our servers. So I set the priority only to critical because of the outdated affected version of Java and the because I&apos;m not sure, if other JREs, i.e. the IBM JRE, are affected, too.&lt;/p&gt;

&lt;p&gt;I will add a pull request later. Currently I&apos;m not able to clone the git repo &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15727032" author="githubbot" created="Tue, 6 Dec 2016 23:12:49 +0000"  >&lt;p&gt;GitHub user sschulze opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/1333&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/1333&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-10562&quot; title=&quot;UnsupportedOperationException in DefaultCamelContext#safelyStartRouteServices&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-10562&quot;&gt;&lt;del&gt;CAMEL-10562&lt;/del&gt;&lt;/a&gt;: camel-core - Switched to List#sort&lt;/p&gt;

&lt;p&gt;    Usage of Collections.sort(CopyOnWriteArrayList, Comparator) causes an UnsupportedOperationException on Oracle Java 1.8.0 up to fixpack 20 due to the documented restriction of this method to require an implemented ListIterator#set(...) operation on the given list.&lt;/p&gt;

&lt;p&gt;    For details have a look at &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-10562&quot; title=&quot;UnsupportedOperationException in DefaultCamelContext#safelyStartRouteServices&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-10562&quot;&gt;&lt;del&gt;CAMEL-10562&lt;/del&gt;&lt;/a&gt;(&lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-10562&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/CAMEL-10562&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/sschulze/camel&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/sschulze/camel&lt;/a&gt; master&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/1333.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/1333.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #1333&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit bb8be00f5e50f4190677ffac8e73609446a600d9&lt;br/&gt;
Author: Stefan Schulze &amp;lt;stefan.schulze3@gmail.com&amp;gt;&lt;br/&gt;
Date:   2016-12-06T23:02:19Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-10562&quot; title=&quot;UnsupportedOperationException in DefaultCamelContext#safelyStartRouteServices&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-10562&quot;&gt;&lt;del&gt;CAMEL-10562&lt;/del&gt;&lt;/a&gt;: camel-core - Switched to List#sort&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15731555" author="githubbot" created="Thu, 8 Dec 2016 08:43:15 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/1333&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/1333&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15731556" author="davsclaus" created="Thu, 8 Dec 2016 08:43:22 +0000"  >&lt;p&gt;Thanks for reporting and the PR&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 49 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i378fz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>