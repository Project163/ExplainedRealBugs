<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:05:54 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-7880] Cannot use custom DataFormats in REST DSL</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-7880</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;See: &lt;a href=&quot;http://camel.465427.n5.nabble.com/RestBindingProcessor-JSON-Data-Format-Config-td5757103.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://camel.465427.n5.nabble.com/RestBindingProcessor-JSON-Data-Format-Config-td5757103.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;When using custom JSON data format in REST DSL, the service incorrectly rejects messages with request structure and accepts messages with response structure.&lt;/p&gt;

&lt;p&gt;This is due to &lt;tt&gt;org.apache.camel.model.rest.RestBindingDefinition.createProcessor(RouteContext)&lt;/tt&gt; looking up and configuring the same DataFormat object twice:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;DataFormat json = context.resolveDataFormat(name); 
DataFormat outJson = context.resolveDataFormat(name); 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12744774">CAMEL-7880</key>
            <summary>Cannot use custom DataFormats in REST DSL</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="sohrab">Sohrab Hosseini</reporter>
                        <labels>
                    </labels>
                <created>Mon, 29 Sep 2014 20:30:22 +0000</created>
                <updated>Sun, 22 Feb 2015 07:22:55 +0000</updated>
                            <resolved>Thu, 4 Dec 2014 08:11:29 +0000</resolved>
                                    <version>2.14.0</version>
                                    <fixVersion>2.14.1</fixVersion>
                    <fixVersion>2.15.0</fixVersion>
                                    <component>camel-core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14152224" author="sohrab" created="Mon, 29 Sep 2014 20:32:47 +0000"  >&lt;p&gt;Attached an integration test demonstrating the issue.&lt;/p&gt;</comment>
                            <comment id="14233448" author="davsclaus" created="Wed, 3 Dec 2014 20:01:35 +0000"  >&lt;p&gt;Okay got a fix which is a little hack. I think we may need to introduce custom data formats must be configured in pairs, one for input and another for output.&lt;/p&gt;

&lt;p&gt;But with the hack it works&lt;br/&gt;
&amp;gt;&amp;gt;&amp;gt; Status: HTTP/1.1 200 OK&lt;br/&gt;
&amp;gt;&amp;gt;&amp;gt; Body: &lt;span class=&quot;error&quot;&gt;&amp;#91;output:something&amp;#93;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="14233994" author="davsclaus" created="Thu, 4 Dec 2014 08:08:24 +0000"  >&lt;p&gt;Okay so the intention is that setting a custom data format refers only to its name, not to a pre configured instance from the registry. So I am adding that as a validation to fail if so.&lt;/p&gt;</comment>
                            <comment id="14241522" author="sohrab" created="Wed, 10 Dec 2014 18:46:53 +0000"  >&lt;p&gt;Thanks for the fix, Claus.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://camel.apache.org/custom-dataformat.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://camel.apache.org/custom-dataformat.html&lt;/a&gt; only mentions how to use custom data formats as a bean in the registry. I myself am not sure how this is going to work now that this validation has been added but is it worth adding the approach to documentation?&lt;/p&gt;</comment>
                            <comment id="14326794" author="jjathman" created="Thu, 19 Feb 2015 00:24:30 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davsclaus&quot; class=&quot;user-hover&quot; rel=&quot;davsclaus&quot;&gt;davsclaus&lt;/a&gt; I&apos;m still a little confused as to how to use a custom data format. Is it not possible to create a Spring bean customized data format and have that be used? Could you point me to any examples or documentation about how this works with the REST DSL? Thank you.&lt;/p&gt;</comment>
                            <comment id="14327262" author="davsclaus" created="Thu, 19 Feb 2015 11:11:53 +0000"  >&lt;p&gt;You can configure data formats, using the dataFormatProperty in XML also&lt;/p&gt;

&lt;p&gt;For example&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;  &amp;lt;restConfiguration component=&lt;span class=&quot;code-quote&quot;&gt;&quot;servlet&quot;&lt;/span&gt; bindingMode=&lt;span class=&quot;code-quote&quot;&gt;&quot;json&quot;&lt;/span&gt; contextPath=&lt;span class=&quot;code-quote&quot;&gt;&quot;/camel-example-servlet-&lt;span class=&quot;code-keyword&quot;&gt;rest&lt;/span&gt;-blueprint/&lt;span class=&quot;code-keyword&quot;&gt;rest&lt;/span&gt;&quot;&lt;/span&gt;
                       port=&lt;span class=&quot;code-quote&quot;&gt;&quot;8181&quot;&lt;/span&gt;&amp;gt;
      &amp;lt;dataFormatProperty key=&lt;span class=&quot;code-quote&quot;&gt;&quot;prettyPrint&quot;&lt;/span&gt; value=&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&quot;&lt;/span&gt;/&amp;gt;
    &amp;lt;/restConfiguration&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You can have as many dataFormatProperty you want. And you can prefix with json.in xml.in etc, as in the documentation to have different config.&lt;/p&gt;

&lt;p&gt;The rest-dsl requires to instantiate and handle the lifecycle of the used data format, hence not intended to use an existing instance.&lt;/p&gt;</comment>
                            <comment id="14327629" author="jjathman" created="Thu, 19 Feb 2015 15:23:19 +0000"  >&lt;p&gt;Thank you that is helpful. I&apos;m trying to set the &lt;tt&gt;FAIL_ON_UNKNOWN_PROPERTIES&lt;/tt&gt; of the ObjectMapper instance contained within the JacksonDataFormat. I&apos;m not quite sure how to use the dataFormatProperty, could you point me to how this could be done? In code I would do something like this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;JacksonDataFormat dataFormat = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JacksonDataFormat();
dataFormat.getObjectMapper().disable(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Would I do something like &lt;tt&gt;json.in.objectMapper.deserializationFeature&lt;/tt&gt; ?&lt;/p&gt;</comment>
                            <comment id="14332065" author="davsclaus" created="Sun, 22 Feb 2015 07:22:29 +0000"  >&lt;p&gt;Logged &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-8389&quot; title=&quot;camel-jackson - Allow to configure jackson object mapper from XML DSL&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-8389&quot;&gt;&lt;del&gt;CAMEL-8389&lt;/del&gt;&lt;/a&gt; to make this easier to configure, which would make it possible for rest-dsl as well.&lt;/p&gt;</comment>
                            <comment id="14332066" author="davsclaus" created="Sun, 22 Feb 2015 07:22:55 +0000"  >&lt;p&gt;Yeah Joseph, we should make this better. I have logged that ticket.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12776688">CAMEL-8389</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12671864" name="camel-rest-dataformat-test.groovy" size="1743" author="sohrab" created="Mon, 29 Sep 2014 20:32:47 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 39 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i20lrr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>