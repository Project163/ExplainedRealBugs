<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 09:45:15 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-4167] Label of marshal and unmarshal processors do not appear in trace output</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-4167</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;My route is defined as following:&lt;/p&gt;

&lt;p&gt;        from(mqIn)&lt;br/&gt;
        .routeId(Helper.getRouteId(this.getClass().getName()))&lt;br/&gt;
        .errorHandler(deadLetterChannel(&quot;log:DEAD&quot;).maximumRedeliveries(1).retryAttemptedLogLevel(LoggingLevel.WARN))&lt;br/&gt;
        .onException(EAIException.class).maximumRedeliveries(0).handled(true).to(&quot;bean:AuditBO?method=handleException&quot;).end()&lt;br/&gt;
        //.transacted(&quot;PROPAGATION_REQUIRES_NEW&quot;)&lt;br/&gt;
        .setHeader(&quot;UBS_ID&quot;,new AuditId())&lt;br/&gt;
        .wireTap(&quot;seda:auditNew&quot;)&lt;br/&gt;
        .unmarshal(&quot;SwiftDataFormat&quot;)&lt;br/&gt;
        .setHeader(&quot;MT&quot;, getMT)&lt;br/&gt;
        .setHeader(&quot;SWIFTAddress&quot;, getSwiftAddress)&lt;br/&gt;
        .to(mqOut);&lt;/p&gt;

&lt;p&gt;The tracing output is the following&lt;br/&gt;
[                          main] Tracer                         INFO  ID-w01b2bc3-3197-1309192772128-0-2 &amp;gt;&amp;gt;&amp;gt; (wmswift.in.IcgToCore) wireTap(seda://auditNew) --&amp;gt;  &amp;lt;&amp;lt;&amp;lt; Pattern:InOnly, Headers:&lt;/p&gt;
{UBS_ID=5932bc56-2f7e-45cf-a2b4-ef851ff661d7}, BodyType:String, ...&lt;br/&gt;
[                          main] Tracer                         INFO  ID-w01b2bc3-3197-1309192772128-0-2 &amp;gt;&amp;gt;&amp;gt; (wmswift.in.IcgToCore)  --&amp;gt; setHeader&lt;span class=&quot;error&quot;&gt;&amp;#91;MT&amp;#93;&lt;/span&gt; &amp;lt;&amp;lt;&amp;lt; Pattern:InOnly, Headers:{UBS_ID=5932bc56-2f7e-45cf-a2b4-ef851ff661d7}
&lt;p&gt;, BodyType:com.ubs.eai.wmswift.SwiftDataMessage, Body:com.ubs.eai.wmswift.SwiftDataMessage@91b9b0&lt;br/&gt;
[                          main] Tracer                         INFO  ID-w01b2bc3-3197-1309192772128-0-2 &amp;gt;&amp;gt;&amp;gt; (wmswift.in.IcgToCore) setHeader&lt;span class=&quot;error&quot;&gt;&amp;#91;MT&amp;#93;&lt;/span&gt; --&amp;gt; setHeader&lt;span class=&quot;error&quot;&gt;&amp;#91;SWIFTAddress&amp;#93;&lt;/span&gt; &amp;lt;&amp;lt;&amp;lt; Pattern:InOnly, Headers:&lt;/p&gt;
{MT=502, UBS_ID=5932bc56-2f7e-45cf-a2b4-ef851ff661d7}
&lt;p&gt;, BodyType:com.ubs.eai.wmswift.SwiftDataMessage, Body:com.ubs.eai.wmswift.SwiftDataMessage@91b9b0&lt;br/&gt;
[                          main] Tracer                         INFO  ID-w01b2bc3-3197-1309192772128-0-2 &amp;gt;&amp;gt;&amp;gt; (wmswift.in.IcgToCore) setHeader&lt;span class=&quot;error&quot;&gt;&amp;#91;SWIFTAddress&amp;#93;&lt;/span&gt; --&amp;gt; direct://core &amp;lt;&amp;lt;&amp;lt; Pattern:InOnly, Headers:&lt;/p&gt;
{SWIFTAddress=ZYAMCHZ0XXXX, MT=502, UBS_ID=5932bc56-2f7e-45cf-a2b4-ef851ff661d7}, BodyType:com.ubs.eai.wmswift.SwiftDataMessage, Body:com.ubs.eai.wmswift.SwiftDataMessage@91b9b0&lt;br/&gt;
[                          main] Tracer                         INFO  ID-w01b2bc3-3197-1309192772128-0-2 &amp;gt;&amp;gt;&amp;gt; (wmswift.core.CoreToMQ) direct://core --&amp;gt;  &amp;lt;&amp;lt;&amp;lt; Pattern:InOnly, Headers:{SWIFTAddress=ZYAMCHZ0XXXX, MT=502, UBS_ID=5932bc56-2f7e-45cf-a2b4-ef851ff661d7}
&lt;p&gt;, BodyType:com.ubs.eai.wmswift.SwiftDataMessage, Body:com.ubs.eai.wmswift.SwiftDataMessage@91b9b0&lt;br/&gt;
[                          main] Tracer                         INFO  ID-w01b2bc3-3197-1309192772128-0-2 &amp;gt;&amp;gt;&amp;gt; (wmswift.core.CoreToMQ)  --&amp;gt; choice &amp;lt;&amp;lt;&amp;lt; Pattern:InOnly, Headers:&lt;/p&gt;
{MT=502, UBS_ID=5932bc56-2f7e-45cf-a2b4-ef851ff661d7, SWIFTAddress=ZYAMCHZ0XXXX}
&lt;p&gt;, &lt;/p&gt;

&lt;p&gt;The bug I found is the missing label of the unmarshal processor.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Eclipse on Windows XP, unsing Spring&lt;/p&gt;</environment>
        <key id="12512343">CAMEL-4167</key>
            <summary>Label of marshal and unmarshal processors do not appear in trace output</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cmoulliard">Moulliard Charles</assignee>
                                    <reporter username="lucien.schmitz@ubs.com">Lucien Schmitz</reporter>
                        <labels>
                    </labels>
                <created>Thu, 30 Jun 2011 16:16:19 +0000</created>
                <updated>Thu, 7 Jul 2011 03:20:44 +0000</updated>
                            <resolved>Fri, 1 Jul 2011 10:37:29 +0000</resolved>
                                    <version>2.7.1</version>
                                    <fixVersion>2.8.0</fixVersion>
                                    <component>camel-core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13057918" author="cmoulliard" created="Thu, 30 Jun 2011 16:29:26 +0000"  >&lt;p&gt;The getLabel() method of the DefaultRouteNode class returns &quot;&quot; when the processor is &quot;marshall&quot; or &quot;unmarshall&quot;. This is why this is not displayed in the TRACE.&lt;/p&gt;</comment>
                            <comment id="13057924" author="cmoulliard" created="Thu, 30 Jun 2011 16:42:59 +0000"  >&lt;p&gt;What is strange is that the MarshallProcessor implements Traceable and in debug mode , this part of the code is skipped&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; getLabel(Exchange exchange) {
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (expression != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; expression.evaluate(exchange, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;.class);
        }

        Processor target = processor;
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (target != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
            &lt;span class=&quot;code-comment&quot;&gt;// can be wrapped
&lt;/span&gt;            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (target &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; InstrumentationProcessor) {
                target = ((InstrumentationProcessor) target).getProcessor();
            }

            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (target &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; Traceable) { ---&amp;gt; by passed
                Traceable trace = (Traceable) target;
                &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; trace.getTraceLabel();
            }
        }

        &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; then to definition
&lt;/span&gt;        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; processorDefinition.getLabel();
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Is it because the processor returned is of type (see attachment)&lt;/p&gt;</comment>
                            <comment id="13058693" author="davsclaus" created="Fri, 1 Jul 2011 18:22:29 +0000"  >&lt;p&gt;Charles can you check your first commit in this link&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc?rev=1141866&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=1141866&amp;amp;view=rev&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;And ensure those test changes is reverter properly&lt;/p&gt;</comment>
                            <comment id="13060341" author="davsclaus" created="Wed, 6 Jul 2011 07:32:04 +0000"  >&lt;p&gt;Okay I have fixed this. The tests has been reverted and the marshal/unmarshal is now in the tracer&lt;/p&gt;</comment>
                            <comment id="13060896" author="muellerc" created="Wed, 6 Jul 2011 22:54:41 +0000"  >&lt;p&gt;ConvertBodyDefinition and my others have still the same issue. Should we reopen this ticket or create a new, more generic one, and check all XXXDefinitions?&lt;/p&gt;</comment>
                            <comment id="13061020" author="davsclaus" created="Thu, 7 Jul 2011 03:20:44 +0000"  >&lt;p&gt;I have created a ticket and linked to this&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12513074">CAMEL-4180</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12484795" name="Screen shot 2011-06-30 at 18.42.10.png" size="548205" author="cmoulliard" created="Thu, 30 Jun 2011 16:43:40 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>13892</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 20 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i01z9b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9481</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>