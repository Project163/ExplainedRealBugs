<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 09:47:16 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-4605] Camel ftp read file after close connection</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-4605</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;There is an error with ftp server. &lt;br/&gt;
Many files on the server. All files have no time to be processed. &lt;br/&gt;
When the processing of the next file, the process stops. &lt;br/&gt;
Error - The request is a file after closing the connection. &lt;/p&gt;

&lt;p&gt;Camel config route: &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;lt;?xml version=&lt;span class=&quot;code-quote&quot;&gt;&quot;1.0&quot;&lt;/span&gt; encoding=&lt;span class=&quot;code-quote&quot;&gt;&quot;UTF-8&quot;&lt;/span&gt;?&amp;gt;
&amp;lt;blueprint xmlns=&lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//www.osgi.org/xmlns/blueprint/v1.0.0&quot;&lt;/span&gt;
&lt;/span&gt;  xmlns:cm=&lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//aries.apache.org/blueprint/xmlns/blueprint-cm/v1.0.0&quot;&lt;/span&gt;
&lt;/span&gt;  xmlns:camel=&lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//camel.apache.org/schema/blueprint&quot;&lt;/span&gt;
&lt;/span&gt;  xmlns:xsi=&lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//www.w3.org/2001/XMLSchema-instance&quot;&lt;/span&gt;
&lt;/span&gt;  &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-activation=&lt;span class=&quot;code-quote&quot;&gt;&quot;lazy&quot;&lt;/span&gt;&amp;gt;

  &amp;lt;cm:property-placeholder persistent-id=&lt;span class=&quot;code-quote&quot;&gt;&quot;ccwe.exchange.oos&quot;&lt;/span&gt;&amp;gt;
    &amp;lt;cm:&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-properties&amp;gt;
      &amp;lt;cm:property name=&lt;span class=&quot;code-quote&quot;&gt;&quot;ftp.doc.url&quot;&lt;/span&gt; value=&lt;span class=&quot;code-quote&quot;&gt;&quot;ftp:&lt;span class=&quot;code-comment&quot;&gt;//mail01.zakupki.gov.ru/auto/organization/all/&quot;&lt;/span&gt;/&amp;gt;
&lt;/span&gt;      &amp;lt;cm:property name=&lt;span class=&quot;code-quote&quot;&gt;&quot;ftp.doc.add_params&quot;&lt;/span&gt; value=&quot;&quot;/&amp;gt;
    &amp;lt;/cm:&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-properties&amp;gt;
  &amp;lt;/cm:property-placeholder&amp;gt;
  
  &amp;lt;bean id=&lt;span class=&quot;code-quote&quot;&gt;&quot;readProcess&quot;&lt;/span&gt; class=&lt;span class=&quot;code-quote&quot;&gt;&quot;mypackage.docread.ReadProcess&quot;&lt;/span&gt;/&amp;gt;

  &amp;lt;bean id=&lt;span class=&quot;code-quote&quot;&gt;&quot;routePolicy&quot;&lt;/span&gt; 
    class=&lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.camel.routepolicy.quartz.CronScheduledRoutePolicy&quot;&lt;/span&gt;&amp;gt;
    &amp;lt;property name=&lt;span class=&quot;code-quote&quot;&gt;&quot;routeStartTime&quot;&lt;/span&gt; value=&lt;span class=&quot;code-quote&quot;&gt;&quot;* 0/10 * * * ?&quot;&lt;/span&gt;/&amp;gt;
    &amp;lt;property name=&lt;span class=&quot;code-quote&quot;&gt;&quot;routeStopTime&quot;&lt;/span&gt; value=&lt;span class=&quot;code-quote&quot;&gt;&quot;* 4/10 * * * ?&quot;&lt;/span&gt;/&amp;gt;
  &amp;lt;/bean&amp;gt;

  &amp;lt;camelContext id=&lt;span class=&quot;code-quote&quot;&gt;&quot;exchange-read&quot;&lt;/span&gt; 
     xmlns=&lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//camel.apache.org/schema/blueprint&quot;&lt;/span&gt; autoStartup=&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&quot;&lt;/span&gt;&amp;gt;
&lt;/span&gt;     
    &amp;lt;threadPoolProfile id=&lt;span class=&quot;code-quote&quot;&gt;&quot;fooProfile&quot;&lt;/span&gt; 
       poolSize=&lt;span class=&quot;code-quote&quot;&gt;&quot;2&quot;&lt;/span&gt; maxPoolSize=&lt;span class=&quot;code-quote&quot;&gt;&quot;2&quot;&lt;/span&gt; maxQueueSize=&lt;span class=&quot;code-quote&quot;&gt;&quot;-1&quot;&lt;/span&gt;/&amp;gt;
       
    &amp;lt;route id=&lt;span class=&quot;code-quote&quot;&gt;&quot;readRoute&quot;&lt;/span&gt; 
      routePolicyRef=&lt;span class=&quot;code-quote&quot;&gt;&quot;routePolicy&quot;&lt;/span&gt;
      shutdownRunningTask= &lt;span class=&quot;code-quote&quot;&gt;&quot;CompleteAllTasks&quot;&lt;/span&gt;&amp;gt;
      
      &amp;lt;from uri=&lt;span class=&quot;code-quote&quot;&gt;&quot;{{ftp.doc.url}}?noop=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&amp;amp;amp;binary=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;{{ftp.doc.add_params}}&quot;&lt;/span&gt;/&amp;gt;
      &amp;lt;to uri=&lt;span class=&quot;code-quote&quot;&gt;&quot;bean:readProcess&quot;&lt;/span&gt;/&amp;gt;
    &amp;lt;/route&amp;gt;
  &amp;lt;/camelContext&amp;gt;
&amp;lt;/blueprint&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;We have two streams&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&amp;lt;threadPoolProfile id=&quot;fooProfile&quot; poolSize=&quot;2&quot; maxPoolSize=&quot;2&quot; maxQueueSize=&quot;-1&quot;/&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;


&lt;p&gt;The first thread (thread#0) reading file from ftp server&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;2011-11-02 09:13:57,376 | TRACE | Camel (exchange-read) thread #0 - ftp:&lt;span class=&quot;code-comment&quot;&gt;//mail01.zakupki.gov.ru/auto/organization/all/ | FtpConsumer                      | mponent.file.GenericFileConsumer  261 | 94 - org.apache.camel.camel-core - 2.8.1 |
&lt;/span&gt;     Processing file: GenericFile[organization_all_20111023_010003_33.xml.zip]
2011-11-02 09:13:57,376 | TRACE | Camel (exchange-read) thread #0 - ftp:&lt;span class=&quot;code-comment&quot;&gt;//mail01.zakupki.gov.ru/auto/organization/all/ | FtpConsumer                      | mponent.file.GenericFileConsumer  293 | 94 - org.apache.camel.camel-core - 2.8.1 |
&lt;/span&gt;     Retrieving file: auto/organization/all/organization_all_20111023_010003_33.xml.zip from: Endpoint[ftp:&lt;span class=&quot;code-comment&quot;&gt;//mail01.zakupki.gov.ru/auto/organization/all/?
&lt;/span&gt;binary=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&amp;amp;connectTimeout=10000&amp;amp;delay=600000&amp;amp;disconnect=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&amp;amp;localWorkDirectory=%2Fhome%2Fuser%2Ftemp&amp;amp;noop=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&amp;amp;passiveMode=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&amp;amp;soTimeout=10000&amp;amp;timeout=15000]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The second stream (thread#1) is stopped&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;2011-11-02 09:14:00,004 | DEBUG | Camel (exchange-read) thread #1 - ShutdownTask | ScheduledPollConsumer            | camel.impl.ScheduledPollConsumer  265 | 94 - org.apache.camel.camel-core - 2.8.1 | 
     This consumer is stopping, so cancelling scheduled task: java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask@2bf8d0a4
2011-11-02 09:14:00,005 | DEBUG | Camel (exchange-read) thread #1 - ShutdownTask | FtpConsumer                      | pache.camel.impl.DefaultConsumer   83 | 94 - org.apache.camel.camel-core - 2.8.1 | 
     Stopping consumer: FtpConsumer[ftp:&lt;span class=&quot;code-comment&quot;&gt;//mail01.zakupki.gov.ru/auto/organization/all/?binary=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&amp;amp;connectTimeout=10000&amp;amp;delay=600000&amp;amp;disconnect=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&amp;amp;localWorkDirectory=%2Fhome%2Fuser%2Ftemp&amp;amp;noop=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&amp;amp;passiveMode=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&amp;amp;soTimeout=10000&amp;amp;timeout=15000]
&lt;/span&gt;2011-11-02 09:14:00,007 | DEBUG | Camel (exchange-read) thread #1 - ShutdownTask | ProcessorEndpoint$1              | pache.camel.impl.DefaultProducer   76 | 94 - org.apache.camel.camel-core - 2.8.1 | 
     Stopping producer: Producer[bean:&lt;span class=&quot;code-comment&quot;&gt;//readProcess]
&lt;/span&gt;2011-11-02 09:14:00,010 | DEBUG | Camel (exchange-read) thread #1 - ShutdownTask | FtpConsumer                      | t.file.remote.RemoteFileConsumer  102 | 94 - org.apache.camel.camel-core - 2.8.1 | 
     Disconnecting from: ftp:&lt;span class=&quot;code-comment&quot;&gt;//anonymous@mail01.zakupki.gov.ru:21&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Warning!!!! ftp close connection. Completed method FTPClient.disconnect(). Parament &lt;em&gt;controlInput&lt;/em&gt; = null.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;2011-11-02 09:14:03,182 | INFO  | Camel (exchange-read) thread #1 - ShutdownTask | DefaultShutdownStrategy          | ultShutdownStrategy$ShutdownTask  460 | 94 - org.apache.camel.camel-core - 2.8.1 | 
     Route: readRoute shutdown complete, was consuming from: Endpoint[...]
2011-11-02 09:14:03,182 | INFO  | DefaultQuartzScheduler-exchange-read_Worker-1 | DefaultShutdownStrategy          | mel.impl.DefaultShutdownStrategy  158 | 94 - org.apache.camel.camel-core - 2.8.1 | 
     Graceful shutdown of 1 routes completed in 3 seconds
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The first thread (thread#0) continues reading the file &lt;span class=&quot;error&quot;&gt;&amp;#91;organization_all_20111023_010003_33.xml.zip&amp;#93;&lt;/span&gt;.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;2011-11-02 09:14:04,172 | ERROR | Camel (exchange-read) thread #0 - ftp:&lt;span class=&quot;code-comment&quot;&gt;//mail01.zakupki.gov.ru/auto/organization/all/ | FtpConsumer                      | ache.camel.processor.CamelLogger  232 | 94 - org.apache.camel.camel-core - 2.8.1 | Caused by: [java.lang.NullPointerException - &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;]
&lt;/span&gt;java.lang.NullPointerException
	at org.apache.commons.net.ftp.FTP.__getReply(FTP.java:295)[97:org.apache.commons.net:2.2]
	at org.apache.commons.net.ftp.FTP.getReply(FTP.java:622)[97:org.apache.commons.net:2.2]
	at org.apache.commons.net.ftp.FTPClient.completePendingCommand(FTPClient.java:1408)[97:org.apache.commons.net:2.2]
	at org.apache.commons.net.ftp.FTPClient.retrieveFile(FTPClient.java:1467)[97:org.apache.commons.net:2.2]
	at org.apache.camel.component.file.remote.FtpOperations.retrieveFileToFileInLocalWorkDirectory(FtpOperations.java:406)[99:org.apache.camel.camel-ftp:2.8.1]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12529819">CAMEL-4605</key>
            <summary>Camel ftp read file after close connection</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="alexey-s">Aleksey Sushko</reporter>
                        <labels>
                    </labels>
                <created>Wed, 2 Nov 2011 07:21:27 +0000</created>
                <updated>Sat, 5 Nov 2011 12:56:12 +0000</updated>
                            <resolved>Sat, 5 Nov 2011 12:56:12 +0000</resolved>
                                    <version>2.8.1</version>
                                    <fixVersion>2.8.3</fixVersion>
                    <fixVersion>2.9.0</fixVersion>
                                    <component>camel-ftp</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13143110" author="alexey-s" created="Thu, 3 Nov 2011 13:00:20 +0000"  >&lt;p&gt;Redefine the creation of a method of FTPClient FTPClient createFtpClient () class FtpEndpoint.&lt;br/&gt;
Add to the method displays the message&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;LOGGER.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;create FTPClient {}&quot;&lt;/span&gt;, client);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;FTPClientTest &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; FTPClient {
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Logger LOGGER = LoggerFactory.getLogger(FTPClientTest.class);

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; FTPClientTest() {
        &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;();
    }

    @Override
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void disconnect() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
        LOGGER.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;FTPClient disconnect {}&quot;&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;);
        &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;.disconnect();
    }

    @Override
    &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; Socket _openDataConnection_(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; command, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; arg) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
        LOGGER.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;FTPClient _openDataConnection_ {}&quot;&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;);
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;._openDataConnection_(command, arg);
    }

    @Override
    &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; void _connectAction_() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
        LOGGER.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;FTPClient _connectAction_ {}&quot;&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;);
        &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;._connectAction_();
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;We observe the creation of two FTPClient&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;2011-11-03 15:22:00,862 | INFO  | Blueprint Extender: 2 | FtpEndpointExt | t.file.remote.ext.FtpEndpointExt   55 | 115 - org.apache.camel.c
amel-ftp - 2.8.1 | create FTPClient org.apache.camel.component.file.remote.ext.FTPClientTest@2e81d81e
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;...&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;2011-11-03 15:22:01,213 | INFO  | Blueprint Extender: 1 | FtpEndpointExt | t.file.remote.ext.FtpEndpointExt   55 | 115 - org.apache.camel.c
amel-ftp - 2.8.1 | create FTPClient org.apache.camel.component.file.remote.ext.FTPClientTest@738e7a09
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Last post by FTPClient&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;2011-11-03 15:28:01,543 | INFO  | Camel (exchange-read) thread #0 - ftp:&lt;span class=&quot;code-comment&quot;&gt;//mail01.zakupki.gov.ru/auto/organization/all/ | FTPClientTest| nt.file.remote.ext.FTPClientTest   25 | 115 - org.apache.camel.camel-ftp - 2.8.1 | 
&lt;/span&gt;    FTPClient _openDataConnection_ org.apache.camel.component.file.remote.ext.FTPClientTest@2e81d81e
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Note the number of object &lt;b&gt;FTPClientTest@2e81d81e&lt;/b&gt;.&lt;/p&gt;

&lt;p&gt;Begins to stop the second process (thread # 1):&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;2011-11-03 15:28:09,010 | INFO  | Camel (exchange-read) thread #1 - ShutdownTask | DefaultShutdownStrategy          | ultShutdownStrategy$ShutdownTask  425 | 94 - org.apache.camel.camel-core - 2.8.1 | 
    Waiting as there are still 56 inflight and pending exchanges to complete, timeout in 291 seco
nds.
2011-11-03 15:28:10,004 | WARN  | DefaultQuartzScheduler-exchange-read_Worker-1 | DefaultShutdownStrategy          | mel.impl.DefaultShutdownStrategy  143 | 94 - org.apache.camel.camel-core - 2.8.1 | 
    Timeout occurred. Now forcing the routes to be shutdown now.
2011-11-03 15:28:10,004 | WARN  | Camel (exchange-read) thread #1 - ShutdownTask | DefaultShutdownStrategy | ultShutdownStrategy$ShutdownTask  433 | 94 - org.apache.camel.camel-core - 2.8.1 | 
    Interrupted &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; waiting during graceful shutdown, will force shutdown now.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Completing the process (thread # 0):&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;2011-11-03 15:28:10,011 | TRACE | DefaultQuartzScheduler-exchange-read_Worker-1 | ServiceHelper | .apache.camel.util.ServiceHelper  103 | 94 - org.apache.camel.camel-core - 2.8.1 | 
    Service already stopped: org.apache.camel.impl.SharedProducerServicePool@50ec2522
2011-11-03 15:28:10,011 | TRACE | DefaultQuartzScheduler-exchange-read_Worker-1 | ServiceHelper | .apache.camel.util.ServiceHelper  108 | 94 - org.apache.camel.camel-core - 2.8.1 | 
    Stopping service DefaultErrorHandler[TraceInterceptor[To[bean:readProcess]]]
2011-11-03 15:28:10,011 | DEBUG | DefaultQuartzScheduler-exchange-read_Worker-1 | FtpConsumer | t.file.remote.RemoteFileConsumer  102 | 94 - org.apache.camel.camel-core - 2.8.1 | 
    Disconnecting from: ftp:&lt;span class=&quot;code-comment&quot;&gt;//anonymous@mail01.zakupki.gov.ru:21
&lt;/span&gt;2011-11-03 15:28:12,908 | INFO  | DefaultQuartzScheduler-exchange-read_Worker-1 | FTPClientTest | nt.file.remote.ext.FTPClientTest   19 | 115 - org.apache.camel.camel-ftp - 2.8.1 | 
    FTPClient disconnect org.apache.camel.component.file.remote.ext.FTPClientTest@2e81d81e
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;As you can see, the system is stopped &lt;b&gt;FTPClientTest@2e81d81e&lt;/b&gt;. This object belongs to the first thread (thread # 0).&lt;/p&gt;</comment>
                            <comment id="13143894" author="davsclaus" created="Fri, 4 Nov 2011 10:27:02 +0000"  >&lt;p&gt;The FTPClient library is not threads safe.&lt;/p&gt;

&lt;p&gt;Where do you use that thread pool profile?&lt;/p&gt;</comment>
                            <comment id="13144631" author="davsclaus" created="Sat, 5 Nov 2011 08:38:30 +0000"  >&lt;p&gt;See nabble&lt;br/&gt;
&lt;a href=&quot;http://camel.465427.n5.nabble.com/Camel-ftp-read-next-file-after-close-connection-tp4952369p4952369.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://camel.465427.n5.nabble.com/Camel-ftp-read-next-file-after-close-connection-tp4952369p4952369.html&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>215678</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 3 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i021z3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9921</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>