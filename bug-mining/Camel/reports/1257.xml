<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 09:41:31 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-3388] @OutHeaders in bean binding issue with InOnly MEP</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-3388</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;When you invoke a bean with a method signature like this in Camel 2.5.0/HEAD, the in and out message both are null (the &quot;Hello!&quot; value just disappears):&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; doTest(@Body &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; body, @Headers Map headers, @OutHeaders Map outHeaders) {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;Hello!&quot;&lt;/span&gt;;
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The same thing without the headers works OK:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; doTest(@Body &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; body) {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;Hello!&quot;&lt;/span&gt;;
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;See camel-core/src/test/java/org/apache/camel/component/bean/BeanWithHeadersAndBodyInject3Test.java&lt;/p&gt;</description>
                <environment></environment>
        <key id="12492079">CAMEL-3388</key>
            <summary>@OutHeaders in bean binding issue with InOnly MEP</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="ammulder">Aaron Mulder</reporter>
                        <labels>
                    </labels>
                <created>Sat, 4 Dec 2010 22:32:09 +0000</created>
                <updated>Sun, 24 Apr 2011 09:57:58 +0000</updated>
                            <resolved>Sun, 5 Dec 2010 10:46:00 +0000</resolved>
                                    <version>2.5.0</version>
                                    <fixVersion>2.6.0</fixVersion>
                                    <component>camel-core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12966868" author="ammulder" created="Sat, 4 Dec 2010 22:41:31 +0000"  >&lt;p&gt;Seems to happen when @OutHeaders is used?&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; doTest(@OutHeaders Map headers) {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;Hello!&quot;&lt;/span&gt;;
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;does not work but this does:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; doTest(@Headers Map headers) {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;Hello!&quot;&lt;/span&gt;;
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12966873" author="ammulder" created="Sun, 5 Dec 2010 00:11:24 +0000"  >&lt;p&gt;The problem seems to lie in Pipeline.createNextExchange&lt;/p&gt;

&lt;p&gt;It looks like if you use @OutHeaders then you force an out message to be created, which means in this pipeline method it will overwrite the in message (containing your bean return value) with the out message (containing only headers).&lt;/p&gt;

&lt;p&gt;I&apos;m not sure what the appropriate resolution is.  If it&apos;s an InOnly exchange then it probably doesn&apos;t make sense to overwrite the in message with the out message.  But just having the out headers you wrote disappear doesn&apos;t seem right either.&lt;/p&gt;

&lt;p&gt;It seems like if you write to the out headers in a bean method you are trying to control what headers are present in the message after the bean method invocation completes.  Perhaps if it&apos;s an InOnly exchange then no out message should be generated by using @OutHeaders, it should just supply a new empty map, and after the invocation has completed, replace the in headers with the new map?&lt;/p&gt;

&lt;p&gt;You might say that you shouldn&apos;t use @OutHeaders for an InOnly exchange, but in some cases (JMS, or a reusable bean component) you might not know whether it&apos;s an InOnly or InOut exchange just based on the route definition, and it doesn&apos;t seem like you should need different bean methods and a content based router that looks at the exchange pattern just because you always want to put some headers into the output message.&lt;/p&gt;</comment>
                            <comment id="12966923" author="davsclaus" created="Sun, 5 Dec 2010 10:46:00 +0000"  >&lt;p&gt;trunk: 1042310.&lt;/p&gt;

&lt;p&gt;@OutHeaders is now only bound if MEP is out capable. If you send an InOnly then it will be null.&lt;br/&gt;
The @Body and other parameters is now not affected.&lt;/p&gt;</comment>
                            <comment id="13024006" author="davsclaus" created="Sun, 24 Apr 2011 09:57:58 +0000"  >&lt;p&gt;Closing all resolved tickets from 2010 or older&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>76267</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 31 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i01ufr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>8700</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>