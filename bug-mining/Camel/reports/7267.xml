<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 11:12:51 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-22332] Salesforce API Calls Hang During PushTopic Event Processing</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-22332</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;I ran in to this issue when updating an app from Camel 2.X to 4.13.&lt;/p&gt;

&lt;p&gt;The Salesforce calls work as expected unless they are invoked during the processing of a Salesforce PushTopic event, in which case, they hang indefinately.&lt;/p&gt;

&lt;p&gt;In my example application, I&apos;ve added the same Saleforce API calls to the afterApplicationStart() mehtod of the CamelContext and to a bean processing a PushTopic event.&lt;/p&gt;

&lt;p&gt;Steps to reproduce:&lt;br/&gt;
&#160; &#160; 1. Select a Salesforce Account to use for testing.&lt;/p&gt;

&lt;p&gt;&#160; &#160; 2. Update the id and email values in the CamelConfiguration class with values from the test Account.&lt;/p&gt;

&lt;p&gt;&#160; &#160; 3. Start the application and observe that the initial Salesforce API calls to fetch account data succeed.&lt;/p&gt;

&lt;p&gt;&#160; &#160; 4. Trigger a PushTopic event by modifying the name of your test Account in Salesforce.&lt;/p&gt;

&lt;p&gt;&#160; &#160; 5. Observe that the application hangs when attempting to execute a Salesforce API call from within the PushTopic event listener.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13625931">CAMEL-22332</key>
            <summary>Salesforce API Calls Hang During PushTopic Event Processing</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="acutley">Aldon Utley</reporter>
                        <labels>
                    </labels>
                <created>Fri, 8 Aug 2025 19:29:59 +0000</created>
                <updated>Mon, 13 Oct 2025 07:26:33 +0000</updated>
                            <resolved>Mon, 13 Oct 2025 07:26:33 +0000</resolved>
                                    <version>4.13.0</version>
                                    <fixVersion>4.16.0</fixVersion>
                                    <component>camel-salesforce</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="18013487" author="davsclaus" created="Tue, 12 Aug 2025 17:21:08 +0000"  >&lt;p&gt;1. Can you try to remove all the headers before sending to salesforce again from the pushtopic event; as I wonder if there is some headers that cause trouble.&lt;/p&gt;

&lt;p&gt;2. Try also to send via another thread such as using wiretap&lt;/p&gt;</comment>
                            <comment id="18013763" author="JIRAUSER310673" created="Wed, 13 Aug 2025 19:11:55 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davsclaus&quot; class=&quot;user-hover&quot; rel=&quot;davsclaus&quot;&gt;davsclaus&lt;/a&gt;, removing headers didn&apos;t fix the issue, but using modifying my routes with wiretap as below did.&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;from(camelEndpoint(ACCOUNT_TOPIC_NAME, ACCOUNT_QUERY))
.wireTap(&quot;direct:processSalesforceEvent&quot;);

from(&quot;direct:processSalesforceEvent&quot;)
.bean(salesforceListener);

from(&quot;direct:getAccount&quot;)
.to(&quot;salesforce:getSObject?sObjectIdName=Id&amp;amp;sObjectName=Account&amp;amp;format=JSON&quot;);&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="18013765" author="davsclaus" created="Wed, 13 Aug 2025 19:20:31 +0000"  >&lt;p&gt;Thanks we could consider having some worker pool for salesforce so the received events are routed by another thread. However this may lead to the consumer thread being able to pickup new messages while the worker pool is still processing the previous message; leading to out of ordering etc. Or we add a note in the docs and people can use wiretap if they have a need as you do.&lt;/p&gt;</comment>
                            <comment id="18029171" author="davsclaus" created="Sat, 11 Oct 2025 08:30:20 +0000"  >&lt;p&gt;Is this only push_topic or does it also happen for platform_event or change_event ?&lt;/p&gt;

&lt;p&gt;From the code point of view, it seems that this can happen for all 3 kinds.&lt;/p&gt;</comment>
                            <comment id="18029412" author="davsclaus" created="Mon, 13 Oct 2025 07:26:27 +0000"  >&lt;p&gt;You can now turn on&#160;consumerWorkerPoolEnabled=true&lt;/p&gt;

&lt;p&gt;If you get a chance you are welcome to test this with Camel 4.16 when its released. Or try SNAPSHOT builds.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13077902" name="example.zip" size="637926" author="acutley" created="Fri, 8 Aug 2025 19:27:31 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1x6hk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>