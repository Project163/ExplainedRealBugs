<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:56:48 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-17925] camel-kafka: &quot;breakOnFirstError&quot; option is not respected</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-17925</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;&lt;b&gt;Description:&lt;/b&gt;&lt;br/&gt;
Errors thrown in kafka-consumer routes with &quot;breakOnFirstError&quot; enabled does not trigger reprocessing in 3.12.0 and forward, as if option &quot;breakOnFirstError&quot; is not respected.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Reproduction:&lt;/b&gt;&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Configure a route consuming from kafka with option &quot;breakOnFirstError&quot; enabled&lt;/li&gt;
	&lt;li&gt;Trigger an exception in route&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;b&gt;Expected result:&lt;/b&gt;&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Should break out, seek back to offset of the message that caused the failure and then reattempt to process the message (as per the [docs|&lt;a href=&quot;https://camel.apache.org/components/3.14.x/kafka-component.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://camel.apache.org/components/3.14.x/kafka-component.html&lt;/a&gt;]: )&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;b&gt;Actual result:&lt;/b&gt;&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Consumer continuous to next message&lt;/li&gt;
&lt;/ul&gt;




&lt;p&gt;&lt;b&gt;GitHub project reproducing the issue&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/espeandr/camel-kafka-break-on-error-demo&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/espeandr/camel-kafka-break-on-error-demo&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Test-runs&lt;br/&gt;
3.16.0 (failing): &lt;a href=&quot;https://github.com/espeandr/camel-kafka-break-on-error-demo/runs/5886049034?check_suite_focus=true&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/espeandr/camel-kafka-break-on-error-demo/runs/5886049034?check_suite_focus=true&lt;/a&gt;&lt;br/&gt;
3.11.6 (succeeding): &lt;a href=&quot;https://github.com/espeandr/camel-kafka-break-on-error-demo/runs/5886221956?check_suite_focus=true&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/espeandr/camel-kafka-break-on-error-demo/runs/5886221956?check_suite_focus=true&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13438389">CAMEL-17925</key>
            <summary>camel-kafka: &quot;breakOnFirstError&quot; option is not respected</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="klease78">Karen Lease</assignee>
                                    <reporter username="eandre">Espen Andreassen</reporter>
                        <labels>
                    </labels>
                <created>Thu, 7 Apr 2022 12:11:30 +0000</created>
                <updated>Tue, 7 Nov 2023 10:08:05 +0000</updated>
                            <resolved>Tue, 28 Jun 2022 07:43:03 +0000</resolved>
                                    <version>3.12.0</version>
                    <version>3.14.2</version>
                    <version>3.15.0</version>
                    <version>3.16.0</version>
                                    <fixVersion>3.18.0</fixVersion>
                                    <component>camel-kafka</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17518909" author="davsclaus" created="Thu, 7 Apr 2022 14:16:09 +0000"  >&lt;p&gt;I wonder if you could put this up as a ready to run spring boot project on github so its quick for us to try,&lt;br/&gt;
or build as an integration test for camel-kafka so we can have it as a test case for the future - see existing tests how they are done.&lt;/p&gt;</comment>
                            <comment id="17519581" author="eandre" created="Fri, 8 Apr 2022 14:03:46 +0000"  >&lt;p&gt;I&apos;ve updated the description with a github spring boot project&lt;/p&gt;</comment>
                            <comment id="17533210" author="davsclaus" created="Sat, 7 May 2022 07:22:42 +0000"  >&lt;p&gt;Cn you try with latest SNAPSHOT code or with 3.17 when its released as we keep improving camel-kafka&lt;/p&gt;</comment>
                            <comment id="17534691" author="eandre" created="Wed, 11 May 2022 06:21:49 +0000"  >&lt;p&gt;I&apos;m guessing 3.17.0-SNAPSHOT isn&apos;t released somewhere and readily available for testing? I will test when 3.17 is released, at least.&lt;/p&gt;</comment>
                            <comment id="17539520" author="eandre" created="Thu, 19 May 2022 12:30:54 +0000"  >&lt;p&gt;Issue is still present in 3.17.0.&lt;/p&gt;</comment>
                            <comment id="17559294" author="klease78" created="Mon, 27 Jun 2022 17:18:00 +0000"  >&lt;p&gt;A refactoring moved the handling of exceptions into the catch clause of the processor, but the error handler had already caught the exception. I have modified it to check if an exception is set on the Exchange which makes the test case contributed by &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=eandre&quot; class=&quot;user-hover&quot; rel=&quot;eandre&quot;&gt;eandre&lt;/a&gt; work correctly.&lt;/p&gt;</comment>
                            <comment id="17559309" author="davsclaus" created="Mon, 27 Jun 2022 17:51:53 +0000"  >&lt;p&gt;Can this be backported to 3.14.x branch ?&lt;/p&gt;</comment>
                            <comment id="17559326" author="klease78" created="Mon, 27 Jun 2022 18:25:37 +0000"  >&lt;p&gt;Yes, it looks like the same code there.&lt;/p&gt;</comment>
                            <comment id="17559360" author="davsclaus" created="Mon, 27 Jun 2022 19:28:40 +0000"  >&lt;p&gt;Okay you are welcome to backport&lt;/p&gt;</comment>
                            <comment id="17559578" author="klease78" created="Tue, 28 Jun 2022 07:36:12 +0000"  >&lt;p&gt;For 3.14.x, modifying the exception handling code doesn&apos;t make test case work. It appears that the fetch position is not actually reset so the message isn&apos;t read again. I suspect it&apos;s related to the changes in the commit handling introduced in more recent versions but that is too complicated to backport, at least for me.&lt;/p&gt;</comment>
                            <comment id="17559585" author="davsclaus" created="Tue, 28 Jun 2022 07:43:03 +0000"  >&lt;p&gt;Thanks for looking, lets keep this for 3.18 onwards.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                            <outwardlinks description="causes">
                                        <issuelink>
            <issuekey id="13557008">CAMEL-20089</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13555368">CAMEL-20044</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 20 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z11968:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310080" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Regression</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10091"><![CDATA[Regression]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>