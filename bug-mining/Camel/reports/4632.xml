<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:31:13 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-12807] Avoid to use endpoint attribute when MqttConnectOptions is declared once</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-12807</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;Hello,&lt;/p&gt;

&lt;p&gt;In my system i have a default MqttConnectOptions declared into spring context and some other camel consumers/producers connected to others mqtt servers.&lt;/p&gt;

&lt;p&gt;So today i cannot use endpoint parameters without declare an another mqttConnectOptions class because the endpoint code suppose that use ALWAYS MqttConnectOptions (if it is declared once)&lt;/p&gt;</description>
                <environment></environment>
        <key id="13184904">CAMEL-12807</key>
            <summary>Avoid to use endpoint attribute when MqttConnectOptions is declared once</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="fabryprog">Fabrizio Spataro</assignee>
                                    <reporter username="fabryprog">Fabrizio Spataro</reporter>
                        <labels>
                    </labels>
                <created>Thu, 13 Sep 2018 13:27:58 +0000</created>
                <updated>Fri, 14 Sep 2018 13:41:05 +0000</updated>
                            <resolved>Fri, 14 Sep 2018 13:41:05 +0000</resolved>
                                    <version>2.22.2</version>
                                    <fixVersion>2.23.0</fixVersion>
                                    <component>camel-paho</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16613510" author="githubbot" created="Thu, 13 Sep 2018 13:39:01 +0000"  >&lt;p&gt;Fabryprog opened a new pull request #2521: &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12807&quot; title=&quot;Avoid to use endpoint attribute when MqttConnectOptions is declared once&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12807&quot;&gt;&lt;del&gt;CAMEL-12807&lt;/del&gt;&lt;/a&gt; Avoid to use endpoint attribute when MqttConnectOptions i&#8230;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/camel/pull/2521&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2521&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   &#8230;s declared once&lt;/p&gt;

&lt;p&gt;   Hello, this is my propose patch to camel-paho endpoint&lt;/p&gt;

&lt;p&gt;   Note is backward compatible!&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16613511" author="githubbot" created="Thu, 13 Sep 2018 13:39:01 +0000"  >&lt;p&gt;GitHub user Fabryprog opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/2521&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2521&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12807&quot; title=&quot;Avoid to use endpoint attribute when MqttConnectOptions is declared once&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12807&quot;&gt;&lt;del&gt;CAMEL-12807&lt;/del&gt;&lt;/a&gt; Avoid to use endpoint attribute when MqttConnectOptions i&#8230;&lt;/p&gt;

&lt;p&gt;    &#8230;s declared once&lt;/p&gt;

&lt;p&gt;    Hello, this is my propose patch to camel-paho endpoint&lt;/p&gt;

&lt;p&gt;    Note is backward compatible!&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/Fabryprog/camel&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/Fabryprog/camel&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12807&quot; title=&quot;Avoid to use endpoint attribute when MqttConnectOptions is declared once&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12807&quot;&gt;&lt;del&gt;CAMEL-12807&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/2521.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2521.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #2521&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit a962be45274d37d7610c6dd3bdfb90365b4a0d42&lt;br/&gt;
Author: Fabrizio Spataro &amp;lt;fabrizio.spataro@...&amp;gt;&lt;br/&gt;
Date:   2018-09-13T13:37:45Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12807&quot; title=&quot;Avoid to use endpoint attribute when MqttConnectOptions is declared once&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12807&quot;&gt;&lt;del&gt;CAMEL-12807&lt;/del&gt;&lt;/a&gt; Avoid to use endpoint attribute when MqttConnectOptions is declared once&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16614856" author="githubbot" created="Fri, 14 Sep 2018 13:40:43 +0000"  >&lt;p&gt;oscerd commented on issue #2521: &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12807&quot; title=&quot;Avoid to use endpoint attribute when MqttConnectOptions is declared once&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12807&quot;&gt;&lt;del&gt;CAMEL-12807&lt;/del&gt;&lt;/a&gt; Avoid to use endpoint attribute when MqttConnectOptions i&#8230;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/camel/pull/2521#issuecomment-421361753&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2521#issuecomment-421361753&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Merged on master. Thanks @Fabryprog &lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16614857" author="githubbot" created="Fri, 14 Sep 2018 13:40:43 +0000"  >&lt;p&gt;oscerd closed pull request #2521: &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12807&quot; title=&quot;Avoid to use endpoint attribute when MqttConnectOptions is declared once&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12807&quot;&gt;&lt;del&gt;CAMEL-12807&lt;/del&gt;&lt;/a&gt; Avoid to use endpoint attribute when MqttConnectOptions i&#8230;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/camel/pull/2521&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2521&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/components/camel-paho/src/main/docs/paho-component.adoc b/components/camel-paho/src/main/docs/paho-component.adoc&lt;br/&gt;
index 723f883d736..0514235ac55 100644&lt;br/&gt;
&amp;#8212; a/components/camel-paho/src/main/docs/paho-component.adoc&lt;br/&gt;
+++ b/components/camel-paho/src/main/docs/paho-component.adoc&lt;br/&gt;
@@ -95,6 +95,7 @@ with the following path and query parameters:&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;b&gt;brokerUrl&lt;/b&gt; (common) &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; The URL of the MQTT broker. &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; tcp://localhost:1883 &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; String&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;b&gt;clientId&lt;/b&gt; (common) &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; MQTT client identifier. &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;nbsp;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; String&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;b&gt;connectOptions&lt;/b&gt; (common) &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Client connection options &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;nbsp;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; MqttConnectOptions&lt;br/&gt;
+&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;b&gt;resolveMqttConnectOptions&lt;/b&gt; (common) &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Auto Resolve Client connection options &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; true &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; boolean&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;b&gt;filePersistenceDirectory&lt;/b&gt; (common) &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Base directory used by the file persistence provider. &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;nbsp;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; String&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;b&gt;password&lt;/b&gt; (common) &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Password to be used for authentication against the MQTT broker &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;nbsp;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; String&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;b&gt;persistence&lt;/b&gt; (common) &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Client persistence to be used - memory or file. &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; MEMORY &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; PahoPersistence&lt;br/&gt;
diff --git a/components/camel-paho/src/main/java/org/apache/camel/component/paho/PahoEndpoint.java b/components/camel-paho/src/main/java/org/apache/camel/component/paho/PahoEndpoint.java&lt;br/&gt;
index 8d858d5c6a5..6d58751d56c 100644&lt;br/&gt;
&amp;#8212; a/components/camel-paho/src/main/java/org/apache/camel/component/paho/PahoEndpoint.java&lt;br/&gt;
+++ b/components/camel-paho/src/main/java/org/apache/camel/component/paho/PahoEndpoint.java&lt;br/&gt;
@@ -68,7 +68,8 @@&lt;br/&gt;
     private String userName; &lt;br/&gt;
     @UriParam @Metadata(secret = true)&lt;br/&gt;
     private String password; 
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;p&gt;+    @UriParam(defaultValue = &quot;true&quot;)&lt;br/&gt;
+    private boolean resolveMqttConnectOptions = true;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;     // Collaboration members&lt;br/&gt;
     @UriParam&lt;br/&gt;
@@ -135,13 +136,16 @@ protected MqttConnectOptions resolveMqttConnectOptions() {&lt;br/&gt;
         if (connectOptions != null) &lt;/p&gt;
{
             return connectOptions;
         }
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Set&amp;lt;MqttConnectOptions&amp;gt; connectOptions = getCamelContext().getRegistry().findByType(MqttConnectOptions.class);&lt;/li&gt;
	&lt;li&gt;if (connectOptions.size() == 1) 
{
-            LOG.info(&quot;Single MqttConnectOptions instance found in the registry. It will be used by the endpoint.&quot;);
-            return connectOptions.iterator().next();
-        }
&lt;p&gt; else if (connectOptions.size() &amp;gt; 1) {&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;LOG.warn(&quot;Found {} instances of the MqttConnectOptions in the registry. None of these will be used by the endpoint. &quot;&lt;/li&gt;
	&lt;li&gt;+ &quot;Please use &apos;connectOptions&apos; endpoint option to select one.&quot;, connectOptions.size());&lt;br/&gt;
+        &lt;br/&gt;
+        if(resolveMqttConnectOptions) {&lt;br/&gt;
+            Set&amp;lt;MqttConnectOptions&amp;gt; connectOptions = getCamelContext().getRegistry().findByType(MqttConnectOptions.class);&lt;br/&gt;
+            if (connectOptions.size() == 1) 
{
+                LOG.info(&quot;Single MqttConnectOptions instance found in the registry. It will be used by the endpoint.&quot;);
+                return connectOptions.iterator().next();
+            }
&lt;p&gt; else if (connectOptions.size() &amp;gt; 1) {&lt;br/&gt;
+                LOG.warn(&quot;Found {} instances of the MqttConnectOptions in the registry. None of these will be used by the endpoint. &quot;&lt;br/&gt;
+                         + &quot;Please use &apos;connectOptions&apos; endpoint option to select one.&quot;, connectOptions.size());&lt;br/&gt;
+            }&lt;br/&gt;
         }&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;         MqttConnectOptions options = new MqttConnectOptions();&lt;br/&gt;
@@ -306,4 +310,12 @@ public void setPassword(String password) &lt;/p&gt;
{
         this.password = password;
     }

&lt;p&gt;+    public synchronized boolean isResolveMqttConnectOptions() &lt;/p&gt;
{
+        return resolveMqttConnectOptions;
+    }
&lt;p&gt;+&lt;br/&gt;
+    public synchronized void setResolveMqttConnectOptions(boolean resolveMqttConnectOptions) &lt;/p&gt;
{
+        this.resolveMqttConnectOptions = resolveMqttConnectOptions;
+    }
&lt;p&gt;+&lt;br/&gt;
 }&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16614858" author="githubbot" created="Fri, 14 Sep 2018 13:40:44 +0000"  >&lt;p&gt;Github user oscerd closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/2521&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2521&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 9 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3y23z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>