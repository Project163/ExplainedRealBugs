<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:20:24 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-10548] Converter from List to String is not found when @EnableAutoConfiguration is used</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-10548</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;This very simple spring-boot application :&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;@SpringBootApplication
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Application {
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void main(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] args) {
        SpringApplication.run(Application.class, args);
    }

    @Component
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;MyRouteBuilder &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; RouteBuilder {
        @Override
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void configure() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
            from(&lt;span class=&quot;code-quote&quot;&gt;&quot;timer:person&quot;&lt;/span&gt;)
                .setBody().constant(Arrays.asList(
                    &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Person(&lt;span class=&quot;code-quote&quot;&gt;&quot;Peter&quot;&lt;/span&gt;, 25),
                    &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Person(&lt;span class=&quot;code-quote&quot;&gt;&quot;John&quot;&lt;/span&gt;, 33)
                ))
                .log(&lt;span class=&quot;code-quote&quot;&gt;&quot;Body is ${body}&quot;&lt;/span&gt;);
        }
    }

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Person {
        &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; name;
        &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; age;

        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Person(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; name, &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; age) {
            &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.name = name;
            &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.age = age;
        }

        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; getName() {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; name;
        }

        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void setName(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; name) {
            &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.name = name;
        }

        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; getAge() {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; age;
        }

        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void setAge(&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; age) {
            &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.age = age;
        }

        @Override
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; toString() {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;Person{&quot;&lt;/span&gt; +
                &lt;span class=&quot;code-quote&quot;&gt;&quot;name=&lt;span class=&quot;code-quote&quot;&gt;&apos;&quot;&lt;/span&gt; + name + &apos;&lt;/span&gt;\&apos;&apos; +
                &lt;span class=&quot;code-quote&quot;&gt;&quot;, age=&quot;&lt;/span&gt; + age +
                &lt;span class=&quot;code-quote&quot;&gt;&apos;}&apos;&lt;/span&gt;;
        }
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Fails to resolve the simple expression ${body} because of the following exception:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;org.apache.camel.TypeConversionException: Error during type conversion from type: java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; to the required type: java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; with value [Person{name=&lt;span class=&quot;code-quote&quot;&gt;&apos;Peter&apos;&lt;/span&gt;, age=25}, Person{name=&lt;span class=&quot;code-quote&quot;&gt;&apos;John&apos;&lt;/span&gt;, age=33}] due Failed to convert from type [java.util.Arrays$ArrayList&amp;lt;?&amp;gt;] to type [java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;] &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; value &lt;span class=&quot;code-quote&quot;&gt;&apos;[Person{name=&apos;&lt;/span&gt;Peter&lt;span class=&quot;code-quote&quot;&gt;&apos;, age=25}, Person{name=&apos;&lt;/span&gt;John&lt;span class=&quot;code-quote&quot;&gt;&apos;, age=33}]&apos;&lt;/span&gt;; nested exception is org.springframework.core.convert.ConverterNotFoundException: No converter found capable of converting from type [java.util.Arrays$ArrayList&amp;lt;?&amp;gt;] to type [java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;]
	at org.apache.camel.impl.converter.BaseTypeConverterRegistry.createTypeConversionException(BaseTypeConverterRegistry.java:629) ~[camel-core-2.18.0.jar:2.18.0]
	at org.apache.camel.impl.converter.BaseTypeConverterRegistry.convertTo(BaseTypeConverterRegistry.java:150) ~[camel-core-2.18.0.jar:2.18.0]
	at org.apache.camel.support.ExpressionAdapter.evaluate(ExpressionAdapter.java:41) ~[camel-core-2.18.0.jar:2.18.0]
	at org.apache.camel.builder.ExpressionBuilder$75.evaluate(ExpressionBuilder.java:1795) ~[camel-core-2.18.0.jar:2.18.0]
	at org.apache.camel.support.ExpressionAdapter.evaluate(ExpressionAdapter.java:36) ~[camel-core-2.18.0.jar:2.18.0]
	at org.apache.camel.processor.LogProcessor.process(LogProcessor.java:53) ~[camel-core-2.18.0.jar:2.18.0]
	at org.apache.camel.management.InstrumentationProcessor.process(InstrumentationProcessor.java:77) ~[camel-core-2.18.0.jar:2.18.0]
	at org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:542) ~[camel-core-2.18.0.jar:2.18.0]
	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) [camel-core-2.18.0.jar:2.18.0]
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:120) ~[camel-core-2.18.0.jar:2.18.0]
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:83) ~[camel-core-2.18.0.jar:2.18.0]
	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197) [camel-core-2.18.0.jar:2.18.0]
	at org.apache.camel.component.timer.TimerConsumer.sendTimerExchange(TimerConsumer.java:192) [camel-core-2.18.0.jar:2.18.0]
	at org.apache.camel.component.timer.TimerConsumer$1.run(TimerConsumer.java:76) [camel-core-2.18.0.jar:2.18.0]
	at java.util.TimerThread.mainLoop(Timer.java:555) [na:1.8.0_112]
	at java.util.TimerThread.run(Timer.java:505) [na:1.8.0_112]
Caused by: org.springframework.core.convert.ConversionFailedException: Failed to convert from type [java.util.Arrays$ArrayList&amp;lt;?&amp;gt;] to type [java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;] &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; value &lt;span class=&quot;code-quote&quot;&gt;&apos;[Person{name=&apos;&lt;/span&gt;Peter&lt;span class=&quot;code-quote&quot;&gt;&apos;, age=25}, Person{name=&apos;&lt;/span&gt;John&lt;span class=&quot;code-quote&quot;&gt;&apos;, age=33}]&apos;&lt;/span&gt;; nested exception is org.springframework.core.convert.ConverterNotFoundException: No converter found capable of converting from type [java.util.Arrays$ArrayList&amp;lt;?&amp;gt;] to type [java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:42) ~[spring-core-4.3.3.RELEASE.jar:4.3.3.RELEASE]
	at org.springframework.core.convert.support.GenericConversionService.convert(GenericConversionService.java:192) ~[spring-core-4.3.3.RELEASE.jar:4.3.3.RELEASE]
	at org.springframework.core.convert.support.GenericConversionService.convert(GenericConversionService.java:176) ~[spring-core-4.3.3.RELEASE.jar:4.3.3.RELEASE]
	at org.apache.camel.spring.boot.SpringTypeConverter.convertTo(SpringTypeConverter.java:46) ~[camel-spring-boot-2.18.0.jar:2.18.0]
	at org.apache.camel.impl.converter.BaseTypeConverterRegistry.doConvertTo(BaseTypeConverterRegistry.java:346) ~[camel-core-2.18.0.jar:2.18.0]
	at org.apache.camel.impl.converter.BaseTypeConverterRegistry.convertTo(BaseTypeConverterRegistry.java:133) ~[camel-core-2.18.0.jar:2.18.0]
	... 14 common frames omitted
Caused by: org.springframework.core.convert.ConverterNotFoundException: No converter found capable of converting from type [java.util.Arrays$ArrayList&amp;lt;?&amp;gt;] to type [java.lang.&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;]
	at org.springframework.core.convert.support.GenericConversionService.handleConverterNotFound(GenericConversionService.java:313) ~[spring-core-4.3.3.RELEASE.jar:4.3.3.RELEASE]
	at org.springframework.core.convert.support.GenericConversionService.convert(GenericConversionService.java:195) ~[spring-core-4.3.3.RELEASE.jar:4.3.3.RELEASE]
	at org.springframework.core.convert.support.CollectionToStringConverter.convert(CollectionToStringConverter.java:68) ~[spring-core-4.3.3.RELEASE.jar:4.3.3.RELEASE]
	at org.springframework.core.convert.support.ConversionUtils.invokeConverter(ConversionUtils.java:36) ~[spring-core-4.3.3.RELEASE.jar:4.3.3.RELEASE]
	... 19 common frames omitted
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The root cause is spring failing to find a converter for Person --&amp;gt; String and as the SpringTypeConverter registered by camel-spring-boot is one of the fallback converters used by BaseTypeConverterRegistry, it leads Camel to fail too.&lt;/p&gt;

&lt;p&gt;As today is a Camel TypeConverter fails with an exception while looping over fallback converters, the loops ends and the conversion fails too. It may turn out that the bug is caused by the way camel uses Spring&apos;s type converters but it may be good to catch exceptions and try the next converter, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davsclaus&quot; class=&quot;user-hover&quot; rel=&quot;davsclaus&quot;&gt;davsclaus&lt;/a&gt; make sense ?&lt;/p&gt;

&lt;p&gt;A workaround is to create a custom converter for the class:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    @Component
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;PersonConverter &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; Converter&amp;lt;Person, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; {
        @Override
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; convert(Person source) {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; source.toString();
        }
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13024520">CAMEL-10548</key>
            <summary>Converter from List to String is not found when @EnableAutoConfiguration is used</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lb">Luca Burgazzoli</assignee>
                                    <reporter username="lb">Luca Burgazzoli</reporter>
                        <labels>
                    </labels>
                <created>Wed, 30 Nov 2016 17:47:15 +0000</created>
                <updated>Thu, 1 Dec 2016 15:52:57 +0000</updated>
                            <resolved>Thu, 1 Dec 2016 15:52:57 +0000</resolved>
                                                    <fixVersion>2.18.2</fixVersion>
                    <fixVersion>2.19.0</fixVersion>
                                    <component>camel-spring-boot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15711533" author="davsclaus" created="Thu, 1 Dec 2016 10:04:05 +0000"  >&lt;p&gt;Isnt the problem that Spring says true that it can convert from List -&amp;gt; String.&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/camel/blob/master/components/camel-spring-boot/src/main/java/org/apache/camel/spring/boot/SpringTypeConverter.java#L51&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/blob/master/components/camel-spring-boot/src/main/java/org/apache/camel/spring/boot/SpringTypeConverter.java#L51&lt;/a&gt;&lt;/p&gt;

</comment>
                            <comment id="15712058" author="lb" created="Thu, 1 Dec 2016 14:12:11 +0000"  >&lt;p&gt;Yes an not &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Spring says that it can convert from List to String and it is true but then thing is that Spring can&apos;t convert from Person to String as FallbackObjectToStringConverter can convert POJO if they have a String constructor or they have a valueOf(String) method (yeah, even if we are converting in the opposite way). &lt;/p&gt;

&lt;p&gt;What spring does under the hoods is looping over the collection and search a converter for the each element which of course may not be present.&lt;/p&gt;

&lt;p&gt;I&apos;m going to submit an issue to Spring but in the meantime I have this hack:&lt;/p&gt;

&lt;p&gt;  &lt;a href=&quot;https://github.com/lburgazzoli/apache-camel/commit/daf9c98f5d344d62cf551084dd4edb99e6509c52&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/lburgazzoli/apache-camel/commit/daf9c98f5d344d62cf551084dd4edb99e6509c52&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Would it be acceptable ?&lt;/p&gt;</comment>
                            <comment id="15712205" author="davsclaus" created="Thu, 1 Dec 2016 15:08:36 +0000"  >&lt;p&gt;Yeah that is better than an exception.&lt;/p&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 50 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i36z9b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>