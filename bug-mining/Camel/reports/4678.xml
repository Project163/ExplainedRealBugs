<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:31:57 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-12899] Handle LinkedIn Captcha redirects gracefully</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-12899</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;Currently LinkedIn component throws the exception&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java.lang.SecurityException: Invalid CSRF code!&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;when&#160;LinkedIn responds with a&#160;CAPTCHA instead of a&#160;login token.&#160;&lt;/p&gt;

&lt;p&gt;Instead it should detect&#160;ac CAPTCHA response and print an appropriate message. In addition, since username and password authentication may not work, the component should support configuring a user generated access token to&#160;bypass the&#160;LinkedIn login process and&#160;still be able to use&#160;LinkedIn API.&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13194051">CAMEL-12899</key>
            <summary>Handle LinkedIn Captcha redirects gracefully</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dhirajsb">Dhiraj Sureshkumar Bokde</assignee>
                                    <reporter username="dhirajsb">Dhiraj Sureshkumar Bokde</reporter>
                        <labels>
                            <label>LinkedIn</label>
                            <label>camel-linkedin</label>
                    </labels>
                <created>Thu, 25 Oct 2018 05:14:01 +0000</created>
                <updated>Fri, 16 Nov 2018 09:46:40 +0000</updated>
                            <resolved>Fri, 16 Nov 2018 09:46:40 +0000</resolved>
                                    <version>2.22.1</version>
                                    <fixVersion>2.22.3</fixVersion>
                    <fixVersion>2.23.0</fixVersion>
                                    <component>camel-linkedin</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16663268" author="githubbot" created="Thu, 25 Oct 2018 05:31:34 +0000"  >&lt;p&gt;dhirajsb opened a new pull request #2578: &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12899&quot; title=&quot;Handle LinkedIn Captcha redirects gracefully&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12899&quot;&gt;&lt;del&gt;CAMEL-12899&lt;/del&gt;&lt;/a&gt;: Added check for LinkedIn CAPTCHA, added accessToken and &#8230;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/camel/pull/2578&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2578&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   &#8230;expiryTime properties to avoid login issues&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16664046" author="githubbot" created="Thu, 25 Oct 2018 17:17:01 +0000"  >&lt;p&gt;dhirajsb closed pull request #2578: &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12899&quot; title=&quot;Handle LinkedIn Captcha redirects gracefully&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12899&quot;&gt;&lt;del&gt;CAMEL-12899&lt;/del&gt;&lt;/a&gt;: Added check for LinkedIn CAPTCHA, added accessToken and &#8230;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/camel/pull/2578&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2578&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/components/camel-linkedin/camel-linkedin-api/src/main/java/org/apache/camel/component/linkedin/api/LinkedInOAuthRequestFilter.java b/components/camel-linkedin/camel-linkedin-api/src/main/java/org/apache/camel/component/linkedin/api/LinkedInOAuthRequestFilter.java&lt;br/&gt;
index 51e701f3017..a82a26b252f 100644&lt;br/&gt;
&amp;#8212; a/components/camel-linkedin/camel-linkedin-api/src/main/java/org/apache/camel/component/linkedin/api/LinkedInOAuthRequestFilter.java&lt;br/&gt;
+++ b/components/camel-linkedin/camel-linkedin-api/src/main/java/org/apache/camel/component/linkedin/api/LinkedInOAuthRequestFilter.java&lt;br/&gt;
@@ -27,7 +27,6 @@&lt;br/&gt;
 import java.util.concurrent.TimeUnit;&lt;br/&gt;
 import java.util.regex.Matcher;&lt;br/&gt;
 import java.util.regex.Pattern;&lt;br/&gt;
-&lt;br/&gt;
 import javax.annotation.Priority;&lt;br/&gt;
 import javax.ws.rs.Priorities;&lt;br/&gt;
 import javax.ws.rs.client.ClientRequestContext;&lt;br/&gt;
@@ -51,6 +50,7 @@&lt;br/&gt;
 import com.gargoylesoftware.htmlunit.html.HtmlSubmitInput;&lt;br/&gt;
 import com.gargoylesoftware.htmlunit.html.HtmlTextInput;&lt;br/&gt;
 import com.gargoylesoftware.htmlunit.util.WebConnectionWrapper;&lt;br/&gt;
+&lt;br/&gt;
 import org.apache.http.HttpHeaders;&lt;br/&gt;
 import org.apache.http.HttpHost;&lt;br/&gt;
 import org.apache.http.HttpStatus;&lt;br/&gt;
@@ -158,23 +158,31 @@ private String getRefreshToken() &lt;/p&gt;
{
                 url = String.format(AUTHORIZATION_URL_WITH_SCOPE, oAuthParams.getClientId(), csrfId,
                     builder.toString(), encodedRedirectUri);
             }
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;HtmlPage authPage;&lt;br/&gt;
+            HtmlPage authPage = null;&lt;br/&gt;
             try 
{
                 authPage = webClient.getPage(url);
             }
&lt;p&gt; catch (FailingHttpStatusCodeException e) {&lt;br/&gt;
                 // only handle errors returned with redirects&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;if (e.getStatusCode() == HttpStatus.SC_MOVED_TEMPORARILY) {&lt;/li&gt;
	&lt;li&gt;final URL location = new URL(e.getResponse().getResponseHeaderValue(HttpHeaders.LOCATION));&lt;/li&gt;
	&lt;li&gt;final String locationQuery = location.getQuery();&lt;/li&gt;
	&lt;li&gt;if (locationQuery != null &amp;amp;&amp;amp; locationQuery.contains(&quot;error=&quot;)) 
{
-                        throw new IOException(URLDecoder.decode(locationQuery).replaceAll(&quot;&amp;amp;&quot;, &quot;, &quot;));
-                    }
&lt;p&gt; else &lt;/p&gt;
{
-                        // follow the redirect to login form
-                        authPage = webClient.getPage(location);
-                    }&lt;/li&gt;
	&lt;li&gt;} else 
{
-                    throw e;
-                }
&lt;p&gt;+                boolean done = false;&lt;br/&gt;
+                do {&lt;br/&gt;
+                        if (e.getStatusCode() == HttpStatus.SC_MOVED_TEMPORARILY || e.getStatusCode() == HttpStatus.SC_SEE_OTHER) {&lt;br/&gt;
+                            final URL location = new URL(e.getResponse().getResponseHeaderValue(HttpHeaders.LOCATION));&lt;br/&gt;
+                            final String locationQuery = location.getQuery();&lt;br/&gt;
+                            if (locationQuery != null &amp;amp;&amp;amp; locationQuery.contains(&quot;error=&quot;)) &lt;/p&gt;
{
+                                throw new IOException(URLDecoder.decode(locationQuery).replaceAll(&quot;&amp;amp;&quot;, &quot;, &quot;));
+                            }
&lt;p&gt; else &lt;/p&gt;
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {+                                // follow the redirect to login form+                                try {
+                                    authPage = webClient.getPage(location);
+                                    done = true;
+                                } catch (FailingHttpStatusCodeException e1) {
+                                    e = e1;
+                                }+                            }&lt;/span&gt; &lt;/div&gt;
&lt;p&gt;+                        } else &lt;/p&gt;
{
+                            throw e;
+                        }
&lt;p&gt;+                } while (!done);&lt;br/&gt;
             }&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;             // look for &amp;lt;div role=&quot;alert&quot;&amp;gt;&lt;br/&gt;
@@ -184,12 +192,12 @@ private String getRefreshToken() {&lt;br/&gt;
             }&lt;/p&gt;

&lt;p&gt;             // submit login credentials&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;final HtmlForm loginForm = authPage.getFormByName(&quot;oauth2SAuthorizeForm&quot;);&lt;br/&gt;
+            final HtmlForm loginForm = authPage.getForms().get(0);&lt;br/&gt;
             final HtmlTextInput login = loginForm.getInputByName(&quot;session_key&quot;);&lt;br/&gt;
             login.setText(oAuthParams.getUserName());&lt;br/&gt;
             final HtmlPasswordInput password = loginForm.getInputByName(&quot;session_password&quot;);&lt;br/&gt;
             password.setText(oAuthParams.getUserPassword());&lt;/li&gt;
	&lt;li&gt;final HtmlSubmitInput submitInput = loginForm.getInputByName(&quot;authorize&quot;);&lt;br/&gt;
+            final HtmlSubmitInput submitInput = (HtmlSubmitInput) loginForm.getElementsByAttribute(&quot;input&quot;, &quot;type&quot;, &quot;submit&quot;).get(0);&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;             // validate CSRF and get authorization code&lt;br/&gt;
             String redirectQuery;&lt;br/&gt;
@@ -212,6 +220,10 @@ private String getRefreshToken() {&lt;br/&gt;
             while (matcher.find()) &lt;/p&gt;
{
                 params.put(matcher.group(1), matcher.group(2));
             }
&lt;p&gt;+            // check if we got caught in a Captcha!&lt;br/&gt;
+            if (params.get(&quot;challengeId&quot;) != null) &lt;/p&gt;
{
+                throw new SecurityException(&quot;Unable to login due to CAPTCHA, use with a valid accessToken instead!&quot;);
+            }
&lt;p&gt;             final String state = params.get(&quot;state&quot;);&lt;br/&gt;
             if (!csrfId.equals(state)) {&lt;br/&gt;
                 throw new SecurityException(&quot;Invalid CSRF code!&quot;);&lt;br/&gt;
@@ -221,7 +233,7 @@ private String getRefreshToken() &lt;/p&gt;
{
                 return params.get(&quot;code&quot;);
             }

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;} catch (IOException e) 
{
+        }
&lt;p&gt; catch (Exception e) &lt;/p&gt;
{
             throw new IllegalArgumentException(&quot;Error authorizing application: &quot; + e.getMessage(), e);
         }
&lt;p&gt;     }&lt;br/&gt;
diff --git a/components/camel-linkedin/camel-linkedin-api/src/test/java/org/apache/camel/component/linkedin/api/AbstractResourceIntegrationTest.java b/components/camel-linkedin/camel-linkedin-api/src/test/java/org/apache/camel/component/linkedin/api/AbstractResourceIntegrationTest.java&lt;br/&gt;
index bb38a5bc5d7..8d3a03e393e 100644&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;a/components/camel-linkedin/camel-linkedin-api/src/test/java/org/apache/camel/component/linkedin/api/AbstractResourceIntegrationTest.java&lt;br/&gt;
+++ b/components/camel-linkedin/camel-linkedin-api/src/test/java/org/apache/camel/component/linkedin/api/AbstractResourceIntegrationTest.java&lt;br/&gt;
@@ -20,10 +20,11 @@&lt;br/&gt;
 import java.util.Arrays;&lt;br/&gt;
 import java.util.List;&lt;br/&gt;
 import java.util.Properties;&lt;br/&gt;
-&lt;br/&gt;
 import javax.ws.rs.WebApplicationException;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; import org.apache.camel.component.linkedin.api.model.Error;&lt;br/&gt;
+import org.apache.cxf.Bus;&lt;br/&gt;
+import org.apache.cxf.BusFactory;&lt;br/&gt;
 import org.apache.cxf.jaxrs.client.JAXRSClientFactory;&lt;br/&gt;
 import org.apache.cxf.jaxrs.client.WebClient;&lt;br/&gt;
 import org.junit.AfterClass;&lt;br/&gt;
@@ -32,6 +33,9 @@&lt;br/&gt;
 import org.slf4j.Logger;&lt;br/&gt;
 import org.slf4j.LoggerFactory;&lt;/p&gt;

&lt;p&gt;+import static java.util.concurrent.TimeUnit.DAYS;&lt;br/&gt;
+import static java.util.concurrent.TimeUnit.MILLISECONDS;&lt;br/&gt;
+&lt;br/&gt;
 /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Base class for resource tests.&lt;br/&gt;
  */&lt;br/&gt;
@@ -39,10 +43,11 @@&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;     protected static final Logger LOG = LoggerFactory.getLogger(PeopleResourceIntegrationTest.class);&lt;br/&gt;
     protected static final String DEFAULT_FIELDS = &quot;&quot;;&lt;br/&gt;
+    public static final long DEFAULT_EXPIRY = MILLISECONDS.convert(60, DAYS) + System.currentTimeMillis();&lt;/p&gt;

&lt;p&gt;     protected static LinkedInOAuthRequestFilter requestFilter;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;private static Properties properties;&lt;/li&gt;
	&lt;li&gt;private static OAuthToken token;&lt;br/&gt;
+    protected static Properties properties;&lt;br/&gt;
+    protected static OAuthToken token;&lt;br/&gt;
     private static List&amp;lt;Object&amp;gt; resourceList = new ArrayList&amp;lt;&amp;gt;();&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;     @BeforeClass&lt;br/&gt;
@@ -59,6 +64,8 @@ private static LinkedInOAuthRequestFilter createOAuthHelper() throws IOException&lt;br/&gt;
         final String clientId = properties.getProperty(&quot;clientId&quot;);&lt;br/&gt;
         final String clientSecret = properties.getProperty(&quot;clientSecret&quot;);&lt;br/&gt;
         final String redirectUri = properties.getProperty(&quot;redirectUri&quot;);&lt;br/&gt;
+        final String accessToken = properties.getProperty(&quot;accessToken&quot;);&lt;br/&gt;
+        final String expiryTime = properties.getProperty(&quot;expiryTime&quot;);&lt;/p&gt;

&lt;p&gt;         final OAuthScope[] scopes;&lt;br/&gt;
         final String scope = properties.getProperty(&quot;scope&quot;);&lt;br/&gt;
@@ -68,6 +75,12 @@ private static LinkedInOAuthRequestFilter createOAuthHelper() throws IOException&lt;br/&gt;
             scopes = null;&lt;br/&gt;
         }&lt;/p&gt;

&lt;p&gt;+        // check if accessToken is set&lt;br/&gt;
+        if (accessToken != null) &lt;/p&gt;
{
+            token = new OAuthToken(null, accessToken,
+                    (expiryTime != null) ? Long.parseLong(expiryTime) : DEFAULT_EXPIRY);
+        }
&lt;p&gt;+&lt;br/&gt;
         final OAuthSecureStorage secureStorage = new OAuthSecureStorage() {&lt;br/&gt;
             @Override&lt;br/&gt;
             public OAuthToken getOAuthToken() {&lt;br/&gt;
@@ -105,6 +118,8 @@ public static void afterClass() throws Exception &lt;/p&gt;
{
             throw new IllegalStateException(AbstractResourceIntegrationTest.class.getName()
                                             + &quot;.beforeClass must be invoked before getResource&quot;);
         }
&lt;p&gt;+        Bus bus = BusFactory.getThreadDefaultBus();&lt;br/&gt;
+        bus.setProperty(&quot;allow.empty.path.template.value&quot;, true);&lt;br/&gt;
         final T resource = JAXRSClientFactory.create(LinkedInOAuthRequestFilter.BASE_ADDRESS, resourceClass,&lt;br/&gt;
 //            Arrays.asList(new Object[] &lt;/p&gt;
{ requestFilter, new LinkedInExceptionResponseFilter() }
&lt;p&gt; ));&lt;br/&gt;
             Arrays.asList(new Object[]&lt;/p&gt;
{requestFilter, new EnumQueryParamConverterProvider()}
&lt;p&gt;));&lt;br/&gt;
diff --git a/components/camel-linkedin/camel-linkedin-api/src/test/java/org/apache/camel/component/linkedin/api/PeopleResourceIntegrationTest.java b/components/camel-linkedin/camel-linkedin-api/src/test/java/org/apache/camel/component/linkedin/api/PeopleResourceIntegrationTest.java&lt;br/&gt;
index 4caaee5f182..78e8e45fb3f 100644&lt;br/&gt;
&amp;#8212; a/components/camel-linkedin/camel-linkedin-api/src/test/java/org/apache/camel/component/linkedin/api/PeopleResourceIntegrationTest.java&lt;br/&gt;
+++ b/components/camel-linkedin/camel-linkedin-api/src/test/java/org/apache/camel/component/linkedin/api/PeopleResourceIntegrationTest.java&lt;br/&gt;
@@ -104,9 +104,14 @@ public void testOAuthTokenRefresh() throws Exception {&lt;/p&gt;

&lt;p&gt;         // mark OAuth token as expired&lt;br/&gt;
         final OAuthToken oAuthToken = requestFilter.getOAuthToken();&lt;br/&gt;
+        final long expiryTime = oAuthToken.getExpiryTime();&lt;br/&gt;
         oAuthToken.setExpiryTime(new Date().getTime());&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;peopleResource.getPerson(&quot;&quot;, false);&lt;br/&gt;
+        try 
{
+            peopleResource.getPerson(&quot;&quot;, false);
+        }
&lt;p&gt; finally &lt;/p&gt;
{
+            token.setExpiryTime(expiryTime);
+        }
&lt;p&gt;     }&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;     @Test&lt;br/&gt;
diff --git a/components/camel-linkedin/camel-linkedin-api/src/test/resources/test-options.properties b/components/camel-linkedin/camel-linkedin-api/src/test/resources/test-options.properties&lt;br/&gt;
index 43404f5335a..23a3939e3dc 100644&lt;br/&gt;
&amp;#8212; a/components/camel-linkedin/camel-linkedin-api/src/test/resources/test-options.properties&lt;br/&gt;
+++ b/components/camel-linkedin/camel-linkedin-api/src/test/resources/test-options.properties&lt;br/&gt;
@@ -23,6 +23,10 @@ userPassword=&lt;br/&gt;
 clientId=&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;LinkedIn App clientSecret&lt;br/&gt;
 clientSecret=&lt;br/&gt;
+# LinkedIn access token&lt;br/&gt;
+accessToken=&lt;br/&gt;
+# LinkedIn token expiry time&lt;br/&gt;
+expiryTime=&lt;/li&gt;
	&lt;li&gt;LinkedIn App required scopes&lt;br/&gt;
 scope=r_basicprofile,r_fullprofile,r_emailaddress,r_network,r_contactinfo,rw_nus,rw_company_admin,rw_groups,w_messages&lt;/li&gt;
	&lt;li&gt;LinkedIn App redirect URI&lt;br/&gt;
diff --git a/components/camel-linkedin/camel-linkedin-component/src/main/docs/linkedin-component.adoc b/components/camel-linkedin/camel-linkedin-component/src/main/docs/linkedin-component.adoc&lt;br/&gt;
index 94043fa824f..c229f0a529d 100644
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;a/components/camel-linkedin/camel-linkedin-component/src/main/docs/linkedin-component.adoc&lt;br/&gt;
+++ b/components/camel-linkedin/camel-linkedin-component/src/main/docs/linkedin-component.adoc&lt;br/&gt;
@@ -89,14 +89,16 @@ with the following path and query parameters:
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;===&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ol&gt;



&lt;p&gt;-==== Query Parameters (14 parameters):&lt;br/&gt;
+==== Query Parameters (16 parameters):&lt;/p&gt;


&lt;p&gt; &lt;span class=&quot;error&quot;&gt;&amp;#91;width=&amp;quot;100%&amp;quot;,cols=&amp;quot;2,5,^1,2&amp;quot;,options=&amp;quot;header&amp;quot;&amp;#93;&lt;/span&gt;&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;===&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Name &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Description &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Default &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Type&lt;br/&gt;
+&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;b&gt;accessToken&lt;/b&gt; (common) &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; LinkedIn access token to avoid username and password login. &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;nbsp;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; String&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;b&gt;clientId&lt;/b&gt; (common) &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; LinkedIn application client ID &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;nbsp;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; String&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;b&gt;clientSecret&lt;/b&gt; (common) &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; LinkedIn application client secret &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;nbsp;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; String&lt;br/&gt;
+&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;b&gt;expiryTime&lt;/b&gt; (common) &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; LinkedIn access token expiry time in milliseconds since Unix Epoch. &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 5184000 &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; long&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;b&gt;httpParams&lt;/b&gt; (common) &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Custom HTTP params, for example proxy host and port, use constants from AllClientPNames &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;nbsp;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Map&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;b&gt;inBody&lt;/b&gt; (common) &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Sets the name of a parameter to be passed in the exchange In Body &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;nbsp;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; String&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;b&gt;lazyAuth&lt;/b&gt; (common) &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Flag to enable/disable lazy OAuth, default is true. when enabled, OAuth token retrieval or generation is not done until the first REST call &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; true &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; boolean&lt;br/&gt;
diff --git a/components/camel-linkedin/camel-linkedin-component/src/main/java/org/apache/camel/component/linkedin/DefaultOAuthSecureStorage.java b/components/camel-linkedin/camel-linkedin-component/src/main/java/org/apache/camel/component/linkedin/DefaultOAuthSecureStorage.java&lt;br/&gt;
new file mode 100644&lt;br/&gt;
index 00000000000..a052daf9d9b&lt;br/&gt;
&amp;#8212; /dev/null&lt;br/&gt;
+++ b/components/camel-linkedin/camel-linkedin-component/src/main/java/org/apache/camel/component/linkedin/DefaultOAuthSecureStorage.java&lt;br/&gt;
@@ -0,0 +1,35 @@&lt;br/&gt;
+/**&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one or more&lt;br/&gt;
+ * contributor license agreements.  See the NOTICE file distributed with&lt;br/&gt;
+ * this work for additional information regarding copyright ownership.&lt;br/&gt;
+ * The ASF licenses this file to You under the Apache License, Version 2.0&lt;br/&gt;
+ * (the &quot;License&quot;); you may not use this file except in compliance with&lt;br/&gt;
+ * the License.  You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ *      &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
+ * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
+ * See the License for the specific language governing permissions and&lt;br/&gt;
+ * limitations under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+package org.apache.camel.component.linkedin;&lt;br/&gt;
+&lt;br/&gt;
+import org.apache.camel.component.linkedin.api.OAuthSecureStorage;&lt;br/&gt;
+import org.apache.camel.component.linkedin.api.OAuthToken;&lt;br/&gt;
+import org.apache.camel.component.linkedin.internal.CachingOAuthSecureStorage;&lt;br/&gt;
+&lt;br/&gt;
+/**&lt;br/&gt;
+ * Default implementation of 
{@link OAuthSecureStorage}
&lt;p&gt;+ * with user provided token and expiry time in msecs.&lt;br/&gt;
+ */&lt;br/&gt;
+public class DefaultOAuthSecureStorage extends CachingOAuthSecureStorage &lt;/p&gt;
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {++    private OAuthToken token;++    public DefaultOAuthSecureStorage(String accessToken, long expiryTime) {
+        super(null);
+        this.token = new OAuthToken(null, accessToken, expiryTime);
+    }+}&lt;/span&gt; &lt;/div&gt;
&lt;p&gt;diff --git a/components/camel-linkedin/camel-linkedin-component/src/main/java/org/apache/camel/component/linkedin/LinkedInComponent.java b/components/camel-linkedin/camel-linkedin-component/src/main/java/org/apache/camel/component/linkedin/LinkedInComponent.java&lt;br/&gt;
index 5189b2caf21..3d8f05d4cb1 100644&lt;br/&gt;
&amp;#8212; a/components/camel-linkedin/camel-linkedin-component/src/main/java/org/apache/camel/component/linkedin/LinkedInComponent.java&lt;br/&gt;
+++ b/components/camel-linkedin/camel-linkedin-component/src/main/java/org/apache/camel/component/linkedin/LinkedInComponent.java&lt;br/&gt;
@@ -24,6 +24,7 @@&lt;br/&gt;
 import org.apache.camel.Endpoint;&lt;br/&gt;
 import org.apache.camel.component.linkedin.api.LinkedInOAuthRequestFilter;&lt;br/&gt;
 import org.apache.camel.component.linkedin.api.OAuthParams;&lt;br/&gt;
+import org.apache.camel.component.linkedin.api.OAuthSecureStorage;&lt;br/&gt;
 import org.apache.camel.component.linkedin.internal.CachingOAuthSecureStorage;&lt;br/&gt;
 import org.apache.camel.component.linkedin.internal.LinkedInApiCollection;&lt;br/&gt;
 import org.apache.camel.component.linkedin.internal.LinkedInApiName;&lt;br/&gt;
@@ -109,8 +110,12 @@ private LinkedInOAuthRequestFilter createRequestFilter(LinkedInConfiguration con&lt;br/&gt;
     }&lt;/p&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;     private static OAuthParams getOAuthParams(LinkedInConfiguration configuration) {&lt;br/&gt;
+        OAuthSecureStorage secureStorage = configuration.getSecureStorage();&lt;br/&gt;
+        if (secureStorage == null &amp;amp;&amp;amp; !ObjectHelper.isEmpty(configuration.getAccessToken())) &lt;/p&gt;
{
+            secureStorage = new DefaultOAuthSecureStorage(configuration.getAccessToken(), configuration.getExpiryTime());
+        }
&lt;p&gt;         return new OAuthParams(configuration.getUserName(), configuration.getUserPassword(),&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;new CachingOAuthSecureStorage(configuration.getSecureStorage()), configuration.getClientId(), configuration.getClientSecret(),&lt;br/&gt;
+            new CachingOAuthSecureStorage(secureStorage), configuration.getClientId(), configuration.getClientSecret(),&lt;br/&gt;
             configuration.getRedirectUri(), configuration.getScopes());&lt;br/&gt;
     }&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;diff --git a/components/camel-linkedin/camel-linkedin-component/src/main/java/org/apache/camel/component/linkedin/LinkedInConfiguration.java b/components/camel-linkedin/camel-linkedin-component/src/main/java/org/apache/camel/component/linkedin/LinkedInConfiguration.java&lt;br/&gt;
index 26fc1b80a34..114849cdd6f 100644&lt;br/&gt;
&amp;#8212; a/components/camel-linkedin/camel-linkedin-component/src/main/java/org/apache/camel/component/linkedin/LinkedInConfiguration.java&lt;br/&gt;
+++ b/components/camel-linkedin/camel-linkedin-component/src/main/java/org/apache/camel/component/linkedin/LinkedInConfiguration.java&lt;br/&gt;
@@ -18,6 +18,7 @@&lt;/p&gt;

&lt;p&gt; import java.util.Arrays;&lt;br/&gt;
 import java.util.Map;&lt;br/&gt;
+import java.util.concurrent.TimeUnit;&lt;/p&gt;

&lt;p&gt; import org.apache.camel.component.linkedin.api.OAuthScope;&lt;br/&gt;
 import org.apache.camel.component.linkedin.api.OAuthSecureStorage;&lt;br/&gt;
@@ -56,6 +57,10 @@&lt;br/&gt;
     @UriParam&lt;br/&gt;
     private OAuthSecureStorage secureStorage;&lt;br/&gt;
     @UriParam&lt;br/&gt;
+    private String accessToken;&lt;br/&gt;
+    @UriParam(defaultValue = &quot;5184000&quot;)&lt;br/&gt;
+    private long expiryTime = TimeUnit.SECONDS.convert(60, TimeUnit.DAYS);&lt;br/&gt;
+    @UriParam&lt;br/&gt;
     private String clientId;&lt;br/&gt;
     @UriParam&lt;br/&gt;
     private String clientSecret;&lt;br/&gt;
@@ -116,6 +121,28 @@ public OAuthSecureStorage getSecureStorage() &lt;/p&gt;
{
         return secureStorage;
     }

&lt;p&gt;+    public String getAccessToken() &lt;/p&gt;
{
+        return accessToken;
+    }
&lt;p&gt;+&lt;br/&gt;
+    /**&lt;br/&gt;
+     * LinkedIn access token to avoid username and password login.&lt;br/&gt;
+     */&lt;br/&gt;
+    public void setAccessToken(String accessToken) &lt;/p&gt;
{
+        this.accessToken = accessToken;
+    }
&lt;p&gt;+&lt;br/&gt;
+    public long getExpiryTime() &lt;/p&gt;
{
+        return expiryTime;
+    }
&lt;p&gt;+&lt;br/&gt;
+    /**&lt;br/&gt;
+     * LinkedIn access token expiry time in milliseconds since Unix Epoch.&lt;br/&gt;
+     */&lt;br/&gt;
+    public void setExpiryTime(long expiryTime) &lt;/p&gt;
{
+        this.expiryTime = expiryTime;
+    }
&lt;p&gt;+&lt;br/&gt;
     /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Callback interface for providing an OAuth token or to store the token generated by the component.&lt;/li&gt;
	&lt;li&gt;The callback should return null on the first call and then save the created token in the saveToken() callback.&lt;br/&gt;
diff --git a/components/camel-linkedin/camel-linkedin-component/src/test/resources/test-options.properties b/components/camel-linkedin/camel-linkedin-component/src/test/resources/test-options.properties&lt;br/&gt;
index 43404f5335a..23a3939e3dc 100644
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;a/components/camel-linkedin/camel-linkedin-component/src/test/resources/test-options.properties&lt;br/&gt;
+++ b/components/camel-linkedin/camel-linkedin-component/src/test/resources/test-options.properties&lt;br/&gt;
@@ -23,6 +23,10 @@ userPassword=&lt;br/&gt;
 clientId=&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;
&lt;ol&gt;
	&lt;li&gt;LinkedIn App clientSecret&lt;br/&gt;
 clientSecret=&lt;br/&gt;
+# LinkedIn access token&lt;br/&gt;
+accessToken=&lt;br/&gt;
+# LinkedIn token expiry time&lt;br/&gt;
+expiryTime=&lt;/li&gt;
	&lt;li&gt;LinkedIn App required scopes&lt;br/&gt;
 scope=r_basicprofile,r_fullprofile,r_emailaddress,r_network,r_contactinfo,rw_nus,rw_company_admin,rw_groups,w_messages&lt;/li&gt;
	&lt;li&gt;LinkedIn App redirect URI&lt;br/&gt;
diff --git a/platforms/spring-boot/components-starter/camel-linkedin-starter/src/main/java/org/apache/camel/component/linkedin/springboot/LinkedInComponentConfiguration.java b/platforms/spring-boot/components-starter/camel-linkedin-starter/src/main/java/org/apache/camel/component/linkedin/springboot/LinkedInComponentConfiguration.java&lt;br/&gt;
index 44d3f44d762..b26303b7cdf 100644
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;a/platforms/spring-boot/components-starter/camel-linkedin-starter/src/main/java/org/apache/camel/component/linkedin/springboot/LinkedInComponentConfiguration.java&lt;br/&gt;
+++ b/platforms/spring-boot/components-starter/camel-linkedin-starter/src/main/java/org/apache/camel/component/linkedin/springboot/LinkedInComponentConfiguration.java&lt;br/&gt;
@@ -96,6 +96,14 @@ public void setResolvePropertyPlaceholders(&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ol&gt;
&lt;ul&gt;
	&lt;li&gt;MUST be provided&lt;br/&gt;
          */&lt;br/&gt;
         private OAuthSecureStorage secureStorage;&lt;br/&gt;
+        /**&lt;br/&gt;
+         * LinkedIn access token to avoid username and password login.&lt;br/&gt;
+         */&lt;br/&gt;
+        private String accessToken;&lt;br/&gt;
+        /**&lt;br/&gt;
+         * LinkedIn access token expiry time in milliseconds since Unix Epoch.&lt;br/&gt;
+         */&lt;br/&gt;
+        private Long expiryTime = 5184000L;&lt;br/&gt;
         /**&lt;/li&gt;
	&lt;li&gt;LinkedIn application client ID&lt;br/&gt;
          */&lt;br/&gt;
@@ -167,6 +175,22 @@ public void setSecureStorage(OAuthSecureStorage secureStorage) 
{
             this.secureStorage = secureStorage;
         }&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;+        public String getAccessToken() &lt;/p&gt;
{
+            return accessToken;
+        }
&lt;p&gt;+&lt;br/&gt;
+        public void setAccessToken(String accessToken) &lt;/p&gt;
{
+            this.accessToken = accessToken;
+        }
&lt;p&gt;+&lt;br/&gt;
+        public Long getExpiryTime() &lt;/p&gt;
{
+            return expiryTime;
+        }
&lt;p&gt;+&lt;br/&gt;
+        public void setExpiryTime(Long expiryTime) &lt;/p&gt;
{
+            this.expiryTime = expiryTime;
+        }
&lt;p&gt;+&lt;br/&gt;
         public String getClientId() &lt;/p&gt;
{
             return clientId;
         }




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16664085" author="githubbot" created="Thu, 25 Oct 2018 17:52:05 +0000"  >&lt;p&gt;dhirajsb opened a new pull request #2580: &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12899&quot; title=&quot;Handle LinkedIn Captcha redirects gracefully&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12899&quot;&gt;&lt;del&gt;CAMEL-12899&lt;/del&gt;&lt;/a&gt;: Fixed default expiryTime calculation&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/camel/pull/2580&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2580&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16664086" author="githubbot" created="Thu, 25 Oct 2018 17:52:14 +0000"  >&lt;p&gt;dhirajsb closed pull request #2580: &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12899&quot; title=&quot;Handle LinkedIn Captcha redirects gracefully&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12899&quot;&gt;&lt;del&gt;CAMEL-12899&lt;/del&gt;&lt;/a&gt;: Fixed default expiryTime calculation&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/camel/pull/2580&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2580&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/components/camel-linkedin/camel-linkedin-component/src/main/docs/linkedin-component.adoc b/components/camel-linkedin/camel-linkedin-component/src/main/docs/linkedin-component.adoc&lt;br/&gt;
index c229f0a529d..9d7276a4883 100644&lt;br/&gt;
&amp;#8212; a/components/camel-linkedin/camel-linkedin-component/src/main/docs/linkedin-component.adoc&lt;br/&gt;
+++ b/components/camel-linkedin/camel-linkedin-component/src/main/docs/linkedin-component.adoc&lt;br/&gt;
@@ -98,7 +98,7 @@ with the following path and query parameters:&lt;/p&gt;
&lt;div class=&apos;table-wrap&apos;&gt;
&lt;table class=&apos;confluenceTable&apos;&gt;&lt;tbody&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;b&gt;accessToken&lt;/b&gt; (common) &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; LinkedIn access token to avoid username and password login. &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;nbsp;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; String&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;b&gt;clientId&lt;/b&gt; (common) &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; LinkedIn application client ID &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;nbsp;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; String&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;b&gt;clientSecret&lt;/b&gt; (common) &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; LinkedIn application client secret &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;nbsp;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; String&lt;br/&gt;
-&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;b&gt;expiryTime&lt;/b&gt; (common) &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; LinkedIn access token expiry time in milliseconds since Unix Epoch. &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; 5184000 &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; long&lt;br/&gt;
+&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;b&gt;expiryTime&lt;/b&gt; (common) &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; LinkedIn access token expiry time in milliseconds since Unix Epoch, default is 60 days in the future. &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;nbsp;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Long&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;b&gt;httpParams&lt;/b&gt; (common) &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Custom HTTP params, for example proxy host and port, use constants from AllClientPNames &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;nbsp;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Map&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;b&gt;inBody&lt;/b&gt; (common) &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Sets the name of a parameter to be passed in the exchange In Body &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt;&amp;nbsp;&lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; String&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; &lt;b&gt;lazyAuth&lt;/b&gt; (common) &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; Flag to enable/disable lazy OAuth, default is true. when enabled, OAuth token retrieval or generation is not done until the first REST call &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; true &lt;/td&gt;
&lt;td class=&apos;confluenceTd&apos;&gt; boolean&lt;br/&gt;
diff --git a/components/camel-linkedin/camel-linkedin-component/src/main/java/org/apache/camel/component/linkedin/DefaultOAuthSecureStorage.java b/components/camel-linkedin/camel-linkedin-component/src/main/java/org/apache/camel/component/linkedin/DefaultOAuthSecureStorage.java&lt;br/&gt;
index a052daf9d9b..5a5804a7477 100644&lt;br/&gt;
&amp;#8212; a/components/camel-linkedin/camel-linkedin-component/src/main/java/org/apache/camel/component/linkedin/DefaultOAuthSecureStorage.java&lt;br/&gt;
+++ b/components/camel-linkedin/camel-linkedin-component/src/main/java/org/apache/camel/component/linkedin/DefaultOAuthSecureStorage.java&lt;br/&gt;
@@ -16,20 +16,23 @@&lt;br/&gt;
  */&lt;br/&gt;
 package org.apache.camel.component.linkedin;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;&lt;/table&gt;
&lt;/div&gt;


&lt;p&gt;+import java.util.concurrent.TimeUnit;&lt;br/&gt;
+&lt;br/&gt;
 import org.apache.camel.component.linkedin.api.OAuthSecureStorage;&lt;br/&gt;
 import org.apache.camel.component.linkedin.api.OAuthToken;&lt;br/&gt;
 import org.apache.camel.component.linkedin.internal.CachingOAuthSecureStorage;&lt;/p&gt;

&lt;p&gt; /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Default implementation of 
{@link OAuthSecureStorage}&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;* with user provided token and expiry time in msecs.&lt;br/&gt;
+ * with user provided token and optional expiry time in msecs.&lt;br/&gt;
  */&lt;br/&gt;
 public class DefaultOAuthSecureStorage extends CachingOAuthSecureStorage {&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;private OAuthToken token;&lt;br/&gt;
-&lt;/li&gt;
	&lt;li&gt;public DefaultOAuthSecureStorage(String accessToken, long expiryTime) {&lt;br/&gt;
+    public DefaultOAuthSecureStorage(String accessToken, Long expiryTime) 
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {         super(null);+        if (expiryTime == null) {
+            expiryTime = System.currentTimeMillis() + TimeUnit.MILLISECONDS.convert(60, TimeUnit.DAYS);
+        }         this.token = new OAuthToken(null, accessToken, expiryTime);     }&lt;/span&gt; &lt;/div&gt;
&lt;p&gt; }&lt;br/&gt;
diff --git a/components/camel-linkedin/camel-linkedin-component/src/main/java/org/apache/camel/component/linkedin/LinkedInConfiguration.java b/components/camel-linkedin/camel-linkedin-component/src/main/java/org/apache/camel/component/linkedin/LinkedInConfiguration.java&lt;br/&gt;
index 114849cdd6f..59c189d401c 100644&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;a/components/camel-linkedin/camel-linkedin-component/src/main/java/org/apache/camel/component/linkedin/LinkedInConfiguration.java&lt;br/&gt;
+++ b/components/camel-linkedin/camel-linkedin-component/src/main/java/org/apache/camel/component/linkedin/LinkedInConfiguration.java&lt;br/&gt;
@@ -18,7 +18,6 @@&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; import java.util.Arrays;&lt;br/&gt;
 import java.util.Map;&lt;br/&gt;
-import java.util.concurrent.TimeUnit;&lt;/p&gt;

&lt;p&gt; import org.apache.camel.component.linkedin.api.OAuthScope;&lt;br/&gt;
 import org.apache.camel.component.linkedin.api.OAuthSecureStorage;&lt;br/&gt;
@@ -58,8 +57,8 @@&lt;br/&gt;
     private OAuthSecureStorage secureStorage;&lt;br/&gt;
     @UriParam&lt;br/&gt;
     private String accessToken;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;@UriParam(defaultValue = &quot;5184000&quot;)&lt;/li&gt;
	&lt;li&gt;private long expiryTime = TimeUnit.SECONDS.convert(60, TimeUnit.DAYS);&lt;br/&gt;
+    @UriParam&lt;br/&gt;
+    private Long expiryTime;&lt;br/&gt;
     @UriParam&lt;br/&gt;
     private String clientId;&lt;br/&gt;
     @UriParam&lt;br/&gt;
@@ -132,14 +131,14 @@ public void setAccessToken(String accessToken) 
{
         this.accessToken = accessToken;
     }&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;public long getExpiryTime() {&lt;br/&gt;
+    public Long getExpiryTime() 
{
         return expiryTime;
     }&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;     /**&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;* LinkedIn access token expiry time in milliseconds since Unix Epoch.&lt;br/&gt;
+     * LinkedIn access token expiry time in milliseconds since Unix Epoch, default is 60 days in the future.&lt;br/&gt;
      */&lt;/li&gt;
	&lt;li&gt;public void setExpiryTime(long expiryTime) {&lt;br/&gt;
+    public void setExpiryTime(Long expiryTime) 
{
         this.expiryTime = expiryTime;
     }&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;diff --git a/components/camel-linkedin/camel-linkedin-component/src/main/java/org/apache/camel/component/linkedin/internal/CachingOAuthSecureStorage.java b/components/camel-linkedin/camel-linkedin-component/src/main/java/org/apache/camel/component/linkedin/internal/CachingOAuthSecureStorage.java&lt;br/&gt;
index 029e3ab2fec..a263fab6b94 100644&lt;br/&gt;
&amp;#8212; a/components/camel-linkedin/camel-linkedin-component/src/main/java/org/apache/camel/component/linkedin/internal/CachingOAuthSecureStorage.java&lt;br/&gt;
+++ b/components/camel-linkedin/camel-linkedin-component/src/main/java/org/apache/camel/component/linkedin/internal/CachingOAuthSecureStorage.java&lt;br/&gt;
@@ -25,7 +25,7 @@&lt;br/&gt;
 public class CachingOAuthSecureStorage implements OAuthSecureStorage {&lt;/p&gt;

&lt;p&gt;     private final OAuthSecureStorage secureStorage;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;private OAuthToken token;&lt;br/&gt;
+    protected OAuthToken token;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;     public CachingOAuthSecureStorage(OAuthSecureStorage secureStorage) {&lt;br/&gt;
         this.secureStorage = secureStorage;&lt;br/&gt;
diff --git a/platforms/spring-boot/components-starter/camel-linkedin-starter/src/main/java/org/apache/camel/component/linkedin/springboot/LinkedInComponentConfiguration.java b/platforms/spring-boot/components-starter/camel-linkedin-starter/src/main/java/org/apache/camel/component/linkedin/springboot/LinkedInComponentConfiguration.java&lt;br/&gt;
index b26303b7cdf..bdad01867e3 100644&lt;br/&gt;
&amp;#8212; a/platforms/spring-boot/components-starter/camel-linkedin-starter/src/main/java/org/apache/camel/component/linkedin/springboot/LinkedInComponentConfiguration.java&lt;br/&gt;
+++ b/platforms/spring-boot/components-starter/camel-linkedin-starter/src/main/java/org/apache/camel/component/linkedin/springboot/LinkedInComponentConfiguration.java&lt;br/&gt;
@@ -101,9 +101,10 @@ public void setResolvePropertyPlaceholders(&lt;br/&gt;
          */&lt;br/&gt;
         private String accessToken;&lt;br/&gt;
         /**&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;* LinkedIn access token expiry time in milliseconds since Unix Epoch.&lt;br/&gt;
+         * LinkedIn access token expiry time in milliseconds since Unix Epoch,&lt;br/&gt;
+         * default is 60 days in the future.&lt;br/&gt;
          */&lt;/li&gt;
	&lt;li&gt;private Long expiryTime = 5184000L;&lt;br/&gt;
+        private Long expiryTime;&lt;br/&gt;
         /**&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
	&lt;li&gt;LinkedIn application client ID&lt;br/&gt;
          */&lt;/li&gt;
&lt;/ul&gt;





&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 3 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3zm9r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>