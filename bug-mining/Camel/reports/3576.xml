<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:15:05 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-9710] Camel Dozer Component - Fails to load custom function due to NPE </title>
                <link>https://issues.apache.org/jira/browse/CAMEL-9710</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;Camel Dozer component throws NPE, when using custom converter as shown in the following example. &lt;/p&gt;

&lt;p&gt; &amp;lt;mapping&amp;gt;&lt;br/&gt;
    &amp;lt;class-a&amp;gt;org.example.A&amp;lt;/class-a&amp;gt;&lt;br/&gt;
    &amp;lt;class-b&amp;gt;org.example.B&amp;lt;/class-b&amp;gt;&lt;br/&gt;
    &amp;lt;field custom-converter-id=&quot;_customMapping&quot; &lt;br/&gt;
        custom-converter-param=&quot;org.example.CustomMapper,mapCustomer&quot;&amp;gt;&lt;br/&gt;
      &amp;lt;a&amp;gt;sourceField&amp;lt;/a&amp;gt;&lt;br/&gt;
      &amp;lt;b&amp;gt;destinationField&amp;lt;/b&amp;gt;&lt;br/&gt;
    &amp;lt;/field&amp;gt;&lt;br/&gt;
  &amp;lt;/mapping&amp;gt;&lt;/p&gt;

&lt;p&gt;When the sourceField value is null in the Class A,Fails to load custom function and  throws RuntimeException caused due to NPE.&lt;/p&gt;

&lt;p&gt;Issue with Code: (&lt;br/&gt;
------------------------&lt;br/&gt;
Class: CustomMapper&lt;br/&gt;
Method: invokeFunction&lt;br/&gt;
Line# 117&lt;/p&gt;

&lt;p&gt;        Object customObj;&lt;br/&gt;
        Method method = null;&lt;br/&gt;
        try {&lt;br/&gt;
            Class&amp;lt;?&amp;gt; customClass = resolver.resolveClass(className);&lt;br/&gt;
            customObj = customClass.newInstance();&lt;/p&gt;

&lt;p&gt;            // If a specific mapping operation has been supplied use that&lt;br/&gt;
            if (operation != null &amp;amp;&amp;amp; prmTypesAndValues != null) &lt;/p&gt;
{
                method = selectMethod(customClass, operation, source, prmTypesAndValues);
            }
&lt;p&gt; else if (operation != null) &lt;/p&gt;
{
                method = customClass.getMethod(operation, source.getClass()); // ***** THIS LINE CAUSES NPE, as source is NULL */
            }
&lt;p&gt; else &lt;/p&gt;
{
                method = selectMethod(customClass, source);
            }
&lt;p&gt;        } catch (Exception e) &lt;/p&gt;
{
            throw new RuntimeException(&quot;Failed to load custom function&quot;, e);
        }



&lt;p&gt;StackTrace:&lt;br/&gt;
-------------------&lt;br/&gt;
java.lang.RuntimeException: Failed to load custom function&lt;br/&gt;
	at org.apache.camel.component.dozer.CustomMapper.mapCustom(CustomMapper.java:122)&lt;br/&gt;
	at org.apache.camel.component.dozer.CustomMapper.convert(CustomMapper.java:46)&lt;br/&gt;
	at org.dozer.MappingProcessor.mapUsingCustomConverterInstance(MappingProcessor.java:977)&lt;br/&gt;
	at org.dozer.MappingProcessor.mapFromFieldMap(MappingProcessor.java:355)&lt;br/&gt;
	at org.dozer.MappingProcessor.mapField(MappingProcessor.java:307)&lt;br/&gt;
	at org.dozer.MappingProcessor.map(MappingProcessor.java:267)&lt;br/&gt;
	at org.dozer.MappingProcessor.mapToDestObject(MappingProcessor.java:216)&lt;br/&gt;
	at org.dozer.MappingProcessor.createByCreationDirectiveAndMap(MappingProcessor.java:196)&lt;br/&gt;
	at org.dozer.MappingProcessor.mapGeneral(MappingProcessor.java:170)&lt;br/&gt;
	at org.dozer.MappingProcessor.map(MappingProcessor.java:104)&lt;br/&gt;
	at org.dozer.MappingProcessor.map(MappingProcessor.java:99)&lt;br/&gt;
	at org.dozer.DozerBeanMapper.map(DozerBeanMapper.java:120)&lt;br/&gt;
	at org.apache.camel.component.dozer.DozerProducer.process(DozerProducer.java:82)&lt;br/&gt;
	at org.apache.camel.util.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:61)&lt;br/&gt;
	at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:141)&lt;br/&gt;
	at org.apache.camel.management.InstrumentationProcessor.process(InstrumentationProcessor.java:77)&lt;br/&gt;
	at org.apache.camel.processor.interceptor.HandleFaultInterceptor.process(HandleFaultInterceptor.java:42)&lt;br/&gt;
	at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:91)&lt;br/&gt;
	at org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:460)&lt;br/&gt;
	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:190)&lt;br/&gt;
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:121)&lt;br/&gt;
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:83)&lt;br/&gt;
	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:190)&lt;br/&gt;
	at org.apache.camel.component.direct.DirectProducer.process(DirectProducer.java:62)&lt;br/&gt;
	at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:190)&lt;br/&gt;
	at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:109)&lt;br/&gt;
	at org.apache.camel.processor.UnitOfWorkProducer.process(UnitOfWorkProducer.java:68)&lt;br/&gt;
	at org.apache.camel.impl.ProducerCache$2.doInProducer(ProducerCache.java:412)&lt;br/&gt;
	at org.apache.camel.impl.ProducerCache$2.doInProducer(ProducerCache.java:380)&lt;br/&gt;
	at org.apache.camel.impl.ProducerCache.doInProducer(ProducerCache.java:270)&lt;br/&gt;
	at org.apache.camel.impl.ProducerCache.sendExchange(ProducerCache.java:380)&lt;br/&gt;
	at org.apache.camel.impl.ProducerCache.send(ProducerCache.java:221)&lt;br/&gt;
	at org.apache.camel.impl.DefaultProducerTemplate.send(DefaultProducerTemplate.java:124)&lt;br/&gt;
	at org.apache.camel.impl.DefaultProducerTemplate.sendBody(DefaultProducerTemplate.java:137)&lt;br/&gt;
	at org.apache.camel.impl.DefaultProducerTemplate.sendBody(DefaultProducerTemplate.java:144)&lt;br/&gt;
	at com.ta.shop.integration.routes.doz.DozerJsonTest.testDozerHappyPath(DozerJsonTest.java:23)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:606)&lt;br/&gt;
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)&lt;br/&gt;
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)&lt;br/&gt;
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)&lt;br/&gt;
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)&lt;br/&gt;
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)&lt;br/&gt;
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)&lt;br/&gt;
	at org.junit.rules.TestWatcher$1.evaluate(TestWatcher.java:55)&lt;br/&gt;
	at org.junit.rules.TestWatcher$1.evaluate(TestWatcher.java:55)&lt;br/&gt;
	at org.junit.rules.RunRules.evaluate(RunRules.java:20)&lt;br/&gt;
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:271)&lt;br/&gt;
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:70)&lt;br/&gt;
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)&lt;br/&gt;
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)&lt;br/&gt;
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)&lt;br/&gt;
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)&lt;br/&gt;
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)&lt;br/&gt;
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)&lt;br/&gt;
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)&lt;br/&gt;
	at org.junit.runners.ParentRunner.run(ParentRunner.java:309)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:459)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:675)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:382)&lt;br/&gt;
	at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:192)&lt;br/&gt;
Caused by: java.lang.NullPointerException&lt;br/&gt;
	at org.apache.camel.component.dozer.CustomMapper.mapCustom(CustomMapper.java:117)&lt;/p&gt;</description>
                <environment>&lt;p&gt;Any&lt;/p&gt;</environment>
        <key id="12950561">CAMEL-9710</key>
            <summary>Camel Dozer Component - Fails to load custom function due to NPE </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="trohovsky">Tomas Rohovsky</assignee>
                                    <reporter username="ranjit.nethi@gmail.com">Ranjit Nethi</reporter>
                        <labels>
                    </labels>
                <created>Tue, 15 Mar 2016 15:38:19 +0000</created>
                <updated>Wed, 16 Mar 2016 07:12:43 +0000</updated>
                            <resolved>Wed, 16 Mar 2016 07:11:47 +0000</resolved>
                                    <version>2.16.1</version>
                                    <fixVersion>2.16.3</fixVersion>
                    <fixVersion>2.17.0</fixVersion>
                                    <component>camel-dozer</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15195819" author="trohovsky" created="Tue, 15 Mar 2016 18:04:23 +0000"  >&lt;p&gt;I guess your Dozer mapping definition is incorrect, specifically &lt;tt&gt;custom-converter-param=&quot;org.example.CustomMapper,mapCustomer&quot;&lt;/tt&gt;. See &lt;a href=&quot;http://dozer.sourceforge.net/documentation/customconverter.html#Configurable_Custom_Converters&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://dozer.sourceforge.net/documentation/customconverter.html#Configurable_Custom_Converters&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="15195898" author="ranjit.nethi@gmail.com" created="Tue, 15 Mar 2016 18:33:44 +0000"  >&lt;p&gt;Using Dozer standalone, and using configure custom converters with DozerMapper works just fine.&lt;br/&gt;
For ex, the config below works good for me:&lt;br/&gt;
	      &amp;lt;field custom-converter-id=&quot;myCustomConverter&quot;&amp;gt;&lt;br/&gt;
			&amp;lt;a&amp;gt;makeModel.code&amp;lt;/a&amp;gt;&lt;br/&gt;
			&amp;lt;b&amp;gt;make&amp;lt;/b&amp;gt;&lt;br/&gt;
		&amp;lt;/field&amp;gt;&lt;/p&gt;

&lt;p&gt;The problem is with the camel-dozer component, when implemented as suggested in the following page:&lt;br/&gt;
&lt;a href=&quot;http://camel.apache.org/dozer.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://camel.apache.org/dozer.html&lt;/a&gt;&lt;br/&gt;
and using camel dozer endpoint like: &lt;br/&gt;
dozer:transfromJSONFormatToCanonical?mappingFile=dozerMapping.xml&amp;amp;targetModel=com.test.canonical.schemas.nouns.WorkOrder&lt;/p&gt;</comment>
                            <comment id="15196069" author="trohovsky" created="Tue, 15 Mar 2016 19:51:28 +0000"  >&lt;p&gt;I am working on the fix, will be available soon.&lt;/p&gt;</comment>
                            <comment id="15196145" author="githubbot" created="Tue, 15 Mar 2016 20:16:40 +0000"  >&lt;p&gt;GitHub user trohovsky opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/905&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/905&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-9710&quot; title=&quot;Camel Dozer Component - Fails to load custom function due to NPE &quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-9710&quot;&gt;&lt;del&gt;CAMEL-9710&lt;/del&gt;&lt;/a&gt; Use sourceClass instead of source.getClass() to prevent NPE&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/trohovsky/camel&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/trohovsky/camel&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-9710&quot; title=&quot;Camel Dozer Component - Fails to load custom function due to NPE &quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-9710&quot;&gt;&lt;del&gt;CAMEL-9710&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/905.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/905.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #905&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit ef7e0591ae84fd77a40739ffdf8fde3df7199949&lt;br/&gt;
Author: Tomas Rohovsky &amp;lt;tomasrohovsky@seznam.cz&amp;gt;&lt;br/&gt;
Date:   2016-03-15T20:13:27Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-9710&quot; title=&quot;Camel Dozer Component - Fails to load custom function due to NPE &quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-9710&quot;&gt;&lt;del&gt;CAMEL-9710&lt;/del&gt;&lt;/a&gt; Use sourceClass instead of source.getClass() to prevent NPE&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15196918" author="githubbot" created="Wed, 16 Mar 2016 07:11:44 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/905&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/905&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15196919" author="davsclaus" created="Wed, 16 Mar 2016 07:11:47 +0000"  >&lt;p&gt;Thanks for the PR&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 36 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2uptz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>