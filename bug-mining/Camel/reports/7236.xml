<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 11:12:33 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-22359] camel-as2: MDN multipart/report parsing issue with no Content-Type</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-22359</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;We use Camel AS2 component to receive and send edifact messages to partners.&lt;/p&gt;

&lt;p&gt;We&apos;re having issue parsing synchronous MDN from one of this partner.&lt;/p&gt;

&lt;p&gt;The global Content-Type of the MDN is multipart/report.&lt;br/&gt;
The first part (the human readable text) has no Content-Type set.&lt;br/&gt;
This leads to a parsing bug whereas RFC 2045 (Section 5.2) specify that the Content-Type can be omitted and should be considered as &quot;text/plain; charset=us-ascii&quot;.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Caused by: org.apache.hc.core5.http.ParseException: failed to parse text entity
	at org.apache.camel.component.as2.api.entity.EntityParser.parseMultipartSignedEntityBody(EntityParser.java:449) ~[classes/:na]
	at org.apache.camel.component.as2.api.entity.EntityParser.parseMultipartSignedEntity(EntityParser.java:274) ~[classes/:na]
	at org.apache.camel.component.as2.api.entity.EntityParser.parseByMimeType(EntityParser.java:368) ~[classes/:na]
	at org.apache.camel.component.as2.api.entity.EntityParser.doParseAS2MessageEntity(EntityParser.java:357) ~[classes/:na]
	at org.apache.camel.component.as2.api.entity.EntityParser.parseAS2MessageEntity(EntityParser.java:336) ~[classes/:na]
	at org.apache.camel.component.as2.api.io.AS2BHttpClientConnection.receiveResponseEntity(AS2BHttpClientConnection.java:126) ~[camel-as2-api-4.10.6.jar:4.10.6]
	at org.apache.hc.core5.http.impl.io.HttpRequestExecutor.execute(HttpRequestExecutor.java:192) ~[httpcore5-5.2.5.jar:5.2.5]
	at org.apache.hc.core5.http.impl.io.HttpRequestExecutor.execute(HttpRequestExecutor.java:218) ~[httpcore5-5.2.5.jar:5.2.5]
	at org.apache.camel.component.as2.api.AS2ClientConnection$2.execute(AS2ClientConnection.java:205) ~[camel-as2-api-4.10.6.jar:4.10.6]
	at org.apache.hc.client5.http.impl.io.PoolingHttpClientConnectionManager$InternalConnectionEndpoint.execute(PoolingHttpClientConnectionManager.java:717) ~[httpclient5-5.3.1.jar:5.3.1]
	at org.apache.camel.component.as2.api.AS2ClientConnection.send(AS2ClientConnection.java:211) ~[camel-as2-api-4.10.6.jar:4.10.6]
	at org.apache.camel.component.as2.api.AS2ClientManager.sendRequest(AS2ClientManager.java:331) ~[camel-as2-api-4.10.6.jar:4.10.6]
	at org.apache.camel.component.as2.api.AS2ClientManager.send(AS2ClientManager.java:322) ~[camel-as2-api-4.10.6.jar:4.10.6]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.apache.camel.support.component.ApiMethodHelper.invokeMethod(ApiMethodHelper.java:521) ~[camel-support-4.10.6.jar:4.10.6]
	... 9 common frames omitted
Caused by: org.apache.hc.core5.http.ParseException: failed to parse EDI entity
	at org.apache.camel.component.as2.api.entity.EntityParser.parseEntityBody(EntityParser.java:634) ~[classes/:na]
	at org.apache.camel.component.as2.api.entity.EntityParser.parseMultipartSignedEntityBody(EntityParser.java:419) ~[classes/:na]
	... 24 common frames omitted
Caused by: org.apache.hc.core5.http.ParseException: failed to parse text entity
	at org.apache.camel.component.as2.api.entity.EntityParser.parseMultipartReportEntityBody(EntityParser.java:520) ~[classes/:na]
	at org.apache.camel.component.as2.api.entity.EntityParser.parseEntityBody(EntityParser.java:616) ~[classes/:na]
	... 25 common frames omitted
Caused by: org.apache.hc.core5.http.HttpException: Failed to find Content-Type header in EDI message body part
	at org.apache.camel.component.as2.api.entity.EntityParser.parseMultipartReportEntityBody(EntityParser.java:486) ~[classes/:na]
	... 26 common frames omitted
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;RFC 2045 (MIME Part One: Format of Internet Message Bodies), Section 5.2 &#8211; Content-Type Defaults&lt;br/&gt;
&lt;a href=&quot;https://datatracker.ietf.org/doc/html/rfc2045#section-5.2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://datatracker.ietf.org/doc/html/rfc2045#section-5.2&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Default [RFC 822](https:&lt;span class=&quot;code-comment&quot;&gt;//datatracker.ietf.org/doc/html/rfc822) messages without a MIME Content-Type header are taken by &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; protocol to be plain text in the US-ASCII character set, which can be explicitly specified as:
&lt;/span&gt;
Content-type: text/plain; charset=us-ascii &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;RFC 4130 (AS2) &#8594; RFC 3798 (MDN) &#8594; RFC 3462 (multipart/report) &#8594; RFC 2046 (MIME media types) &#8594; RFC 2045 (MIME defaults, Section 5.2)&lt;/p&gt;</description>
                <environment></environment>
        <key id="13626753">CAMEL-22359</key>
            <summary>camel-as2: MDN multipart/report parsing issue with no Content-Type</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="msorce">msorce</reporter>
                        <labels>
                    </labels>
                <created>Tue, 19 Aug 2025 13:06:20 +0000</created>
                <updated>Wed, 20 Aug 2025 05:45:30 +0000</updated>
                            <resolved>Wed, 20 Aug 2025 05:45:30 +0000</resolved>
                                    <version>4.10.6</version>
                                    <fixVersion>4.8.9</fixVersion>
                    <fixVersion>4.10.7</fixVersion>
                    <fixVersion>4.14.1</fixVersion>
                    <fixVersion>4.15.0</fixVersion>
                                    <component>camel-as2</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="18014896" author="davsclaus" created="Tue, 19 Aug 2025 13:08:53 +0000"  >&lt;p&gt;Can you try camel 4.13.0 or 4.14.0 when its released later this week.&lt;/p&gt;</comment>
                            <comment id="18014905" author="JIRAUSER310761" created="Tue, 19 Aug 2025 13:47:14 +0000"  >&lt;p&gt;Same issue with 4.13.0 :&lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Caused by: org.apache.hc.core5.http.ParseException: failed to parse text entity
&#160; &#160; at org.apache.camel.component.as2.api.entity.EntityParser.parseMultipartSignedEntityBody(EntityParser.java:630) ~[camel-as2-api-4.13.0.jar:4.13.0]
&#160; &#160; at org.apache.camel.component.as2.api.entity.EntityParser.parseMultipartSignedEntity(EntityParser.java:364) ~[camel-as2-api-4.13.0.jar:4.13.0]
&#160; &#160; at org.apache.camel.component.as2.api.entity.EntityParser.parseByMimeType(EntityParser.java:504) ~[camel-as2-api-4.13.0.jar:4.13.0]
&#160; &#160; at org.apache.camel.component.as2.api.entity.EntityParser.doParseAS2MessageEntity(EntityParser.java:490) ~[camel-as2-api-4.13.0.jar:4.13.0]
&#160; &#160; at org.apache.camel.component.as2.api.entity.EntityParser.parseAS2MessageEntity(EntityParser.java:459) ~[camel-as2-api-4.13.0.jar:4.13.0]
&#160; &#160; at org.apache.camel.component.as2.api.io.AS2BHttpClientConnection.receiveResponseEntity(AS2BHttpClientConnection.java:126) ~[camel-as2-api-4.13.0.jar:4.13.0]
&#160; &#160; at org.apache.hc.core5.http.impl.io.HttpRequestExecutor.execute(HttpRequestExecutor.java:213) ~[httpcore5-5.3.4.jar:5.3.4]
&#160; &#160; at org.apache.hc.core5.http.impl.io.HttpRequestExecutor.execute(HttpRequestExecutor.java:242) ~[httpcore5-5.3.4.jar:5.3.4]
&#160; &#160; at org.apache.camel.component.as2.api.AS2ClientConnection$2.execute(AS2ClientConnection.java:205) ~[camel-as2-api-4.13.0.jar:4.13.0]
&#160; &#160; at org.apache.hc.client5.http.impl.io.PoolingHttpClientConnectionManager$InternalConnectionEndpoint.execute(PoolingHttpClientConnectionManager.java:773) ~[httpclient5-5.5.jar:5.5]
&#160; &#160; at org.apache.camel.component.as2.api.AS2ClientConnection.send(AS2ClientConnection.java:211) ~[camel-as2-api-4.13.0.jar:4.13.0]
&#160; &#160; at org.apache.camel.component.as2.api.AS2ClientManager.sendRequest(AS2ClientManager.java:357) ~[camel-as2-api-4.13.0.jar:4.13.0]
&#160; &#160; at org.apache.camel.component.as2.api.AS2ClientManager.send(AS2ClientManager.java:348) ~[camel-as2-api-4.13.0.jar:4.13.0]
&#160; &#160; at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
&#160; &#160; at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
&#160; &#160; at org.apache.camel.support.component.ApiMethodHelper.invokeMethod(ApiMethodHelper.java:521) ~[camel-support-4.13.0.jar:4.13.0]
&#160; &#160; ... 9 common frames omitted
Caused by: org.apache.hc.core5.http.ParseException: failed to parse EDI entity
&#160; &#160; at org.apache.camel.component.as2.api.entity.EntityParser.parseEntityBody(EntityParser.java:889) ~[camel-as2-api-4.13.0.jar:4.13.0]
&#160; &#160; at org.apache.camel.component.as2.api.entity.EntityParser.parseMultipartSignedEntityBody(EntityParser.java:583) ~[camel-as2-api-4.13.0.jar:4.13.0]
&#160; &#160; ... 24 common frames omitted
Caused by: org.apache.hc.core5.http.ParseException: failed to parse text entity
&#160; &#160; at org.apache.camel.component.as2.api.entity.EntityParser.parseMultipartReportEntityBody(EntityParser.java:739) ~[camel-as2-api-4.13.0.jar:4.13.0]
&#160; &#160; at org.apache.camel.component.as2.api.entity.EntityParser.parseEntityBody(EntityParser.java:856) ~[camel-as2-api-4.13.0.jar:4.13.0]
&#160; &#160; ... 25 common frames omitted
Caused by: org.apache.hc.core5.http.HttpException: Failed to find Content-Type header in EDI message body part
&#160; &#160; at org.apache.camel.component.as2.api.entity.EntityParser.parseMultipartReportEntityBody(EntityParser.java:682) ~[camel-as2-api-4.13.0.jar:4.13.0]
&#160; &#160; ... 26 common frames omitted &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="18015059" author="davsclaus" created="Wed, 20 Aug 2025 05:45:30 +0000"  >&lt;p&gt;Thanks for reporting and sending the PR&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1xbmo:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>