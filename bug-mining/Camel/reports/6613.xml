<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 11:03:39 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-20100] Camel-jsonpath can&apos;t fetch missing field in some cases when body is returned from a http/https call</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-20100</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;When json response is received from the external REST endpoint using camel-http component, it fails to read missing json value, although DEFAULT_PATH_LEAF_TO_NULL option is set.&lt;/p&gt;

&lt;p&gt;This can be reproduced using mockable.io service, but we noticed this behavior when calling many other REST endpoints (from real implementations).&#160;&lt;/p&gt;

&lt;p&gt;How to reproduce:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;Create mocked POST REST endpoint using mockable.io&lt;/li&gt;
	&lt;li&gt;For example, our looks like following:&lt;br/&gt;
`POST &lt;a href=&quot;http://demo0405481.mockable.io/camel&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://demo0405481.mockable.io/camel&lt;/a&gt;` &lt;br/&gt;
Response: {&quot;errorcode&quot;:0,&quot;errormessage&quot;:&quot;&quot;}&lt;/li&gt;
	&lt;li&gt;Create integration where REST endpoint from step 2. is called using camel-http&lt;/li&gt;
	&lt;li&gt;Read missing summary field using Set Property and Jsonpath with DEFAULT_PATH_LEAF_TO_NULL enabled&lt;/li&gt;
	&lt;li&gt;Observe the error &quot;Cannot read message body as supported JSON value. &quot;&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;Actual result:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
org.apache.camel.ExpressionEvaluationException: org.apache.camel.CamelExchangeException: Cannot read message body as supported JSON value. &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Expected result:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
${exchangeProperty.summary} to be &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;YAML DSL to reproduce:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
- route:
&#160; &#160; nodePrefixId: route-7e2
&#160; &#160; id: route-dafc
&#160; &#160; from:
&#160; &#160; &#160; uri: scheduler
&#160; &#160; &#160; id: from-64dc
&#160; &#160; &#160; parameters:
&#160; &#160; &#160; &#160; name: scheduler
&#160; &#160; &#160; &#160; repeatCount: 2
&#160; &#160; &#160; steps:
&#160; &#160; &#160; &#160; - setHeader:
&#160; &#160; &#160; &#160; &#160; &#160; name: Content-Type
&#160; &#160; &#160; &#160; &#160; &#160; expression:
&#160; &#160; &#160; &#160; &#160; &#160; &#160; simple:
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; expression: application/json
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; id: simple-dc79
&#160; &#160; &#160; &#160; &#160; &#160; id: setHeader-2f26
&#160; &#160; &#160; &#160; - setBody:
&#160; &#160; &#160; &#160; &#160; &#160; expression:
&#160; &#160; &#160; &#160; &#160; &#160; &#160; simple:
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; expression: |-
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; {
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &lt;span class=&quot;code-quote&quot;&gt;&quot;some&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;value&quot;&lt;/span&gt;
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; }
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; id: simple-bfca
&#160; &#160; &#160; &#160; &#160; &#160; id: setBody-243c
&#160; &#160; &#160; &#160; - to:
&#160; &#160; &#160; &#160; &#160; &#160; uri: http
&#160; &#160; &#160; &#160; &#160; &#160; id: to-2cfa
&#160; &#160; &#160; &#160; &#160; &#160; parameters:
&#160; &#160; &#160; &#160; &#160; &#160; &#160; httpUri: demo0405481.mockable.io/camel
&#160; &#160; &#160; &#160; &#160; &#160; &#160; httpMethod: POST
&#160; &#160; &#160; &#160; - setProperty:
&#160; &#160; &#160; &#160; &#160; &#160; name: summary
&#160; &#160; &#160; &#160; &#160; &#160; expression:
&#160; &#160; &#160; &#160; &#160; &#160; &#160; jsonpath:
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; expression: $.summary
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; option: DEFAULT_PATH_LEAF_TO_NULL
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; id: jsonpath-54df
&#160; &#160; &#160; &#160; &#160; &#160; id: setProperty-0d81
&#160; &#160; &#160; &#160; - log:
&#160; &#160; &#160; &#160; &#160; &#160; message: &lt;span class=&quot;code-quote&quot;&gt;&apos;Value: ${exchangeProperty.summary}&apos;&lt;/span&gt;
&#160; &#160; &#160; &#160; &#160; &#160; id: log-6839
 &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Additional notes:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Please create your own mock using mockable.io and create some POST REST endpoint and return any json you want&lt;/li&gt;
	&lt;li&gt;In case summary field exists, it reads it normally&lt;/li&gt;
	&lt;li&gt;In case body is set using Set Body component, instead of reading it from from REST endpoint, everything works fine&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13557489">CAMEL-20100</key>
            <summary>Camel-jsonpath can&apos;t fetch missing field in some cases when body is returned from a http/https call</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="dpalinic">Damir Palinic</reporter>
                        <labels>
                    </labels>
                <created>Fri, 10 Nov 2023 12:53:42 +0000</created>
                <updated>Sun, 12 Nov 2023 17:50:26 +0000</updated>
                            <resolved>Sun, 12 Nov 2023 17:50:26 +0000</resolved>
                                    <version>4.1.0</version>
                                    <fixVersion>4.0.3</fixVersion>
                    <fixVersion>4.3.0</fixVersion>
                                    <component>camel-jsonpath</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17785293" author="davsclaus" created="Sun, 12 Nov 2023 15:23:27 +0000"  >&lt;p&gt;Thanks for the sample project. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1lixk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>