<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:34:39 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-13357] Regression - Namespaces defined on the SOAP envelope get lost in PAYLOAD mode</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-13357</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;If a request message is send to a CXF consumer or a response is returned to the CXF provider that contains namespace definions at the SOAP envelope and the Camel-CXF endpoint is configured in PAYLOAD mode the namespace definition gets lost unless streaming is disabled.&lt;/p&gt;

&lt;p&gt;If the resulting CxfPayload is then converted e.g. to String that String will contain invalid XML (because some namespace definition is missing).&lt;/p&gt;

&lt;p&gt;For non-streaming mode (system property org.apache.camel.component.cxf.streaming is set to false) there are special precautions met to set these envelope namespaces on the first DOM element of the payload but this coding is missing for StAX.&lt;/p&gt;

&lt;p&gt;The messages in question look like that:&lt;br/&gt;
&amp;lt;soap:Envelope xmlns:soap=&quot;http://schemas.xmlsoap.org/soap/envelope/&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot;&amp;gt;&lt;br/&gt;
  &amp;lt;soap:Body&amp;gt;&lt;br/&gt;
    &amp;lt;ns2:getTokenResponse xmlns:ns2=&quot;http://camel.apache.org/cxf/namespace&quot;&amp;gt;&lt;br/&gt;
      &amp;lt;return xsi:type=&quot;xs:string&quot;&amp;gt;Return Value&amp;lt;/return&amp;gt;&lt;br/&gt;
    &amp;lt;/ns2:getTokenResponse&amp;gt;&lt;br/&gt;
  &amp;lt;/soap:Body&amp;gt;&lt;br/&gt;
&amp;lt;/soap:Envelope&amp;gt;&lt;/p&gt;

&lt;p&gt;If the CxfPayload is converted to String it will lack the definition for the xsi namespace prefix (and further XML parsing will fail).&lt;/p&gt;</description>
                <environment></environment>
        <key id="13223130">CAMEL-13357</key>
            <summary>Regression - Namespaces defined on the SOAP envelope get lost in PAYLOAD mode</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ffang">Freeman Yue Fang</assignee>
                                    <reporter username="j_ri">Jochen Riedlinger</reporter>
                        <labels>
                    </labels>
                <created>Thu, 21 Mar 2019 16:30:32 +0000</created>
                <updated>Thu, 28 Mar 2019 12:36:52 +0000</updated>
                            <resolved>Thu, 28 Mar 2019 12:36:52 +0000</resolved>
                                                    <fixVersion>2.23.2</fixVersion>
                    <fixVersion>2.22.4</fixVersion>
                    <fixVersion>3.0.0</fixVersion>
                                    <component>camel-cxf</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16798249" author="j_ri" created="Thu, 21 Mar 2019 16:34:42 +0000"  >&lt;p&gt;exactly the decribed problem is still/again there in version camel-cxf-2.21.0&#160; (resp. camel-cxf-2.21.0.fuse-000077-redhat-1)&lt;/p&gt;

&lt;p&gt;I had to turn streaming off org.apache.camel.component.cxf.CxfEndpoint.setAllowStreaming(Boolean)&lt;/p&gt;

&lt;p&gt;so that my application works in PAYLOAD mode.&lt;/p&gt;</comment>
                            <comment id="16798270" author="dmvolod" created="Thu, 21 Mar 2019 17:01:20 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=j_ri&quot; class=&quot;user-hover&quot; rel=&quot;j_ri&quot;&gt;j_ri&lt;/a&gt;, do you have a simple test case for this issue?&lt;/p&gt;</comment>
                            <comment id="16798983" author="j_ri" created="Fri, 22 Mar 2019 12:48:57 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;I implemented a reproducer in my fork of the camel-examples.&lt;/p&gt;

&lt;p&gt;The reproducer is based on the &quot;camel-example-cxf-proxy&quot; example.&lt;/p&gt;

&lt;p&gt;Here it is:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/jochenr/camel/tree/Reproducer-CAMEL-13357/examples/camel-example-cxf-proxy&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/jochenr/camel/tree/Reproducer-CAMEL-13357/examples/camel-example-cxf-proxy&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;To test it, please send the XML from the following file(s) via Soap-UI to the service:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/jochenr/camel/blob/Reproducer-CAMEL-13357/examples/camel-example-cxf-proxy/src/test/resources/non-working-request.xml&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/jochenr/camel/blob/Reproducer-CAMEL-13357/examples/camel-example-cxf-proxy/src/test/resources/non-working-request.xml&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;https://github.com/jochenr/camel/blob/Reproducer-CAMEL-13357/examples/camel-example-cxf-proxy/src/test/resources/working-request.xml&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/jochenr/camel/blob/Reproducer-CAMEL-13357/examples/camel-example-cxf-proxy/src/test/resources/working-request.xml&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;1. does not work, while 2. works fine.&lt;/p&gt;

&lt;p&gt;If you compare the requests you see that 1. has the &quot;xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&quot; namespace in the Envelope, while 2. defines it within the body.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;If you change the option &quot;allowStreaming=true&quot; to false, you can see the request 1. also works.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;In my opinion 1. should also work, if streaming is enabled.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Best regards,&lt;br/&gt;
 Jochen&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;P.S.: Attached &quot;ReproducerException.log&quot; you find the exception log for comparison.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10020">
                    <name>Cloners</name>
                                            <outwardlinks description="is a clone of">
                                        <issuelink>
            <issuekey id="12821943">CAMEL-8663</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12827745">CXF-6394</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                            <outwardlinks description="breaks">
                                        <issuelink>
            <issuekey id="13096245">CAMEL-11681</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12963402" name="ReproducerException.log" size="5007" author="j_ri" created="Fri, 22 Mar 2019 13:27:32 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 34 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z00ygo:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>