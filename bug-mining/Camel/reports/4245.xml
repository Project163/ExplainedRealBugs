<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:25:32 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-11664] Split proceeds even if onPrepare throws Exception</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-11664</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;With the &lt;a href=&quot;http://camel.apache.org/splitter.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;splitter&lt;/a&gt; you can set an onPrepareRef to allow custom preprocessing.&lt;br/&gt;
If this processor fails with an exception, the splitting still proceeds leading to hard to track problems becuase the splitter receives messages that are not (or only partially) prepared! Even setting an exception does not let camel fail the split.&lt;/p&gt;

&lt;p&gt;If the prepare step fails camel should fail the split with the exception thrown from onPrepare.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13094095">CAMEL-11664</key>
            <summary>Split proceeds even if onPrepare throws Exception</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="laeubi">Christoph L&#228;ubrich</reporter>
                        <labels>
                    </labels>
                <created>Fri, 11 Aug 2017 13:04:57 +0000</created>
                <updated>Tue, 5 Sep 2017 17:15:59 +0000</updated>
                            <resolved>Tue, 5 Sep 2017 17:15:59 +0000</resolved>
                                    <version>2.16.2</version>
                                                    <component>camel-core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16152541" author="davsclaus" created="Mon, 4 Sep 2017 12:11:36 +0000"  >&lt;p&gt;You should use stopOnException to make it break out earlier.&lt;/p&gt;</comment>
                            <comment id="16152810" author="laeubi" created="Mon, 4 Sep 2017 17:19:18 +0000"  >&lt;p&gt;This don&apos;t fix it. If the prepare fails and the split fails it might break out but you have no idea why your prepare was never called since the exception is completely ommited!&lt;br/&gt;
In case where the missing onprepare does not lead to an exception in the split the split succeeds and is performed with wrong/unprepared data.&lt;br/&gt;
Think of a switch with a default case inside the split, the on prepare computes a value used in the switch.&lt;br/&gt;
If onPrepare fails, the splitt completely succeeds but always fall through to the default case without any notice. This is a real pain to debug and prone to unnoticed errors.&lt;/p&gt;

&lt;p&gt;Wha is it considered as &quot;not a problem&quot; when Camel silently ignores this case?&lt;/p&gt;</comment>
                            <comment id="16154010" author="davsclaus" created="Tue, 5 Sep 2017 17:15:52 +0000"  >&lt;p&gt;You are using an EOL version of Camel - try with latest. &lt;/p&gt;

&lt;p&gt;The stop on exception works for us, and we see the exception from the on prepare failure.&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/camel/commit/f9cdfeb8753fa7219f66fdf10249e22223a1bdf1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/commit/f9cdfeb8753fa7219f66fdf10249e22223a1bdf1&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 11 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3iozr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>