<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:09:09 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-8757] SO_TIMEOUT not really set on SFTP connections</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-8757</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;The documentation for the soTimeout parameter in the camel-ftp option says:&lt;br/&gt;
FTP and FTPS Only: Camel 2.4: Is the SocketOptions.SO_TIMEOUT value in millis. Note SFTP will automatic use the connectTimeout as the soTimeout.&lt;/p&gt;

&lt;p&gt;The last statement is unfortunately not entirely true. JSCH&apos;s Session.connect(int connectTimeout) method will initially set the SO_TIMEOUT of the underlying socket to connectTimeout, however once the connection phase is finished, it will change this value to the provided timeout value.&lt;/p&gt;

&lt;p&gt;We have an incredibly broken SFTP server. On that connections sometimes hang after the connect phase, which causes polling consumer endpoints to hang in a Socket.read() forever (which means that they stop polling).&lt;/p&gt;

&lt;p&gt;IMO the fix for that is twofold:&lt;br/&gt;
1. I attach a (trivial one-line) fix for the camel-ftp component, which will set the soTimeout parameter to the timeout parameter of the JSCH session.&lt;br/&gt;
2. Someone with the access rights should modify the camel-ftp documentation&lt;br/&gt;
3. It might make sense to set the default for the soTimeout parameter to something more sane than 0 (forever) but I don&apos;t do that in the patch (as it may change the existing behaviour).&lt;/p&gt;</description>
                <environment></environment>
        <key id="12828346">CAMEL-8757</key>
            <summary>SO_TIMEOUT not really set on SFTP connections</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="10001">Pending Closed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="siano">Stephan Siano</reporter>
                        <labels>
                    </labels>
                <created>Fri, 8 May 2015 12:36:42 +0000</created>
                <updated>Fri, 29 May 2015 11:10:14 +0000</updated>
                            <resolved>Wed, 13 May 2015 10:03:44 +0000</resolved>
                                    <version>2.14.2</version>
                    <version>2.15.2</version>
                    <version>2.16.0</version>
                                    <fixVersion>2.14.3</fixVersion>
                    <fixVersion>2.15.3</fixVersion>
                    <fixVersion>2.16.0</fixVersion>
                                    <component>camel-ftp</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14534442" author="siano" created="Fri, 8 May 2015 12:47:49 +0000"  >&lt;p&gt;One might discuss whether this is an extension or a bug. IMO at least the documentation is faulty, one could also consider the change itself an extension.&lt;/p&gt;</comment>
                            <comment id="14536295" author="davsclaus" created="Sat, 9 May 2015 08:25:29 +0000"  >&lt;p&gt;Thanks Stephan. Are you able  to edit the documentation yourself? If not I suggest you read this page, and get things setup so you can do this. We love help. Also the ICLA signing is needed for becoming a committer. So that is just a step closer towards that &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
&lt;a href=&quot;http://camel.apache.org/how-do-i-edit-the-website.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://camel.apache.org/how-do-i-edit-the-website.html&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14537607" author="siano" created="Mon, 11 May 2015 05:43:55 +0000"  >&lt;p&gt;On another thought I changed the patch a little. It might be better to move the session.setTimout() call into the createSession() method and add a comment.&lt;/p&gt;</comment>
                            <comment id="14537620" author="siano" created="Mon, 11 May 2015 05:59:41 +0000"  >&lt;p&gt;Hi Claus, &lt;br/&gt;
I am not able to edit the documentation. I will check the ICLA signing with my employer (but this may take some time because I have to find out how that process works first).&lt;/p&gt;

&lt;p&gt;There are some general questions remaining:&lt;br/&gt;
1. Does it make sense to set a general default for the soTimeout (e.g. 300000 (5 minutes))? This would change the behaviour for all endpoints, which is probably not so good (at least not in a patch). On the other hand having an SFTP (or FTP) poller that hangs forever on a stuck socket also doesn&apos;t make too much sense for me.&lt;br/&gt;
2. I am unsure about what is the best way to change the documentation. A potential approach would be:&lt;br/&gt;
a) remove the sentence &quot;Note SFTP will automatic use the connectTimeout as the soTimeout.&quot; now. It is not really true.&lt;br/&gt;
b) once the patch is applied and released change the documentation again, however, I am not sure what would be the best here:&lt;br/&gt;
&quot;FTP and FTPS Only: Camel 2.4, SFTP: Camel 2.14.3, 2.15.3: Is the SocketOptions.SO_TIMEOUT value in millis.&quot;?&lt;/p&gt;

&lt;p&gt;What do you think?&lt;br/&gt;
Stephan&lt;/p&gt;</comment>
                            <comment id="14541650" author="davsclaus" created="Wed, 13 May 2015 09:27:31 +0000"  >&lt;p&gt;Yeah had a deeper look and found that jsch session sets the timeout on SO socket too. So yeah lets apply your patch.&lt;br/&gt;
For a default value such as 300000, then we can do this from 2.16 onwards.&lt;/p&gt;</comment>
                            <comment id="14541674" author="davsclaus" created="Wed, 13 May 2015 10:03:44 +0000"  >&lt;p&gt;For setting a default value then please log a new JIRA and provide a patch.&lt;/p&gt;</comment>
                            <comment id="14564581" author="siano" created="Fri, 29 May 2015 11:10:14 +0000"  >&lt;p&gt;I created &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-8818&quot; title=&quot;Set default for SO_TIMEOUT in camel-ftp&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-8818&quot;&gt;&lt;del&gt;CAMEL-8818&lt;/del&gt;&lt;/a&gt; for that&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12731856" name="0001-CAMEL-8757-Set-soTimeout-on-SFTP-endpoints.patch" size="1144" author="siano" created="Mon, 11 May 2015 05:43:55 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 25 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2eh7j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>