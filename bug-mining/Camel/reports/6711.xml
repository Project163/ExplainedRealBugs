<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 11:05:16 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-20493] camel-core: concurrency issue copying headers</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-20493</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;It looks like under some rare circumstances the copy of message headers can suffer from concurrency issues. &lt;/p&gt;

&lt;p&gt;Please look at the attached log, extracted from an execution of the test JmsProducerConcurrentWithReplyTest. &lt;/p&gt;</description>
                <environment></environment>
        <key id="13570321">CAMEL-20493</key>
            <summary>camel-core: concurrency issue copying headers</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="orpiske">Otavio Rodolfo Piske</reporter>
                        <labels>
                    </labels>
                <created>Thu, 29 Feb 2024 13:00:58 +0000</created>
                <updated>Sun, 7 Jul 2024 19:16:54 +0000</updated>
                            <resolved>Tue, 2 Jul 2024 16:01:50 +0000</resolved>
                                    <version>4.0.3</version>
                    <version>4.4.0</version>
                    <version>4.5.0</version>
                                    <fixVersion>4.7.0</fixVersion>
                                    <component>camel-core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17831644" author="davsclaus" created="Thu, 28 Mar 2024 06:44:10 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/camel/pull/13598&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/13598&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17831646" author="davsclaus" created="Thu, 28 Mar 2024 06:47:08 +0000"  >&lt;p&gt;Merged PR so lets see if we have those test errors again.&lt;/p&gt;</comment>
                            <comment id="17832194" author="davsclaus" created="Fri, 29 Mar 2024 12:48:31 +0000"  >&lt;p&gt;It seems its still happening&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java.util.concurrent.ExecutionException: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[E6C440607012EA2-000000000000014B]
	at java.base/java.util.concurrent.FutureTask.report(FutureTask.java:122)
	at java.base/java.util.concurrent.FutureTask.get(FutureTask.java:205)
	at org.apache.camel.component.jms.JmsProducerConcurrentWithReplyTest.doSendMessages(JmsProducerConcurrentWithReplyTest.java:86)
	at org.apache.camel.component.jms.JmsProducerConcurrentWithReplyTest.testConcurrentProducers(JmsProducerConcurrentWithReplyTest.java:68)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at java.base/java.util.concurrent.RecursiveAction.exec(RecursiveAction.java:194)
	at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:373)
	at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1182)
	at java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1655)
	at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1622)
	at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:165)
Caused by: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[E6C440607012EA2-000000000000014B]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBody(DefaultProducerTemplate.java:414)
	at org.apache.camel.component.jms.JmsProducerConcurrentWithReplyTest.lambda$doSendMessages$0(JmsProducerConcurrentWithReplyTest.java:79)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:833)
Caused by: java.util.ConcurrentModificationException
	at java.base/java.util.TreeMap$PrivateEntryIterator.nextEntry(TreeMap.java:1486)
	at java.base/java.util.TreeMap$EntryIterator.next(TreeMap.java:1522)
	at java.base/java.util.TreeMap$EntryIterator.next(TreeMap.java:1517)
	at java.base/java.util.TreeMap.buildFromSorted(TreeMap.java:2879)
	at java.base/java.util.TreeMap.buildFromSorted(TreeMap.java:2871)
	at java.base/java.util.TreeMap.buildFromSorted(TreeMap.java:2828)
	at java.base/java.util.TreeMap.putAll(TreeMap.java:319)
	at org.apache.camel.support.MessageSupport.copyFromWithNewBody(MessageSupport.java:226)
	at org.apache.camel.support.processor.ConvertBodyProcessor.process(ConvertBodyProcessor.java:129)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$InternalCallback.done(SharedCamelInternalProcessor.java:268)
	at org.apache.camel.AsyncCallback.run(AsyncCallback.java:44)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.schedule(DefaultReactiveExecutor.java:54)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:443)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.done(RedeliveryErrorHandler.java:414)
	at org.apache.camel.component.jms.reply.ReplyManagerSupport.processReply(ReplyManagerSupport.java:223)
	at org.apache.camel.component.jms.reply.TemporaryQueueReplyHandler.onReply(TemporaryQueueReplyHandler.java:54)
	at org.apache.camel.component.jms.reply.TemporaryQueueReplyManager.handleReplyMessage(TemporaryQueueReplyManager.java:97)
	at org.apache.camel.component.jms.reply.ReplyManagerSupport.onMessage(ReplyManagerSupport.java:166)
	at org.springframework.jms.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:783)
	at org.springframework.jms.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:741)
	at org.springframework.jms.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:719)
	at org.springframework.jms.listener.AbstractPollingMessageListenerContainer.doReceiveAndExecute(AbstractPollingMessageListenerContainer.java:333)
	at org.springframework.jms.listener.AbstractPollingMessageListenerContainer.receiveAndExecute(AbstractPollingMessageListenerContainer.java:270)
	at org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.invokeListener(DefaultMessageListenerContainer.java:1257)
	at org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.executeOngoingLoop(DefaultMessageListenerContainer.java:1247)
	at org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.run(DefaultMessageListenerContainer.java:1140)
	... 1 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17835430" author="bocamel" created="Tue, 9 Apr 2024 14:03:17 +0000"  >&lt;p&gt;I am seeing a similar issue in 4.0.3, with a different stacktrace, not sure whether they are related:&lt;/p&gt;

&lt;p&gt;java.util.ConcurrentModificationException: null&lt;br/&gt;
&#160; &#160; at java.util.TreeMap$PrivateEntryIterator.nextEntry(TreeMap.java:1486) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;?:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
&#160; &#160; at java.util.TreeMap$EntryIterator.next(TreeMap.java:1522) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;?:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
&#160; &#160; at java.util.TreeMap$EntryIterator.next(TreeMap.java:1517) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;?:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
&#160; &#160; at java.util.TreeMap.buildFromSorted(TreeMap.java:2879) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;?:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
&#160; &#160; at java.util.TreeMap.buildFromSorted(TreeMap.java:2871) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;?:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
&#160; &#160; at java.util.TreeMap.buildFromSorted(TreeMap.java:2871) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;?:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
&#160; &#160; at java.util.TreeMap.buildFromSorted(TreeMap.java:2828) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;?:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
&#160; &#160; at java.util.TreeMap.putAll(TreeMap.java:319) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;?:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
&#160; &#160; at org.apache.camel.support.MessageSupport.copyFromWithNewBody(MessageSupport.java:231) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;camel-support-4.0.3.jar:4.0.3&amp;#93;&lt;/span&gt;&lt;br/&gt;
&#160; &#160; at org.apache.camel.support.MessageSupport.copyFrom(MessageSupport.java:193) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;camel-support-4.0.3.jar:4.0.3&amp;#93;&lt;/span&gt;&lt;br/&gt;
&#160; &#160; at org.apache.camel.support.ExchangeHelper.doCopyResults(ExchangeHelper.java:351) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;camel-support-4.0.3.jar:4.0.3&amp;#93;&lt;/span&gt;&lt;br/&gt;
&#160; &#160; at org.apache.camel.support.ExchangeHelper.copyResults(ExchangeHelper.java:331) ~&lt;span class=&quot;error&quot;&gt;&amp;#91;camel-support-4.0.3.jar:4.0.3&amp;#93;&lt;/span&gt;&lt;br/&gt;
&#160; &#160; at org.apache.camel.component.seda.SedaConsumer.doRun(SedaConsumer.java:188) &lt;span class=&quot;error&quot;&gt;&amp;#91;camel-seda-4.0.3.jar:4.0.3&amp;#93;&lt;/span&gt;&lt;br/&gt;
&#160; &#160; at org.apache.camel.component.seda.SedaConsumer.run(SedaConsumer.java:129) &lt;span class=&quot;error&quot;&gt;&amp;#91;camel-seda-4.0.3.jar:4.0.3&amp;#93;&lt;/span&gt;&lt;br/&gt;
&#160; &#160; at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136) &lt;span class=&quot;error&quot;&gt;&amp;#91;?:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
&#160; &#160; at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635) &lt;span class=&quot;error&quot;&gt;&amp;#91;?:?&amp;#93;&lt;/span&gt;&lt;br/&gt;
&#160; &#160; at java.lang.Thread.run(Thread.java:840) &lt;span class=&quot;error&quot;&gt;&amp;#91;?:?&amp;#93;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="17846641" author="davsclaus" created="Wed, 15 May 2024 13:53:23 +0000"  >&lt;p&gt;Today on main branch&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[ERROR] Tests run: 2, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 1.191 s &amp;lt;&amp;lt;&amp;lt; FAILURE! -- in org.apache.camel.component.jms.JmsProducerConcurrentWithReplyTest
[ERROR] org.apache.camel.component.jms.JmsProducerConcurrentWithReplyTest.testConcurrentProducers -- Time elapsed: 0.139 s &amp;lt;&amp;lt;&amp;lt; ERROR!
java.util.concurrent.ExecutionException: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[CF23C35CE9BBF3D-000000000000025A]
	at java.base/java.util.concurrent.FutureTask.report(FutureTask.java:122)
	at java.base/java.util.concurrent.FutureTask.get(FutureTask.java:205)
	at org.apache.camel.component.jms.JmsProducerConcurrentWithReplyTest.doSendMessages(JmsProducerConcurrentWithReplyTest.java:86)
	at org.apache.camel.component.jms.JmsProducerConcurrentWithReplyTest.testConcurrentProducers(JmsProducerConcurrentWithReplyTest.java:68)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at java.base/java.util.concurrent.RecursiveAction.exec(RecursiveAction.java:194)
	at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:373)
	at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1182)
	at java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1655)
	at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1622)
	at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:165)
Caused by: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[CF23C35CE9BBF3D-000000000000025A]
	at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)
	at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:677)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)
	at org.apache.camel.impl.engine.DefaultProducerTemplate.requestBody(DefaultProducerTemplate.java:414)
	at org.apache.camel.component.jms.JmsProducerConcurrentWithReplyTest.lambda$doSendMessages$0(JmsProducerConcurrentWithReplyTest.java:79)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
	at java.base/java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:833)
Caused by: java.util.ConcurrentModificationException
	at java.base/java.util.TreeMap$PrivateEntryIterator.nextEntry(TreeMap.java:1486)
	at java.base/java.util.TreeMap$EntryIterator.next(TreeMap.java:1522)
	at java.base/java.util.TreeMap$EntryIterator.next(TreeMap.java:1517)
	at java.base/java.util.TreeMap.buildFromSorted(TreeMap.java:2879)
	at java.base/java.util.TreeMap.buildFromSorted(TreeMap.java:2871)
	at java.base/java.util.TreeMap.buildFromSorted(TreeMap.java:2903)
	at java.base/java.util.TreeMap.buildFromSorted(TreeMap.java:2871)
	at java.base/java.util.TreeMap.buildFromSorted(TreeMap.java:2828)
	at java.base/java.util.TreeMap.putAll(TreeMap.java:319)
	at org.apache.camel.support.MessageSupport.copyFromWithNewBody(MessageSupport.java:226)
	at org.apache.camel.support.processor.ConvertBodyProcessor.process(ConvertBodyProcessor.java:129)
	at org.apache.camel.impl.engine.SharedCamelInternalProcessor$InternalCallback.done(SharedCamelInternalProcessor.java:216)
	at org.apache.camel.AsyncCallback.run(AsyncCallback.java:44)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.doRun(DefaultReactiveExecutor.java:199)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.executeReactiveWork(DefaultReactiveExecutor.java:189)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.tryExecuteReactiveWork(DefaultReactiveExecutor.java:166)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148)
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.schedule(DefaultReactiveExecutor.java:54)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:421)
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.done(RedeliveryErrorHandler.java:392)
	at org.apache.camel.component.jms.reply.ReplyManagerSupport.processReply(ReplyManagerSupport.java:222)
	at org.apache.camel.component.jms.reply.TemporaryQueueReplyHandler.onReply(TemporaryQueueReplyHandler.java:54)
	at org.apache.camel.component.jms.reply.TemporaryQueueReplyManager.handleReplyMessage(TemporaryQueueReplyManager.java:85)
	at org.apache.camel.component.jms.reply.ReplyManagerSupport.onMessage(ReplyManagerSupport.java:165)
	at org.springframework.jms.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:783)
	at org.springframework.jms.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:741)
	at org.springframework.jms.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:719)
	at org.springframework.jms.listener.AbstractPollingMessageListenerContainer.doReceiveAndExecute(AbstractPollingMessageListenerContainer.java:333)
	at org.springframework.jms.listener.AbstractPollingMessageListenerContainer.receiveAndExecute(AbstractPollingMessageListenerContainer.java:270)
	at org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.invokeListener(DefaultMessageListenerContainer.java:1257)
	at org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.executeOngoingLoop(DefaultMessageListenerContainer.java:1247)
	at org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.run(DefaultMessageListenerContainer.java:1140)
	... 1 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17846677" author="orpiske" created="Wed, 15 May 2024 15:19:03 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davsclaus&quot; class=&quot;user-hover&quot; rel=&quot;davsclaus&quot;&gt;davsclaus&lt;/a&gt; this one is on my TODO after I finish a webinar / talk I&apos;m working on (likely in ~2 weeks or so I&apos;ll be able to focus on this).&lt;/p&gt;</comment>
                            <comment id="17862423" author="davsclaus" created="Tue, 2 Jul 2024 12:24:41 +0000"  >&lt;p&gt;Okay so the JmsProducerConcurrentWithReplyTest was a bit wrong, so fixing the test makes it robust and there is no concurrency issue.&lt;/p&gt;</comment>
                            <comment id="17862427" author="orpiske" created="Tue, 2 Jul 2024 12:27:14 +0000"  >&lt;p&gt;I haven&apos;t seen this issue for a while, so I guess that&apos;s great news!&lt;/p&gt;</comment>
                            <comment id="17862428" author="davsclaus" created="Tue, 2 Jul 2024 12:28:39 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bocamel&quot; class=&quot;user-hover&quot; rel=&quot;bocamel&quot;&gt;bocamel&lt;/a&gt; have you seen this on newer Camel versions. And can you share more details about your use of seda, such as do you have multipleConsumers=true or concurrentConsumers &amp;gt; 1 or other concurrent settings enabled ?&lt;/p&gt;</comment>
                            <comment id="17862435" author="davsclaus" created="Tue, 2 Jul 2024 12:55:33 +0000"  >&lt;p&gt;Okay so I have seen that camel-seda should be improved to avoid that concurrency issue, as it does not need the copy and its done work should be done via async callbacks (&lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-20934&quot; title=&quot;camel-seda - Sending to consumers should use callback for completion work&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-20934&quot;&gt;&lt;del&gt;CAMEL-20934&lt;/del&gt;&lt;/a&gt;). This should fix the stacktrace from John Yin.&lt;/p&gt;</comment>
                            <comment id="17863622" author="bocamel" created="Sun, 7 Jul 2024 19:16:54 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davsclaus&quot; class=&quot;user-hover&quot; rel=&quot;davsclaus&quot;&gt;davsclaus&lt;/a&gt;, I cannot say it for sure whether this has happened with 4.4.0 (which we are using).&#160; We use concurrentConsumers=10.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13584489">CAMEL-20934</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="13067157" name="concurrency-issue.txt" size="5469" author="orpiske" created="Thu, 29 Feb 2024 13:01:13 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 18 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1np9s:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>