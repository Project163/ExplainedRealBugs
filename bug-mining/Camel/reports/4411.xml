<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:27:56 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-12081] XQuery NPE going from saxon 9.5 to 9.7 (upgraded camel from2.17.4-&gt; 2.20.1)</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-12081</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;Hi guys&lt;/p&gt;

&lt;p&gt;I think saxon went to 9.7 in camel 2.18 (could be 19). Anyway, I used the latest to illustrate my problem (2.20.1 at the time of writing)&lt;/p&gt;

&lt;p&gt;I have a routes that receive XML payloads which I then transform via xqueries. Inside these I use local functions for readability (read: it&apos;s the first thing I tried when solving my problem and it worked). &lt;/p&gt;

&lt;p&gt;Since saxon went to 9.7 I get a null pointer exception when an xquery containing a local function tries to process the XML.&lt;/p&gt;

&lt;p&gt;To demonstrate this, I have made a GitHub project:&lt;br/&gt;
&lt;a href=&quot;https://github.com/rannandale/xqueryIssue&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/rannandale/xqueryIssue&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;In the project I use two xqueries to transform the same source. &lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;One uses an inline for loop:&lt;br/&gt;
&amp;lt;o&amp;gt;&lt;br/&gt;
	&amp;lt;variables&amp;gt;
{for $v in /root/Data return $v/Name}
&lt;p&gt;&amp;lt;/variables&amp;gt;&lt;br/&gt;
&amp;lt;/o&amp;gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;One uses the local function style:&lt;br/&gt;
declare function local:loopMe($nodes)&lt;br/&gt;
{&lt;br/&gt;
   for $node in $nodes&lt;br/&gt;
    return &lt;br/&gt;
&amp;lt;variables&amp;gt;{$node/*:Name}&amp;lt;/variables&amp;gt;&lt;br/&gt;
};&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&amp;lt;o&amp;gt;&lt;/p&gt;
{local:loopMe(/root/Data)}
&lt;p&gt;&amp;lt;/o&amp;gt;&lt;/p&gt;

&lt;p&gt;The latter is the one that returns the NPE.&lt;/p&gt;

&lt;p&gt;I know I could probably go refactor all my xqueries to match the inline style, but I figured I&apos;d see if there is an issue here other than PEBKAC. They also get quite complex, so it&apos;s quite a bit of work.&lt;/p&gt;

&lt;p&gt;Thanks guys&lt;br/&gt;
Riaan&lt;/p&gt;
</description>
                <environment>&lt;p&gt;JDK 1.8.0_144. Windows 10 and Centos 7&lt;/p&gt;</environment>
        <key id="13124876">CAMEL-12081</key>
            <summary>XQuery NPE going from saxon 9.5 to 9.7 (upgraded camel from2.17.4-&gt; 2.20.1)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="10">Implemented</resolution>
                                        <assignee username="dmvolod">Dmitry Volodin</assignee>
                                    <reporter username="rannandale">Riaan Annandale</reporter>
                        <labels>
                    </labels>
                <created>Thu, 14 Dec 2017 06:06:19 +0000</created>
                <updated>Wed, 31 Jan 2018 06:43:55 +0000</updated>
                            <resolved>Fri, 15 Dec 2017 09:12:51 +0000</resolved>
                                    <version>2.20.1</version>
                                    <fixVersion>2.21.0</fixVersion>
                                    <component>camel-saxon</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="16290908" author="dmvolod" created="Thu, 14 Dec 2017 14:30:10 +0000"  >&lt;p&gt;This issue is related to saxon and not related to camel-saxon component implementation.&lt;br/&gt;
I&apos;ve checked provided test on top of the Camel 2.21.0-SNAPSHOT version and it&apos;s working correctly.&lt;br/&gt;
I will create a separate PR to update saxon to the version 9.8.0-6 on top of the Camel 2.20.2.&lt;/p&gt;</comment>
                            <comment id="16291045" author="githubbot" created="Thu, 14 Dec 2017 15:50:28 +0000"  >&lt;p&gt;dmvolod opened a new pull request #2148: &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12081&quot; title=&quot;XQuery NPE going from saxon 9.5 to 9.7 (upgraded camel from2.17.4-&amp;gt; 2.20.1)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12081&quot;&gt;&lt;del&gt;CAMEL-12081&lt;/del&gt;&lt;/a&gt;: Cherry-pick commits which are updating saxon from 9.7 to 9.8&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/camel/pull/2148&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2148&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   This issue is related to saxon and not related to camel-saxon component implementation.&lt;br/&gt;
   I&apos;ve checked provided test on top of the Camel 2.21.0-SNAPSHOT version and it&apos;s working correctly.&lt;br/&gt;
   This PR is created to update saxon to the version 9.8.0-6 on top of the Camel 2.20.2.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16291046" author="githubbot" created="Thu, 14 Dec 2017 15:50:29 +0000"  >&lt;p&gt;GitHub user dmvolod opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/2148&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2148&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12081&quot; title=&quot;XQuery NPE going from saxon 9.5 to 9.7 (upgraded camel from2.17.4-&amp;gt; 2.20.1)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12081&quot;&gt;&lt;del&gt;CAMEL-12081&lt;/del&gt;&lt;/a&gt;: Cherry-pick commits which are updating saxon from 9.7 to 9.8&lt;/p&gt;

&lt;p&gt;    This issue is related to saxon and not related to camel-saxon component implementation.&lt;br/&gt;
    I&apos;ve checked provided test on top of the Camel 2.21.0-SNAPSHOT version and it&apos;s working correctly.&lt;br/&gt;
    This PR is created to update saxon to the version 9.8.0-6 on top of the Camel 2.20.2.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/dmvolod/camel&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/dmvolod/camel&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12081&quot; title=&quot;XQuery NPE going from saxon 9.5 to 9.7 (upgraded camel from2.17.4-&amp;gt; 2.20.1)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12081&quot;&gt;&lt;del&gt;CAMEL-12081&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/2148.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2148.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #2148&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 76154f3d3b05e469d8ca3da562e2659b760adc56&lt;br/&gt;
Author: Andrea Cosentino &amp;lt;ancosen@gmail.com&amp;gt;&lt;br/&gt;
Date:   2017-11-23T11:49:07Z&lt;/p&gt;

&lt;p&gt;    Upgrade Saxon and related bundle to version 9.8.0-5 and regen&lt;/p&gt;

&lt;p&gt;commit 5bb67b5c9d3d3c176f5e438bd9e033e2af54435a&lt;br/&gt;
Author: Andrea Cosentino &amp;lt;ancosen@gmail.com&amp;gt;&lt;br/&gt;
Date:   2017-12-05T07:31:10Z&lt;/p&gt;

&lt;p&gt;    Upgrade Saxon and related bundle to version 9.8.0-6&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16291571" author="githubbot" created="Thu, 14 Dec 2017 20:35:43 +0000"  >&lt;p&gt;davsclaus commented on issue #2148: &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12081&quot; title=&quot;XQuery NPE going from saxon 9.5 to 9.7 (upgraded camel from2.17.4-&amp;gt; 2.20.1)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12081&quot;&gt;&lt;del&gt;CAMEL-12081&lt;/del&gt;&lt;/a&gt;: Cherry-pick commits which are updating saxon from 9.7 to 9.8&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/camel/pull/2148#issuecomment-351828513&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2148#issuecomment-351828513&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Hmm this is good and bad at the same time. Because doing a non-patch upgrade on a patch branch is not always so good. What if it breaks other things. That user whom had a problem can just wait for Camel 2.21 to upgrade, or upgrade saxon himself.&lt;/p&gt;



&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16292139" author="githubbot" created="Fri, 15 Dec 2017 07:28:40 +0000"  >&lt;p&gt;dmvolod commented on issue #2148: &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12081&quot; title=&quot;XQuery NPE going from saxon 9.5 to 9.7 (upgraded camel from2.17.4-&amp;gt; 2.20.1)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12081&quot;&gt;&lt;del&gt;CAMEL-12081&lt;/del&gt;&lt;/a&gt;: Cherry-pick commits which are updating saxon from 9.7 to 9.8&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/camel/pull/2148#issuecomment-351933627&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2148#issuecomment-351933627&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Ok, let&apos;s keep patch without non-patch updates. PR closed.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16292140" author="githubbot" created="Fri, 15 Dec 2017 07:28:41 +0000"  >&lt;p&gt;dmvolod closed pull request #2148: &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12081&quot; title=&quot;XQuery NPE going from saxon 9.5 to 9.7 (upgraded camel from2.17.4-&amp;gt; 2.20.1)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12081&quot;&gt;&lt;del&gt;CAMEL-12081&lt;/del&gt;&lt;/a&gt;: Cherry-pick commits which are updating saxon from 9.7 to 9.8&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/camel/pull/2148&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2148&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/components/camel-saxon/src/test/resources/org/apache/camel/component/xslt/terminate.xsl b/components/camel-saxon/src/test/resources/org/apache/camel/component/xslt/terminate.xsl&lt;br/&gt;
index d4d986049ea..eadebe811a4 100644&lt;br/&gt;
&amp;#8212; a/components/camel-saxon/src/test/resources/org/apache/camel/component/xslt/terminate.xsl&lt;br/&gt;
+++ b/components/camel-saxon/src/test/resources/org/apache/camel/component/xslt/terminate.xsl&lt;br/&gt;
@@ -15,7 +15,7 @@&lt;br/&gt;
   See the License for the specific language governing permissions and&lt;br/&gt;
   limitations under the License.&lt;br/&gt;
 --&amp;gt;&lt;br/&gt;
-&amp;lt;xsl:stylesheet version=&quot;1.0&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;&amp;gt;&lt;br/&gt;
+&amp;lt;xsl:stylesheet version=&quot;2.0&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;&amp;gt;&lt;/p&gt;

&lt;p&gt;   &amp;lt;xsl:template match=&quot;/&quot;&amp;gt;&lt;br/&gt;
     &amp;lt;html&amp;gt;&lt;br/&gt;
diff --git a/components/camel-saxon/src/test/resources/org/apache/camel/component/xslt/transform.xsl b/components/camel-saxon/src/test/resources/org/apache/camel/component/xslt/transform.xsl&lt;br/&gt;
index fea1e639f7c..3b2651a809b 100644&lt;br/&gt;
&amp;#8212; a/components/camel-saxon/src/test/resources/org/apache/camel/component/xslt/transform.xsl&lt;br/&gt;
+++ b/components/camel-saxon/src/test/resources/org/apache/camel/component/xslt/transform.xsl&lt;br/&gt;
@@ -17,7 +17,7 @@&lt;br/&gt;
 --&amp;gt;&lt;br/&gt;
 &amp;lt;xsl:stylesheet&lt;br/&gt;
   xmlns:xsl=&apos;http://www.w3.org/1999/XSL/Transform&apos;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;version=&apos;1.0&apos;&amp;gt;&lt;br/&gt;
+  version=&apos;2.0&apos;&amp;gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;   &amp;lt;xsl:output method=&quot;xml&quot; indent=&quot;yes&quot; encoding=&quot;ISO-8859-1&quot;/&amp;gt;&lt;/p&gt;

&lt;p&gt;diff --git a/components/camel-saxon/src/test/resources/org/apache/camel/component/xslt/transform_dtd.xsl b/components/camel-saxon/src/test/resources/org/apache/camel/component/xslt/transform_dtd.xsl&lt;br/&gt;
index 1ad29bd6964..96cb5ae8f3b 100644&lt;br/&gt;
&amp;#8212; a/components/camel-saxon/src/test/resources/org/apache/camel/component/xslt/transform_dtd.xsl&lt;br/&gt;
+++ b/components/camel-saxon/src/test/resources/org/apache/camel/component/xslt/transform_dtd.xsl&lt;br/&gt;
@@ -17,7 +17,7 @@&lt;br/&gt;
 --&amp;gt;&lt;br/&gt;
 &amp;lt;xsl:stylesheet&lt;br/&gt;
   xmlns:xsl=&apos;http://www.w3.org/1999/XSL/Transform&apos;&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;version=&apos;1.0&apos;&amp;gt;&lt;br/&gt;
+  version=&apos;2.0&apos;&amp;gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;   &amp;lt;xsl:output method=&quot;xml&quot; indent=&quot;yes&quot; encoding=&quot;ISO-8859-1&quot;/&amp;gt;&lt;/p&gt;

&lt;p&gt;diff --git a/components/camel-saxon/src/test/resources/org/apache/camel/component/xslt/transform_includes_data.xsl b/components/camel-saxon/src/test/resources/org/apache/camel/component/xslt/transform_includes_data.xsl&lt;br/&gt;
index 610ab3a2a8d..bf9eca26a2a 100644&lt;br/&gt;
&amp;#8212; a/components/camel-saxon/src/test/resources/org/apache/camel/component/xslt/transform_includes_data.xsl&lt;br/&gt;
+++ b/components/camel-saxon/src/test/resources/org/apache/camel/component/xslt/transform_includes_data.xsl&lt;br/&gt;
@@ -15,7 +15,7 @@&lt;br/&gt;
     See the License for the specific language governing permissions and&lt;br/&gt;
     limitations under the License.&lt;br/&gt;
 --&amp;gt;&lt;br/&gt;
-&amp;lt;xsl:stylesheet xmlns:date=&quot;http://exslt.org/dates-and-times&quot; version=&quot;1.1&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;&amp;gt;&lt;br/&gt;
+&amp;lt;xsl:stylesheet xmlns:date=&quot;http://exslt.org/dates-and-times&quot; version=&quot;2.0&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;&amp;gt;&lt;br/&gt;
     &amp;lt;date:months&amp;gt;&lt;br/&gt;
         &amp;lt;date:month length=&quot;31&quot; abbr=&quot;Jan&quot;&amp;gt;January&amp;lt;/date:month&amp;gt;&lt;br/&gt;
         &amp;lt;date:month length=&quot;28&quot; abbr=&quot;Feb&quot;&amp;gt;February&amp;lt;/date:month&amp;gt;&lt;br/&gt;
diff --git a/components/camel-saxon/src/test/resources/org/apache/camel/component/xslt/transform_text.xsl b/components/camel-saxon/src/test/resources/org/apache/camel/component/xslt/transform_text.xsl&lt;br/&gt;
index 6c38e4a4184..e8de2fe2287 100644&lt;br/&gt;
&amp;#8212; a/components/camel-saxon/src/test/resources/org/apache/camel/component/xslt/transform_text.xsl&lt;br/&gt;
+++ b/components/camel-saxon/src/test/resources/org/apache/camel/component/xslt/transform_text.xsl&lt;br/&gt;
@@ -15,7 +15,7 @@&lt;br/&gt;
     See the License for the specific language governing permissions and&lt;br/&gt;
     limitations under the License.&lt;br/&gt;
 --&amp;gt;&lt;br/&gt;
-&amp;lt;xsl:stylesheet version=&quot;1.0&quot;&lt;br/&gt;
+&amp;lt;xsl:stylesheet version=&quot;1.1&quot;&lt;br/&gt;
  xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;           &lt;br/&gt;
  xmlns:date=&quot;http://xml.apache.org/xalan/java/java.util.Date&quot;&lt;br/&gt;
  xmlns:rt=&quot;http://xml.apache.org/xalan/java/java.lang.Runtime&quot;&lt;br/&gt;
diff --git a/components/camel-saxon/src/test/resources/org/apache/camel/component/xslt/transform_text_imported.xsl b/components/camel-saxon/src/test/resources/org/apache/camel/component/xslt/transform_text_imported.xsl&lt;br/&gt;
index e7ae4b051da..931cf0ee8d7 100644&lt;br/&gt;
&amp;#8212; a/components/camel-saxon/src/test/resources/org/apache/camel/component/xslt/transform_text_imported.xsl&lt;br/&gt;
+++ b/components/camel-saxon/src/test/resources/org/apache/camel/component/xslt/transform_text_imported.xsl&lt;br/&gt;
@@ -15,7 +15,7 @@&lt;br/&gt;
     See the License for the specific language governing permissions and&lt;br/&gt;
     limitations under the License.&lt;br/&gt;
 --&amp;gt;&lt;br/&gt;
-&amp;lt;xsl:stylesheet version=&quot;1.0&quot;&lt;br/&gt;
+&amp;lt;xsl:stylesheet version=&quot;2.0&quot;&lt;br/&gt;
  xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;&amp;gt;&lt;/p&gt;

&lt;p&gt;  &amp;lt;xsl:import href=&quot;transform_text.xsl&quot;/&amp;gt;&lt;br/&gt;
diff --git a/components/camel-saxon/src/test/resources/org/apache/camel/util/toolbox/aggregate-user-property.xsl b/components/camel-saxon/src/test/resources/org/apache/camel/util/toolbox/aggregate-user-property.xsl&lt;br/&gt;
index 74bdd857fbc..75404db7dc5 100644&lt;br/&gt;
&amp;#8212; a/components/camel-saxon/src/test/resources/org/apache/camel/util/toolbox/aggregate-user-property.xsl&lt;br/&gt;
+++ b/components/camel-saxon/src/test/resources/org/apache/camel/util/toolbox/aggregate-user-property.xsl&lt;br/&gt;
@@ -15,7 +15,7 @@&lt;br/&gt;
     See the License for the specific language governing permissions and&lt;br/&gt;
     limitations under the License.&lt;br/&gt;
 --&amp;gt;&lt;br/&gt;
-&amp;lt;xsl:stylesheet version=&quot;1.0&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;&amp;gt;&lt;br/&gt;
+&amp;lt;xsl:stylesheet version=&quot;2.0&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;&amp;gt;&lt;/p&gt;

&lt;p&gt;     &amp;lt;xsl:output method=&quot;xml&quot; indent=&quot;no&quot;/&amp;gt;&lt;br/&gt;
     &amp;lt;xsl:strip-space elements=&quot;*&quot;/&amp;gt;&lt;br/&gt;
diff --git a/components/camel-saxon/src/test/resources/org/apache/camel/util/toolbox/aggregate.xsl b/components/camel-saxon/src/test/resources/org/apache/camel/util/toolbox/aggregate.xsl&lt;br/&gt;
index 8d20385a04f..8f6612e6106 100644&lt;br/&gt;
&amp;#8212; a/components/camel-saxon/src/test/resources/org/apache/camel/util/toolbox/aggregate.xsl&lt;br/&gt;
+++ b/components/camel-saxon/src/test/resources/org/apache/camel/util/toolbox/aggregate.xsl&lt;br/&gt;
@@ -15,7 +15,7 @@&lt;br/&gt;
     See the License for the specific language governing permissions and&lt;br/&gt;
     limitations under the License.&lt;br/&gt;
 --&amp;gt;&lt;br/&gt;
-&amp;lt;xsl:stylesheet version=&quot;1.0&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;&amp;gt;&lt;br/&gt;
+&amp;lt;xsl:stylesheet version=&quot;2.0&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;&amp;gt;&lt;/p&gt;

&lt;p&gt;     &amp;lt;xsl:output method=&quot;xml&quot; indent=&quot;no&quot;/&amp;gt;&lt;br/&gt;
     &amp;lt;xsl:strip-space elements=&quot;*&quot;/&amp;gt;&lt;br/&gt;
diff --git a/components/camel-schematron/src/main/resources/iso-schematron-xslt2/ExtractSchFromXSD-2.xsl b/components/camel-schematron/src/main/resources/iso-schematron-xslt2/ExtractSchFromXSD-2.xsl&lt;br/&gt;
index 39a21e2529b..47d4804f7ef 100644&lt;br/&gt;
&amp;#8212; a/components/camel-schematron/src/main/resources/iso-schematron-xslt2/ExtractSchFromXSD-2.xsl&lt;br/&gt;
+++ b/components/camel-schematron/src/main/resources/iso-schematron-xslt2/ExtractSchFromXSD-2.xsl&lt;br/&gt;
@@ -54,7 +54,7 @@ LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,&lt;br/&gt;
 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN&lt;br/&gt;
 THE SOFTWARE.&lt;br/&gt;
 --&amp;gt;&lt;br/&gt;
-&amp;lt;xsl:transform version=&quot;1.0&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; &lt;br/&gt;
+&amp;lt;xsl:transform version=&quot;2.0&quot; xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; &lt;br/&gt;
 xmlns:sch=&quot;http://purl.oclc.org/dsdl/schematron&quot; xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot;&amp;gt;&lt;br/&gt;
         &amp;lt;!-- Set the output to be XML with an XML declaration and use indentation --&amp;gt;&lt;br/&gt;
         &amp;lt;xsl:output method=&quot;xml&quot; omit-xml-declaration=&quot;no&quot; indent=&quot;yes&quot; standalone=&quot;yes&quot;/&amp;gt;&lt;br/&gt;
diff --git a/components/camel-schematron/src/main/resources/iso-schematron-xslt2/iso_abstract_expand.xsl b/components/camel-schematron/src/main/resources/iso-schematron-xslt2/iso_abstract_expand.xsl&lt;br/&gt;
index bdf6d9c19a3..8229d658ba0 100644&lt;br/&gt;
&amp;#8212; a/components/camel-schematron/src/main/resources/iso-schematron-xslt2/iso_abstract_expand.xsl&lt;br/&gt;
+++ b/components/camel-schematron/src/main/resources/iso-schematron-xslt2/iso_abstract_expand.xsl&lt;br/&gt;
@@ -93,7 +93,7 @@ VERSION INFORMATION&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Original written for old namespace&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://www.topologi.com/resources/iso-pre-pro.xsl&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.topologi.com/resources/iso-pre-pro.xsl&lt;/a&gt;&lt;br/&gt;
 --&amp;gt;	&lt;br/&gt;
-&amp;lt;xslt:stylesheet version=&quot;1.0&quot; xmlns:xslt=&quot;http://www.w3.org/1999/XSL/Transform&quot; &lt;br/&gt;
+&amp;lt;xslt:stylesheet version=&quot;2.0&quot; xmlns:xslt=&quot;http://www.w3.org/1999/XSL/Transform&quot; &lt;br/&gt;
 	xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot; &lt;br/&gt;
     xmlns:iso=&quot;http://purl.oclc.org/dsdl/schematron&quot;  &lt;br/&gt;
     xmlns:nvdl=&quot;http://purl.oclc.org/dsdl/nvdl&quot;  &lt;br/&gt;
diff --git a/components/camel-schematron/src/main/resources/iso-schematron-xslt2/iso_dsdl_include.xsl b/components/camel-schematron/src/main/resources/iso-schematron-xslt2/iso_dsdl_include.xsl&lt;br/&gt;
index ded219d6284..10c4b03bf5d 100644
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;a/components/camel-schematron/src/main/resources/iso-schematron-xslt2/iso_dsdl_include.xsl&lt;br/&gt;
+++ b/components/camel-schematron/src/main/resources/iso-schematron-xslt2/iso_dsdl_include.xsl&lt;br/&gt;
@@ -126,7 +126,7 @@ THE SOFTWARE.&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;RJ New&lt;br/&gt;
 --&amp;gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;-&amp;lt;xslt:stylesheet version=&quot;1.0&quot;&lt;br/&gt;
+&amp;lt;xslt:stylesheet version=&quot;2.0&quot;&lt;br/&gt;
 	xmlns:xslt=&quot;http://www.w3.org/1999/XSL/Transform&quot;&lt;br/&gt;
 	xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;&lt;br/&gt;
 	xmlns:iso=&quot;http://purl.oclc.org/dsdl/schematron&quot;&lt;br/&gt;
diff --git a/components/camel-schematron/src/main/resources/iso-schematron-xslt2/iso_svrl_for_xslt2.xsl b/components/camel-schematron/src/main/resources/iso-schematron-xslt2/iso_svrl_for_xslt2.xsl&lt;br/&gt;
index 28fb87e75b6..51c1ee7c757 100644&lt;br/&gt;
&amp;#8212; a/components/camel-schematron/src/main/resources/iso-schematron-xslt2/iso_svrl_for_xslt2.xsl&lt;br/&gt;
+++ b/components/camel-schematron/src/main/resources/iso-schematron-xslt2/iso_svrl_for_xslt2.xsl&lt;br/&gt;
@@ -163,7 +163,7 @@ THE SOFTWARE.&lt;br/&gt;
 --&amp;gt;&lt;/p&gt;

&lt;p&gt; &amp;lt;xsl:stylesheet&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;version=&quot;1.0&quot;&lt;br/&gt;
+   version=&quot;2.0&quot;&lt;br/&gt;
    xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;&lt;br/&gt;
 	xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot;&lt;br/&gt;
    xmlns:axsl=&quot;http://www.w3.org/1999/XSL/TransformAlias&quot;&lt;br/&gt;
diff --git a/parent/pom.xml b/parent/pom.xml&lt;br/&gt;
index d9bc60b68ac..acbdeb95ee7 100644
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;a/parent/pom.xml&lt;br/&gt;
+++ b/parent/pom.xml&lt;br/&gt;
@@ -593,8 +593,8 @@&lt;br/&gt;
     &amp;lt;rxjava-version&amp;gt;1.3.4&amp;lt;/rxjava-version&amp;gt;&lt;br/&gt;
     &amp;lt;rxjava2-version&amp;gt;2.1.7&amp;lt;/rxjava2-version&amp;gt;&lt;br/&gt;
     &amp;lt;saaj-impl-version&amp;gt;1.3.2_2&amp;lt;/saaj-impl-version&amp;gt;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;&amp;lt;saxon-bundle-version&amp;gt;9.7.0-18_1&amp;lt;/saxon-bundle-version&amp;gt;&lt;/li&gt;
	&lt;li&gt;&amp;lt;saxon-version&amp;gt;9.7.0-18&amp;lt;/saxon-version&amp;gt;&lt;br/&gt;
+    &amp;lt;saxon-bundle-version&amp;gt;9.8.0-6_1&amp;lt;/saxon-bundle-version&amp;gt;&lt;br/&gt;
+    &amp;lt;saxon-version&amp;gt;9.8.0-6&amp;lt;/saxon-version&amp;gt;&lt;br/&gt;
     &amp;lt;scala-version&amp;gt;2.11.7&amp;lt;/scala-version&amp;gt;&lt;br/&gt;
     &amp;lt;scala-maven-plugin-version&amp;gt;3.2.2&amp;lt;/scala-maven-plugin-version&amp;gt;&lt;br/&gt;
     &amp;lt;scalatest-version&amp;gt;2.2.5&amp;lt;/scalatest-version&amp;gt;&lt;br/&gt;
@@ -774,7 +774,7 @@&lt;br/&gt;
       org.mortbay.cometd.*;version=&quot;[6.1,7)&quot;,&lt;br/&gt;
       org.slf4j.*;version=&quot;[1.7,2)&quot;,&lt;br/&gt;
       net.sf.flatpack.*;version=&quot;[3.1.1,4)&quot;,&lt;/li&gt;
	&lt;li&gt;net.sf.saxon.*;version=&quot;[9.7.0,9.8)&quot;,&lt;br/&gt;
+      net.sf.saxon.*;version=&quot;[9.8.0,9.9)&quot;,&lt;br/&gt;
       freemarker.*;version=&quot;[2.3.15,3)&quot;,&lt;br/&gt;
       javax.persistence.*;version=&quot;[1.1,3)&quot;,&lt;br/&gt;
       org.apache.lucene.*;version=&quot;${lucene-version-range}&quot;,&lt;br/&gt;
diff --git a/platforms/spring-boot/spring-boot-dm/camel-spring-boot-dependencies/pom.xml b/platforms/spring-boot/spring-boot-dm/camel-spring-boot-dependencies/pom.xml&lt;br/&gt;
index f3dde809689..b837c6e831e 100644
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;a/platforms/spring-boot/spring-boot-dm/camel-spring-boot-dependencies/pom.xml&lt;br/&gt;
+++ b/platforms/spring-boot/spring-boot-dm/camel-spring-boot-dependencies/pom.xml&lt;br/&gt;
@@ -179,7 +179,7 @@&lt;br/&gt;
       &amp;lt;dependency&amp;gt;&lt;br/&gt;
         &amp;lt;groupId&amp;gt;net.sf.saxon&amp;lt;/groupId&amp;gt;&lt;br/&gt;
         &amp;lt;artifactId&amp;gt;Saxon-HE&amp;lt;/artifactId&amp;gt;&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
	&lt;li&gt;&amp;lt;version&amp;gt;9.7.0-18&amp;lt;/version&amp;gt;&lt;br/&gt;
+        &amp;lt;version&amp;gt;9.8.0-5&amp;lt;/version&amp;gt;&lt;br/&gt;
       &amp;lt;/dependency&amp;gt;&lt;br/&gt;
       &amp;lt;dependency&amp;gt;&lt;br/&gt;
         &amp;lt;groupId&amp;gt;ognl&amp;lt;/groupId&amp;gt;&lt;/li&gt;
&lt;/ul&gt;





&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16292141" author="githubbot" created="Fri, 15 Dec 2017 07:28:42 +0000"  >&lt;p&gt;Github user dmvolod closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/2148&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2148&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16345885" author="githubbot" created="Tue, 30 Jan 2018 22:01:35 +0000"  >&lt;p&gt;GitHub user catoaune opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/2202&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2202&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Update xquery-component.adoc&lt;/p&gt;

&lt;p&gt;    It took me quite a while to figure out that custom functions in Camel 2.18, 2.19 and 2.20 could result in a NullPointerException, so I think it could save others some time and frustration if there is a note like the one i propose in the documentation. I can not for sure promise that this will work in 2.21, but based on the discussions in PR &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12081&quot; title=&quot;XQuery NPE going from saxon 9.5 to 9.7 (upgraded camel from2.17.4-&amp;gt; 2.20.1)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12081&quot;&gt;&lt;del&gt;CAMEL-12081&lt;/del&gt;&lt;/a&gt;, it looks like it will be fixed there.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/catoaune/camel&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/catoaune/camel&lt;/a&gt; patch-1&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/2202.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2202.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #2202&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit a6157a541ca209799bfabdd7bf8e82e7b46fe161&lt;br/&gt;
Author: Cato Aune &amp;lt;cato.aune@...&amp;gt;&lt;br/&gt;
Date:   2018-01-30T22:00:42Z&lt;/p&gt;

&lt;p&gt;    Update xquery-component.adoc&lt;/p&gt;

&lt;p&gt;    It took me quite a while to figure out that custom functions in Camel 2.18, 2.19 and 2.20 could result in a NullPointerException, so I think it could save others some time and frustration if there is a note like the one i propose in the documentation. I can not for sure promise that this will work in 2.21, but based on the discussions in PR &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12081&quot; title=&quot;XQuery NPE going from saxon 9.5 to 9.7 (upgraded camel from2.17.4-&amp;gt; 2.20.1)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12081&quot;&gt;&lt;del&gt;CAMEL-12081&lt;/del&gt;&lt;/a&gt;, it looks like it will be fixed there.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16346336" author="githubbot" created="Wed, 31 Jan 2018 06:43:55 +0000"  >&lt;p&gt;Github user oscerd closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/2202&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2202&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 42 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3nw47:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>