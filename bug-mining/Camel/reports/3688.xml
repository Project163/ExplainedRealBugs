<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:16:56 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-9968] camel restlet not populating body form parameters correctly for x-www-form-urlencoded</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-9968</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;Currently for x-www-form-urlencoded post request camel puts the body into a form key with a null value:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; ((Method.PUT == method || Method.POST == method) &amp;amp;&amp;amp; MediaType.APPLICATION_WWW_FORM.equals(mediaType, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;)) {
            form = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Form();
            &lt;span class=&quot;code-comment&quot;&gt;// must use string based &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; forms
&lt;/span&gt;            &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; body = exchange.getIn().getBody(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;.class);
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (body != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
                form.add(body, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
            }
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Which results in a body like this:&lt;/p&gt;

&lt;p&gt;name=jay&amp;amp;password=secret&lt;/p&gt;

&lt;p&gt;ending up with a form parameter looking like this: &lt;br/&gt;
name%3Djay%26password%3Dsecret=null&lt;/p&gt;


&lt;p&gt;I think something like this should be used to correctly set the key values.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; ((Method.PUT == method || Method.POST == method) &amp;amp;&amp;amp; MediaType.APPLICATION_WWW_FORM.equals(mediaType, &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;)) {
            form = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Form();
            &lt;span class=&quot;code-comment&quot;&gt;// must use string based &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; forms
&lt;/span&gt;            &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; body = exchange.getIn().getBody(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;.class);
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (body != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
                List&amp;lt;NameValuePair&amp;gt; pairs = URLEncodedUtils.parse(body, Charset.forName(&lt;span class=&quot;code-quote&quot;&gt;&quot;UTF-8&quot;&lt;/span&gt;));
                &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;(NameValuePair p : pairs){
                	form.add(p.getName(), p.getValue());
                }
            }
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12969685">CAMEL-9968</key>
            <summary>camel restlet not populating body form parameters correctly for x-www-form-urlencoded</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="jmandawg">Jay mann</reporter>
                        <labels>
                    </labels>
                <created>Fri, 13 May 2016 22:49:24 +0000</created>
                <updated>Fri, 20 May 2016 05:07:47 +0000</updated>
                            <resolved>Fri, 20 May 2016 05:07:47 +0000</resolved>
                                    <version>2.17.1</version>
                                    <fixVersion>2.17.2</fixVersion>
                    <fixVersion>2.18.0</fixVersion>
                                    <component>camel-restlet</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15283815" author="davsclaus" created="Sun, 15 May 2016 08:28:19 +0000"  >&lt;p&gt;Are you able to work on a patch / PR to fix this?&lt;/p&gt;</comment>
                            <comment id="15283825" author="jmandawg" created="Sun, 15 May 2016 11:33:55 +0000"  >&lt;p&gt;Yes if this solution looks good to you.  I&apos;m not sure if there is a better way to determine the charset othere than to just hard code it.   &lt;/p&gt;</comment>
                            <comment id="15284232" author="davsclaus" created="Mon, 16 May 2016 07:38:00 +0000"  >&lt;p&gt;Yeah you can get the charset from the current exchange using&lt;/p&gt;

&lt;p&gt;org.apache.camel.util.IOHelper#getCharsetName(org.apache.camel.Exchange, boolean)&lt;/p&gt;

&lt;p&gt;And if you pass in true as the boolean you will use the JVM platform default charset as fallback.&lt;/p&gt;</comment>
                            <comment id="15286405" author="aldrine.einsteen" created="Tue, 17 May 2016 11:03:42 +0000"  >&lt;p&gt;Hi Jay and Claus,&lt;/p&gt;

&lt;p&gt;Is this issue still open? If not can I submit a patch?&lt;/p&gt;</comment>
                            <comment id="15286413" author="aldrine.einsteen" created="Tue, 17 May 2016 11:16:51 +0000"  >&lt;p&gt;The following worked:&lt;br/&gt;
        // Use forms only for PUT, POST and x-www-form-urlencoded&lt;br/&gt;
        if ((Method.PUT == method || Method.POST == method) &amp;amp;&amp;amp; MediaType.APPLICATION_WWW_FORM.equals(mediaType, true)) {&lt;br/&gt;
            form = new Form();&lt;br/&gt;
            // must use string based for forms&lt;br/&gt;
            String body = exchange.getIn().getBody(String.class);&lt;br/&gt;
            if (body != null) {&lt;br/&gt;
                List&amp;lt;NameValuePair&amp;gt; nameValuePairs = URLEncodedUtils.parse(body, Charset.forName(IOHelper.getCharsetName(exchange)));&lt;br/&gt;
                for (NameValuePair nameValuePair : nameValuePairs) &lt;/p&gt;
{
                    form.add(nameValuePair.getName(), nameValuePair.getValue());
                }
&lt;p&gt;            }&lt;br/&gt;
        }&lt;/p&gt;</comment>
                            <comment id="15286432" author="davsclaus" created="Tue, 17 May 2016 11:37:14 +0000"  >&lt;p&gt;Yeah a patch or PR on github is much welcome. PR on github is often easier to manage and also allow to keep track of your contributions.&lt;/p&gt;</comment>
                            <comment id="15287950" author="jmandawg" created="Wed, 18 May 2016 00:23:17 +0000"  >&lt;p&gt;PR #985 submitted.&lt;/p&gt;</comment>
                            <comment id="15292724" author="davsclaus" created="Fri, 20 May 2016 05:07:47 +0000"  >&lt;p&gt;Thanks for the PR&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 26 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2xymn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>