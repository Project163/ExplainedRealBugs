<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:29:41 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-12491] route-coverage : report summary problem</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-12491</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;Consider the example code given in&#160;&lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12483&quot; title=&quot;route-coverage : endChoice() problem&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12483&quot;&gt;&lt;del&gt;CAMEL-12483&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;When running camel:route-coverage the report show to many passes for the routes. It looks like the RouteCoverageEventNotifier files holds the sum of all tests, and not just the values for the single test method.&#160;&lt;br/&gt;
&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;:  dk.smor.MySpringBootRouter
Route:  myRouteId

  Line #      Count   Route
  ------      -----   -----
      11          8   from
      13          8     log
      15          8     choice
      16          2       setBody
      18          2       log
      20          2       setBody
      22          2       log
      24          2       setBody
      26          2       log
      28          2       setBody
      30          2       log

Coverage: 11 out of 11 (100.0%)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;each log statement should only have been passed 1 time. And a total for 4 passes for the whole route. &lt;br/&gt;
&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13157553">CAMEL-12491</key>
            <summary>route-coverage : report summary problem</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="smor">Stephane Mor</reporter>
                        <labels>
                    </labels>
                <created>Mon, 7 May 2018 10:14:08 +0000</created>
                <updated>Thu, 24 May 2018 17:17:54 +0000</updated>
                            <resolved>Thu, 24 May 2018 17:17:54 +0000</resolved>
                                    <version>2.21.0</version>
                                    <fixVersion>2.21.2</fixVersion>
                    <fixVersion>2.22.0</fixVersion>
                                    <component>tooling</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16478923" author="davsclaus" created="Thu, 17 May 2018 11:28:27 +0000"  >&lt;p&gt;Okay so the issue is that you have 2 unit tests, and that when you run both of them then the JMX state of the previous test is not cleared, eg if you add the spring annotation @DirtiesContext to ensure spring is cleanly shutdown between each test, you get the expected result.&lt;/p&gt;

&lt;p&gt;However we can maybe detect this in the route coverage dumper - so the saved statistics do not include the previous data. It may be a bit tricky.&lt;/p&gt;</comment>
                            <comment id="16486776" author="smor" created="Wed, 23 May 2018 06:19:48 +0000"  >&lt;p&gt;Spot on &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davsclaus&quot; class=&quot;user-hover&quot; rel=&quot;davsclaus&quot;&gt;davsclaus&lt;/a&gt; Thanks for helping.&lt;br/&gt;
 I added&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@DirtiesContext(classMode = DirtiesContext.ClassMode.AFTER_EACH_TEST_METHOD)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;and now I get the expected result.&#160;&lt;/p&gt;</comment>
                            <comment id="16489424" author="davsclaus" created="Thu, 24 May 2018 17:17:54 +0000"  >&lt;p&gt;Was a bit tricker to get resolved so it works with and without setting springs @DirtiesContext. Now it works without having to do so.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 25 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3tetj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>