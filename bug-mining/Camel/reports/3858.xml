<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:19:48 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-10394] BlueprintCamelContext cannot find components created in RouteBuilder.configure method</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-10394</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;When a simple java RouteBuilder that creates a component and adds it to the context in the configure method is used in a blueprint, the context cannot find the component.&lt;/p&gt;

&lt;p&gt;Example Builder:&lt;br/&gt;
public class TimerRouteBuilder extends RouteBuilder {&lt;br/&gt;
    @Override&lt;br/&gt;
    public void configure() throws Exception &lt;/p&gt;
{
        TimerComponent timerComponent = new TimerComponent();

        getContext().addComponent(&quot;my-timer&quot;, timerComponent);

        from( &quot;my-timer://test-timer&quot;)
                .log(&quot;Timer Fired&quot;)
                .to(&quot;mock://result&quot;);
    }
&lt;p&gt;}&lt;/p&gt;

&lt;p&gt;Example Blueprint:&lt;br/&gt;
&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&amp;gt;&lt;br/&gt;
&amp;lt;blueprint xmlns=&quot;http://www.osgi.org/xmlns/blueprint/v1.0.0&quot;&lt;br/&gt;
           xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&lt;br/&gt;
           xsi:schemaLocation=&quot;&lt;br/&gt;
                 &lt;a href=&quot;http://www.osgi.org/xmlns/blueprint/v1.0.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.osgi.org/xmlns/blueprint/v1.0.0&lt;/a&gt; &lt;a href=&quot;https://www.osgi.org/xmlns/blueprint/v1.0.0/blueprint.xsd&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.osgi.org/xmlns/blueprint/v1.0.0/blueprint.xsd&lt;/a&gt;&lt;br/&gt;
                 &lt;a href=&quot;http://camel.apache.org/schema/blueprint&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://camel.apache.org/schema/blueprint&lt;/a&gt; &lt;a href=&quot;http://camel.apache.org/schema/blueprint/camel-blueprint.xsd&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://camel.apache.org/schema/blueprint/camel-blueprint.xsd&lt;/a&gt;&quot;&amp;gt;&lt;/p&gt;

&lt;p&gt;    &amp;lt;bean id=&quot;timer-route-builder&quot; class=&quot;com.pronoia.camel.builder.TimerRouteBuilder&quot;/&amp;gt;&lt;/p&gt;

&lt;p&gt;    &amp;lt;camelContext id=&quot;blueprint-context&quot; xmlns=&quot;http://camel.apache.org/schema/blueprint&quot;&amp;gt;&lt;br/&gt;
        &amp;lt;routeBuilder ref=&quot;timer-route-builder&quot;/&amp;gt;&lt;br/&gt;
    &amp;lt;/camelContext&amp;gt;&lt;/p&gt;

&lt;p&gt;&amp;lt;/blueprint&amp;gt;&lt;/p&gt;

&lt;p&gt;This test fails:&lt;br/&gt;
public class BlueprintTest extends CamelBlueprintTestSupport {&lt;br/&gt;
    @EndpointInject(uri = &quot;mock://result&quot;)&lt;br/&gt;
    MockEndpoint result;&lt;/p&gt;

&lt;p&gt;    @Override&lt;br/&gt;
    protected String getBlueprintDescriptor() &lt;/p&gt;
{
        return &quot;/OSGI-INF/blueprint/blueprint.xml&quot;;
    }

&lt;p&gt;    @Test&lt;br/&gt;
    public void testRoute() throws Exception &lt;/p&gt;
{
        result.expectedMessageCount(5);

        assertMockEndpointsSatisfied(10, TimeUnit.SECONDS);
    }&lt;br/&gt;
&lt;br/&gt;
}&lt;br/&gt;
&lt;br/&gt;
But this test passes&lt;br/&gt;
public class CamelTest extends CamelTestSupport {&lt;br/&gt;
&lt;br/&gt;
    @EndpointInject(uri = &quot;mock://result&quot;)&lt;br/&gt;
    MockEndpoint result;&lt;br/&gt;
&lt;br/&gt;
    @Override&lt;br/&gt;
    protected RoutesBuilder createRouteBuilder() throws Exception {
        return new TimerRouteBuilder();
    }&lt;br/&gt;
&lt;br/&gt;
    @Test&lt;br/&gt;
    public void testRoute() throws Exception {        result.expectedMessageCount(5);
        assertMockEndpointsSatisfied(10, TimeUnit.SECONDS);    }
&lt;p&gt;}&lt;/p&gt;</description>
                <environment></environment>
        <key id="13012911">CAMEL-10394</key>
            <summary>BlueprintCamelContext cannot find components created in RouteBuilder.configure method</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="hqstevenson">Quinn Stevenson</reporter>
                        <labels>
                    </labels>
                <created>Mon, 17 Oct 2016 16:46:56 +0000</created>
                <updated>Mon, 5 Mar 2018 12:01:21 +0000</updated>
                            <resolved>Fri, 4 Nov 2016 15:16:11 +0000</resolved>
                                    <version>2.18.0</version>
                                    <fixVersion>2.18.1</fixVersion>
                    <fixVersion>2.19.0</fixVersion>
                                    <component>camel-blueprint</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15582731" author="hqstevenson" created="Mon, 17 Oct 2016 16:51:34 +0000"  >&lt;p&gt;Could this be related to &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-9570?&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/CAMEL-9570?&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;If I use the same type of workaround (a subclass of BlueprintCamelContext and bypass the Camel Blueprint Extender), I can make it work.&lt;/p&gt;</comment>
                            <comment id="15630165" author="githubbot" created="Wed, 2 Nov 2016 19:32:16 +0000"  >&lt;p&gt;GitHub user hqstevenson opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/1246&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/1246&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-10394&quot; title=&quot;BlueprintCamelContext cannot find components created in RouteBuilder.configure method&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-10394&quot;&gt;&lt;del&gt;CAMEL-10394&lt;/del&gt;&lt;/a&gt;: Resolve components from Camel Context&lt;/p&gt;

&lt;p&gt;    Check the camel context for a component registered under the given name before creating a service reference.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/hqstevenson/camel&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/hqstevenson/camel&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-10394&quot; title=&quot;BlueprintCamelContext cannot find components created in RouteBuilder.configure method&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-10394&quot;&gt;&lt;del&gt;CAMEL-10394&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/1246.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/1246.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #1246&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 03528e3dd1bfdd9a3ef52003e2fa73301f1a3fbd&lt;br/&gt;
Author: Quinn Stevenson &amp;lt;quinn@pronoia-solutions.com&amp;gt;&lt;br/&gt;
Date:   2016-11-02T19:30:20Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-10394&quot; title=&quot;BlueprintCamelContext cannot find components created in RouteBuilder.configure method&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-10394&quot;&gt;&lt;del&gt;CAMEL-10394&lt;/del&gt;&lt;/a&gt;: Resolve components from Camel Context before creating service reference&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15636634" author="davsclaus" created="Fri, 4 Nov 2016 15:16:14 +0000"  >&lt;p&gt;Thanks for the PR&lt;/p&gt;</comment>
                            <comment id="15636709" author="githubbot" created="Fri, 4 Nov 2016 15:35:08 +0000"  >&lt;p&gt;Github user hqstevenson closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/1246&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/1246&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                            <outwardlinks description="breaks">
                                        <issuelink>
            <issuekey id="13140594">CAMEL-12291</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 2 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i34znb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>