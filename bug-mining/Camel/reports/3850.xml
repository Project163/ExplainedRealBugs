<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:19:37 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-10418] Deploy route with an error</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-10418</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;When i create a route with an sintax error, it cannot be started but remains into camelcontext.&lt;/p&gt;

&lt;p&gt;An example to replicate it:&lt;br/&gt;
1. Deploy a route with an know id at runtime (using route definition). The route will be invalid (with an sintax error)&lt;br/&gt;
2. Redeploy correct route with same id&lt;/p&gt;

&lt;p&gt;Camel throw an example because i cannot deploy a route with same id!!!&lt;/p&gt;</description>
                <environment></environment>
        <key id="13015231">CAMEL-10418</key>
            <summary>Deploy route with an error</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="fabryprog">Fabrizio Spataro</assignee>
                                    <reporter username="fabryprog">Fabrizio Spataro</reporter>
                        <labels>
                    </labels>
                <created>Tue, 25 Oct 2016 21:17:55 +0000</created>
                <updated>Fri, 28 Oct 2016 16:08:35 +0000</updated>
                            <resolved>Fri, 28 Oct 2016 13:35:28 +0000</resolved>
                                                    <fixVersion>2.19.0</fixVersion>
                                    <component>camel-core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="15615295" author="githubbot" created="Fri, 28 Oct 2016 12:51:25 +0000"  >&lt;p&gt;GitHub user paoloantinori opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/1234&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/1234&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-10418&quot; title=&quot;Deploy route with an error&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-10418&quot;&gt;&lt;del&gt;CAMEL-10418&lt;/del&gt;&lt;/a&gt; - Fix route removal logic in case of duplicated id.&lt;/p&gt;

&lt;p&gt;    Thanks @Fabryprog for the unit test and initial solution&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/paoloantinori/camel&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/paoloantinori/camel&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-10418&quot; title=&quot;Deploy route with an error&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-10418&quot;&gt;&lt;del&gt;CAMEL-10418&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/1234.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/1234.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #1234&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 2be65c116c4e9ab3602f9796135487c03aa1d1ec&lt;br/&gt;
Author: Paolo Antinori &amp;lt;pantinor@redhat.com&amp;gt;&lt;br/&gt;
Date:   2016-10-28T12:50:25Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-10418&quot; title=&quot;Deploy route with an error&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-10418&quot;&gt;&lt;del&gt;CAMEL-10418&lt;/del&gt;&lt;/a&gt; - Fix route removal logic in case of duplicated id.&lt;/p&gt;

&lt;p&gt;    Thanks @Fabryprog for the unit test and initial solution&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15615298" author="paolo.antinori" created="Fri, 28 Oct 2016 12:52:10 +0000"  >&lt;p&gt;Hi, I think that your test shows a real problem but the fix is not in the correct place.&lt;/p&gt;

&lt;p&gt;In my opinion the real issue here is that &lt;tt&gt;org.apache.camel.impl.DefaultCamelContext#removeRouteDefinition(org.apache.camel.model.RouteDefinition)&lt;/tt&gt; , that is already correctly called even in your test, but it is not removing the route definition correctly.&lt;/p&gt;

&lt;p&gt;I have modified it in this way:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;     &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;synchronized&lt;/span&gt; void removeRouteDefinition(RouteDefinition routeDefinition) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
+        RouteDefinition toBeRemoved = routeDefinition;
         &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; id = routeDefinition.getId();
         &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (id != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
             &lt;span class=&quot;code-comment&quot;&gt;// remove existing route
&lt;/span&gt;             stopRoute(id);
             removeRoute(id);
+            toBeRemoved = getRouteDefinition(id);
         }
-        &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.routeDefinitions.remove(routeDefinition);
+        &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.routeDefinitions.remove(toBeRemoved);
     }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And now all test pass, included the new one you have added.&lt;/p&gt;

&lt;p&gt;See PR here:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/camel/compare/master...paoloantinori:CAMEL-10418?expand=1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/compare/master...paoloantinori:CAMEL-10418?expand=1&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15615306" author="ancosen" created="Fri, 28 Oct 2016 12:54:50 +0000"  >&lt;p&gt;Yes, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=paolo.antinori&quot; class=&quot;user-hover&quot; rel=&quot;paolo.antinori&quot;&gt;paolo.antinori&lt;/a&gt;, you&apos;re right. I guess it is the right place to for the fix. It is the place I was looking for in origin. Thanks for spotting this! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;I&apos;ll merge your PR.&lt;/p&gt;</comment>
                            <comment id="15615426" author="githubbot" created="Fri, 28 Oct 2016 13:34:20 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/1234&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/1234&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15615444" author="fabryprog" created="Fri, 28 Oct 2016 13:41:05 +0000"  >&lt;p&gt;Initially my code was in &lt;b&gt;removeRouteDefinition&lt;/b&gt; method. But i am thinking this use cases:&lt;/p&gt;

&lt;p&gt;I deploy this cascade routes using method &lt;b&gt;removeRouteDefinitions&lt;/b&gt; :&lt;/p&gt;

&lt;p&gt;ROUTE A -&amp;gt; ROUTE B -&amp;gt; ROUTE C&lt;/p&gt;

&lt;p&gt;If my error is into routeB i would remove all routes not only routeB!!!!&lt;/p&gt;</comment>
                            <comment id="15615814" author="lb" created="Fri, 28 Oct 2016 16:08:35 +0000"  >&lt;p&gt;This would open the door to much more complex things, i.e:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;you have to take into account the whole tree as route A could multicast to multiple routes or it may be the target of other routes&lt;/li&gt;
	&lt;li&gt;you have to think about what you would do for cross context routes&lt;/li&gt;
&lt;/ul&gt;

</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 3 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i35dy7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>