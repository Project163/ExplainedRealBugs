<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:45:37 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-16177] File stream cache problem with multicast parallel processing and encrypted stream</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-16177</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;If you use stream caching with file encryption in a camel route where you have a multicast with several branches, then it the following errors can happen in the message processing of the branch.&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;When the message is processed in a branch you can get the following exception:aused by: java.lang.ArrayIndexOutOfBoundsException: while trying to load from index 16 of a byte (or boolean) array with length 16, loaded from field com.sun.crypto.provider.CounterMode.encryptedCounter of an object loaded from local variable &apos;this&apos;aused by: java.lang.ArrayIndexOutOfBoundsException: while trying to load from index 16 of a byte (or boolean) array with length 16, loaded from field com.sun.crypto.provider.CounterMode.encryptedCounter of an object loaded from local variable &apos;this&apos; at com.sun.crypto.provider.CounterMode.implCrypt(CounterMode.java:190) at com.sun.crypto.provider.CounterMode.crypt(CounterMode.java:178) at com.sun.crypto.provider.CounterMode.decrypt(CounterMode.java:153) at com.sun.crypto.provider.CipherCore.update(CipherCore.java:782) at com.sun.crypto.provider.CipherCore.update(CipherCore.java:667) at com.sun.crypto.provider.AESCipher.engineUpdate(AESCipher.java:380) at javax.crypto.Cipher.update(Cipher.java:1835) at javax.crypto.CipherInputStream.getMoreData(CipherInputStream.java:139) at javax.crypto.CipherInputStream.read(CipherInputStream.java:199) at org.apache.camel.converter.stream.FileInputStreamCache.read(FileInputStreamCache.java:139)&lt;/li&gt;
	&lt;li&gt;or you get a damaged payload in the branch which is not correctly decrypted&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The root cause of the problem is that the decryptor is not thread safe: If two different FileInputStreamCache instances use the same decryptor in two different threads at the same time, the above problems occur.&lt;/p&gt;

&lt;p&gt;I will provide a patch for this problem.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13357949">CAMEL-16177</key>
            <summary>File stream cache problem with multicast parallel processing and encrypted stream</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="forsthofer">Franz Forsthofer</assignee>
                                    <reporter username="forsthofer">Franz Forsthofer</reporter>
                        <labels>
                    </labels>
                <created>Wed, 10 Feb 2021 15:06:19 +0000</created>
                <updated>Fri, 12 Feb 2021 13:46:09 +0000</updated>
                            <resolved>Fri, 12 Feb 2021 13:46:09 +0000</resolved>
                                    <version>2.25.3</version>
                    <version>3.7.2</version>
                                    <fixVersion>2.25.2</fixVersion>
                    <fixVersion>3.7.3</fixVersion>
                    <fixVersion>3.8.0</fixVersion>
                    <fixVersion>3.9.0</fixVersion>
                                    <component>camel-core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 39 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0nk9c:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>