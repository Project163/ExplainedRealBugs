<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 09:51:23 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-5193] Strange warning appears: WARN  org.apache.camel.processor.DeadLetterChannel - Cannot determine current route from Exchange with id </title>
                <link>https://issues.apache.org/jira/browse/CAMEL-5193</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;The warning gets printed but other than that, everything seems to work. (I hope)&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;12.04.19 10:34:26:463 [drisCamelContext JmsConsumer[dispatchHttpQueue] #4] WARN  org.apache.camel.processor.DeadLetterChannel - Cannot determine current route from Exchange with id: ID-dris-ixor-be-42350-1334569164986-0-1052464, will 
fallback and use first error handler.
12.04.19 10:34:26:463 [drisCamelContext JmsConsumer[dispatchHttpQueue] #4] WARN  distribution.kv78.dispatch - Failed delivery (attempt = 199) : org.apache.http.conn.HttpHostConnectException: Connection to http:&lt;span class=&quot;code-comment&quot;&gt;//81.82.232.183:9292 ref
&lt;/span&gt;used - 0299c1d9 - KV8passtimes - 81.82.232.183:9292 - queue_dispatchHttpQueue_ID_dris.ixor.be-36583-1334569163882-4_1_24_1_1007
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;When looking up the log statement in RedeliveryErrorHandler, I find this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!exceptionPolicy.getErrorHandlers().isEmpty()) {
                &lt;span class=&quot;code-comment&quot;&gt;// note &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; should really not happen, but we have &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; code as a fail safe
&lt;/span&gt;                &lt;span class=&quot;code-comment&quot;&gt;// to be backwards compatible with the old behavior
&lt;/span&gt;                log.warn(&lt;span class=&quot;code-quote&quot;&gt;&quot;Cannot determine current route from Exchange with id: {}, will fallback and use first error handler.&quot;&lt;/span&gt;, exchange.getExchangeId());
                processor = exceptionPolicy.getErrorHandlers().iterator().next();
            }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So it shouldn&apos;t happen but it happens after all...&lt;/p&gt;


&lt;p&gt;Here is the route causing the warning. I think it started when I made the route transacted. &lt;br/&gt;
As shown in the log snippet above, the warning is printed when the HTTP endpoint throws an IOException (route ENDPOINT_DISPATCH)&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        
        from(ENDPOINT_DISPATCH_QUEUE +
            &lt;span class=&quot;code-quote&quot;&gt;&quot;?cacheLevelName=CACHE_CONSUMER&amp;amp;&quot;&lt;/span&gt; + &lt;span class=&quot;code-comment&quot;&gt;// necessary &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; message groups to work
&lt;/span&gt;            &lt;span class=&quot;code-quote&quot;&gt;&quot;concurrentConsumers={{hermes.dris.distribution.kv78.concurrentOutgoingHttpDispatchers}}&amp;amp;&quot;&lt;/span&gt; +
            &lt;span class=&quot;code-quote&quot;&gt;&quot;maxConcurrentConsumers={{hermes.dris.distribution.kv78.maxConcurrentOutgoingHttpDispatchers}}&quot;&lt;/span&gt;)
            .routeId(ROUTE_ID_DISPATCH_QUEUE)
            .onException(Throwable.class)
                &lt;span class=&quot;code-comment&quot;&gt;// transacted routes override the &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; error handler
&lt;/span&gt;                &lt;span class=&quot;code-comment&quot;&gt;// to avoid the message going to the the ActiveMQ DLQ, forward to our DLQ here
&lt;/span&gt;                .to(ENDPOINT_DLQ)
                .handled(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;)
            .end()
            .transacted()
             &lt;span class=&quot;code-comment&quot;&gt;// determine action
&lt;/span&gt;             &lt;span class=&quot;code-comment&quot;&gt;// the timingPointSequencer will check what needs to happen with the message
&lt;/span&gt;            .beanRef(&lt;span class=&quot;code-quote&quot;&gt;&quot;timingPointSequencer&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;handleDispatch&quot;&lt;/span&gt;)
            .choice()
                 &lt;span class=&quot;code-comment&quot;&gt;// normal situation, the message can be sent
&lt;/span&gt;                .when(header(TimingPointSequencer.HEADER_ACTION).isEqualTo(constant(TimingPointSequencer.ACTION_PROCEED)))
                    .to(ENDPOINT_DISPATCH)
                 &lt;span class=&quot;code-comment&quot;&gt;// delay message, usually because of previous errors &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; destination
&lt;/span&gt;                .when(header(TimingPointSequencer.HEADER_ACTION).isEqualTo(constant(TimingPointSequencer.ACTION_REENQUEUE)))
                    .log(LoggingLevel.INFO, &lt;span class=&quot;code-quote&quot;&gt;&quot;Re-enqueuing&quot;&lt;/span&gt; + MESSAGE_LOG_FORMAT)
                    .to(ENDPOINT_DISPATCH_QUEUE)
                .otherwise()
                    .log(LoggingLevel.ERROR, &lt;span class=&quot;code-quote&quot;&gt;&quot;No action header set ???&quot;&lt;/span&gt; + MESSAGE_LOG_FORMAT)
                    .to(ENDPOINT_DLQ)
                .end()
            .end();

        from(ENDPOINT_DISPATCH)
            .routeId(ROUTE_ID_DISPATCH)
            .onException(IOException.class)
                &lt;span class=&quot;code-comment&quot;&gt;// in &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt; of IO exceptions, the message is always re-enqueued
&lt;/span&gt;                &lt;span class=&quot;code-comment&quot;&gt;// reschedule parameters are set by the timingPointSequencer
&lt;/span&gt;                .beanRef(&lt;span class=&quot;code-quote&quot;&gt;&quot;timingPointSequencer&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;handleFailure&quot;&lt;/span&gt;)
                .log(LoggingLevel.WARN, &lt;span class=&quot;code-quote&quot;&gt;&quot;Failed delivery (attempt = ${in.header.tpSecAttempt}) : ${in.header.CamelExceptionCaught}&quot;&lt;/span&gt; + MESSAGE_LOG_FORMAT)
                .to(ENDPOINT_DISPATCH_QUEUE)
                .handled(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;)
            .end()
             &lt;span class=&quot;code-comment&quot;&gt;// clear http headers to avoid interference from other http endpoints
&lt;/span&gt;            .removeHeaders(&lt;span class=&quot;code-quote&quot;&gt;&quot;CamelHttp*&quot;&lt;/span&gt;)
            .setHeader(Exchange.HTTP_URI, simple(&lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//${header.&quot;&lt;/span&gt; + HEADER_DESTINATION_ADDRESS + &lt;span class=&quot;code-quote&quot;&gt;&quot;}&quot;&lt;/span&gt;))
&lt;/span&gt;            .setHeader(Exchange.HTTP_PATH, simple(&lt;span class=&quot;code-quote&quot;&gt;&quot;${properties:hermes.dris.distribution.kv78.controller.urlpath}&quot;&lt;/span&gt;))
            .setHeader(Exchange.CONTENT_TYPE, constant(&lt;span class=&quot;code-quote&quot;&gt;&quot;application/xml&quot;&lt;/span&gt;))
            .setHeader(Exchange.CONTENT_ENCODING, constant(&lt;span class=&quot;code-quote&quot;&gt;&quot;gzip&quot;&lt;/span&gt;)) &lt;span class=&quot;code-comment&quot;&gt;// use gzip compression
&lt;/span&gt;            .log(verboseLoggingLevel, &lt;span class=&quot;code-quote&quot;&gt;&quot;Sending request to ${in.header.CamelHttpUri}/${in.header.CamelHttpPath}&quot;&lt;/span&gt; + MESSAGE_LOG_FORMAT)
             &lt;span class=&quot;code-comment&quot;&gt;// use multicast instead of a pipeline, or the audit log will contain the http response!
&lt;/span&gt;            .multicast()
                .stopOnException()
                .to(ENDPOINT_TIMINGPOINT_HTTP + &lt;span class=&quot;code-quote&quot;&gt;&quot;?httpClientConfigurerRef=timingPointHttpClientConfigurer&amp;amp;headerFilterStrategy=#distributionHttpHeaderFilterStrategy&quot;&lt;/span&gt;, ENDPOINT_AUDIT_OUTGOING)
            .end()
            .beanRef(&lt;span class=&quot;code-quote&quot;&gt;&quot;timingPointSequencer&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;handleSuccess&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12551589">CAMEL-5193</key>
            <summary>Strange warning appears: WARN  org.apache.camel.processor.DeadLetterChannel - Cannot determine current route from Exchange with id </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="syberyan">Christian Tytgat</reporter>
                        <labels>
                    </labels>
                <created>Thu, 19 Apr 2012 08:56:17 +0000</created>
                <updated>Sun, 29 Apr 2012 16:04:39 +0000</updated>
                            <resolved>Sun, 29 Apr 2012 16:04:39 +0000</resolved>
                                    <version>2.9.1</version>
                                    <fixVersion>2.9.3</fixVersion>
                    <fixVersion>2.10.0</fixVersion>
                                    <component>camel-core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13264555" author="davsclaus" created="Sun, 29 Apr 2012 14:22:13 +0000"  >&lt;p&gt;In your multicast, you only have 1 processor (eg only 1 to). If you remove the multicast, then I would assume the WARN is removed.&lt;/p&gt;</comment>
                            <comment id="13264556" author="davsclaus" created="Sun, 29 Apr 2012 14:27:32 +0000"  >&lt;p&gt;For the various endpoints can you post the real values you are using, eg ENDPOINT_DISPATCH and so forth.&lt;/p&gt;</comment>
                            <comment id="13264559" author="davsclaus" created="Sun, 29 Apr 2012 14:34:03 +0000"  >&lt;p&gt;Ah you got 2 endpoints in the multicast, with the comma on the far right side.&lt;/p&gt;</comment>
                            <comment id="13264571" author="davsclaus" created="Sun, 29 Apr 2012 15:22:56 +0000"  >&lt;p&gt;Okay I can re-produce the issue now.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>236397</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 30 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i025kv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>10505</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>