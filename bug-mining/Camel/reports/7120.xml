<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 11:11:01 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-22037] camel-as2 - In AS2Receiver, line feeds are replaced by CRLF</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-22037</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;We use Apache Camel AS2 libraries in our application to receive and process AS2 messages.&lt;/p&gt;

&lt;p&gt;Currently, we tracked down an issue where a client message&apos;s signature fails to be validated.&lt;/p&gt;

&lt;p&gt;It turns out that the message content contains CRLF line endings in the mime part body, while the original message has LF only.&lt;/p&gt;

&lt;p&gt;We were able to verify that replacement LF-&amp;gt;CRLF is carried out in CanonicalOutputStream, which is used in AS2 implementation to marshal the signed entity in SigningUtils::isValid into a byte array.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13616770">CAMEL-22037</key>
            <summary>camel-as2 - In AS2Receiver, line feeds are replaced by CRLF</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="jlink">J&#252;rgen Link</reporter>
                        <labels>
                    </labels>
                <created>Wed, 30 Apr 2025 07:45:09 +0000</created>
                <updated>Tue, 6 May 2025 12:29:18 +0000</updated>
                            <resolved>Tue, 6 May 2025 11:22:26 +0000</resolved>
                                    <version>4.11.0</version>
                                    <fixVersion>4.8.8</fixVersion>
                    <fixVersion>4.10.5</fixVersion>
                    <fixVersion>4.12.0</fixVersion>
                                    <component>camel-as2</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17948662" author="davsclaus" created="Thu, 1 May 2025 13:03:57 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jono&quot; class=&quot;user-hover&quot; rel=&quot;jono&quot;&gt;jono&lt;/a&gt;&#160; I wonder if you had looked at this?&lt;/p&gt;</comment>
                            <comment id="17948663" author="davsclaus" created="Thu, 1 May 2025 13:05:07 +0000"  >&lt;p&gt;I think there was something about different OS platforms windows vs linux etc&lt;/p&gt;</comment>
                            <comment id="17948664" author="davsclaus" created="Thu, 1 May 2025 13:05:56 +0000"  >&lt;p&gt;Jurgen maybe you can copy one of the existing unit test and make some kind of reproducer of what you report - any help will speedy any chances for help on this - otherwise ....&lt;/p&gt;</comment>
                            <comment id="17948665" author="davsclaus" created="Thu, 1 May 2025 13:06:55 +0000"  >&lt;p&gt;Also look at &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-21327&quot; title=&quot;Camel-AS2 Receiver Application Fails for LF-Terminated Line Separator&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-21327&quot;&gt;&lt;del&gt;CAMEL-21327&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17948666" author="jono" created="Thu, 1 May 2025 13:13:18 +0000"  >&lt;p&gt;Hey Claus, I don&apos;t recall looking at this.&#160; I&apos;ll get it fixed up.&lt;/p&gt;</comment>
                            <comment id="17948713" author="JIRAUSER309573" created="Thu, 1 May 2025 18:47:30 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davsclaus&quot; class=&quot;user-hover&quot; rel=&quot;davsclaus&quot;&gt;davsclaus&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jono&quot; class=&quot;user-hover&quot; rel=&quot;jono&quot;&gt;jono&lt;/a&gt; thanks for looking into this. I&apos;m currently out of office until Monday, without the ability to commit a unit test properly.&lt;/p&gt;

&lt;p&gt;The following test claims my expectations:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;import org.apache.camel.component.as2.api.entity.TextPlainEntity;
import org.assertj.core.api.Assertions;
import org.junit.jupiter.api.DisplayName;
import org.junit.jupiter.api.Test;
import java.io.ByteArrayOutputStream;
import java.io.IOException;
import java.nio.charset.StandardCharsets;
import static org.assertj.core.api.Assertions.assertThat;

public class TextPlainEntityTest {
&#160; &#160; @Test
&#160; &#160; void test_assert_content_marshalling() throws IOException {
&#160; &#160; &#160; &#160; TextPlainEntity textPlainEntity =
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; new TextPlainEntity(
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &quot;&amp;lt;root&amp;gt;\n &#160;&amp;lt;item/&amp;gt;\n&amp;lt;/root&amp;gt;\n&quot;,
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; StandardCharsets.US_ASCII.name(),
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &quot;binary&quot;,
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; false
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; );
&#160; &#160; &#160; &#160; ByteArrayOutputStream out = new ByteArrayOutputStream();
&#160; &#160; &#160; &#160; textPlainEntity.writeTo(out);
&#160; &#160; &#160; &#160;&#160;
&#160; &#160; &#160; &#160; assertThat(out.toString(StandardCharsets.US_ASCII))
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; .isEqualTo(
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &quot;Content-Type: text/plain; charset=US-ASCII\r\n&quot; +
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &quot;Content-Transfer-Encoding: binary\r\n&quot; +
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &quot;\r\n&quot; +
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; textPlainEntity.getText());
&#160; &#160; }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17949682" author="davsclaus" created="Tue, 6 May 2025 11:22:26 +0000"  >&lt;p&gt;Thanks for reporting and the unit test and fix&lt;/p&gt;</comment>
                            <comment id="17949708" author="JIRAUSER309573" created="Tue, 6 May 2025 12:29:18 +0000"  >&lt;p&gt;Thanks for your support and for promptly responding!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13594526">CAMEL-21327</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            27 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1vmdk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>