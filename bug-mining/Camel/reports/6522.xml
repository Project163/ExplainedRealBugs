<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 11:02:02 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-19676] Do not log sensitive query parameters when route cannot be created</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-19676</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;When camel cannot create a route, a &lt;tt&gt;FailedToCreateRouteException&lt;/tt&gt; is thrown. This exception shows all query parameters in clear text, including sensitive information, like password. It would be beneficial to also mask sensitive information in this exception.&lt;/p&gt;

&lt;p&gt;interestingly enough, inner exceptions still mask the password.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Note:&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;The issue was originally observed on &lt;tt&gt;camel-sftp&lt;/tt&gt;, but I suspect that this is a broader issue. I specified &lt;tt&gt;camel-log&lt;/tt&gt; as component since it seems to be the closest fit. Please feel free to change this as need be.&lt;/p&gt;

&lt;p&gt;&#8212;&lt;/p&gt;

&lt;p&gt;A sample project showing the behaviour can be found on &lt;a href=&quot;https://github.com/turing85/camel-sftp&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;&lt;tt&gt;github.com&lt;/tt&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;To see the behaviour:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Clone the project&lt;/li&gt;
&lt;/ul&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
git clone https:&lt;span class=&quot;code-comment&quot;&gt;//github.com/turing85/camel-sftp.git
&lt;/span&gt;cd camel-sftp &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;ul&gt;
	&lt;li&gt;Start the sftp server:&lt;/li&gt;
&lt;/ul&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
docker-compose --file local-deployment/docker-compose.yml up --detach &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;ul&gt;
	&lt;li&gt;build the application&lt;/li&gt;
&lt;/ul&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
./mvnw clean &lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;ul&gt;
	&lt;li&gt;start the jar&lt;/li&gt;
&lt;/ul&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java -jar target/camel-sftp-1.0-SNAPSHOT-executable-jar.jar &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;ul&gt;
	&lt;li&gt;observe the stack trace, containing the password:&lt;/li&gt;
&lt;/ul&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; org.apache.camel.FailedToCreateRouteException: Failed to create route writer at: &amp;gt;&amp;gt;&amp;gt; To[sftp:&lt;span class=&quot;code-comment&quot;&gt;//localhost:10022?password=wrong%26foo&amp;amp;username=foo] &amp;lt;&amp;lt;&amp;lt; in route: Route(writer)[From[timer://write-timer?fixedRate=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&amp;amp;period... because of Failed to resolve endpoint: sftp://localhost:10022?password=xxxxxx&amp;amp;username=xxxxxx due to: Failed to resolve endpoint: sftp://localhost:10022?password=xxxxxx&amp;amp;username=xxxxxx due to: There are 1 parameters that couldn&apos;t be set on the endpoint. Check the uri &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; the parameters are spelt correctly and that they are properties of the endpoint. Unknown parameters=[{foo=}]
&lt;/span&gt;&#160; &#160; at org.apache.camel.reifier.RouteReifier.doCreateRoute(RouteReifier.java:215)
&#160; &#160; at org.apache.camel.reifier.RouteReifier.createRoute(RouteReifier.java:75)
&#160; &#160; at org.apache.camel.impl.DefaultModelReifierFactory.createRoute(DefaultModelReifierFactory.java:49)
&#160; &#160; at org.apache.camel.impl.DefaultCamelContext.startRouteDefinitions(DefaultCamelContext.java:937)
&#160; &#160; at org.apache.camel.impl.DefaultCamelContext.startRouteDefinitions(DefaultCamelContext.java:800)
&#160; &#160; at org.apache.camel.impl.engine.AbstractCamelContext.doInit(AbstractCamelContext.java:3028)
&#160; &#160; at org.apache.camel.support.service.BaseService.init(BaseService.java:83)
&#160; &#160; at org.apache.camel.impl.engine.AbstractCamelContext.init(AbstractCamelContext.java:2699)
&#160; &#160; at org.apache.camel.support.service.BaseService.start(BaseService.java:111)
&#160; &#160; at org.apache.camel.impl.engine.AbstractCamelContext.start(AbstractCamelContext.java:2718)
&#160; &#160; at org.apache.camel.impl.DefaultCamelContext.start(DefaultCamelContext.java:262)
&#160; &#160; at org.apache.camel.main.Main.doStart(Main.java:142)
&#160; &#160; at org.apache.camel.support.service.BaseService.start(BaseService.java:119)
&#160; &#160; at org.apache.camel.main.MainSupport.run(MainSupport.java:89)
&#160; &#160; at de.turing85.camel.sftp.CamelSftp.main(CamelSftp.java:15)
Caused by: org.apache.camel.ResolveEndpointFailedException: Failed to resolve endpoint: sftp:&lt;span class=&quot;code-comment&quot;&gt;//localhost:10022?password=xxxxxx&amp;amp;username=xxxxxx due to: Failed to resolve endpoint: sftp://localhost:10022?password=xxxxxx&amp;amp;username=xxxxxx due to: There are 1 parameters that couldn&apos;t be set on the endpoint. Check the uri &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; the parameters are spelt correctly and that they are properties of the endpoint. Unknown parameters=[{foo=}]
&lt;/span&gt;&#160; &#160; at org.apache.camel.impl.engine.AbstractCamelContext.doGetEndpoint(AbstractCamelContext.java:1020)
&#160; &#160; at org.apache.camel.impl.engine.AbstractCamelContext.getEndpoint(AbstractCamelContext.java:931)
&#160; &#160; at org.apache.camel.builder.endpoint.AbstractEndpointBuilder.resolve(AbstractEndpointBuilder.java:68)
&#160; &#160; at org.apache.camel.reifier.SendReifier.resolveEndpoint(SendReifier.java:47)
&#160; &#160; at org.apache.camel.reifier.SendReifier.createProcessor(SendReifier.java:37)
&#160; &#160; at org.apache.camel.reifier.ProcessorReifier.makeProcessor(ProcessorReifier.java:857)
&#160; &#160; at org.apache.camel.reifier.ProcessorReifier.addRoutes(ProcessorReifier.java:598)
&#160; &#160; at org.apache.camel.reifier.RouteReifier.doCreateRoute(RouteReifier.java:211)
&#160; &#160; ... 14 more
Caused by: org.apache.camel.ResolveEndpointFailedException: Failed to resolve endpoint: sftp:&lt;span class=&quot;code-comment&quot;&gt;//localhost:10022?password=xxxxxx&amp;amp;username=xxxxxx due to: There are 1 parameters that couldn&apos;t be set on the endpoint. Check the uri &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; the parameters are spelt correctly and that they are properties of the endpoint. Unknown parameters=[{foo=}]
&lt;/span&gt;&#160; &#160; at org.apache.camel.support.DefaultComponent.validateParameters(DefaultComponent.java:300)
&#160; &#160; at org.apache.camel.support.DefaultComponent.createEndpoint(DefaultComponent.java:192)
&#160; &#160; at org.apache.camel.impl.engine.AbstractCamelContext.doGetEndpoint(AbstractCamelContext.java:986)
&#160; &#160; ... 21 more &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#8212;&lt;/p&gt;

&lt;p&gt;Story:&lt;/p&gt;

&lt;p&gt;&lt;b&gt;As&lt;/b&gt; a developer&lt;/p&gt;

&lt;p&gt;&lt;b&gt;When&lt;/b&gt; I misconfigure my route so that it does not start&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Then&lt;/b&gt; I want that all sensitive information are masked in the entire stack trace.&lt;/p&gt;

&lt;p&gt;&#8212;&lt;br/&gt;
FTR: &lt;a href=&quot;https://camel.zulipchat.com/#narrow/stream/257298-camel/topic/Java.20DSL.20and.20.60RAW.28.2E.2E.2E.29.60.20parameters/near/379420624&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;relevant zulip-chat&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13545282">CAMEL-19676</key>
            <summary>Do not log sensitive query parameters when route cannot be created</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="turing85">Marco Bungart</reporter>
                        <labels>
                    </labels>
                <created>Fri, 28 Jul 2023 11:26:47 +0000</created>
                <updated>Fri, 28 Jul 2023 17:32:32 +0000</updated>
                            <resolved>Fri, 28 Jul 2023 17:32:32 +0000</resolved>
                                    <version>3.13.0</version>
                    <version>3.21.0</version>
                                    <fixVersion>3.20.7</fixVersion>
                    <fixVersion>3.21.1</fixVersion>
                    <fixVersion>3.22.0</fixVersion>
                    <fixVersion>4.0.0</fixVersion>
                                    <component>camel-core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17748641" author="davsclaus" created="Fri, 28 Jul 2023 14:50:05 +0000"  >&lt;p&gt;Thanks for the sample project.&lt;/p&gt;

&lt;p&gt;So its a corner case with the route model where to/toD are outputting the uri in that situation only.&lt;/p&gt;

&lt;p&gt;I am masking the passwords like its done in other places, and now its shown as xxxxxxxx&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
~/Downloads/camel-sftp main !1 &#10095; java -jar target/camel-sftp-1.0-SNAPSHOT-executable-jar.jar                                                                                                         4s
WARNING: sun.reflect.Reflection.getCallerClass is not supported. This will impact performance.
[                          main] MainSupport                    INFO  Apache Camel (Main) 4.0.0-SNAPSHOT is starting
Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; org.apache.camel.FailedToCreateRouteException: Failed to create route writer at: &amp;gt;&amp;gt;&amp;gt; To[sftp:&lt;span class=&quot;code-comment&quot;&gt;//localhost:10022?password=xxxxxx&amp;amp;username=xxxxxx] &amp;lt;&amp;lt;&amp;lt; in route: Route(writer)[From[timer://write-timer?fixedRate=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&amp;amp;period... because of Failed to resolve endpoint: sftp://localhost:10022?password=xxxxxx&amp;amp;username=xxxxxx due to: Failed to resolve endpoint: sftp://localhost:10022?password=xxxxxx&amp;amp;username=xxxxxx due to: There are 1 parameters that couldn&apos;t be set on the endpoint. Check the uri &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; the parameters are spelt correctly and that they are properties of the endpoint. Unknown parameters=[{foo=}]
&lt;/span&gt;	at org.apache.camel.reifier.RouteReifier.doCreateRoute(RouteReifier.java:217)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                            <customfield id="customfield_12314421" key="com.atlassian.jira.plugin.system.customfieldtypes:labels">
                        <customfieldname>Language</customfieldname>
                        <customfieldvalues>
                                        <label>java</label>
    
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 15 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1jg08:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>