<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 09:29:30 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-1034] Messages in StreamResequencer between 2 ActiveMQ queues seem to be stuck</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-1034</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;Perhaps some subtle configuration issue, but a Camel stream resequencer that is a route between 2 ActiveMQ queues fails to deliver all ordered messages. In fact, using the defaults for a StreamResequencer only 1 out of 100 messages are delivered. However, all 100 messages have been removed from the Producer queue by the resequencer and are not moved to the consumer queue either (even unordered). &lt;/p&gt;

&lt;p&gt;Relevant points:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Broker is run external to Camel route (non-embedded, no VM transport)&lt;/li&gt;
	&lt;li&gt;Producer is a Camel ProducerTemplate&lt;/li&gt;
	&lt;li&gt;Consumer is a Camel route that listens on another delivery queue and delivers message to a simple stdout Processor&lt;/li&gt;
	&lt;li&gt;Resequencer uses stream defaults (100, 1000ms)&lt;/li&gt;
	&lt;li&gt;Trace warns of some Converter override (see attached trace) and throws a breadcrumb error&lt;/li&gt;
	&lt;li&gt;Resequencer fails delivery whether using body (long) or seqnum header (long)&lt;/li&gt;
	&lt;li&gt;all JMS components are configured for AutoAcks&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment>&lt;p&gt;Windows XP SP3, Sun JDK 1.5.0_11, FUSE Mediation Router 1.4.5, ActiveMQ 5.1.0.1&lt;/p&gt;</environment>
        <key id="12486169">CAMEL-1034</key>
            <summary>Messages in StreamResequencer between 2 ActiveMQ queues seem to be stuck</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="janstey">Jonathan Anstey</assignee>
                                    <reporter username="plexico1989">Peter MacKinnon</reporter>
                        <labels>
                    </labels>
                <created>Wed, 29 Oct 2008 14:09:25 +0000</created>
                <updated>Fri, 31 Jul 2009 06:33:37 +0000</updated>
                            <resolved>Thu, 30 Oct 2008 15:07:18 +0000</resolved>
                                    <version>1.4.0</version>
                                    <fixVersion>1.6.0</fixVersion>
                    <fixVersion>2.0-M1</fixVersion>
                                    <component>camel-core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12949387" author="jstrachan" created="Wed, 29 Oct 2008 14:18:50 +0000"  >&lt;p&gt;BTW does the test work when using regular requencer rather than the stream one?&lt;/p&gt;</comment>
                            <comment id="12949384" author="plexico1989" created="Thu, 30 Oct 2008 01:08:19 +0000"  >&lt;p&gt;Same thing with batch...just one message gets through with default config.&lt;/p&gt;</comment>
                            <comment id="12949461" author="mrt1nz" created="Thu, 30 Oct 2008 13:58:29 +0000"  >&lt;p&gt;Peter,&lt;/p&gt;

&lt;p&gt;thanks for your detailed report. Attached is a patch that fixes the issue with the StreamResequencer. &lt;/p&gt;

&lt;p&gt;The issue with the regular resequencer (the one that extends the BatchProcessor) remains because the process(Exchange) method is empty. In addition to the BatchProcessor&apos;s polling consumer, an additional JmsConsumer is created by the JMS endpoint that competes with the polling consumer. The JmsConsumer then calls the empty process(Exchange) method and the exchange is lost. I had no time so far to fix the issues for the BatchProcessor. Hope the fix for the StreamResequencer helps you so far.&lt;/p&gt;</comment>
                            <comment id="12949445" author="janstey" created="Thu, 30 Oct 2008 14:34:07 +0000"  >&lt;p&gt;Thanks for this Martin! I&apos;ve committed your fix in revision 709173.&lt;/p&gt;

&lt;p&gt;Peter, would you mind trying out the latest code from trunk?&lt;/p&gt;</comment>
                            <comment id="12949383" author="plexico1989" created="Thu, 30 Oct 2008 15:04:55 +0000"  >&lt;p&gt;Works great for stream. Thanks all!&lt;/p&gt;</comment>
                            <comment id="12949406" author="davsclaus" created="Thu, 30 Oct 2008 15:44:19 +0000"  >&lt;p&gt;Could we create a new ticket or sub ticket with the renaming work on the non stream that Martin mentions, so we wont forget it. Maybe if Martin has a bit time in the future he will commit a fix for that issue as well.&lt;/p&gt;</comment>
                            <comment id="12949450" author="janstey" created="Thu, 30 Oct 2008 16:00:45 +0000"  >&lt;p&gt;Created &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-1037&quot; title=&quot;Messages in Resequencer between 2 JMS queues get stuck&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-1037&quot;&gt;&lt;del&gt;CAMEL-1037&lt;/del&gt;&lt;/a&gt; to track this issue.&lt;/p&gt;</comment>
                            <comment id="12947473" author="davsclaus" created="Fri, 31 Jul 2009 06:33:37 +0000"  >&lt;p&gt;Closing 2.0m1 tickets&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12462537" name="ASF.LICENSE.NOT.GRANTED--stream-resequencer-eclipse-test.zip" size="11525" author="plexico1989" created="Wed, 29 Oct 2008 14:09:25 +0000"/>
                            <attachment id="12462538" name="ASF.LICENSE.NOT.GRANTED--stream-resequencer-trace.txt" size="95198" author="plexico1989" created="Wed, 29 Oct 2008 14:09:25 +0000"/>
                            <attachment id="12462726" name="camel-core.patch" size="2063" author="mrt1nz" created="Thu, 30 Oct 2008 13:58:29 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>76966</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 17 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i01fxb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6349</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>