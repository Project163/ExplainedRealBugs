<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:44:56 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-13443] Camel Blueprint JUnit Test keeps Filelock after Test</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-13443</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;I use CamelBlueprintTestSupport for my JUnit Tests. CamelBlueprintTestSupport keeps FileLocks on jar Files in target/test-bundles. Due to this, my Tests fails on Jenkins, because of FileNotFoundException (too many open files). My current workaround is to Run every Test in a single JVM.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13229540">CAMEL-13443</key>
            <summary>Camel Blueprint JUnit Test keeps Filelock after Test</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="FloDev">Florian Wermelskirchen</reporter>
                        <labels>
                    </labels>
                <created>Tue, 23 Apr 2019 08:37:03 +0000</created>
                <updated>Mon, 21 Dec 2020 13:36:07 +0000</updated>
                            <resolved>Mon, 21 Dec 2020 13:36:07 +0000</resolved>
                                    <version>2.23.1</version>
                                    <fixVersion>3.8.0</fixVersion>
                                    <component>camel-blueprint</component>
                    <component>camel-test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16828998" author="davsclaus" created="Mon, 29 Apr 2019 07:42:24 +0000"  >&lt;p&gt;Are you able to find out which files it has a lock on? I wonder if its the test bundle itself, or the karaf bundles or something. eg if the former its maybe something in camel we can fix, but the latter may be in apache felix/karaf etc.&lt;/p&gt;</comment>
                            <comment id="16829059" author="flodev" created="Mon, 29 Apr 2019 09:30:47 +0000"  >&lt;p&gt;One Jar is named like my test Class and it contains only my blueprint.xml in OSGI-INF. The other one is named configAdminInitBundle. I guess they are created in CamelBlueprintHelper createConfigAdminInitBundle and createTestBundle&lt;/p&gt;</comment>
                            <comment id="16829071" author="davsclaus" created="Mon, 29 Apr 2019 09:42:06 +0000"  >&lt;p&gt;Okay try to look in the camel-test-blueprint source code and see if there is some place something needs to be closed when the test stops, there may be some file streams etc that should be closed.&lt;/p&gt;
</comment>
                            <comment id="16901422" author="davsclaus" created="Tue, 6 Aug 2019 20:08:06 +0000"  >&lt;p&gt;What OS platform are you using for your Jenkins?&lt;/p&gt;</comment>
                            <comment id="16901785" author="flodev" created="Wed, 7 Aug 2019 06:56:39 +0000"  >&lt;p&gt;It&#180;s running on openSUSE Leap 15.0&lt;/p&gt;</comment>
                            <comment id="16941636" author="davsclaus" created="Tue, 1 Oct 2019 08:43:03 +0000"  >&lt;p&gt;Yeah it may be a bit more slower now. Anyone able to dive in and try to find out would be appreciated.&lt;/p&gt;</comment>
                            <comment id="17252752" author="davsclaus" created="Mon, 21 Dec 2020 10:23:41 +0000"  >&lt;p&gt;Okay so this is only per unit test that the open files are kept but will be closed when the entire test suite is done. And as such if you run camel-test-blueprint as test itself it may open 400 files to run all its tests.&lt;/p&gt;</comment>
                            <comment id="17252857" author="davsclaus" created="Mon, 21 Dec 2020 13:21:43 +0000"  >&lt;p&gt;Okay have some more code that closes the file handles. But also found out there is a bug in tiny bundle, but switching to a newer 3.0 version that seems to close file handles better.&lt;/p&gt;</comment>
                            <comment id="17252869" author="davsclaus" created="Mon, 21 Dec 2020 13:36:07 +0000"  >&lt;p&gt;Okay the file handles gets closed better now, and running all the tests in camel-test-blueprint does not grow file handles, and they go between 100-250 or so during testing.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 47 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z021hk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>