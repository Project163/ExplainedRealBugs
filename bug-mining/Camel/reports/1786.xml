<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 09:50:32 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-5036] Camel route with bean element sends on startup invalid message to target route that is represented by a proxy who exposes route</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-5036</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;I expose a Camel route with a direct endpoint defined in an OSGi bundle with the &amp;lt;camel:proxy&amp;gt; and &amp;lt;osgi:service&amp;gt; tags. The reason for this is to be able to call this direct-route in other routes (defined in other bundles) as a &quot;sub-route&quot; directly as bean &lt;span class=&quot;error&quot;&gt;&amp;#91;.bean(routeproxy, &amp;quot;method&amp;quot;)&amp;#93;&lt;/span&gt;. This works as expected.&lt;/p&gt;

&lt;p&gt;But on route startup the toString method is called on the route (for a description) which is propagated to the elements of the route. Therefore my bean-element (which is the direct-route-proxy) receives the toString call and the CamelInvocationHandler converts this toString call to a message and sends it to the direct-route. This more or less empty message is of course not valid for the target route and produces an error on bundle startup.  &lt;/p&gt;

&lt;p&gt;Shouldn&apos;t the toString call be suppressed by the proxy, since toString is not part of the Interface the proxy represents? Or is my approach a not recommended or problematic approach?&lt;/p&gt;


&lt;p&gt;Parts of stacktrace to show the way from route startup to the produced message&lt;/p&gt;

&lt;p&gt;=&amp;gt; route receives &quot;empty&quot; message&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;omitted&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.camel.component.direct.DirectProducer.process(DirectProducer.java:45)&lt;br/&gt;
	at org.apache.camel.component.bean.CamelInvocationHandler.invoke(CamelInvocationHandler.java:65)&lt;br/&gt;
	at $Proxy568.toString(Unknown Source)&lt;br/&gt;
	at sun.reflect.GeneratedMethodAccessor406.invoke(Unknown Source)&lt;br/&gt;
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)&lt;br/&gt;
	at java.lang.reflect.Method.invoke(Method.java:597)&lt;br/&gt;
=&amp;gt; toString call is converted to message and sent to route&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;omitted&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:171)&lt;br/&gt;
	at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:204)&lt;br/&gt;
	at $Proxy583.toString(Unknown Source)&lt;br/&gt;
	at org.apache.camel.component.bean.ConstantBeanHolder.toString(ConstantBeanHolder.java:48)&lt;br/&gt;
=&amp;gt; toString called on bean-element in route (bean is a proxy for a route) &lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;omitted&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at java.lang.String.valueOf(String.java:2826)&lt;br/&gt;
	at java.lang.StringBuilder.append(StringBuilder.java:115)&lt;br/&gt;
	at org.apache.camel.impl.EventDrivenConsumerRoute.toString(EventDrivenConsumerRoute.java:46)&lt;br/&gt;
	at org.apache.camel.management.mbean.ManagedRoute.&amp;lt;init&amp;gt;(ManagedRoute.java:41)&lt;br/&gt;
	at org.apache.camel.management.DefaultManagementLifecycleStrategy.onRoutesAdd(DefaultManagementLifecycleStrategy.java:368)&lt;br/&gt;
	at org.apache.camel.impl.RouteService.doStart(RouteService.java:109)&lt;br/&gt;
=&amp;gt; Route startup&lt;/p&gt;</description>
                <environment></environment>
        <key id="12543970">CAMEL-5036</key>
            <summary>Camel route with bean element sends on startup invalid message to target route that is represented by a proxy who exposes route</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="sburkard">Stefan Burkard</reporter>
                        <labels>
                    </labels>
                <created>Fri, 24 Feb 2012 09:44:21 +0000</created>
                <updated>Fri, 24 Feb 2012 15:43:58 +0000</updated>
                            <resolved>Fri, 24 Feb 2012 15:43:58 +0000</resolved>
                                    <version>2.2.0</version>
                                    <fixVersion>2.9.1</fixVersion>
                    <fixVersion>2.10.0</fixVersion>
                                    <component>camel-core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13215684" author="davsclaus" created="Fri, 24 Feb 2012 15:43:58 +0000"  >&lt;p&gt;Changed the toString to avoid calling toString on the bean&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>229208</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 39 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i024lz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>10348</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>