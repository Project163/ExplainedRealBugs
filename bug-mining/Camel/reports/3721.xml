<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:17:34 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-10053] Bindy does not seem to support Cp922 character encoding</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-10053</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;If I use the &lt;tt&gt;charset&lt;/tt&gt; option when consuming from a non UTF8 encoded file and then unmarshal the result using a bindy object the result is either an exception or incorrect data.  Below are some unit tests that illustrate the issue.  The UTF8 ones work, but all of the Cp922 ones fail for a variety of reasons, both using &lt;tt&gt;BindyFixedLengthDataFormat&lt;/tt&gt; and &lt;tt&gt;BindyCsvDataFormat&lt;/tt&gt;.  I have only tested this with Cp922, but it may be the case that other non-standard encodings also exhibit the same behaviour.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.camel.EndpointInject;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.camel.builder.RouteBuilder;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.camel.component.mock.MockEndpoint;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.camel.dataformat.bindy.annotation.CsvRecord;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.camel.dataformat.bindy.annotation.DataField;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.camel.dataformat.bindy.annotation.FixedLengthRecord;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.camel.dataformat.bindy.csv.BindyCsvDataFormat;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.camel.dataformat.bindy.fixed.BindyFixedLengthDataFormat;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.camel.test.junit4.CamelTestSupport;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.junit.After;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.junit.Test;

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.io.IOException;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.nio.file.Files;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.nio.file.Paths;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.util.List;

&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;BindyEncodingTest &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; CamelTestSupport {

    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; RESULT_FIXED_LENGTH_UTF8 = &lt;span class=&quot;code-quote&quot;&gt;&quot;mock:result_fixed_length_utf8&quot;&lt;/span&gt;;
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; RESULT_FIXED_LENGTH_CP922 = &lt;span class=&quot;code-quote&quot;&gt;&quot;mock:result_fixed_length_cp922&quot;&lt;/span&gt;;
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; RESULT_CSV_UTF8 = &lt;span class=&quot;code-quote&quot;&gt;&quot;mock:result_csv_utf8&quot;&lt;/span&gt;;
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; RESULT_CSV_CP922 = &lt;span class=&quot;code-quote&quot;&gt;&quot;mock:result_csv_cp922&quot;&lt;/span&gt;;

    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; TMP = &lt;span class=&quot;code-quote&quot;&gt;&quot;C:/tmp&quot;&lt;/span&gt;;
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; FIXED_LENGTH_UTF8 = &lt;span class=&quot;code-quote&quot;&gt;&quot;BindyEncodingTest.FixedLength.utf8.txt&quot;&lt;/span&gt;;
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; FIXED_LENGTH_CP922 = &lt;span class=&quot;code-quote&quot;&gt;&quot;BindyEncodingTest.FixedLength.cp922.txt&quot;&lt;/span&gt;;
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; CSV_UTF8 = &lt;span class=&quot;code-quote&quot;&gt;&quot;BindyEncodingTest.csv.utf8.txt&quot;&lt;/span&gt;;
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; CSV_CP922 = &lt;span class=&quot;code-quote&quot;&gt;&quot;BindyEncodingTest.csv.cp922.txt&quot;&lt;/span&gt;;

    @EndpointInject(uri = RESULT_FIXED_LENGTH_UTF8)
    &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; MockEndpoint resultEndpointFixedLengthUtf8;

    @EndpointInject(uri = RESULT_FIXED_LENGTH_CP922)
    &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; MockEndpoint resultEndpointFixedLengthCp922;

    @EndpointInject(uri = RESULT_CSV_UTF8)
    &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; MockEndpoint resultEndpointCsvUtf8;

    @EndpointInject(uri = RESULT_CSV_CP922)
    &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; MockEndpoint resultEndpointCsvCp922;

    @Override
    &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; RouteBuilder createRouteBuilder() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; RouteBuilder() {
            @Override
            &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void configure() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
                from(&lt;span class=&quot;code-quote&quot;&gt;&quot;file:&lt;span class=&quot;code-comment&quot;&gt;//&quot;&lt;/span&gt;+TMP+&lt;span class=&quot;code-quote&quot;&gt;&quot;?fileName=&quot;&lt;/span&gt;+ FIXED_LENGTH_UTF8 +&lt;span class=&quot;code-quote&quot;&gt;&quot;&amp;amp;charset=UTF8&quot;&lt;/span&gt;)
&lt;/span&gt;                        .unmarshal(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; BindyFixedLengthDataFormat(FixedLengthBindy.class))
                        .to(RESULT_FIXED_LENGTH_UTF8);

                from(&lt;span class=&quot;code-quote&quot;&gt;&quot;file:&lt;span class=&quot;code-comment&quot;&gt;//&quot;&lt;/span&gt;+TMP+&lt;span class=&quot;code-quote&quot;&gt;&quot;?fileName=&quot;&lt;/span&gt;+ FIXED_LENGTH_CP922 +&lt;span class=&quot;code-quote&quot;&gt;&quot;&amp;amp;charset=Cp922&quot;&lt;/span&gt;)
&lt;/span&gt;                        .unmarshal(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; BindyFixedLengthDataFormat(FixedLengthBindy.class))
                        .to(RESULT_FIXED_LENGTH_CP922);

                from(&lt;span class=&quot;code-quote&quot;&gt;&quot;file:&lt;span class=&quot;code-comment&quot;&gt;//&quot;&lt;/span&gt;+TMP+&lt;span class=&quot;code-quote&quot;&gt;&quot;?fileName=&quot;&lt;/span&gt;+ CSV_UTF8 +&lt;span class=&quot;code-quote&quot;&gt;&quot;&amp;amp;charset=UTF8&quot;&lt;/span&gt;)
&lt;/span&gt;                        .unmarshal(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; BindyCsvDataFormat(CsvBindy.class))
                        .to(RESULT_CSV_UTF8);

                from(&lt;span class=&quot;code-quote&quot;&gt;&quot;file:&lt;span class=&quot;code-comment&quot;&gt;//&quot;&lt;/span&gt;+TMP+&lt;span class=&quot;code-quote&quot;&gt;&quot;?fileName=&quot;&lt;/span&gt;+ CSV_CP922 +&lt;span class=&quot;code-quote&quot;&gt;&quot;&amp;amp;charset=Cp922&quot;&lt;/span&gt;)
&lt;/span&gt;                        .unmarshal(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; BindyCsvDataFormat(CsvBindy.class))
                        .to(RESULT_CSV_CP922);
            }
        };
    }

    @After
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void after() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; InterruptedException {
        assertMockEndpointsSatisfied();
    }

    &lt;span class=&quot;code-comment&quot;&gt;/* works */&lt;/span&gt;
    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void fixedLengthUtf8() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException, InterruptedException {
        &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] input = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[]{
                (&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;)0xC3,(&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;)0x85, &lt;span class=&quot;code-comment&quot;&gt;// &#197;
&lt;/span&gt;                (&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;)0xC3,(&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;)0x98, &lt;span class=&quot;code-comment&quot;&gt;// &#216;
&lt;/span&gt;                (&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;)0xC3,(&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;)0x86, &lt;span class=&quot;code-comment&quot;&gt;// &#198;
&lt;/span&gt;                (&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;)0x33,(&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;)0x34,(&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;)0x35,(&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;)0x36,(&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;)0x37,(&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;)0x38,(&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;)0x39 &lt;span class=&quot;code-comment&quot;&gt;// 3456789
&lt;/span&gt;        };

        writeFile(TMP+&lt;span class=&quot;code-quote&quot;&gt;&quot;/&quot;&lt;/span&gt;+ FIXED_LENGTH_UTF8, input);
        resultEndpointFixedLengthUtf8.expectedMessageCount(1);
        &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.sleep(5000);

        &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; body = resultEndpointFixedLengthUtf8.getExchanges().get(0).getIn().getBody();
        assertTrue(&lt;span class=&quot;code-quote&quot;&gt;&quot;The message body is &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;&quot;&lt;/span&gt;, body != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
        assertTrue(body &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; FixedLengthBindy);
        FixedLengthBindy fixedLengthBindy = (FixedLengthBindy) body;
        assertEquals(&lt;span class=&quot;code-quote&quot;&gt;&quot;First is incorrect&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;&#197;&quot;&lt;/span&gt;,fixedLengthBindy.getFirst());
        assertEquals(&lt;span class=&quot;code-quote&quot;&gt;&quot;Second is incorrect&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;&#216;&#198;&quot;&lt;/span&gt;,fixedLengthBindy.getSecond());
        assertEquals(&lt;span class=&quot;code-quote&quot;&gt;&quot;Third is incorrect&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;345678&quot;&lt;/span&gt;,fixedLengthBindy.getThird());
        assertEquals(&lt;span class=&quot;code-quote&quot;&gt;&quot;Fourth is incorrect&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;9&quot;&lt;/span&gt;,fixedLengthBindy.getFourth());
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(body);
    }

    &lt;span class=&quot;code-comment&quot;&gt;/* fails with java.lang.StringIndexOutOfBoundsException */&lt;/span&gt;
    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void fixedLengthCp922() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException, InterruptedException {
        &lt;span class=&quot;code-comment&quot;&gt;// ftp://ftp.software.ibm.com/software/globalization/gcoc/attachments/CP00922.pdf
&lt;/span&gt;        &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] input = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[]{
                (&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;)0xC5, &lt;span class=&quot;code-comment&quot;&gt;// &#197;
&lt;/span&gt;                (&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;)0xD8, &lt;span class=&quot;code-comment&quot;&gt;// &#216;
&lt;/span&gt;                (&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;)0xC6, &lt;span class=&quot;code-comment&quot;&gt;// &#198;
&lt;/span&gt;                (&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;)0x33,(&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;)0x34,(&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;)0x35,(&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;)0x36,(&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;)0x37,(&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;)0x38,(&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;)0x39 &lt;span class=&quot;code-comment&quot;&gt;// 3456789
&lt;/span&gt;        };

        writeFile(TMP + &lt;span class=&quot;code-quote&quot;&gt;&quot;/&quot;&lt;/span&gt; + FIXED_LENGTH_CP922, input);
        resultEndpointFixedLengthCp922.expectedMessageCount(1);
        &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.sleep(5000);

        &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; body = resultEndpointFixedLengthCp922.getExchanges().get(0).getIn().getBody();
        assertTrue(&lt;span class=&quot;code-quote&quot;&gt;&quot;The message body is &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;&quot;&lt;/span&gt;, body != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
        assertTrue(body &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; FixedLengthBindy);
        FixedLengthBindy fixedLengthBindy = (FixedLengthBindy) body;
        assertEquals(&lt;span class=&quot;code-quote&quot;&gt;&quot;First is incorrect&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;&#197;&quot;&lt;/span&gt;,fixedLengthBindy.getFirst());
        assertEquals(&lt;span class=&quot;code-quote&quot;&gt;&quot;Second is incorrect&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;&#216;&#198;&quot;&lt;/span&gt;,fixedLengthBindy.getSecond());
        assertEquals(&lt;span class=&quot;code-quote&quot;&gt;&quot;Third is incorrect&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;345678&quot;&lt;/span&gt;,fixedLengthBindy.getThird());
        assertEquals(&lt;span class=&quot;code-quote&quot;&gt;&quot;Fourth is incorrect&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;9&quot;&lt;/span&gt;,fixedLengthBindy.getFourth());
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(body);
    }

    &lt;span class=&quot;code-comment&quot;&gt;/* fails as Third is incorrect */&lt;/span&gt;
    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void fixedLengthCp922a() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException, InterruptedException {
        &lt;span class=&quot;code-comment&quot;&gt;// ftp://ftp.software.ibm.com/software/globalization/gcoc/attachments/CP00922.pdf
&lt;/span&gt;        &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] input = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[]{
                (&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;)0x31,(&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;)0x32,(&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;)0x33,(&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;)0x34,(&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;)0x35,(&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;)0x36,(&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;)0x37, &lt;span class=&quot;code-comment&quot;&gt;// 1234567
&lt;/span&gt;                (&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;)0xD8, &lt;span class=&quot;code-comment&quot;&gt;// &#216;
&lt;/span&gt;                (&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;)0xC6, &lt;span class=&quot;code-comment&quot;&gt;// &#198;
&lt;/span&gt;                (&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;)0xC5 &lt;span class=&quot;code-comment&quot;&gt;// &#197;
&lt;/span&gt;        };

        writeFile(TMP + &lt;span class=&quot;code-quote&quot;&gt;&quot;/&quot;&lt;/span&gt; + FIXED_LENGTH_CP922, input);
        resultEndpointFixedLengthCp922.expectedMessageCount(1);
        &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.sleep(5000);

        &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; body = resultEndpointFixedLengthCp922.getExchanges().get(0).getIn().getBody();
        assertTrue(&lt;span class=&quot;code-quote&quot;&gt;&quot;The message body is &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;&quot;&lt;/span&gt;, body != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
        assertTrue(body &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; FixedLengthBindy);
        FixedLengthBindy fixedLengthBindy = (FixedLengthBindy) body;
        assertEquals(&lt;span class=&quot;code-quote&quot;&gt;&quot;First is incorrect&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;1&quot;&lt;/span&gt;,fixedLengthBindy.getFirst());
        assertEquals(&lt;span class=&quot;code-quote&quot;&gt;&quot;Second is incorrect&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;23&quot;&lt;/span&gt;,fixedLengthBindy.getSecond());
        assertEquals(&lt;span class=&quot;code-quote&quot;&gt;&quot;Third is incorrect&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;4567&#216;&#198;&quot;&lt;/span&gt;,fixedLengthBindy.getThird());
        assertEquals(&lt;span class=&quot;code-quote&quot;&gt;&quot;Fourth is incorrect&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;&#197;&quot;&lt;/span&gt;,fixedLengthBindy.getFourth());
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(body);
    }

    &lt;span class=&quot;code-comment&quot;&gt;/* works */&lt;/span&gt;
    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void csvUtf8() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException, InterruptedException {
        &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] input = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[]{
                (&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;)0xC3,(&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;)0x85, &lt;span class=&quot;code-comment&quot;&gt;// &#197;
&lt;/span&gt;                (&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;)0x2C, &lt;span class=&quot;code-comment&quot;&gt;// ,
&lt;/span&gt;                (&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;)0xC3,(&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;)0x98, &lt;span class=&quot;code-comment&quot;&gt;// &#216;
&lt;/span&gt;                (&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;)0xC3,(&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;)0x86, &lt;span class=&quot;code-comment&quot;&gt;// &#198;
&lt;/span&gt;                (&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;)0x2C, &lt;span class=&quot;code-comment&quot;&gt;// ,
&lt;/span&gt;                (&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;)0x33,(&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;)0x34,(&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;)0x35,(&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;)0x36,(&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;)0x37,(&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;)0x38,
                (&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;)0x2C, &lt;span class=&quot;code-comment&quot;&gt;// ,
&lt;/span&gt;                (&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;)0x39 &lt;span class=&quot;code-comment&quot;&gt;// 3456789
&lt;/span&gt;        };

        writeFile(TMP+&lt;span class=&quot;code-quote&quot;&gt;&quot;/&quot;&lt;/span&gt;+ CSV_UTF8, input);
        resultEndpointCsvUtf8.expectedMessageCount(1);
        &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.sleep(5000);

        &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; body = resultEndpointCsvUtf8.getExchanges().get(0).getIn().getBody();
        assertTrue(&lt;span class=&quot;code-quote&quot;&gt;&quot;The message body is &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;&quot;&lt;/span&gt;, body != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
        assertTrue(body &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; CsvBindy);
        CsvBindy csvBindy = (CsvBindy) body;
        assertEquals(&lt;span class=&quot;code-quote&quot;&gt;&quot;First is incorrect&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;&#197;&quot;&lt;/span&gt;,csvBindy.getFirst());
        assertEquals(&lt;span class=&quot;code-quote&quot;&gt;&quot;First is incorrect&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;&#216;&#198;&quot;&lt;/span&gt;,csvBindy.getSecond());
        assertEquals(&lt;span class=&quot;code-quote&quot;&gt;&quot;First is incorrect&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;345678&quot;&lt;/span&gt;,csvBindy.getThird());
        assertEquals(&lt;span class=&quot;code-quote&quot;&gt;&quot;First is incorrect&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;9&quot;&lt;/span&gt;,csvBindy.getFourth());
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(body);
    }

    &lt;span class=&quot;code-comment&quot;&gt;/* fails as First is incorrect */&lt;/span&gt;
    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void csvCp922() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException, InterruptedException {
        &lt;span class=&quot;code-comment&quot;&gt;// ftp://ftp.software.ibm.com/software/globalization/gcoc/attachments/CP00922.pdf
&lt;/span&gt;        &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] input = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[]{
                (&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;)0xC5, &lt;span class=&quot;code-comment&quot;&gt;// &#197;
&lt;/span&gt;                (&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;)0x2C, &lt;span class=&quot;code-comment&quot;&gt;// ,
&lt;/span&gt;                (&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;)0xD8, &lt;span class=&quot;code-comment&quot;&gt;// &#216;
&lt;/span&gt;                (&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;)0xC6, &lt;span class=&quot;code-comment&quot;&gt;// &#198;
&lt;/span&gt;                (&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;)0x2C, &lt;span class=&quot;code-comment&quot;&gt;// ,
&lt;/span&gt;                (&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;)0x33,(&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;)0x34,(&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;)0x35,(&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;)0x36,(&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;)0x37,(&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;)0x38, &lt;span class=&quot;code-comment&quot;&gt;// 345678
&lt;/span&gt;                (&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;)0x2C, &lt;span class=&quot;code-comment&quot;&gt;// ,
&lt;/span&gt;                (&lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;)0x39  &lt;span class=&quot;code-comment&quot;&gt;// 9
&lt;/span&gt;        };

        writeFile(TMP+&lt;span class=&quot;code-quote&quot;&gt;&quot;/&quot;&lt;/span&gt;+ CSV_CP922, input);
        resultEndpointCsvCp922.expectedMessageCount(1);
        &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.sleep(5000);

        &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; body = resultEndpointCsvCp922.getExchanges().get(0).getIn().getBody();
        assertTrue(&lt;span class=&quot;code-quote&quot;&gt;&quot;The message body is &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;&quot;&lt;/span&gt;, body != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
        assertTrue(&lt;span class=&quot;code-quote&quot;&gt;&quot;body is not List it is &quot;&lt;/span&gt;+body.getClass(), body &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; List);
        List&amp;lt;?&amp;gt; list = (List&amp;lt;?&amp;gt;)body;
        assertEquals(&lt;span class=&quot;code-quote&quot;&gt;&quot;incorrect list size&quot;&lt;/span&gt;, 2, list.size());
        CsvBindy csvBindy = (CsvBindy) list.get(0);
        assertEquals(&lt;span class=&quot;code-quote&quot;&gt;&quot;First is incorrect&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;&#197;&quot;&lt;/span&gt;,csvBindy.getFirst());
        assertEquals(&lt;span class=&quot;code-quote&quot;&gt;&quot;First is incorrect&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;&#216;&#198;&quot;&lt;/span&gt;,csvBindy.getSecond());
        assertEquals(&lt;span class=&quot;code-quote&quot;&gt;&quot;First is incorrect&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;345678&quot;&lt;/span&gt;,csvBindy.getThird());
        assertEquals(&lt;span class=&quot;code-quote&quot;&gt;&quot;First is incorrect&quot;&lt;/span&gt;,&lt;span class=&quot;code-quote&quot;&gt;&quot;9&quot;&lt;/span&gt;,csvBindy.getFourth());
        &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(body);
    }

    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; void writeFile(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; path, &lt;span class=&quot;code-object&quot;&gt;byte&lt;/span&gt;[] content) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
        Files.write(Paths.get(path),content);
    }

    @FixedLengthRecord(ignoreTrailingChars = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;)
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;FixedLengthBindy {
        @DataField(pos = 1, length = 1) &lt;span class=&quot;code-comment&quot;&gt;// 1
&lt;/span&gt;        &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; first;

        @DataField(pos = 2, length = 2) &lt;span class=&quot;code-comment&quot;&gt;// 2 - 3
&lt;/span&gt;        &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; second;

        @DataField(pos = 3, length = 6) &lt;span class=&quot;code-comment&quot;&gt;// 4 - 9
&lt;/span&gt;        &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; third;

        @DataField(pos = 4, length = 1) &lt;span class=&quot;code-comment&quot;&gt;// 10
&lt;/span&gt;        &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; fourth;

        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; getFirst() {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; first;
        }

        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void setFirst(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; first) {
            &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.first = first;
        }

        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; getSecond() {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; second;
        }

        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void setSecond(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; second) {
            &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.second = second;
        }

        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; getThird() {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; third;
        }

        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void setThird(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; third) {
            &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.third = third;
        }

        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; getFourth() {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; fourth;
        }

        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void setFourth(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; fourth) {
            &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.fourth = fourth;
        }

        @Override
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; toString() {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;FixedLengthBindy{&quot;&lt;/span&gt; +
                    &lt;span class=&quot;code-quote&quot;&gt;&quot;first=&lt;span class=&quot;code-quote&quot;&gt;&apos;&quot;&lt;/span&gt; + first + &apos;&lt;/span&gt;\&apos;&apos; +
                    &lt;span class=&quot;code-quote&quot;&gt;&quot;, second=&lt;span class=&quot;code-quote&quot;&gt;&apos;&quot;&lt;/span&gt; + second + &apos;&lt;/span&gt;\&apos;&apos; +
                    &lt;span class=&quot;code-quote&quot;&gt;&quot;, third=&lt;span class=&quot;code-quote&quot;&gt;&apos;&quot;&lt;/span&gt; + third + &apos;&lt;/span&gt;\&apos;&apos; +
                    &lt;span class=&quot;code-quote&quot;&gt;&quot;, fourth=&lt;span class=&quot;code-quote&quot;&gt;&apos;&quot;&lt;/span&gt; + fourth + &apos;&lt;/span&gt;\&apos;&apos; +
                    &lt;span class=&quot;code-quote&quot;&gt;&apos;}&apos;&lt;/span&gt;;
        }
    }

    @CsvRecord(separator = &lt;span class=&quot;code-quote&quot;&gt;&quot;,&quot;&lt;/span&gt;, skipFirstLine = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;)
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;CsvBindy{
        @DataField(pos = 1)
        &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; first;
        @DataField(pos = 2)
        &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; second;
        @DataField(pos = 3)
        &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; third;
        @DataField(pos = 4)
        &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; fourth;

        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; getFirst() {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; first;
        }

        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void setFirst(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; first) {
            &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.first = first;
        }

        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; getSecond() {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; second;
        }

        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void setSecond(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; second) {
            &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.second = second;
        }

        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; getThird() {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; third;
        }

        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void setThird(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; third) {
            &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.third = third;
        }

        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; getFourth() {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; fourth;
        }

        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void setFourth(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; fourth) {
            &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.fourth = fourth;
        }

        @Override
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; toString() {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;CsvBindy{&quot;&lt;/span&gt; +
                    &lt;span class=&quot;code-quote&quot;&gt;&quot;first=&lt;span class=&quot;code-quote&quot;&gt;&apos;&quot;&lt;/span&gt; + first + &apos;&lt;/span&gt;\&apos;&apos; +
                    &lt;span class=&quot;code-quote&quot;&gt;&quot;, second=&lt;span class=&quot;code-quote&quot;&gt;&apos;&quot;&lt;/span&gt; + second + &apos;&lt;/span&gt;\&apos;&apos; +
                    &lt;span class=&quot;code-quote&quot;&gt;&quot;, third=&lt;span class=&quot;code-quote&quot;&gt;&apos;&quot;&lt;/span&gt; + third + &apos;&lt;/span&gt;\&apos;&apos; +
                    &lt;span class=&quot;code-quote&quot;&gt;&quot;, fourth=&lt;span class=&quot;code-quote&quot;&gt;&apos;&quot;&lt;/span&gt; + fourth + &apos;&lt;/span&gt;\&apos;&apos; +
                    &lt;span class=&quot;code-quote&quot;&gt;&apos;}&apos;&lt;/span&gt;;
        }
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The relevant parts of the pom:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;properties&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;camel.version&amp;gt;&lt;/span&gt;2.16.2&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/camel.version&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/properties&amp;gt;&lt;/span&gt;
    ...
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;build&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;plugins&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;plugin&amp;gt;&lt;/span&gt;
                &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.apache.maven.plugins&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
                &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;maven-compiler-plugin&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
                &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;2.5.1&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
                &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;configuration&amp;gt;&lt;/span&gt;
                    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;source&amp;gt;&lt;/span&gt;1.7&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/source&amp;gt;&lt;/span&gt;
                    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;target&amp;gt;&lt;/span&gt;1.7&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/target&amp;gt;&lt;/span&gt;
                &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/configuration&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/plugin&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/plugins&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/build&amp;gt;&lt;/span&gt;

    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;dependencies&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.apache.camel&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;camel-core&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;${camel.version}&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.apache.camel&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;camel-bindy&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;${camel.version}&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.apache.camel&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;camel-jackson&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;${camel.version}&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.apache.camel&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;camel-test&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;${camel.version}&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;scope&amp;gt;&lt;/span&gt;test&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/scope&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;commons-lang&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;commons-lang&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;2.6&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;commons-io&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;commons-io&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;2.4&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.slf4j&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;slf4j-jdk14&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;1.7.21&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/dependencies&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Note that the tests write to the filesystem, defaulting to &lt;tt&gt;C:/tmp&lt;/tt&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12978228">CAMEL-10053</key>
            <summary>Bindy does not seem to support Cp922 character encoding</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="10004">Not A Bug</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="david+apache@cornforth.net">David Cornforth</reporter>
                        <labels>
                    </labels>
                <created>Mon, 13 Jun 2016 17:05:59 +0000</created>
                <updated>Thu, 16 Jun 2016 07:29:19 +0000</updated>
                            <resolved>Wed, 15 Jun 2016 20:46:42 +0000</resolved>
                                    <version>2.16.2</version>
                                                    <component>camel-bindy</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15330015" author="anoordover" created="Tue, 14 Jun 2016 17:49:20 +0000"  >&lt;p&gt;I don&apos;t know how to solve this yet, but my guess is that the file-endpoint converts your Cp922 file to a UTF-8 stream.&lt;br/&gt;
In the unmarshal method the InputStream is wrapped in a InputStreamReader using the characterset defined in the exchange (Cp922).&lt;br/&gt;
I guess the conversion from Cp922 to UTF-8 is done twice.&lt;br/&gt;
I don&apos;t know how to detect that this conversion is already taken care of.&lt;/p&gt;</comment>
                            <comment id="15330802" author="anoordover" created="Tue, 14 Jun 2016 22:47:30 +0000"  >&lt;p&gt;The function you want isn&apos;t easy to implement in camel-bindy.&lt;br/&gt;
Camel-bindy can&apos;t know for sure if a transformation to another characterset is already done as with the file inbound-endpoint.&lt;br/&gt;
To tell bindy not to transform again you could remove the property containing the charset by adding the line:&lt;br/&gt;
                        .removeProperty(Exchange.CHARSET_NAME)&lt;br/&gt;
before the unmarshal step.&lt;br/&gt;
I think the best strategy is to let the developer of the route tell camel-bindy to transform or not by adding or removing the correct propery or header.&lt;/p&gt;</comment>
                            <comment id="15331476" author="david+apache@cornforth.net" created="Wed, 15 Jun 2016 10:06:30 +0000"  >&lt;p&gt;Thanks for looking at it &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=anoordover&quot; class=&quot;user-hover&quot; rel=&quot;anoordover&quot;&gt;anoordover&lt;/a&gt;, you are correct that adding &lt;tt&gt;.removeProperty(Exchange.CHARSET_NAME)&lt;/tt&gt; to the route after the &lt;tt&gt;from(&quot;file:....&quot;)&lt;/tt&gt; step and before the &lt;tt&gt;unmarshall&lt;/tt&gt; has cleared up the errors.&lt;/p&gt;

&lt;p&gt;I was not aware that Bindy would perform any character encoding manipulation as part of its processing though.  I can&apos;t see anything on the &lt;a href=&quot;http://camel.apache.org/bindy.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;documentation&lt;/a&gt; that mentions its support for changing the charset as part of the bindy processing.  Perhaps if this issue is difficult to solve with a code change, it could be handled with a documentaiton update to make it clear that Bindy will use the property if it is set?&lt;/p&gt;

&lt;p&gt;Thanks again for your time.&lt;/p&gt;</comment>
                            <comment id="15332518" author="githubbot" created="Wed, 15 Jun 2016 20:45:04 +0000"  >&lt;p&gt;GitHub user anoordover opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/1038&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/1038&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-10053&quot; title=&quot;Bindy does not seem to support Cp922 character encoding&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-10053&quot;&gt;&lt;del&gt;CAMEL-10053&lt;/del&gt;&lt;/a&gt;: added note to documentation about characterset-conversio&#8230;&lt;/p&gt;

&lt;p&gt;    Tried to document the behaviour seen with &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-10053&quot; title=&quot;Bindy does not seem to support Cp922 character encoding&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-10053&quot;&gt;&lt;del&gt;CAMEL-10053&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    I will close the issue.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/anoordover/camel&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/anoordover/camel&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-10053&quot; title=&quot;Bindy does not seem to support Cp922 character encoding&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-10053&quot;&gt;&lt;del&gt;CAMEL-10053&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/1038.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/1038.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #1038&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit b21051909a8a3417279421f4576869e326c5a827&lt;br/&gt;
Author: Arno Noordover &amp;lt;anoordover@users.noreply.github.com&amp;gt;&lt;br/&gt;
Date:   2016-06-15T20:36:36Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-10053&quot; title=&quot;Bindy does not seem to support Cp922 character encoding&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-10053&quot;&gt;&lt;del&gt;CAMEL-10053&lt;/del&gt;&lt;/a&gt;: added note to documentation about characterset-conversion and removal of header/property&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15332523" author="anoordover" created="Wed, 15 Jun 2016 20:46:42 +0000"  >&lt;p&gt;See previous comments.&lt;br/&gt;
The developer can remove the characterset header and/or property to suppress the conversion being done twice.&lt;/p&gt;</comment>
                            <comment id="15333283" author="githubbot" created="Thu, 16 Jun 2016 07:29:19 +0000"  >&lt;p&gt;Github user anoordover closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/1038&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/1038&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 22 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ze7b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>