<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 09:28:44 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-927] Double input without output produce exception</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-927</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;Turn trace on.&lt;br/&gt;
Run this route:&lt;br/&gt;
		from(&quot;timer://kickoff_1?period=10000&amp;amp;delay=1&quot;);&lt;br/&gt;
As expected there is output from Trace Interceptor every 10 sec.&lt;/p&gt;

&lt;p&gt;Now run this route:&lt;br/&gt;
		from(&quot;timer://kickoff_1?period=10000&amp;amp;delay=1&quot;).&lt;br/&gt;
		from(&quot;timer://kickoff_2?period=10000&amp;amp;delay=2&quot;);&lt;br/&gt;
You will get exception:&lt;br/&gt;
2008-09-22 06:03:01,871 &lt;span class=&quot;error&quot;&gt;&amp;#91;d=10000&amp;amp;delay=2&amp;#93;&lt;/span&gt; INFO  TraceInterceptor               - ID-ubuntu/50540-1222063381751/2-1 -&amp;gt; interceptor1 Interceptor&lt;span class=&quot;error&quot;&gt;&amp;#91;Delegate(null)&amp;#93;&lt;/span&gt; InOnly Properties:&lt;/p&gt;
{org.apache.camel.timer.name=kickoff_2, org.apache.camel.timer.firedTime=Mon Sep 22 06:03:01 GMT 2008, org.apache.camel.timer.period=10000}
&lt;p&gt; Headers:&lt;/p&gt;
{firedTime=Mon Sep 22 06:03:01 GMT 2008}
&lt;p&gt; BodyType:null Body:Message: null&lt;br/&gt;
2008-09-22 06:03:01,872 &lt;span class=&quot;error&quot;&gt;&amp;#91;d=10000&amp;amp;delay=2&amp;#93;&lt;/span&gt; ERROR DeadLetterChannel              - Failed delivery for exchangeId: ID-ubuntu/50540-1222063381751/0-0. On delivery attempt: 0 caught: java.lang.NullPointerException&lt;br/&gt;
java.lang.NullPointerException&lt;br/&gt;
	at org.apache.camel.management.InstrumentationProcessor.process(InstrumentationProcessor.java:69)&lt;br/&gt;
	at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:41)&lt;br/&gt;
	at org.apache.camel.management.InstrumentationProcessor.process(InstrumentationProcessor.java:50)&lt;br/&gt;
	at org.apache.camel.processor.DelegateProcessor.processNext(DelegateProcessor.java:50)&lt;br/&gt;
	at org.apache.camel.processor.DelegateProcessor.proceed(DelegateProcessor.java:79)&lt;br/&gt;
	at org.apache.camel.processor.interceptor.TraceInterceptor.process(TraceInterceptor.java:67)&lt;br/&gt;
	at org.apache.camel.management.InstrumentationProcessor.process(InstrumentationProcessor.java:69)&lt;br/&gt;
	at org.apache.camel.processor.DeadLetterChannel.process(DeadLetterChannel.java:174)&lt;br/&gt;
	at org.apache.camel.processor.DeadLetterChannel.process(DeadLetterChannel.java:96)&lt;br/&gt;
	at org.apache.camel.management.InstrumentationProcessor.process(InstrumentationProcessor.java:57)&lt;br/&gt;
	at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:41)&lt;br/&gt;
	at org.apache.camel.management.InstrumentationProcessor.process(InstrumentationProcessor.java:50)&lt;br/&gt;
	at org.apache.camel.processor.DelegateProcessor.processNext(DelegateProcessor.java:50)&lt;br/&gt;
	at org.apache.camel.processor.DelegateProcessor.proceed(DelegateProcessor.java:79)&lt;br/&gt;
	at org.apache.camel.processor.interceptor.TraceInterceptor.process(TraceInterceptor.java:67)&lt;br/&gt;
	at org.apache.camel.impl.converter.AsyncProcessorTypeConverter$ProcessorToAsyncProcessorBridge.process(AsyncProcessorTypeConverter.java:43)&lt;br/&gt;
	at org.apache.camel.processor.UnitOfWorkProcessor.process(UnitOfWorkProcessor.java:39)&lt;br/&gt;
	at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:41)&lt;br/&gt;
	at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:66)&lt;br/&gt;
	at org.apache.camel.component.timer.TimerConsumer.sendTimerExchange(TimerConsumer.java:98)&lt;br/&gt;
	at org.apache.camel.component.timer.TimerConsumer$1.run(TimerConsumer.java:49)&lt;br/&gt;
	at java.util.TimerThread.mainLoop(Timer.java:512)&lt;br/&gt;
	at java.util.TimerThread.run(Timer.java:462)&lt;/p&gt;


&lt;p&gt;Why single input works fine and two produce an exception?&lt;/p&gt;</description>
                <environment></environment>
        <key id="12485983">CAMEL-927</key>
            <summary>Double input without output produce exception</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="vchekan">Vadim Chekan</reporter>
                        <labels>
                    </labels>
                <created>Mon, 22 Sep 2008 06:09:04 +0000</created>
                <updated>Mon, 16 Feb 2009 05:51:53 +0000</updated>
                            <resolved>Sun, 28 Sep 2008 08:35:56 +0000</resolved>
                                    <version>1.5.0</version>
                                    <fixVersion>1.5.0</fixVersion>
                                    <component>camel-core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12948915" author="davsclaus" created="Mon, 22 Sep 2008 08:58:42 +0000"  >&lt;p&gt;Vadim I have tried to reproduce the bug with an unit test.&lt;br/&gt;
camel-core\src\test\java\org\apache\camel\issues\TwoTimerWithJMSIssue.java&lt;br/&gt;
I can not provoke the error. &lt;/p&gt;

&lt;p&gt;Can you get the error every time? What is your route, isn&apos;t there any destination from the timer? = i.e. there is no TO&lt;/p&gt;</comment>
                            <comment id="12948908" author="vchekan" created="Tue, 23 Sep 2008 03:58:27 +0000"  >&lt;p&gt;I upgraded to the current trunk and I still see exception every time I run it.&lt;br/&gt;
Claus, there is a bug in the unit test: in my 2nd example two routes are concatenated by dot, not by semicolon. In other words it is a single java statement. Could you check it please? If you still can not reproduce it then I&apos;ll keep digging.&lt;br/&gt;
Yes, when there is any output then double input works fine. I&apos;m playing with my DSL and I&apos;m testing weird combinations &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12948893" author="davsclaus" created="Tue, 23 Sep 2008 06:16:59 +0000"  >&lt;p&gt;Ah so you are actually making silly routes as:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;from(x).from(y);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Okay then there could of course be some quirks.&lt;/p&gt;</comment>
                            <comment id="12948873" author="davsclaus" created="Wed, 24 Sep 2008 07:53:04 +0000"  >&lt;p&gt;Vadim and others&lt;/p&gt;

&lt;p&gt;I think we should add a check in the builder when you do silly stacks so as:&lt;br/&gt;
from().from()&lt;/p&gt;

&lt;p&gt;we should raise an exception stating its not valid to do like this.&lt;/p&gt;

&lt;p&gt;Any thoughts?&lt;/p&gt;

&lt;p&gt;We have a few of those checks for other bad combos.&lt;/p&gt;</comment>
                            <comment id="12948952" author="davsclaus" created="Wed, 24 Sep 2008 13:13:49 +0000"  >&lt;p&gt;Ah of course you can stack inputs as well &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;so from().from() should basically be supported. But the don&apos;t have outputs and thus causes the bug&lt;/p&gt;</comment>
                            <comment id="12948944" author="davsclaus" created="Wed, 24 Sep 2008 13:17:16 +0000"  >&lt;p&gt;Ah the culprit is the JMX stuff that assumes that there is an output. &lt;/p&gt;</comment>
                            <comment id="12948957" author="davsclaus" created="Thu, 25 Sep 2008 06:37:10 +0000"  >&lt;p&gt;TODO: Add unit tests with multi inputs&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;from&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/error.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;.from&lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/thumbs_up.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/li&gt;
	&lt;li&gt;from(x, y)&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12948964" author="vchekan" created="Thu, 25 Sep 2008 17:22:37 +0000"  >&lt;p&gt;Well, I filed this bug not because I worry about selseless combo from().from(); but because I see some inconsistency in error handling.&lt;/p&gt;

&lt;p&gt;In case of &quot;from();&quot; there is the same exception happen internally. A processor tries to call the next processor withing the chain and fails with NPE. This exception is intercepted and message is marked as &quot;failed&quot;. But you can not see anything wrong logged to the console. But in case of double inputs, exception becomes visible.&lt;br/&gt;
So I suspect that actually &quot;from.from&quot; produces correct behavior when &quot;from&quot; hides an error.&lt;/p&gt;

&lt;p&gt;I don&apos;t think that &quot;from.from&quot; is totally bogus. Lets say we want to drain some data source and we are not interested in the result.&lt;/p&gt;

&lt;p&gt;Am I right that processes shoud call this.proceed instead of calling next processor in the chain explicitly? Anyway, my concern is invisible exception in the single &quot;from&quot; case. There is still NPE happening, why I can&apos;t see it in the output?&lt;/p&gt;</comment>
                            <comment id="12948995" author="davsclaus" created="Sun, 28 Sep 2008 07:59:23 +0000"  >&lt;p&gt;Vadim, that is a valid use-case but I guess its seldom used.&lt;/p&gt;

&lt;p&gt;However a NPE is a NPE and its in camel-core so we should fix it. It happends because of the JMX instruments the routing and assumes it can process it to the next in the chain.&lt;/p&gt;
</comment>
                            <comment id="12950780" author="davsclaus" created="Mon, 16 Feb 2009 05:51:53 +0000"  >&lt;p&gt;Closing all 1.5.0 issues&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>83350</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 41 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i01f9b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6241</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>