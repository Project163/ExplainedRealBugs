<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:10:22 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-9026] ClassNotFoundException: kafka.serializer.StringEncoder</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-9026</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;KafkaEndpoint cannot load the StringEncoder because we do not expose the Kafka API to user code. It&apos;s an implementation detail of the camel-kafka component and only visible to that class loader&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Caused by: java.lang.ClassNotFoundException: kafka.serializer.StringEncoder
	at org.apache.camel.impl.DefaultClassResolver.resolveMandatoryClass(DefaultClassResolver.java:80)
	at org.apache.camel.component.kafka.KafkaEndpoint.createProducer(KafkaEndpoint.java:83)
	at org.apache.camel.impl.ProducerCache.doGetProducer(ProducerCache.java:431)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12849345">CAMEL-9026</key>
            <summary>ClassNotFoundException: kafka.serializer.StringEncoder</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="acosentino">Andrea Cosentino</assignee>
                                    <reporter username="tdiesler">Thomas Diesler</reporter>
                        <labels>
                    </labels>
                <created>Mon, 27 Jul 2015 15:19:52 +0000</created>
                <updated>Wed, 29 Jul 2015 20:37:08 +0000</updated>
                            <resolved>Mon, 27 Jul 2015 15:41:06 +0000</resolved>
                                                    <fixVersion>2.16.0</fixVersion>
                                    <component>camel-kafka</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14642869" author="githubbot" created="Mon, 27 Jul 2015 15:28:46 +0000"  >&lt;p&gt;GitHub user tdiesler opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/571&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/571&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-9026&quot; title=&quot;ClassNotFoundException: kafka.serializer.StringEncoder&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-9026&quot;&gt;&lt;del&gt;CAMEL-9026&lt;/del&gt;&lt;/a&gt; ClassNotFoundException: kafka.serializer.StringEncoder&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-9026&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/CAMEL-9026&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/tdiesler/camel&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/tdiesler/camel&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-9026&quot; title=&quot;ClassNotFoundException: kafka.serializer.StringEncoder&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-9026&quot;&gt;&lt;del&gt;CAMEL-9026&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/571.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/571.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #571&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit fff0de295c954064b11f6375ffb84aa9dea9c26e&lt;br/&gt;
Author: Thomas Diesler &amp;lt;thomas.diesler@jboss.com&amp;gt;&lt;br/&gt;
Date:   2015-07-27T15:21:11Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-9026&quot; title=&quot;ClassNotFoundException: kafka.serializer.StringEncoder&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-9026&quot;&gt;&lt;del&gt;CAMEL-9026&lt;/del&gt;&lt;/a&gt; ClassNotFoundException: kafka.serializer.StringEncoder&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14642888" author="ancosen" created="Mon, 27 Jul 2015 15:41:22 +0000"  >&lt;p&gt;Thank you very much Thomas &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14643972" author="githubbot" created="Tue, 28 Jul 2015 07:18:41 +0000"  >&lt;p&gt;Github user tdiesler closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/571&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/571&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14645043" author="mmindenhall" created="Tue, 28 Jul 2015 21:05:57 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ancosen&quot; class=&quot;user-hover&quot; rel=&quot;ancosen&quot;&gt;ancosen&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tdiesler&quot; class=&quot;user-hover&quot; rel=&quot;tdiesler&quot;&gt;tdiesler&lt;/a&gt;, I saw discussion of this go by in camel-dev, and have a couple of questions.&lt;/p&gt;

&lt;p&gt;First, I&apos;m concerned that this might have somehow been caused by the patch I submitted for &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-8790&quot; title=&quot;Kafka producer hard coded to use Strings&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-8790&quot;&gt;&lt;del&gt;CAMEL-8790&lt;/del&gt;&lt;/a&gt;.  However, there&apos;s a test in &lt;tt&gt;org.apache.camel.component.kafka.KafkaProducerFullTest&lt;/tt&gt; that uses &lt;tt&gt;kafka.serializer.StringEncoder&lt;/tt&gt;, and that test passes without this patch.  So I&apos;m wondering if you can provide more details about the route configuration that resulted in the exception?&lt;/p&gt;

&lt;p&gt;Second, the patch for &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-8790&quot; title=&quot;Kafka producer hard coded to use Strings&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-8790&quot;&gt;&lt;del&gt;CAMEL-8790&lt;/del&gt;&lt;/a&gt; was backported to the 2.15.x branch...can this be backported as well?  It should merge cleanly, and if I was the cause, either this patch needs to be merged or my patch reverted from 2.15.x to avoid breaking things for existing 2.15.x users.&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;</comment>
                            <comment id="14645513" author="ancosen" created="Wed, 29 Jul 2015 06:05:21 +0000"  >&lt;p&gt;Hi Mark. Yeah for sure, I will backport on 2.15.x branch in the evening. I forget to backport when I&apos;ve merged the PR.&lt;/p&gt;</comment>
                            <comment id="14645664" author="tdiesler" created="Wed, 29 Jul 2015 07:59:37 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ancosen&quot; class=&quot;user-hover&quot; rel=&quot;ancosen&quot;&gt;ancosen&lt;/a&gt; I suspect your run your test with a flat surefire classpath. In which case the test sees the transitive tree of mvn dependencies in scope test, provided, compile. If you do the same thing in a modular environment (i.e. wildfly) it would behave very differently. &lt;/p&gt;

&lt;p&gt;Although it is reasonable to assume that a deployment can see camel-kafka APIs, it is incorrect to assume that camel-kafka can use the deployments classloader to load internals that only camel-kafka should see.&lt;/p&gt;

&lt;p&gt;The handling/caching of classloaders in Kafka is a tragedy as well as it reliance on a particular TCCL. An API that works well in a modular environment makes little assumptions about classloaders. Instead it provides the caller with a means to pass in a CL of its choice.&lt;/p&gt;

&lt;p&gt;In this particular case, camel-kafka would want to pass to Kafka its own CL to load the StringEncoder&lt;/p&gt;</comment>
                            <comment id="14645709" author="ancosen" created="Wed, 29 Jul 2015 08:41:48 +0000"  >&lt;p&gt;Hi Thomas, I think you were referring to Mark and not to me &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14646601" author="ancosen" created="Wed, 29 Jul 2015 18:48:58 +0000"  >&lt;p&gt;Backported on branch 2.15.x &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="14646721" author="mmindenhall" created="Wed, 29 Jul 2015 20:37:08 +0000"  >&lt;p&gt;Thanks for the explanation...sounds like it was unrelated to my patch.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 16 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2hz07:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>