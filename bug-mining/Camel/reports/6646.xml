<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 11:04:13 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-20334] AWS S3 cloudevents data type does not set proper data Content-Type</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-20334</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;Having a&#160;&lt;tt&gt;Kamelet&lt;/tt&gt;&#160;/&#160;&lt;tt&gt;Pipe&lt;/tt&gt;, such as:&lt;/p&gt;

&lt;p&gt;&#160;&lt;br/&gt;
apiVersion: camel.apache.org/v1kind: Pipemetadata:  name: aws-s3-source-pipeannotations:    trait.camel.apache.org/camel.runtime-version: 3.6.0spec:  integration:    dependencies:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&quot;camel:cloudevents&quot;source:    ref:      kind: KameletapiVersion: camel.apache.org/v1name: aws-s3-sourceproperties:      ... some secretsdataTypes:      out:        scheme: aws2-s3format: application-cloudeventssink:    dataTypes:      in:        scheme: httpformat: application-cloudeventsref:      kind: BrokerapiVersion: eventing.knative.dev/v1name: kamelet&lt;br/&gt;
&#160;&lt;br/&gt;
I get the following exception from Quarkus Funqy, when trying to process the emitted Cloudevents:
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2024-01-11 16:09:51,563 ERROR [io.qua.ver.htt.run.QuarkusErrorHandler] (executor-thread-1) HTTP Request to / failed, error id: af846418-99ec-4a1a-a4af-ec9192906b2f-1: io.quarkus.funqy.runtime.ApplicationException: java.lang.RuntimeException: Don&apos;t know how to get event data (dataContentType: &apos;null&apos;, javaType: &apos;functions.Input&apos;).
test-four-00001-deployment-6b5d6c7f69-flk8p user-container &#160; &#160; at io.quarkus.funqy.runtime.FunctionInvoker.invoke(FunctionInvoker.java:136)
test-four-00001-deployment-6b5d6c7f69-flk8p user-container &#160; &#160; at io.quarkus.funqy.runtime.bindings.knative.events.VertxRequestHandler.dispatch(VertxRequestHandler.java:571)&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I see similar then I have a different (e.g.&#160;&lt;tt&gt;go&lt;/tt&gt;) receiver that prints the request:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;test-three-00001-deployment-54dc897c99-2qgzk user-container Received request
test-three-00001-deployment-54dc897c99-2qgzk user-container POST / HTTP/1.1 test-three.default.svc.cluster.local
test-three-00001-deployment-54dc897c99-2qgzk user-container &#160; Ce-Id: 8B49F74E586030C-0000000000000009
test-three-00001-deployment-54dc897c99-2qgzk user-container &#160; Ce-Specversion: 1.0
test-three-00001-deployment-54dc897c99-2qgzk user-container &#160; X-Forwarded-For: 10.244.0.23, 10.244.0.18
test-three-00001-deployment-54dc897c99-2qgzk user-container &#160; User-Agent: Go-http-client/1.1
test-three-00001-deployment-54dc897c99-2qgzk user-container &#160; Ce-Subject: IMG_3339.jpg
test-three-00001-deployment-54dc897c99-2qgzk user-container &#160; Ce-Time: 2024-01-11T15:08:42.013Z
test-three-00001-deployment-54dc897c99-2qgzk user-container &#160; Forwarded: for=10.244.0.23;proto=http
test-three-00001-deployment-54dc897c99-2qgzk user-container &#160; Prefer: reply
test-three-00001-deployment-54dc897c99-2qgzk user-container &#160; Accept-Encoding: gzip
test-three-00001-deployment-54dc897c99-2qgzk user-container &#160; Ce-Type: org.apache.camel.event.....
test-three-00001-deployment-54dc897c99-2qgzk user-container &#160; X-Request-Id: 2946fb28-f697-4406-9e71-80fb30e3b99a
test-three-00001-deployment-54dc897c99-2qgzk user-container &#160; Content-Length: 883527
test-three-00001-deployment-54dc897c99-2qgzk user-container &#160; Ce-Knativearrivaltime: 2024-01-11T15:08:42.188499068Z
test-three-00001-deployment-54dc897c99-2qgzk user-container &#160; Ce-Source: .bucket.foobar
test-three-00001-deployment-54dc897c99-2qgzk user-container &#160; K-Proxy-Request: activator
test-three-00001-deployment-54dc897c99-2qgzk user-container &#160; Kn-Namespace: default
test-three-00001-deployment-54dc897c99-2qgzk user-container &#160; Traceparent: 00-7ce27116bb576a804f841c7892e8f245-d3e77ecd9906bffa-00
test-three-00001-deployment-54dc897c99-2qgzk user-container &#160; X-Forwarded-Proto: http&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="13564482">CAMEL-20334</key>
            <summary>AWS S3 cloudevents data type does not set proper data Content-Type</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="acosentino">Andrea Cosentino</assignee>
                                    <reporter username="christophd">Christoph Deppisch</reporter>
                        <labels>
                    </labels>
                <created>Fri, 12 Jan 2024 10:10:52 +0000</created>
                <updated>Fri, 12 Jan 2024 13:00:47 +0000</updated>
                            <resolved>Fri, 12 Jan 2024 13:00:47 +0000</resolved>
                                    <version>4.3.0</version>
                                    <fixVersion>4.4.0</fixVersion>
                                    <component>camel-aws2</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17805975" author="christophd" created="Fri, 12 Jan 2024 10:12:22 +0000"  >&lt;p&gt;Initially raised on Kamelets &lt;a href=&quot;https://github.com/apache/camel-kamelets/issues/1828&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel-kamelets/issues/1828&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17805976" author="christophd" created="Fri, 12 Jan 2024 10:14:05 +0000"  >&lt;p&gt;The cloudevents data type transformers need to set proper CamelCloudEventDataContentType header with the Content-Type of the data being processed&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 43 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1mpqg:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>