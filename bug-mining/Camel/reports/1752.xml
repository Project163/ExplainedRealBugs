<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 09:50:01 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-4942] exchange.getIn().getBody(&lt;SomeClass&gt;.class) throws an exception for Jaxb model objects</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-4942</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;exchange.getIn().getBody(Foo.class);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;should return a Foo instance or null, if no suitable type converter is available. The java doc says: &quot;return the body of the message as the specified type, or &amp;lt;tt&amp;gt;null&amp;lt;/tt&amp;gt; if not possible to convert&quot;&lt;/p&gt;

&lt;p&gt;If Foo is an Jaxb object model, this method call:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;throws an org.xml.sax.SAXParseException if the body content is a string&lt;/li&gt;
	&lt;li&gt;throws a javax.xml.bind.UnmarshalException if the body content is another Jaxb model object&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Please have a look on the attached sample eclipse project.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12539865">CAMEL-4942</key>
            <summary>exchange.getIn().getBody(&lt;SomeClass&gt;.class) throws an exception for Jaxb model objects</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bvahdat">Babak Vahdat</assignee>
                                    <reporter username="muellerc">Christian M&#252;ller</reporter>
                        <labels>
                    </labels>
                <created>Thu, 26 Jan 2012 06:15:19 +0000</created>
                <updated>Fri, 27 Jan 2012 20:13:33 +0000</updated>
                            <resolved>Fri, 27 Jan 2012 20:13:33 +0000</resolved>
                                    <version>2.8.3</version>
                                    <fixVersion>2.8.5</fixVersion>
                    <fixVersion>2.9.1</fixVersion>
                    <fixVersion>2.10.0</fixVersion>
                                    <component>camel-core</component>
                    <component>camel-jaxb</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13193584" author="muellerc" created="Thu, 26 Jan 2012 06:16:32 +0000"  >&lt;p&gt;Test which shows the issue&lt;/p&gt;</comment>
                            <comment id="13193945" author="bvahdat" created="Thu, 26 Jan 2012 16:29:03 +0000"  >&lt;p&gt;Following my findings regarding the problem you&apos;ve reported by this ticket:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;The problem raises &lt;b&gt;even if&lt;/b&gt; you would use the trunk code as your Camel dependency, that&apos;s version 2.10-SNAPSHOT&lt;/li&gt;
	&lt;li&gt;If you skip out your declared dependency to camel-jaxb then &lt;b&gt;ALL&lt;/b&gt; of your tests would pass!&lt;/li&gt;
	&lt;li&gt;The tests would also &lt;b&gt;ALL&lt;/b&gt; pass if you would instead do
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;exchange.getContext().getTypeConverter().convertTo(Foo.class, exchange.getIn());
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;IMHO the bug is the way the method&lt;/li&gt;
&lt;/ul&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;org.apache.camel.converter.jaxb.FallbackTypeConverter.convertTo(&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;&amp;lt;T&amp;gt; type, Exchange exchange, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; value)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Has been implemented on line 90 &amp;amp; 91&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (isJaxbType(type)) {
  &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; unmarshall(type, exchange, value);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt; 

&lt;p&gt;Which doesn&apos;t take into account if the class of the &lt;b&gt;value&lt;/b&gt; object is JAXB complaint as well, that&apos;s isJaxbType(value.getClass())&lt;/p&gt;

&lt;p&gt;Notes:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;IMHO we should better skip 2.6.0 as a Affects Version by this ticket, as that version is not supported anymore!&lt;/li&gt;
	&lt;li&gt;As I&apos;m a newbie, let&apos;s see what others (Claus?) think about this behaviour.&lt;/li&gt;
	&lt;li&gt;In the case I&apos;m &lt;b&gt;not&lt;/b&gt; wrong, we should better backport the fix both to the 2.8.x &amp;amp; 2.9.x branches.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;All in one the workaround solution is to avoid the FallbackTypeConverter be enlisted into the TypeConverterRegistry, for example in that you skip the dependency to camel-jaxb because of:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://svn.apache.org/repos/asf/camel/trunk/components/camel-jaxb/src/main/resources/META-INF/services/org/apache/camel/FallbackTypeConverter&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/repos/asf/camel/trunk/components/camel-jaxb/src/main/resources/META-INF/services/org/apache/camel/FallbackTypeConverter&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13194001" author="muellerc" created="Thu, 26 Jan 2012 17:24:02 +0000"  >&lt;p&gt;Hi Babak!&lt;/p&gt;

&lt;p&gt;Thanks for looking into this issue (I&apos;m too busy at the moment)... &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
This issue is not urgent for us, because our workaround at the moment looks like below:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; body = exchange.getIn().getBody();
&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (body &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; Foo) {
  &lt;span class=&quot;code-comment&quot;&gt;// process Foo
&lt;/span&gt;} &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
  &lt;span class=&quot;code-comment&quot;&gt;// process Bar
&lt;/span&gt;}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;But in my opinion it&apos;s a bug.&lt;br/&gt;
+1 for for fixing this in 2.10, 2.9 and 2.8.&lt;/p&gt;

&lt;p&gt;Best,&lt;br/&gt;
Christian&lt;/p&gt;</comment>
                            <comment id="13194215" author="bvahdat" created="Thu, 26 Jan 2012 21:55:02 +0000"  >&lt;p&gt;I committed a patch into the trunk which I will double check using your provided test as soon as it reaches the snapshot repo.&lt;/p&gt;</comment>
                            <comment id="13194537" author="bvahdat" created="Fri, 27 Jan 2012 08:24:36 +0000"  >&lt;p&gt;I added your provided test route (FallbackTypeConverterDoesNotThrowExceptionTest) which verifies the fix.&lt;/p&gt;</comment>
                            <comment id="13194616" author="muellerc" created="Fri, 27 Jan 2012 11:56:32 +0000"  >&lt;p&gt;Thank you Babak! I will be the sponsor for your beer the next time we meet. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13194621" author="muellerc" created="Fri, 27 Jan 2012 12:10:20 +0000"  >&lt;p&gt;I think the fix version for the 2.8.x branch has to be 2.8.5, because 2.8.4 is already in vote...&lt;/p&gt;</comment>
                            <comment id="13194626" author="bvahdat" created="Fri, 27 Jan 2012 12:26:47 +0000"  >&lt;p&gt;Yeah you&apos;re right but I intended to do it the same way as &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-4947&quot; title=&quot;Delay using bean does not work in XML DSL&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-4947&quot;&gt;&lt;del&gt;CAMEL-4947&lt;/del&gt;&lt;/a&gt; as the vote has not passed yet.&lt;/p&gt;

&lt;p&gt;I see that the overhead for a new 2.8.4 release would be huge to be done by the release manager (Hadrian) but IMHO these two fixes are &lt;b&gt;really&lt;/b&gt; important. I wait to see how the vote will end up and will do 2.8.4 =&amp;gt; 2.8.5 change if it would pass!&lt;/p&gt;</comment>
                            <comment id="13194861" author="muellerc" created="Fri, 27 Jan 2012 15:45:59 +0000"  >&lt;p&gt;I don&apos;t think this issue is really urgent because:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;it exists at least since release 2.6.0&lt;/li&gt;
	&lt;li&gt;our users has workarounds for this&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;So, let&apos;s fix it in 2.8.5 if there is no other reason to build a new release version for 2.8.4...&lt;/p&gt;</comment>
                            <comment id="13194876" author="bvahdat" created="Fri, 27 Jan 2012 16:03:26 +0000"  >&lt;p&gt;Did change the Fix Version/s as you recommended.&lt;/p&gt;</comment>
                            <comment id="13195062" author="bvahdat" created="Fri, 27 Jan 2012 20:13:33 +0000"  >&lt;p&gt;Back-ported to both 2.8.x &amp;amp; 2.9.x branches as well.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12511949" name="test.zip" size="13792" author="muellerc" created="Thu, 26 Jan 2012 06:16:32 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>225368</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 43 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0240v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>10253</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>