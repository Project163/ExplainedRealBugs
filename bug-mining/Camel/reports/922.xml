<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 09:37:02 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-2445] BatchProcesser.processExchange needs to catch Throwable</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-2445</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;If an aggregator sends an exchange to a processor that throws an Error this causes the thread started by BatchProcessor to exit, exchanges will then accumulate in the aggregator until an OutOfMemoryError occurs.&lt;/p&gt;

&lt;p&gt;This patch sorts that out and adds a unit test, however there&apos;s another problem that I&apos;m still looking into, namely that BatchProcessor just uses an instance of LoggingErrorHandler as it&apos;s exception handler, so any exceptions/errors caught by this processor will just get logged and not follow the normal Camel error handling.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12487837">CAMEL-2445</key>
            <summary>BatchProcesser.processExchange needs to catch Throwable</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                            <parent id="12487839">CAMEL-2448</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="slewis">Stanley J. Lewis</assignee>
                                    <reporter username="slewis">Stanley J. Lewis</reporter>
                        <labels>
                    </labels>
                <created>Wed, 3 Feb 2010 21:57:34 +0000</created>
                <updated>Wed, 3 Nov 2010 05:13:29 +0000</updated>
                            <resolved>Thu, 4 Feb 2010 07:09:39 +0000</resolved>
                                    <version>1.6.2</version>
                    <version>2.1.0</version>
                                    <fixVersion>1.6.3</fixVersion>
                    <fixVersion>2.2.0</fixVersion>
                                    <component>camel-core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12954780" author="jgenender" created="Thu, 4 Feb 2010 00:01:55 +0000"  >&lt;p&gt;This is caused by the the trapping of Exception in the BatchSender but wont fire for Throwable (i.e. NoSuchMethodError/LingageError, etc).  Thus when the exceptions fire, it continues on about its way, filling the LinkedList and thus a memory leak ensues.  The patch really should be at where it is already looking for errors.  Patches for 1.x and 2.x. are attached.&lt;/p&gt;</comment>
                            <comment id="12954786" author="davsclaus" created="Thu, 4 Feb 2010 06:16:43 +0000"  >&lt;p&gt;I will change Camel 2.x to catch all kind of exceptions in &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-2448&quot; title=&quot;ErrorHandler - Catch Throwable to handle all kind of exceptions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-2448&quot;&gt;&lt;del&gt;CAMEL-2448&lt;/del&gt;&lt;/a&gt;. Then the regular camel error handler will also handle this NoSuchMethodException which will at minimum be logged, so there is a trace in the log now.&lt;/p&gt;

&lt;p&gt;In 1.x we will patch it with your patches so BatchProcessor will log the exceptions.&lt;/p&gt;

&lt;p&gt;I have adjusted your patch a bit as you need to catch the exception in the loop so Camel will process the next exchange to drain the aggregated exceptions. Otherwise they will be kept in the memory and it will only process 1 exchange at every trigger. And thus it can lead to consume more memory if your fill in more messages than it can drain.&lt;/p&gt;</comment>
                            <comment id="12954785" author="davsclaus" created="Thu, 4 Feb 2010 06:25:10 +0000"  >&lt;p&gt;Merged to 1.x: 906376.&lt;/p&gt;</comment>
                            <comment id="12954783" author="davsclaus" created="Thu, 4 Feb 2010 07:09:26 +0000"  >&lt;p&gt;Willem applied patch to trunk: 906342&lt;/p&gt;

&lt;p&gt;And I refined the patch a bit: 906381&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12463089" name="1.x.patch" size="1361" author="jgenender" created="Thu, 4 Feb 2010 00:21:38 +0000"/>
                            <attachment id="12463088" name="2.x.patch" size="1341" author="jgenender" created="Thu, 4 Feb 2010 00:21:38 +0000"/>
                            <attachment id="12463086" name="patch-1.x.txt" size="4227" author="slewis" created="Wed, 3 Feb 2010 22:10:16 +0000"/>
                            <attachment id="12463129" name="patch-2.x.txt" size="4105" author="slewis" created="Wed, 3 Feb 2010 22:15:42 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>4.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>76523</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 42 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i01omn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7759</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>