<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:59:04 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-15111] camel-as2 component failed to parse entity content for encrypted or compressed data</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-15111</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;AS2 component can receive only messages that has the following content-type:&#160;&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;application/edifact&lt;/li&gt;
	&lt;li&gt;application/edi-x12&lt;/li&gt;
	&lt;li&gt;application/edi-consent&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;in case of a PLAIN interchange it works fine, however when i try to receive an ENCRYPTED/SIGNED/COMPRESSED messages camel don&apos;t recognize the content type of the interchange.&lt;/p&gt;

&lt;p&gt;Here is the message sent by my trading partner :&#160;&lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
AS2-From: ESALINK
AS2-To: YSF2
AS2-Version: 1.2
Date: Mon, 25 May 2020 22:04:47 GMT
Disposition-Notification-Options: signed-receipt-protocol=optional,pkcs7-signature;signed-receipt-micalg=optional,md5
Disposition-Notification-To: ediint-sync-mdn
EDIINT-Features: multiple-attachments
Message-ID: &amp;lt;20200525220447.3200.111@DESKTOP-OT6I4JG&amp;gt;
Subject: message from YSF
Content-Type: multipart/signed; protocol=&lt;span class=&quot;code-quote&quot;&gt;&quot;application/pkcs7-signature&quot;&lt;/span&gt;; micalg=md5; boundary=&lt;span class=&quot;code-quote&quot;&gt;&quot;------15ECC40FF5D299411590444287BC801&quot;&lt;/span&gt;
--------15ECC40FF5D299411590444287BC801
Content-Transfer-Encoding: binary
Content-Disposition: attachment; filename=&lt;span class=&quot;code-quote&quot;&gt;&quot;smime.p7m&quot;&lt;/span&gt;
Content-Type: application/pkcs7-mime; smime-type=compressed-data; name=&lt;span class=&quot;code-quote&quot;&gt;&quot;smime.p7m&quot;&lt;/span&gt;0&#8364;*&#8224;H&#8224;&#247;
		 &#8364;0&#8364;0*&#8224;H&#8224;&#247;
	0&#8364;	*&#8224;H&#8224;&#247;
 &#8364;$&#8364;&#8218;&#238;xr&#206;&#207;+I&#205;+&#209;
)J&#204;+NK-&#210;u&#205;K&#206;O&#201;&#204;K- RH&#202;&#204;K,&#170;&#228;&#229;r&#8224;*q&#201;,.&#200;/&#206;,&#201;&#204;&#207;&#179;RH,)IL&#206;&#200;j&#181;VH&#203;&#204;I&#205;K&#204;M&#181;U*&#206;&#205;&#204;M&#213;+0&#207;UBh&#169;,H&#170;/(&#200;&#201;LNi&#214;/&#200;N.6&#215;)&#181;V&#235;&#208;-&#170;&#177;M&#205;+K&#205;&#201;/HM&#209;MI,I&#180;V&#192;4&apos;&#8212;&#203; &#8240;&#169;&#8364;&#141;S&#171;&#205;&#163;&#237;;/#;&#243;&#8218;&amp;amp;&#166;D P,#&#402;a&#227;q&#402;&amp;amp;&#198;&#195;@&#166;A&#227;*&#402;&#198;%&#8224;&#220;&#339;l&#204;&#161;,l&#194;LnA&#8224;&#252;&#188; &#8225;0&#8250;&#208;&#167;&#201;&#169;&#8224;|&amp;lt; va&#214;&#8364;&#196;&#162;&#204;bC1&#376;K&#732;&#215;=5/&#181;(&#179;B&#193;&#189;(&#191;&#180;&#192;P&#198;@
$&#206;-,&#236;&#353;&#246;&#187;0&#168;RR#
&#352;R&#8249;&#8249;

&#248;A&#178;&#204;&#194;&#8240;E%@}F&#8224;&#218;&#353;pr2&#352;&#201;&lt;span class=&quot;code-quote&quot;&gt;&quot;&#8364;&quot;&lt;/span&gt;W&#8364;&#8226;;&#164;C&#338;N&#8482;&#172;&#8212;&#339;&#376;r,/\5##+K#&#402;YO&#250;&#191;&#165;&#352;w6&#223;&#237;iJ(&#187;&#339;q&#201;j&#173;&#227;&#177;_bE&#167;f&#253;&#214;as&#174;X&#181;x&#218;&apos;&#207;&#8482;|
&#253;;&#251;&#196;NN7&#223;&#213;&#198;s{&#233;|&#127;&#402;|w&#239;k&#382;&amp;lt;&#215;\&#253;&amp;gt;- &#250;!&#251;F&#402;&#8482;&amp;gt;{&#376;&#8482;Y&#238;&#250;a:&#217;&#250;&#202;&#353;&#218;&#127;&#222;n&#225;&#176;|zu&#8224;- &#232;=&#238;w&#197;&#8212;V&#223;&#248;W&#167;&#255;&#249;&#235;&#227;&#206; &#254;g&#165;n&#353;
&#171;&#189;n&#176;tzw&#203;{Lb]0K&#255;&#191;&#197;&#219;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;camel will send an MDN containing this message:&#160;&lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Failed to parse entity content&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13307407">CAMEL-15111</key>
            <summary>camel-as2 component failed to parse entity content for encrypted or compressed data</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="yasserzamani">Yasser Zamani</assignee>
                                    <reporter username="mrsafi">S. Youssef</reporter>
                        <labels>
                            <label>AS2</label>
                            <label>encrypted,</label>
                            <label>receive</label>
                            <label>server</label>
                    </labels>
                <created>Tue, 26 May 2020 10:32:51 +0000</created>
                <updated>Mon, 30 Jan 2023 08:59:47 +0000</updated>
                            <resolved>Fri, 23 Dec 2022 11:27:43 +0000</resolved>
                                    <version>3.3.0</version>
                                    <fixVersion>3.18.5</fixVersion>
                    <fixVersion>3.20.1</fixVersion>
                    <fixVersion>3.21.0</fixVersion>
                    <fixVersion>4.0-M1</fixVersion>
                    <fixVersion>4.0.0</fixVersion>
                                        <due></due>
                            <votes>8</votes>
                                    <watches>8</watches>
                                                                                                                <comments>
                            <comment id="17417677" author="krisbash" created="Mon, 20 Sep 2021 14:28:28 +0000"  >&lt;p&gt;We have very similar problem. We want to send message to our AS2 Camel Server. When we use binary encoding or encryption algorithm we have result as below:&#160;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13033884/13033884_image-2021-09-20-16-26-35-053.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;Base64 encoding with no encryption works.&lt;/p&gt;

&lt;p&gt;Any ideas?&lt;/p&gt;</comment>
                            <comment id="17508988" author="JIRAUSER286801" created="Fri, 18 Mar 2022 17:57:02 +0000"  >&lt;p&gt;Hello!&#160;&lt;br/&gt;
I&apos;m having the same problem here using camel 3.11.3.&lt;/p&gt;

&lt;p&gt;Basically, the camel-as2 supports messages encrypted/signed/compressed with content-transfer-encoding: base64 but does not support if they are binary.&lt;br/&gt;
content-transfer-encoding: binary&lt;br/&gt;
&#160;&lt;/p&gt;

&lt;p&gt;It fails with:&lt;br/&gt;
Failed to parse entity content&lt;/p&gt;</comment>
                            <comment id="17509701" author="davsclaus" created="Mon, 21 Mar 2022 09:04:19 +0000"  >&lt;p&gt;Use to JIRA vote to help show tickets that are popular for community users&lt;/p&gt;</comment>
                            <comment id="17599574" author="davsclaus" created="Fri, 2 Sep 2022 15:46:07 +0000"  >&lt;p&gt;Community users is welcome to help with this&lt;/p&gt;</comment>
                            <comment id="17648974" author="yasser.zamani" created="Sun, 18 Dec 2022 07:30:53 +0000"  >&lt;p&gt;I wish working on and fixing this issue as a contribution to Camel. Could you please assign it to me? as I&apos;ve already started its analysis.&lt;/p&gt;</comment>
                            <comment id="17651569" author="yasser.zamani" created="Fri, 23 Dec 2022 10:00:15 +0000"  >&lt;p&gt;Done and the corresponding PR is automatically linked to this Jira issue.&lt;/p&gt;

&lt;p&gt;Actually it was a bug not a new feature. Camel should not force ascii charset if it&apos;s not specified in the http request. Camel does this to find multipart boundaries and bang, it reaches Malformed exception on binary contents!&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mrsafi&quot; class=&quot;user-hover&quot; rel=&quot;mrsafi&quot;&gt;mrsafi&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=joao.r.miranda&quot; class=&quot;user-hover&quot; rel=&quot;joao.r.miranda&quot;&gt;joao.r.miranda&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=krisbash&quot; class=&quot;user-hover&quot; rel=&quot;krisbash&quot;&gt;krisbash&lt;/a&gt; are you maybe able to pull this specific module, build and test against it? I&apos;ve comprehensively unit tested all 8 possibilities for encrypt, sign and compress, but your confirmation makes me happier &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17651626" author="davsclaus" created="Fri, 23 Dec 2022 11:27:43 +0000"  >&lt;p&gt;Thanks for the PR, you are welcome to keep improving camel-as2 and other parts of Camel&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13033884" name="image-2021-09-20-16-26-35-053.png" size="40538" author="krisbash" created="Mon, 20 Sep 2021 14:26:35 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 46 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0f5u8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>