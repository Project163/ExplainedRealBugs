<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:07:32 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-8436] camel-spring-boot - Some routes not being initialized after CamelContext have been removed from CamelAutoConfiguration</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-8436</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;In our project we have several classes that extend SpringRouteBuilder and that are annotated with @Component.&lt;br/&gt;
Some days ago we&apos;ve noticed that most of them stopped being initialized on application startup.&lt;/p&gt;

&lt;p&gt;Found out that our issues started from this commit:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/camel/commit/6bcc0b6110a762623888ded294c78dc168a18e75&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/commit/6bcc0b6110a762623888ded294c78dc168a18e75&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;If I roll it back everything is fine again.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12779404">CAMEL-8436</key>
            <summary>camel-spring-boot - Some routes not being initialized after CamelContext have been removed from CamelAutoConfiguration</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hekonsek">Henryk Konsek</assignee>
                                    <reporter username="di_m_an">Dmitry Drozdov</reporter>
                        <labels>
                    </labels>
                <created>Wed, 4 Mar 2015 14:52:14 +0000</created>
                <updated>Wed, 4 Mar 2015 21:04:08 +0000</updated>
                            <resolved>Wed, 4 Mar 2015 21:04:08 +0000</resolved>
                                    <version>2.15.0</version>
                                    <fixVersion>2.15.0</fixVersion>
                                    <component>camel-spring-boot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14346990" author="davsclaus" created="Wed, 4 Mar 2015 15:04:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=hekonsek&quot; class=&quot;user-hover&quot; rel=&quot;hekonsek&quot;&gt;hekonsek&lt;/a&gt; wonder if we can rollback that commit to fix that issue reported? Or if not would be good if you could take a look today/tomorrow before Camel 2.15.0 is being cut.&lt;/p&gt;</comment>
                            <comment id="14347011" author="hekonsek" created="Wed, 4 Mar 2015 15:20:29 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;Actually that commit is important one as it prevents &lt;tt&gt;CamelContext&lt;/tt&gt; from premature initialization.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=di_m_an&quot; class=&quot;user-hover&quot; rel=&quot;di_m_an&quot;&gt;di_m_an&lt;/a&gt; Can you provide me a minimal Maven example reproducing your issue? I can&apos;t see this kind of behavior in our tests nor in the projects that uses camel-spring-boot.&lt;/p&gt;

&lt;p&gt;Cheers!&lt;/p&gt;</comment>
                            <comment id="14347142" author="hekonsek" created="Wed, 4 Mar 2015 16:59:43 +0000"  >&lt;p&gt;I committed some changes to the &lt;tt&gt;RoutesCollector&lt;/tt&gt; lifecycle and added extra tests demonstrating that &lt;tt&gt;@Component&lt;/tt&gt; scanning works as expected (see &lt;tt&gt;ComponentRouteTest&lt;/tt&gt;). Can you give the current master version a try?&lt;/p&gt;</comment>
                            <comment id="14347150" author="di_m_an" created="Wed, 4 Mar 2015 17:03:46 +0000"  >&lt;p&gt;Managed to reproduce the issue in minimal project - gradle one, not maven, sorry.&lt;br/&gt;
Attached the project.&lt;/p&gt;

&lt;p&gt;If you &lt;tt&gt;./gradlew run&lt;/tt&gt; it, you get:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2015-03-04 19:46:28.102  INFO 32637 --- [           main] o.a.camel.spring.SpringCamelContext      : Route: route1 started and consuming from: Endpoint[direct://1]
2015-03-04 19:46:28.116  INFO 32637 --- [           main] o.a.camel.spring.SpringCamelContext      : Route: route2 started and consuming from: Endpoint[direct://2]
2015-03-04 19:46:28.131  INFO 32637 --- [           main] o.a.camel.spring.SpringCamelContext      : Route: route3 started and consuming from: Endpoint[direct://5]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If you do &lt;tt&gt;mv src/main/java/org/apache/camel/spring/boot/CamelAutoConfiguration.java.thisworks src/main/java/org/apache/camel/spring/boot/CamelAutoConfiguration.java&lt;/tt&gt; and run it once again, you get:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2015-03-04 19:48:15.225  INFO 464 --- [           main] o.a.camel.spring.SpringCamelContext      : Route: route1 started and consuming from: Endpoint[direct://1]
2015-03-04 19:48:15.241  INFO 464 --- [           main] o.a.camel.spring.SpringCamelContext      : Route: route2 started and consuming from: Endpoint[direct://2]
2015-03-04 19:48:15.265  INFO 464 --- [           main] o.a.camel.spring.SpringCamelContext      : Route: route3 started and consuming from: Endpoint[direct://3]
2015-03-04 19:48:15.286  INFO 464 --- [           main] o.a.camel.spring.SpringCamelContext      : Route: route4 started and consuming from: Endpoint[direct://4]
2015-03-04 19:48:15.309  INFO 464 --- [           main] o.a.camel.spring.SpringCamelContext      : Route: route5 started and consuming from: Endpoint[direct://5]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Something wrong is with this injection:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    @Resource
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; ProducerTemplate producerTemplate;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;only the first route that has it, is initialized.&lt;/p&gt;

&lt;p&gt;In the real project ProducerTemplate is injected in some other beans and they are injected in the SpringRouteBuilder ones, and the result is the same.&lt;/p&gt;</comment>
                            <comment id="14347158" author="hekonsek" created="Wed, 4 Mar 2015 17:08:09 +0000"  >&lt;p&gt;Hi Dmitry,&lt;/p&gt;

&lt;p&gt;Can you give it a shot against the latest master version? If not, I will do it but not today.&lt;/p&gt;

&lt;p&gt;Cheers!&lt;/p&gt;</comment>
                            <comment id="14347190" author="di_m_an" created="Wed, 4 Mar 2015 17:21:05 +0000"  >&lt;p&gt;Tried the latest RoutesCollector - the issue is still there.&lt;/p&gt;</comment>
                            <comment id="14347568" author="hekonsek" created="Wed, 4 Mar 2015 21:04:08 +0000"  >&lt;p&gt;Nailed it &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; Revision - 1c1953ac4dc2319403101b5f04a31e53cdf615f1 . Great thanks for the example!&lt;/p&gt;

&lt;p&gt;The problem was that creation of &lt;tt&gt;ProducerTemplate&lt;/tt&gt; forced &lt;tt&gt;CamelContext&lt;/tt&gt; to start too early. I changed &lt;tt&gt;RoutesCollector&lt;/tt&gt; to collect routes when &lt;tt&gt;ApplicationContext&lt;/tt&gt; is refreshed and then start &lt;tt&gt;CamelContext&lt;/tt&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12702507" name="camel-spring-boot-issue.tar.gz" size="51460" author="di_m_an" created="Wed, 4 Mar 2015 17:03:46 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 37 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i26ckn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>