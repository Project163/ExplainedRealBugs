<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:37:59 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-14143] Slack Component: Consumer does not retrieve user details on message event</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-14143</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;The JSON object that Slack delivers for message events no longer sends a&#160;&lt;b&gt;username&lt;/b&gt; attribute; it issues the user&apos;s&#160;&lt;b&gt;GUID&lt;/b&gt; in the&#160;&lt;b&gt;user&lt;/b&gt; field. For example:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
{
        &lt;span class=&quot;code-quote&quot;&gt;&quot;client_msg_id&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;6d1d3108-cf2a-4475-941c-0dd70200e88a&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;type&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;message&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;text&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;hello&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;user&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;UMQLDBWQY&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;ts&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;1572977454.000200&quot;&lt;/span&gt;,
        &lt;span class=&quot;code-quote&quot;&gt;&quot;team&quot;&lt;/span&gt;:&lt;span class=&quot;code-quote&quot;&gt;&quot;T0383HKJ0&quot;&lt;/span&gt;
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The SlackEndpoint class still looks for the&#160;&lt;b&gt;username&lt;/b&gt;&#160;attribute when creating the exchange, so the SlackMessage object comes out pretty bare.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Exchange createExchange(ExchangePattern pattern, JsonObject object) {
        Exchange exchange = &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;.createExchange(pattern);
        SlackMessage slackMessage = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SlackMessage();
        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; text = object.getString(&lt;span class=&quot;code-quote&quot;&gt;&quot;text&quot;&lt;/span&gt;);
        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; username = object.getString(&lt;span class=&quot;code-quote&quot;&gt;&quot;username&quot;&lt;/span&gt;);
        slackMessage.setText(text);
        slackMessage.setUsername(username);
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (ObjectHelper.isNotEmpty(object.get(&lt;span class=&quot;code-quote&quot;&gt;&quot;icons&quot;&lt;/span&gt;))) {
            JsonObject icons = object.getMap(&lt;span class=&quot;code-quote&quot;&gt;&quot;icons&quot;&lt;/span&gt;);
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (ObjectHelper.isNotEmpty(icons.get(&lt;span class=&quot;code-quote&quot;&gt;&quot;emoji&quot;&lt;/span&gt;))) {
                slackMessage.setIconEmoji(icons.getString(&lt;span class=&quot;code-quote&quot;&gt;&quot;emoji&quot;&lt;/span&gt;));
            }
        }
        Message message = exchange.getIn();
        message.setBody(slackMessage);
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; exchange;
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I&apos;ve attached a .patch that retrieves the user&apos;s&#160;&lt;b&gt;GUID&lt;/b&gt;&#160;instead, so it&apos;s at least available if people using this component want to look up the username with the &lt;a href=&quot;https://api.slack.com/methods/users.info/test&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;users.info API&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13266417">CAMEL-14143</key>
            <summary>Slack Component: Consumer does not retrieve user details on message event</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="acosentino">Andrea Cosentino</assignee>
                                    <reporter username="akrohg">Andy Krohg</reporter>
                        <labels>
                    </labels>
                <created>Tue, 5 Nov 2019 20:10:10 +0000</created>
                <updated>Wed, 6 Nov 2019 10:31:30 +0000</updated>
                            <resolved>Wed, 6 Nov 2019 10:31:30 +0000</resolved>
                                                    <fixVersion>2.24.3</fixVersion>
                    <fixVersion>3.0.0</fixVersion>
                    <fixVersion>2.25.0</fixVersion>
                                    <component>camel-slack</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                        <attachments>
                            <attachment id="12984992" name="slack.patch" size="2073" author="akrohg" created="Tue, 5 Nov 2019 20:09:36 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10061"><![CDATA[Novice]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 2 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z08aco:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>