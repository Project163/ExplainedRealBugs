<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:53:21 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-17870] Null value for HttpServletRequest after http call</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-17870</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;I am trying to generate an audit message after a HTTP call, the audit message needs to contain the body of the original request.&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I have the following route snippet:&lt;/p&gt;

&lt;p&gt;&#160;&lt;br/&gt;
&lt;tt&gt;from(&quot;direct:myqueue&quot;)&lt;/tt&gt;&lt;tt&gt;.setHeader(Exchange.HTTP_METHOD, constant(org.apache.camel.component.http.HttpMethods.POST))&lt;/tt&gt;&lt;tt&gt;.setHeader(Exchange.CONTENT_TYPE, simple(&quot;application/json&quot;))&lt;/tt&gt;&lt;tt&gt;.to(&quot;http://127.0.0.1:4000/&quot;)&lt;/tt&gt;&lt;tt&gt;.process(&quot;AuditProcessor&quot;)&lt;/tt&gt;&lt;tt&gt;.to(&quot;file://target/audit&quot;);&lt;/tt&gt;&lt;br/&gt;
&#160;&lt;br/&gt;
The &lt;tt&gt;AuditProcessor class contains the fragment:&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;public void process(Exchange exchange) throws Exception {&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;HttpServletRequest request = exchange.getIn().getBody(HttpServletRequest.class);&lt;/tt&gt;&lt;br/&gt;
&lt;tt&gt;String httpRequestBody = request.getReader().lines().collect(Collectors.joining(System.lineSeparator()));&lt;/tt&gt;&lt;br/&gt;
&#160;&lt;br/&gt;
however, request is always being evaluated as null.&#160;&lt;br/&gt;
&#160;&lt;br/&gt;
The documentation &lt;a href=&quot;https://camel.apache.org/components/3.15.x/http-component.html#:~:text=camel%2Dcxf%20endpoint.-,HttpServletRequest,-request%20%3D%20exchange.getIn&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://camel.apache.org/components/3.15.x/http-component.html#:~:text=camel%2Dcxf%20endpoint.-,HttpServletRequest,-request%20%3D%20exchange.getIn&lt;/a&gt; suggests I should be able to access the request object after the http request in the pipeline.&lt;br/&gt;
&#160;&lt;br/&gt;
Thanks&lt;/p&gt;</description>
                <environment></environment>
        <key id="13436353">CAMEL-17870</key>
            <summary>Null value for HttpServletRequest after http call</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="10004">Not A Bug</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="tropas">Andy Mitchell</reporter>
                        <labels>
                    </labels>
                <created>Tue, 29 Mar 2022 08:37:17 +0000</created>
                <updated>Tue, 29 Mar 2022 09:06:04 +0000</updated>
                            <resolved>Tue, 29 Mar 2022 08:55:57 +0000</resolved>
                                    <version>3.16.0</version>
                                                    <component>camel-http</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17513930" author="davsclaus" created="Tue, 29 Mar 2022 08:53:25 +0000"  >&lt;p&gt;HttpServletRequest is for a &lt;b&gt;servlet&lt;/b&gt; when you use camel-servlet - not when you use camel-http that is NOT a servlet.&lt;/p&gt;</comment>
                            <comment id="17513933" author="davsclaus" created="Tue, 29 Mar 2022 08:55:57 +0000"  >&lt;p&gt;That doc page is wrong I am removing that section.&lt;/p&gt;
</comment>
                            <comment id="17513934" author="JIRAUSER287234" created="Tue, 29 Mar 2022 08:57:15 +0000"  >&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Can you recommend a way I can get hold of the request body after the http call has been made?&lt;/p&gt;</comment>
                            <comment id="17513945" author="davsclaus" created="Tue, 29 Mar 2022 09:06:04 +0000"  >&lt;p&gt;That is not possible with camel-http - you cant get access to the HttpResponse instance that the http client returns&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 33 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z10x3k:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>