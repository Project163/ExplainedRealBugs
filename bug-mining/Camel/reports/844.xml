<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 09:35:52 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-2156] ActivityMonitorEngine uses ?1 parameters in JPAQL, which don&apos;t work with (at least) the hibernate JPA provider.</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-2156</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;Trying to just replace my RouteBuilder with a ProcessBuilder to start moving towards using BAM. I converted everything over to JPA, to make bam happy, but then found that it still explodes &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;  (Full stack trace below)&lt;/p&gt;

&lt;p&gt;Line 80 of ActivityMonitorEngine has this JPAQL,&lt;br/&gt;
                        List&amp;lt;ActivityState&amp;gt; list = template.find(&quot;select x from &quot; + ActivityState.class.getName() + &quot; x where x.timeOverdue &amp;lt; ?1&quot;, timeNow);&lt;/p&gt;

&lt;p&gt;The ?1 named/numbered parameter seems to not be supported by hibernate&apos;s JPA provider.&lt;/p&gt;

&lt;p&gt;I can&apos;t find much of any documentation on this, could this just be made a normal positional?  I can&apos;t even try out the BAM module without this &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;



&lt;p&gt;2009-11-11 01:33:53,815 ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.camel.bam.processor.ActivityMonitorEngine:ActivityMonitorEngine&amp;#93;&lt;/span&gt; - &amp;lt;Caught: org.springframework.dao.InvalidDataAccessApiUsageException: org.hibernate.QueryParameterException: could not locate named parameter &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;; nested exception is java.lang.IllegalArgumentException: org.hibernate.QueryParameterException: could not locate named parameter &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;&amp;gt;&lt;br/&gt;
org.springframework.dao.InvalidDataAccessApiUsageException: org.hibernate.QueryParameterException: could not locate named parameter &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;; nested exception is java.lang.IllegalArgumentException: org.hibernate.QueryParameterException: could not locate named parameter &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.springframework.orm.jpa.EntityManagerFactoryUtils.convertJpaAccessExceptionIfPossible(EntityManagerFactoryUtils.java:271)&lt;br/&gt;
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:97)&lt;br/&gt;
	at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:212)&lt;br/&gt;
	at org.springframework.orm.jpa.JpaAccessor.translateIfNecessary(JpaAccessor.java:152)&lt;br/&gt;
	at org.springframework.orm.jpa.JpaTemplate.execute(JpaTemplate.java:189)&lt;br/&gt;
	at org.springframework.orm.jpa.JpaTemplate.executeFind(JpaTemplate.java:151)&lt;br/&gt;
	at org.springframework.orm.jpa.JpaTemplate.find(JpaTemplate.java:311)&lt;br/&gt;
	at org.apache.camel.bam.processor.ActivityMonitorEngine$1.doInTransactionWithoutResult(ActivityMonitorEngine.java:80)&lt;br/&gt;
	at org.springframework.transaction.support.TransactionCallbackWithoutResult.doInTransaction(TransactionCallbackWithoutResult.java:33)&lt;br/&gt;
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:128)&lt;br/&gt;
	at org.apache.camel.bam.processor.ActivityMonitorEngine.run(ActivityMonitorEngine.java:77)&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:619)&lt;br/&gt;
Caused by: java.lang.IllegalArgumentException: org.hibernate.QueryParameterException: could not locate named parameter &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.hibernate.ejb.QueryImpl.setParameter(QueryImpl.java:206)&lt;br/&gt;
	at org.hibernate.ejb.QueryImpl.setParameter(QueryImpl.java:261)&lt;br/&gt;
	at org.springframework.orm.jpa.JpaTemplate$9.doInJpa(JpaTemplate.java:316)&lt;br/&gt;
	at org.springframework.orm.jpa.JpaTemplate.execute(JpaTemplate.java:184)&lt;br/&gt;
	... 7 more&lt;br/&gt;
Caused by: org.hibernate.QueryParameterException: could not locate named parameter &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.hibernate.engine.query.ParameterMetadata.getNamedParameterDescriptor(ParameterMetadata.java:99)&lt;br/&gt;
	at org.hibernate.engine.query.ParameterMetadata.getNamedParameterExpectedType(ParameterMetadata.java:105)&lt;br/&gt;
	at org.hibernate.impl.AbstractQueryImpl.determineType(AbstractQueryImpl.java:437)&lt;br/&gt;
	at org.hibernate.impl.AbstractQueryImpl.setParameter(AbstractQueryImpl.java:407)&lt;br/&gt;
	at org.hibernate.ejb.QueryImpl.setParameter(QueryImpl.java:201)&lt;br/&gt;
	... 10 more&lt;/p&gt;



&lt;p&gt;Line 80&lt;/p&gt;</description>
                <environment>&lt;p&gt;Spring 2.5.6, camel 2.0.0, hibernate 3.3.2.GA/3.4.0GA&lt;/p&gt;</environment>
        <key id="12486869">CAMEL-2156</key>
            <summary>ActivityMonitorEngine uses ?1 parameters in JPAQL, which don&apos;t work with (at least) the hibernate JPA provider.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="karlp">Karl Palsson</reporter>
                        <labels>
                    </labels>
                <created>Wed, 11 Nov 2009 01:39:03 +0000</created>
                <updated>Thu, 3 Jun 2010 07:25:22 +0000</updated>
                            <resolved>Sat, 21 Nov 2009 11:39:27 +0000</resolved>
                                    <version>2.0.0</version>
                                    <fixVersion>2.1.0</fixVersion>
                                    <component>camel-bam</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12953379" author="karlp" created="Wed, 11 Nov 2009 02:05:07 +0000"  >&lt;p&gt;Tiny little maven project that sets up a hibernate JPA template, and a completely empty ProcessBuilder from camel-bam.&lt;/p&gt;

&lt;p&gt;mvn camel:run  will fail, and keep failing as fast as your machine can log and throw exceptions &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="12953390" author="karlp" created="Wed, 11 Nov 2009 03:07:12 +0000"  >&lt;p&gt;I tried this with openJPA as well, but it gave me a slew of different errors.  I&apos;d never used openJPA before though, so hard to say where the problem lay that way.&lt;/p&gt;</comment>
                            <comment id="12953393" author="davsclaus" created="Thu, 12 Nov 2009 05:31:16 +0000"  >&lt;p&gt;Maybe it should use :1 or what the syntax for JPA is. Can you try with that?&lt;/p&gt;</comment>
                            <comment id="12953562" author="davsclaus" created="Sat, 21 Nov 2009 11:39:27 +0000"  >&lt;p&gt;trunk: 882885.&lt;/p&gt;

&lt;p&gt;Now using findByNamedParam so it should work with Hibernate now.&lt;/p&gt;</comment>
                            <comment id="12956213" author="davsclaus" created="Thu, 3 Jun 2010 07:25:22 +0000"  >&lt;p&gt;Closing old resolved issues&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12462878" name="CAMEL-2156_example.zip" size="4183" author="karlp" created="Wed, 11 Nov 2009 02:05:07 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>76617</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 25 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i01muv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7472</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>