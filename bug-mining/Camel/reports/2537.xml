<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:00:15 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-6940] tokenize xml for splitter throwing org.xml.sax.SAXParseException; XML documents structures must start and end within the same entity. </title>
                <link>https://issues.apache.org/jira/browse/CAMEL-6940</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;When trying to split a xml containing this:&lt;br/&gt;
&amp;lt;tag name=name/&amp;gt;&lt;br/&gt;
I encountered the following exception : org.xml.sax.SAXParseException; XML documents structures must start and end within the same entity. &lt;/p&gt;

&lt;p&gt;Extract from my route:&lt;br/&gt;
the input is:&lt;/p&gt;

&lt;p&gt;&amp;lt;BOOKS&amp;gt;&lt;br/&gt;
            &amp;lt;LIBRARY name=Library1/&amp;gt;&lt;br/&gt;
                      &amp;lt;BOOK name=Book1/&amp;gt;  &amp;lt;-----this kind of tag doesn&apos;t work.&lt;br/&gt;
                      &amp;lt;BOOK name=Book2/&amp;gt;&lt;br/&gt;
            &amp;lt;/LIBRARY&amp;gt;&lt;br/&gt;
            &amp;lt;LIBRARY name=Library2/&amp;gt;&lt;br/&gt;
                      &amp;lt;BOOK name=Book1&amp;gt;&amp;lt;/BOOK&amp;gt;   &amp;lt;---this works.&lt;br/&gt;
                      &amp;lt;BOOK name=Book2&amp;gt;&amp;lt;/BOOK&amp;gt;&lt;br/&gt;
            &amp;lt;/LIBRARY&amp;gt;&lt;br/&gt;
&amp;lt;/BOOKS&amp;gt;&lt;/p&gt;


&lt;p&gt;The splitting route:&lt;br/&gt;
&amp;lt;route&amp;gt;&lt;br/&gt;
&amp;lt;from uri=&quot;activemq:queue.TEST&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;choice&amp;gt; &lt;br/&gt;
        &amp;lt;when&amp;gt; &lt;br/&gt;
                &amp;lt;xpath&amp;gt;/BOOKS&amp;lt;/xpath&amp;gt; &lt;br/&gt;
                &amp;lt;split streaming=&quot;true&quot;&amp;gt;&lt;br/&gt;
                        &amp;lt;tokenize token=&quot;LIBRARY&quot; xml=&quot;true&quot;/&amp;gt;&lt;br/&gt;
                        &amp;lt;to uri=&quot;activemq:example.LIBRARY&quot;/&amp;gt;&lt;br/&gt;
                &amp;lt;/split&amp;gt;&lt;br/&gt;
        &amp;lt;/when&amp;gt; &lt;br/&gt;
        &amp;lt;otherwise&amp;gt; &lt;br/&gt;
                &amp;lt;log message=&quot;Not a Books xml.&quot;/&amp;gt; &lt;br/&gt;
        &amp;lt;/otherwise&amp;gt;       &lt;br/&gt;
&amp;lt;/choice&amp;gt;&lt;br/&gt;
&amp;lt;/route&amp;gt;&lt;/p&gt;

&lt;p&gt;This issue is not part of camel 2.11.0.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12677736">CAMEL-6940</key>
            <summary>tokenize xml for splitter throwing org.xml.sax.SAXParseException; XML documents structures must start and end within the same entity. </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ay">Akitoshi Yoshida</assignee>
                                    <reporter username="Cecilio Alvarez">Cecilio Alvarez</reporter>
                        <labels>
                    </labels>
                <created>Wed, 6 Nov 2013 08:44:15 +0000</created>
                <updated>Fri, 3 Jan 2014 03:32:39 +0000</updated>
                            <resolved>Wed, 13 Nov 2013 17:19:56 +0000</resolved>
                                    <version>2.12.1</version>
                                    <fixVersion>2.11.3</fixVersion>
                    <fixVersion>2.12.2</fixVersion>
                    <fixVersion>2.13.0</fixVersion>
                                    <component>camel-core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13817331" author="ay" created="Fri, 8 Nov 2013 15:15:07 +0000"  >&lt;p&gt;hi,&lt;br/&gt;
i can look into this.&lt;br/&gt;
but could you attach the input file to this jira ticket?&lt;br/&gt;
your pasted xml is missing the quotation marks and it does&apos;t look like the input you are actually using.&lt;br/&gt;
and where are you getting the parsing exception?&lt;/p&gt;

&lt;p&gt;thanks.&lt;br/&gt;
aki&lt;/p&gt;</comment>
                            <comment id="13817362" author="cecilio alvarez" created="Fri, 8 Nov 2013 15:42:38 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;the quotation marks is &amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&amp;gt;&lt;br/&gt;
the parsing exception is throws each time a &quot;library&quot; contains a &quot;book&quot; tag without the closing &amp;lt;/BOOK&amp;gt; tag, this wasn&apos;t a problem in camel 2.11.0.&lt;br/&gt;
I have to ask if I can put the original XML. But it&apos;s the same but with different tags names.&lt;/p&gt;

&lt;p&gt;Thanks.&lt;br/&gt;
Cecilio Alvarez.&lt;/p&gt;</comment>
                            <comment id="13819942" author="ay" created="Tue, 12 Nov 2013 09:21:08 +0000"  >&lt;p&gt;hi Cecilio,&lt;br/&gt;
initially i thought you were just using a broken xml (as your input xml pasted on this ticket had the attributes not quoted and the LIBRARY elements prematurely terminated), but there seems to be a real issue in the tokenizer when a tokenized block itself contains at least one self-terminated child. So we need to fix this issue.&lt;br/&gt;
thanks.&lt;br/&gt;
regards, aki&lt;/p&gt;</comment>
                            <comment id="13820025" author="ay" created="Tue, 12 Nov 2013 11:25:55 +0000"  >&lt;p&gt;Hi Cecilio,&lt;br/&gt;
I just committed the fix for this issue into trunk, 2.12.x, and 2.11.x.&lt;br/&gt;
I included a test case that resembles your example, so I hope this fix will resolve your issue.&lt;br/&gt;
If you can test it with your example, that would be great.&lt;br/&gt;
thanks.&lt;br/&gt;
regards, aki&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12628991">CAMEL-6004</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>357111</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 2 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1pk9r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>357401</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>