<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 09:52:53 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-5475] Can&apos;t unmarshal pgp messages encrypted with ElGamal.</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-5475</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;Current strategy for finding the private key is to iterate the secret keychain and matching on the configured email address.  This is incorrect; the secret key chain should be searched by the key id found in the public key encrypted message. What happens now is the DSA signing key is matched instead of the ElGamal decryption key, and this throws java.security.InvalidKeyException.&lt;/p&gt;</description>
                <environment>&lt;p&gt;All environments&lt;/p&gt;</environment>
        <key id="12600548">CAMEL-5475</key>
            <summary>Can&apos;t unmarshal pgp messages encrypted with ElGamal.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="njiang">Willem Jiang</assignee>
                                    <reporter username="scrybz">Bryan McGuire</reporter>
                        <labels>
                    </labels>
                <created>Sat, 28 Jul 2012 03:52:58 +0000</created>
                <updated>Mon, 13 Aug 2012 12:26:30 +0000</updated>
                            <resolved>Mon, 13 Aug 2012 12:26:30 +0000</resolved>
                                    <version>2.10.0</version>
                                    <fixVersion>2.9.3</fixVersion>
                    <fixVersion>2.10.1</fixVersion>
                    <fixVersion>2.11.0</fixVersion>
                                    <component> camel-crypto</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="14400">4h</timeoriginalestimate>
                            <timeestimate seconds="14400">4h</timeestimate>
                                        <comments>
                            <comment id="13424462" author="scrybz" created="Sun, 29 Jul 2012 00:40:30 +0000"  >&lt;p&gt;The attached patch fixes the problem.  It passes all existing tests, and also includes tests I&apos;ve added for ElGamal keys.&lt;/p&gt;</comment>
                            <comment id="13424465" author="scrybz" created="Sun, 29 Jul 2012 01:03:59 +0000"  >&lt;p&gt;This patch is cleaner.&lt;/p&gt;</comment>
                            <comment id="13424467" author="scrybz" created="Sun, 29 Jul 2012 01:34:38 +0000"  >&lt;p&gt;My clean-ups on the previously uploaded patch introduced a possible bug where the encrypted stream wouldn&apos;t be rewound after finding the private key, but before the decryption.&lt;/p&gt;

&lt;p&gt;This is my final answer. This is diffed against the 2.10.0 version, but these files don&apos;t seem to be updated in versions later than 2.10.0. &lt;/p&gt;</comment>
                            <comment id="13425618" author="njiang" created="Tue, 31 Jul 2012 08:37:43 +0000"  >&lt;p&gt;@Bryan, &lt;br/&gt;
Can you provide a test patch which shows the issue of looking up the ElGamal keys?&lt;/p&gt;</comment>
                            <comment id="13426329" author="scrybz" created="Wed, 1 Aug 2012 04:58:11 +0000"  >&lt;p&gt;@Willem&lt;br/&gt;
The RSA keys used for the existing tests just need to be swapped out for ElGamal keys.&lt;/p&gt;

&lt;p&gt;delete pubring.gpg and secring.gpg from  components/camel-crypto/src/test/resources/org/apache/camel/component/crypto/&lt;/p&gt;

&lt;p&gt;Then with gnupg, regenerate the rings as ElGamal:&lt;br/&gt;
gpg --homedir components/camel-crypto/src/test/resources/org/apache/camel/component/crypto/ --gen-key&lt;/p&gt;

&lt;p&gt;it will ask questions as gpg is an interactive program:&lt;br/&gt;
For type of key&lt;br/&gt;
Pick DSA/ElGamal&lt;br/&gt;
For bit length, 1024 is fine&lt;br/&gt;
Pick 0 to make the key never expire&lt;br/&gt;
confirm yes if asked&lt;br/&gt;
For Real Name, use &quot;Super&quot;&lt;br/&gt;
For email, use &quot;sdude@nowhere.net&quot;&lt;br/&gt;
For passphrase, use &quot;sdude&quot;&lt;br/&gt;
Confirm with O for Okay&lt;/p&gt;

&lt;p&gt;run the unit test and watch for some failures.&lt;br/&gt;
apply the patches I submitted to PGPDataFormat and PGPDataFormatUtil and watch all tests pass.&lt;/p&gt;

&lt;p&gt;svn revert the keys, and watch it pass again with the old keys.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12527395">CAMEL-4549</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12538262" name="patch.txt" size="4922" author="scrybz" created="Sun, 29 Jul 2012 01:34:38 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10062"><![CDATA[Moderate]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>241347</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 17 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i027bb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>10786</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>