<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 11:07:17 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-20991] camel-jbang - export error when there is placeholder in a kamelet endpoint url with a bean</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-20991</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;Trying to export the following route, with &lt;tt&gt;--ignore-loading-error&lt;/tt&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
camel export --ignore-loading-error --runtime=quarkus --dir=ceq-app1 Http2Jms.java
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.camel.builder.RouteBuilder;

&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;Http2Jms &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; RouteBuilder {
  @Override
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void configure() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
    &lt;span class=&quot;code-keyword&quot;&gt;rest&lt;/span&gt;()
      .post(&lt;span class=&quot;code-quote&quot;&gt;&quot;/message&quot;&lt;/span&gt;)
      .id(&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;rest&lt;/span&gt;&quot;&lt;/span&gt;)
      .to(&lt;span class=&quot;code-quote&quot;&gt;&quot;direct:jms&quot;&lt;/span&gt;);

    from(&lt;span class=&quot;code-quote&quot;&gt;&quot;direct:jms&quot;&lt;/span&gt;)
      .log(&lt;span class=&quot;code-quote&quot;&gt;&quot;Sending message to JMS {{broker}}: ${body}&quot;&lt;/span&gt;)
      .to(&lt;span class=&quot;code-quote&quot;&gt;&quot;kamelet:jms-amqp-10-sink?remoteURI=RAW({{broker}})&amp;amp;destinationName={{queue}}&amp;amp;destinationType=Queue&quot;&lt;/span&gt;);
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;There is an error&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Caused by: org.apache.camel.ResolveEndpointFailedException: Failed to resolve endpoint: jms:&lt;span class=&quot;code-comment&quot;&gt;//Queue:%7B%7Bqueue%7D%7D?connectionFactory=%23bean%3AconnectionFactoryBean-1 due to: Error binding property (connectionFactory=#bean:connectionFactoryBean-1) with name: connectionFactory on bean: jms://Queue:%7B%7Bqueue%7D%7D?connectionFactory=%23bean%3AconnectionFactoryBean-1 with value: #bean:connectionFactoryBean-1
&lt;/span&gt;at org.apache.camel.impl.engine.AbstractCamelContext.doGetEndpoint(AbstractCamelContext.java:835)
at org.apache.camel.impl.engine.AbstractCamelContext.getEndpoint(AbstractCamelContext.java:735)
at org.apache.camel.support.CamelContextHelper.resolveEndpoint(CamelContextHelper.java:128)
at org.apache.camel.reifier.SendReifier.resolveEndpoint(SendReifier.java:47)
at org.apache.camel.reifier.SendReifier.createProcessor(SendReifier.java:37)
at org.apache.camel.reifier.ProcessorReifier.makeProcessor(ProcessorReifier.java:886)
at org.apache.camel.reifier.ProcessorReifier.addRoutes(ProcessorReifier.java:622)
at org.apache.camel.reifier.RouteReifier.doCreateRoute(RouteReifier.java:231)
... 34 more
Caused by: org.apache.camel.PropertyBindingException: Error binding property (connectionFactory=#bean:connectionFactoryBean-1) with name: connectionFactory on bean: jms:&lt;span class=&quot;code-comment&quot;&gt;//Queue:%7B%7Bqueue%7D%7D?connectionFactory=%23bean%3AconnectionFactoryBean-1 with value: #bean:connectionFactoryBean-1
&lt;/span&gt;at org.apache.camel.support.PropertyBindingSupport.doSetPropertyValue(PropertyBindingSupport.java:544)
at org.apache.camel.support.PropertyBindingSupport.doBuildPropertyOgnlPath(PropertyBindingSupport.java:420)
at org.apache.camel.support.PropertyBindingSupport.doBindProperties(PropertyBindingSupport.java:300)
at org.apache.camel.support.PropertyBindingSupport$Builder.bind(PropertyBindingSupport.java:1958)
at org.apache.camel.support.DefaultEndpoint.setProperties(DefaultEndpoint.java:424)
at org.apache.camel.support.DefaultEndpoint.configureProperties(DefaultEndpoint.java:396)
at org.apache.camel.support.DefaultComponent.setProperties(DefaultComponent.java:422)
at org.apache.camel.component.seda.SedaComponent.createEndpoint(SedaComponent.java:273)
at org.apache.camel.support.DefaultComponent.createEndpoint(DefaultComponent.java:171)
at org.apache.camel.impl.engine.AbstractCamelContext.doGetEndpoint(AbstractCamelContext.java:801)
... 41 more
Caused by: java.lang.IllegalStateException: Cannot create bean: #&lt;span class=&quot;code-keyword&quot;&gt;class:&lt;/span&gt;org.apache.qpid.jms.JmsConnectionFactory
at org.apache.camel.model.BeanModelHelper.lambda$bind$2(BeanModelHelper.java:293)
at org.apache.camel.util.function.Suppliers$1.get(Suppliers.java:48)
at org.apache.camel.support.SupplierRegistry.lookupByNameAndType(SupplierRegistry.java:48)
at org.apache.camel.support.SimpleRegistry.lookupByName(SimpleRegistry.java:41)
at org.apache.camel.support.DefaultRegistry.lookupByName(DefaultRegistry.java:222)
at org.apache.camel.support.CamelContextHelper.lookup(CamelContextHelper.java:195)
at org.apache.camel.support.CamelContextHelper.mandatoryLookup(CamelContextHelper.java:235)
at org.apache.camel.support.PropertyBindingSupport.resolveBean(PropertyBindingSupport.java:1624)
at org.apache.camel.support.PropertyBindingSupport.resolveValue(PropertyBindingSupport.java:887)
at org.apache.camel.support.PropertyBindingSupport.doSetPropertyValue(PropertyBindingSupport.java:530)
... 50 more
Caused by: org.apache.camel.PropertyBindingException: Error binding property (remoteURI=@@[broker]@@) with name: remoteURI on bean: org.apache.qpid.jms.JmsConnectionFactory@797fcf9 with value: @@[broker]@@
at org.apache.camel.support.PropertyBindingSupport.setPropertiesOnTarget(PropertyBindingSupport.java:218)
at org.apache.camel.model.BeanModelHelper.lambda$bind$2(BeanModelHelper.java:281)
... 59 more
Caused by: java.lang.IllegalArgumentException: Invalid remote URI: @@[broker]@@
at org.apache.qpid.jms.JmsConnectionFactory.createURI(JmsConnectionFactory.java:366)
at org.apache.qpid.jms.JmsConnectionFactory.setRemoteURI(JmsConnectionFactory.java:405)
at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
at java.base/java.lang.reflect.Method.invoke(Method.java:580)
at org.apache.camel.impl.engine.IntrospectionSupport.setProperty(IntrospectionSupport.java:606)
at org.apache.camel.impl.engine.DefaultBeanIntrospection.setProperty(DefaultBeanIntrospection.java:206)
at org.apache.camel.support.PropertyBindingSupport.doSetSimplePropertyViaReflection(PropertyBindingSupport.java:919)
at org.apache.camel.support.PropertyBindingSupport.setSimplePropertyViaReflection(PropertyBindingSupport.java:818)
at org.apache.camel.support.PropertyBindingSupport.doSetPropertyValue(PropertyBindingSupport.java:568)
at org.apache.camel.support.PropertyBindingSupport.doBuildPropertyOgnlPath(PropertyBindingSupport.java:420)
at org.apache.camel.support.PropertyBindingSupport.doBindProperties(PropertyBindingSupport.java:300)
at org.apache.camel.support.PropertyBindingSupport$Builder.bind(PropertyBindingSupport.java:1958)
at org.apache.camel.support.PropertyBindingSupport.setPropertiesOnTarget(PropertyBindingSupport.java:197)
... 60 more
Caused by: java.net.URISyntaxException: Illegal character in path at index 2: @@[broker]@@
at java.base/java.net.URI$Parser.fail(URI.java:2995)
at java.base/java.net.URI$Parser.checkChars(URI.java:3166)
at java.base/java.net.URI$Parser.parseHierarchical(URI.java:3248)
at java.base/java.net.URI$Parser.parse(URI.java:3207)
at java.base/java.net.URI.&amp;lt;init&amp;gt;(URI.java:645)
at org.apache.qpid.jms.JmsConnectionFactory.createURI(JmsConnectionFactory.java:364)

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Somehow the --ignore-loading-error doesn&apos;t influence the KameletMain loading the kamelet.&lt;/p&gt;

&lt;p&gt;The workaround is to replace the placeholders in the kamelet endpoint with any value, then export, then add the placeholder back in the route in the exported file in src/main/java.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13586191">CAMEL-20991</key>
            <summary>camel-jbang - export error when there is placeholder in a kamelet endpoint url with a bean</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="claudio4j">Claudio Miranda</reporter>
                        <labels>
                    </labels>
                <created>Wed, 17 Jul 2024 23:08:10 +0000</created>
                <updated>Wed, 7 Aug 2024 11:18:47 +0000</updated>
                            <resolved>Wed, 7 Aug 2024 11:18:47 +0000</resolved>
                                                    <fixVersion>4.8.0</fixVersion>
                                    <component>camel-jbang</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17871399" author="davsclaus" created="Tue, 6 Aug 2024 16:54:31 +0000"  >&lt;p&gt;You do have some options which are not configured, so when you export you will end up with a project that cannot run.&lt;/p&gt;

&lt;p&gt;You should configure this value in application.properties.&lt;/p&gt;

&lt;p&gt;However as you say the ignore-loading-error option could maybe be how we would just ignore this and skip the option during export resolution and keep it in the source.&lt;/p&gt;</comment>
                            <comment id="17871561" author="davsclaus" created="Wed, 7 Aug 2024 07:35:33 +0000"  >&lt;p&gt;Okay I think its better to make the export a bit more flexible and attempt to export also if some property values has not been defined yet, so we can make your example export even without the --ignore option. However it would not be able to do that in case of compilation error, so the option can be useful there, but you risk that the export fail to detect a component in use due to the route was not compiled.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 14 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1qemo:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>