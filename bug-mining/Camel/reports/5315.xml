<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:41:44 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-15086] RabbitMQ args and concurrentConsumers</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-15086</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;Hello when i try to use args/args option with concurrentConsumers &amp;gt; 1 i get this exception &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 from(&lt;span class=&quot;code-quote&quot;&gt;&quot;rabbitmq:test?queue=test&amp;amp;arg.queue.x-max-priority=10&amp;amp;prefetchEnabled=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&amp;amp;prefetchCount=10&amp;amp;concurrentConsumers=2&quot;&lt;/span&gt;)
                .to(&lt;span class=&quot;code-quote&quot;&gt;&quot;log:cheese&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java.io.IOException: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
	at com.rabbitmq.client.impl.AMQChannel.wrap(AMQChannel.java:129) ~[amqp-client-5.7.3.jar:5.7.3]
	at com.rabbitmq.client.impl.AMQChannel.wrap(AMQChannel.java:125) ~[amqp-client-5.7.3.jar:5.7.3]
	at com.rabbitmq.client.impl.AMQChannel.exnWrappingRpc(AMQChannel.java:147) ~[amqp-client-5.7.3.jar:5.7.3]
	at com.rabbitmq.client.impl.ChannelN.queueDeclare(ChannelN.java:968) ~[amqp-client-5.7.3.jar:5.7.3]
	at com.rabbitmq.client.impl.recovery.AutorecoveringChannel.queueDeclare(AutorecoveringChannel.java:333) ~[amqp-client-5.7.3.jar:5.7.3]
	at org.apache.camel.component.rabbitmq.RabbitMQDeclareSupport.declareAndBindQueue(RabbitMQDeclareSupport.java:132) ~[camel-rabbitmq-3.3.0.jar:3.3.0]
	at org.apache.camel.component.rabbitmq.RabbitMQDeclareSupport.declareAndBindExchangeWithQueue(RabbitMQDeclareSupport.java:55) ~[camel-rabbitmq-3.3.0.jar:3.3.0]
	at org.apache.camel.component.rabbitmq.RabbitMQDeclareSupport.declareAndBindExchangesAndQueuesUsing(RabbitMQDeclareSupport.java:36) ~[camel-rabbitmq-3.3.0.jar:3.3.0]
	at org.apache.camel.component.rabbitmq.RabbitMQEndpoint.declareExchangeAndQueue(RabbitMQEndpoint.java:243) ~[camel-rabbitmq-3.3.0.jar:3.3.0]
	at org.apache.camel.component.rabbitmq.RabbitConsumer.openChannel(RabbitConsumer.java:353) ~[camel-rabbitmq-3.3.0.jar:3.3.0]
	at org.apache.camel.component.rabbitmq.RabbitConsumer.reconnect(RabbitConsumer.java:324) ~[camel-rabbitmq-3.3.0.jar:3.3.0]
	at org.apache.camel.component.rabbitmq.RabbitMQConsumer$StartConsumerCallable.call(RabbitMQConsumer.java:221) [camel-rabbitmq-3.3.0.jar:3.3.0]
	at org.apache.camel.component.rabbitmq.RabbitMQConsumer$StartConsumerCallable.call(RabbitMQConsumer.java:201) [camel-rabbitmq-3.3.0.jar:3.3.0]
	at java.util.concurrent.FutureTask.run(FutureTask.java:266) [na:1.8.0_201]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149) [na:1.8.0_201]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624) [na:1.8.0_201]
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:748) [na:1.8.0_201]
Caused by: com.rabbitmq.client.ShutdownSignalException: channel error; protocol method: #method&amp;lt;channel.close&amp;gt;(reply-code=406, reply-text=PRECONDITION_FAILED - inequivalent arg &lt;span class=&quot;code-quote&quot;&gt;&apos;x-max-priority&apos;&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; queue &lt;span class=&quot;code-quote&quot;&gt;&apos;test&apos;&lt;/span&gt; in vhost &lt;span class=&quot;code-quote&quot;&gt;&apos;/&apos;&lt;/span&gt;: received none but current is the value &lt;span class=&quot;code-quote&quot;&gt;&apos;10&apos;&lt;/span&gt; of type &lt;span class=&quot;code-quote&quot;&gt;&apos;signedint&apos;&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;class-&lt;/span&gt;id=50, method-id=10)
	at com.rabbitmq.utility.ValueOrException.getValue(ValueOrException.java:66) ~[amqp-client-5.7.3.jar:5.7.3]
	at com.rabbitmq.utility.BlockingValueOrException.uninterruptibleGetValue(BlockingValueOrException.java:36) ~[amqp-client-5.7.3.jar:5.7.3]
	at com.rabbitmq.client.impl.AMQChannel$BlockingRpcContinuation.getReply(AMQChannel.java:502) ~[amqp-client-5.7.3.jar:5.7.3]
	at com.rabbitmq.client.impl.AMQChannel.privateRpc(AMQChannel.java:293) ~[amqp-client-5.7.3.jar:5.7.3]
	at com.rabbitmq.client.impl.AMQChannel.exnWrappingRpc(AMQChannel.java:141) ~[amqp-client-5.7.3.jar:5.7.3]
	... 14 common frames omitted
Caused by: com.rabbitmq.client.ShutdownSignalException: channel error; protocol method: #method&amp;lt;channel.close&amp;gt;(reply-code=406, reply-text=PRECONDITION_FAILED - inequivalent arg &lt;span class=&quot;code-quote&quot;&gt;&apos;x-max-priority&apos;&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; queue &lt;span class=&quot;code-quote&quot;&gt;&apos;test&apos;&lt;/span&gt; in vhost &lt;span class=&quot;code-quote&quot;&gt;&apos;/&apos;&lt;/span&gt;: received none but current is the value &lt;span class=&quot;code-quote&quot;&gt;&apos;10&apos;&lt;/span&gt; of type &lt;span class=&quot;code-quote&quot;&gt;&apos;signedint&apos;&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;class-&lt;/span&gt;id=50, method-id=10)
	at com.rabbitmq.client.impl.ChannelN.asyncShutdown(ChannelN.java:522) ~[amqp-client-5.7.3.jar:5.7.3]
	at com.rabbitmq.client.impl.ChannelN.processAsync(ChannelN.java:346) ~[amqp-client-5.7.3.jar:5.7.3]
	at com.rabbitmq.client.impl.AMQChannel.handleCompleteInboundCommand(AMQChannel.java:182) ~[amqp-client-5.7.3.jar:5.7.3]
	at com.rabbitmq.client.impl.AMQChannel.handleFrame(AMQChannel.java:114) ~[amqp-client-5.7.3.jar:5.7.3]
	at com.rabbitmq.client.impl.AMQConnection.readFrame(AMQConnection.java:672) ~[amqp-client-5.7.3.jar:5.7.3]
	at com.rabbitmq.client.impl.AMQConnection.access$300(AMQConnection.java:48) ~[amqp-client-5.7.3.jar:5.7.3]
	at com.rabbitmq.client.impl.AMQConnection$MainLoop.run(AMQConnection.java:599) ~[amqp-client-5.7.3.jar:5.7.3]
	... 1 common frames omitted
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Thanks for the help&lt;/p&gt;</description>
                <environment></environment>
        <key id="13305862">CAMEL-15086</key>
            <summary>RabbitMQ args and concurrentConsumers</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="3">Duplicate</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="michael992">michael elbaz</reporter>
                        <labels>
                    </labels>
                <created>Tue, 19 May 2020 09:27:55 +0000</created>
                <updated>Thu, 15 Apr 2021 05:24:04 +0000</updated>
                            <resolved>Tue, 19 May 2020 12:15:40 +0000</resolved>
                                    <version>3.3.0</version>
                                    <fixVersion>3.4.0</fixVersion>
                                    <component>camel-rabbitmq</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17111127" author="ancosen" created="Tue, 19 May 2020 12:15:52 +0000"  >&lt;p&gt;There is already another issue for this.&lt;/p&gt;</comment>
                            <comment id="17111142" author="michael992" created="Tue, 19 May 2020 12:50:08 +0000"  >&lt;p&gt;A ok sorry&lt;/p&gt;</comment>
                            <comment id="17111767" author="davsclaus" created="Wed, 20 May 2020 04:54:07 +0000"  >&lt;p&gt;Ah I got a hunch that something may have been wrong when it was 2+ consumers. So I took a look and found a potential problem with the args being removed after setting for 1st consumer. So I have a fix in for next release.&lt;/p&gt;</comment>
                            <comment id="17112859" author="michael992" created="Thu, 21 May 2020 07:12:22 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davsclaus&quot; class=&quot;user-hover&quot; rel=&quot;davsclaus&quot;&gt;davsclaus&lt;/a&gt; thanks for feedback. Don&apos;t know if it&apos;s related or if i&apos;m doing something wrong but this code not working  (using EndpointRouteBuilder)&lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;CcamRoute &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; EndpointRouteBuilder {

    @Override
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void configure() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        from(rabbit()).log(&lt;span class=&quot;code-quote&quot;&gt;&quot;log:something&quot;&lt;/span&gt;);
    }

    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; EndpointConsumerBuilder rabbit() {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; rabbitmq(&lt;span class=&quot;code-quote&quot;&gt;&quot;test&quot;&lt;/span&gt;)
                .queue(&lt;span class=&quot;code-quote&quot;&gt;&quot;test&quot;&lt;/span&gt;)
                .advanced()
            &lt;span class=&quot;code-comment&quot;&gt;// .args(Collections.singletonMap(&lt;span class=&quot;code-quote&quot;&gt;&quot;x-max-priority&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;10&quot;&lt;/span&gt;))
&lt;/span&gt;               .args(Collections.singletonMap(&lt;span class=&quot;code-quote&quot;&gt;&quot;arg.queue.x-max-priority&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;10&quot;&lt;/span&gt;));
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17112902" author="davsclaus" created="Thu, 21 May 2020 08:05:38 +0000"  >&lt;p&gt;Yeah wait for 3.4 release&lt;/p&gt;</comment>
                            <comment id="17113501" author="michael992" created="Thu, 21 May 2020 19:48:51 +0000"  >&lt;p&gt;Ok thanks&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310660">
                    <name>Completes</name>
                                            <outwardlinks description="fixes">
                                        <issuelink>
            <issuekey id="13372476">CAMEL-16511</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10062"><![CDATA[Moderate]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 25 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0ewb4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>