<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 11:01:13 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-18965] Camel-CXF: OnCompletion not working anymore</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-18965</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;Since following change, the onCompletionHandler is not called anymore in error case (soap fault)&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-16796&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/CAMEL-16796&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/camel/commit/45e64cce8ad2e1d22a5f55be13a6dfcaa504f58f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/commit/45e64cce8ad2e1d22a5f55be13a6dfcaa504f58f&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Reproducer&lt;/b&gt;: &lt;a href=&quot;https://github.com/mash-sap/CAMEL-16532/tree/Camel-18965&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/mash-sap/CAMEL-16532/tree/Camel-18965&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13520963">CAMEL-18965</key>
            <summary>Camel-CXF: OnCompletion not working anymore</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ffang">Freeman Yue Fang</assignee>
                                    <reporter username="mash-sap">Manuel Shenavai</reporter>
                        <labels>
                    </labels>
                <created>Mon, 23 Jan 2023 09:36:42 +0000</created>
                <updated>Wed, 7 Jun 2023 21:27:58 +0000</updated>
                            <resolved>Wed, 7 Jun 2023 21:25:10 +0000</resolved>
                                    <version>3.11.1</version>
                                    <fixVersion>3.18.8</fixVersion>
                    <fixVersion>3.20.6</fixVersion>
                    <fixVersion>4.0-RC1</fixVersion>
                                    <component>camel-cxf</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17679752" author="ancosen" created="Mon, 23 Jan 2023 10:39:08 +0000"  >&lt;p&gt;Did you try with 3.18.x and 3.20.x?&lt;/p&gt;</comment>
                            <comment id="17679761" author="mash-sap" created="Mon, 23 Jan 2023 11:05:49 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=acosentino&quot; class=&quot;user-hover&quot; rel=&quot;acosentino&quot;&gt;acosentino&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;I can update the reproducer only to 3.17 due to missing dependency to camel-cxf-starter 3.18 and above.&lt;/p&gt;

&lt;p&gt;3.17 has the same problem and the code-change mentioned above is also part of 3.20. So I think it&apos;s also a problem in 3.20.&lt;/p&gt;

&lt;p&gt;CXFConsumer in 3.20 (no close of Camel UOW): &lt;a href=&quot;https://github.com/apache/camel/blob/camel-3.20.x/components/camel-cxf/camel-cxf-soap/src/main/java/org/apache/camel/component/cxf/jaxws/CxfConsumer.java#L87&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/blob/camel-3.20.x/components/camel-cxf/camel-cxf-soap/src/main/java/org/apache/camel/component/cxf/jaxws/CxfConsumer.java#L87&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Best regards,&lt;br/&gt;
Manuel&lt;/p&gt;</comment>
                            <comment id="17681057" author="davsclaus" created="Thu, 26 Jan 2023 17:33:24 +0000"  >&lt;p&gt;See the upgrade guides on CXF from 3.18 onwards&lt;br/&gt;
&lt;a href=&quot;https://camel.apache.org/manual/camel-3x-upgrade-guide-3_18.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://camel.apache.org/manual/camel-3x-upgrade-guide-3_18.html&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17683728" author="mash-sap" created="Fri, 3 Feb 2023 08:06:11 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ffang&quot; class=&quot;user-hover&quot; rel=&quot;ffang&quot;&gt;ffang&lt;/a&gt; , is there any update on this issue?&lt;/p&gt;

&lt;p&gt;Thanks in advance &amp;amp;&lt;br/&gt;
Best regards,&lt;br/&gt;
Manuel&lt;/p&gt;</comment>
                            <comment id="17704923" author="davsclaus" created="Sat, 25 Mar 2023 10:46:34 +0000"  >&lt;p&gt;Is the onCompletion called if the SOAP request is valid (200 OK) instead of 500 fault&lt;/p&gt;</comment>
                            <comment id="17704960" author="davsclaus" created="Sat, 25 Mar 2023 16:33:38 +0000"  >&lt;p&gt;Okay camel-cxf is a bit old code, and at first glance it looks like its wrong in the consumer class, where it creates UoW but does not call done after processing - there is only some code doing this in case of exception thrown.&lt;/p&gt;</comment>
                            <comment id="17704962" author="davsclaus" created="Sat, 25 Mar 2023 16:43:23 +0000"  >&lt;p&gt;There is an UnitOfWorkCloserInterceptor that is supposed to done the UoW. But its not triggered when there is this soap fault. &lt;/p&gt;

&lt;p&gt;There are 2 closers below. 1st is for one-way. And a SOAP is request/response, so its not done. The 2nd below is not called when there is a SOAP fault error inside CXF.&lt;/p&gt;

&lt;p&gt;        ret.getEndpoint().getInInterceptors().add(new UnitOfWorkCloserInterceptor(&quot;post-invoke&quot;, true));&lt;br/&gt;
        ret.getEndpoint().getOutInterceptors().add(new UnitOfWorkCloserInterceptor());&lt;/p&gt;
</comment>
                            <comment id="17730284" author="ffang" created="Wed, 7 Jun 2023 21:27:58 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davsclaus&quot; class=&quot;user-hover&quot; rel=&quot;davsclaus&quot;&gt;davsclaus&lt;/a&gt; for the analysis. You are absolutely correct!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="13388416">CAMEL-16796</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 22 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1falc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>