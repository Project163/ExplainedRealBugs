<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:26:58 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-12065] [Camel-consul] firstIndex cannot be set if it is out of Long range</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-12065</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;&lt;a href=&quot;http://camel.apache.org/consul-component.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Documentation&lt;/a&gt; claims that &lt;em&gt;firstIndex&lt;/em&gt; option must be of Long Java type.&lt;br/&gt;
However WaitIndex (that is generated by Consul and should be set for &lt;em&gt;firstIndex&lt;/em&gt; to skip all events until one that has such WaitIndex) is actually of BigInteger type and can be out of Long type range - &lt;a href=&quot;https://github.com/hashicorp/consul/blob/master/api/event.go#L90-L104&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/hashicorp/consul/blob/master/api/event.go#L90-L104&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;org.apache.camel.component.consul.enpoint.ConsulEventConsumer&lt;/em&gt; has &lt;em&gt;index&lt;/em&gt; field of correct type AtomicReference&amp;lt;BigInteger&amp;gt; and is initialized as&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.index = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; AtomicReference(BigInteger.valueOf(configuration.getFirstIndex()));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;However BigInteger value that is out of Long range cannot be passed for &lt;em&gt;index&lt;/em&gt;  from apiEnpoint option &lt;em&gt;firstIndex&lt;/em&gt; because &lt;em&gt;org.apache.camel.component.consul.ConsulConfiguration&lt;/em&gt; has &lt;em&gt;firstIndex&lt;/em&gt; field that is declared as &lt;em&gt;long&lt;/em&gt; type:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    @UriParam(
        label = &lt;span class=&quot;code-quote&quot;&gt;&quot;consumer,watch&quot;&lt;/span&gt;,
        defaultValue = &lt;span class=&quot;code-quote&quot;&gt;&quot;0&quot;&lt;/span&gt;
    )
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;long&lt;/span&gt; firstIndex;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Seems that it should be changed to be of BigInteger type.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13122818">CAMEL-12065</key>
            <summary>[Camel-consul] firstIndex cannot be set if it is out of Long range</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="acosentino">Andrea Cosentino</assignee>
                                    <reporter username="Viachaslau.Tsikhanovich">Viachaslau Tsikhanovich</reporter>
                        <labels>
                    </labels>
                <created>Tue, 5 Dec 2017 09:59:12 +0000</created>
                <updated>Tue, 27 Mar 2018 09:17:20 +0000</updated>
                            <resolved>Thu, 7 Dec 2017 09:49:33 +0000</resolved>
                                    <version>2.20.1</version>
                                    <fixVersion>2.21.0</fixVersion>
                                    <component>camel-consul</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16281576" author="ancosen" created="Thu, 7 Dec 2017 09:50:00 +0000"  >&lt;p&gt;Thanks, since this is a breaking change for the configuration of Camel-consul this is fixed only on 2.21.0&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13148171">CAMEL-12410</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 49 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3njgn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>