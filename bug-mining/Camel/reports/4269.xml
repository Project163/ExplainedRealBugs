<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:25:51 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-11772] Sjms with Artemis causes NullPointerException due to a ClassCastException</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-11772</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;When using a camel-sjms endpoint with an Apache Artemis broker, the sjms endpoint will throw a NullPointerException in the org.apache.camel.component.sjms.consumer.AbstractMessageHandler.onMessage method.  However, this exception is actually masking the real exception within sjms.  In SjmsMessage.java the method getDestinationAsString gets called with a javax.jms.Destination object.  In this case, it is a org.apache.activemq.artemis.jms.client.ActiveMQDestination.  The ActiveMQDestination is neither a javax.jms.Topic nor a javax.jms.Queue.  In the getDestinationAsString method in SjmsMessage.java, it first checks to see if the destination is a Topic and then if it is not it blindly casts to a javax.jms.Queue and in this case causes a ClassCastException.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13101661">CAMEL-11772</key>
            <summary>Sjms with Artemis causes NullPointerException due to a ClassCastException</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="wilhelmd">Derek Wilhelm</reporter>
                        <labels>
                    </labels>
                <created>Tue, 12 Sep 2017 14:12:26 +0000</created>
                <updated>Fri, 15 Sep 2017 14:12:21 +0000</updated>
                            <resolved>Wed, 13 Sep 2017 07:47:39 +0000</resolved>
                                    <version>2.19.0</version>
                    <version>2.19.1</version>
                    <version>2.19.2</version>
                                    <fixVersion>2.18.5</fixVersion>
                    <fixVersion>2.19.4</fixVersion>
                    <fixVersion>2.20.0</fixVersion>
                                    <component>camel-sjms</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="7200">2h</timeoriginalestimate>
                            <timeestimate seconds="7200">2h</timeestimate>
                                        <comments>
                            <comment id="16163003" author="githubbot" created="Tue, 12 Sep 2017 14:21:35 +0000"  >&lt;p&gt;GitHub user derekwilhelm opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/1932&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/1932&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-11772&quot; title=&quot;Sjms with Artemis causes NullPointerException due to a ClassCastException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-11772&quot;&gt;&lt;del&gt;CAMEL-11772&lt;/del&gt;&lt;/a&gt; - Fix potential ClassCastException in SjmsMessage.java&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/derekwilhelm/camel&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/derekwilhelm/camel&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-11772&quot; title=&quot;Sjms with Artemis causes NullPointerException due to a ClassCastException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-11772&quot;&gt;&lt;del&gt;CAMEL-11772&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/1932.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/1932.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #1932&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit b9baeba2128d9ef6d67c4651033e982e6e945665&lt;br/&gt;
Author: derekwilhelm &amp;lt;derek.wilhelm@connexta.com&amp;gt;&lt;br/&gt;
Date:   2017-09-12T14:19:06Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-11772&quot; title=&quot;Sjms with Artemis causes NullPointerException due to a ClassCastException&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-11772&quot;&gt;&lt;del&gt;CAMEL-11772&lt;/del&gt;&lt;/a&gt; - Fix potential ClassCastException in SjmsMessage.java&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16163016" author="davsclaus" created="Tue, 12 Sep 2017 14:24:16 +0000"  >&lt;p&gt;Thanks for reporting. Yeah it looks like Artemis is just a javax.jms.Destination that is neither a queue or a topic, so its a bit hard to delude what it is, via regular javax jms apis - &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/activemq-artemis/blob/master/artemis-jms-client/src/main/java/org/apache/activemq/artemis/jms/client/ActiveMQDestination.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/activemq-artemis/blob/master/artemis-jms-client/src/main/java/org/apache/activemq/artemis/jms/client/ActiveMQDestination.java&lt;/a&gt;&lt;/p&gt;
</comment>
                            <comment id="16163024" author="davsclaus" created="Tue, 12 Sep 2017 14:28:51 +0000"  >&lt;p&gt;Its the same problem with Artemis in camel-jms&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/camel/blob/master/components/camel-jms/src/main/java/org/apache/camel/component/jms/JmsMessage.java#L256&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/blob/master/components/camel-jms/src/main/java/org/apache/camel/component/jms/JmsMessage.java#L256&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16163025" author="davsclaus" created="Tue, 12 Sep 2017 14:30:05 +0000"  >&lt;p&gt;We need to do&lt;/p&gt;

&lt;p&gt;1) that class cast fix from the PR&lt;br/&gt;
2) if the returned id is null, then call return super.createMessageId() in the createMessageId method&lt;/p&gt;

&lt;p&gt;This fix needs in camel-jms, camel-sjms and camel-sjms2&lt;/p&gt;

</comment>
                            <comment id="16163099" author="wilhelmd" created="Tue, 12 Sep 2017 15:17:44 +0000"  >&lt;p&gt;I updated the PR to include a check if the getDestinationAsString method returns null in both camel-sjms and camel-jms.  camel-sjms2 looks like it uses camel-sjms for this piece so it should be covered by the fix to camel-sjms.&lt;/p&gt;</comment>
                            <comment id="16164262" author="davsclaus" created="Wed, 13 Sep 2017 07:47:39 +0000"  >&lt;p&gt;Thanks for reporting and the PR&lt;/p&gt;</comment>
                            <comment id="16167902" author="githubbot" created="Fri, 15 Sep 2017 14:02:42 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/1932&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/1932&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10061"><![CDATA[Novice]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 9 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3jywf:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>