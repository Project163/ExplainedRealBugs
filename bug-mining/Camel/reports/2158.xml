<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 09:55:34 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-5748] Classloader mixup in Direct VM component</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-5748</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;The Direct VM component allows routes in different Camel Contexts to communicate with each other with all the benefits of the Direct endpoint (namely thread-sharing, thus enabling transaction to propagate across Camel Contexts).&lt;/p&gt;

&lt;p&gt;However, the TCCL of the consumer route still remains the TCCL of the producer route. See &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-5722&quot; title=&quot;Classloader mixup when consumers across bundles share the same camel-jetty port&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-5722&quot;&gt;&lt;del&gt;CAMEL-5722&lt;/del&gt;&lt;/a&gt; for a similar case.&lt;/p&gt;

&lt;p&gt;I suggest fixing this by introducing a proxy processor at the consumer that sets the appropriate classloader, and sets it back when done. Note: remember to take into account exception scenarios, i.e. we should catch exceptions from the forward call to .process(), reset the classloader and rethrow the exception.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12613768">CAMEL-5748</key>
            <summary>Classloader mixup in Direct VM component</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="raulvk">Ra&#250;l Kripalani</assignee>
                                    <reporter username="raulvk">Ra&#250;l Kripalani</reporter>
                        <labels>
                    </labels>
                <created>Sat, 27 Oct 2012 18:03:38 +0000</created>
                <updated>Mon, 21 Jan 2013 12:44:48 +0000</updated>
                            <resolved>Mon, 21 Jan 2013 12:44:48 +0000</resolved>
                                    <version>2.10.2</version>
                                    <fixVersion>2.10.4</fixVersion>
                    <fixVersion>2.11.0</fixVersion>
                                    <component>camel-core</component>
                    <component>osgi</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13485923" author="davsclaus" created="Mon, 29 Oct 2012 10:01:20 +0000"  >&lt;p&gt;I wonder if there is anywhere in OSGi spec that says that the TCCL must be the classloader from the current bundle? &lt;/p&gt;

&lt;p&gt;When you use OSGi service registry and invoke services across bundles, what is the TCCL then?&lt;/p&gt;</comment>
                            <comment id="13485928" author="davsclaus" created="Mon, 29 Oct 2012 10:13:57 +0000"  >&lt;p&gt;I assume camel-quartz may have this issue as well as the quartz scheduler is shared in osgi land.&lt;/p&gt;</comment>
                            <comment id="13485965" author="raulvk" created="Mon, 29 Oct 2012 11:27:20 +0000"  >&lt;p&gt;That&apos;s a good point. Just searching on Google for &quot;thread context classloader osgi&quot; shows that Camel is not the only project in pain due to possible under-specification from OSGi... &lt;a href=&quot;http://apache-felix.18485.n6.nabble.com/Can-the-thread-context-classloader-issue-be-solved-at-all-td4835872.html#a30704352&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://apache-felix.18485.n6.nabble.com/Can-the-thread-context-classloader-issue-be-solved-at-all-td4835872.html#a30704352&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13558719" author="davsclaus" created="Mon, 21 Jan 2013 12:21:37 +0000"  >&lt;p&gt;I think this makes sense to implement in direct-vm as its intended for cross application in same JVM. So the direct VM consumer code should have logic to set/revert the TCCL.&lt;/p&gt;</comment>
                            <comment id="13558726" author="davsclaus" created="Mon, 21 Jan 2013 12:44:48 +0000"  >&lt;p&gt;I implemented the suggestion from Raul.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12612837">CAMEL-5722</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>252523</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 44 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0ctkn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>72735</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>