<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:52:53 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-17474] camel-core: deadlock with multicast in a transacted context</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-17474</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;Using a multicast with more than one child in a transacted context causes a deadlock. Reproducer here &lt;a href=&quot;https://github.com/jeremyross/camel-transacted-multicast&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/jeremyross/camel-transacted-multicast&lt;/a&gt;.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13422049">CAMEL-17474</key>
            <summary>camel-core: deadlock with multicast in a transacted context</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jondruse">Jiri Ondrusek</assignee>
                                    <reporter username="jeremyross">Jeremy Ross</reporter>
                        <labels>
                    </labels>
                <created>Tue, 11 Jan 2022 20:50:19 +0000</created>
                <updated>Fri, 4 Mar 2022 08:36:45 +0000</updated>
                            <resolved>Tue, 1 Mar 2022 16:32:46 +0000</resolved>
                                    <version>3.13.0</version>
                    <version>3.14.0</version>
                                    <fixVersion>3.14.2</fixVersion>
                    <fixVersion>3.16.0</fixVersion>
                                    <component>camel-core</component>
                        <due></due>
                            <votes>8</votes>
                                    <watches>8</watches>
                                                                                                                <comments>
                            <comment id="17474745" author="jeremyross" created="Wed, 12 Jan 2022 17:32:08 +0000"  >&lt;p&gt;Looks like this was introduced in 3.13.0.&lt;/p&gt;</comment>
                            <comment id="17478555" author="jondruse" created="Wed, 19 Jan 2022 10:33:04 +0000"  >&lt;p&gt;I&apos;ve found the origin of the problem. It is caused by the commit &lt;a href=&quot;https://github.com/apache/camel/commit/961ad0e56e9331e71c386415ec67676e586ea629&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/commit/961ad0e56e9331e71c386415ec67676e586ea629&lt;/a&gt; (I was able to debug different behavior here: &lt;a href=&quot;https://github.com/apache/camel/commit/961ad0e56e9331e71c386415ec67676e586ea629#diff-592328b1c35a306fa6ba3875f63b872de065e6d973ea89870d579bbab505cfadR214&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/commit/961ad0e56e9331e71c386415ec67676e586ea629#diff-592328b1c35a306fa6ba3875f63b872de065e6d973ea89870d579bbab505cfadR214&lt;/a&gt; )&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davsclaus&quot; class=&quot;user-hover&quot; rel=&quot;davsclaus&quot;&gt;davsclaus&lt;/a&gt; From my POV it  makes sense, that deadlock is happening. As you can see route definition from the reproducer, multicast is calling twice the same endpoint&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
from(&lt;span class=&quot;code-quote&quot;&gt;&quot;direct:route2&quot;&lt;/span&gt;).routeId(&lt;span class=&quot;code-quote&quot;&gt;&quot;r.route2&quot;&lt;/span&gt;)
    .log(LoggingLevel.DEBUG, &lt;span class=&quot;code-quote&quot;&gt;&quot;Entering route: ${routeId}&quot;&lt;/span&gt;)
    .multicast()
        .to(&lt;span class=&quot;code-quote&quot;&gt;&quot;log:r.test&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;log:r.test&quot;&lt;/span&gt;)
    .end(); &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;b&gt;If those endpoint are different, deadlock is not happening.&lt;/b&gt;&lt;br/&gt;
I&apos;d say, that transaction behaves correctly. Transaction blocks access to the same endpoints, which are used almost at the same time, which causes deadlock.&lt;br/&gt;
Error can be the fact, that it worked before 3.13.0&lt;br/&gt;
WDYT?&lt;/p&gt;</comment>
                            <comment id="17479072" author="jeremyross" created="Thu, 20 Jan 2022 03:04:26 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jondruse&quot; class=&quot;user-hover&quot; rel=&quot;jondruse&quot;&gt;jondruse&lt;/a&gt; I get the deadlock even if the multicast children are different endpoints. Updated the reproducer to reflect this.&lt;/p&gt;</comment>
                            <comment id="17479137" author="jondruse" created="Thu, 20 Jan 2022 07:26:53 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jeremyross&quot; class=&quot;user-hover&quot; rel=&quot;jeremyross&quot;&gt;jeremyross&lt;/a&gt; You are right, it doesn&apos;t help top have different endpoints. (I probably simulated that case with the working camel version - so it showed false success).&lt;br/&gt;
&lt;b&gt;But the origin of the reason is still  the same as I wrote&lt;/b&gt;.&lt;br/&gt;
Now I don&apos;t think that it is the right behavior. Deadlock is an issue, which shouldn&apos;t be there.  Following route shouldn&apos;t cause deadlock, but it causes.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
            .multicast()
                .to(&lt;span class=&quot;code-quote&quot;&gt;&quot;log:r.test&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;direct:r.test&quot;&lt;/span&gt;)
            .end();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17480503" author="davsclaus" created="Sat, 22 Jan 2022 17:32:21 +0000"  >&lt;p&gt;Sorry Jiri, I have not had time to look into this. Will try next week&lt;/p&gt;</comment>
                            <comment id="17483773" author="yasser.zamani" created="Fri, 28 Jan 2022 13:25:04 +0000"  >&lt;p&gt;Similar issue we&apos;ve faced: &lt;a href=&quot;https://github.com/apache/camel-quarkus/issues/3471&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel-quarkus/issues/3471&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Not sure we&apos;re completely if it&apos;s Quarkus specific issue, or is introduced by Camel.&lt;/p&gt;</comment>
                            <comment id="17483795" author="jondruse" created="Fri, 28 Jan 2022 14:14:09 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yasserzamani&quot; class=&quot;user-hover&quot; rel=&quot;yasserzamani&quot;&gt;yasserzamani&lt;/a&gt; for bringing CQ issue to our attention. I commented that issue, it should be possible to determine, whether it is related or not.&lt;/p&gt;</comment>
                            <comment id="17491004" author="zhfeng" created="Fri, 11 Feb 2022 16:00:54 +0000"  >&lt;p&gt;Is there any update? I just added a camel test to reflect the CQ issue. &lt;a href=&quot;https://github.com/zhfeng/apache-camel/blob/transacted_split/tests/camel-itest/src/test/java/org/apache/camel/itest/tx/JtaRouteTest.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/zhfeng/apache-camel/blob/transacted_split/tests/camel-itest/src/test/java/org/apache/camel/itest/tx/JtaRouteTest.java&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;It hangs when running with  &lt;b&gt;RequiresNewJtaTransactionPolicy&lt;/b&gt; but works with &lt;b&gt;SpringTransactionPolicy&lt;/b&gt;. I thinks it might be releated to this issue and will keep investigating.&lt;/p&gt;</comment>
                            <comment id="17491986" author="jondruse" created="Mon, 14 Feb 2022 13:16:50 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=zhfeng&quot; class=&quot;user-hover&quot; rel=&quot;zhfeng&quot;&gt;zhfeng&lt;/a&gt; , thanks for the test (based on CQ &lt;a href=&quot;https://github.com/apache/camel-quarkus/issues/3471&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;issue&lt;/a&gt;). I&apos;ll try it and verify whether problem is caused by the same commit as this issue.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davsclaus&quot; class=&quot;user-hover&quot; rel=&quot;davsclaus&quot;&gt;davsclaus&lt;/a&gt; Do you have an idea, what could be wrong?&lt;/p&gt;</comment>
                            <comment id="17492013" author="jondruse" created="Mon, 14 Feb 2022 14:17:43 +0000"  >&lt;p&gt;I tried to change following line &lt;a href=&quot;https://github.com/apache/camel/blob/main/core/camel-core-processor/src/main/java/org/apache/camel/processor/errorhandler/RedeliveryErrorHandler.java#L214&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/blob/main/core/camel-core-processor/src/main/java/org/apache/camel/processor/errorhandler/RedeliveryErrorHandler.java#L214&lt;/a&gt; into ` reactiveExecutor.scheduleSync(task);` and test `JtaRouteTest` is successful.&lt;/p&gt;

&lt;p&gt;This confirms, that the error is the same. I&apos;ll try to investigate, but I&apos;m not sure whether I would be able to find a fix, without &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davsclaus&quot; class=&quot;user-hover&quot; rel=&quot;davsclaus&quot;&gt;davsclaus&lt;/a&gt;&apos;s help.&lt;/p&gt;</comment>
                            <comment id="17492060" author="zhfeng" created="Mon, 14 Feb 2022 15:28:37 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jondruse&quot; class=&quot;user-hover&quot; rel=&quot;jondruse&quot;&gt;jondruse&lt;/a&gt; but I&apos;m still wondering that why &lt;b&gt;SpringTransactionPolicy&lt;/b&gt; is working. In camel-spring &lt;b&gt;without&lt;/b&gt; the changes in RedeliveryErrorHandler, &lt;b&gt;TransactionErrorHandler&lt;/b&gt; also extends &lt;b&gt;RedeliveryErrorHandler&lt;/b&gt; and with &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; void processByErrorHandler(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Exchange exchange) {
        awaitManager.process(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; AsyncProcessorSupport() {
            @Override
            &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; process(Exchange exchange, AsyncCallback callback) {
                &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; TransactionErrorHandler.&lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;.process(exchange, callback);
            }
        }, exchange);
    }

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17492072" author="jondruse" created="Mon, 14 Feb 2022 16:01:10 +0000"  >&lt;p&gt;I agree that the fact, that &lt;b&gt;SpringTransactionPolicy&lt;/b&gt; is working, does not make sense in the way, that problem is caused by the camel itself only.&lt;br/&gt;
I&apos;m trying to simulate the problem with my custom policy -&amp;gt; just to find what is causing it exactly - but no success so far.&lt;/p&gt;</comment>
                            <comment id="17492089" author="davsclaus" created="Mon, 14 Feb 2022 16:33:45 +0000"  >&lt;p&gt;Sorry but this problem is more hard-core where you need some quiet time to analyse. My family and myself is struck with covid so I dont have the energy to dive into this at the moment.&lt;/p&gt;</comment>
                            <comment id="17492403" author="jondruse" created="Tue, 15 Feb 2022 07:25:26 +0000"  >&lt;p&gt;I&apos;m sorry to hear about that. Fingers crossed that situation&#160;will improve soon.&lt;/p&gt;</comment>
                            <comment id="17492692" author="jondruse" created="Tue, 15 Feb 2022 16:06:38 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=zhfeng&quot; class=&quot;user-hover&quot; rel=&quot;zhfeng&quot;&gt;zhfeng&lt;/a&gt; I have a theory, what could be reason of this error. As you can see here: &lt;a href=&quot;https://github.com/apache/camel/blob/main/components/camel-jta/src/main/java/org/apache/camel/jta/TransactionErrorHandler.java#L91&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/blob/main/components/camel-jta/src/main/java/org/apache/camel/jta/TransactionErrorHandler.java#L91&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    @Override
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void process(Exchange exchange) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        &lt;span class=&quot;code-comment&quot;&gt;// we have to run &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; synchronously as a JTA Transaction does *not*
&lt;/span&gt;        &lt;span class=&quot;code-comment&quot;&gt;// support using multiple threads to span a transaction&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;JtaTransactionErrorHandler has to be run synchronously. Unfortunately the change from &lt;a href=&quot;https://github.com/apache/camel/commit/961ad0e56e9331e71c386415ec67676e586ea629#diff-592328b1c35a306fa6ba3875f63b872de065e6d973ea89870d579bbab505cfadR214&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/commit/961ad0e56e9331e71c386415ec67676e586ea629#diff-592328b1c35a306fa6ba3875f63b872de065e6d973ea89870d579bbab505cfadR214&lt;/a&gt;, which replaces &quot;reactiveExecutor.scheduleSync(task);&quot; with &quot;reactiveExecutor.scheduleQueue(task);&quot; changed synchronous executions to asynchronous. With that changed, jta/TransactionErrorHandler does not work correctly.&lt;/p&gt;

&lt;p&gt;Quick fix is to revert back synchronous behavior, but I&apos;m sure that it is not correct. Do you have an idea how this could be fixed?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I see a possibility to define synchronous executions in case that camel-jta transactions are used. I&apos;m ot sure whether it will be p&lt;/p&gt;

&lt;p&gt;At least this explains why spring transaction works (does not need synchronous executions)...&lt;/p&gt;</comment>
                            <comment id="17492959" author="zhfeng" created="Wed, 16 Feb 2022 02:14:41 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davsclaus&quot; class=&quot;user-hover&quot; rel=&quot;davsclaus&quot;&gt;davsclaus&lt;/a&gt; I&apos;m sorry to hear that and hope all of you will recovery very soon. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jondruse&quot; class=&quot;user-hover&quot; rel=&quot;jondruse&quot;&gt;jondruse&lt;/a&gt; Thanks so much to investigate this and yeah, I think most codes of the jta TransactionErrorHandler was borrowed from the spring one just replace the spring transaction template. I will dive into this sychronous executions in TransactionErrorHandler to see if we can find a way to fix it.&lt;/p&gt;</comment>
                            <comment id="17495509" author="jondruse" created="Mon, 21 Feb 2022 12:53:33 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=zhfeng&quot; class=&quot;user-hover&quot; rel=&quot;zhfeng&quot;&gt;zhfeng&lt;/a&gt; ,&#160;&lt;br/&gt;
I created a PR with my attempt to force synchronous behavior in case that JTA transaction is used - &lt;a href=&quot;https://github.com/apache/camel/pull/7004&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/7004&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Do you have any success in solving this problem on the JTA side?&lt;/p&gt;</comment>
                            <comment id="17495581" author="zhfeng" created="Mon, 21 Feb 2022 15:26:16 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jondruse&quot; class=&quot;user-hover&quot; rel=&quot;jondruse&quot;&gt;jondruse&lt;/a&gt; I added my comment on your PR and it looks like another solution with marking the exchange transacted in &lt;a href=&quot;https://github.com/zhfeng/apache-camel/blob/transacted_split/components/camel-jta/src/main/java/org/apache/camel/jta/JtaTransactionErrorHandler.java#L72-L83&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;JtaTransactionErrorHandler&lt;/a&gt; &lt;/p&gt;</comment>
                            <comment id="17496737" author="davsclaus" created="Wed, 23 Feb 2022 12:54:36 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=zhfeng&quot; class=&quot;user-hover&quot; rel=&quot;zhfeng&quot;&gt;zhfeng&lt;/a&gt; would you backport this to 3.14.x LTS branch&lt;/p&gt;</comment>
                            <comment id="17496738" author="davsclaus" created="Wed, 23 Feb 2022 12:55:46 +0000"  >&lt;p&gt;And that is the JTA fix, for spring boot then there is potentially still an issue.&lt;/p&gt;</comment>
                            <comment id="17497218" author="zhfeng" created="Thu, 24 Feb 2022 07:08:28 +0000"  >&lt;p&gt;yeah, I&apos;ve backport to 3.14.x&lt;/p&gt;</comment>
                            <comment id="17497316" author="zhfeng" created="Thu, 24 Feb 2022 10:21:21 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davsclaus&quot; class=&quot;user-hover&quot; rel=&quot;davsclaus&quot;&gt;davsclaus&lt;/a&gt; hi, there is still an issue while backporing becasue no camel-cdi-jta in 3.14.x and it has to bind TransactionManager in JNDI context. I&apos;m working on it.&lt;/p&gt;</comment>
                            <comment id="17498151" author="zhfeng" created="Fri, 25 Feb 2022 14:25:09 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jeremyross&quot; class=&quot;user-hover&quot; rel=&quot;jeremyross&quot;&gt;jeremyross&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jondruse&quot; class=&quot;user-hover&quot; rel=&quot;jondruse&quot;&gt;jondruse&lt;/a&gt; I just found that if adding &quot;transacted()&quot; in route2, it works.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    from(&lt;span class=&quot;code-quote&quot;&gt;&quot;direct:route2&quot;&lt;/span&gt;).routeId(&lt;span class=&quot;code-quote&quot;&gt;&quot;r.route2&quot;&lt;/span&gt;)
            .log(LoggingLevel.DEBUG, &lt;span class=&quot;code-quote&quot;&gt;&quot;Entering route: ${routeId}&quot;&lt;/span&gt;)
            .transacted()
            .multicast()
                &lt;span class=&quot;code-comment&quot;&gt;// 2 or more multicast children will deadlock after the last child
&lt;/span&gt;                .to(&lt;span class=&quot;code-quote&quot;&gt;&quot;log:r.test&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;direct:route3&quot;&lt;/span&gt;)
            .end();

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So it looks like the exchange in the sub-routes is not trancated ?&lt;/p&gt;</comment>
                            <comment id="17498198" author="jeremyross" created="Fri, 25 Feb 2022 16:17:04 +0000"  >&lt;p&gt;Sub-routes should automatically participate in the transacted context. If not, that&apos;s new behavior, likely a bug, and maybe the cause of this issue.&lt;/p&gt;</comment>
                            <comment id="17498203" author="zhfeng" created="Fri, 25 Feb 2022 16:40:15 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davsclaus&quot; class=&quot;user-hover&quot; rel=&quot;davsclaus&quot;&gt;davsclaus&lt;/a&gt; I raise a fix with &lt;a href=&quot;https://github.com/apache/camel/pull/7040&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/7040&lt;/a&gt;. Please review it.&lt;/p&gt;</comment>
                            <comment id="17498694" author="zhfeng" created="Mon, 28 Feb 2022 03:23:22 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jeremyross&quot; class=&quot;user-hover&quot; rel=&quot;jeremyross&quot;&gt;jeremyross&lt;/a&gt; &#160;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davsclaus&quot; class=&quot;user-hover&quot; rel=&quot;davsclaus&quot;&gt;davsclaus&lt;/a&gt; I don&apos;t think we have a behavior to propagate a transaction in the sub routes such as multicase EIP currently.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310660">
                    <name>Completes</name>
                                            <outwardlinks description="fixes">
                                        <issuelink>
            <issuekey id="13426859">CAMEL-17609</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13426859">CAMEL-17609</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 37 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0yhao:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>