<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:36:23 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-13094] Context MBean not unregistered on startup failure</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-13094</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;In Camel-2.23.x a failure to start the context would call ServiceSupport.doStop(). This is no longer the case. Instead, a CamelContextStartupFailureEvent is thrown and services that might previously have been started are never stopped.&lt;/p&gt;

&lt;p&gt;As a result or (side effect) the context MBean may remain registered if the startup failure occurred after its initial registration. &lt;/p&gt;</description>
                <environment></environment>
        <key id="13210893">CAMEL-13094</key>
            <summary>Context MBean not unregistered on startup failure</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="tdiesler">Thomas Diesler</reporter>
                        <labels>
                    </labels>
                <created>Tue, 22 Jan 2019 07:18:52 +0000</created>
                <updated>Thu, 1 Aug 2019 07:48:48 +0000</updated>
                            <resolved>Thu, 1 Aug 2019 07:48:48 +0000</resolved>
                                    <version>3.0.0</version>
                                    <fixVersion>3.0.0.RC1</fixVersion>
                    <fixVersion>3.0.0</fixVersion>
                                    <component>camel-core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16748451" author="davsclaus" created="Tue, 22 Jan 2019 07:24:53 +0000"  >&lt;p&gt;I dont recall any startup changes like that. Do you have any reproducable project / unit test etc?&lt;br/&gt;
The only change is in camel-blueprint, and I would assume you are not talking about OSGi but eap/widlfly&lt;/p&gt;</comment>
                            <comment id="16748455" author="tdiesler" created="Tue, 22 Jan 2019 07:35:28 +0000"  >&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
            &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
                doStart();
                started.set(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
                starting.set(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
                stopping.set(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
                stopped.set(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
                suspending.set(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
                suspended.set(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
                shutdown.set(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
                shuttingdown.set(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
            } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Exception e) {
                &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
                    stop();
                } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Exception e2) {
                    &lt;span class=&quot;code-comment&quot;&gt;// Ignore exceptions as we want to show the original exception
&lt;/span&gt;                } &lt;span class=&quot;code-keyword&quot;&gt;finally&lt;/span&gt; {
                    &lt;span class=&quot;code-comment&quot;&gt;// ensure flags get reset to stopped as we failed during starting
&lt;/span&gt;                    stopping.set(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
                    stopped.set(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
                    starting.set(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
                    started.set(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
                    suspending.set(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
                    suspended.set(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
                    shutdown.set(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
                    shuttingdown.set(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
                }
                &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; e;
            } 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/camel/blob/camel-2.23.x/camel-core/src/main/java/org/apache/camel/support/ServiceSupport.java#L83&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/blob/camel-2.23.x/camel-core/src/main/java/org/apache/camel/support/ServiceSupport.java#L83&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;vs.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
            &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
                status = STARTING;
                log.trace(&lt;span class=&quot;code-quote&quot;&gt;&quot;Starting service&quot;&lt;/span&gt;);
                doStart();
                status = STARTED;
                log.trace(&lt;span class=&quot;code-quote&quot;&gt;&quot;Service started&quot;&lt;/span&gt;);
            } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Exception e) {
                status = FAILED;
                log.trace(&lt;span class=&quot;code-quote&quot;&gt;&quot;Error &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt; starting service&quot;&lt;/span&gt;, e);
                &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; e;
            }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/camel/blob/master/camel-api/src/main/java/org/apache/camel/support/ServiceSupport.java#L90&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/blob/master/camel-api/src/main/java/org/apache/camel/support/ServiceSupport.java#L90&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16748503" author="davsclaus" created="Tue, 22 Jan 2019 08:48:14 +0000"  >&lt;p&gt;Yeah we should do like the old behaviour and stop on startup failure and throw the original exception&lt;/p&gt;</comment>
                            <comment id="16748519" author="tdiesler" created="Tue, 22 Jan 2019 09:13:20 +0000"  >&lt;p&gt;Here is a plain &lt;a href=&quot;https://github.com/wildfly-extras/wildfly-camel/blob/master/itests/camel/src/test/java/org/wildfly/camel/test/plain/simple/SimpleManagementTest.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;SimpleManagementTest&lt;/a&gt; that shows the issue.&lt;/p&gt;</comment>
                            <comment id="16897810" author="davsclaus" created="Thu, 1 Aug 2019 06:46:21 +0000"  >&lt;p&gt;Thanks for the test-case Thomas&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 15 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|yi05kw:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>