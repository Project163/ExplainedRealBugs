<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:22:57 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-11111] Camel-Undertow: throwExceptionOnFailure doesn&apos;t work as expected</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-11111</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;When using camel-undertow as a producer and HTTP_RESPONSE_CODE is 404, the producer does NOT throw an exception as expected. Setting throwExceptionOnFailure appears to have no effect.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13061696">CAMEL-11111</key>
            <summary>Camel-Undertow: throwExceptionOnFailure doesn&apos;t work as expected</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="scranton">Scott Cranton</assignee>
                                    <reporter username="scranton">Scott Cranton</reporter>
                        <labels>
                    </labels>
                <created>Wed, 5 Apr 2017 11:10:27 +0000</created>
                <updated>Mon, 10 Apr 2017 10:29:48 +0000</updated>
                            <resolved>Mon, 10 Apr 2017 10:29:48 +0000</resolved>
                                    <version>2.18.3</version>
                                    <fixVersion>2.19.0</fixVersion>
                                    <component>camel-undertow</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15956715" author="githubbot" created="Wed, 5 Apr 2017 11:49:33 +0000"  >&lt;p&gt;GitHub user scranton opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/1597&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/1597&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-11111&quot; title=&quot;Camel-Undertow: throwExceptionOnFailure doesn&amp;#39;t work as expected&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-11111&quot;&gt;&lt;del&gt;CAMEL-11111&lt;/del&gt;&lt;/a&gt;: added unit test for throwExceptionOnFailure&lt;/p&gt;

&lt;p&gt;    Test case for camel-undertow showing issue, and same test case working in camel-netty4-http&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/scranton/camel&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/scranton/camel&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-11111&quot; title=&quot;Camel-Undertow: throwExceptionOnFailure doesn&amp;#39;t work as expected&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-11111&quot;&gt;&lt;del&gt;CAMEL-11111&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/1597.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/1597.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #1597&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit e493cf03964571497a0a946bad2016ff35f89397&lt;br/&gt;
Author: Scott Cranton &amp;lt;scott@cranton.com&amp;gt;&lt;br/&gt;
Date:   2017-04-05T11:49:04Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-11111&quot; title=&quot;Camel-Undertow: throwExceptionOnFailure doesn&amp;#39;t work as expected&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-11111&quot;&gt;&lt;del&gt;CAMEL-11111&lt;/del&gt;&lt;/a&gt;: added unit test for throwExceptionOnFailure&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15956901" author="scranton" created="Wed, 5 Apr 2017 14:02:28 +0000"  >&lt;p&gt;Looking at UndertowProducer and UndertowClientCallback, I don&apos;t see any code to handle HTTP_RESPONSE_CODE indicating an error. Not clear where or what exception should be thrown. Feels like a response code check when throwExceptionOnFailure=true should happen here - &lt;a href=&quot;https://github.com/apache/camel/blob/master/components/camel-undertow/src/main/java/org/apache/camel/component/undertow/UndertowClientCallback.java#L167-L167&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/blob/master/components/camel-undertow/src/main/java/org/apache/camel/component/undertow/UndertowClientCallback.java#L167-L167&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15956909" author="scranton" created="Wed, 5 Apr 2017 14:06:52 +0000"  >&lt;p&gt;camel-netty4-http appears to check in a similar place - &lt;a href=&quot;https://github.com/apache/camel/blob/master/components/camel-netty4-http/src/main/java/org/apache/camel/component/netty4/http/NettyHttpProducer.java#L135-L135&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/blob/master/components/camel-netty4-http/src/main/java/org/apache/camel/component/netty4/http/NettyHttpProducer.java#L135-L135&lt;/a&gt; - Guessing an UndertowHttpOperationsException would have to be created... Is there a standard base interface for that given all of the camel HTTP producer components?&lt;/p&gt;</comment>
                            <comment id="15960615" author="davsclaus" created="Fri, 7 Apr 2017 11:13:22 +0000"  >&lt;p&gt;There is a ticket about making undertow align with the other http components and base it of camel-http-common. But that is more work&lt;/p&gt;</comment>
                            <comment id="15960623" author="davsclaus" created="Fri, 7 Apr 2017 11:24:34 +0000"  >&lt;p&gt;This requires the binding code to support this as its not in that callback, but when parsing the http response and check the HTTP status code&lt;/p&gt;</comment>
                            <comment id="15960644" author="scranton" created="Fri, 7 Apr 2017 11:47:24 +0000"  >&lt;p&gt;So my PR just includes a test case showing the issue with camel-undertow, and how camel-netty4-http works doing similar settings of throwExceptionOnFailure. I could probably hack in the code from camel-netty4-http and create a similar NettyHttpOperationsFailureException for camel-undertow to band-aid this. It would only be an issue if many use ProducerTemplates to get the response body back cast as a String or such, and expect any HTTP Response Code &amp;gt; 300 to be thrown as an exception OR if they are using undertow as a producer within a camel route, and again expect an exception to be thrown. I do the Producer Template approach a lot in test cases...&lt;/p&gt;

&lt;p&gt;Since we&apos;re deprecating camel-http, and encouraging people to use camel-undertow as a producer, that&apos;s where I think the expectation that it behaves similar will bite us...&lt;/p&gt;

&lt;p&gt;Let me know your thoughts. Like I said, I believe I could quickly hack in something similar to netty4-http that gets my test case to pass...&lt;/p&gt;</comment>
                            <comment id="15960803" author="davsclaus" created="Fri, 7 Apr 2017 13:35:36 +0000"  >&lt;p&gt;Yeah we need an UndertowHttpOperationFailureException that does something like the others do with having http status code etc.&lt;/p&gt;</comment>
                            <comment id="15960813" author="scranton" created="Fri, 7 Apr 2017 13:45:26 +0000"  >&lt;p&gt;Ok, will try to get this done this weekend...&lt;/p&gt;</comment>
                            <comment id="15961764" author="githubbot" created="Sat, 8 Apr 2017 10:17:53 +0000"  >&lt;p&gt;Github user scranton closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/1597&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/1597&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15961981" author="githubbot" created="Sat, 8 Apr 2017 22:43:28 +0000"  >&lt;p&gt;GitHub user scranton opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/1608&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/1608&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-11111&quot; title=&quot;Camel-Undertow: throwExceptionOnFailure doesn&amp;#39;t work as expected&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-11111&quot;&gt;&lt;del&gt;CAMEL-11111&lt;/del&gt;&lt;/a&gt;: implemented throwExceptionOnFailure Producer attribute&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/scranton/camel&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/scranton/camel&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-11111&quot; title=&quot;Camel-Undertow: throwExceptionOnFailure doesn&amp;#39;t work as expected&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-11111&quot;&gt;&lt;del&gt;CAMEL-11111&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/1608.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/1608.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #1608&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit eb4a236e36c4665e6234d72db40d8c7ef4e5d6fb&lt;br/&gt;
Author: Scott Cranton &amp;lt;scott@cranton.com&amp;gt;&lt;br/&gt;
Date:   2017-04-08T22:42:46Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-11111&quot; title=&quot;Camel-Undertow: throwExceptionOnFailure doesn&amp;#39;t work as expected&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-11111&quot;&gt;&lt;del&gt;CAMEL-11111&lt;/del&gt;&lt;/a&gt;: implemented throwExceptionOnFailure attribute for Producer usage&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15962161" author="githubbot" created="Sun, 9 Apr 2017 15:23:34 +0000"  >&lt;p&gt;Github user scranton closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/1608&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/1608&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15962162" author="githubbot" created="Sun, 9 Apr 2017 15:27:28 +0000"  >&lt;p&gt;GitHub user scranton opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/1609&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/1609&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-11111&quot; title=&quot;Camel-Undertow: throwExceptionOnFailure doesn&amp;#39;t work as expected&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-11111&quot;&gt;&lt;del&gt;CAMEL-11111&lt;/del&gt;&lt;/a&gt;: correctly copy response&#8217;s headers and body to exception&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/scranton/camel&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/scranton/camel&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-11111&quot; title=&quot;Camel-Undertow: throwExceptionOnFailure doesn&amp;#39;t work as expected&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-11111&quot;&gt;&lt;del&gt;CAMEL-11111&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/1609.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/1609.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #1609&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 9e09dd4223491215e7b389d1741539b71605a833&lt;br/&gt;
Author: Scott Cranton &amp;lt;scott@cranton.com&amp;gt;&lt;br/&gt;
Date:   2017-04-09T15:26:32Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-11111&quot; title=&quot;Camel-Undertow: throwExceptionOnFailure doesn&amp;#39;t work as expected&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-11111&quot;&gt;&lt;del&gt;CAMEL-11111&lt;/del&gt;&lt;/a&gt;: correctly copy response&#8217;s headers and body to exception&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15962165" author="scranton" created="Sun, 9 Apr 2017 15:28:46 +0000"  >&lt;p&gt;Error response&apos;s headers and body were not being copied correctly to HttpOperationsFailedException. Corrected with provided PR&lt;/p&gt;</comment>
                            <comment id="15962180" author="githubbot" created="Sun, 9 Apr 2017 16:01:53 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/1609&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/1609&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 32 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3d8av:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>