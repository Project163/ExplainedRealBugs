<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 09:45:31 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-4234] ProducerTemplate/MockEndpoint does not seem to trigger context exception handling.</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-4234</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;Hello,&lt;/p&gt;

&lt;p&gt;I have a camel route that has &quot;onException&quot; clause.  When I run it on Tomcat it works pefectly, but in my integration test (JUnit4 + Spring Tests) the exception handling isn&apos;t triggered.  The unit tests uses a producer template and mock endpoint, so it seems that it is in one of those.&lt;/p&gt;

&lt;p&gt;I&apos;ll try to reproduce it in a small test case.&lt;/p&gt;

&lt;p&gt;Kind regards,&lt;br/&gt;
Bryan. &lt;/p&gt;</description>
                <environment>&lt;p&gt;JUnit4 Spring tests, Spring DSL&lt;/p&gt;</environment>
        <key id="12514185">CAMEL-4234</key>
            <summary>ProducerTemplate/MockEndpoint does not seem to trigger context exception handling.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="xbbrck">Bryan Brouckaert</reporter>
                        <labels>
                    </labels>
                <created>Fri, 15 Jul 2011 09:20:16 +0000</created>
                <updated>Mon, 18 Jul 2011 14:07:03 +0000</updated>
                            <resolved>Mon, 18 Jul 2011 14:07:03 +0000</resolved>
                                    <version>2.7.0</version>
                    <version>2.7.1</version>
                    <version>2.7.2</version>
                                    <fixVersion>2.8.0</fixVersion>
                                    <component>camel-core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13066802" author="xbbrck" created="Mon, 18 Jul 2011 06:25:03 +0000"  >&lt;p&gt;Hello,&lt;/p&gt;

&lt;p&gt;It doesn&apos;t seem to be easy to replicate the issue, but I did get some extra information.&lt;/p&gt;

&lt;p&gt;I do get the following log entry:&lt;br/&gt;
TRACE &lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.camel.processor.exceptionpolicy.DefaultExceptionPolicyStrategy&amp;#93;&lt;/span&gt; - The type is scoped for route: userWs.getUser however Exchange is at route: userWs.listUsers&lt;/p&gt;

&lt;p&gt;Which explains why the onException isn&apos;t triggerd.  But what is strange, is that the onException is defined on context level and the route thas is executed is userWS.getUsers.&lt;/p&gt;

&lt;p&gt;I&apos;ll include my routing config, and keep working on a simple example.&lt;/p&gt;</comment>
                            <comment id="13066807" author="davsclaus" created="Mon, 18 Jul 2011 06:34:27 +0000"  >&lt;p&gt;What version of Camel do you exactly use?&lt;/p&gt;</comment>
                            <comment id="13066810" author="xbbrck" created="Mon, 18 Jul 2011 06:37:02 +0000"  >&lt;p&gt;The 2.8-SNAPSHOT of &lt;a href=&quot;https://repository.apache.org/content/repositories/snapshots/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/repositories/snapshots/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13066985" author="xbbrck" created="Mon, 18 Jul 2011 12:27:46 +0000"  >&lt;p&gt;Added a simple example that causes the error.&lt;/p&gt;

&lt;p&gt;There are 2 routes, both with there own input but both use the same output.  In my test cases I mock the output.  The test case fails because the exception isn&apos;t caught.&lt;/p&gt;

&lt;p&gt;Do you have an idea about the issue?  Is there a workaround?&lt;/p&gt;

&lt;p&gt;Kind regards.&lt;br/&gt;
Bryan.&lt;/p&gt;</comment>
                            <comment id="13066988" author="xbbrck" created="Mon, 18 Jul 2011 12:33:28 +0000"  >&lt;p&gt;The same error exists from version 2.7.0, it worked until 2.6.0.&lt;/p&gt;</comment>
                            <comment id="13067007" author="davsclaus" created="Mon, 18 Jul 2011 13:02:46 +0000"  >&lt;p&gt;Can you make sure you use the latest source code. There has been a fix to ensure &amp;lt;onException&amp;gt;s is being enlisted with the correct context/route scope.&lt;/p&gt;</comment>
                            <comment id="13067023" author="xbbrck" created="Mon, 18 Jul 2011 13:30:55 +0000"  >&lt;p&gt;I tested with 2.9-SNAPSHOT and it does work. Any idea when the final version will be released?&lt;/p&gt;

&lt;p&gt;Kind regards,&lt;br/&gt;
Bryan.&lt;/p&gt;</comment>
                            <comment id="13067040" author="davsclaus" created="Mon, 18 Jul 2011 14:06:58 +0000"  >&lt;p&gt;Camel 2.8 is being cut later today/tomorrow. So this ticket is included.&lt;/p&gt;

&lt;p&gt;I added an unit test based to verify it works in both java and xml dsl.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12486861" name="CAMEL-4234.zip" size="3949" author="xbbrck" created="Mon, 18 Jul 2011 12:27:46 +0000"/>
                            <attachment id="12486795" name="routes.xml" size="13161" author="xbbrck" created="Mon, 18 Jul 2011 06:26:10 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>13846</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 19 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i01zo7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9548</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>