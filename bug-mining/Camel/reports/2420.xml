<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 09:58:56 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-6093] Multiple consumers exists on the same JMS endpoint uri and if you remove a consumer the other active consumers do not receive any messages anymore.</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-6093</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;same issue as &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-4194&quot; title=&quot;JmsEndpoint that is a topic should not be singleton scoped, only queues should be&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-4194&quot;&gt;&lt;del&gt;CAMEL-4194&lt;/del&gt;&lt;/a&gt;, but here it is for queues.&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-4194&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/CAMEL-4194&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;description and unit test for reproduction&lt;br/&gt;
&lt;a href=&quot;http://camel.465427.n5.nabble.com/Removing-routes-programmatically-td4556741.html#a5727523&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://camel.465427.n5.nabble.com/Removing-routes-programmatically-td4556741.html#a5727523&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;see post on Feb 13, 2013; 4:41pm&lt;/p&gt;

&lt;p&gt;thanks&lt;/p&gt;</description>
                <environment></environment>
        <key id="12633400">CAMEL-6093</key>
            <summary>Multiple consumers exists on the same JMS endpoint uri and if you remove a consumer the other active consumers do not receive any messages anymore.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="ladislav.lengyel">Ladislav Lengyel</reporter>
                        <labels>
                    </labels>
                <created>Thu, 21 Feb 2013 14:24:49 +0000</created>
                <updated>Mon, 2 Sep 2013 08:53:23 +0000</updated>
                            <resolved>Sat, 31 Aug 2013 10:05:41 +0000</resolved>
                                    <version>2.10.3</version>
                    <version>2.11.1</version>
                                    <fixVersion>2.10.7</fixVersion>
                    <fixVersion>2.11.2</fixVersion>
                    <fixVersion>2.12.0</fixVersion>
                                    <component>camel-jms</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="13731458" author="saltnlight5" created="Tue, 6 Aug 2013 23:48:42 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;I have looked at this issue, and it appeared that simple fix is to make JmsEndpoint#isSingle() to return false for both Queue and Topic cases. But if we do this, we will not able to manage the Queue endpoint through JMX because in DefaultManagementObjectStrategy#getManagedObjectForEndpoint() it will return null for non-singleton endpoint. Is this intended? If yes, what&apos;s a suggested solution for it? I will be happy to help come up with a patch if you guys can give some advise here.&lt;/p&gt;

&lt;p&gt;Zemian&lt;/p&gt;</comment>
                            <comment id="13737455" author="saltnlight5" created="Mon, 12 Aug 2013 22:34:44 +0000"  >&lt;p&gt;Hi, would anyone from Camel team can advise on my comment above?&lt;/p&gt;</comment>
                            <comment id="13749739" author="muellerc" created="Sun, 25 Aug 2013 20:23:43 +0000"  >&lt;p&gt;I think this is a serious issue.&lt;/p&gt;

&lt;p&gt;With commit &apos;ea325e3..5721e40&apos;, I added the attached (polished) unit test which shows this issue. Could some ActiveMQ expert have a look into it please!?&lt;/p&gt;</comment>
                            <comment id="13750656" author="saltnlight5" created="Mon, 26 Aug 2013 22:27:49 +0000"  >&lt;p&gt;Hi Christian,&lt;/p&gt;

&lt;p&gt;I don&apos;t see how this issue is related to ActiveMQ specific. The problem I see is that we allowing Queue to be singleton JmsEndpoint, and thus we are only creating one threadpool service for jmsMessageListenerContainer. Thus when user remove one consumer, the single threadpool will shutdown, and thus other active consumers who share same single Endpoint will not receive message anymore.&lt;/p&gt;

&lt;p&gt;If we do intended for Queue to be non-singleton as JmsEndpoint with same URI string, then, I said, the fix is simply make JmsEndpoint#isSingle() to return false. The only drawback now is that once you do this, you will not able to see Queue stats through JMX because we don&apos;t expose non-single Endpoints on JMX (there is a unit test case that verify this)&lt;/p&gt;

&lt;p&gt;Please let me know if my diagnosis is incorrect.&lt;/p&gt;</comment>
                            <comment id="13754633" author="davsclaus" created="Fri, 30 Aug 2013 12:19:33 +0000"  >&lt;p&gt;The problem is only if the endpoints is 100% identical. You can consume from same queue with different endpoints.&lt;/p&gt;

&lt;p&gt;And having 2+ routes from the same jms queue is very unusual, as you would have 1 route and use concurrent consumers if you need concurrency.&lt;/p&gt;</comment>
                            <comment id="13754638" author="davsclaus" created="Fri, 30 Aug 2013 12:25:44 +0000"  >&lt;p&gt;I wonder if the best solution is to let JmsEndpoint not be singleton so its not shared at all. And then introduce a new option on Endpoint to indicate that it should be enlisted in JMX, even if its not singleton. The trick is that you may have JmsEndpoints in JMX that would have the same ObjectName but would be different instances. To make the MBean names unique we would need to add the identity hashcode of the endpoint instance to the MBean name which then makes them look a bit ugly&lt;/p&gt;

&lt;p&gt;&quot;jms:queue:foo(0x12de45)&quot;&lt;br/&gt;
&quot;jms:queue:foo(0x0a1348)&quot;&lt;/p&gt;</comment>
                            <comment id="13754645" author="davsclaus" created="Fri, 30 Aug 2013 12:35:00 +0000"  >&lt;p&gt;Using this approach the test from mueller passes.&lt;/p&gt;</comment>
                            <comment id="13754767" author="davsclaus" created="Fri, 30 Aug 2013 15:06:41 +0000"  >&lt;p&gt;.. though another test hangs. I have founder a better solution that I am testing.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12584866" name="TwoConsumerOnTheSameQueueTest.java" size="4681" author="davsclaus" created="Sun, 26 May 2013 12:18:29 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>313895</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 12 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1i61z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>314240</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>