<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 09:58:05 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-6499] Copy of GenericFileMessage returns NULL from toString</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-6499</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-3060&quot; title=&quot;Out of Heap memory issues with Camel-File processing large files&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-3060&quot;&gt;&lt;del&gt;CAMEL-3060&lt;/del&gt;&lt;/a&gt; changed GenericFileMessage#toString to output just file name instead of it&apos;s content. However copies of message do not have file field set and thus return null from toString method. In my application actually all routed messages are copies and thus I see just &quot;null&quot; in my logs files.&lt;/p&gt;

&lt;p&gt;The copies are created by constructor: org.apache.camel.impl.DefaultUnitOfWork.DefaultUnitOfWork(Exchange exchange, Logger logger). The code seems like &quot;dirty hack&quot; in sense that it treats JmsMessage specially and all other messages handle by:&lt;/p&gt;

&lt;p&gt;this.originalInMessage = exchange.getIn().copy();&lt;/p&gt;

&lt;p&gt;There is no override of copy() method (provided by MessageSupport) in GenericFileMessage. This leads to lose of value of the internal file property.&lt;/p&gt;

&lt;p&gt;&amp;#8212;&lt;/p&gt;

&lt;p&gt;I&apos;m not sure if the problem missing override of copy() method or if it is pretty &quot;legal&quot; to have GenericFileMessage without file.&lt;/p&gt;

&lt;p&gt;I&apos;m, on the other hand, pretty sure that returning NULL from toString() is BAD practise. The method should stick to java.lang.Object behavior if it does not know what to print:&lt;/p&gt;

&lt;p&gt;    @Override&lt;br/&gt;
    public String toString() {&lt;br/&gt;
        // only output the filename as body can be big&lt;br/&gt;
        if (file != null) &lt;/p&gt;
{
            return file.getFileName();
        }
&lt;p&gt;        return getClass().getName() + &quot;@&quot; + Integer.toHexString(hashCode());&lt;br/&gt;
    }&lt;/p&gt;


&lt;p&gt;Ales&lt;/p&gt;</description>
                <environment></environment>
        <key id="12655315">CAMEL-6499</key>
            <summary>Copy of GenericFileMessage returns NULL from toString</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="akarpe">Ashwin J. Karpe</assignee>
                                    <reporter username="ales_d">Ales Dolecek</reporter>
                        <labels>
                    </labels>
                <created>Fri, 28 Jun 2013 12:16:06 +0000</created>
                <updated>Tue, 2 Jul 2013 03:48:00 +0000</updated>
                            <resolved>Tue, 2 Jul 2013 03:48:00 +0000</resolved>
                                    <version>2.11.0</version>
                                    <fixVersion>2.12.0</fixVersion>
                                    <component>camel-core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13697474" author="akarpe" created="Tue, 2 Jul 2013 03:48:00 +0000"  >&lt;p&gt;Fixed issue, added unit test, verified against checkstyle and committed in Git trunk as commit id  7b002c732f021f624eb404965f54ac313afd82a3&lt;/p&gt;
</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10061"><![CDATA[Novice]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>335592</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 21 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1lvyn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>335916</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>