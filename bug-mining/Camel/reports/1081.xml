<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 09:39:08 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-2909] Oracle AQ does not support the JMSReplyTo property and therefore throws a &quot;JMS-102: Feature not supported&quot; exception when the JMS provider tries to get it.</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-2909</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;Oracle AQ does not support the JMSReplyTo property and therefore throws a &quot;JMS-102: Feature not supported&quot; exception when the JMS provider tries to get it.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12486039">CAMEL-2909</key>
            <summary>Oracle AQ does not support the JMSReplyTo property and therefore throws a &quot;JMS-102: Feature not supported&quot; exception when the JMS provider tries to get it.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="mmatveev">Max Matveev</reporter>
                        <labels>
                    </labels>
                <created>Mon, 5 Jul 2010 14:11:36 +0000</created>
                <updated>Fri, 9 Jul 2010 08:29:17 +0000</updated>
                            <resolved>Tue, 6 Jul 2010 09:01:35 +0000</resolved>
                                    <version>2.3.0</version>
                                    <fixVersion>2.4.0</fixVersion>
                                    <component>camel-jms</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12953502" author="davsclaus" created="Mon, 5 Jul 2010 14:34:17 +0000"  >&lt;p&gt;Could you add information such as:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;What version of the Oracle AQ are you using?&lt;/li&gt;
	&lt;li&gt;What OS are you using&lt;/li&gt;
	&lt;li&gt;The stacktrace&lt;/li&gt;
	&lt;li&gt;For example related Camel configuration&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;And what do you mean by JMS provider? Where does the exception happen precisely? &lt;/p&gt;

&lt;p&gt;Link to Oracle AQ documentation about the lack of support for the JMSReplyTo would be great as well.&lt;/p&gt;</comment>
                            <comment id="12952151" author="mmatveev" created="Mon, 5 Jul 2010 14:55:47 +0000"  >&lt;p&gt;I&apos;m using Oracle AQ 10.2.0.2, reproduced this error on Windows XP and RHEL 5 linux.&lt;/p&gt;

&lt;p&gt;This exception will appear in few different places, namel everywhere where jmsMessage.getReplyTo() is called. For example in public Map extractHeadersFromJms(Message, Exchange) method in JmsBinding class (line number 174 in 2.3.0 version):&lt;br/&gt;
       map.put(&quot;JMSReplyTo&quot;, jmsMessage.getJMSReplyTo());&lt;/p&gt;

&lt;p&gt;Stacktrace is the following:&lt;br/&gt;
org.apache.camel.RuntimeCamelException: oracle.jms.AQjmsException: JMS-102: Feature not supported &lt;br/&gt;
	at org.apache.camel.component.jms.JmsBinding.extractHeadersFromJms(JmsBinding.java:181)&lt;br/&gt;
	at org.apache.camel.component.jms.JmsMessage.populateInitialHeaders(JmsMessage.java:191)&lt;br/&gt;
	at org.apache.camel.impl.DefaultMessage.createHeaders(DefaultMessage.java:178)&lt;br/&gt;
	at org.apache.camel.component.jms.JmsMessage.ensureInitialHeaders(JmsMessage.java:176)&lt;br/&gt;
	at org.apache.camel.component.jms.JmsMessage.setHeader(JmsMessage.java:152)&lt;br/&gt;
	at org.apache.camel.processor.RedeliveryErrorHandler.incrementRedeliveryCounter(RedeliveryErrorHandler.java:524)&lt;br/&gt;
	at org.apache.camel.processor.RedeliveryErrorHandler.handleException(RedeliveryErrorHandler.java:294)&lt;br/&gt;
	at org.apache.camel.processor.RedeliveryErrorHandler.processErrorHandler(RedeliveryErrorHandler.java:101)&lt;br/&gt;
	at org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:89)&lt;br/&gt;
	at org.apache.camel.processor.DefaultErrorHandler.process(DefaultErrorHandler.java:49)&lt;br/&gt;
	at org.apache.camel.processor.DefaultChannel.process(DefaultChannel.java:228)&lt;br/&gt;
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:75)&lt;br/&gt;
	at org.apache.camel.processor.UnitOfWorkProcessor.processNext(UnitOfWorkProcessor.java:70)&lt;br/&gt;
	at org.apache.camel.processor.DelegateProcessor.process(DelegateProcessor.java:48)&lt;br/&gt;
	at org.apache.camel.management.InstrumentationProcessor.process(InstrumentationProcessor.java:67)&lt;br/&gt;
	at org.apache.camel.component.jms.EndpointMessageListener.onMessage(EndpointMessageListener.java:84)&lt;br/&gt;
	at org.springframework.jms.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:543)&lt;br/&gt;
	at org.springframework.jms.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:482)&lt;br/&gt;
	at org.springframework.jms.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:451)&lt;br/&gt;
	at org.springframework.jms.listener.AbstractPollingMessageListenerContainer.doReceiveAndExecute(AbstractPollingMessageListenerContainer.java:323)&lt;br/&gt;
	at org.springframework.jms.listener.AbstractPollingMessageListenerContainer.receiveAndExecute(AbstractPollingMessageListenerContainer.java:261)&lt;br/&gt;
	at org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.invokeListener(DefaultMessageListenerContainer.java:982)&lt;br/&gt;
	at org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.executeOngoingLoop(DefaultMessageListenerContainer.java:974)&lt;br/&gt;
	at org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.run(DefaultMessageListenerContainer.java:876)&lt;br/&gt;
	at java.lang.Thread.run(Thread.java:619)&lt;br/&gt;
Caused by: oracle.jms.AQjmsException: JMS-102: Feature not supported &lt;br/&gt;
	at oracle.jms.AQjmsError.throwEx(AQjmsError.java:288)&lt;br/&gt;
	at oracle.jms.AQjmsAdtMessage.getJMSReplyTo(AQjmsAdtMessage.java:145)&lt;br/&gt;
	at org.apache.camel.component.jms.JmsBinding.extractHeadersFromJms(JmsBinding.java:174)&lt;br/&gt;
	... 24 more&lt;/p&gt;

&lt;p&gt;I meant Camel JMS Component, not Provider, sorry.&lt;/p&gt;

&lt;p&gt;For your reference: similar bug was in Mule framework: &lt;a href=&quot;http://www.mulesoft.org/jira/browse/MULE-489&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.mulesoft.org/jira/browse/MULE-489&lt;/a&gt; and it was fixed by ignoring this exception for Oracle AQ.&lt;/p&gt;

&lt;p&gt;Related config is:&lt;br/&gt;
&amp;lt;camelContext xmlns=&quot;http://camel.apache.org/schema/spring&quot;&amp;gt;&lt;br/&gt;
        &amp;lt;route&amp;gt;&lt;br/&gt;
            &amp;lt;from uri=&quot;jms:topic:TOPIC_NAME&quot;/&amp;gt;&lt;br/&gt;
            &amp;lt;to uri=&quot;mock:result&quot;/&amp;gt;&lt;br/&gt;
        &amp;lt;/route&amp;gt;&lt;br/&gt;
    &amp;lt;/camelContext&amp;gt;&lt;/p&gt;

&lt;p&gt;    &amp;lt;bean id=&quot;aqConfiguration&quot; class=&quot;com.example.aqsupport.AqJmsConfiguration&quot;&amp;gt;&lt;br/&gt;
        &amp;lt;property name=&quot;connectionFactory&quot; ref=&quot;aqConnectionFactory&quot;/&amp;gt;&lt;br/&gt;
        &amp;lt;property name=&quot;destinationResolver&quot; ref=&quot;aqDestinationResolver&quot;/&amp;gt;&lt;br/&gt;
        &amp;lt;property name=&quot;durableSubscriptionName&quot; value=&quot;SUBSCRIPTION_NAME&quot;/&amp;gt;&lt;br/&gt;
        &amp;lt;property name=&quot;subscriptionDurable&quot; value=&quot;true&quot;/&amp;gt;&lt;br/&gt;
    &amp;lt;/bean&amp;gt;&lt;/p&gt;

&lt;p&gt;    &amp;lt;bean id=&quot;jms&quot; class=&quot;org.apache.camel.component.jms.JmsComponent&quot;&amp;gt;&lt;br/&gt;
        &amp;lt;property name=&quot;configuration&quot; ref=&quot;aqConfiguration&quot;/&amp;gt;&lt;br/&gt;
    &amp;lt;/bean&amp;gt;&lt;/p&gt;

&lt;p&gt;    &amp;lt;bean id=&quot;aqDestinationResolver&quot; class=&quot;com.example.aqsupport.AqDestinationResolver&quot;&amp;gt;&lt;br/&gt;
        &amp;lt;property name=&quot;ownerName&quot; value=&quot;OWNER&quot;/&amp;gt;&lt;br/&gt;
    &amp;lt;/bean&amp;gt;&lt;/p&gt;

&lt;p&gt;    &amp;lt;bean id=&quot;oracleAqJdbcDataSource&quot; class=&quot;org.springframework.jdbc.datasource.DriverManagerDataSource&quot;&amp;gt;&lt;br/&gt;
        &amp;lt;property name=&quot;driverClassName&quot; value=&quot;oracle.jdbc.driver.OracleDriver&quot;/&amp;gt;&lt;br/&gt;
        &amp;lt;property name=&quot;url&quot; value=&quot;jdbc:oracle:thin:host:port:schema&quot;/&amp;gt;&lt;br/&gt;
        &amp;lt;property name=&quot;username&quot; value=&quot;USERNAME&quot;/&amp;gt;&lt;br/&gt;
        &amp;lt;property name=&quot;password&quot; value=&quot;PASSWORD&quot;/&amp;gt;&lt;br/&gt;
    &amp;lt;/bean&amp;gt;&lt;/p&gt;

&lt;p&gt;    &amp;lt;bean id=&quot;aqConnectionFactory&quot; class=&quot;oracle.jms.AQjmsFactory&quot; factory-method=&quot;getQueueConnectionFactory&quot;&amp;gt;&lt;br/&gt;
        &amp;lt;constructor-arg index=&quot;0&quot; ref=&quot;oracleAqJdbcDataSource&quot;/&amp;gt;&lt;br/&gt;
    &amp;lt;/bean&amp;gt;&lt;/p&gt;

&lt;p&gt;AqDestinationResolver is DestinationResolver thaht supports AQ&apos;s Owner property, actually there is 1 line of code there:&lt;br/&gt;
public class AqDestinationResolver implements DestinationResolver {&lt;br/&gt;
    private String ownerName;&lt;br/&gt;
    public void setOwnerName(String ownerName) &lt;/p&gt;
{
        this.ownerName = ownerName;
    }
&lt;p&gt;    public Destination resolveDestinationName(Session session, String destinationName, boolean pubSubDomain) throws JMSException &lt;/p&gt;
{
        return ((AQjmsSession) session).getTopic(ownerName, destinationName);
    }
&lt;p&gt;}&lt;br/&gt;
AqJmsConfiguration class extends camel&apos; JmsConfiguration class by adding support for custom MessageListenerContainer, it is needed to support Oracle AQ Payload Factory&lt;br/&gt;
public class AqJmsConfiguration extends JmsConfiguration {&lt;br/&gt;
    @Override&lt;br/&gt;
    public AbstractMessageListenerContainer createMessageListenerContainer(JmsEndpoint endpoint) &lt;/p&gt;
{
        AbstractMessageListenerContainer messageListenerContainer = new AqMessageListenerContainer();
        configureMessageListenerContainer(messageListenerContainer, endpoint);
        return messageListenerContainer;
    }
&lt;p&gt;}&lt;br/&gt;
and AqMessageListenerContainer is &lt;br/&gt;
public class AqMessageListenerContainer extends DefaultMessageListenerContainer {&lt;br/&gt;
    @Override&lt;br/&gt;
    protected MessageConsumer createConsumer(Session session, Destination destination) throws JMSException &lt;/p&gt;
{
        TopicSubscriber consumer = ((AQjmsSession) session).getDurableSubscriber((Topic) destination,
                getDurableSubscriptionName(), new ExamplePayloadFactory());
        return consumer;
    }
&lt;p&gt;}&lt;/p&gt;

&lt;p&gt;Sorry, cannot find related Oracle docs.&lt;/p&gt;</comment>
                            <comment id="12955720" author="mmatveev" created="Tue, 6 Jul 2010 08:51:24 +0000"  >&lt;p&gt;Small addition: The &quot;JMSType&quot; property is not supported as well for Oracle AQ messages with ADT type payload.&lt;/p&gt;</comment>
                            <comment id="12953947" author="davsclaus" created="Tue, 6 Jul 2010 09:01:35 +0000"  >&lt;p&gt;trunk: 960845.&lt;/p&gt;

&lt;p&gt;Will now ignore this exception and log a message at TRACE level in case you want to see the thrown exception.&lt;/p&gt;</comment>
                            <comment id="12954154" author="mmatveev" created="Tue, 6 Jul 2010 09:17:20 +0000"  >&lt;p&gt;Sorry for bothering Claus, but same fix should be applied for &quot;JMSType&quot; property in JmsBinding class (two lines below the &quot;JMSReplyTo&quot;)&lt;br/&gt;
Thanks.&lt;/p&gt;</comment>
                            <comment id="12952598" author="davsclaus" created="Thu, 8 Jul 2010 17:51:33 +0000"  >&lt;p&gt;Max sorry I missed your update on this ticket.&lt;/p&gt;

&lt;p&gt;I actually stumbled across this ticket&lt;br/&gt;
&lt;a href=&quot;http://jira.springframework.org/browse/INT-1229&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://jira.springframework.org/browse/INT-1229&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Which indicated that the 2nd field needed to be fixed, so I was just about to comment here about the fix.&lt;/p&gt;</comment>
                            <comment id="12952529" author="davsclaus" created="Thu, 8 Jul 2010 17:53:56 +0000"  >&lt;p&gt;trunk: 961847.&lt;/p&gt;

&lt;p&gt;Max feel free to test with latest source code.&lt;/p&gt;</comment>
                            <comment id="12951369" author="mmatveev" created="Fri, 9 Jul 2010 08:29:17 +0000"  >&lt;p&gt;Everything is working, thanks&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>76400</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 20 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i01rhb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>8221</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>