<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 09:59:40 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-6810] Bean Component/BeanBinding: Body as InputStream parametr (specified as ${body} in route)</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-6810</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;I discovered following problem (which was already shortly discussed in &lt;a href=&quot;http://camel.465427.n5.nabble.com/Bean-component-Bean-Binding-Body-as-InputStream-parametr-specified-as-body-in-route-td5740656.ht&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Camel user forum&lt;/a&gt;).&lt;/p&gt;

&lt;p&gt;I have a &quot;streamBodyBindingBean&quot; bean with this method:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void bodyBinding(InputStream in) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException {
  &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; byteCount = 0;
  &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; c;
  &lt;span class=&quot;code-keyword&quot;&gt;while&lt;/span&gt;((c = in.read()) != -1)
    byteCount++;
  &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;ByteCount: &quot;&lt;/span&gt; + byteCount);
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And this route:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;lt;route id=&lt;span class=&quot;code-quote&quot;&gt;&quot;&quot; trace=&quot;&lt;/span&gt;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&quot;&amp;gt;
  &amp;lt;from uri=&lt;span class=&quot;code-quote&quot;&gt;&quot;direct:&lt;span class=&quot;code-comment&quot;&gt;//body-input-stream-binding-in&quot;&lt;/span&gt;/&amp;gt;
&lt;/span&gt;  &amp;lt;to uri=&lt;span class=&quot;code-quote&quot;&gt;&quot;bean:&lt;span class=&quot;code-comment&quot;&gt;//streamBodyBindingBean?method=bodyBinding(${body})&quot;&lt;/span&gt;/&amp;gt;
&lt;/span&gt;  &amp;lt;!-- to uri=&lt;span class=&quot;code-quote&quot;&gt;&quot;bean:&lt;span class=&quot;code-comment&quot;&gt;//isBodyBindingBean&quot;&lt;/span&gt;/--&amp;gt; 
&lt;/span&gt;  &amp;lt;to uri=&lt;span class=&quot;code-quote&quot;&gt;&quot;mock:&lt;span class=&quot;code-comment&quot;&gt;//body-input-stream-binding-out&quot;&lt;/span&gt;/&amp;gt;
&lt;/span&gt;&amp;lt;/route&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;And here is a way how I send exchange from test stuff:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;ByteArrayInputStream in = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ByteArrayInputStream(
  &lt;span class=&quot;code-quote&quot;&gt;&quot;Small body, which I want to bind as InputStream&quot;&lt;/span&gt;.getBytes(&lt;span class=&quot;code-quote&quot;&gt;&quot;UTF-8&quot;&lt;/span&gt;)
);
Exchange exchange = createExchangeWithBody(in);
exchange.setPattern(ExchangePattern.InOnly);
template.send(&lt;span class=&quot;code-quote&quot;&gt;&quot;direct:&lt;span class=&quot;code-comment&quot;&gt;//body-input-stream-binding-in&quot;&lt;/span&gt;, exchange); &lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In this case I got a sysout message: &lt;tt&gt;ByteCount: 0&lt;/tt&gt;, but when I used the commented variant in the route, I got expected result: &lt;tt&gt;ByteCount: 47&quot;&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;When I change the route and use bean component 2 times (both variant of bean method invocation), then I got:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2013-10-01 12:26:37.259 DEBUG {main} [SendProcessor] &amp;gt;&amp;gt;&amp;gt;&amp;gt; Endpoint[bean://isBodyBindingBean?method=bodyBinding%28%24%7Bbody%7D%29] Exchange[Message: [Body is instance of org.apache.camel.StreamCache]]
ByteCount: 0
2013-10-01 12:26:37.289 DEBUG {main} [SendProcessor] &amp;gt;&amp;gt;&amp;gt;&amp;gt; Endpoint[bean://isBodyBindingBean] Exchange[Message: [Body is instance of org.apache.camel.StreamCache]]
ByteCount: 47
2013-10-01 12:26:37.307 DEBUG {main} [SendProcessor] &amp;gt;&amp;gt;&amp;gt;&amp;gt; Endpoint[mock://body-input-stream-binding-out] Exchange[Message: [Body is instance of org.apache.camel.StreamCache]] 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The strange for me is &lt;tt&gt;MethodInfo&lt;/tt&gt; class, line 526:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-comment&quot;&gt;// the parameter value was not already valid, but since the simple language have evaluated the expression
&lt;/span&gt;&lt;span class=&quot;code-comment&quot;&gt;// which may change the parameterValue, so we have to check it again to see &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; its now valid
&lt;/span&gt;exp = exchange.getContext().getTypeConverter().convertTo(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;.class, parameterValue);
&lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; values from the simple language is always valid
&lt;/span&gt;&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!valid) {
  ...
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The line after comment caused that my &quot;InputStream&quot; is transformed into String, what can be a problem in case of &quot;big&quot; InputStream.&lt;/p&gt;

&lt;p&gt;I know that I can use only second variant of &quot;bean method invocation&quot;, which is enough for my need, but I only want to point out to this situation.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12671717">CAMEL-6810</key>
            <summary>Bean Component/BeanBinding: Body as InputStream parametr (specified as ${body} in route)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="rkraus">Radek Kraus</reporter>
                        <labels>
                    </labels>
                <created>Wed, 2 Oct 2013 06:35:06 +0000</created>
                <updated>Fri, 4 Oct 2013 09:10:39 +0000</updated>
                            <resolved>Fri, 4 Oct 2013 09:10:39 +0000</resolved>
                                    <version>2.11.2</version>
                    <version>2.12.1</version>
                                    <fixVersion>2.11.3</fixVersion>
                    <fixVersion>2.12.2</fixVersion>
                    <fixVersion>2.13.0</fixVersion>
                                    <component>camel-core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13786012" author="davsclaus" created="Fri, 4 Oct 2013 09:10:39 +0000"  >&lt;p&gt;Thanks for reporting&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>351427</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 7 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1olbj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>351716</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>