<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:10:06 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-8578] camel-http - May double encode uri when using HTTP_URI or HTTP_QUERY headers</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-8578</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;See nabble&lt;br/&gt;
&lt;a href=&quot;http://camel.465427.n5.nabble.com/Apache-Camel-decodes-HTTP-query-params-and-httpclient-fails-with-Invalid-query-exception-tp5764794p5764843.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://camel.465427.n5.nabble.com/Apache-Camel-decodes-HTTP-query-params-and-httpclient-fails-with-Invalid-query-exception-tp5764794p5764843.html&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12786980">CAMEL-8578</key>
            <summary>camel-http - May double encode uri when using HTTP_URI or HTTP_QUERY headers</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="davsclaus">Claus Ibsen</reporter>
                        <labels>
                    </labels>
                <created>Tue, 31 Mar 2015 09:54:32 +0000</created>
                <updated>Tue, 14 Jul 2015 08:54:00 +0000</updated>
                            <resolved>Tue, 14 Jul 2015 08:38:40 +0000</resolved>
                                    <version>2.14.1</version>
                                    <fixVersion>2.16.0</fixVersion>
                                    <component>camel-http</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14622849" author="githubbot" created="Fri, 10 Jul 2015 20:20:23 +0000"  >&lt;p&gt;GitHub user snurmine opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/559&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/559&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-8578&quot; title=&quot;camel-http - May double encode uri when using HTTP_URI or HTTP_QUERY headers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-8578&quot;&gt;&lt;del&gt;CAMEL-8578&lt;/del&gt;&lt;/a&gt; - May double encode uri when using HTTP_URI or HTTP_QUERY &#8230;&lt;/p&gt;

&lt;p&gt;    Fix for issue &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-8578&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/CAMEL-8578&lt;/a&gt;.&lt;br/&gt;
    camel-http uses class UnsafeUriCharactersEncoder in HttpHelper#createURI.&lt;br/&gt;
    UnsafeUriCharactersEncoder explicitly doesn&apos;t encode character &amp;gt;= 128.&lt;/p&gt;

&lt;p&gt;    If url = &quot;http://www.google.com/search?hl=en&amp;amp;q=%E2%82%AC&quot; is&lt;br/&gt;
    as parameter for HttpHelper#createURI, then:&lt;/p&gt;

&lt;p&gt;    $URI uri = new URI(url);&lt;/p&gt;

&lt;p&gt;    Here uri now contains queryString in unencoded form,&lt;br/&gt;
    which means, that also euro-character is in encoded form.&lt;br/&gt;
    &lt;a href=&quot;http://www.fileformat.info/info/unicode/char/20aC/index.htm&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.fileformat.info/info/unicode/char/20aC/index.htm&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;    Later in same method&lt;br/&gt;
    $// need to encode query string&lt;br/&gt;
    $queryString = UnsafeUriCharactersEncoder.encodeHttpURI(queryString);&lt;/p&gt;

&lt;p&gt;    Method UnsafeUriCharactersEncoder#encodeHttpURI does not&lt;br/&gt;
    encode euro character back to encoded form.&lt;/p&gt;

&lt;p&gt;    Fix was to add UTF-8 encoding support into UnsafeUriCharactersEncoder#encodeHttpURI&lt;br/&gt;
    according to &lt;a href=&quot;https://tools.ietf.org/html/rfc3986&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://tools.ietf.org/html/rfc3986&lt;/a&gt;.&lt;/p&gt;


&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/snurmine/camel&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/snurmine/camel&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-8578&quot; title=&quot;camel-http - May double encode uri when using HTTP_URI or HTTP_QUERY headers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-8578&quot;&gt;&lt;del&gt;CAMEL-8578&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/559.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/559.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #559&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 7f186ddabf6808968c730eab03247352ef686b07&lt;br/&gt;
Author: Sami Nurminen &amp;lt;snurmine@gmail.com&amp;gt;&lt;br/&gt;
Date:   2015-07-10T20:04:51Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-8578&quot; title=&quot;camel-http - May double encode uri when using HTTP_URI or HTTP_QUERY headers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-8578&quot;&gt;&lt;del&gt;CAMEL-8578&lt;/del&gt;&lt;/a&gt; - May double encode uri when using HTTP_URI or HTTP_QUERY headers&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14623519" author="githubbot" created="Sat, 11 Jul 2015 18:54:28 +0000"  >&lt;p&gt;Github user snurmine closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/559&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/559&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14623768" author="githubbot" created="Sun, 12 Jul 2015 12:26:56 +0000"  >&lt;p&gt;GitHub user snurmine opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/561&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/561&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-8578&quot; title=&quot;camel-http - May double encode uri when using HTTP_URI or HTTP_QUERY headers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-8578&quot;&gt;&lt;del&gt;CAMEL-8578&lt;/del&gt;&lt;/a&gt; - May double encode uri when using HTTP_URI or HTTP_QUERY&lt;/p&gt;

&lt;p&gt;    HTTPHelper#createURI now uses raw queries instead of encoding them with UnsafeCharacterEncoder.&lt;br/&gt;
    Queries should already be in encoded form so no encoding is needed.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/snurmine/camel&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/snurmine/camel&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-8578&quot; title=&quot;camel-http - May double encode uri when using HTTP_URI or HTTP_QUERY headers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-8578&quot;&gt;&lt;del&gt;CAMEL-8578&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/561.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/561.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #561&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 4ed0a0086ca0d65cdf0e8364293ee02bf0921e4a&lt;br/&gt;
Author: Sami Nurminen &amp;lt;snurmine@gmail.com&amp;gt;&lt;br/&gt;
Date:   2015-07-12T12:24:04Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-8578&quot; title=&quot;camel-http - May double encode uri when using HTTP_URI or HTTP_QUERY headers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-8578&quot;&gt;&lt;del&gt;CAMEL-8578&lt;/del&gt;&lt;/a&gt; - May double encode uri when using HTTP_URI or HTTP_QUERY headers&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14626059" author="githubbot" created="Tue, 14 Jul 2015 08:54:00 +0000"  >&lt;p&gt;Github user snurmine closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/561&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/561&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 19 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i27l1j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>