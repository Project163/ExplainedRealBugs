<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:41:49 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-15087] toD doesn&apos;t resolve ${headers} if they come from a propertyPlaceholders</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-15087</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;From camel 3.1 and up, I have detected that &amp;lt;doD/&amp;gt; doesn&apos;t resolve variables in propertyPlaceholders.&lt;/p&gt;

&lt;p&gt;For example:&lt;/p&gt;

&lt;p&gt;if i have an etc/uri.properties with:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
example=http:&lt;span class=&quot;code-comment&quot;&gt;//${headers.url}&lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;And in camel Context xml:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
...
&amp;lt;camelContext id=&lt;span class=&quot;code-quote&quot;&gt;&quot;example&quot;&lt;/span&gt;&#160;xmlns=&lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//camel.apache.org/schema/spring&quot;&lt;/span&gt;&amp;gt;
&lt;/span&gt;
 &#160;&#160;&amp;lt;propertyPlaceholder&#160;id=&lt;span class=&quot;code-quote&quot;&gt;&quot;myProperties&quot;&lt;/span&gt;&#160;location=&lt;span class=&quot;code-quote&quot;&gt;&quot;classpath:etc/uri.properties&quot;&lt;/span&gt;/&amp;gt;

 &#160; &amp;lt;route&#160;id=&lt;span class=&quot;code-quote&quot;&gt;&quot;test&quot;&lt;/span&gt;&amp;gt;
 &#160; &#160; &amp;lt;from&#160;uri=&lt;span class=&quot;code-quote&quot;&gt;&quot;timer:hello?period=3000&quot;&lt;/span&gt;/&amp;gt;

 &#160; &#160; &amp;lt;setHeader name=&lt;span class=&quot;code-quote&quot;&gt;&quot;url&quot;&lt;/span&gt;&amp;gt;&amp;lt;constant&amp;gt;www.google.es&amp;lt;/constant&amp;gt;&amp;lt;/setHeader&amp;gt;

 &#160; &#160; &amp;lt;log message=&lt;span class=&quot;code-quote&quot;&gt;&quot;{{example}}&quot;&lt;/span&gt;/&amp;gt;
 &#160; &#160; &amp;lt;!-- It logs: http:&lt;span class=&quot;code-comment&quot;&gt;//www.google.es/&#160;--&amp;gt;
&lt;/span&gt;
 &#160; &#160; &amp;lt;toD uri=&lt;span class=&quot;code-quote&quot;&gt;&quot;example&quot;&lt;/span&gt;/&amp;gt;
 &#160; &#160; &amp;lt;!-- It resolves:&#160;&#160;http:&lt;span class=&quot;code-comment&quot;&gt;//${headers.url} instead of&#160;http://www.google.es/&#160;--&amp;gt;
&lt;/span&gt;&#160; &amp;lt;/route&amp;gt;
 &amp;lt;/camelContext&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt; &#160;&lt;br/&gt;
 &#160;&lt;br/&gt;
 &lt;tt&gt;But if i do a kind of a workarround like this, it works:&lt;/tt&gt;&lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
...
&amp;lt;camelContext id=&lt;span class=&quot;code-quote&quot;&gt;&quot;example&quot;&lt;/span&gt;&#160;xmlns=&lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//camel.apache.org/schema/spring&quot;&lt;/span&gt;&amp;gt;
&lt;/span&gt;
 &#160;&#160;&amp;lt;propertyPlaceholder&#160;id=&lt;span class=&quot;code-quote&quot;&gt;&quot;myProperties&quot;&lt;/span&gt;&#160;location=&lt;span class=&quot;code-quote&quot;&gt;&quot;classpath:etc/uri.properties&quot;&lt;/span&gt;/&amp;gt;

 &#160; &amp;lt;route&#160;id=&lt;span class=&quot;code-quote&quot;&gt;&quot;test&quot;&lt;/span&gt;&amp;gt;
 &#160; &#160; &amp;lt;from&#160;uri=&lt;span class=&quot;code-quote&quot;&gt;&quot;timer:hello?period=3000&quot;&lt;/span&gt;/&amp;gt;

 &#160; &#160; &amp;lt;setHeader name=&lt;span class=&quot;code-quote&quot;&gt;&quot;url&quot;&lt;/span&gt;&amp;gt;&amp;lt;constant&amp;gt;www.google.es&amp;lt;/constant&amp;gt;&amp;lt;/setHeader&amp;gt;

 &#160; &#160; &amp;lt;setHeader name=&lt;span class=&quot;code-quote&quot;&gt;&quot;workarround&quot;&lt;/span&gt;&amp;gt;&amp;lt;simple&amp;gt;{{example}}&amp;lt;/simple&amp;gt;&amp;lt;/setHeader&amp;gt;
 &#160; &#160; &amp;lt;toD uri=&lt;span class=&quot;code-quote&quot;&gt;&quot;${headers.workarround}&quot;&lt;/span&gt;/&amp;gt;
 &#160; &#160; &amp;lt;!-- It now resolves:&#160;&#160;http:&lt;span class=&quot;code-comment&quot;&gt;//www.google.es&#160;--&amp;gt;
&lt;/span&gt;&#160; &amp;lt;/route&amp;gt;
 &amp;lt;/camelContext&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13305863">CAMEL-15087</key>
            <summary>toD doesn&apos;t resolve ${headers} if they come from a propertyPlaceholders</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="andreufontb">Andreu Font Bardolet</reporter>
                        <labels>
                    </labels>
                <created>Tue, 19 May 2020 09:28:44 +0000</created>
                <updated>Fri, 22 May 2020 18:34:23 +0000</updated>
                            <resolved>Fri, 22 May 2020 18:34:23 +0000</resolved>
                                    <version>3.1.0</version>
                    <version>3.2.0</version>
                    <version>3.3.0</version>
                                    <fixVersion>3.4.0</fixVersion>
                                    <component>camel-core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17111951" author="chardahe@redhat.com" created="Wed, 20 May 2020 08:57:59 +0000"  >&lt;p&gt;Hi, I&apos;m working on this&lt;/p&gt;</comment>
                            <comment id="17112825" author="chardahe@redhat.com" created="Thu, 21 May 2020 06:08:13 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=andreufontb&quot; class=&quot;user-hover&quot; rel=&quot;andreufontb&quot;&gt;andreufontb&lt;/a&gt;, isn&apos;t it&#160; &amp;lt;toD uri=&quot;&lt;tt&gt;example&lt;/tt&gt;&quot;/&amp;gt; ??&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17113358" author="andreufontb" created="Thu, 21 May 2020 16:39:30 +0000"  >&lt;p&gt;Sorry, I had problems writing an example in Jira it autoremoved some characters, I just discovered it has a codeblock funcion:&lt;/p&gt;

&lt;p&gt;In response of your question, it is:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;toD uri=&lt;span class=&quot;code-quote&quot;&gt;&quot;{{example}}&quot;&lt;/span&gt;/&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;To give more clarity, here is a full rewrite of the example I have post the first time:&lt;/p&gt;

&lt;p&gt;In a etc/uri.properties file:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
example=http:&lt;span class=&quot;code-comment&quot;&gt;//${headers.url}&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;In camel context xml:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;camelContext id=&lt;span class=&quot;code-quote&quot;&gt;&quot;example&quot;&lt;/span&gt;&#160;xmlns=&lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//camel.apache.org/schema/spring&quot;&lt;/span&gt;&amp;gt;
&lt;/span&gt;  &amp;lt;propertyPlaceholder&#160;id=&lt;span class=&quot;code-quote&quot;&gt;&quot;myProperties&quot;&lt;/span&gt;&#160;location=&lt;span class=&quot;code-quote&quot;&gt;&quot;classpath:etc/uri.properties&quot;&lt;/span&gt;/&amp;gt;
  &amp;lt;route&#160;id=&lt;span class=&quot;code-quote&quot;&gt;&quot;test&quot;&lt;/span&gt;&amp;gt;
&#160;   &amp;lt;from&#160;uri=&lt;span class=&quot;code-quote&quot;&gt;&quot;timer:hello?period=3000&quot;&lt;/span&gt;/&amp;gt;

&#160; &#160; &amp;lt;setHeader name=&lt;span class=&quot;code-quote&quot;&gt;&quot;url&quot;&lt;/span&gt;&amp;gt;&amp;lt;constant&amp;gt;www.google.es&amp;lt;/constant&amp;gt;&amp;lt;/setHeader&amp;gt;

    &amp;lt;log message=&lt;span class=&quot;code-quote&quot;&gt;&quot;{{example}}&quot;&lt;/span&gt;/&amp;gt;
    &amp;lt;!-- it logs: http:&lt;span class=&quot;code-comment&quot;&gt;//www.google.es --&amp;gt;
&lt;/span&gt;&#160; &#160; &amp;lt;toD uri=&lt;span class=&quot;code-quote&quot;&gt;&quot;{{example}}&quot;&lt;/span&gt;/&amp;gt;
&#160; &#160; &amp;lt;!-- It resolves:&#160;&#160;http:&lt;span class=&quot;code-comment&quot;&gt;//${headers.url}&#160;--&amp;gt;
&lt;/span&gt;
  &amp;lt;/route&amp;gt;
&amp;lt;/camelContext&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;A way to workarround the issue, is making a camel context like this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;camelContext id=&lt;span class=&quot;code-quote&quot;&gt;&quot;example&quot;&lt;/span&gt;&#160;xmlns=&lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//camel.apache.org/schema/spring&quot;&lt;/span&gt;&amp;gt;
&lt;/span&gt;  &amp;lt;propertyPlaceholder&#160;id=&lt;span class=&quot;code-quote&quot;&gt;&quot;myProperties&quot;&lt;/span&gt;&#160;location=&lt;span class=&quot;code-quote&quot;&gt;&quot;classpath:etc/uri.properties&quot;&lt;/span&gt;/&amp;gt;
&#160; &amp;lt;route&#160;id=&lt;span class=&quot;code-quote&quot;&gt;&quot;test&quot;&lt;/span&gt;&amp;gt;
  &#160; &amp;lt;from&#160;uri=&lt;span class=&quot;code-quote&quot;&gt;&quot;timer:hello?period=3000&quot;&lt;/span&gt;/&amp;gt;

 &#160; &#160;&amp;lt;setHeader name=&lt;span class=&quot;code-quote&quot;&gt;&quot;url&quot;&lt;/span&gt;&amp;gt;&amp;lt;constant&amp;gt;www.google.es&amp;lt;/constant&amp;gt;&amp;lt;/setHeader&amp;gt;

    &amp;lt;log message=&lt;span class=&quot;code-quote&quot;&gt;&quot;{{example}}&quot;&lt;/span&gt;/&amp;gt;
    &amp;lt;!-- it logs: http:&lt;span class=&quot;code-comment&quot;&gt;//www.google.es --&amp;gt;
&lt;/span&gt;
    &amp;lt;setHeader name=&lt;span class=&quot;code-quote&quot;&gt;&quot;workarround&quot;&lt;/span&gt;&amp;gt;&amp;lt;simple&amp;gt;{{example}}&amp;lt;/simple&amp;gt;&amp;lt;/setHeader&amp;gt;
    &amp;lt;toD uri=&lt;span class=&quot;code-quote&quot;&gt;&quot;${headers.workarround}&quot;&lt;/span&gt;/&amp;gt;
    &amp;lt;!-- It resolves:&#160;&#160;http:&lt;span class=&quot;code-comment&quot;&gt;//www.google.es --&amp;gt;
&lt;/span&gt;
 &amp;lt;/route&amp;gt;
&amp;lt;/camelContext&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Sorry for the poor fisrst message, It was my first time &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/tongue.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17113514" author="chardahe@redhat.com" created="Thu, 21 May 2020 20:17:45 +0000"  >&lt;p&gt;Thanks for the correction &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Does it log&#160;[http://[www.google.es|http://[www.google.es/]&#160; or&#160; {{&lt;tt&gt;example&lt;/tt&gt;}},&#160;&lt;br/&gt;
  &amp;lt;log message=&quot;&lt;tt&gt;example&lt;/tt&gt;&quot;/&amp;gt;&lt;br/&gt;
    &amp;lt;!-- it logs: &lt;a href=&quot;http://www.google.es&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.google.es&lt;/a&gt; --&amp;gt;&lt;br/&gt;
in 3.1 there are some changes&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; have been done for property resolution inside definitions&lt;/p&gt;

&lt;p&gt;I&apos;m using 3.1 and it&apos;s logging {{&lt;tt&gt;example&lt;/tt&gt;}}&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-14445&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/CAMEL-14445&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17114316" author="davsclaus" created="Fri, 22 May 2020 18:34:08 +0000"  >&lt;p&gt;Thanks Andreu for reporting and Chandrakant for looking into this.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 25 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0ewbc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>