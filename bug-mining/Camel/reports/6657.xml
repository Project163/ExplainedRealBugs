<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 11:04:26 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-20352] camel.springboot.includeNonSingletons is not respected anymore: prototype Route Builders are always initialized. </title>
                <link>https://issues.apache.org/jira/browse/CAMEL-20352</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;Some time ago a new property was added to Apache Camel in &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-10421&quot; title=&quot;camel-spring-boot - CamelAutoConfiguration should allow to exclude non-singletons&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-10421&quot;&gt;&lt;del&gt;CAMEL-10421&lt;/del&gt;&lt;/a&gt;, called &quot;includeNonSingletons&quot;. It was configured via &quot;camel.springboot.includeNonSingletons&quot; property. Now it looks like `org.apache.camel.main.DefaultRoutesCollector.collectRoutesFromRegistry` finds all RouteBuilder in its `findByType(camelContext, RoutesBuilder.class);` method, regardless of whether they&apos;re prototypes or not by calling Spring&apos;s .`org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeansOfType(@Nullable Class&amp;lt;T&amp;gt; type)`, which hard-codes `includeNonSingletons` to `true`. &#160;&lt;/p&gt;

&lt;p&gt;In older Camel versions `org.apache.camel.spring.boot.RoutesCollector` class would run method `onApplicationEvent` and it would not touch prototypes due to this: &quot;applicationContext.getBeansOfType(RoutesBuilder.class, configurationProperties.isIncludeNonSingletons(), true).values()&quot;.&lt;/p&gt;

&lt;p&gt;This issue causes our code to fail because we have a RouteBuilder prototype with only constructor to set URI and routeId dynamically for each builder. But we don&apos;t need Camel to do it automatically, because it does not know what to pass to that constructor.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13565494">CAMEL-20352</key>
            <summary>camel.springboot.includeNonSingletons is not respected anymore: prototype Route Builders are always initialized. </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="jpro.swt@gmail.com">Yury Kartsev</reporter>
                        <labels>
                    </labels>
                <created>Fri, 19 Jan 2024 22:13:41 +0000</created>
                <updated>Thu, 25 Jan 2024 08:21:30 +0000</updated>
                            <resolved>Thu, 25 Jan 2024 08:21:30 +0000</resolved>
                                    <version>4.3.0</version>
                                    <fixVersion>4.4.0</fixVersion>
                                    <component>camel-spring-boot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17810309" author="davsclaus" created="Wed, 24 Jan 2024 10:03:23 +0000"  >&lt;p&gt;You can mark the class as excluded, see the camel.springboot.xxx options&lt;br/&gt;
&lt;a href=&quot;https://camel.apache.org/camel-spring-boot/4.0.x/spring-boot.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://camel.apache.org/camel-spring-boot/4.0.x/spring-boot.html&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 42 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1mvz4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>