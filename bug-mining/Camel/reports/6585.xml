<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 11:03:18 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-19827] Kafka Component generates huge logs infinitely when invalid configuration is provided.</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-19827</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;When Camel-Kafka 3.13.0 version is used and if we define a Kafka endpoint with an invalid configuration like port 1234556 which is invalid, An exception is thrown and propagated back to a higher layer.&lt;/p&gt;

&lt;p&gt;Exception&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
15:24:42.513 [main] [{}] INFO &#160;org.apache.camel.impl.engine.AbstractCamelContext - Apache Camel 3.13.0 (camel-1) shutting down (timeout:45s)
15:24:42.516 [main] [{}] DEBUG org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager - Shutting down with no inflight threads.
15:24:42.518 [main] [{}] DEBUG org.apache.camel.impl.engine.AbstractCamelContext - Route: route1 which failed to startup will be stopped
15:24:42.520 [main] [{}] DEBUG org.apache.camel.support.DefaultConsumer - Shutting down consumer: Consumer[kafka:xyz?brokers=localhost:119092]
15:24:42.524 [main] [{}] INFO &#160;org.apache.camel.impl.engine.AbstractCamelContext - Routes shutdown summary (total:1 stopped:1)
15:24:42.524 [main] [{}] INFO &#160;org.apache.camel.impl.engine.AbstractCamelContext - &#160; &#160; Stopped route1 (kafka:xyz)
15:24:42.525 [main] [{}] DEBUG org.apache.camel.impl.engine.DefaultInflightRepository - Shutting down with no inflight exchanges.
15:24:42.529 [main] [{}] INFO &#160;org.apache.camel.impl.engine.AbstractCamelContext - Apache Camel 3.13.0 (camel-1) shutdown in 16ms (uptime:1s575ms)
Exception in thread &lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; org.apache.kafka.common.KafkaException: Failed to construct kafka consumer
&#160; &#160; at org.apache.kafka.clients.consumer.KafkaConsumer.&amp;lt;init&amp;gt;(KafkaConsumer.java:823)
&#160; &#160; at org.apache.kafka.clients.consumer.KafkaConsumer.&amp;lt;init&amp;gt;(KafkaConsumer.java:665)
&#160; &#160; at org.apache.kafka.clients.consumer.KafkaConsumer.&amp;lt;init&amp;gt;(KafkaConsumer.java:646)
&#160; &#160; at org.apache.kafka.clients.consumer.KafkaConsumer.&amp;lt;init&amp;gt;(KafkaConsumer.java:626)
&#160; &#160; at org.apache.camel.component.kafka.DefaultKafkaClientFactory.getConsumer(DefaultKafkaClientFactory.java:34)
&#160; &#160; at org.apache.camel.component.kafka.KafkaFetchRecords.createConsumer(KafkaFetchRecords.java:121)
&#160; &#160; at org.apache.camel.component.kafka.KafkaFetchRecords.preInit(KafkaFetchRecords.java:80)
&#160; &#160; at org.apache.camel.component.kafka.KafkaConsumer.doStart(KafkaConsumer.java:123)
&#160; &#160; at org.apache.camel.support.service.BaseService.start(BaseService.java:119)
&#160; &#160; at org.apache.camel.support.service.ServiceHelper.startService(ServiceHelper.java:113)
&#160; &#160; at org.apache.camel.impl.engine.AbstractCamelContext.startService(AbstractCamelContext.java:3498)
&#160; &#160; at org.apache.camel.impl.engine.InternalRouteStartupManager.doStartOrResumeRouteConsumers(InternalRouteStartupManager.java:401)
&#160; &#160; at org.apache.camel.impl.engine.InternalRouteStartupManager.doStartRouteConsumers(InternalRouteStartupManager.java:319)
&#160; &#160; at org.apache.camel.impl.engine.InternalRouteStartupManager.safelyStartRouteServices(InternalRouteStartupManager.java:213)
&#160; &#160; at org.apache.camel.impl.engine.InternalRouteStartupManager.doStartOrResumeRoutes(InternalRouteStartupManager.java:147)
&#160; &#160; at org.apache.camel.impl.engine.AbstractCamelContext.doStartCamel(AbstractCamelContext.java:3201)
&#160; &#160; at org.apache.camel.impl.engine.AbstractCamelContext.doStartContext(AbstractCamelContext.java:2863)
&#160; &#160; at org.apache.camel.impl.engine.AbstractCamelContext.doStart(AbstractCamelContext.java:2814)
&#160; &#160; at org.apache.camel.support.service.BaseService.start(BaseService.java:119)
&#160; &#160; at org.apache.camel.impl.engine.AbstractCamelContext.start(AbstractCamelContext.java:2510)
&#160; &#160; at org.apache.camel.impl.DefaultCamelContext.start(DefaultCamelContext.java:246)
&#160; &#160; at org.example.camel.MyCamelExample.main(MyCamelExample.java:22)
Caused by: org.apache.kafka.common.config.ConfigException: Invalid port in bootstrap.servers: localhost:119092
&#160; &#160; at org.apache.kafka.clients.ClientUtils.parseAndValidateAddresses(ClientUtils.java:82)
&#160; &#160; at org.apache.kafka.clients.ClientUtils.parseAndValidateAddresses(ClientUtils.java:48)
&#160; &#160; at org.apache.kafka.clients.consumer.KafkaConsumer.&amp;lt;init&amp;gt;(KafkaConsumer.java:731)
&#160; &#160; ... 21 more &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;If we upgrade the library version to 3.14.9 then we don&apos;t see this exception propagated to a higher layer instead infinite retries are done growing log size in GB and filling up disk space.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
15:27:10.603 [Camel (camel-1) thread #1 - KafkaConsumer[xyz]] [{}] INFO &#160;org.apache.kafka.common.metrics.Metrics - Metrics scheduler closed
15:27:10.603 [Camel (camel-1) thread #1 - KafkaConsumer[xyz]] [{}] INFO &#160;org.apache.kafka.common.metrics.Metrics - Closing reporter org.apache.kafka.common.metrics.JmxReporter
15:27:10.604 [Camel (camel-1) thread #1 - KafkaConsumer[xyz]] [{}] INFO &#160;org.apache.kafka.common.metrics.Metrics - Metrics reporters closed
15:27:10.604 [Camel (camel-1) thread #1 - KafkaConsumer[xyz]] [{}] INFO &#160;org.apache.kafka.common.utils.AppInfoParser - App info kafka.consumer &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; consumer-df1a4884-a933-41fa-81b8-e1831627f0f6-239 unregistered
15:27:10.604 [Camel (camel-1) thread #1 - KafkaConsumer[xyz]] [{}] DEBUG org.apache.kafka.clients.consumer.KafkaConsumer - [Consumer clientId=consumer-df1a4884-a933-41fa-81b8-e1831627f0f6-239, groupId=df1a4884-a933-41fa-81b8-e1831627f0f6] Kafka consumer has been closed
15:27:10.604 [Camel (camel-1) thread #1 - KafkaConsumer[xyz]] [{}] WARN &#160;org.apache.camel.component.kafka.KafkaFetchRecords - Error creating org.apache.kafka.clients.consumer.KafkaConsumer due Failed to construct kafka consumer
org.apache.kafka.common.KafkaException: Failed to construct kafka consumer
&#160; &#160; at org.apache.kafka.clients.consumer.KafkaConsumer.&amp;lt;init&amp;gt;(KafkaConsumer.java:823) ~[kafka-clients-2.8.1.jar:?]
&#160; &#160; at org.apache.kafka.clients.consumer.KafkaConsumer.&amp;lt;init&amp;gt;(KafkaConsumer.java:665) ~[kafka-clients-2.8.1.jar:?]
&#160; &#160; at org.apache.kafka.clients.consumer.KafkaConsumer.&amp;lt;init&amp;gt;(KafkaConsumer.java:646) ~[kafka-clients-2.8.1.jar:?]
&#160; &#160; at org.apache.kafka.clients.consumer.KafkaConsumer.&amp;lt;init&amp;gt;(KafkaConsumer.java:626) ~[kafka-clients-2.8.1.jar:?]
&#160; &#160; at org.apache.camel.component.kafka.DefaultKafkaClientFactory.getConsumer(DefaultKafkaClientFactory.java:34) ~[camel-kafka-3.14.9.jar:3.14.9]
&#160; &#160; at org.apache.camel.component.kafka.KafkaFetchRecords.createConsumer(KafkaFetchRecords.java:126) ~[camel-kafka-3.14.9.jar:3.14.9]
&#160; &#160; at org.apache.camel.component.kafka.KafkaFetchRecords.run(KafkaFetchRecords.java:89) ~[camel-kafka-3.14.9.jar:3.14.9]
&#160; &#160; at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515) ~[?:?]
&#160; &#160; at java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[?:?]
&#160; &#160; at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[?:?]
&#160; &#160; at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[?:?]
&#160; &#160; at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:829) ~[?:?]
Caused by: org.apache.kafka.common.config.ConfigException: Invalid port in bootstrap.servers: localhost:119092
&#160; &#160; at org.apache.kafka.clients.ClientUtils.parseAndValidateAddresses(ClientUtils.java:82) ~[kafka-clients-2.8.1.jar:?]
&#160; &#160; at org.apache.kafka.clients.ClientUtils.parseAndValidateAddresses(ClientUtils.java:48) ~[kafka-clients-2.8.1.jar:?]
&#160; &#160; at org.apache.kafka.clients.consumer.KafkaConsumer.&amp;lt;init&amp;gt;(KafkaConsumer.java:731) ~[kafka-clients-2.8.1.jar:?]
&#160; &#160; ... 11 more
15:27:10.604 [Camel (camel-1) thread #1 - KafkaConsumer[xyz]] [{}] INFO &#160;org.apache.camel.component.kafka.KafkaFetchRecords - Connecting Kafka consumer thread ID xyz-&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt; 0 with poll timeout of 5000 ms
15:27:10.605 [Camel (camel-1) thread #1 - KafkaConsumer[xyz]] [{}] INFO &#160;org.apache.kafka.clients.consumer.ConsumerConfig - ConsumerConfig values:&#160;
&#160; &#160; allow.auto.create.topics = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
&#160; &#160; auto.commit.interval.ms = 5000
&#160; &#160; auto.offset.reset = latest
&#160; &#160; bootstrap.servers = [localhost:119092]
&#160; &#160; check.crcs = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
&#160; &#160; client.dns.lookup = use_all_dns_ips
&#160; &#160; client.id = consumer-df1a4884-a933-41fa-81b8-e1831627f0f6-240
&#160; &#160; client.rack =&#160;
&#160; &#160; connections.max.idle.ms = 540000
&#160; &#160; &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;.api.timeout.ms = 60000
&#160; &#160; enable.auto.commit = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt; &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment>&lt;p&gt;3.14.9 Issue seen.&lt;/p&gt;

&lt;p&gt;3.13.0 Works fine.&lt;/p&gt;</environment>
        <key id="13549549">CAMEL-19827</key>
            <summary>Kafka Component generates huge logs infinitely when invalid configuration is provided.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="kartikvk1996">Kartik</reporter>
                        <labels>
                    </labels>
                <created>Mon, 4 Sep 2023 09:58:59 +0000</created>
                <updated>Thu, 12 Oct 2023 16:37:45 +0000</updated>
                            <resolved>Thu, 12 Oct 2023 16:37:45 +0000</resolved>
                                    <version>3.14.9</version>
                                    <fixVersion>4.2.0</fixVersion>
                                    <component>camel-kafka</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17761818" author="kartikvk1996" created="Mon, 4 Sep 2023 12:51:17 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davsclaus&quot; class=&quot;user-hover&quot; rel=&quot;davsclaus&quot;&gt;davsclaus&lt;/a&gt; Is this expected in the new 3.14.9 I didn&apos;t find anything specific about this issue in changelog from 3.13.x to 3.14.x. Is there any parameter to prevent this from happening?&lt;/p&gt;</comment>
                            <comment id="17761821" author="ancosen" created="Mon, 4 Sep 2023 12:56:51 +0000"  >&lt;p&gt;This cannot be a blocker or critical.&lt;/p&gt;</comment>
                            <comment id="17761966" author="kartikvk1996" created="Tue, 5 Sep 2023 06:39:14 +0000"  >&lt;p&gt;Definitely, this is not a minor issue also, I see generating a log in GB can take down the entire system within minutes. This is a significant issue where there is no configuration to control the retry nether a delay can be added. Its like a infinite for loop consuming 100%CPU&lt;/p&gt;</comment>
                            <comment id="17761967" author="ancosen" created="Tue, 5 Sep 2023 06:40:56 +0000"  >&lt;p&gt;You have a configuration error, this could be at most a major issue, but if we categorize this kind of stuff as critical, what happens when something is really critical or blocker? An issue is not critical because it affects your workflow and you want a fix ASAP.&lt;/p&gt;</comment>
                            <comment id="17761969" author="ancosen" created="Tue, 5 Sep 2023 06:42:42 +0000"  >&lt;p&gt;And BTW, switching to critical, doesn&apos;t change the priorities. 3.14.10 is not planned before the end of the year.&lt;/p&gt;</comment>
                            <comment id="17773795" author="davsclaus" created="Tue, 10 Oct 2023 19:39:42 +0000"  >&lt;p&gt;Lets see if we can validate those kafka configuration options more eager to make the route fail on startup. However it wont validate all, as if there is network connectivity problems then camel will keep retrying to re-connect (as it has always done)&lt;/p&gt;</comment>
                            <comment id="17774373" author="davsclaus" created="Thu, 12 Oct 2023 08:42:16 +0000"  >&lt;p&gt;I can now fail fast as before&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2023-10-12 10:39:06.948  INFO 11797 --- [           main] el.impl.engine.AbstractCamelContext : Apache Camel 4.2.0-SNAPSHOT (MyKafka) shutdown in 4ms (uptime:0s)
org.apache.kafka.common.config.ConfigException: Invalid port in bootstrap.servers: localhost:119092
	at org.apache.kafka.clients.ClientUtils.parseAndValidateAddresses(ClientUtils.java:82)
	at org.apache.kafka.clients.ClientUtils.parseAndValidateAddresses(ClientUtils.java:48)
	at org.apache.camel.component.kafka.KafkaConsumer.doStart(KafkaConsumer.java:162)
	at org.apache.camel.support.service.BaseService.start(BaseService.java:113)
	at org.apache.camel.support.service.ServiceHelper.startService(ServiceHelper.java:126)
	at org.apache.camel.impl.engine.AbstractCamelContext.startService(AbstractCamelContext.java:3035)
	at org.apache.camel.impl.engine.InternalRouteStartupManager.doStartOrResumeRouteConsumers(InternalRouteStartupManager.java:401)
	at org.apache.camel.impl.engine.InternalRouteStartupManager.doStartRouteConsumers(InternalRouteStartupManager.java:319)
	at org.apache.camel.impl.engine.InternalRouteStartupManager.safelyStartRouteServices(InternalRouteStartupManager.java:213)
	at org.apache.camel.impl.engine.InternalRouteStartupManager.doStartOrResumeRoutes(InternalRouteStartupManager.java:147)
	at org.apache.camel.impl.engine.AbstractCamelContext.doStartCamel(AbstractCamelContext.java:2763)
	at org.apache.camel.impl.engine.AbstractCamelContext.doStartContext(AbstractCamelContext.java:2445)
	at org.apache.camel.impl.engine.AbstractCamelContext.doStart(AbstractCamelContext.java:2400)
	at org.apache.camel.support.service.BaseService.start(BaseService.java:113)
	at org.apache.camel.impl.engine.AbstractCamelContext.start(AbstractCamelContext.java:2036)
	at org.apache.camel.impl.DefaultCamelContext.start(DefaultCamelContext.java:208)
	at org.apache.camel.main.KameletMain.doStart(KameletMain.java:317)
	at org.apache.camel.support.service.BaseService.start(BaseService.java:113)
	at org.apache.camel.dsl.jbang.core.commands.Run.runKameletMain(Run.java:980)
	at org.apache.camel.dsl.jbang.core.commands.Run.run(Run.java:738)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;There will be a new option where you can turn this on|off - preValidateHostAndPort&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 4 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1k5z4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310080" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Regression</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10091"><![CDATA[Regression]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>