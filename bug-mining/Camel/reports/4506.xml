<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:29:23 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-12434] camel-salesforce - Limits can not be deserialized in API versions &gt;= 41.0</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-12434</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;Starting with Salesforce REST API 41.0, it appears that they have made a breaking change to the Limits json payload.&#160; Jackson can no longer deserialize.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Error is&lt;/p&gt;

&lt;p&gt;2018-04-11T13:02:45.644-0500 ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;dispatcherServlet&amp;#93;&lt;/span&gt; http-nio-8080-exec-3 [] Servlet.service() for servlet &lt;span class=&quot;error&quot;&gt;&amp;#91;dispatcherServlet&amp;#93;&lt;/span&gt; in context with path [] threw exception [Request processing failed; nested exception is org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange&lt;span class=&quot;error&quot;&gt;&amp;#91;ID-isdv183994l-containerstore-com-1523469717836-0-13&amp;#93;&lt;/span&gt;] with root cause&lt;br/&gt;
com.fasterxml.jackson.databind.exc.InvalidFormatException: Can not deserialize Map key of type org.apache.camel.component.salesforce.api.dto.Limits$Operation from String &quot;PermissionSets&quot;: not a valid representation, problem: (com.fasterxml.jackson.databind.exc.InvalidFormatException) Can not deserialize Map key of type org.apache.camel.component.salesforce.api.dto.Limits$Operation from String &quot;PermissionSets&quot;: not one of values excepted for Enum class: &lt;span class=&quot;error&quot;&gt;&amp;#91;DailyApiRequests, DailyDurableGenericStreamingApiEvents, ConcurrentAsyncGetReportInstances, DailyGenericStreamingApiEvents, DailyStreamingApiEvents, DailyWorkflowEmails, HourlyDashboardStatuses, HourlySyncReportRuns, DataStorageMB, SingleEmail, HourlyTimeBasedWorkflow, ConcurrentSyncReportRuns, DurableStreamingApiConcurrentClients, DailyBulkApiRequests, FileStorageMB, DailyAsyncApexExecutions, MassEmail, StreamingApiConcurrentClients, HourlyDashboardResults, HourlyAsyncReportRuns, HourlyDashboardRefreshes, HourlyODataCallout, DailyDurableStreamingApiEvents&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at &lt;span class=&quot;error&quot;&gt;&amp;#91;Source: java.io.ByteArrayInputStream@215469a9; line: 1, column: 6646&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at &lt;span class=&quot;error&quot;&gt;&amp;#91;Source: java.io.ByteArrayInputStream@215469a9; line: 1, column: 6646&amp;#93;&lt;/span&gt;&lt;br/&gt;
 at com.fasterxml.jackson.databind.exc.InvalidFormatException.from(InvalidFormatException.java:74)&lt;br/&gt;
 at com.fasterxml.jackson.databind.DeserializationContext.weirdKeyException(DeserializationContext.java:1389)&lt;br/&gt;
 at com.fasterxml.jackson.databind.DeserializationContext.handleWeirdKey(DeserializationContext.java:880)&lt;br/&gt;
 at com.fasterxml.jackson.databind.deser.std.StdKeyDeserializer.deserializeKey(StdKeyDeserializer.java:130)&lt;br/&gt;
 at com.fasterxml.jackson.databind.deser.std.MapDeserializer._readAndBind(MapDeserializer.java:445)&lt;br/&gt;
 at com.fasterxml.jackson.databind.deser.std.MapDeserializer.deserialize(MapDeserializer.java:365)&lt;br/&gt;
 at com.fasterxml.jackson.databind.deser.std.MapDeserializer.deserialize(MapDeserializer.java:27)&lt;br/&gt;
 at com.fasterxml.jackson.databind.ObjectMapper._readValue(ObjectMapper.java:3786)&lt;br/&gt;
 at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:2139)&lt;br/&gt;
 at com.fasterxml.jackson.core.JsonParser.readValueAs(JsonParser.java:1650)&lt;br/&gt;
 at org.apache.camel.component.salesforce.api.dto.Limits$LimitsDeserializer.deserialize(Limits.java:55)&lt;br/&gt;
 at com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:3814)&lt;br/&gt;
 at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:2924)&lt;br/&gt;
 at org.apache.camel.component.salesforce.internal.processor.JsonRestProcessor.processResponse(JsonRestProcessor.java:197)&lt;br/&gt;
 at org.apache.camel.component.salesforce.internal.processor.AbstractRestProcessor.lambda$processWithResponseCallback$5(AbstractRestProcessor.java:783)&lt;br/&gt;
 at org.apache.camel.component.salesforce.internal.client.DefaultRestClient$DelegatingClientCallback.onResponse(DefaultRestClient.java:502)&lt;br/&gt;
 at org.apache.camel.component.salesforce.internal.client.AbstractClientBase$1.onComplete(AbstractClientBase.java:235)&lt;br/&gt;
 at org.eclipse.jetty.client.ResponseNotifier.notifyComplete(ResponseNotifier.java:193)&lt;br/&gt;
 at org.eclipse.jetty.client.ResponseNotifier.notifyComplete(ResponseNotifier.java:185)&lt;br/&gt;
 at org.eclipse.jetty.client.HttpReceiver.terminateResponse(HttpReceiver.java:459)&lt;br/&gt;
 at org.eclipse.jetty.client.HttpReceiver.responseSuccess(HttpReceiver.java:405)&lt;br/&gt;
 at org.eclipse.jetty.client.http.HttpReceiverOverHTTP.messageComplete(HttpReceiverOverHTTP.java:297)&lt;br/&gt;
 at org.eclipse.jetty.http.HttpParser.parseFields(HttpParser.java:1068)&lt;br/&gt;
 at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:1393)&lt;br/&gt;
 at org.eclipse.jetty.client.http.HttpReceiverOverHTTP.parse(HttpReceiverOverHTTP.java:170)&lt;br/&gt;
 at org.eclipse.jetty.client.http.HttpReceiverOverHTTP.process(HttpReceiverOverHTTP.java:131)&lt;br/&gt;
 at org.eclipse.jetty.client.http.HttpReceiverOverHTTP.receive(HttpReceiverOverHTTP.java:70)&lt;br/&gt;
 at org.eclipse.jetty.client.http.HttpChannelOverHTTP.receive(HttpChannelOverHTTP.java:130)&lt;br/&gt;
 at org.eclipse.jetty.client.http.HttpConnectionOverHTTP.onFillable(HttpConnectionOverHTTP.java:116)&lt;br/&gt;
 at org.eclipse.jetty.io.AbstractConnection$ReadCallback.succeeded(AbstractConnection.java:279)&lt;br/&gt;
 at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:104)&lt;br/&gt;
 at org.eclipse.jetty.io.ssl.SslConnection.onFillable(SslConnection.java:289)&lt;br/&gt;
 at org.eclipse.jetty.io.ssl.SslConnection$3.succeeded(SslConnection.java:149)&lt;br/&gt;
 at org.eclipse.jetty.io.FillInterest.fillable(FillInterest.java:104)&lt;br/&gt;
 at org.eclipse.jetty.io.ChannelEndPoint$2.run(ChannelEndPoint.java:124)&lt;br/&gt;
 at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.doProduce(EatWhatYouKill.java:247)&lt;br/&gt;
 at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.produce(EatWhatYouKill.java:140)&lt;br/&gt;
 at org.eclipse.jetty.util.thread.strategy.EatWhatYouKill.run(EatWhatYouKill.java:131)&lt;br/&gt;
 at org.eclipse.jetty.util.thread.ReservedThreadExecutor$ReservedThread.run(ReservedThreadExecutor.java:243)&lt;br/&gt;
 at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:679)&lt;br/&gt;
 at org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:597)&lt;br/&gt;
 at java.lang.Thread.run(Thread.java:748)&lt;br/&gt;
2018-04-11T13:14:21.737-0500 WARN SubscriptionHelper HttpClient@2040015820-scheduler [] Connect failure: {failure={exception=java.util.concurren&lt;/p&gt;</description>
                <environment></environment>
        <key id="13151728">CAMEL-12434</key>
            <summary>camel-salesforce - Limits can not be deserialized in API versions &gt;= 41.0</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="zregvart">Zoran Regvart</assignee>
                                    <reporter username="clromack">Chris Romack</reporter>
                        <labels>
                    </labels>
                <created>Wed, 11 Apr 2018 18:24:03 +0000</created>
                <updated>Mon, 16 Apr 2018 09:50:41 +0000</updated>
                            <resolved>Mon, 16 Apr 2018 09:50:41 +0000</resolved>
                                    <version>2.20.1</version>
                    <version>2.20.2</version>
                    <version>2.21.0</version>
                                    <fixVersion>2.22.0</fixVersion>
                                    <component>camel-salesforce</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="16439199" author="zregvart" created="Mon, 16 Apr 2018 09:50:41 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=clromack&quot; class=&quot;user-hover&quot; rel=&quot;clromack&quot;&gt;clromack&lt;/a&gt; thank you for reporting this! I&apos;ve fixed this in 2.22 by adding the &lt;tt&gt;PermissionSets&lt;/tt&gt; to the list of supported operations. And I&apos;ve also future-proofed the implementation so that it won&apos;t break if Salesforce changes the Limits API again.&lt;/p&gt;

&lt;p&gt;With this I had to do a slight API change on the Limits DTO, now the constructor needs to accept &lt;tt&gt;Map&amp;lt;?, Usage&amp;gt;&lt;/tt&gt; instead of &lt;tt&gt;Map&amp;lt;Operation, Usage&amp;gt;&lt;/tt&gt; as the type erasure doesn&apos;t allow to have two constructors that accept a &lt;tt&gt;Map&lt;/tt&gt; object. It&apos;s a slight API change and coupled with my gut feeling that not a lot of users use the Limits API I&apos;m a little hesitant to backport this to 2.21. But feel free to mention if this is a big issue for your use case and I can backport it so it gets released in the next 2.21 patch version.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 31 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3sfhz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>