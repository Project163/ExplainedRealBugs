<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 09:52:03 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-5223] Cannot find resource in classpath using OSGi blueprint</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-5223</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;I switched from Apache Camel version 2.8.4 (in ServiceMix 4.4.1) to the most recent version 2.9.2. Resource loading in 2.8.4 worked well, but not in the named release.&lt;/p&gt;

&lt;p&gt;Find attached a small test case that uses XSLT and String-Template Endpoints. Neither of them can load their resource from the separate bundle.&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;Install Apache ServiceMix 4.4.1&lt;/li&gt;
	&lt;li&gt;Configure ServiceMix to use Apache Camel 2.9.2 (see &lt;tt&gt;etc/org.apache.karaf.features.cfg&lt;/tt&gt;)&lt;/li&gt;
	&lt;li&gt;Start up ServiceMix&lt;/li&gt;
	&lt;li&gt;Install feature &apos;camel-string-template&apos;&lt;/li&gt;
	&lt;li&gt;Build the attached test project using maven&lt;/li&gt;
	&lt;li&gt;Copy/Link the built artifact into the &lt;tt&gt;deploy&lt;/tt&gt; folder&lt;/li&gt;
	&lt;li&gt;Copy/Link the route &lt;tt&gt;src/test/resources/camel-route&lt;/tt&gt; into the &lt;tt&gt;deploy&lt;/tt&gt; folder&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;The XSLT Component tries to load the resource eagerly. Therefore the route will not start and throws the following exception:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Caused by: java.io.FileNotFoundException: Cannot find resource in classpath for URI: com/basis06/apache/camel/HelloWorld.xslt
	at org.apache.camel.util.ResourceHelper.resolveMandatoryResourceAsUrl(ResourceHelper.java:122)
	at org.apache.camel.component.xslt.XsltEndpoint.loadResource(XsltEndpoint.java:67)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The same problem exists with the String-Template Component. But this component will fail not until it is called in the route.&lt;/p&gt;</description>
                <environment>&lt;p&gt;x86_64 GNU/Linux&lt;br/&gt;
Java 1.6.0_26&lt;br/&gt;
Apache ServiceMix 4.4.1&lt;/p&gt;</environment>
        <key id="12552807">CAMEL-5223</key>
            <summary>Cannot find resource in classpath using OSGi blueprint</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="tsh">Tobias Hofer</reporter>
                        <labels>
                    </labels>
                <created>Thu, 26 Apr 2012 07:46:52 +0000</created>
                <updated>Fri, 15 Jun 2012 15:46:55 +0000</updated>
                            <resolved>Fri, 15 Jun 2012 15:46:55 +0000</resolved>
                                    <version>2.9.2</version>
                                    <fixVersion>2.9.3</fixVersion>
                    <fixVersion>2.10.0</fixVersion>
                                    <component>camel-blueprint</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13262544" author="davsclaus" created="Thu, 26 Apr 2012 12:02:18 +0000"  >&lt;p&gt;Resource loading works fine for me.&lt;/p&gt;

&lt;p&gt;I moved the XML file into the src/main/resources/OSGI-INF/blueprint directory, which is the standard for blueprint XML files.&lt;br/&gt;
I removed the string template endpoint, so the route only did the xstl.&lt;/p&gt;

&lt;p&gt;I installed the application on Fuse ESB which supports offically Camel 2.9, and it worked fine&lt;br/&gt;
I copied a test file and it was processed and from the shell I can get details&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;FuseESB:karaf@root&amp;gt; camel:route-info helloWorld 
Camel Route helloWorld
	Camel Context: 165-camel-3

Properties
		id = helloWorld
		parent = 37fe883b

Statistics
	Exchanges Total: 1
	Exchanges Completed: 1
	Exchanges Failed: 0
	Min Processing Time: 62ms
	Max Processing Time: 62ms
	Mean Processing Time: 62ms
	Total Processing Time: 62ms
	Last Processing Time: 62ms
	Load Avg: 0.00, 0.00, 0.00
	First Exchange Date: 2012-04-26 14:01:03
	Last Exchange Completed Date: 2012-04-26 14:01:03

Definition
&amp;lt;?xml version=&lt;span class=&quot;code-quote&quot;&gt;&quot;1.0&quot;&lt;/span&gt; encoding=&lt;span class=&quot;code-quote&quot;&gt;&quot;UTF-8&quot;&lt;/span&gt; standalone=&lt;span class=&quot;code-quote&quot;&gt;&quot;yes&quot;&lt;/span&gt;?&amp;gt;
&amp;lt;route id=&lt;span class=&quot;code-quote&quot;&gt;&quot;helloWorld&quot;&lt;/span&gt; xmlns=&lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//camel.apache.org/schema/spring&quot;&lt;/span&gt;&amp;gt;
&lt;/span&gt;    &amp;lt;from uri=&lt;span class=&quot;code-quote&quot;&gt;&quot;file:data/in&quot;&lt;/span&gt;/&amp;gt;
    &amp;lt;to uri=&lt;span class=&quot;code-quote&quot;&gt;&quot;xslt:com/basis06/apache/camel/HelloWorld.xslt&quot;&lt;/span&gt; id=&lt;span class=&quot;code-quote&quot;&gt;&quot;to1&quot;&lt;/span&gt;/&amp;gt;
    &amp;lt;to uri=&lt;span class=&quot;code-quote&quot;&gt;&quot;file:data/out&quot;&lt;/span&gt; id=&lt;span class=&quot;code-quote&quot;&gt;&quot;to2&quot;&lt;/span&gt;/&amp;gt;
&amp;lt;/route&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13262547" author="davsclaus" created="Thu, 26 Apr 2012 12:10:54 +0000"  >&lt;p&gt;I did get puzzled by the code that loads the resource in camel-core-osgi, so I have asked for the OSGi experts to chim in.&lt;br/&gt;
I posted on Camel @dev so keep an eye there.&lt;/p&gt;</comment>
                            <comment id="13262586" author="tsh" created="Thu, 26 Apr 2012 12:58:39 +0000"  >&lt;p&gt;Putting the blueprint xml into the bundle works, because they share the same bundle context then.&lt;/p&gt;

&lt;p&gt;But my test case tries to use a classpath resource from another bundle. This works fine for classes exported by the bundle but not for resources.&lt;/p&gt;

&lt;p&gt;Putting the blueprint xml into the deploy folder deploys that in its own bundle context that will dynamically import required packages (from other bundles).&lt;/p&gt;

&lt;p&gt;You can extend the test case and successfully invoke the HelloWorld class inside the route. But you cannot access any resource from the bundle that provides the HelloWorld class.&lt;/p&gt;
</comment>
                            <comment id="13262624" author="dkulp" created="Thu, 26 Apr 2012 13:32:18 +0000"  >
&lt;p&gt;I ran into this same issue with CXF&apos;s WS-N server on Tuesday.   The xsd&apos;s are in the cxf-wsn-api bundle, but the cxf-wsn-core bundle could not load them even if importing the package.   The ONLY solutions I found were:&lt;/p&gt;

&lt;p&gt;1) Make cxf-wsn-core use a Dynamic-Import for the package that contains the resources.  A normal import did not work, just the Dynamic-Import&lt;/p&gt;

&lt;p&gt;2) Make cxf-wsn-core use a Require-Bundle: cxf-wsn-api&lt;/p&gt;

&lt;p&gt;I&apos;m not sure yet if this is a bug in the OSGi stuff.  (I also only checked with Felix, I need to also check to see if Equinox exhibits the same issue)&lt;/p&gt;

</comment>
                            <comment id="13295699" author="hadrian" created="Fri, 15 Jun 2012 14:43:01 +0000"  >&lt;p&gt;This is not really a Camel issue but an Aries/Karaf one. I think it&apos;s already fixed, but we&apos;re not gonna block the 2.10.0 and wait for new releases. I unset the fix version for now.&lt;/p&gt;</comment>
                            <comment id="13295710" author="tsh" created="Fri, 15 Jun 2012 15:02:00 +0000"  >&lt;p&gt;The &apos;OsgiClassResolver&apos; in the camel-spring bundle contains the bug.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; URL loadResourceAsURL(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; uri) {
    ObjectHelper.notEmpty(uri, &lt;span class=&quot;code-quote&quot;&gt;&quot;uri&quot;&lt;/span&gt;);
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; bundleContext.getBundle().getEntry(uri);
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The call to &lt;tt&gt;getEntry&lt;/tt&gt; does only look in the classpath of the bundle. Imported packages are not considered. &lt;tt&gt;getResource&lt;/tt&gt; is the correct method to call.&lt;/p&gt;

&lt;p&gt;See &lt;a href=&quot;http://www.osgi.org/javadoc/r4v43/core/org/osgi/framework/Bundle.html#getEntry(java.lang.String&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.osgi.org/javadoc/r4v43/core/org/osgi/framework/Bundle.html#getEntry(java.lang.String&lt;/a&gt;)&lt;br/&gt;
See also &lt;a href=&quot;http://www.osgi.org/javadoc/r4v43/core/org/osgi/framework/Bundle.html#getResource(java.lang.String&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.osgi.org/javadoc/r4v43/core/org/osgi/framework/Bundle.html#getResource(java.lang.String&lt;/a&gt;)&lt;/p&gt;</comment>
                            <comment id="13295716" author="tsh" created="Fri, 15 Jun 2012 15:08:40 +0000"  >&lt;p&gt;The &lt;tt&gt;OsgiClassResolver&lt;/tt&gt; is now (in the trunk) located in &lt;tt&gt;camel-core-osgi&lt;/tt&gt;. Same code, same problem.&lt;/p&gt;</comment>
                            <comment id="13295729" author="davsclaus" created="Fri, 15 Jun 2012 15:43:16 +0000"  >&lt;p&gt;I tried your suggestion with Karaf 2.2.7, and Camel 2.10-SNAPSHOT, and got it working.&lt;/p&gt;

&lt;p&gt;The route is processed and I got a hello world in the output directory.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;davsclaus:/opt/apache-karaf-2.2.7$ mv sample.xml data/in
davsclaus:/opt/apache-karaf-2.2.7$ ls data/
cache/             in/                out/               tmp/               
generated-bundles/ log/               port               
davsclaus:/opt/apache-karaf-2.2.7$ ls data/in/.camel/sample.xml 
data/in/.camel/sample.xml
davsclaus:/opt/apache-karaf-2.2.7$ cat data/out/sample.xml 
&lt;span class=&quot;code-quote&quot;&gt;&quot;Hello World&quot;&lt;/span&gt;davsclaus:/opt/apache-karaf-2.2.7$ 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13295730" author="davsclaus" created="Fri, 15 Jun 2012 15:43:57 +0000"  >&lt;p&gt;karaf@root&amp;gt; camel:route-info helloWorld &lt;br/&gt;
Camel Route helloWorld&lt;br/&gt;
	Camel Context: 79-camel-3&lt;/p&gt;

&lt;p&gt;Properties&lt;br/&gt;
		id = helloWorld&lt;br/&gt;
		parent = 6c4f7b4c&lt;/p&gt;

&lt;p&gt;Statistics&lt;br/&gt;
	Exchanges Total: 1&lt;br/&gt;
	Exchanges Completed: 1&lt;br/&gt;
	Exchanges Failed: 0&lt;br/&gt;
	Min Processing Time: 177ms&lt;br/&gt;
	Max Processing Time: 177ms&lt;br/&gt;
	Mean Processing Time: 177ms&lt;br/&gt;
	Total Processing Time: 177ms&lt;br/&gt;
	Last Processing Time: 177ms&lt;br/&gt;
	Load Avg: 0.00, 0.00, 0.00&lt;br/&gt;
	First Exchange Date: 2012-06-15 17:43:41&lt;br/&gt;
	Last Exchange Completed Date: 2012-06-15 17:43:41&lt;/p&gt;

&lt;p&gt;Definition&lt;br/&gt;
&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&amp;gt;&lt;br/&gt;
&amp;lt;route id=&quot;helloWorld&quot; xmlns=&quot;http://camel.apache.org/schema/spring&quot;&amp;gt;&lt;br/&gt;
    &amp;lt;from uri=&quot;file:data/in&quot;/&amp;gt;&lt;br/&gt;
    &amp;lt;to uri=&quot;xslt:com/basis06/apache/camel/HelloWorld.xslt&quot; id=&quot;to1&quot;/&amp;gt;&lt;br/&gt;
    &amp;lt;to uri=&quot;string-template:com/basis06/apache/camel/Quote.txt&quot; id=&quot;to2&quot;/&amp;gt;&lt;br/&gt;
    &amp;lt;to uri=&quot;file:data/out&quot; id=&quot;to3&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;/route&amp;gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12524405" name="test-classpath-resource.tar.gz" size="1886" author="tsh" created="Thu, 26 Apr 2012 07:47:54 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>236811</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 23 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i025rj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>10535</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>