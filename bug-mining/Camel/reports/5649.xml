<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:46:34 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-16295] split with AggregationStrategy is ignored when using transacted</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-16295</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;After migration from Camel 2.25.x to Camel 3.8.0&#160;have the problem that my AggregationStrategy is ignored, when using .transacted() in the routedefinition.&lt;/p&gt;

&lt;p&gt;The breakpoint in the AggregationStrategy doesn&apos;t trigger. After removing transacted from the routedefinition everything is fine and the AggregationStrategy is used and the breakpoint triggers.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Reproducer:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/razilein/cameltest&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/razilein/cameltest&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13362074">CAMEL-16295</key>
            <summary>split with AggregationStrategy is ignored when using transacted</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="sgessner">Sita Ge&#223;ner</reporter>
                        <labels>
                    </labels>
                <created>Wed, 3 Mar 2021 10:40:45 +0000</created>
                <updated>Tue, 16 Mar 2021 13:17:29 +0000</updated>
                            <resolved>Wed, 3 Mar 2021 14:50:37 +0000</resolved>
                                    <version>3.8.0</version>
                                    <fixVersion>3.7.4</fixVersion>
                    <fixVersion>3.9.0</fixVersion>
                                    <component>camel-core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17294568" author="davsclaus" created="Wed, 3 Mar 2021 14:42:52 +0000"  >&lt;p&gt;Thanks for reporting and the reproducer.&lt;br/&gt;
I have a fix in the works.&lt;/p&gt;</comment>
                            <comment id="17297230" author="sgessner" created="Mon, 8 Mar 2021 09:53:57 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davsclaus&quot; class=&quot;user-hover&quot; rel=&quot;davsclaus&quot;&gt;davsclaus&lt;/a&gt;&#160;Did you not plan to release the version 3.8.1?&lt;/p&gt;</comment>
                            <comment id="17297236" author="davsclaus" created="Mon, 8 Mar 2021 10:02:34 +0000"  >&lt;p&gt;No its not a LTS release&lt;/p&gt;</comment>
                            <comment id="17301611" author="catom1" created="Mon, 15 Mar 2021 12:04:34 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;i&apos;ve tried the new 3.7.3 LTS release but the problem still persists.&lt;/p&gt;

&lt;p&gt;If I debug the MulticastProcessor class the sequence of execution seems wrong in the&#160;MulticastTransactedTask (on line 589 - 593):&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-comment&quot;&gt;// accept the exchange as a result
&lt;/span&gt;completion.submit(exchangeResult -&amp;gt; exchangeResult.accept(exchange));

&lt;span class=&quot;code-comment&quot;&gt;// aggregate exchanges &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; any
&lt;/span&gt;aggregate();&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The aggregate method is called before the exchangeResult.accept(exchange) what leads to an empty completion.poll() on line 355 of the code, so no aggregation is done. In the&#160;MulticastReactiveTask the aggregate is called inside the completion.submit function, should this not be the same in the&#160;MulticastTransactedTask?&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
completion.submit(exchangeResult -&amp;gt; {
    &lt;span class=&quot;code-comment&quot;&gt;// accept the exchange as a result 
&lt;/span&gt;    exchangeResult.accept(exchange)); 
    &lt;span class=&quot;code-comment&quot;&gt;// aggregate exchanges &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; any 
&lt;/span&gt;    aggregate();
}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Am i missing something here?&lt;/p&gt;</comment>
                            <comment id="17301615" author="davsclaus" created="Mon, 15 Mar 2021 12:15:49 +0000"  >&lt;p&gt;Ah yeah that seems resonable. You are welcome to submit a PR&lt;/p&gt;</comment>
                            <comment id="17302490" author="catom1" created="Tue, 16 Mar 2021 12:56:35 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davsclaus&quot; class=&quot;user-hover&quot; rel=&quot;davsclaus&quot;&gt;davsclaus&lt;/a&gt;&#160;is there a date when the version 3.7.4 will be released ?&lt;/p&gt;</comment>
                            <comment id="17302512" author="davsclaus" created="Tue, 16 Mar 2021 13:17:29 +0000"  >&lt;p&gt;No but it will be a while since 3.7.3 was just released&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 35 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0o91s:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>