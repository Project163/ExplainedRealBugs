<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 09:30:05 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-1144] Exceptions thrown from converters are not correctly handled</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-1144</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;Related nabble: &lt;a href=&quot;http://www.nabble.com/Handling-converter-failure-td20830148s22882.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.nabble.com/Handling-converter-failure-td20830148s22882.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;When an exception is thrown from a @Converter it is not correctly handled by onException.  The handler is receiving a RuntimeCamelException and not checking the cause when determining the best handler.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-comment&quot;&gt;/////Converter
&lt;/span&gt;@Converter
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; LocalDateTime toLocalDateTime(&lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; localDateTime)
{
  &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;Converting to local date time&quot;&lt;/span&gt;);
  &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IllegalArgumentException(&lt;span class=&quot;code-quote&quot;&gt;&quot;Bad data&quot;&lt;/span&gt;);
}

&lt;span class=&quot;code-comment&quot;&gt;/////Routes
&lt;/span&gt;Routes routes = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; RouteBuilder() {

  @Override
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void configure() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
    onException(IllegalArgumentException.class).handled(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;).to(&lt;span class=&quot;code-quote&quot;&gt;&quot;mock:exception&quot;&lt;/span&gt;);
    from(&lt;span class=&quot;code-quote&quot;&gt;&quot;direct:test&quot;&lt;/span&gt;).convertBodyTo(LocalDateTime.class).to(&lt;span class=&quot;code-quote&quot;&gt;&quot;mock:end&quot;&lt;/span&gt;);
  }
};


&lt;span class=&quot;code-comment&quot;&gt;/////Test
&lt;/span&gt;MockEndpoint endpoint = (MockEndpoint)
camelContext.getEndpoint(&lt;span class=&quot;code-quote&quot;&gt;&quot;mock:end&quot;&lt;/span&gt;);
endpoint.expectedMessageCount(0);
MockEndpoint endpoint2 = (MockEndpoint)
camelContext.getEndpoint(&lt;span class=&quot;code-quote&quot;&gt;&quot;mock:exception&quot;&lt;/span&gt;);
endpoint2.expectedMessageCount(1);

camelContext.createProducerTemplate().sendBody(&lt;span class=&quot;code-quote&quot;&gt;&quot;direct:test&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;test&quot;&lt;/span&gt;);

endpoint.assertIsSatisfied();
endpoint2.assertIsSatisfied();

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12486461">CAMEL-1144</key>
            <summary>Exceptions thrown from converters are not correctly handled</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="pledge">Martin Gilday</reporter>
                        <labels>
                    </labels>
                <created>Thu, 4 Dec 2008 10:44:39 +0000</created>
                <updated>Fri, 31 Jul 2009 06:33:46 +0000</updated>
                            <resolved>Thu, 4 Dec 2008 13:38:34 +0000</resolved>
                                    <version>1.5.0</version>
                                    <fixVersion>1.6.0</fixVersion>
                    <fixVersion>2.0-M1</fixVersion>
                                    <component>camel-core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12949928" author="davsclaus" created="Thu, 4 Dec 2008 10:49:38 +0000"  >&lt;p&gt;Just to give a workaround.&lt;/p&gt;

&lt;p&gt;Use onException(Exception.class).onWhen(bean(IsThisTheExceptionIWant.class)) and implement the logic in your own POJO&lt;/p&gt;
</comment>
                            <comment id="12949978" author="davsclaus" created="Thu, 4 Dec 2008 12:52:48 +0000"  >&lt;p&gt;This new rule applies:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;If the thrown exception has a caused by then this exception is used for selection, if no match found the original exception is used for selection instead&lt;/li&gt;
&lt;/ul&gt;



&lt;p&gt;I was wondering if we should do this cause by check for all the entire exception hierarchy starting from the bottom and then recurring up?&lt;/p&gt;

&lt;p&gt;1) RuntimeCamelException&lt;br/&gt;
2) +IOException&lt;br/&gt;
3)    + FileNotFoundException&lt;/p&gt;

&lt;p&gt;So Camel will start with (3) and then match up the tree until (1)&lt;/p&gt;

&lt;p&gt;Currently we support tree level 1+2 but I guess we should support all levels and start from the bottom, the real cause!&lt;/p&gt;</comment>
                            <comment id="12949944" author="davsclaus" created="Thu, 4 Dec 2008 13:11:57 +0000"  >&lt;p&gt;Okay got the tree fixed by introducing an iterator that walks the order we would like.&lt;/p&gt;

&lt;p&gt;Other implementations could extend and use their own ordering.&lt;/p&gt;


&lt;p&gt;    /**&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Iterator that walks the exception hieracy in the order we should match.&lt;/li&gt;
	&lt;li&gt;&amp;lt;p/&amp;gt;&lt;/li&gt;
	&lt;li&gt;Will default walk from bottom upwards to the root exception&lt;br/&gt;
     */&lt;br/&gt;
    protected class ExceptionIterator implements Iterator&amp;lt;Throwable&amp;gt; {&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="12949979" author="davsclaus" created="Thu, 4 Dec 2008 13:27:32 +0000"  >&lt;p&gt;D:\project\camel\camel-core&amp;gt;svn commit --message &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-1144&quot; title=&quot;Exceptions thrown from converters are not correctly handled&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-1144&quot;&gt;&lt;del&gt;CAMEL-1144&lt;/del&gt;&lt;/a&gt;: DefaultExceptionPolicyStrategy now tests caused by exceptions (using bottom to top exception hieracy iterator)&quot;&lt;br/&gt;
Sending        camel-core\src\main\java\org\apache\camel\processor\exceptionpolicy\DefaultExceptionPolicyStrategy.java&lt;br/&gt;
Adding         camel-core\src\test\java\org\apache\camel\processor\onexception\OnExceptionWrappedExceptionTest.java&lt;br/&gt;
Transmitting file data ..&lt;br/&gt;
Committed revision 723314.&lt;/p&gt;</comment>
                            <comment id="12949899" author="davsclaus" created="Thu, 4 Dec 2008 13:38:28 +0000"  >&lt;p&gt;Committed revision 723319. in 1.5 branch&lt;/p&gt;</comment>
                            <comment id="12949871" author="davsclaus" created="Thu, 4 Dec 2008 13:39:45 +0000"  >&lt;p&gt;PS: I have updated the wiki at exception clause trying to explain how camel works when it select which onException to use.&lt;/p&gt;

&lt;p&gt;section: Exception Policy&lt;br/&gt;
&lt;a href=&quot;http://cwiki.apache.org/confluence/display/CAMEL/Exception+Clause&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://cwiki.apache.org/confluence/display/CAMEL/Exception+Clause&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12948242" author="davsclaus" created="Fri, 31 Jul 2009 06:33:46 +0000"  >&lt;p&gt;Closing 2.0m1 tickets&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>76930</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 17 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i01glr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6459</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>