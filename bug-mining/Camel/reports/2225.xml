<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 09:56:30 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-5837] Problem with nested schema imports when upgrading from 2.8.6 to 2.10.2</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-5837</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;Hello&lt;/p&gt;

&lt;p&gt;I&apos;m experiencing trouble with the validiator component when upgrading from 2.8.6 to 2.10.2. &lt;/p&gt;

&lt;p&gt;The problem seems to be related to imported schemas that does additional imports (all using relative paths). XSD A importing XSD B works fine. But if B in turn imports XSD C. That import seems to be resolved with the base path of A. &lt;/p&gt;

&lt;p&gt;All works fine in 2.8.6 but breaks when upgrading to 2.10.2.&lt;/p&gt;

&lt;p&gt;I will attach an example project where you can just switch version to verify the scenario.  &lt;/p&gt;</description>
                <environment>&lt;p&gt;MacOS X, java 7&lt;/p&gt;</environment>
        <key id="12618308">CAMEL-5837</key>
            <summary>Problem with nested schema imports when upgrading from 2.8.6 to 2.10.2</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="njiang">Willem Jiang</assignee>
                                    <reporter username="hutchkintoot">Johan M&#246;r&#233;n</reporter>
                        <labels>
                    </labels>
                <created>Fri, 30 Nov 2012 11:58:15 +0000</created>
                <updated>Thu, 21 Mar 2013 10:46:49 +0000</updated>
                            <resolved>Thu, 21 Mar 2013 10:46:24 +0000</resolved>
                                    <version>2.10.2</version>
                                    <fixVersion>2.10.5</fixVersion>
                    <fixVersion>2.11.0</fixVersion>
                                    <component>camel-core</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="13507286" author="hutchkintoot" created="Fri, 30 Nov 2012 12:00:06 +0000"  >&lt;p&gt;run this project altering the version from 2.8.6 to 2.10.2 to verify the issue. &lt;/p&gt;</comment>
                            <comment id="13508501" author="njiang" created="Mon, 3 Dec 2012 06:44:46 +0000"  >&lt;p&gt;Camel doesn&apos;t use spring to load the schema since 2.9.x, now it only support to resolve the schema from the class path.&lt;br/&gt;
You test can be worked around by adding the relative path health into the health.xsd.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;lt;xs:&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; schemaLocation=&lt;span class=&quot;code-quote&quot;&gt;&quot;health/common/common.xsd&quot;&lt;/span&gt; namespace=&lt;span class=&quot;code-quote&quot;&gt;&quot;org.health.check.common&quot;&lt;/span&gt;/&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13508519" author="hutchkintoot" created="Mon, 3 Dec 2012 07:10:23 +0000"  >&lt;p&gt;Hi, yes that works but it would make the health.xsd file invalid when working with it stand-alone in an ide like Oxygen or Intellij. Our components have been reading nested schemas from the class-path (we package it in a war-file) before. But perhaps spring did some magic and read it from the filesystem?&lt;/p&gt;

&lt;p&gt;Is there anyway to get the old behavior back and still upgrade to 2.10.2?&lt;/p&gt;

&lt;p&gt;regards,&lt;br/&gt;
Johan&lt;/p&gt;</comment>
                            <comment id="13508521" author="hutchkintoot" created="Mon, 3 Dec 2012 07:13:02 +0000"  >&lt;p&gt;Another interesting note is that nested xslt-imports/includes works without problems in 2.10.2. Is the URIResolver logic different between the validation- and xslt-component?&lt;/p&gt;</comment>
                            <comment id="13508554" author="njiang" created="Mon, 3 Dec 2012 07:52:38 +0000"  >&lt;p&gt;Xslt component doesn&apos;t use the DefaultLSResourceResolver as the resource resolver.&lt;br/&gt;
I just checked the code of Spring ResourceLocator, it will use the URLResolver directly if the import resource is not start with classpath. But I doesn&apos;t find a good way to find the resource from file by using the baseURI or SystemId.&lt;/p&gt;</comment>
                            <comment id="13508751" author="hutchkintoot" created="Mon, 3 Dec 2012 14:15:38 +0000"  >&lt;p&gt;From Camels point of view, is this new behavior (since 2.9.x), considered to be a bug or an accepted limitation of the new implementation? We are using xml-schema imports extensively and this causes a lot of trouble for us. I can imagine ways we could get around these problems but not without extensive refactoring of our current projects. &lt;/p&gt;

&lt;p&gt;regards,&lt;br/&gt;
Johan&lt;/p&gt;</comment>
                            <comment id="13543273" author="tranchida" created="Thu, 3 Jan 2013 20:54:50 +0000"  >&lt;p&gt;Hi, &lt;/p&gt;

&lt;p&gt;Same problem for me. For my point of view, this a bug or a regression.&lt;/p&gt;

&lt;p&gt;Any workaround with a custom LSResourceResolver ?&lt;/p&gt;

&lt;p&gt;Regards&lt;br/&gt;
Giampaolo&lt;/p&gt;</comment>
                            <comment id="13550919" author="njiang" created="Fri, 11 Jan 2013 07:27:38 +0000"  >&lt;p&gt;Hi Giampaolo,&lt;/p&gt;

&lt;p&gt;This issue should be resolved from the new released Camel 2.11.0.&lt;br/&gt;
I already committed the patch into camel trunk.&lt;/p&gt;

&lt;p&gt;Willem&lt;/p&gt;</comment>
                            <comment id="13551990" author="muellerc" created="Sat, 12 Jan 2013 18:36:16 +0000"  >&lt;p&gt;I think we can close this issue. We have two unit test classes and multiple tests which make sure this works now.&lt;/p&gt;</comment>
                            <comment id="13552001" author="hutchkintoot" created="Sat, 12 Jan 2013 19:13:28 +0000"  >&lt;p&gt;Great news! Thank you. Looking forward to the next release. &lt;/p&gt;</comment>
                            <comment id="13568796" author="njiang" created="Fri, 1 Feb 2013 15:15:36 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-6013&quot; title=&quot;Validator component fails on XSD with indirect relative import&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-6013&quot;&gt;&lt;del&gt;CAMEL-6013&lt;/del&gt;&lt;/a&gt; has a better solution to fix this kind of issue.&lt;/p&gt;</comment>
                            <comment id="13603256" author="hutchkintoot" created="Fri, 15 Mar 2013 09:22:35 +0000"  >&lt;p&gt;Hello&lt;/p&gt;

&lt;p&gt;I tried to upgrade to 2.10.4 but it still have problems resolving my imports. &lt;/p&gt;

&lt;p&gt;I can confirm that the first test-case works. But when i try it with a more complex import structure it fails.&lt;/p&gt;

&lt;p&gt;I have compiled a new example project that i will attach to the issue that shows when the error occurs. I will also attach a picture showing the folder and import structure.&lt;/p&gt;</comment>
                            <comment id="13603258" author="hutchkintoot" created="Fri, 15 Mar 2013 09:27:35 +0000"  >&lt;p&gt;This picture shows the imports and the order they occur in. relatedURI property extracted from debugger.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/12573853/12573853_xsd_import_problem.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="13604548" author="njiang" created="Sun, 17 Mar 2013 08:59:07 +0000"  >&lt;p&gt;&lt;br/&gt;
I just did a quick fix for this issue and committed the patch into trunk, please verify it with latest camel 2.11-SNAPSHOT.&lt;/p&gt;</comment>
                            <comment id="13604938" author="hutchkintoot" created="Mon, 18 Mar 2013 08:32:16 +0000"  >&lt;p&gt;Thanks Willem, i just tried it with 2.11-SNAPSHOT but the import still fails on 4.xsd.&lt;/p&gt;</comment>
                            <comment id="13604941" author="hutchkintoot" created="Mon, 18 Mar 2013 08:37:23 +0000"  >&lt;p&gt;Checked my local maven repo and the pom for camel-core is dated the 16th of march. So i guess your fix is not pushed to the snapshot repo yet. &lt;/p&gt;

&lt;p&gt;camel-core-2.11-20130316.163847-415.pom&lt;/p&gt;

&lt;p&gt;/j&lt;/p&gt;</comment>
                            <comment id="13606346" author="hutchkintoot" created="Tue, 19 Mar 2013 13:45:37 +0000"  >&lt;p&gt;Managed to build from 2.11-SNAPSHOT from source and managed to start the route successfully. When trying against my live-code however the fault persisted. I then discovered that the schema import structure in the example wasn&apos;t quite right. In my live-code and in the attached image both 1.xsd and 2.xsd imports 4.xsd. When i corrected 2.xsd to reflect this in the example code it refused to run.&lt;/p&gt;

&lt;p&gt;To fix 2.xsd please replace it&apos;s content with the following code:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;?xml version=&lt;span class=&quot;code-quote&quot;&gt;&quot;1.0&quot;&lt;/span&gt; encoding=&lt;span class=&quot;code-quote&quot;&gt;&quot;UTF-8&quot;&lt;/span&gt;?&amp;gt;&lt;/span&gt;
&amp;lt;xs:schema 
    &lt;span class=&quot;code-keyword&quot;&gt;xmlns:xs&lt;/span&gt;=&lt;span class=&quot;code-quote&quot;&gt;&quot;http://www.w3.org/2001/XMLSchema&quot;&lt;/span&gt; 
    elementFormDefault=&lt;span class=&quot;code-quote&quot;&gt;&quot;qualified&quot;&lt;/span&gt;
    targetNamespace=&lt;span class=&quot;code-quote&quot;&gt;&quot;example.2&quot;&lt;/span&gt;&amp;gt;
    
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;xs:import schemaLocation=&lt;span class=&quot;code-quote&quot;&gt;&quot;../../common/3.xsd&quot;&lt;/span&gt; namespace=&lt;span class=&quot;code-quote&quot;&gt;&quot;example.3&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;xs:import schemaLocation=&lt;span class=&quot;code-quote&quot;&gt;&quot;../common/4.xsd&quot;&lt;/span&gt; namespace=&lt;span class=&quot;code-quote&quot;&gt;&quot;example.4&quot;&lt;/span&gt;/&amp;gt;&lt;/span&gt;
    
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/xs:schema&amp;gt;&lt;/span&gt;

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;When debugging this i found that the baseURI, used as key in the relatedURIMap, is not correct (the start and end of the path is correct but it is lacking path elements in the middle). I&apos;m not sure if this is the cause of the problem.  &lt;/p&gt;

</comment>
                            <comment id="13607241" author="njiang" created="Wed, 20 Mar 2013 03:42:39 +0000"  >&lt;p&gt;Hi Johan,&lt;/p&gt;

&lt;p&gt;I just did a quick fix for the issue that you found yesterday. &lt;br/&gt;
Please feel free to check it out for verification.&lt;/p&gt;

&lt;p&gt;Willem&lt;/p&gt;</comment>
                            <comment id="13607545" author="hutchkintoot" created="Wed, 20 Mar 2013 12:26:40 +0000"  >&lt;p&gt;Hi Willem,&lt;/p&gt;

&lt;p&gt;That fix resolved my problems in the original project. Thank you for all your help!&lt;/p&gt;

&lt;p&gt;Regards,&lt;br/&gt;
Johan&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12555499" name="xsd-import_example 2.zip" size="32053" author="hutchkintoot" created="Fri, 30 Nov 2012 12:00:06 +0000"/>
                            <attachment id="12573852" name="xsd-import_example-reopen.zip" size="94344" author="hutchkintoot" created="Fri, 15 Mar 2013 09:23:45 +0000"/>
                            <attachment id="12573853" name="xsd_import_problem.png" size="47115" author="hutchkintoot" created="Fri, 15 Mar 2013 09:27:35 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>292939</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 35 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0sgj3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>164155</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>