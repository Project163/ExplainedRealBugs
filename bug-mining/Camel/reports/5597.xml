<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:45:30 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-16086] camel-salesforce - CompositeApiProcessor requires too many fields in RAW mode</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-16086</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;&lt;a href=&quot;https://github.com/apache/camel/blob/master/components/camel-salesforce/camel-salesforce-component/src/main/java/org/apache/camel/component/salesforce/internal/processor/CompositeApiProcessor.java#L251&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/blob/ae2c79dcd64424acc82a29c9a46620809ea6414c/components/camel-salesforce/camel-salesforce-component/src/main/java/org/apache/camel/component/salesforce/internal/processor/CompositeApiProcessor.java#L251https://github.com/apache/camel/blob/master/components/camel-salesforce/camel-salesforce-component/src/main/java/org/apache/camel/component/salesforce/internal/processor/CompositeApiProcessor.java#L251&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;This requires the SOBJECT_EXT_ID_NAME, but this should not be required. SFDC Documentation: &lt;a href=&quot;https://developer.salesforce.com/docs/atlas.en-us.api_rest.meta/api_rest/resources_composite_composite.htm&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://developer.salesforce.com/docs/atlas.en-us.api_rest.meta/api_rest/resources_composite_composite.htm&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;In our case, we are using platform events, and upsert ids would not make sense for us.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Also this line is requiring a COMPOSITE_METHOD: &lt;a href=&quot;https://github.com/apache/camel/blob/ae2c79dcd64424acc82a29c9a46620809ea6414c/components/camel-salesforce/camel-salesforce-component/src/main/java/org/apache/camel/component/salesforce/internal/processor/CompositeApiProcessor.java#L252&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/blob/ae2c79dcd64424acc82a29c9a46620809ea6414c/components/camel-salesforce/camel-salesforce-component/src/main/java/org/apache/camel/component/salesforce/internal/processor/CompositeApiProcessor.java#L252&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;This seems unnecessary, as it is already defaulted to POST in DefaultCompositeApiClient: &lt;a href=&quot;https://github.com/apache/camel/blob/ae2c79dcd64424acc82a29c9a46620809ea6414c/components/camel-salesforce/camel-salesforce-component/src/main/java/org/apache/camel/component/salesforce/internal/client/DefaultCompositeApiClient.java#L106&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/blob/ae2c79dcd64424acc82a29c9a46620809ea6414c/components/camel-salesforce/camel-salesforce-component/src/main/java/org/apache/camel/component/salesforce/internal/client/DefaultCompositeApiClient.java#L106&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13354771">CAMEL-16086</key>
            <summary>camel-salesforce - CompositeApiProcessor requires too many fields in RAW mode</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jeremyross">Jeremy Ross</assignee>
                                    <reporter username="jsightle@redhat.com">Jesse Sightler</reporter>
                        <labels>
                    </labels>
                <created>Tue, 26 Jan 2021 22:42:36 +0000</created>
                <updated>Wed, 17 Mar 2021 17:07:36 +0000</updated>
                            <resolved>Sat, 6 Feb 2021 18:32:04 +0000</resolved>
                                    <version>3.7.1</version>
                                    <fixVersion>3.8.0</fixVersion>
                                    <component>camel-salesforce</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17273068" author="jsightle@redhat.com" created="Wed, 27 Jan 2021 18:15:52 +0000"  >&lt;p&gt;I&apos;m not sure that this is really minor. It makes Composite operations involving platform-events impossible in raw mode, unless I am overlooking some workaround.&lt;/p&gt;</comment>
                            <comment id="17277978" author="davsclaus" created="Wed, 3 Feb 2021 12:47:20 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jeremyross&quot; class=&quot;user-hover&quot; rel=&quot;jeremyross&quot;&gt;jeremyross&lt;/a&gt; wonder if you have any thoughts on this ticket?&lt;/p&gt;</comment>
                            <comment id="17279803" author="jeremyross" created="Fri, 5 Feb 2021 16:58:08 +0000"  >&lt;p&gt;I&apos;m also a little confused why these are required. My understanding is that External Id field (if applicable), SObject, and http method for each sub-request should all be provided &lt;b&gt;inside&lt;/b&gt; the raw payload.&#160;&lt;/p&gt;

&lt;p&gt;The http method for the actual/parent HTTP composite resource is always POST, so again, I don&apos;t see a reason to provide this.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jsightle%40redhat.com&quot; class=&quot;user-hover&quot; rel=&quot;jsightle@redhat.com&quot;&gt;jsightle@redhat.com&lt;/a&gt;&#160;Do we have the same understanding?&lt;/p&gt;</comment>
                            <comment id="17279830" author="jsightle@redhat.com" created="Fri, 5 Feb 2021 17:14:42 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jeremyross&quot; class=&quot;user-hover&quot; rel=&quot;jeremyross&quot;&gt;jeremyross&lt;/a&gt;&#160;- I think so. I believe that external ID becomes part of the URL (if present), but it is an optional part of the URL and should not be required IMO. In my case, I have no valid value to supply for this.&lt;/p&gt;

&lt;p&gt;I think POST is the common case, and IMO should be the default. It sounds like a composite GET is also possible, though I&apos;ve never used it.&lt;/p&gt;</comment>
                            <comment id="17302383" author="jawwad124" created="Tue, 16 Mar 2021 10:01:05 +0000"  >&lt;p&gt;We should keep the support optional instead of removing it altogether. Because it&apos;s pretty common to use an external id when you&apos;re moving data from external systems.&lt;/p&gt;</comment>
                            <comment id="17302579" author="jeremyross" created="Tue, 16 Mar 2021 14:42:31 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jawwad124&quot; class=&quot;user-hover&quot; rel=&quot;jawwad124&quot;&gt;jawwad124&lt;/a&gt;&#160;Inside the composite request, each sub-request specifies the http method, including the use of an external id if applicable. E.g.:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-json&quot;&gt;
{
  &lt;span class=&quot;code-quote&quot;&gt;&quot;compositeRequest&quot;&lt;/span&gt;: [
    {
      &lt;span class=&quot;code-quote&quot;&gt;&quot;method&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;PATCH&quot;&lt;/span&gt;,
      &lt;span class=&quot;code-quote&quot;&gt;&quot;url&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;services/data/v51.0/sobjects/Account/customExtIdField__c/11999&quot;&lt;/span&gt;,
      &lt;span class=&quot;code-quote&quot;&gt;&quot;referenceId&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;refAccount&quot;&lt;/span&gt;,
      &lt;span class=&quot;code-quote&quot;&gt;&quot;body&quot;&lt;/span&gt;: {
        &lt;span class=&quot;code-quote&quot;&gt;&quot;Name&quot;&lt;/span&gt;: &lt;span class=&quot;code-quote&quot;&gt;&quot;Sample Account&quot;&lt;/span&gt;
      }
    }
  ]
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17302582" author="jawwad124" created="Tue, 16 Mar 2021 14:47:55 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jeremyross&quot; class=&quot;user-hover&quot; rel=&quot;jeremyross&quot;&gt;jeremyross&lt;/a&gt;&#160;I am using rawPayload to submit sObject Composite Collection Requests. I don&apos;t think I can submit its external id in body. On v3.7 it works because external id is part of URL.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://developer.salesforce.com/docs/atlas.en-us.api_rest.meta/api_rest/resources_composite_sobjects_collections_upsert.htm&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://developer.salesforce.com/docs/atlas.en-us.api_rest.meta/api_rest/resources_composite_sobjects_collections_upsert.htm&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17302611" author="jeremyross" created="Tue, 16 Mar 2021 15:18:09 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jawwad124&quot; class=&quot;user-hover&quot; rel=&quot;jawwad124&quot;&gt;jawwad124&lt;/a&gt;&#160;can you provide an example of how you&apos;re using the salesforce producer for this case? Just the .to() call would help to see.&lt;/p&gt;</comment>
                            <comment id="17302675" author="jawwad124" created="Tue, 16 Mar 2021 16:31:59 +0000"  >&lt;p&gt;.process(this::toJson)&lt;br/&gt;
.to(&quot;salesforce:composite?rawPayload=true&amp;amp;compositeMethod=PATCH&quot;)&lt;/p&gt;

&lt;p&gt;With SObjectName and External Id field name in headers.&lt;/p&gt;

&lt;p&gt;It builds the URL in the DefaultCompositeApi client and the payload get submitted fine.&lt;/p&gt;</comment>
                            <comment id="17302790" author="jeremyross" created="Tue, 16 Mar 2021 18:36:07 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jawwad124&quot; class=&quot;user-hover&quot; rel=&quot;jawwad124&quot;&gt;jawwad124&lt;/a&gt; It looks like the &lt;tt&gt;composite&lt;/tt&gt; operation plus &lt;tt&gt;rawPayload=true&lt;/tt&gt; was targeting the Composite Collections API. This would be a bug. In order to have this functionality, I could create a &lt;tt&gt;composite-collections&lt;/tt&gt; operation which would allow you to use a raw payload. Would that work?&lt;/p&gt;</comment>
                            <comment id="17302880" author="jawwad124" created="Tue, 16 Mar 2021 20:40:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jeremyross&quot; class=&quot;user-hover&quot; rel=&quot;jeremyross&quot;&gt;jeremyross&lt;/a&gt;&#160; Yes, that would be great. Composite collections API is great as it can hold up to 200 records so really helps to stay within API limits.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13365893">CAMEL-16368</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 35 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0n0o0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>