<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:06:18 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-8005] Simple language produces null for a method call on a header value</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-8005</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;Please could you confirm if this is a bug.&lt;/p&gt;

&lt;p&gt;It works if the text is sent in the body but not if it is sent in a header.&lt;/p&gt;

&lt;p&gt;I hope the test case is self explanatory.&lt;/p&gt;

&lt;p&gt;-------&lt;/p&gt;

&lt;p&gt;import org.apache.camel.CamelContext;&lt;br/&gt;
import org.apache.camel.builder.RouteBuilder;&lt;br/&gt;
import org.apache.camel.component.mock.MockEndpoint;&lt;br/&gt;
import org.apache.camel.impl.DefaultCamelContext;&lt;/p&gt;

&lt;p&gt;public class CamelBug {&lt;/p&gt;

&lt;p&gt;	public static void main(String[] args) throws Exception {&lt;br/&gt;
		  CamelContext camelContext = new DefaultCamelContext();&lt;br/&gt;
	        camelContext.addRoutes(new RouteBuilder() {&lt;br/&gt;
	            @Override&lt;br/&gt;
	            public void configure() throws Exception &lt;/p&gt;
{
	                from(&quot;direct:test&quot;).
	                        //setBody(simple(&quot;body.replace(&apos;a&apos;,&apos;b&apos;)&quot;)).
	              setBody(simple(&quot;header[text].replace(&apos;a&apos;,&apos;b&apos;)&quot;)).
                            
	                to(&quot;mock:test&quot;);
	            }
&lt;p&gt;	        });&lt;br/&gt;
	        camelContext.start();&lt;br/&gt;
	        camelContext.createProducerTemplate().sendBodyAndHeader(&quot;direct:test&quot;,&quot;&quot;,&quot;text&quot;,&quot;replace me&quot;);&lt;br/&gt;
	        MockEndpoint mockEndpoint =&lt;br/&gt;
	camelContext.getEndpoint(&quot;mock:test&quot;, MockEndpoint.class);&lt;br/&gt;
	        String replacedMessage =&lt;br/&gt;
	mockEndpoint.getExchanges().get(0).getIn().getBody(String.class);&lt;/p&gt;

&lt;p&gt;	        System.out.println(replacedMessage);//gives null&lt;br/&gt;
	        //assertEquals(&quot;replbce me&quot;, replacedMessage); &lt;br/&gt;
	}&lt;/p&gt;

&lt;p&gt;}&lt;/p&gt;</description>
                <environment>&lt;p&gt;Linux apps4u 2.6.32-431.3.1.el6.x86_64 #1 SMP Fri Jan 3 21:39:27 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux&lt;/p&gt;

&lt;p&gt;java version &quot;1.8.0&quot;&lt;br/&gt;
Java(TM) SE Runtime Environment (build 1.8.0-b132)&lt;br/&gt;
Java HotSpot(TM) 64-Bit Server VM (build 25.0-b70, mixed mode)&lt;/p&gt;</environment>
        <key id="12753597">CAMEL-8005</key>
            <summary>Simple language produces null for a method call on a header value</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="njiang">Willem Jiang</assignee>
                                    <reporter username="hazlorealidad">Andy Bailey</reporter>
                        <labels>
                    </labels>
                <created>Fri, 7 Nov 2014 02:20:57 +0000</created>
                <updated>Wed, 14 Jan 2015 10:52:00 +0000</updated>
                            <resolved>Wed, 14 Jan 2015 10:52:00 +0000</resolved>
                                    <version>2.14.0</version>
                                                    <component>camel-core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14262937" author="taariql" created="Fri, 2 Jan 2015 15:05:44 +0000"  >&lt;p&gt;Try these 2 options;&lt;/p&gt;

&lt;p&gt;1. Remove the square brackets &lt;br/&gt;
.setBody(simple(&quot;header.text.replace(&apos;a&apos;,&apos;b&apos;)&quot;))&lt;/p&gt;

&lt;p&gt;2. Split the expression&lt;br/&gt;
.setBody(simple(&quot;header&lt;span class=&quot;error&quot;&gt;&amp;#91;text&amp;#93;&lt;/span&gt;&quot;))&lt;br/&gt;
.setBody(simple(&quot;body.replace(&apos;a&apos;,&apos;b&apos;)&quot;))&lt;/p&gt;</comment>
                            <comment id="14263791" author="njiang" created="Sun, 4 Jan 2015 08:37:28 +0000"  >&lt;p&gt;Hi Andy&lt;br/&gt;
Please use the mailing list to ask this kind of question before you create a JIRA for it.&lt;br/&gt;
Because you are using OGNL expression (the replace method is provided by String class), &quot;header&lt;span class=&quot;error&quot;&gt;&amp;#91;text&amp;#93;&lt;/span&gt;&quot; doesn&apos;t suppose the OGNL invocation. As Taariq already point out, you can write the expression in other ways.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 46 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i22393:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>