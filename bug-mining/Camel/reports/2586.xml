<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:00:54 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-7087] StreamCache does not reset at the end of the pipeline</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-7087</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;The StreamCache does not reset at the end of the pipeline.&lt;/p&gt;

&lt;p&gt;The following routes will not work as expected:&lt;br/&gt;
   from(&quot;direct:c&quot;).noStreamCaching().to(&quot;direct:d&quot;).to(&quot;mock:c&quot;);&lt;br/&gt;
   from(&quot;direct:d&quot;).streamCaching().process(new TestProcessor());&lt;/p&gt;

&lt;p&gt;(the test processor is a processor that reads the InputMessage)&lt;/p&gt;

&lt;p&gt;If another processor is added after the TestProcessor that does nothing, the routes will work as expected.&lt;/p&gt;

&lt;p&gt;This case is a bit synthetic, but in real life a route that starts with a InOut CXF endpoint, has an endpoint that generates a Stream and then writes the message content to an in only endpoint (file, FTP, log, etc.) will also fail, even if stream caching is enabled.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12685797">CAMEL-7087</key>
            <summary>StreamCache does not reset at the end of the pipeline</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="siano">Stephan Siano</reporter>
                        <labels>
                    </labels>
                <created>Fri, 20 Dec 2013 12:16:45 +0000</created>
                <updated>Fri, 20 Dec 2013 17:28:20 +0000</updated>
                            <resolved>Fri, 20 Dec 2013 17:28:20 +0000</resolved>
                                    <version>2.12.2</version>
                                    <fixVersion>2.12.3</fixVersion>
                    <fixVersion>2.13.0</fixVersion>
                                    <component>camel-core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13853913" author="siano" created="Fri, 20 Dec 2013 12:27:12 +0000"  >&lt;p&gt;The root cause is currently the StreamCache is reset only before the executin of the processor, not afterwards. If the consumer gets the exchange back, a StreamCache in the in-message will remain as it is and does not close.&lt;/p&gt;

&lt;p&gt;My patch also resets the stream cache after each processor. This means normally the reset() will be executed twice on the stream cache (after the previous processor and before the next), but a reset() on a StreamCache that was reset before, will only do a null comparison, so it doesn&apos;t cost much. I also considered to remove the reset before the processors, but I am not sure whether this doesn&apos;t break wiretaps or the like.&lt;/p&gt;</comment>
                            <comment id="13854224" author="davsclaus" created="Fri, 20 Dec 2013 17:28:20 +0000"  >&lt;p&gt;Thanks for reporting and the patch.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12619803" name="0001-CAMEL-7087-StreamCache-does-not-reset-at-the-end-of-.patch" size="4658" author="siano" created="Fri, 20 Dec 2013 12:20:04 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>364958</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 48 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1qwon:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>365269</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>