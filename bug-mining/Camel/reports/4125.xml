<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:23:55 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-11317] [OSGi, camel-jpa] Problems with mapping idempotent.jpa.MessageProcessed with Aries + Hibernate</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-11317</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;When JPA idempotent JpaMessageIdRepository is used in blueprint, with Hibernate JPA Provider we may end up with:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2017-05-16 13:23:38,739 | ERROR | {pool-28-thread-1} [org.hibernate.proxy.pojo.javassist.JavassistLazyInitializer] (JavassistLazyInitializer.java:166) | 236 - org.hibernate.core - 4.2.22.Final | HHH000142: Javassist Enhancement failed: org.apache.camel.processor.idempotent.jpa.MessageProcessed
java.lang.RuntimeException: by java.lang.NoClassDefFoundError: org/hibernate/proxy/HibernateProxy
    at javassist.util.proxy.ProxyFactory.createClass3(ProxyFactory.java:515)[157:javassist:3.19.0.GA]
    at javassist.util.proxy.ProxyFactory.createClass2(ProxyFactory.java:492)[157:javassist:3.19.0.GA]
    at javassist.util.proxy.ProxyFactory.createClass1(ProxyFactory.java:428)[157:javassist:3.19.0.GA]
    at javassist.util.proxy.ProxyFactory.createClass(ProxyFactory.java:400)[157:javassist:3.19.0.GA]
    at org.hibernate.proxy.pojo.javassist.JavassistLazyInitializer.getProxyFactory(JavassistLazyInitializer.java:163)[236:org.hibernate.core:4.2.22.Final]
    at org.hibernate.proxy.pojo.javassist.JavassistProxyFactory.postInstantiate(JavassistProxyFactory.java:66)[236:org.hibernate.core:4.2.22.Final]
    at org.hibernate.tuple.entity.PojoEntityTuplizer.buildProxyFactory(PojoEntityTuplizer.java:229)[236:org.hibernate.core:4.2.22.Final]
    at org.hibernate.tuple.entity.AbstractEntityTuplizer.&amp;lt;init&amp;gt;(AbstractEntityTuplizer.java:212)[236:org.hibernate.core:4.2.22.Final]
    at org.hibernate.tuple.entity.PojoEntityTuplizer.&amp;lt;init&amp;gt;(PojoEntityTuplizer.java:82)[236:org.hibernate.core:4.2.22.Final]
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)[:1.8.0_131]
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)[:1.8.0_131]
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)[:1.8.0_131]
    at java.lang.reflect.Constructor.newInstance(Constructor.java:423)[:1.8.0_131]
    at org.hibernate.tuple.entity.EntityTuplizerFactory.constructTuplizer(EntityTuplizerFactory.java:135)[236:org.hibernate.core:4.2.22.Final]
    at org.hibernate.tuple.entity.EntityTuplizerFactory.constructDefaultTuplizer(EntityTuplizerFactory.java:188)[236:org.hibernate.core:4.2.22.Final]
    at org.hibernate.tuple.entity.EntityMetamodel.&amp;lt;init&amp;gt;(EntityMetamodel.java:341)[236:org.hibernate.core:4.2.22.Final]
    at org.hibernate.persister.entity.AbstractEntityPersister.&amp;lt;init&amp;gt;(AbstractEntityPersister.java:506)[236:org.hibernate.core:4.2.22.Final]
    at org.hibernate.persister.entity.SingleTableEntityPersister.&amp;lt;init&amp;gt;(SingleTableEntityPersister.java:146)[236:org.hibernate.core:4.2.22.Final]
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)[:1.8.0_131]
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)[:1.8.0_131]
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)[:1.8.0_131]
    at java.lang.reflect.Constructor.newInstance(Constructor.java:423)[:1.8.0_131]
    at org.hibernate.persister.internal.PersisterFactoryImpl.create(PersisterFactoryImpl.java:163)[236:org.hibernate.core:4.2.22.Final]
    at org.hibernate.persister.internal.PersisterFactoryImpl.createEntityPersister(PersisterFactoryImpl.java:135)[236:org.hibernate.core:4.2.22.Final]
    at org.hibernate.internal.SessionFactoryImpl.&amp;lt;init&amp;gt;(SessionFactoryImpl.java:398)[236:org.hibernate.core:4.2.22.Final]
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1854)[236:org.hibernate.core:4.2.22.Final]
    at org.hibernate.ejb.EntityManagerFactoryImpl.&amp;lt;init&amp;gt;(EntityManagerFactoryImpl.java:96)[237:org.hibernate.entitymanager:4.2.22.Final]
    at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:915)[237:org.hibernate.entitymanager:4.2.22.Final]
    at org.hibernate.osgi.OsgiPersistenceProvider.createContainerEntityManagerFactory(OsgiPersistenceProvider.java:99)[238:org.hibernate.osgi:4.2.22.Final]
    at org.apache.aries.jpa.container.impl.EntityManagerFactoryManager.createEntityManagerFactories(EntityManagerFactoryManager.java:432)[166:org.apache.aries.jpa.container:1.0.4]
    at org.apache.aries.jpa.container.impl.EntityManagerFactoryManager.registerEntityManagerFactories(EntityManagerFactoryManager.java:292)[166:org.apache.aries.jpa.container:1.0.4]
    at org.apache.aries.jpa.container.impl.EntityManagerFactoryManager.access$000(EntityManagerFactoryManager.java:74)[166:org.apache.aries.jpa.container:1.0.4]
    at org.apache.aries.jpa.container.impl.EntityManagerFactoryManager$1.call(EntityManagerFactoryManager.java:203)[166:org.apache.aries.jpa.container:1.0.4]
    at org.apache.aries.jpa.container.impl.EntityManagerFactoryManager$1.call(EntityManagerFactoryManager.java:199)[166:org.apache.aries.jpa.container:1.0.4]
    at java.util.concurrent.FutureTask.run(FutureTask.java:266)[:1.8.0_131]
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)[:1.8.0_131]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)[:1.8.0_131]
    at java.lang.Thread.run(Thread.java:748)[:1.8.0_131]
Caused by: javassist.CannotCompileException: by java.lang.NoClassDefFoundError: org/hibernate/proxy/HibernateProxy
    at javassist.util.proxy.FactoryHelper.toClass(FactoryHelper.java:170)[157:javassist:3.19.0.GA]
    at javassist.util.proxy.ProxyFactory.createClass3(ProxyFactory.java:507)[157:javassist:3.19.0.GA]
    ... 37 more
Caused by: java.lang.NoClassDefFoundError: org/hibernate/proxy/HibernateProxy
    at java.lang.ClassLoader.defineClass1(Native Method)[:1.8.0_131]
    at java.lang.ClassLoader.defineClass(ClassLoader.java:763)[:1.8.0_131]
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)[:1.8.0_131]
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)[:1.8.0_131]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)[:1.8.0_131]
    at java.lang.reflect.Method.invoke(Method.java:498)[:1.8.0_131]
    at javassist.util.proxy.FactoryHelper.toClass2(FactoryHelper.java:182)[157:javassist:3.19.0.GA]
    at javassist.util.proxy.FactoryHelper.toClass(FactoryHelper.java:164)[157:javassist:3.19.0.GA]
    ... 38 more
Caused by: java.lang.ClassNotFoundException: org.hibernate.proxy.HibernateProxy not found by org.apache.camel.camel-jpa [180]
    at org.apache.felix.framework.BundleWiringImpl.findClassOrResourceByDelegation(BundleWiringImpl.java:1556)
    at org.apache.felix.framework.BundleWiringImpl.access$400(BundleWiringImpl.java:77)
    at org.apache.felix.framework.BundleWiringImpl$BundleClassLoader.loadClass(BundleWiringImpl.java:1993)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:357)[:1.8.0_131]
    ... 46 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13074475">CAMEL-11317</key>
            <summary>[OSGi, camel-jpa] Problems with mapping idempotent.jpa.MessageProcessed with Aries + Hibernate</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ggrzybek">Grzegorz Grzybek</assignee>
                                    <reporter username="ggrzybek">Grzegorz Grzybek</reporter>
                        <labels>
                    </labels>
                <created>Wed, 24 May 2017 11:13:02 +0000</created>
                <updated>Wed, 24 May 2017 11:50:06 +0000</updated>
                            <resolved>Wed, 24 May 2017 11:22:14 +0000</resolved>
                                    <version>2.17.7</version>
                    <version>2.18.3</version>
                    <version>2.19.0</version>
                                    <fixVersion>2.18.5</fixVersion>
                    <fixVersion>2.19.1</fixVersion>
                    <fixVersion>2.20.0</fixVersion>
                                    <component>camel-jpa</component>
                    <component>osgi</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16022716" author="gzres" created="Wed, 24 May 2017 11:22:01 +0000"  >&lt;p&gt;Fixed in master branch &lt;a href=&quot;https://github.com/apache/camel/commit/12d4f2d108b5d771e286135827e70bd5f0471f90&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;&lt;br/&gt;
Fixed in camel-2.19.x branch &lt;a href=&quot;https://github.com/apache/camel/commit/894a54f255528e32ce75572288bfdcfa3a558d07&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16022744" author="davsclaus" created="Wed, 24 May 2017 11:39:04 +0000"  >&lt;p&gt;Should we backport to 2.18.x branch also?&lt;/p&gt;</comment>
                            <comment id="16022747" author="gzres" created="Wed, 24 May 2017 11:40:59 +0000"  >&lt;p&gt;No problem&lt;/p&gt;</comment>
                            <comment id="16022749" author="gzres" created="Wed, 24 May 2017 11:42:29 +0000"  >&lt;p&gt;Fixed in camel-2.18.x &lt;a href=&quot;https://github.com/apache/camel/commit/7471bacec53927a35c6197ef371ecac1f2679e7a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16022750" author="davsclaus" created="Wed, 24 May 2017 11:43:08 +0000"  >&lt;p&gt;Thanks its 2.18.5, as .4 is in VOTE now to be released soon&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 25 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3fegv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>