<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:36:16 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-13750] Incoming JMSCorrelationID is passed along when useMessageIDAsCorrelationID</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-13750</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;+-+            +-+            +-+
| | +-&amp;gt; Q1 +-&amp;gt; | | +-&amp;gt; Q3 +-&amp;gt; | |
|A|            |B|            |C|
| | &amp;lt;-+ Q2 &amp;lt;-+ | | &amp;lt;-+ Q4 &amp;lt;-+ | |
+-+            +-+            +-+&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;JMS request goes from A to B to C and the reply back from C to B to A.&lt;/p&gt;

&lt;p&gt;A useMessageIDAsCorrelationID=false&lt;br/&gt;
 B useMessageIDAsCorrelationID=true&lt;br/&gt;
 C useMessageIDAsCorrelationID=false&lt;/p&gt;

&lt;p&gt;The JMSCorrelationID assigned by A is passed along to C via Camel message headers when useMessageIDAsCorrelationID is set on B&apos;s request. B is expecting the JMSMessageID to be used as JMSCorrelationID on the reply but since the JMSCorrelationID is actually provided, C could decide to give precedence to the JMSCorrelationID rendering B&apos;s message selector to not match.&lt;/p&gt;

&lt;p&gt;The only case this would work as expected is when C is also set to useMessageIDAsCorrelationID to always prefer the JMSMessageID. But consider situations where C is not under your control and/or implemented in a different technology than Camel.&lt;/p&gt;

&lt;p&gt;I&apos;d argue the JMSCorrelationID should be made &lt;em&gt;null&lt;/em&gt; when the useMessageIDAsCorrelationID is set on a provider.&lt;/p&gt;

&lt;p&gt;I&apos;ve created an example project to demonstrate the behavior:&#160;&lt;a href=&quot;https://github.com/alvinkwekel/camel-example-jmscorrelationid&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/alvinkwekel/camel-example-jmscorrelationid&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This issue seems to be closely related to &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-2249&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/CAMEL-2249&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13245205">CAMEL-13750</key>
            <summary>Incoming JMSCorrelationID is passed along when useMessageIDAsCorrelationID</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="acosentino">Andrea Cosentino</assignee>
                                    <reporter username="alvinkwekel@gmail.com">Alvin Kwekel</reporter>
                        <labels>
                    </labels>
                <created>Tue, 16 Jul 2019 12:21:20 +0000</created>
                <updated>Fri, 8 Nov 2019 09:52:51 +0000</updated>
                            <resolved>Fri, 19 Jul 2019 08:39:53 +0000</resolved>
                                    <version>2.24.1</version>
                                    <fixVersion>2.23.4</fixVersion>
                    <fixVersion>2.24.2</fixVersion>
                    <fixVersion>3.0.0.RC1</fixVersion>
                    <fixVersion>3.0.0</fixVersion>
                    <fixVersion>2.25.0</fixVersion>
                                    <component>camel-activemq</component>
                    <component>camel-jms</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>4</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="2400">40m</timespent>
                                <comments>
                            <comment id="16887305" author="davsclaus" created="Wed, 17 Jul 2019 18:19:07 +0000"  >&lt;p&gt;The idea of this feature is not to mix and match the setting, but was for some brokers like WebSphereMQ back then had issues and you could turn on to use an alternative correlation id.&lt;/p&gt;

&lt;p&gt;Maybe in your use-case/situation you can set custom correlation IDs that works with your mixed set of brokers and this scenario.&lt;/p&gt;

&lt;p&gt;You are of course welcome to dive into the source code and see if you can improve the code, but at this points this ticket is likely not a priority in this community at the moment. Others are of course to VOTE on the jira ticket and comment too.&lt;/p&gt;</comment>
                            <comment id="16887310" author="davsclaus" created="Wed, 17 Jul 2019 18:27:36 +0000"  >&lt;p&gt;Also on B you can try to remove the existing JMSCorrelationID before sending to C&lt;/p&gt;</comment>
                            <comment id="16887766" author="alvinkwekel@gmail.com" created="Thu, 18 Jul 2019 08:55:36 +0000"  >&lt;p&gt;Our current workaround is indeed to remove the JMSCorrelationID from the Camel message using removeHeader in the routes.&lt;/p&gt;

&lt;p&gt;I&#8217;ll see if I can create a patch to let the useMessageIDAsCorrelationID play nice in a heterogeneous landscape.&lt;/p&gt;</comment>
                            <comment id="16888010" author="alvinkwekel@gmail.com" created="Thu, 18 Jul 2019 14:04:23 +0000"  >&lt;p&gt;I&apos;ve submitted a PR &lt;a href=&quot;https://github.com/apache/camel/pull/3049&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;3049&lt;/a&gt;. Let me know what you think.&lt;/p&gt;</comment>
                            <comment id="16890012" author="alvinkwekel@gmail.com" created="Mon, 22 Jul 2019 08:56:19 +0000"  >&lt;p&gt;Thanks for accepting the fix. Would it be possible to merge this into 2.24.x?&lt;/p&gt;</comment>
                            <comment id="16890014" author="ancosen" created="Mon, 22 Jul 2019 08:59:05 +0000"  >&lt;p&gt;Yes, I think so on 2.x, 2.24.x and 2.23.x&#160;&lt;/p&gt;</comment>
                            <comment id="16892625" author="alvinkwekel@gmail.com" created="Thu, 25 Jul 2019 10:19:28 +0000"  >&lt;p&gt;I&apos;ve created a backport PR for 2.x.&#160;&lt;a href=&quot;https://github.com/apache/camel/pull/3061&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/3061&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16892627" author="ancosen" created="Thu, 25 Jul 2019 10:21:13 +0000"  >&lt;p&gt;Yes, I forgot about it.. Sorry &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=alvinkwekel%40gmail.com&quot; class=&quot;user-hover&quot; rel=&quot;alvinkwekel@gmail.com&quot;&gt;alvinkwekel@gmail.com&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16970004" author="ancosen" created="Fri, 8 Nov 2019 09:47:39 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jbonofre&quot; class=&quot;user-hover&quot; rel=&quot;jbonofre&quot;&gt;jbonofre&lt;/a&gt;Onofr&#233; why did you re-assign this?&lt;/p&gt;</comment>
                            <comment id="16970008" author="jbonofre" created="Fri, 8 Nov 2019 09:52:31 +0000"  >&lt;p&gt;A mistake, I was about to reopen it, but I finally create a new Jira. I&apos;m reassigning.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13267060">CAMEL-14156</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10063"><![CDATA[Advanced]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 1 week, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z04pts:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>