<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 09:41:37 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-3186] @EndpointInject not working in bean created by blueprint</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-3186</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;I am attaching a small test project that uses blueprint to create a camel context and a bean named Producer.  This project builds an OSGi bundle that I am deploying in FUSE ESB 4.3.0-fuse-01-00.  The Producer bean has an @EndpointInject annotation on a ProducerTemplate:&lt;/p&gt;

&lt;p&gt;	@EndpointInject(ref = &quot;testEndpoint&quot;)&lt;br/&gt;
	private ProducerTemplate testEndpoint;&lt;/p&gt;

&lt;p&gt;The Producer bean&apos;s init method sets a timer that tries to call testEndpoint.sendBody() once per second.  This throws a null pointer exception because the testEndpoint did not get injected:&lt;/p&gt;

&lt;p&gt;07:35:31,826 | WARN  | Producer         | Producer                         | org.aaron.camel.Producer           51 | 118 - org.aaron.camel - 1.0.0.SNAPSHOT | send exception&lt;br/&gt;
java.lang.NullPointerException&lt;br/&gt;
        at org.aaron.camel.Producer.timerPop(Producer.java:48)&lt;span class=&quot;error&quot;&gt;&amp;#91;118:org.aaron.camel:1.0.0.SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.aaron.camel.Producer.access$000(Producer.java:11)&lt;span class=&quot;error&quot;&gt;&amp;#91;118:org.aaron.camel:1.0.0.SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at org.aaron.camel.Producer$1.run(Producer.java:29)&lt;span class=&quot;error&quot;&gt;&amp;#91;118:org.aaron.camel:1.0.0.SNAPSHOT&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.util.TimerThread.mainLoop(Timer.java:512)&lt;span class=&quot;error&quot;&gt;&amp;#91;:1.6.0_21&amp;#93;&lt;/span&gt;&lt;br/&gt;
        at java.util.TimerThread.run(Timer.java:462)&lt;span class=&quot;error&quot;&gt;&amp;#91;:1.6.0_21&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;This same test works perfectly if I use Spring DM to create the camel context and Producer bean.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Ubuntu Linux 10.04, Sun JDK 1.6.0_21&lt;/p&gt;</environment>
        <key id="12487543">CAMEL-3186</key>
            <summary>@EndpointInject not working in bean created by blueprint</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="gnodet">Guillaume Nodet</assignee>
                                    <reporter username="ariekenb">Aaron Riekenberg</reporter>
                        <labels>
                    </labels>
                <created>Fri, 1 Oct 2010 12:42:08 +0000</created>
                <updated>Sun, 24 Apr 2011 09:58:15 +0000</updated>
                            <resolved>Wed, 8 Dec 2010 13:28:02 +0000</resolved>
                                    <version>2.4.0</version>
                                    <fixVersion>2.6.0</fixVersion>
                                    <component>camel-blueprint</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12957059" author="ariekenb" created="Fri, 1 Oct 2010 12:42:37 +0000"  >&lt;p&gt;Test project.&lt;/p&gt;</comment>
                            <comment id="12957060" author="davsclaus" created="Fri, 1 Oct 2010 13:06:50 +0000"  >&lt;p&gt;See&lt;br/&gt;
&lt;a href=&quot;http://fusesource.com/forums/thread.jspa?threadID=2278&amp;amp;tstart=0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://fusesource.com/forums/thread.jspa?threadID=2278&amp;amp;tstart=0&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12957037" author="davsclaus" created="Sun, 3 Oct 2010 06:51:14 +0000"  >&lt;p&gt;Get in touch with gnodet what feature OSGi provides for IoC stuff which you need to hook into. &lt;/p&gt;

&lt;p&gt;You should leverage &lt;tt&gt;org.apache.camel.impl.CamelPostProcessorHelper&lt;/tt&gt; from camel-core. Just as the spring stuff do in camel-spring.&lt;/p&gt;</comment>
                            <comment id="12956993" author="gnt" created="Mon, 4 Oct 2010 07:02:57 +0000"  >&lt;p&gt;This is one of the few limitations of the blueprint stuff right now, but i think it should be fixed.&lt;br/&gt;
You need to uncomment line 99 of the blueprint CamelContextFactoryBean:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;@XmlElement(name = &lt;span class=&quot;code-quote&quot;&gt;&quot;beanPostProcessor&quot;&lt;/span&gt;, type = CamelBeanPostProcessor.class, required = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;),
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So you need to create the appropriate CamelBeanPostProcessor class in the blueprint module.&lt;br/&gt;
To define a processor using Aries Blueprint, you need to have the class implement the org.apache.aries.blueprint.BeanProcessor interface and make sure the associated ExtendedBeanMetadata#isProcessor() returns true (this flag needs to be set in the namespace handler).&lt;/p&gt;

&lt;p&gt;When that&apos;s done, you should be able to intercept bean creation / destruction events from the processor and do what&apos;s needed.&lt;/p&gt;</comment>
                            <comment id="12957167" author="njiang" created="Thu, 21 Oct 2010 13:35:33 +0000"  >&lt;p&gt;@Guillaume&lt;br/&gt;
I didn&apos;t find a way to associate my BeanProcessor with the ExtendedBeanMetadata.&lt;br/&gt;
Can you show me some code snippet for it ?&lt;/p&gt;</comment>
                            <comment id="12957160" author="gnt" created="Thu, 21 Oct 2010 14:02:10 +0000"  >&lt;p&gt;Once you have your processor, you need to register the blueprint metadata.&lt;br/&gt;
You can find an example in the decorateManagedProperties method  at &lt;a href=&quot;http://svn.apache.org/repos/asf/incubator/aries/trunk/blueprint/blueprint-cm/src/main/java/org/apache/aries/blueprint/compendium/cm/CmNamespaceHandler.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/repos/asf/incubator/aries/trunk/blueprint/blueprint-cm/src/main/java/org/apache/aries/blueprint/compendium/cm/CmNamespaceHandler.java&lt;/a&gt;&lt;br/&gt;
Note the call to metadata.setProcessor(true);&lt;/p&gt;</comment>
                            <comment id="12969300" author="gnt" created="Wed, 8 Dec 2010 13:28:02 +0000"  >&lt;p&gt;Committing to &lt;a href=&quot;https://svn.apache.org/repos/asf/camel/trunk&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/repos/asf/camel/trunk&lt;/a&gt; ...&lt;br/&gt;
	C	components/camel-core-xml/src/main/java/org/apache/camel/core/xml/AbstractCamelConsumerTemplateFactoryBean.java =&amp;gt; components/camel-core-xml/src/main/java/org/apache/camel/core/xml/AbstractCamelFactoryBean.java&lt;br/&gt;
	M	components/camel-blueprint/src/main/java/org/apache/camel/blueprint/BlueprintContainerRegistry.java&lt;br/&gt;
	M	components/camel-blueprint/src/main/java/org/apache/camel/blueprint/handler/CamelNamespaceHandler.java&lt;br/&gt;
	M	components/camel-core-xml/src/main/java/org/apache/camel/core/xml/AbstractCamelConsumerTemplateFactoryBean.java&lt;br/&gt;
	M	components/camel-core-xml/src/main/java/org/apache/camel/core/xml/AbstractCamelEndpointFactoryBean.java&lt;br/&gt;
	M	components/camel-core-xml/src/main/java/org/apache/camel/core/xml/AbstractCamelProducerTemplateFactoryBean.java&lt;br/&gt;
	M	components/camel-core-xml/src/main/java/org/apache/camel/core/xml/AbstractCamelThreadPoolFactoryBean.java&lt;br/&gt;
	M	tests/camel-itest-osgi/src/test/java/org/apache/camel/itest/osgi/blueprint/OSGiBlueprintTestSupport.java&lt;br/&gt;
	A	tests/camel-itest-osgi/src/test/java/org/apache/camel/itest/osgi/blueprint/TestProducer.java&lt;br/&gt;
	A	tests/camel-itest-osgi/src/test/resources/org/apache/camel/itest/osgi/blueprint/blueprint-10.xml&lt;br/&gt;
Committed r1043407&lt;/p&gt;</comment>
                            <comment id="13024115" author="davsclaus" created="Sun, 24 Apr 2011 09:58:15 +0000"  >&lt;p&gt;Closing all resolved tickets from 2010 or older&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12463406" name="camel-blueprint-test.tar.gz" size="2154" author="ariekenb" created="Fri, 1 Oct 2010 12:42:37 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>76323</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 31 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i01t6v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>8498</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>