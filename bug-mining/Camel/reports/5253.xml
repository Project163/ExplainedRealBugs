<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:40:52 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-14739] RouteContext missing for RedeliveryErrorHandler</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-14739</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;The&#160;RedeliveryErrorHandler needs the RouteContext to determine which onException rule to use.&lt;/p&gt;

&lt;p&gt;The RouteContext is set at the start of a route, when leaving a route the RouteContext should be set to the route that called it. However it is apparently null, which means that if an error happens at that point it cannot use the onException rules that have been set.&lt;/p&gt;

&lt;p&gt;In 3.0 the RouteContext was a stack so it kept track of all the routes that it passed, meaning automatically returned to the parent RouteContext value.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13292651">CAMEL-14739</key>
            <summary>RouteContext missing for RedeliveryErrorHandler</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="uncl">Nathan</reporter>
                        <labels>
                    </labels>
                <created>Thu, 19 Mar 2020 09:08:49 +0000</created>
                <updated>Wed, 25 Mar 2020 10:04:40 +0000</updated>
                            <resolved>Wed, 25 Mar 2020 10:04:40 +0000</resolved>
                                    <version>3.1.0</version>
                                    <fixVersion>3.2.0</fixVersion>
                    <fixVersion>3.1.1</fixVersion>
                                    <component>came-core</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17062409" author="davsclaus" created="Thu, 19 Mar 2020 09:47:50 +0000"  >&lt;p&gt;The route context is removed onwards. So if you have some sample project with error handling that now works differently, then put together a sample project and attach as zip or on github. And also try with 3.2 SNAPSHOT &lt;/p&gt;</comment>
                            <comment id="17062412" author="gnt" created="Thu, 19 Mar 2020 09:48:51 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=uncl&quot; class=&quot;user-hover&quot; rel=&quot;uncl&quot;&gt;uncl&lt;/a&gt; do you have a simple route setup to make it easier to test ?&lt;/p&gt;

&lt;p&gt;As &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davsclaus&quot; class=&quot;user-hover&quot; rel=&quot;davsclaus&quot;&gt;davsclaus&lt;/a&gt; indicated, the RouteContext has been removed in 3.2-SNAPSHOT, but there should still be the stack of &lt;tt&gt;Route}}s in the {{UnitOfWork&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="17062718" author="uncl" created="Thu, 19 Mar 2020 16:08:32 +0000"  >&lt;p&gt;I&apos;ve added an example with 3 rest operations to show the different cases, it took some extra time since the condition for which the bug happens is apparently not after a route call, but only after a route call that directs to another route call.&lt;/p&gt;</comment>
                            <comment id="17066443" author="davsclaus" created="Wed, 25 Mar 2020 06:57:08 +0000"  >&lt;p&gt;Thanks for the sample project. &lt;/p&gt;

&lt;p&gt;Reproduced and we see this WARN&lt;/p&gt;

&lt;p&gt;2020-03-25 07:55:46.758  WARN 2123 &amp;#8212; &lt;span class=&quot;error&quot;&gt;&amp;#91;nio-8080-exec-4&amp;#93;&lt;/span&gt; o.a.c.p.e.RedeliveryErrorHandler         : Cannot determine current route from Exchange with id: ID-davsclaus-pro-local-1585119287866-0-3, will fallback and use first error handler.&lt;/p&gt;</comment>
                            <comment id="17066444" author="davsclaus" created="Wed, 25 Mar 2020 06:57:23 +0000"  >&lt;p&gt;&#10095; curl &lt;a href=&quot;http://localhost:8080/camel/api/hello&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080/camel/api/hello&lt;/a&gt;&lt;br/&gt;
&quot;Hello world&quot;%                                                                                                                            &#10095; curl &lt;a href=&quot;http://localhost:8080/camel/api/helloError&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080/camel/api/helloError&lt;/a&gt;&lt;br/&gt;
&quot;general exception was properly handled&quot;%                                                                                                 &#10095; curl &lt;a href=&quot;http://localhost:8080/camel/api/helloBug&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080/camel/api/helloBug&lt;/a&gt;&lt;br/&gt;
&quot;random processing (should not be exposed)&quot;%&lt;/p&gt;</comment>
                            <comment id="17066541" author="davsclaus" created="Wed, 25 Mar 2020 09:12:29 +0000"  >&lt;p&gt;Okay pushed an unit test to camel-core so we can use that to track down the bug&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/camel/commit/c75ab25edb27e99565faf9891e2766f438392b5d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/commit/c75ab25edb27e99565faf9891e2766f438392b5d&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17066567" author="davsclaus" created="Wed, 25 Mar 2020 10:04:40 +0000"  >&lt;p&gt;Thanks for reporting, and the sample project.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12997137" name="camel-error-test.zip" size="5376" author="uncl" created="Thu, 19 Mar 2020 16:06:26 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 34 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0cow8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>