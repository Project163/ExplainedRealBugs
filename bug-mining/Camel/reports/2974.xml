<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:05:31 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-7978] QuartzEndpoint should share the same camel context name when it working in cluster mode</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-7978</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;It could cause &lt;a href=&quot;http://camel.465427.n5.nabble.com/Quartz-job-data-deletion-in-clustered-quartz2-tp5757508.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;some trouble&lt;/a&gt; when camel-quartz endpoints is  share different camel context name.&lt;/p&gt;

&lt;p&gt;We can add an option in the QuartzEndpoint to use CamelContext Name instead of management name.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12751025">CAMEL-7978</key>
            <summary>QuartzEndpoint should share the same camel context name when it working in cluster mode</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="njiang">Willem Jiang</assignee>
                                    <reporter username="njiang">Willem Jiang</reporter>
                        <labels>
                    </labels>
                <created>Tue, 28 Oct 2014 08:24:04 +0000</created>
                <updated>Wed, 22 Apr 2015 14:18:39 +0000</updated>
                            <resolved>Wed, 22 Apr 2015 14:18:39 +0000</resolved>
                                    <version>2.13.2</version>
                    <version>2.14.0</version>
                                    <fixVersion>2.15.0</fixVersion>
                                    <component>camel-quartz</component>
                    <component>camel-quartz2</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14204480" author="lakshmi.prashant" created="Mon, 10 Nov 2014 07:57:48 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;  Can you also fix another issue with clustered quartz - when the quartz2 endpoints from 2 nodes try to create the job detail in DB, an ObjectAlreadyExists exception is thrown - leading to misfires. Can we handle the above exception as below:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; void addJobInScheduler() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        &lt;span class=&quot;code-comment&quot;&gt;// Add or use existing trigger to/from scheduler
&lt;/span&gt;        Scheduler scheduler = getComponent().getScheduler();
        JobDetail jobDetail;
        Trigger trigger = scheduler.getTrigger(triggerKey);
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (trigger == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
            jobDetail = createJobDetail();
            trigger = createTrigger(jobDetail);

            updateJobDataMap(jobDetail);

            &lt;span class=&quot;code-comment&quot;&gt;// Schedule it now. Remember that scheduler might not be started it, but we can schedule now.
&lt;/span&gt;            &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt;{
	            Date nextFireDate = scheduler.scheduleJob(jobDetail, trigger);
	            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (LOG.isInfoEnabled()) {
	                LOG.info(&lt;span class=&quot;code-quote&quot;&gt;&quot;Job {} (triggerType={}, jobClass={}) is scheduled. Next fire date is {}&quot;&lt;/span&gt;,
	                         &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;[] {trigger.getKey(), trigger.getClass().getSimpleName(),
	                                       jobDetail.getJobClass().getSimpleName(), nextFireDate});
	            }
            }
            &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt;(ObjectAlreadyExistsException e){
            	&lt;span class=&quot;code-comment&quot;&gt;//some other VM might may have stored the job &amp;amp; trigger in DB in clustered mode, in the mean time
&lt;/span&gt;            	&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(!(getComponent().isClustered())){            		
            		&lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; e;
            	}
             }
        } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
            ensureNoDupTriggerKey();
        }

        &lt;span class=&quot;code-comment&quot;&gt;// Increase camel job count &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; endpoint
&lt;/span&gt;        AtomicInteger number = (AtomicInteger) scheduler.getContext().get(QuartzConstants.QUARTZ_CAMEL_JOBS_COUNT);
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (number != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
            number.incrementAndGet();
        }

        jobAdded.set(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;);
    }

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
Lakshmi&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 2 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i21nq7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>