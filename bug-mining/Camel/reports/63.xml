<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 09:25:12 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-279] BeanProcessor permanently sets METHOD_NAME header</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-279</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;Issue described here: &lt;a href=&quot;http://www.nabble.com/BeanProcessor-multiple-method-invocation-on-same-bean-to14506245s22882.html#a14506245&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.nabble.com/BeanProcessor-multiple-method-invocation-on-same-bean-to14506245s22882.html#a14506245&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12485036">CAMEL-279</key>
            <summary>BeanProcessor permanently sets METHOD_NAME header</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hadrian">Hadrian Zbarcea</assignee>
                                    <reporter username="romkal">Roman Kalukiewicz</reporter>
                        <labels>
                    </labels>
                <created>Thu, 27 Dec 2007 10:45:18 +0000</created>
                <updated>Mon, 12 May 2008 12:45:30 +0000</updated>
                            <resolved>Sun, 10 Feb 2008 01:55:03 +0000</resolved>
                                                    <fixVersion>1.3.0</fixVersion>
                                    <component>camel-core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12945583" author="njiang" created="Thu, 17 Jan 2008 06:30:29 +0000"  >&lt;p&gt;Applied the patch with thanks to Roman.&lt;/p&gt;</comment>
                            <comment id="12945899" author="jstrachan" created="Fri, 18 Jan 2008 09:39:16 +0000"  >&lt;p&gt;I was wondering if a neater solution would be that whenever we use code like this...&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;beanRef(&lt;span class=&quot;code-quote&quot;&gt;&quot;someBeanName&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;someMethodName&quot;&lt;/span&gt;)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;that we always use that method name - and ignore the header thats on the message. i.e. if someone really wants a &lt;b&gt;foo&lt;/b&gt; method to be called in the DSL, we shouldn&apos;t magically call some other method just because there&apos;s a header (from maybe a previous message exchange or something).&lt;/p&gt;

&lt;p&gt;Thoughts?&lt;/p&gt;</comment>
                            <comment id="12945599" author="njiang" created="Sun, 20 Jan 2008 05:38:20 +0000"  >&lt;p&gt;Hi James, &lt;/p&gt;

&lt;p&gt;I agree with you and  just did a quick fix for this , it will be committed soon.&lt;/p&gt;

&lt;p&gt;Willem.&lt;/p&gt;</comment>
                            <comment id="12945629" author="romkal" created="Sun, 20 Jan 2008 10:08:50 +0000"  >&lt;p&gt;Hello Guys!&lt;/p&gt;

&lt;p&gt;Didn&apos;t we just came back to the very beginning of the issue with the patch that was applied?&lt;br/&gt;
Because now we explicitly set the &lt;tt&gt;METHOD_NAME&lt;/tt&gt; header in &lt;tt&gt;BeanProcessor&lt;/tt&gt; so it affects further invocations and clears the current value of the header (title of this issue &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; ).&lt;/p&gt;

&lt;p&gt;I agree with James that we should use the method name provided, but&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;setHeader(METHOD_NAME, constant(&lt;span class=&quot;code-quote&quot;&gt;&quot;bar&quot;&lt;/span&gt;)
.beanRef(&lt;span class=&quot;code-quote&quot;&gt;&quot;someBeanName&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;foo&quot;&lt;/span&gt;)
.beanRef(&lt;span class=&quot;code-quote&quot;&gt;&quot;someBeanName&quot;&lt;/span&gt;)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;should result (I think) with &lt;tt&gt;foo()&lt;/tt&gt; invocation and then &lt;tt&gt;bar()&lt;/tt&gt; (from header) while now the header seems to be overridden.&lt;/p&gt;

&lt;p&gt;BTW I don&apos;t have any access to java on the computer I&apos;m using right now, so it is hard to test it. If I&apos;m wrong - just ignore it. I&apos;m just looking at the mail that describes the latest commit.&lt;/p&gt;</comment>
                            <comment id="12945681" author="njiang" created="Mon, 21 Jan 2008 03:41:08 +0000"  >&lt;p&gt;Hi Roman,&lt;/p&gt;

&lt;p&gt;I think there are lots of place can change the Message header  (the sender or the processor).&lt;br/&gt;
If you treat the DSL rule as the first class citizen in camel , I think we need to let DSL override the message Header&apos;s METHOD_NAME.&lt;/p&gt;

&lt;p&gt;Any thoughts?&lt;/p&gt;
</comment>
                            <comment id="12946330" author="romkal" created="Mon, 21 Jan 2008 16:46:51 +0000"  >&lt;p&gt;I agree on the fact, that DSL could modify some header, and there is nothing wrong about it. I just think, that in a case I presented in my comment it shouldn&apos;t.&lt;/p&gt;

&lt;p&gt;the question is: what is the intended behavior of&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;beanRef(&lt;span class=&quot;code-quote&quot;&gt;&quot;someBean&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;fooMethod&quot;&lt;/span&gt;)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I think, that it is &apos;execute &lt;tt&gt;fooMethod()&lt;/tt&gt; on &lt;tt&gt;someBean&lt;/tt&gt; (and doesn&apos;t change current &lt;tt&gt;METHOD_NAME&lt;/tt&gt; header)&apos;, while it is not &apos;execute &lt;tt&gt;fooMethod()&lt;/tt&gt; and overwrite &lt;tt&gt;METHOD_NAME&lt;/tt&gt; so all next invocations will execute &lt;tt&gt;fooMethod()&lt;/tt&gt;&apos;.&lt;/p&gt;

&lt;p&gt;Maybe it is my misunderstanding of the concept, but I believe, that from external point of view &lt;tt&gt;BeanProcessor&lt;/tt&gt; shouldn&apos;t change &lt;tt&gt;METHOD_NAME&lt;/tt&gt; header.&lt;/p&gt;

&lt;p&gt;I assume that internally it could change this header, but I can imagine a bean that tries to use &lt;tt&gt;@Header(METHOD_NAME)&lt;/tt&gt; annotation - should it be given it&apos;s own method name, or original value of &lt;tt&gt;METHOD_NAME&lt;/tt&gt; header? I believe that the second answer is &apos;more&apos; correct (but I&apos;m not 100% convinced).&lt;/p&gt;

&lt;p&gt;What I describe is only my thoughts - if we assume that it should work the way it does now, then let&apos;s document it and we are done. I just think, that it is not working in a way I would expect it to.&lt;/p&gt;</comment>
                            <comment id="12946338" author="hadrian" created="Sat, 9 Feb 2008 03:10:28 +0000"  >&lt;p&gt;I think Roman&apos;s right.  The effects of an invocation &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;beanRef(&lt;span class=&quot;code-quote&quot;&gt;&quot;someBeanName&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;someMethodName&quot;&lt;/span&gt;).
beanRef(&lt;span class=&quot;code-quote&quot;&gt;&quot;someBeanName&quot;&lt;/span&gt;)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;should not extend beyond its scope.  For the second call one should either explicitly define the method to be invoked or to rely on the request made by the caller via the METHOD_NAME header.  I updated the code to reflect this behavior.&lt;/p&gt;</comment>
                            <comment id="12946317" author="hadrian" created="Sat, 9 Feb 2008 03:11:37 +0000"  >&lt;p&gt;Roman, before I close this bug, could you please grant Apache license for inclusion of your patch (which Willem already applied).  Thanks!&lt;/p&gt;</comment>
                            <comment id="12945736" author="romkal" created="Sat, 9 Feb 2008 21:13:20 +0000"  >&lt;p&gt;License granted.&lt;/p&gt;

&lt;p&gt;But have in mind that this patch is my original proposal. It &lt;b&gt;always&lt;/b&gt; looks at the &lt;tt&gt;METHOD_NAME&lt;/tt&gt; header, while it should look there only if there is no method explicitily specified on an endpoint (see James comment at the very beginning)&lt;/p&gt;</comment>
                            <comment id="12945854" author="hadrian" created="Sun, 10 Feb 2008 01:54:47 +0000"  >&lt;p&gt;Roman, I was aware of that, thanks for pointing it out.  Camel already behaves and James suggested.  My last patch addresses your comment that there should be no side effects if a method name is explicitly defined as per James&apos; comment.  Please see my comment above.  I think this issue can now be closed to everybody&apos;s satisfaction.&lt;/p&gt;</comment>
                            <comment id="12947108" author="davsclaus" created="Mon, 12 May 2008 12:45:30 +0000"  >&lt;p&gt;Closed all 1.3 tickets&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12462441" name="bean-processor.patch" size="4801" author="romkal" created="Sat, 9 Feb 2008 21:13:20 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>38735</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 years, 29 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i01b93:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5592</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>