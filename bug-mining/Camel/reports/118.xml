<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 09:25:53 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-420] FTPComponent - problems and improvements</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-420</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;See this forum:&lt;br/&gt;
&lt;a href=&quot;http://www.nabble.com/FTP-to-FILE-td16354813s22882.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.nabble.com/FTP-to-FILE-td16354813s22882.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Problems:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Using ASCII you need to use convertBodyTo(String.class) to let it work out of the box &lt;b&gt;Fixed&lt;/b&gt;&lt;/li&gt;
	&lt;li&gt;Using BINARY we need some Type Converters to let it consume files from a FTP Server and store it as a File &lt;b&gt;Fixed&lt;/b&gt;&lt;/li&gt;
	&lt;li&gt;You have to set the filename using the header in the configuration otherwise the filename can be wrong &lt;b&gt;Fixed&lt;/b&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="12485080">CAMEL-420</key>
            <summary>FTPComponent - problems and improvements</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="davsclaus">Claus Ibsen</reporter>
                        <labels>
                    </labels>
                <created>Tue, 1 Apr 2008 11:46:17 +0000</created>
                <updated>Mon, 12 May 2008 07:46:39 +0000</updated>
                            <resolved>Sat, 12 Apr 2008 14:32:51 +0000</resolved>
                                    <version>1.3.0</version>
                                    <fixVersion>1.4.0</fixVersion>
                                    <component>camel-ftp</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                                                            <comments>
                            <comment id="12946660" author="davsclaus" created="Tue, 1 Apr 2008 11:47:53 +0000"  >&lt;p&gt;The binary transfer type could also be a problem.&lt;/p&gt;</comment>
                            <comment id="12946667" author="davsclaus" created="Wed, 2 Apr 2008 05:01:14 +0000"  >&lt;p&gt;The binary is failing out-of-the-box as we do not provide type converters. I got it working now with binary files.&lt;/p&gt;</comment>
                            <comment id="12946688" author="davsclaus" created="Wed, 2 Apr 2008 05:03:02 +0000"  >&lt;p&gt;Does camel FTP support using the remote FTP filename to use as filename when writing to a file if not configured to a fixed filename using the header propery&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;                &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; fileUrl = &lt;span class=&quot;code-quote&quot;&gt;&quot;file:target/ftptest/?noop=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&quot;&lt;/span&gt;;
                from(ftpUrl).setHeader(FileComponent.HEADER_FILE_NAME, constant(&lt;span class=&quot;code-quote&quot;&gt;&quot;deleteme.jpg&quot;&lt;/span&gt;)).
                        to(fileUrl, &lt;span class=&quot;code-quote&quot;&gt;&quot;mock:result&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Does it work with the setHeader? And use the remote filename from the FTP Server?&lt;/p&gt;

&lt;p&gt;No it does not: camel tries to store the file using concatted filename as:&lt;br/&gt;
java.io.FileNotFoundException: target\ftptest\localhost:\tmp4\camel\logo.jpeg (The filename, directory name, or volume label syntax is incorrect) &lt;/p&gt;

&lt;p&gt;To culprint: FileProducer.createFileName(Message msg) is bogus. It does not handle remote filenames to well.&lt;/p&gt;</comment>
                            <comment id="12946694" author="davsclaus" created="Sun, 6 Apr 2008 09:02:46 +0000"  >&lt;p&gt;Comitted missing file converters to trunk so we can consume binary files (download binary files)&lt;/p&gt;</comment>
                            <comment id="12946727" author="davsclaus" created="Sun, 6 Apr 2008 13:33:13 +0000"  >&lt;p&gt;We are changing a default option on the FTPConsumer in Camel 1.4.&lt;/p&gt;

&lt;p&gt;Camel 1.3&lt;br/&gt;
setNames=false&lt;/p&gt;

&lt;p&gt;Camel 1.4&lt;br/&gt;
setNames=true&lt;/p&gt;


&lt;p&gt;The issue is tracked in &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-420&quot; title=&quot;FTPComponent - problems and improvements&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-420&quot;&gt;&lt;del&gt;CAMEL-420&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;


&lt;p&gt;The issue is that Camel in v1.3 or below does not default to use the filenames from the downloaded files from the FTP Server. So you as the end user have to explicity set a filename if you want to eg. store the downaloded file directly to a local file etc using the File component.&lt;/p&gt;

&lt;p&gt;An example (Camel 1.3)&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; fileUrl = &lt;span class=&quot;code-quote&quot;&gt;&quot;file:target/ftptest/?append=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&amp;amp;noop=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&quot;&lt;/span&gt;;
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; ftpUrl =
&lt;span class=&quot;code-quote&quot;&gt;&quot;ftp:&lt;span class=&quot;code-comment&quot;&gt;//admin@localhost:21/tmp3/camel?password=admin&amp;amp;binary=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&quot;&lt;/span&gt;;
&lt;/span&gt;
from(ftpUrl).setHeader(FileComponent.HEADER_FILE_NAME,
constant(&lt;span class=&quot;code-quote&quot;&gt;&quot;deleteme.txt&quot;&lt;/span&gt;)).
convertBodyTo(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;.class).to(fileUrl);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;In the example above we have to set an filename using the setHeader option with the special key FileComponent.HEADER_FILE_NAME&lt;/p&gt;

&lt;p&gt;If we just want to use the filename from the FTP Server we have to do this in Camel 1.3. Set the setNames option to true. So the ftpUrl is:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; ftpUrl =
&quot;ftp:&lt;span class=&quot;code-comment&quot;&gt;//admin@localhost:21/tmp3/camel?password=admin&amp;amp;binary=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&amp;amp;consume
&lt;/span&gt;r.setNames=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&quot;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;In Camel 1.4 the default value of consumer.setNames is true as opposed to false in Camel 1.3&lt;/p&gt;

&lt;p&gt;So in Camel 1.4 it works out of the box that Camel will use the filename from the FTP Server if you have not explicity set a new filename using the setHeader(FileComponent.HEADER_FILE_NAME, &quot;mynewfilename.txt&quot;)&lt;/p&gt;

&lt;p&gt;So the Camel 1.4 example is:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; fileUrl = &lt;span class=&quot;code-quote&quot;&gt;&quot;file:target/ftptest/?append=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&amp;amp;noop=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&quot;&lt;/span&gt;;
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; ftpUrl =
&lt;span class=&quot;code-quote&quot;&gt;&quot;ftp:&lt;span class=&quot;code-comment&quot;&gt;//admin@localhost:21/tmp3/camel?password=admin&amp;amp;binary=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&quot;&lt;/span&gt;;
&lt;/span&gt;
from(ftpUrl).convertBodyTo(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;.class).to(fileUrl);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12946579" author="davsclaus" created="Mon, 7 Apr 2008 08:12:52 +0000"  >&lt;p&gt;Fix failing unit test on Bamboo&lt;/p&gt;</comment>
                            <comment id="12946783" author="davsclaus" created="Sat, 12 Apr 2008 14:32:51 +0000"  >&lt;p&gt;Most of the major problems is fixed now.&lt;/p&gt;

&lt;p&gt;Unit test for the SFTP part would be nice but it requires some mocking as we do not have a SFTP java server at the moment.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                            <subtask id="12485150">CAMEL-444</subtask>
                            <subtask id="12485287">CAMEL-424</subtask>
                            <subtask id="12485207">CAMEL-445</subtask>
                            <subtask id="12485157">CAMEL-443</subtask>
                            <subtask id="12485196">CAMEL-446</subtask>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>83232</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 years, 33 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i01c4f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>5733</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>