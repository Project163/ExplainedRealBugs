<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 09:44:55 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-4076] FileIdempotentRepository fileStore does not get loaded on bootrapping, therefore files are processed again</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-4076</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;I am using JVM based initialization of Camel using Spring.&lt;br/&gt;
I use the documented Camel initialization procedure of main.setApplicationContext(&quot;my-spring-camel-config.xml&quot;);&lt;br/&gt;
main.start()&lt;/p&gt;

&lt;p&gt;I also use the documented FileIdempotentRepository that points to a FileStore.&lt;br/&gt;
However, when Camel initializes this filestore is not loaded up. Hence, the LRU cache contained within this is empty.&lt;br/&gt;
As a result, all my files are FTPed again from the remote server.&lt;/p&gt;

&lt;p&gt;This happens everytime I start my JVM resulting in expensive FTP of files.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Win&lt;/p&gt;</environment>
        <key id="12509673">CAMEL-4076</key>
            <summary>FileIdempotentRepository fileStore does not get loaded on bootrapping, therefore files are processed again</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="adkathuria@yahoo.com">Anuj</reporter>
                        <labels>
                            <label>FileIdempotent</label>
                            <label>FileStore,</label>
                    </labels>
                <created>Thu, 9 Jun 2011 07:49:51 +0000</created>
                <updated>Tue, 25 Oct 2011 11:35:46 +0000</updated>
                            <resolved>Fri, 10 Jun 2011 10:02:29 +0000</resolved>
                                    <version>2.7.2</version>
                                    <fixVersion>2.7.3</fixVersion>
                    <fixVersion>2.8.0</fixVersion>
                                    <component>camel-core</component>
                    <component>camel-ftp</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13046380" author="davsclaus" created="Thu, 9 Jun 2011 08:01:52 +0000"  >&lt;p&gt;Can you attach your spring xml file with the camel routes and the file store definition.&lt;/p&gt;</comment>
                            <comment id="13046539" author="davsclaus" created="Thu, 9 Jun 2011 13:44:55 +0000"  >&lt;p&gt;Are you hot-deploying your application. I wonder if a restart may not cause Camel to recognize this and not load the store on the 2nd+ starts.&lt;/p&gt;</comment>
                            <comment id="13046638" author="adkathuria@yahoo.com" created="Thu, 9 Jun 2011 15:56:48 +0000"  >&lt;p&gt;BatchLoadDriver - is the main spring driver&lt;br/&gt;
FtpRouteBuilder - Builds the FTP route&lt;br/&gt;
Spring Config - registers the route&lt;/p&gt;

&lt;p&gt;On restart of the application, it does not read the &apos;.dat&apos; file, thereby downloading the files again&lt;/p&gt;</comment>
                            <comment id="13046640" author="adkathuria@yahoo.com" created="Thu, 9 Jun 2011 15:59:55 +0000"  >&lt;p&gt;Thanks for your reply. It is a simple Java program (please find attachments). It is not hot deployment, and the example is not container based, but a simple Java &apos;Main&apos; driver that starts the camel context via spring initialization&lt;/p&gt;</comment>
                            <comment id="13047102" author="davsclaus" created="Fri, 10 Jun 2011 09:33:19 +0000"  >&lt;p&gt;Thanks I got this fixed now.&lt;/p&gt;

&lt;p&gt;As a workaround in the &amp;lt;bean&amp;gt; tag you can use spring support for an init / destroy method and invoke doStart / doStop to load and stop the store.&lt;/p&gt;</comment>
                            <comment id="13047114" author="davsclaus" created="Fri, 10 Jun 2011 10:02:29 +0000"  >&lt;p&gt;Thanks for reporting. I have fixed it on trunk.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12481950" name="BatchLoadDriver.java" size="741" author="adkathuria@yahoo.com" created="Thu, 9 Jun 2011 15:56:48 +0000"/>
                            <attachment id="12481951" name="FtpRouteBuilder.java" size="998" author="adkathuria@yahoo.com" created="Thu, 9 Jun 2011 15:56:48 +0000"/>
                            <attachment id="12481952" name="InvokeWithProcessor.xml" size="2250" author="adkathuria@yahoo.com" created="Thu, 9 Jun 2011 15:56:48 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>13967</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 24 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i01ypb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9391</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>