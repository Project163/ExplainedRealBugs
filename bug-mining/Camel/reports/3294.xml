<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:09:46 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-8904] Breadcrumb ID changes when using netty4-http as a producer</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-8904</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;When using the &lt;tt&gt;netty4-http&lt;/tt&gt; component as a producer, the response from the remote server is processed in a different thread (&lt;tt&gt;... yClientTCPWorker&lt;/tt&gt;) than the start of the Camel route and thus the breadcrumb ID changes (because the MDC context changes/is lost).&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;2015-06-25 09:55:40,887 | INFO  | entExecutorGroup | pep-xds_b-repository             | 70 - org.apache.camel.camel-core - 2.14.1 | ID-ptl9921-45465-1435218175846-9-29  | Call to repository received.
-- remote call; the next line is logged after the response was received -- 
2015-06-25 09:55:41,155 | INFO  | yClientTCPWorker | AuditLogger                      | 168 - ch.vivates.ams.pep - 3.0.1.SNAPSHOT | ID-ptl9921-45465-1435218175846-9-33  | User id: ...
2015-06-25 09:55:41,171 | INFO  | EVENTS.USER.XDS] | route_xds_b-activity             | 70 - org.apache.camel.camel-core - 2.14.1 | ID-ptl9921-45465-1435218175846-9-33  | Logging XDS event: ...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In the example above the breadcrumb changes from &lt;tt&gt;ID-ptl9921-45465-1435218175846-9-29&lt;/tt&gt; to &lt;tt&gt;ID-ptl9921-45465-1435218175846-9-33&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;If I use http4 as the producer the breadcrumb is the same for all route steps. Presumably because the same thread executes all route steps. &lt;/p&gt;

&lt;p&gt;Route that reproduces the issue for me:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;route&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;from uri=&lt;span class=&quot;code-quote&quot;&gt;&quot;netty4-http:http://{{pep.host}}:{{pep.xds.b.repository.port}}/XDS3/repository?matchOnUriPrefix=true&amp;amp;amp;disableStreamCache=true&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;log message=&lt;span class=&quot;code-quote&quot;&gt;&quot;Call to repository received.&quot;&lt;/span&gt; loggingLevel=&lt;span class=&quot;code-quote&quot;&gt;&quot;INFO&quot;&lt;/span&gt; logName=&lt;span class=&quot;code-quote&quot;&gt;&quot;pep-xds_b-repository&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;process ref=&lt;span class=&quot;code-quote&quot;&gt;&quot;repositoryInboundProcessor&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;to uri=&lt;span class=&quot;code-quote&quot;&gt;&quot;netty4-http:http://{{xds.b.repository.host}}:{{xds.b.repository.port}}/XDS3/repository?bridgeEndpoint=true&amp;amp;amp;throwExceptionOnFailure=false&amp;amp;amp;disableStreamCache=true&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;process ref=&lt;span class=&quot;code-quote&quot;&gt;&quot;repositoryOutboundProcessor&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/route&amp;gt;&lt;/span&gt;

&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;onCompletion mode=&lt;span class=&quot;code-quote&quot;&gt;&quot;AfterConsumer&quot;&lt;/span&gt; parallelProcessing=&lt;span class=&quot;code-quote&quot;&gt;&quot;false&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;process ref=&lt;span class=&quot;code-quote&quot;&gt;&quot;forkJoinProcessor&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;bean ref=&lt;span class=&quot;code-quote&quot;&gt;&quot;auditLogger&quot;&lt;/span&gt; method=&lt;span class=&quot;code-quote&quot;&gt;&quot;localAuditXDS&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;bean ref=&lt;span class=&quot;code-quote&quot;&gt;&quot;auditLogger&quot;&lt;/span&gt; method=&lt;span class=&quot;code-quote&quot;&gt;&quot;createCommandUserLogXDS&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;setExchangePattern pattern=&lt;span class=&quot;code-quote&quot;&gt;&quot;InOnly&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;
	&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;to uri=&lt;span class=&quot;code-quote&quot;&gt;&quot;activemq:queue:{{activemq.queue.events.user.xds}}&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/onCompletion&amp;gt;&lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The &lt;tt&gt;repositoryOutboundProcessor&lt;/tt&gt; and the &lt;tt&gt;onCompletion&lt;/tt&gt; parts log a different breadcrumb (and thread name) than the beginning of the route before the &lt;tt&gt;&amp;lt;to uri=&quot;netty4-http:http:// ...&lt;/tt&gt; step.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12840476">CAMEL-8904</key>
            <summary>Breadcrumb ID changes when using netty4-http as a producer</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="ralfsteppacher">Ralf Steppacher</reporter>
                        <labels>
                    </labels>
                <created>Thu, 25 Jun 2015 08:51:24 +0000</created>
                <updated>Fri, 3 Jul 2015 06:29:15 +0000</updated>
                            <resolved>Wed, 1 Jul 2015 07:40:27 +0000</resolved>
                                    <version>2.14.1</version>
                    <version>2.15.2</version>
                                                    <component>camel-netty4-http</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14604590" author="davsclaus" created="Sun, 28 Jun 2015 08:56:56 +0000"  >&lt;p&gt;Have you configured and enabled MDC logging? And is that what the fields is above?&lt;/p&gt;</comment>
                            <comment id="14604913" author="ralfsteppacher" created="Sun, 28 Jun 2015 20:54:57 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davsclaus&quot; class=&quot;user-hover&quot; rel=&quot;davsclaus&quot;&gt;davsclaus&lt;/a&gt;, yes, MDC logging is activated. The breadcrumb is logged in the 6th column. The executing thread is logged in the 3rd column.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 21 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ghbz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>