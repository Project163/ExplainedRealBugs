<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 11:08:42 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-21435] Commons-pool2: When Camel Netty configured with producerPoolMaxTotal=1 and retry, the application hangs</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-21435</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;Retry on the onException() clause seems to be impossible for producerPoolMaxTotal=1 (leads to call of GenericObjectPoolConfig.setMaxTotal())&lt;br/&gt;
This causes infinite hanging in case of network IO exceptions.&lt;br/&gt;
Netty attempts to utilize a new connection when the old one is still unreleased.&lt;br/&gt;
It boils down to method org.apache.commons.pool2.impl.GenericObjectPool::borrowObject(Duration borrowMaxWaitDuration) throws Exception {}&lt;br/&gt;
When producerPoolBlockWhenExhausted = true (the default value), the application hangs.&lt;br/&gt;
When producerPoolBlockWhenExhausted = false, I get an exception&#160;&lt;br/&gt;
2024-11-11 13:41:44 ERROR &lt;span class=&quot;error&quot;&gt;&amp;#91;com.opt.obp.ser.ada.cam.Logger&amp;#93;&lt;/span&gt; (Camel Thread #2 - NettyClientTCPWorker) &amp;lt;&amp;gt; Exception occurred: java.util.NoSuchElementException: Pool exhausted&#160;&lt;br/&gt;
So, either way it&apos;s impossible to serve&lt;/p&gt;</description>
                <environment></environment>
        <key id="13598394">CAMEL-21435</key>
            <summary>Commons-pool2: When Camel Netty configured with producerPoolMaxTotal=1 and retry, the application hangs</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="10008">Information Provided</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="dkryukov">Dmitrii Kriukov</reporter>
                        <labels>
                    </labels>
                <created>Mon, 11 Nov 2024 17:35:04 +0000</created>
                <updated>Wed, 13 Nov 2024 09:32:25 +0000</updated>
                            <resolved>Wed, 13 Nov 2024 09:20:48 +0000</resolved>
                                                    <fixVersion>4.9.0</fixVersion>
                                    <component>camel-netty</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17897243" author="davsclaus" created="Mon, 11 Nov 2024 17:58:42 +0000"  >&lt;p&gt;Then its a bad idea to use such low pool, set the value higher&lt;/p&gt;</comment>
                            <comment id="17897253" author="dkryukov" created="Mon, 11 Nov 2024 18:54:42 +0000"  >&lt;p&gt;Hi Claus,&lt;br/&gt;
it&apos;s a limitation imposed on us by the other side of data exchange.&lt;/p&gt;</comment>
                            <comment id="17897867" author="davsclaus" created="Wed, 13 Nov 2024 09:20:48 +0000"  >&lt;p&gt;Added a note for the docs about the danger of setting this value too low.&lt;/p&gt;</comment>
                            <comment id="17897869" author="davsclaus" created="Wed, 13 Nov 2024 09:32:25 +0000"  >&lt;p&gt;I would suggest you try to run with TRACE logging at&#160;&lt;br/&gt;
org.apache.camel.component.netty&lt;br/&gt;
&#160;&lt;br/&gt;
And then capture the logging activity what happens when you have the IO network error and how camel-netty is invalidating the pooled object and creating a fresh new.&lt;br/&gt;
This can maybe give hints if there is something that can be improved when the pool size is 1 vs having space in the pool.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1shsg:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>