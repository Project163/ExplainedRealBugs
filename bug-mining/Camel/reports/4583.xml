<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:30:30 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-12575] camel-cxfrs: NPE on GET request with Content-Type header</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-12575</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;This commit&#160; &lt;a href=&quot;https://github.com/apache/camel/commit/e4ad40f2eebb68cfde175b171538e26b278f63f6&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/commit/e4ad40f2eebb68cfde175b171538e26b278f63f6&lt;/a&gt;&#160;modified&#160;DefaultCxfRsBinding.populateCxfRsResponseFromExchange in a way that causes an NPE on line #116 when a GET request is made with the Content-Type header set. Since Camel copies the request headers into the response, this causes the check for Content-Type to find the header and the code after that assumes that cxfExchange.getOutMessage() is non-null.&lt;/p&gt;

&lt;p&gt;I can work around this by asking clients not to send the Content-Type header (which is generally meaningless for a GET), but I cannot force them not to send it. I think I can also add header filtering before the endpoint is executed to strip the Content-Type header for GET requests, but ideally DefaultCxfRsBinding.populateCxfRsResponseFromExchange would not call cxfExchange.getOutMessage().putIfAbsent if getOutMessage returns null.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13165641">CAMEL-12575</key>
            <summary>camel-cxfrs: NPE on GET request with Content-Type header</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ramu11">Ramu</assignee>
                                    <reporter username="chribble">Chris Ribble</reporter>
                        <labels>
                    </labels>
                <created>Tue, 12 Jun 2018 18:15:10 +0000</created>
                <updated>Wed, 1 Aug 2018 07:24:52 +0000</updated>
                            <resolved>Wed, 1 Aug 2018 07:24:52 +0000</resolved>
                                    <version>2.21.1</version>
                                    <fixVersion>2.21.3</fixVersion>
                    <fixVersion>2.22.1</fixVersion>
                    <fixVersion>2.23.0</fixVersion>
                                    <component>camel-cxfrs</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16515596" author="davsclaus" created="Mon, 18 Jun 2018 11:20:37 +0000"  >&lt;p&gt;Are you able to work on a PR / patch to help fix this?&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/camel/blob/master/CONTRIBUTING.md&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/blob/master/CONTRIBUTING.md&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16563553" author="githubbot" created="Tue, 31 Jul 2018 12:12:58 +0000"  >&lt;p&gt;ramu11 opened a new pull request #2446: &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12575&quot; title=&quot;camel-cxfrs: NPE on GET request with Content-Type header&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12575&quot;&gt;&lt;del&gt;CAMEL-12575&lt;/del&gt;&lt;/a&gt;:NPE on GET request with Content-Type header&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/camel/pull/2446&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2446&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12575&quot; title=&quot;camel-cxfrs: NPE on GET request with Content-Type header&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12575&quot;&gt;&lt;del&gt;CAMEL-12575&lt;/del&gt;&lt;/a&gt;:NPE on GET request with Content-Type header&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16563554" author="githubbot" created="Tue, 31 Jul 2018 12:12:58 +0000"  >&lt;p&gt;GitHub user ramu11 opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/2446&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2446&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12575&quot; title=&quot;camel-cxfrs: NPE on GET request with Content-Type header&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12575&quot;&gt;&lt;del&gt;CAMEL-12575&lt;/del&gt;&lt;/a&gt;:NPE on GET request with Content-Type header&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12575&quot; title=&quot;camel-cxfrs: NPE on GET request with Content-Type header&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12575&quot;&gt;&lt;del&gt;CAMEL-12575&lt;/del&gt;&lt;/a&gt;:NPE on GET request with Content-Type header&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/ramu11/camel&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/ramu11/camel&lt;/a&gt; master&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/2446.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2446.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #2446&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit f967f06d029a3ae8f008d13fbe8a392f1e5706d2&lt;br/&gt;
Author: Ramu &amp;lt;kkakarla@...&amp;gt;&lt;br/&gt;
Date:   2018-07-31T12:10:45Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12575&quot; title=&quot;camel-cxfrs: NPE on GET request with Content-Type header&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12575&quot;&gt;&lt;del&gt;CAMEL-12575&lt;/del&gt;&lt;/a&gt;:NPE on GET request with Content-Type header&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16563796" author="githubbot" created="Tue, 31 Jul 2018 14:58:48 +0000"  >&lt;p&gt;oscerd commented on issue #2446: &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12575&quot; title=&quot;camel-cxfrs: NPE on GET request with Content-Type header&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12575&quot;&gt;&lt;del&gt;CAMEL-12575&lt;/del&gt;&lt;/a&gt;:NPE on GET request with Content-Type header&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/camel/pull/2446#issuecomment-409252000&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2446#issuecomment-409252000&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   And maybe it would be good to use ObjectHelper too to check for null&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16564872" author="githubbot" created="Wed, 1 Aug 2018 07:24:32 +0000"  >&lt;p&gt;oscerd commented on issue #2446: &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12575&quot; title=&quot;camel-cxfrs: NPE on GET request with Content-Type header&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12575&quot;&gt;&lt;del&gt;CAMEL-12575&lt;/del&gt;&lt;/a&gt;:NPE on GET request with Content-Type header&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/camel/pull/2446#issuecomment-409476750&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2446#issuecomment-409476750&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Thanks, merged on master, 2.22.x and 2.21.x&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16564873" author="githubbot" created="Wed, 1 Aug 2018 07:24:35 +0000"  >&lt;p&gt;oscerd closed pull request #2446: &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12575&quot; title=&quot;camel-cxfrs: NPE on GET request with Content-Type header&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12575&quot;&gt;&lt;del&gt;CAMEL-12575&lt;/del&gt;&lt;/a&gt;:NPE on GET request with Content-Type header&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/camel/pull/2446&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2446&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/components/camel-cxf/src/main/java/org/apache/camel/component/cxf/jaxrs/DefaultCxfRsBinding.java b/components/camel-cxf/src/main/java/org/apache/camel/component/cxf/jaxrs/DefaultCxfRsBinding.java&lt;br/&gt;
index 0ecfd7b4972..1ae15e91fe3 100644&lt;br/&gt;
&amp;#8212; a/components/camel-cxf/src/main/java/org/apache/camel/component/cxf/jaxrs/DefaultCxfRsBinding.java&lt;br/&gt;
+++ b/components/camel-cxf/src/main/java/org/apache/camel/component/cxf/jaxrs/DefaultCxfRsBinding.java&lt;br/&gt;
@@ -40,6 +40,7 @@&lt;br/&gt;
 import org.apache.camel.spi.HeaderFilterStrategy;&lt;br/&gt;
 import org.apache.camel.spi.HeaderFilterStrategyAware;&lt;br/&gt;
 import org.apache.camel.util.ExchangeHelper;&lt;br/&gt;
+import org.apache.camel.util.ObjectHelper;&lt;br/&gt;
 import org.apache.cxf.helpers.CastUtils;&lt;br/&gt;
 import org.apache.cxf.helpers.HttpHeaderHelper;&lt;br/&gt;
 import org.apache.cxf.jaxrs.impl.MetadataMap;&lt;br/&gt;
@@ -92,8 +93,10 @@ public Object populateCxfRsResponseFromExchange(Exchange camelExchange,&lt;/p&gt;

&lt;p&gt;             if (response.getHeader(org.apache.cxf.message.Message.PROTOCOL_HEADERS) != null) {&lt;br/&gt;
                 Map&amp;lt;String, Object&amp;gt; headers = CastUtils.cast((Map&amp;lt;?, ?&amp;gt;)response.getHeader(org.apache.cxf.message.Message.PROTOCOL_HEADERS));&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;cxfExchange.getOutMessage().putIfAbsent(org.apache.cxf.message.Message.PROTOCOL_HEADERS,&lt;br/&gt;
+                if (!ObjectHelper.isEmpty(cxfExchange) &amp;amp;&amp;amp; !ObjectHelper.isEmpty(cxfExchange.getOutMessage())) 
{
+                    cxfExchange.getOutMessage().putIfAbsent(org.apache.cxf.message.Message.PROTOCOL_HEADERS, 
                                                         new TreeMap&amp;lt;&amp;gt;(String.CASE_INSENSITIVE_ORDER));
+                }&lt;br/&gt;
                 final Map&amp;lt;String, List&amp;lt;String&amp;gt;&amp;gt; cxfHeaders =&lt;br/&gt;
                     CastUtils.cast((Map&amp;lt;?, ?&amp;gt;) cxfExchange.getOutMessage().get(org.apache.cxf.message.Message.PROTOCOL_HEADERS));&lt;br/&gt;
                 &lt;br/&gt;
@@ -113,8 +116,10 @@ public Object populateCxfRsResponseFromExchange(Exchange camelExchange,&lt;br/&gt;
                 cxfExchange.put(org.apache.cxf.message.Message.RESPONSE_CODE, response.getHeader(Exchange.HTTP_RESPONSE_CODE, Integer.class));&lt;br/&gt;
             }&lt;br/&gt;
             if (response.getHeader(Exchange.CONTENT_TYPE) != null) {&lt;br/&gt;
-                cxfExchange.getOutMessage().putIfAbsent(org.apache.cxf.message.Message.PROTOCOL_HEADERS, &lt;br/&gt;
+                if (!ObjectHelper.isEmpty(cxfExchange) &amp;amp;&amp;amp; !ObjectHelper.isEmpty(cxfExchange.getOutMessage())) {+                    cxfExchange.getOutMessage().putIfAbsent(org.apache.cxf.message.Message.PROTOCOL_HEADERS,                                                          new TreeMap&amp;lt;&amp;gt;(String.CASE_INSENSITIVE_ORDER));+                }
&lt;p&gt;                 final Map&amp;lt;String, List&amp;lt;String&amp;gt;&amp;gt; cxfHeaders =&lt;br/&gt;
                     CastUtils.cast((Map&amp;lt;?, ?&amp;gt;) cxfExchange.getOutMessage().get(org.apache.cxf.message.Message.PROTOCOL_HEADERS));&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;






&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16564874" author="githubbot" created="Wed, 1 Aug 2018 07:24:36 +0000"  >&lt;p&gt;Github user oscerd closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/2446&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2446&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 16 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3us73:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>