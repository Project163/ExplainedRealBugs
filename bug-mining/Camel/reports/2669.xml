<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:01:50 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-7276] camel-quartz - use of management name to provide default scheduler name breaks context isolation</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-7276</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;When using the camel-quartz component in an unmanged context with multiple camel contexts, for example in a JUnit test case, causes the scheduler to be created with the instance name &quot;DefaultQuartzScheduler&quot; which is then shared across all camel context&apos;s within the same jvm.&lt;/p&gt;

&lt;p&gt;This is in contradiction of the previous behaviour that uses `getCamelContext.getName()` which isolates the scheduler by denoting that the default instance is specific to the camel context.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; org.apache.camel.component.quartz;

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.camel.CamelContext;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.camel.impl.DefaultCamelContext;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.camel.management.JmxSystemPropertyKeys;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.junit.Test;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.quartz.Scheduler;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.quartz.SchedulerException;

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; org.junit.Assert.assertNotEquals;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; org.junit.Assert.assertNotSame;

/**
 * Test regression of camel-context isolation of &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; scheduler instance introduced in CAMEL-7034.
 */
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;QuartzComponentCamelContextSchedulerIsolationTest {

  @Test
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testSchedulerIsolation_unmanaged() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
    disableJMX();
    testSchedulerIsolation();
  }

  @Test
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testSchedulerIsolation_managed() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
    enableJMX();
    testSchedulerIsolation();
  }

  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; void testSchedulerIsolation() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
    CamelContext context = createCamelContext();
    context.start();

    CamelContext anotherContext = createCamelContext();
    assertNotEquals(anotherContext.getName(), context.getName());
    assertNotEquals(anotherContext, context);

    assertNotSame(getDefaultScheduler(context), getDefaultScheduler(anotherContext));
  }

  /**
   * Create a &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; camel context instance.
   */
  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; DefaultCamelContext createCamelContext() {
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; DefaultCamelContext();
  }

  /**
   * Get the quartz component &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the provided camel context.
   */
  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; QuartzComponent getQuartzComponent(CamelContext context) {
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; context.getComponent(&lt;span class=&quot;code-quote&quot;&gt;&quot;quartz&quot;&lt;/span&gt;, QuartzComponent.class);
  }

  /**
   * Get the &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; scheduler &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the provided camel context.
   */
  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; Scheduler getDefaultScheduler(CamelContext context) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; SchedulerException {
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; getQuartzComponent(context).getFactory().getScheduler();
  }

  /**
   * Disables the JMX agent.
   */
  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; void disableJMX() {
    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.setProperty(JmxSystemPropertyKeys.DISABLED, &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&quot;&lt;/span&gt;);
  }

  /**
   * Enables the JMX agent.
   */
  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; void enableJMX() {
    &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.setProperty(JmxSystemPropertyKeys.DISABLED, &lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&quot;&lt;/span&gt;);
  }

}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12699151">CAMEL-7276</key>
            <summary>camel-quartz - use of management name to provide default scheduler name breaks context isolation</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="ukcrpb6">Bob Browning</reporter>
                        <labels>
                    </labels>
                <created>Thu, 6 Mar 2014 13:41:37 +0000</created>
                <updated>Sun, 9 Mar 2014 07:33:27 +0000</updated>
                            <resolved>Sun, 9 Mar 2014 07:33:27 +0000</resolved>
                                    <version>2.12.3</version>
                                    <fixVersion>2.12.4</fixVersion>
                    <fixVersion>2.13.0</fixVersion>
                                    <component>camel-quartz</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                    <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12682359">CAMEL-7034</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>377498</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 37 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1t1rb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>377792</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310080" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Regression</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10091"><![CDATA[Regression]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>