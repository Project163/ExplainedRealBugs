<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 09:43:04 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-3650] SMSC initiated unbind spawns exponential amounts of reconnect threads</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-3650</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;It took me a bit of time to put my finger on this problem.&lt;/p&gt;

&lt;p&gt;When an unbind PDU is sent from the SMSC side to a camel-smpp endpoint, a cascading amount reconnect threads are spawned by the reconnect code. I can reliably re-produce this problem having a simple smpp consumer to a SMSC / simulator and issuing an unbind from the SMSC / simulator.&lt;/p&gt;

&lt;p&gt;Here are some logs (I have added additional debug messages to the SmppConsumer to show the object references and state of the SmppSession objects):&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;2011-02-10 12:23:05,931 [ing.Main.main()] INFO  MainSupport          - Apache Camel 2.6.0 starting
2011-02-10 12:23:06,338 [ing.Main.main()] INFO  amelNamespaceHandler - OSGi environment not detected.
2011-02-10 12:23:06,338 [ing.Main.main()] DEBUG amelNamespaceHandler - Using org.apache.camel.spring.CamelContextFactoryBean as CamelContextBeanDefinitionParser
2011-02-10 12:23:06,764 [ing.Main.main()] DEBUG amelNamespaceHandler - Registered &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;: org.apache.camel.spring.CamelProducerTemplateFactoryBean with id: template on camel context: camelTestRouteBuilderContext
2011-02-10 12:23:06,764 [ing.Main.main()] DEBUG amelNamespaceHandler - Registered &lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;: org.apache.camel.spring.CamelConsumerTemplateFactoryBean with id: consumerTemplate on camel context: camelTestRouteBuilderContext
2011-02-10 12:23:06,965 [ing.Main.main()] DEBUG SpringCamelContext   - Set the application context classloader to: java.net.URLClassLoader@16e7eec9
2011-02-10 12:23:06,984 [ing.Main.main()] DEBUG elContextFactoryBean - Found JAXB created routes: []
2011-02-10 12:23:06,990 [ing.Main.main()] DEBUG SpringCamelContext   - Adding routes from builder: Routes: []
2011-02-10 12:23:07,059 [ing.Main.main()] DEBUG SpringCamelContext   - onApplicationEvent: org.springframework.context.event.ContextRefreshedEvent[source=org.springframework.context.support.ClassPathXmlApplicationContext@4c9549af: startup date [Thu Feb 10 12:23:05 SAST 2011]; root of context hierarchy]
2011-02-10 12:23:07,059 [ing.Main.main()] INFO  SpringCamelContext   - Apache Camel 2.6.0 (CamelContext: camelTestRouteBuilderContext) is starting
2011-02-10 12:23:07,059 [ing.Main.main()] INFO  SpringCamelContext   - JMX enabled. Using ManagedManagementStrategy.
2011-02-10 12:23:07,106 [ing.Main.main()] DEBUG faultManagementAgent - Starting JMX agent on server: com.sun.jmx.mbeanserver.JmxMBeanServer@7e3b014c
2011-02-10 12:23:07,168 [ing.Main.main()] DEBUG faultManagementAgent - Registered MBean with objectname: org.apache.camel:context=jacovt-notebook/camelTestRouteBuilderContext,type=context,name=&lt;span class=&quot;code-quote&quot;&gt;&quot;camelTestRouteBuilderContext&quot;&lt;/span&gt;
2011-02-10 12:23:07,194 [ing.Main.main()] DEBUG faultManagementAgent - Registered MBean with objectname: org.apache.camel:context=jacovt-notebook/camelTestRouteBuilderContext,type=services,name=DefaultTypeConverter(0x61e481c1)
2011-02-10 12:23:07,194 [ing.Main.main()] DEBUG DefaultTypeConverter - Loading type converters ...
2011-02-10 12:23:07,194 [ing.Main.main()] INFO  nTypeConverterLoader - Loading file META-INF/services/org/apache/camel/TypeConverter to retrieve list of packages, from url: jar:file:/home/jacovt/.m2/repository/org/apache/camel/camel-core/2.6.0/camel-core-2.6.0.jar!/META-INF/services/org/apache/camel/TypeConverter
2011-02-10 12:23:07,195 [ing.Main.main()] INFO  nTypeConverterLoader - Loading file META-INF/services/org/apache/camel/TypeConverter to retrieve list of packages, from url: jar:file:/home/jacovt/.m2/repository/org/apache/activemq/activemq-camel/5.3.1-fuse-02-00/activemq-camel-5.3.1-fuse-02-00.jar!/META-INF/services/org/apache/camel/TypeConverter
2011-02-10 12:23:07,196 [ing.Main.main()] DEBUG ageScanClassResolver - Searching &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; annotations of org.apache.camel.Converter in packages: [org.apache.camel.component.file, org.apache.camel.component.bean, org.apache.camel.converter, org.apache.activemq.camel.converter]
2011-02-10 12:23:07,474 [ing.Main.main()] DEBUG ageScanClassResolver - Found: [&lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;org.apache.camel.component.file.GenericFileConverter, &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;org.apache.camel.component.bean.BeanConverter, &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;org.apache.camel.converter.CamelConverter, &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;org.apache.camel.converter.CollectionConverter, &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;org.apache.camel.converter.IOConverter, &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;org.apache.camel.converter.NIOConverter, &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;org.apache.camel.converter.ObjectConverter, &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;org.apache.camel.converter.TimePatternConverter, &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;org.apache.camel.converter.jaxp.DomConverter, &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;org.apache.camel.converter.jaxp.StaxConverter, &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;org.apache.camel.converter.jaxp.StreamSourceConverter, &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;org.apache.camel.converter.jaxp.XmlConverter, &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;org.apache.camel.converter.stream.StreamCacheConverter, &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;org.apache.activemq.camel.converter.ActiveMQConverter, &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;org.apache.activemq.camel.converter.ActiveMQMessageConverter]
2011-02-10 12:23:07,474 [ing.Main.main()] INFO  nTypeConverterLoader - Found 4 packages with 15 @Converter classes to load
2011-02-10 12:23:07,474 [ing.Main.main()] DEBUG nTypeConverterLoader - Loading converter class: org.apache.camel.component.file.GenericFileConverter
2011-02-10 12:23:07,479 [ing.Main.main()] DEBUG nTypeConverterLoader - Loading converter class: org.apache.camel.component.bean.BeanConverter
2011-02-10 12:23:07,479 [ing.Main.main()] DEBUG nTypeConverterLoader - Loading converter class: org.apache.camel.converter.CamelConverter
2011-02-10 12:23:07,482 [ing.Main.main()] DEBUG nTypeConverterLoader - Loading converter class: org.apache.camel.converter.CollectionConverter
2011-02-10 12:23:07,483 [ing.Main.main()] DEBUG nTypeConverterLoader - Loading converter class: org.apache.camel.converter.IOConverter
2011-02-10 12:23:07,488 [ing.Main.main()] DEBUG nTypeConverterLoader - Loading converter class: org.apache.camel.converter.NIOConverter
2011-02-10 12:23:07,490 [ing.Main.main()] DEBUG nTypeConverterLoader - Loading converter class: org.apache.camel.converter.ObjectConverter
2011-02-10 12:23:07,491 [ing.Main.main()] DEBUG nTypeConverterLoader - Loading converter class: org.apache.camel.converter.TimePatternConverter
2011-02-10 12:23:07,491 [ing.Main.main()] DEBUG nTypeConverterLoader - Loading converter class: org.apache.camel.converter.jaxp.DomConverter
2011-02-10 12:23:07,492 [ing.Main.main()] DEBUG nTypeConverterLoader - Loading converter class: org.apache.camel.converter.jaxp.StaxConverter
2011-02-10 12:23:07,494 [ing.Main.main()] DEBUG nTypeConverterLoader - Loading converter class: org.apache.camel.converter.jaxp.StreamSourceConverter
2011-02-10 12:23:07,494 [ing.Main.main()] DEBUG nTypeConverterLoader - Loading converter class: org.apache.camel.converter.jaxp.XmlConverter
2011-02-10 12:23:07,499 [ing.Main.main()] DEBUG nTypeConverterLoader - Loading converter class: org.apache.camel.converter.stream.StreamCacheConverter
2011-02-10 12:23:07,499 [ing.Main.main()] DEBUG nTypeConverterLoader - Loading converter class: org.apache.activemq.camel.converter.ActiveMQConverter
2011-02-10 12:23:07,501 [ing.Main.main()] DEBUG nTypeConverterLoader - Loading converter class: org.apache.activemq.camel.converter.ActiveMQMessageConverter
2011-02-10 12:23:07,507 [ing.Main.main()] DEBUG DefaultTypeConverter - Loading type converters done
2011-02-10 12:23:07,508 [ing.Main.main()] INFO  DefaultTypeConverter - Loaded 150 type converters in 0.313 seconds
2011-02-10 12:23:07,516 [ing.Main.main()] DEBUG faultManagementAgent - Registered MBean with objectname: org.apache.camel:context=jacovt-notebook/camelTestRouteBuilderContext,type=services,name=DefaultExecutorServiceStrategy(0x4d12ee4f)
2011-02-10 12:23:07,525 [ing.Main.main()] DEBUG faultManagementAgent - Registered MBean with objectname: org.apache.camel:context=jacovt-notebook/camelTestRouteBuilderContext,type=services,name=SharedProducerServicePool(0x15dbac11)
2011-02-10 12:23:07,525 [ing.Main.main()] DEBUG dProducerServicePool - Starting service pool: org.apache.camel.impl.SharedProducerServicePool@15dbac11
2011-02-10 12:23:07,534 [ing.Main.main()] DEBUG faultManagementAgent - Registered MBean with objectname: org.apache.camel:context=jacovt-notebook/camelTestRouteBuilderContext,type=services,name=DefaultInflightRepository(0xf7b650a)
2011-02-10 12:23:07,542 [ing.Main.main()] DEBUG faultManagementAgent - Registered MBean with objectname: org.apache.camel:context=jacovt-notebook/camelTestRouteBuilderContext,type=services,name=DefaultShutdownStrategy(0x6e267b76)
2011-02-10 12:23:07,555 [ing.Main.main()] DEBUG ultComponentResolver - Found component: smpp via type: org.apache.camel.component.smpp.SmppComponent via: META-INF/services/org/apache/camel/component/smpp
2011-02-10 12:23:07,590 [ing.Main.main()] DEBUG faultManagementAgent - Registered MBean with objectname: org.apache.camel:context=jacovt-notebook/camelTestRouteBuilderContext,type=components,name=&lt;span class=&quot;code-quote&quot;&gt;&quot;smpp&quot;&lt;/span&gt;
2011-02-10 12:23:07,591 [ing.Main.main()] DEBUG DefaultComponent     - Creating endpoint uri=[smpp:&lt;span class=&quot;code-comment&quot;&gt;//ubankmobile01@127.0.0.1:2775?amp%3BenquireLinkTimer=55000&amp;amp;amp%3BsystemType=ubankmobile01&amp;amp;amp%3BtransactionTimer=15000&amp;amp;password=u%24%40nk01], path=[ubankmobile01@127.0.0.1:2775], parameters=[{amp;enquireLinkTimer=55000, amp;systemType=ubankmobile01, amp;transactionTimer=15000, password=u$@nk01}]
&lt;/span&gt;2011-02-10 12:23:07,605 [ing.Main.main()] DEBUG SpringCamelContext   - smpp:&lt;span class=&quot;code-comment&quot;&gt;//ubankmobile01@127.0.0.1:2775?amp%3BenquireLinkTimer=55000&amp;amp;amp%3BsystemType=ubankmobile01&amp;amp;amp%3BtransactionTimer=15000&amp;amp;password=u%24%40nk01 converted to endpoint: Endpoint[smpp://ubankmobile01@127.0.0.1:2775?amp%3BenquireLinkTimer=55000&amp;amp;amp%3BsystemType=ubankmobile01&amp;amp;amp%3BtransactionTimer=15000&amp;amp;password=******] by component: org.apache.camel.component.smpp.SmppComponent@517c804b
&lt;/span&gt;2011-02-10 12:23:07,615 [ing.Main.main()] DEBUG faultManagementAgent - Registered MBean with objectname: org.apache.camel:context=jacovt-notebook/camelTestRouteBuilderContext,type=endpoints,name=&lt;span class=&quot;code-quote&quot;&gt;&quot;smpp:&lt;span class=&quot;code-comment&quot;&gt;//ubankmobile01@127.0.0.1:2775&quot;&lt;/span&gt;
&lt;/span&gt;2011-02-10 12:23:07,655 [ing.Main.main()] DEBUG ultComponentResolver - Found component: log via type: org.apache.camel.component.log.LogComponent via: META-INF/services/org/apache/camel/component/log
2011-02-10 12:23:07,661 [ing.Main.main()] DEBUG faultManagementAgent - Registered MBean with objectname: org.apache.camel:context=jacovt-notebook/camelTestRouteBuilderContext,type=components,name=&lt;span class=&quot;code-quote&quot;&gt;&quot;log&quot;&lt;/span&gt;
2011-02-10 12:23:07,661 [ing.Main.main()] DEBUG DefaultComponent     - Creating endpoint uri=[log:&lt;span class=&quot;code-comment&quot;&gt;//SmppIn], path=[SmppIn], parameters=[{}]
&lt;/span&gt;2011-02-10 12:23:07,666 [ing.Main.main()] DEBUG SpringCamelContext   - log:&lt;span class=&quot;code-comment&quot;&gt;//SmppIn converted to endpoint: Endpoint[log://SmppIn] by component: org.apache.camel.component.log.LogComponent@4633c1aa
&lt;/span&gt;2011-02-10 12:23:07,669 [ing.Main.main()] DEBUG faultManagementAgent - Registered MBean with objectname: org.apache.camel:context=jacovt-notebook/camelTestRouteBuilderContext,type=endpoints,name=&lt;span class=&quot;code-quote&quot;&gt;&quot;log:&lt;span class=&quot;code-comment&quot;&gt;//SmppIn&quot;&lt;/span&gt;
&lt;/span&gt;2011-02-10 12:23:07,712 [ing.Main.main()] DEBUG faultManagementAgent - Registered MBean with objectname: org.apache.camel:context=jacovt-notebook/camelTestRouteBuilderContext,type=tracer,name=Tracer(0x3761f888)
2011-02-10 12:23:07,747 [ing.Main.main()] DEBUG faultManagementAgent - Registered MBean with objectname: org.apache.camel:context=jacovt-notebook/camelTestRouteBuilderContext,type=errorhandlers,name=&lt;span class=&quot;code-quote&quot;&gt;&quot;DefaultErrorHandlerBuilder(ref:CamelDefaultErrorHandlerBuilder)&quot;&lt;/span&gt;
2011-02-10 12:23:07,754 [ing.Main.main()] DEBUG SpringCamelContext   - Warming up route id: SmppConsumerRoute having autoStartup=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;
2011-02-10 12:23:07,772 [ing.Main.main()] DEBUG faultManagementAgent - Registered MBean with objectname: org.apache.camel:context=jacovt-notebook/camelTestRouteBuilderContext,type=services,name=ProducerCache(0x3a67ad79)
2011-02-10 12:23:07,774 [ing.Main.main()] DEBUG ProcessorEndpoint$1  - Starting producer: Producer[log:&lt;span class=&quot;code-comment&quot;&gt;//SmppIn]
&lt;/span&gt;2011-02-10 12:23:07,775 [ing.Main.main()] DEBUG ProducerCache        - Adding to producer cache with key: Endpoint[log:&lt;span class=&quot;code-comment&quot;&gt;//SmppIn] &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; producer: Producer[log://SmppIn]
&lt;/span&gt;2011-02-10 12:23:07,797 [ing.Main.main()] DEBUG faultManagementAgent - Registered MBean with objectname: org.apache.camel:context=jacovt-notebook/camelTestRouteBuilderContext,type=threadpools,name=DefaultErrorHandler(0xa62b39f)
2011-02-10 12:23:07,797 [ing.Main.main()] DEBUG cutorServiceStrategy - Created &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; scheduled thread pool &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; source: DefaultErrorHandler[TraceInterceptor[To[log:SmppIn]]] with name: ErrorHandlerRedeliveryTask. [poolSize=10]. -&amp;gt; java.util.concurrent.ScheduledThreadPoolExecutor@55fe910c
2011-02-10 12:23:07,844 [ing.Main.main()] DEBUG faultManagementAgent - Registered MBean with objectname: org.apache.camel:context=jacovt-notebook/camelTestRouteBuilderContext,type=processors,name=&lt;span class=&quot;code-quote&quot;&gt;&quot;to1&quot;&lt;/span&gt;
2011-02-10 12:23:07,873 [ing.Main.main()] DEBUG faultManagementAgent - Registered MBean with objectname: org.apache.camel:context=jacovt-notebook/camelTestRouteBuilderContext,type=routes,name=&lt;span class=&quot;code-quote&quot;&gt;&quot;SmppConsumerRoute&quot;&lt;/span&gt;
2011-02-10 12:23:07,873 [ing.Main.main()] DEBUG SpringCamelContext   - Route: SmppConsumerRoute &amp;gt;&amp;gt;&amp;gt; EventDrivenConsumerRoute[Endpoint[smpp:&lt;span class=&quot;code-comment&quot;&gt;//ubankmobile01@127.0.0.1:2775?amp%3BenquireLinkTimer=55000&amp;amp;amp%3BsystemType=ubankmobile01&amp;amp;amp%3BtransactionTimer=15000&amp;amp;password=******] -&amp;gt; Instrumentation:route[UnitOfWork(Channel[sendTo(Endpoint[log://SmppIn])])]]
&lt;/span&gt;2011-02-10 12:23:07,873 [ing.Main.main()] DEBUG SpringCamelContext   - Starting consumer (order: 1000) on route: SmppConsumerRoute
2011-02-10 12:23:07,884 [ing.Main.main()] DEBUG faultManagementAgent - Registered MBean with objectname: org.apache.camel:context=jacovt-notebook/camelTestRouteBuilderContext,type=consumers,name=SmppConsumer(0x59c27402)
2011-02-10 12:23:07,884 [ing.Main.main()] DEBUG SmppConsumer         - Connecting to: smpp:&lt;span class=&quot;code-comment&quot;&gt;//ubankmobile01@127.0.0.1:2775...
&lt;/span&gt;2011-02-10 12:23:07,884 [ing.Main.main()] DEBUG SmppConsumer         - Starting consumer: SmppConsumer[smpp:&lt;span class=&quot;code-comment&quot;&gt;//ubankmobile01@127.0.0.1:2775]
&lt;/span&gt;2011-02-10 12:23:07,922 [ing.Main.main()] DEBUG SMPPSession          - Connect and bind to 127.0.0.1 port 2775
2011-02-10 12:23:07,923 [ing.Main.main()] INFO  SMPPSession          - Connected
2011-02-10 12:23:07,923 [ing.Main.main()] DEBUG SmppConsumer         - &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; STATE CHANGE -- CLOSED --&amp;gt; OPEN[org.jsmpp.session.SMPPSession@501b2cb9]
2011-02-10 12:23:07,925 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-6       ] INFO  SMPPSession          - Starting PDUReaderWorker with processor degree:3 ...
2011-02-10 12:23:10,913 [pool-1-thread-1] DEBUG stractSessionContext - Activity notified
2011-02-10 12:23:10,913 [pool-1-thread-1] DEBUG SMPPSessionOpen      - Bind Response header (30, 80000001, 00000000, 1)
2011-02-10 12:23:10,915 [ing.Main.main()] DEBUG AbstractSession      - bind response received
2011-02-10 12:23:10,915 [ing.Main.main()] DEBUG SmppConsumer         - &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; STATE CHANGE -- OPEN --&amp;gt; BOUND_RX[org.jsmpp.session.SMPPSession@501b2cb9]
2011-02-10 12:23:10,916 [ing.Main.main()] DEBUG SmppConsumer         - Session info: [org.jsmpp.session.SMPPSession@501b2cb9], session state: BOUND_RX
2011-02-10 12:23:10,916 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-7       ] INFO  SMPPSession          - Starting EnquireLinkSender
2011-02-10 12:23:10,916 [ing.Main.main()] INFO  SmppConsumer         - Connected to: smpp:&lt;span class=&quot;code-comment&quot;&gt;//ubankmobile01@127.0.0.1:2775
&lt;/span&gt;2011-02-10 12:23:10,917 [ing.Main.main()] INFO  SpringCamelContext   - Route: SmppConsumerRoute started and consuming from: Endpoint[smpp:&lt;span class=&quot;code-comment&quot;&gt;//ubankmobile01@127.0.0.1:2775?amp%3BenquireLinkTimer=55000&amp;amp;amp%3BsystemType=ubankmobile01&amp;amp;amp%3BtransactionTimer=15000&amp;amp;password=******]
&lt;/span&gt;2011-02-10 12:23:10,918 [ing.Main.main()] DEBUG DefaultComponent     - Creating endpoint uri=[spring-event:&lt;span class=&quot;code-comment&quot;&gt;//&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;], path=[&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;], parameters=[{}]
&lt;/span&gt;2011-02-10 12:23:10,919 [ing.Main.main()] DEBUG SpringCamelContext   - spring-event:&lt;span class=&quot;code-comment&quot;&gt;//&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; converted to endpoint: Endpoint[spring-event://&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;] by component: org.apache.camel.component.event.EventComponent@774e1f2b
&lt;/span&gt;2011-02-10 12:23:10,925 [ing.Main.main()] DEBUG faultManagementAgent - Registered MBean with objectname: org.apache.camel:context=jacovt-notebook/camelTestRouteBuilderContext,type=endpoints,name=&lt;span class=&quot;code-quote&quot;&gt;&quot;spring-event:&lt;span class=&quot;code-comment&quot;&gt;//&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;&quot;&lt;/span&gt;
&lt;/span&gt;2011-02-10 12:23:10,926 [ing.Main.main()] INFO  SpringCamelContext   - Total 1 routes, of which 1 is started.
2011-02-10 12:23:10,926 [ing.Main.main()] INFO  SpringCamelContext   - Apache Camel 2.6.0 (CamelContext: camelTestRouteBuilderContext) started in 3.866 seconds
2011-02-10 12:23:10,935 [ing.Main.main()] DEBUG MainSupport          - Starting Spring ApplicationContext: org.springframework.context.support.ClassPathXmlApplicationContext@4c9549af
2011-02-10 12:23:10,936 [ing.Main.main()] DEBUG SpringCamelContext   - onApplicationEvent: org.springframework.context.event.ContextStartedEvent[source=org.springframework.context.support.ClassPathXmlApplicationContext@4c9549af: startup date [Thu Feb 10 12:23:05 SAST 2011]; root of context hierarchy]
2011-02-10 12:23:11,408 [pool-1-thread-2] DEBUG stractSessionContext - Activity notified
2011-02-10 12:23:11,408 [pool-1-thread-2] DEBUG SMPPSession          - Sending enquire_link_resp
2011-02-10 12:23:16,413 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-6       ] DEBUG SMPPSession          - No activity notified
2011-02-10 12:23:16,413 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-6       ] DEBUG SMPPSession          - Sending enquire link notify
2011-02-10 12:23:18,851 [pool-1-thread-3] DEBUG stractSessionContext - Activity notified
2011-02-10 12:23:18,852 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-7       ] DEBUG AbstractSession      - enquire_link response received
2011-02-10 12:23:23,853 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-6       ] DEBUG SMPPSession          - No activity notified
2011-02-10 12:23:23,853 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-6       ] DEBUG SMPPSession          - Sending enquire link notify
2011-02-10 12:23:24,854 [pool-1-thread-1] DEBUG stractSessionContext - Activity notified
2011-02-10 12:23:24,854 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-7       ] DEBUG AbstractSession      - enquire_link response received
2011-02-10 12:23:29,859 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-6       ] DEBUG SMPPSession          - No activity notified
2011-02-10 12:23:29,859 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-6       ] DEBUG SMPPSession          - Sending enquire link notify
2011-02-10 12:23:30,938 [pool-1-thread-2] DEBUG stractSessionContext - Activity notified
2011-02-10 12:23:30,938 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-7       ] DEBUG AbstractSession      - enquire_link response received
2011-02-10 12:23:35,943 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-6       ] DEBUG SMPPSession          - No activity notified
2011-02-10 12:23:35,943 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-6       ] DEBUG SMPPSession          - Sending enquire link notify
2011-02-10 12:23:37,901 [pool-1-thread-3] DEBUG stractSessionContext - Activity notified
2011-02-10 12:23:37,901 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-7       ] DEBUG AbstractSession      - enquire_link response received
2011-02-10 12:23:42,906 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-6       ] DEBUG SMPPSession          - No activity notified
2011-02-10 12:23:42,906 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-6       ] DEBUG SMPPSession          - Sending enquire link notify
2011-02-10 12:23:45,256 [pool-1-thread-1] DEBUG stractSessionContext - Activity notified
2011-02-10 12:23:45,256 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-7       ] DEBUG AbstractSession      - enquire_link response received
2011-02-10 12:23:50,261 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-6       ] DEBUG SMPPSession          - No activity notified
2011-02-10 12:23:50,261 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-6       ] DEBUG SMPPSession          - Sending enquire link notify
2011-02-10 12:23:51,232 [pool-1-thread-2] DEBUG stractSessionContext - Activity notified
2011-02-10 12:23:51,232 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-7       ] DEBUG AbstractSession      - enquire_link response received
2011-02-10 12:23:56,237 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-6       ] DEBUG SMPPSession          - No activity notified
2011-02-10 12:23:56,237 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-6       ] DEBUG SMPPSession          - Sending enquire link notify
2011-02-10 12:23:57,208 [pool-1-thread-3] DEBUG stractSessionContext - Activity notified
2011-02-10 12:23:57,208 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-7       ] DEBUG AbstractSession      - enquire_link response received
2011-02-10 12:24:02,211 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-6       ] DEBUG SMPPSession          - No activity notified
2011-02-10 12:24:02,211 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-6       ] DEBUG SMPPSession          - Sending enquire link notify
2011-02-10 12:24:03,277 [pool-1-thread-1] DEBUG stractSessionContext - Activity notified
2011-02-10 12:24:03,277 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-7       ] DEBUG AbstractSession      - enquire_link response received
2011-02-10 12:24:08,281 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-6       ] DEBUG SMPPSession          - No activity notified
2011-02-10 12:24:08,281 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-6       ] DEBUG SMPPSession          - Sending enquire link notify
2011-02-10 12:24:09,436 [pool-1-thread-2] DEBUG stractSessionContext - Activity notified
2011-02-10 12:24:09,437 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-7       ] DEBUG AbstractSession      - enquire_link response received
2011-02-10 12:24:09,821 [pool-1-thread-3] DEBUG stractSessionContext - Activity notified
2011-02-10 12:24:09,821 [pool-1-thread-3] INFO  ericSMPPSessionBound - Receving unbind request
2011-02-10 12:24:09,822 [pool-1-thread-3] DEBUG SmppConsumer         - &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; STATE CHANGE -- BOUND_RX --&amp;gt; UNBOUND[org.jsmpp.session.SMPPSession@501b2cb9]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Everything is perfectly fine up to this point. It is here that the SMSC / simulator issues an unbind request towards the camel-smpp consumer.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;2011-02-10 12:24:09,937 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-7       ] INFO  SMPPSession          - EnquireLinkSender stop
2011-02-10 12:24:14,826 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-6       ] DEBUG SMPPSession          - No activity notified
2011-02-10 12:24:14,827 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-6       ] DEBUG SmppConsumer         - &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; STATE CHANGE -- UNBOUND --&amp;gt; CLOSED[org.jsmpp.session.SMPPSession@501b2cb9]
2011-02-10 12:24:14,827 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-6       ] WARN  SmppConsumer         - Loost connection to: smpp:&lt;span class=&quot;code-comment&quot;&gt;//ubankmobile01@127.0.0.1:2775 - trying to reconnect...
&lt;/span&gt;2011-02-10 12:24:14,827 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-6       ] DEBUG SmppConsumer         - &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; Closing SMPP session [org.jsmpp.session.SMPPSession@501b2cb9]
2011-02-10 12:24:14,829 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-8       ] INFO  SmppConsumer         - Schedule reconnect after 5000 millis
2011-02-10 12:24:19,829 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-8       ] INFO  SmppConsumer         - Trying to reconnect to smpp:&lt;span class=&quot;code-comment&quot;&gt;//ubankmobile01@127.0.0.1:2775 - attempt #1...
&lt;/span&gt;2011-02-10 12:24:19,830 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-8       ] DEBUG SmppConsumer         - Session info: [org.jsmpp.session.SMPPSession@501b2cb9], session state: CLOSED
2011-02-10 12:24:19,830 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-8       ] DEBUG SMPPSession          - Connect and bind to 127.0.0.1 port 2775
2011-02-10 12:24:19,830 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-8       ] INFO  SMPPSession          - Connected
2011-02-10 12:24:19,830 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-8       ] DEBUG SmppConsumer         - &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; STATE CHANGE -- CLOSED --&amp;gt; OPEN[org.jsmpp.session.SMPPSession@1b6b7f83]
2011-02-10 12:24:19,831 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-9       ] INFO  SMPPSession          - Starting PDUReaderWorker with processor degree:3 ...
2011-02-10 12:24:22,834 [pool-2-thread-1] DEBUG stractSessionContext - Activity notified
2011-02-10 12:24:22,834 [pool-2-thread-1] DEBUG SMPPSessionOpen      - Bind Response header (30, 80000001, 0000000d, 1)
2011-02-10 12:24:22,835 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-8       ] DEBUG AbstractSession      - bind response received
2011-02-10 12:24:22,837 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-8       ] ERROR SMPPSession          - Receive negative bind response
org.jsmpp.extra.NegativeResponseException: Negative response 0000000d found
	at org.jsmpp.session.AbstractSession.validateResponse(AbstractSession.java:215)
	at org.jsmpp.session.AbstractSession.executeSendCommand(AbstractSession.java:271)
	at org.jsmpp.session.SMPPSession.sendBind(SMPPSession.java:294)
	at org.jsmpp.session.SMPPSession.connectAndBind(SMPPSession.java:232)
	at org.jsmpp.session.SMPPSession.connectAndBind(SMPPSession.java:200)
	at org.apache.camel.component.smpp.SmppConsumer.createSession(SmppConsumer.java:161)
	at org.apache.camel.component.smpp.SmppConsumer.access$500(SmppConsumer.java:54)
	at org.apache.camel.component.smpp.SmppConsumer$3.run(SmppConsumer.java:223)
2011-02-10 12:24:22,838 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-8       ] DEBUG SmppConsumer         - &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; STATE CHANGE -- OPEN --&amp;gt; CLOSED[org.jsmpp.session.SMPPSession@1b6b7f83]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The above negative bind responseis due to the fact that only a single smpp RX bind is allowed to the SMSC / simulator. I suspect the underlying problem is how the exception is handled here, but I might be wrong.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;2011-02-10 12:24:22,838 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-8       ] WARN  SmppConsumer         - Loost connection to: smpp:&lt;span class=&quot;code-comment&quot;&gt;//ubankmobile01@127.0.0.1:2775 - trying to reconnect...
&lt;/span&gt;2011-02-10 12:24:22,838 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-8       ] DEBUG SmppConsumer         - &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; Closing SMPP session [org.jsmpp.session.SMPPSession@501b2cb9]
2011-02-10 12:24:22,838 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-10      ] INFO  SmppConsumer         - Schedule reconnect after 5000 millis
2011-02-10 12:24:22,838 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-8       ] DEBUG SmppConsumer         - Session info: [org.jsmpp.session.SMPPSession@501b2cb9], session state: CLOSED
2011-02-10 12:24:22,838 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-8       ] INFO  SmppConsumer         - Failed to reconnect to smpp:&lt;span class=&quot;code-comment&quot;&gt;//ubankmobile01@127.0.0.1:2775, sessionState == CLOSED
&lt;/span&gt;2011-02-10 12:24:22,838 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-9       ] INFO  SMPPSession          - PDUReaderWorker stop
2011-02-10 12:24:22,838 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-8       ] DEBUG SmppConsumer         - &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; Closing SMPP session [org.jsmpp.session.SMPPSession@501b2cb9]
2011-02-10 12:24:27,838 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-10      ] INFO  SmppConsumer         - Trying to reconnect to smpp:&lt;span class=&quot;code-comment&quot;&gt;//ubankmobile01@127.0.0.1:2775 - attempt #1...
&lt;/span&gt;2011-02-10 12:24:27,839 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-10      ] DEBUG SmppConsumer         - Session info: [org.jsmpp.session.SMPPSession@501b2cb9], session state: CLOSED
2011-02-10 12:24:27,839 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-10      ] DEBUG SMPPSession          - Connect and bind to 127.0.0.1 port 2775
2011-02-10 12:24:27,839 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-8       ] INFO  SmppConsumer         - Trying to reconnect to smpp:&lt;span class=&quot;code-comment&quot;&gt;//ubankmobile01@127.0.0.1:2775 - attempt #2...
&lt;/span&gt;2011-02-10 12:24:27,839 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-8       ] DEBUG SmppConsumer         - Session info: [org.jsmpp.session.SMPPSession@501b2cb9], session state: CLOSED
2011-02-10 12:24:27,839 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-10      ] INFO  SMPPSession          - Connected
2011-02-10 12:24:27,839 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-8       ] DEBUG SMPPSession          - Connect and bind to 127.0.0.1 port 2775
2011-02-10 12:24:27,839 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-10      ] DEBUG SmppConsumer         - &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; STATE CHANGE -- CLOSED --&amp;gt; OPEN[org.jsmpp.session.SMPPSession@62bc184]
2011-02-10 12:24:27,840 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-11      ] INFO  SMPPSession          - Starting PDUReaderWorker with processor degree:3 ...
2011-02-10 12:24:27,840 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-8       ] INFO  SMPPSession          - Connected
2011-02-10 12:24:27,840 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-8       ] DEBUG SmppConsumer         - &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; STATE CHANGE -- CLOSED --&amp;gt; OPEN[org.jsmpp.session.SMPPSession@3e30e173]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;OK, wait, we have 2 SMPPSession object references now? Seems like we have 2 Threads running that tries to re-connect...&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;2011-02-10 12:24:27,841 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-12      ] INFO  SMPPSession          - Starting PDUReaderWorker with processor degree:3 ...
2011-02-10 12:24:31,035 [pool-3-thread-1] DEBUG stractSessionContext - Activity notified
2011-02-10 12:24:31,035 [pool-3-thread-1] DEBUG SMPPSessionOpen      - Bind Response header (30, 80000001, 0000000d, 1)
2011-02-10 12:24:31,035 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-10      ] DEBUG AbstractSession      - bind response received
2011-02-10 12:24:31,035 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-10      ] ERROR SMPPSession          - Receive negative bind response
org.jsmpp.extra.NegativeResponseException: Negative response 0000000d found
	at org.jsmpp.session.AbstractSession.validateResponse(AbstractSession.java:215)
	at org.jsmpp.session.AbstractSession.executeSendCommand(AbstractSession.java:271)
	at org.jsmpp.session.SMPPSession.sendBind(SMPPSession.java:294)
	at org.jsmpp.session.SMPPSession.connectAndBind(SMPPSession.java:232)
	at org.jsmpp.session.SMPPSession.connectAndBind(SMPPSession.java:200)
	at org.apache.camel.component.smpp.SmppConsumer.createSession(SmppConsumer.java:161)
	at org.apache.camel.component.smpp.SmppConsumer.access$500(SmppConsumer.java:54)
	at org.apache.camel.component.smpp.SmppConsumer$3.run(SmppConsumer.java:223)
2011-02-10 12:24:31,036 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-10      ] DEBUG SmppConsumer         - &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; STATE CHANGE -- OPEN --&amp;gt; CLOSED[org.jsmpp.session.SMPPSession@62bc184]
2011-02-10 12:24:31,036 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-10      ] WARN  SmppConsumer         - Loost connection to: smpp:&lt;span class=&quot;code-comment&quot;&gt;//ubankmobile01@127.0.0.1:2775 - trying to reconnect...
&lt;/span&gt;2011-02-10 12:24:31,036 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-10      ] DEBUG SmppConsumer         - &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; Closing SMPP session [org.jsmpp.session.SMPPSession@501b2cb9]
2011-02-10 12:24:31,036 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-10      ] DEBUG SmppConsumer         - Session info: [org.jsmpp.session.SMPPSession@501b2cb9], session state: CLOSED
2011-02-10 12:24:31,036 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-10      ] INFO  SmppConsumer         - Failed to reconnect to smpp:&lt;span class=&quot;code-comment&quot;&gt;//ubankmobile01@127.0.0.1:2775, sessionState == CLOSED
&lt;/span&gt;2011-02-10 12:24:31,036 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-11      ] INFO  SMPPSession          - PDUReaderWorker stop
2011-02-10 12:24:31,036 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-10      ] DEBUG SmppConsumer         - &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; Closing SMPP session [org.jsmpp.session.SMPPSession@501b2cb9]
2011-02-10 12:24:31,037 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-13      ] INFO  SmppConsumer         - Schedule reconnect after 5000 millis
2011-02-10 12:24:32,846 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-12      ] DEBUG SMPPSession          - No activity notified
2011-02-10 12:24:32,982 [pool-4-thread-1] DEBUG stractSessionContext - Activity notified
2011-02-10 12:24:32,982 [pool-4-thread-1] DEBUG SMPPSessionOpen      - Bind Response header (30, 80000001, 0000000d, 1)
2011-02-10 12:24:32,982 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-8       ] DEBUG AbstractSession      - bind response received
2011-02-10 12:24:32,982 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-8       ] ERROR SMPPSession          - Receive negative bind response
org.jsmpp.extra.NegativeResponseException: Negative response 0000000d found
	at org.jsmpp.session.AbstractSession.validateResponse(AbstractSession.java:215)
	at org.jsmpp.session.AbstractSession.executeSendCommand(AbstractSession.java:271)
	at org.jsmpp.session.SMPPSession.sendBind(SMPPSession.java:294)
	at org.jsmpp.session.SMPPSession.connectAndBind(SMPPSession.java:232)
	at org.jsmpp.session.SMPPSession.connectAndBind(SMPPSession.java:200)
	at org.apache.camel.component.smpp.SmppConsumer.createSession(SmppConsumer.java:161)
	at org.apache.camel.component.smpp.SmppConsumer.access$500(SmppConsumer.java:54)
	at org.apache.camel.component.smpp.SmppConsumer$3.run(SmppConsumer.java:223)
2011-02-10 12:24:32,982 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-8       ] DEBUG SmppConsumer         - &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; STATE CHANGE -- OPEN --&amp;gt; CLOSED[org.jsmpp.session.SMPPSession@3e30e173]
2011-02-10 12:24:32,982 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-8       ] WARN  SmppConsumer         - Loost connection to: smpp:&lt;span class=&quot;code-comment&quot;&gt;//ubankmobile01@127.0.0.1:2775 - trying to reconnect...
&lt;/span&gt;2011-02-10 12:24:32,982 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-8       ] DEBUG SmppConsumer         - &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; Closing SMPP session [org.jsmpp.session.SMPPSession@501b2cb9]
2011-02-10 12:24:32,983 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-8       ] DEBUG SmppConsumer         - Session info: [org.jsmpp.session.SMPPSession@501b2cb9], session state: CLOSED
2011-02-10 12:24:32,983 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-12      ] INFO  SMPPSession          - PDUReaderWorker stop
2011-02-10 12:24:32,983 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-14      ] INFO  SmppConsumer         - Schedule reconnect after 5000 millis
2011-02-10 12:24:32,983 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-8       ] INFO  SmppConsumer         - Failed to reconnect to smpp:&lt;span class=&quot;code-comment&quot;&gt;//ubankmobile01@127.0.0.1:2775, sessionState == CLOSED
&lt;/span&gt;2011-02-10 12:24:32,983 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-8       ] DEBUG SmppConsumer         - &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; Closing SMPP session [org.jsmpp.session.SMPPSession@501b2cb9]
2011-02-10 12:24:36,037 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-10      ] INFO  SmppConsumer         - Trying to reconnect to smpp:&lt;span class=&quot;code-comment&quot;&gt;//ubankmobile01@127.0.0.1:2775 - attempt #2...
&lt;/span&gt;2011-02-10 12:24:36,037 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-13      ] INFO  SmppConsumer         - Trying to reconnect to smpp:&lt;span class=&quot;code-comment&quot;&gt;//ubankmobile01@127.0.0.1:2775 - attempt #1...&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Some more re-connect threads...&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;2011-02-10 12:24:36,038 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-10      ] DEBUG SmppConsumer         - Session info: [org.jsmpp.session.SMPPSession@501b2cb9], session state: CLOSED
2011-02-10 12:24:36,038 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-13      ] DEBUG SmppConsumer         - Session info: [org.jsmpp.session.SMPPSession@501b2cb9], session state: CLOSED
2011-02-10 12:24:36,038 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-10      ] DEBUG SMPPSession          - Connect and bind to 127.0.0.1 port 2775
2011-02-10 12:24:36,038 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-13      ] DEBUG SMPPSession          - Connect and bind to 127.0.0.1 port 2775
2011-02-10 12:24:36,038 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-10      ] INFO  SMPPSession          - Connected
2011-02-10 12:24:36,038 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-13      ] INFO  SMPPSession          - Connected
2011-02-10 12:24:36,038 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-10      ] DEBUG SmppConsumer         - &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; STATE CHANGE -- CLOSED --&amp;gt; OPEN[org.jsmpp.session.SMPPSession@782bbb7b]
2011-02-10 12:24:36,039 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-13      ] DEBUG SmppConsumer         - &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; STATE CHANGE -- CLOSED --&amp;gt; OPEN[org.jsmpp.session.SMPPSession@7f21c5df]
2011-02-10 12:24:36,039 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-15      ] INFO  SMPPSession          - Starting PDUReaderWorker with processor degree:3 ...
2011-02-10 12:24:36,039 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-16      ] INFO  SMPPSession          - Starting PDUReaderWorker with processor degree:3 ...
2011-02-10 12:24:37,983 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-14      ] INFO  SmppConsumer         - Trying to reconnect to smpp:&lt;span class=&quot;code-comment&quot;&gt;//ubankmobile01@127.0.0.1:2775 - attempt #1...
&lt;/span&gt;2011-02-10 12:24:37,984 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-14      ] DEBUG SmppConsumer         - Session info: [org.jsmpp.session.SMPPSession@501b2cb9], session state: CLOSED
2011-02-10 12:24:37,984 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-8       ] INFO  SmppConsumer         - Trying to reconnect to smpp:&lt;span class=&quot;code-comment&quot;&gt;//ubankmobile01@127.0.0.1:2775 - attempt #3...
&lt;/span&gt;2011-02-10 12:24:37,984 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-8       ] DEBUG SmppConsumer         - Session info: [org.jsmpp.session.SMPPSession@501b2cb9], session state: CLOSED
2011-02-10 12:24:37,984 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-14      ] DEBUG SMPPSession          - Connect and bind to 127.0.0.1 port 2775
2011-02-10 12:24:37,984 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-8       ] DEBUG SMPPSession          - Connect and bind to 127.0.0.1 port 2775
2011-02-10 12:24:37,984 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-14      ] INFO  SMPPSession          - Connected
2011-02-10 12:24:37,984 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-8       ] INFO  SMPPSession          - Connected
2011-02-10 12:24:37,985 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-14      ] DEBUG SmppConsumer         - &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; STATE CHANGE -- CLOSED --&amp;gt; OPEN[org.jsmpp.session.SMPPSession@6a754384]
2011-02-10 12:24:37,985 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-8       ] DEBUG SmppConsumer         - &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; STATE CHANGE -- CLOSED --&amp;gt; OPEN[org.jsmpp.session.SMPPSession@38a3c5b6]
2011-02-10 12:24:37,985 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-17      ] INFO  SMPPSession          - Starting PDUReaderWorker with processor degree:3 ...
2011-02-10 12:24:37,987 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-18      ] INFO  SMPPSession          - Starting PDUReaderWorker with processor degree:3 ...
2011-02-10 12:24:38,831 [pool-6-thread-1] DEBUG stractSessionContext - Activity notified
2011-02-10 12:24:38,831 [pool-6-thread-1] DEBUG SMPPSessionOpen      - Bind Response header (30, 80000001, 0000000d, 1)
2011-02-10 12:24:38,831 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-13      ] DEBUG AbstractSession      - bind response received
2011-02-10 12:24:38,831 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-13      ] ERROR SMPPSession          - Receive negative bind response
org.jsmpp.extra.NegativeResponseException: Negative response 0000000d found
	at org.jsmpp.session.AbstractSession.validateResponse(AbstractSession.java:215)
	at org.jsmpp.session.AbstractSession.executeSendCommand(AbstractSession.java:271)
	at org.jsmpp.session.SMPPSession.sendBind(SMPPSession.java:294)
	at org.jsmpp.session.SMPPSession.connectAndBind(SMPPSession.java:232)
	at org.jsmpp.session.SMPPSession.connectAndBind(SMPPSession.java:200)
	at org.apache.camel.component.smpp.SmppConsumer.createSession(SmppConsumer.java:161)
	at org.apache.camel.component.smpp.SmppConsumer.access$500(SmppConsumer.java:54)
	at org.apache.camel.component.smpp.SmppConsumer$3.run(SmppConsumer.java:223)
2011-02-10 12:24:38,832 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-13      ] DEBUG SmppConsumer         - &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; STATE CHANGE -- OPEN --&amp;gt; CLOSED[org.jsmpp.session.SMPPSession@7f21c5df]
2011-02-10 12:24:38,832 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-13      ] WARN  SmppConsumer         - Loost connection to: smpp:&lt;span class=&quot;code-comment&quot;&gt;//ubankmobile01@127.0.0.1:2775 - trying to reconnect...
&lt;/span&gt;2011-02-10 12:24:38,832 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-13      ] DEBUG SmppConsumer         - &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; Closing SMPP session [org.jsmpp.session.SMPPSession@501b2cb9]
2011-02-10 12:24:38,832 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-13      ] DEBUG SmppConsumer         - Session info: [org.jsmpp.session.SMPPSession@501b2cb9], session state: CLOSED
2011-02-10 12:24:38,832 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-19      ] INFO  SmppConsumer         - Schedule reconnect after 5000 millis
2011-02-10 12:24:38,832 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-13      ] INFO  SmppConsumer         - Failed to reconnect to smpp:&lt;span class=&quot;code-comment&quot;&gt;//ubankmobile01@127.0.0.1:2775, sessionState == CLOSED
&lt;/span&gt;2011-02-10 12:24:38,832 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-16      ] INFO  SMPPSession          - PDUReaderWorker stop
2011-02-10 12:24:38,833 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-13      ] DEBUG SmppConsumer         - &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; Closing SMPP session [org.jsmpp.session.SMPPSession@501b2cb9]
2011-02-10 12:24:40,957 [pool-5-thread-1] DEBUG stractSessionContext - Activity notified
2011-02-10 12:24:40,957 [pool-5-thread-1] DEBUG SMPPSessionOpen      - Bind Response header (30, 80000001, 0000000d, 1)
2011-02-10 12:24:40,957 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-10      ] DEBUG AbstractSession      - bind response received
2011-02-10 12:24:40,957 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-10      ] ERROR SMPPSession          - Receive negative bind response
org.jsmpp.extra.NegativeResponseException: Negative response 0000000d found
	at org.jsmpp.session.AbstractSession.validateResponse(AbstractSession.java:215)
	at org.jsmpp.session.AbstractSession.executeSendCommand(AbstractSession.java:271)
	at org.jsmpp.session.SMPPSession.sendBind(SMPPSession.java:294)
	at org.jsmpp.session.SMPPSession.connectAndBind(SMPPSession.java:232)
	at org.jsmpp.session.SMPPSession.connectAndBind(SMPPSession.java:200)
	at org.apache.camel.component.smpp.SmppConsumer.createSession(SmppConsumer.java:161)
	at org.apache.camel.component.smpp.SmppConsumer.access$500(SmppConsumer.java:54)
	at org.apache.camel.component.smpp.SmppConsumer$3.run(SmppConsumer.java:223)
2011-02-10 12:24:40,958 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-10      ] DEBUG SmppConsumer         - &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; STATE CHANGE -- OPEN --&amp;gt; CLOSED[org.jsmpp.session.SMPPSession@782bbb7b]
2011-02-10 12:24:40,958 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-10      ] WARN  SmppConsumer         - Loost connection to: smpp:&lt;span class=&quot;code-comment&quot;&gt;//ubankmobile01@127.0.0.1:2775 - trying to reconnect...
&lt;/span&gt;2011-02-10 12:24:40,958 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-10      ] DEBUG SmppConsumer         - &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; Closing SMPP session [org.jsmpp.session.SMPPSession@501b2cb9]
2011-02-10 12:24:40,958 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-20      ] INFO  SmppConsumer         - Schedule reconnect after 5000 millis
2011-02-10 12:24:40,958 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-15      ] INFO  SMPPSession          - PDUReaderWorker stop
2011-02-10 12:24:40,958 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-10      ] DEBUG SmppConsumer         - Session info: [org.jsmpp.session.SMPPSession@501b2cb9], session state: CLOSED
2011-02-10 12:24:40,958 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-10      ] INFO  SmppConsumer         - Failed to reconnect to smpp:&lt;span class=&quot;code-comment&quot;&gt;//ubankmobile01@127.0.0.1:2775, sessionState == CLOSED
&lt;/span&gt;2011-02-10 12:24:40,959 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-10      ] DEBUG SmppConsumer         - &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; Closing SMPP session [org.jsmpp.session.SMPPSession@501b2cb9]
2011-02-10 12:24:42,821 [pool-8-thread-1] DEBUG stractSessionContext - Activity notified
2011-02-10 12:24:42,821 [pool-8-thread-1] DEBUG SMPPSessionOpen      - Bind Response header (30, 80000001, 0000000d, 1)
2011-02-10 12:24:42,821 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-8       ] DEBUG AbstractSession      - bind response received
2011-02-10 12:24:42,822 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-8       ] ERROR SMPPSession          - Receive negative bind response
org.jsmpp.extra.NegativeResponseException: Negative response 0000000d found
	at org.jsmpp.session.AbstractSession.validateResponse(AbstractSession.java:215)
	at org.jsmpp.session.AbstractSession.executeSendCommand(AbstractSession.java:271)
	at org.jsmpp.session.SMPPSession.sendBind(SMPPSession.java:294)
	at org.jsmpp.session.SMPPSession.connectAndBind(SMPPSession.java:232)
	at org.jsmpp.session.SMPPSession.connectAndBind(SMPPSession.java:200)
	at org.apache.camel.component.smpp.SmppConsumer.createSession(SmppConsumer.java:161)
	at org.apache.camel.component.smpp.SmppConsumer.access$500(SmppConsumer.java:54)
	at org.apache.camel.component.smpp.SmppConsumer$3.run(SmppConsumer.java:223)
2011-02-10 12:24:42,822 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-8       ] DEBUG SmppConsumer         - &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; STATE CHANGE -- OPEN --&amp;gt; CLOSED[org.jsmpp.session.SMPPSession@38a3c5b6]
2011-02-10 12:24:42,822 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-8       ] WARN  SmppConsumer         - Loost connection to: smpp:&lt;span class=&quot;code-comment&quot;&gt;//ubankmobile01@127.0.0.1:2775 - trying to reconnect...
&lt;/span&gt;2011-02-10 12:24:42,822 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-8       ] DEBUG SmppConsumer         - &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; Closing SMPP session [org.jsmpp.session.SMPPSession@501b2cb9]
2011-02-10 12:24:42,822 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-21      ] INFO  SmppConsumer         - Schedule reconnect after 5000 millis
2011-02-10 12:24:42,822 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-8       ] DEBUG SmppConsumer         - Session info: [org.jsmpp.session.SMPPSession@501b2cb9], session state: CLOSED
2011-02-10 12:24:42,822 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-8       ] INFO  SmppConsumer         - Failed to reconnect to smpp:&lt;span class=&quot;code-comment&quot;&gt;//ubankmobile01@127.0.0.1:2775, sessionState == CLOSED
&lt;/span&gt;2011-02-10 12:24:42,822 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-18      ] INFO  SMPPSession          - PDUReaderWorker stop
2011-02-10 12:24:42,823 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-8       ] DEBUG SmppConsumer         - &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; Closing SMPP session [org.jsmpp.session.SMPPSession@501b2cb9]
2011-02-10 12:24:42,988 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-17      ] DEBUG SMPPSession          - No activity notified
2011-02-10 12:24:43,832 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-19      ] INFO  SmppConsumer         - Trying to reconnect to smpp:&lt;span class=&quot;code-comment&quot;&gt;//ubankmobile01@127.0.0.1:2775 - attempt #1...
&lt;/span&gt;2011-02-10 12:24:43,833 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-19      ] DEBUG SmppConsumer         - Session info: [org.jsmpp.session.SMPPSession@501b2cb9], session state: CLOSED
2011-02-10 12:24:43,833 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-19      ] DEBUG SMPPSession          - Connect and bind to 127.0.0.1 port 2775
2011-02-10 12:24:43,833 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-13      ] INFO  SmppConsumer         - Trying to reconnect to smpp:&lt;span class=&quot;code-comment&quot;&gt;//ubankmobile01@127.0.0.1:2775 - attempt #2...
&lt;/span&gt;2011-02-10 12:24:43,833 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-13      ] DEBUG SmppConsumer         - Session info: [org.jsmpp.session.SMPPSession@501b2cb9], session state: CLOSED
2011-02-10 12:24:43,833 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-19      ] INFO  SMPPSession          - Connected
2011-02-10 12:24:43,833 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-13      ] DEBUG SMPPSession          - Connect and bind to 127.0.0.1 port 2775
2011-02-10 12:24:43,833 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-19      ] DEBUG SmppConsumer         - &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; STATE CHANGE -- CLOSED --&amp;gt; OPEN[org.jsmpp.session.SMPPSession@18dd7404]
2011-02-10 12:24:43,834 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-13      ] INFO  SMPPSession          - Connected
2011-02-10 12:24:43,834 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-22      ] INFO  SMPPSession          - Starting PDUReaderWorker with processor degree:3 ...
2011-02-10 12:24:43,834 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-13      ] DEBUG SmppConsumer         - &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; STATE CHANGE -- CLOSED --&amp;gt; OPEN[org.jsmpp.session.SMPPSession@53606bf5]
2011-02-10 12:24:43,835 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-23      ] INFO  SMPPSession          - Starting PDUReaderWorker with processor degree:3 ...
2011-02-10 12:24:44,972 [pool-7-thread-1] DEBUG stractSessionContext - Activity notified
2011-02-10 12:24:44,972 [pool-7-thread-1] DEBUG SMPPSessionOpen      - Bind Response header (30, 80000001, 0000000d, 1)
2011-02-10 12:24:44,972 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-14      ] DEBUG AbstractSession      - bind response received
2011-02-10 12:24:44,972 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-14      ] ERROR SMPPSession          - Receive negative bind response
org.jsmpp.extra.NegativeResponseException: Negative response 0000000d found
	at org.jsmpp.session.AbstractSession.validateResponse(AbstractSession.java:215)
	at org.jsmpp.session.AbstractSession.executeSendCommand(AbstractSession.java:271)
	at org.jsmpp.session.SMPPSession.sendBind(SMPPSession.java:294)
	at org.jsmpp.session.SMPPSession.connectAndBind(SMPPSession.java:232)
	at org.jsmpp.session.SMPPSession.connectAndBind(SMPPSession.java:200)
	at org.apache.camel.component.smpp.SmppConsumer.createSession(SmppConsumer.java:161)
	at org.apache.camel.component.smpp.SmppConsumer.access$500(SmppConsumer.java:54)
	at org.apache.camel.component.smpp.SmppConsumer$3.run(SmppConsumer.java:223)
2011-02-10 12:24:44,972 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-14      ] DEBUG SmppConsumer         - &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; STATE CHANGE -- OPEN --&amp;gt; CLOSED[org.jsmpp.session.SMPPSession@6a754384]
2011-02-10 12:24:44,973 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-14      ] WARN  SmppConsumer         - Loost connection to: smpp:&lt;span class=&quot;code-comment&quot;&gt;//ubankmobile01@127.0.0.1:2775 - trying to reconnect...
&lt;/span&gt;2011-02-10 12:24:44,973 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-14      ] DEBUG SmppConsumer         - &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; Closing SMPP session [org.jsmpp.session.SMPPSession@501b2cb9]
2011-02-10 12:24:44,973 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-14      ] DEBUG SmppConsumer         - Session info: [org.jsmpp.session.SMPPSession@501b2cb9], session state: CLOSED
2011-02-10 12:24:44,973 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-24      ] INFO  SmppConsumer         - Schedule reconnect after 5000 millis
2011-02-10 12:24:44,973 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-17      ] INFO  SMPPSession          - PDUReaderWorker stop
2011-02-10 12:24:44,973 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-14      ] INFO  SmppConsumer         - Failed to reconnect to smpp:&lt;span class=&quot;code-comment&quot;&gt;//ubankmobile01@127.0.0.1:2775, sessionState == CLOSED
&lt;/span&gt;2011-02-10 12:24:44,974 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-14      ] DEBUG SmppConsumer         - &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; Closing SMPP session [org.jsmpp.session.SMPPSession@501b2cb9]
2011-02-10 12:24:45,958 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-20      ] INFO  SmppConsumer         - Trying to reconnect to smpp:&lt;span class=&quot;code-comment&quot;&gt;//ubankmobile01@127.0.0.1:2775 - attempt #1...
&lt;/span&gt;2011-02-10 12:24:45,958 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-20      ] DEBUG SmppConsumer         - Session info: [org.jsmpp.session.SMPPSession@501b2cb9], session state: CLOSED
2011-02-10 12:24:45,959 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-20      ] DEBUG SMPPSession          - Connect and bind to 127.0.0.1 port 2775
2011-02-10 12:24:45,959 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-10      ] INFO  SmppConsumer         - Trying to reconnect to smpp:&lt;span class=&quot;code-comment&quot;&gt;//ubankmobile01@127.0.0.1:2775 - attempt #3...
&lt;/span&gt;2011-02-10 12:24:45,959 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-10      ] DEBUG SmppConsumer         - Session info: [org.jsmpp.session.SMPPSession@501b2cb9], session state: CLOSED
2011-02-10 12:24:45,959 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-20      ] INFO  SMPPSession          - Connected
2011-02-10 12:24:45,959 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-10      ] DEBUG SMPPSession          - Connect and bind to 127.0.0.1 port 2775
2011-02-10 12:24:45,959 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-20      ] DEBUG SmppConsumer         - &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; STATE CHANGE -- CLOSED --&amp;gt; OPEN[org.jsmpp.session.SMPPSession@684be8b8]
2011-02-10 12:24:45,960 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-10      ] INFO  SMPPSession          - Connected
2011-02-10 12:24:45,960 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-25      ] INFO  SMPPSession          - Starting PDUReaderWorker with processor degree:3 ...
2011-02-10 12:24:45,960 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-10      ] DEBUG SmppConsumer         - &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; STATE CHANGE -- CLOSED --&amp;gt; OPEN[org.jsmpp.session.SMPPSession@79b7d13e]
2011-02-10 12:24:45,960 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-26      ] INFO  SMPPSession          - Starting PDUReaderWorker with processor degree:3 ...
2011-02-10 12:24:47,018 [pool-9-thread-1] DEBUG stractSessionContext - Activity notified
2011-02-10 12:24:47,018 [pool-9-thread-1] DEBUG SMPPSessionOpen      - Bind Response header (30, 80000001, 0000000d, 1)
2011-02-10 12:24:47,018 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-19      ] DEBUG AbstractSession      - bind response received
2011-02-10 12:24:47,018 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-19      ] ERROR SMPPSession          - Receive negative bind response
org.jsmpp.extra.NegativeResponseException: Negative response 0000000d found
	at org.jsmpp.session.AbstractSession.validateResponse(AbstractSession.java:215)
	at org.jsmpp.session.AbstractSession.executeSendCommand(AbstractSession.java:271)
	at org.jsmpp.session.SMPPSession.sendBind(SMPPSession.java:294)
	at org.jsmpp.session.SMPPSession.connectAndBind(SMPPSession.java:232)
	at org.jsmpp.session.SMPPSession.connectAndBind(SMPPSession.java:200)
	at org.apache.camel.component.smpp.SmppConsumer.createSession(SmppConsumer.java:161)
	at org.apache.camel.component.smpp.SmppConsumer.access$500(SmppConsumer.java:54)
	at org.apache.camel.component.smpp.SmppConsumer$3.run(SmppConsumer.java:223)
2011-02-10 12:24:47,018 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-19      ] DEBUG SmppConsumer         - &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; STATE CHANGE -- OPEN --&amp;gt; CLOSED[org.jsmpp.session.SMPPSession@18dd7404]
2011-02-10 12:24:47,019 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-19      ] WARN  SmppConsumer         - Loost connection to: smpp:&lt;span class=&quot;code-comment&quot;&gt;//ubankmobile01@127.0.0.1:2775 - trying to reconnect...
&lt;/span&gt;2011-02-10 12:24:47,019 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-19      ] DEBUG SmppConsumer         - &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; Closing SMPP session [org.jsmpp.session.SMPPSession@501b2cb9]
2011-02-10 12:24:47,019 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-19      ] DEBUG SmppConsumer         - Session info: [org.jsmpp.session.SMPPSession@501b2cb9], session state: CLOSED
2011-02-10 12:24:47,019 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-19      ] INFO  SmppConsumer         - Failed to reconnect to smpp:&lt;span class=&quot;code-comment&quot;&gt;//ubankmobile01@127.0.0.1:2775, sessionState == CLOSED
&lt;/span&gt;2011-02-10 12:24:47,019 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-22      ] INFO  SMPPSession          - PDUReaderWorker stop
2011-02-10 12:24:47,019 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-19      ] DEBUG SmppConsumer         - &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; Closing SMPP session [org.jsmpp.session.SMPPSession@501b2cb9]
2011-02-10 12:24:47,020 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-27      ] INFO  SmppConsumer         - Schedule reconnect after 5000 millis
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Even more re-connect threads being spawned...&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;2011-02-10 12:24:47,823 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-21      ] INFO  SmppConsumer         - Trying to reconnect to smpp:&lt;span class=&quot;code-comment&quot;&gt;//ubankmobile01@127.0.0.1:2775 - attempt #1...
&lt;/span&gt;2011-02-10 12:24:47,823 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-21      ] DEBUG SmppConsumer         - Session info: [org.jsmpp.session.SMPPSession@501b2cb9], session state: CLOSED
2011-02-10 12:24:47,823 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-21      ] DEBUG SMPPSession          - Connect and bind to 127.0.0.1 port 2775
2011-02-10 12:24:47,823 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-8       ] INFO  SmppConsumer         - Trying to reconnect to smpp:&lt;span class=&quot;code-comment&quot;&gt;//ubankmobile01@127.0.0.1:2775 - attempt #4...
&lt;/span&gt;2011-02-10 12:24:47,823 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-8       ] DEBUG SmppConsumer         - Session info: [org.jsmpp.session.SMPPSession@501b2cb9], session state: CLOSED
2011-02-10 12:24:47,823 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-21      ] INFO  SMPPSession          - Connected
2011-02-10 12:24:47,823 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-8       ] DEBUG SMPPSession          - Connect and bind to 127.0.0.1 port 2775
2011-02-10 12:24:47,823 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-21      ] DEBUG SmppConsumer         - &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; STATE CHANGE -- CLOSED --&amp;gt; OPEN[org.jsmpp.session.SMPPSession@490eb6ae]
2011-02-10 12:24:47,824 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-8       ] INFO  SMPPSession          - Connected
2011-02-10 12:24:47,824 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-28      ] INFO  SMPPSession          - Starting PDUReaderWorker with processor degree:3 ...
2011-02-10 12:24:47,824 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-8       ] DEBUG SmppConsumer         - &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; STATE CHANGE -- CLOSED --&amp;gt; OPEN[org.jsmpp.session.SMPPSession@3b4d82e1]
2011-02-10 12:24:47,825 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-29      ] INFO  SMPPSession          - Starting PDUReaderWorker with processor degree:3 ...
2011-02-10 12:24:48,838 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-23      ] DEBUG SMPPSession          - No activity notified
2011-02-10 12:24:48,962 [ool-10-thread-1] DEBUG stractSessionContext - Activity notified
2011-02-10 12:24:48,962 [ool-10-thread-1] DEBUG SMPPSessionOpen      - Bind Response header (30, 80000001, 0000000d, 1)
2011-02-10 12:24:48,962 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-13      ] DEBUG AbstractSession      - bind response received
2011-02-10 12:24:48,962 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-13      ] ERROR SMPPSession          - Receive negative bind response
org.jsmpp.extra.NegativeResponseException: Negative response 0000000d found
	at org.jsmpp.session.AbstractSession.validateResponse(AbstractSession.java:215)
	at org.jsmpp.session.AbstractSession.executeSendCommand(AbstractSession.java:271)
	at org.jsmpp.session.SMPPSession.sendBind(SMPPSession.java:294)
	at org.jsmpp.session.SMPPSession.connectAndBind(SMPPSession.java:232)
	at org.jsmpp.session.SMPPSession.connectAndBind(SMPPSession.java:200)
	at org.apache.camel.component.smpp.SmppConsumer.createSession(SmppConsumer.java:161)
	at org.apache.camel.component.smpp.SmppConsumer.access$500(SmppConsumer.java:54)
	at org.apache.camel.component.smpp.SmppConsumer$3.run(SmppConsumer.java:223)
2011-02-10 12:24:48,963 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-13      ] DEBUG SmppConsumer         - &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; STATE CHANGE -- OPEN --&amp;gt; CLOSED[org.jsmpp.session.SMPPSession@53606bf5]
2011-02-10 12:24:48,963 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-13      ] WARN  SmppConsumer         - Loost connection to: smpp:&lt;span class=&quot;code-comment&quot;&gt;//ubankmobile01@127.0.0.1:2775 - trying to reconnect...
&lt;/span&gt;2011-02-10 12:24:48,963 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-13      ] DEBUG SmppConsumer         - &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; Closing SMPP session [org.jsmpp.session.SMPPSession@501b2cb9]
2011-02-10 12:24:48,963 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-13      ] DEBUG SmppConsumer         - Session info: [org.jsmpp.session.SMPPSession@501b2cb9], session state: CLOSED
2011-02-10 12:24:48,963 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-13      ] INFO  SmppConsumer         - Failed to reconnect to smpp:&lt;span class=&quot;code-comment&quot;&gt;//ubankmobile01@127.0.0.1:2775, sessionState == CLOSED
&lt;/span&gt;2011-02-10 12:24:48,963 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-23      ] INFO  SMPPSession          - PDUReaderWorker stop
2011-02-10 12:24:48,963 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-13      ] DEBUG SmppConsumer         - &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; Closing SMPP session [org.jsmpp.session.SMPPSession@501b2cb9]
2011-02-10 12:24:48,964 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-30      ] INFO  SmppConsumer         - Schedule reconnect after 5000 millis
^C2011-02-10 12:24:49,726 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-5       ] INFO  rt$HangupInterceptor - Received hang up - stopping the main instance.
2011-02-10 12:24:49,726 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-5       ] INFO  MainSupport          - Apache Camel 2.6.0 stopping
2011-02-10 12:24:49,727 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-5       ] DEBUG MainSupport          - Stopping Spring ApplicationContext: org.springframework.context.support.ClassPathXmlApplicationContext@4c9549af
2011-02-10 12:24:49,733 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-5       ] DEBUG SpringCamelContext   - onApplicationEvent: org.springframework.context.event.ContextClosedEvent[source=org.springframework.context.support.ClassPathXmlApplicationContext@4c9549af: startup date [Thu Feb 10 12:23:05 SAST 2011]; root of context hierarchy]
2011-02-10 12:24:49,735 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-5       ] DEBUG ledConnectionFactory - Stop the PooledConnectionFactory, number of connections in cache: 0
2011-02-10 12:24:49,736 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-5       ] INFO  SpringCamelContext   - Apache Camel 2.6.0 (CamelContext:camelTestRouteBuilderContext) is shutting down
2011-02-10 12:24:49,737 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-5       ] INFO  aultShutdownStrategy - Starting to graceful shutdown 1 routes (timeout 300 seconds)
2011-02-10 12:24:49,738 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-5       ] DEBUG cutorServiceStrategy - Created &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; single thread pool &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; source: org.apache.camel.impl.DefaultShutdownStrategy@6e267b76 with name: ShutdownTask. -&amp;gt; java.util.concurrent.Executors$FinalizableDelegatedExecutorService@6ea53502
2011-02-10 12:24:49,742 [ - ShutdownTask] DEBUG aultShutdownStrategy - There are 1 routes to shutdown
2011-02-10 12:24:49,742 [ - ShutdownTask] DEBUG SmppConsumer         - Disconnecting from: smpp:&lt;span class=&quot;code-comment&quot;&gt;//ubankmobile01@127.0.0.1:2775...
&lt;/span&gt;2011-02-10 12:24:49,742 [ - ShutdownTask] DEBUG SmppConsumer         - Closing session: org.jsmpp.session.SMPPSession@501b2cb9
2011-02-10 12:24:49,742 [ - ShutdownTask] DEBUG SmppConsumer         - &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; Closing SMPP session [org.jsmpp.session.SMPPSession@501b2cb9]
2011-02-10 12:24:49,742 [ - ShutdownTask] DEBUG SmppConsumer         - calling &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;.doStop()
2011-02-10 12:24:49,742 [ - ShutdownTask] DEBUG SmppConsumer         - Stopping consumer: SmppConsumer[smpp:&lt;span class=&quot;code-comment&quot;&gt;//ubankmobile01@127.0.0.1:2775]
&lt;/span&gt;2011-02-10 12:24:49,742 [ - ShutdownTask] DEBUG ProcessorEndpoint$1  - Stopping producer: Producer[log:&lt;span class=&quot;code-comment&quot;&gt;//SmppIn]
&lt;/span&gt;2011-02-10 12:24:49,743 [ - ShutdownTask] INFO  SmppConsumer         - Disconnected from: smpp:&lt;span class=&quot;code-comment&quot;&gt;//ubankmobile01@127.0.0.1:2775
&lt;/span&gt;2011-02-10 12:24:49,743 [ - ShutdownTask] DEBUG aultShutdownStrategy - Shutdown complete &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;: SmppConsumer[smpp:&lt;span class=&quot;code-comment&quot;&gt;//ubankmobile01@127.0.0.1:2775]
&lt;/span&gt;2011-02-10 12:24:49,743 [ - ShutdownTask] INFO  aultShutdownStrategy - Route: SmppConsumerRoute shutdown complete, was consuming from: Endpoint[smpp:&lt;span class=&quot;code-comment&quot;&gt;//ubankmobile01@127.0.0.1:2775?amp%3BenquireLinkTimer=55000&amp;amp;amp%3BsystemType=ubankmobile01&amp;amp;amp%3BtransactionTimer=15000&amp;amp;password=******]
&lt;/span&gt;2011-02-10 12:24:49,744 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-5       ] INFO  aultShutdownStrategy - Graceful shutdown of 1 routes completed in 0 seconds
2011-02-10 12:24:49,745 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-5       ] DEBUG faultManagementAgent - Unregistered MBean with objectname: org.apache.camel:context=jacovt-notebook/camelTestRouteBuilderContext,type=routes,name=&lt;span class=&quot;code-quote&quot;&gt;&quot;SmppConsumerRoute&quot;&lt;/span&gt;
2011-02-10 12:24:49,745 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-5       ] DEBUG faultManagementAgent - Unregistered MBean with objectname: org.apache.camel:context=jacovt-notebook/camelTestRouteBuilderContext,type=consumers,name=SmppConsumer(0x59c27402)
2011-02-10 12:24:49,745 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-5       ] DEBUG faultManagementAgent - Unregistered MBean with objectname: org.apache.camel:context=jacovt-notebook/camelTestRouteBuilderContext,type=processors,name=&lt;span class=&quot;code-quote&quot;&gt;&quot;to1&quot;&lt;/span&gt;
2011-02-10 12:24:49,747 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-5       ] DEBUG faultManagementAgent - Unregistered MBean with objectname: org.apache.camel:context=jacovt-notebook/camelTestRouteBuilderContext,type=context,name=&lt;span class=&quot;code-quote&quot;&gt;&quot;camelTestRouteBuilderContext&quot;&lt;/span&gt;
2011-02-10 12:24:49,747 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-5       ] DEBUG cutorServiceStrategy - ShutdownNow ExecutorService: java.util.concurrent.Executors$FinalizableDelegatedExecutorService@6ea53502
2011-02-10 12:24:49,747 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-5       ] INFO  ltInflightRepository - Shutting down with no inflight exchanges.
2011-02-10 12:24:49,747 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-5       ] DEBUG dProducerServicePool - Stopping service pool: org.apache.camel.impl.SharedProducerServicePool@15dbac11
2011-02-10 12:24:49,748 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-5       ] DEBUG cutorServiceStrategy - ShutdownNow ExecutorService: java.util.concurrent.ScheduledThreadPoolExecutor@55fe910c
2011-02-10 12:24:49,748 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-5       ] DEBUG faultManagementAgent - Unregistered MBean with objectname: org.apache.camel:context=jacovt-notebook/camelTestRouteBuilderContext,type=threadpools,name=DefaultErrorHandler(0xa62b39f)
2011-02-10 12:24:49,749 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-5       ] DEBUG faultManagementAgent - Unregistered MBean with objectname: org.apache.camel:context=jacovt-notebook/camelTestRouteBuilderContext,type=components,name=&lt;span class=&quot;code-quote&quot;&gt;&quot;smpp&quot;&lt;/span&gt;
2011-02-10 12:24:49,749 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-5       ] DEBUG faultManagementAgent - Unregistered MBean with objectname: org.apache.camel:context=jacovt-notebook/camelTestRouteBuilderContext,type=endpoints,name=&lt;span class=&quot;code-quote&quot;&gt;&quot;spring-event:&lt;span class=&quot;code-comment&quot;&gt;//&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;&quot;&lt;/span&gt;
&lt;/span&gt;2011-02-10 12:24:49,749 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-5       ] DEBUG faultManagementAgent - Unregistered MBean with objectname: org.apache.camel:context=jacovt-notebook/camelTestRouteBuilderContext,type=services,name=DefaultExecutorServiceStrategy(0x4d12ee4f)
2011-02-10 12:24:49,749 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-5       ] DEBUG faultManagementAgent - Unregistered MBean with objectname: org.apache.camel:context=jacovt-notebook/camelTestRouteBuilderContext,type=endpoints,name=&lt;span class=&quot;code-quote&quot;&gt;&quot;log:&lt;span class=&quot;code-comment&quot;&gt;//SmppIn&quot;&lt;/span&gt;
&lt;/span&gt;2011-02-10 12:24:49,749 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-5       ] DEBUG faultManagementAgent - Unregistered MBean with objectname: org.apache.camel:context=jacovt-notebook/camelTestRouteBuilderContext,type=services,name=ProducerCache(0x3a67ad79)
2011-02-10 12:24:49,749 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-5       ] DEBUG faultManagementAgent - Unregistered MBean with objectname: org.apache.camel:context=jacovt-notebook/camelTestRouteBuilderContext,type=services,name=DefaultTypeConverter(0x61e481c1)
2011-02-10 12:24:49,749 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-5       ] DEBUG faultManagementAgent - Unregistered MBean with objectname: org.apache.camel:context=jacovt-notebook/camelTestRouteBuilderContext,type=services,name=SharedProducerServicePool(0x15dbac11)
2011-02-10 12:24:49,749 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-5       ] DEBUG faultManagementAgent - Unregistered MBean with objectname: org.apache.camel:context=jacovt-notebook/camelTestRouteBuilderContext,type=tracer,name=Tracer(0x3761f888)
2011-02-10 12:24:49,749 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-5       ] DEBUG faultManagementAgent - Unregistered MBean with objectname: org.apache.camel:context=jacovt-notebook/camelTestRouteBuilderContext,type=services,name=DefaultShutdownStrategy(0x6e267b76)
2011-02-10 12:24:49,749 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-5       ] DEBUG faultManagementAgent - Unregistered MBean with objectname: org.apache.camel:context=jacovt-notebook/camelTestRouteBuilderContext,type=components,name=&lt;span class=&quot;code-quote&quot;&gt;&quot;log&quot;&lt;/span&gt;
2011-02-10 12:24:49,750 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-5       ] DEBUG faultManagementAgent - Unregistered MBean with objectname: org.apache.camel:context=jacovt-notebook/camelTestRouteBuilderContext,type=services,name=DefaultInflightRepository(0xf7b650a)
2011-02-10 12:24:49,750 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-5       ] DEBUG faultManagementAgent - Unregistered MBean with objectname: org.apache.camel:context=jacovt-notebook/camelTestRouteBuilderContext,type=endpoints,name=&lt;span class=&quot;code-quote&quot;&gt;&quot;smpp:&lt;span class=&quot;code-comment&quot;&gt;//ubankmobile01@127.0.0.1:2775&quot;&lt;/span&gt;
&lt;/span&gt;2011-02-10 12:24:49,750 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-5       ] DEBUG faultManagementAgent - Unregistered MBean with objectname: org.apache.camel:context=jacovt-notebook/camelTestRouteBuilderContext,type=errorhandlers,name=&lt;span class=&quot;code-quote&quot;&gt;&quot;DefaultErrorHandlerBuilder(ref:CamelDefaultErrorHandlerBuilder)&quot;&lt;/span&gt;
2011-02-10 12:24:49,750 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-5       ] INFO  SpringCamelContext   - Uptime: 1 minute
2011-02-10 12:24:49,750 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-5       ] INFO  SpringCamelContext   - Apache Camel 2.6.0 (CamelContext: camelTestRouteBuilderContext) is shutdown in 0.014 seconds
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;


&lt;p&gt;The above thread-spawning quickly gets out of hand with thousands being created.&lt;/p&gt;

&lt;p&gt;Note however that this problem does not seem to happen when the smsc goes down (session is closed and a connection refused pops up), but only when an unbind happens and then a negative bind.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12498227">CAMEL-3650</key>
            <summary>SMSC initiated unbind spawns exponential amounts of reconnect threads</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="muellerc">Christian M&#252;ller</assignee>
                                    <reporter username="jacovt">Jaco van Tonder</reporter>
                        <labels>
                            <label>smpp</label>
                    </labels>
                <created>Thu, 10 Feb 2011 10:49:42 +0000</created>
                <updated>Tue, 25 Oct 2011 11:35:22 +0000</updated>
                            <resolved>Mon, 28 Feb 2011 18:42:05 +0000</resolved>
                                    <version>2.6.0</version>
                                    <fixVersion>2.7.0</fixVersion>
                                    <component>camel-smpp</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12993068" author="muellerc" created="Thu, 10 Feb 2011 14:35:00 +0000"  >&lt;p&gt;Will have a look on it later today...&lt;/p&gt;</comment>
                            <comment id="12993215" author="muellerc" created="Thu, 10 Feb 2011 20:52:15 +0000"  >&lt;p&gt;Committed r1069564&lt;/p&gt;</comment>
                            <comment id="12993217" author="muellerc" created="Thu, 10 Feb 2011 20:53:56 +0000"  >&lt;p&gt;Jaco, I applied a patch to truck. It would be nice, if you could check whether this patch solves your problem (It&apos;s a bit tricky to test).&lt;/p&gt;</comment>
                            <comment id="12993415" author="jacovt" created="Fri, 11 Feb 2011 09:33:57 +0000"  >&lt;p&gt;Christian,&lt;/p&gt;

&lt;p&gt;Thanks for the quick patch. On first glance it seems to do the trick, I would just like to do a couple more tests to see how it behaves with multiple SMPP consumers, different providers, etc.&lt;/p&gt;

&lt;p&gt;I see the same reconnect also lives in the SmppProducer class. Could we perhaps get the fix in there too?&lt;/p&gt;

&lt;p&gt;Thanks again. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;---Jaco&lt;/p&gt;</comment>
                            <comment id="12993418" author="muellerc" created="Fri, 11 Feb 2011 09:37:43 +0000"  >&lt;p&gt;This should also be fixed in SmppProducer&lt;/p&gt;</comment>
                            <comment id="12993686" author="muellerc" created="Fri, 11 Feb 2011 20:42:37 +0000"  >&lt;p&gt;Committed r1069950&lt;/p&gt;</comment>
                            <comment id="12993687" author="muellerc" created="Fri, 11 Feb 2011 20:44:16 +0000"  >&lt;p&gt;Jaco, I also fixed this issue in SmppProducer. Would be nice, if you also could check, whether this works also for the SMSC you can test with.&lt;/p&gt;</comment>
                            <comment id="12994008" author="jacovt" created="Sun, 13 Feb 2011 01:20:50 +0000"  >&lt;p&gt;Hello Christian,&lt;/p&gt;

&lt;p&gt;I have tested a bit more and after the lock change, it seems that it triggers some more exceptions down the line that stops the threads from reconnecting completely now.&lt;/p&gt;

&lt;p&gt;Here the the full debug session:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;2011-02-13 03:09:30,907 [ing.Main.main()] DEBUG SpringCamelContext   - Route: SmppConsumerRoute &amp;gt;&amp;gt;&amp;gt; EventDrivenConsumerRoute[Endpoint[smpp:&lt;span class=&quot;code-comment&quot;&gt;//ubankmobile01@127.0.0.1:2775?enquireLinkTimer=10000&amp;amp;initialReconnectDelay=30000&amp;amp;password=******&amp;amp;reconnectDelay=15000&amp;amp;transactionTimer=15000] -&amp;gt; Instrumentation:route[UnitOfWork(Channel[sendTo(Endpoint[log://SmppIn])])]]
&lt;/span&gt;2011-02-13 03:09:30,907 [ing.Main.main()] DEBUG SpringCamelContext   - Starting consumer (order: 1000) on route: SmppConsumerRoute
2011-02-13 03:09:30,918 [ing.Main.main()] DEBUG faultManagementAgent - Registered MBean with objectname: org.apache.camel:context=jacovt-notebook/camelTestRouteBuilderContext,type=consumers,name=SmppConsumer(0x3cee5a06)
2011-02-13 03:09:30,918 [ing.Main.main()] DEBUG SmppConsumer         - Connecting to: smpp:&lt;span class=&quot;code-comment&quot;&gt;//ubankmobile01@127.0.0.1:2775...
&lt;/span&gt;2011-02-13 03:09:30,918 [ing.Main.main()] DEBUG SmppConsumer         - Starting consumer: SmppConsumer[smpp:&lt;span class=&quot;code-comment&quot;&gt;//ubankmobile01@127.0.0.1:2775]
&lt;/span&gt;2011-02-13 03:09:30,958 [ing.Main.main()] DEBUG SMPPSession          - Connect and bind to 127.0.0.1 port 2775
2011-02-13 03:09:30,959 [ing.Main.main()] INFO  SMPPSession          - Connected
2011-02-13 03:09:30,959 [ing.Main.main()] DEBUG SmppConsumer         - &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; STATE CHANGE -- CLOSED --&amp;gt; OPEN[org.jsmpp.session.SMPPSession@69d1964d]
2011-02-13 03:09:30,961 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-6       ] INFO  SMPPSession          - Starting PDUReaderWorker with processor degree:3 ...
2011-02-13 03:09:33,005 [pool-1-thread-1] DEBUG stractSessionContext - Activity notified
2011-02-13 03:09:33,005 [pool-1-thread-1] DEBUG SMPPSessionOpen      - Bind Response header (30, 80000001, 00000000, 1)
2011-02-13 03:09:33,007 [ing.Main.main()] DEBUG AbstractSession      - bind response received
2011-02-13 03:09:33,007 [ing.Main.main()] DEBUG SmppConsumer         - &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; STATE CHANGE -- OPEN --&amp;gt; BOUND_RX[org.jsmpp.session.SMPPSession@69d1964d]
2011-02-13 03:09:33,008 [ing.Main.main()] DEBUG SmppConsumer         - Session info: [org.jsmpp.session.SMPPSession@69d1964d], session state: BOUND_RX
2011-02-13 03:09:33,008 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-7       ] INFO  SMPPSession          - Starting EnquireLinkSender
2011-02-13 03:09:33,008 [ing.Main.main()] INFO  SmppConsumer         - Connected to: smpp:&lt;span class=&quot;code-comment&quot;&gt;//ubankmobile01@127.0.0.1:2775
&lt;/span&gt;2011-02-13 03:09:33,009 [ing.Main.main()] INFO  SpringCamelContext   - Route: SmppConsumerRoute started and consuming from: Endpoint[smpp:&lt;span class=&quot;code-comment&quot;&gt;//ubankmobile01@127.0.0.1:2775?enquireLinkTimer=10000&amp;amp;initialReconnectDelay=30000&amp;amp;password=******&amp;amp;reconnectDelay=15000&amp;amp;transactionTimer=15000]
&lt;/span&gt;2011-02-13 03:09:33,010 [ing.Main.main()] DEBUG DefaultComponent     - Creating endpoint uri=[spring-event:&lt;span class=&quot;code-comment&quot;&gt;//&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;], path=[&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;], parameters=[{}]
&lt;/span&gt;2011-02-13 03:09:33,011 [ing.Main.main()] DEBUG SpringCamelContext   - spring-event:&lt;span class=&quot;code-comment&quot;&gt;//&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt; converted to endpoint: Endpoint[spring-event://&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;] by component: org.apache.camel.component.event.EventComponent@110f965e
&lt;/span&gt;2011-02-13 03:09:33,017 [ing.Main.main()] DEBUG faultManagementAgent - Registered MBean with objectname: org.apache.camel:context=jacovt-notebook/camelTestRouteBuilderContext,type=endpoints,name=&lt;span class=&quot;code-quote&quot;&gt;&quot;spring-event:&lt;span class=&quot;code-comment&quot;&gt;//&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;&quot;&lt;/span&gt;
&lt;/span&gt;2011-02-13 03:09:33,017 [ing.Main.main()] INFO  SpringCamelContext   - Total 1 routes, of which 1 is started.
2011-02-13 03:09:33,018 [ing.Main.main()] INFO  SpringCamelContext   - Apache Camel 2.6.0 (CamelContext: camelTestRouteBuilderContext) started in 2.886 seconds
2011-02-13 03:09:33,020 [pool-1-thread-2] DEBUG stractSessionContext - Activity notified
2011-02-13 03:09:33,020 [pool-1-thread-2] DEBUG SMPPSession          - Sending enquire_link_resp
2011-02-13 03:09:33,027 [ing.Main.main()] DEBUG MainSupport          - Starting Spring ApplicationContext: org.springframework.context.support.ClassPathXmlApplicationContext@46eff545
2011-02-13 03:09:33,028 [ing.Main.main()] DEBUG SpringCamelContext   - onApplicationEvent: org.springframework.context.event.ContextStartedEvent[source=org.springframework.context.support.ClassPathXmlApplicationContext@46eff545: startup date [Sun Feb 13 03:09:29 SAST 2011]; root of context hierarchy]
2011-02-13 03:09:43,048 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-6       ] DEBUG SMPPSession          - No activity notified
2011-02-13 03:09:43,048 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-6       ] DEBUG SMPPSession          - Sending enquire link notify
2011-02-13 03:09:45,075 [pool-1-thread-3] DEBUG stractSessionContext - Activity notified
2011-02-13 03:09:45,076 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-7       ] DEBUG AbstractSession      - enquire_link response received
2011-02-13 03:09:55,085 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-6       ] DEBUG SMPPSession          - No activity notified
2011-02-13 03:09:55,085 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-6       ] DEBUG SMPPSession          - Sending enquire link notify
2011-02-13 03:09:55,137 [pool-1-thread-1] DEBUG stractSessionContext - Activity notified
2011-02-13 03:09:55,138 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-7       ] DEBUG AbstractSession      - enquire_link response received
2011-02-13 03:10:05,143 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-6       ] DEBUG SMPPSession          - No activity notified
2011-02-13 03:10:05,143 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-6       ] DEBUG SMPPSession          - Sending enquire link notify
2011-02-13 03:10:05,199 [pool-1-thread-2] DEBUG stractSessionContext - Activity notified
2011-02-13 03:10:05,199 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-7       ] DEBUG AbstractSession      - enquire_link response received
2011-02-13 03:10:15,209 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-6       ] DEBUG SMPPSession          - No activity notified
2011-02-13 03:10:15,209 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-6       ] DEBUG SMPPSession          - Sending enquire link notify
2011-02-13 03:10:15,261 [pool-1-thread-3] DEBUG stractSessionContext - Activity notified
2011-02-13 03:10:15,261 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-7       ] DEBUG AbstractSession      - enquire_link response received
2011-02-13 03:10:25,264 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-6       ] DEBUG SMPPSession          - No activity notified
2011-02-13 03:10:25,264 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-6       ] DEBUG SMPPSession          - Sending enquire link notify
2011-02-13 03:10:25,323 [pool-1-thread-1] DEBUG stractSessionContext - Activity notified
2011-02-13 03:10:25,323 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-7       ] DEBUG AbstractSession      - enquire_link response received
2011-02-13 03:10:31,359 [pool-1-thread-2] DEBUG stractSessionContext - Activity notified
2011-02-13 03:10:31,359 [pool-1-thread-2] INFO  ericSMPPSessionBound - Receving unbind request
2011-02-13 03:10:31,360 [pool-1-thread-2] DEBUG SmppConsumer         - &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; STATE CHANGE -- BOUND_RX --&amp;gt; UNBOUND[org.jsmpp.session.SMPPSession@69d1964d]
2011-02-13 03:10:31,825 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-7       ] INFO  SMPPSession          - EnquireLinkSender stop
2011-02-13 03:10:36,367 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-6       ] DEBUG SmppConsumer         - &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; STATE CHANGE -- UNBOUND --&amp;gt; CLOSED[org.jsmpp.session.SMPPSession@69d1964d]
2011-02-13 03:10:36,367 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-6       ] WARN  SmppConsumer         - Loost connection to: smpp:&lt;span class=&quot;code-comment&quot;&gt;//ubankmobile01@127.0.0.1:2775 - trying to reconnect...
&lt;/span&gt;2011-02-13 03:10:36,367 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-6       ] DEBUG SmppConsumer         - &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; Closing SMPP session [org.jsmpp.session.SMPPSession@69d1964d]
2011-02-13 03:10:36,369 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-8       ] INFO  SmppConsumer         - Schedule reconnect after 30000 millis
2011-02-13 03:11:06,370 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-8       ] INFO  SmppConsumer         - Trying to reconnect to smpp:&lt;span class=&quot;code-comment&quot;&gt;//ubankmobile01@127.0.0.1:2775 - attempt #1...
&lt;/span&gt;2011-02-13 03:11:06,370 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-8       ] DEBUG SmppConsumer         - Session info: [org.jsmpp.session.SMPPSession@69d1964d], session state: CLOSED
2011-02-13 03:11:06,370 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-8       ] DEBUG SMPPSession          - Connect and bind to 127.0.0.1 port 2775
2011-02-13 03:11:06,370 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-8       ] INFO  SMPPSession          - Connected
2011-02-13 03:11:06,371 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-8       ] DEBUG SmppConsumer         - &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; STATE CHANGE -- CLOSED --&amp;gt; OPEN[org.jsmpp.session.SMPPSession@71b456f]
2011-02-13 03:11:06,371 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-9       ] INFO  SMPPSession          - Starting PDUReaderWorker with processor degree:3 ...
2011-02-13 03:11:08,426 [pool-2-thread-1] DEBUG stractSessionContext - Activity notified
2011-02-13 03:11:08,426 [pool-2-thread-1] DEBUG SMPPSessionOpen      - Bind Response header (30, 80000001, 00000000, 1)
2011-02-13 03:11:08,426 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-8       ] DEBUG AbstractSession      - bind response received
2011-02-13 03:11:08,426 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-8       ] DEBUG SmppConsumer         - &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; STATE CHANGE -- OPEN --&amp;gt; BOUND_RX[org.jsmpp.session.SMPPSession@71b456f]
2011-02-13 03:11:08,427 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-8       ] DEBUG SmppConsumer         - Session info: [org.jsmpp.session.SMPPSession@71b456f], session state: BOUND_RX
2011-02-13 03:11:08,427 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-10      ] INFO  SMPPSession          - Starting EnquireLinkSender
2011-02-13 03:11:08,427 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-8       ] INFO  SmppConsumer         - Reconnected to smpp:&lt;span class=&quot;code-comment&quot;&gt;//ubankmobile01@127.0.0.1:2775
&lt;/span&gt;2011-02-13 03:11:08,427 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-8       ] DEBUG SmppConsumer         - Session info: [org.jsmpp.session.SMPPSession@71b456f], session state: BOUND_RX
[WARNING] an additional exception was thrown
java.lang.IllegalMonitorStateException
	at java.util.concurrent.locks.ReentrantLock$Sync.tryRelease(ReentrantLock.java:127)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.release(AbstractQueuedSynchronizer.java:1239)
	at java.util.concurrent.locks.ReentrantLock.unlock(ReentrantLock.java:431)
	at org.apache.camel.component.smpp.SmppConsumer$3.run(SmppConsumer.java:248)
2011-02-13 03:11:08,449 [pool-2-thread-2] DEBUG stractSessionContext - Activity notified
2011-02-13 03:11:08,449 [pool-2-thread-2] DEBUG SMPPSession          - Sending enquire_link_resp
2011-02-13 03:11:18,453 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-9       ] DEBUG SMPPSession          - No activity notified
2011-02-13 03:11:18,454 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-9       ] DEBUG SMPPSession          - Sending enquire link notify
2011-02-13 03:11:18,488 [pool-2-thread-3] DEBUG stractSessionContext - Activity notified
2011-02-13 03:11:18,488 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-10      ] DEBUG AbstractSession      - enquire_link response received
2011-02-13 03:11:28,498 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-9       ] DEBUG SMPPSession          - No activity notified
2011-02-13 03:11:28,498 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-9       ] DEBUG SMPPSession          - Sending enquire link notify
2011-02-13 03:11:28,547 [pool-2-thread-1] DEBUG stractSessionContext - Activity notified
2011-02-13 03:11:28,548 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-10      ] DEBUG AbstractSession      - enquire_link response received
2011-02-13 03:11:38,548 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-9       ] DEBUG SMPPSession          - No activity notified
2011-02-13 03:11:38,548 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-9       ] DEBUG SMPPSession          - Sending enquire link notify
2011-02-13 03:11:38,612 [pool-2-thread-2] DEBUG stractSessionContext - Activity notified
2011-02-13 03:11:38,612 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-10      ] DEBUG AbstractSession      - enquire_link response received
2011-02-13 03:11:48,622 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-9       ] DEBUG SMPPSession          - No activity notified
2011-02-13 03:11:48,622 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-9       ] DEBUG SMPPSession          - Sending enquire link notify
2011-02-13 03:11:48,674 [pool-2-thread-3] DEBUG stractSessionContext - Activity notified
2011-02-13 03:11:48,674 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-10      ] DEBUG AbstractSession      - enquire_link response received
2011-02-13 03:11:58,684 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-9       ] DEBUG SMPPSession          - No activity notified
2011-02-13 03:11:58,684 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-9       ] DEBUG SMPPSession          - Sending enquire link notify
2011-02-13 03:11:58,733 [pool-2-thread-1] DEBUG stractSessionContext - Activity notified
2011-02-13 03:11:58,733 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-10      ] DEBUG AbstractSession      - enquire_link response received
2011-02-13 03:12:08,743 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-9       ] DEBUG SMPPSession          - No activity notified
2011-02-13 03:12:08,743 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-9       ] DEBUG SMPPSession          - Sending enquire link notify
2011-02-13 03:12:08,795 [pool-2-thread-2] DEBUG stractSessionContext - Activity notified
2011-02-13 03:12:08,795 [pool-2-thread-2] INFO  ericSMPPSessionBound - Receving unbind request
2011-02-13 03:12:08,796 [pool-2-thread-2] DEBUG SmppConsumer         - &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; STATE CHANGE -- BOUND_RX --&amp;gt; UNBOUND[org.jsmpp.session.SMPPSession@71b456f]
2011-02-13 03:12:13,802 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-9       ] DEBUG SmppConsumer         - &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; STATE CHANGE -- UNBOUND --&amp;gt; CLOSED[org.jsmpp.session.SMPPSession@71b456f]
2011-02-13 03:12:13,802 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-9       ] WARN  SmppConsumer         - Loost connection to: smpp:&lt;span class=&quot;code-comment&quot;&gt;//ubankmobile01@127.0.0.1:2775 - trying to reconnect...
&lt;/span&gt;2011-02-13 03:12:13,802 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-9       ] DEBUG SmppConsumer         - &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; Closing SMPP session [org.jsmpp.session.SMPPSession@71b456f]
[WARNING] an additional exception was thrown
java.util.ConcurrentModificationException
	at java.util.AbstractList$Itr.checkForComodification(AbstractList.java:372)
	at java.util.AbstractList$Itr.next(AbstractList.java:343)
	at org.jsmpp.session.AbstractSessionContext.fireStateChanged(AbstractSessionContext.java:76)
	at org.jsmpp.session.SMPPSessionContext.changeState(SMPPSessionContext.java:61)
	at org.jsmpp.session.AbstractSessionContext.close(AbstractSessionContext.java:62)
	at org.jsmpp.session.AbstractSession.close(AbstractSession.java:198)
	at org.jsmpp.session.SMPPSession$PDUReaderWorker.readPDU(SMPPSession.java:575)
	at org.jsmpp.session.SMPPSession$PDUReaderWorker.run(SMPPSession.java:539)
2011-02-13 03:12:23,744 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-10      ] INFO  SMPPSession          - EnquireLinkSender stop

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;After this line nothing seems to happen at all, and all threads are dead. Here is a complete thread dump:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2011-02-13 03:18:56
Full thread dump Java HotSpot(TM) 64-Bit Server VM (19.0-b09 mixed mode):

&lt;span class=&quot;code-quote&quot;&gt;&quot;RMI TCP Connection(3)-172.17.5.113&quot;&lt;/span&gt; daemon prio=10 tid=0x0000000042254000 nid=0x236f runnable [0x00007feee3161000]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: RUNNABLE
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.read(SocketInputStream.java:129)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:218)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:237)
	- locked &amp;lt;0x00000000ee284830&amp;gt; (a java.io.BufferedInputStream)
	at java.io.FilterInputStream.read(FilterInputStream.java:66)
	at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:517)
	at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:790)
	at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:649)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:662)

   Locked ownable synchronizers:
	- &amp;lt;0x00000000edd8d548&amp;gt; (a java.util.concurrent.locks.ReentrantLock$NonfairSync)

&lt;span class=&quot;code-quote&quot;&gt;&quot;RMI TCP Connection(2)-172.17.5.113&quot;&lt;/span&gt; daemon prio=10 tid=0x00000000417ff800 nid=0x236d runnable [0x00007feee3262000]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: RUNNABLE
	at java.net.SocketInputStream.socketRead0(Native Method)
	at java.net.SocketInputStream.read(SocketInputStream.java:129)
	at java.io.BufferedInputStream.fill(BufferedInputStream.java:218)
	at java.io.BufferedInputStream.read(BufferedInputStream.java:237)
	- locked &amp;lt;0x00000000ee145210&amp;gt; (a java.io.BufferedInputStream)
	at java.io.FilterInputStream.read(FilterInputStream.java:66)
	at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:517)
	at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:790)
	at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:649)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:662)

   Locked ownable synchronizers:
	- &amp;lt;0x00000000edd8cd40&amp;gt; (a java.util.concurrent.locks.ReentrantLock$NonfairSync)

&lt;span class=&quot;code-quote&quot;&gt;&quot;JMX server connection timeout 41&quot;&lt;/span&gt; daemon prio=10 tid=0x00000000417ef800 nid=0x236a in &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.wait() [0x00007feee3363000]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: TIMED_WAITING (on object monitor)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.wait(Native Method)
	- waiting on &amp;lt;0x00000000edf12f50&amp;gt; (a [I)
	at com.sun.jmx.remote.internal.ServerCommunicatorAdmin$Timeout.run(ServerCommunicatorAdmin.java:150)
	- locked &amp;lt;0x00000000edf12f50&amp;gt; (a [I)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:662)

   Locked ownable synchronizers:
	- None

&lt;span class=&quot;code-quote&quot;&gt;&quot;RMI Scheduler(0)&quot;&lt;/span&gt; daemon prio=10 tid=0x00000000417ee800 nid=0x2369 waiting on condition [0x00007feee3464000]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: TIMED_WAITING (parking)
	at sun.misc.Unsafe.park(Native Method)
	- parking to wait &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;  &amp;lt;0x00000000edc9f6d0&amp;gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)
	at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:198)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.awaitNanos(AbstractQueuedSynchronizer.java:2025)
	at java.util.concurrent.DelayQueue.take(DelayQueue.java:164)
	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:609)
	at java.util.concurrent.ScheduledThreadPoolExecutor$DelayedWorkQueue.take(ScheduledThreadPoolExecutor.java:602)
	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:947)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:907)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:662)

   Locked ownable synchronizers:
	- None

&lt;span class=&quot;code-quote&quot;&gt;&quot;RMI TCP Connection(1)-172.17.5.113&quot;&lt;/span&gt; daemon prio=10 tid=0x0000000041c90800 nid=0x2368 in &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.wait() [0x00007feee3665000]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: TIMED_WAITING (on object monitor)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.wait(Native Method)
	- waiting on &amp;lt;0x00000000ee15ea40&amp;gt; (a com.sun.jmx.remote.internal.ArrayNotificationBuffer)
	at com.sun.jmx.remote.internal.ArrayNotificationBuffer.fetchNotifications(ArrayNotificationBuffer.java:417)
	- locked &amp;lt;0x00000000ee15ea40&amp;gt; (a com.sun.jmx.remote.internal.ArrayNotificationBuffer)
	at com.sun.jmx.remote.internal.ArrayNotificationBuffer$ShareBuffer.fetchNotifications(ArrayNotificationBuffer.java:209)
	at com.sun.jmx.remote.internal.ServerNotifForwarder.fetchNotifs(ServerNotifForwarder.java:258)
	at javax.management.remote.rmi.RMIConnectionImpl$2.run(RMIConnectionImpl.java:1227)
	at javax.management.remote.rmi.RMIConnectionImpl$2.run(RMIConnectionImpl.java:1225)
	at javax.management.remote.rmi.RMIConnectionImpl.fetchNotifications(RMIConnectionImpl.java:1231)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:305)
	at sun.rmi.transport.Transport$1.run(Transport.java:159)
	at java.security.AccessController.doPrivileged(Native Method)
	at sun.rmi.transport.Transport.serviceCall(Transport.java:155)
	at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:535)
	at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:790)
	at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:649)
	at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:662)

   Locked ownable synchronizers:
	- &amp;lt;0x00000000edd8c518&amp;gt; (a java.util.concurrent.locks.ReentrantLock$NonfairSync)

&lt;span class=&quot;code-quote&quot;&gt;&quot;RMI TCP Accept-0&quot;&lt;/span&gt; daemon prio=10 tid=0x0000000041f21000 nid=0x2366 runnable [0x00007feee3ffe000]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: RUNNABLE
	at java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.net.PlainSocketImpl.accept(PlainSocketImpl.java:390)
	- locked &amp;lt;0x00000000edca3180&amp;gt; (a java.net.SocksSocketImpl)
	at java.net.ServerSocket.implAccept(ServerSocket.java:462)
	at java.net.ServerSocket.accept(ServerSocket.java:430)
	at sun.management.jmxremote.LocalRMIServerSocketFactory$1.accept(LocalRMIServerSocketFactory.java:34)
	at sun.rmi.transport.tcp.TCPTransport$AcceptLoop.executeAcceptLoop(TCPTransport.java:369)
	at sun.rmi.transport.tcp.TCPTransport$AcceptLoop.run(TCPTransport.java:341)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:662)

   Locked ownable synchronizers:
	- None

&lt;span class=&quot;code-quote&quot;&gt;&quot;Attach Listener&quot;&lt;/span&gt; daemon prio=10 tid=0x0000000041b8b000 nid=0x2364 waiting on condition [0x0000000000000000]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: RUNNABLE

   Locked ownable synchronizers:
	- None

&lt;span class=&quot;code-quote&quot;&gt;&quot;pool-2-thread-3&quot;&lt;/span&gt; prio=10 tid=0x0000000041b8c000 nid=0x21a9 waiting on condition [0x00007feee3871000]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: WAITING (parking)
	at sun.misc.Unsafe.park(Native Method)
	- parking to wait &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;  &amp;lt;0x00000000ed1215e0&amp;gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)
	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:158)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1987)
	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:399)
	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:947)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:907)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:662)

   Locked ownable synchronizers:
	- None

&lt;span class=&quot;code-quote&quot;&gt;&quot;pool-2-thread-2&quot;&lt;/span&gt; prio=10 tid=0x0000000041c90000 nid=0x21a3 waiting on condition [0x00007feee3c75000]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: WAITING (parking)
	at sun.misc.Unsafe.park(Native Method)
	- parking to wait &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;  &amp;lt;0x00000000ed1215e0&amp;gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)
	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:158)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1987)
	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:399)
	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:947)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:907)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:662)

   Locked ownable synchronizers:
	- None

&lt;span class=&quot;code-quote&quot;&gt;&quot;pool-2-thread-1&quot;&lt;/span&gt; prio=10 tid=0x0000000041b8a000 nid=0x21a1 waiting on condition [0x00007feee3a73000]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: WAITING (parking)
	at sun.misc.Unsafe.park(Native Method)
	- parking to wait &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;  &amp;lt;0x00000000ed1215e0&amp;gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)
	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:158)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1987)
	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:399)
	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:947)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:907)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:662)

   Locked ownable synchronizers:
	- None

&lt;span class=&quot;code-quote&quot;&gt;&quot;pool-1-thread-3&quot;&lt;/span&gt; prio=10 tid=0x0000000041c8f800 nid=0x2173 waiting on condition [0x00007feee8372000]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: WAITING (parking)
	at sun.misc.Unsafe.park(Native Method)
	- parking to wait &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;  &amp;lt;0x00000000ec845238&amp;gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)
	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:158)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1987)
	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:399)
	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:947)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:907)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:662)

   Locked ownable synchronizers:
	- None

&lt;span class=&quot;code-quote&quot;&gt;&quot;pool-1-thread-2&quot;&lt;/span&gt; prio=10 tid=0x00000000418fa800 nid=0x2168 waiting on condition [0x00007feee3b74000]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: WAITING (parking)
	at sun.misc.Unsafe.park(Native Method)
	- parking to wait &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;  &amp;lt;0x00000000ec845238&amp;gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)
	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:158)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1987)
	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:399)
	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:947)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:907)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:662)

   Locked ownable synchronizers:
	- None

&lt;span class=&quot;code-quote&quot;&gt;&quot;pool-1-thread-1&quot;&lt;/span&gt; prio=10 tid=0x00000000418f9000 nid=0x2166 waiting on condition [0x00007feee8170000]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: WAITING (parking)
	at sun.misc.Unsafe.park(Native Method)
	- parking to wait &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;  &amp;lt;0x00000000ec845238&amp;gt; (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)
	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:158)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1987)
	at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:399)
	at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:947)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:907)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:662)

   Locked ownable synchronizers:
	- None

&lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.camel.spring.Main.main()&quot;&lt;/span&gt; prio=10 tid=0x00007feee4420000 nid=0x2164 waiting on condition [0x00007feee8270000]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: WAITING (parking)
	at sun.misc.Unsafe.park(Native Method)
	- parking to wait &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt;  &amp;lt;0x00000000f7bd6a28&amp;gt; (a java.util.concurrent.CountDownLatch$Sync)
	at java.util.concurrent.locks.LockSupport.park(LockSupport.java:158)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.parkAndCheckInterrupt(AbstractQueuedSynchronizer.java:811)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.doAcquireSharedInterruptibly(AbstractQueuedSynchronizer.java:969)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireSharedInterruptibly(AbstractQueuedSynchronizer.java:1281)
	at java.util.concurrent.CountDownLatch.await(CountDownLatch.java:207)
	at org.apache.camel.impl.MainSupport.waitUntilCompleted(MainSupport.java:309)
	at org.apache.camel.impl.MainSupport.run(MainSupport.java:139)
	at org.apache.camel.impl.MainSupport.run(MainSupport.java:322)
	at org.apache.camel.spring.Main.main(Main.java:72)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.apache.camel.maven.RunMojo$1.run(RunMojo.java:415)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:662)

   Locked ownable synchronizers:
	- None

&lt;span class=&quot;code-quote&quot;&gt;&quot;pool-1-thread-5&quot;&lt;/span&gt; prio=10 tid=0x00007feee43a2800 nid=0x213b in &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.wait() [0x00007feee8bc9000]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: WAITING (on object monitor)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.wait(Native Method)
	- waiting on &amp;lt;0x00000000c4b050f8&amp;gt; (a hidden.edu.emory.mathcs.backport.java.util.concurrent.LinkedBlockingQueue$SerializableLock)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.wait(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.java:485)
	at hidden.edu.emory.mathcs.backport.java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:316)
	- locked &amp;lt;0x00000000c4b050f8&amp;gt; (a hidden.edu.emory.mathcs.backport.java.util.concurrent.LinkedBlockingQueue$SerializableLock)
	at hidden.edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:994)
	at hidden.edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1054)
	at hidden.edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:575)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:662)

   Locked ownable synchronizers:
	- None

&lt;span class=&quot;code-quote&quot;&gt;&quot;pool-1-thread-4&quot;&lt;/span&gt; prio=10 tid=0x00007feee42a7800 nid=0x213a in &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.wait() [0x00007feee8cca000]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: WAITING (on object monitor)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.wait(Native Method)
	- waiting on &amp;lt;0x00000000c4b050f8&amp;gt; (a hidden.edu.emory.mathcs.backport.java.util.concurrent.LinkedBlockingQueue$SerializableLock)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.wait(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.java:485)
	at hidden.edu.emory.mathcs.backport.java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:316)
	- locked &amp;lt;0x00000000c4b050f8&amp;gt; (a hidden.edu.emory.mathcs.backport.java.util.concurrent.LinkedBlockingQueue$SerializableLock)
	at hidden.edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:994)
	at hidden.edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1054)
	at hidden.edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:575)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:662)

   Locked ownable synchronizers:
	- None

&lt;span class=&quot;code-quote&quot;&gt;&quot;pool-1-thread-3&quot;&lt;/span&gt; prio=10 tid=0x00000000419b2000 nid=0x2134 in &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.wait() [0x00007feee8dcb000]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: WAITING (on object monitor)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.wait(Native Method)
	- waiting on &amp;lt;0x00000000c4b050f8&amp;gt; (a hidden.edu.emory.mathcs.backport.java.util.concurrent.LinkedBlockingQueue$SerializableLock)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.wait(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.java:485)
	at hidden.edu.emory.mathcs.backport.java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:316)
	- locked &amp;lt;0x00000000c4b050f8&amp;gt; (a hidden.edu.emory.mathcs.backport.java.util.concurrent.LinkedBlockingQueue$SerializableLock)
	at hidden.edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:994)
	at hidden.edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1054)
	at hidden.edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:575)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:662)

   Locked ownable synchronizers:
	- None

&lt;span class=&quot;code-quote&quot;&gt;&quot;pool-1-thread-2&quot;&lt;/span&gt; prio=10 tid=0x00007feee449a800 nid=0x2133 in &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.wait() [0x00007feee8ecc000]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: WAITING (on object monitor)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.wait(Native Method)
	- waiting on &amp;lt;0x00000000c4b050f8&amp;gt; (a hidden.edu.emory.mathcs.backport.java.util.concurrent.LinkedBlockingQueue$SerializableLock)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.wait(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.java:485)
	at hidden.edu.emory.mathcs.backport.java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:316)
	- locked &amp;lt;0x00000000c4b050f8&amp;gt; (a hidden.edu.emory.mathcs.backport.java.util.concurrent.LinkedBlockingQueue$SerializableLock)
	at hidden.edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:994)
	at hidden.edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1054)
	at hidden.edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:575)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:662)

   Locked ownable synchronizers:
	- None

&lt;span class=&quot;code-quote&quot;&gt;&quot;pool-1-thread-1&quot;&lt;/span&gt; prio=10 tid=0x00007feee4400000 nid=0x2132 in &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.wait() [0x00007feee8fcd000]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: WAITING (on object monitor)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.wait(Native Method)
	- waiting on &amp;lt;0x00000000c4b050f8&amp;gt; (a hidden.edu.emory.mathcs.backport.java.util.concurrent.LinkedBlockingQueue$SerializableLock)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.wait(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.java:485)
	at hidden.edu.emory.mathcs.backport.java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:316)
	- locked &amp;lt;0x00000000c4b050f8&amp;gt; (a hidden.edu.emory.mathcs.backport.java.util.concurrent.LinkedBlockingQueue$SerializableLock)
	at hidden.edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:994)
	at hidden.edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1054)
	at hidden.edu.emory.mathcs.backport.java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:575)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:662)

   Locked ownable synchronizers:
	- None

&lt;span class=&quot;code-quote&quot;&gt;&quot;Low Memory Detector&quot;&lt;/span&gt; daemon prio=10 tid=0x0000000041704800 nid=0x212c runnable [0x0000000000000000]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: RUNNABLE

   Locked ownable synchronizers:
	- None

&lt;span class=&quot;code-quote&quot;&gt;&quot;CompilerThread1&quot;&lt;/span&gt; daemon prio=10 tid=0x00007feee406d800 nid=0x212b waiting on condition [0x0000000000000000]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: RUNNABLE

   Locked ownable synchronizers:
	- None

&lt;span class=&quot;code-quote&quot;&gt;&quot;CompilerThread0&quot;&lt;/span&gt; daemon prio=10 tid=0x00007feee406a800 nid=0x212a waiting on condition [0x0000000000000000]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: RUNNABLE

   Locked ownable synchronizers:
	- None

&lt;span class=&quot;code-quote&quot;&gt;&quot;Signal Dispatcher&quot;&lt;/span&gt; daemon prio=10 tid=0x00007feee4068800 nid=0x2129 runnable [0x0000000000000000]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: RUNNABLE

   Locked ownable synchronizers:
	- None

&lt;span class=&quot;code-quote&quot;&gt;&quot;Finalizer&quot;&lt;/span&gt; daemon prio=10 tid=0x00007feee404a000 nid=0x2128 in &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.wait() [0x00007feee98b4000]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: WAITING (on object monitor)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.wait(Native Method)
	- waiting on &amp;lt;0x00000000c467df20&amp;gt; (a java.lang.ref.ReferenceQueue$Lock)
	at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:118)
	- locked &amp;lt;0x00000000c467df20&amp;gt; (a java.lang.ref.ReferenceQueue$Lock)
	at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:134)
	at java.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:159)

   Locked ownable synchronizers:
	- None

&lt;span class=&quot;code-quote&quot;&gt;&quot;Reference Handler&quot;&lt;/span&gt; daemon prio=10 tid=0x00007feee4048000 nid=0x2127 in &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.wait() [0x00007feee99b5000]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: WAITING (on object monitor)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.wait(Native Method)
	- waiting on &amp;lt;0x00000000c467deb8&amp;gt; (a java.lang.ref.Reference$Lock)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.wait(&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.java:485)
	at java.lang.ref.Reference$ReferenceHandler.run(Reference.java:116)
	- locked &amp;lt;0x00000000c467deb8&amp;gt; (a java.lang.ref.Reference$Lock)

   Locked ownable synchronizers:
	- None

&lt;span class=&quot;code-quote&quot;&gt;&quot;main&quot;&lt;/span&gt; prio=10 tid=0x00000000416e3000 nid=0x2121 in &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.wait() [0x00007feeee8c4000]
   java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.State: WAITING (on object monitor)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;.wait(Native Method)
	- waiting on &amp;lt;0x00000000f7bd56c0&amp;gt; (a java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.join(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:1186)
	- locked &amp;lt;0x00000000f7bd56c0&amp;gt; (a java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;)
	at org.apache.camel.maven.RunMojo.joinThread(RunMojo.java:511)
	at org.apache.camel.maven.RunMojo.joinNonDaemonThreads(RunMojo.java:503)
	at org.apache.camel.maven.RunMojo.execute(RunMojo.java:430)
	at org.apache.maven.plugin.DefaultPluginManager.executeMojo(DefaultPluginManager.java:490)
	at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:694)
	at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeStandaloneGoal(DefaultLifecycleExecutor.java:569)
	at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoal(DefaultLifecycleExecutor.java:539)
	at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalAndHandleFailures(DefaultLifecycleExecutor.java:387)
	at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeTaskSegments(DefaultLifecycleExecutor.java:348)
	at org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLifecycleExecutor.java:180)
	at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:328)
	at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:138)
	at org.apache.maven.cli.MavenCli.main(MavenCli.java:362)
	at org.apache.maven.cli.compat.CompatibleMain.main(CompatibleMain.java:60)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.codehaus.classworlds.Launcher.launchEnhanced(Launcher.java:315)
	at org.codehaus.classworlds.Launcher.launch(Launcher.java:255)
	at org.codehaus.classworlds.Launcher.mainWithExitCode(Launcher.java:430)
	at org.codehaus.classworlds.Launcher.main(Launcher.java:375)

   Locked ownable synchronizers:
	- None

&lt;span class=&quot;code-quote&quot;&gt;&quot;VM &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;&quot;&lt;/span&gt; prio=10 tid=0x00007feee4044000 nid=0x2126 runnable 

&lt;span class=&quot;code-quote&quot;&gt;&quot;GC task thread#0 (ParallelGC)&quot;&lt;/span&gt; prio=10 tid=0x00000000416f6000 nid=0x2122 runnable 

&lt;span class=&quot;code-quote&quot;&gt;&quot;GC task thread#1 (ParallelGC)&quot;&lt;/span&gt; prio=10 tid=0x00000000416f8000 nid=0x2123 runnable 

&lt;span class=&quot;code-quote&quot;&gt;&quot;GC task thread#2 (ParallelGC)&quot;&lt;/span&gt; prio=10 tid=0x00000000416fa000 nid=0x2124 runnable 

&lt;span class=&quot;code-quote&quot;&gt;&quot;GC task thread#3 (ParallelGC)&quot;&lt;/span&gt; prio=10 tid=0x00000000416fb800 nid=0x2125 runnable 

&lt;span class=&quot;code-quote&quot;&gt;&quot;VM Periodic Task &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;&quot;&lt;/span&gt; prio=10 tid=0x000000004170f000 nid=0x212d waiting on condition 

JNI global references: 1696
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It seems that this might be triggered by a bug in jsmpp itself (The concurrent modification exception)&lt;/p&gt;

&lt;p&gt;Thanks,&lt;br/&gt;
---Jaco&lt;/p&gt;</comment>
                            <comment id="12994155" author="muellerc" created="Sun, 13 Feb 2011 21:44:08 +0000"  >&lt;p&gt;Jaco,&lt;br/&gt;
thanks for reporting this and your very useful tests. I found an issue in SmppConsumer and fixed it. Could you please test the latest version again.&lt;br/&gt;
Thanks,&lt;br/&gt;
Christian&lt;/p&gt;</comment>
                            <comment id="12994265" author="jacovt" created="Mon, 14 Feb 2011 11:11:50 +0000"  >&lt;p&gt;Hello Christian,&lt;/p&gt;

&lt;p&gt;Just had a quick test, the same problem seems to persist even after the latest bugfix. Here are the logs:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;2011-02-14 12:54:57,128 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-8       ] DEBUG SmppConsumer         - Session info: [org.jsmpp.session.SMPPSession@590a8143], session state: CLOSED
2011-02-14 12:54:57,129 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-8       ] DEBUG SMPPSession          - Connect and bind to 127.0.0.1 port 2775
2011-02-14 12:54:57,129 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-8       ] INFO  SMPPSession          - Connected
2011-02-14 12:54:57,129 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-8       ] DEBUG SmppConsumer         - &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; STATE CHANGE -- CLOSED --&amp;gt; OPEN[org.jsmpp.session.SMPPSession@5d748654]
2011-02-14 12:54:57,130 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-9       ] INFO  SMPPSession          - Starting PDUReaderWorker with processor degree:3 ...
2011-02-14 12:54:59,726 [pool-2-thread-1] DEBUG stractSessionContext - Activity notified
2011-02-14 12:54:59,727 [pool-2-thread-1] DEBUG SMPPSessionOpen      - Bind Response header (30, 80000001, 00000000, 1)
2011-02-14 12:54:59,727 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-8       ] DEBUG AbstractSession      - bind response received
2011-02-14 12:54:59,727 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-8       ] DEBUG SmppConsumer         - &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; STATE CHANGE -- OPEN --&amp;gt; BOUND_RX[org.jsmpp.session.SMPPSession@5d748654]
2011-02-14 12:54:59,727 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-8       ] DEBUG SmppConsumer         - Session info: [org.jsmpp.session.SMPPSession@5d748654], session state: BOUND_RX
2011-02-14 12:54:59,728 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-10      ] INFO  SMPPSession          - Starting EnquireLinkSender
2011-02-14 12:54:59,728 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-8       ] INFO  SmppConsumer         - Reconnected to smpp:&lt;span class=&quot;code-comment&quot;&gt;//ubankmobile01@127.0.0.1:2775
&lt;/span&gt;2011-02-14 12:54:59,728 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-8       ] DEBUG SmppConsumer         - Session info: [org.jsmpp.session.SMPPSession@5d748654], session state: BOUND_RX
[WARNING] an additional exception was thrown
java.lang.IllegalMonitorStateException
	at java.util.concurrent.locks.ReentrantLock$Sync.tryRelease(ReentrantLock.java:127)
	at java.util.concurrent.locks.AbstractQueuedSynchronizer.release(AbstractQueuedSynchronizer.java:1239)
	at java.util.concurrent.locks.ReentrantLock.unlock(ReentrantLock.java:431)
	at org.apache.camel.component.smpp.SmppConsumer$3.run(SmppConsumer.java:248)
2011-02-14 12:55:00,062 [pool-2-thread-2] DEBUG stractSessionContext - Activity notified
2011-02-14 12:55:00,062 [pool-2-thread-2] DEBUG SMPPSession          - Sending enquire_link_resp
2011-02-14 12:55:10,072 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-9       ] DEBUG SMPPSession          - No activity notified
2011-02-14 12:55:10,072 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-9       ] DEBUG SMPPSession          - Sending enquire link notify
2011-02-14 12:55:11,802 [pool-2-thread-3] DEBUG stractSessionContext - Activity notified
2011-02-14 12:55:11,802 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-10      ] DEBUG AbstractSession      - enquire_link response received
2011-02-14 12:55:21,803 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-9       ] DEBUG SMPPSession          - No activity notified
2011-02-14 12:55:21,803 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-9       ] DEBUG SMPPSession          - Sending enquire link notify
2011-02-14 12:55:24,858 [pool-2-thread-1] DEBUG stractSessionContext - Activity notified
2011-02-14 12:55:24,858 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-10      ] DEBUG AbstractSession      - enquire_link response received
2011-02-14 12:55:34,868 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-9       ] DEBUG SMPPSession          - No activity notified
2011-02-14 12:55:34,868 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-9       ] DEBUG SMPPSession          - Sending enquire link notify
2011-02-14 12:55:36,067 [pool-2-thread-2] DEBUG stractSessionContext - Activity notified
2011-02-14 12:55:36,067 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-10      ] DEBUG AbstractSession      - enquire_link response received
2011-02-14 12:55:46,076 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-9       ] DEBUG SMPPSession          - No activity notified
2011-02-14 12:55:46,076 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-9       ] DEBUG SMPPSession          - Sending enquire link notify
2011-02-14 12:55:48,176 [pool-2-thread-3] DEBUG stractSessionContext - Activity notified
2011-02-14 12:55:48,176 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-10      ] DEBUG AbstractSession      - enquire_link response received
2011-02-14 12:55:58,174 [pool-2-thread-1] DEBUG stractSessionContext - Activity notified
2011-02-14 12:55:58,174 [pool-2-thread-1] INFO  ericSMPPSessionBound - Receving unbind request
2011-02-14 12:55:58,175 [pool-2-thread-1] DEBUG SmppConsumer         - &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; STATE CHANGE -- BOUND_RX --&amp;gt; UNBOUND[org.jsmpp.session.SMPPSession@5d748654]
2011-02-14 12:55:58,179 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-10      ] INFO  SMPPSession          - EnquireLinkSender stop
2011-02-14 12:56:03,138 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-9       ] DEBUG SmppConsumer         - &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; STATE CHANGE -- UNBOUND --&amp;gt; CLOSED[org.jsmpp.session.SMPPSession@5d748654]
2011-02-14 12:56:03,138 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-9       ] WARN  SmppConsumer         - Loost connection to: smpp:&lt;span class=&quot;code-comment&quot;&gt;//ubankmobile01@127.0.0.1:2775 - trying to reconnect...
&lt;/span&gt;2011-02-14 12:56:03,138 [&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;-9       ] DEBUG SmppConsumer         - &amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt; Closing SMPP session [org.jsmpp.session.SMPPSession@5d748654]
[WARNING] an additional exception was thrown
java.util.ConcurrentModificationException
	at java.util.AbstractList$Itr.checkForComodification(AbstractList.java:372)
	at java.util.AbstractList$Itr.next(AbstractList.java:343)
	at org.jsmpp.session.AbstractSessionContext.fireStateChanged(AbstractSessionContext.java:76)
	at org.jsmpp.session.SMPPSessionContext.changeState(SMPPSessionContext.java:61)
	at org.jsmpp.session.AbstractSessionContext.close(AbstractSessionContext.java:62)
	at org.jsmpp.session.AbstractSession.close(AbstractSession.java:198)
	at org.jsmpp.session.SMPPSession$PDUReaderWorker.readPDU(SMPPSession.java:575)
	at org.jsmpp.session.SMPPSession$PDUReaderWorker.run(SMPPSession.java:539)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The first exception bugs be a bit, I don&apos;t think that the locking / unlocking of the thread is working as expected. Reason I am saying this is that it throws that IllegalMonitorStateException the very first time it reaches the unlock() portion of the reconnect code.&lt;/p&gt;

&lt;p&gt;Hope this helps.&lt;br/&gt;
---Jaco&lt;/p&gt;</comment>
                            <comment id="12994277" author="jacovt" created="Mon, 14 Feb 2011 12:32:35 +0000"  >&lt;p&gt;Hello Christian,&lt;/p&gt;

&lt;p&gt;I have spotted where the IllegalMonitorStateException comes from: in the reconnect method, the recconectLock is locked outside of the new thread that gets spawned to reconnect the smpp session, but the unlock() is done inside of the thread that gets created, meaning that the inner thread does not own the lock.&lt;/p&gt;

&lt;p&gt;Would it not make more sense to make this whole reconnect method synchronized?&lt;/p&gt;

&lt;p&gt;Thank you! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
---Jaco&lt;/p&gt;</comment>
                            <comment id="12994925" author="muellerc" created="Tue, 15 Feb 2011 18:47:39 +0000"  >&lt;p&gt;Yeah, well spotted. I wanted check the java doc for the ReentrantLock, but I forgot it... &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
Anyway, I think I could solve it. The lock is now released in the same thread (Committed r1071012).&lt;/p&gt;

&lt;p&gt;Could you check it again, please? And by the way, do you use a open source or free ware tool for your tests which I could also use?&lt;/p&gt;

&lt;p&gt;Christian&lt;/p&gt;</comment>
                            <comment id="12995240" author="jacovt" created="Wed, 16 Feb 2011 10:26:49 +0000"  >&lt;p&gt;Christian,&lt;/p&gt;

&lt;p&gt;Thanks for the patch. I have just updated and tested it a bit. The ConcurrentModificationException persists. This seems to have something to do with the way the JSMPP session is disposed of (I don&apos;t think it actually dies). I can see this when I have visualvm connected to the JMX endoint exposed from camel. For every reconnect the live thread count increases (meaning those old threads never seems to die).&lt;/p&gt;

&lt;p&gt;I am in the process of creating a thread dump to attach to this issue so you can have a better look. I could possibly also create the actual dump (including heap and references) that you can inspect?&lt;/p&gt;

&lt;p&gt;I am currently not using a simulator for this testing, SMPPsim does not have unbind available from the simulator side. I did ask the developers over there to implement that functionality, but they are lacking time at the moment to do so. I have added you on gtalk to discuss a possible testing scenario from your side. I assume you have gtalk access?&lt;/p&gt;

&lt;p&gt;---Jaco&lt;/p&gt;</comment>
                            <comment id="12999947" author="muellerc" created="Sun, 27 Feb 2011 12:43:33 +0000"  >&lt;p&gt;The ConcurrentModificationException is thrown inside the jsmpp library when I remove the sessionStateListener and call unbindAndClose:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;session.removeSessionStateListener(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.sessionStateListener);
session.unbindAndClose();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I removed the calls to removeSessionStateListener which should work around this issue:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;session.unbindAndClose();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This should not be a problem, but without a good test SMSC it&apos;s hard to test it.&lt;/p&gt;

&lt;p&gt;I will work on a simple SMSC test implementation with which we can automate out integration unit tests.&lt;/p&gt;

&lt;p&gt;@Jaco: Could you please test the latest trunk version!?&lt;/p&gt;</comment>
                            <comment id="12999948" author="muellerc" created="Sun, 27 Feb 2011 12:43:41 +0000"  >&lt;p&gt;Committed r1075042&lt;/p&gt;</comment>
                            <comment id="12999952" author="muellerc" created="Sun, 27 Feb 2011 12:58:37 +0000"  >&lt;p&gt;Report the jsmpp issue: &lt;a href=&quot;http://code.google.com/p/jsmpp/issues/detail?id=93&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://code.google.com/p/jsmpp/issues/detail?id=93&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13000260" author="jacovt" created="Mon, 28 Feb 2011 12:27:37 +0000"  >&lt;p&gt;Hello Christian,&lt;/p&gt;

&lt;p&gt;Thanks for the updates and the defect that you logged over at jsmpp.&lt;/p&gt;

&lt;p&gt;I had a quick look at the code, and yes, you are right. The bug seems to be inside of jsmpp when removing the session from an array that is not 100% thread safe.&lt;/p&gt;

&lt;p&gt;From my side I would suggest we keep the call to session.removeSessionStateListener() in the camel-smpp code. This is the correct behavior from camel&apos;s point of view. The ConcurrentModificationException &lt;b&gt;should&lt;/b&gt; not have an effect on the camel route, but it will definitely keep the thread alive (as witnessed in the stack trace / thread dump a couple of comments above) because of the still-active listener.&lt;/p&gt;

&lt;p&gt;Even with the current trunk version of the code (the code that removed session.removeSessionStateListener()) the threads will stay alive, since there is still a listener attached.&lt;/p&gt;

&lt;p&gt;As a workaround in the camel-smpp code, I wonder if it would be possible to surround this with a try/catch block to catch the ConcurrentModificationException: &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;session.removeSessionStateListener(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.sessionStateListener);
session.unbindAndClose();
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I know that would not be the cleanest solution in the world, but doing it that way, we can warn the user about the problem (LOG.warn() on exception comes to mind) and the code will not have to change once jsmpp fixes the bug. Or should we rather let the exception boil all the way up and let onException() in camel handle it? We would have to document this on the camel-smpp wiki page though. This will also not fix the memory leak, but at least the code will work out of the box when the jsmpp bug is fixed and the new bundle is dropped into servicemix.&lt;/p&gt;

&lt;p&gt;I also suggest we try to get a patch together to fix the jsmpp bug and submit it. I will see if I can get around to do that. That way we can see how quickly we can get the bug fixed in jsmpp and let the nice folk over at servicemix build an updated OSGi-aware bundle for jsmpp.&lt;/p&gt;

&lt;p&gt;Ideas?&lt;/p&gt;

&lt;p&gt;Thank you,&lt;br/&gt;
---Jaco&lt;/p&gt;</comment>
                            <comment id="13000458" author="muellerc" created="Mon, 28 Feb 2011 18:39:47 +0000"  >&lt;p&gt;I will go for the following solution:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;session.removeSessionStateListener(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.sessionStateListener);
&lt;span class=&quot;code-comment&quot;&gt;// remove &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; hack after http://code.google.com/p/jsmpp/issues/detail?id=93 is fixed
&lt;/span&gt;&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
    &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.sleep(1000);
    session.unbindAndClose();
} &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Exception e) {
    LOG.warn(&lt;span class=&quot;code-quote&quot;&gt;&quot;Could not close session &quot;&lt;/span&gt; + session);
}
session = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;With a little sleep which only has an affect if we shutdown the component or if we have to reconnect, the problem could be solved (I will test it when we have a good test SMSC implementation we can use).&lt;br/&gt;
However, I added also the try catch block to be sure, the ConcurrentModificationException will not boil all the way up to our user.&lt;/p&gt;

&lt;p&gt;Do you agree?&lt;/p&gt;

&lt;p&gt;Christian&lt;/p&gt;</comment>
                            <comment id="13000459" author="muellerc" created="Mon, 28 Feb 2011 18:41:44 +0000"  >&lt;p&gt;Committed r1075473&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>76211</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 39 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i01w1r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>8961</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>