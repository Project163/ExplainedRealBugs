<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 09:57:56 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-6464] connectionTimeout property is ignored by JavaMail</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-6464</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;JavaMail ignores the timeout values set via the connectionTimeout property.&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Within MailConfiguration::createJavaMailProperties the mail.&amp;lt;protocol&amp;gt;.timeout and mail.&amp;lt;protocol&amp;gt;.connectionTimeout parameters are set as long values&lt;/li&gt;
	&lt;li&gt;In com.sun.mail.util.PropUtil::getInt (line 141) the property is ignored since it is a long value&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Changing the type of connectionTimeout from long to int would be the cleanest solution - another suggestion would be to downcast the connectionTimeout in MailConfiguration::createJavaMailProperties&lt;/p&gt;</description>
                <environment>&lt;p&gt;mail-1.4.5.jar&lt;/p&gt;</environment>
        <key id="12653181">CAMEL-6464</key>
            <summary>connectionTimeout property is ignored by JavaMail</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="muellerc">Christian M&#252;ller</assignee>
                                    <reporter username="marcozapletal">Marco Zapletal</reporter>
                        <labels>
                    </labels>
                <created>Mon, 17 Jun 2013 12:21:25 +0000</created>
                <updated>Fri, 21 Jun 2013 15:32:21 +0000</updated>
                            <resolved>Thu, 20 Jun 2013 20:22:12 +0000</resolved>
                                    <version>2.10.2</version>
                                    <fixVersion>2.10.5</fixVersion>
                    <fixVersion>2.11.1</fixVersion>
                    <fixVersion>2.12.0</fixVersion>
                                    <component>camel-mail</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13688503" author="muellerc" created="Wed, 19 Jun 2013 21:43:49 +0000"  >&lt;p&gt;Marco, do you consider to provide a patch and an unit test which shows this issue?&lt;/p&gt;</comment>
                            <comment id="13689349" author="marcozapletal" created="Thu, 20 Jun 2013 15:49:45 +0000"  >&lt;p&gt;The problem of this issue is that setting a long property on com.sun.mail.util.SocketFetcher::getSocket has no effect. However, providing a good test for it is difficult, since the properties are set on the socket on creation and I get no handle of the socket (through the Camel mail component) after creation. &lt;/p&gt;

&lt;p&gt;I am happy to provide a patch, which I would &quot;test&quot; by debugging it before attaching it here. Actually, there are two ways to patch it and both are quite simple: (a) changing the type of connectionTimeout from long to int or (b) downcast the long to an int before setting the mail.&amp;lt;protocol&amp;gt;.timeout value. I would opt for (a) but this may break the API - so I would appreciate your opinion on this before providing the patch.&lt;/p&gt;</comment>
                            <comment id="13689547" author="muellerc" created="Thu, 20 Jun 2013 19:24:36 +0000"  >&lt;p&gt;Thanks Marco for reporting this issue. I understood it&apos;s hard/impossible to unit test.&lt;/p&gt;

&lt;p&gt;I&apos;m also +1 to change the connectionTimeout type from long to int. It&apos;s theoretically not backwards compatible, but only if somebody did something like this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;mailConfiguration.setConnectionTimeout(30000L);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I think most of the user configure it with the uri or by using&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;mailConfiguration.setConnectionTimeout(30000);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;which is backwards compatible.&lt;/p&gt;

&lt;p&gt;I will go ahead and and do the proposed fixed in a few minutes. It would be great if you could verify it with the latest SNAPSHOT versions (2.10.x, 2.11.x, 2.12.x). It should be available tomorrow.&lt;/p&gt;</comment>
                            <comment id="13690393" author="marcozapletal" created="Fri, 21 Jun 2013 15:32:21 +0000"  >&lt;p&gt;I can verify that 2.11.1-SNAPSHOT fixes this issue. Thank you Christian for the quick fix.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>333504</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 22 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1lj5b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>333832</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>