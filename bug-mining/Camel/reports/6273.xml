<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:58:06 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-18585] Validator: investigate strange validator behavior</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-18585</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;A user reported a strange behavior with the Validator. It appears - though not yet confirmed - that the validator is not being called in some circumstances.&lt;/p&gt;


&lt;p&gt;A reproducer was provided: &lt;a href=&quot;https://github.com/Croway/camel/blob/validator-with-scheduler/core/camel-core/src/test/java/org/apache/camel/component/validator/ValidatorWithSchedulerTest.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/Croway/camel/blob/validator-with-scheduler/core/camel-core/src/test/java/org/apache/camel/component/validator/ValidatorWithSchedulerTest.java&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13484580">CAMEL-18585</key>
            <summary>Validator: investigate strange validator behavior</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="10004">Not A Bug</resolution>
                                        <assignee username="orpiske">Otavio Rodolfo Piske</assignee>
                                    <reporter username="orpiske">Otavio Rodolfo Piske</reporter>
                        <labels>
                    </labels>
                <created>Wed, 5 Oct 2022 10:15:05 +0000</created>
                <updated>Thu, 20 Oct 2022 13:00:07 +0000</updated>
                            <resolved>Thu, 20 Oct 2022 13:00:07 +0000</resolved>
                                    <version>3.18.2</version>
                    <version>3.19.0</version>
                                    <fixVersion>3.18.3</fixVersion>
                    <fixVersion>3.20.0</fixVersion>
                                    <component>camel-validator</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17619354" author="davsclaus" created="Tue, 18 Oct 2022 08:44:20 +0000"  >&lt;p&gt;Ah its the route contract stuff that are seldom in use. &lt;/p&gt;

&lt;p&gt;Instead of using a scheduler then start the test with a direct and call it, otherwise the scheduler can trigger before the test method&lt;/p&gt;</comment>
                            <comment id="17619399" author="orpiske" created="Tue, 18 Oct 2022 09:40:13 +0000"  >&lt;p&gt;C/c: &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=Federico+Mariani&quot; class=&quot;user-hover&quot; rel=&quot;Federico Mariani&quot;&gt;Federico Mariani&lt;/a&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="17619409" author="federico mariani" created="Tue, 18 Oct 2022 09:46:38 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davsclaus&quot; class=&quot;user-hover&quot; rel=&quot;davsclaus&quot;&gt;davsclaus&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=orpiske&quot; class=&quot;user-hover&quot; rel=&quot;orpiske&quot;&gt;orpiske&lt;/a&gt;, if &lt;em&gt;otherwise the scheduler can trigger before the test method&lt;/em&gt; is expected I&apos;m ok with it, I think that there is a StackOverflow question about it and all the tests use &quot;direct&quot;. &lt;/p&gt;

&lt;p&gt;My concern was, what if instead of &quot;scheduler&quot; I&apos;m using another component like &quot;jms&quot;? do I have to create another route in order to use the Validator? again, if this is expected, the issue can be closed then.&lt;/p&gt;</comment>
                            <comment id="17619446" author="davsclaus" created="Tue, 18 Oct 2022 10:36:01 +0000"  >&lt;p&gt;Its more about the mocks, when they are being setup in the test method, then a mock endpoint may already have received X messages prior. &lt;/p&gt;

&lt;p&gt;However in this case the mock tests are only that 1 message arrived etc, so its safter, but its still better to do&lt;/p&gt;

&lt;p&gt;@Test&lt;br/&gt;
public void testMethodHere&lt;br/&gt;
1. setup mock expecations&lt;/p&gt;

&lt;p&gt;2. use template to send message(s) to the route&lt;/p&gt;

&lt;p&gt;3. assert mocks&lt;/p&gt;

&lt;p&gt;This is explained in the CiA2 book in the testing chapter.&lt;/p&gt;</comment>
                            <comment id="17619477" author="davsclaus" created="Tue, 18 Oct 2022 12:13:48 +0000"  >&lt;p&gt;Ah okay so this is not a bug, the inputTypeWithValidate validates what the message body is from the consumer. Because the consumer is scheduler, then the message body is null/empty.&lt;br/&gt;
You then afterwards set the message body via setBody, which does not trigger inputTypeWithValidate.&lt;/p&gt;

&lt;p&gt;However if you use direct and send a message body to this route then it works.&lt;/p&gt;

&lt;p&gt;See this test&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/camel/commit/f06229ac118ea4bbda20eb095963db9a02da7c57&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/commit/f06229ac118ea4bbda20eb095963db9a02da7c57&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17619685" author="federico mariani" created="Tue, 18 Oct 2022 16:21:57 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davsclaus&quot; class=&quot;user-hover&quot; rel=&quot;davsclaus&quot;&gt;davsclaus&lt;/a&gt; thanks for your feedback. &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 Because the consumer is scheduler, then the message body is &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;/empty.
You then afterwards set the message body via setBody, which does not trigger inputTypeWithValidate.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;makes sense!&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=orpiske&quot; class=&quot;user-hover&quot; rel=&quot;orpiske&quot;&gt;orpiske&lt;/a&gt; this issue can be closed as explained, thank you.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 4 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z192qw:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>