<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 09:37:04 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-2360] recipientList retryUntil not working</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-2360</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;summary:&lt;br/&gt;
the bean gets intialized but it looks like the method retryUntil is never called, could it be an error of implementation? am I doing something wrong?&lt;/p&gt;

&lt;p&gt;using following route:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;from(&lt;span class=&quot;code-quote&quot;&gt;&quot;jms-test:queue:queue.delivery.notification.test&quot;&lt;/span&gt;) 
.process(processor) 
.onException(Exception.class).retryUntil(bean(&lt;span class=&quot;code-quote&quot;&gt;&quot;myRetryBean&quot;&lt;/span&gt;)).end() 
.recipientList(header(&lt;span class=&quot;code-quote&quot;&gt;&quot;recipientListHeader&quot;&lt;/span&gt;).tokenize(&lt;span class=&quot;code-quote&quot;&gt;&quot;,&quot;&lt;/span&gt;)) 
.parallelProcessing().executorService(customThreadPoolExecutor) 
.aggregationStrategy(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; RecipientAggregationStrategy()) 
.to(&lt;span class=&quot;code-quote&quot;&gt;&quot;direct:chunk.completed&quot;&lt;/span&gt;); 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;bean is registered in such way: &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;JndiRegistry jndi = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JndiRegistry(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; JndiContext()); 
jndi.bind(&lt;span class=&quot;code-quote&quot;&gt;&quot;myRetryBean&quot;&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; RetryBean()); 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;bean class is: &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;RetryBean { 

        &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; _invoked; 
        &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; Logger _logger; 
        
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; RetryBean() { 
    &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;._logger = Logger.getLogger(RetryBean.class); 
    &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;._invoked = 0; 
    _logger.debug(&lt;span class=&quot;code-quote&quot;&gt;&quot;BEAN INITIALIZED &quot;&lt;/span&gt; + _invoked); 
    } 
        
    &lt;span class=&quot;code-comment&quot;&gt;// using bean binding we can bind the information from the exchange to the types we have in our method signature 
&lt;/span&gt;    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; retryUntil(@Header(Exchange.REDELIVERY_COUNTER) &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt; counter, @Body &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; body, @ExchangeException Exception causedBy) { 
        &lt;span class=&quot;code-comment&quot;&gt;// NOTE: counter is the redelivery attempt, will start from 1 
&lt;/span&gt;    _invoked++; 
    
    
    _logger.debug(&lt;span class=&quot;code-quote&quot;&gt;&quot;invoked&quot;&lt;/span&gt; + _invoked); 
    _logger.debug(&lt;span class=&quot;code-quote&quot;&gt;&quot;counter&quot;&lt;/span&gt; + counter); 
    _logger.debug(&lt;span class=&quot;code-quote&quot;&gt;&quot;result&quot;&lt;/span&gt; + (counter &amp;lt; 2)); 
    
        &lt;span class=&quot;code-comment&quot;&gt;// we can of course &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; what ever we want to determine the result but &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; is a unit test so we end after 3 attempts 
&lt;/span&gt;        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; counter &amp;lt; 7; 
    } 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12487225">CAMEL-2360</key>
            <summary>recipientList retryUntil not working</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="crive">Marco Crivellaro</reporter>
                        <labels>
                    </labels>
                <created>Thu, 14 Jan 2010 10:14:29 +0000</created>
                <updated>Sun, 24 Apr 2011 10:01:24 +0000</updated>
                            <resolved>Tue, 9 Feb 2010 08:24:27 +0000</resolved>
                                    <version>2.2.0</version>
                                    <fixVersion>2.3.0</fixVersion>
                                    <component>camel-core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12954416" author="davsclaus" created="Fri, 15 Jan 2010 10:28:56 +0000"  >&lt;p&gt;Context scoped error handling works&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;                onException(Exception.class).retryUntil(bean(&lt;span class=&quot;code-quote&quot;&gt;&quot;myRetryBean&quot;&lt;/span&gt;)).end();
                
                from(&lt;span class=&quot;code-quote&quot;&gt;&quot;seda:start&quot;&lt;/span&gt;)
                    .recipientList(header(&lt;span class=&quot;code-quote&quot;&gt;&quot;recipientListHeader&quot;&lt;/span&gt;))
                    .to(&lt;span class=&quot;code-quote&quot;&gt;&quot;mock:result&quot;&lt;/span&gt;);

                from(&lt;span class=&quot;code-quote&quot;&gt;&quot;direct:foo&quot;&lt;/span&gt;).to(&lt;span class=&quot;code-quote&quot;&gt;&quot;log:foo&quot;&lt;/span&gt;).to(&lt;span class=&quot;code-quote&quot;&gt;&quot;mock:foo&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12954415" author="davsclaus" created="Fri, 15 Jan 2010 10:39:29 +0000"  >&lt;p&gt;Can you post which endpoints you use in the recipientListHeader and if its to another Camel route can you post these also.&lt;/p&gt;</comment>
                            <comment id="12954414" author="crive" created="Fri, 15 Jan 2010 10:42:29 +0000"  >&lt;p&gt;I am using FTP endpoints&lt;/p&gt;</comment>
                            <comment id="12954412" author="davsclaus" created="Fri, 15 Jan 2010 12:16:28 +0000"  >&lt;p&gt;Okay found an issue but that is related to when using more routes.&lt;/p&gt;

&lt;p&gt;Do you also have Camel routes for those FTP endpoints? eg do you have also &lt;tt&gt;from(&quot;ftp:...&quot;)&lt;/tt&gt; in a Camel route somewhere?&lt;/p&gt;</comment>
                            <comment id="12954411" author="davsclaus" created="Fri, 15 Jan 2010 13:43:21 +0000"  >&lt;p&gt;Marco can you try with latest code from trunk?&lt;br/&gt;
I have committed a fix.&lt;/p&gt;

&lt;p&gt;trunk: 899628.&lt;/p&gt;</comment>
                            <comment id="12954424" author="crive" created="Fri, 15 Jan 2010 15:00:04 +0000"  >&lt;p&gt;I am not able to compile latest trunk my systems runs out of memory...&lt;/p&gt;</comment>
                            <comment id="12954423" author="davsclaus" created="Fri, 15 Jan 2010 15:08:12 +0000"  >&lt;p&gt;See this link how to increase memory to maven&lt;br/&gt;
&lt;a href=&quot;http://camel.apache.org/building.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://camel.apache.org/building.html&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12954422" author="crive" created="Fri, 15 Jan 2010 16:51:04 +0000"  >&lt;p&gt;I don&apos;t see it working even by using a Context scoped error handler&lt;/p&gt;</comment>
                            <comment id="12954421" author="davsclaus" created="Fri, 15 Jan 2010 16:57:10 +0000"  >&lt;p&gt;Create a small project which does not work at your end and attach it as a zip file.&lt;/p&gt;</comment>
                            <comment id="12954469" author="crive" created="Tue, 19 Jan 2010 12:49:38 +0000"  >&lt;p&gt;Attached a sample file which shows retryUntil method of RetryBean is never called.&lt;/p&gt;</comment>
                            <comment id="12954761" author="davsclaus" created="Tue, 9 Feb 2010 08:24:27 +0000"  >&lt;p&gt;Should work in 2.2 release&lt;/p&gt;</comment>
                            <comment id="12954770" author="davsclaus" created="Tue, 9 Feb 2010 13:43:28 +0000"  >&lt;p&gt;Okay for a timing issue when using &lt;tt&gt;parallel&lt;/tt&gt; recipient list.&lt;/p&gt;

&lt;p&gt;I will commit a fix for that in 2.3 later today&lt;/p&gt;</comment>
                            <comment id="12954776" author="davsclaus" created="Tue, 9 Feb 2010 15:33:55 +0000"  >&lt;p&gt;trunk: 908073.&lt;/p&gt;</comment>
                            <comment id="12954858" author="davsclaus" created="Tue, 9 Feb 2010 15:34:18 +0000"  >&lt;p&gt;Marco you are welcome to try with latest code from trunk on your system.&lt;/p&gt;</comment>
                            <comment id="13024476" author="davsclaus" created="Sun, 24 Apr 2011 10:01:24 +0000"  >&lt;p&gt;Closing all resolved tickets from 2010 or older&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12463059" name="Recipientlist-Retryuntil.zip" size="21559" author="crive" created="Tue, 19 Jan 2010 12:49:38 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>76544</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 31 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i01o3z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7675</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>