<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:56:17 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-18157] camel-jdbc - The settings provided by the query parameter &quot;parameters&quot; are ignored  when useHeadersAsParameters </title>
                <link>https://issues.apache.org/jira/browse/CAMEL-18157</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;The settings provided by the query parameter &quot;parameters&quot; are ignored when &lt;b&gt;useHeadersAsParameters&lt;/b&gt;&#160;is true.&lt;/p&gt;

&lt;p&gt;Example:&lt;/p&gt;

&lt;p&gt;jdbc:xxxxx?&lt;b&gt;useHeadersAsParameters=true&lt;/b&gt;&amp;amp;statement.fetchSize=100&amp;amp;outputType=StreamList&amp;amp;resetAutoCommit=false&lt;/p&gt;

&lt;p&gt;In this specific case&#160;&lt;b&gt;statement.fetchSize=100&lt;/b&gt; will be ignored and all the rows will be fetched in memory for an sql query like this one:&lt;/p&gt;

&lt;p&gt;SELECT * from MY-BIG-TABLE&lt;/p&gt;</description>
                <environment></environment>
        <key id="13447712">CAMEL-18157</key>
            <summary>camel-jdbc - The settings provided by the query parameter &quot;parameters&quot; are ignored  when useHeadersAsParameters </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="andrea81">Andrea Evangelista</reporter>
                        <labels>
                    </labels>
                <created>Tue, 31 May 2022 14:16:21 +0000</created>
                <updated>Wed, 1 Jun 2022 04:37:51 +0000</updated>
                            <resolved>Wed, 1 Jun 2022 04:37:51 +0000</resolved>
                                    <version>3.14.3</version>
                                    <fixVersion>3.14.4</fixVersion>
                    <fixVersion>3.18.0</fixVersion>
                                    <component>camel-jdbc</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17544448" author="JIRAUSER284228" created="Tue, 31 May 2022 15:04:41 +0000"  >&lt;p&gt;It seems that processing huge tables may cause quickly OOM and high CPU rate in that case &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &#160;&lt;/p&gt;</comment>
                            <comment id="17544506" author="JIRAUSER282651" created="Tue, 31 May 2022 17:04:02 +0000"  >&lt;p&gt;I will do a pull request with the following changes in the JdbcProducer class:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
/*
 * Licensed to the Apache Software Foundation (ASF) under one or more
 * contributor license agreements.  See the NOTICE file distributed with
 * &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; work &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; additional information regarding copyright ownership.
 * The ASF licenses &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; file to You under the Apache License, Version 2.0
 * (the &lt;span class=&quot;code-quote&quot;&gt;&quot;License&quot;&lt;/span&gt;); you may not use &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; file except in compliance with
 * the License.  You may obtain a copy of the License at
 *
 *      http:&lt;span class=&quot;code-comment&quot;&gt;//www.apache.org/licenses/LICENSE-2.0
&lt;/span&gt; *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &lt;span class=&quot;code-quote&quot;&gt;&quot;AS IS&quot;&lt;/span&gt; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; the specific language governing permissions and
 * limitations under the License.
 */
&lt;span class=&quot;code-keyword&quot;&gt;package&lt;/span&gt; org.apache.camel.component.jdbc;

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.sql.Connection;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.sql.PreparedStatement;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.sql.ResultSet;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.sql.SQLDataException;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.sql.SQLException;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.sql.Statement;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.util.ArrayList;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.util.HashMap;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.util.Iterator;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.util.List;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.util.Map;

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; javax.sql.DataSource;

&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.camel.Exchange;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.camel.ExtendedExchange;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.camel.spi.Synchronization;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.camel.support.DefaultProducer;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.apache.camel.support.PropertyBindingSupport;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.slf4j.Logger;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.slf4j.LoggerFactory;

&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;JdbcProducer &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; DefaultProducer {

    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Logger LOG = LoggerFactory.getLogger(JdbcProducer.class);

    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; DataSource dataSource;
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; ConnectionStrategy connectionStrategy;
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; readSize;
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; Map&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt; parameters;

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; JdbcProducer(JdbcEndpoint endpoint, DataSource dataSource, ConnectionStrategy connectionStrategy,
                        &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; readSize, Map&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt; parameters) {
        &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;(endpoint);
        &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.dataSource = dataSource;
        &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.connectionStrategy = connectionStrategy;
        &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.readSize = readSize;
        &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.parameters = parameters;
    }

    @Override
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; JdbcEndpoint getEndpoint() {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; (JdbcEndpoint) &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;.getEndpoint();
    }

    /**
     * Execute sql of exchange and set results on output
     */
    @Override
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void process(Exchange exchange) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (getEndpoint().isResetAutoCommit()) {
            processingSqlBySettingAutoCommit(exchange);
        } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
            processingSqlWithoutSettingAutoCommit(exchange);
        }
    }

    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; void processingSqlBySettingAutoCommit(Exchange exchange) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; sql = exchange.getIn().getBody(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;.class);
        Connection conn = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
        &lt;span class=&quot;code-object&quot;&gt;Boolean&lt;/span&gt; autoCommit = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
        &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; shouldCloseResources = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;

        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
            conn = connectionStrategy.getConnection(dataSource);
            autoCommit = conn.getAutoCommit();
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (autoCommit) {
                conn.setAutoCommit(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
            }

            shouldCloseResources = createAndExecuteSqlStatement(exchange, sql, conn);

            conn.commit();
        } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Exception e) {
            &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (conn != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
                    conn.rollback();
                }
            } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Throwable sqle) {
                LOG.warn(&lt;span class=&quot;code-quote&quot;&gt;&quot;Error occurred during JDBC rollback. This exception will be ignored.&quot;&lt;/span&gt;, sqle);
            }
            &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; e;
        } &lt;span class=&quot;code-keyword&quot;&gt;finally&lt;/span&gt; {
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (shouldCloseResources) {
                resetAutoCommit(conn, autoCommit);
                closeQuietly(conn);
            }
        }
    }

    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; void processingSqlWithoutSettingAutoCommit(Exchange exchange) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; sql = exchange.getIn().getBody(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;.class);
        Connection conn = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
        &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; shouldCloseResources = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;

        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
            conn = connectionStrategy.getConnection(dataSource);
            shouldCloseResources = createAndExecuteSqlStatement(exchange, sql, conn);
        } &lt;span class=&quot;code-keyword&quot;&gt;finally&lt;/span&gt; {
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (shouldCloseResources &amp;amp;&amp;amp; !connectionStrategy.isConnectionTransactional(conn, dataSource)) {
                closeQuietly(conn);
            }
        }
    }

    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; createAndExecuteSqlStatement(Exchange exchange, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; sql, Connection conn) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (getEndpoint().isUseHeadersAsParameters()) {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; doCreateAndExecuteSqlStatementWithHeaders(exchange, sql, conn);
        } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; doCreateAndExecuteSqlStatement(exchange, sql, conn);
        }
    }

    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; doCreateAndExecuteSqlStatementWithHeaders(Exchange exchange, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; sql, Connection conn) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        PreparedStatement ps = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
        ResultSet rs = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
        &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; shouldCloseResources = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;

        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
            &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; preparedQuery
                    = getEndpoint().getPrepareStatementStrategy().prepareQuery(sql, getEndpoint().isAllowNamedParameters());

            &lt;span class=&quot;code-object&quot;&gt;Boolean&lt;/span&gt; shouldRetrieveGeneratedKeys
                    = exchange.getIn().getHeader(JdbcConstants.JDBC_RETRIEVE_GENERATED_KEYS, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Boolean&lt;/span&gt;.class);

            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (shouldRetrieveGeneratedKeys) {
                &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; expectedGeneratedColumns = exchange.getIn().getHeader(JdbcConstants.JDBC_GENERATED_COLUMNS);
                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (expectedGeneratedColumns == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
                    ps = conn.prepareStatement(preparedQuery, Statement.RETURN_GENERATED_KEYS);
                } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (expectedGeneratedColumns &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[]) {
                    ps = conn.prepareStatement(preparedQuery, (&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[]) expectedGeneratedColumns);
                } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (expectedGeneratedColumns &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;[]) {
                    ps = conn.prepareStatement(preparedQuery, (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;[]) expectedGeneratedColumns);
                } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
                    &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IllegalArgumentException(
                            &lt;span class=&quot;code-quote&quot;&gt;&quot;Header specifying expected returning columns isn&apos;t an instance of &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] or &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;[] but &quot;&lt;/span&gt;
                                                       + expectedGeneratedColumns.getClass());
                }
            } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
                ps = conn.prepareStatement(preparedQuery);
            }
            
            bindParameters(exchange, ps);

            &lt;span class=&quot;code-comment&quot;&gt;//Check &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; statement paramters:
&lt;/span&gt;
            &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; expectedCount = ps.getParameterMetaData().getParameterCount();

            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (expectedCount &amp;gt; 0) {
                Iterator&amp;lt;?&amp;gt; it = getEndpoint().getPrepareStatementStrategy()
                        .createPopulateIterator(sql, preparedQuery, expectedCount, exchange, exchange.getIn().getBody());
                getEndpoint().getPrepareStatementStrategy().populateStatement(ps, it, expectedCount);
            }

            LOG.debug(&lt;span class=&quot;code-quote&quot;&gt;&quot;Executing JDBC PreparedStatement: {}&quot;&lt;/span&gt;, sql);

            &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; stmtExecutionResult = ps.execute();
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (stmtExecutionResult) {
                rs = ps.getResultSet();
                shouldCloseResources = setResultSet(exchange, conn, rs);
            } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
                &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; updateCount = ps.getUpdateCount();
                &lt;span class=&quot;code-comment&quot;&gt;// and then set the &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; header
&lt;/span&gt;                exchange.getMessage().setHeader(JdbcConstants.JDBC_UPDATE_COUNT, updateCount);
            }

            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (shouldRetrieveGeneratedKeys) {
                setGeneratedKeys(exchange, conn, ps.getGeneratedKeys());
            }
        } &lt;span class=&quot;code-keyword&quot;&gt;finally&lt;/span&gt; {
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (shouldCloseResources) {
                closeQuietly(rs);
                closeQuietly(ps);
            }
        }
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; shouldCloseResources;
    }

    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; void bindParameters(Exchange exchange, Statement ps) {
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (parameters != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; !parameters.isEmpty()) {
            Map&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt; copy = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HashMap&amp;lt;&amp;gt;(parameters);
            PropertyBindingSupport.bindProperties(exchange.getContext(), ps, copy);
        }
    }

    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; doCreateAndExecuteSqlStatement(Exchange exchange, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; sql, Connection conn) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {

        ResultSet rs = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
        &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; shouldCloseResources = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;

        &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
            &lt;span class=&quot;code-comment&quot;&gt;// We might need to leave it open to allow post-processing of the result set. This is why we
&lt;/span&gt;            &lt;span class=&quot;code-comment&quot;&gt;// are not using &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt;-with-resources here.
&lt;/span&gt;            Statement stmt = conn.createStatement();

            bindParameters(exchange, stmt);

            LOG.debug(&lt;span class=&quot;code-quote&quot;&gt;&quot;Executing JDBC Statement: {}&quot;&lt;/span&gt;, sql);

            &lt;span class=&quot;code-object&quot;&gt;Boolean&lt;/span&gt; shouldRetrieveGeneratedKeys
                    = exchange.getIn().getHeader(JdbcConstants.JDBC_RETRIEVE_GENERATED_KEYS, &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Boolean&lt;/span&gt;.class);

            &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; stmtExecutionResult;
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (shouldRetrieveGeneratedKeys) {
                &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; expectedGeneratedColumns = exchange.getIn().getHeader(JdbcConstants.JDBC_GENERATED_COLUMNS);
                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (expectedGeneratedColumns == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
                    stmtExecutionResult = stmt.execute(sql, Statement.RETURN_GENERATED_KEYS);
                } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (expectedGeneratedColumns &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[]) {
                    stmtExecutionResult = stmt.execute(sql, (&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[]) expectedGeneratedColumns);
                } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (expectedGeneratedColumns &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;[]) {
                    stmtExecutionResult = stmt.execute(sql, (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;[]) expectedGeneratedColumns);
                } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
                    &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IllegalArgumentException(
                            &lt;span class=&quot;code-quote&quot;&gt;&quot;Header specifying expected returning columns isn&apos;t an instance of &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;[] or &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt;[] but &quot;&lt;/span&gt;
                                                       + expectedGeneratedColumns.getClass());
                }
            } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
                stmtExecutionResult = stmt.execute(sql);
            }

            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (stmtExecutionResult) {
                rs = stmt.getResultSet();
                shouldCloseResources = setResultSet(exchange, conn, rs);
            } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
                &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; updateCount = stmt.getUpdateCount();
                &lt;span class=&quot;code-comment&quot;&gt;// and then set the &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; header
&lt;/span&gt;                exchange.getMessage().setHeader(JdbcConstants.JDBC_UPDATE_COUNT, updateCount);
            }

            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (shouldRetrieveGeneratedKeys) {
                setGeneratedKeys(exchange, conn, stmt.getGeneratedKeys());
            }
        } &lt;span class=&quot;code-keyword&quot;&gt;finally&lt;/span&gt; {
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (shouldCloseResources) {
                closeQuietly(rs);
            }
        }
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; shouldCloseResources;
    }

    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; void closeQuietly(ResultSet rs) {
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (rs != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
            &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!rs.isClosed()) {
                    rs.close();
                }
            } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Throwable sqle) {
                LOG.debug(&lt;span class=&quot;code-quote&quot;&gt;&quot;Error by closing result set&quot;&lt;/span&gt;, sqle);
            }
        }
    }

    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; void closeQuietly(Statement stmt) {
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (stmt != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
            &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!stmt.isClosed()) {
                    stmt.close();
                }
            } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Throwable sqle) {
                LOG.debug(&lt;span class=&quot;code-quote&quot;&gt;&quot;Error by closing statement&quot;&lt;/span&gt;, sqle);
            }
        }
    }

    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; void resetAutoCommit(Connection con, &lt;span class=&quot;code-object&quot;&gt;Boolean&lt;/span&gt; autoCommit) {
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (con != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; autoCommit != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
            &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
                con.setAutoCommit(autoCommit);
            } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Throwable sqle) {
                LOG.debug(&lt;span class=&quot;code-quote&quot;&gt;&quot;Error by resetting auto commit to its original value&quot;&lt;/span&gt;, sqle);
            }
        }
    }

    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; void closeQuietly(Connection con) {
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (con != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
            &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!con.isClosed()) {
                    con.close();
                }
            } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Throwable sqle) {
                LOG.debug(&lt;span class=&quot;code-quote&quot;&gt;&quot;Error by closing connection&quot;&lt;/span&gt;, sqle);
            }
        }
    }

    /**
     * Sets the generated &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; any to the Exchange in headers : - {@link JdbcConstants#JDBC_GENERATED_KEYS_ROW_COUNT} :
     * the row count of generated keys - {@link JdbcConstants#JDBC_GENERATED_KEYS_DATA} : the generated keys data
     *
     * @param exchange      The exchange where to store the generated keys
     * @param conn          Current JDBC connection
     * @param generatedKeys The result set containing the generated keys
     */
    &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; void setGeneratedKeys(Exchange exchange, Connection conn, ResultSet generatedKeys) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; SQLException {
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (generatedKeys != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
            ResultSetIterator iterator = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ResultSetIterator(
                    conn, generatedKeys, getEndpoint().isUseJDBC4ColumnNameAndLabelSemantics(),
                    getEndpoint().isUseGetBytesForBlob());
            List&amp;lt;Map&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt;&amp;gt; data = extractRows(iterator);

            exchange.getMessage().setHeader(JdbcConstants.JDBC_GENERATED_KEYS_ROW_COUNT, data.size());
            exchange.getMessage().setHeader(JdbcConstants.JDBC_GENERATED_KEYS_DATA, data);
        }
    }

    /**
     * Sets the result from the ResultSet to the Exchange as its OUT body.
     *
     * @&lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; whether to close resources
     */
    &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; setResultSet(Exchange exchange, Connection conn, ResultSet rs) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; SQLException {
        &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; answer = &lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;;

        ResultSetIterator iterator = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ResultSetIterator(
                conn, rs, getEndpoint().isUseJDBC4ColumnNameAndLabelSemantics(), getEndpoint().isUseGetBytesForBlob());

        JdbcOutputType outputType = getEndpoint().getOutputType();
        exchange.getMessage().setHeader(JdbcConstants.JDBC_COLUMN_NAMES, iterator.getColumnNames());
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (outputType == JdbcOutputType.StreamList) {
            exchange.getMessage()
                    .setBody(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; StreamListIterator(
                            getEndpoint().getCamelContext(), getEndpoint().getOutputClass(), getEndpoint().getBeanRowMapper(),
                            iterator));
            exchange.adapt(ExtendedExchange.class).addOnCompletion(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ResultSetIteratorCompletion(iterator));
            &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;do&lt;/span&gt; not close resources as we are in streaming mode
&lt;/span&gt;            answer = &lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;;
        } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (outputType == JdbcOutputType.SelectList) {
            List&amp;lt;?&amp;gt; list = extractRows(iterator);
            exchange.getMessage().setHeader(JdbcConstants.JDBC_ROW_COUNT, list.size());
            exchange.getMessage().setBody(list);
        } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (outputType == JdbcOutputType.SelectOne) {
            exchange.getMessage().setBody(extractSingleRow(iterator));
        }

        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; answer;
    }

    @SuppressWarnings(&lt;span class=&quot;code-quote&quot;&gt;&quot;unchecked&quot;&lt;/span&gt;)
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; List extractRows(ResultSetIterator iterator) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; SQLException {
        List result = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ArrayList();
        &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; maxRowCount = readSize == 0 ? &lt;span class=&quot;code-object&quot;&gt;Integer&lt;/span&gt;.MAX_VALUE : readSize;
        &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; i = 0; iterator.hasNext() &amp;amp;&amp;amp; i &amp;lt; maxRowCount; i++) {
            Map&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt; row = iterator.next();
            &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; value;
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (getEndpoint().getOutputClass() != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
                value = JdbcHelper.newBeanInstance(getEndpoint().getCamelContext(), getEndpoint().getOutputClass(),
                        getEndpoint().getBeanRowMapper(), row);
            } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
                value = row;
            }
            result.add(value);
        }
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; result;
    }

    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; extractSingleRow(ResultSetIterator iterator) &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; SQLException {
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!iterator.hasNext()) {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
        }

        Map&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt; row = iterator.next();
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (iterator.hasNext()) {
            &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SQLDataException(&lt;span class=&quot;code-quote&quot;&gt;&quot;Query result not unique &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; outputType=SelectOne.&quot;&lt;/span&gt;);
        } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (getEndpoint().getOutputClass() != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; JdbcHelper.newBeanInstance(getEndpoint().getCamelContext(), getEndpoint().getOutputClass(),
                    getEndpoint().getBeanRowMapper(), row);
        } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (row.size() == 1) {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; row.values().iterator().next();
        } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
            &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; row;
        }
    }

    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;ResultSetIteratorCompletion &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; Synchronization {
        &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; ResultSetIterator iterator;

        &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; ResultSetIteratorCompletion(ResultSetIterator iterator) {
            &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.iterator = iterator;
        }

        @Override
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void onComplete(Exchange exchange) {
            iterator.close();
            iterator.closeConnection();
        }

        @Override
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void onFailure(Exchange exchange) {
            iterator.close();
            iterator.closeConnection();
        }
    }
}
 &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Has been introduced the common method:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; void bindParameters(Exchange exchange, Statement ps) {
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (parameters != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; !parameters.isEmpty()) {
        Map&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt; copy = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; HashMap&amp;lt;&amp;gt;(parameters);
        PropertyBindingSupport.bindProperties(exchange.getContext(), ps, copy);
    }
}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;to be used by:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;b&gt;private boolean doCreateAndExecuteSqlStatementWithHeaders(Exchange exchange, String sql, Connection conn) throws Exception {&lt;/b&gt;&lt;/li&gt;
	&lt;li&gt;&lt;b&gt;private boolean doCreateAndExecuteSqlStatement(Exchange exchange, String sql, Connection conn) throws Exception {&lt;/b&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17544542" author="davsclaus" created="Tue, 31 May 2022 18:19:04 +0000"  >&lt;p&gt;Yes you are welcome to send a PR against the main branch&lt;/p&gt;</comment>
                            <comment id="17544560" author="JIRAUSER282651" created="Tue, 31 May 2022 18:54:23 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davsclaus&quot; class=&quot;user-hover&quot; rel=&quot;davsclaus&quot;&gt;davsclaus&lt;/a&gt;:&lt;br/&gt;
Here my PR:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/camel/pull/7701&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/7701&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;thanks for your time&lt;/p&gt;</comment>
                            <comment id="17544691" author="davsclaus" created="Wed, 1 Jun 2022 04:37:51 +0000"  >&lt;p&gt;Thanks for reporting and the PR&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 24 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z12tzs:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>