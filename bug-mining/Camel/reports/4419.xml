<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:28:02 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-12228] Print command fails in case of multiple copies</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-12228</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;When the printer component is configured to print multiple copies, two print jobs are created. The first one runs OK, the second one fails.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
lpr:&lt;span class=&quot;code-comment&quot;&gt;//localhost/printer?copies=2&amp;amp;mediaSize=ISO_A4&amp;amp;flavor=DocFlavor.INPUT_STREAM&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
org.apache.camel.component.printer.PrinterOperations DEBUG Issuing Job 0 to Printer: printer
org.apache.camel.component.printer.PrinterOperations DEBUG Issuing Job 1 to Printer: printer
ERROR ID-47935-1516954952584-8-4
java.io.IOException: error=1 running: &lt;span class=&quot;code-quote&quot;&gt;&apos;/usr/bin/lpr&apos;&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;-Pprinter&apos;&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;-J file.pdf&apos;&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;-#2&apos;&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;-o media=A4 sides=one-sided&apos;&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;/opt/tomcat/temp/javaprint7376295310894617090&apos;&lt;/span&gt;
               /usr/bin/lpr: No file in print request.
javax.print.PrintException: java.io.IOException: error=1 running: &lt;span class=&quot;code-quote&quot;&gt;&apos;/usr/bin/lpr&apos;&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;-PBriefing&apos;&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;-J file.pdf&apos;&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;-#2&apos;&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;-o media=A4 sides=one-sided&apos;&lt;/span&gt; &lt;span class=&quot;code-quote&quot;&gt;&apos;/opt/tomcat/temp/javaprint7376295310894617090&apos;&lt;/span&gt;
               /usr/bin/lpr: No file in print request.
       at sun.print.UnixPrintJob$PrinterSpooler.run(UnixPrintJob.java:1017)
       at java.security.AccessController.doPrivileged(Native Method)
       at sun.print.UnixPrintJob.print(UnixPrintJob.java:608)
       at org.apache.camel.component.printer.PrinterOperations.print(PrinterOperations.java:109)
       at org.apache.camel.component.printer.PrinterOperations.print(PrinterOperations.java:99)
       at org.apache.camel.component.printer.PrinterProducer.print(PrinterProducer.java:57)
       at org.apache.camel.component.printer.PrinterProducer.process(PrinterProducer.java:51)
       at org.apache.camel.util.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:61)
       at org.apache.camel.processor.SendDynamicProcessor$1.doInAsyncProducer(SendDynamicProcessor.java:124)
       at org.apache.camel.impl.ProducerCache.doInAsyncProducer(ProducerCache.java:436)
       at org.apache.camel.processor.SendDynamicProcessor.process(SendDynamicProcessor.java:119)
       at org.apache.camel.management.InstrumentationProcessor.process(InstrumentationProcessor.java:77)
       at org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:542)
       at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197)
       at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197)
       at org.apache.camel.component.direct.DirectProducer.process(DirectProducer.java:62)
       at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:145)
       at org.apache.camel.management.InstrumentationProcessor.process(InstrumentationProcessor.java:77)
       at org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:542)
       at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197)
       at org.apache.camel.processor.Pipeline.process(Pipeline.java:120)
       at org.apache.camel.processor.Pipeline.process(Pipeline.java:83)
       at org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:542)
       at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:197)
       at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:109)
       at org.apache.camel.processor.MulticastProcessor.doProcessParallel(MulticastProcessor.java:827)
       at org.apache.camel.processor.MulticastProcessor.access$200(MulticastProcessor.java:85)
       at org.apache.camel.processor.MulticastProcessor$1.call(MulticastProcessor.java:320)
       at org.apache.camel.processor.MulticastProcessor$1.call(MulticastProcessor.java:305)
       at java.util.concurrent.FutureTask.run(FutureTask.java:266)
       at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
       at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
       at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:745)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The second job should not be created because the -#2 parameter in the lpr command already schedules the desired number of copies.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13136223">CAMEL-12228</key>
            <summary>Print command fails in case of multiple copies</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="dmvolod">Dmitry Volodin</assignee>
                                    <reporter username="rvanderhallen">Robin Vanderhallen</reporter>
                        <labels>
                    </labels>
                <created>Mon, 5 Feb 2018 09:24:58 +0000</created>
                <updated>Tue, 6 Feb 2018 06:50:42 +0000</updated>
                            <resolved>Tue, 6 Feb 2018 06:50:29 +0000</resolved>
                                    <version>2.18.1</version>
                    <version>2.19.0</version>
                    <version>2.20.0</version>
                                    <fixVersion>2.19.5</fixVersion>
                    <fixVersion>2.20.3</fixVersion>
                    <fixVersion>2.21.0</fixVersion>
                                    <component>camel-printer</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="16352660" author="dmvolod" created="Mon, 5 Feb 2018 17:16:31 +0000"  >&lt;p&gt;Yes, thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rvanderhallen&quot; class=&quot;user-hover&quot; rel=&quot;rvanderhallen&quot;&gt;rvanderhallen&lt;/a&gt; for reporting. It&apos;s a bug, the&#160;&lt;a href=&quot;https://github.com/apache/camel/blob/664130ece8e23e137118e974158282d570d169c8/components/camel-printer/src/main/java/org/apache/camel/component/printer/PrinterOperations.java#L70&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;PrinterOperations.print&lt;/a&gt; creates printing jobs which are equivalent to number of copies with -# num-copies parameters inside.&lt;/p&gt;

&lt;p&gt;But we need to decide which strategy to use for fix: pass num of copies in a single job parameter or schedule a set of jobs as copies count with a num-copies=1. And this issue unable to reproduce without real or virtual PDF printer setup. &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davsclaus&quot; class=&quot;user-hover&quot; rel=&quot;davsclaus&quot;&gt;davsclaus&lt;/a&gt; what do you think about this?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16352670" author="rvanderhallen" created="Mon, 5 Feb 2018 17:30:43 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=dmvolod&quot; class=&quot;user-hover&quot; rel=&quot;dmvolod&quot;&gt;dmvolod&lt;/a&gt; In our use case, we need a single job with x number of copies. This defines a single unit of work and has to appear as one task on the print queue.&lt;/p&gt;</comment>
                            <comment id="16352869" author="davsclaus" created="Mon, 5 Feb 2018 20:12:48 +0000"  >&lt;p&gt;I would rather let the printer know the number of copies in one job. That is how I see it would work normally. I wasn&apos;t aware of this loop. Also if we loop then we have the &quot;streaming problem&quot; where the message body may only be readable once.&#160;&lt;/p&gt;</comment>
                            <comment id="16352890" author="githubbot" created="Mon, 5 Feb 2018 20:32:11 +0000"  >&lt;p&gt;dmvolod opened a new pull request #2208: &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12228&quot; title=&quot;Print command fails in case of multiple copies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12228&quot;&gt;&lt;del&gt;CAMEL-12228&lt;/del&gt;&lt;/a&gt;: Print command fails in case of multiple copies&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/camel/pull/2208&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2208&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16352891" author="githubbot" created="Mon, 5 Feb 2018 20:32:13 +0000"  >&lt;p&gt;GitHub user dmvolod opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/2208&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2208&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12228&quot; title=&quot;Print command fails in case of multiple copies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12228&quot;&gt;&lt;del&gt;CAMEL-12228&lt;/del&gt;&lt;/a&gt;: Print command fails in case of multiple copies&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/dmvolod/camel&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/dmvolod/camel&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12228&quot; title=&quot;Print command fails in case of multiple copies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12228&quot;&gt;&lt;del&gt;CAMEL-12228&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/2208.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2208.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #2208&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 834679911b817fcc7c81e43b521e486a73dee637&lt;br/&gt;
Author: Dmitry Volodin &amp;lt;dmvolod@...&amp;gt;&lt;br/&gt;
Date:   2018-02-05T20:30:44Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12228&quot; title=&quot;Print command fails in case of multiple copies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12228&quot;&gt;&lt;del&gt;CAMEL-12228&lt;/del&gt;&lt;/a&gt;: Print command fails in case of multiple copies&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16353470" author="githubbot" created="Tue, 6 Feb 2018 06:50:41 +0000"  >&lt;p&gt;oscerd commented on issue #2208: &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12228&quot; title=&quot;Print command fails in case of multiple copies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12228&quot;&gt;&lt;del&gt;CAMEL-12228&lt;/del&gt;&lt;/a&gt;: Print command fails in case of multiple copies&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/camel/pull/2208#issuecomment-363327696&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2208#issuecomment-363327696&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Thanks for the PR. It has been merged on master,2.20.x and 2.19.x&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16353471" author="githubbot" created="Tue, 6 Feb 2018 06:50:42 +0000"  >&lt;p&gt;oscerd closed pull request #2208: &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12228&quot; title=&quot;Print command fails in case of multiple copies&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12228&quot;&gt;&lt;del&gt;CAMEL-12228&lt;/del&gt;&lt;/a&gt;: Print command fails in case of multiple copies&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/camel/pull/2208&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2208&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/components/camel-printer/src/main/java/org/apache/camel/component/printer/PrinterConfiguration.java b/components/camel-printer/src/main/java/org/apache/camel/component/printer/PrinterConfiguration.java&lt;br/&gt;
index 85cbd550535..5e7aecf2914 100644&lt;br/&gt;
&amp;#8212; a/components/camel-printer/src/main/java/org/apache/camel/component/printer/PrinterConfiguration.java&lt;br/&gt;
+++ b/components/camel-printer/src/main/java/org/apache/camel/component/printer/PrinterConfiguration.java&lt;br/&gt;
@@ -28,7 +28,7 @@&lt;br/&gt;
 import org.apache.camel.spi.UriParam;&lt;br/&gt;
 import org.apache.camel.spi.UriParams;&lt;br/&gt;
 import org.apache.camel.spi.UriPath;&lt;br/&gt;
-import org.apache.camel.util.ObjectHelper;&lt;br/&gt;
+import org.apache.camel.util.StringHelper;&lt;br/&gt;
 import org.apache.camel.util.URISupport;&lt;/p&gt;

&lt;p&gt; @UriParams&lt;br/&gt;
@@ -85,8 +85,8 @@ public void parseURI(URI uri) throws Exception {&lt;/p&gt;

&lt;p&gt;         // use path as printer name, but without any leading slashes&lt;br/&gt;
         String path = uri.getPath();&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;path = ObjectHelper.removeStartingCharacters(path, &apos;/&apos;);&lt;/li&gt;
	&lt;li&gt;path = ObjectHelper.removeStartingCharacters(path, &apos;&lt;br class=&quot;atl-forced-newline&quot; /&gt;&apos;);&lt;br/&gt;
+        path = StringHelper.removeStartingCharacters(path, &apos;/&apos;);&lt;br/&gt;
+        path = StringHelper.removeStartingCharacters(path, &apos;&lt;br class=&quot;atl-forced-newline&quot; /&gt;&apos;);&lt;br/&gt;
         setPrintername(path);&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;         Map&amp;lt;String, Object&amp;gt; printSettings = URISupport.parseParameters(uri);&lt;br/&gt;
diff --git a/components/camel-printer/src/main/java/org/apache/camel/component/printer/PrinterOperations.java b/components/camel-printer/src/main/java/org/apache/camel/component/printer/PrinterOperations.java&lt;br/&gt;
index 20750028627..bed8be27ab7 100644&lt;br/&gt;
&amp;#8212; a/components/camel-printer/src/main/java/org/apache/camel/component/printer/PrinterOperations.java&lt;br/&gt;
+++ b/components/camel-printer/src/main/java/org/apache/camel/component/printer/PrinterOperations.java&lt;br/&gt;
@@ -45,7 +45,7 @@&lt;br/&gt;
     private PrintRequestAttributeSet printRequestAttributeSet;&lt;br/&gt;
     private Doc doc;&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;public PrinterOperations() throws PrintException {&lt;br/&gt;
+    public PrinterOperations() throws PrintException {&lt;br/&gt;
         printService = PrintServiceLookup.lookupDefaultPrintService();&lt;br/&gt;
         if (printService == null) 
{
             throw new PrintException(&quot;Printer lookup failure. No default printer set up for this host&quot;);
@@ -63,46 +63,42 @@ public PrinterOperations(PrintService printService, DocFlavor flavor, PrintReque
         this.setPrintRequestAttributeSet(printRequestAttributeSet);
     }&lt;/li&gt;
&lt;/ul&gt;


&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;public void print(Doc doc, int copies, boolean sendToPrinter, String mimeType, String jobName) throws PrintException {&lt;br/&gt;
+    public void print(Doc doc, boolean sendToPrinter, String mimeType, String jobName) throws PrintException {&lt;br/&gt;
         LOG.trace(&quot;Print Service: &quot; + this.printService.getName());&lt;/li&gt;
	&lt;li&gt;LOG.trace(&quot;About to print &quot; + copies + &quot; copy(s)&quot;);&lt;/li&gt;
	&lt;li&gt;&lt;/li&gt;
	&lt;li&gt;for (int i = 0; i &amp;lt; copies; i++) {&lt;/li&gt;
	&lt;li&gt;if (!sendToPrinter) {&lt;/li&gt;
	&lt;li&gt;LOG.debug(&quot;Print flag is set to false. This job will not be printed until this setting remains in effect.&quot;&lt;/li&gt;
	&lt;li&gt;+ &quot; Please set the flag to true or remove the setting.&quot;);&lt;br/&gt;
-&lt;/li&gt;
	&lt;li&gt;File file;&lt;/li&gt;
	&lt;li&gt;if (mimeType.equalsIgnoreCase(&quot;GIF&quot;) || mimeType.equalsIgnoreCase(&quot;RENDERABLE_IMAGE&quot;)) 
{
-                    file = new File(&quot;./target/TestPrintJobNo&quot; + i + &quot;_&quot; + UUID.randomUUID() + &quot;.gif&quot;);
-                }
&lt;p&gt; else if (mimeType.equalsIgnoreCase(&quot;JPEG&quot;)) &lt;/p&gt;
{
-                    file = new File(&quot;./target/TestPrintJobNo&quot; + i + &quot;_&quot; + UUID.randomUUID() + &quot;.jpeg&quot;);
-                }
&lt;p&gt; else if (mimeType.equalsIgnoreCase(&quot;PDF&quot;)) &lt;/p&gt;
{
-                    file = new File(&quot;./target/TestPrintJobNo&quot; + i + &quot;_&quot; + UUID.randomUUID() + &quot;.pdf&quot;);
-                }
&lt;p&gt; else &lt;/p&gt;
{
-                    file = new File(&quot;./target/TestPrintJobNo&quot; + i + &quot;_&quot; + UUID.randomUUID() + &quot;.txt&quot;);
-                }
&lt;p&gt;-&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;LOG.debug(&quot;Writing print job to file: &quot; + file.getAbsolutePath());&lt;/li&gt;
	&lt;li&gt;try 
{
-                    InputStream in = doc.getStreamForBytes();
-                    FileOutputStream fos = new FileOutputStream(file);
-                    IOHelper.copyAndCloseInput(in, fos);
-                    IOHelper.close(fos);
-                }
&lt;p&gt; catch (Exception e) &lt;/p&gt;
{
-                    throw new PrintException(&quot;Error writing Document to the target file &quot; + file.getAbsolutePath());
-                }
&lt;p&gt;+&lt;br/&gt;
+        if (!sendToPrinter) {&lt;br/&gt;
+            LOG.debug(&quot;Print flag is set to false. This job will not be printed until this setting remains in effect.&quot; + &quot; Please set the flag to true or remove the setting.&quot;);&lt;br/&gt;
+&lt;br/&gt;
+            File file;&lt;br/&gt;
+            if (mimeType.equalsIgnoreCase(&quot;GIF&quot;) || mimeType.equalsIgnoreCase(&quot;RENDERABLE_IMAGE&quot;)) &lt;/p&gt;
{
+                file = new File(&quot;./target/PrintOutput_&quot; + UUID.randomUUID() + &quot;.gif&quot;);
+            }
&lt;p&gt; else if (mimeType.equalsIgnoreCase(&quot;JPEG&quot;)) &lt;/p&gt;
{
+                file = new File(&quot;./target/PrintOutput_&quot; + UUID.randomUUID() + &quot;.jpeg&quot;);
+            }
&lt;p&gt; else if (mimeType.equalsIgnoreCase(&quot;PDF&quot;)) &lt;/p&gt;
{
+                file = new File(&quot;./target/PrintOutput_&quot; + UUID.randomUUID() + &quot;.pdf&quot;);
             }
&lt;p&gt; else {&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;if (LOG.isDebugEnabled()) {&lt;/li&gt;
	&lt;li&gt;LOG.debug(&quot;Issuing Job {} to Printer: {}&quot;, i, this.printService.getName());&lt;/li&gt;
	&lt;li&gt;}&lt;/li&gt;
	&lt;li&gt;print(doc, jobName);&lt;br/&gt;
+                file = new File(&quot;./target/PrintOutput_&quot; + UUID.randomUUID() + &quot;.txt&quot;);&lt;br/&gt;
+            }&lt;br/&gt;
+&lt;br/&gt;
+            LOG.debug(&quot;Writing print job to file: &quot; + file.getAbsolutePath());&lt;br/&gt;
+            try 
{
+                InputStream in = doc.getStreamForBytes();
+                FileOutputStream fos = new FileOutputStream(file);
+                IOHelper.copyAndCloseInput(in, fos);
+                IOHelper.close(fos);
+            }
&lt;p&gt; catch (Exception e) &lt;/p&gt;
{
+                throw new PrintException(&quot;Error writing Document to the target file &quot; + file.getAbsolutePath());
             }
&lt;p&gt;+        } else {&lt;br/&gt;
+            if (LOG.isDebugEnabled()) {&lt;br/&gt;
+                LOG.debug(&quot;Issuing Job to Printer: {}&quot;, this.printService.getName());&lt;br/&gt;
+            }&lt;br/&gt;
+            print(doc, jobName);&lt;br/&gt;
         }&lt;br/&gt;
     }&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;&lt;p&gt;+&lt;br/&gt;
     public void print(Doc doc, String jobName) throws PrintException {&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;// we need create a new job for each print&lt;br/&gt;
+        // we need create a new job for each print&lt;br/&gt;
         DocPrintJob job = getPrintService().createPrintJob();&lt;br/&gt;
         PrintRequestAttributeSet attrs = new HashPrintRequestAttributeSet(printRequestAttributeSet);&lt;br/&gt;
         attrs.add(new JobName(jobName, Locale.getDefault()));&lt;br/&gt;
@@ -116,7 +112,7 @@ public PrintService getPrintService() {&lt;br/&gt;
     public void setPrintService(PrintService printService) 
{
         this.printService = printService;
     }&lt;/li&gt;
	&lt;li&gt;&lt;p&gt;+&lt;br/&gt;
     public DocFlavor getFlavor() &lt;/p&gt;
{
         return flavor;
     }
&lt;p&gt;diff --git a/components/camel-printer/src/main/java/org/apache/camel/component/printer/PrinterProducer.java b/components/camel-printer/src/main/java/org/apache/camel/component/printer/PrinterProducer.java&lt;br/&gt;
index ea8fd99c872..7e69aa7759b 100644&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;a/components/camel-printer/src/main/java/org/apache/camel/component/printer/PrinterProducer.java&lt;br/&gt;
+++ b/components/camel-printer/src/main/java/org/apache/camel/component/printer/PrinterProducer.java&lt;br/&gt;
@@ -53,8 +53,8 @@ public void process(Exchange exchange) throws Exception {&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;     private void print(InputStream body, String jobName) throws PrintException { &lt;br/&gt;
         if (printerOperations.getPrintService().isDocFlavorSupported(printerOperations.getFlavor())) &lt;/p&gt;
{
-            PrintDocument printDoc = new PrintDocument(body, printerOperations.getFlavor());        
-            printerOperations.print(printDoc, config.getCopies(), config.isSendToPrinter(), config.getMimeType(), jobName); 
+            PrintDocument printDoc = new PrintDocument(body, printerOperations.getFlavor());
+            printerOperations.print(printDoc, config.isSendToPrinter(), config.getMimeType(), jobName); 
         }
&lt;p&gt;     }&lt;/p&gt;





&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16353472" author="githubbot" created="Tue, 6 Feb 2018 06:50:42 +0000"  >&lt;p&gt;Github user oscerd closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/2208&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2208&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 41 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3pshb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>