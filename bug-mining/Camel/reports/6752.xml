<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 11:05:47 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-20731] Route coverage fails on routes with multiple doCatch blocks</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-20731</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;Routes containing `doTry` with multiple `doCatch` blocks fails when running the code coverage mojo.&#160; An example:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&amp;lt;routes xmlns=&lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//camel.apache.org/schema/spring&quot;&lt;/span&gt;&amp;gt;
&lt;/span&gt;&#160; &#160; &amp;lt;route id=&lt;span class=&quot;code-quote&quot;&gt;&quot;multiple-&lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt;-blocks&quot;&lt;/span&gt;&amp;gt;
&#160; &#160; &#160; &#160; &amp;lt;from uri=&lt;span class=&quot;code-quote&quot;&gt;&quot;direct:start&quot;&lt;/span&gt;/&amp;gt;
&#160; &#160; &#160; &#160; &amp;lt;doTry&amp;gt;
&#160; &#160; &#160; &#160; &#160; &#160; &amp;lt;to uri=&lt;span class=&quot;code-quote&quot;&gt;&quot;mock:result&quot;&lt;/span&gt;/&amp;gt;
&#160; &#160; &#160; &#160; &#160; &#160; &amp;lt;doCatch&amp;gt;
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &amp;lt;exception&amp;gt;java.io.IOException&amp;lt;/exception&amp;gt;
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &amp;lt;to uri=&lt;span class=&quot;code-quote&quot;&gt;&quot;mock:&lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt;&quot;&lt;/span&gt;/&amp;gt;
&#160; &#160; &#160; &#160; &#160; &#160; &amp;lt;/doCatch&amp;gt;
&#160; &#160; &#160; &#160; &#160; &#160; &amp;lt;doCatch&amp;gt;
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &amp;lt;exception&amp;gt;java.lang.IllegalStateException&amp;lt;/exception&amp;gt;
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &amp;lt;to uri=&lt;span class=&quot;code-quote&quot;&gt;&quot;mock:&lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt;&quot;&lt;/span&gt;/&amp;gt;
&#160; &#160; &#160; &#160; &#160; &#160; &amp;lt;/doCatch&amp;gt;
&#160; &#160; &#160; &#160; &#160; &#160; &amp;lt;doFinally&amp;gt;
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &amp;lt;to uri=&lt;span class=&quot;code-quote&quot;&gt;&quot;mock:&lt;span class=&quot;code-keyword&quot;&gt;finally&lt;/span&gt;&quot;&lt;/span&gt;/&amp;gt;
&#160; &#160; &#160; &#160; &#160; &#160; &amp;lt;/doFinally&amp;gt;
&#160; &#160; &#160; &#160; &amp;lt;/doTry&amp;gt;
&#160; &#160; &amp;lt;/route&amp;gt;
&amp;lt;/routes&amp;gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Applying the attached patch gives the following error message:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[INFO] Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 6.619 s -- in sample.camel.MultipleCatchBlocksTest
[INFO] Running sample.camel.SampleCamelApplicationTest
[WARNING] Tests run: 1, Failures: 0, Errors: 0, Skipped: 1, Time elapsed: 0.008 s -- in sample.camel.SampleCamelApplicationTest
[INFO]
[INFO] Results:
[INFO]
[WARNING] Tests run: 2, Failures: 0, Errors: 0, Skipped: 1
[INFO]
[INFO]
[INFO] --- camel-report:4.6.0-SNAPSHOT:route-coverage (default-cli) @ camel-example-spring-boot-xml ---
[INFO] Discovered 2 routes
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: &#160;17.235 s
[INFO] Finished at: 2024-05-02T13:13:57-04:00
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.camel:camel-report-maven-plugin:4.6.0-SNAPSHOT:route-coverage (default-cli) on project camel-example-spring-boot-xml: Error during gathering route coverage data for route: multiple-catch-blocks: count is negative: -1 -&amp;gt; [Help 1]
[ERROR]
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR]
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13577962">CAMEL-20731</key>
            <summary>Route coverage fails on routes with multiple doCatch blocks</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="ammachado">Adriano Machado</reporter>
                        <labels>
                    </labels>
                <created>Thu, 2 May 2024 15:17:51 +0000</created>
                <updated>Fri, 3 May 2024 09:43:43 +0000</updated>
                            <resolved>Fri, 3 May 2024 09:43:43 +0000</resolved>
                                    <version>4.0.3</version>
                                    <fixVersion>4.0.6</fixVersion>
                    <fixVersion>4.4.3</fixVersion>
                    <fixVersion>4.6.0</fixVersion>
                                    <component>tooling</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17843007" author="davsclaus" created="Thu, 2 May 2024 15:59:11 +0000"  >&lt;p&gt;Can you try with latest 4.4.x and/or 4.5.0 release&lt;/p&gt;</comment>
                            <comment id="17843024" author="ammachado" created="Thu, 2 May 2024 17:11:42 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davsclaus&quot; class=&quot;user-hover&quot; rel=&quot;davsclaus&quot;&gt;davsclaus&lt;/a&gt; it fails using current 4.6.0-SNAPSHOT version.&lt;/p&gt;

&lt;p&gt;I attached a patch file on top of the camel-spring-boot-examples repository.&lt;/p&gt;

&lt;p&gt;You can apply it and run `mvn test camel-report:route-coverage` to replicate the issue.&lt;/p&gt;</comment>
                            <comment id="17843172" author="davsclaus" created="Fri, 3 May 2024 09:43:43 +0000"  >&lt;p&gt;Thanks for the sample project&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13068604" name="multiple-catch-blocks-reproducer.patch" size="4086" author="ammachado" created="Thu, 2 May 2024 17:12:13 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 27 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1ozy0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>