<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 09:59:40 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-6790] Resuming a bundle that uses blueprint+camel fails if it was suspended externally</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-6790</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;There is a problem in this scenario:&lt;/p&gt;

&lt;ol&gt;
	&lt;li&gt;Karaf is running.&lt;/li&gt;
	&lt;li&gt;Start some bundle that uses blueprint+camel. For convenience will call it &amp;lt;testbundle&amp;gt;.&lt;/li&gt;
	&lt;li&gt;Cause this bundle to be suspended by container, by refreshing a bundle that provides some namespace used by &amp;lt;testbundle&amp;gt; bundle. For example, by refreshing camel-cxf (assuming that &amp;lt;testbundle&amp;gt; uses also blueprint/cxf namespace). In logs one can see something like this:
&lt;blockquote&gt;&lt;p&gt;Bundle &amp;lt;testbundle&amp;gt; is waiting for namespace handlers &lt;a href=&quot;http://camel.apache.org/schema/blueprint/cxf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://camel.apache.org/schema/blueprint/cxf&lt;/a&gt;&lt;/p&gt;&lt;/blockquote&gt;&lt;/li&gt;
&lt;/ol&gt;


&lt;p&gt;In this case after the missing namespace becomes available again the bundle will fail to resume with exception like:&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Caused by: org.xml.sax.SAXParseException: cvc-complex-type.2.4.c: The matching wildcard is strict, but no declaration can be found for element &apos;camelContext&apos;.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;The problem is in CamelNamespaceHandler class which is a part of camel-blueprint. When it parses incoming dom it changes namespace of all elements from &lt;a href=&quot;http://camel.apache.org/schema/blueprint&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://camel.apache.org/schema/blueprint&lt;/a&gt; to &lt;a href=&quot;http://camel.apache.org/schema/spring&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://camel.apache.org/schema/spring&lt;/a&gt;. So when a bundle that uses blueprint+camel needs to validate its blueprint context again (like if it was waiting for some namespace) the new validation will fail.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12670840">CAMEL-6790</key>
            <summary>Resuming a bundle that uses blueprint+camel fails if it was suspended externally</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="eugene.tarasov">Ievgen Tarasov</reporter>
                        <labels>
                    </labels>
                <created>Thu, 26 Sep 2013 21:51:31 +0000</created>
                <updated>Mon, 7 Oct 2013 10:45:43 +0000</updated>
                            <resolved>Mon, 7 Oct 2013 10:45:43 +0000</resolved>
                                    <version>2.12.1</version>
                                    <fixVersion>2.11.3</fixVersion>
                    <fixVersion>2.12.2</fixVersion>
                    <fixVersion>2.13.0</fixVersion>
                                    <component>camel-blueprint</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13780811" author="davsclaus" created="Sat, 28 Sep 2013 12:59:40 +0000"  >&lt;p&gt;Thanks for reporting.&lt;/p&gt;</comment>
                            <comment id="13787782" author="eugene.tarasov" created="Sun, 6 Oct 2013 21:37:42 +0000"  >&lt;p&gt;Hi Claus. Thanks for fixing the problem! Trying the fix I found a further problem - when camelContext tag is being parsed, its id is being set to some unique value if it wasnt set by user. For setting the id CamelNamespaceHandler calls non-namespace-aware method &quot;setAttribute&quot;. Its necessary to change it to setAttributeNS (I added a patch that does it). With this change the whole &quot;refresh&quot; problem becomes solved.&lt;/p&gt;</comment>
                            <comment id="13788054" author="davsclaus" created="Mon, 7 Oct 2013 10:45:43 +0000"  >&lt;p&gt;Thanks I did the same change in camel-spring as its also in use with spring-dm for OSGi&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12607108" name="CamelContextIdSetting.patch" size="1313" author="eugene.tarasov" created="Sun, 6 Oct 2013 21:37:42 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>350669</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 7 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1ogo7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>350962</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>