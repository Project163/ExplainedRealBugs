<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:41:24 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-14996] Stack overflow error during aggregation when using completionSize</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-14996</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;I get stack overflow exception when i do aggregation with &lt;b&gt;small&lt;/b&gt; completionSize &lt;b&gt;only&lt;/b&gt;&lt;br/&gt;
I have about 50000 lines to process if i use .completionSize(1000) it&apos;s fine but if i do .completionSize(10) i got java.lang.StackOverflowError&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
from(&lt;span class=&quot;code-quote&quot;&gt;&quot;direct:iSplitSomethingBefore&quot;&lt;/span&gt;)
                .routeId(&lt;span class=&quot;code-quote&quot;&gt;&quot;myRouteId&quot;&lt;/span&gt;)

                .aggregate(header(FILE_NAME_ONLY), &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; GroupedBodyAggregationStrategy())
                .eagerCheckCompletion()
                .completionSize(10) &lt;span class=&quot;code-comment&quot;&gt;// Only when i use small number
&lt;/span&gt;                .completionPredicate(exchangeProperty(SPLIT_COMPLETE))
                &lt;span class=&quot;code-comment&quot;&gt;// Some code....
&lt;/span&gt;;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java.lang.StackOverflowError: &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;
	at java.base/java.lang.&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.defineClass1(Native Method) ~[na:na]
	at java.base/java.lang.&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.defineClass(&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.java:1016) ~[na:na]
	at java.base/java.security.SecureClassLoader.defineClass(SecureClassLoader.java:174) ~[na:na]
	at java.base/jdk.internal.loader.BuiltinClassLoader.defineClass(BuiltinClassLoader.java:800) ~[na:na]
	at java.base/jdk.internal.loader.BuiltinClassLoader.findClassOnClassPathOrNull(BuiltinClassLoader.java:698) ~[na:na]
	at java.base/jdk.internal.loader.BuiltinClassLoader.loadClassOrNull(BuiltinClassLoader.java:621) ~[na:na]
	at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:579) ~[na:na]
	at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:178) ~[na:na]
	at java.base/java.lang.&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.loadClass(&lt;span class=&quot;code-object&quot;&gt;ClassLoader&lt;/span&gt;.java:521) ~[na:na]
	at ch.qos.logback.classic.spi.PackagingDataCalculator.populateFrames(PackagingDataCalculator.java:74) ~[logback-classic-1.2.3.jar:na]
	at ch.qos.logback.classic.spi.PackagingDataCalculator.calculate(PackagingDataCalculator.java:58) ~[logback-classic-1.2.3.jar:na]
	at ch.qos.logback.classic.spi.ThrowableProxy.calculatePackagingData(ThrowableProxy.java:142) ~[logback-classic-1.2.3.jar:na]
	at ch.qos.logback.classic.spi.LoggingEvent.&amp;lt;init&amp;gt;(LoggingEvent.java:122) ~[logback-classic-1.2.3.jar:na]
	at ch.qos.logback.classic.Logger.buildLoggingEventAndAppend(Logger.java:419) ~[logback-classic-1.2.3.jar:na]
	at ch.qos.logback.classic.Logger.filterAndLog_0_Or3Plus(Logger.java:383) ~[logback-classic-1.2.3.jar:na]
	at ch.qos.logback.classic.Logger.warn(Logger.java:692) ~[logback-classic-1.2.3.jar:na]
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:150) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.schedule(DefaultReactiveExecutor.java:55) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.lambda$run$0(RedeliveryErrorHandler.java:401) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.processor.aggregate.AggregateProcessor.process(AggregateProcessor.java:323) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:395) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.schedule(DefaultReactiveExecutor.java:55) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.lambda$run$0(RedeliveryErrorHandler.java:398) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.processor.aggregate.AggregateProcessor.doProcess(AggregateProcessor.java:426) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.processor.aggregate.AggregateProcessor.doProcess(AggregateProcessor.java:365) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.processor.aggregate.AggregateProcessor.process(AggregateProcessor.java:320) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:395) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.schedule(DefaultReactiveExecutor.java:55) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.lambda$run$0(RedeliveryErrorHandler.java:398) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.processor.aggregate.AggregateProcessor.doProcess(AggregateProcessor.java:426) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.processor.aggregate.AggregateProcessor.doProcess(AggregateProcessor.java:365) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.processor.aggregate.AggregateProcessor.process(AggregateProcessor.java:320) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:395) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.schedule(DefaultReactiveExecutor.java:55) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.lambda$run$0(RedeliveryErrorHandler.java:398) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.processor.aggregate.AggregateProcessor.doProcess(AggregateProcessor.java:426) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.processor.aggregate.AggregateProcessor.doProcess(AggregateProcessor.java:365) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.processor.aggregate.AggregateProcessor.process(AggregateProcessor.java:320) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:395) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.schedule(DefaultReactiveExecutor.java:55) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.lambda$run$0(RedeliveryErrorHandler.java:398) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.processor.aggregate.AggregateProcessor.doProcess(AggregateProcessor.java:426) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.processor.aggregate.AggregateProcessor.doProcess(AggregateProcessor.java:365) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.processor.aggregate.AggregateProcessor.process(AggregateProcessor.java:320) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:395) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.schedule(DefaultReactiveExecutor.java:55) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.lambda$run$0(RedeliveryErrorHandler.java:398) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.processor.aggregate.AggregateProcessor.doProcess(AggregateProcessor.java:426) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.processor.aggregate.AggregateProcessor.doProcess(AggregateProcessor.java:365) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.processor.aggregate.AggregateProcessor.process(AggregateProcessor.java:320) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:395) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.schedule(DefaultReactiveExecutor.java:55) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.lambda$run$0(RedeliveryErrorHandler.java:398) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.processor.aggregate.AggregateProcessor.doProcess(AggregateProcessor.java:426) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.processor.aggregate.AggregateProcessor.doProcess(AggregateProcessor.java:365) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.processor.aggregate.AggregateProcessor.process(AggregateProcessor.java:320) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:395) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.schedule(DefaultReactiveExecutor.java:55) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.lambda$run$0(RedeliveryErrorHandler.java:398) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.processor.aggregate.AggregateProcessor.doProcess(AggregateProcessor.java:426) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.processor.aggregate.AggregateProcessor.doProcess(AggregateProcessor.java:365) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.processor.aggregate.AggregateProcessor.process(AggregateProcessor.java:320) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:395) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.schedule(DefaultReactiveExecutor.java:55) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.lambda$run$0(RedeliveryErrorHandler.java:398) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.processor.aggregate.AggregateProcessor.doProcess(AggregateProcessor.java:426) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.processor.aggregate.AggregateProcessor.doProcess(AggregateProcessor.java:365) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.processor.aggregate.AggregateProcessor.process(AggregateProcessor.java:320) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:395) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.schedule(DefaultReactiveExecutor.java:55) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.lambda$run$0(RedeliveryErrorHandler.java:398) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.processor.aggregate.AggregateProcessor.doProcess(AggregateProcessor.java:426) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.processor.aggregate.AggregateProcessor.doProcess(AggregateProcessor.java:365) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.processor.aggregate.AggregateProcessor.process(AggregateProcessor.java:320) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:395) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.schedule(DefaultReactiveExecutor.java:55) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.lambda$run$0(RedeliveryErrorHandler.java:398) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.processor.aggregate.AggregateProcessor.doProcess(AggregateProcessor.java:426) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.processor.aggregate.AggregateProcessor.doProcess(AggregateProcessor.java:365) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.processor.aggregate.AggregateProcessor.process(AggregateProcessor.java:320) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:395) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.schedule(DefaultReactiveExecutor.java:55) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.lambda$run$0(RedeliveryErrorHandler.java:398) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.processor.aggregate.AggregateProcessor.doProcess(AggregateProcessor.java:426) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.processor.aggregate.AggregateProcessor.doProcess(AggregateProcessor.java:365) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.processor.aggregate.AggregateProcessor.process(AggregateProcessor.java:320) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:395) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.schedule(DefaultReactiveExecutor.java:55) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.lambda$run$0(RedeliveryErrorHandler.java:398) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.processor.aggregate.AggregateProcessor.doProcess(AggregateProcessor.java:426) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.processor.aggregate.AggregateProcessor.doProcess(AggregateProcessor.java:365) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.processor.aggregate.AggregateProcessor.process(AggregateProcessor.java:320) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:395) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.schedule(DefaultReactiveExecutor.java:55) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.lambda$run$0(RedeliveryErrorHandler.java:398) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.processor.aggregate.AggregateProcessor.doProcess(AggregateProcessor.java:426) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.processor.aggregate.AggregateProcessor.doProcess(AggregateProcessor.java:365) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.processor.aggregate.AggregateProcessor.process(AggregateProcessor.java:320) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.run(RedeliveryErrorHandler.java:395) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.impl.engine.DefaultReactiveExecutor$Worker.schedule(DefaultReactiveExecutor.java:148) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.impl.engine.DefaultReactiveExecutor.schedule(DefaultReactiveExecutor.java:55) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.processor.errorhandler.RedeliveryErrorHandler$SimpleTask.lambda$run$0(RedeliveryErrorHandler.java:398) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.processor.aggregate.AggregateProcessor.doProcess(AggregateProcessor.java:426) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.processor.aggregate.AggregateProcessor.doProcess(AggregateProcessor.java:365) ~[camel-base-3.2.0.jar:3.2.0]
	at org.apache.camel.processor.aggregate.AggregateProcessor.process(AggregateProcessor.java:320) ~[camel-base-3.2.0.jar:3.2.0]
....
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</description>
                <environment></environment>
        <key id="13302327">CAMEL-14996</key>
            <summary>Stack overflow error during aggregation when using completionSize</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="michael992">michael elbaz</reporter>
                        <labels>
                    </labels>
                <created>Fri, 1 May 2020 17:03:48 +0000</created>
                <updated>Mon, 4 May 2020 15:48:45 +0000</updated>
                            <resolved>Mon, 4 May 2020 15:38:41 +0000</resolved>
                                    <version>3.2.0</version>
                                    <fixVersion>3.3.0</fixVersion>
                                    <component>camel-core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17097519" author="chardahe@redhat.com" created="Fri, 1 May 2020 17:09:08 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;Thanks for reporting, I&apos;ll look into it&lt;/p&gt;</comment>
                            <comment id="17097842" author="davsclaus" created="Sat, 2 May 2020 07:04:14 +0000"  >&lt;p&gt;Thanks for reporting, so you have a file with 50000 lines or something and then you aggregate that with a completion size of 10? But you refer to a split completion. So do you have a splitter beforehand?&lt;/p&gt;

&lt;p&gt;In other words can you maybe put together a small sample unit test or project that reproduces this and attach as zip to this JIRA or put on github etc.&lt;/p&gt;</comment>
                            <comment id="17098087" author="michael992" created="Sat, 2 May 2020 19:58:14 +0000"  >&lt;p&gt;&lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/13001898/13001898_stackoverflow.zip&quot; title=&quot;stackoverflow.zip attached to CAMEL-14996&quot;&gt;stackoverflow.zip&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt;  &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davsclaus&quot; class=&quot;user-hover&quot; rel=&quot;davsclaus&quot;&gt;davsclaus&lt;/a&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=chardahe%40redhat.com&quot; class=&quot;user-hover&quot; rel=&quot;chardahe@redhat.com&quot;&gt;chardahe@redhat.com&lt;/a&gt; Reproducible test&lt;/p&gt;</comment>
                            <comment id="17098289" author="davsclaus" created="Sun, 3 May 2020 08:04:17 +0000"  >&lt;p&gt;Thanks for reporting, as a workaround you can enable parallel processing on the splitter.&lt;/p&gt;</comment>
                            <comment id="17098736" author="davsclaus" created="Mon, 4 May 2020 07:23:28 +0000"  >&lt;p&gt;Okay so this is a combo of splitter and aggregator (but main issue are in splitter/multicast processor) that under certain situations causes to reuse the same thread for splitting all the content but the stackframe doesnt not collapse and it grows and you hit max 1024 and the jvm cant cope with this.&lt;/p&gt;

&lt;p&gt;The parallel processing option causes the splitter to not reuse the same main thread and therefore does not have this problem.&lt;/p&gt;</comment>
                            <comment id="17098752" author="michael992" created="Mon, 4 May 2020 07:54:45 +0000"  >&lt;p&gt;Thanks for investigating so is it a defect or i just have to increase my jvm option or using parallel option ?&lt;/p&gt;</comment>
                            <comment id="17098755" author="davsclaus" created="Mon, 4 May 2020 07:58:30 +0000"  >&lt;p&gt;Use parallel, then the splitted messages may be out of order as the default thread pool has 10 worker threads. You can configure this to 1 worker thread, then its not out of order - if you must process the rows one by one in the exact order of your input file.&lt;/p&gt;</comment>
                            <comment id="17099040" author="davsclaus" created="Mon, 4 May 2020 15:28:01 +0000"  >&lt;p&gt;Okay have a fix via &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-15008&quot; title=&quot;camel-core - ReactiveExecutor should run scheduled tasks more fairly&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-15008&quot;&gt;&lt;del&gt;CAMEL-15008&lt;/del&gt;&lt;/a&gt; thanks for reporting Michael and providing the sample reproducer. Running your sample now works for me.&lt;/p&gt;</comment>
                            <comment id="17099070" author="michael992" created="Mon, 4 May 2020 15:48:45 +0000"  >&lt;p&gt;Ok &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davsclaus&quot; class=&quot;user-hover&quot; rel=&quot;davsclaus&quot;&gt;davsclaus&lt;/a&gt; thanks you for your great work !&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13302644">CAMEL-15008</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="13001898" name="stackoverflow.zip" size="618097" author="michael992" created="Sat, 2 May 2020 19:58:06 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10063"><![CDATA[Advanced]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 28 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0eat4:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>