<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:08:12 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-8557] The entire LRU Cache is cleared on eviction of a single entry</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-8557</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;Use Case:&lt;br/&gt;
Using Sftp End point to poll remote directory&lt;br/&gt;
Set the following attributes in uri&lt;br/&gt;
noop=true &lt;br/&gt;
idempotent=true&lt;br/&gt;
idempotentRepository=#idemRep&lt;/p&gt;

&lt;p&gt;where #idemRep is defined in context xml as below&lt;/p&gt;

&lt;p&gt; &amp;lt;bean id=&quot;idemRep&quot; class=&quot;org.apache.camel.processor.idempotent.MemoryIdempotentRepository&quot;&amp;gt;&lt;br/&gt;
       &amp;lt;property name=&quot;cacheSize&quot; value=&quot;10&quot;  /&amp;gt;&lt;br/&gt;
    &amp;lt;/bean&amp;gt;&lt;/p&gt;

&lt;p&gt;The number of files in the remote directory is more than 10.&lt;/p&gt;

&lt;p&gt;In the above scenario, while trying to add 11th entry into the map, the eldest entry is evicted as expected but soon after the eviction the LRUCache.onEviction clears cache, which i am wondering is not the expected behavior of LRU Cache.&lt;/p&gt;

&lt;p&gt;This happens because LRUCache.stopOnEviction is always set to true during the LRUCache instantiation which triggers ServiceHelper.stopService on eviction.&lt;/p&gt;

&lt;p&gt; I am trying to understand why we need to reset the cache on eviction.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Camel 2.12.2, concurrentlinkedhashmap - 1.2 &lt;/p&gt;</environment>
        <key id="12785882">CAMEL-8557</key>
            <summary>The entire LRU Cache is cleared on eviction of a single entry</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="mpadmanaba">Padmanaban</reporter>
                        <labels>
                    </labels>
                <created>Thu, 26 Mar 2015 13:45:12 +0000</created>
                <updated>Sat, 28 Mar 2015 16:23:36 +0000</updated>
                            <resolved>Sat, 28 Mar 2015 16:23:36 +0000</resolved>
                                    <version>2.12.2</version>
                                    <fixVersion>2.16.0</fixVersion>
                                    <component>camel-core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14385388" author="davsclaus" created="Sat, 28 Mar 2015 16:23:36 +0000"  >&lt;p&gt;Added unit test and it works as expected. The cache is not cleared only the eldest entry.&lt;/p&gt;

&lt;p&gt;The stop operation is only for services. But the idempotent repo contains String values for the file names, so the stop dont have any matter.&lt;/p&gt;

&lt;p&gt;It must be something else on your end.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 34 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i27ebz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>