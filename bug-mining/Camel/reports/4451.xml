<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:28:37 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-12324] Issue:Camel rabbitmq publishes message to consumer exchange instead of publisher exchange</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-12324</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;Hello Team,&lt;/p&gt;

&lt;p&gt;I am facing issue when i tried to use camel rabbitmq components for version 2.20.x.&lt;/p&gt;

&lt;p&gt;The issue is happening when i have camel context containing route that consumes from rabbitmq queue and publishes to rabbitmq exchange .What happens is camel rabbitmq is publishing to consumer exchange instead of given producer exchange and in this way it goes in infinite cycle. Here is sample route for reference which can&#160;easily reproduce the issue.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&amp;lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;&lt;/p&gt;

&lt;p&gt;&#160;&#160; &#160; &#160; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&lt;/p&gt;

&lt;p&gt;&#160;&#160; &#160; &#160; xmlns:context=&quot;http://www.springframework.org/schema/context&quot;&lt;/p&gt;

&lt;p&gt;&#160;&#160; &#160; &#160; xmlns:camel=&quot;http://camel.apache.org/schema/spring&quot;&lt;/p&gt;

&lt;p&gt;&#160;&#160; &#160; &#160; xsi:schemaLocation=&quot;&lt;/p&gt;

&lt;p&gt;&#160;&#160; &#160; &#160; &#160; &lt;a href=&quot;http://www.springframework.org/schema/beans&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.springframework.org/schema/beans&lt;/a&gt; &lt;a href=&quot;http://www.springframework.org/schema/beans/spring-beans.xsd&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.springframework.org/schema/beans/spring-beans.xsd&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&#160; &#160; &#160; &#160; &lt;a href=&quot;http://www.springframework.org/schema/context&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.springframework.org/schema/context&lt;/a&gt; &lt;a href=&quot;http://www.springframework.org/schema/context/spring-context.xsd&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.springframework.org/schema/context/spring-context.xsd&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&#160; &#160; &#160; &#160; &lt;a href=&quot;http://camel.apache.org/schema/spring&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://camel.apache.org/schema/spring&lt;/a&gt; &lt;a href=&quot;http://camel.apache.org/schema/spring/camel-spring.xsd&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://camel.apache.org/schema/spring/camel-spring.xsd&lt;/a&gt;&quot;&amp;gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160; &#160; &amp;lt;camel:camelContext id=&quot;rmqtest&quot;&amp;gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160; &#160; &#160; &#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160; &#160; &#160; &#160; &amp;lt;camel:route id=&quot;java&quot;&amp;gt;&lt;/p&gt;

&lt;p&gt;&#160;&#160; &#160; &#160; &#160; &#160; &#160;&lt;/p&gt;

&lt;p&gt;&#160; &#160; &#160; &#160; &#160; &#160; &amp;lt;camel:from uri=&quot;rabbitmq://localhost:8311/test_exchange_in?username=admin&amp;amp;password=admin&amp;amp;vhost=/&amp;amp;queue=test_queue_in&amp;amp;automaticRecoveryEnabled=true&amp;amp;concurrentConsumers=2&amp;amp;durable=false&amp;amp;arg.queue.x-message-ttl=5000&amp;amp;networkRecoveryInterval=10000&quot; /&amp;gt;&lt;/p&gt;

&lt;p&gt;&amp;lt;camel:log message=&quot;incoming message ${body}. Modifying message body.&quot; loggingLevel=&quot;INFO&quot;/&amp;gt;&lt;/p&gt;

&lt;p&gt;&amp;lt;camel:setBody&amp;gt; &amp;lt;camel:simple trim=&quot;false&quot;&amp;gt;Message modified.&amp;lt;/camel:simple&amp;gt; &amp;lt;/camel:setBody&amp;gt;&lt;/p&gt;

&lt;p&gt; &#160; &amp;lt;camel:to uri=&quot;rabbitmq://localhost:8311/test_exchange_out?username=admin&amp;amp;password=admin&amp;amp;vhost=/&amp;amp;skipQueueDeclare=true&amp;amp;exchangeType=headers&amp;amp;automaticRecoveryEnabled=true&amp;amp;autoDelete=false&amp;amp;networkRecoveryInterval=10000&quot;&#160; /&amp;gt;&#160;&lt;/p&gt;

&lt;p&gt;&amp;lt;camel:log message=&quot;publish done&quot; loggingLevel=&quot;INFO&quot;/&amp;gt;&lt;/p&gt;

&lt;p&gt;&#160; &#160; &#160; &#160; &amp;lt;/camel:route&amp;gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160; &#160; &#160; &#160;&lt;/p&gt;

&lt;p&gt;&#160; &#160; &amp;lt;/camel:camelContext&amp;gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&amp;lt;/beans&amp;gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I have also attached sample project to reproduce the issue.&#160;&lt;/p&gt;

&lt;p&gt;Request you to please look into the issue and let us know the solution or fix if any.&lt;/p&gt;

&lt;p&gt;Thanks &amp;amp; regards,&lt;/p&gt;

&lt;p&gt;Zoheb&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13142918">CAMEL-12324</key>
            <summary>Issue:Camel rabbitmq publishes message to consumer exchange instead of publisher exchange</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="10004">Not A Bug</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="zohebp">zoheb</reporter>
                        <labels>
                    </labels>
                <created>Tue, 6 Mar 2018 17:10:45 +0000</created>
                <updated>Wed, 7 Mar 2018 09:18:57 +0000</updated>
                            <resolved>Wed, 7 Mar 2018 07:42:25 +0000</resolved>
                                    <version>2.20.0</version>
                    <version>2.20.1</version>
                    <version>2.20.2</version>
                                    <fixVersion>2.21.0</fixVersion>
                                    <component>camel-rabbitmq</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16388336" author="ancosen" created="Tue, 6 Mar 2018 19:09:10 +0000"  >&lt;p&gt;Ask on mailing list first&lt;/p&gt;</comment>
                            <comment id="16388886" author="zohebp" created="Wed, 7 Mar 2018 02:02:10 +0000"  >&lt;p&gt;Hi Andrea,&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I think this is a bug in camel 2.20.x rabbitmq component I tried many things but it didn&apos;t worked.&#160;&lt;/p&gt;

&lt;p&gt;As per your recommendation I have also published issue to camel user mailing list.&lt;/p&gt;

&lt;p&gt;Request team to please look into this as it is a major blocker in case camel context contains route that consume from rabbitmq and publishes to rabbitmq.&lt;/p&gt;</comment>
                            <comment id="16389183" author="davsclaus" created="Wed, 7 Mar 2018 07:33:01 +0000"  >&lt;p&gt;You need to either&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;remove the `rabbitmq.EXCHANGE_NAME` header before sending, or&#160;&lt;/li&gt;
	&lt;li&gt;turn on bridge endpoint which would ignore this header and send it to the exchange set on the endpoint uri&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;eg in your camel:to add the option: bridgeEndpoint=true&lt;/p&gt;</comment>
                            <comment id="16389191" author="davsclaus" created="Wed, 7 Mar 2018 07:40:08 +0000"  >&lt;p&gt;I have improved the docs to explain about this&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/camel/blob/master/components/camel-rabbitmq/src/main/docs/rabbitmq-component.adoc#routing-between-exchanges&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/blob/master/components/camel-rabbitmq/src/main/docs/rabbitmq-component.adoc#routing-between-exchanges&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16389192" author="davsclaus" created="Wed, 7 Mar 2018 07:42:00 +0000"  >&lt;p&gt;Its a bit unfortunately but that is how the camel-rabbitmq component was originally created to do this. In the JMS component we have a special header for overriding what destination to send to so it wont do something like the rabbitmq component does. We should likely look at doing something similar.&lt;/p&gt;</comment>
                            <comment id="16389263" author="zohebp" created="Wed, 7 Mar 2018 08:50:27 +0000"  >&lt;p&gt;Thanks a lot&#160;Claus for quick response and docs update.&lt;/p&gt;

&lt;p&gt;If possible please update camel main docs page (&lt;a href=&quot;http://camel.apache.org/rabbitmq.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://camel.apache.org/rabbitmq.html&lt;/a&gt;) also as it could be helpful for other committed camel users.&lt;/p&gt;</comment>
                            <comment id="16389294" author="davsclaus" created="Wed, 7 Mar 2018 09:18:57 +0000"  >&lt;p&gt;The docs on&#160;(&lt;a href=&quot;http://camel.apache.org/rabbitmq.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://camel.apache.org/rabbitmq.html&lt;/a&gt;)&#160; is out-of-date. See the top of the page. All the Camel components are documented in the adoc files which you can view on github.&lt;/p&gt;

&lt;p&gt;The old docs are being replaced with a new website and new docs when its ready later this year.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13143133">CAMEL-12329</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12913232" name="camel-rmq-test.zip" size="14592" author="zohebp" created="Tue, 6 Mar 2018 17:09:32 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 37 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3qxpr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>