<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:36:42 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-13880] netty4-http component is setting an invalid &quot;host&quot; HTTP header</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-13880</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;The netty4-http component is setting an invalid &quot;host&quot; HTTP header when no port is defined in the uri for requests.&lt;/p&gt;

&lt;p&gt;netty4-http sets the header in DefaultNettyHttpBinding.toNettyRequest where URI is used to parse the uri string but URI give -1 if no port is defined. For example the host header could be set to &quot;hostname:-1&quot; which is not accepted of some proxy servers that check the validity of the host header. For example Apache proxy will return a http error 400(Bad request).&lt;/p&gt;

&lt;p&gt;See&#160;&lt;a href=&quot;https://tools.ietf.org/html/rfc7230#section-5.4&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://tools.ietf.org/html/rfc7230#section-5.4&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-comment&quot;&gt;// This is how it&apos;s done in DefaultNettyHttpBinding.toNettyRequest
&lt;/span&gt;URI u = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; URI(uri);
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; hostHeader = u.getHost() + (u.getPort() == 80 ? &lt;span class=&quot;code-quote&quot;&gt;&quot;&quot; : &quot;&lt;/span&gt;:&quot; + u.getPort());
request.headers().set(HttpHeaderNames.HOST.toString(), hostHeader);
LOG.trace(&lt;span class=&quot;code-quote&quot;&gt;&quot;Host: {}&quot;&lt;/span&gt;, hostHeader);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;{{}}&lt;/p&gt;

&lt;p&gt;One solution could be:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
URI u = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; URI(uri);
&lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; port = u.getPort();
&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; hostHeader = u.getHost() + (port == 80 || port ==-1 ? &lt;span class=&quot;code-quote&quot;&gt;&quot;&quot; : &quot;&lt;/span&gt;:&quot; + port);
request.headers().set(HttpHeaderNames.HOST.toString(), hostHeader);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13251762">CAMEL-13880</key>
            <summary>netty4-http component is setting an invalid &quot;host&quot; HTTP header</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ramu11">Ramu</assignee>
                                    <reporter username="urken">G&#246;ran Erkstam</reporter>
                        <labels>
                    </labels>
                <created>Tue, 20 Aug 2019 06:33:21 +0000</created>
                <updated>Thu, 5 Sep 2019 01:59:27 +0000</updated>
                            <resolved>Thu, 5 Sep 2019 01:59:27 +0000</resolved>
                                    <version>2.24.0</version>
                                    <fixVersion>3.0.0</fixVersion>
                                    <component>camel-netty4-http</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                        <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 13 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z05too:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>