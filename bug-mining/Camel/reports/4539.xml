<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:29:49 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-12548] NullPointerException in camel-cmis when using wrong credentials</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-12548</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;If you try to send something via cmis (uri in blueprint: &lt;tt&gt;&quot;cmis:// ... &quot;&lt;/tt&gt;) and you use a wrong password then on the second (and all subsequent) tries you will get a &lt;tt&gt;NullPointerExceptionException&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;Stacktrace:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
java.lang.NullPointerException
 at org.apache.camel.component.cmis.CMISSessionFacade.getCMISTypeFor(CMISSessionFacade.java:221)
 at org.apache.camel.component.cmis.CMISProducer.isFolder(CMISProducer.java:146)
 at org.apache.camel.component.cmis.CMISProducer.parentFolderPathFor(CMISProducer.java:132)
 at org.apache.camel.component.cmis.CMISProducer.createNode(CMISProducer.java:101)
 at org.apache.camel.component.cmis.CMISProducer.process(CMISProducer.java:62)
 at org.apache.camel.util.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:61)
 at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:145)
 at org.apache.camel.management.InstrumentationProcessor.process(InstrumentationProcessor.java:77)
 at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:196)
 at org.apache.camel.processor.Pipeline.process(Pipeline.java:121)
 at org.apache.camel.processor.Pipeline.process(Pipeline.java:83)
 at org.apache.camel.processor.TryProcessor.process(TryProcessor.java:113)
 at org.apache.camel.processor.TryProcessor.process(TryProcessor.java:84)
 at org.apache.camel.management.InstrumentationProcessor.process(InstrumentationProcessor.java:77)
 at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:196)
 at org.apache.camel.processor.Pipeline.process(Pipeline.java:121)
 at org.apache.camel.processor.Pipeline.process(Pipeline.java:83)
 at org.apache.camel.processor.CamelInternalProcessor.process(CamelInternalProcessor.java:196)
 at org.apache.camel.component.cxf.CxfConsumer$CxfConsumerInvoker.asyncInvoke(CxfConsumer.java:165)
 at org.apache.camel.component.cxf.CxfConsumer$CxfConsumerInvoker.invoke(CxfConsumer.java:144)
 at org.apache.cxf.interceptor.ServiceInvokerInterceptor$1.run(ServiceInvokerInterceptor.java:59)
 at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
 at java.util.concurrent.FutureTask.run(FutureTask.java:266)
 at org.apache.cxf.interceptor.ServiceInvokerInterceptor$2.run(ServiceInvokerInterceptor.java:126)
 at org.apache.cxf.workqueue.SynchronousExecutor.execute(SynchronousExecutor.java:37)
 at org.apache.cxf.interceptor.ServiceInvokerInterceptor.handleMessage(ServiceInvokerInterceptor.java:131)
 at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:308)
 at org.apache.cxf.transport.ChainInitiationObserver.onMessage(ChainInitiationObserver.java:121)
 at org.apache.cxf.transport.http.AbstractHTTPDestination.invoke(AbstractHTTPDestination.java:254)
 at org.apache.cxf.transport.servlet.ServletController.invokeDestination(ServletController.java:234)
 at org.apache.cxf.transport.servlet.ServletController.invoke(ServletController.java:208)
 at org.apache.cxf.transport.servlet.ServletController.invoke(ServletController.java:160)
 at org.apache.cxf.transport.servlet.CXFNonSpringServlet.invoke(CXFNonSpringServlet.java:180)
 at org.apache.cxf.transport.servlet.AbstractHTTPServlet.handleRequest(AbstractHTTPServlet.java:299)
 at org.apache.cxf.transport.servlet.AbstractHTTPServlet.doPost(AbstractHTTPServlet.java:218)
 at javax.servlet.http.HttpServlet.service(HttpServlet.java:707)
 at org.apache.cxf.transport.servlet.AbstractHTTPServlet.service(AbstractHTTPServlet.java:274)
 at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:812)
 at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1669)
 at org.eclipse.jetty.websocket.server.WebSocketUpgradeFilter.doFilter(WebSocketUpgradeFilter.java:201)
 at org.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1652)
 at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:585)
 at org.ops4j.pax.web.service.jetty.internal.HttpServiceServletHandler.doHandle(HttpServiceServletHandler.java:72)
 at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:143)
 at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:577)
 at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:223)
 at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1127)
 at org.ops4j.pax.web.service.jetty.internal.HttpServiceContext.doHandle(HttpServiceContext.java:287)
 at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:515)
 at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:185)
 at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1061)
 at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:141)
 at org.ops4j.pax.web.service.jetty.internal.JettyServerHandlerCollection.handle(JettyServerHandlerCollection.java:80)
 at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:97)
 at org.eclipse.jetty.server.Server.handle(Server.java:499)
 at org.eclipse.jetty.server.HttpChannel.handle(HttpChannel.java:311)
 at org.eclipse.jetty.server.HttpConnection.onFillable(HttpConnection.java:258)
 at org.eclipse.jetty.io.AbstractConnection$2.run(AbstractConnection.java:544)
 at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:635)
 at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:555)
 at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:748)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The &lt;tt&gt;CMISProducer&lt;/tt&gt; creates a &lt;tt&gt;CMISSessionFacade&lt;/tt&gt; (&lt;tt&gt;CMISProducer.getSessionFacade()&lt;/tt&gt;), delegates the initialization of a session to the facade (&lt;tt&gt;CMISSessionFacade.initSession()&lt;/tt&gt;) and stores the facade inside a member variable. The &lt;tt&gt;CMISSessionFacade&lt;/tt&gt; creates a Session, tries to connect to the remote system and stores the created Session object inside a member variable. If the provided password for the remote system is wrong then at this point a &lt;tt&gt;CmisUnauthorizedException&lt;/tt&gt; (basically a &lt;tt&gt;RuntimeException&lt;/tt&gt;) is thrown.&lt;/p&gt;

&lt;p&gt;(&lt;tt&gt;org.apache.chemistry.opencmis.commons.exceptions.CmisUnauthorizedException: Unauthorized&lt;/tt&gt;)&lt;/p&gt;

&lt;p&gt;This behavior is ok but the consequence is that a member variable inside the &lt;tt&gt;CMISSessionFacade&lt;/tt&gt; (called &quot;session&quot;) is still null.&lt;/p&gt;

&lt;p&gt;Camel caches the &lt;tt&gt;CMISProducer&lt;/tt&gt; with its reference to &lt;tt&gt;CMISSessionFacade&lt;/tt&gt; whose &quot;session&quot; is set to null. If you try to send something else via cmis then you get the &lt;tt&gt;NullPointerException&lt;/tt&gt; as described above.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13163121">CAMEL-12548</key>
            <summary>NullPointerException in camel-cmis when using wrong credentials</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tadayosi">Tadayoshi Sato</assignee>
                                    <reporter username="tadayosi">Tadayoshi Sato</reporter>
                        <labels>
                    </labels>
                <created>Thu, 31 May 2018 11:41:14 +0000</created>
                <updated>Mon, 4 Jun 2018 05:55:37 +0000</updated>
                            <resolved>Mon, 4 Jun 2018 05:55:37 +0000</resolved>
                                    <version>2.21.1</version>
                                    <fixVersion>2.21.2</fixVersion>
                    <fixVersion>2.22.0</fixVersion>
                    <fixVersion>2.23.0</fixVersion>
                                    <component>camel-cmis</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16499687" author="githubbot" created="Mon, 4 Jun 2018 02:50:20 +0000"  >&lt;p&gt;tadayosi opened a new pull request #2357: &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12548&quot; title=&quot;NullPointerException in camel-cmis when using wrong credentials&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12548&quot;&gt;&lt;del&gt;CAMEL-12548&lt;/del&gt;&lt;/a&gt;: NullPointerException in camel-cmis when using wrong cred&#8230;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/camel/pull/2357&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2357&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   &#8230;entials&lt;/p&gt;

&lt;p&gt;   It makes sure the sessionFacade is assgined to the field only after the session is successfully initialised, so that the sessionFacade never dangles in an incomplete state.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16499688" author="githubbot" created="Mon, 4 Jun 2018 02:50:20 +0000"  >&lt;p&gt;GitHub user tadayosi opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/2357&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2357&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12548&quot; title=&quot;NullPointerException in camel-cmis when using wrong credentials&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12548&quot;&gt;&lt;del&gt;CAMEL-12548&lt;/del&gt;&lt;/a&gt;: NullPointerException in camel-cmis when using wrong cred&#8230;&lt;/p&gt;

&lt;p&gt;    &#8230;entials&lt;/p&gt;

&lt;p&gt;    It makes sure the sessionFacade is assgined to the field only after the session is successfully initialised, so that the sessionFacade never dangles in an incomplete state.&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/tadayosi/camel&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/tadayosi/camel&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12548&quot; title=&quot;NullPointerException in camel-cmis when using wrong credentials&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12548&quot;&gt;&lt;del&gt;CAMEL-12548&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/2357.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2357.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #2357&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 08aa6124bc710179b608ed1538d966ea91b1f39b&lt;br/&gt;
Author: Tadayoshi Sato &amp;lt;sato.tadayoshi@...&amp;gt;&lt;br/&gt;
Date:   2018-06-04T02:46:53Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12548&quot; title=&quot;NullPointerException in camel-cmis when using wrong credentials&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12548&quot;&gt;&lt;del&gt;CAMEL-12548&lt;/del&gt;&lt;/a&gt;: NullPointerException in camel-cmis when using wrong credentials&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16499766" author="githubbot" created="Mon, 4 Jun 2018 05:40:46 +0000"  >&lt;p&gt;davsclaus closed pull request #2357: &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12548&quot; title=&quot;NullPointerException in camel-cmis when using wrong credentials&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12548&quot;&gt;&lt;del&gt;CAMEL-12548&lt;/del&gt;&lt;/a&gt;: NullPointerException in camel-cmis when using wrong cred&#8230;&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/camel/pull/2357&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2357&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/components/camel-cmis/src/main/java/org/apache/camel/component/cmis/CMISProducer.java b/components/camel-cmis/src/main/java/org/apache/camel/component/cmis/CMISProducer.java&lt;br/&gt;
index 4097260ef7d..dc927020e2d 100644&lt;br/&gt;
&amp;#8212; a/components/camel-cmis/src/main/java/org/apache/camel/component/cmis/CMISProducer.java&lt;br/&gt;
+++ b/components/camel-cmis/src/main/java/org/apache/camel/component/cmis/CMISProducer.java&lt;br/&gt;
@@ -195,8 +195,11 @@ private String getMimeType(Message message) throws NoSuchHeaderException {&lt;/p&gt;

&lt;p&gt;     private CMISSessionFacade getSessionFacade() throws Exception {&lt;br/&gt;
         if (sessionFacade == null) &lt;/p&gt;
{
-            sessionFacade = sessionFacadeFactory.create(getEndpoint());
+            CMISSessionFacade sessionFacade = sessionFacadeFactory.create(getEndpoint());
             sessionFacade.initSession();
+            // make sure to set sessionFacade to the field after successful initialisation
+            // so that it has a valid session
+            this.sessionFacade = sessionFacade;
         }

&lt;p&gt;         return sessionFacade;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16499767" author="githubbot" created="Mon, 4 Jun 2018 05:40:47 +0000"  >&lt;p&gt;Github user davsclaus closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/2357&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2357&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16499776" author="davsclaus" created="Mon, 4 Jun 2018 05:55:37 +0000"  >&lt;p&gt;Thanks for the PR&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 24 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3ucnz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>