<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 11:01:47 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-19562] aws sqs visibility extender is running forever</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-19562</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;aws sqs visibility extender in some corner case is running forever. Below warning is thrown forever until I had to restart the server.&#160; I see it happen once in a week. This bug is causing the scheduler to be run forever consuming resources.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;2023-06-23T03:16:03.222Z &lt;a href=&quot;#43 - SqsTimeoutExtender&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Camel (61) thread #43 - SqsTimeoutExtender&lt;/a&gt; #033[36mo.a.c.c.a.s.Sqs2Consumer#033[m #033[33mWARN #033[m - Extending visibility window failed for exchange Exchange&lt;span class=&quot;error&quot;&gt;&amp;#91;C6602184B0E4B49-000000000003F2CB&amp;#93;&lt;/span&gt;. Will not attempt to extend visibility further. This exception will be ignored.&lt;br/&gt;
2023-06-23T03:17:03.209Z &lt;a href=&quot;#43 - SqsTimeoutExtender&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Camel (61) thread #43 - SqsTimeoutExtender&lt;/a&gt; #033[36mo.a.c.c.a.s.Sqs2Consumer#033[m #033[33mWARN #033[m - Extending visibility window failed for exchange Exchange&lt;span class=&quot;error&quot;&gt;&amp;#91;C6602184B0E4B49-000000000003F2CB&amp;#93;&lt;/span&gt;. Will not attempt to extend visibility further. This exception will be ignored.&lt;br/&gt;
2023-06-23T03:18:03.182Z &lt;a href=&quot;#43 - SqsTimeoutExtender&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Camel (61) thread #43 - SqsTimeoutExtender&lt;/a&gt; #033[36mo.a.c.c.a.s.Sqs2Consumer#033[m #033[33mWARN #033[m - Extending visibility window failed for exchange Exchange&lt;span class=&quot;error&quot;&gt;&amp;#91;C6602184B0E4B49-000000000003F2CB&amp;#93;&lt;/span&gt;. Will not attempt to extend visibility further. This exception will be ignored.&lt;br/&gt;
2023-06-23T03:19:03.209Z &lt;a href=&quot;#43 - SqsTimeoutExtender&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Camel (61) thread #43 - SqsTimeoutExtender&lt;/a&gt; #033[36mo.a.c.c.a.s.Sqs2Consumer#033[m #033[33mWARN #033[m - Extending visibility window failed for exchange Exchange&lt;span class=&quot;error&quot;&gt;&amp;#91;C6602184B0E4B49-000000000003F2CB&amp;#93;&lt;/span&gt;. Will not attempt to extend visibility further. This exception will be ignored.&lt;br/&gt;
2023-06-23T03:20:03.180Z &lt;a href=&quot;#43 - SqsTimeoutExtender&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Camel (61) thread #43 - SqsTimeoutExtender&lt;/a&gt; #033[36mo.a.c.c.a.s.Sqs2Consumer#033[m #033[33mWARN #033[m - Extending visibility window failed for exchange Exchange&lt;span class=&quot;error&quot;&gt;&amp;#91;C6602184B0E4B49-000000000003F2CB&amp;#93;&lt;/span&gt;. Will not attempt to extend visibility further. This exception will be ignored.&lt;br/&gt;
2023-06-23T03:21:03.180Z &lt;a href=&quot;#43 - SqsTimeoutExtender&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Camel (61) thread #43 - SqsTimeoutExtender&lt;/a&gt; #033[36mo.a.c.c.a.s.Sqs2Consumer#033[m #033[33mWARN #033[m - Extending visibility window failed for exchange Exchange&lt;span class=&quot;error&quot;&gt;&amp;#91;C6602184B0E4B49-000000000003F2CB&amp;#93;&lt;/span&gt;. Will not attempt to extend visibility further. This exception will be ignored.&lt;br/&gt;
2023-06-23T03:22:03.233Z &lt;a href=&quot;#43 - SqsTimeoutExtender&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Camel (61) thread #43 - SqsTimeoutExtender&lt;/a&gt; #033[36mo.a.c.c.a.s.Sqs2Consumer#033[m #033[33mWARN #033[m - Extending visibility window failed for exchange Exchange&lt;span class=&quot;error&quot;&gt;&amp;#91;C6602184B0E4B49-000000000003F2CB&amp;#93;&lt;/span&gt;. Will not attempt to extend visibility further. This exception will be ignored.&lt;br/&gt;
2023-06-23T03:23:03.204Z &lt;a href=&quot;#43 - SqsTimeoutExtender&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Camel (61) thread #43 - SqsTimeoutExtender&lt;/a&gt; #033[36mo.a.c.c.a.s.Sqs2Consumer#033[m #033[33mWARN #033[m - Extending visibility window failed for exchange Exchange&lt;span class=&quot;error&quot;&gt;&amp;#91;C6602184B0E4B49-000000000003F2CB&amp;#93;&lt;/span&gt;. Will not attempt to extend visibility further. This exception will be ignored.&lt;br/&gt;
2023-06-23T03:24:03.182Z &lt;a href=&quot;#43 - SqsTimeoutExtender&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Camel (61) thread #43 - SqsTimeoutExtender&lt;/a&gt; #033[36mo.a.c.c.a.s.Sqs2Consumer#033[m #033[33mWARN #033[m - Extending visibility window failed for exchange Exchange&lt;span class=&quot;error&quot;&gt;&amp;#91;C6602184B0E4B49-000000000003F2CB&amp;#93;&lt;/span&gt;. Will not attempt to extend visibility further. This exception will be ignored.&lt;br/&gt;
2023-06-23T03:26:03.207Z &lt;a href=&quot;#43 - SqsTimeoutExtender&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Camel (61) thread #43 - SqsTimeoutExtender&lt;/a&gt; #033[36mo.a.c.c.a.s.Sqs2Consumer#033[m #033[33mWARN #033[m - Extending visibility window failed for exchange Exchange&lt;span class=&quot;error&quot;&gt;&amp;#91;C6602184B0E4B49-000000000003F2CB&amp;#93;&lt;/span&gt;. Will not attempt to extend visibility further. This exception will be ignored.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I tried reproducing, but couldn&apos;t reproduce.&lt;/p&gt;

&lt;p&gt;org.apache.camel.component.aws2.sqs.Sqs2Consumer&lt;/p&gt;

&lt;p&gt;This could happen when scheduler couldn&apos;t be cancelled with scheduledFuture.cancel(false) and the scheduler runs forever.&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;final ScheduledFuture&amp;lt;?&amp;gt; scheduledFuture = this.scheduledExecutor.scheduleAtFixedRate(new TimeoutExtender(exchange, repeatSeconds), (long)delay, (long)period, TimeUnit.SECONDS);&lt;br/&gt;
((ExtendedExchange)exchange.adapt(ExtendedExchange.class)).addOnCompletion(new Synchronization() &lt;/p&gt;
&lt;div class=&quot;error&quot;&gt;&lt;span class=&quot;error&quot;&gt;Unknown macro: {
public void onComplete(Exchange exchange)
Unknown macro}&lt;/span&gt; &lt;/div&gt;


&lt;p&gt;public void onFailure(Exchange exchange)&lt;/p&gt;

&lt;p&gt;private void cancelExtender(Exchange exchange) {&lt;br/&gt;
Sqs2Consumer.LOG.trace(&quot;Processing done so cancelling TimeoutExtender task for exchangeId: {}&quot;, exchange.getExchangeId());&lt;br/&gt;
scheduledFuture.cancel(false);&lt;br/&gt;
}&lt;br/&gt;
});&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment>&lt;p&gt;Camel -&#160;3.20.5&lt;/p&gt;</environment>
        <key id="13541938">CAMEL-19562</key>
            <summary>aws sqs visibility extender is running forever</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="narsi-nallamilli">Narsi Reddy Nallamilli</reporter>
                        <labels>
                    </labels>
                <created>Thu, 29 Jun 2023 12:40:32 +0000</created>
                <updated>Wed, 26 Jul 2023 10:40:28 +0000</updated>
                            <resolved>Wed, 26 Jul 2023 10:40:22 +0000</resolved>
                                    <version>3.20.5</version>
                                    <fixVersion>3.20.7</fixVersion>
                    <fixVersion>3.21.1</fixVersion>
                    <fixVersion>4.0.0</fixVersion>
                                    <component>camel-aws2</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17747372" author="davsclaus" created="Wed, 26 Jul 2023 08:18:03 +0000"  >&lt;p&gt;We may consider doing a single task that is batch based, then the scheduler do not need to create a task per exchange, and the task can keep running, and then only trigger if there are inflight exchanges&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13544926">CAMEL-19656</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="13060971" name="errordetail.txt" size="7045" author="narsi-nallamilli" created="Thu, 29 Jun 2023 12:35:20 +0000"/>
                            <attachment id="13060970" name="errorlist.txt" size="3028" author="narsi-nallamilli" created="Thu, 29 Jun 2023 12:35:20 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            2 years, 16 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1ivg0:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>