<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:54:01 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-18110]  camel-smpp - DeliverSM handle message payload optional parameter</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-18110</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;As per &lt;a href=&quot;https://smpp.org/SMPP_v3_4_Issue1_2.pdf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://smpp.org/SMPP_v3_4_Issue1_2.pdf&lt;/a&gt;, the optional parameter message_payload is used when:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/13043620/13043620_image-2022-05-13-16-24-24-522.png&quot; height=&quot;364&quot; width=&quot;486&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;Even though DLRs, do not exceed this length, some vendors would chose to use this optional parameter instead.&lt;/p&gt;

&lt;p&gt;The issue &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-9356&quot; title=&quot;Allow delivery receipts with empty shortMessage field&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-9356&quot;&gt;&lt;del&gt;CAMEL-9356&lt;/del&gt;&lt;/a&gt;, tried to solve this but it did not succeed. Not sure if it&apos;s a regression, but the deliverSm.shortMessage is never null &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;, but it&apos;s set to an empty byte array when the message payload optional parameter exists. Thus the message payload is never set as shown in the below snippet:&lt;/p&gt;

&lt;p&gt;Snippet from SmppBinding.java&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
        &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; messagePayload = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;

        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (deliverSm.getShortMessage() == &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt; &amp;amp;&amp;amp; deliverSm.getOptionalParameters() != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
            List&amp;lt;OptionalParameter&amp;gt; oplist = Arrays.asList(deliverSm.getOptionalParameters());

            &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (OptionalParameter optPara : oplist) {
                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (OptionalParameter.Tag.MESSAGE_PAYLOAD.code() == optPara.tag &amp;amp;&amp;amp; OctetString.class
                        .isInstance(optPara)) {
                    messagePayload = ((OctetString) optPara).getValueAsString();
                    &lt;span class=&quot;code-keyword&quot;&gt;break&lt;/span&gt;;
                }
            }
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;That being said I would not alter the null checks but I would add additional for the empty body (zero-length). I would like to do a PR for this bug and I would like it to be merged with camel &lt;b&gt;3.14.X&lt;/b&gt; (LTS) which is the version I currently use. Should I do a PR based on this branch?&lt;/p&gt;

&lt;p&gt;&#160;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;This is my conclusion after integration tests, using an implementation of jSMPP as the server. jSMPP would set the content to the empty message when sending the deliverSm.(org.jsmpp.DefaultPDUSender#checkShortMessage) .&lt;/p&gt;</description>
                <environment></environment>
        <key id="13444853">CAMEL-18110</key>
            <summary> camel-smpp - DeliverSM handle message payload optional parameter</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="memas.kal">Gerasimos Kalouris</reporter>
                        <labels>
                    </labels>
                <created>Fri, 13 May 2022 13:37:07 +0000</created>
                <updated>Mon, 16 May 2022 11:28:29 +0000</updated>
                            <resolved>Mon, 16 May 2022 10:40:12 +0000</resolved>
                                    <version>3.14.2</version>
                                    <fixVersion>3.14.4</fixVersion>
                    <fixVersion>3.18.0</fixVersion>
                                    <component>camel-smpp</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17536693" author="davsclaus" created="Fri, 13 May 2022 14:44:02 +0000"  >&lt;p&gt;Yes you can send a PR - you can do this against main or 3.14.x, then we can cherry-pick it aftetwards.&lt;/p&gt;</comment>
                            <comment id="17537464" author="davsclaus" created="Mon, 16 May 2022 10:40:12 +0000"  >&lt;p&gt;Thanks for reporting and the PR.&lt;/p&gt;

&lt;p&gt;Keep them coming&lt;/p&gt;</comment>
                            <comment id="17537473" author="memas.kal" created="Mon, 16 May 2022 10:56:52 +0000"  >&lt;p&gt;Thank you for your quick response, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davsclaus&quot; class=&quot;user-hover&quot; rel=&quot;davsclaus&quot;&gt;davsclaus&lt;/a&gt; .&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Could you please cherry-pick them in the camel-3.14.x I had some issues with the maven plugins (v3.14.4-SNAPSHOT) which I was unable to download.&lt;/p&gt;</comment>
                            <comment id="17537481" author="davsclaus" created="Mon, 16 May 2022 11:23:04 +0000"  >&lt;p&gt;This has been backported&lt;/p&gt;</comment>
                            <comment id="17537486" author="memas.kal" created="Mon, 16 May 2022 11:28:29 +0000"  >&lt;p&gt;Great, thank you&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13043620" name="image-2022-05-13-16-24-24-522.png" size="278933" author="memas.kal" created="Fri, 13 May 2022 13:24:24 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 26 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z12cgg:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>