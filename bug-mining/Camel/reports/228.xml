<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 09:27:01 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-688] process method of should check ExchnagePAttern before setting out</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-688</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description></description>
                <environment></environment>
        <key id="12485416">CAMEL-688</key>
            <summary>process method of should check ExchnagePAttern before setting out</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="njiang">Willem Jiang</assignee>
                                    <reporter username="ffang">Freeman Yue Fang</reporter>
                        <labels>
                    </labels>
                <created>Thu, 10 Jul 2008 03:22:28 +0000</created>
                <updated>Wed, 23 Jul 2008 03:57:31 +0000</updated>
                            <resolved>Thu, 10 Jul 2008 10:20:43 +0000</resolved>
                                    <version>1.3.0</version>
                    <version>1.4.0</version>
                                    <fixVersion>1.4.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12947928" author="ffang" created="Thu, 10 Jul 2008 03:26:34 +0000"  >&lt;p&gt;sorry, not complete the subject of this issue, and I have no permission to edit it &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
the subject of this issue should be &lt;br/&gt;
&quot;process method of BeanProcessor should check ExchangePattern before set out message&quot;&lt;br/&gt;
this part&lt;br/&gt;
           if (value != null) &lt;/p&gt;
{
                exchange.getOut().setBody(value);
           }
&lt;p&gt;the exchange.getOut() might return null if the ExchangePattern is InOnly of this Exchange, so get NPE here&lt;/p&gt;

&lt;p&gt;shoud be&lt;br/&gt;
           if (value != null &amp;amp;&amp;amp; !exchange.getPattern().equals(ExchangePattern.InOnly)) &lt;/p&gt;
{
                exchange.getOut().setBody(value);
            }</comment>
                            <comment id="12947902" author="davsclaus" created="Thu, 10 Jul 2008 06:49:06 +0000"  >&lt;p&gt;Ah good the patch uses outCapable check&lt;/p&gt;

&lt;p&gt;Note: We can use getOut(true) to force the out message being created if not exists.&lt;/p&gt;

&lt;p&gt;Could we have a unit test that demonstrates the NPE bug that this patch fixes? That would be awesome.&lt;/p&gt;</comment>
                            <comment id="12947927" author="njiang" created="Thu, 10 Jul 2008 07:22:16 +0000"  >&lt;p&gt;Applying this patch help me find out a CxfExchange bug in camel-cxf which do not copy the change pattern &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;br/&gt;
I am still working on it.&lt;/p&gt;</comment>
                            <comment id="12947929" author="davsclaus" created="Thu, 10 Jul 2008 07:39:13 +0000"  >&lt;p&gt;Target for 1.4&lt;/p&gt;</comment>
                            <comment id="12947916" author="davsclaus" created="Thu, 10 Jul 2008 09:40:22 +0000"  >&lt;p&gt;I found a side effect for this patch.&lt;/p&gt;

&lt;p&gt;I do think the code should be like this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (value != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
                &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (exchange.getPattern().isOutCapable()) {
                    &lt;span class=&quot;code-comment&quot;&gt;// force out creating &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; not already created (as its lazy)
&lt;/span&gt;                    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (LOG.isDebugEnabled()) {
                        LOG.debug(&lt;span class=&quot;code-quote&quot;&gt;&quot;Setting bean invocation value on OUT message: &quot;&lt;/span&gt; + value);
                    }
                    exchange.getOut(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;).setBody(value);
                } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
                    &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; not out then set it on the in
&lt;/span&gt;                    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (LOG.isDebugEnabled()) {
                        LOG.debug(&lt;span class=&quot;code-quote&quot;&gt;&quot;Setting bean invocation value on IN message: &quot;&lt;/span&gt; + value);
                    }
                    exchange.getIn().setBody(value);
                }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Before in some situations the bean invocation value was never set, as this route demonstrates:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;                from(&lt;span class=&quot;code-quote&quot;&gt;&quot;direct:in&quot;&lt;/span&gt;).
                    to(&lt;span class=&quot;code-quote&quot;&gt;&quot;bean:myBean&quot;&lt;/span&gt;).
                    setHeader(FileComponent.HEADER_FILE_NAME, &lt;span class=&quot;code-quote&quot;&gt;&quot;hello.txt&quot;&lt;/span&gt;).
                    to(&lt;span class=&quot;code-quote&quot;&gt;&quot;file:&lt;span class=&quot;code-comment&quot;&gt;//target&quot;&lt;/span&gt;);&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
</comment>
                            <comment id="12947973" author="davsclaus" created="Thu, 10 Jul 2008 09:41:49 +0000"  >&lt;p&gt;As Gert have pointed out on the dev forum we should step up and find out what we want with this MEP that can turn into a mess:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://www.nabble.com/ExchangePattern-handling-in-Camel-td18378396s22882.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.nabble.com/ExchangePattern-handling-in-Camel-td18378396s22882.html&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12947980" author="davsclaus" created="Thu, 10 Jul 2008 10:15:33 +0000"  >&lt;p&gt;Okay I have comitted my change and added unit test to demonstrate the bug caused by the original patch.&lt;/p&gt;</comment>
                            <comment id="12947901" author="davsclaus" created="Thu, 10 Jul 2008 10:20:28 +0000"  >&lt;p&gt;D:\project\camel\camel-core&amp;gt;svn commit --message &quot;&lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-688&quot; title=&quot;process method of should check ExchnagePAttern before setting out&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-688&quot;&gt;&lt;del&gt;CAMEL-688&lt;/del&gt;&lt;/a&gt;: Fixed problem when bean processor did not set invocation value at all. Added unit test to demonstrate the bug.&quot;&lt;br/&gt;
Sending        camel-core\src\main\java\org\apache\camel\component\bean\BeanProcessor.java&lt;br/&gt;
Adding         camel-core\src\test\java\org\apache\camel\component\file\BeanToFileTest.java&lt;br/&gt;
Transmitting file data ..&lt;br/&gt;
Committed revision 675500.&lt;/p&gt;</comment>
                            <comment id="12948153" author="davsclaus" created="Wed, 23 Jul 2008 03:57:31 +0000"  >&lt;p&gt;Closing 1.4 issues.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12462552" name="CAMEL-688.patch" size="935" author="ffang" created="Thu, 10 Jul 2008 06:41:34 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>83177</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 years, 19 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i01drz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6001</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>