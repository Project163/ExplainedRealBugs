<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 09:42:58 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-3702] Example camel-example-cxf-tomcat does not work on Tomcat 7</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-3702</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;I am trying to get the example camel-example-cxf-tomcat to work on Tomcat 7.0.8. This example contains a CxfEndpoint that is configured as being asynchronous (by default). Because of this asynchronous setting I was notified by an Exception that I should set the async-supported property of the CXFServlet in the web.xml. After I set this property to true, I see that invocations are received and processed by the Camel route, however the result is not returned: the connection is closed directly.&lt;br/&gt;
I assume this issue is not directly related to the example itself (apart from the missing async-supported property), however I was not able to pinpoint which component is triggering the connection to be closed before the result is written.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Windows 7, Tomcat 7.0.8, Camel 2.6.0&lt;/p&gt;</environment>
        <key id="12499334">CAMEL-3702</key>
            <summary>Example camel-example-cxf-tomcat does not work on Tomcat 7</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="njiang">Willem Jiang</assignee>
                                    <reporter username="arnoud">Arnoud Glimmerveen</reporter>
                        <labels>
                    </labels>
                <created>Tue, 22 Feb 2011 12:39:26 +0000</created>
                <updated>Tue, 25 Oct 2011 11:35:29 +0000</updated>
                            <resolved>Tue, 12 Apr 2011 07:01:46 +0000</resolved>
                                    <version>2.6.0</version>
                                    <fixVersion>2.7.3</fixVersion>
                    <fixVersion>2.8.0</fixVersion>
                                    <component>examples</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12998205" author="davsclaus" created="Wed, 23 Feb 2011 07:25:08 +0000"  >&lt;p&gt;Can you try another container such as Jetty to see if make a difference? Just notice to know if its Tomcat only issue or generic web container.&lt;/p&gt;

&lt;p&gt;Also would be nice to check with the Apache CXF if they have any issues on Tomcat with the async-supported property.&lt;/p&gt;</comment>
                            <comment id="12998244" author="arnoud" created="Wed, 23 Feb 2011 08:46:14 +0000"  >&lt;p&gt;I deployed the same war in Jetty 8.0.0.M2 (supporting Servlet 3.0). Upon invoking the service I see the exception below in the logging of Jetty and the invoker gets the HTTP 500 error. &lt;br/&gt;
The exact fault differs from Tomcat, as in the Tomcat case the connection was closed without any exception(s). In both cases I see the INFO logging from the route itself (input/output).&lt;/p&gt;

&lt;p&gt;If I change the CxfEndpoint to be synchronous, it works fine in Jetty as well. &lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;2011-02-23 09:21:51,793 [qtp18378667-26 ] INFO  input                          - Exchange[ExchangePattern:InOut, BodyType:org.apache.cxf.message.MessageContentsList, Body:[org.apache.camel.example.cxf.incident.InputStatusIncident@83dae1]]
2011-02-23 09:21:51,829 [qtp18378667-26 ] INFO  output                         - Exchange[ExchangePattern:InOut, BodyType:org.apache.camel.example.cxf.incident.OutputStatusIncident, Body:org.apache.camel.example.cxf.incident.OutputStatusIncident@62812d]
2011-02-23 09:21:51.839:WARN::/camel-example-cxf-tomcat-2.6.0/webservices/incident 
org.apache.cxf.continuations.SuspendedInvocationException
        at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:258)
        at org.apache.cxf.transport.ChainInitiationObserver.onMessage(ChainInitiationObserver.java:113)
        at org.apache.cxf.transport.servlet.ServletDestination.invoke(ServletDestination.java:97)
        at org.apache.cxf.transport.servlet.ServletController.invokeDestination(ServletController.java:461)
        at org.apache.cxf.transport.servlet.ServletController.invoke(ServletController.java:188)
        at org.apache.cxf.transport.servlet.AbstractCXFServlet.invoke(AbstractCXFServlet.java:148)
        at org.apache.cxf.transport.servlet.AbstractHTTPServlet.handleRequest(AbstractHTTPServlet.java:179)
        at org.apache.cxf.transport.servlet.AbstractHTTPServlet.doPost(AbstractHTTPServlet.java:103)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:754)
        at org.apache.cxf.transport.servlet.AbstractHTTPServlet.service(AbstractHTTPServlet.java:159)
        at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:546)
        at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:483)
        at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:119)
        at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:479)
        at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:230)
        at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:956)
        at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:411)
        at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:188)
        at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:891)
        at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117)
        at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:247)
        at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:151)
        at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:114)
        at org.eclipse.jetty.server.Server.handle(Server.java:353)
        at org.eclipse.jetty.server.HttpConnection.handleRequest(HttpConnection.java:598)
        at org.eclipse.jetty.server.HttpConnection$RequestHandler.content(HttpConnection.java:1076)
        at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:805)
        at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:218)
        at org.eclipse.jetty.server.HttpConnection.handle(HttpConnection.java:427)
        at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:510)
        at org.eclipse.jetty.io.nio.SelectChannelEndPoint.access$000(SelectChannelEndPoint.java:34)
        at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:40)
        at org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:450)
        at java.lang.Thread.run(Unknown Source)
2011-02-23 09:21:51,989 [qtp18378667-26 ] WARN  PhaseInterceptorChain          - Interceptor for {http://incident.cxf.example.camel.apache.org/}IncidentService has thrown exception, unwinding now
org.apache.cxf.binding.soap.SoapFault: Error reading XMLStreamReader.
        at org.apache.cxf.binding.soap.interceptor.ReadHeadersInterceptor.handleMessage(ReadHeadersInterceptor.java:222)[cxf-rt-bindings-soap-2.3.2.jar:2.3.2]
        at org.apache.cxf.binding.soap.interceptor.ReadHeadersInterceptor.handleMessage(ReadHeadersInterceptor.java:60)[cxf-rt-bindings-soap-2.3.2.jar:2.3.2]
        at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:255)[cxf-api-2.3.2.jar:2.3.2]
        at org.apache.cxf.transport.ChainInitiationObserver.onMessage(ChainInitiationObserver.java:113)[cxf-rt-core-2.3.2.jar:2.3.2]
        at org.apache.cxf.transport.servlet.ServletDestination.invoke(ServletDestination.java:97)[cxf-rt-transports-http-2.3.2.jar:2.3.2]
        at org.apache.cxf.transport.servlet.ServletController.invokeDestination(ServletController.java:461)[cxf-rt-transports-http-2.3.2.jar:2.3.2]
        at org.apache.cxf.transport.servlet.ServletController.invoke(ServletController.java:188)[cxf-rt-transports-http-2.3.2.jar:2.3.2]
        at org.apache.cxf.transport.servlet.AbstractCXFServlet.invoke(AbstractCXFServlet.java:148)[cxf-rt-transports-http-2.3.2.jar:2.3.2]
        at org.apache.cxf.transport.servlet.AbstractHTTPServlet.handleRequest(AbstractHTTPServlet.java:179)[cxf-rt-transports-http-2.3.2.jar:2.3.2]
        at org.apache.cxf.transport.servlet.AbstractHTTPServlet.doPost(AbstractHTTPServlet.java:103)[cxf-rt-transports-http-2.3.2.jar:2.3.2]
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:754)[servlet-api-3.0.jar:]
        at org.apache.cxf.transport.servlet.AbstractHTTPServlet.service(AbstractHTTPServlet.java:159)[cxf-rt-transports-http-2.3.2.jar:2.3.2]
        at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:546)
        at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:483)
        at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:119)
        at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:500)
        at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:230)
        at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:956)
        at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:411)
        at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:188)
        at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:891)
        at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117)
        at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:185)
        at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:151)
        at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:114)
        at org.eclipse.jetty.server.Server.handleAsync(Server.java:398)
        at org.eclipse.jetty.server.HttpConnection.handleRequest(HttpConnection.java:603)
        at org.eclipse.jetty.server.HttpConnection$RequestHandler.content(HttpConnection.java:1076)
        at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:805)
        at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:218)
        at org.eclipse.jetty.server.HttpConnection.handle(HttpConnection.java:427)
        at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:510)
        at org.eclipse.jetty.io.nio.SelectChannelEndPoint.access$000(SelectChannelEndPoint.java:34)
        at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:40)
        at org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:450)
        at java.lang.Thread.run(Unknown Source)[:1.6.0_20]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12998305" author="arnoud" created="Wed, 23 Feb 2011 10:54:36 +0000"  >&lt;p&gt;I also deployed the war to GlassFish 3.0.1, resulting in the logging below. Both GlassFish and Jetty fail with the same exception in the same method (ReadHeadersInterceptor.handleMessage()). I tried to verify if Tomcat (silently) fails in the same method as well, however it seems that it continues after invoking this method.&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[#|2011-02-23T11:19:08.306+0100|INFO|glassfish3.0.1|javax.enterprise.system.std.com.sun.enterprise.v3.services.impl|_ThreadID=30;_ThreadName=http-thread-pool-8080-(1);|2011-02-23 11:19:08,305 [d-pool-8080-(1)] INFO  input                          - Exchange[ExchangePattern:InOut, BodyType:org.apache.cxf.message.MessageContentsList, Body:[org.apache.camel.example.cxf.incident.InputStatusI
ncident@1797bf]]
|#]

[#|2011-02-23T11:19:08.398+0100|INFO|glassfish3.0.1|javax.enterprise.system.std.com.sun.enterprise.v3.services.impl|_ThreadID=30;_ThreadName=http-thread-pool-8080-(1);|2011-02-23 11:19:08,398 [d-pool-8080-(1)] INFO  output                         - Exchange[ExchangePattern:InOut, BodyType:org.apache.camel.example.cxf.incident.OutputStatusIncident, Body:org.apache.camel.example.cxf.incide
nt.OutputStatusIncident@112691e]
|#]

[#|2011-02-23T11:19:08.405+0100|WARNING|glassfish3.0.1|javax.enterprise.system.container.web.com.sun.enterprise.web|_ThreadID=30;_ThreadName=http-thread-pool-8080-(1);|StandardWrapperValve[CXFServlet]: PWC1406: Servlet.service() for servlet CXFServlet threw exception
org.apache.cxf.continuations.SuspendedInvocationException
        at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:258)
        at org.apache.cxf.transport.ChainInitiationObserver.onMessage(ChainInitiationObserver.java:113)
        at org.apache.cxf.transport.servlet.ServletDestination.invoke(ServletDestination.java:97)
        at org.apache.cxf.transport.servlet.ServletController.invokeDestination(ServletController.java:461)
        at org.apache.cxf.transport.servlet.ServletController.invoke(ServletController.java:188)
        at org.apache.cxf.transport.servlet.AbstractCXFServlet.invoke(AbstractCXFServlet.java:148)
        at org.apache.cxf.transport.servlet.AbstractHTTPServlet.handleRequest(AbstractHTTPServlet.java:179)
        at org.apache.cxf.transport.servlet.AbstractHTTPServlet.doPost(AbstractHTTPServlet.java:103)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:754)
        at org.apache.cxf.transport.servlet.AbstractHTTPServlet.service(AbstractHTTPServlet.java:159)
        at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1523)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:279)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:188)
        at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:641)
        at com.sun.enterprise.web.WebPipeline.invoke(WebPipeline.java:97)
        at com.sun.enterprise.web.PESessionLockingStandardPipeline.invoke(PESessionLockingStandardPipeline.java:85)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:185)
        at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:325)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:226)
        at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:165)
        at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:791)
        at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:693)
        at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:954)
        at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:170)
        at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:135)
        at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:102)
        at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:88)
        at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:76)
        at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:53)
        at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:57)
        at com.sun.grizzly.ContextTask.run(ContextTask.java:69)
        at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:330)
        at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:309)
        at java.lang.Thread.run(Thread.java:619)
|#]

[#|2011-02-23T11:19:08.429+0100|INFO|glassfish3.0.1|javax.enterprise.system.std.com.sun.enterprise.v3.services.impl|_ThreadID=31;_ThreadName=pool-44-thread-1;|2011-02-23 11:19:08,427 [ool-44-thread-1] WARN  PhaseInterceptorChain          - Interceptor for {http://incident.cxf.example.camel.apache.org/}IncidentService has thrown exception, unwinding now
org.apache.cxf.binding.soap.SoapFault: Error reading XMLStreamReader.
        at org.apache.cxf.binding.soap.interceptor.ReadHeadersInterceptor.handleMessage(ReadHeadersInterceptor.java:222)[cxf-rt-bindings-soap-2.3.2.jar:2.3.2]
        at org.apache.cxf.binding.soap.interceptor.ReadHeadersInterceptor.handleMessage(ReadHeadersInterceptor.java:60)[cxf-rt-bindings-soap-2.3.2.jar:2.3.2]
        at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:255)[cxf-api-2.3.2.jar:2.3.2]
        at org.apache.cxf.transport.ChainInitiationObserver.onMessage(ChainInitiationObserver.java:113)[cxf-rt-core-2.3.2.jar:2.3.2]
        at org.apache.cxf.transport.servlet.ServletDestination.invoke(ServletDestination.java:97)[cxf-rt-transports-http-2.3.2.jar:2.3.2]
        at org.apache.cxf.transport.servlet.ServletController.invokeDestination(ServletController.java:461)[cxf-rt-transports-http-2.3.2.jar:2.3.2]
        at org.apache.cxf.transport.servlet.ServletController.invoke(ServletController.java:188)[cxf-rt-transports-http-2.3.2.jar:2.3.2]
        at org.apache.cxf.transport.servlet.AbstractCXFServlet.invoke(AbstractCXFServlet.java:148)[cxf-rt-transports-http-2.3.2.jar:2.3.2]
        at org.apache.cxf.transport.servlet.AbstractHTTPServlet.handleRequest(AbstractHTTPServlet.java:179)[cxf-rt-transports-http-2.3.2.jar:2.3.2]
        at org.apache.cxf.transport.servlet.AbstractHTTPServlet.doPost(AbstractHTTPServlet.java:103)[cxf-rt-transports-http-2.3.2.jar:2.3.2]
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:754)[javax.servlet.jar:]
        at org.apache.cxf.transport.servlet.AbstractHTTPServlet.service(AbstractHTTPServlet.java:159)[cxf-rt-transports-http-2.3.2.jar:2.3.2]
        at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1523)[web-core.jar:3.0.1]
        at org.apache.catalina.core.ApplicationDispatcher.doInvoke(ApplicationDispatcher.java:822)[web-core.jar:3.0.1]
        at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:684)[web-core.jar:3.0.1]
        at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:517)[web-core.jar:3.0.1]
        at org.apache.catalina.core.ApplicationDispatcher.doDispatch(ApplicationDispatcher.java:488)[web-core.jar:3.0.1]
        at org.apache.catalina.core.ApplicationDispatcher.dispatch(ApplicationDispatcher.java:379)[web-core.jar:3.0.1]
        at org.apache.catalina.core.ApplicationDispatcher.dispatch(ApplicationDispatcher.java:336)[web-core.jar:3.0.1]
        at org.apache.catalina.connector.AsyncContextImpl$Handler.run(AsyncContextImpl.java:375)[web-core.jar:3.0.1]
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)[:1.6.0_18]
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)[:1.6.0_18]
        at java.lang.Thread.run(Thread.java:619)[:1.6.0_18]
|#]

[#|2011-02-23T11:19:08.485+0100|INFO|glassfish3.0.1|javax.enterprise.system.std.com.sun.enterprise.v3.services.impl|_ThreadID=31;_ThreadName=pool-44-thread-1;|2011-02-23 11:19:08,479 [ool-44-thread-1] WARN  PhaseInterceptorChain          - Interceptor for {http://incident.cxf.example.camel.apache.org/}IncidentService has thrown exception, unwinding now
java.lang.NullPointerException
        at com.sun.enterprise.web.pwc.connector.coyote.PwcCoyoteRequest.getFormHintFieldEncoding(PwcCoyoteRequest.java:245)[web-glue.jar:3.0.1]
        at com.sun.enterprise.web.pwc.connector.coyote.PwcCoyoteRequest.setRequestEncodingFromSunWebXml(PwcCoyoteRequest.java:208)[web-glue.jar:3.0.1]
        at com.sun.enterprise.web.pwc.connector.coyote.PwcCoyoteRequest.getCharacterEncoding(PwcCoyoteRequest.java:129)[web-glue.jar:3.0.1]
        at org.apache.catalina.connector.RequestFacade.getCharacterEncoding(RequestFacade.java:360)[web-core.jar:3.0.1]
        at javax.servlet.ServletRequestWrapper.getCharacterEncoding(ServletRequestWrapper.java:134)[javax.servlet.jar:]
        at org.apache.cxf.transport.http.HttpServletRequestSnapshot.&amp;lt;init&amp;gt;(HttpServletRequestSnapshot.java:68)[cxf-rt-transports-http-2.3.2.jar:2.3.2]
        at org.apache.cxf.transport.http.AbstractHTTPDestination$1.cacheInput(AbstractHTTPDestination.java:303)[cxf-rt-transports-http-2.3.2.jar:2.3.2]
        at org.apache.cxf.transport.http.AbstractHTTPDestination.cacheInput(AbstractHTTPDestination.java:519)[cxf-rt-transports-http-2.3.2.jar:2.3.2]
        at org.apache.cxf.transport.http.AbstractHTTPDestination.flushHeaders(AbstractHTTPDestination.java:531)[cxf-rt-transports-http-2.3.2.jar:2.3.2]
        at org.apache.cxf.transport.http.AbstractHTTPDestination.flushHeaders(AbstractHTTPDestination.java:524)[cxf-rt-transports-http-2.3.2.jar:2.3.2]
        at org.apache.cxf.transport.http.AbstractHTTPDestination$WrappedOutputStream.onFirstWrite(AbstractHTTPDestination.java:659)[cxf-rt-transports-http-2.3.2.jar:2.3.2]
        at org.apache.cxf.io.AbstractWrappedOutputStream.write(AbstractWrappedOutputStream.java:42)[cxf-api-2.3.2.jar:2.3.2]
        at com.ctc.wstx.io.UTF8Writer.flush(UTF8Writer.java:96)[woodstox-osgi.jar:3.2.1]
        at com.ctc.wstx.sw.BufferingXmlWriter.flush(BufferingXmlWriter.java:214)[woodstox-osgi.jar:3.2.1]
        at com.ctc.wstx.sw.BufferingXmlWriter.close(BufferingXmlWriter.java:194)[woodstox-osgi.jar:3.2.1]
        at com.ctc.wstx.sw.BaseStreamWriter.finishDocument(BaseStreamWriter.java:1685)[woodstox-osgi.jar:3.2.1]
        at com.ctc.wstx.sw.BaseStreamWriter.writeEndDocument(BaseStreamWriter.java:585)[woodstox-osgi.jar:3.2.1]
        at org.apache.cxf.binding.soap.interceptor.SoapOutInterceptor$SoapOutEndingInterceptor.handleMessage(SoapOutInterceptor.java:282)[cxf-rt-bindings-soap-2.3.2.jar:2.3.2]
        at org.apache.cxf.binding.soap.interceptor.SoapOutInterceptor$SoapOutEndingInterceptor.handleMessage(SoapOutInterceptor.java:270)[cxf-rt-bindings-soap-2.3.2.jar:2.3.2]
        at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:255)[cxf-api-2.3.2.jar:2.3.2]
        at org.apache.cxf.interceptor.AbstractFaultChainInitiatorObserver.onMessage(AbstractFaultChainInitiatorObserver.java:99)[cxf-rt-core-2.3.2.jar:2.3.2]
        at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:315)[cxf-api-2.3.2.jar:2.3.2]
        at org.apache.cxf.transport.ChainInitiationObserver.onMessage(ChainInitiationObserver.java:113)[cxf-rt-core-2.3.2.jar:2.3.2]
        at org.apache.cxf.transport.servlet.ServletDestination.invoke(ServletDestination.java:97)[cxf-rt-transports-http-2.3.2.jar:2.3.2]
        at org.apache.cxf.transport.servlet.ServletController.invokeDestination(ServletController.java:461)[cxf-rt-transports-http-2.3.2.jar:2.3.2]
        at org.apache.cxf.transport.servlet.ServletController.invoke(ServletController.java:188)[cxf-rt-transports-http-2.3.2.jar:2.3.2]
        at org.apache.cxf.transport.servlet.AbstractCXFServlet.invoke(AbstractCXFServlet.java:148)[cxf-rt-transports-http-2.3.2.jar:2.3.2]
        at org.apache.cxf.transport.servlet.AbstractHTTPServlet.handleRequest(AbstractHTTPServlet.java:179)[cxf-rt-transports-http-2.3.2.jar:2.3.2]
        at org.apache.cxf.transport.servlet.AbstractHTTPServlet.doPost(AbstractHTTPServlet.java:103)[cxf-rt-transports-http-2.3.2.jar:2.3.2]
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:754)[javax.servlet.jar:]
        at org.apache.cxf.transport.servlet.AbstractHTTPServlet.service(AbstractHTTPServlet.java:159)[cxf-rt-transports-http-2.3.2.jar:2.3.2]
        at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1523)[web-core.jar:3.0.1]
        at org.apache.catalina.core.ApplicationDispatcher.doInvoke(ApplicationDispatcher.java:822)[web-core.jar:3.0.1]
        at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:684)[web-core.jar:3.0.1]
        at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:517)[web-core.jar:3.0.1]
        at org.apache.catalina.core.ApplicationDispatcher.doDispatch(ApplicationDispatcher.java:488)[web-core.jar:3.0.1]
        at org.apache.catalina.core.ApplicationDispatcher.dispatch(ApplicationDispatcher.java:379)[web-core.jar:3.0.1]
        at org.apache.catalina.core.ApplicationDispatcher.dispatch(ApplicationDispatcher.java:336)[web-core.jar:3.0.1]
        at org.apache.catalina.connector.AsyncContextImpl$Handler.run(AsyncContextImpl.java:375)[web-core.jar:3.0.1]
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)[:1.6.0_18]
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)[:1.6.0_18]
        at java.lang.Thread.run(Thread.java:619)[:1.6.0_18]
|#]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12998365" author="njiang" created="Wed, 23 Feb 2011 13:31:00 +0000"  >&lt;p&gt;It looks like a CXF servlet transport issue.&lt;br/&gt;
I will spend some time to dig it tomorrow.&lt;/p&gt;</comment>
                            <comment id="12998369" author="dkulp" created="Wed, 23 Feb 2011 13:48:32 +0000"  >
&lt;p&gt;Willem,&lt;br/&gt;
It might be slightly harder to debug with 2.3.3-SNAPSHOT/2.4.0-SNAPSHOT as the HttpRequestWrapper is now only created for one-ways and in some WS-RM/Addr cases.   Thus, it may &quot;just work&quot; with 2.3.3.   Try doing a one-way and seeing if the behavior persists.&lt;/p&gt;
</comment>
                            <comment id="12998864" author="njiang" created="Thu, 24 Feb 2011 14:31:41 +0000"  >&lt;p&gt;Applied patch into CXF trunk and 2.3.x branch.&lt;br/&gt;
If someone wants to try out the fix, please change cxf version in Camel trunk to 2.3.4-SNAPSHOT, and build the example with it.&lt;/p&gt;

&lt;p&gt;Will resolve this issue when we upgrade the CXF version.&lt;/p&gt;</comment>
                            <comment id="12998906" author="arnoud" created="Thu, 24 Feb 2011 15:54:11 +0000"  >&lt;p&gt;I&apos;ve tested the example against the CXF 2.3.4-SNAPSHOT. It works fine now for Tomcat 7 and Jetty 8. On GlassFish v3 however I get the following Exception:&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[#|2011-02-24T16:44:47.451+0100|INFO|glassfish3.0.1|javax.enterprise.system.std.com.sun.enterprise.v3.services.impl|_ThreadID=30;_ThreadName=pool-36-thread-1;|2011-02-24 16:44:47,450 [ool-36-thread-1] WARN  PhaseInterceptorChain          - Interceptor for {http://incident.cxf.example.camel.apache.org/}IncidentService#{http://incident.cxf.example.camel.apache.org/}reportIncident has thrown exception, unwinding now
java.lang.IllegalStateException: The request has not been put into asynchronous mode, must call ServletRequest.startAsync first
        at org.apache.catalina.connector.Request.getAsyncContext(Request.java:3764)[web-core.jar:3.0.1]
        at org.apache.catalina.connector.RequestFacade.getAsyncContext(RequestFacade.java:1105)[web-core.jar:3.0.1]
        at org.apache.cxf.transport.http.Servlet3ContinuationProvider$Servlet3Continuation.&amp;lt;init&amp;gt;(Servlet3ContinuationProvider.java:77)[cxf-rt-transports-http-2.3.4-SNAPSHOT.jar:2.3.4-SNAPSHOT]
        at org.apache.cxf.transport.http.Servlet3ContinuationProvider.getContinuation(Servlet3ContinuationProvider.java:57)[cxf-rt-transports-http-2.3.4-SNAPSHOT.jar:2.3.4-SNAPSHOT]
        at org.apache.camel.component.cxf.CxfConsumer$1.getContinuation(CxfConsumer.java:126)[camel-cxf-2.6.0.jar:2.6.0]
        at org.apache.camel.component.cxf.CxfConsumer$1.invoke(CxfConsumer.java:67)[camel-cxf-2.6.0.jar:2.6.0]
        at org.apache.cxf.interceptor.ServiceInvokerInterceptor$1.run(ServiceInvokerInterceptor.java:58)[cxf-rt-core-2.3.4-SNAPSHOT.jar:2.3.4-SNAPSHOT]
        at org.apache.cxf.interceptor.ServiceInvokerInterceptor.handleMessage(ServiceInvokerInterceptor.java:93)[cxf-rt-core-2.3.4-SNAPSHOT.jar:2.3.4-SNAPSHOT]
        at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:255)[cxf-api-2.3.4-SNAPSHOT.jar:2.3.4-SNAPSHOT]
        at org.apache.cxf.phase.PhaseInterceptorChain.resume(PhaseInterceptorChain.java:224)[cxf-api-2.3.4-SNAPSHOT.jar:2.3.4-SNAPSHOT]
        at org.apache.cxf.transport.ChainInitiationObserver.onMessage(ChainInitiationObserver.java:70)[cxf-rt-core-2.3.4-SNAPSHOT.jar:2.3.4-SNAPSHOT]
        at org.apache.cxf.transport.servlet.ServletDestination.invoke(ServletDestination.java:118)[cxf-rt-transports-http-2.3.4-SNAPSHOT.jar:2.3.4-SNAPSHOT]
        at org.apache.cxf.transport.servlet.ServletController.invokeDestination(ServletController.java:461)[cxf-rt-transports-http-2.3.4-SNAPSHOT.jar:2.3.4-SNAPSHOT]
        at org.apache.cxf.transport.servlet.ServletController.invoke(ServletController.java:188)[cxf-rt-transports-http-2.3.4-SNAPSHOT.jar:2.3.4-SNAPSHOT]
        at org.apache.cxf.transport.servlet.AbstractCXFServlet.invoke(AbstractCXFServlet.java:148)[cxf-rt-transports-http-2.3.4-SNAPSHOT.jar:2.3.4-SNAPSHOT]
        at org.apache.cxf.transport.servlet.AbstractHTTPServlet.handleRequest(AbstractHTTPServlet.java:179)[cxf-rt-transports-http-2.3.4-SNAPSHOT.jar:2.3.4-SNAPSHOT]
        at org.apache.cxf.transport.servlet.AbstractHTTPServlet.doPost(AbstractHTTPServlet.java:103)[cxf-rt-transports-http-2.3.4-SNAPSHOT.jar:2.3.4-SNAPSHOT]
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:754)[javax.servlet.jar:]
        at org.apache.cxf.transport.servlet.AbstractHTTPServlet.service(AbstractHTTPServlet.java:159)[cxf-rt-transports-http-2.3.4-SNAPSHOT.jar:2.3.4-SNAPSHOT]
        at org.apache.catalina.core.StandardWrapper.service(StandardWrapper.java:1523)[web-core.jar:3.0.1]
        at org.apache.catalina.core.ApplicationDispatcher.doInvoke(ApplicationDispatcher.java:822)[web-core.jar:3.0.1]
        at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:684)[web-core.jar:3.0.1]
        at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:517)[web-core.jar:3.0.1]
        at org.apache.catalina.core.ApplicationDispatcher.doDispatch(ApplicationDispatcher.java:488)[web-core.jar:3.0.1]
        at org.apache.catalina.core.ApplicationDispatcher.dispatch(ApplicationDispatcher.java:379)[web-core.jar:3.0.1]
        at org.apache.catalina.core.ApplicationDispatcher.dispatch(ApplicationDispatcher.java:336)[web-core.jar:3.0.1]
        at org.apache.catalina.connector.AsyncContextImpl$Handler.run(AsyncContextImpl.java:375)[web-core.jar:3.0.1]
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)[:1.6.0_18]
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)[:1.6.0_18]
        at java.lang.Thread.run(Thread.java:619)[:1.6.0_18]
|#]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="12999257" author="njiang" created="Fri, 25 Feb 2011 08:08:56 +0000"  >&lt;p&gt;Hi Arnound,&lt;/p&gt;

&lt;p&gt;Thanks for reporting this, I didn&apos;t try the GlassFish v3 when I fix the issue in CXF.&lt;br/&gt;
It looks like different Servlet3 implementation provides different status checking, &lt;br/&gt;
I will commit a quick fix in CXF to work around the issue that you just found.&lt;/p&gt;

&lt;p&gt;Cheers,&lt;/p&gt;

&lt;p&gt;Willem&lt;/p&gt;</comment>
                            <comment id="12999355" author="njiang" created="Fri, 25 Feb 2011 13:29:59 +0000"  >&lt;p&gt;Hi Arnoud,&lt;/p&gt;

&lt;p&gt;I just committed a quick fix into CXF 2.3.x and trunk branch after went through the Servlet3 JRS315 the async section.&lt;br/&gt;
Now you should access the camel-cxf-example war which is deployed to GlassFish 3.0.1 without any other issue.&lt;br/&gt;
Please keep me posted if you have other issue about the camel-example-cxf-tomcat.&lt;/p&gt;

&lt;p&gt;Cheers,&lt;br/&gt;
Willem&lt;/p&gt;</comment>
                            <comment id="12999465" author="arnoud" created="Fri, 25 Feb 2011 18:45:06 +0000"  >&lt;p&gt;Hi Willem,&lt;/p&gt;

&lt;p&gt;I have tested this fixed version of CXF and the example now works on GlassFish v3. Also Tomcat and Jetty still work with this fixed version. I suppose we can consider this issue as fixed?&lt;/p&gt;

&lt;p&gt;Thanks for your time and effort!&lt;/p&gt;

&lt;p&gt;Arnoud.&lt;/p&gt;</comment>
                            <comment id="12999738" author="davsclaus" created="Sat, 26 Feb 2011 08:08:48 +0000"  >&lt;p&gt;Thanks for testing. I think we should close this ticket when Camel upgrades and uses the CXF version which has the fix. &lt;/p&gt;

&lt;p&gt;Willem is there an ETA on a new CXF release having that fix? We want to ship out Camel 2.7 soon.&lt;/p&gt;</comment>
                            <comment id="12999743" author="njiang" created="Sat, 26 Feb 2011 08:33:26 +0000"  >&lt;p&gt;CXF 2.3.3 is already cut and voted, the servlet3 patch is not catch up this release.&lt;br/&gt;
I think we should add this issue as a known issue when we release Camel 2.7.0.&lt;/p&gt;</comment>
                            <comment id="13000804" author="davsclaus" created="Tue, 1 Mar 2011 09:43:12 +0000"  >&lt;p&gt;Added a note to known issues about the CXF bug, so the example doesn&apos;t work in Tomcat 7.&lt;/p&gt;</comment>
                            <comment id="13000815" author="njiang" created="Tue, 1 Mar 2011 10:04:16 +0000"  >&lt;p&gt;@Claus,&lt;br/&gt;
I think we should keep this issue open until we upgrade the CXF version to 2.3.4.&lt;/p&gt;
</comment>
                            <comment id="13000817" author="davsclaus" created="Tue, 1 Mar 2011 10:23:32 +0000"  >&lt;p&gt;Will be fixed by CXF 2.3.4 upgrade in &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-3734&quot; title=&quot;Upgrade to CXF 2.3.5&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-3734&quot;&gt;&lt;del&gt;CAMEL-3734&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13018748" author="njiang" created="Tue, 12 Apr 2011 07:01:46 +0000"  >&lt;p&gt;Update the CXF version to 2.3.4-SNAPSHOT.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10032">
                    <name>Blocker</name>
                                                                <inwardlinks description="is blocked by">
                                        <issuelink>
            <issuekey id="12499583">CXF-3362</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="12499312">CAMEL-3698</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12500033">CAMEL-3734</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>68803</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 33 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i01wdb:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9013</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>