<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 09:47:21 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-4010] Camel FTP component fails to process multiple files at once from a specified folder</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-4010</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;Camel FTP component fails to process multiple files at once from a specified folder (let&apos;s assume the folder is /in).&lt;br/&gt;
When the consumer connects to a ftp account and finds a list of, let&apos;s say, 3 files, it will try to retrieve them in parallel but this is not handled properly.&lt;/p&gt;

&lt;p&gt;As you can see from the below FTP server log, this is what Camel FTP does:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;it changes the current directory to /in&lt;/li&gt;
	&lt;li&gt;retrieves the file&lt;/li&gt;
	&lt;li&gt;it changes the current directory to /&lt;/li&gt;
	&lt;li&gt;the second (probably) thread changes the directory to /in&lt;/li&gt;
	&lt;li&gt;retreives the second file&lt;/li&gt;
	&lt;li&gt;the first (probably) thread sends a delete command but it sends it as if it were in the root folder but it is actually in the /in folder&lt;/li&gt;
	&lt;li&gt;the FTP gives an error that the file doesn&apos;t exist&lt;/li&gt;
	&lt;li&gt;somehow the FTP Component blocks itself on the first file...&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;See my comments in the following log starting with *****&lt;/p&gt;

&lt;p&gt;(002386)5/20/2011 17:07:03 PM - sftp-test (192.168.0.194)&amp;gt; 257 &quot;/&quot; is current directory.&lt;br/&gt;
(002386)5/20/2011 17:07:03 PM - sftp-test (192.168.0.194)&amp;gt; CWD in&lt;br/&gt;
(002386)5/20/2011 17:07:03 PM - sftp-test (192.168.0.194)&amp;gt; 250 CWD successful. &quot;/in&quot; is current directory.&lt;br/&gt;
(002386)5/20/2011 17:07:03 PM - sftp-test (192.168.0.194)&amp;gt; PASV&lt;br/&gt;
(002386)5/20/2011 17:07:03 PM - sftp-test (192.168.0.194)&amp;gt; 227 Entering Passive Mode (192,168,0,25,228,206)&lt;br/&gt;
(002386)5/20/2011 17:07:03 PM - sftp-test (192.168.0.194)&amp;gt; RETR WS_1001_1.xml&lt;br/&gt;
(002386)5/20/2011 17:07:03 PM - sftp-test (192.168.0.194)&amp;gt; 150 Connection accepted&lt;br/&gt;
(002386)5/20/2011 17:07:03 PM - sftp-test (192.168.0.194)&amp;gt; SSL connection for data connection established&lt;br/&gt;
(002386)5/20/2011 17:07:03 PM - sftp-test (192.168.0.194)&amp;gt; 226 Transfer OK&lt;br/&gt;
(002386)5/20/2011 17:07:03 PM - sftp-test (192.168.0.194)&amp;gt; CWD /&lt;br/&gt;
(002386)5/20/2011 17:07:03 PM - sftp-test (192.168.0.194)&amp;gt; 250 CWD successful. &quot;/&quot; is current directory.&lt;br/&gt;
(002386)5/20/2011 17:07:03 PM - sftp-test (192.168.0.194)&amp;gt; PWD&lt;br/&gt;
(002386)5/20/2011 17:07:03 PM - sftp-test (192.168.0.194)&amp;gt; 257 &quot;/&quot; is current directory.&lt;br/&gt;
(002386)5/20/2011 17:07:03 PM - sftp-test (192.168.0.194)&amp;gt; CWD in&lt;br/&gt;
(002386)5/20/2011 17:07:03 PM - sftp-test (192.168.0.194)&amp;gt; 250 CWD successful. &quot;/in&quot; is current directory.&lt;br/&gt;
(002386)5/20/2011 17:07:03 PM - sftp-test (192.168.0.194)&amp;gt; PASV&lt;br/&gt;
(002386)5/20/2011 17:07:03 PM - sftp-test (192.168.0.194)&amp;gt; 227 Entering Passive Mode (192,168,0,25,228,207)&lt;br/&gt;
(002386)5/20/2011 17:07:03 PM - sftp-test (192.168.0.194)&amp;gt; RETR WS_1001_2.xml&lt;br/&gt;
(002386)5/20/2011 17:07:03 PM - sftp-test (192.168.0.194)&amp;gt; 150 Connection accepted&lt;br/&gt;
(002386)5/20/2011 17:07:03 PM - sftp-test (192.168.0.194)&amp;gt; DELE in/WS_1001_1.xml    ***** The location is already /in, should be DELE WS_1001_1.xml&lt;br/&gt;
(002386)5/20/2011 17:07:03 PM - sftp-test (192.168.0.194)&amp;gt; 550 File not found&lt;br/&gt;
(002386)5/20/2011 17:07:03 PM - sftp-test (192.168.0.194)&amp;gt; PASV&lt;br/&gt;
(002386)5/20/2011 17:07:03 PM - sftp-test (192.168.0.194)&amp;gt; 227 Entering Passive Mode (192,168,0,25,228,208)&lt;br/&gt;
(002386)5/20/2011 17:07:03 PM - sftp-test (192.168.0.194)&amp;gt; NLST in&lt;br/&gt;
(002386)5/20/2011 17:07:03 PM - sftp-test (192.168.0.194)&amp;gt; 550 Directory not found&lt;br/&gt;
(002386)5/20/2011 17:07:03 PM - sftp-test (192.168.0.194)&amp;gt; PWD&lt;br/&gt;
(002386)5/20/2011 17:07:03 PM - sftp-test (192.168.0.194)&amp;gt; 257 &quot;/in&quot; is current directory.&lt;br/&gt;
(002386)5/20/2011 17:07:03 PM - sftp-test (192.168.0.194)&amp;gt; CWD in            ***** Current directory is already /in&lt;br/&gt;
(002386)5/20/2011 17:07:03 PM - sftp-test (192.168.0.194)&amp;gt; 550 CWD failed. &quot;/in/in&quot;: directory not found.&lt;/p&gt;

&lt;p&gt;For the whole FTP server logs go here: &lt;a href=&quot;http://pastie.org/private/kknnkxpbyzqmai7gsm8z5g&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://pastie.org/private/kknnkxpbyzqmai7gsm8z5g&lt;/a&gt;&lt;br/&gt;
For the Servicemix/Camel(Trace) log: &lt;a href=&quot;http://pastie.org/private/eulookxiepan3nkjyu41a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://pastie.org/private/eulookxiepan3nkjyu41a&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;A workaround that seems to work is to use the maxMessagesPerPoll=1 option.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Camel 2.6.0-fuse-0.1-0.9&lt;br/&gt;
Running in ServiceMix&lt;br/&gt;
Java 1.6&lt;/p&gt;</environment>
        <key id="12508205">CAMEL-4010</key>
            <summary>Camel FTP component fails to process multiple files at once from a specified folder</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="tricasoft">Laurentiu Trica</reporter>
                        <labels>
                    </labels>
                <created>Tue, 24 May 2011 15:16:50 +0000</created>
                <updated>Sun, 6 Nov 2011 11:57:39 +0000</updated>
                            <resolved>Sun, 6 Nov 2011 11:57:39 +0000</resolved>
                                    <version>2.6.0</version>
                                    <fixVersion>2.8.3</fixVersion>
                    <fixVersion>2.9.0</fixVersion>
                                    <component>camel-ftp</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13039109" author="tricasoft" created="Wed, 25 May 2011 13:19:04 +0000"  >&lt;p&gt;Sample test case using Camel Nmr in combination with Camel FTP.&lt;/p&gt;

&lt;p&gt;You need to do:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;unzip and enter the folder&lt;/li&gt;
	&lt;li&gt;mvn install&lt;/li&gt;
	&lt;li&gt;copy the .zip file from /sa/target to ServiceMix deploy folder&lt;/li&gt;
	&lt;li&gt;put more than 3 files at once on the input FTP&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13040796" author="davsclaus" created="Sun, 29 May 2011 12:21:51 +0000"  >&lt;p&gt;Cannot be critical as there is a workaround&lt;/p&gt;</comment>
                            <comment id="13144680" author="davsclaus" created="Sat, 5 Nov 2011 13:11:38 +0000"  >&lt;p&gt;The ftp consumer is not thread safe, we should possible force the ftp consumer to run synchronously.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                            <outwardlinks description="depends upon">
                                        <issuelink>
            <issuekey id="12530481">CAMEL-4625</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12480407" name="test-camel-ftp.zip" size="4957" author="tricasoft" created="Wed, 25 May 2011 13:19:04 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>76188</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 3 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i01yan:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9325</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>