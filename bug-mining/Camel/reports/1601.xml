<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 09:46:27 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-4474] file: consumer does not create directory</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-4474</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;According to &lt;a href=&quot;http://camel.apache.org/file2.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://camel.apache.org/file2.html&lt;/a&gt; autoCreate is true by default and should for a consumer create the directory.&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;autoCreate 	true 	Automatically create missing directories in the file&apos;s pathname. For the file consumer, that means creating the starting directory. For the file producer, it means the directory the files should be written to. 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This does not happen and thus a route startup would fail.&lt;/p&gt;</description>
                <environment>&lt;p&gt;java 1.6&lt;/p&gt;</environment>
        <key id="12523860">CAMEL-4474</key>
            <summary>file: consumer does not create directory</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="taariql">Taariq Levack</assignee>
                                    <reporter username="davidkarlsen@gmail.com">David J. M. Karlsen</reporter>
                        <labels>
                            <label>component</label>
                            <label>consumer</label>
                            <label>file</label>
                    </labels>
                <created>Wed, 21 Sep 2011 13:04:31 +0000</created>
                <updated>Tue, 25 Oct 2011 11:35:41 +0000</updated>
                            <resolved>Fri, 23 Sep 2011 07:51:48 +0000</resolved>
                                    <version>2.8.1</version>
                                    <fixVersion>2.7.4</fixVersion>
                    <fixVersion>2.8.2</fixVersion>
                    <fixVersion>2.9.0</fixVersion>
                                    <component>camel-core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="13109534" author="taariql" created="Wed, 21 Sep 2011 14:39:09 +0000"  >&lt;p&gt;David can you please post a test for this?&lt;br/&gt;
There are tests&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; for this code so maybe you missed something with permissions etc, or of course maybe these tests miss something.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://svn.apache.org/repos/asf/camel/trunk/camel-core/src/test/java/org/apache/camel/component/file/FileConsumerAutoCreateDirectoryTest.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://svn.apache.org/repos/asf/camel/trunk/camel-core/src/test/java/org/apache/camel/component/file/FileConsumerAutoCreateDirectoryTest.java&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13109548" author="davidkarlsen@gmail.com" created="Wed, 21 Sep 2011 14:57:47 +0000"  >&lt;p&gt;See attached test - you can toggle the mkdir flag to make it pass or fail.&lt;/p&gt;</comment>
                            <comment id="13109600" author="taariql" created="Wed, 21 Sep 2011 15:57:38 +0000"  >&lt;p&gt;You&apos;re using a dot in the directory name which is not allowed, is this the error you&apos;re getting?&lt;/p&gt;

&lt;p&gt;IllegalArgumentException(&quot;Only directory is supported. Endpoint must be configured with a valid starting directory: &quot; + file);&lt;/p&gt;</comment>
                            <comment id="13109617" author="davidkarlsen@gmail.com" created="Wed, 21 Sep 2011 16:15:11 +0000"  >&lt;p&gt;I will have to test tomorrow at work. But I do not see this requirement documented an place: &lt;a href=&quot;http://camel.apache.org/file2.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://camel.apache.org/file2.html&lt;/a&gt; .&lt;br/&gt;
It&apos;s also not a problem as long as the directory in fact exists - so I doubt that is the case - but I&apos;ll double check tomorrow.&lt;/p&gt;</comment>
                            <comment id="13109759" author="davidkarlsen@gmail.com" created="Wed, 21 Sep 2011 18:37:58 +0000"  >&lt;p&gt;Hah! You are dead-right - but why??&lt;/p&gt;

&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;Caused by: org.apache.camel.RuntimeCamelException: java.lang.IllegalArgumentException: Only directory is supported. Endpoint must be configured with a valid starting directory: target/incoming.dir
	at org.apache.camel.util.ObjectHelper.wrapRuntimeCamelException(ObjectHelper.java:1145)
	at org.apache.camel.spring.SpringCamelContext.onApplicationEvent(SpringCamelContext.java:108)
	at org.apache.camel.spring.CamelContextFactoryBean.onApplicationEvent(CamelContextFactoryBean.java:240)
	at 

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Changing it to one w/o dot fixed it - and the error message &quot;Only directory is supported.&quot; is misleading.&lt;/p&gt;</comment>
                            <comment id="13112328" author="taariql" created="Thu, 22 Sep 2011 04:57:42 +0000"  >&lt;p&gt;Great.&lt;/p&gt;

&lt;p&gt;The reason is stated in the comments in FileEndpoint;&lt;br/&gt;
// we assume its a file if the name has a dot in it (eg foo.txt)&lt;/p&gt;

&lt;p&gt;Since a directory can have a dot, like .m2, .camel etc, we should perhaps always assume it&apos;s a directory, but that doesn&apos;t sound right either.&lt;br/&gt;
Feel free to submit a patch to improve the code or even documentation to make it clearer.&lt;/p&gt;</comment>
                            <comment id="13112381" author="davsclaus" created="Thu, 22 Sep 2011 07:25:12 +0000"  >&lt;p&gt;That dot thingy is a left over from the 1.x days as you could configure a fileName and/or a directory. In 2.x it must be a starting directory. And you can use the new fileName option to pin point a specific file.&lt;/p&gt;

&lt;p&gt;David there is something wrong with your system as we use the File API to check if its a directory first&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; isDirectory = file.isDirectory();
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (!isDirectory &amp;amp;&amp;amp; file.getName().contains(&lt;span class=&quot;code-quote&quot;&gt;&quot;.&quot;&lt;/span&gt;)) {
            &lt;span class=&quot;code-keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; IllegalArgumentException(&lt;span class=&quot;code-quote&quot;&gt;&quot;Only directory is supported. Endpoint must be configured with a valid starting directory: &quot;&lt;/span&gt; + file);
        }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So what OS and file system are you using?&lt;/p&gt;</comment>
                            <comment id="13112417" author="taariql" created="Thu, 22 Sep 2011 08:48:57 +0000"  >&lt;p&gt;Claus I don&apos;t think there&apos;s a problem with his OS or filesystem, isDirectory will return true only if it exists and is a directory.&lt;br/&gt;
So it will always throw the exception if the directory does not exist and has a dot.&lt;/p&gt;

&lt;p&gt;I have half a patch from doing a new test yesterday, so if David hasn&apos;t got a patch in mind I can finish it the weekend when I get a gap.&lt;/p&gt;</comment>
                            <comment id="13112553" author="davsclaus" created="Thu, 22 Sep 2011 13:29:48 +0000"  >&lt;p&gt;Ah Taarig yeah of course &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; &lt;/p&gt;</comment>
                            <comment id="13112714" author="taariql" created="Thu, 22 Sep 2011 17:04:48 +0000"  >&lt;p&gt;Doesn&apos;t seem like there&apos;s more to do on this, patch attached.&lt;/p&gt;</comment>
                            <comment id="13112724" author="taariql" created="Thu, 22 Sep 2011 17:16:00 +0000"  >&lt;p&gt;Fixed a comment in the test code. Please see the last attachment, &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-4474&quot; title=&quot;file: consumer does not create directory&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-4474&quot;&gt;&lt;del&gt;CAMEL-4474&lt;/del&gt;&lt;/a&gt;&lt;em&gt;file&lt;/em&gt;_consumer_does_not_create_directory2.patch&lt;/p&gt;</comment>
                            <comment id="13113212" author="davsclaus" created="Fri, 23 Sep 2011 07:23:33 +0000"  >&lt;p&gt;Taariq thanks of the patch. I have granter your JIRA account karma to assign tickets, as you seem to contribute a fair number of patches to Camel. Soo keep it up.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12496142" name="CAMEL-4474_file__consumer_does_not_create_directory.patch" size="2322" author="taariql" created="Thu, 22 Sep 2011 17:04:48 +0000"/>
                            <attachment id="12496144" name="CAMEL-4474_file__consumer_does_not_create_directory1.patch" size="2317" author="taariql" created="Thu, 22 Sep 2011 17:09:16 +0000"/>
                            <attachment id="12496146" name="CAMEL-4474_file__consumer_does_not_create_directory2.patch" size="2555" author="taariql" created="Thu, 22 Sep 2011 17:16:00 +0000"/>
                            <attachment id="12495378" name="Camel4474.java" size="1136" author="davidkarlsen@gmail.com" created="Wed, 21 Sep 2011 14:57:47 +0000"/>
                            <attachment id="12495379" name="app-config-context.xml" size="1113" author="davidkarlsen@gmail.com" created="Wed, 21 Sep 2011 14:57:47 +0000"/>
                            <attachment id="12495377" name="app-config.properties" size="246" author="davidkarlsen@gmail.com" created="Wed, 21 Sep 2011 14:57:47 +0000"/>
                            <attachment id="12495380" name="test-context.xml" size="1359" author="davidkarlsen@gmail.com" created="Wed, 21 Sep 2011 14:57:47 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>13760</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 9 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0215j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9788</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310080" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Regression</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10091"><![CDATA[Regression]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>