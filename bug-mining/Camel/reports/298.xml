<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 09:28:02 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-782] Tracer incorrectly treats messages with InputStream as body</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-782</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;Suppose we have the following flow:&lt;/p&gt;

&lt;p&gt; from(&quot;activemq:vasea&quot;)&lt;br/&gt;
  .to(&quot;cxf:bean:serviceEndpoint?dataFormat=MESSAGE&quot;)&lt;br/&gt;
    .unmarshal().string()&lt;br/&gt;
  .to(&quot;activemq:petea&quot;);&lt;/p&gt;

&lt;p&gt;In this flow cxf:bean:serviceEndpoint returns ByteArrayInputStream as body. Under normal conditions everything works fine: WS output gets to the queue.&lt;br/&gt;
But if we add:&lt;br/&gt;
getContext().addInterceptStrategy(new Tracer());&lt;br/&gt;
Queue starts receiving empty messages. After digging in the code I found out that tracer reads input stream in order to display body, but not resets it. Thus when message reaches unmarshaller, nothing could be read from the stream.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12487939">CAMEL-782</key>
            <summary>Tracer incorrectly treats messages with InputStream as body</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                            <parent id="12484689">CAMEL-858</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="njiang">Willem Jiang</assignee>
                                    <reporter username="lordorient">Gena Ganebnyi</reporter>
                        <labels>
                    </labels>
                <created>Tue, 5 Aug 2008 11:41:44 +0000</created>
                <updated>Mon, 16 Feb 2009 05:51:49 +0000</updated>
                            <resolved>Wed, 27 Aug 2008 07:44:38 +0000</resolved>
                                    <version>1.4.0</version>
                                    <fixVersion>1.5.0</fixVersion>
                                    <component>camel-core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12948228" author="davsclaus" created="Wed, 6 Aug 2008 04:15:50 +0000"  >&lt;p&gt;Ah good catch. The logger could have the same problem as well.&lt;/p&gt;

&lt;p&gt;I remember there is something with streamcache that might can help out here. I don&apos;t have the time to dig into it yet.&lt;/p&gt;

&lt;p&gt;A workaround is to disable logging of the body in the tracer. There are options for this in the formatter:&lt;br/&gt;
&lt;a href=&quot;http://activemq.apache.org/camel/tracer.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://activemq.apache.org/camel/tracer.html&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12948591" author="njiang" created="Wed, 27 Aug 2008 07:44:38 +0000"  >&lt;p&gt;Hi Genadii&lt;/p&gt;

&lt;p&gt; I just did a quick fix for it.  &lt;br/&gt;
 Please check out the latest Camel 1.5 snapshot and let me know you feed back &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Willem&lt;/p&gt;</comment>
                            <comment id="12950700" author="davsclaus" created="Mon, 16 Feb 2009 05:51:49 +0000"  >&lt;p&gt;Closing all 1.5.0 issues&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>83305</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 41 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i01ed3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6096</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>