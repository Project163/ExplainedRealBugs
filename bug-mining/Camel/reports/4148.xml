<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:24:13 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-11388] camel-infinispan - InfinispanRoutePolicy issue with locking from remote server</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-11388</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;It seems there is a problem that the route policy seems to grant locks to both or keep changing between them, so we have competing consumers being active at the same time.&lt;/p&gt;

&lt;p&gt;The issue can be reproduced by following the readme file from&lt;br/&gt;
&lt;a href=&quot;https://github.com/camelinaction/camelinaction2/tree/master/chapter17/cluster-file-infinispan&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/camelinaction/camelinaction2/tree/master/chapter17/cluster-file-infinispan&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;You can see errors like&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Caused by: org.apache.camel.RuntimeCamelException: java.io.FileNotFoundException: /Users/davsclaus/workspace/camelinaction2/chapter17/cluster-file-infinispan/target/inbox/WebSpherePackageScanClassResolver.java (No such file or directory)
	at org.apache.camel.util.ObjectHelper.wrapRuntimeCamelException(ObjectHelper.java:1756)
	at org.apache.camel.util.ObjectHelper.invokeMethod(ObjectHelper.java:1355)
	at org.apache.camel.impl.converter.StaticMethodTypeConverter.convertTo(StaticMethodTypeConverter.java:60)
	at org.apache.camel.component.file.GenericFileConverter.convertTo(GenericFileConverter.java:97)
	at sun.reflect.GeneratedMethodAccessor16.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.camel.util.ObjectHelper.invokeMethod(ObjectHelper.java:1351)
	at org.apache.camel.impl.converter.StaticMethodFallbackTypeConverter.convertTo(StaticMethodFallbackTypeConverter.java:62)
	at org.apache.camel.impl.converter.BaseTypeConverterRegistry.doConvertTo(BaseTypeConverterRegistry.java:346)
	at org.apache.camel.impl.converter.BaseTypeConverterRegistry.mandatoryConvertTo(BaseTypeConverterRegistry.java:181)
	... 41 more
Caused by: java.io.FileNotFoundException: /Users/davsclaus/workspace/camelinaction2/chapter17/cluster-file-infinispan/target/inbox/WebSpherePackageScanClassResolver.java (No such file or directory)
	at java.io.FileInputStream.open0(Native Method)
	at java.io.FileInputStream.open(FileInputStream.java:195)
	at java.io.FileInputStream.&amp;lt;init&amp;gt;(FileInputStream.java:138)
	at org.apache.camel.converter.IOConverter.toInputStream(IOConverter.java:78)
	at org.apache.camel.converter.IOConverter.toByteArray(IOConverter.java:266)
	at sun.reflect.GeneratedMethodAccessor17.invoke(Unknown Source)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.apache.camel.util.ObjectHelper.invokeMethod(ObjectHelper.java:1351)
	... 50 more
2017-06-09 08:04:41,396 [:&lt;span class=&quot;code-comment&quot;&gt;//target/inbox] WARN  GenericFileOnCompletion        - Rollback file strategy: org.apache.camel.component.file.strategy.GenericFileDeleteProcessStrategy@160cecbb &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; file: GenericFile[WebSpherePackageScanClassResolver.java]
&lt;/span&gt;2017-06-09 08:04:42,126 [spanRoutePolicy] INFO  InfinispanRoutePolicy          - Leadership lost (map=myLock, key=myLockKey val=myLockValue)
2017-06-09 08:04:42,127 [spanRoutePolicy] INFO  InfinispanRoutePolicy          - Leadership taken (map=myLock, key=myLockKey, val=myLockValue)
2017-06-09 08:05:07,710 [29c8fac7da04e40] INFO  InfinispanRoutePolicy          - Leadership lost (map=myLock, key=myLockKey val=myLockValue)
2017-06-09 08:05:07,715 [29c8fac7da04e40] INFO  InfinispanRoutePolicy          - Leadership taken (map=myLock, key=myLockKey, val=myLockValue)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Where as the hazelcast example which is similar works fine.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13078515">CAMEL-11388</key>
            <summary>camel-infinispan - InfinispanRoutePolicy issue with locking from remote server</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lb">Luca Burgazzoli</assignee>
                                    <reporter username="davsclaus">Claus Ibsen</reporter>
                        <labels>
                    </labels>
                <created>Fri, 9 Jun 2017 06:10:20 +0000</created>
                <updated>Thu, 22 Jun 2017 20:39:15 +0000</updated>
                            <resolved>Thu, 22 Jun 2017 17:09:11 +0000</resolved>
                                    <version>2.19.0</version>
                                    <fixVersion>2.19.2</fixVersion>
                    <fixVersion>2.20.0</fixVersion>
                                    <component>camel-infinispan</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="16043994" author="davsclaus" created="Fri, 9 Jun 2017 06:10:56 +0000"  >&lt;p&gt;Luca, I wonder if you mind taking a look and see what could be the problem?&lt;/p&gt;</comment>
                            <comment id="16043997" author="davsclaus" created="Fri, 9 Jun 2017 06:12:52 +0000"  >&lt;p&gt;Also I wonder if we can make this easier to configure from client point of view for remote. Maybe if you can have a hotrod-client.properties file which you can then easily specify and load automatic, so you dont have to add that bunch of java code to setup a remote infinispan connection.&lt;/p&gt;

&lt;p&gt;See for example how the JCache example does it (yeah I know its using JCache API but notice its only 2 lines of code)&lt;br/&gt;
&lt;a href=&quot;https://github.com/camelinaction/camelinaction2/blob/master/chapter17/cluster-jcache/src/main/java/camelinaction/ServerBar.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/camelinaction/camelinaction2/blob/master/chapter17/cluster-jcache/src/main/java/camelinaction/ServerBar.java&lt;/a&gt;&lt;/p&gt;
</comment>
                            <comment id="16059700" author="lb" created="Thu, 22 Jun 2017 17:12:26 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davsclaus&quot; class=&quot;user-hover&quot; rel=&quot;davsclaus&quot;&gt;davsclaus&lt;/a&gt; &lt;/p&gt;

&lt;p&gt;sent a PR against CIA2 (&lt;a href=&quot;https://github.com/camelinaction/camelinaction2/pull/73&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/camelinaction/camelinaction2/pull/73&lt;/a&gt;) to fix the example. &lt;br/&gt;
will work on make it easier to configure the policy in a separate JIRA&lt;/p&gt;</comment>
                            <comment id="16059963" author="lb" created="Thu, 22 Jun 2017 20:33:27 +0000"  >&lt;p&gt; &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davsclaus&quot; class=&quot;user-hover&quot; rel=&quot;davsclaus&quot;&gt;davsclaus&lt;/a&gt; forgot to mention that CIA2 examples need camel 2.19.2 in addition to my PR&lt;/p&gt;</comment>
                            <comment id="16059974" author="davsclaus" created="Thu, 22 Jun 2017 20:39:15 +0000"  >&lt;p&gt;Thanks Luka, I added a TODO in the pom of the CiA source code&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 21 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3g2m7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>