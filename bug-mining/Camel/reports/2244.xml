<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 09:56:48 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-6218] TransferExchage InOut ActiveMQ Exception</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-6218</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;The scnearios are :&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;when using the transferExchange option only on the producer, I don&apos;t get the body back, but not the header.&lt;/li&gt;
	&lt;li&gt;When I use the transferExchange option on both producer and consumer, I get the headers back, but not the body. And instead I get the following exception&lt;/li&gt;
&lt;/ul&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;[ryQueueReplyManager[temporary]] TemporaryQueueReplyManager     WARN  Execution of JMS message listener failed. Caused by: [java.lang.NullPointerException - &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;]
java.lang.NullPointerException
	at org.apache.camel.impl.DefaultExchangeHolder.unmarshal(DefaultExchangeHolder.java:107)
	at org.apache.camel.component.jms.JmsBinding.extractBodyFromJms(JmsBinding.java:128)
	at org.apache.camel.component.jms.JmsMessage.createBody(JmsMessage.java:214)
	at org.apache.camel.impl.MessageSupport.getBody(MessageSupport.java:41)
	at org.apache.camel.component.jms.reply.ReplyManagerSupport.processReply(ReplyManagerSupport.java:136)
	at org.apache.camel.component.jms.reply.TemporaryQueueReplyHandler.onReply(TemporaryQueueReplyHandler.java:54)
	at org.apache.camel.component.jms.reply.TemporaryQueueReplyManager.handleReplyMessage(TemporaryQueueReplyManager.java:71)
	at org.apache.camel.component.jms.reply.ReplyManagerSupport.onMessage(ReplyManagerSupport.java:113)
	at org.springframework.jms.listener.AbstractMessageListenerContainer.doInvokeListener(AbstractMessageListenerContainer.java:560)
	at org.springframework.jms.listener.AbstractMessageListenerContainer.invokeListener(AbstractMessageListenerContainer.java:498)
	at org.springframework.jms.listener.AbstractMessageListenerContainer.doExecuteListener(AbstractMessageListenerContainer.java:467)
	at org.springframework.jms.listener.AbstractPollingMessageListenerContainer.doReceiveAndExecute(AbstractPollingMessageListenerContainer.java:325)
	at org.springframework.jms.listener.AbstractPollingMessageListenerContainer.receiveAndExecute(AbstractPollingMessageListenerContainer.java:263)
	at org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.invokeListener(DefaultMessageListenerContainer.java:1058)
	at org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.executeOngoingLoop(DefaultMessageListenerContainer.java:1050)
	at org.springframework.jms.listener.DefaultMessageListenerContainer$AsyncMessageListenerInvoker.run(DefaultMessageListenerContainer.java:947)
	at java.lang.&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.run(&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.java:662)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12639290">CAMEL-6218</key>
            <summary>TransferExchage InOut ActiveMQ Exception</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="raulvk">Ra&#250;l Kripalani</assignee>
                                    <reporter username="alanfoster">Alan Foster</reporter>
                        <labels>
                    </labels>
                <created>Wed, 27 Mar 2013 12:07:21 +0000</created>
                <updated>Wed, 3 Apr 2013 21:34:38 +0000</updated>
                            <resolved>Wed, 3 Apr 2013 00:38:22 +0000</resolved>
                                    <version>2.10.4</version>
                                    <fixVersion>2.10.5</fixVersion>
                    <fixVersion>2.11.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="13615158" author="alanfoster" created="Wed, 27 Mar 2013 12:08:10 +0000"  >&lt;p&gt;Example of the failing test attached&lt;/p&gt;</comment>
                            <comment id="13615162" author="davsclaus" created="Wed, 27 Mar 2013 12:24:04 +0000"  >&lt;p&gt;What Camel version do you use?&lt;/p&gt;</comment>
                            <comment id="13615181" author="muellerc" created="Wed, 27 Mar 2013 12:46:46 +0000"  >&lt;p&gt;Can you try not to use inner classes!?&lt;br/&gt;
And can you assign serialVersionUID to your classes!?&lt;/p&gt;</comment>
                            <comment id="13615301" author="alanfoster" created="Wed, 27 Mar 2013 14:21:05 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davsclaus&quot; class=&quot;user-hover&quot; rel=&quot;davsclaus&quot;&gt;davsclaus&lt;/a&gt; Sorry, I forgot to post that information here&lt;/p&gt;

&lt;p&gt;I am running this on windows 2008 r2 with the following dependencies&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Camel 2.10&lt;/li&gt;
	&lt;li&gt;activemq-camel 5.7&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=muellerc&quot; class=&quot;user-hover&quot; rel=&quot;muellerc&quot;&gt;muellerc&lt;/a&gt; Apologies, I have just tried this now. After adding them to separate classes and giving them both a serialVersionUID and I still get an exception&lt;/p&gt;</comment>
                            <comment id="13615314" author="alanfoster" created="Wed, 27 Mar 2013 14:31:12 +0000"  >&lt;p&gt;I have also just tried this with the newer versions, and I still get this exception &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Camel 2.11-SNAPSHOT&lt;/li&gt;
	&lt;li&gt;activemq-camel 5.8&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="13615321" author="alanfoster" created="Wed, 27 Mar 2013 14:36:00 +0000"  >&lt;p&gt;Out of interest I have also tried running it with activemq-camel 5.9-SNAPSHOT, but that caused all 3 tests to fail with the following stack trace for each&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[Message: foo.Request@6c43da1b]
	at org.apache.camel.util.ObjectHelper.wrapCamelExecutionException(ObjectHelper.java:1347)
	at org.apache.camel.impl.DefaultExchange.setException(DefaultExchange.java:272)
	at org.apache.camel.component.jms.JmsProducer.process(JmsProducer.java:137)
	at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73)
	at org.apache.camel.processor.SendProcessor$2.doInAsyncProducer(SendProcessor.java:122)
	at org.apache.camel.impl.ProducerCache.doInAsyncProducer(ProducerCache.java:298)
	at org.apache.camel.processor.SendProcessor.process(SendProcessor.java:117)
	at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73)
	at org.apache.camel.processor.DelegateAsyncProcessor.processNext(DelegateAsyncProcessor.java:99)
	at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90)
	at org.apache.camel.processor.interceptor.BacklogTracerInterceptor.process(BacklogTracerInterceptor.java:84)
	at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73)
	at org.apache.camel.processor.DelegateAsyncProcessor.processNext(DelegateAsyncProcessor.java:99)
	at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90)
	at org.apache.camel.processor.interceptor.TraceInterceptor.process(TraceInterceptor.java:91)
	at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73)
	at org.apache.camel.processor.RedeliveryErrorHandler.processErrorHandler(RedeliveryErrorHandler.java:390)
	at org.apache.camel.processor.RedeliveryErrorHandler.process(RedeliveryErrorHandler.java:273)
	at org.apache.camel.processor.RouteContextProcessor.processNext(RouteContextProcessor.java:46)
	at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90)
	at org.apache.camel.processor.interceptor.DefaultChannel.process(DefaultChannel.java:335)
	at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:117)
	at org.apache.camel.processor.Pipeline.process(Pipeline.java:80)
	at org.apache.camel.processor.RouteContextProcessor.processNext(RouteContextProcessor.java:46)
	at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90)
	at org.apache.camel.processor.UnitOfWorkProcessor.process(UnitOfWorkProcessor.java:122)
	at org.apache.camel.processor.RouteInflightRepositoryProcessor.processNext(RouteInflightRepositoryProcessor.java:48)
	at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90)
	at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73)
	at org.apache.camel.processor.DelegateAsyncProcessor.processNext(DelegateAsyncProcessor.java:99)
	at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:90)
	at org.apache.camel.management.InstrumentationProcessor.process(InstrumentationProcessor.java:72)
	at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:73)
	at org.apache.camel.component.direct.DirectProducer.process(DirectProducer.java:60)
	at org.apache.camel.processor.UnitOfWorkProcessor.processAsync(UnitOfWorkProcessor.java:150)
	at org.apache.camel.processor.UnitOfWorkProcessor.process(UnitOfWorkProcessor.java:117)
	at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:99)
	at org.apache.camel.processor.DelegateAsyncProcessor.process(DelegateAsyncProcessor.java:86)
	at org.apache.camel.processor.UnitOfWorkProducer.process(UnitOfWorkProducer.java:63)
	at org.apache.camel.impl.ProducerCache$2.doInProducer(ProducerCache.java:366)
	at org.apache.camel.impl.ProducerCache$2.doInProducer(ProducerCache.java:337)
	at org.apache.camel.impl.ProducerCache.doInProducer(ProducerCache.java:233)
	at org.apache.camel.impl.ProducerCache.sendExchange(ProducerCache.java:337)
	at org.apache.camel.impl.ProducerCache.send(ProducerCache.java:175)
	at org.apache.camel.impl.DefaultProducerTemplate.send(DefaultProducerTemplate.java:111)
	at org.apache.camel.impl.DefaultProducerTemplate.sendBody(DefaultProducerTemplate.java:124)
	at org.apache.camel.impl.DefaultProducerTemplate.sendBody(DefaultProducerTemplate.java:342)
	at foo.ActiveMQTest.testActiveMQInOutBodyResponse(ActiveMQTest.java:48)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)
	at org.junit.rules.TestWatcher$1.evaluate(TestWatcher.java:46)
	at org.junit.rules.RunRules.evaluate(RunRules.java:18)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:69)
	at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:48)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
	at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:292)
	at org.junit.runner.JUnitCore.run(JUnitCore.java:157)
	at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:76)
	at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:195)
	at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:63)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120)
Caused by: java.lang.NoSuchMethodError: org.apache.camel.util.ObjectHelper.notNull(Ljava/lang/&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;;Ljava/lang/&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;;Ljava/lang/&lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;;)V
	at org.apache.camel.component.jms.reply.ReplyManagerSupport.doStart(ReplyManagerSupport.java:212)
	at org.apache.camel.support.ServiceSupport.start(ServiceSupport.java:60)
	at org.apache.camel.util.ServiceHelper.startService(ServiceHelper.java:64)
	at org.apache.camel.util.ServiceHelper.startService(ServiceHelper.java:54)
	at org.apache.camel.component.jms.JmsProducer.createReplyManager(JmsProducer.java:503)
	at org.apache.camel.component.jms.JmsProducer.initReplyManager(JmsProducer.java:94)
	at org.apache.camel.component.jms.JmsProducer.processInOut(JmsProducer.java:164)
	at org.apache.camel.component.jms.JmsProducer.process(JmsProducer.java:129)
	... 77 more
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

</comment>
                            <comment id="13617401" author="alanfoster" created="Fri, 29 Mar 2013 15:00:01 +0000"  >&lt;p&gt;I noticed that Camel 2.11 offers camel-sjms, is this the preferred component to use over activemq-camel?&lt;/p&gt;

&lt;p&gt;Could someone please confirm if this jira is indeed a bug please, or am I simply misunderstanding the documentation for the transferExchange option?&lt;br/&gt;
Thanks!&lt;/p&gt;</comment>
                            <comment id="13618026" author="muellerc" created="Sat, 30 Mar 2013 09:21:55 +0000"  >&lt;p&gt;No, for your fist question. It&apos;s the simple/springless JMS component. It will may become the preferred JMS component in the future, but not in 2.11.&lt;/p&gt;

&lt;p&gt;I will have a look into this JIRA. If you could attach a complete project or a patch to an existin project in the future, it will take less time to verify the issue you have.&lt;/p&gt;</comment>
                            <comment id="13618031" author="muellerc" created="Sat, 30 Mar 2013 09:36:11 +0000"  >&lt;p&gt;Ok, it works for me. I can attach my simple project later...&lt;/p&gt;</comment>
                            <comment id="13618303" author="davsclaus" created="Sun, 31 Mar 2013 10:40:30 +0000"  >&lt;p&gt;Well the NPE should be fixed in camel-core, that is a bug.&lt;/p&gt;

&lt;p&gt;Either we should handle that null, or thrown some other kind of exception saying something is wrong.&lt;/p&gt;</comment>
                            <comment id="13618304" author="davsclaus" created="Sun, 31 Mar 2013 10:42:14 +0000"  >&lt;p&gt;Alan, what exact Camel version was that stacktrace from? eg was it 2.10.0, 2.10.1, etc. We need that so we know exactly which code line the NPE is triggered from.&lt;/p&gt;</comment>
                            <comment id="13618306" author="davsclaus" created="Sun, 31 Mar 2013 10:48:29 +0000"  >&lt;p&gt;I assume its 2.10.0, then we can see that the NPE is because payload is null&lt;br/&gt;
&lt;a href=&quot;http://svn.apache.org/viewvc/camel/tags/camel-2.10.0/camel-core/src/main/java/org/apache/camel/impl/DefaultExchangeHolder.java?view=markup&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc/camel/tags/camel-2.10.0/camel-core/src/main/java/org/apache/camel/impl/DefaultExchangeHolder.java?view=markup&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13618397" author="muellerc" created="Sun, 31 Mar 2013 17:27:50 +0000"  >&lt;p&gt;I created a test which shows it fails with Camel 2.11-SNAPSHOT. It also fails with Camel 2.10.4. The exchange is transfered to the second route, but the response is not transfered back to the first route.&lt;/p&gt;</comment>
                            <comment id="13618398" author="muellerc" created="Sun, 31 Mar 2013 17:28:59 +0000"  >&lt;p&gt;We should fix this before 2.11.0 in my opinion.&lt;/p&gt;</comment>
                            <comment id="13618403" author="alanfoster" created="Sun, 31 Mar 2013 17:50:08 +0000"  >&lt;p&gt;I&apos;ve just added an example project which has the previously included test failing now. I haven&apos;t had any luck tracking down the actual issue yet sadly &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/sad.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="13618406" author="alanfoster" created="Sun, 31 Mar 2013 17:57:42 +0000"  >&lt;p&gt;Ah, thank you for including an example project &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=muellerc&quot; class=&quot;user-hover&quot; rel=&quot;muellerc&quot;&gt;muellerc&lt;/a&gt;, I see you beat me to it! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;I also have seen some other bugs related in this area; The most important one seems to be a race condition with using InOut + ActiveMQ Component. I&apos;ll try making a sample project to show this bug ASAP.&lt;/p&gt;</comment>
                            <comment id="13618422" author="raulvk" created="Sun, 31 Mar 2013 18:50:13 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=alanfoster&quot; class=&quot;user-hover&quot; rel=&quot;alanfoster&quot;&gt;alanfoster&lt;/a&gt;, I fixed a few bugs and race conditions in camel-jms recently. Take a look if any of &lt;a href=&quot;https://issues.apache.org/jira/issues/?jql=project%20%3D%20CAMEL%20AND%20component%20%3D%20camel-jms%20AND%20status%20in%20(Resolved%2C%20Closed)%20AND%20assignee%20in%20(currentUser())&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;these issues&lt;/a&gt; could match your findings.&lt;/p&gt;</comment>
                            <comment id="13618466" author="alanfoster" created="Sun, 31 Mar 2013 20:52:26 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=raulvk&quot; class=&quot;user-hover&quot; rel=&quot;raulvk&quot;&gt;raulvk&lt;/a&gt; Nice work on fixing a lot of those bugs! &lt;/p&gt;

&lt;p&gt;The test i&apos;m writing is having a lot of issues, I am getting a lot of blueprint apache aries ComponentDefinitionExceptions when it attempts to start the org.apache.cxf.cxf-rt-transports-http bundle in JUnit for reason...&lt;/p&gt;

&lt;p&gt;I have been able to deploy the route to Karaf just fine however! The exception thrown when inside Karaf is &lt;tt&gt;Caused By javax.jms.InvalidDestinationException Cannot publish to a deleted Destination: temp-queue://ID:my-computer-1234-etc-etc&lt;/tt&gt; - I&apos;ll keep trying to make an actual JUnit test for this though&lt;/p&gt;</comment>
                            <comment id="13619977" author="muellerc" created="Tue, 2 Apr 2013 16:42:25 +0000"  >&lt;p&gt;Regarding to my attached project. The strange thing is, if I set transferExchange=true to both ActiveMQ endpoints (producer and consumer), the first route &quot;ignore&quot; the response of the second one. If I set transferExchange=false on the second route, the correct body is received but not the header (because it&apos;s and serialized object).&lt;/p&gt;</comment>
                            <comment id="13619999" author="muellerc" created="Tue, 2 Apr 2013 17:03:47 +0000"  >&lt;p&gt;Thanks Raul for looking into it!&lt;/p&gt;</comment>
                            <comment id="13620449" author="raulvk" created="Wed, 3 Apr 2013 00:38:22 +0000"  >&lt;p&gt;Resolved in r1463799.&lt;/p&gt;

&lt;p&gt;The JmsBinding is designed to be &quot;pull-based&quot;, but the Exchange &amp;lt;=&amp;gt; OUT Message relationship was being set too late: after invoking the JmsBinding. Therefore, the latter wasn&apos;t able to populate body, headers and properties from the DefaultExchangeHolder in time.&lt;/p&gt;

&lt;p&gt;As a side-effect, we now also set the OUT message when the &lt;tt&gt;transferException&lt;/tt&gt; option is enabled (aside from also setting the Exception, of course). Before we only used to set the exception, but it&apos;s a chicken-or-egg situation to be honest.&lt;/p&gt;

&lt;p&gt;This is harmless &#8211; and even better than before if you ask me, because now there&apos;s more context information in the Exchange. All JMS tests pass locally.&lt;/p&gt;</comment>
                            <comment id="13621358" author="muellerc" created="Wed, 3 Apr 2013 21:34:38 +0000"  >&lt;p&gt;Thanks for resolving it!&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12575692" name="camel-6214-transferExchange.java" size="3800" author="alanfoster" created="Wed, 27 Mar 2013 12:08:10 +0000"/>
                            <attachment id="12576293" name="camel-6218-test-project.rar" size="20" author="alanfoster" created="Sun, 31 Mar 2013 17:50:08 +0000"/>
                            <attachment id="12576292" name="org.apache.cmueller.camel.zip" size="18148" author="muellerc" created="Sun, 31 Mar 2013 17:27:50 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>319760</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 33 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1j67z:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>320101</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>