<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:30:38 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-12638] DefaultFluentProducerTemplate is not thread safe</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-12638</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;I think we have rediscovered the &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-10820&quot; title=&quot;DefaultFluentProducerTemplate mixes up data when sending asynchronously&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-10820&quot;&gt;&lt;del&gt;CAMEL-10820&lt;/del&gt;&lt;/a&gt; bug. A&#160;body of one request gets replaced with a body of proceeding request, in our case we use &lt;b&gt;request()&lt;/b&gt; method instead of&#160;&lt;b&gt;asyncSend()&lt;/b&gt;.&lt;/p&gt;

&lt;p&gt;We use camel together with spring-boot. Consider following code:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@Service
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;UseCamelService {

   &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; FluentProducerTemplate producer;

   @Autowired
   &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; UseCamelService(FluentProducerTemplate producer) {
      &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.producer = producer;
   }

   &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; getValueFromCamel(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; body) {
      &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; producer.to(&lt;span class=&quot;code-quote&quot;&gt;&quot;route&quot;&lt;/span&gt;).withBody(body).request(&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;.class);
   }

}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;If &lt;b&gt;UseCamelService.getValueFromCamel()&lt;/b&gt;&#160;gets called from two different threads it is possible for the latter one to override the body of the first one.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13171366">CAMEL-12638</key>
            <summary>DefaultFluentProducerTemplate is not thread safe</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="lucas_">Lukasz</reporter>
                        <labels>
                    </labels>
                <created>Wed, 11 Jul 2018 10:02:26 +0000</created>
                <updated>Tue, 25 Feb 2020 15:36:26 +0000</updated>
                            <resolved>Wed, 8 Aug 2018 12:01:12 +0000</resolved>
                                    <version>2.20.2</version>
                                    <fixVersion>2.21.3</fixVersion>
                    <fixVersion>2.22.1</fixVersion>
                    <fixVersion>2.23.0</fixVersion>
                                    <component>camel-core</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>7</watches>
                                                                                                                <comments>
                            <comment id="16540618" author="neildrummonddorado" created="Wed, 11 Jul 2018 20:37:34 +0000"  >&lt;p&gt;We just ran into this on a project I am currently working on.&lt;/p&gt;

&lt;p&gt;Looking at the &lt;tt&gt;DefaultFluentProducerTemplate&lt;/tt&gt; class, it looks like it mutates it&apos;s internal state in it&apos;s implementation of the methods of the &lt;tt&gt;FluentProducerTemplate&lt;/tt&gt;&#160;interface. Because the builder isn&apos;t immutable, it would appear that any two threads using the same &lt;tt&gt;DefaultFluentProducerTemplate&lt;/tt&gt;&#160;instance (as in the example in the description) would allow for&#160;any state changes from one thread to leak into the other.&lt;/p&gt;

&lt;p&gt;In my case, it looks like the body is often getting swapped out with one from another thread, but it looks like any of the internal state could get mixed up since this class isn&apos;t immutable.&#160; I&apos;m not sure what the performance implications of making this class immutable would be, but that would definitely appear to be one way to solve the problem.&lt;/p&gt;</comment>
                            <comment id="16541252" author="lucas_" created="Thu, 12 Jul 2018 07:25:34 +0000"  >&lt;p&gt;I came up with the&#160;same conclusion as you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=neildrummonddorado&quot; class=&quot;user-hover&quot; rel=&quot;neildrummonddorado&quot;&gt;neildrummonddorado&lt;/a&gt;. There is no mention about this in the&#160;&lt;em&gt;DefaultFluentProducerTemplate&lt;/em&gt;&#160;javadoc, but the one for&#160;&lt;em&gt;FluentProducerTemplate&lt;/em&gt;&#160;clearly states that the producer is threadsafe and I would kind of expect that the same should apply for its implementations.&lt;/p&gt;</comment>
                            <comment id="16541360" author="njiang" created="Thu, 12 Jul 2018 09:09:51 +0000"  >&lt;p&gt;The FluentProducerTemplate works as the Builder class with the fluent API to setup the internal states which  is not thread safe. You may need to use the DefaultProducerTemplate to do the job.&lt;/p&gt;</comment>
                            <comment id="16541562" author="lucas_" created="Thu, 12 Jul 2018 12:37:03 +0000"  >&lt;p&gt;I&apos;m not really convinced by that &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=njiang&quot; class=&quot;user-hover&quot; rel=&quot;njiang&quot;&gt;njiang&lt;/a&gt;. Even in the &lt;em&gt;Camel in Action (Second Edition)&lt;/em&gt;&#160;book,&#160;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davsclaus&quot; class=&quot;user-hover&quot; rel=&quot;davsclaus&quot;&gt;davsclaus&lt;/a&gt;&#160;and &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=janstey&quot; class=&quot;user-hover&quot; rel=&quot;janstey&quot;&gt;janstey&lt;/a&gt;&#160;use it as a standard bean that can be called to execute a service, not as a builder (see &lt;em&gt;Listing 7.12 JAX-RS&lt;/em&gt;&#160;&lt;em&gt;REST implementation&lt;/em&gt;)&lt;em&gt;:&lt;/em&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@ApplicationScoped
@Path ( &lt;span class=&quot;code-quote&quot;&gt;&quot;/api&quot;&lt;/span&gt; )
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;RulesController {
   @Inject
   @Uri ( &lt;span class=&quot;code-quote&quot;&gt;&quot;direct:inventory&quot;&lt;/span&gt; )
   &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; FluentProducerTemplate producer;

   @GET
   @Produces ( MediaType.APPLICATION_JSON )
   @Path ( &lt;span class=&quot;code-quote&quot;&gt;&quot;/rules/{cartIds}&quot;&lt;/span&gt; )
   &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; List&amp;lt;ItemDto&amp;gt; rules( @PathParam ( &lt;span class=&quot;code-quote&quot;&gt;&quot;cartIds&quot;&lt;/span&gt; ) &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; cartIds ) {
      List&amp;lt;ItemDto&amp;gt; answer = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ArrayList&amp;lt;&amp;gt;();
      ItemsDto inventory = producer.request( ItemsDto.class );
      [...]
   }
}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&#160;Obviously they don&apos;t refer to a specific implementation but we can all imagine which implementation is provided by default. Also if it was supposed to be &lt;b&gt;just&lt;/b&gt; a builder I find it misleading that the class actually implements a &lt;em&gt;Service&lt;/em&gt;&#160;interface.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16541858" author="mario.papandrea" created="Thu, 12 Jul 2018 15:57:29 +0000"  >&lt;p&gt;Moreover the api doc clearly state&#160; that this object is &quot;thread safe&quot;&#160;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://static.javadoc.io/org.apache.camel/camel-core/2.19.3/org/apache/camel/FluentProducerTemplate.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://static.javadoc.io/org.apache.camel/camel-core/2.19.3/org/apache/camel/FluentProducerTemplate.html&lt;/a&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160; &lt;span class=&quot;image-wrap&quot; style=&quot;&quot;&gt;&lt;img src=&quot;https://issues.apache.org/jira/secure/attachment/12931349/12931349_image-2018-07-12-17-58-09-225.png&quot; style=&quot;border: 0px solid black&quot; /&gt;&lt;/span&gt;&lt;/p&gt;</comment>
                            <comment id="16543301" author="njiang" created="Fri, 13 Jul 2018 14:55:25 +0000"  >&lt;p&gt;OK, I saw the java doc. Normally the template send, request method are thread safe, but withBody() is not thread safe, we can fix it by&#160;declare&#160;the body as thread local , but there are some other settings such as endpoint, processorSupplier which are not thread safe. So I just add a comment that we need treat FluentProducerTemplate as a Builder.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;DefaultFluentProducerTemplate &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; ServiceSupport &lt;span class=&quot;code-keyword&quot;&gt;implements&lt;/span&gt; FluentProducerTemplate {
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; CamelContext context;
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;final&lt;/span&gt; ClassValue&amp;lt;ConvertBodyProcessor&amp;gt; resultProcessors;
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; Map&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt;&amp;gt; headers;
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;Object&lt;/span&gt; body;
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; Optional&amp;lt;Consumer&amp;lt;ProducerTemplate&amp;gt;&amp;gt; templateCustomizer;
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; Optional&amp;lt;Supplier&amp;lt;Exchange&amp;gt;&amp;gt; exchangeSupplier;
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; Optional&amp;lt;Supplier&amp;lt;Processor&amp;gt;&amp;gt; processorSupplier;
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; Optional&amp;lt;Endpoint&amp;gt; endpoint;
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; Optional&amp;lt;Endpoint&amp;gt; defaultEndpoint;
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;int&lt;/span&gt; maximumCacheSize;
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; eventNotifierEnabled;
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;volatile&lt;/span&gt; ProducerTemplate template;

...&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16543374" author="mario.papandrea" created="Fri, 13 Jul 2018 15:57:13 +0000"  >&lt;p&gt;i suggest also to remove the singleton from the camel-spring-boot-starter cause is misleading.&#160;&lt;/p&gt;

&lt;p&gt;Or maybe&#160; the scope of the bean can be changed to be Request Scoped&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@Scope(&lt;span class=&quot;code-quote&quot;&gt;&quot;request&quot;&lt;/span&gt;) 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;. But I &apos;m not sure it will do the job..&lt;/p&gt;</comment>
                            <comment id="16543425" author="neildrummonddorado" created="Fri, 13 Jul 2018 16:46:42 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=mario.papandrea&quot; class=&quot;user-hover&quot; rel=&quot;mario.papandrea&quot;&gt;mario.papandrea&lt;/a&gt; I don&apos;t think that will fix the issue.&lt;/p&gt;

&lt;p&gt;Consider the case of a service that injects &lt;tt&gt;FluentProducerTemplate&lt;/tt&gt;:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@Service
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;MyService {

    @Inject
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; FluentProducerTemplate fluentProducerTemplate

    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void useProducerTemplate() {
        ....
    }
}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;In this case, if &lt;tt&gt;useProducerTemplate()&lt;/tt&gt; is called from multiple threads, and it uses the &lt;tt&gt;fluentProducerTemplate&lt;/tt&gt;, then even if you give it prototype scope, some instances may still be used in a multithreaded way, and may still run into this issue.&#160; (It might make this happen less often, and fix it in some cases, but not in all cases).&lt;/p&gt;

&lt;p&gt;I think any proper solution that doesn&apos;t break the API of &lt;tt&gt;FluentProducerTemplate&lt;/tt&gt;&#160;will need &lt;tt&gt;DefaultFluentProducerTemplate&lt;/tt&gt;&#160;to be a proper thread-safe class, such that a single instance can be used in multiple threads at the same time.&lt;/p&gt;

&lt;p&gt;Right now, because &lt;tt&gt;DefaultFluentProducerTemplate&lt;/tt&gt; implements &lt;tt&gt;FluentProducerTemplate&lt;/tt&gt;, it really ought to be thread-safe, as is guaranteed in the javadocs of the &lt;tt&gt;FluentProducerTemplate&lt;/tt&gt; interface.&lt;/p&gt;</comment>
                            <comment id="16543618" author="mario.papandrea" created="Fri, 13 Jul 2018 19:29:00 +0000"  >&lt;p&gt;Ah yes sure, sorry! I was hoping exists some scope crating a new instance for each call, but is not like this. Anyway my suggestion to remove from the camel-spring-boot-starter configuration as a singleton is still valid. It shouldn&apos;t be used that way and the fact that you can find it in the spring context available for injection is error prone. This class must be instantiated each time is used so there is no need to be provided by the container&lt;/p&gt;</comment>
                            <comment id="16554613" author="lucas_" created="Tue, 24 Jul 2018 18:12:58 +0000"  >&lt;blockquote&gt;&lt;p&gt;So I just add a comment that we need treat FluentProducerTemplate as a Builder.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=njiang&quot; class=&quot;user-hover&quot; rel=&quot;njiang&quot;&gt;njiang&lt;/a&gt; I kind of feel like this is not enough... If we want to avoid further confusion and potential production issues (our case) I think the class should be either made thread-safe for all operations &lt;b&gt;or&lt;/b&gt;&#160;**it should not be possible to use it as a&#160;&lt;em&gt;ProducerTemplate&lt;/em&gt;&#160;(and don&apos;t create a singleton of this class as part of spring-boot-starter).&lt;/p&gt;</comment>
                            <comment id="16559524" author="njiang" created="Fri, 27 Jul 2018 10:07:55 +0000"  >&lt;p&gt;If we set the property to be thread local, we can make it thread-safe, but it may introduce some memory leak if we don&apos;t use it rightly.&lt;/p&gt;</comment>
                            <comment id="16572837" author="githubbot" created="Wed, 8 Aug 2018 08:00:29 +0000"  >&lt;p&gt;davsclaus opened a new pull request #2459:  &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12638&quot; title=&quot;DefaultFluentProducerTemplate is not thread safe&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12638&quot;&gt;&lt;del&gt;CAMEL-12638&lt;/del&gt;&lt;/a&gt;: FluentProducerTemplate should be thread-safe&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/camel/pull/2459&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2459&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16572838" author="githubbot" created="Wed, 8 Aug 2018 08:00:30 +0000"  >&lt;p&gt;GitHub user davsclaus opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/2459&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2459&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;     &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12638&quot; title=&quot;DefaultFluentProducerTemplate is not thread safe&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12638&quot;&gt;&lt;del&gt;CAMEL-12638&lt;/del&gt;&lt;/a&gt;: FluentProducerTemplate should be thread-safe&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/apache/camel&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel&lt;/a&gt; camel-12638&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/2459.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2459.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #2459&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit afedbc78afde861075ec218e50eaff12e2b9c7fc&lt;br/&gt;
Author: Claus Ibsen &amp;lt;claus.ibsen@...&amp;gt;&lt;br/&gt;
Date:   2018-08-08T07:57:57Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12638&quot; title=&quot;DefaultFluentProducerTemplate is not thread safe&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12638&quot;&gt;&lt;del&gt;CAMEL-12638&lt;/del&gt;&lt;/a&gt;: FluentProducerTemplate should be thread-safe.&lt;/p&gt;

&lt;p&gt;commit efc0e955139565f49f3f6ffd357ba78fa288efcc&lt;br/&gt;
Author: Claus Ibsen &amp;lt;claus.ibsen@...&amp;gt;&lt;br/&gt;
Date:   2018-08-08T07:59:46Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12638&quot; title=&quot;DefaultFluentProducerTemplate is not thread safe&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12638&quot;&gt;&lt;del&gt;CAMEL-12638&lt;/del&gt;&lt;/a&gt;: FluentProducerTemplate should be thread-safe.&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16572839" author="davsclaus" created="Wed, 8 Aug 2018 08:00:43 +0000"  >&lt;p&gt;I created a PR with a potential fix&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/camel/pull/2459&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2459&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16573100" author="githubbot" created="Wed, 8 Aug 2018 11:58:01 +0000"  >&lt;p&gt;davsclaus closed pull request #2459:  &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12638&quot; title=&quot;DefaultFluentProducerTemplate is not thread safe&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12638&quot;&gt;&lt;del&gt;CAMEL-12638&lt;/del&gt;&lt;/a&gt;: FluentProducerTemplate should be thread-safe&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/camel/pull/2459&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2459&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16573101" author="githubbot" created="Wed, 8 Aug 2018 11:58:02 +0000"  >&lt;p&gt;Github user davsclaus closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/2459&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2459&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16573107" author="davsclaus" created="Wed, 8 Aug 2018 12:01:12 +0000"  >&lt;p&gt;Thanks for reporting&lt;/p&gt;</comment>
                            <comment id="16573192" author="lucas_" created="Wed, 8 Aug 2018 13:01:16 +0000"  >&lt;p&gt;The fix looks good to me, thank you!&lt;/p&gt;</comment>
                            <comment id="17044445" author="neffez" created="Tue, 25 Feb 2020 13:41:10 +0000"  >&lt;p&gt;We are using Camel 2.24.2 and the FluentProducerTemplate is definitely still not thread-safe (using withExchange()). Should I create a new bug ticket?&lt;/p&gt;</comment>
                            <comment id="17044587" author="davsclaus" created="Tue, 25 Feb 2020 15:36:26 +0000"  >&lt;p&gt;Try with latest 2.25.x release. Or 3.x if possible&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12931349" name="image-2018-07-12-17-58-09-225.png" size="149241" author="mario.papandrea" created="Thu, 12 Jul 2018 15:58:09 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 38 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3vrfz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>