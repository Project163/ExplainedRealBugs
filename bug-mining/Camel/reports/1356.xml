<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 09:42:54 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-3713] Duplicate mail attachment names breaks the Message.getAttachments() interface contract</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-3713</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;If the camel-mail component consumes a Multipart email message that contains two parts with the same filename, subsequent calls to &lt;tt&gt;DataHandler dh = Message.getAttachments().get(&quot;filename&quot;)&lt;/tt&gt; result in a ClassCastException.  This occurs because &lt;tt&gt;MailBinding.extractAttachmentsFromMultipart()&lt;/tt&gt; calls &lt;tt&gt;CollectionHelper.appendValue(map, fileName, part.getDataHandler())&lt;/tt&gt; to add an attachment to the Message attachments map.  If appendValue is passed a duplicate key, it converts the map value to an ArrayList and adds the existing value and the new value to the list.  The result is a Map that contains a mix of &amp;lt;String,DataSource&amp;gt; and &amp;lt;String,ArrayList&amp;gt;.&lt;/p&gt;

&lt;p&gt;Fix is to NOT use CollectionHelper and to check for duplicate keys prior to adding an attachment.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Mac OSX 10.6.6&lt;br/&gt;
java version &quot;1.6.0_22&quot;&lt;br/&gt;
Java(TM) SE Runtime Environment (build 1.6.0_22-b04-307-10M3261)&lt;br/&gt;
Java HotSpot(TM) 64-Bit Server VM (build 17.1-b03-307, mixed mode)&lt;/p&gt;</environment>
        <key id="12499544">CAMEL-3713</key>
            <summary>Duplicate mail attachment names breaks the Message.getAttachments() interface contract</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hadrian">Hadrian Zbarcea</assignee>
                                    <reporter username="pegli">Paul Mietz Egli</reporter>
                        <labels>
                    </labels>
                <created>Wed, 23 Feb 2011 23:46:19 +0000</created>
                <updated>Tue, 25 Oct 2011 11:35:45 +0000</updated>
                            <resolved>Thu, 24 Feb 2011 03:41:57 +0000</resolved>
                                    <version>2.6.0</version>
                                    <fixVersion>2.7.0</fixVersion>
                                    <component>camel-mail</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12998618" author="pegli" created="Wed, 23 Feb 2011 23:48:15 +0000"  >&lt;p&gt;patch against trunk that fixes &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-3713&quot; title=&quot;Duplicate mail attachment names breaks the Message.getAttachments() interface contract&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-3713&quot;&gt;&lt;del&gt;CAMEL-3713&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="12998685" author="hadrian" created="Thu, 24 Feb 2011 03:41:57 +0000"  >&lt;p&gt;Patch applied in r1074033 with thanks to Paul Mietz Egli.&lt;br/&gt;
Also added a minor checkstyle fix in r1074034.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12471788" name="camel-3713.diff" size="5535" author="pegli" created="Wed, 23 Feb 2011 23:48:15 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>37854</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 39 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i01wfr:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9024</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>