<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:10:27 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-9035] unbind smpp connection bug </title>
                <link>https://issues.apache.org/jira/browse/CAMEL-9035</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;Suppose SMSC allowed one connection to client and due to any reason if session.unbindAndClose failed it will set session to null and dont retry to unbind. &lt;/p&gt;

&lt;p&gt;Connection/Session will remain open on SMSC till its TransactionTimeOut, mostly SMSc Admin set it to 5 to 10 mins. &lt;/p&gt;

&lt;p&gt;Following are snippet of org.apache.camel.component.smpp.SmppProducer and details are like &lt;/p&gt;

&lt;p&gt;1- if for any reason Camel try to unbind connection and it got failed below code print log and set session=null in both success/fail cases. &lt;br/&gt;
2- After sending unbind it will try to reconnect. &lt;br/&gt;
3- As SMSc allowed 1 connection which was not unbinded successfull it will not allowed second connection so reconnect will get failed. &lt;br/&gt;
4- Camel call closesession on reconnection failure and will verify if session != null, as session is already null so this code will not send unbind again and apache camel will not able to get connection from SMSc until timeout happen on SMSc and this will results in 10 mins outage. &lt;/p&gt;

&lt;p&gt;If we change closeSession() like below &lt;/p&gt;

&lt;p&gt;current: &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; void  closeSession() { 
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (session != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) { 
            session.removeSessionStateListener(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.internalSessionStateListener); 
            &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; { 
                &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.sleep(1000); 
                session.unbindAndClose(); 
            } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Exception e) { 
              LOG.warn(&lt;span class=&quot;code-quote&quot;&gt;&quot;Could not close session &quot;&lt;/span&gt; + session); 
            } 

            session = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;; 

        } 

    } 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Suggested: &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; void  closeSession() { 
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (session != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) { 
            session.removeSessionStateListener(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.internalSessionStateListener); 
            &lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; { 
                &lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.sleep(1000); 
                session.unbindAndClose(); 
                session = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;; &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; we put here then it will retry &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; unbind 
&lt;/span&gt;            } &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Exception e) { 
              LOG.warn(&lt;span class=&quot;code-quote&quot;&gt;&quot;Could not close session &quot;&lt;/span&gt; + session); 
            } 
             session = &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;; &lt;span class=&quot;code-comment&quot;&gt;// remove his line 
&lt;/span&gt;        } 
    } 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12850024">CAMEL-9035</key>
            <summary>unbind smpp connection bug </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="imranrazakhan">imran raza khan</reporter>
                        <labels>
                            <label>patch</label>
                    </labels>
                <created>Wed, 29 Jul 2015 19:24:16 +0000</created>
                <updated>Fri, 31 Jul 2015 11:07:11 +0000</updated>
                            <resolved>Fri, 31 Jul 2015 11:07:11 +0000</resolved>
                                    <version>2.14.0</version>
                    <version>2.15.2</version>
                                    <fixVersion>2.15.3</fixVersion>
                    <fixVersion>2.16.0</fixVersion>
                                    <component>camel-smpp</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="14649087" author="davsclaus" created="Fri, 31 Jul 2015 11:07:11 +0000"  >&lt;p&gt;Thanks for the patch.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 16 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2i31r:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>