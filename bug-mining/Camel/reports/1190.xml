<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 09:40:40 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-3151] NullPointerException in CXF Producer if no type converter is available</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-3151</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;When I am trying to send the content of a file to an CXF endpoint in PAYLOAD format, I get a NullPointerException in line 603 of the CXFEndpoint class (in the current trunk). The offending coding is:&lt;br/&gt;
                CxfPayload&amp;lt;?&amp;gt; payload = (CxfPayload&amp;lt;?&amp;gt;)params&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt;;&lt;br/&gt;
                List&amp;lt;Element&amp;gt; elements = payload.getBody();&lt;/p&gt;

&lt;p&gt;The params are set in line 282 of the CxfProducer class:&lt;br/&gt;
            params = new Object&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt;;&lt;br/&gt;
            // TODO: maybe it should be mandatory body?&lt;br/&gt;
            params&lt;span class=&quot;error&quot;&gt;&amp;#91;0&amp;#93;&lt;/span&gt; = exchange.getIn().getBody(CxfPayload.class);&lt;/p&gt;

&lt;p&gt;The fix is most probably trivial (change to getMandatoryBody()) and add a throws InvalidPayloadException to the getParams() method of CxfProducer). After this is fixed (the same for the MESSAGE format two lines lower), the example will still not work, but I get a meaningful error message saying that there is no type converter between GenericFile and CxfPayload.&lt;/p&gt;

&lt;p&gt;One could argue, that under some circumstances null payloads may be legal (I just don&apos;t see any), but in this case the CxfEndpoint class would have to be modified to avoid the NullPointerException. As the coding is a missing converter or a null payload will trigger NullPointerExceptions for CxfEndpoints unconditionally.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12487855">CAMEL-3151</key>
            <summary>NullPointerException in CXF Producer if no type converter is available</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="siano">Stephan Siano</reporter>
                        <labels>
                    </labels>
                <created>Thu, 23 Sep 2010 10:57:23 +0000</created>
                <updated>Sun, 24 Apr 2011 09:57:33 +0000</updated>
                            <resolved>Sun, 3 Oct 2010 11:07:58 +0000</resolved>
                                                    <fixVersion>2.5.0</fixVersion>
                                    <component>camel-cxf</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12956864" author="davsclaus" created="Sat, 25 Sep 2010 11:52:25 +0000"  >&lt;p&gt;Can you attach a small unit test which demonstrates this?&lt;/p&gt;

&lt;p&gt;And what content in the message do you send?&lt;/p&gt;</comment>
                            <comment id="12956924" author="siano" created="Mon, 27 Sep 2010 10:55:58 +0000"  >&lt;p&gt;Actually it is an issue in error handling, so I don&apos;t really know how to write a unit test for that. &lt;/p&gt;

&lt;p&gt;Maybe it helps explaining what I actually do:&lt;br/&gt;
I have a beans.xml that looks like that:&lt;/p&gt;

&lt;p&gt;&amp;lt;?xml version=&quot;1.0&quot;?&amp;gt;&lt;br/&gt;
&amp;lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;&lt;br/&gt;
	   xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&lt;br/&gt;
	   xmlns:camel=&quot;http://camel.apache.org/schema/spring&quot;&lt;br/&gt;
	   xmlns:cxf=&quot;http://camel.apache.org/schema/cxf&quot;&lt;br/&gt;
	   xmlns:http-conf=&quot;http://cxf.apache.org/transports/http/configuration&quot;&lt;br/&gt;
	   xmlns:sample=&quot;http://services.samples/xsd&quot;&lt;br/&gt;
	   xsi:schemaLocation=&quot;&lt;br/&gt;
         &lt;a href=&quot;http://www.springframework.org/schema/beans&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.springframework.org/schema/beans&lt;/a&gt;&lt;br/&gt;
         &lt;a href=&quot;http://www.springframework.org/schema/beans/spring-beans-2.0.xsd&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.springframework.org/schema/beans/spring-beans-2.0.xsd&lt;/a&gt;&lt;br/&gt;
         &lt;a href=&quot;http://cxf.apache.org/transports/http/configuration&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://cxf.apache.org/transports/http/configuration&lt;/a&gt;&lt;br/&gt;
         &lt;a href=&quot;http://cxf.apache.org/schemas/configuration/http-conf.xsd&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://cxf.apache.org/schemas/configuration/http-conf.xsd&lt;/a&gt;&lt;br/&gt;
         &lt;a href=&quot;http://camel.apache.org/schema/cxf&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://camel.apache.org/schema/cxf&lt;/a&gt;&lt;br/&gt;
         &lt;a href=&quot;http://camel.apache.org/schema/cxf/camel-cxf.xsd&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://camel.apache.org/schema/cxf/camel-cxf.xsd&lt;/a&gt;&lt;br/&gt;
         &lt;a href=&quot;http://camel.apache.org/schema/spring&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://camel.apache.org/schema/spring&lt;/a&gt;&lt;br/&gt;
         &lt;a href=&quot;http://camel.apache.org/schema/spring/camel-spring.xsd&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://camel.apache.org/schema/spring/camel-spring.xsd&lt;/a&gt;&quot;&amp;gt;&lt;/p&gt;

&lt;p&gt;	&amp;lt;import resource=&quot;classpath:META-INF/cxf/cxf.xml&quot; /&amp;gt;&lt;br/&gt;
	&amp;lt;import resource=&quot;classpath:META-INF/cxf/cxf-extension-soap.xml&quot; /&amp;gt;&lt;br/&gt;
	&amp;lt;import resource=&quot;classpath:META-INF/cxf/cxf-extension-http.xml&quot;/&amp;gt;  &lt;/p&gt;

&lt;p&gt;	&amp;lt;cxf:cxfEndpoint id=&quot;serviceEndpoint&quot;&lt;br/&gt;
        		     address=&quot;http://myhost:8080/MockServices/EchoService&quot;&lt;br/&gt;
        		     wsdlURL=&quot;EchoService.wsdl&quot;&lt;br/&gt;
        		     endpointName=&quot;sample:EchoServicePort&quot; &lt;br/&gt;
        		     serviceName=&quot;sample:EchoService&quot;&amp;gt;&lt;br/&gt;
		&amp;lt;cxf:properties&amp;gt;&lt;br/&gt;
			&amp;lt;entry key=&quot;dataFormat&quot; value=&quot;PAYLOAD&quot; /&amp;gt;&lt;br/&gt;
		&amp;lt;/cxf:properties&amp;gt;&lt;br/&gt;
	&amp;lt;/cxf:cxfEndpoint&amp;gt;&lt;/p&gt;

&lt;p&gt;	&amp;lt;camel:camelContext&amp;gt;&lt;br/&gt;
		&amp;lt;camel:route&amp;gt;&lt;br/&gt;
			&amp;lt;camel:from uri=&quot;file://c:/temp/camel/poller&quot; /&amp;gt;&lt;br/&gt;
			&amp;lt;!-- The wsdl contains multiple operations, so we select one --&amp;gt;&lt;br/&gt;
			&amp;lt;camel:setHeader headerName=&quot;operationName&quot;&amp;gt;&lt;br/&gt;
				&amp;lt;camel:constant&amp;gt;buyStocksOperation1K&amp;lt;/camel:constant&amp;gt;&lt;br/&gt;
			&amp;lt;/camel:setHeader&amp;gt;	&lt;br/&gt;
			&amp;lt;camel:to uri=&quot;cxf:bean:serviceEndpoint&quot; /&amp;gt;&lt;br/&gt;
		&amp;lt;/camel:route&amp;gt;&lt;br/&gt;
	&amp;lt;/camel:camelContext&amp;gt;&lt;br/&gt;
&amp;lt;/beans&amp;gt;&lt;/p&gt;

&lt;p&gt;You can use any wsdl for that (even for a webservice that does not exist, because it will not get called). Then put a xml-file matching the request type of the endpoint into the /temp/camel/poller directory. You will encounter a NullPointerException. After the getBody() statements are replaced by getMandatoryBody() statements, the scenario does still not work, but now you get a (IMO much better) TypeConversionException that indicates the reason for the issue.&lt;/p&gt;

&lt;p&gt;Mid-term it might be a good idea to have a TypeConverter for CxfPayload type messages. If that is there, the fix will not show up anymore in this scenario (but maybe in other scenarios where no type converter is available).&lt;/p&gt;</comment>
                            <comment id="12957090" author="davsclaus" created="Sun, 3 Oct 2010 10:31:25 +0000"  >&lt;p&gt;So the file contains the XML for the SOAP message? You can use the SOAP data format to transform that file into SOAP.&lt;/p&gt;

&lt;p&gt;But yes I wonder if the camel-cxf can have a type converter which can do that as well?&lt;/p&gt;</comment>
                            <comment id="12957078" author="davsclaus" created="Sun, 3 Oct 2010 11:07:58 +0000"  >&lt;p&gt;trunk: 1003946.&lt;/p&gt;

&lt;p&gt;Now uses mandatory body.&lt;/p&gt;</comment>
                            <comment id="12957084" author="siano" created="Mon, 4 Oct 2010 07:21:21 +0000"  >&lt;p&gt;The file contains the XML for the Payload of the SOAP message (without the SOAP Envelope). If the file did contain the whole SOAP message (with envelope and all) this would be MESSAGE data format and that works.&lt;/p&gt;

&lt;p&gt;Writing a type converter for camel-cxf is pretty easy. The CXFPayload contains two lists, one for headers, that can remain empty for this use case and one for the body, which is a list of DOM elements, so it&apos;s actually pretty easy to have a type converter between NodeList, Document or Element and CXFPayload. This can be glued together with other type converters by a default converter.&lt;/p&gt;

&lt;p&gt;I have already done so (about 100 lines of code), however before I can provide the code we need to undergo some outbound open source process, which will take some weeks, sorry for that.&lt;/p&gt;

&lt;p&gt;Nevertheless, I think this fix here is useful, even if these type converters where there, because there could still be some StrangeMessageWithoutConverters and it is helpful to get the error message that there is no type converter for that instead of a NullPointerException.&lt;/p&gt;</comment>
                            <comment id="13023842" author="davsclaus" created="Sun, 24 Apr 2011 09:57:33 +0000"  >&lt;p&gt;Closing all resolved tickets from 2010 or older&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>76329</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 31 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i01sz3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>8463</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>