<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:10:52 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-7921] The soapAction HTTP header is not correctly set when running the CXF client in POJO mode using Camel</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-7921</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;The soapAction HTTP header is not correctly set when running the CXF client in POJO mode using Camel.&lt;/p&gt;

&lt;p&gt;The root cause seems to be that the service name from the generated service class differs from the service name in the WSDL.&lt;/p&gt;

&lt;p&gt;For me it is unclear if this should be an issue with the cxf-codegen-plugin or with the Camel CXF component. When running the CXF client without Camel then the soapAction HTTP header is correctly set and the issue does not occur. So that&apos;s why I first report the bug with Camel.&lt;/p&gt;

&lt;p&gt;Possible workarounds I found are:&lt;br/&gt;
1) Explicitly specifying the correct serviceName as CXF endpoint attribute.&lt;br/&gt;
2) Explicitly setting the soapAction header in the Camel route prior to calling the CXF endpoint.&lt;/p&gt;

&lt;p&gt;Both workarounds are not desirable, because they are easily forgotten and CXF does not throw an exception when you do. According to the basic profile v1.0 the soapAction HTTP header must match the value in the WSDL and receiving SOAP servers may throw a SOAP Fault if it doesn&apos;t. Some SOAP servers do throw an exception when the soapAction HTTP header is invalid. Resulting in communication failures between some SOAP client/server combinations.&lt;/p&gt;

&lt;p&gt;I created a test project to verify the above behaviour with the following tests:&lt;br/&gt;
1) CXF in PAYLOAD with Camel. =&amp;gt; OK&lt;br/&gt;
2) CXF in POJO mode without Camel =&amp;gt; OK&lt;br/&gt;
3) CXF in POJO mode with Camel =&amp;gt; &lt;b&gt;NOT OK&lt;/b&gt;&lt;br/&gt;
4) CXF in POJO mode with service name set =&amp;gt; OK&lt;br/&gt;
5) CXF in POJO mode with soapAction set =&amp;gt; OK&lt;/p&gt;

&lt;p&gt;I run the test project with multiple combinations of Camel and CXF. The following combinations I have tried:&lt;br/&gt;
1) Camel 2.12.3 and CXF 2.7.10 (Apache Servicemix 5.0.0 setup)&lt;br/&gt;
2) Camel 2.12.4 and CXF 2.7.11 (Apache Servicemix 5.0.5 setup)&lt;br/&gt;
3) Camel 2.13.2 and CXF 2.7.11 (Apache Servicemix 5.1.3 and 5.3.0 setup)&lt;br/&gt;
4) Camel 2.14.0 and CXF 3.0.1&lt;/p&gt;

&lt;p&gt;In the example project the mismatch occurs between an annotation in the generated service class:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;@WebService(targetNamespace = &lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//finalist.nl/ai/&quot;&lt;/span&gt;, name = &lt;span class=&quot;code-quote&quot;&gt;&quot;ICamelCxfTestService&quot;&lt;/span&gt;)&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;and the definition of the service name in the WSDL:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;lt;wsdl:service name=&lt;span class=&quot;code-quote&quot;&gt;&quot;CamelCxfTestService&quot;&lt;/span&gt;&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12748569">CAMEL-7921</key>
            <summary>The soapAction HTTP header is not correctly set when running the CXF client in POJO mode using Camel</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ffang">Freeman Yue Fang</assignee>
                                    <reporter username="tonswieb">Ton Swieb</reporter>
                        <labels>
                    </labels>
                <created>Thu, 16 Oct 2014 11:30:49 +0000</created>
                <updated>Wed, 9 Sep 2015 14:33:37 +0000</updated>
                            <resolved>Wed, 9 Sep 2015 05:26:49 +0000</resolved>
                                    <version>2.12.3</version>
                    <version>2.12.4</version>
                    <version>2.13.2</version>
                    <version>2.14.0</version>
                                    <fixVersion>2.16.0</fixVersion>
                    <fixVersion>2.14.4</fixVersion>
                    <fixVersion>2.15.4</fixVersion>
                                    <component>camel-cxf</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="14174173" author="tonswieb" created="Thu, 16 Oct 2014 20:08:37 +0000"  >&lt;p&gt;It looks like the parameter wsdlURL is causing the problem.&lt;/p&gt;

&lt;p&gt;When using the parameter wsdlURL in the CXF endpoint URI the soapAction is not set:&lt;br/&gt;
cxf:&lt;a href=&quot;http://localhost:8080?&amp;amp;serviceClass=nl.finalist.ai.ICamelCxfTestService&amp;amp;wsdlURL=CamelCxfTestService.wsdl&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080?&amp;amp;serviceClass=nl.finalist.ai.ICamelCxfTestService&amp;amp;wsdlURL=CamelCxfTestService.wsdl&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;When leaving it out the soapAction is correctly set:&lt;br/&gt;
cxf:&lt;a href=&quot;http://localhost:8080?&amp;amp;serviceClass=nl.finalist.ai.ICamelCxfTestService&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:8080?&amp;amp;serviceClass=nl.finalist.ai.ICamelCxfTestService&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14621852" author="davsclaus" created="Fri, 10 Jul 2015 07:00:20 +0000"  >&lt;p&gt;I wonder if its when using wsdlURL the SoapAction is inside that wsdl file and that would require logic to parse it and find it to set it.&lt;/p&gt;

&lt;p&gt;And any chance to try with latest code, its been a long time since this was reported?&lt;/p&gt;</comment>
                            <comment id="14701232" author="tonswieb" created="Tue, 18 Aug 2015 13:20:16 +0000"  >&lt;p&gt;I tried with latest code (Camel 2.15.2 and CXF 3.0.4) and bug still exists.&lt;br/&gt;
Can be easily reproduced by changing the Camel en CXF version in the POM of the attached ZIP and run it. One test case will fail.&lt;/p&gt;</comment>
                            <comment id="14702988" author="ay" created="Wed, 19 Aug 2015 13:13:33 +0000"  >&lt;p&gt;This has likely nothing to do with the mode itself (i.e. PAYLOAD or POJO) but rather has something do with the way in which the endpoint is configured. Somehow, when the endpoint is configured over its URL with both WSDL and SEI set as in your POJO case, the action value is not correctly extracted. So, you will get the same problem when you add WSDL in your PAYLOAD case and you won&apos;t get the problem when you remove either WSDL or SEI from your POJO case.&lt;/p&gt;

&lt;p&gt;Does someone have a quick idea?&lt;/p&gt;</comment>
                            <comment id="14732349" author="ffang" created="Sun, 6 Sep 2015 11:13:26 +0000"  >&lt;p&gt;The code in the generated SEI &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;@WebService(targetNamespace = &lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//finalist.nl/ai/&quot;&lt;/span&gt;, name = &lt;span class=&quot;code-quote&quot;&gt;&quot;ICamelCxfTestService&quot;&lt;/span&gt;)&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;is expected behavior, the @WebService annotation has another attribute serviceName which should be equal with wsdl:service@name, the attribute serviceName normally should be in the impl class.&lt;/p&gt;

&lt;p&gt;However for the cxf:producer endpoint the serviceClass specified must be an interface so that there&apos;s no serviceName attribute in the @WebService annotation at all.  And the current logic is that if can&apos;t find the serviceName, use the convention that the SEI classname + &quot;Service&quot;, as the SEI classname is same as the wsdl:portType@name from the wsdl, so in your wsdl the wsdl:service name should be wsdl:portType name + &quot;Service&quot;. Otherwise you really need specify the serviceName in the cxf:producer endpoint URI.&lt;/p&gt;
</comment>
                            <comment id="14734689" author="tonswieb" created="Tue, 8 Sep 2015 11:51:26 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ffang&quot; class=&quot;user-hover&quot; rel=&quot;ffang&quot;&gt;ffang&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;Thanks for looking into this.&lt;/p&gt;

&lt;p&gt;Beside from any WSDL conventions I believe the WSDL is valid and is WS-I compliant. When using a valid WSDL I would expect one of the following:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;A valid SOAP implementation is generated.&lt;/li&gt;
	&lt;li&gt;An excpetion is thrown stating that a SOAP implementation cannot be generated due to missing properties.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Generating a SOAP implementation which is relying on naming conventions in the WSDL does not sounds like a very good plan to me. It would require me to either always set the servicename attribute explicitly to be on the safe side or modify the WSDL to adhere to the naming convention. In case of a missing servicename I think it would be better for the Camel Producer to fail fast instead of trying to make the best of it.&lt;/p&gt;</comment>
                            <comment id="14736201" author="ffang" created="Wed, 9 Sep 2015 05:18:14 +0000"  >&lt;p&gt;if not specify the service name and if the wsdlUrl is available, we can parse the wsdl to see if there is only one service in it, if so we can set the only service to avoid such ambiguity&lt;/p&gt;</comment>
                            <comment id="14736207" author="ffang" created="Wed, 9 Sep 2015 05:26:49 +0000"  >&lt;p&gt;commit fix&lt;br/&gt;
&lt;a href=&quot;http://git-wip-us.apache.org/repos/asf/camel/commit/843ef83f&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://git-wip-us.apache.org/repos/asf/camel/commit/843ef83f&lt;/a&gt; for camel-2.14.x branch&lt;br/&gt;
&lt;a href=&quot;http://git-wip-us.apache.org/repos/asf/camel/commit/63234bd1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://git-wip-us.apache.org/repos/asf/camel/commit/63234bd1&lt;/a&gt; for camel-2.15.x branch&lt;br/&gt;
&lt;a href=&quot;http://git-wip-us.apache.org/repos/asf/camel/commit/8c36915e&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://git-wip-us.apache.org/repos/asf/camel/commit/8c36915e&lt;/a&gt; for master&lt;/p&gt;</comment>
                            <comment id="14736939" author="tonswieb" created="Wed, 9 Sep 2015 14:33:37 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ffang&quot; class=&quot;user-hover&quot; rel=&quot;ffang&quot;&gt;ffang&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;Thanks for fixing this.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12675261" name="soapActionTest.zip" size="6783" author="tonswieb" created="Thu, 16 Oct 2014 11:33:14 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 10 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i218s7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>