<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:24:17 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-11457] camel-atomix - No new leader when all nodes are killed forcefully</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-11457</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;I&apos;m testing the leader service with the following scenario.&lt;/p&gt;

&lt;p&gt;Client mode with an external bootstrap service on Openshift. Using a spring-boot application.&lt;br/&gt;
The service configuration is:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;AtomixClusterClientService service = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; AtomixClusterClientService();
service.setId(InetAddress.getLocalHost().getHostName());
service.setNodes(Collections.singletonList(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Address(&lt;span class=&quot;code-quote&quot;&gt;&quot;atomix-boot-node&quot;&lt;/span&gt;, 8700)));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Steps:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;I start 3 pods of the application, one is the leader.&lt;/li&gt;
	&lt;li&gt;Once started, I kill forcefully all three pods (calling &quot;Runtime.getRuntime().halt(1)&quot; from the JVM code) one after the other at short distance (few seconds)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;When all three pods become available again, the &quot;leadershipChanged&quot; callback is not called in any of the pods (waited &amp;gt; 1 hour). If I restart one pod after some time, that one become the leader. The other two pods receive the notification that there&apos;s a new leader.&lt;/p&gt;

&lt;p&gt;It seems that a timeout occurs, so that a new leader can be determined upon restart, but nobody participate in the election if pods are started before the timeout.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=lb&quot; class=&quot;user-hover&quot; rel=&quot;lb&quot;&gt;lb&lt;/a&gt; any idea?&lt;/p&gt;</description>
                <environment></environment>
        <key id="13082583">CAMEL-11457</key>
            <summary>camel-atomix - No new leader when all nodes are killed forcefully</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="2">Won&apos;t Fix</resolution>
                                        <assignee username="lb">Luca Burgazzoli</assignee>
                                    <reporter username="nferraro">Nicola Ferraro</reporter>
                        <labels>
                    </labels>
                <created>Mon, 26 Jun 2017 17:31:02 +0000</created>
                <updated>Tue, 12 Sep 2017 06:59:59 +0000</updated>
                            <resolved>Tue, 12 Sep 2017 06:59:59 +0000</resolved>
                                                    <fixVersion>2.20.0</fixVersion>
                                    <component>camel-atomix</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16064278" author="lb" created="Tue, 27 Jun 2017 05:10:20 +0000"  >&lt;p&gt;I need to digg into this a little bit more but the client nodes are &quot;persistent nodes&quot; which requires them to explicit leave the cluster so halt may mess things up.&lt;/p&gt;</comment>
                            <comment id="16064304" author="lb" created="Tue, 27 Jun 2017 05:40:52 +0000"  >&lt;p&gt;Yeah, looks like an issue with the persistent member which can be reproduced outside camel.&lt;br/&gt;
Will add an option to use ephemeral members so we have a workaround till I found a way to properly recover from this.&lt;/p&gt;</comment>
                            <comment id="16162577" author="lb" created="Tue, 12 Sep 2017 06:59:59 +0000"  >&lt;p&gt;Won&apos;t be fixed upstream, should be fixed with Atomix 2.0&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 10 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3gqu7:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>