<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:57:48 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-18470] camel-rabbitmq - skipQueueDeclare  option is not working in 3.18.1. was working in 3.14.x</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-18470</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;we are using camel-rabbitmq&#160;&lt;br/&gt;
we upgraded to 3.18.1 from 3.14.2 recently.&lt;/p&gt;

&lt;p&gt;to send a message to rabbitmq queue we using camel producer template.&lt;/p&gt;

&lt;p&gt;In our endpoint uri for rabbitmq, we set skipQueueDeclare=true. by enabling this we donot need to declare queue name.&lt;/p&gt;

&lt;p&gt;after upgrade&#160; to 3.18.1 we are seeing below errors&#160; while sending message to rabbitmq&#160;&lt;/p&gt;

&lt;p&gt;Caused by: com.rabbitmq.client.ShutdownSignalException: channel error; protocol method: #method&amp;lt;channel.close&amp;gt;(reply-code=404, reply-text=NOT_FOUND - no queue &apos;1892359723&apos; in vhost &apos;myvhost&apos;, class-id=50, method-id=10)&lt;/p&gt;

&lt;p&gt;Ideally it should not take any queue name.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;More trace.&lt;/b&gt;&#160; in this trace we are seeing that it is trying to declare exchange and queue and then bind them. with skipQueueDeclare=true it should not happen i guess..&lt;/p&gt;




&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange[]&lt;/em&gt; &#160; &#160;at org.apache.camel.CamelExecutionException.wrapCamelExecutionException(CamelExecutionException.java:45)_ &#160; &#160;at org.apache.camel.support.ExchangeHelper.extractResultBody(ExchangeHelper.java:667)_ &#160; &#160;at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:591)_ &#160; &#160;at org.apache.camel.impl.engine.DefaultProducerTemplate.extractResultBody(DefaultProducerTemplate.java:587)_ &#160; &#160;at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeaders(DefaultProducerTemplate.java:313)_ &#160; &#160;at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeaders(DefaultProducerTemplate.java:305)_ &#160; &#160;at com.myapp.myrabbitq.queue.route.MessageSender.routeMessageToTopicNoQueue_aroundBody20(MessageSender.java:211)_ &#160; &#160;at com.myapp.myrabbitq.queue.route.MessageSender$AjcClosure21.run(MessageSender.java:1)_ &#160; &#160;at org.aspectj.runtime.reflect.JoinPointImpl.proceed(JoinPointImpl.java:167)_ &#160; &#160;at com.myapp.myrabbitq.log.LogAspect.aroundInternal(LogAspect.java:67)_ &#160; &#160;at com.myapp.myrabbitq.log.LogAspect.ajc$inlineAccessMethod$com_digitate_ignio_log_LogAspect$com_digitate_ignio_log_LogAspect$aroundInternal(LogAspect.java:1)_ &#160; &#160;at com.myapp.myrabbitq.log.LogAspect.around1(LogAspect.java:44)_ &#160; &#160;at com.myapp.myrabbitq.queue.route.MessageSender.routeMessageToTopicNoQueue(MessageSender.java:207)_ &#160; &#160;at com.myapp.myrabbitq.platform.workitem.route.WorkitemManagerProducer.lambda$1_aroundBody6(WorkitemManagerProducer.java:53)_ &#160; &#160;at com.myapp.myrabbitq.platform.workitem.route.WorkitemManagerProducer$AjcClosure7.run(WorkitemManagerProducer.java:1)_ &#160; &#160;at org.aspectj.runtime.reflect.JoinPointImpl.proceed(JoinPointImpl.java:167)_ &#160; &#160;at com.myapp.myrabbitq.log.LogAspect.aroundInternal(LogAspect.java:67)_ &#160; &#160;at com.myapp.myrabbitq.log.LogAspect.ajc$inlineAccessMethod$com_digitate_ignio_log_LogAspect$com_digitate_ignio_log_LogAspect$aroundInternal(LogAspect.java:1)_ &#160; &#160;at com.myapp.myrabbitq.log.LogAspect.around1(LogAspect.java:44)_ &#160; &#160;at com.myapp.myrabbitq.platform.workitem.route.WorkitemManagerProducer.lambda$1(WorkitemManagerProducer.java:47)_ &#160; &#160;at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)_ &#160; &#160;at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:177)_ &#160; &#160;at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1655)_ &#160; &#160;at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:484)_ &#160; &#160;at java.base/java.util.stream.ForEachOps$ForEachTask.compute(ForEachOps.java:290)_ &#160; &#160;at java.base/java.util.concurrent.CountedCompleter.exec(CountedCompleter.java:746)_ &#160; &#160;at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:290)_ &#160; &#160;at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1020)_ &#160; &#160;at java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1656)_ &#160; &#160;at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1594)_ &#160; &#160;at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:183)&lt;em&gt;Caused by: java.io.IOException: null&lt;/em&gt; &#160; &#160;at com.rabbitmq.client.impl.AMQChannel.wrap(AMQChannel.java:129)_ &#160; &#160;at com.rabbitmq.client.impl.AMQChannel.wrap(AMQChannel.java:125)_ &#160; &#160;at com.rabbitmq.client.impl.AMQChannel.exnWrappingRpc(AMQChannel.java:147)_ &#160; &#160;at com.rabbitmq.client.impl.ChannelN.queueDeclarePassive(ChannelN.java:1012)_ &#160; &#160;at com.rabbitmq.client.impl.recovery.AutorecoveringChannel.queueDeclarePassive(AutorecoveringChannel.java:366)_ &#160; &#160;at org.apache.camel.component.rabbitmq.RabbitMQDeclareSupport.passivelyDeclareExchangeAndQueueAndBindThem(RabbitMQDeclareSupport.java:165)_ &#160; &#160;at org.apache.camel.component.rabbitmq.RabbitMQDeclareSupport.declareAndBindExchangeWithQueue(RabbitMQDeclareSupport.java:63)_ &#160; &#160;at org.apache.camel.component.rabbitmq.RabbitMQDeclareSupport.declareAndBindExchangesAndQueuesUsing(RabbitMQDeclareSupport.java:36)_ &#160; &#160;at org.apache.camel.component.rabbitmq.RabbitMQEndpoint.declareExchangeAndQueue(RabbitMQEndpoint.java:257)_ &#160; &#160;at org.apache.camel.component.rabbitmq.RabbitMQProducer$1.doWithChannel(RabbitMQProducer.java:128)_ &#160; &#160;at org.apache.camel.component.rabbitmq.RabbitMQProducer$1.doWithChannel(RabbitMQProducer.java:125)_ &#160; &#160;at org.apache.camel.component.rabbitmq.RabbitMQProducer.execute(RabbitMQProducer.java:97)_ &#160; &#160;at org.apache.camel.component.rabbitmq.RabbitMQProducer.attemptDeclaration(RabbitMQProducer.java:125)_ &#160; &#160;at org.apache.camel.component.rabbitmq.RabbitMQProducer.execute(RabbitMQProducer.java:93)_ &#160; &#160;at org.apache.camel.component.rabbitmq.RabbitMQProducer.basicPublish(RabbitMQProducer.java:312)_ &#160; &#160;at org.apache.camel.component.rabbitmq.RabbitMQProducer.processInOnly(RabbitMQProducer.java:298)_ &#160; &#160;at org.apache.camel.component.rabbitmq.RabbitMQProducer.process(RabbitMQProducer.java:212)_ &#160; &#160;at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:214)_ &#160; &#160;at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:111)_ &#160; &#160;at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:83)_ &#160; &#160;at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:108)_ &#160; &#160;at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:199)_ &#160; &#160;at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176)_ &#160; &#160;at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172)_ &#160; &#160;at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:153)_ &#160; &#160;at org.apache.camel.impl.engine.DefaultProducerTemplate.sendBodyAndHeaders(DefaultProducerTemplate.java:311)_ &#160; &#160;... 26 common frames omitted_Caused by: com.rabbitmq.client.ShutdownSignalException: channel error; protocol method: #method&amp;lt;channel.close&amp;gt;(reply-code=404, reply-text=NOT_FOUND - no queue &apos;1892359723&apos; in vhost &apos;myvhost&apos;, class-id=50, method-id=10)&lt;/p&gt;</description>
                <environment></environment>
        <key id="13480277">CAMEL-18470</key>
            <summary>camel-rabbitmq - skipQueueDeclare  option is not working in 3.18.1. was working in 3.14.x</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="10008">Information Provided</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="devansharora68@gmail.com">Devansh Arora</reporter>
                        <labels>
                    </labels>
                <created>Tue, 6 Sep 2022 12:09:19 +0000</created>
                <updated>Wed, 21 Sep 2022 06:42:20 +0000</updated>
                            <resolved>Mon, 12 Sep 2022 10:17:04 +0000</resolved>
                                    <version>3.17.0</version>
                    <version>3.18.0</version>
                    <version>3.18.1</version>
                                    <fixVersion>3.17.0</fixVersion>
                                    <component>camel-rabbitmq</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17600744" author="davsclaus" created="Tue, 6 Sep 2022 12:17:32 +0000"  >&lt;p&gt;You should favour using camel-spring-rabbitmq as its a better component if you can&lt;/p&gt;</comment>
                            <comment id="17600747" author="devansharora68@gmail.com" created="Tue, 6 Sep 2022 12:21:26 +0000"  >&lt;p&gt;moving to camel-spring-rabbitmq is in our backlog. We faced some challenges while trying to shift to camel-spring-rabbitmq from camel-rabbitmq.&#160;&lt;br/&gt;
so we are still on camel-rabbitmq for now. we plan to move in future surely.&lt;/p&gt;</comment>
                            <comment id="17600758" author="davsclaus" created="Tue, 6 Sep 2022 12:57:27 +0000"  >&lt;p&gt;I wonder if you can test on latest 3.14.x too?&lt;/p&gt;

&lt;p&gt;As it would be good to narrow down which commits did the change to better understand why&lt;/p&gt;</comment>
                            <comment id="17600767" author="devansharora68@gmail.com" created="Tue, 6 Sep 2022 13:10:54 +0000"  >&lt;p&gt;ok will try&lt;/p&gt;</comment>
                            <comment id="17600848" author="devansharora68@gmail.com" created="Tue, 6 Sep 2022 15:53:41 +0000"  >&lt;p&gt;3.18.1 - not working&lt;br/&gt;
3.18.0 - not working&lt;br/&gt;
3.17.0 - not working&lt;br/&gt;
3.16.0 - working&lt;br/&gt;
3.15.0 - working&lt;br/&gt;
3.14.5 - working&lt;br/&gt;
3.14.2(our current in use version) - working&lt;/p&gt;</comment>
                            <comment id="17600868" author="davsclaus" created="Tue, 6 Sep 2022 16:18:52 +0000"  >&lt;p&gt;Thanks for testing all these releases&lt;/p&gt;</comment>
                            <comment id="17601653" author="devansharora68@gmail.com" created="Thu, 8 Sep 2022 06:13:39 +0000"  >&lt;p&gt;Hey Claus,&lt;br/&gt;
If you have already found&#160; the cause/fix for the issue can you share that with us.&lt;br/&gt;
We can merge it in our local copy of camel-rabbitmq 3.18.1 and use it in our projects.&lt;br/&gt;
We want to be on latest camel versions as we are using multiple other components of camel.&lt;/p&gt;

&lt;p&gt;Thanks &amp;amp; Regards&lt;/p&gt;</comment>
                            <comment id="17602981" author="devansharora68@gmail.com" created="Mon, 12 Sep 2022 08:03:47 +0000"  >&lt;p&gt;after changes from &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-17892&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/CAMEL-17892&lt;/a&gt;&lt;br/&gt;
need to add skipQueueBind=true in route to prevent this error&lt;/p&gt;</comment>
                            <comment id="17603032" author="davsclaus" created="Mon, 12 Sep 2022 10:14:35 +0000"  >&lt;p&gt;Okay we can add a note in the 3.17 upgrade guide&lt;/p&gt;</comment>
                            <comment id="17607544" author="devansharora68@gmail.com" created="Wed, 21 Sep 2022 06:42:20 +0000"  >&lt;p&gt;for reference&lt;br/&gt;
&lt;a href=&quot;https://camel.apache.org/manual/camel-3x-upgrade-guide-3_17.html#_camel_rabbitmq&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Apache Camel 3.x Upgrade Guide :: Apache Camel&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 8 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z18cg8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>