<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:47:43 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-16586] camel-aws2-sns: messages for different endpoints are published to the same topic</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-16586</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;Endpoints are created sharing the same mutable &lt;tt&gt;Configuration&lt;/tt&gt; object and the topic name (or ARN) stored in this object is updated each time a new endpoint is created. This results in messages intended for one endpoint being sent to the topic name (or ARN) for the most recently created endpoint.&lt;/p&gt;

&lt;p&gt;I think this might be a regression introduced by &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-15840&quot; title=&quot;camel-aws2-sns: duplicate copies of configuration objects lead to undefined behavior&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-15840&quot;&gt;&lt;del&gt;CAMEL-15840&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Here is an example of a failing unit test for &lt;tt&gt;SnsComponentConfigurationTest&lt;/tt&gt; to demonstrate the problem:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@Test
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void createMultipleEndpoints() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
    Sns2Component component = context.getComponent(&lt;span class=&quot;code-quote&quot;&gt;&quot;aws2-sns&quot;&lt;/span&gt;, Sns2Component.class);
    
    Sns2Endpoint endpoint1 = (Sns2Endpoint) component.createEndpoint(&lt;span class=&quot;code-quote&quot;&gt;&quot;aws2-sns:&lt;span class=&quot;code-comment&quot;&gt;//Topic1?accessKey=xxx&amp;amp;secretKey=yyy&quot;&lt;/span&gt;);
&lt;/span&gt;    assertEquals(&lt;span class=&quot;code-quote&quot;&gt;&quot;Topic1&quot;&lt;/span&gt;, endpoint1.getConfiguration().getTopicName());
    
    Sns2Endpoint endpoint2 = (Sns2Endpoint) component.createEndpoint(&lt;span class=&quot;code-quote&quot;&gt;&quot;aws2-sns:&lt;span class=&quot;code-comment&quot;&gt;//Topic2?accessKey=xxx&amp;amp;secretKey=yyy&quot;&lt;/span&gt;);
&lt;/span&gt;    assertEquals(&lt;span class=&quot;code-quote&quot;&gt;&quot;Topic2&quot;&lt;/span&gt;, endpoint2.getConfiguration().getTopicName());
    
    &lt;span class=&quot;code-comment&quot;&gt;// &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; now fails because endpoint1 and endpoint2 share the same config
&lt;/span&gt;    assertEquals(&lt;span class=&quot;code-quote&quot;&gt;&quot;Topic1&quot;&lt;/span&gt;, endpoint1.getConfiguration().getTopicName());
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13376975">CAMEL-16586</key>
            <summary>camel-aws2-sns: messages for different endpoints are published to the same topic</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="orpiske">Otavio Rodolfo Piske</assignee>
                                    <reporter username="bencampion">Ben Campion</reporter>
                        <labels>
                    </labels>
                <created>Thu, 6 May 2021 07:40:43 +0000</created>
                <updated>Fri, 7 May 2021 12:33:41 +0000</updated>
                            <resolved>Fri, 7 May 2021 12:33:35 +0000</resolved>
                                    <version>3.7.4</version>
                    <version>3.9.0</version>
                                    <fixVersion>3.7.5</fixVersion>
                    <fixVersion>3.10.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17340054" author="ancosen" created="Thu, 6 May 2021 07:43:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=orpiske&quot; class=&quot;user-hover&quot; rel=&quot;orpiske&quot;&gt;orpiske&lt;/a&gt;  can you have a look please?&lt;/p&gt;</comment>
                            <comment id="17340060" author="orpiske" created="Thu, 6 May 2021 07:59:27 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=acosentino&quot; class=&quot;user-hover&quot; rel=&quot;acosentino&quot;&gt;acosentino&lt;/a&gt; sure thing, I&apos;ll take a look at this one today.&lt;/p&gt;</comment>
                            <comment id="17340124" author="orpiske" created="Thu, 6 May 2021 09:53:53 +0000"  >&lt;p&gt;I opened a PR with a proposed fix for this issue: &lt;a href=&quot;https://github.com/apache/camel/pull/5519&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/5519&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;I&apos;d appreciate reviews and tests for&#160; the fix.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;Also, thanks Ben Campion for providing the reproducer/unit test.&lt;/p&gt;</comment>
                            <comment id="17340573" author="davsclaus" created="Fri, 7 May 2021 05:28:58 +0000"  >&lt;p&gt;Does this affect 3.7.x branch? If so then we need a custom PR for this, as the main PR cannot be backported&lt;/p&gt;</comment>
                            <comment id="17340631" author="orpiske" created="Fri, 7 May 2021 07:09:30 +0000"  >&lt;p&gt;I think it does. I will verify this today and re-implement the fix on 3.7.&lt;/p&gt;</comment>
                            <comment id="17340694" author="orpiske" created="Fri, 7 May 2021 09:22:50 +0000"  >&lt;p&gt;I&apos;ve just confirmed that this problem happens on 3.7.x as well. I will work to backport this fix.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13339745">CAMEL-15840</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 27 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0qs3s:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>