<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 09:43:35 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-3865] FallbackTypeConverter method throws JAXBException when marshalling nested, non-ObjectFactory, JAXB annotated, classes</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-3865</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;FallbackTypeConverter method throws JAXBException when marshalling nested, non-ObjectFactory, JAXB annotated, classes. These are  classes that are annotated with the @XmlRootElement, but not generated using XJC, so there is no ObjectFactory class for them.  The intention is to provide the package names containing the jaxb.index files to build the context.  &lt;/p&gt;

&lt;p&gt;FallbackTypeConverter does not marshal or unmarshal using the package names, but rather uses the value&apos;s Class as the context.  Thus everytime a JAXB annotated object contains another JAXB annotated object, there is an exception that looks like this:&lt;/p&gt;

&lt;p&gt;Caused by: org.apache.camel.CamelExecutionException: Exception occurred during execution on the exchange: Exchange&lt;span class=&quot;error&quot;&gt;&amp;#91;Message: com.foo.bar.MyObject@15e6463&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at org.apache.camel.util.ObjectHelper.wrapCamelExecutionException(ObjectHelper.java:1155)&lt;br/&gt;
	at org.apache.camel.converter.jaxb.FallbackTypeConverter.convertTo(FallbackTypeConverter.java:93)&lt;br/&gt;
	at org.apache.camel.impl.converter.BaseTypeConverterRegistry.doConvertTo(BaseTypeConverterRegistry.java:190)&lt;br/&gt;
	at org.apache.camel.impl.converter.BaseTypeConverterRegistry.convertTo(BaseTypeConverterRegistry.java:101)&lt;br/&gt;
	at org.apache.camel.impl.MessageSupport.getBody(MessageSupport.java:73)&lt;br/&gt;
	at org.apache.camel.impl.MessageSupport.getBody(MessageSupport.java:47)&lt;br/&gt;
	at org.apache.camel.component.bean.BeanProcessor.process(BeanProcessor.java:115)&lt;br/&gt;
	at org.apache.camel.util.AsyncProcessorHelper.process(AsyncProcessorHelper.java:103)&lt;br/&gt;
	at org.apache.camel.component.bean.BeanProcessor.process(BeanProcessor.java:74)&lt;br/&gt;
	at org.apache.camel.language.bean.BeanExpression$InvokeProcessor.process(BeanExpression.java:136)&lt;br/&gt;
	... 39 more&lt;br/&gt;
Caused by: javax.xml.bind.MarshalException&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;with linked exception:&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;javax.xml.bind.JAXBException: class com.foo.bar.nested.MyNested nor any of its super class is known to this context.&amp;#93;&lt;/span&gt;&lt;br/&gt;
	at com.sun.xml.bind.v2.runtime.MarshallerImpl.write(MarshallerImpl.java:318)&lt;br/&gt;
	at com.sun.xml.bind.v2.runtime.MarshallerImpl.marshal(MarshallerImpl.java:244)&lt;br/&gt;
	at javax.xml.bind.helpers.AbstractMarshallerImpl.marshal(AbstractMarshallerImpl.java:96)&lt;br/&gt;
	at org.apache.camel.converter.jaxb.FallbackTypeConverter.marshall(FallbackTypeConverter.java:174)&lt;br/&gt;
	at org.apache.camel.converter.jaxb.FallbackTypeConverter.convertTo(FallbackTypeConverter.java:88)&lt;br/&gt;
	... 47 more&lt;br/&gt;
Caused by: javax.xml.bind.JAXBException: class com.foo.bar.nested.MyNested nor any of its super class is known to this context.&lt;br/&gt;
	at com.sun.xml.bind.v2.runtime.XMLSerializer.reportError(XMLSerializer.java:246)&lt;br/&gt;
	at com.sun.xml.bind.v2.runtime.XMLSerializer.reportError(XMLSerializer.java:261)&lt;br/&gt;
	at com.sun.xml.bind.v2.runtime.XMLSerializer.childAsXsiType(XMLSerializer.java:653)&lt;br/&gt;
	at com.sun.xml.bind.v2.runtime.property.SingleMapNodeProperty.serializeBody(SingleMapNodeProperty.java:272)&lt;br/&gt;
	at com.sun.xml.bind.v2.runtime.ClassBeanInfoImpl.serializeBody(ClassBeanInfoImpl.java:340)&lt;br/&gt;
	at com.sun.xml.bind.v2.runtime.XMLSerializer.childAsSoleContent(XMLSerializer.java:593)&lt;br/&gt;
	at com.sun.xml.bind.v2.runtime.ClassBeanInfoImpl.serializeRoot(ClassBeanInfoImpl.java:324)&lt;br/&gt;
	at com.sun.xml.bind.v2.runtime.XMLSerializer.childAsRoot(XMLSerializer.java:494)&lt;br/&gt;
	at com.sun.xml.bind.v2.runtime.MarshallerImpl.write(MarshallerImpl.java:315)&lt;br/&gt;
	... 51 more&lt;br/&gt;
Caused by: javax.xml.bind.JAXBException: class com.foo.bar.nested.MyNested nor any of its super class is known to this context.&lt;br/&gt;
	at com.sun.xml.bind.v2.runtime.JAXBContextImpl.getBeanInfo(JAXBContextImpl.java:594)&lt;br/&gt;
	at com.sun.xml.bind.v2.runtime.XMLSerializer.childAsXsiType(XMLSerializer.java:648)&lt;br/&gt;
	... 57 more&lt;/li&gt;
&lt;/ul&gt;

</description>
                <environment></environment>
        <key id="12504303">CAMEL-3865</key>
            <summary>FallbackTypeConverter method throws JAXBException when marshalling nested, non-ObjectFactory, JAXB annotated, classes</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="njiang">Willem Jiang</assignee>
                                    <reporter username="eagecl">Clifton Eaton</reporter>
                        <labels>
                    </labels>
                <created>Thu, 14 Apr 2011 17:56:37 +0000</created>
                <updated>Mon, 11 Jul 2011 07:41:37 +0000</updated>
                            <resolved>Mon, 11 Jul 2011 07:41:37 +0000</resolved>
                                    <version>2.7.0</version>
                                                    <component>camel-jaxb</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13019999" author="davsclaus" created="Thu, 14 Apr 2011 19:38:46 +0000"  >&lt;p&gt;Can you provide an unit test which reproduces this?&lt;/p&gt;</comment>
                            <comment id="13020210" author="njiang" created="Fri, 15 Apr 2011 06:47:41 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;The FallbackTypeConverter just create a JAXB context based on the type class that is annotated with @XmlRootElement,the jaxb context doesn&apos;t has all the packages class, but JAXB will add all the types thats relates to this types class.&lt;br/&gt;
I just committed &lt;a href=&quot;http://svn.apache.org/viewvc?rev=1092615&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;a small unit test&lt;/a&gt; to reproducer the error, but I had no luck with it. Maybe you can consider to add some annotation to work around this issue.&lt;/p&gt;

&lt;p&gt;If you want to camel marshal and unmarshal the data rightly, you can use JAXB data format directly, and you can set up other JAXB context options that you want.&lt;br/&gt;
Here is the example:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;      &amp;lt;camelContext id=&lt;span class=&quot;code-quote&quot;&gt;&quot;camel&quot;&lt;/span&gt; xmlns=&lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//camel.apache.org/schema/spring&quot;&lt;/span&gt;&amp;gt;
&lt;/span&gt;        &amp;lt;route&amp;gt;
            &amp;lt;from uri=&lt;span class=&quot;code-quote&quot;&gt;&quot;direct:marshal&quot;&lt;/span&gt;/&amp;gt;
            &amp;lt;marshal&amp;gt;
                &amp;lt;jaxb prettyPrint=&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&quot;&lt;/span&gt; contextPath=&lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.camel.example&quot;&lt;/span&gt;
                    partClass=&lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.camel.example.PurchaseOrder&quot;&lt;/span&gt;
                    partNamespace=&lt;span class=&quot;code-quote&quot;&gt;&quot;{http:&lt;span class=&quot;code-comment&quot;&gt;//example.camel.org/apache}po&quot;&lt;/span&gt; /&amp;gt;
&lt;/span&gt;            &amp;lt;/marshal&amp;gt;
            &amp;lt;to uri=&lt;span class=&quot;code-quote&quot;&gt;&quot;mock:marshal&quot;&lt;/span&gt;/&amp;gt;
        &amp;lt;/route&amp;gt;
        &amp;lt;route&amp;gt;
            &amp;lt;from uri=&lt;span class=&quot;code-quote&quot;&gt;&quot;direct:unmarshal&quot;&lt;/span&gt;/&amp;gt;
            &amp;lt;unmarshal&amp;gt;
                &amp;lt;jaxb prettyPrint=&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&quot;&lt;/span&gt; contextPath=&lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.camel.example&quot;&lt;/span&gt;
                    partClass=&lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.camel.example.Partial&quot;&lt;/span&gt; /&amp;gt;
            &amp;lt;/unmarshal&amp;gt;
            &amp;lt;to uri=&lt;span class=&quot;code-quote&quot;&gt;&quot;mock:unmarshal&quot;&lt;/span&gt;/&amp;gt;
        &amp;lt;/route&amp;gt;
    &amp;lt;/camelContext&amp;gt; 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="13062698" author="davsclaus" created="Sun, 10 Jul 2011 08:28:57 +0000"  >&lt;p&gt;Willem whats the status of this? Seems like the end user should use that partClass stuff in the dataformat&lt;/p&gt;</comment>
                            <comment id="13062897" author="njiang" created="Mon, 11 Jul 2011 07:41:24 +0000"  >
&lt;p&gt;The user never send any other comments on the JIRA, I did some test on the annotated classes with jaxb.index.&lt;br/&gt;
It looks like the camel-jaxb can pick up the CamelContext rightly from the class rightly.&lt;/p&gt;

&lt;p&gt;So I close this issue with can not reproduce. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>14158</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 20 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i01xdj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9176</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>