<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:35:55 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-13667] Windows network UNC paths not treated correctly (File2/tempPrefix)</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-13667</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;Dear all,&lt;/p&gt;

&lt;p&gt;We are using Camel&apos;s File2 endpoint to deliver reports to a Windows network share. The used URI is (here in a properties file):&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;# File URI equivalent of \\FILESERVER.mycompany.local\Public\reports&lt;/tt&gt;&lt;br/&gt;
 &lt;tt&gt;report.delivery.to=&lt;a href=&quot;file:////FILESERVER.mycompany.local/Public/reports?keepLastModified=true&amp;amp;tempPrefix=tmp_&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:////FILESERVER.mycompany.local/Public/reports?keepLastModified=true&amp;amp;tempPrefix=tmp_&lt;/a&gt;&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;This results in an exception, see the stack trace (attached).&lt;/p&gt;

&lt;p&gt;I debugged and traced the issue back to:&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;org.apache.camel.component.file.GenericFileProducer#createTempFileName&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;which is using&lt;/p&gt;

&lt;p&gt;&lt;tt&gt;org.apache.camel.util.FileUtil#compactPath(java.lang.String, java.lang.String)&lt;/tt&gt;&lt;/p&gt;

&lt;p&gt;This method only preserves the first slash/backslash at the start. For UNC paths on Windows however, 2 backslashes are needed.&lt;/p&gt;

&lt;p&gt;I prepared a patch for:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;tt&gt;org.apache.camel.util.FileUtil&lt;/tt&gt;&lt;/li&gt;
	&lt;li&gt;&lt;tt&gt;org.apache.camel.util.FileUtilTest&lt;/tt&gt;&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;which remedies the issue on Windows.&lt;/p&gt;

&lt;p&gt;I would appreciate if you could check the patch, and integrate it to 2.x and 3.x branches if it is ok.&lt;/p&gt;

&lt;p&gt;Thank you.&lt;/p&gt;

&lt;p&gt;Kind regards,&lt;/p&gt;

&lt;p&gt;Clemens&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13240654">CAMEL-13667</key>
            <summary>Windows network UNC paths not treated correctly (File2/tempPrefix)</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="acosentino">Andrea Cosentino</assignee>
                                    <reporter username="cblamauer">Clemens Blamauer</reporter>
                        <labels>
                            <label>UNC</label>
                            <label>camel-core</label>
                            <label>camel-file</label>
                            <label>windows</label>
                    </labels>
                <created>Thu, 20 Jun 2019 14:07:49 +0000</created>
                <updated>Fri, 21 Jun 2019 12:50:29 +0000</updated>
                            <resolved>Fri, 21 Jun 2019 12:50:29 +0000</resolved>
                                    <version>2.22.2</version>
                                    <fixVersion>2.23.4</fixVersion>
                    <fixVersion>2.24.2</fixVersion>
                    <fixVersion>3.0.0.M4</fixVersion>
                    <fixVersion>3.0.0</fixVersion>
                    <fixVersion>2.25.0</fixVersion>
                                    <component>came-core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="2400">40m</timespent>
                                <comments>
                            <comment id="16868552" author="davsclaus" created="Thu, 20 Jun 2019 14:11:29 +0000"  >&lt;p&gt;Thanks for reporting and the patch - looks fine for me&lt;/p&gt;</comment>
                            <comment id="16868554" author="davsclaus" created="Thu, 20 Jun 2019 14:11:49 +0000"  >&lt;p&gt;I wonder if you would attempt to provide the patch as a github PR, then its a bit easier for us? &lt;/p&gt;</comment>
                            <comment id="16868561" author="cblamauer" created="Thu, 20 Jun 2019 14:19:48 +0000"  >&lt;p&gt;Hi Claus,&lt;br/&gt;
sure, will do.&lt;/p&gt;</comment>
                            <comment id="16868593" author="cblamauer" created="Thu, 20 Jun 2019 14:50:31 +0000"  >&lt;p&gt;I have created a pull request for camel-2.23.x branch:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/camel/pull/2988&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2988&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Please let me know if you need anything else.&lt;/p&gt;

&lt;p&gt;Thank you.&lt;/p&gt;</comment>
                            <comment id="16868608" author="ancosen" created="Thu, 20 Jun 2019 15:10:00 +0000"  >&lt;p&gt;Can you create the PR against master branch and camel-2.x branch. We&apos;ll backport if it&apos;s fine, but start with the two mainline branches.&lt;/p&gt;</comment>
                            <comment id="16868662" author="cblamauer" created="Thu, 20 Jun 2019 16:10:23 +0000"  >&lt;p&gt;I have created 2 separate PRs for 2.x &amp;amp; master:&lt;br/&gt;
2.x: &lt;a href=&quot;https://github.com/apache/camel/pull/2989&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2989&lt;/a&gt;&lt;br/&gt;
master: &lt;a href=&quot;https://github.com/apache/camel/pull/2990&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2990&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12972345" name="Windows_network_UNC_paths_not_treated_correctly_(File2_tempPrefix).patch" size="5396" author="cblamauer" created="Thu, 20 Jun 2019 14:07:32 +0000"/>
                            <attachment id="12972346" name="stacktrace.log" size="4364" author="cblamauer" created="Thu, 20 Jun 2019 14:18:13 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10430"><![CDATA[Patch]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 21 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z03xwg:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>