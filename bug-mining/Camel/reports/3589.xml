<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:15:16 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-9738] Thread leak for camel-mina2 consumers</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-9738</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;The camel-mina2 consumer (&lt;tt&gt;org.apache.camel.component.mina2.Mina2Consumer.doStart()&lt;/tt&gt;) internally start a Mina2 IoAcceptor (&lt;tt&gt;org.apache.mina.core.service.IoAcceptor&lt;/tt&gt;), but the &lt;tt&gt;org.apache.camel.component.mina2.Mina2Consumer.doStop()&lt;/tt&gt; do not invoke &lt;tt&gt;acceptor.dispose(true);&lt;/tt&gt; to release the threadpool started by Mina2.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Current behavior:&lt;/b&gt; While stopping the web application, the threadpool started by Mina2 IoAcceptor will not be stopped, so we have several thread which do not properly shutdown.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Current workaround:&lt;/b&gt; I create custom CamelShutdownStrategy and collect all Mina2Consumer and invoke Mina2consumer.getAcceptor.dispose(true); OR as an alternative create a dedicated consumer and overwrite the stop method of the Mina2 consumer as seen here: &lt;a href=&quot;https://github.com/oehf/ipf/commit/12fdde8df7ebbbb7cd9966aadeab3ea3bed8fe75&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/oehf/ipf/commit/12fdde8df7ebbbb7cd9966aadeab3ea3bed8fe75&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Suggested bugfix:&lt;/b&gt; In &lt;tt&gt;org.apache.camel.component.mina2.Mina2Consumer.doShutdown()&lt;/tt&gt; call the IoAcceptor dispose(true) method after unbind from the address.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12952392">CAMEL-9738</key>
            <summary>Thread leak for camel-mina2 consumers</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="acosentino">Andrea Cosentino</assignee>
                                    <reporter username="thopap">Thomas Papke</reporter>
                        <labels>
                    </labels>
                <created>Tue, 22 Mar 2016 10:55:20 +0000</created>
                <updated>Tue, 22 Mar 2016 12:20:18 +0000</updated>
                            <resolved>Tue, 22 Mar 2016 12:20:18 +0000</resolved>
                                    <version>2.16.2</version>
                                    <fixVersion>2.15.6</fixVersion>
                    <fixVersion>2.16.3</fixVersion>
                    <fixVersion>2.17.1</fixVersion>
                    <fixVersion>2.18.0</fixVersion>
                                    <component>camel-mina2</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="15206198" author="ancosen" created="Tue, 22 Mar 2016 11:24:53 +0000"  >&lt;p&gt;Are you working on a patch? Thanks for spotting this &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15206228" author="thopap" created="Tue, 22 Mar 2016 11:58:11 +0000"  >&lt;p&gt;I have attached a patch to this issue.&lt;/p&gt;</comment>
                            <comment id="15206229" author="ancosen" created="Tue, 22 Mar 2016 11:59:30 +0000"  >&lt;p&gt;Thank you, I&apos;ll review it and merge it.&lt;/p&gt;</comment>
                            <comment id="15206238" author="davsclaus" created="Tue, 22 Mar 2016 12:07:57 +0000"  >&lt;p&gt;Andrea can you backport this to all those active branches.&lt;/p&gt;</comment>
                            <comment id="15206240" author="ancosen" created="Tue, 22 Mar 2016 12:09:38 +0000"  >&lt;p&gt;Yes &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="15206253" author="ancosen" created="Tue, 22 Mar 2016 12:20:10 +0000"  >&lt;p&gt;Done.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thopap&quot; class=&quot;user-hover&quot; rel=&quot;thopap&quot;&gt;thopap&lt;/a&gt; many thanks for the patch &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12794745" name="ConsumerDispose.patch" size="550" author="thopap" created="Tue, 22 Mar 2016 11:55:37 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 35 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2v0nz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>