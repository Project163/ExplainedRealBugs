<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:46:45 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-12764] camel-http4: basic auth no longer working when used in combination with a dynamic to</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-12764</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;After upgrading a Spring Boot Project from Camel 2.21.1 to Camel 2.22.0 basic authentication of the http4 component stopped working when it is used in combination with a dynamic to.&lt;/p&gt;

&lt;p&gt;My (slightly simplified) route:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
from(inUri)
    .setHeader(Exchange.CONTENT_TYPE, constant(MediaType.APPLICATION_JSON_VALUE))
    .setBody(constant(&lt;span class=&quot;code-quote&quot;&gt;&quot;{\&quot;&lt;/span&gt;action\&lt;span class=&quot;code-quote&quot;&gt;&quot;:\&quot;&lt;/span&gt;signal\&lt;span class=&quot;code-quote&quot;&gt;&quot;}&quot;&lt;/span&gt;))
    .setHeader(Exchange.HTTP_METHOD, constant(HttpMethods.PUT))
    .toD(&lt;span class=&quot;code-quote&quot;&gt;&quot;http4:&lt;span class=&quot;code-comment&quot;&gt;//{{username}}:{{password}}@{{host}}:{{port}}/executions/${exchangeProperty.my_id}&quot;&lt;/span&gt;);&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;When I change the route and remove the dynamic to everything works fine again:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
from(inUri)
    .setHeader(Exchange.CONTENT_TYPE, constant(MediaType.APPLICATION_JSON_VALUE))
    .setBody(constant(&lt;span class=&quot;code-quote&quot;&gt;&quot;{\&quot;&lt;/span&gt;action\&lt;span class=&quot;code-quote&quot;&gt;&quot;:\&quot;&lt;/span&gt;signal\&lt;span class=&quot;code-quote&quot;&gt;&quot;}&quot;&lt;/span&gt;))
    .setHeader(Exchange.HTTP_METHOD, constant(HttpMethods.PUT))
    .setHeader(Exchange.HTTP_PATH, exchangeProperty(&lt;span class=&quot;code-quote&quot;&gt;&quot;my_id&quot;&lt;/span&gt;))
    .to(&lt;span class=&quot;code-quote&quot;&gt;&quot;http4:&lt;span class=&quot;code-comment&quot;&gt;//{{username}}:{{password}}@{{host}}:{{port}}/executions/&quot;&lt;/span&gt;);&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Maybe this regression was caused by &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12462&quot; title=&quot;toD with HTTP endpoints - Optimise dynamic query to leverage HTTP_QUERY header&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12462&quot;&gt;&lt;del&gt;CAMEL-12462&lt;/del&gt;&lt;/a&gt;?&lt;/p&gt;</description>
                <environment></environment>
        <key id="13181933">CAMEL-12764</key>
            <summary>camel-http4: basic auth no longer working when used in combination with a dynamic to</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="pascalschumacher">Pascal Schumacher</reporter>
                        <labels>
                            <label>regresion</label>
                    </labels>
                <created>Wed, 29 Aug 2018 15:30:03 +0000</created>
                <updated>Tue, 23 Mar 2021 14:14:49 +0000</updated>
                            <resolved>Tue, 23 Mar 2021 14:14:49 +0000</resolved>
                                    <version>2.22.0</version>
                    <version>2.22.1</version>
                    <version>2.23.2</version>
                    <version>2.24.1</version>
                                    <fixVersion>3.10.0</fixVersion>
                                    <component>camel-http4</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="16603177" author="davsclaus" created="Tue, 4 Sep 2018 15:13:57 +0000"  >&lt;p&gt;Yeah its possible a problem of that issue, can you try with 2.22.1 release when its GA. You can use recipientList instead of toD as workaround.&lt;/p&gt;</comment>
                            <comment id="16607063" author="pascalschumacher" created="Fri, 7 Sep 2018 12:36:55 +0000"  >&lt;p&gt;Thanks for the reponse. Sadly the issue still exists in Camel 2.22.1.&lt;/p&gt;</comment>
                            <comment id="16632156" author="aldettinger" created="Fri, 28 Sep 2018 17:29:57 +0000"  >&lt;p&gt;Actually, &lt;a href=&quot;https://github.com/apache/camel/blob/master/camel-core/src/main/java/org/apache/camel/processor/SendDynamicProcessor.java#L91&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;SendDynamicProcessor&lt;/a&gt; voids username and password from the uri. I think it could be ok as it prevents to end up with an endpoint instance per username/password provided. However, we would need a mechanism to delegate basic auth to the underlying component. For http4, &lt;a href=&quot;https://github.com/apache/camel/blob/master/components/camel-http4/src/main/java/org/apache/camel/component/http4/HttpComponent.java#L161&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;authUsername &amp;amp; authPassword&lt;/a&gt; may do the job but it may not work for other components.&lt;/p&gt;

&lt;p&gt;I guess we could hack pre/post processors to enable send dynamic basic auth for http4 for now. But in the long run, I wonder if those pre/post processors should be offered by the underlying component itself.&lt;/p&gt;

&lt;p&gt;Any thoughts ?&lt;/p&gt;</comment>
                            <comment id="16828971" author="davsclaus" created="Mon, 29 Apr 2019 07:09:22 +0000"  >&lt;p&gt;Can you try with latest releases&lt;/p&gt;</comment>
                            <comment id="16829325" author="pascalschumacher" created="Mon, 29 Apr 2019 14:56:52 +0000"  >&lt;p&gt;I tried with Camel 2.23.2 and it now works again.&lt;/p&gt;</comment>
                            <comment id="16830196" author="pascalschumacher" created="Tue, 30 Apr 2019 11:20:56 +0000"  >&lt;p&gt;Sorry I messed up, it still does not work with Camel 2.23.2.&lt;/p&gt;</comment>
                            <comment id="16841180" author="davsclaus" created="Thu, 16 May 2019 10:11:39 +0000"  >&lt;p&gt;Can you try with latest code on camel-2.x branch&lt;/p&gt;</comment>
                            <comment id="16858619" author="pascalschumacher" created="Fri, 7 Jun 2019 13:07:53 +0000"  >&lt;p&gt;Is there a maven repository with 2.25.0-SNAPSHOT builds? &lt;a href=&quot;https://repository.apache.org/content/repositories/snapshots/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://repository.apache.org/content/repositories/snapshots/&lt;/a&gt; does not contain 2.25.0-SNAPSHOT and building camel from source fails at work.&lt;/p&gt;</comment>
                            <comment id="16858621" author="ancosen" created="Fri, 7 Jun 2019 13:09:16 +0000"  >&lt;p&gt;you need to do a full build on camel-2.x branch.&lt;/p&gt;</comment>
                            <comment id="16858701" author="davsclaus" created="Fri, 7 Jun 2019 14:29:37 +0000"  >&lt;p&gt;You can build camel-2.x with &lt;/p&gt;

&lt;p&gt;mvn clean install -P fastinstall&lt;/p&gt;</comment>
                            <comment id="16901087" author="davsclaus" created="Tue, 6 Aug 2019 14:03:16 +0000"  >&lt;p&gt;Did you test with latest code?&lt;/p&gt;</comment>
                            <comment id="17307051" author="davsclaus" created="Tue, 23 Mar 2021 13:16:31 +0000"  >&lt;p&gt;In Camel 3.x the basic auth uses authUsername, authPassword as query parameters to specify those, instead of in the authority part. &lt;/p&gt;</comment>
                            <comment id="17307065" author="davsclaus" created="Tue, 23 Mar 2021 13:29:49 +0000"  >&lt;p&gt;If you specify the username and password as query parameters then it works&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
                from(&lt;span class=&quot;code-quote&quot;&gt;&quot;direct:joes&quot;&lt;/span&gt;)
                        .toD(&lt;span class=&quot;code-quote&quot;&gt;&quot;http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:&quot;&lt;/span&gt; + localServer.getLocalPort()
&lt;/span&gt;                             + &lt;span class=&quot;code-quote&quot;&gt;&quot;/joes?authMethod=Basic&amp;amp;authUsername={{myUsername}}&amp;amp;authPassword={{myPassword}}&amp;amp;authenticationPreemptive=&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;&amp;amp;throwExceptionOnFailure=&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;&amp;amp;drink=${header.drink}&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17307107" author="davsclaus" created="Tue, 23 Mar 2021 14:14:49 +0000"  >&lt;p&gt;Now it also works for the authority part of the uri as in the initial report&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13254250">CAMEL-13930</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 34 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3xk2f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>