<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 11:13:03 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-22645] http-component - oauth2BodyAuthentication not being stipped out of URI</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-22645</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;The implementation of `oauth2BodyAuthentication` may be missing a step of removing the parameter from the calls URI (it is being populated forward in the URI &#8211; see example).&lt;/p&gt;

&lt;p&gt;This is not the case with other oauth2* parameters (they are not included in the URI).&lt;/p&gt;

&lt;p&gt;e.g.,&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;to:&lt;br/&gt;
&#160; &#160; &#160; &#160; &#160; uri: &quot;&lt;tt&gt;api.uri&lt;/tt&gt;/api/v3/address&quot;&lt;br/&gt;
&#160; &#160; &#160; &#160; &#160; parameters:&lt;br/&gt;
&#160; &#160; &#160; &#160; &#160; &#160; sslContextParameters: &quot;#bean:sslContextParameters&quot;&lt;br/&gt;
&#160; &#160; &#160; &#160; &#160; &#160; httpMethod: &quot;GET&quot;&lt;br/&gt;
&#160; &#160; &#160; &#160; &#160; &#160; bridgeEndpoint: true&lt;br/&gt;
&#160; &#160; &#160; &#160; &#160; &#160; skipControlHeaders: true&lt;br/&gt;
&#160; &#160; &#160; &#160; &#160; &#160; skipRequestHeaders: true&lt;br/&gt;
&#160; &#160; &#160; &#160; &#160; &#160; okStatusCodeRange: 200&lt;br/&gt;
&#160; &#160; &#160; &#160; &#160; &#160; # OAuth2 parameters&lt;br/&gt;
&#160; &#160; &#160; &#160; &#160; &#160; oauth2ClientId: &quot;&lt;tt&gt;api.consumer.key&lt;/tt&gt;&quot;&lt;br/&gt;
&#160; &#160; &#160; &#160; &#160; &#160; oauth2ClientSecret: &quot;&lt;tt&gt;api.consumer.secret&lt;/tt&gt;&quot;&lt;br/&gt;
&#160; &#160; &#160; &#160; &#160; &#160; oauth2TokenEndpoint: &quot;&lt;tt&gt;api.uri&lt;/tt&gt;/oauth2/v3/token&quot;&lt;br/&gt;
&#160; &#160; &#160; &#160; &#160; &#160; oauth2BodyAuthentication: true&lt;br/&gt;
&#160; &#160; &#160; &#160; &#160; &#160; oauth2Scope: &quot;addresses&quot;&lt;br/&gt;
&#160;&lt;br/&gt;
Reviewing the DEBUG logs, it is sending the request with:&lt;br/&gt;
`GET /api/v3/address?oauth2BodyAuthentication=true&amp;amp;...`&lt;br/&gt;
&#160;&lt;br/&gt;
Expected:&#160;&lt;br/&gt;
`GET /api/v3/address?...`&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="13633044">CAMEL-22645</key>
            <summary>http-component - oauth2BodyAuthentication not being stipped out of URI</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="cfitzwater">Cameron Fitzwater</reporter>
                        <labels>
                    </labels>
                <created>Fri, 31 Oct 2025 19:10:22 +0000</created>
                <updated>Mon, 3 Nov 2025 13:54:11 +0000</updated>
                            <resolved>Sat, 1 Nov 2025 09:02:36 +0000</resolved>
                                    <version>4.14.0</version>
                                    <fixVersion>4.14.3</fixVersion>
                    <fixVersion>4.16.0</fixVersion>
                                    <component>camel-http</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="18034484" author="JIRAUSER310023" created="Fri, 31 Oct 2025 19:42:54 +0000"  >&lt;p&gt;When using &apos;toD&apos;, it appears that &apos;oauth2BodyAuthentication: true&apos; is not taken into effect &#8211; I can create a separate bug if needed, but thinking this may be related to this issue/the fix needed for this anyways.&lt;/p&gt;</comment>
                            <comment id="18034772" author="JIRAUSER310023" created="Sat, 1 Nov 2025 19:14:19 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davsclaus&quot; class=&quot;user-hover&quot; rel=&quot;davsclaus&quot;&gt;davsclaus&lt;/a&gt; &lt;del&gt;&#8211; can you confirm if the comment above was also addressed in the commit that was pushed? I believe this issue may only be present when the `&lt;b&gt;oauth2CacheTokens&lt;/b&gt;` option is being used with `&lt;b&gt;toD&lt;/b&gt;` (which I failed to mention above).&lt;/del&gt;-&lt;/p&gt;

&lt;p&gt;&lt;del&gt;toD:&lt;/del&gt;&lt;br/&gt;
&#160; &#160; &#160; &#160; &#160; &lt;del&gt;uri: &quot;&lt;tt&gt;-api.uri&lt;/del&gt;&lt;/tt&gt;/api/v3/address&quot;-&lt;br/&gt;
&#160; &#160; &#160; &#160; &#160; &lt;del&gt;parameters:&lt;/del&gt;&lt;br/&gt;
&#160; &#160; &#160; &#160; &#160; &#160; &lt;del&gt;sslContextParameters: &quot;#bean:sslContextParameters&quot;&lt;/del&gt;&lt;br/&gt;
&#160; &#160; &#160; &#160; &#160; &#160; &lt;del&gt;httpMethod: &quot;GET&quot;&lt;/del&gt;&lt;br/&gt;
&#160; &#160; &#160; &#160; &#160; &#160; &lt;del&gt;bridgeEndpoint: true&lt;/del&gt;&lt;br/&gt;
&#160; &#160; &#160; &#160; &#160; &#160; &lt;del&gt;skipControlHeaders: true&lt;/del&gt;&lt;br/&gt;
&#160; &#160; &#160; &#160; &#160; &#160; &lt;del&gt;skipRequestHeaders: true&lt;/del&gt;&lt;br/&gt;
&#160; &#160; &#160; &#160; &#160; &#160; &lt;del&gt;okStatusCodeRange: 200&lt;/del&gt;&lt;br/&gt;
&#160; &#160; &#160; &#160; &#160; &#160; &lt;del&gt;# OAuth2 parameters&lt;/del&gt;&lt;br/&gt;
&#160; &#160; &#160; &#160; &#160; &#160; &lt;del&gt;oauth2ClientId: &quot;&lt;tt&gt;-api.consumer.key&lt;/del&gt;&lt;/tt&gt;&quot;-&lt;br/&gt;
&#160; &#160; &#160; &#160; &#160; &#160; &lt;del&gt;oauth2ClientSecret: &quot;&lt;tt&gt;-api.consumer.secret&lt;/del&gt;&lt;/tt&gt;&quot;-&lt;br/&gt;
&#160; &#160; &#160; &#160; &#160; &#160; &lt;del&gt;oauth2TokenEndpoint: &quot;&lt;tt&gt;-api.uri&lt;/del&gt;&lt;/tt&gt;/oauth2/v3/token&quot;-&lt;br/&gt;
&#160; &#160; &#160; &#160; &#160; &#160; &lt;del&gt;&lt;b&gt;-oauth2CacheTokens: true&lt;/del&gt;&lt;/b&gt;-&lt;br/&gt;
&#160; &#160; &#160; &#160; &#160; &#160; &lt;del&gt;&lt;b&gt;-oauth2BodyAuthentication: true&lt;/del&gt;&lt;/b&gt;-&lt;br/&gt;
&#160; &#160; &#160; &#160; &#160; &#160; &lt;del&gt;oauth2Scope: &quot;addresses&quot;&lt;/del&gt;&lt;/p&gt;

&lt;p&gt;&lt;del&gt;If not, here is where I thought this issue might reside (it seems like the &lt;b&gt;-caching logic is coupled to the request URI&lt;/del&gt;&lt;/b&gt;, which is too granular for dynamic endpoints)?-&lt;br/&gt;
&lt;del&gt;&lt;a href=&quot;#L75-&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;-https://github.com/apache/camel/blob/2e0bc04e76bc4e16f6e285a68fc7e23581a349ac/components/camel-http/src/main/java/org/apache/camel/component/http/OAuth2ClientConfigurer.java#L75-&lt;/a&gt;&lt;/del&gt;&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="13633040">CAMEL-22643</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 week, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1yegg:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>