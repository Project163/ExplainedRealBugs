<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 09:57:26 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-6341] DefaultShutdownStrategy shutdown timeout of 0 will never timeout and go in negative time</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-6341</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;A timeout of 0 won&apos;t timeout in the instant, the time will go negative. &lt;/p&gt;

&lt;p&gt;camelcontext.stopRoute(routeId, 0, TimeUnit.SECONDS, false); &lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.camel.impl.DefaultShutdownStrategy&amp;#93;&lt;/span&gt; : Waiting as there are still 3 inflight and pending exchanges to complete, timeout in -1 seconds.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.camel.impl.DefaultShutdownStrategy&amp;#93;&lt;/span&gt; : Waiting as there are still 3 inflight and pending exchanges to complete, timeout in -2 seconds.&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.camel.impl.DefaultShutdownStrategy&amp;#93;&lt;/span&gt; : Waiting as there are still 3 inflight and pending exchanges to complete, timeout in -3 seconds. &lt;/p&gt;

&lt;p&gt;Found a post related to it there : &lt;a href=&quot;http://camel.465427.n5.nabble.com/Forcefully-shutting-down-routes-td5722447.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://camel.465427.n5.nabble.com/Forcefully-shutting-down-routes-td5722447.html&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12646433">CAMEL-6341</key>
            <summary>DefaultShutdownStrategy shutdown timeout of 0 will never timeout and go in negative time</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="njiang">Willem Jiang</assignee>
                                    <reporter username="lleclerc">Luc Leclerc</reporter>
                        <labels>
                    </labels>
                <created>Tue, 7 May 2013 16:09:58 +0000</created>
                <updated>Tue, 6 Oct 2015 20:37:08 +0000</updated>
                            <resolved>Fri, 17 May 2013 13:50:41 +0000</resolved>
                                    <version>2.11.0</version>
                                    <fixVersion>2.10.5</fixVersion>
                    <fixVersion>2.11.1</fixVersion>
                    <fixVersion>2.12.0</fixVersion>
                                    <component>camel-core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="13651648" author="davsclaus" created="Wed, 8 May 2013 06:05:32 +0000"  >&lt;p&gt;Luc, do you want to work on a patch? We should possible validate that the timeout option is a positive number, and not allow 0 or negative values.&lt;/p&gt;</comment>
                            <comment id="13651988" author="lleclerc" created="Wed, 8 May 2013 15:28:31 +0000"  >&lt;p&gt;patch (not tested)&lt;/p&gt;</comment>
                            <comment id="13652654" author="njiang" created="Thu, 9 May 2013 01:48:37 +0000"  >&lt;p&gt;I just checked the code, as there is some inflight exchange, the ShutdownTask will keep waiting for it.&lt;br/&gt;
I think we need to check the timeout value before trying to wait for the inflight exchanges are clean.&lt;/p&gt;</comment>
                            <comment id="13652789" author="davsclaus" created="Thu, 9 May 2013 07:10:50 +0000"  >&lt;p&gt;I think its better to require the timeout value to be positive, eg &amp;gt; 0.&lt;br/&gt;
Then you don&apos;t need that special if its 0 check etc.&lt;/p&gt;</comment>
                            <comment id="13660725" author="davsclaus" created="Fri, 17 May 2013 13:47:07 +0000"  >&lt;p&gt;Working on a bit better fix so we always require a timeout value, as using 0 do not make sense. And when the timeout was hit, and the task was stuck in that while loop with the (there are still X) then we detect the timeout now, and leave the loop and force shutdown the consumers and remainder part. Which otherwise was only done if we interrupted the sleep thread.&lt;/p&gt;</comment>
                            <comment id="14944814" author="mykolap" created="Tue, 6 Oct 2015 09:53:45 +0000"  >&lt;p&gt;Issue marked as fixed but I&apos;m using 2.15.3 and still have this problem&lt;/p&gt;

&lt;p&gt;12:48:59,864 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.camel.impl.DefaultShutdownStrategy&amp;#93;&lt;/span&gt; (Camel (interprocCamelContext) thread #56904 - timer://InteractiveAppRetryProcessor) Waiting as there are still 1 inflight and pending exchanges to complete, timeout in -25754 seconds. Inflights per route: &lt;span class=&quot;error&quot;&gt;&amp;#91;InteractiveProcessor_Retry_4 = 1&amp;#93;&lt;/span&gt;&lt;br/&gt;
12:49:00,865 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.camel.impl.DefaultShutdownStrategy&amp;#93;&lt;/span&gt; (Camel (interprocCamelContext) thread #56904 - timer://InteractiveAppRetryProcessor) Waiting as there are still 1 inflight and pending exchanges to complete, timeout in -25755 seconds. Inflights per route: &lt;span class=&quot;error&quot;&gt;&amp;#91;InteractiveProcessor_Retry_4 = 1&amp;#93;&lt;/span&gt;&lt;br/&gt;
12:49:01,865 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.camel.impl.DefaultShutdownStrategy&amp;#93;&lt;/span&gt; (Camel (interprocCamelContext) thread #56904 - timer://InteractiveAppRetryProcessor) Waiting as there are still 1 inflight and pending exchanges to complete, timeout in -25756 seconds. Inflights per route: &lt;span class=&quot;error&quot;&gt;&amp;#91;InteractiveProcessor_Retry_4 = 1&amp;#93;&lt;/span&gt;&lt;br/&gt;
12:49:02,866 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.camel.impl.DefaultShutdownStrategy&amp;#93;&lt;/span&gt; (Camel (interprocCamelContext) thread #56904 - timer://InteractiveAppRetryProcessor) Waiting as there are still 1 inflight and pending exchanges to complete, timeout in -25757 seconds. Inflights per route: &lt;span class=&quot;error&quot;&gt;&amp;#91;InteractiveProcessor_Retry_4 = 1&amp;#93;&lt;/span&gt;&lt;br/&gt;
12:49:03,866 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.camel.impl.DefaultShutdownStrategy&amp;#93;&lt;/span&gt; (Camel (interprocCamelContext) thread #56904 - timer://InteractiveAppRetryProcessor) Waiting as there are still 1 inflight and pending exchanges to complete, timeout in -25758 seconds. Inflights per route: &lt;span class=&quot;error&quot;&gt;&amp;#91;InteractiveProcessor_Retry_4 = 1&amp;#93;&lt;/span&gt;&lt;br/&gt;
12:49:04,866 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.camel.impl.DefaultShutdownStrategy&amp;#93;&lt;/span&gt; (Camel (interprocCamelContext) thread #56904 - timer://InteractiveAppRetryProcessor) Waiting as there are still 1 inflight and pending exchanges to complete, timeout in -25759 seconds. Inflights per route: &lt;span class=&quot;error&quot;&gt;&amp;#91;InteractiveProcessor_Retry_4 = 1&amp;#93;&lt;/span&gt;&lt;br/&gt;
12:49:05,867 INFO  &lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.camel.impl.DefaultShutdownStrategy&amp;#93;&lt;/span&gt; (Camel (interprocCamelContext) thread #56904 - timer://InteractiveAppRetryProcessor) Waiting as there are still 1 inflight and pending exchanges to complete, timeout in -25760 seconds. Inflights per route: &lt;span class=&quot;error&quot;&gt;&amp;#91;InteractiveProcessor_Retry_4 = 1&amp;#93;&lt;/span&gt;&lt;/p&gt;

&lt;p&gt;When using hawtio it simply hangs when I try to view properties of Camel Contexts&lt;/p&gt;

&lt;p&gt;I am using camel with activemq, but there are no inflight messages in activemq...&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10020">
                    <name>Cloners</name>
                                                                <inwardlinks description="is cloned by">
                                        <issuelink>
            <issuekey id="12902815">CAMEL-9196</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12582305" name="shutdownStrategy8may2013.patch" size="27646" author="lleclerc" created="Wed, 8 May 2013 15:28:31 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10061"><![CDATA[Novice]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>326791</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 7 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1kdlj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>327136</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>