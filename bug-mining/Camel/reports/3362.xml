<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:10:41 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-9065] Exchange created needs to be aware of its FROM endpoint. </title>
                <link>https://issues.apache.org/jira/browse/CAMEL-9065</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;In 2.16, DefaultRuntimeEndpointRegistry (an EventNotifier) is extended to being able to handle ExchangeCreatedEvent s. &lt;br/&gt;
In its notify(EventObjet), when processing an ExchangeCreateEvent, a reference to exchange&apos;s from endpoint is needed in order to obtain its endpoint uri. &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;border-bottom-style: solid;&quot;&gt;&lt;b&gt;DefaultRuntimeEndpointRegistry.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;} &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (extended &amp;amp;&amp;amp; event &lt;span class=&quot;code-keyword&quot;&gt;instanceof&lt;/span&gt; ExchangeCreatedEvent) {
            &lt;span class=&quot;code-comment&quot;&gt;// we only capture details in extended mode
&lt;/span&gt;            ExchangeCreatedEvent ece = (ExchangeCreatedEvent) event;
            Endpoint endpoint = ece.getExchange().getFromEndpoint();
            &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; routeId = ece.getExchange().getFromRouteId();
            &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; uri = endpoint.getEndpointUri();
            &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; key = asUtilizationKey(routeId, uri);
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (key != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
                inputUtilization.onHit(key);
            }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The problem is located in MongoDbEndpoint createMongoDbExchange)() &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;border-bottom-style: solid;&quot;&gt;&lt;b&gt;MongoDbEndpoint.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Exchange createMongoDbExchange(DBObject dbObj) {
        Exchange exchange = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; DefaultExchange(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.getCamelContext(), getExchangePattern()); 
        ...
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This Exchange constructor does not take into consideration exchange&apos;s from endpoint, consequently causing a NPE when processing its associated ExchangeCreatedEvent.&lt;/p&gt;

&lt;p&gt;When constructing an exchange,  MongoDbEndpoint should use its parent &apos;s createExchange() which uses the proper Exchange constructors. &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-style: solid;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeHeader panelHeader&quot; style=&quot;border-bottom-width: 1px;border-bottom-style: solid;&quot;&gt;&lt;b&gt;MongoDbEndpoint.java&lt;/b&gt;&lt;/div&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; Exchange createMongoDbExchange(DBObject dbObj) {
&lt;span class=&quot;code-comment&quot;&gt;//        Exchange exchange = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; DefaultExchange(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.getCamelContext(), getExchangePattern());
&lt;/span&gt;        Exchange exchange = &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;.createExchange();
...
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="12853685">CAMEL-9065</key>
            <summary>Exchange created needs to be aware of its FROM endpoint. </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="omaralles">omar alles</reporter>
                        <labels>
                    </labels>
                <created>Sun, 9 Aug 2015 11:58:38 +0000</created>
                <updated>Sat, 27 Aug 2016 14:33:05 +0000</updated>
                            <resolved>Mon, 10 Aug 2015 07:39:14 +0000</resolved>
                                    <version>2.15.2</version>
                                    <fixVersion>2.16.0</fixVersion>
                                    <component>camel-mongodb</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14679116" author="githubbot" created="Sun, 9 Aug 2015 12:07:44 +0000"  >&lt;p&gt;GitHub user oalles opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/591&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/591&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    Exchange created needs to be aware of its FROM endpoint. &lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-9065&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/CAMEL-9065&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/oalles/camel&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/oalles/camel&lt;/a&gt; mongodb-exchange-construction&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/591.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/591.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #591&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 7f38e79e339d28dcc15e4cda0773ca239b43f0fc&lt;br/&gt;
Author: oalles &amp;lt;oalles@gmail.com&amp;gt;&lt;br/&gt;
Date:   2015-08-09T12:02:36Z&lt;/p&gt;

&lt;p&gt;    createMongoDbExchange should call its parent createExchange, so the&lt;br/&gt;
    proper exchange constructors are called.&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-9065&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/CAMEL-9065&lt;/a&gt;&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="14679718" author="davsclaus" created="Mon, 10 Aug 2015 07:39:14 +0000"  >&lt;p&gt;Thanks for the PR&lt;/p&gt;</comment>
                            <comment id="14679720" author="githubbot" created="Mon, 10 Aug 2015 07:39:15 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/591&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/591&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14679748" author="davsclaus" created="Mon, 10 Aug 2015 08:01:32 +0000"  >&lt;p&gt;I found some other components to improve as well, now they are all done&lt;/p&gt;

&lt;p&gt;davsclaus:~/workspace/camel (master)/$ find . -name &apos;*Endpoint.java&apos; | xargs grep &quot;new DefaultExchange&quot;&lt;br/&gt;
./camel-core/src/main/java/org/apache/camel/impl/DefaultEndpoint.java:        return new DefaultExchange(this, pattern);&lt;/p&gt;</comment>
                            <comment id="15436435" author="githubbot" created="Thu, 25 Aug 2016 07:45:49 +0000"  >&lt;p&gt;GitHub user YoshikiHigo opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/1142&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/1142&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    An additional modification for &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-9065&quot; title=&quot;Exchange created needs to be aware of its FROM endpoint. &quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-9065&quot;&gt;&lt;del&gt;CAMEL-9065&lt;/del&gt;&lt;/a&gt; &lt;/p&gt;

&lt;p&gt;    This commit includes an additional modification for &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-9065&quot; title=&quot;Exchange created needs to be aware of its FROM endpoint. &quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-9065&quot;&gt;&lt;del&gt;CAMEL-9065&lt;/del&gt;&lt;/a&gt;.&lt;br/&gt;
    Components should create Exchange from super (46a9a5b4926fd845042577f18ea6a935d2f5f91d).&lt;/p&gt;

&lt;p&gt;    Yoshiki, Shinpei, Hideaki, and Mei&lt;/p&gt;


&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/YoshikiHigo/camel&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/YoshikiHigo/camel&lt;/a&gt; fix08&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/1142.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/1142.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #1142&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit fa7c029acba9898f438ec34a226716b4c7d1d3cd&lt;br/&gt;
Author: Yoshiki Higo &amp;lt;yoshiki.higo@gmail.com&amp;gt;&lt;br/&gt;
Date:   2016-08-25T07:40:15Z&lt;/p&gt;

&lt;p&gt;    An additional modification for &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-9065&quot; title=&quot;Exchange created needs to be aware of its FROM endpoint. &quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-9065&quot;&gt;&lt;del&gt;CAMEL-9065&lt;/del&gt;&lt;/a&gt; (Components should create Exchange from super)&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15441647" author="githubbot" created="Sat, 27 Aug 2016 14:33:05 +0000"  >&lt;p&gt;Github user YoshikiHigo closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/1142&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/1142&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 12 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ii9j:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>