<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 09:54:21 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-5776] .camelLock is deleted by another camel instance</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-5776</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;When camel file component tries to aquire a readLock, e.g. readLock=changed, and a camelLock already exists (aquired by another camel instance), the method MarkerFileExclusiveReadLockStrategy.acquireExclusiveReadLock fails (correct).&lt;/p&gt;

&lt;p&gt;Then in GenericFileConsumer.processExchange, row 291 processStrategy.abort is called. That will delete the camelLock which another camel instance owns.&lt;/p&gt;

&lt;p&gt;I don&apos;t know if abort should call exclusiveReadLockStrategy.releaseExclusiveReadLock() or if we have to remember if we own the lock or not.&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12615168">CAMEL-5776</key>
            <summary>.camelLock is deleted by another camel instance</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="njiang">Willem Jiang</assignee>
                                    <reporter username="dave.larsson">David Larsson</reporter>
                        <labels>
                    </labels>
                <created>Wed, 7 Nov 2012 15:25:49 +0000</created>
                <updated>Fri, 16 Nov 2012 15:19:42 +0000</updated>
                            <resolved>Fri, 16 Nov 2012 15:19:42 +0000</resolved>
                                    <version>2.10.2</version>
                                    <fixVersion>2.9.5</fixVersion>
                    <fixVersion>2.10.3</fixVersion>
                    <fixVersion>2.11.0</fixVersion>
                                    <component>camel-core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13492989" author="njiang" created="Thu, 8 Nov 2012 06:15:19 +0000"  >&lt;p&gt;Hi David&lt;br/&gt;
It should be easy for the MarkerFileExclusiveReadLockStrategy to remember it has the lock or not by adding header to tell if it has to lock or not.&lt;br/&gt;
Now my question is how did you hit this kind of issue, it could be helpful for me to wrote a test for it.&lt;/p&gt;

&lt;p&gt;Willem&lt;/p&gt;</comment>
                            <comment id="13493165" author="dave.larsson" created="Thu, 8 Nov 2012 13:16:57 +0000"  >&lt;p&gt;I noticed this when I created the lock file manually and had trace logging on. I saw that camel deleted the lock file and then consumed the file in the next polling...&lt;/p&gt;

&lt;p&gt;I think the test could be built like this:&lt;/p&gt;

&lt;p&gt;1) Create a lock file (/files/test.camelLock)&lt;br/&gt;
2) Create a file (/files/test)&lt;br/&gt;
3) Start camel file consumer&lt;br/&gt;
4) Check that camel doesn&apos;t delete lock file when polling files directory (this fails for camel 2.10.2 but works for camel 2.8.3)&lt;br/&gt;
5) Remove lock file&lt;br/&gt;
6) Make sure file is consumed on next polling&lt;/p&gt;

&lt;p&gt;Regards David&lt;/p&gt;</comment>
                            <comment id="13498857" author="njiang" created="Fri, 16 Nov 2012 15:19:42 +0000"  >&lt;p&gt;Applied the patch into trunk, camel-2.10.x and camel-2.9.x branches.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>255764</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 1 week, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0fup3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>90571</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>