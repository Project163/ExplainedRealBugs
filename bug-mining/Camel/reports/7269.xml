<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 11:12:52 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-22535] camel-jbang-container: Missing version pinning breaks container images / Further improvements</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-22535</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;I noticed that with every new Camel release, the older camel-jbang containers stop working. For example, camel-jbang:4.14.1 doesn&#8217;t work at all. The root cause appears to be that both during the image build and at startup (entrypoint), the image uses camel@apache/camel. This reference resolves to the HEAD revision of CamelJBang.java on GitHub, which is a moving target. So, every time you update CamelJBang.java and the DEPS declared in it, you break already built containers. In the case of camel-jbang:4.14.1, the jbang source code on GitHub was only updated to 4.14.1 several hours after the image was built, rendering the image broken on release day.&lt;/p&gt;

&lt;p&gt;Solution:&lt;/p&gt;

&lt;p&gt;1) Pin camel-jbang version:&#160;&lt;br/&gt;
Use dedicated &lt;a href=&quot;https://github.com/apache/camel/blob/$CAMEL_JBANG_COMMIT/dsl/camel-jbang/camel-jbang-main/dist/CamelJBang.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/blob/$CAMEL_JBANG_COMMIT/dsl/camel-jbang/camel-jbang-main/dist/CamelJBang.java&lt;/a&gt; instead of `camel@apache/camel` which refers to &lt;a href=&quot;https://github.com/apache/camel/blob/HEAD/dsl/camel-jbang/camel-jbang-main/dist/CamelJBang.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/blob/HEAD/dsl/camel-jbang/camel-jbang-main/dist/CamelJBang.java&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Further Improvements:&lt;/p&gt;

&lt;p&gt;2) Utilize Docker best practice:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Don&apos;t install unnecessary things. Extract only the jbang linux binaries. The current images also hold Windows files&lt;/li&gt;
	&lt;li&gt;Dockerfile instructions:&lt;br/&gt;
&#160; &#160; - FROM: Whenever possible, use current official images as the basis for your images (see security advice below)&lt;br/&gt;
&#160; &#160; - RUN/ENV: Reduce amount of RUN and ENV statements as each creates a new intermediate layer&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;3) Have a dedicated `camel` executable in the Image as the help references to this command. Important for those developing applications in the container&apos;s Terminal (especially for Kubernetes users). Also the entrypoint should be changed to `&lt;span class=&quot;error&quot;&gt;&amp;#91;&amp;quot;camel&amp;quot;&amp;#93;&lt;/span&gt;`.&lt;/p&gt;

&lt;p&gt;4) Let the jbang and aforementioned camel executable be in `/usr/local/bin` according to the Linux Filesystem Hierarchy Standard (FHS)&lt;/p&gt;

&lt;p&gt;5) Set the JBang Version in `$HOME/.jbang/cache/version.txt`, otherwise `jbang version` and `camel version` shows an empty string for the JBang Version&lt;/p&gt;

&lt;p&gt;Supply chain securtity advice:&lt;br/&gt;
Switch back to the official eclipse-temurin image at docker.io and do not use image mirrors unless you have the possibility to automatically cross-check and validate the image hashes between the mirror and docker.io.&lt;br/&gt;
Why Official Images? These images have clear documentation, promote best practices and are scanned for vulnerabilities.&lt;/p&gt;


&lt;p&gt;If you like I can create a pull request on Github for the bugfix and improvements.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13631384">CAMEL-22535</key>
            <summary>camel-jbang-container: Missing version pinning breaks container images / Further improvements</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="acosentino">Andrea Cosentino</assignee>
                                    <reporter username="michaelweiss">Michael Weiss</reporter>
                        <labels>
                    </labels>
                <created>Mon, 13 Oct 2025 11:59:34 +0000</created>
                <updated>Wed, 15 Oct 2025 12:03:01 +0000</updated>
                            <resolved>Mon, 13 Oct 2025 16:33:55 +0000</resolved>
                                    <version>4.13.0</version>
                    <version>4.14.0</version>
                    <version>4.14.1</version>
                                    <fixVersion>4.14.2</fixVersion>
                    <fixVersion>4.16.0</fixVersion>
                                    <component>camel-jbang</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="18029479" author="davsclaus" created="Mon, 13 Oct 2025 12:06:31 +0000"  >&lt;p&gt;You are welcome to send a PR with improvements&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1y47k:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>