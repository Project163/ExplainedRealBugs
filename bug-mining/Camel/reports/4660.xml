<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:31:39 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-12087] camel-core: WARN No CamelContext defined yet so cannot inject into bean</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-12087</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description></description>
                <environment></environment>
        <key id="13125420">CAMEL-12087</key>
            <summary>camel-core: WARN No CamelContext defined yet so cannot inject into bean</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="lb">Luca Burgazzoli</assignee>
                                    <reporter username="lb">Luca Burgazzoli</reporter>
                        <labels>
                    </labels>
                <created>Sat, 16 Dec 2017 14:56:45 +0000</created>
                <updated>Mon, 7 Oct 2019 01:58:51 +0000</updated>
                            <resolved>Tue, 9 Oct 2018 15:54:25 +0000</resolved>
                                    <version>2.20.3</version>
                    <version>2.21.1</version>
                                    <fixVersion>2.21.3</fixVersion>
                    <fixVersion>2.22.2</fixVersion>
                    <fixVersion>2.23.0</fixVersion>
                                    <component>camel-spring-boot</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="16294247" author="davsclaus" created="Sun, 17 Dec 2017 18:10:24 +0000"  >&lt;p&gt;I think this commit broke camel-netty-http-starter as it fails now&lt;/p&gt;</comment>
                            <comment id="16294589" author="lb" created="Mon, 18 Dec 2017 07:19:22 +0000"  >&lt;p&gt;Fixed now, thx for report it&lt;/p&gt;</comment>
                            <comment id="16343392" author="pascalschumacher" created="Mon, 29 Jan 2018 14:23:10 +0000"  >&lt;p&gt;I still get this warning (&lt;tt&gt;WAR - DefaultCamelBeanPostProcessor - No CamelContext defined yet so cannot inject into bean: routesHealthCheckRepository)&lt;/tt&gt; with camel 2.20.2 and spring-boot 1.5.9.&lt;/p&gt;

&lt;p&gt;Is there information I can supply to help you getting this fixed?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16343436" author="lb" created="Mon, 29 Jan 2018 14:54:54 +0000"  >&lt;p&gt;Do you have an example that triggers the warning ?&lt;/p&gt;</comment>
                            <comment id="16470356" author="lb" created="Thu, 10 May 2018 12:58:38 +0000"  >
&lt;p&gt;There are some cases where a bean of type CamelContextAware needs to be initialized before the camel context is configured, in particular this can happen with spring boot auto-configuration ordering so i.e. you want to provide a bean that CamelAutoConfiguration loads upon context configuration (such as HealthCheckRepository). &lt;/p&gt;

&lt;p&gt;In this case the camel post processor is not able to inject a camel context instance so I&apos;d propose to add an annotation like @LazyContextBinding which can be used to instruct the post processor that it is ok not to inject a camel context if it is not found.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davsclaus&quot; class=&quot;user-hover&quot; rel=&quot;davsclaus&quot;&gt;davsclaus&lt;/a&gt; make sense ?&lt;/p&gt;</comment>
                            <comment id="16475842" author="davsclaus" created="Tue, 15 May 2018 13:38:05 +0000"  >&lt;p&gt;Do we really see this problem still? I can understand the lifecycle circular issue you talk about, eg CamelContext is being created itself, and then some custom bean is inject that is supposely camel context aware that gets a null camel context as its not ready yet.&lt;/p&gt;

&lt;p&gt;But that custom bean still need easy access to CamelContext. Passing in null would be bad.&#160;&lt;/p&gt;

&lt;p&gt;Maybe there is a way to register those beans on camelcontext in a temporary list that they should have camel context injected later. And then CamelContext will inject itself later in its doStart lifecycle.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</comment>
                            <comment id="16475857" author="lb" created="Tue, 15 May 2018 13:49:49 +0000"  >&lt;p&gt;Yeah this is basically what @LazyContextBinding or @DeferredContextBinding is meant, once the camel context is starting up, it search for bean of type CamelContextAware and set itself as camel context if they are annotated with one of the two annotations. The post processor then knows that it is ok not to set the camel context if it is not yet available.&lt;/p&gt;</comment>
                            <comment id="16475861" author="davsclaus" created="Tue, 15 May 2018 13:51:05 +0000"  >&lt;p&gt;Perfect&lt;/p&gt;

&lt;p&gt;+1&lt;/p&gt;</comment>
                            <comment id="16643482" author="githubbot" created="Tue, 9 Oct 2018 14:06:45 +0000"  >&lt;p&gt;GitHub user lburgazzoli opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/2558&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2558&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12087&quot; title=&quot;camel-core: WARN No CamelContext defined yet so cannot inject into bean&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12087&quot;&gt;&lt;del&gt;CAMEL-12087&lt;/del&gt;&lt;/a&gt;: camel-core: WARN No CamelContext defined yet so cannot inject into bean&lt;/p&gt;



&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/lburgazzoli/apache-camel&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/lburgazzoli/apache-camel&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12087&quot; title=&quot;camel-core: WARN No CamelContext defined yet so cannot inject into bean&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12087&quot;&gt;&lt;del&gt;CAMEL-12087&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/2558.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2558.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #2558&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit fda0ce6d16f812b4f1f60a87a4b417786250b69f&lt;br/&gt;
Author: lburgazzoli &amp;lt;lburgazzoli@...&amp;gt;&lt;br/&gt;
Date:   2018-10-09T14:06:13Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12087&quot; title=&quot;camel-core: WARN No CamelContext defined yet so cannot inject into bean&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12087&quot;&gt;&lt;del&gt;CAMEL-12087&lt;/del&gt;&lt;/a&gt;: camel-core: WARN No CamelContext defined yet so cannot inject into bean&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16643484" author="githubbot" created="Tue, 9 Oct 2018 14:09:42 +0000"  >&lt;p&gt;oscerd commented on issue #2558: &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12087&quot; title=&quot;camel-core: WARN No CamelContext defined yet so cannot inject into bean&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12087&quot;&gt;&lt;del&gt;CAMEL-12087&lt;/del&gt;&lt;/a&gt;: camel-core: WARN No CamelContext defined yet so cannot inject into bean&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/camel/pull/2558#issuecomment-428206855&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2558#issuecomment-428206855&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   @davsclaus, since this is a bug I&apos;m thinking about backporting it on 2.21.x and 2.22.x. Does it work for you?&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16643502" author="githubbot" created="Tue, 9 Oct 2018 14:26:26 +0000"  >&lt;p&gt;davsclaus commented on issue #2558: &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12087&quot; title=&quot;camel-core: WARN No CamelContext defined yet so cannot inject into bean&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12087&quot;&gt;&lt;del&gt;CAMEL-12087&lt;/del&gt;&lt;/a&gt;: camel-core: WARN No CamelContext defined yet so cannot inject into bean&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/camel/pull/2558#issuecomment-428213410&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2558#issuecomment-428213410&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   +1&lt;/p&gt;

&lt;p&gt;   Yeah sure although its a harmless WARN but would be nice to not show. &lt;/p&gt;


&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16643508" author="githubbot" created="Tue, 9 Oct 2018 14:30:03 +0000"  >&lt;p&gt;oscerd commented on issue #2558: &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12087&quot; title=&quot;camel-core: WARN No CamelContext defined yet so cannot inject into bean&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12087&quot;&gt;&lt;del&gt;CAMEL-12087&lt;/del&gt;&lt;/a&gt;: camel-core: WARN No CamelContext defined yet so cannot inject into bean&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/camel/pull/2558#issuecomment-428214869&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2558#issuecomment-428214869&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Maybe it&apos;s better to change to debug?&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16643584" author="githubbot" created="Tue, 9 Oct 2018 15:04:04 +0000"  >&lt;p&gt;lburgazzoli commented on issue #2558: &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12087&quot; title=&quot;camel-core: WARN No CamelContext defined yet so cannot inject into bean&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12087&quot;&gt;&lt;del&gt;CAMEL-12087&lt;/del&gt;&lt;/a&gt;: camel-core: WARN No CamelContext defined yet so cannot inject into bean&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/camel/pull/2558#issuecomment-428228640&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2558#issuecomment-428228640&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   If there&apos;s no objection, I&apos;m going to merge it. the log level can be changed later &lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16643585" author="githubbot" created="Tue, 9 Oct 2018 15:05:06 +0000"  >&lt;p&gt;oscerd commented on issue #2558: &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12087&quot; title=&quot;camel-core: WARN No CamelContext defined yet so cannot inject into bean&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12087&quot;&gt;&lt;del&gt;CAMEL-12087&lt;/del&gt;&lt;/a&gt;: camel-core: WARN No CamelContext defined yet so cannot inject into bean&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/camel/pull/2558#issuecomment-428229004&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2558#issuecomment-428229004&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Go for it&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16643600" author="githubbot" created="Tue, 9 Oct 2018 15:12:41 +0000"  >&lt;p&gt;lburgazzoli closed pull request #2558: &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12087&quot; title=&quot;camel-core: WARN No CamelContext defined yet so cannot inject into bean&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12087&quot;&gt;&lt;del&gt;CAMEL-12087&lt;/del&gt;&lt;/a&gt;: camel-core: WARN No CamelContext defined yet so cannot inject into bean&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/camel/pull/2558&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2558&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/camel-core/src/main/java/org/apache/camel/DeferredContextBinding.java b/camel-core/src/main/java/org/apache/camel/DeferredContextBinding.java&lt;br/&gt;
new file mode 100644&lt;br/&gt;
index 00000000000..1bf79272a0c&lt;br/&gt;
&amp;#8212; /dev/null&lt;br/&gt;
+++ b/camel-core/src/main/java/org/apache/camel/DeferredContextBinding.java&lt;br/&gt;
@@ -0,0 +1,36 @@&lt;br/&gt;
+/**&lt;br/&gt;
+ * Licensed to the Apache Software Foundation (ASF) under one or more&lt;br/&gt;
+ * contributor license agreements.  See the NOTICE file distributed with&lt;br/&gt;
+ * this work for additional information regarding copyright ownership.&lt;br/&gt;
+ * The ASF licenses this file to You under the Apache License, Version 2.0&lt;br/&gt;
+ * (the &quot;License&quot;); you may not use this file except in compliance with&lt;br/&gt;
+ * the License.  You may obtain a copy of the License at&lt;br/&gt;
+ *&lt;br/&gt;
+ *      &lt;a href=&quot;http://www.apache.org/licenses/LICENSE-2.0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.apache.org/licenses/LICENSE-2.0&lt;/a&gt;&lt;br/&gt;
+ *&lt;br/&gt;
+ * Unless required by applicable law or agreed to in writing, software&lt;br/&gt;
+ * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,&lt;br/&gt;
+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.&lt;br/&gt;
+ * See the License for the specific language governing permissions and&lt;br/&gt;
+ * limitations under the License.&lt;br/&gt;
+ */&lt;br/&gt;
+package org.apache.camel;&lt;br/&gt;
+&lt;br/&gt;
+import java.lang.annotation.Documented;&lt;br/&gt;
+import java.lang.annotation.ElementType;&lt;br/&gt;
+import java.lang.annotation.Retention;&lt;br/&gt;
+import java.lang.annotation.RetentionPolicy;&lt;br/&gt;
+import java.lang.annotation.Target;&lt;br/&gt;
+&lt;br/&gt;
+/**&lt;br/&gt;
+ * Used to indicate that if the target type is &lt;/p&gt;
{@link CamelContextAware}
&lt;p&gt;, the&lt;br/&gt;
+ * context does not need to be mandatory injected during bean post processing but&lt;br/&gt;
+ * can be injected later on as example during Camel Context configuration.&lt;br/&gt;
+ *&lt;br/&gt;
+ * See &amp;lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12087&quot;&amp;gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12087&quot; title=&quot;camel-core: WARN No CamelContext defined yet so cannot inject into bean&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12087&quot;&gt;&lt;del&gt;CAMEL-12087&lt;/del&gt;&lt;/a&gt;&amp;lt;/a&amp;gt; for additional information.&lt;br/&gt;
+ */&lt;br/&gt;
+@Retention(RetentionPolicy.RUNTIME)&lt;br/&gt;
+@Documented&lt;br/&gt;
+@Target(&lt;/p&gt;
{ElementType.TYPE}
&lt;p&gt;)&lt;br/&gt;
+public @interface DeferredContextBinding &lt;/p&gt;
{
+}
&lt;p&gt;diff --git a/camel-core/src/main/java/org/apache/camel/impl/DefaultCamelBeanPostProcessor.java b/camel-core/src/main/java/org/apache/camel/impl/DefaultCamelBeanPostProcessor.java&lt;br/&gt;
index 10966266521..63cf335b726 100644&lt;br/&gt;
&amp;#8212; a/camel-core/src/main/java/org/apache/camel/impl/DefaultCamelBeanPostProcessor.java&lt;br/&gt;
+++ b/camel-core/src/main/java/org/apache/camel/impl/DefaultCamelBeanPostProcessor.java&lt;br/&gt;
@@ -22,6 +22,7 @@&lt;br/&gt;
 import org.apache.camel.BeanInject;&lt;br/&gt;
 import org.apache.camel.CamelContext;&lt;br/&gt;
 import org.apache.camel.CamelContextAware;&lt;br/&gt;
+import org.apache.camel.DeferredContextBinding;&lt;br/&gt;
 import org.apache.camel.EndpointInject;&lt;br/&gt;
 import org.apache.camel.Produce;&lt;br/&gt;
 import org.apache.camel.PropertyInject;&lt;br/&gt;
@@ -64,7 +65,7 @@ public DefaultCamelBeanPostProcessor(CamelContext camelContext) {&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;initialization callbacks (like &amp;lt;code&amp;gt;afterPropertiesSet&amp;lt;/code&amp;gt;&lt;/li&gt;
	&lt;li&gt;or a custom init-method). The bean will already be populated with property values.&lt;/li&gt;
	&lt;li&gt;The returned bean instance may be a wrapper around the original.&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;*&lt;br/&gt;
+     *&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
	&lt;li&gt;@param bean the new bean instance&lt;/li&gt;
	&lt;li&gt;@param beanName the name of the bean&lt;/li&gt;
	&lt;li&gt;@return the bean instance to use, either the original or a wrapped one; if&lt;br/&gt;
@@ -84,10 +85,12 @@ public Object postProcessBeforeInitialization(Object bean, String beanName) thro&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;         if (bean instanceof CamelContextAware &amp;amp;&amp;amp; canSetCamelContext(bean, beanName)) {&lt;br/&gt;
             CamelContextAware contextAware = (CamelContextAware)bean;&lt;br/&gt;
+            DeferredContextBinding deferredBinding = bean.getClass().getAnnotation(DeferredContextBinding.class);&lt;br/&gt;
             CamelContext context = getOrLookupCamelContext();&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;if (context == null) {&lt;br/&gt;
+&lt;br/&gt;
+            if (context == null &amp;amp;&amp;amp; deferredBinding == null) {&lt;br/&gt;
                 LOG.warn(&quot;No CamelContext defined yet so cannot inject into bean: {}&quot;, beanName);&lt;/li&gt;
	&lt;li&gt;} else 
{
+            }
&lt;p&gt; else if (context != null) &lt;/p&gt;
{
                 contextAware.setCamelContext(context);
             }
&lt;p&gt;         }&lt;br/&gt;
@@ -100,7 +103,7 @@ public Object postProcessBeforeInitialization(Object bean, String beanName) thro&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
	&lt;li&gt;initialization callbacks (like &amp;lt;code&amp;gt;afterPropertiesSet&amp;lt;/code&amp;gt;&lt;/li&gt;
	&lt;li&gt;or a custom init-method). The bean will already be populated with property values.&lt;/li&gt;
	&lt;li&gt;The returned bean instance may be a wrapper around the original.&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;*&lt;br/&gt;
+     *&lt;/li&gt;
&lt;/ul&gt;
&lt;ul&gt;
	&lt;li&gt;@param bean the new bean instance&lt;/li&gt;
	&lt;li&gt;@param beanName the name of the bean&lt;/li&gt;
	&lt;li&gt;@return the bean instance to use, either the original or a wrapped one; if&lt;br/&gt;
@@ -193,7 +196,7 @@ public void injectField(Field field, String endpointUri, String endpointRef, Str&lt;br/&gt;
                                Object bean, String beanName) 
{
         injectField(field, endpointUri, endpointRef, endpointProperty, bean, beanName, true);
     }&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;&lt;p&gt;+&lt;br/&gt;
     public void injectField(Field field, String endpointUri, String endpointRef, String endpointProperty,&lt;br/&gt;
                                Object bean, String beanName, boolean binding) {&lt;br/&gt;
         ReflectionHelper.setField(field, bean,&lt;br/&gt;
diff --git a/camel-core/src/main/java/org/apache/camel/impl/health/RoutesHealthCheckRepository.java b/camel-core/src/main/java/org/apache/camel/impl/health/RoutesHealthCheckRepository.java&lt;br/&gt;
index 637a805f9d6..7727b800919 100644&lt;/p&gt;
	&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
		&lt;li&gt;
		&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
			&lt;li&gt;a/camel-core/src/main/java/org/apache/camel/impl/health/RoutesHealthCheckRepository.java&lt;br/&gt;
+++ b/camel-core/src/main/java/org/apache/camel/impl/health/RoutesHealthCheckRepository.java&lt;br/&gt;
@@ -29,11 +29,13 @@&lt;/li&gt;
		&lt;/ul&gt;
		&lt;/li&gt;
	&lt;/ul&gt;
	&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt; import org.apache.camel.CamelContext;&lt;br/&gt;
 import org.apache.camel.CamelContextAware;&lt;br/&gt;
+import org.apache.camel.DeferredContextBinding;&lt;br/&gt;
 import org.apache.camel.Route;&lt;br/&gt;
 import org.apache.camel.api.management.mbean.ManagedRouteMBean;&lt;br/&gt;
 import org.apache.camel.health.HealthCheck;&lt;br/&gt;
 import org.apache.camel.health.HealthCheckRepository;&lt;/p&gt;

&lt;p&gt;+@DeferredContextBinding&lt;br/&gt;
 public class RoutesHealthCheckRepository implements CamelContextAware, HealthCheckRepository {&lt;br/&gt;
     private final ConcurrentMap&amp;lt;Route, HealthCheck&amp;gt; checks;&lt;br/&gt;
     private Set&amp;lt;String&amp;gt; blacklist;&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16643601" author="githubbot" created="Tue, 9 Oct 2018 15:12:41 +0000"  >&lt;p&gt;Github user lburgazzoli closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/2558&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2558&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16945536" author="onders" created="Mon, 7 Oct 2019 01:58:51 +0000"  >&lt;p&gt;i think i see similar issue in kubernetes component.&lt;/p&gt;

&lt;p&gt;is there any workaround&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;application-integration-messages&amp;#93;&lt;/span&gt; 07-Oct-2019 | 01:32:42.000866 | &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; | WARN | o.a.c.i.DefaultCamelBeanPostProcessor | | | No CamelContext defined yet so cannot inject into bean: kubernetes-cluster-service&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;application-integration-messages&amp;#93;&lt;/span&gt; 07-Oct-2019 | 01:32:42.000867 | &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; | INFO | o.a.c.s.boot.CamelAutoConfiguration | | | Using CamelClusterService with id: null and implementation: org.apache.camel.component.kubernetes.cluster.KubernetesClusterService@5fcacc0&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;application-integration-messages&amp;#93;&lt;/span&gt; 07-Oct-2019 | 01:32:43.000050 | &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; | DEBUG | o.a.c.i.c.AbstractCamelClusterService | | | Retain view lock2, old-refs=0&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;application-integration-messages&amp;#93;&lt;/span&gt; 07-Oct-2019 | 01:32:43.000050 | &lt;span class=&quot;error&quot;&gt;&amp;#91;main&amp;#93;&lt;/span&gt; | DEBUG | o.a.c.i.c.AbstractCamelClusterService | | | Can&apos;t start view lock2 as cluster service is not running, view will be started on service start-up&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13202045">CAMEL-12975</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            6 years, 6 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3nzfz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>