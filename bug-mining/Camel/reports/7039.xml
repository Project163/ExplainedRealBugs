<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 11:09:51 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-21769] camel-aws-sqs - Error is causing the sqs message to be extended forever</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-21769</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;Below scenario the processing of the message threw memory error. so further processing of the exchange aborted, however the exchange couldn&apos;t get released from Sqs2Consumer timeoutExtender, as a result the message gets visibility extended forever causing the entire aws sqs queue to get blocked.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
2025-02-18T00:01:20.793Z [C#964 T#45 - aws2-sqs:&lt;span class=&quot;code-comment&quot;&gt;//prod_sync_events.fifo - JE_ID 45901665] #033[36mo.a.c.s.ScheduledPollConsumer#033[m #033[1;31mERROR#033[m - Error occurred during running scheduled task on: aws2-sqs://prod_sync_events.fifo?amazonSQSClient=%23sqsClient&amp;amp;configuration=%23syncEventsSQSConfiguration, due: Java heap space. This exception is ignored and the task will run again on next poll.
&lt;/span&gt;java.lang.OutOfMemoryError: Java heap space
#011at java.base/java.util.Arrays.copyOf(Arrays.java:3537) ~[?:?]
#011at java.base/java.io.ByteArrayOutputStream.ensureCapacity(ByteArrayOutputStream.java:100) ~[?:?]
#011at java.base/java.io.ByteArrayOutputStream.write(ByteArrayOutputStream.java:130) ~[?:?]
#011at org.apache.camel.converter.stream.CachedOutputStream.write(CachedOutputStream.java:108) ~[camel-support-4.8.0.jar:4.8.0]
#011at org.apache.camel.support.builder.OutputStreamBuilder.write(OutputStreamBuilder.java:58) ~[camel-support-4.8.0.jar:4.8.0]
#011at java.base/java.io.InputStream.transferTo(InputStream.java:783) ~[?:?]
#011at org.apache.camel.util.IOHelper.copy(IOHelper.java:165) ~[camel-util-4.8.0.jar:4.8.0]
#011at org.apache.camel.component.http.HttpProducer.doExtractResponseBodyAsStream(HttpProducer.java:592) ~[camel-http-4.8.0.jar:4.8.0]
#011at org.apache.camel.component.http.HttpProducer.extractResponseBody(HttpProducer.java:579) ~[camel-http-4.8.0.jar:4.8.0]
#011at org.apache.camel.component.http.HttpProducer.populateResponse(HttpProducer.java:351) ~[camel-http-4.8.0.jar:4.8.0]
#011at org.apache.camel.component.http.HttpProducer.lambda$process$1(HttpProducer.java:272) ~[camel-http-4.8.0.jar:4.8.0]
#011at org.apache.camel.component.http.HttpProducer$$Lambda$2092/0x00007f8880e1bc78.handleResponse(Unknown Source) ~[?:?]
#011at org.apache.camel.component.http.HttpProducer.executeMethod(HttpProducer.java:486) ~[camel-http-4.8.0.jar:4.8.0]
#011at org.apache.camel.component.http.HttpProducer.process(HttpProducer.java:247) ~[camel-http-4.8.0.jar:4.8.0]
#011at org.apache.camel.support.AsyncProcessorConverterHelper$ProcessorToAsyncProcessorBridge.process(AsyncProcessorConverterHelper.java:65) ~[camel-support-4.8.0.jar:4.8.0]
#011at org.apache.camel.impl.engine.SharedCamelInternalProcessor.processNonTransacted(SharedCamelInternalProcessor.java:156) ~[camel-base-engine-4.8.0.jar:4.8.0]
#011at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:133) ~[camel-base-engine-4.8.0.jar:4.8.0]
#011at org.apache.camel.impl.engine.SharedCamelInternalProcessor$1.process(SharedCamelInternalProcessor.java:89) ~[camel-base-engine-4.8.0.jar:4.8.0]
#011at org.apache.camel.impl.engine.DefaultAsyncProcessorAwaitManager.process(DefaultAsyncProcessorAwaitManager.java:82) ~[camel-base-engine-4.8.0.jar:4.8.0]
#011at org.apache.camel.impl.engine.SharedCamelInternalProcessor.process(SharedCamelInternalProcessor.java:86) ~[camel-base-engine-4.8.0.jar:4.8.0]
#011at org.apache.camel.support.cache.DefaultProducerCache.send(DefaultProducerCache.java:178) ~[camel-support-4.8.0.jar:4.8.0]
#011at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:176) ~[camel-base-engine-4.8.0.jar:4.8.0]
#011at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:172) ~[camel-base-engine-4.8.0.jar:4.8.0]
#011at org.apache.camel.impl.engine.DefaultProducerTemplate.send(DefaultProducerTemplate.java:137) ~[camel-base-engine-4.8.0.jar:4.8.0]
#011at com.ac.system.service.ACMHTTPService.execute(ACMHTTPService.kt:49) ~[classes/:?]
#011at com.ac.system.core.ACMServiceManager.getEntityList(ACMServiceManager.kt:46) ~[classes/:?]
#011at com.ac.system.job.ACMProjectJob.processUpdatedProjectEvent(ACMProjectJob.kt:51) ~[classes/:?]
#011at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]
#011at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[?:?]
#011at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]
#011at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[?:?]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13609216">CAMEL-21769</key>
            <summary>camel-aws-sqs - Error is causing the sqs message to be extended forever</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="narsi-nallamilli">Narsi Reddy Nallamilli</reporter>
                        <labels>
                    </labels>
                <created>Thu, 20 Feb 2025 12:37:35 +0000</created>
                <updated>Wed, 26 Feb 2025 09:22:35 +0000</updated>
                            <resolved>Fri, 21 Feb 2025 09:01:20 +0000</resolved>
                                    <version>4.8.0</version>
                                    <fixVersion>4.8.4</fixVersion>
                    <fixVersion>4.10.1</fixVersion>
                    <fixVersion>4.11.0</fixVersion>
                                    <component>camel-aws2-sqs</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17928797" author="davsclaus" created="Thu, 20 Feb 2025 13:45:02 +0000"  >&lt;p&gt;try with latest 3.8.3 or 4.10.0 release&lt;/p&gt;</comment>
                            <comment id="17928799" author="davsclaus" created="Thu, 20 Feb 2025 13:45:38 +0000"  >&lt;p&gt;Also you need to show what code you do, or if possible to build some kind of reproducer&lt;/p&gt;</comment>
                            <comment id="17929080" author="davsclaus" created="Fri, 21 Feb 2025 09:01:20 +0000"  >&lt;p&gt;Okay so this kind of error is no longer swallowed&lt;/p&gt;</comment>
                            <comment id="17929089" author="JIRAUSER283233" created="Fri, 21 Feb 2025 09:27:20 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davsclaus&quot; class=&quot;user-hover&quot; rel=&quot;davsclaus&quot;&gt;davsclaus&lt;/a&gt; does this handling remove the exchange from Sqs2Consumer class Timeout extender entries? Which was the issue right now.&lt;/p&gt;</comment>
                            <comment id="17929090" author="davsclaus" created="Fri, 21 Feb 2025 09:28:57 +0000"  >&lt;p&gt;You have a fatal error - the JVM should crash&lt;/p&gt;</comment>
                            <comment id="17929094" author="JIRAUSER283233" created="Fri, 21 Feb 2025 09:35:54 +0000"  >&lt;p&gt;Nope the jvm doesn&apos;t crashes and the app continues to run in this instance. It&apos;s just that thread which gets sacrificed. Since the app continues normally and that specific exchange gets trapped it continues to extend the visibility . I am sure I have tested it the app runs fine despite the error.&lt;/p&gt;</comment>
                            <comment id="17930315" author="JIRAUSER283233" created="Tue, 25 Feb 2025 12:25:11 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davsclaus&quot; class=&quot;user-hover&quot; rel=&quot;davsclaus&quot;&gt;davsclaus&lt;/a&gt; &lt;a href=&quot;https://github.com/apache/camel/pull/17262&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/17262&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            37 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1uc7c:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>