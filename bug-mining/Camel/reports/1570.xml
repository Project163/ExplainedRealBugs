<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 09:46:08 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-4370] It&apos;s hardly possible to use all expression of the Simple language to create file names in the file component</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-4370</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;Sometimes it can be necessary to use custom headers to create a file name.&lt;/p&gt;

&lt;p&gt;For example, I declare my file endpoint in the following manner:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&amp;lt;route id=&lt;span class=&quot;code-quote&quot;&gt;&quot;fileReader&quot;&lt;/span&gt;&amp;gt;
    &amp;lt;from uri=&lt;span class=&quot;code-quote&quot;&gt;&quot;file:&lt;span class=&quot;code-comment&quot;&gt;//rootFolder?move=.backup&amp;amp;amp;moveFailed=.error/${header.CustomHeader}&quot;&lt;/span&gt; /&amp;gt;
&lt;/span&gt;    &amp;lt;to uri=&lt;span class=&quot;code-quote&quot;&gt;&quot;file:&lt;span class=&quot;code-comment&quot;&gt;//out&quot;&lt;/span&gt;/&amp;gt;
&lt;/span&gt;&amp;lt;/route&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The header &quot;CustomHeader&quot; cannot be read because of the following snippets of code in the org.apache.camel.component.file.GenericFile&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;/**
 * Bind &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; GenericFile to an Exchange
 */
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void bindToExchange(Exchange exchange) {
    exchange.setProperty(FileComponent.FILE_EXCHANGE_FILE, &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;);
    GenericFileMessage&amp;lt;T&amp;gt; in = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; GenericFileMessage&amp;lt;T&amp;gt;(&lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;);
    exchange.setIn(in);
    populateHeaders(in);
}

/**
 * Populates the {@link GenericFileMessage} relevant headers
 *
 * @param message the message to populate with headers
 */
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void populateHeaders(GenericFileMessage&amp;lt;T&amp;gt; message) {
    &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (message != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
        message.setHeader(Exchange.FILE_NAME_ONLY, getFileNameOnly());
        message.setHeader(Exchange.FILE_NAME, getFileName());
        message.setHeader(&lt;span class=&quot;code-quote&quot;&gt;&quot;CamelFileAbsolute&quot;&lt;/span&gt;, isAbsolute());
        message.setHeader(&lt;span class=&quot;code-quote&quot;&gt;&quot;CamelFileAbsolutePath&quot;&lt;/span&gt;, getAbsoluteFilePath());

        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (isAbsolute()) {
            message.setHeader(Exchange.FILE_PATH, getAbsoluteFilePath());
        } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
            &lt;span class=&quot;code-comment&quot;&gt;// we must normalize path according to protocol &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; we build our own paths
&lt;/span&gt;            &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; path = normalizePathToProtocol(getEndpointPath() + File.separator + getRelativeFilePath());
            message.setHeader(Exchange.FILE_PATH, path);
        }

        message.setHeader(&lt;span class=&quot;code-quote&quot;&gt;&quot;CamelFileRelativePath&quot;&lt;/span&gt;, getRelativeFilePath());
        message.setHeader(Exchange.FILE_PARENT, getParent());

        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (getFileLength() &amp;gt;= 0) {
            message.setHeader(&lt;span class=&quot;code-quote&quot;&gt;&quot;CamelFileLength&quot;&lt;/span&gt;, getFileLength());
        }
        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (getLastModified() &amp;gt; 0) {
            message.setHeader(Exchange.FILE_LAST_MODIFIED, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Date(getLastModified()));
        }
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;As you can see a new &quot;in&quot; message is created and not all the headers from the original message are copied to it.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12519790">CAMEL-4370</key>
            <summary>It&apos;s hardly possible to use all expression of the Simple language to create file names in the file component</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="szhemzhitsky">Sergey Zhemzhitsky</reporter>
                        <labels>
                            <label>camel-file</label>
                    </labels>
                <created>Tue, 23 Aug 2011 06:17:09 +0000</created>
                <updated>Wed, 24 Aug 2011 08:49:18 +0000</updated>
                            <resolved>Wed, 24 Aug 2011 08:49:18 +0000</resolved>
                                    <version>2.7.1</version>
                                    <fixVersion>2.8.1</fixVersion>
                    <fixVersion>2.9.0</fixVersion>
                                    <component>camel-core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13090092" author="davsclaus" created="Wed, 24 Aug 2011 08:49:18 +0000"  >&lt;p&gt;Thanks for reporting.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>13790</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            14 years, 14 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i020in:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9685</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>