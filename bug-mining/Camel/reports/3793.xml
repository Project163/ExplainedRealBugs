<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:18:32 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-10247] OnException is overriding route Ids for the Route Definitions in the Camel Test</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-10247</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;When there is onException block in the Routes, Route Ids are overridden in the test (CBTS) class. &lt;/p&gt;

&lt;p&gt;Ex: &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;TestRoute &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; RouteBuilder {

	@Override
	&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void configure() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
		onException(Exception.class).id(&lt;span class=&quot;code-quote&quot;&gt;&quot;ExceptionId&quot;&lt;/span&gt;)
			.maximumRedeliveries(0)
			.handled(&lt;span class=&quot;code-keyword&quot;&gt;true&lt;/span&gt;)
			.setHeader(Exchange.HTTP_RESPONSE_CODE).constant(HttpURLConnection.HTTP_NOT_FOUND)
			.end()
			.stop();
		from(&lt;span class=&quot;code-quote&quot;&gt;&quot;file:foo&quot;&lt;/span&gt;).id(&lt;span class=&quot;code-quote&quot;&gt;&quot;foo&quot;&lt;/span&gt;)
			.to(&lt;span class=&quot;code-quote&quot;&gt;&quot;blah&quot;&lt;/span&gt;) 
			.end();
	}
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;A Camel test (using Camel Blueprint Test Support) is written for the above route, then found that Route Ids is overridden with &quot;route1&quot; in the route definition. When OnException block code is commented, route id is replaced with &quot;foo&quot; in the route definition in CBTS. This behavior can be reproduced consistently.  &lt;/p&gt;

&lt;p&gt;Please let me know if this is known behavior or needs fix.&lt;/p&gt;</description>
                <environment>&lt;p&gt;Camel, Karaf&lt;/p&gt;</environment>
        <key id="12997575">CAMEL-10247</key>
            <summary>OnException is overriding route Ids for the Route Definitions in the Camel Test</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="srinivas@live.com">Srinivas</reporter>
                        <labels>
                    </labels>
                <created>Tue, 16 Aug 2016 12:57:40 +0000</created>
                <updated>Wed, 17 Aug 2016 14:22:08 +0000</updated>
                            <resolved>Wed, 17 Aug 2016 14:22:06 +0000</resolved>
                                    <version>2.16.2</version>
                                                    <component>camel-blueprint</component>
                    <component>camel-core</component>
                    <component>camel-test</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="15422714" author="davsclaus" created="Tue, 16 Aug 2016 13:20:25 +0000"  >&lt;p&gt;The route id should be preserved. Can you try with latest 2.17.3 release. And also test outside OSGi with a plain camel-test unit test.&lt;/p&gt;</comment>
                            <comment id="15422783" author="srinivas@live.com" created="Tue, 16 Aug 2016 14:20:02 +0000"  >&lt;p&gt;Thanks for your quick response. I have changed the version of camel-core, camel-test, camel-test-blueprint to 2.17.3, CBTS test works with &quot;route1&quot; instead of route id given in the route. We use CBTS in our environment with karaf so may not be useful for us even if the test works in non OSGI environment. &lt;/p&gt;</comment>
                            <comment id="15422826" author="davsclaus" created="Tue, 16 Aug 2016 14:43:46 +0000"  >&lt;p&gt;Are you saying that the same problem is in 2.17.3 - that the route is not named &quot;foo&quot; when you add onException?&lt;/p&gt;</comment>
                            <comment id="15422847" author="srinivas@live.com" created="Tue, 16 Aug 2016 14:57:29 +0000"  >&lt;p&gt;Yes.&lt;/p&gt;</comment>
                            <comment id="15424074" author="davsclaus" created="Wed, 17 Aug 2016 08:13:15 +0000"  >&lt;p&gt;I cannot reproduce your issue&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/camel/blob/master/components/camel-test-blueprint/src/test/java/org/apache/camel/test/blueprint/OnExceptionRouteIdTest.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/blob/master/components/camel-test-blueprint/src/test/java/org/apache/camel/test/blueprint/OnExceptionRouteIdTest.java&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/camel/blob/master/components/camel-test-blueprint/src/test/java/org/apache/camel/test/blueprint/OnExceptionRouteIdRouteBuilder.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/blob/master/components/camel-test-blueprint/src/test/java/org/apache/camel/test/blueprint/OnExceptionRouteIdRouteBuilder.java&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Not sure what you do. But can you attach some unit test code that reproduces this or create a project on github etc.&lt;/p&gt;</comment>
                            <comment id="15424564" author="srinivas@live.com" created="Wed, 17 Aug 2016 14:02:15 +0000"  >&lt;p&gt;Thanks for your response.&lt;/p&gt;

&lt;p&gt;1. I have changed the bug example to use id(&quot;foo&quot;) because I am using Id not RouteId. (when I copied an example I messed up).&lt;br/&gt;
2. Your example works and the difference is as stated above, you are using routeId not Id. And my code also works when I have changed from Id to RouteId&lt;br/&gt;
4. I am pretty sure we are using id everywhere and id doesn&apos;t work when onException is present and routeId works.&lt;br/&gt;
3. Which one is recommend to use id or routeId in all situations?&lt;/p&gt;
</comment>
                            <comment id="15424599" author="davsclaus" created="Wed, 17 Aug 2016 14:21:45 +0000"  >&lt;p&gt;To set the id of the route, then in Java DSL *&lt;b&gt;always&lt;/b&gt;* use routeId&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 13 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i32d8f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>