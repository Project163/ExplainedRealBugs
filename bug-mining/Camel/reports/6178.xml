<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:56:45 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-18225] Can&apos;t load custom dataformat</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-18225</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;I created a custom dataformat and call it with the XML-IO DSL like this:&lt;/p&gt;

&lt;p&gt;&#160; &#160; &amp;lt;unmarshal&amp;gt;&lt;br/&gt;
&#160; &#160; &#160; &amp;lt;custom ref=&quot;myCustomDataformat&quot;/&amp;gt;&lt;br/&gt;
&#160; &#160; &amp;lt;/unmarshal&amp;gt;&lt;/p&gt;

&lt;p&gt;I get the following error:&lt;/p&gt;

&lt;p&gt;org.apache.camel.xml.io.XmlPullParserException: Unexpected element &apos;{}custom&apos;&lt;/p&gt;

&lt;p&gt;According to the XSD I would expect the custom element to be available&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://camel.apache.org/schema/spring/camel-spring-3.14.3.xsd&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://camel.apache.org/schema/spring/camel-spring-3.14.3.xsd&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Also in Camel in Action2 (page 340) there is an example of this.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I load the XML with the &quot;xml-io&quot; library and &quot;dataformat&quot; is also on the classpath.&lt;/p&gt;

&lt;p&gt;On the documentation page:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://camel.apache.org/components/3.14.x/dataformats/index.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://camel.apache.org/components/3.14.x/dataformats/index.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The &apos;custom&apos; dataformat isn&apos;t listed however and there is no documentation of it. Is it still supported?&lt;/p&gt;

&lt;p&gt;Complete stacktrace:&lt;/p&gt;

&lt;p&gt;org.apache.camel.xml.io.XmlPullParserException: Unexpected element &apos;{}custom&apos;&lt;br/&gt;
&#160; &#160; &#160; &#160; at org.apache.camel.xml.in.BaseParser.handleUnexpectedElement(BaseParser.java:187)&lt;br/&gt;
&#160; &#160; &#160; &#160; at org.apache.camel.xml.in.BaseParser.doParse(BaseParser.java:107)&lt;br/&gt;
&#160; &#160; &#160; &#160; at org.apache.camel.xml.in.ModelParser.doParseUnmarshalDefinition(ModelParser.java:1449)&lt;br/&gt;
&#160; &#160; &#160; &#160; at org.apache.camel.xml.in.ModelParser.doParseProcessorDefinitionRef(ModelParser.java:3212)&lt;br/&gt;
&#160; &#160; &#160; &#160; at org.apache.camel.xml.in.ModelParser.lambda$outputDefinitionElementHandler$4(ModelParser.java:132)&lt;br/&gt;
&#160; &#160; &#160; &#160; at org.apache.camel.xml.in.ModelParser.lambda$doParseRouteDefinition$71(ModelParser.java:1031)&lt;br/&gt;
&#160; &#160; &#160; &#160; at org.apache.camel.xml.in.BaseParser.doParse(BaseParser.java:106)&lt;br/&gt;
&#160; &#160; &#160; &#160; at org.apache.camel.xml.in.ModelParser.doParseRouteDefinition(ModelParser.java:1005)&lt;br/&gt;
&#160; &#160; &#160; &#160; at org.apache.camel.xml.in.ModelParser.parseSingleRoutesDefinition(ModelParser.java:1185)&lt;br/&gt;
&#160; &#160; &#160; &#160; at org.apache.camel.xml.in.ModelParser.parseRoutesDefinition(ModelParser.java:1178)&lt;br/&gt;
&#160; &#160; &#160; &#160; at org.apache.camel.dsl.xml.io.XmlRoutesBuilderLoader$1.configure(XmlRoutesBuilderLoader.java:78)&lt;br/&gt;
&#160; &#160; &#160; &#160; at org.apache.camel.builder.RouteBuilder.checkInitialized(RouteBuilder.java:607)&lt;br/&gt;
&#160; &#160; &#160; &#160; at org.apache.camel.builder.RouteBuilder.configureRoutes(RouteBuilder.java:553)&lt;br/&gt;
&#160; &#160; &#160; &#160; at org.apache.camel.builder.RouteBuilder.updateRoutesToCamelContext(RouteBuilder.java:515)&lt;br/&gt;
&#160; &#160; &#160; &#160; at org.apache.camel.spi.RoutesLoader.updateRoutes(RoutesLoader.java:105)&lt;br/&gt;
&#160; &#160; &#160; &#160; at org.apache.camel.spi.RoutesLoader.updateRoutes(RoutesLoader.java:87)&lt;/p&gt;</description>
                <environment>&lt;p&gt;Java: JDK 11 (Adoptium Temurin)&lt;/p&gt;

&lt;p&gt;OS: Windows 10&lt;/p&gt;</environment>
        <key id="13465929">CAMEL-18225</key>
            <summary>Can&apos;t load custom dataformat</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="10004">Not A Bug</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="skin27">Raymond</reporter>
                        <labels>
                    </labels>
                <created>Fri, 24 Jun 2022 06:16:31 +0000</created>
                <updated>Fri, 24 Jun 2022 12:26:24 +0000</updated>
                            <resolved>Fri, 24 Jun 2022 06:39:05 +0000</resolved>
                                    <version>3.14.3</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17558342" author="davsclaus" created="Fri, 24 Jun 2022 06:35:55 +0000"  >&lt;p&gt;Can you try with 3.17.0 release, and also put together a reproducer example that is easy for us to run and try.&lt;/p&gt;</comment>
                            <comment id="17558344" author="davsclaus" created="Fri, 24 Jun 2022 06:37:28 +0000"  >&lt;p&gt;Ah its named customDataFormat in 3.14.x (it may be that the xml-io parser uses that name).&lt;/p&gt;

&lt;p&gt;Camel 3.15 onwards the data formats names have been aligned and renamed, see the upgrade guide:&lt;br/&gt;
&lt;a href=&quot;https://camel.apache.org/manual/camel-3x-upgrade-guide-3_15.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://camel.apache.org/manual/camel-3x-upgrade-guide-3_15.html&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17558362" author="skin27" created="Fri, 24 Jun 2022 07:25:58 +0000"  >&lt;p&gt;I can confirm that:&lt;/p&gt;

&lt;p&gt;&#160; &#160; &amp;lt;unmarshal&amp;gt;&lt;br/&gt;
&#160; &#160; &#160; &amp;lt;customDataFormat ref=&quot;myCustomDataFormat&quot;/&amp;gt;&lt;br/&gt;
&#160; &#160; &amp;lt;/unmarshal&amp;gt;&lt;/p&gt;

&lt;p&gt;works in 3.14.3.&lt;/p&gt;

&lt;p&gt;I actually tried it based on the XSD, but I probably used customDataformat instead of customDataFormat... I also checked the migration guides (until 3.14), but couldn&apos;t find anything specific about the &quot;custom&quot; --&amp;gt; &quot;customDataFormat&quot;.&lt;/p&gt;

&lt;p&gt;Small question: In Camel 2 one could load dataformats like this:&lt;/p&gt;

&lt;p&gt;&amp;lt;camelContext xmlns=&quot;http://camel.apache.org/schema/spring&quot;&amp;gt;&lt;br/&gt;
&amp;lt;dataFormats&amp;gt;&lt;br/&gt;
&amp;lt;crypto id=&quot;myCrypto&quot; algorithm=&quot;DES&quot; keyRef=&quot;secretKey&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;/dataFormats&amp;gt;&lt;br/&gt;
&amp;lt;route&amp;gt;&lt;br/&gt;
&amp;lt;from uri=&quot;direct:start&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;marshal ref=&quot;myCrypto&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;to uri=&quot;mock:encrypted&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;unmarshal ref=&quot;myCrypto&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;to uri=&quot;mock:unencrypted&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;/route&amp;gt;&lt;br/&gt;
&amp;lt;/camelContext&amp;gt;&lt;/p&gt;

&lt;p&gt;I know load it like this:&lt;/p&gt;

&lt;p&gt;&amp;lt;route&amp;gt;&lt;br/&gt;
&amp;lt;from uri=&quot;direct:start&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;marshal ref=&quot;myCrypto&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;to uri=&quot;mock:encrypted&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;unmarshal ref=&quot;myCrypto&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;to uri=&quot;mock:unencrypted&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;/route&amp;gt;&lt;/p&gt;

&lt;p&gt;Is it possible to load dataformats centrally from routeConfiguration? or do I need to pack it into&lt;/p&gt;

&lt;p&gt;&amp;lt;routes xmlns=&quot;http://camel.apache.org/schema/spring&quot;&amp;gt;&lt;br/&gt;
&amp;lt;dataFormats&amp;gt;&lt;br/&gt;
&amp;lt;crypto id=&quot;myCrypto&quot; algorithm=&quot;DES&quot; keyRef=&quot;secretKey&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;/dataFormats&amp;gt;&lt;br/&gt;
&amp;lt;route&amp;gt;&lt;br/&gt;
&amp;lt;from uri=&quot;direct:start&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;marshal ref=&quot;myCrypto&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;to uri=&quot;mock:encrypted&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;unmarshal ref=&quot;myCrypto&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;to uri=&quot;mock:unencrypted&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;/route&amp;gt;&lt;br/&gt;
&amp;lt;/routes&amp;gt;&lt;/p&gt;</comment>
                            <comment id="17558407" author="davsclaus" created="Fri, 24 Jun 2022 09:42:42 +0000"  >&lt;p&gt;Route configuration can only configure those 4 things listed in the top of the page&lt;br/&gt;
&lt;a href=&quot;https://camel.apache.org/manual/route-configuration.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://camel.apache.org/manual/route-configuration.html&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17558450" author="skin27" created="Fri, 24 Jun 2022 11:38:14 +0000"  >&lt;p&gt;Yes, I found out. Tried both solutions I came up with in my last post. But they were not working. I got the route in Camel 2 format as input (which I can&apos;t control) so I needed to change it from:&lt;/p&gt;

&lt;p&gt;&amp;lt;camelContext xmlns=&quot;http://camel.apache.org/schema/spring&quot;&amp;gt;&lt;br/&gt;
&amp;lt;dataFormats&amp;gt;&lt;br/&gt;
&amp;lt;crypto id=&quot;myCrypto&quot; algorithm=&quot;DES&quot; keyRef=&quot;secretKey&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;/dataFormats&amp;gt;&lt;br/&gt;
&amp;lt;route&amp;gt;&lt;br/&gt;
&amp;lt;from uri=&quot;direct:start&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;marshal ref=&quot;myCrypto&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;to uri=&quot;mock:encrypted&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;unmarshal ref=&quot;myCrypto&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;to uri=&quot;mock:unencrypted&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;/route&amp;gt;&lt;br/&gt;
&amp;lt;/camelContext&amp;gt;&lt;/p&gt;

&lt;p&gt;to&lt;/p&gt;

&lt;p&gt;&amp;lt;route&amp;gt;&lt;br/&gt;
&amp;lt;from uri=&quot;direct:start&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;marshal ref=&quot;myCrypto&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;to uri=&quot;mock:encrypted&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;unmarshal&amp;gt;&lt;br/&gt;
&#160;&#160;&#160;&#160;&#160;&#160; &amp;lt;crypto algorithm=&quot;DES&quot; keyRef=&quot;secretKey&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;/unmarshal&amp;gt;&lt;br/&gt;
&amp;lt;to uri=&quot;mock:unencrypted&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;/route&amp;gt;&lt;/p&gt;

&lt;p&gt;or&lt;/p&gt;

&lt;p&gt;&amp;lt;route&amp;gt;&lt;br/&gt;
&amp;lt;from uri=&quot;direct:start&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;marshal ref=&quot;myCrypto&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;to uri=&quot;mock:encrypted&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;to uri=&quot;dataformat:crypto:unmarshal?algorithm=DES&amp;amp;keyRef=secretKey/&amp;gt;&lt;br/&gt;
&amp;lt;/unmarshal&amp;gt;&lt;br/&gt;
&amp;lt;to uri=&quot;mock:unencrypted&quot;/&amp;gt;&lt;br/&gt;
&amp;lt;/route&amp;gt;&lt;/p&gt;

&lt;p&gt;This works, but it would be nice to do if by reference and load it centrally from the routeConfiguration also.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13422905">CAMEL-17499</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 20 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z15xkw:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>