<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 09:53:08 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-5456] Context scoped exception clauses incorrectly applying across RouteBuilders</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-5456</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;The attached patch shows a bug in the DefaultExceptionPolicyStrategy or the way ExceptionPolicys are added to a RouteBuilder&apos;s errorhandler.&lt;/p&gt;

&lt;p&gt;In ContextScopedOnExceptionMultipleRouteBuildersReverseTest, the ordering of the routes causes the onException(IllegalArgumentException.class) to added to the ExceptionProcessors for the direct:foo-RouteBuilder. When the route is run, the OnExceptionDefinition matches exactly on the exception-type, despite this OnExceptionDefiniton being registered on a different RouteBuilder. As far as we can tell, the processor is later ignored because it&apos;s identified as being from a different route-context.&lt;/p&gt;

&lt;p&gt;We have attached corresponding tests for camel-spring that show that the issue is tied to alphabetical ordering of RouteBuilders when using contextscan.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12599590">CAMEL-5456</key>
            <summary>Context scoped exception clauses incorrectly applying across RouteBuilders</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="andreaja">Andreas Jacobsen</reporter>
                        <labels>
                    </labels>
                <created>Fri, 20 Jul 2012 07:42:00 +0000</created>
                <updated>Sun, 30 Sep 2012 12:12:55 +0000</updated>
                            <resolved>Sun, 30 Sep 2012 12:12:55 +0000</resolved>
                                    <version>2.10.0</version>
                                    <fixVersion>2.9.4</fixVersion>
                    <fixVersion>2.10.2</fixVersion>
                    <fixVersion>2.11.0</fixVersion>
                                    <component>camel-core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>6</watches>
                                                                                                                <comments>
                            <comment id="13439274" author="njiang" created="Wed, 22 Aug 2012 04:59:04 +0000"  >&lt;p&gt;Hi Andreas,&lt;/p&gt;

&lt;p&gt;If you are using Context scoped exception clause&#65292;the error handler will be affect across the CamelContext, as the JAVA DSL onException() is called one by one in the two different route builder, the route will be effected different if the onException is called in different sequences. I don&apos;t think there is way to fix it in JAVA DSL, unless we setup the context scoped exception in one RouteBuilders or using the route scoped exception clauses.&lt;/p&gt;

&lt;p&gt;The error the test can be fixed by setting the onException to be route scoped like the one I just committed a fixed test&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; into the trunk.&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;http://svn.apache.org/viewvc?rev=1375896&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=1375896&amp;amp;view=rev&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13439301" author="andreaja" created="Wed, 22 Aug 2012 06:01:23 +0000"  >&lt;p&gt;It can&apos;t possibly be correct that route-context-scoped exception clauses are dependent on the order of the routes they are tied to. That&apos;s insane. &lt;/p&gt;</comment>
                            <comment id="13439383" author="njiang" created="Wed, 22 Aug 2012 09:53:08 +0000"  >&lt;p&gt;That is caused by the onException() are called in different sequence in RouteBuilder.configure method.&lt;br/&gt;
If you are using the spring DSL, you will never have this kind of issue.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;   &amp;lt;camel&amp;gt;
      &amp;lt;onException&amp;gt;...&amp;lt;/onException&amp;gt;
      &amp;lt;onException&amp;gt;...&amp;lt;/onException&amp;gt;
      &amp;lt;route&amp;gt; ... &amp;lt;/route&amp;gt;
      &amp;lt;route&amp;gt; ... &amp;lt;/route&amp;gt;
   &amp;lt;/camel&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt; </comment>
                            <comment id="13439389" author="andreaja" created="Wed, 22 Aug 2012 10:05:37 +0000"  >&lt;p&gt;So we&apos;ve correctly identified a bug in the Java DSL then?&lt;/p&gt;</comment>
                            <comment id="13466223" author="davsclaus" created="Sat, 29 Sep 2012 13:05:47 +0000"  >&lt;p&gt;Yes this issue is related to Java DSL. It has a slightly different initialization logic than XML DSL etc.&lt;/p&gt;
</comment>
                    </comments>
                    <attachments>
                            <attachment id="12537315" name="camel-core-context-scope-bug.patch" size="9211" author="andreaja" created="Fri, 20 Jul 2012 07:42:36 +0000"/>
                            <attachment id="12537316" name="camel-spring-context-scope-bug.patch" size="10501" author="andreaja" created="Fri, 20 Jul 2012 07:42:36 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>241329</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 8 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0277b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>10768</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>