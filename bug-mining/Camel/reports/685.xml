<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 09:33:59 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-1689] JMS-Headers are ignored in Producer</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-1689</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;Camel jms producer ignores some JMSHeaders. For example the header JMSPriority is ignored - due to the comment in the code, because it is set by the producer. But it should not only be set by the produer due to the received message, it should also be possible to set a priority using the JMSPriority header on the consumer. (See also the option preserveMessageQos on the jms endpoint - if every JMSHeader is ignored by the producer it is impossible to set Qos-Properties on the message.)&lt;/p&gt;

&lt;p&gt;The reason for the bug is in org.apache.camel.component.jms.JmsBinding#appendJmsProperty. &lt;/p&gt;

&lt;p&gt;The follwoing JMS message headers are useful for sending messages and therefore should be copied to the jms message:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;JMSDestination&lt;/li&gt;
	&lt;li&gt;JMSDeliveryMode&lt;/li&gt;
	&lt;li&gt;JMSExpiration&lt;/li&gt;
	&lt;li&gt;JMSPriority&lt;/li&gt;
	&lt;li&gt;JMSMessageID&lt;/li&gt;
	&lt;li&gt;JMSTimestamp&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="12486579">CAMEL-1689</key>
            <summary>JMS-Headers are ignored in Producer</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                            <parent id="12486201">CAMEL-1773</parent>
                                    <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="siegfriedwirth">Siegfried Wirth</reporter>
                        <labels>
                    </labels>
                <created>Tue, 9 Jun 2009 15:49:40 +0000</created>
                <updated>Sat, 21 Nov 2009 11:59:09 +0000</updated>
                            <resolved>Wed, 1 Jul 2009 12:46:55 +0000</resolved>
                                    <version>2.0-M1</version>
                                    <fixVersion>2.0-M3</fixVersion>
                                    <component>camel-jms</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="12952565" author="davsclaus" created="Wed, 10 Jun 2009 08:15:14 +0000"  >&lt;p&gt;Thanks for reporting.&lt;/p&gt;

&lt;p&gt;James Strachan had a look and came up with:&lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;10:00&amp;#93;&lt;/span&gt;  &amp;lt;jstrachan&amp;gt; davsclaus: yeah, looks like we could let folks specify those headers; it&apos;ll be a tad complex to implement given the complex code path in JmsProducer - and the fact that we wanna clear down the fact that we are customizing the QoS on the JmsTemplate after we have sent them (so we might wanna create a new temporary JmsTemplate if any of the QoS headers are specified on the message) - but its possible, yes&lt;/p&gt;


&lt;p&gt;I put it on the roadmap for Camel 2.1.&lt;br/&gt;
But maybe we take a stab at it before so it will be in 2.0.&lt;/p&gt;</comment>
                            <comment id="12952925" author="davsclaus" created="Mon, 29 Jun 2009 06:58:07 +0000"  >&lt;p&gt;Looks like Spring JMS Template have default configuration for eg. JMSPriority = 4. So even if you set the JMSPriority on the javax.jms.Message object it will be disregarded and Spring uses its default value of 4 instead.&lt;/p&gt;</comment>
                            <comment id="12952924" author="davsclaus" created="Mon, 29 Jun 2009 07:02:12 +0000"  >&lt;p&gt;Added unit test for starters: 789236.&lt;/p&gt;</comment>
                            <comment id="12952935" author="davsclaus" created="Tue, 30 Jun 2009 11:08:20 +0000"  >&lt;p&gt;Creating a temporary JmsTemplate is the only option if user is having custom QoS headers&lt;/p&gt;</comment>
                            <comment id="12952981" author="davsclaus" created="Wed, 1 Jul 2009 06:19:15 +0000"  >&lt;p&gt;Looks like I found a glitch in camel-jms.&lt;/p&gt;

&lt;p&gt;Its possible with Spring JMSTemplate to use reuse template but sending custom values for&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;JMSDeliveryMode&lt;/li&gt;
	&lt;li&gt;JMSPriority&lt;/li&gt;
	&lt;li&gt;JMSExpiration&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;That requires however currently that the option &lt;tt&gt;PreserveMessageQos&lt;/tt&gt; is enabled on the endpoint.&lt;/p&gt;</comment>
                            <comment id="12952975" author="davsclaus" created="Wed, 1 Jul 2009 07:58:44 +0000"  >&lt;p&gt;We can set the following headers now requiring that you enable the &lt;tt&gt;preserveMessageQos=true&lt;/tt&gt; on the endpoint to take over:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;JMSDeliveryMode&lt;/li&gt;
	&lt;li&gt;JMSExpiration&lt;/li&gt;
	&lt;li&gt;JMSPriority&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Otherwise the QoS of the endpoint is used.&lt;/p&gt;</comment>
                            <comment id="12952997" author="davsclaus" created="Wed, 1 Jul 2009 08:22:57 +0000"  >&lt;p&gt;JMSDestination is &lt;b&gt;not&lt;/b&gt; possible to set in a IN header as it can cause jms routing to go into looping such as:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;from(&lt;span class=&quot;code-quote&quot;&gt;&quot;jms:queue:foo&quot;&lt;/span&gt;).to(&lt;span class=&quot;code-quote&quot;&gt;&quot;jms:queue:bar&quot;&lt;/span&gt;)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;In this case when we receive a message from &lt;b&gt;foo&lt;/b&gt; then it will populate a Camel message that contains the details from the javax.jms.Message and thus also &lt;tt&gt;JMSDestination&lt;/tt&gt;.&lt;br/&gt;
And it will be &lt;tt&gt;queue://foo&lt;/tt&gt;. So when the message is routed to the &lt;tt&gt;to&lt;/tt&gt; endpoint then it will mistakenly send it back to itself, instead of using the &lt;tt&gt;queue:bar&lt;/tt&gt; destination defined on the endpoint.&lt;/p&gt;

</comment>
                            <comment id="12953000" author="davsclaus" created="Wed, 1 Jul 2009 09:01:48 +0000"  >&lt;p&gt;To use a different JMSDestiantion you can do&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;exchange.setProperty(&lt;span class=&quot;code-quote&quot;&gt;&quot;JMSDestination&quot;&lt;/span&gt;, destination);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Maybe we can support a special header to override the destination as a string name&lt;/p&gt;

&lt;p&gt;To send it to bar instead of the regular destination&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;exchange.getIn().setHeader(JmsConstants.JMS_DESTINATION_NAME, &lt;span class=&quot;code-quote&quot;&gt;&quot;activemq:queue:bar&quot;&lt;/span&gt;);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;as its often easier to work with String names for JMS destinations than javax.jms.Destination objects.&lt;/p&gt;</comment>
                            <comment id="12952932" author="davsclaus" created="Wed, 1 Jul 2009 12:46:55 +0000"  >&lt;p&gt;trunk: 790144.&lt;/p&gt;</comment>
                            <comment id="12953013" author="hadrian" created="Wed, 1 Jul 2009 13:29:47 +0000"  >&lt;p&gt;@Claus, component specific properties is a general problem that exists with other components.  Since very few components have a XyzConstants class, but pretty much all of them have a XyzComponent I am thinking of putting the configuration specific property/headers in the XyzComponent class and make it consistent across all components.&lt;/p&gt;

&lt;p&gt;What do you think?&lt;/p&gt;</comment>
                            <comment id="12953014" author="davsclaus" created="Wed, 1 Jul 2009 13:33:39 +0000"  >&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;15:33&amp;#93;&lt;/span&gt;  &amp;lt;cibsen&amp;gt; yeah a good idea to have it on component instead&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;15:34&amp;#93;&lt;/span&gt;  &amp;lt;cibsen&amp;gt; and the xxxConstants is introduced in 2.0 so we could change it before final&lt;/p&gt;</comment>
                            <comment id="12951330" author="davsclaus" created="Fri, 7 Aug 2009 05:11:21 +0000"  >&lt;p&gt;trunk: 801884 fixing setting JMSPriority with a value as zero is accepted as well&lt;/p&gt;</comment>
                            <comment id="12953766" author="davsclaus" created="Sat, 21 Nov 2009 11:59:09 +0000"  >&lt;p&gt;Closing all 2.0M3 tickets&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>76776</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 1 week, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i01jyn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7003</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>