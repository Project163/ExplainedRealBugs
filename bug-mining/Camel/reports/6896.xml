<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 11:07:55 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-21239] camel-report-maven-plugin - NPE if route does not have id</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-21239</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;Caused by: java.lang.NullPointerException: Cannot invoke &quot;org.w3c.dom.Node.getNodeValue()&quot; because the return value of &quot;org.w3c.dom.NamedNodeMap.getNamedItem(String)&quot; is null&lt;br/&gt;
&#160; &#160; at org.apache.camel.parser.helper.RouteCoverageHelper.parseDumpRouteCoverageByRouteId (RouteCoverageHelper.java:70)&lt;br/&gt;
&#160; &#160; at org.apache.camel.maven.RouteCoverageMojo.grabDumpData (RouteCoverageMojo.java:263)&lt;br/&gt;
&#160; &#160; at org.apache.camel.maven.RouteCoverageMojo.execute (RouteCoverageMojo.java:228)&lt;br/&gt;
&#160; &#160; at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:126)&lt;/p&gt;</description>
                <environment></environment>
        <key id="13592483">CAMEL-21239</key>
            <summary>camel-report-maven-plugin - NPE if route does not have id</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="davsclaus">Claus Ibsen</reporter>
                        <labels>
                    </labels>
                <created>Wed, 18 Sep 2024 13:30:46 +0000</created>
                <updated>Mon, 23 Sep 2024 07:27:05 +0000</updated>
                            <resolved>Wed, 18 Sep 2024 13:39:47 +0000</resolved>
                                                    <fixVersion>4.4.4</fixVersion>
                    <fixVersion>4.8.1</fixVersion>
                    <fixVersion>4.9.0</fixVersion>
                                    <component>tooling</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17882729" author="mrobson" created="Wed, 18 Sep 2024 14:04:31 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davsclaus&quot; class=&quot;user-hover&quot; rel=&quot;davsclaus&quot;&gt;davsclaus&lt;/a&gt; I am not sure this fix &lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; is the root cause of the regression. &lt;/p&gt;

&lt;p&gt;&lt;span class=&quot;error&quot;&gt;&amp;#91;1&amp;#93;&lt;/span&gt; &lt;a href=&quot;https://github.com/apache/camel/commit/e8c8cdbfa811762785d872a9fd7977afadb0e267&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/commit/e8c8cdbfa811762785d872a9fd7977afadb0e267&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Camel 4.0.x works with camel-report-maven-plugin 4.4.3... but camel 4.4.x does not... so something else changed in core... I see the doc text calls out:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
IMPORTANT: Routes that can be route coveraged **MUST** have a unique id assigned, in other words you cannot use anonymous routes.
But &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt; was not actually the &lt;span class=&quot;code-keyword&quot;&gt;case&lt;/span&gt;. It was working with anonymous routes.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;But this was not actually the case. It was previously working with anonymous routes.&lt;/p&gt;

&lt;p&gt;Starting with 4.3.x, I can see:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[WARNING] No route coverage data found &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; route: hello-1. Make sure to enable route coverage in your unit tests and assign unique route ids to your routes. Also remember to run unit tests first.
[WARNING] No route coverage data found &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; route: hello-2. Make sure to enable route coverage in your unit tests and assign unique route ids to your routes. Also remember to run unit tests first.
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17882731" author="davsclaus" created="Wed, 18 Sep 2024 14:09:11 +0000"  >&lt;p&gt;Yes you must have IDs now&lt;/p&gt;</comment>
                            <comment id="17883088" author="mrobson" created="Thu, 19 Sep 2024 18:18:08 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davsclaus&quot; class=&quot;user-hover&quot; rel=&quot;davsclaus&quot;&gt;davsclaus&lt;/a&gt; Built a 4.4.4 snapshot locally to test. The NPE is fixed, but there is still a regression in behaviour.&lt;/p&gt;

&lt;p&gt;Route coverage only detects the initial from with the id on the route... None of the subsequent steps are verified.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[INFO] --- camel-report:4.4.4-SNAPSHOT:route-coverage (route-coverage) @ mustunderstand_reproducer ---
[INFO] Discovered 3 routes
[INFO] Route coverage summary:

File:	camel/camel-context.xml
Route:	hcp.directory.v2.route.main

  Line #       Count    Route
  ------       -----    -----
       7           1    from
       8           0      log
      10           0      setProperty
      13           0      setBody
      18           0      to
      21           0      to
      23           0      log
      24           0      log

Coverage: 1 out of 8 (12.5% / threshold 100.0%)
Status: Failed
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;From the reproducer:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &amp;lt;route id=&lt;span class=&quot;code-quote&quot;&gt;&quot;hcp.directory.v2.route.main&quot;&lt;/span&gt;&amp;gt;
        &amp;lt;from uri=&lt;span class=&quot;code-quote&quot;&gt;&quot;cxf:bean:hcp.directory.v2.proxy?headerFilterStrategy=#cxfHeaderFilterStrategy&quot;&lt;/span&gt;/&amp;gt;
        &amp;lt;log message=&lt;span class=&quot;code-quote&quot;&gt;&quot;${routeId} ${body}&quot;&lt;/span&gt;/&amp;gt;

        &amp;lt;setProperty name=&lt;span class=&quot;code-quote&quot;&gt;&quot;originalBody&quot;&lt;/span&gt;&amp;gt;
            &amp;lt;simple&amp;gt;${body}&amp;lt;/simple&amp;gt;
        &amp;lt;/setProperty&amp;gt;
        &amp;lt;setBody&amp;gt;
            &amp;lt;simple&amp;gt;&lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;&amp;lt;/simple&amp;gt;
        &amp;lt;/setBody&amp;gt;

        &amp;lt;!-- call the second web service --&amp;gt;
        &amp;lt;to uri=&lt;span class=&quot;code-quote&quot;&gt;&quot;direct:rm.mail.invoker&quot;&lt;/span&gt;/&amp;gt;

        &amp;lt;!-- call the third web service --&amp;gt;
        &amp;lt;to uri=&lt;span class=&quot;code-quote&quot;&gt;&quot;direct:rm.fax.invoker&quot;&lt;/span&gt;/&amp;gt;

        &amp;lt;log message=&lt;span class=&quot;code-quote&quot;&gt;&quot;Final step&quot;&lt;/span&gt;/&amp;gt;
        &amp;lt;log message=&lt;span class=&quot;code-quote&quot;&gt;&quot;${routeId} ${body}&quot;&lt;/span&gt;/&amp;gt;
    &amp;lt;/route&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You would now need to add id:&apos;s to every single step as well. This was not needed or was handled transparently previously.&lt;/p&gt;</comment>
                            <comment id="17883731" author="davsclaus" created="Mon, 23 Sep 2024 07:26:49 +0000"  >&lt;p&gt;Okay I have fixed so all the data is now in the report&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[INFO] --- camel-report:4.9.0-SNAPSHOT:route-coverage (&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-cli) @ camel-example-spring-boot ---
[INFO] Discovered 1 routes
[INFO] Route coverage summary:&lt;span class=&quot;code-object&quot;&gt;Class&lt;/span&gt;: &#160; &#160;sample.camel.MyCamelRouter
Route: &#160; &#160;hello&#160; Line # &#160; &#160; &#160; Count &#160; &#160;Route
&#160; ------ &#160; &#160; &#160; ----- &#160; &#160;-----
&#160; &#160; &#160; 38 &#160; &#160; &#160; &#160; &#160; 1 &#160; &#160;from
&#160; &#160; &#160; 40 &#160; &#160; &#160; &#160; &#160; 1 &#160; &#160; &#160;bean
&#160; &#160; &#160; 42 &#160; &#160; &#160; &#160; &#160; 1 &#160; &#160; &#160;to
Coverage: 3 out of 3 (100.0% / threshold 100.0%)
Status: Success
[INFO]
[INFO] Overall coverage summary:Coverage: 3 out of 3 (100.0% / threshold 0.0%)
Status: Success &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 7 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1rheo:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>