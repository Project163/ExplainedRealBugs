<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 09:32:55 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-1605] Passing an xml fragment as a parameter to an xslt transformation fails</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-1605</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;I pass an xml fragment to an xslt. I have the following code where the queue holds xml messages&lt;/p&gt;

&lt;p&gt;       from(&quot;activemq:example.A&quot;)&lt;br/&gt;
               .setHeader(&quot;agent.id&quot;, new XPathExpression(&quot;/&quot;))&lt;br/&gt;
               .process(new ReadLocalFile())&lt;br/&gt;
               .to(&quot;xslt:transform.xsl&quot;)&lt;/p&gt;


&lt;p&gt;The xslt looks like:&lt;/p&gt;

&lt;p&gt;   ...&lt;br/&gt;
   &amp;lt;xsl:param name=&quot;agent.xml&quot;/&amp;gt;&lt;/p&gt;

&lt;p&gt;	&amp;lt;xsl:template match=&quot;/&quot;&amp;gt;&lt;br/&gt;
		&amp;lt;xsl:value-of select=&quot;$agent.xml/agent/id&quot; /&amp;gt;&lt;/p&gt;


&lt;p&gt;I would expect the xml fragment to be available as a nodeset in the xsl, but I get the following exception:&lt;/p&gt;

&lt;p&gt;javax.xml.transform.TransformerException: java.lang.RuntimeException: Invalid conversion from &apos;com.sun.org.apache.xml.internal.dtm.ref.DTMNodeList&apos; to &apos;node-set&apos;.&lt;br/&gt;
	at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:670)&lt;br/&gt;
	at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerImpl.transform(TransformerImpl.java:300)&lt;br/&gt;
	at org.apache.camel.builder.xml.XsltBuilder.process(XsltBuilder.java:83)&lt;br/&gt;
       ...&lt;/p&gt;</description>
                <environment></environment>
        <key id="12486486">CAMEL-1605</key>
            <summary>Passing an xml fragment as a parameter to an xslt transformation fails</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="8">Not A Problem</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="streek@avisi.nl">Gert-Jan van de Streek</reporter>
                        <labels>
                    </labels>
                <created>Tue, 12 May 2009 09:02:29 +0000</created>
                <updated>Sun, 7 Feb 2010 09:55:22 +0000</updated>
                            <resolved>Mon, 18 May 2009 09:10:58 +0000</resolved>
                                    <version>1.6.0</version>
                    <version>2.0-M1</version>
                                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12952078" author="streek@avisi.nl" created="Tue, 12 May 2009 09:06:16 +0000"  >&lt;p&gt;I created a unit test to reproduce the problem. I attached 3 files:&lt;br/&gt;
+ TestXmlFragment.java&lt;br/&gt;
+ TestXmlFragment-context.xml&lt;br/&gt;
+ transform.xsl&lt;/p&gt;</comment>
                            <comment id="12952133" author="davsclaus" created="Fri, 15 May 2009 09:44:57 +0000"  >&lt;p&gt;Hi Gert&lt;/p&gt;

&lt;p&gt;Thanks for the unit test. &lt;/p&gt;

&lt;p&gt;There could be bugs in the Xalan that is shipped with the JDK itself. Searching with google hints a few problems but the culprint is hard to narrow down.&lt;br/&gt;
I do not think its a Camel problem per see but a general problem with Xerces, Xalan and SUN JDK itself.&lt;/p&gt;

&lt;p&gt;Can you try working with this without Camel and try to see if you can find a solution to the problem?&lt;/p&gt;</comment>
                            <comment id="12952132" author="davsclaus" created="Fri, 15 May 2009 09:49:22 +0000"  >&lt;p&gt;I added the unit test to camel-spring, but it is disabled for now&lt;br/&gt;
trunk: 775076.&lt;/p&gt;</comment>
                            <comment id="12952138" author="streek@avisi.nl" created="Fri, 15 May 2009 11:51:00 +0000"  >&lt;p&gt;I indeed found out that it is a more general problem. I have not been able to find a way to solve the issue. In older version of xslt processors, this used to work. But nowadays, this seems quite impossible. I have found numerous news posts with problems, but no answers.&lt;/p&gt;</comment>
                            <comment id="12952113" author="davsclaus" created="Mon, 18 May 2009 09:10:58 +0000"  >&lt;p&gt;I am closing this as not a Camel issues. &lt;/p&gt;

&lt;p&gt;Gert if you find a solution or more information you are much welcome to post on this to keep us updated.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12462952" name="TestXmlFragment-context.xml" size="963" author="streek@avisi.nl" created="Tue, 12 May 2009 09:06:16 +0000"/>
                            <attachment id="12462951" name="TestXmlFragment.java" size="1094" author="streek@avisi.nl" created="Tue, 12 May 2009 09:06:16 +0000"/>
                            <attachment id="12462957" name="transform.xsl" size="277" author="streek@avisi.nl" created="Tue, 12 May 2009 09:06:16 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>97018</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 28 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i01jfz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6919</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>