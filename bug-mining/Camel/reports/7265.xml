<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 11:12:50 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-22494] camel-as2 - AS2 consumer URI remains active after route stop/removal</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-22494</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;When a route using the &lt;tt&gt;camel-as2&lt;/tt&gt; consumer endpoint is stopped or removed, the component fails to fully unbind or deregister the underlying server listener, leaving the endpoint URI unexpectedly active.&lt;/p&gt;

&lt;p&gt;No errors are observed in the logs when the route is stopped, but the expected cleanup does not occur.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Expected Behavior&lt;/b&gt;&lt;br/&gt;
After the route is stopped and removed, any attempt to send a message to the corresponding AS2 server URI should result in an HTTP error (e.g., &lt;b&gt;404 Not Found&lt;/b&gt; or &lt;b&gt;Connection Refused&lt;/b&gt;) because the consumer should have been cleanly unregistered.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Actual Behavior&lt;/b&gt;&lt;br/&gt;
The AS2 server listener remains functional and &lt;b&gt;continues to consume messages&lt;/b&gt; at the original URI, even though the route itself is no longer active in the Camel Context. This suggests the server-side resource (the URI mapping/listener) associated with the AS2 consumer is not being properly deregistered during the shutdown process.&lt;/p&gt;

&lt;p&gt;A &lt;b&gt;Reproducer Test Case&lt;/b&gt; demonstrating this behavior is attached to this ticket.&lt;br/&gt;
It installs an AS2 inbound route and, after 5 seconds, it uninstalls it.&lt;br/&gt;
After the route is uninstalled, when the endpoint &lt;a href=&quot;http://localhost:9002/as2test&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://localhost:9002/as2test&lt;/a&gt; is called, the AS2 consumer still processes the request and returns a response.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13630627">CAMEL-22494</key>
            <summary>camel-as2 - AS2 consumer URI remains active after route stop/removal</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="brunovg">Bruno Gon&#231;alves</reporter>
                        <labels>
                    </labels>
                <created>Fri, 3 Oct 2025 14:19:14 +0000</created>
                <updated>Tue, 7 Oct 2025 18:20:20 +0000</updated>
                            <resolved>Tue, 7 Oct 2025 17:45:00 +0000</resolved>
                                    <version>4.10.6</version>
                    <version>4.10.7</version>
                    <version>4.14.0</version>
                    <version>4.14.1</version>
                    <version>4.15.0</version>
                                    <fixVersion>4.10.8</fixVersion>
                    <fixVersion>4.14.2</fixVersion>
                    <fixVersion>4.16.0</fixVersion>
                                    <component>camel-as2</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="18024535" author="davsclaus" created="Fri, 3 Oct 2025 16:27:12 +0000"  >&lt;p&gt;Can you try with 4.14.x&lt;/p&gt;</comment>
                            <comment id="18024536" author="JIRAUSER303582" created="Fri, 3 Oct 2025 16:33:01 +0000"  >&lt;p&gt;Yes, same issue on 4.14.0 and 4.14.1&lt;/p&gt;</comment>
                            <comment id="18024547" author="davsclaus" created="Fri, 3 Oct 2025 16:45:40 +0000"  >&lt;p&gt;Thanks for testing latest releases. You are welcome to see if you can fix and send a PR.&lt;/p&gt;</comment>
                            <comment id="18028073" author="davsclaus" created="Tue, 7 Oct 2025 12:28:47 +0000"  >&lt;p&gt;There is no unit test in the attached .tar file&lt;/p&gt;</comment>
                            <comment id="18028074" author="davsclaus" created="Tue, 7 Oct 2025 12:30:23 +0000"  >&lt;p&gt;Ah okay its in the main app&lt;/p&gt;</comment>
                            <comment id="18028150" author="davsclaus" created="Tue, 7 Oct 2025 16:15:16 +0000"  >&lt;p&gt;Okay so I am on the right track for a fix, you know have 404&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
~/Downloads/as2/inbound-as2-reproducer &#10095; curl -i http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:9002/as2test
&lt;/span&gt;HTTP/1.1 404 Not Found
Content-Length: 0
Server: Camel AS2 Server Endpoint
Date: Tue, 07 Oct 2025 16:14:37 GMT &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="18028173" author="JIRAUSER303582" created="Tue, 7 Oct 2025 18:20:20 +0000"  >&lt;p&gt;Just tested locally using camel-as 4.10.8-SNAPSHOT and now it works OK.&lt;br/&gt;
Thanks for your help &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davsclaus&quot; class=&quot;user-hover&quot; rel=&quot;davsclaus&quot;&gt;davsclaus&lt;/a&gt;.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="13078657" name="inbound-as2-reproducer.tar" size="123392" author="brunovg" created="Fri, 3 Oct 2025 14:18:58 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1xzjc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>