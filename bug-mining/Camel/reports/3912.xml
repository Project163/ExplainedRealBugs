<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:20:36 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-10573] Align FallbackTypeConverter loading in OSGI environments</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-10573</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;In a OSGI environment only, FallBackTypeConverters are &lt;a href=&quot;https://github.com/apache/camel/blob/d5f0aefdffc74ac0971b87946a21fe4be8c305b4/camel-core/src/main/java/org/apache/camel/impl/osgi/Activator.java#L428&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;required&lt;/a&gt; to be annotated with @Converter whereas otherwise they are &lt;a href=&quot;https://github.com/apache/camel/blob/00fef5857c0bcb0fc7a02f19f5ba51ef0382133d/camel-core/src/main/java/org/apache/camel/impl/converter/AnnotationTypeConverterLoader.java#L170&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;not&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;This causes &lt;a href=&quot;https://github.com/apache/camel/blob/2b4b9df67da4b84cb69d9dd42ef77155a803679a/components/camel-jackson/src/main/java/org/apache/camel/component/jackson/converter/JacksonTypeConverters.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;camel-jackson&apos;s&lt;/a&gt; FallbackTypeConverter to not be loaded and a &apos;NoTypeConversionAvailableException&apos; will be thrown. &lt;/p&gt;

&lt;p&gt;I will provide a PR.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13026660">CAMEL-10573</key>
            <summary>Align FallbackTypeConverter loading in OSGI environments</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="jpoth">John Poth</assignee>
                                    <reporter username="jpoth">John Poth</reporter>
                        <labels>
                    </labels>
                <created>Thu, 8 Dec 2016 12:14:32 +0000</created>
                <updated>Mon, 13 Feb 2017 17:53:13 +0000</updated>
                            <resolved>Tue, 13 Dec 2016 09:42:16 +0000</resolved>
                                                    <fixVersion>2.18.2</fixVersion>
                    <fixVersion>2.19.0</fixVersion>
                                    <component>karaf</component>
                    <component>osgi</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>5</watches>
                                                                                                                <comments>
                            <comment id="15732062" author="githubbot" created="Thu, 8 Dec 2016 12:24:41 +0000"  >&lt;p&gt;GitHub user johnpoth opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/1336&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/1336&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-10573&quot; title=&quot;Align FallbackTypeConverter loading in OSGI environments&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-10573&quot;&gt;&lt;del&gt;CAMEL-10573&lt;/del&gt;&lt;/a&gt;: Align FallbackTypeConverter loading in OSGI environments&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-10573&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/CAMEL-10573&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/johnpoth/camel&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/johnpoth/camel&lt;/a&gt; &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-10573&quot; title=&quot;Align FallbackTypeConverter loading in OSGI environments&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-10573&quot;&gt;&lt;del&gt;CAMEL-10573&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/1336.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/1336.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #1336&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit 3cac6640f6c2d12c9939dcd5c624e0a91bd263c5&lt;br/&gt;
Author: jpoth &amp;lt;poth.john@gmail.com&amp;gt;&lt;br/&gt;
Date:   2016-12-08T12:23:20Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-10573&quot; title=&quot;Align FallbackTypeConverter loading in OSGI environments&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-10573&quot;&gt;&lt;del&gt;CAMEL-10573&lt;/del&gt;&lt;/a&gt;: Align FallbackTypeConverter loading in OSGI environments&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="15732175" author="davsclaus" created="Thu, 8 Dec 2016 13:12:48 +0000"  >&lt;p&gt;Can you point out better why you think this PR is valid. Why should the test not be called? And you only did this code change in the first place not further below where the converter is loaded using package name.&lt;/p&gt;

&lt;p&gt;And can you provide an unit test / sample project that reproduces this problem&lt;/p&gt;</comment>
                            <comment id="15742772" author="jpoth" created="Mon, 12 Dec 2016 18:49:53 +0000"  >&lt;p&gt;Hi &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=davsclaus&quot; class=&quot;user-hover&quot; rel=&quot;davsclaus&quot;&gt;davsclaus&lt;/a&gt;,&lt;/p&gt;

&lt;p&gt;Thanks for looking into this!&lt;/p&gt;

&lt;p&gt;So this PR aligns the way FallbackTypeConverters are loaded in &lt;a href=&quot;https://github.com/apache/camel/blob/d5f0aefdffc74ac0971b87946a21fe4be8c305b4/camel-core/src/main/java/org/apache/camel/impl/osgi/Activator.java#L428&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;Camel-OSGI&lt;/a&gt; and in &lt;a href=&quot;https://github.com/apache/camel/blob/00fef5857c0bcb0fc7a02f19f5ba51ef0382133d/camel-core/src/main/java/org/apache/camel/impl/converter/AnnotationTypeConverterLoader.java#L170&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;plain&lt;/a&gt; Camel. As you can see there is no annotation check in the latter.&lt;/p&gt;

&lt;p&gt;I didn&apos;t remove the other annotation check you mentioned because it is in line with what plain Camel &lt;a href=&quot;https://github.com/apache/camel/blob/00fef5857c0bcb0fc7a02f19f5ba51ef0382133d/camel-core/src/main/java/org/apache/camel/impl/converter/AnnotationTypeConverterLoader.java#L130&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;does&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;The motivation behind this alignment is that, in Camel/OSGI, Camel-jackson&apos;s &lt;a href=&quot;https://github.com/apache/camel/blob/2b4b9df67da4b84cb69d9dd42ef77155a803679a/components/camel-jackson/src/main/java/org/apache/camel/component/jackson/converter/JacksonTypeConverters.java&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;FallbackTypeConverter&lt;/a&gt; is not loaded. This is best illustrated by the added &lt;a href=&quot;https://github.com/apache/camel/pull/1336/commits/e333e30d7f949239568d73842814934dc765c061#diff-e20859f5602a97731366eeb0d843ae4a&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;test&lt;/a&gt; in my PR. As there was no TypeConverter testing, I created my own (may be a good base to test other TypeConverters?).&lt;/p&gt;

&lt;p&gt;I&apos;d be happy to propose other solutions if alignment doesn&apos;t seem like a good idea &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;Thanks!&lt;/p&gt;

&lt;p&gt;John.&lt;/p&gt;</comment>
                            <comment id="15744697" author="githubbot" created="Tue, 13 Dec 2016 09:41:52 +0000"  >&lt;p&gt;Github user asfgit closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/1336&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/1336&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15864083" author="chris@die-schneider.net" created="Mon, 13 Feb 2017 17:52:49 +0000"  >&lt;p&gt;I think the commit 05ba679d3906528cb is causing a severe issue with the activemq-camel component (&lt;a href=&quot;https://issues.apache.org/jira/browse/AMQ-6597&quot; title=&quot;activemq-camel does not work together with camel 2.18&quot; class=&quot;issue-link&quot; data-issue-key=&quot;AMQ-6597&quot;&gt;&lt;del&gt;AMQ-6597&lt;/del&gt;&lt;/a&gt;). The BundleComponentResolver seems to detect the activemq component inside the activemq-osgi bundle. This causes the activemq component to not work at all.&lt;/p&gt;

&lt;p&gt;The issue seems to be caused by removing the test for a matching class:&lt;br/&gt;
                            if (test.matches(clazz)) &lt;/p&gt;
{
                                classes.add(clazz);
                            }

&lt;p&gt;After all though loading the foreign class is the problem in the first place. As activemq OSGi has DynamicImport-Package * it will be able to load all classes in the OSGi system and will create a wiring to the classes package. &lt;br/&gt;
I will create a separate issue to track and solve this problem.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                            <outwardlinks description="breaks">
                                        <issuelink>
            <issuekey id="13042534">AMQ-6597</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            8 years, 40 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i37cgv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>