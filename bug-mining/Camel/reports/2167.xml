<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 09:55:39 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-5999] RestletComponent component is not removing added route from routers list although route is removed from Context.</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-5999</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;In RestletComponent class add entry to instance variable &quot;private final Map&amp;lt;String, MethodBasedRouter&amp;gt; routers = new HashMap&amp;lt;String, MethodBasedRouter&amp;gt;()&quot; map while invoking getMethodRouter method, but it never remove in disconnect method, also disconnect method has local variable with same name as instance variable &quot;routes&quot;.&lt;/p&gt;

&lt;p&gt;Camel Development Forums&lt;br/&gt;
=========================&lt;br/&gt;
&lt;a href=&quot;http://camel.465427.n5.nabble.com/Camel-Restlet-2-10-3-RestletComponent-component-does-not-remove-added-route-form-routers-although-ro-td5726000.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://camel.465427.n5.nabble.com/Camel-Restlet-2-10-3-RestletComponent-component-does-not-remove-added-route-form-routers-although-ro-td5726000.html&lt;/a&gt;&lt;/p&gt;




</description>
                <environment></environment>
        <key id="12628782">CAMEL-5999</key>
            <summary>RestletComponent component is not removing added route from routers list although route is removed from Context.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="amit1000">Amit Patel</reporter>
                        <labels>
                    </labels>
                <created>Tue, 22 Jan 2013 20:11:03 +0000</created>
                <updated>Tue, 29 Jan 2013 16:54:45 +0000</updated>
                            <resolved>Sat, 26 Jan 2013 11:47:14 +0000</resolved>
                                    <version>2.10.3</version>
                                    <fixVersion>2.10.4</fixVersion>
                    <fixVersion>2.11.0</fixVersion>
                                    <component>camel-restlet</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13560453" author="davsclaus" created="Wed, 23 Jan 2013 07:39:07 +0000"  >&lt;p&gt;Thanks for reporting.&lt;/p&gt;

&lt;p&gt;Are you working on a patch for this?&lt;/p&gt;</comment>
                            <comment id="13562343" author="amit1000" created="Fri, 25 Jan 2013 03:56:35 +0000"  >&lt;p&gt;After I made the following changes to RestletComonent, RestletRestartRouteTest does not pass.&lt;/p&gt;

&lt;p&gt;I updated RestletComonent disconnect method as below. Look like server.stop() method is not working properly. I need your help to resolve this issue.&lt;/p&gt;


&lt;p&gt;public void disconnect(RestletConsumer consumer) throws Exception {&lt;br/&gt;
        RestletEndpoint endpoint = consumer.getEndpoint();&lt;/p&gt;

&lt;p&gt;        List&amp;lt;MethodBasedRouter&amp;gt; methodBasedRouters = new ArrayList&amp;lt;MethodBasedRouter&amp;gt;();&lt;/p&gt;

&lt;p&gt;        String pattern = decodePattern(endpoint.getUriPattern());&lt;br/&gt;
        if (pattern != null &amp;amp;&amp;amp; !pattern.isEmpty()) &lt;/p&gt;
{
            methodBasedRouters.add(getMethodRouter(pattern));
        }

&lt;p&gt;        if (endpoint.getRestletUriPatterns() != null) {&lt;br/&gt;
            for (String uriPattern : endpoint.getRestletUriPatterns()) &lt;/p&gt;
{	
                methodBasedRouters.add(getMethodRouter(uriPattern));
              
            }
&lt;p&gt;        } &lt;/p&gt;

&lt;p&gt;        for (MethodBasedRouter methodBasedRouter : methodBasedRouters) {&lt;br/&gt;
            if (endpoint.getRestletMethods() != null) {&lt;br/&gt;
                Method[] methods = endpoint.getRestletMethods();&lt;br/&gt;
                for (Method method : methods) &lt;/p&gt;
{
                    methodBasedRouter.removeRoute(method);
                }
&lt;p&gt;            } else &lt;/p&gt;
{
                methodBasedRouter.removeRoute(endpoint.getRestletMethod());
            }


&lt;p&gt;           //remove route form routers Map &lt;br/&gt;
           routers.remove(methodBasedRouter.getUriPattern());&lt;/p&gt;

&lt;p&gt;           String key = buildKey(endpoint);    &lt;br/&gt;
           Server server = servers.get(key);&lt;br/&gt;
           component.getServers().remove(server);&lt;br/&gt;
           server.stop();&lt;br/&gt;
           servers.remove(key);&lt;br/&gt;
           if (methodBasedRouter.hasBeenAttached()) &lt;/p&gt;
{
               component.getDefaultHost().detach(consumer.getRestlet());
              
           }


&lt;p&gt;            System.out.println(&quot;After remove&quot;+ routers.toString());&lt;br/&gt;
            if (LOG.isDebugEnabled()) {&lt;br/&gt;
                LOG.debug(&quot;Detached restlet uriPattern: {} method: {}&quot;, methodBasedRouter.getUriPattern(),&lt;br/&gt;
                          endpoint.getRestletMethod());&lt;br/&gt;
            }&lt;br/&gt;
        }&lt;/p&gt;


&lt;p&gt;    }&lt;/p&gt;</comment>
                            <comment id="13563456" author="davsclaus" created="Sat, 26 Jan 2013 11:47:15 +0000"  >&lt;p&gt;I took a look and found a way to better deattach restlet routers when they are no longer in use.&lt;/p&gt;</comment>
                            <comment id="13565509" author="amit1000" created="Tue, 29 Jan 2013 16:46:26 +0000"  >&lt;p&gt;Thanks for your Help! I tested the changes and it works as expected.&lt;/p&gt;</comment>
                            <comment id="13565520" author="davsclaus" created="Tue, 29 Jan 2013 16:54:45 +0000"  >&lt;p&gt;Thanks for taking the time to test the changes.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>308260</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 43 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1b1cn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>272517</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>