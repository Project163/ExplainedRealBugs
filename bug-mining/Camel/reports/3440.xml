<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:11:44 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-9245] camel-paho - Endpoint should allow a flexible naming.</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-9245</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;If endpoint doesn&apos;t match exactly paho: it fails to publish to the correct topic.&lt;/p&gt;

&lt;p&gt;Once should be able in Spring to @Autowired two different PahoComponent pointing to different Application Context defined PahoComponent bean id&apos;S.&lt;/p&gt;

&lt;p&gt;Currently if bean id is not named exactly paho it fails to publish to the correct topic and for example instead of input/1 publishes to t://input/1 when id is mypaho instead of paho&lt;/p&gt;
</description>
                <environment></environment>
        <key id="12907163">CAMEL-9245</key>
            <summary>camel-paho - Endpoint should allow a flexible naming.</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="teixi">Jaume Teixi</reporter>
                        <labels>
                    </labels>
                <created>Thu, 22 Oct 2015 17:59:21 +0000</created>
                <updated>Sun, 25 Oct 2015 20:49:00 +0000</updated>
                            <resolved>Sun, 25 Oct 2015 20:47:45 +0000</resolved>
                                    <version>2.16.0</version>
                                    <fixVersion>2.16.1</fixVersion>
                    <fixVersion>2.17.0</fixVersion>
                                    <component>camel-paho</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14970487" author="davsclaus" created="Fri, 23 Oct 2015 05:49:44 +0000"  >&lt;p&gt;Can you explain this in more details what you mean?&lt;/p&gt;</comment>
                            <comment id="14970655" author="teixi" created="Fri, 23 Oct 2015 08:38:20 +0000"  >&lt;p&gt;Define two broker connections with PahoComponent bean id&apos;s in your Spring&apos;s Application Context&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;	&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;bean id=&lt;span class=&quot;code-quote&quot;&gt;&quot;paho&quot;&lt;/span&gt; class=&lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.camel.component.paho.PahoComponent&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
		&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;property name=&lt;span class=&quot;code-quote&quot;&gt;&quot;brokerUrl&quot;&lt;/span&gt; value=&lt;span class=&quot;code-quote&quot;&gt;&quot;tcp://broker.local:1883&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;				
  		&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;property name=&lt;span class=&quot;code-quote&quot;&gt;&quot;connectOptions&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;bean class=&lt;span class=&quot;code-quote&quot;&gt;&quot;org.eclipse.paho.client.mqttv3.MqttConnectOptions&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
  				&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;property name=&lt;span class=&quot;code-quote&quot;&gt;&quot;userName&quot;&lt;/span&gt; value=&lt;span class=&quot;code-quote&quot;&gt;&quot;user@broker&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;
  				&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;property name=&lt;span class=&quot;code-quote&quot;&gt;&quot;password&quot;&lt;/span&gt; value=&lt;span class=&quot;code-quote&quot;&gt;&quot;password&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/bean&amp;gt;&lt;/span&gt;
		&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/property&amp;gt;&lt;/span&gt;  		
	&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/bean&amp;gt;&lt;/span&gt;
	
	&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;bean id=&lt;span class=&quot;code-quote&quot;&gt;&quot;paho2&quot;&lt;/span&gt; class=&lt;span class=&quot;code-quote&quot;&gt;&quot;org.apache.camel.component.paho.PahoComponent&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
		&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;property name=&lt;span class=&quot;code-quote&quot;&gt;&quot;brokerUrl&quot;&lt;/span&gt; value=&lt;span class=&quot;code-quote&quot;&gt;&quot;tcp://broker2.local:1883&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;				
  		&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;property name=&lt;span class=&quot;code-quote&quot;&gt;&quot;connectOptions&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;bean class=&lt;span class=&quot;code-quote&quot;&gt;&quot;org.eclipse.paho.client.mqttv3.MqttConnectOptions&quot;&lt;/span&gt;&amp;gt;&lt;/span&gt;
  				&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;property name=&lt;span class=&quot;code-quote&quot;&gt;&quot;userName&quot;&lt;/span&gt; value=&lt;span class=&quot;code-quote&quot;&gt;&quot;user@broker2&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;
  				&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;property name=&lt;span class=&quot;code-quote&quot;&gt;&quot;password&quot;&lt;/span&gt; value=&lt;span class=&quot;code-quote&quot;&gt;&quot;password2&quot;&lt;/span&gt; /&amp;gt;&lt;/span&gt;
			&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/bean&amp;gt;&lt;/span&gt;
		&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/property&amp;gt;&lt;/span&gt;  		
	&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/bean&amp;gt;&lt;/span&gt;	
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Autowire the PahoComponent in your Java class. &lt;br/&gt;
And implement two different methods for publishing to different topics for each one.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;	@Autowired
	&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; ApplicationContext appContext;
	
	@Autowired
	&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; PahoComponent paho;
	
	@Autowired
	&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; PahoComponent paho2;

	&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void publish() {
		&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
			CamelContext camelContext = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SpringCamelContext(appContext);
			camelContext.setAllowUseOriginalMessage(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
			camelContext.addComponent(&lt;span class=&quot;code-quote&quot;&gt;&quot;paho&quot;&lt;/span&gt;, paho);
			camelContext.start();
			ProducerTemplate producer = camelContext.createProducerTemplate();
			&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; payload = &lt;span class=&quot;code-quote&quot;&gt;&quot;just a message&quot;&lt;/span&gt;;
			&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; clientId = &lt;span class=&quot;code-quote&quot;&gt;&quot;pub-paho-&quot;&lt;/span&gt; + &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.nanoTime();
			producer.sendBodyAndHeaders(&lt;span class=&quot;code-quote&quot;&gt;&quot;paho:input/1?qos=1&amp;amp;clientId=&quot;&lt;/span&gt; + clientId, payload.toString(), &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
			camelContext.stop();
		} &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Exception e) {
			LOG.error(&lt;span class=&quot;code-quote&quot;&gt;&quot;publish exception: {}&quot;&lt;/span&gt;, e.getMessage());
		}
	}
	
	&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void publish2() {
		&lt;span class=&quot;code-keyword&quot;&gt;try&lt;/span&gt; {
			CamelContext camelContext = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; SpringCamelContext(appContext);
			camelContext.setAllowUseOriginalMessage(&lt;span class=&quot;code-keyword&quot;&gt;false&lt;/span&gt;);
			camelContext.addComponent(&lt;span class=&quot;code-quote&quot;&gt;&quot;paho2&quot;&lt;/span&gt;, paho2);
			camelContext.start();
			ProducerTemplate producer = camelContext.createProducerTemplate();
			&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; payload = &lt;span class=&quot;code-quote&quot;&gt;&quot;just a message 2&quot;&lt;/span&gt;;
			&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; clientId = &lt;span class=&quot;code-quote&quot;&gt;&quot;pub-paho2-&quot;&lt;/span&gt; + &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.nanoTime();
			producer.sendBodyAndHeaders(&lt;span class=&quot;code-quote&quot;&gt;&quot;paho2:input/2?qos=1&amp;amp;clientId=&quot;&lt;/span&gt; + clientId, payload.toString(), &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;);
			camelContext.stop();
		} &lt;span class=&quot;code-keyword&quot;&gt;catch&lt;/span&gt; (Exception e) {
			LOG.error(&lt;span class=&quot;code-quote&quot;&gt;&quot;publish2 exception: {}&quot;&lt;/span&gt;, e.getMessage());
		}		
	}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;First method message: &lt;b&gt;just a message&lt;/b&gt;&lt;br/&gt;
Is published &lt;ins&gt;correctly&lt;/ins&gt; into topic: &lt;b&gt;input/1&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;Second method message: &lt;b&gt;just a message 2&lt;/b&gt; &lt;br/&gt;
Is published &lt;em&gt;wrongly&lt;/em&gt; into topic: &lt;b&gt;/input/2&lt;/b&gt;&lt;/p&gt;</comment>
                            <comment id="14970821" author="hekonsek" created="Fri, 23 Oct 2015 10:59:50 +0000"  >&lt;p&gt;Actually publishing to &lt;tt&gt;input/2&lt;/tt&gt; is what I would expect to happen. You are sending a message to the &lt;tt&gt;input/2&lt;/tt&gt;, so this is published to &lt;tt&gt;input/2&lt;/tt&gt; &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt; . BTW a component naming is handled by the Camel Core and is outside of the scope of the component.&lt;/p&gt;

&lt;p&gt;Are you sure it behaves wrong?&lt;/p&gt;</comment>
                            <comment id="14970946" author="teixi" created="Fri, 23 Oct 2015 13:17:39 +0000"  >&lt;p&gt;When the &lt;b&gt;PahoComponent&lt;/b&gt; is named &lt;b&gt;paho2&lt;/b&gt; it is wrong because it is posting to the topic &lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;/input/2&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; (note the first slash) instead of &lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;input/2&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; &lt;br/&gt;
And if you name the &lt;b&gt;PahoComponent&lt;/b&gt; to &lt;b&gt;mypaho&lt;/b&gt; it will post to the wrong topic &lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;t://input/2&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This does not happens with other components like &lt;b&gt;camel-jms&lt;/b&gt; or &lt;b&gt;camel-mqtt&lt;/b&gt; only with &lt;b&gt;camel-paho&lt;/b&gt; so it seems not related to the Camel Core and maybe to the Endpoint format definition or to the handling of it.&lt;/p&gt;</comment>
                            <comment id="14970955" author="davsclaus" created="Fri, 23 Oct 2015 13:22:57 +0000"  >&lt;p&gt;The bug is here&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/camel/blob/master/components/camel-paho/src/main/java/org/apache/camel/component/paho/PahoEndpoint.java#L79&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/blob/master/components/camel-paho/src/main/java/org/apache/camel/component/paho/PahoEndpoint.java#L79&lt;/a&gt;&lt;br/&gt;
eg the hardcoded 7 index which is wrong.&lt;/p&gt;

&lt;p&gt;The topic is really the remainder parameter in the component which it should use to set as topic.&lt;/p&gt;</comment>
                            <comment id="14970958" author="davsclaus" created="Fri, 23 Oct 2015 13:23:53 +0000"  >&lt;p&gt;Here&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/camel/blob/master/components/camel-paho/src/main/java/org/apache/camel/component/paho/PahoComponent.java#L36&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/blob/master/components/camel-paho/src/main/java/org/apache/camel/component/paho/PahoComponent.java#L36&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;you grab the remainder and use that as the topic&lt;/p&gt;

&lt;p&gt;endpoint.setTopic(remainder);&lt;/p&gt;

&lt;p&gt;and then you dont need that other logic.&lt;/p&gt;</comment>
                            <comment id="14973434" author="hekonsek" created="Sun, 25 Oct 2015 20:41:30 +0000"  >&lt;p&gt;Oh shit! Did I really commit that? What was on my mind to assume fixed component name? :|&lt;/p&gt;

&lt;p&gt;Anyway - I have fixed that in 2.17.0 (1) and 2.16.1 (2).&lt;/p&gt;

&lt;p&gt;Thanks for reporting (and sorry for a stupid mistake)! &lt;/p&gt;

&lt;p&gt;(1) 14e9236aca9e1cd93f180158767d7e102257f1b6&lt;br/&gt;
(2) e791fc27756fddce2eaa759c86250c8c5e7f9a0f&lt;/p&gt;</comment>
                            <comment id="14973436" author="hekonsek" created="Sun, 25 Oct 2015 20:49:00 +0000"  >&lt;p&gt;As a workaround hack for the older versions you can also use the component name with the length == 4.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10061"><![CDATA[Novice]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310250" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10431"><![CDATA[Important]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 4 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2ne7b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>