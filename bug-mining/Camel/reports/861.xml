<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 09:36:07 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-2237] Improper ordering of MINA filters</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-2237</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;When we want to use SSL on the consumer side, MINA&apos;s SSLFilter must be inserted as the very first filter into the chain (or, at least, as the second one after an &lt;tt&gt;ExecutorFilter&lt;/tt&gt;), but it is currently not possible, because &lt;tt&gt;MinaComponent#createSocketEndpoint()&lt;/tt&gt; always inserts a &lt;tt&gt;ProtocolCodecFilter&lt;/tt&gt; at the very beginning by calling &lt;tt&gt;configureCodecFactory()&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;A proposed workaround is to introduce an additional URL parameter &lt;em&gt;noDefaultCodec&lt;/em&gt; which prohibits the installation of the default protocol codec filter. The protocol codec must be then configured manually, e.g. using Spring:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;&amp;lt;bean id=&quot;sslFilter&quot; class=&quot;org.apache.mina.filter.SSLFilter&quot;&amp;gt;&lt;br/&gt;
    &amp;lt;constructor-arg&amp;gt;&lt;br/&gt;
        &amp;lt;bean class=&quot;javax.net.ssl.SSLContext&quot; factory-method=&quot;getDefault&quot; /&amp;gt;&lt;br/&gt;
    &amp;lt;/constructor-arg&amp;gt;&lt;br/&gt;
&amp;lt;/bean&amp;gt;&lt;/p&gt;

&lt;p&gt;&amp;lt;bean id=&quot;codecFilter&quot; class=&quot;org.apache.mina.filter.codec.ProtocolCodecFilter&quot;&amp;gt;&lt;br/&gt;
    &amp;lt;constructor-arg ref=&quot;hl7codec&quot; /&amp;gt;&lt;br/&gt;
&amp;lt;/bean&amp;gt;&lt;/p&gt;

&lt;p&gt;&amp;lt;bean id=&quot;hl7codec&quot; class=&quot;org.apache.camel.component.hl7.HL7MLLPCodec&quot; /&amp;gt;&lt;/p&gt;

&lt;p&gt;&amp;lt;bean id=&quot;minaFilters&quot; class=&quot;java.util.ArrayList&quot;&amp;gt;&lt;br/&gt;
    &amp;lt;constructor-arg&amp;gt;&lt;br/&gt;
        &amp;lt;list value-type=&quot;org.apache.mina.common.IoFilter&quot;&amp;gt;&lt;br/&gt;
             &amp;lt;ref bean=&quot;sslFilter&quot; /&amp;gt; &lt;br/&gt;
             &amp;lt;ref bean=&quot;codecFilter&quot; /&amp;gt; &lt;br/&gt;
        &amp;lt;/list&amp;gt;&lt;br/&gt;
    &amp;lt;/constructor-arg&amp;gt;&lt;br/&gt;
&amp;lt;/bean&amp;gt;&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;After that, the consumer endpoint URL can look like&lt;br/&gt;
&lt;tt&gt;from(&quot;mina:tcp://0.0.0.0:8888?sync=true&amp;amp;lazySessionCreation=true&amp;amp;noDefaultCodec=true&amp;amp;filters=#minaFilters&quot;)&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;I am not sure whether this approach is optimal, therefore I call it &quot;workaround&quot; and not &quot;solution&quot;.  The corresponding patch is attached.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12487677">CAMEL-2237</key>
            <summary>Improper ordering of MINA filters</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="mrt1nz">Martin Krasser</assignee>
                                    <reporter username="rnd">Dmytro Rud</reporter>
                        <labels>
                    </labels>
                <created>Mon, 30 Nov 2009 09:46:44 +0000</created>
                <updated>Wed, 3 Nov 2010 05:12:47 +0000</updated>
                            <resolved>Tue, 1 Dec 2009 14:31:16 +0000</resolved>
                                    <version>2.1.0</version>
                                    <fixVersion>2.2.0</fixVersion>
                                    <component>camel-mina</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12953983" author="mrt1nz" created="Mon, 30 Nov 2009 12:41:34 +0000"  >&lt;p&gt;Thanks for the patch Dmytro! I&apos;ll apply it (with minor changes) as soon as Camel 2.1.0 is out. &lt;/p&gt;</comment>
                            <comment id="12953988" author="davsclaus" created="Mon, 30 Nov 2009 12:47:56 +0000"  >&lt;p&gt;Maybe we can do as Jetty where you can specify a comma separated list of bean ids (ordered) for its security handlers.&lt;br/&gt;
That kinda avoids some of the ugly spring list constructs. &lt;/p&gt;

&lt;p&gt;And/or we can offer both combinations.&lt;/p&gt;

&lt;p&gt;And why do you state its the &lt;em&gt;beginning&lt;/em&gt;. The code for me looks like its inserted last&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;config.getFilterChain().addLast(&lt;span class=&quot;code-quote&quot;&gt;&quot;codec&quot;&lt;/span&gt;, &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; ProtocolCodecFilter(codecFactory));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;But I guess then others is added as &lt;tt&gt;addLast&lt;/tt&gt; as well and then it end up as &lt;em&gt;first&lt;/em&gt;, is this the case?&lt;/p&gt;</comment>
                            <comment id="12953979" author="mrt1nz" created="Mon, 30 Nov 2009 13:18:11 +0000"  >&lt;p&gt;Right, camel-mina always uses the addLast() method on the filter chain.&lt;br/&gt;
Regarding the comma-separated list of bean ids, I&apos;ll take a look and try to add support for it.&lt;/p&gt;</comment>
                            <comment id="12953999" author="davsclaus" created="Tue, 1 Dec 2009 09:33:50 +0000"  >&lt;p&gt;I wonder if we should invert the &lt;tt&gt;noDefaultCodec&lt;/tt&gt; option as its kinda confusing to say true to something that is no.&lt;/p&gt;

&lt;p&gt;Maybe it should be &lt;tt&gt;useDefaultCodec=false&lt;/tt&gt; and let that option be default &lt;b&gt;true&lt;/b&gt;.&lt;/p&gt;</comment>
                            <comment id="12951452" author="mrt1nz" created="Tue, 1 Dec 2009 09:56:14 +0000"  >&lt;p&gt;Agreed.&lt;/p&gt;</comment>
                            <comment id="12954005" author="mrt1nz" created="Tue, 1 Dec 2009 10:23:26 +0000"  >&lt;p&gt;Maybe instead of using &lt;tt&gt;useDefaultCodec&lt;/tt&gt; (with default value true) we should use &lt;tt&gt;allowDefaultCodec&lt;/tt&gt; (with default value true) because a default codec is only installed if the &lt;tt&gt;codec&lt;/tt&gt; parameter is &lt;tt&gt;null&lt;/tt&gt; and the &lt;tt&gt;textline&lt;/tt&gt; parameter is &lt;tt&gt;false&lt;/tt&gt;. With &lt;tt&gt;useDefaultCodec&lt;/tt&gt; a user might expect that the default codec is enforced (i.e. always used) which is not the case. An &lt;tt&gt;allowDefaultCodec&lt;/tt&gt; parameter expresses more closely what the component is actually doing.&lt;/p&gt;</comment>
                            <comment id="12954003" author="davsclaus" created="Tue, 1 Dec 2009 10:28:39 +0000"  >&lt;p&gt;+1 to allow &lt;/p&gt;</comment>
                            <comment id="12954012" author="mrt1nz" created="Tue, 1 Dec 2009 14:32:09 +0000"  >&lt;p&gt;Patch applied with minor changes and thanks to Dmytro.&lt;/p&gt;</comment>
                            <comment id="12954024" author="davsclaus" created="Tue, 1 Dec 2009 20:10:20 +0000"  >&lt;p&gt;Martin do you mind updating the Mina wiki documentation with this new option?&lt;/p&gt;</comment>
                            <comment id="12954022" author="mrt1nz" created="Tue, 1 Dec 2009 20:16:10 +0000"  >&lt;p&gt;Sure, I only got distracted with some other urgent things. I&apos;ll update the camel-mina Wiki page tomorrow.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12462817" name="camel-mina-20091130.patch" size="2011" author="rnd" created="Mon, 30 Nov 2009 09:47:26 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>76585</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i01ncv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>7553</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>