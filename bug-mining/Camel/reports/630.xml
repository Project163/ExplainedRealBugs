<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 09:33:07 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-1663] Spring BeanPostProcessors do not work on beans which are used in Camel route builders </title>
                <link>https://issues.apache.org/jira/browse/CAMEL-1663</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;Spring PostProcessors stop working for beans which are injected into Camel route builders.  See attached test cases showing processor breaks as soon as injected into a route builder.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12486385">CAMEL-1663</key>
            <summary>Spring BeanPostProcessors do not work on beans which are used in Camel route builders </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="pledge">Martin Gilday</reporter>
                        <labels>
                    </labels>
                <created>Sun, 31 May 2009 10:52:21 +0000</created>
                <updated>Sat, 21 Nov 2009 11:58:02 +0000</updated>
                            <resolved>Wed, 3 Jun 2009 12:05:22 +0000</resolved>
                                    <version>1.5.0</version>
                    <version>1.6.0</version>
                    <version>2.0-M1</version>
                    <version>1.6.1</version>
                                    <fixVersion>2.0-M2</fixVersion>
                                    <component>camel-spring</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12952388" author="pledge" created="Sun, 31 May 2009 10:56:27 +0000"  >&lt;p&gt;Test case is written for 1.6.0 which is the version I am using.  I have run the tests against 2.0-M1 and get the same result.  I have left the code in the POM and tests so the two can be toggled.&lt;/p&gt;</comment>
                            <comment id="12952417" author="davsclaus" created="Tue, 2 Jun 2009 13:51:29 +0000"  >&lt;p&gt;This is a hard one to get fixed.&lt;/p&gt;

&lt;p&gt;Namespace handlers in Spring is like a 2nd class citizen so the CamelBeanPostProcessor is not registered like the regular post processors as its done from a namespace handler. And then Spring just goes blank and denies running post processors as the initial number of post processors != current number of post processors.&lt;/p&gt;

&lt;p&gt;Then you get the dreadful &apos;bean X is not eligible for post processing&apos;.&lt;/p&gt;

&lt;p&gt;Its kinda like a catch-22 situation. I got a few more ideas to find a solution.&lt;/p&gt;</comment>
                            <comment id="12952432" author="davsclaus" created="Wed, 3 Jun 2009 06:26:47 +0000"  >&lt;p&gt;Okay finally looks like I am on track now.&lt;/p&gt;

&lt;p&gt;Spring is really a bit odd, as it disable post processing if you use its application context to lookup certain beans.&lt;br/&gt;
That ended up in a circular reference as CamelContext automatic creates a CamelBeanPostProcessor, and the CamelBeanPostProcessor have a reference to the CamelContext it belongs to. And as this id done while Spring namespace handler creates the CamelContext it regard it as a circular reference. And then the ballpark for post processors changes. And that looks like the case for the Autowired and other post processors for the @annotation stuff do not kick in.&lt;/p&gt;

&lt;p&gt;To remedy this problem I use a reference to the CamelContext bean id from the CamelBeanPostProcessor (just a String) then we do not have a circular reference.&lt;/p&gt;

&lt;p&gt;As I got a bit of experiment code I need to work a bit more on it to get a polished and working solution.&lt;br/&gt;
With the current code however I got both Spring and Camel to be happy and have their post processors work side by side and being able to setup all the @annotations people insert on their POJO classes and the Camel RouteBuilders as well.&lt;/p&gt;

</comment>
                            <comment id="12952433" author="davsclaus" created="Wed, 3 Jun 2009 09:27:14 +0000"  >&lt;p&gt;trunk: 781314&lt;/p&gt;

&lt;p&gt;The &lt;tt&gt;spring-event&lt;/tt&gt; component has a flaw. I will look into it but if its to complex to get working I would consider ditching it.&lt;br/&gt;
Much more important to get the @annotations to work.&lt;/p&gt;

&lt;p&gt;Martin I have applied it on trunk only. If you have the time please try testing it in your system.&lt;/p&gt;</comment>
                            <comment id="12952431" author="davsclaus" created="Wed, 3 Jun 2009 12:05:22 +0000"  >&lt;p&gt;And the last part with the spring-event fix&lt;/p&gt;

&lt;p&gt;trunk: 781349.&lt;/p&gt;</comment>
                            <comment id="12952460" author="davsclaus" created="Fri, 5 Jun 2009 10:18:36 +0000"  >&lt;p&gt;And this unit test in camel-spring demonstrating the mixed usage of annotations in same POJO with Spring and Camel annotations&lt;/p&gt;

&lt;p&gt;trunk: 781974.&lt;/p&gt;</comment>
                            <comment id="12952467" author="davsclaus" created="Fri, 5 Jun 2009 10:37:39 +0000"  >&lt;p&gt;Camel 1.x &lt;b&gt;before&lt;/b&gt; fix&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;[                          main] ClassPathXmlApplicationContext INFO  Bean &lt;span class=&quot;code-quote&quot;&gt;&apos;org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0&apos;&lt;/span&gt; is not eligible &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; getting processed by all BeanPostProcessors (&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; example: not eligible &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; auto-proxying)
[                          main] ClassPathXmlApplicationContext INFO  Bean &lt;span class=&quot;code-quote&quot;&gt;&apos;org.springframework.transaction.config.internalTransactionAdvisor&apos;&lt;/span&gt; is not eligible &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; getting processed by all BeanPostProcessors (&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; example: not eligible &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; auto-proxying)
[                          main] DefaultCamelContext            INFO  JMX enabled. Using InstrumentationLifecycleStrategy.
[                          main] ClassPathXmlApplicationContext INFO  Bean &lt;span class=&quot;code-quote&quot;&gt;&apos;annotatedRoute&apos;&lt;/span&gt; is not eligible &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; getting processed by all BeanPostProcessors (&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; example: not eligible &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; auto-proxying)
[                          main] DriverManagerDataSource        INFO  Loaded JDBC driver: org.hsqldb.jdbcDriver
[                          main] ClassPathXmlApplicationContext INFO  Bean &lt;span class=&quot;code-quote&quot;&gt;&apos;dataSource&apos;&lt;/span&gt; is not eligible &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; getting processed by all BeanPostProcessors (&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; example: not eligible &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; auto-proxying)
[                          main] ClassPathXmlApplicationContext INFO  Bean &lt;span class=&quot;code-quote&quot;&gt;&apos;txManager&apos;&lt;/span&gt; is not eligible &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; getting processed by all BeanPostProcessors (&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; example: not eligible &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; auto-proxying)
[                          main] ClassPathXmlApplicationContext INFO  Bean &lt;span class=&quot;code-quote&quot;&gt;&apos;PROPAGATION_REQUIRED&apos;&lt;/span&gt; is not eligible &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; getting processed by all BeanPostProcessors (&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; example: not eligible &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; auto-proxying)
[                          main] ClassPathXmlApplicationContext INFO  Bean &lt;span class=&quot;code-quote&quot;&gt;&apos;camel&apos;&lt;/span&gt; is not eligible &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; getting processed by all BeanPostProcessors (&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; example: not eligible &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; auto-proxying)
[                          main] ClassPathXmlApplicationContext INFO  Bean &lt;span class=&quot;code-quote&quot;&gt;&apos;camel&apos;&lt;/span&gt; is not eligible &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; getting processed by all BeanPostProcessors (&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; example: not eligible &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; auto-proxying)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Camel 2.0 &lt;b&gt;after&lt;/b&gt; fix:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;2009-06-05 12:36:31,711 [main           ] INFO  ClassPathXmlApplicationContext - Bean factory &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; application context [org.springframework.context.support.ClassPathXmlApplicationContext@5c98f3]: org.springframework.beans.factory.support.DefaultListableBeanFactory@75db37
2009-06-05 12:36:31,802 [main           ] INFO  ClassPathXmlApplicationContext - Bean &lt;span class=&quot;code-quote&quot;&gt;&apos;org.springframework.transaction.annotation.AnnotationTransactionAttributeSource#0&apos;&lt;/span&gt; is not eligible &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; getting processed by all BeanPostProcessors (&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; example: not eligible &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; auto-proxying)
2009-06-05 12:36:31,809 [main           ] INFO  ClassPathXmlApplicationContext - Bean &lt;span class=&quot;code-quote&quot;&gt;&apos;org.springframework.transaction.config.internalTransactionAdvisor&apos;&lt;/span&gt; is not eligible &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; getting processed by all BeanPostProcessors (&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; example: not eligible &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; auto-proxying)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Notice that with the fix all the beans used by the application as such can be post processed.&lt;br/&gt;
In Camel 1.x many of the beans &lt;b&gt;cannot&lt;/b&gt; be.&lt;/p&gt;</comment>
                            <comment id="12953731" author="davsclaus" created="Sat, 21 Nov 2009 11:58:02 +0000"  >&lt;p&gt;Closing all 2.0M2 tickets&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10001">
                    <name>dependent</name>
                                                                <inwardlinks description="is depended upon by">
                                        <issuelink>
            <issuekey id="12486428">CAMEL-1601</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12485663">CAMEL-1636</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12462967" name="camel-1663.zip" size="10812" author="pledge" created="Sun, 31 May 2009 10:56:27 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>76780</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            16 years, 1 week, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i01jsv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6977</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>