<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 11:07:28 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-21096] interceptFrom with pattern specified are not executed with rest-dsl</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-21096</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;In our application we have a base rout builder class in which we would like to intercept all REST routes executions (REST requests)&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;abstract&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;BaseRouteBuilder &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; RouteBuilder {
@Autowired
&lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; RestInterceptorProcessor restInterceptorProcessor;

@Override
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void configure() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
    interceptFrom(&lt;span class=&quot;code-quote&quot;&gt;&quot;&lt;span class=&quot;code-keyword&quot;&gt;rest&lt;/span&gt;:.*&quot;&lt;/span&gt;)
            .process(restInterceptorProcessor);
} &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;All our routes extend this class and are constructed like the code below:&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@Component
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;MySampleRestCamelRestComponent &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; BaseRouteBuilder { 
@Override
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void configure() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
    &lt;span class=&quot;code-keyword&quot;&gt;super&lt;/span&gt;.configure();

    &lt;span class=&quot;code-keyword&quot;&gt;rest&lt;/span&gt;(&lt;span class=&quot;code-quote&quot;&gt;&quot;/api/v1/some-endpoint&quot;&lt;/span&gt;)
  &#160; &#160; &#160; &#160; &#160; &#160; &#160; .consumes(MediaType.APPLICATION_JSON_VALUE)
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; .produces(MediaType.APPLICATION_JSON_VALUE)
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; .get(&lt;span class=&quot;code-quote&quot;&gt;&quot;/objects&quot;&lt;/span&gt;)
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; .id(&lt;span class=&quot;code-quote&quot;&gt;&quot;getObjects&quot;&lt;/span&gt;)
&#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; .to(&lt;span class=&quot;code-quote&quot;&gt;&quot;direct:&lt;span class=&quot;code-keyword&quot;&gt;rest&lt;/span&gt;-fetch-objects&quot;&lt;/span&gt;)
}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;This approach worked fine in Camel 3.&lt;b&gt;, but in Camel 4.&lt;/b&gt; my processor is not executed.&lt;/p&gt;

&lt;p&gt;I&apos;ve made some investigation and:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;when we skip the pattern and just use interceptFrom().process(restInterceptorProcessor) - the processor is executed on REST request, but also for other requests like f.e. seda:&lt;/li&gt;
	&lt;li&gt;when I&apos;ve debugged Camel source code while using the rest:* or rest:.* patterns, the URI matcher returns true (URI start with &quot;rest://get://api/v1/some-endpoint&quot; etc.) within the class org.apache.camel.model.RouteDefinitionHelper / method&lt;/li&gt;
&lt;/ul&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; void doInitInterceptors(
&#160; &#160; &#160; &#160; &#160; &#160; CamelContext context, RouteDefinition route, List&amp;lt;ProcessorDefinition&amp;lt;?&amp;gt;&amp;gt; upper,
&#160; &#160; &#160; &#160; &#160; &#160; List&amp;lt;InterceptDefinition&amp;gt; intercepts,
&#160; &#160; &#160; &#160; &#160; &#160; List&amp;lt;InterceptFromDefinition&amp;gt; interceptFromDefinitions,
&#160; &#160; &#160; &#160; &#160; &#160; List&amp;lt;InterceptSendToEndpointDefinition&amp;gt; interceptSendToEndpointDefinitions)
 &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;, but still my processor is not executed after REST request.&lt;/p&gt;

&lt;p&gt;Could you please check this issue?&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13589278">CAMEL-21096</key>
            <summary>interceptFrom with pattern specified are not executed with rest-dsl</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="Tomasz Sewery&#324;ski">Tomek</reporter>
                        <labels>
                    </labels>
                <created>Mon, 19 Aug 2024 08:29:28 +0000</created>
                <updated>Wed, 21 Aug 2024 07:14:10 +0000</updated>
                            <resolved>Mon, 19 Aug 2024 16:26:52 +0000</resolved>
                                    <version>4.5.0</version>
                    <version>4.6.0</version>
                    <version>4.7.0</version>
                                    <fixVersion>4.8.0</fixVersion>
                                    <component>camel-core</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="17874850" author="tomasz sewery&#324;ski" created="Mon, 19 Aug 2024 11:06:21 +0000"  >&lt;p&gt;I&apos;ve downgraded Camel to version 4.4.3 (latest one from 4.* family), because the intercept changes were introduced within version 4.5 (&lt;a href=&quot;https://camel.apache.org/manual/camel-4x-upgrade-guide-4_5.html)&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://camel.apache.org/manual/camel-4x-upgrade-guide-4_5.html)&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;It looks like everything works fine using 4.4.3&lt;/p&gt;</comment>
                            <comment id="17874852" author="davsclaus" created="Mon, 19 Aug 2024 11:10:34 +0000"  >&lt;p&gt;You can set inlineRoutes=false in rest-dsl as doced in the guide&lt;br/&gt;
&lt;a href=&quot;https://camel.apache.org/manual/camel-4x-upgrade-guide-4_5.html#_rest_dsl&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://camel.apache.org/manual/camel-4x-upgrade-guide-4_5.html#_rest_dsl&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17875377" author="tomasz sewery&#324;ski" created="Wed, 21 Aug 2024 07:14:10 +0000"  >&lt;p&gt;Thank you very much for the hint. Setting the camel.rest.inline-routes flag to false solved the issue.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            1 year, 12 weeks ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z1qxo8:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>