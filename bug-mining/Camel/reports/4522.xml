<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:29:37 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-12487] S3Producer must close the streams it opens</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-12487</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;We&apos;ve got a busy route with high memory pressure, we found out it was due to S3Producer not closing the streams it opened in some cases. See&#160;&lt;a href=&quot;https://github.com/apache/camel/pull/2321&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;MR&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13157426">CAMEL-12487</key>
            <summary>S3Producer must close the streams it opens</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="acosentino">Andrea Cosentino</assignee>
                                    <reporter username="damien_b">Damien B</reporter>
                        <labels>
                    </labels>
                <created>Sun, 6 May 2018 09:31:48 +0000</created>
                <updated>Tue, 8 May 2018 08:52:14 +0000</updated>
                            <resolved>Tue, 8 May 2018 08:51:36 +0000</resolved>
                                    <version>2.20.3</version>
                    <version>2.21.0</version>
                                    <fixVersion>2.20.4</fixVersion>
                    <fixVersion>2.21.2</fixVersion>
                    <fixVersion>2.22.0</fixVersion>
                                    <component>camel-aws</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="16465086" author="githubbot" created="Sun, 6 May 2018 11:32:12 +0000"  >&lt;p&gt;damienb-opt commented on issue #2321: &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12487&quot; title=&quot;S3Producer must close the streams it opens&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12487&quot;&gt;&lt;del&gt;CAMEL-12487&lt;/del&gt;&lt;/a&gt; S3Producer must close the streams it opens &lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/camel/pull/2321#issuecomment-386872733&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2321#issuecomment-386872733&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   See &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12487&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/CAMEL-12487&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16465643" author="githubbot" created="Mon, 7 May 2018 08:59:10 +0000"  >&lt;p&gt;oscerd commented on issue #2321: &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12487&quot; title=&quot;S3Producer must close the streams it opens&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12487&quot;&gt;&lt;del&gt;CAMEL-12487&lt;/del&gt;&lt;/a&gt; S3Producer must close the streams it opens &lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/camel/pull/2321#issuecomment-387003326&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2321#issuecomment-387003326&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Can you please rebase?&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16466004" author="githubbot" created="Mon, 7 May 2018 15:11:44 +0000"  >&lt;p&gt;damienb-opt commented on issue #2321: &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12487&quot; title=&quot;S3Producer must close the streams it opens&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12487&quot;&gt;&lt;del&gt;CAMEL-12487&lt;/del&gt;&lt;/a&gt; S3Producer must close the streams it opens &lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/camel/pull/2321#issuecomment-387097397&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2321#issuecomment-387097397&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Could you be more precise? I don&apos;t understand what you&apos;re asking ^^;&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16466022" author="githubbot" created="Mon, 7 May 2018 15:21:30 +0000"  >&lt;p&gt;oscerd commented on issue #2321: &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12487&quot; title=&quot;S3Producer must close the streams it opens&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12487&quot;&gt;&lt;del&gt;CAMEL-12487&lt;/del&gt;&lt;/a&gt; S3Producer must close the streams it opens &lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/camel/pull/2321#issuecomment-387100516&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2321#issuecomment-387100516&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   You need to align the code to the master branch with a git pull --rebase origin master&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16466043" author="githubbot" created="Mon, 7 May 2018 15:39:38 +0000"  >&lt;p&gt;damienb-opt commented on issue #2321: &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12487&quot; title=&quot;S3Producer must close the streams it opens&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12487&quot;&gt;&lt;del&gt;CAMEL-12487&lt;/del&gt;&lt;/a&gt; S3Producer must close the streams it opens &lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/camel/pull/2321#issuecomment-387106398&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2321#issuecomment-387106398&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   It was created directly from the GitHub editor, I didn&apos;t check out the repo. Let&apos;s see.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16466056" author="githubbot" created="Mon, 7 May 2018 15:47:37 +0000"  >&lt;p&gt;damienb-opt commented on issue #2321: &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12487&quot; title=&quot;S3Producer must close the streams it opens&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12487&quot;&gt;&lt;del&gt;CAMEL-12487&lt;/del&gt;&lt;/a&gt; S3Producer must close the streams it opens &lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/camel/pull/2321#issuecomment-387109038&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2321#issuecomment-387109038&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Ok, GitHub documentation says you need to do it from a Git client, but you should have a button &quot;rebase and merge&quot; on your side &lt;a href=&quot;https://blog.github.com/2016-09-26-rebase-and-merge-pull-requests/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://blog.github.com/2016-09-26-rebase-and-merge-pull-requests/&lt;/a&gt; .&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16466060" author="githubbot" created="Mon, 7 May 2018 15:49:45 +0000"  >&lt;p&gt;oscerd commented on issue #2321: &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12487&quot; title=&quot;S3Producer must close the streams it opens&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12487&quot;&gt;&lt;del&gt;CAMEL-12487&lt;/del&gt;&lt;/a&gt; S3Producer must close the streams it opens &lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/camel/pull/2321#issuecomment-387109762&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2321#issuecomment-387109762&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   I know it but your PR has conflicts even when rebasing. So I can&apos;t use it directly. By the way I&apos;ll create a commit with your fix and let you know.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16466091" author="githubbot" created="Mon, 7 May 2018 16:16:57 +0000"  >&lt;p&gt;damienb-opt commented on issue #2321: &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12487&quot; title=&quot;S3Producer must close the streams it opens&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12487&quot;&gt;&lt;del&gt;CAMEL-12487&lt;/del&gt;&lt;/a&gt; S3Producer must close the streams it opens &lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/camel/pull/2321#issuecomment-387118634&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2321#issuecomment-387118634&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   My bad, thought apache-master was the logical master for an Apache project.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16467069" author="githubbot" created="Tue, 8 May 2018 08:34:38 +0000"  >&lt;p&gt;damienb-opt opened a new pull request #2326: &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12487&quot; title=&quot;S3Producer must close the streams it opens&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12487&quot;&gt;&lt;del&gt;CAMEL-12487&lt;/del&gt;&lt;/a&gt;: S3Producer must close the streams it opens&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/camel/pull/2326&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2326&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   See &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12487&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/CAMEL-12487&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16467070" author="githubbot" created="Tue, 8 May 2018 08:34:39 +0000"  >&lt;p&gt;GitHub user damienb-opt opened a pull request:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/2326&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2326&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12487&quot; title=&quot;S3Producer must close the streams it opens&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12487&quot;&gt;&lt;del&gt;CAMEL-12487&lt;/del&gt;&lt;/a&gt;: S3Producer must close the streams it opens&lt;/p&gt;

&lt;p&gt;    See &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12487&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/CAMEL-12487&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;You can merge this pull request into a Git repository by running:&lt;/p&gt;

&lt;p&gt;    $ git pull &lt;a href=&quot;https://github.com/damienb-opt/camel&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/damienb-opt/camel&lt;/a&gt; patch-2&lt;/p&gt;

&lt;p&gt;Alternatively you can review and apply these changes as the patch at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/2326.patch&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2326.patch&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;To close this pull request, make a commit to your master/trunk branch&lt;br/&gt;
with (at least) the following in the commit message:&lt;/p&gt;

&lt;p&gt;    This closes #2326&lt;/p&gt;

&lt;hr /&gt;
&lt;p&gt;commit d14f5b173d063f24872f0c80af98937fbf8f2212&lt;br/&gt;
Author: damienb-opt &amp;lt;36661255+damienb-opt@...&amp;gt;&lt;br/&gt;
Date:   2018-05-08T08:34:09Z&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12487&quot; title=&quot;S3Producer must close the streams it opens&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12487&quot;&gt;&lt;del&gt;CAMEL-12487&lt;/del&gt;&lt;/a&gt;: S3Producer must close the streams it opens&lt;/p&gt;

&lt;p&gt;    See &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12487&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/CAMEL-12487&lt;/a&gt;&lt;/p&gt;

&lt;hr /&gt;</comment>
                            <comment id="16467072" author="githubbot" created="Tue, 8 May 2018 08:35:17 +0000"  >&lt;p&gt;oscerd commented on issue #2326: &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12487&quot; title=&quot;S3Producer must close the streams it opens&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12487&quot;&gt;&lt;del&gt;CAMEL-12487&lt;/del&gt;&lt;/a&gt;: S3Producer must close the streams it opens&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/camel/pull/2326#issuecomment-387327792&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2326#issuecomment-387327792&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Thanks, I&apos;m merging.&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16467073" author="githubbot" created="Tue, 8 May 2018 08:35:47 +0000"  >&lt;p&gt;damienb-opt closed pull request #2321: &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12487&quot; title=&quot;S3Producer must close the streams it opens&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12487&quot;&gt;&lt;del&gt;CAMEL-12487&lt;/del&gt;&lt;/a&gt; S3Producer must close the streams it opens &lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/camel/pull/2321&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2321&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/components/camel-aws/src/main/java/org/apache/camel/component/aws/s3/S3Producer.java b/components/camel-aws/src/main/java/org/apache/camel/component/aws/s3/S3Producer.java&lt;br/&gt;
index bb5847c28bb..2af5742450a 100644&lt;br/&gt;
&amp;#8212; a/components/camel-aws/src/main/java/org/apache/camel/component/aws/s3/S3Producer.java&lt;br/&gt;
+++ b/components/camel-aws/src/main/java/org/apache/camel/component/aws/s3/S3Producer.java&lt;br/&gt;
@@ -242,10 +242,11 @@ public void processSingleOp(final Exchange exchange) throws Exception &lt;/p&gt;
{
             message.setHeader(S3Constants.VERSION_ID, putObjectResult.getVersionId());
         }

&lt;p&gt;+        // close streams&lt;br/&gt;
+        IOHelper.close(putObjectRequest.getInputStream());&lt;br/&gt;
+        IOHelper.close(is);&lt;br/&gt;
+&lt;br/&gt;
         if (getConfiguration().isDeleteAfterWrite() &amp;amp;&amp;amp; filePayload != null) &lt;/p&gt;
{
-            // close streams
-            IOHelper.close(putObjectRequest.getInputStream());
-            IOHelper.close(is);
             FileUtil.deleteFile(filePayload);
         }
&lt;p&gt;     }&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16467074" author="githubbot" created="Tue, 8 May 2018 08:35:47 +0000"  >&lt;p&gt;damienb-opt commented on issue #2321: &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12487&quot; title=&quot;S3Producer must close the streams it opens&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12487&quot;&gt;&lt;del&gt;CAMEL-12487&lt;/del&gt;&lt;/a&gt; S3Producer must close the streams it opens &lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/camel/pull/2321#issuecomment-387327925&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2321#issuecomment-387327925&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Replaced by &lt;a href=&quot;https://github.com/apache/camel/pull/2326&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2326&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16467075" author="githubbot" created="Tue, 8 May 2018 08:35:47 +0000"  >&lt;p&gt;Github user damienb-opt closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/2321&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2321&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16467094" author="githubbot" created="Tue, 8 May 2018 08:49:31 +0000"  >&lt;p&gt;oscerd closed pull request #2326: &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12487&quot; title=&quot;S3Producer must close the streams it opens&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12487&quot;&gt;&lt;del&gt;CAMEL-12487&lt;/del&gt;&lt;/a&gt;: S3Producer must close the streams it opens&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/camel/pull/2326&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2326&lt;/a&gt;&lt;/p&gt;




&lt;p&gt;This is a PR merged from a forked repository.&lt;br/&gt;
As GitHub hides the original diff on merge, it is displayed below for&lt;br/&gt;
the sake of provenance:&lt;/p&gt;

&lt;p&gt;As this is a foreign pull request (from a fork), the diff is supplied&lt;br/&gt;
below (as it won&apos;t show otherwise due to GitHub magic):&lt;/p&gt;

&lt;p&gt;diff --git a/components/camel-aws/src/main/java/org/apache/camel/component/aws/s3/S3Producer.java b/components/camel-aws/src/main/java/org/apache/camel/component/aws/s3/S3Producer.java&lt;br/&gt;
index fc5c2354945..159eff64175 100644&lt;br/&gt;
&amp;#8212; a/components/camel-aws/src/main/java/org/apache/camel/component/aws/s3/S3Producer.java&lt;br/&gt;
+++ b/components/camel-aws/src/main/java/org/apache/camel/component/aws/s3/S3Producer.java&lt;br/&gt;
@@ -276,10 +276,11 @@ public void processSingleOp(final Exchange exchange) throws Exception &lt;/p&gt;
{
             message.setHeader(S3Constants.VERSION_ID, putObjectResult.getVersionId());
         }

&lt;p&gt;+        // close streams&lt;br/&gt;
+        IOHelper.close(putObjectRequest.getInputStream());&lt;br/&gt;
+        IOHelper.close(is);&lt;br/&gt;
+&lt;br/&gt;
         if (getConfiguration().isDeleteAfterWrite() &amp;amp;&amp;amp; filePayload != null) &lt;/p&gt;
{
-            // close streams
-            IOHelper.close(putObjectRequest.getInputStream());
-            IOHelper.close(is);
             FileUtil.deleteFile(filePayload);
         }
&lt;p&gt;     }&lt;/p&gt;




&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                            <comment id="16467095" author="githubbot" created="Tue, 8 May 2018 08:49:32 +0000"  >&lt;p&gt;Github user oscerd closed the pull request at:&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://github.com/apache/camel/pull/2326&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2326&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16467103" author="githubbot" created="Tue, 8 May 2018 08:52:14 +0000"  >&lt;p&gt;oscerd commented on issue #2326: &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-12487&quot; title=&quot;S3Producer must close the streams it opens&quot; class=&quot;issue-link&quot; data-issue-key=&quot;CAMEL-12487&quot;&gt;&lt;del&gt;CAMEL-12487&lt;/del&gt;&lt;/a&gt;: S3Producer must close the streams it opens&lt;br/&gt;
URL: &lt;a href=&quot;https://github.com/apache/camel/pull/2326#issuecomment-387332457&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/2326#issuecomment-387332457&lt;/a&gt;&lt;/p&gt;


&lt;p&gt;   Thanks for the PR. It has been merged on master, 2.21.x and 2.20.x&lt;/p&gt;

&lt;p&gt;----------------------------------------------------------------&lt;br/&gt;
This is an automated message from the Apache Git Service.&lt;br/&gt;
To respond to the message, please log on GitHub and use the&lt;br/&gt;
URL above to go to the specific comment.&lt;/p&gt;

&lt;p&gt;For queries about this service, please contact Infrastructure at:&lt;br/&gt;
users@infra.apache.org&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10061"><![CDATA[Novice]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 28 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3te1b:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>