<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:54:23 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-18130] camel-ftp - Move-File Post Processing in (S)FTP not working if OutMessage is set</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-18130</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;When the last processor of a route sets a outMessage, the move-file post processing in (s)ftp adapter is not working.&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;

&lt;p&gt;I created following reproducer: &lt;a href=&quot;https://github.com/mash-sap/camelFTP&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/mash-sap/camelFTP&lt;/a&gt; The evaluation of the expressions (i.e. &lt;a href=&quot;file:onlyname&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;file:onlyname&lt;/a&gt;) is looking in the inMessage of the exchange to evaluate the filename (link&amp;lt;&lt;a href=&quot;https://github.com/apache/camel/blob/main/core/camel-core-languages/src/main/java/org/apache/camel/language/simple/SimpleExpressionBuilder.java#L259&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/blob/main/core/camel-core-languages/src/main/java/org/apache/camel/language/simple/SimpleExpressionBuilder.java#L259&lt;/a&gt;&amp;gt;). However, the properties of the files may get bound to the outMessage if there is one (link&amp;lt;&lt;a href=&quot;https://github.com/apache/camel/blob/camel-2.24.x/camel-core/src/main/java/org/apache/camel/component/file/GenericFile.java#L134&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/blob/camel-2.24.x/camel-core/src/main/java/org/apache/camel/component/file/GenericFile.java#L134&lt;/a&gt;&amp;gt;). Therefore the evaluation is not working as expected. I&apos;m not too familiar with the code, but one possible solution (for post-processing) could be, to always bind the file-properties to the in message. But maybe this is not valid for other use-cases and therefore parameterization is required: Link&amp;lt;&lt;a href=&quot;https://github.com/apache/camel/blob/camel-2.24.x/camel-core/src/main/java/org/apache/camel/component/file/GenericFile.java#L134&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/blob/camel-2.24.x/camel-core/src/main/java/org/apache/camel/component/file/GenericFile.java#L134&lt;/a&gt;&amp;gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13445817">CAMEL-18130</key>
            <summary>camel-ftp - Move-File Post Processing in (S)FTP not working if OutMessage is set</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="mash-sap">Manuel Shenavai</reporter>
                        <labels>
                    </labels>
                <created>Thu, 19 May 2022 12:14:01 +0000</created>
                <updated>Sun, 22 May 2022 19:44:52 +0000</updated>
                            <resolved>Fri, 20 May 2022 15:02:29 +0000</resolved>
                                    <version>3.17.0</version>
                                    <fixVersion>3.18.0</fixVersion>
                                    <component>camel-file</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17539506" author="mash-sap" created="Thu, 19 May 2022 12:18:02 +0000"  >&lt;p&gt;PR created: &lt;a href=&quot;https://github.com/apache/camel/pull/7645&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/pull/7645&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17539547" author="davsclaus" created="Thu, 19 May 2022 13:19:43 +0000"  >&lt;p&gt;The OUT message is deprecated, you should not use that&lt;/p&gt;</comment>
                            <comment id="17539558" author="mash-sap" created="Thu, 19 May 2022 13:34:09 +0000"  >&lt;p&gt;Just for my understanding: Does it mean that in Camel 3.x there should never be a out message? Or are there some cases where having a out message is valid?&lt;/p&gt;</comment>
                            <comment id="17539560" author="siano" created="Thu, 19 May 2022 13:35:09 +0000"  >&lt;p&gt;Hi Claus, sure out messages are deprecated, but several standard camel components (e.g. camel-cxf) still use out messages, so this issue will happen if one of these components is involved.&lt;/p&gt;</comment>
                            <comment id="17540152" author="davsclaus" created="Fri, 20 May 2022 14:48:44 +0000"  >&lt;p&gt;No this only happens in rare cases like what you are doing in a custom processor - the routing engine deals with the IN vs OUT between its nodes.&lt;br/&gt;
However I am working on a cleaner fix than yours&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            3 years, 25 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z12idc:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>