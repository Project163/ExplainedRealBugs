<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 09:53:25 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-5605] sftp component: Cannot acquire read lock for files in sub directories if property recursive=true and readLock=changed</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-5605</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;I use endpoint to consummer files from sftp:&lt;br/&gt;
&amp;lt;endpoint id=&quot;sftp_server&quot; uri=&quot;sftp://${server_path}?privateKeyFile=${sftp_key_path}&amp;amp;localWorkDirectory=${tmp}&amp;amp;idempotent=true&amp;amp;idempotentRepository=#fileStore&amp;amp;readLock=changed&amp;amp;recursive=true&amp;amp;filter=#myAntFilter&amp;amp;fastExistsCheck=true&quot; /&amp;gt;&lt;/p&gt;

&lt;p&gt;And if file exist in the sub directory of ${server_path}, I get warning:&lt;br/&gt;
16:31:16,288 WARN  &lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.camel.component.file.remote.strategy.SftpChangedExclusiveReadLockStrategy&amp;#93;&lt;/span&gt; (Camel (camel-1) thread #0 - sftp://test@testserver/inbox2) Cannot acquire read lock within 20000 millis. Will skip the file: GenericFile&lt;span class=&quot;error&quot;&gt;&amp;#91;qwe/rty/test.csv&amp;#93;&lt;/span&gt;&lt;/p&gt;


&lt;p&gt;16:31:01,081 TRACE &lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.camel.component.file.remote.strategy.SftpChangedExclusiveReadLockStrategy&amp;#93;&lt;/span&gt; (Camel (camel-1) thread #0 - sftp://test@testserver/inbox2) Using fast exists to update file information for GenericFile&lt;span class=&quot;error&quot;&gt;&amp;#91;qwe/rty/test.csv&amp;#93;&lt;/span&gt;&lt;br/&gt;
16:31:01,082 TRACE &lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.camel.component.file.remote.SftpOperations&amp;#93;&lt;/span&gt; (Camel (camel-1) thread #0 - sftp://test@testserver/inbox2) listFiles(inbox2/qwe/rty/test.csv)&lt;br/&gt;
16:31:01,148 TRACE &lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.camel.component.file.remote.strategy.SftpChangedExclusiveReadLockStrategy&amp;#93;&lt;/span&gt; (Camel (camel-1) thread #0 - sftp://test@testserver/inbox2) List files inbox2/qwe/rty/test.csv found 1 files&lt;br/&gt;
16:31:01,149 TRACE &lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.camel.component.file.remote.strategy.SftpChangedExclusiveReadLockStrategy&amp;#93;&lt;/span&gt; (Camel (camel-1) thread #0 - sftp://test@testserver/inbox2) Previous last modified: 0, new last modified: 0&lt;br/&gt;
16:31:01,150 TRACE &lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.camel.component.file.remote.strategy.SftpChangedExclusiveReadLockStrategy&amp;#93;&lt;/span&gt; (Camel (camel-1) thread #0 - sftp://test@testserver/inbox2) Previous length: 0, new length: 0&lt;br/&gt;
16:31:01,151 TRACE &lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.camel.component.file.remote.strategy.SftpChangedExclusiveReadLockStrategy&amp;#93;&lt;/span&gt; (Camel (camel-1) thread #0 - sftp://test@testserver/inbox2) Exclusive read lock not granted. Sleeping for 5000 millis.&lt;/p&gt;


&lt;p&gt;16:30:56,005 TRACE &lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.camel.component.file.remote.SftpConsumer&amp;#93;&lt;/span&gt; (Camel (camel-1) thread #0 - sftp://test@testserver/inbox2) Processing file: GenericFile&lt;span class=&quot;error&quot;&gt;&amp;#91;qwe/rty/test.csv&amp;#93;&lt;/span&gt;&lt;br/&gt;
16:30:56,007 TRACE &lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.camel.component.file.remote.strategy.SftpChangedExclusiveReadLockStrategy&amp;#93;&lt;/span&gt; (Camel (camel-1) thread #0 - sftp://test@testserver/inbox2) Waiting for exclusive read lock to file: GenericFile&lt;span class=&quot;error&quot;&gt;&amp;#91;qwe/rty/test.csv&amp;#93;&lt;/span&gt;&lt;br/&gt;
16:30:56,008 TRACE &lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.camel.component.file.remote.strategy.SftpChangedExclusiveReadLockStrategy&amp;#93;&lt;/span&gt; (Camel (camel-1) thread #0 - sftp://test@testserver/inbox2) Using fast exists to update file information for GenericFile&lt;span class=&quot;error&quot;&gt;&amp;#91;qwe/rty/test.csv&amp;#93;&lt;/span&gt;&lt;br/&gt;
16:30:56,010 TRACE &lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.camel.component.file.remote.SftpOperations&amp;#93;&lt;/span&gt; (Camel (camel-1) thread #0 - sftp://test@testserver/inbox2) listFiles(inbox2/qwe/rty/test.csv)&lt;br/&gt;
16:30:56,078 TRACE &lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.camel.component.file.remote.strategy.SftpChangedExclusiveReadLockStrategy&amp;#93;&lt;/span&gt; (Camel (camel-1) thread #0 - sftp://test@testserver/inbox2) List files inbox2/qwe/rty/test.csv found 1 files&lt;br/&gt;
16:30:56,079 TRACE &lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.camel.component.file.remote.strategy.SftpChangedExclusiveReadLockStrategy&amp;#93;&lt;/span&gt; (Camel (camel-1) thread #0 - sftp://test@testserver/inbox2) Previous last modified: -9223372036854775808, new last modified: 0&lt;br/&gt;
16:30:56,079 TRACE &lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.camel.component.file.remote.strategy.SftpChangedExclusiveReadLockStrategy&amp;#93;&lt;/span&gt; (Camel (camel-1) thread #0 - sftp://test@testserver/inbox2) Previous length: -9223372036854775808, new length: 0&lt;br/&gt;
16:30:56,080 TRACE &lt;span class=&quot;error&quot;&gt;&amp;#91;org.apache.camel.component.file.remote.strategy.SftpChangedExclusiveReadLockStrategy&amp;#93;&lt;/span&gt; (Camel (camel-1) thread #0 - sftp://test@testserver/inbox2) Exclusive read lock not granted. Sleeping for 5000 millis.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12607450">CAMEL-5605</key>
            <summary>sftp component: Cannot acquire read lock for files in sub directories if property recursive=true and readLock=changed</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="basssjm">Jury Matveentsev</reporter>
                        <labels>
                    </labels>
                <created>Thu, 13 Sep 2012 12:54:09 +0000</created>
                <updated>Tue, 18 Sep 2012 10:43:45 +0000</updated>
                            <resolved>Mon, 17 Sep 2012 15:58:02 +0000</resolved>
                                    <version>2.10.1</version>
                                    <fixVersion>2.10.2</fixVersion>
                    <fixVersion>2.11.0</fixVersion>
                                    <component>camel-ftp</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="13457107" author="davsclaus" created="Mon, 17 Sep 2012 15:58:30 +0000"  >&lt;p&gt;Thanks for the patch. I did the same for the regular ftp as the name returned is the local name.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12545428" name="SftpChangedExclusiveReadLockStrategy.patch" size="894" author="basssjm" created="Mon, 17 Sep 2012 15:20:23 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>241478</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 10 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12310041" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Patch Info</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10042"><![CDATA[Patch Available]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0284f:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>10917</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>