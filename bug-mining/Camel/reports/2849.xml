<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:03:51 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-7754] Property Trigger.timerZone is declared as constant but not implemented</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-7754</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;Seems that we have a problem with Quartz/Quartz2 components. The doc claims that we can setup this property in the URI &quot;trigger.timeZone&quot; (&lt;a href=&quot;http://camel.apache.org/quartz.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://camel.apache.org/quartz.html&lt;/a&gt; - see specifying timezone ) but quartz don&apos;t use it even if a constant is defined :&lt;a href=&quot;https://www.dropbox.com/s/1wjt3slsz3jajlh/Screenshot%202014-08-27%2010.29.53.png?dl=0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.dropbox.com/s/1wjt3slsz3jajlh/Screenshot%202014-08-27%2010.29.53.png?dl=0&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;We have the same issue too with quartz2 --&amp;gt; &lt;a href=&quot;https://www.dropbox.com/s/jcxnn72bzi38qob/Screenshot%202014-08-27%2010.31.34.png?dl=0&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://www.dropbox.com/s/jcxnn72bzi38qob/Screenshot%202014-08-27%2010.31.34.png?dl=0&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="12737045">CAMEL-7754</key>
            <summary>Property Trigger.timerZone is declared as constant but not implemented</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="cmoulliard">Moulliard Charles</assignee>
                                    <reporter username="cmoulliard">Moulliard Charles</reporter>
                        <labels>
                    </labels>
                <created>Wed, 27 Aug 2014 08:37:35 +0000</created>
                <updated>Mon, 1 Sep 2014 07:24:41 +0000</updated>
                            <resolved>Wed, 27 Aug 2014 10:29:11 +0000</resolved>
                                    <version>2.12.1</version>
                    <version>2.13.2</version>
                                    <fixVersion>2.14.0</fixVersion>
                                    <component>camel-quartz</component>
                    <component>camel-quartz2</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14112037" author="cmoulliard" created="Wed, 27 Aug 2014 08:39:21 +0000"  >&lt;p&gt;Test case used&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;CamelQuartzTest &lt;span class=&quot;code-keyword&quot;&gt;extends&lt;/span&gt; CamelTestSupport {

    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testQuartzCronRoute() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        MockEndpoint mock = getMockEndpoint(&lt;span class=&quot;code-quote&quot;&gt;&quot;mock:result&quot;&lt;/span&gt;);
        mock.expectedMinimumMessageCount(3);

        assertMockEndpointsSatisfied();

        JobDetail job = mock.getReceivedExchanges().get(0).getIn().getHeader(&lt;span class=&quot;code-quote&quot;&gt;&quot;jobDetail&quot;&lt;/span&gt;, JobDetail.class);
        assertNotNull(job);

        assertEquals(&lt;span class=&quot;code-quote&quot;&gt;&quot;cron&quot;&lt;/span&gt;, job.getJobDataMap().get(QuartzConstants.QUARTZ_TRIGGER_TYPE));
        assertEquals(&lt;span class=&quot;code-quote&quot;&gt;&quot;UTC&quot;&lt;/span&gt;, job.getJobDataMap().get(QuartzConstants.QUARTZ_TRIGGER_CRON_TIMEZONE)); &lt;span class=&quot;code-comment&quot;&gt;// ERROR
&lt;/span&gt;        assertEquals(&lt;span class=&quot;code-quote&quot;&gt;&quot;0/2 * * * * ?&amp;amp;trigger.timeZone=UTC&quot;&lt;/span&gt;, job.getJobDataMap().get(QuartzConstants.QUARTZ_TRIGGER_CRON_EXPRESSION));
    }

    @Override
    &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; RouteBuilder createRouteBuilder() {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; RouteBuilder() {
            &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void configure() {
                from(&lt;span class=&quot;code-quote&quot;&gt;&quot;quartz2:&lt;span class=&quot;code-comment&quot;&gt;//myGroup/myTimerName?cron=0/2+*+*+*+*+?&amp;amp;trigger.timeZone=UTC&quot;&lt;/span&gt;).to(&lt;span class=&quot;code-quote&quot;&gt;&quot;mock:result&quot;&lt;/span&gt;);
&lt;/span&gt;            }
        };
    }
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14112090" author="cmoulliard" created="Wed, 27 Aug 2014 09:38:40 +0000"  >&lt;p&gt;For Quartz 1, we should improve the QuartzComponent class to add the CamelProperty &quot;QUARTZ_TRIGGER_CRON_TIMEZONE&quot;&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        &lt;span class=&quot;code-comment&quot;&gt;// enrich job data map with trigger information
&lt;/span&gt;        &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (cron != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
            answer.getJobDetail().getJobDataMap().put(QuartzConstants.QUARTZ_TRIGGER_TYPE, &lt;span class=&quot;code-quote&quot;&gt;&quot;cron&quot;&lt;/span&gt;);
            answer.getJobDetail().getJobDataMap().put(QuartzConstants.QUARTZ_TRIGGER_CRON_EXPRESSION, cron);
            &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; timeZone = EndpointHelper.resloveStringParameter(getCamelContext(), (&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;)triggerParameters.get(&lt;span class=&quot;code-quote&quot;&gt;&quot;timeZone&quot;&lt;/span&gt;), &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;.class);
            &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (timeZone != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
                answer.getJobDetail().getJobDataMap().put(QuartzConstants.QUARTZ_TRIGGER_CRON_TIMEZONE, timeZone);
            }
        } 
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="14112116" author="cmoulliard" created="Wed, 27 Aug 2014 10:28:55 +0000"  >&lt;p&gt;For Quartz2, the TimeZone property must be pass as parameter to the Trigger.newBuilder()&lt;/p&gt;</comment>
                            <comment id="14117108" author="cmoulliard" created="Mon, 1 Sep 2014 07:22:50 +0000"  >&lt;p&gt;There is a bug with Quartz Scheduler as the TIMEZONE which is well used by the calendar is not taken into consideration when the nextFiredTime is calculated by the CronExpression class&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; Date getTimeAfter(Date afterTime) {

        &lt;span class=&quot;code-comment&quot;&gt;// Computation is based on Gregorian year only.
&lt;/span&gt;        Calendar cl = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; java.util.GregorianCalendar(getTimeZone()); 

        &lt;span class=&quot;code-comment&quot;&gt;// move ahead one second, since we&apos;re computing the time *after* the
&lt;/span&gt;        &lt;span class=&quot;code-comment&quot;&gt;// given time
&lt;/span&gt;        afterTime = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; Date(afterTime.getTime() + 1000); &lt;span class=&quot;code-comment&quot;&gt;// CALENDAR SYSTEM IS USED AS WE DON&apos;T USE THE cl object&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;See screenshots &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12665718" name="after.png" size="373955" author="cmoulliard" created="Mon, 1 Sep 2014 07:24:02 +0000"/>
                            <attachment id="12665719" name="before.png" size="302128" author="cmoulliard" created="Mon, 1 Sep 2014 07:24:02 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 12 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1zdsn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>