<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 10:38:50 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[CAMEL-14242] camel-rabbitmq - Binding parameters with x- is not possible when using endpointdsl</title>
                <link>https://issues.apache.org/jira/browse/CAMEL-14242</link>
                <project id="12311211" key="CAMEL">Camel</project>
                    <description>&lt;p&gt;I can&apos; use some rabbitMq parameter eg: &lt;b&gt;x-max-priority&lt;/b&gt; please provide an working exemple. &lt;br/&gt;
It was before possible doing that using deprecated parameter &lt;b&gt;&amp;amp;queueArgsConfigurer=#rabbitMqQueueArgsConfigurer&lt;/b&gt;  &lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
@Bean(&lt;span class=&quot;code-quote&quot;&gt;&quot;rabbitMqQueueArgsConfigurer&quot;&lt;/span&gt;)
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; ArgsConfigurer rabbitMqQueueArgsConfigurer() {
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; map -&amp;gt; map.put(&lt;span class=&quot;code-quote&quot;&gt;&quot;x-max-priority&quot;&lt;/span&gt;, 10);
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;See this one:&lt;br/&gt;
&lt;a href=&quot;https://stackoverflow.com/a/44651087/4271976&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://stackoverflow.com/a/44651087/4271976&lt;/a&gt;&lt;/p&gt;</description>
                <environment></environment>
        <key id="13271737">CAMEL-14242</key>
            <summary>camel-rabbitmq - Binding parameters with x- is not possible when using endpointdsl</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="davsclaus">Claus Ibsen</assignee>
                                    <reporter username="michael992">michael elbaz</reporter>
                        <labels>
                    </labels>
                <created>Mon, 2 Dec 2019 15:49:41 +0000</created>
                <updated>Thu, 5 Dec 2019 12:42:01 +0000</updated>
                            <resolved>Thu, 5 Dec 2019 12:41:20 +0000</resolved>
                                    <version>3.0.0</version>
                                    <fixVersion>3.0.1</fixVersion>
                    <fixVersion>3.1.0</fixVersion>
                                    <component>camel-rabbitmq</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="600">10m</timespent>
                                <comments>
                            <comment id="16986184" author="omarsmak" created="Mon, 2 Dec 2019 16:37:17 +0000"  >&lt;p&gt;did you try with arg option? &lt;a href=&quot;https://camel.apache.org/components/latest/rabbitmq-component.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://camel.apache.org/components/latest/rabbitmq-component.html&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16986186" author="omarsmak" created="Mon, 2 Dec 2019 16:37:41 +0000"  >&lt;p&gt;Also, I think the best place for these question, gitter or dev mailing list &lt;/p&gt;</comment>
                            <comment id="16986187" author="michael992" created="Mon, 2 Dec 2019 16:38:42 +0000"  >&lt;p&gt;Yeah the arg option is doesn&apos;t well documented and not working in the documentation we can also find this parameter &lt;b&gt;bindingArgs&lt;/b&gt; that in fact even doesn&apos;t exist&lt;/p&gt;</comment>
                            <comment id="16986188" author="michael992" created="Mon, 2 Dec 2019 16:44:31 +0000"  >&lt;p&gt;No i think the place is here sorry because i already check the code in past and there is many improvement (maybe rollback some commits) see my comment on github for exemple  x-max-priority &lt;b&gt;must&lt;/b&gt; be sended as int to rabbitMQ but is sended as String you can try by yourself so its bugged&lt;/p&gt;</comment>
                            <comment id="16986189" author="omarsmak" created="Mon, 2 Dec 2019 16:45:23 +0000"  >&lt;p&gt;From docs:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Specify arguments &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; configuring the different RabbitMQ concepts, a different prefix is required &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; each: Exchange: arg.exchange. Queue: arg.queue. Binding: arg.binding. For example to declare a queue with message ttl argument: http:&lt;span class=&quot;code-comment&quot;&gt;//localhost:5672/exchange/queueargs=arg.queue.x-message-ttl=60000&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Therefore, &lt;tt&gt;bindingArgs&lt;/tt&gt; &lt;b&gt;does exist.&lt;/b&gt;&lt;/p&gt;</comment>
                            <comment id="16986190" author="michael992" created="Mon, 2 Dec 2019 16:46:23 +0000"  >&lt;p&gt;Are you trying by yourself ? when i use bindingArgs camel say that is doesn&apos;t exist &lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Caused by: org.apache.camel.ResolveEndpointFailedException: Failed to resolve endpoint: rabbitmq:&lt;span class=&quot;code-comment&quot;&gt;//demo-input?bindingArgs=test&amp;amp;queue=demo-input due to: There are 1 parameters that couldn&apos;t be set on the endpoint. Check the uri &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; the parameters are spelt correctly and that they are properties of the endpoint. Unknown parameters=[{bindingArgs=test}]&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16986191" author="michael992" created="Mon, 2 Dec 2019 16:48:47 +0000"  >&lt;p&gt;The docs is wrong for many years for this component the only way was the deprecated parameter that was removed from camel 3.0.0&lt;/p&gt;</comment>
                            <comment id="16986196" author="omarsmak" created="Mon, 2 Dec 2019 17:00:05 +0000"  >&lt;p&gt;I am actually looking at the code now, trying to grasp it. Might need your help, can you please try out like this in route &lt;tt&gt;arg.binding.&amp;lt;&amp;lt;key&amp;gt;&amp;gt;=&amp;lt;value&amp;gt;&amp;gt;&lt;/tt&gt;. Also, if you are going with the binding approach, can you try to bind using this &lt;tt&gt;args=#args&lt;/tt&gt; instead. &lt;/p&gt;</comment>
                            <comment id="16986197" author="ancosen" created="Mon, 2 Dec 2019 17:00:26 +0000"  >&lt;p&gt;We&apos;ll review the component. Thanks for reporting &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=michael992&quot; class=&quot;user-hover&quot; rel=&quot;michael992&quot;&gt;michael992&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16986199" author="ancosen" created="Mon, 2 Dec 2019 17:02:23 +0000"  >&lt;p&gt;We don&apos;t consider this critical.&lt;/p&gt;</comment>
                            <comment id="16986200" author="michael992" created="Mon, 2 Dec 2019 17:05:29 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=omarsmak&quot; class=&quot;user-hover&quot; rel=&quot;omarsmak&quot;&gt;omarsmak&lt;/a&gt; this one &lt;b&gt;arg.binding.&amp;lt;&amp;lt;key&amp;gt;&amp;gt;=&amp;lt;value&amp;gt;&amp;gt;&lt;/b&gt; will create an exchange argument and that not the aim the second one doesn&apos;t work&lt;/p&gt;</comment>
                            <comment id="16986265" author="ancosen" created="Mon, 2 Dec 2019 18:54:38 +0000"  >&lt;p&gt;By the way, &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=michael992&quot; class=&quot;user-hover&quot; rel=&quot;michael992&quot;&gt;michael992&lt;/a&gt;&#160;if the code is &quot;badly wrong&quot; and you noticed that, why are you complaining on this Jira instead of providing a fix and open a PR? You always use this approach, is this constructive for the project?&lt;/p&gt;</comment>
                            <comment id="16986301" author="michael992" created="Mon, 2 Dec 2019 19:39:33 +0000"  >&lt;p&gt;Your&apos;e right by the way i think there is too much thing to change in this component.&lt;/p&gt;</comment>
                            <comment id="16986932" author="michael992" created="Tue, 3 Dec 2019 14:07:17 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=cibsen%40e-ma.net&quot; class=&quot;user-hover&quot; rel=&quot;cibsen@e-ma.net&quot;&gt;cibsen@e-ma.net&lt;/a&gt; i not agree is not an improvement is bug and is not only about x arguments, please guys is someone take care about this one ?&lt;/p&gt;</comment>
                            <comment id="16986992" author="davsclaus" created="Tue, 3 Dec 2019 15:18:35 +0000"  >&lt;p&gt;Nobody is taking care of this at this moment. Its open source and community is very much welcome to help. See &lt;a href=&quot;https://camel.apache.org/manual/latest/contributing.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://camel.apache.org/manual/latest/contributing.html&lt;/a&gt;&lt;/p&gt;
</comment>
                            <comment id="16987028" author="michael992" created="Tue, 3 Dec 2019 15:57:30 +0000"  >&lt;p&gt;Ok so i&apos;ll use the native client is more reliable i think (this component was working before wrong PR validation) thanks for your help&lt;/p&gt;</comment>
                            <comment id="16987034" author="davsclaus" created="Tue, 3 Dec 2019 16:02:01 +0000"  >&lt;p&gt;Why not help, sorry there is no free lunch. If you need priority help, then get in touch with commercial vendors. but in general its mostly &quot;when people get time to work on&quot; and if they fancy rabbitmq, eg i dont really use it, so i am not jumping on it asap, as opposed to kafka, jms, activemq, and others etc.&lt;/p&gt;

&lt;p&gt;And btw thanks for reporting and testing.&lt;/p&gt;</comment>
                            <comment id="16987041" author="michael992" created="Tue, 3 Dec 2019 16:08:28 +0000"  >&lt;p&gt;Ok i&apos;ll try to check this one&lt;/p&gt;</comment>
                            <comment id="16987056" author="michael992" created="Tue, 3 Dec 2019 16:25:33 +0000"  >&lt;p&gt;Using maven or ide i get a lots of exceptions when i trying to run tests for example:&lt;/p&gt;

&lt;p&gt;// org.apache.camel.component.rabbitmq.RabbitMQBasicIntTest&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
Caused by: org.apache.camel.RuntimeCamelException: com.rabbitmq.client.AuthenticationFailureException: ACCESS_REFUSED - Login was refused using authentication mechanism PLAIN. For details see the broker logfile.
	at org.apache.camel.RuntimeCamelException.wrapRuntimeException(RuntimeCamelException.java:68)
	at org.apache.camel.support.service.ServiceSupport.start(ServiceSupport.java:130)
	at org.apache.camel.support.service.ServiceHelper.startService(ServiceHelper.java:70)
	at org.apache.camel.component.rabbitmq.RabbitMQProducer.createReplyManager(RabbitMQProducer.java:373)
	at org.apache.camel.component.rabbitmq.RabbitMQProducer.initReplyManager(RabbitMQProducer.java:335)

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16987173" author="ancosen" created="Tue, 3 Dec 2019 18:48:44 +0000"  >&lt;p&gt;Anyone with committer power can merge pull requests. We are very careful each time and it seems to me you&apos;re criticizing this project a bit too much. Enough is enough.&lt;/p&gt;</comment>
                            <comment id="16987198" author="michael992" created="Tue, 3 Dec 2019 19:07:45 +0000"  >&lt;p&gt;I&apos;m just asking for better understanding the process that all. I all the time recommend and advise my clients using camel is for me the best integration Framework, you can see i&apos;m now trying to improve this component but i don&apos;t know how because the tests are not passing for me.&lt;/p&gt;</comment>
                            <comment id="16987318" author="bedla" created="Tue, 3 Dec 2019 22:28:40 +0000"  >&lt;p&gt;For integration tests you need to start local instance of rabbitmq, there is docker image ready for this, see readme ( &lt;a href=&quot;https://github.com/apache/camel/blob/master/components/camel-rabbitmq/readme.txt&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/camel/blob/master/components/camel-rabbitmq/readme.txt&lt;/a&gt; ). While looking into this, you might be interested in &lt;a href=&quot;https://github.com/apache/camel/blob/master/components/camel-rabbitmq/src/main/java/org/apache/camel/component/rabbitmq/RabbitMQDeclareSupport.java#L76&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;RabbitMQDeclareSupport#formatSpecialQueueArguments&lt;/a&gt; which handles the conversion of x-max-priority from String to Integer and debug, why the conversion is not happening in your case.&lt;/p&gt;</comment>
                            <comment id="16987337" author="omarsmak" created="Tue, 3 Dec 2019 22:57:10 +0000"  >&lt;p&gt;Honestly I &lt;b&gt;don&apos;t think&lt;/b&gt; this is a bug, this feature was deprecated in 2.x and I guess you were aware of it and yet you didn&apos;t raise your concerns back then as Andrea mentioned in the chat. However, I do agree with you that docs are bit misleading in this regards and wasn&apos;t clear on the alternatives.&lt;br/&gt;
 Second, did you try what I suggested in the chat? To add this in the route &lt;tt&gt;arg.queue.x-max-priority=x&lt;/tt&gt; (this is different from what I suggested earlier as I wasn&apos;t really aware)? As I understood from the code, this used to work as alternative to &lt;tt&gt;queueArgsConfigurer&lt;/tt&gt;. &lt;br/&gt;
 Third, we read your comments that you delete in JIRA as email notification, again this is an open source project, which means we treat each other with respect and of course constructive criticism is always welcome, hence I again as I mentioned before we would appreciate the same from you.&lt;/p&gt;</comment>
                            <comment id="16987574" author="michael992" created="Wed, 4 Dec 2019 06:32:03 +0000"  >&lt;p&gt;What did mean by adding in the route ? &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bedla&quot; class=&quot;user-hover&quot; rel=&quot;bedla&quot;&gt;bedla&lt;/a&gt; I thanks ! all the tests are now passed, i&apos;ll now try to check whats exactly happen with args arguments (I was think that integration tests should be run independently there is no embedded rabbit or some of ?)&lt;/p&gt;</comment>
                            <comment id="16987648" author="michael992" created="Wed, 4 Dec 2019 08:31:42 +0000"  >&lt;p&gt;Ok guys after investigate the tests its appear to achieve the same as before the only way now is by configuring component like this:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; Endpoint rabbitMq() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        RabbitMQComponent rabbitMQComponent = getContext().getComponent(&lt;span class=&quot;code-quote&quot;&gt;&quot;rabbitmq&quot;&lt;/span&gt;, RabbitMQComponent.class);
        rabbitMQComponent.setArgs(Collections.singletonMap(&lt;span class=&quot;code-quote&quot;&gt;&quot;queue.x-max-priority&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;10&quot;&lt;/span&gt;));

        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; rabbitMQComponent.createEndpoint(&lt;span class=&quot;code-quote&quot;&gt;&quot;rabbitmq:foo?queue=foo&quot;&lt;/span&gt;);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;So is working this way but the doc should be updated i think (i personally prefer the oldest way because we was free to add any option directly using query parameters and simple map and now like it was the case with x-max-priority we have to code every options in the component source code).&lt;/p&gt;

&lt;p&gt;Thanks for your help&lt;/p&gt;</comment>
                            <comment id="16987650" author="omarsmak" created="Wed, 4 Dec 2019 08:34:36 +0000"  >&lt;p&gt;Sorry I meant in the URI as query parameter&#160; e.g: &lt;tt&gt;rabbitmq:foo?queue=foo&amp;amp;arg.queue.x-max-priority=10&lt;/tt&gt;&lt;/p&gt;</comment>
                            <comment id="16987657" author="michael992" created="Wed, 4 Dec 2019 08:46:59 +0000"  >&lt;p&gt;A directly i&apos;m trying this now (this will be of course not possible btw with the new camel-endpointdsl)&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=omarsmak&quot; class=&quot;user-hover&quot; rel=&quot;omarsmak&quot;&gt;omarsmak&lt;/a&gt; It&apos;s working thanks for your help ! I think again the doc is not clear about this and what about camel-endpointdsl ?&lt;/p&gt;</comment>
                            <comment id="16987669" author="omarsmak" created="Wed, 4 Dec 2019 09:06:30 +0000"  >&lt;p&gt;You are encouraged to help out on fixing the docs, click on &apos;Edit this Page` here:&#160;&lt;a href=&quot;https://camel.apache.org/components/latest/rabbitmq-component.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://camel.apache.org/components/latest/rabbitmq-component.html&lt;/a&gt;&#160;and you will be redirected to github where you can amend your modifications.&#160;&lt;/p&gt;

&lt;p&gt;I think it should work, you just need to omit the prefix &lt;tt&gt;arg.&lt;/tt&gt;, e.g:&#160;&lt;tt&gt;rabbitmq(&quot;abbitmq:foo&quot;).args(&quot;queue.x-max-priority&quot;, &quot;10&quot;)&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="16987670" author="omarsmak" created="Wed, 4 Dec 2019 09:07:14 +0000"  >&lt;p&gt;Closing this as we clarified it&#160;&lt;/p&gt;</comment>
                            <comment id="16987699" author="michael992" created="Wed, 4 Dec 2019 09:59:18 +0000"  >&lt;p&gt;No it doesn&apos;t that why i&apos;m asking here &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; AdvancedRabbitMQEndpointBuilder rabbitMq() {
        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; rabbitmq(&lt;span class=&quot;code-quote&quot;&gt;&quot;foo&quot;&lt;/span&gt;)
                .queue(&lt;span class=&quot;code-quote&quot;&gt;&quot;foo&quot;&lt;/span&gt;)
                .advanced()
                .args(Collections.singletonMap(&lt;span class=&quot;code-quote&quot;&gt;&quot;queue.x-max-priority&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;10&quot;&lt;/span&gt;));
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16987703" author="michael992" created="Wed, 4 Dec 2019 10:00:46 +0000"  >&lt;p&gt;I&apos;ll upgrade the documentation when i&apos;ll sure about the right way&lt;/p&gt;</comment>
                            <comment id="16987705" author="michael992" created="Wed, 4 Dec 2019 10:08:40 +0000"  >&lt;p&gt;The only way i found what is your opinion about ? is not ideal for me&lt;/p&gt;


&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;private&lt;/span&gt; Endpoint rabbitMq() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception {
        RabbitMQComponent rabbitMQComponent = getContext().getComponent(&lt;span class=&quot;code-quote&quot;&gt;&quot;rabbitmq&quot;&lt;/span&gt;, RabbitMQComponent.class);
        rabbitMQComponent.setArgs(Collections.singletonMap(&lt;span class=&quot;code-quote&quot;&gt;&quot;queue.x-max-priority&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;10&quot;&lt;/span&gt;));

        &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; rabbitMQComponent.createEndpoint(rabbitmq(&lt;span class=&quot;code-quote&quot;&gt;&quot;foo&quot;&lt;/span&gt;).queue(&lt;span class=&quot;code-quote&quot;&gt;&quot;foo&quot;&lt;/span&gt;).getUri());
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;I don&apos;t understand why the args is accessible from the dsl in my previous example if it is no taken into account, when i debug the code i observe that args map always empty (in org.apache.camel.component.rabbitmq.RabbitMQComponent) when using this as query parameter or dsl eg:&quot;rabbitmq:foo?args=any.args&quot; &lt;/p&gt;</comment>
                            <comment id="16987713" author="michael992" created="Wed, 4 Dec 2019 10:21:31 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=omarsmak&quot; class=&quot;user-hover&quot; rel=&quot;omarsmak&quot;&gt;omarsmak&lt;/a&gt; I don&apos;t sure about closing this now is right&lt;/p&gt;</comment>
                            <comment id="16987747" author="omarsmak" created="Wed, 4 Dec 2019 11:22:22 +0000"  >&lt;p&gt;Yes, it seems there is a bug in regards to endpointdsl and RabbitMQComponent and I verified it. To give you a context, when you do something like this: &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
rabbitmq(&lt;span class=&quot;code-quote&quot;&gt;&quot;foo&quot;&lt;/span&gt;)
        .queue(&lt;span class=&quot;code-quote&quot;&gt;&quot;foo&quot;&lt;/span&gt;)
        .advanced()
        .args(Collections.singletonMap(&lt;span class=&quot;code-quote&quot;&gt;&quot;queue.x-max-priority&quot;&lt;/span&gt;, &lt;span class=&quot;code-quote&quot;&gt;&quot;10&quot;&lt;/span&gt;));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The endpointdsl will bootstrap a URI route and parameters. However, these parameters that being bootstrapped by the endpointdsl, is taking this shape:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-quote&quot;&gt;&quot;queue.x-max-priority&quot;&lt;/span&gt; -&amp;gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;10&quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Meanwhile, the &lt;a href=&quot;https://github.com/apache/camel/blob/master/components/camel-rabbitmq/src/main/java/org/apache/camel/component/rabbitmq/RabbitMQComponent.java#L256&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;component expects parameters&lt;/a&gt; with prefix appended &lt;tt&gt;arg.&lt;/tt&gt;, e.g in this form:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-quote&quot;&gt;&quot;arg.queue.x-max-priority&quot;&lt;/span&gt; -&amp;gt; &lt;span class=&quot;code-quote&quot;&gt;&quot;10&quot;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;The fix is fairly simple, you just need to check if why args are not assigned &lt;a href=&quot;https://github.com/apache/camel/blob/master/components/camel-rabbitmq/src/main/java/org/apache/camel/component/rabbitmq/RabbitMQComponent.java#L252&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;. &lt;br/&gt;
However, if you wish, you are encouraged to send a PR to fix this since you spent the time to test it and report. Let me know if you are willing to jump on this one to fix. &lt;/p&gt;</comment>
                            <comment id="16987789" author="michael992" created="Wed, 4 Dec 2019 12:26:54 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=omarsmak&quot; class=&quot;user-hover&quot; rel=&quot;omarsmak&quot;&gt;omarsmak&lt;/a&gt; Yeah i&apos;ll do but still not sure about what i explain my understanding:&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Options&lt;/b&gt; must be set using components object only&lt;br/&gt;
&lt;b&gt;Query parameters&lt;/b&gt; Using dsl or string&lt;/p&gt;

&lt;p&gt;Args is in Options section (in the documentation) so i guess we can&apos;t set args using dsl maybe i&apos;m wrong ? Options and query parameters i&apos;m still not sure about what the difference thanks for your answer&lt;/p&gt;</comment>
                            <comment id="16987912" author="omarsmak" created="Wed, 4 Dec 2019 14:32:13 +0000"  >&lt;p&gt;Query parameters appear in the URI string. Options, that you set in the component level using the APIs. Endpointdsl uses options (API) to set args. Camel normally will parse the URI into &lt;tt&gt;Map&lt;/tt&gt; of params that will be passed into the component, then component set these params using the options in the component level, you can add a breakpoint &lt;a href=&quot;https://github.com/apache/camel/blob/master/components/camel-rabbitmq/src/main/java/org/apache/camel/component/rabbitmq/RabbitMQComponent.java#L151&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt; and you will see what happens to param. Try it on both, endpointdsl and running the route using the URI string&lt;/p&gt;</comment>
                            <comment id="16987918" author="michael992" created="Wed, 4 Dec 2019 14:42:09 +0000"  >&lt;p&gt;Ok thanks for this precision you can assign me this ticket if you want i&apos;ll try to fix this as you&apos;re proposed &lt;/p&gt;</comment>
                            <comment id="16987924" author="omarsmak" created="Wed, 4 Dec 2019 14:44:42 +0000"  >&lt;p&gt;Cool. A comment from you that you are working on it is enough. Good luck!&lt;/p&gt;</comment>
                            <comment id="16988174" author="michael992" created="Wed, 4 Dec 2019 20:07:23 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=omarsmak&quot; class=&quot;user-hover&quot; rel=&quot;omarsmak&quot;&gt;omarsmak&lt;/a&gt; i made &lt;a href=&quot;https://github.com/apache/camel/pull/3385&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;some modifications &lt;/a&gt;it&apos;s appear to be work but not sure at all about side effect, it still not clear for me what&apos;s relation between options and query parameters.&lt;/p&gt;

&lt;p&gt;I also detected some weird test see org.apache.camel.component.rabbitmq.RabbitMQConsumerIntTest.sentMessageIsReceivedWithHeadersRouting()&lt;/p&gt;

&lt;p&gt;&lt;b&gt;// Don&apos;t know what it suppose to do but nothing is filtered i get the 3 headers so this test is wrong off course it pass because 1 &amp;lt; 3&lt;/b&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    @Test
    &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void sentMessageIsReceivedWithHeadersRouting() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; InterruptedException, IOException, TimeoutException {
        &lt;span class=&quot;code-comment&quot;&gt;//should only be one message that makes it through because only
&lt;/span&gt;        &lt;span class=&quot;code-comment&quot;&gt;//one has the correct header set
&lt;/span&gt;        to.expectedMessageCount(1);

        Channel channel = connection().createChannel();
        channel.basicPublish(HEADERS_EXCHANGE, &lt;span class=&quot;code-quote&quot;&gt;&quot;&quot;, propertiesWithHeader(&quot;&lt;/span&gt;foo&lt;span class=&quot;code-quote&quot;&gt;&quot;, &quot;&lt;/span&gt;bar&quot;), MSG.getBytes());
        channel.basicPublish(HEADERS_EXCHANGE, &quot;&quot;, &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;, MSG.getBytes());
        channel.basicPublish(HEADERS_EXCHANGE, &lt;span class=&quot;code-quote&quot;&gt;&quot;&quot;, propertiesWithHeader(&quot;&lt;/span&gt;foo&lt;span class=&quot;code-quote&quot;&gt;&quot;, &quot;&lt;/span&gt;bra&quot;), MSG.getBytes());

        to.assertIsSatisfied();
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="16988718" author="davsclaus" created="Thu, 5 Dec 2019 11:54:37 +0000"  >&lt;p&gt;Also it may be its when you use Map instance, you can try with&lt;/p&gt;

&lt;p&gt;.args(&quot;arg.queue.x-max-priority=10&quot;)&lt;/p&gt;
</comment>
                            <comment id="16988727" author="omarsmak" created="Thu, 5 Dec 2019 12:04:24 +0000"  >&lt;p&gt;I don&apos;t think is going to work. The issue is, when the endpointdsl constructs the params map, it will assign &lt;tt&gt;arg.queue.x-max-priority&lt;/tt&gt; to &lt;tt&gt;args&lt;/tt&gt; of the endpoint which is expected when using the property binding &lt;a href=&quot;https://github.com/apache/camel/blob/master/components/camel-rabbitmq/src/main/java/org/apache/camel/component/rabbitmq/RabbitMQComponent.java#L244&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;here&lt;/a&gt;. However, then at this &lt;a href=&quot;https://github.com/apache/camel/blob/master/components/camel-rabbitmq/src/main/java/org/apache/camel/component/rabbitmq/RabbitMQComponent.java#L252&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;check&lt;/a&gt;, we don&apos;t check if it was assigned to the endpoint and we end up with overwriting an empty &lt;tt&gt;localArgs&lt;/tt&gt; that overrides what being set at the endpoint. &lt;/p&gt;</comment>
                            <comment id="16988741" author="davsclaus" created="Thu, 5 Dec 2019 12:21:41 +0000"  >&lt;p&gt;Yeah it should honour the existing args on the endpoint&lt;/p&gt;</comment>
                            <comment id="16988760" author="davsclaus" created="Thu, 5 Dec 2019 12:42:01 +0000"  >&lt;p&gt;And yeah it would be nice to use testcontainers to bootstrap rabbitmq for integration testing. I created a ticket: &lt;a href=&quot;https://issues.apache.org/jira/browse/CAMEL-14260&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/CAMEL-14260&lt;/a&gt;&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12310060" key="com.atlassian.jira.plugin.system.customfieldtypes:select">
                        <customfieldname>Estimated Complexity</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10060"><![CDATA[Unknown]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            5 years, 49 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                            <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0976g:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        </customfields>
    </item>
</channel>
</rss>