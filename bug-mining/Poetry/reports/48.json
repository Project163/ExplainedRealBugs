{"url":"https://api.github.com/repos/python-poetry/poetry/issues/8682","repository_url":"https://api.github.com/repos/python-poetry/poetry","labels_url":"https://api.github.com/repos/python-poetry/poetry/issues/8682/labels{/name}","comments_url":"https://api.github.com/repos/python-poetry/poetry/issues/8682/comments","events_url":"https://api.github.com/repos/python-poetry/poetry/issues/8682/events","html_url":"https://github.com/python-poetry/poetry/issues/8682","id":1996927343,"node_id":"I_kwDOB1l16s53BrFv","number":8682,"title":"Poetry installs successfully a dependency via URL, but fails via local path","user":{"login":"aaaaahaaaaa","id":2808155,"node_id":"MDQ6VXNlcjI4MDgxNTU=","avatar_url":"https://avatars.githubusercontent.com/u/2808155?v=4","gravatar_id":"","url":"https://api.github.com/users/aaaaahaaaaa","html_url":"https://github.com/aaaaahaaaaa","followers_url":"https://api.github.com/users/aaaaahaaaaa/followers","following_url":"https://api.github.com/users/aaaaahaaaaa/following{/other_user}","gists_url":"https://api.github.com/users/aaaaahaaaaa/gists{/gist_id}","starred_url":"https://api.github.com/users/aaaaahaaaaa/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aaaaahaaaaa/subscriptions","organizations_url":"https://api.github.com/users/aaaaahaaaaa/orgs","repos_url":"https://api.github.com/users/aaaaahaaaaa/repos","events_url":"https://api.github.com/users/aaaaahaaaaa/events{/privacy}","received_events_url":"https://api.github.com/users/aaaaahaaaaa/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":851628021,"node_id":"MDU6TGFiZWw4NTE2MjgwMjE=","url":"https://api.github.com/repos/python-poetry/poetry/labels/kind/bug","name":"kind/bug","color":"f74a2a","default":false,"description":"Something isn't working as expected"},{"id":851636946,"node_id":"MDU6TGFiZWw4NTE2MzY5NDY=","url":"https://api.github.com/repos/python-poetry/poetry/labels/area/installer","name":"area/installer","color":"EEA9B7","default":false,"description":"Related to the dependency installer"}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2023-11-16T14:01:30Z","updated_at":"2024-02-29T01:25:14Z","closed_at":"2023-11-19T16:05:16Z","author_association":"NONE","type":null,"active_lock_reason":"resolved","sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"<!--\r\n    Hi there! Thank you for submitting a bug report!\r\n\r\n    Before you submit your issue, please review and follow the instructions at\r\n    https://python-poetry.org/docs/contributing/#reporting-bugs. Fully fill out the template below; insufficient\r\n    information or bad reproduction instructions will impair the ability of others to help you.\r\n-->\r\n\r\n<!-- All the below information must be provided for others to understand and help with your issue. -->\r\n- **Poetry version**: `1.7.0`\r\n- **Python version**: `3.10.12`\r\n- **OS version and name**: MacOS 14.0\r\n- **pyproject.toml**: <!-- Replace with a link to a Gist (https://gist.github.com/) containing your sanitized pyproject.toml -->\r\n\r\n<!-- All the below steps should be completed before submitting your issue. Checked checkbox should look like this: [x] -->\r\n- [x] I am on the [latest](https://github.com/python-poetry/poetry/releases/latest) stable Poetry version, installed using a recommended method.\r\n- [x] I have searched the [issues](https://github.com/python-poetry/poetry/issues) of this repo and believe that this is not a duplicate.\r\n- [x] I have consulted the [FAQ](https://python-poetry.org/docs/faq/) and [blog](https://python-poetry.org/blog/) for any relevant entries or release notes.\r\n- [x] If an exception occurs when executing a command, I executed it again in debug mode (`-vvv` option) and have included the output below.\r\n\r\n## Issue\r\n\r\nPoetry successfully installs a `tar.gz` served via a URL, but if the exact same dep/file is downloaded locally, then Poetry fails to install it. I'm very confused, I'm not sure I'm missing something blatantly obvious here.\r\n\r\nHere is very straightforward way to reproduce:\r\n\r\nSuccessful:\r\n```\r\n> poetry new teeeest\r\n> cd teeeest\r\n> poetry add https://developers.google.com/static/search-ads/reporting/download/python/searchads360-py.tar.gz\r\n```\r\n\r\nFails:\r\n```\r\n> poetry remove google-ads-searchads360\r\n> mkdir libs && wget https://developers.google.com/static/search-ads/reporting/download/python/searchads360-py.tar.gz -P libs\r\n> poetry add libs/searchads360-py.tar.gz\r\n\r\n\r\nUpdating dependencies\r\nResolving dependencies... (5.5s)Path /var/folders/9g/r0mdzn2s7_l5cd3_2v_y6m6c0000gn/T/tmpwwsu787v/searchads360-py for google-ads-searchads360 does not exist\r\nPath /var/folders/9g/r0mdzn2s7_l5cd3_2v_y6m6c0000gn/T/tmpwwsu787v/searchads360-py for google-ads-searchads360 does not exist\r\nPath /var/folders/9g/r0mdzn2s7_l5cd3_2v_y6m6c0000gn/T/tmpwwsu787v/searchads360-py for google-ads-searchads360 does not exist\r\nPath /var/folders/9g/r0mdzn2s7_l5cd3_2v_y6m6c0000gn/T/tmpwwsu787v/searchads360-py for google-ads-searchads360 does not exist\r\nPath /var/folders/9g/r0mdzn2s7_l5cd3_2v_y6m6c0000gn/T/tmpwwsu787v/searchads360-py for google-ads-searchads360 does not exist\r\n\r\n\r\n  OverrideNeeded\r\n\r\n  ({Package('google-ads-searchads360', '0.0.1', source_type='directory', source_url='/var/folders/9g/r0mdzn2s7_l5cd3_2v_y6m6c0000gn/T/tmpwwsu787v/searchads360-py'): {'proto-plus': <Dependency proto-plus (>=1.22.2,<2.0.0dev)>}}, {Package('google-ads-searchads360', '0.0.1', source_type='directory', source_url='/var/folders/9g/r0mdzn2s7_l5cd3_2v_y6m6c0000gn/T/tmpwwsu787v/searchads360-py'): {'proto-plus': <Dependency proto-plus (>=1.19.4,<2.0.0dev)>}})\r\n\r\n  at ~/.pyenv/versions/3.10.12/lib/python3.10/site-packages/poetry/puzzle/provider.py:660 in complete_package\r\n      656│                     current_overrides.update({dependency_package: package_overrides})\r\n      657│                     overrides.append(current_overrides)\r\n      658│ \r\n      659│             if overrides:\r\n    → 660│                 raise OverrideNeeded(*overrides)\r\n      661│ \r\n      662│         # Modifying dependencies as needed\r\n      663│         clean_dependencies = []\r\n      664│         for dep in dependencies:\r\n\r\nThe following error occurred when trying to handle this error:\r\n\r\n\r\n  AssertionError\r\n\r\n  \r\n\r\n  at ~/.pyenv/versions/3.10.12/lib/python3.10/site-packages/poetry/mixology/partial_solution.py:151 in _register\r\n      147│         name = assignment.dependency.complete_name\r\n      148│         old_positive = self._positive.get(name)\r\n      149│         if old_positive is not None:\r\n      150│             value = old_positive.intersect(assignment)\r\n    → 151│             assert value is not None\r\n      152│             self._positive[name] = value\r\n      153│ \r\n      154│             return\r\n      155│ \r\n```\r\n\r\nAnd succesful again:\r\n```\r\n> python -m http.server 8888 --directory libs &\r\n> poetry add http://localhost:8888/searchads360-py.tar.gz\r\n```","closed_by":{"login":"radoering","id":30527984,"node_id":"MDQ6VXNlcjMwNTI3OTg0","avatar_url":"https://avatars.githubusercontent.com/u/30527984?v=4","gravatar_id":"","url":"https://api.github.com/users/radoering","html_url":"https://github.com/radoering","followers_url":"https://api.github.com/users/radoering/followers","following_url":"https://api.github.com/users/radoering/following{/other_user}","gists_url":"https://api.github.com/users/radoering/gists{/gist_id}","starred_url":"https://api.github.com/users/radoering/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/radoering/subscriptions","organizations_url":"https://api.github.com/users/radoering/orgs","repos_url":"https://api.github.com/users/radoering/repos","events_url":"https://api.github.com/users/radoering/events{/privacy}","received_events_url":"https://api.github.com/users/radoering/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/python-poetry/poetry/issues/8682/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/python-poetry/poetry/issues/8682/timeline","performed_via_github_app":null,"state_reason":"completed"}