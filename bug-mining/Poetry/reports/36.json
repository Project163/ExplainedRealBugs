{"url":"https://api.github.com/repos/python-poetry/poetry/issues/4479","repository_url":"https://api.github.com/repos/python-poetry/poetry","labels_url":"https://api.github.com/repos/python-poetry/poetry/issues/4479/labels{/name}","comments_url":"https://api.github.com/repos/python-poetry/poetry/issues/4479/comments","events_url":"https://api.github.com/repos/python-poetry/poetry/issues/4479/events","html_url":"https://github.com/python-poetry/poetry/issues/4479","id":989163331,"node_id":"MDU6SXNzdWU5ODkxNjMzMzE=","number":4479,"title":"Poetry on Windows fails with File does not exists error","user":{"login":"lululukas","id":50951168,"node_id":"MDQ6VXNlcjUwOTUxMTY4","avatar_url":"https://avatars.githubusercontent.com/u/50951168?v=4","gravatar_id":"","url":"https://api.github.com/users/lululukas","html_url":"https://github.com/lululukas","followers_url":"https://api.github.com/users/lululukas/followers","following_url":"https://api.github.com/users/lululukas/following{/other_user}","gists_url":"https://api.github.com/users/lululukas/gists{/gist_id}","starred_url":"https://api.github.com/users/lululukas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lululukas/subscriptions","organizations_url":"https://api.github.com/users/lululukas/orgs","repos_url":"https://api.github.com/users/lululukas/repos","events_url":"https://api.github.com/users/lululukas/events{/privacy}","received_events_url":"https://api.github.com/users/lululukas/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":851628021,"node_id":"MDU6TGFiZWw4NTE2MjgwMjE=","url":"https://api.github.com/repos/python-poetry/poetry/labels/kind/bug","name":"kind/bug","color":"f74a2a","default":false,"description":"Something isn't working as expected"}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":14,"created_at":"2021-09-06T13:14:44Z","updated_at":"2024-02-29T06:07:29Z","closed_at":"2021-11-12T15:07:46Z","author_association":"NONE","type":null,"active_lock_reason":"resolved","sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"<!--\r\n  Hi there! Thank you for discovering and submitting an issue.\r\n\r\n  Before you submit this; let's make sure of a few things.\r\n  Please make sure the following boxes are ticked if they are correct.\r\n  If not, please try and fulfill these first.\r\n-->\r\n\r\n<!-- Checked checkbox should look like this: [x] -->\r\n- [x] I am on the [latest](https://github.com/python-poetry/poetry/releases/latest) Poetry version.\r\n- [x] I have searched the [issues](https://github.com/python-poetry/poetry/issues) of this repo and believe that this is not a duplicate.\r\n- [x] If an exception occurs when executing a command, I executed it again in debug mode (`-vvv` option).\r\n\r\n<!--\r\n  Once those are done, if you're able to fill in the following list with your information,\r\n  it'd be very helpful to whoever handles the issue.\r\n-->\r\n\r\n- **OS version and name**: Windows 10\r\n- **Poetry version**: 1.2.0a2\r\n- **Link of a [Gist](https://gist.github.com/) with the contents of your pyproject.toml file**: Will publish if necessary for this issue, don't think it is.\r\n\r\n## Issue\r\n<!-- Now feel free to write your issue, but please be descriptive! Thanks again üôå ‚ù§Ô∏è -->\r\nWhen trying to `poetry add` a dependency or do `poetry install` or `poetry update`, the command fails with an error saying that the file does not exist. The file refers to the weel of any dependencies that need to be installed. However, the file actually does exist at the correct location, but is somehow not found by poetry. I think this is due to a leading `\\` in the path. I haven't looked at the code, but I use bash bundled with git-for-windows in Windows Terminal. I assume that has something to do with the problem.\r\n\r\nThis is the error message, you can see the leading backslash in the path which I think is the culprit:\r\n\r\n```\r\n  ValueError\r\n\r\n  File \\C:\\Users\\<user>\\AppData\\Local\\pypoetry\\Cache\\artifacts\\ac\\59\\ac\\9fc6b3c55594c6a7395665b20538ee05fb2ade328e723d2761b44c70ca\\typed_ast-1.4.3-cp37-cp37m-win_amd64.whl does not exist\r\n\r\n  at c:\\users\\<user>\\appdata\\roaming\\pypoetry\\venv\\lib\\site-packages\\poetry\\core\\packages\\file_dependency.py:41 in __init__\r\n       37‚îÇ             except FileNotFoundError:\r\n       38‚îÇ                 raise ValueError(\"Directory {} does not exist\".format(self._path))\r\n       39‚îÇ\r\n       40‚îÇ         if not self._full_path.exists():\r\n    ‚Üí  41‚îÇ             raise ValueError(\"File {} does not exist\".format(self._path))\r\n       42‚îÇ\r\n       43‚îÇ         if self._full_path.is_dir():\r\n       44‚îÇ             raise ValueError(\"{} is a directory, expected a file\".format(self._path))\r\n       45‚îÇ\r\n```\r\n\r\nHowever, the file does exist:\r\n\r\n```\r\n‚ùØ file \"C:\\Users\\<user>\\AppData\\Local\\pypoetry\\Cache\\artifacts\\ac\\59\\ac\\9fc6b3c55594c6a7395665b20538ee05fb2ade328e723d2761b44c70ca\\typed_ast-1.4.3-cp37-cp37m-win_amd64.whl\"\r\nC:\\Users\\<user>\\AppData\\Local\\pypoetry\\Cache\\artifacts\\ac\\59\\ac\\9fc6b3c55594c6a7395665b20538ee05fb2ade328e723d2761b44c70ca\\typed_ast-1.4.3-cp37-cp37m-win_amd64.whl: Zip archive data, at least v2.0 to extract, compression method=deflate\r\n```\r\n\r\n**Edit**:\r\n\r\nI get the same error using powershell, so it seems like the issue is not related to using bash.","closed_by":{"login":"neersighted","id":1049222,"node_id":"MDQ6VXNlcjEwNDkyMjI=","avatar_url":"https://avatars.githubusercontent.com/u/1049222?v=4","gravatar_id":"","url":"https://api.github.com/users/neersighted","html_url":"https://github.com/neersighted","followers_url":"https://api.github.com/users/neersighted/followers","following_url":"https://api.github.com/users/neersighted/following{/other_user}","gists_url":"https://api.github.com/users/neersighted/gists{/gist_id}","starred_url":"https://api.github.com/users/neersighted/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/neersighted/subscriptions","organizations_url":"https://api.github.com/users/neersighted/orgs","repos_url":"https://api.github.com/users/neersighted/repos","events_url":"https://api.github.com/users/neersighted/events{/privacy}","received_events_url":"https://api.github.com/users/neersighted/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/python-poetry/poetry/issues/4479/reactions","total_count":16,"+1":16,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/python-poetry/poetry/issues/4479/timeline","performed_via_github_app":null,"state_reason":"completed"}