<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 18:31:54 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[JXR-154] xref-test package summary lists also classes from main source directories</title>
                <link>https://issues.apache.org/jira/browse/JXR-154</link>
                <project id="12317527" key="JXR">Maven JXR (Moved to GitHub Issues)</project>
                    <description>&lt;p&gt;This is a regression from 3.0.0:&lt;/p&gt;

&lt;p&gt;The &lt;tt&gt;xref-test&lt;/tt&gt; report lists not only classes from the test source directories, but also from the main source directories in its &lt;tt&gt;package-summary.html&lt;/tt&gt;. This is not only unexpected, but the respective links to the actual sources are also dead.&lt;/p&gt;

&lt;p&gt;Using &lt;tt&gt;git bisect&lt;/tt&gt;, I was able to narrow this bug (introduced between jxr-3.0.0 and 82193ede1e036a0e66e1591295f2311982a17c73) down to the following commit:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;b4117e7ef0795eed02e2ace3c9c4c310f5391aac is the first bad commit
commit b4117e7ef0795eed02e2ace3c9c4c310f5391aac
Author: rfscholte &amp;lt;rfscholte@apache.org&amp;gt;
Date:   Fri Jul 5 00:11:29 2019 +0200    [JXR-142] Switch to JSR330 Dependency Injection,
    [JXR-144] Require Maven 3.1.0:040000 040000 9bd9a415b2e3d94406911ca475603de67b504be9 dc78032a3f63c806041f360da96e9468c955f421 M	maven-jxr-plugin
:040000 040000 a9bbe183fcbc2b22afae203be4483fd9c1dd2a1b c15f3e82de0050ffa3834c0ff076fa8a6b57c31a M	maven-jxr
:100644 100644 e61a9f56ba6ea12165b72967873f72ed7611f894 be2f7ecc125a573c7316c048dc521c40c60aa5f1 M	pom.xml
bisect run success &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;using the attached patch &lt;span class=&quot;nobr&quot;&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/attachment/13003966/13003966_it.patch&quot; title=&quot;it.patch attached to JXR-154&quot;&gt;it.patch&lt;sup&gt;&lt;img class=&quot;rendericon&quot; src=&quot;https://issues.apache.org/jira/images/icons/link_attachment_7.gif&quot; height=&quot;7&quot; width=&quot;7&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/sup&gt;&lt;/a&gt;&lt;/span&gt; to the most basic integration test, &lt;tt&gt;simple-project&lt;/tt&gt;.&lt;/p&gt;</description>
                <environment>Apache Maven 3.6.3 (cecedd343002696d0abb50b32b541b8a6ba2883f)&lt;br/&gt;
Maven home: /opt/apache-maven&lt;br/&gt;
Java version: 1.8.0_201, vendor: Oracle Corporation, runtime: /usr/lib/jvm/java-8-oracle/jre&lt;br/&gt;
Default locale: en_CA, platform encoding: UTF-8&lt;br/&gt;
OS name: &amp;quot;linux&amp;quot;, version: &amp;quot;4.15.0-101-generic&amp;quot;, arch: &amp;quot;amd64&amp;quot;, family: &amp;quot;unix</environment>
        <key id="13307269">JXR-154</key>
            <summary>xref-test package summary lists also classes from main source directories</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rfscholte">Robert Scholte</assignee>
                                    <reporter username="asewe">Andreas Sewe</reporter>
                        <labels>
                            <label>regression</label>
                    </labels>
                <created>Mon, 25 May 2020 16:57:12 +0000</created>
                <updated>Tue, 17 Jun 2025 04:57:01 +0000</updated>
                            <resolved>Mon, 1 Jun 2020 20:45:00 +0000</resolved>
                                    <version>3.1.1</version>
                                    <fixVersion>3.1.1</fixVersion>
                                    <component>maven-jxr-plugin</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="17116149" author="asewe" created="Mon, 25 May 2020 16:59:27 +0000"  >&lt;p&gt;For the record, the full &lt;tt&gt;git bisect&lt;/tt&gt; history:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;git bisect start
# good: [224c62f3d0098042fb0a9d228434082e249c4c5b] [maven-release-plugin] prepare release jxr-3.0.0
git bisect good 224c62f3d0098042fb0a9d228434082e249c4c5b
# bad: [82193ede1e036a0e66e1591295f2311982a17c73] remove unused imports (#24)
git bisect bad 82193ede1e036a0e66e1591295f2311982a17c73
# bad: [ab343d1704760cf448031802979915f2d7f7e044] README improvement
git bisect bad ab343d1704760cf448031802979915f2d7f7e044
# bad: [85fb8b1b444d76a86e0cd1b19039b2637da6fd19] [JXR-147] make build Reproducible
git bisect bad 85fb8b1b444d76a86e0cd1b19039b2637da6fd19
# good: [910158efbc691cc8ebbd7120ba97d62abc78b056] added a link to plugin documentation
git bisect good 910158efbc691cc8ebbd7120ba97d62abc78b056
# bad: [b4117e7ef0795eed02e2ace3c9c4c310f5391aac] [JXR-142] Switch to JSR330 Dependency Injection, [JXR-144] Require Maven 3.1.0
git bisect bad b4117e7ef0795eed02e2ace3c9c4c310f5391aac
# good: [6f50a1c74d0d3aabe1f0223c5b3791f713ab7276] Add non-forking jxr/test-jxr goals
git bisect good 6f50a1c74d0d3aabe1f0223c5b3791f713ab7276
# first bad commit: [b4117e7ef0795eed02e2ace3c9c4c310f5391aac] [JXR-142] Switch to JSR330 Dependency Injection, [JXR-144] Require Maven 3.1.0 &lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17116171" author="asewe" created="Mon, 25 May 2020 18:07:12 +0000"  >&lt;p&gt;OK, I figured out the root cause: The &quot;Switch to JSR330 Dependency Injection&quot; made the &lt;tt&gt;PackageManager&lt;/tt&gt;, which keeps tracks of the packages and their classes seen so far, a &lt;tt&gt;@Singleton&lt;/tt&gt;. And this causes the same &lt;tt&gt;PackageManager&lt;/tt&gt; instance to be used in the invocation of the &lt;tt&gt;jxr&lt;/tt&gt; and &lt;tt&gt;test-jxr&lt;/tt&gt; goals.&lt;/p&gt;

&lt;p&gt;Will prepare a pull request that fixes this.&lt;/p&gt;</comment>
                            <comment id="17116183" author="asewe" created="Mon, 25 May 2020 18:52:14 +0000"  >&lt;blockquote&gt;
&lt;p&gt;Will prepare a pull request that fixes this.&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Easier said than done. At the moment, &lt;a href=&quot;https://github.com/sewe/maven-jxr/tree/JXR-154&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/sewe/maven-jxr/tree/JXR-154&lt;/a&gt; fails the &lt;tt&gt;JXR141Test&lt;/tt&gt;.&lt;/p&gt;

&lt;p&gt;Why? There is a lot of shared state/caching and &lt;em&gt;sometimes&lt;/em&gt; this seems to be relied on, e.g., when &lt;tt&gt;JavaCodeTransform&lt;/tt&gt; relies on its &lt;tt&gt;FileManager&lt;/tt&gt; being the same &lt;tt&gt;FileManager&lt;/tt&gt; that was &quot;filled&quot; by using a &lt;tt&gt;PackageManager&lt;/tt&gt; earlier in &lt;tt&gt;JXR.xref&lt;/tt&gt;. But even if desired, the way &lt;tt&gt;FileManager&lt;/tt&gt; and &lt;tt&gt;PackageManager&lt;/tt&gt; are shared (or not, as there are also &lt;tt&gt;new FileManager()&lt;/tt&gt; calls) seems very brittle and error-prone and I wouldn&apos;t be surprised if other bugs besides &lt;a href=&quot;https://issues.apache.org/jira/browse/JXR-154&quot; title=&quot;xref-test package summary lists also classes from main source directories&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JXR-154&quot;&gt;&lt;del&gt;JXR-154&lt;/del&gt;&lt;/a&gt; are hidden therein.&lt;/p&gt;

&lt;p&gt;Maybe this is something &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rfscholte&quot; class=&quot;user-hover&quot; rel=&quot;rfscholte&quot;&gt;rfscholte&lt;/a&gt; could have a look at, as he introduced the shared components initially.&lt;/p&gt;</comment>
                            <comment id="17116239" author="rfscholte" created="Mon, 25 May 2020 20:22:44 +0000"  >&lt;p&gt;I don&apos;t recall introducing it, but I did refactor it a lot. IIRC it acts like a classloader, so source files can refer to each other, that&apos;s why it is a singleton.&lt;/p&gt;</comment>
                            <comment id="17119896" author="rfscholte" created="Fri, 29 May 2020 19:52:04 +0000"  >&lt;p&gt;While refactoring I didn&apos;t want to change the code too much. Per goal there should be 1 FileManager, 1 PackageManager and 1 JXR as they all contain states.&lt;br/&gt;
However, now I see that the singleton is per plugin, not per goal. So I need to rewrite it again.&lt;/p&gt;</comment>
                            <comment id="17121201" author="asewe" created="Mon, 1 Jun 2020 17:39:51 +0000"  >&lt;p&gt;I had a look at the code myself. It seems that within the scope of a &lt;tt&gt;JXR&lt;/tt&gt; instance, there should be one and only one fresh instance of &lt;tt&gt;FileManager&lt;/tt&gt; and &lt;tt&gt;PackageManager&lt;/tt&gt; &#8211; and possibly also &lt;tt&gt;JavaCodeTransform&lt;/tt&gt;, although that is a bit weirder, as there is a &lt;tt&gt;JXR.setTransformer&lt;/tt&gt; method in &lt;tt&gt;JXR&lt;/tt&gt;&apos;s interface; this makes it impossible to guarantee that &lt;tt&gt;JXR&lt;/tt&gt; and &lt;tt&gt;JavaCodeTransform&lt;/tt&gt; use the same &lt;tt&gt;PackageManager&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="17121315" author="rfscholte" created="Mon, 1 Jun 2020 20:39:01 +0000"  >&lt;p&gt;Yes, we need to reorganize code. The intention to switch to components has to do with &lt;a href=&quot;https://issues.apache.org/jira/browse/JXR-145&quot; title=&quot;Support custom codetransformers&quot; class=&quot;issue-link&quot; data-issue-key=&quot;JXR-145&quot;&gt;JXR-145&lt;/a&gt;. That way it will be easier to inject a GrooveCodeTransformer or other language.&lt;br/&gt;
There was no official API, but I knew some tools use JXR as well. But that just doesn&apos;t fit anymore.&lt;br/&gt;
I also discovered that test code does not link back to main code (as external jxr pages). That would be a nice improvement too.&lt;/p&gt;</comment>
                            <comment id="17121319" author="rfscholte" created="Mon, 1 Jun 2020 20:45:00 +0000"  >&lt;p&gt;Fixed in &lt;a href=&quot;https://gitbox.apache.org/repos/asf?p=maven-jxr.git;a=commit;h=473e1b9bd9d38c703e48e69bcd17d126d1d9863d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;473e1b9bd9d38c703e48e69bcd17d126d1d9863d&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="17979453" author="olamy" created="Tue, 17 Jun 2025 04:57:01 +0000"  >&lt;p&gt;This project has moved from Jira to GitHub Issues. This issue was migrated to &lt;a href=&quot;https://github.com/apache/maven-jxr/issues/265&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;apache/maven-jxr#265&lt;/a&gt;. &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                            <outwardlinks description="causes">
                                        <issuelink>
            <issuekey id="13373252">JXR-160</issuekey>
        </issuelink>
                            </outwardlinks>
                                                                <inwardlinks description="is caused by">
                                        <issuelink>
            <issuekey id="13197583">JXR-142</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="13003966" name="it.patch" size="1134" author="asewe" created="Mon, 25 May 2020 16:57:49 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            20 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0f4zk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>