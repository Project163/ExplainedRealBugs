diff --git a/src/main/java/org/apache/maven/jxr/DirectoryIndexer.java b/src/main/java/org/apache/maven/jxr/DirectoryIndexer.java
index ba6d35a..3fa6839 100644
--- a/src/main/java/org/apache/maven/jxr/DirectoryIndexer.java
+++ b/src/main/java/org/apache/maven/jxr/DirectoryIndexer.java
@@ -365,6 +365,13 @@ public class DirectoryIndexer
 
                 String className = clazz.getName();
                 Map classInfo = new HashMap();
+                if( clazz.getFilename() != null )
+                {
+                    classInfo.put( "filename", clazz.getFilename() );
+                }
+                else {
+                    classInfo.put( "filename", "" );
+                }
                 classInfo.put( "name", className );
                 classInfo.put( "dir", pkgDir );
 
diff --git a/src/main/java/org/apache/maven/jxr/JavaCodeTransform.java b/src/main/java/org/apache/maven/jxr/JavaCodeTransform.java
index ea6fb61..c587e84 100644
--- a/src/main/java/org/apache/maven/jxr/JavaCodeTransform.java
+++ b/src/main/java/org/apache/maven/jxr/JavaCodeTransform.java
@@ -289,9 +289,10 @@ public class JavaCodeTransform
         try
         {
             JavaFile javaFile = fileManager.getFile( this.getCurrentFilename() );
-            if ( javaFile.getClassType() != null )
+            // Use the name of the file instead of the class to handle inner classes properly
+            if ( javaFile.getClassType() != null && javaFile.getClassType().getFilename() != null )
             {
-                buffer.append( javaFile.getClassType().getName() );
+                buffer.append( javaFile.getClassType().getFilename() );
             }
             else
             {
@@ -1101,9 +1102,10 @@ public class JavaCodeTransform
 
                 javadocURI.append( StringUtils.replace( jf.getPackageType().getName(), ".", "/" ) );
                 javadocURI.append( "/" );
-                if ( jf.getClassType() != null )
+                // Use the name of the file instead of the class to handle inner classes properly
+                if ( jf.getClassType() != null && jf.getClassType().getFilename() != null )
                 {
-                    javadocURI.append( jf.getClassType().getName() );
+                    javadocURI.append( jf.getClassType().getFilename() );
                 }
                 else
                 {
@@ -1293,11 +1295,11 @@ public class JavaCodeTransform
 
         href.append( dest );
 
-        //now append the classname.html file
+        // Now append filename.html
         if ( jc != null )
         {
             href.append( "/" );
-            href.append( jc.getName() );
+            href.append( jc.getFilename() );
             href.append( ".html" );
         }
 
diff --git a/src/main/java/org/apache/maven/jxr/pacman/ClassType.java b/src/main/java/org/apache/maven/jxr/pacman/ClassType.java
index 1a00ebb..25f5024 100644
--- a/src/main/java/org/apache/maven/jxr/pacman/ClassType.java
+++ b/src/main/java/org/apache/maven/jxr/pacman/ClassType.java
@@ -20,15 +20,22 @@ package org.apache.maven.jxr.pacman;
  */
 
 /**
- * Represents a Java class or interface
+ * Represents a Java class or interface.
  */
 public class ClassType
     extends BaseType
 {
+    /**
+     * The name of the file that this class resides in, without path or
+     * extension. It might be different from the name of the class when dealing
+     * with inner classes.
+     */
+    private String filename = null;
 
     /**
-     * Create a new ClassType
+     * Create a new ClassType without a filename.
      *
+     * @deprecated Please use {@link #ClassType( String, String )} instead
      * @param name
      */
     public ClassType( String name )
@@ -36,4 +43,26 @@ public class ClassType
         this.setName( name );
     }
 
+    /**
+     * Create a new ClassType.
+     *
+     * @param name
+     * @param filename
+     */
+    public ClassType( String name , String filename)
+    {
+        this.setName( name );
+        this.setFilename( filename );
+    }
+
+
+    public String getFilename()
+    {
+        return filename;
+    }
+
+    public void setFilename( String filename )
+    {
+        this.filename = filename;
+    }
 }
diff --git a/src/main/java/org/apache/maven/jxr/pacman/JavaFile.java b/src/main/java/org/apache/maven/jxr/pacman/JavaFile.java
index b96afcf..daaecfe 100644
--- a/src/main/java/org/apache/maven/jxr/pacman/JavaFile.java
+++ b/src/main/java/org/apache/maven/jxr/pacman/JavaFile.java
@@ -19,6 +19,8 @@ package org.apache.maven.jxr.pacman;
  * under the License.
  */
 
+import java.util.ArrayList;
+import java.util.List;
 import java.util.Vector;
 
 /**
@@ -32,7 +34,7 @@ public abstract class JavaFile
 
     private Vector imports = new Vector();
 
-    private ClassType classType = null;
+    private ArrayList classTypes = new ArrayList();
 
     private PackageType packageType = new PackageType();
 
@@ -56,7 +58,23 @@ public abstract class JavaFile
      */
     public ClassType getClassType()
     {
-        return this.classType;
+        if ( classTypes.isEmpty() )
+        {
+            return null;
+        }
+        else
+        {
+            // To retain backward compatibility, return the first class
+            return (ClassType) this.classTypes.get( 0 );
+        }
+    }
+
+    /**
+     * Get the names of the classes in this file.
+     */
+    public List getClassTypes()
+    {
+        return this.classTypes;
     }
 
     /**
@@ -69,7 +87,15 @@ public abstract class JavaFile
 
 
     /**
-     * Add an ImportType to the current imports
+     * Add a ClassType to the current list of class types.
+     */
+    public void addClassType( ClassType classType )
+    {
+        this.classTypes.add( classType );
+    }
+
+    /**
+     * Add an ImportType to the current imports.
      */
     public void addImportType( ImportType importType )
     {
@@ -81,7 +107,9 @@ public abstract class JavaFile
      */
     public void setClassType( ClassType classType )
     {
-        this.classType = classType;
+        // To retain backward compatibility, make sure the list contains only the supplied classType
+        this.classTypes.clear();
+        this.classTypes.add( classType );
     }
 
     /**
diff --git a/src/main/java/org/apache/maven/jxr/pacman/JavaFileImpl.java b/src/main/java/org/apache/maven/jxr/pacman/JavaFileImpl.java
index 5351caa..53fffb6 100644
--- a/src/main/java/org/apache/maven/jxr/pacman/JavaFileImpl.java
+++ b/src/main/java/org/apache/maven/jxr/pacman/JavaFileImpl.java
@@ -19,6 +19,8 @@ package org.apache.maven.jxr.pacman;
  * under the License.
  */
 
+import org.codehaus.plexus.util.StringUtils;
+
 import java.io.File;
 import java.io.FileInputStream;
 import java.io.FileReader;
@@ -111,14 +113,13 @@ public class JavaFileImpl
                     this.addImportType( new ImportType( name ) );
                 }
 
-                //set the Class... if the class is found no more information is
-                //valid so just break out of the while loop at this point.
-                //set the imports
+                // Add the class or classes. There can be several classes in one file so
+                // continue with the while loop to get them all.
                 if ( stok.sval.equals( "class" ) || stok.sval.equals( "interface" ) || stok.sval.equals( "enum" ) )
                 {
                     stok.nextToken();
-                    this.setClassType( new ClassType( stok.sval ) );
-                    break;
+                    this.addClassType( new ClassType( stok.sval,
+                                                      getFilenameWithoutPathOrExtension( this.getFilename()) ) );
                 }
 
             }
@@ -133,6 +134,36 @@ public class JavaFileImpl
         }
     }
 
+    /**
+     * Remove the path and the ".java" extension from a filename.
+     */
+    private static String getFilenameWithoutPathOrExtension( String filename )
+    {
+        String newFilename;
+        // Remove the ".java" extension from the filename, if it exists
+        int extensionIndex = filename.lastIndexOf( ".java" );
+        if ( extensionIndex == -1 )
+        {
+            newFilename = filename;
+        }
+        else
+        {
+            newFilename = filename.substring( 0, extensionIndex );
+        }
+
+        // Remove the path, after unifying path separators
+        newFilename = StringUtils.replace( newFilename, "\\", "/" );
+        int pathIndex = newFilename.lastIndexOf( "/" );
+        if ( pathIndex == -1 )
+        {
+            return newFilename;
+        }
+        else
+        {
+            return newFilename.substring( pathIndex + 1 );
+        }
+    }
+
     /**
      * Get a StreamTokenizer for this file.
      */
diff --git a/src/main/java/org/apache/maven/jxr/pacman/PackageManager.java b/src/main/java/org/apache/maven/jxr/pacman/PackageManager.java
index 6b71beb..c2287ac 100644
--- a/src/main/java/org/apache/maven/jxr/pacman/PackageManager.java
+++ b/src/main/java/org/apache/maven/jxr/pacman/PackageManager.java
@@ -26,6 +26,7 @@ import java.io.File;
 import java.io.IOException;
 import java.util.Enumeration;
 import java.util.Hashtable;
+import java.util.Iterator;
 
 
 /**
@@ -134,10 +135,13 @@ public class PackageManager
                     jp = jfi.getPackageType();
                 }
 
-                //add the current class to this global package.
-                if ( jfi.getClassType() != null && jfi.getClassType().getName() != null )
+                // Add the current file's class(es) to this global package.
+                if ( jfi.getClassTypes() != null && !jfi.getClassTypes().isEmpty() )
                 {
-                    jp.addClassType( jfi.getClassType() );
+                    for ( Iterator iterator = jfi.getClassTypes().iterator(); iterator.hasNext(); )
+                    {
+                        jp.addClassType( (ClassType) iterator.next() );
+                    }
                 }
 
             }
diff --git a/src/main/resources/templates/allclasses-frame.vm b/src/main/resources/templates/allclasses-frame.vm
index 63b45a2..9b7a65f 100644
--- a/src/main/resources/templates/allclasses-frame.vm
+++ b/src/main/resources/templates/allclasses-frame.vm
@@ -32,7 +32,7 @@ under the License.
 		<ul>
 			#foreach ($classInfo in $info.allClasses.values())
 			<li>
-				<a href="${classInfo.dir}/${classInfo.name}.html" target="classFrame">$classInfo.name</a>
+				<a href="${classInfo.dir}/${classInfo.filename}.html" target="classFrame">$classInfo.name</a>
 			</li>
 			#end
       </ul>
diff --git a/src/main/resources/templates/package-frame.vm b/src/main/resources/templates/package-frame.vm
index 48d05f1..f9ff624 100644
--- a/src/main/resources/templates/package-frame.vm
+++ b/src/main/resources/templates/package-frame.vm
@@ -36,7 +36,7 @@ under the License.
       	<ul>
       		#foreach ($classInfo in $pkgInfo.classes.values())
           	<li>
-            	<a href="${classInfo.name}.html" target="classFrame">$classInfo.name</a>
+            	<a href="${classInfo.filename}.html" target="classFrame">$classInfo.name</a>
           	</li>
           	#end
       	</ul>
diff --git a/src/main/resources/templates/package-summary.vm b/src/main/resources/templates/package-summary.vm
index 4c690f7..8969cdc 100644
--- a/src/main/resources/templates/package-summary.vm
+++ b/src/main/resources/templates/package-summary.vm
@@ -60,7 +60,7 @@ under the License.
         		#foreach ($classInfo in $pkgInfo.classes.values())
             	<tr>
               		<td>
-                		<a href="${classInfo.name}.html" target="classFrame">$classInfo.name</a>
+                		<a href="${classInfo.filename}.html" target="classFrame">$classInfo.name</a>
               		</td>
             	</tr>
 				#end
