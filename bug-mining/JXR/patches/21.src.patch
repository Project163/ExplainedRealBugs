diff --git a/maven-jxr-plugin/src/it/aggregate/pom.xml b/maven-jxr-plugin/src/it/aggregate/pom.xml
index d96896f..47b072f 100644
--- a/maven-jxr-plugin/src/it/aggregate/pom.xml
+++ b/maven-jxr-plugin/src/it/aggregate/pom.xml
@@ -1,5 +1,4 @@
 <?xml version="1.0" encoding="UTF-8"?>
-
 <!--
 Licensed to the Apache Software Foundation (ASF) under one
 or more contributor license agreements.  See the NOTICE file
@@ -18,87 +17,69 @@ KIND, either express or implied.  See the License for the
 specific language governing permissions and limitations
 under the License.
 -->
-<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
-  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
-  <modelVersion>4.0.0</modelVersion>
-
-  <groupId>org.apache.maven.jxr.it</groupId>
-  <artifactId>aggregate</artifactId>
-  <version>1-SNAPSHOT</version>
-  <packaging>pom</packaging>
-
-  <name>aggregate</name>
-  <url>http://maven.apache.org</url>
-
-  <properties>
-    <jxr-plugin-version>@pom.version@</jxr-plugin-version>
-    <site-plugin-version>@sitePluginVersion@</site-plugin-version>
-  </properties>
-
-  <dependencies>
-    <dependency>
-      <groupId>junit</groupId>
-      <artifactId>junit</artifactId>
-      <version>4.8.2</version>
-      <scope>test</scope>
-    </dependency>
-  </dependencies>
-
-  <build>
-    <plugins>
-      <plugin>
-        <groupId>org.apache.maven.plugins</groupId>
-        <artifactId>maven-jxr-plugin</artifactId>
-        <version>${jxr-plugin-version}</version>
-	<executions>
-	  <execution>
-	    <id>aggregate</id>
-	    <goals><goal>aggregate</goal><goal>test-aggregate</goal></goals>
-	    <phase>site</phase>
-	  </execution>
-	</executions>
-      </plugin> 
-      <plugin>
-        <groupId>org.apache.maven.plugins</groupId>
-        <artifactId>maven-javadoc-plugin</artifactId>
-        <version>2.8</version>
-        <executions>
-          <execution>
-            <id>aggregate</id>
-            <goals>
-              <goal>aggregate</goal>
-              <goal>test-aggregate</goal>
-            </goals>
-            <phase>site</phase>
-          </execution>
-        </executions>
-      </plugin>   
-      <plugin>
-        <groupId>org.apache.maven.plugins</groupId>
-        <artifactId>maven-site-plugin</artifactId>
-        <version>${site-plugin-version}</version>
-      </plugin>
-    </plugins>
-  </build>
-
-  <modules>
-    <module>p1</module>
-    <module>p2</module>
-  </modules>
-
-  <reporting>
-    <excludeDefaults>true</excludeDefaults>
-    <plugins>
-      <plugin>
-        <groupId>org.apache.maven.plugins</groupId>
-        <artifactId>maven-jxr-plugin</artifactId>
-        <version>${jxr-plugin-version}</version>
-      </plugin>
-      <plugin>
-        <groupId>org.apache.maven.plugins</groupId>
-        <artifactId>maven-javadoc-plugin</artifactId>
-        <version>2.8</version>
-      </plugin>
-    </plugins>
-  </reporting>
+<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
+    <modelVersion>4.0.0</modelVersion>
+    <groupId>org.apache.maven.jxr.it</groupId>
+    <artifactId>aggregate</artifactId>
+    <version>1-SNAPSHOT</version>
+    <packaging>pom</packaging>
+    <name>aggregate</name>
+    <url>http://maven.apache.org</url>
+    <properties>
+        <jxr-plugin-version>@pom.version@</jxr-plugin-version>
+        <site-plugin-version>@sitePluginVersion@</site-plugin-version>
+    </properties>
+    <dependencies>
+        <dependency>
+            <groupId>junit</groupId>
+            <artifactId>junit</artifactId>
+            <version>4.8.2</version>
+            <scope>test</scope>
+        </dependency>
+    </dependencies>
+    <build>
+        <plugins>
+            <plugin>
+                <groupId>org.apache.maven.plugins</groupId>
+                <artifactId>maven-site-plugin</artifactId>
+                <version>${site-plugin-version}</version>
+            </plugin>
+        </plugins>
+    </build>
+    <modules>
+        <module>p1</module>
+        <module>p2</module>
+    </modules>
+    <reporting>
+        <excludeDefaults>true</excludeDefaults>
+        <plugins>
+            <plugin>
+                <groupId>org.apache.maven.plugins</groupId>
+                <artifactId>maven-jxr-plugin</artifactId>
+                <version>${jxr-plugin-version}</version>
+                <reportSets>
+                    <reportSet>
+                        <id>aggregate</id>
+                        <reports>
+                            <report>aggregate</report>
+			    <report>test-aggregate</report>
+                        </reports>
+                    </reportSet>
+                </reportSets>
+            </plugin>
+            <plugin>
+                <groupId>org.apache.maven.plugins</groupId>
+                <artifactId>maven-javadoc-plugin</artifactId>
+                <version>2.8</version>
+                <reportSets>
+                    <reportSet>
+                        <id>aggregate</id>
+                        <reports>
+                            <report>aggregate</report>
+                        </reports>
+                    </reportSet>
+                </reportSets>
+            </plugin>
+        </plugins>
+    </reporting>
 </project>
diff --git a/maven-jxr-plugin/src/it/aggregate/verify.groovy b/maven-jxr-plugin/src/it/aggregate/verify.groovy
index 5a2d553..4136830 100644
--- a/maven-jxr-plugin/src/it/aggregate/verify.groovy
+++ b/maven-jxr-plugin/src/it/aggregate/verify.groovy
@@ -40,5 +40,5 @@ assert content.contains( 'App2.html' );
 content = new File( basedir, 'target/site/xref/org/apache/maven/jxr/it2/App.html' ).text;
 assert content.contains( 'App2.html' );
 content = new File( basedir, 'target/site/xref/index.html' ).text;
-assert content.contains( '<!-- this is a JXR report set -->' );
+assert content.contains( 'this is a JXR report set' );
 return true;
\ No newline at end of file
diff --git a/maven-jxr-plugin/src/it/mixed-plugin-report/p1/pom.xml b/maven-jxr-plugin/src/it/mixed-plugin-report/p1/pom.xml
new file mode 100644
index 0000000..f12e214
--- /dev/null
+++ b/maven-jxr-plugin/src/it/mixed-plugin-report/p1/pom.xml
@@ -0,0 +1,36 @@
+<?xml version="1.0" encoding="UTF-8"?>
+
+<!--
+Licensed to the Apache Software Foundation (ASF) under one
+or more contributor license agreements.  See the NOTICE file
+distributed with this work for additional information
+regarding copyright ownership.  The ASF licenses this file
+to you under the Apache License, Version 2.0 (the
+"License"); you may not use this file except in compliance
+with the License.  You may obtain a copy of the License at
+
+  http://www.apache.org/licenses/LICENSE-2.0
+
+Unless required by applicable law or agreed to in writing,
+software distributed under the License is distributed on an
+"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
+KIND, either express or implied.  See the License for the
+specific language governing permissions and limitations
+under the License.
+-->
+<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
+  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
+  <modelVersion>4.0.0</modelVersion>
+
+  <groupId>org.apache.maven.jxr.it</groupId>
+  <artifactId>mixed-p1</artifactId>
+
+  <parent>
+    <groupId>org.apache.maven.jxr.it</groupId>
+    <artifactId>mixed-plugin-report</artifactId>
+    <version>1-SNAPSHOT</version>
+  </parent>
+
+  <name>mixed-p1</name>
+  <url>http://maven.apache.org</url>
+</project>
diff --git a/maven-jxr-plugin/src/it/mixed-plugin-report/p1/src/main/java/org/apache/maven/jxr/it/App.java b/maven-jxr-plugin/src/it/mixed-plugin-report/p1/src/main/java/org/apache/maven/jxr/it/App.java
new file mode 100644
index 0000000..d73b2cf
--- /dev/null
+++ b/maven-jxr-plugin/src/it/mixed-plugin-report/p1/src/main/java/org/apache/maven/jxr/it/App.java
@@ -0,0 +1,33 @@
+package org.apache.maven.jxr.it;
+
+/*
+ * Licensed to the Apache Software Foundation (ASF) under one
+ * or more contributor license agreements.  See the NOTICE file
+ * distributed with this work for additional information
+ * regarding copyright ownership.  The ASF licenses this file
+ * to you under the Apache License, Version 2.0 (the
+ * "License"); you may not use this file except in compliance
+ * with the License.  You may obtain a copy of the License at
+ *
+ *   http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing,
+ * software distributed under the License is distributed on an
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
+ * KIND, either express or implied.  See the License for the
+ * specific language governing permissions and limitations
+ * under the License.
+ */
+
+/**
+ * Hello world!
+ *
+ */
+public class App
+    extends App2
+{
+    public static void main( String[] args )
+    {
+        System.out.println( "Hello World!" );
+    }
+}
diff --git a/maven-jxr-plugin/src/it/mixed-plugin-report/p1/src/main/java/org/apache/maven/jxr/it/App2.java b/maven-jxr-plugin/src/it/mixed-plugin-report/p1/src/main/java/org/apache/maven/jxr/it/App2.java
new file mode 100644
index 0000000..076ece9
--- /dev/null
+++ b/maven-jxr-plugin/src/it/mixed-plugin-report/p1/src/main/java/org/apache/maven/jxr/it/App2.java
@@ -0,0 +1,32 @@
+package org.apache.maven.jxr.it;
+
+/*
+ * Licensed to the Apache Software Foundation (ASF) under one
+ * or more contributor license agreements.  See the NOTICE file
+ * distributed with this work for additional information
+ * regarding copyright ownership.  The ASF licenses this file
+ * to you under the Apache License, Version 2.0 (the
+ * "License"); you may not use this file except in compliance
+ * with the License.  You may obtain a copy of the License at
+ *
+ *   http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing,
+ * software distributed under the License is distributed on an
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
+ * KIND, either express or implied.  See the License for the
+ * specific language governing permissions and limitations
+ * under the License.
+ */
+
+/**
+ * Hello world!
+ *
+ */
+public class App2
+{
+    public static void main( String[] args )
+    {
+        System.out.println( "Hello World!" );
+    }
+}
diff --git a/maven-jxr-plugin/src/it/mixed-plugin-report/p1/src/test/java/org/apache/maven/jxr/it/AppTest.java b/maven-jxr-plugin/src/it/mixed-plugin-report/p1/src/test/java/org/apache/maven/jxr/it/AppTest.java
new file mode 100644
index 0000000..a762ed3
--- /dev/null
+++ b/maven-jxr-plugin/src/it/mixed-plugin-report/p1/src/test/java/org/apache/maven/jxr/it/AppTest.java
@@ -0,0 +1,57 @@
+package org.apache.maven.jxr.it;
+
+/*
+ * Licensed to the Apache Software Foundation (ASF) under one
+ * or more contributor license agreements.  See the NOTICE file
+ * distributed with this work for additional information
+ * regarding copyright ownership.  The ASF licenses this file
+ * to you under the Apache License, Version 2.0 (the
+ * "License"); you may not use this file except in compliance
+ * with the License.  You may obtain a copy of the License at
+ *
+ *   http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing,
+ * software distributed under the License is distributed on an
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
+ * KIND, either express or implied.  See the License for the
+ * specific language governing permissions and limitations
+ * under the License.
+ */
+
+import junit.framework.Test;
+import junit.framework.TestCase;
+import junit.framework.TestSuite;
+
+/**
+ * Unit test for simple App.
+ */
+public class AppTest 
+    extends TestCase
+{
+    /**
+     * Create the test case
+     *
+     * @param testName name of the test case
+     */
+    public AppTest( String testName )
+    {
+        super( testName );
+    }
+
+    /**
+     * @return the suite of tests being tested
+     */
+    public static Test suite()
+    {
+        return new TestSuite( AppTest.class );
+    }
+
+    /**
+     * Rigourous Test :-)
+     */
+    public void testApp()
+    {
+        assertTrue( true );
+    }
+}
diff --git a/maven-jxr-plugin/src/it/mixed-plugin-report/p2/pom.xml b/maven-jxr-plugin/src/it/mixed-plugin-report/p2/pom.xml
new file mode 100644
index 0000000..fe14b56
--- /dev/null
+++ b/maven-jxr-plugin/src/it/mixed-plugin-report/p2/pom.xml
@@ -0,0 +1,36 @@
+<?xml version="1.0" encoding="UTF-8"?>
+
+<!--
+Licensed to the Apache Software Foundation (ASF) under one
+or more contributor license agreements.  See the NOTICE file
+distributed with this work for additional information
+regarding copyright ownership.  The ASF licenses this file
+to you under the Apache License, Version 2.0 (the
+"License"); you may not use this file except in compliance
+with the License.  You may obtain a copy of the License at
+
+  http://www.apache.org/licenses/LICENSE-2.0
+
+Unless required by applicable law or agreed to in writing,
+software distributed under the License is distributed on an
+"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
+KIND, either express or implied.  See the License for the
+specific language governing permissions and limitations
+under the License.
+-->
+<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
+  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
+  <modelVersion>4.0.0</modelVersion>
+
+  <groupId>org.apache.maven.jxr.it</groupId>
+  <artifactId>mixed-p2</artifactId>
+  <parent>
+    <groupId>org.apache.maven.jxr.it</groupId>
+    <artifactId>mixed-plugin-report</artifactId>
+    <version>1-SNAPSHOT</version>
+  </parent>
+
+  <name>mixed-p2</name>
+  <url>http://maven.apache.org</url>
+
+</project>
diff --git a/maven-jxr-plugin/src/it/mixed-plugin-report/p2/src/main/java/org/apache/maven/jxr/it2/App.java b/maven-jxr-plugin/src/it/mixed-plugin-report/p2/src/main/java/org/apache/maven/jxr/it2/App.java
new file mode 100644
index 0000000..b4c1fba
--- /dev/null
+++ b/maven-jxr-plugin/src/it/mixed-plugin-report/p2/src/main/java/org/apache/maven/jxr/it2/App.java
@@ -0,0 +1,33 @@
+package org.apache.maven.jxr.it2;
+
+/*
+ * Licensed to the Apache Software Foundation (ASF) under one
+ * or more contributor license agreements.  See the NOTICE file
+ * distributed with this work for additional information
+ * regarding copyright ownership.  The ASF licenses this file
+ * to you under the Apache License, Version 2.0 (the
+ * "License"); you may not use this file except in compliance
+ * with the License.  You may obtain a copy of the License at
+ *
+ *   http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing,
+ * software distributed under the License is distributed on an
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
+ * KIND, either express or implied.  See the License for the
+ * specific language governing permissions and limitations
+ * under the License.
+ */
+
+/**
+ * Hello world!
+ *
+ */
+public class App
+    extends App2
+{
+    public static void main( String[] args )
+    {
+        System.out.println( "Hello World!" );
+    }
+}
diff --git a/maven-jxr-plugin/src/it/mixed-plugin-report/p2/src/main/java/org/apache/maven/jxr/it2/App2.java b/maven-jxr-plugin/src/it/mixed-plugin-report/p2/src/main/java/org/apache/maven/jxr/it2/App2.java
new file mode 100644
index 0000000..45f876d
--- /dev/null
+++ b/maven-jxr-plugin/src/it/mixed-plugin-report/p2/src/main/java/org/apache/maven/jxr/it2/App2.java
@@ -0,0 +1,32 @@
+package org.apache.maven.jxr.it2;
+
+/*
+ * Licensed to the Apache Software Foundation (ASF) under one
+ * or more contributor license agreements.  See the NOTICE file
+ * distributed with this work for additional information
+ * regarding copyright ownership.  The ASF licenses this file
+ * to you under the Apache License, Version 2.0 (the
+ * "License"); you may not use this file except in compliance
+ * with the License.  You may obtain a copy of the License at
+ *
+ *   http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing,
+ * software distributed under the License is distributed on an
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
+ * KIND, either express or implied.  See the License for the
+ * specific language governing permissions and limitations
+ * under the License.
+ */
+
+/**
+ * Hello world!
+ *
+ */
+public class App2
+{
+    public static void main( String[] args )
+    {
+        System.out.println( "Hello World!" );
+    }
+}
diff --git a/maven-jxr-plugin/src/it/mixed-plugin-report/p2/src/test/java/org/apache/maven/jxr/it2/AppTest.java b/maven-jxr-plugin/src/it/mixed-plugin-report/p2/src/test/java/org/apache/maven/jxr/it2/AppTest.java
new file mode 100644
index 0000000..e2b9ebf
--- /dev/null
+++ b/maven-jxr-plugin/src/it/mixed-plugin-report/p2/src/test/java/org/apache/maven/jxr/it2/AppTest.java
@@ -0,0 +1,57 @@
+package org.apache.maven.jxr.it2;
+
+/*
+ * Licensed to the Apache Software Foundation (ASF) under one
+ * or more contributor license agreements.  See the NOTICE file
+ * distributed with this work for additional information
+ * regarding copyright ownership.  The ASF licenses this file
+ * to you under the Apache License, Version 2.0 (the
+ * "License"); you may not use this file except in compliance
+ * with the License.  You may obtain a copy of the License at
+ *
+ *   http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing,
+ * software distributed under the License is distributed on an
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
+ * KIND, either express or implied.  See the License for the
+ * specific language governing permissions and limitations
+ * under the License.
+ */
+
+import junit.framework.Test;
+import junit.framework.TestCase;
+import junit.framework.TestSuite;
+
+/**
+ * Unit test for simple App.
+ */
+public class AppTest 
+    extends TestCase
+{
+    /**
+     * Create the test case
+     *
+     * @param testName name of the test case
+     */
+    public AppTest( String testName )
+    {
+        super( testName );
+    }
+
+    /**
+     * @return the suite of tests being tested
+     */
+    public static Test suite()
+    {
+        return new TestSuite( AppTest.class );
+    }
+
+    /**
+     * Rigourous Test :-)
+     */
+    public void testApp()
+    {
+        assertTrue( true );
+    }
+}
diff --git a/maven-jxr-plugin/src/it/mixed-plugin-report/pom.xml b/maven-jxr-plugin/src/it/mixed-plugin-report/pom.xml
new file mode 100644
index 0000000..a0fb0bf
--- /dev/null
+++ b/maven-jxr-plugin/src/it/mixed-plugin-report/pom.xml
@@ -0,0 +1,105 @@
+<?xml version="1.0" encoding="UTF-8"?>
+
+<!--
+Licensed to the Apache Software Foundation (ASF) under one
+or more contributor license agreements.  See the NOTICE file
+distributed with this work for additional information
+regarding copyright ownership.  The ASF licenses this file
+to you under the Apache License, Version 2.0 (the
+"License"); you may not use this file except in compliance
+with the License.  You may obtain a copy of the License at
+
+  http://www.apache.org/licenses/LICENSE-2.0
+
+Unless required by applicable law or agreed to in writing,
+software distributed under the License is distributed on an
+"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
+KIND, either express or implied.  See the License for the
+specific language governing permissions and limitations
+under the License.
+-->
+<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
+  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
+  <modelVersion>4.0.0</modelVersion>
+
+  <groupId>org.apache.maven.jxr.it</groupId>
+  <artifactId>mixed-plugin-report</artifactId>
+  <version>1-SNAPSHOT</version>
+  <packaging>pom</packaging>
+  <description>Use both execute and executeReport in one pom. Verifies that at least one produces plausible results</description>
+
+  <name>aggregate</name>
+  <url>http://maven.apache.org</url>
+
+  <properties>
+    <jxr-plugin-version>@pom.version@</jxr-plugin-version>
+    <site-plugin-version>@sitePluginVersion@</site-plugin-version>
+  </properties>
+
+  <dependencies>
+    <dependency>
+      <groupId>junit</groupId>
+      <artifactId>junit</artifactId>
+      <version>4.8.2</version>
+      <scope>test</scope>
+    </dependency>
+  </dependencies>
+
+  <build>
+    <plugins>
+      <plugin>
+        <groupId>org.apache.maven.plugins</groupId>
+        <artifactId>maven-jxr-plugin</artifactId>
+        <version>${jxr-plugin-version}</version>
+        <executions>
+          <execution>
+            <id>aggregate</id>
+            <goals><goal>aggregate</goal><goal>test-aggregate</goal></goals>
+            <phase>site</phase>
+          </execution>
+        </executions>
+      </plugin> 
+      <plugin>
+        <groupId>org.apache.maven.plugins</groupId>
+        <artifactId>maven-javadoc-plugin</artifactId>
+        <version>2.8</version>
+        <executions>
+          <execution>
+            <id>aggregate</id>
+            <goals>
+              <goal>aggregate</goal>
+              <goal>test-aggregate</goal>
+            </goals>
+            <phase>site</phase>
+          </execution>
+        </executions>
+      </plugin>   
+      <plugin>
+        <groupId>org.apache.maven.plugins</groupId>
+        <artifactId>maven-site-plugin</artifactId>
+        <version>${site-plugin-version}</version>
+      </plugin>
+    </plugins>
+  </build>
+
+  <modules>
+    <module>p1</module>
+    <module>p2</module>
+  </modules>
+
+  <reporting>
+    <excludeDefaults>true</excludeDefaults>
+    <plugins>
+      <plugin>
+        <groupId>org.apache.maven.plugins</groupId>
+        <artifactId>maven-jxr-plugin</artifactId>
+        <version>${jxr-plugin-version}</version>
+      </plugin>
+      <plugin>
+        <groupId>org.apache.maven.plugins</groupId>
+        <artifactId>maven-javadoc-plugin</artifactId>
+        <version>2.8</version>
+      </plugin>
+    </plugins>
+  </reporting>
+</project>
diff --git a/maven-jxr-plugin/src/it/mixed-plugin-report/verify.groovy b/maven-jxr-plugin/src/it/mixed-plugin-report/verify.groovy
new file mode 100644
index 0000000..5a2d553
--- /dev/null
+++ b/maven-jxr-plugin/src/it/mixed-plugin-report/verify.groovy
@@ -0,0 +1,44 @@
+
+/*
+ * Licensed to the Apache Software Foundation (ASF) under one
+ * or more contributor license agreements.  See the NOTICE file
+ * distributed with this work for additional information
+ * regarding copyright ownership.  The ASF licenses this file
+ * to you under the Apache License, Version 2.0 (the
+ * "License"); you may not use this file except in compliance
+ * with the License.  You may obtain a copy of the License at
+ *
+ *   http://www.apache.org/licenses/LICENSE-2.0
+ *
+ * Unless required by applicable law or agreed to in writing,
+ * software distributed under the License is distributed on an
+ * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
+ * KIND, either express or implied.  See the License for the
+ * specific language governing permissions and limitations
+ * under the License.
+ */
+assert new File( basedir, 'target/site' ).exists();
+
+content = new File( basedir, 'target/site/project-reports.html' ).text;
+
+assert content.contains( 'xref/index.html' );
+assert content.contains( 'xref-test/index.html' );
+
+assert new File( basedir, 'target/site/xref' ).exists();
+assert new File( basedir, 'target/site/xref/index.html' ).exists();
+assert new File( basedir, 'target/site/xref/org/apache/maven/jxr/it/App.html' ).exists();
+assert new File( basedir, 'target/site/xref/org/apache/maven/jxr/it2/App.html' ).exists();
+
+assert new File( basedir, 'target/site/xref-test' ).exists();
+assert new File( basedir, 'target/site/xref-test/index.html' ).exists();
+assert new File( basedir, 'target/site/xref-test/org/apache/maven/jxr/it/AppTest.html' ).exists();
+assert new File( basedir, 'target/site/xref-test/org/apache/maven/jxr/it2/AppTest.html' ).exists();
+
+content = new File( basedir, 'target/site/xref/org/apache/maven/jxr/it/App.html' ).text;
+assert content.contains( 'App2.html' );
+
+content = new File( basedir, 'target/site/xref/org/apache/maven/jxr/it2/App.html' ).text;
+assert content.contains( 'App2.html' );
+content = new File( basedir, 'target/site/xref/index.html' ).text;
+assert content.contains( '<!-- this is a JXR report set -->' );
+return true;
\ No newline at end of file
diff --git a/maven-jxr-plugin/src/site/apt/examples/aggregate.apt.vm b/maven-jxr-plugin/src/site/apt/examples/aggregate.apt.vm
index 9707d65..9c228c6 100644
--- a/maven-jxr-plugin/src/site/apt/examples/aggregate.apt.vm
+++ b/maven-jxr-plugin/src/site/apt/examples/aggregate.apt.vm
@@ -69,30 +69,21 @@ Project
 +-----+
 <project>
   ...
-  <build>
-    <plugins>
-      <plugin>
-        <groupId>org.apache.maven.plugins</groupId>
-        <artifactId>maven-jxr-plugin</artifactId>
-        <version>${project.version}</version>
-        <executions>
-          <execution>
-            <id>aggregate</id>
-            <goals>
-              <goal>aggregate</goal>
-              <goal>test-aggregate</goal></goals>
-            <phase>site</phase>
-          </execution>
-        </executions>
-      </plugin>
-    </plugins>
-  </build>
   <reporting>
     <plugins>
       <plugin>
         <groupId>org.apache.maven.plugins</groupId>
         <artifactId>maven-jxr-plugin</artifactId>
         <version>${project.version}</version>
+         <reportSets>
+            <reportSet>
+              <id>aggregate</id>
+              <reports>
+              <report>aggregate</report>
+              <report>test-aggregate</report>
+             </reports>
+            </reportSet>
+           </reportSets>
        </plugin>
     </plugins>
   ...
