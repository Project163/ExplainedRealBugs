diff --git a/src/main/java/org/apache/maven/jxr/JavaCodeTransform.java b/src/main/java/org/apache/maven/jxr/JavaCodeTransform.java
index 02689e2..4f902bc 100644
--- a/src/main/java/org/apache/maven/jxr/JavaCodeTransform.java
+++ b/src/main/java/org/apache/maven/jxr/JavaCodeTransform.java
@@ -282,20 +282,31 @@ public class JavaCodeTransform
             .append( "<html xmlns=\"http://www.w3.org/1999/xhtml\" xml:lang=\"" ).append( locale )
             .append( "\" lang=\"" ).append( locale ).append( "\">\n" ).append( "<head>\n" )
             .append( "<meta http-equiv=\"content-type\" content=\"text/html; charset=" ).append( outputEncoding )
-            .append( "\" />" );
+            .append( "\" />\n" );
 
         // title ("classname xref")
+        buffer.append( "<title>" );
         try
         {
-            buffer.append( "<title>" ).append( fileManager.getFile( this.getCurrentFilename() )
-                .getClassType().getName() ).append( " xref</title>\n" );
-
+            JavaFile javaFile = fileManager.getFile( this.getCurrentFilename() );
+            if ( javaFile.getClassType() != null )
+            {
+                buffer.append( javaFile.getClassType().getName() );
+            }
+            else
+            {
+                buffer.append( this.getCurrentFilename() );
+            }
+            buffer.append( " " );
         }
         catch ( IOException e )
         {
-            buffer.append( "<title>xref</title>\n" );
             e.printStackTrace();
         }
+        finally
+        {
+            buffer.append( "xref</title>\n" );
+        }
 
         // stylesheet link
         buffer.append( "<link type=\"text/css\" rel=\"stylesheet\" href=\"" ).append( this.getPackageRoot() )
@@ -1096,7 +1107,7 @@ public class JavaCodeTransform
                 }
                 else
                 {
-                    System.out.println( this.getCurrentFilename() );
+                    return "";
                 }
                 javadocURI.append( ".html" );
 
diff --git a/src/test/java/org/apache/maven/jxr/JavaCodeTransformTest.java b/src/test/java/org/apache/maven/jxr/JavaCodeTransformTest.java
index b6845b9..4527ff1 100644
--- a/src/test/java/org/apache/maven/jxr/JavaCodeTransformTest.java
+++ b/src/test/java/org/apache/maven/jxr/JavaCodeTransformTest.java
@@ -45,13 +45,23 @@ public class JavaCodeTransformTest
     public void testTransform()
         throws Exception
     {
-        File sourceFile = new File(
-            System.getProperty( "basedir" ) + "/src/test/java/org/apache/maven/jxr/JavaCodeTransformTest.java" );
+        File sourceFile = new File( System.getProperty( "user.dir" )
+            + "/src/test/java/org/apache/maven/jxr/JavaCodeTransformTest.java" );
         assertTrue( sourceFile.exists() );
-        codeTransform.transform( sourceFile.getAbsolutePath(),
-                                 System.getProperty( "basedir" ) + "/target/JavaCodeTransformTest.html", Locale.ENGLISH,
-                                 "ISO-8859-1", "ISO-8859-1", "", "" );
-        assertTrue( new File( System.getProperty( "basedir" ), "/target/JavaCodeTransformTest.html" ).exists() );
+
+        codeTransform.transform( sourceFile.getAbsolutePath(), System.getProperty( "user.dir" )
+            + "/target/JavaCodeTransformTest.html", Locale.ENGLISH, "ISO-8859-1", "ISO-8859-1", "", "" );
+        assertTrue( new File( System.getProperty( "user.dir" ), "/target/JavaCodeTransformTest.html" ).exists() );
     }
 
+    public void testTransformWithEmptyClassFile()
+        throws Exception
+    {
+        File sourceFile = new File( System.getProperty( "user.dir" ) + "/src/test/resources/EmptyClass.java" );
+        assertTrue( sourceFile.exists() );
+
+        codeTransform.transform( sourceFile.getAbsolutePath(), System.getProperty( "user.dir" )
+            + "/target/EmptyClass.html", Locale.ENGLISH, "ISO-8859-1", "ISO-8859-1", "", "" );
+        assertTrue( new File( System.getProperty( "user.dir" ), "/target/EmptyClass.html" ).exists() );
+    }
 }
diff --git a/src/test/resources/EmptyClass.java b/src/test/resources/EmptyClass.java
new file mode 100644
index 0000000..e69de29
