<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:27:46 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WICKET-6133] Failing test SpringBeanWithGenericsTest in 7.3.0.0 SNAPSHOT</title>
                <link>https://issues.apache.org/jira/browse/WICKET-6133</link>
                <project id="12310561" key="WICKET">Wicket</project>
                    <description>&lt;p&gt;I try to build 7.3.0.0-SNAPSHOT from source, but there&apos;s at least the&lt;br/&gt;
following failing test. Skipping the tests builds OK and the results&lt;br/&gt;
seem to work.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;[...]
Tests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.398 sec - in org.apache.wicket.spring.injection.annot.SpringBeanTest
Running org.apache.wicket.spring.injection.annot.SpringBeanWithGenericsTest
Tests run: 7, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 0.557 sec &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.wicket.spring.injection.annot.SpringBeanWithGenericsTestlistField(org.apache.wicket.spring.injection.annot.SpringBeanWithGenericsTest)
Time elapsed: 0.072 sec  &amp;lt;&amp;lt;&amp;lt; FAILURE!
java.lang.AssertionError: expected:&amp;lt;3&amp;gt; but was:&amp;lt;1&amp;gt;
        at org.junit.Assert.fail(Assert.java:88)
        at org.junit.Assert.failNotEquals(Assert.java:834)
        at org.junit.Assert.assertEquals(Assert.java:645)
        at org.junit.Assert.assertEquals(Assert.java:631)
        at org.apache.wicket.spring.injection.annot.SpringBeanWithGenericsTest.listField(SpringBeanWithGenericsTest.java:143)
[...]
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The mentioned line is the last one of the following quote:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;        @Test
        &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void listField() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; Exception
        {
                AnnotatedListField page =
                        tester.startPage(&lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; AnnotatedListField());

                assertNotNull(page.getStringsList());
                assertEquals(3, page.getStringsList().size());
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;I&apos;ve tested different versions of Maven, with and without a .m2 folder and even with changes to the source code of the test and my feeling is that the error I see is somewhat non deterministic. Without an available .m2 folder the test seems to PASS very often, but only during the first execution, directly afterwards with the same commands the test FAILs most of the time. I executed the test the whole morning today and it failed always, only to succeed some minutes ago before writing this report between lots of failing executions.&lt;/p&gt;

&lt;p&gt;I think the problem is with creating the test data properly and found the following commit, which introduced &quot;getStringsList&quot;:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/wicket/commit/f0340a3ef62a18df14badb26acee01bf102b9a2c&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/wicket/commit/f0340a3ef62a18df14badb26acee01bf102b9a2c&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The interesting part for me about that commit is that&lt;br/&gt;
&quot;ConfigContextWithGenerics.getStrings&quot; in the same file was NOT&lt;br/&gt;
changed as well. So I renamed to .stringsList and that did have an&lt;br/&gt;
effect, now another test is failing instead:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Failed tests:
  SpringBeanWithGenericsTest.listField:147-&amp;gt;Assert.assertThat:923-&amp;gt;Assert.&lt;span class=&quot;code-keyword&quot;&gt;assert&lt;/span&gt;
That:956
Expected: is &amp;lt;3&amp;gt;
     but: was &amp;lt;1&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Looking at the other methods of ConfigContextWithGenerics, I&apos;m pretty sure that &quot;strings&quot; is wrongly named, because all other methods are named after annotated fields. So I guess there&apos;s some magic in the background able to ignore the names and map using method signatur or such. And that might fail in most of my executions.&lt;/p&gt;

&lt;p&gt;Having a closer look at the error message, it says that 1 element is found where 3 were expected. The only 1 element list in the class is &quot;myList&quot;, so I guess that is used most of times in my executions for whatever reason.&lt;/p&gt;

&lt;p&gt;I had a closer look at SpringComponentInjector and AnnotProxyFieldValueFactory, which e.g. contains getBeanNameOfClass, which resolves beans without any name.&lt;/p&gt;

&lt;p&gt;So in my opinion there&apos;s definitely something wrong with this test, at least ConfigContextWithGenerics.getStrings is wrongly named, but changing only that doesn&apos;t resolve the issue for me. There are still invocations failing with the 3 expected, 1 recognized error.&lt;/p&gt;

&lt;p&gt;This was discussed on the users list as well:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://mail-archives.apache.org/mod_mbox/wicket-users/201603.mbox/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://mail-archives.apache.org/mod_mbox/wicket-users/201603.mbox/&lt;/a&gt;&amp;lt;1557500025.20160330120517%40am-soft.de&amp;gt;&lt;/p&gt;</description>
                <environment>Apache Maven 3.3.9 (bb52d8502b132ec0a5a3f4c09453c07478323dc5; 2015-11-10T17:41:47+01:00)&lt;br/&gt;
Maven home: C:\Program Files\Apache Software Foundation\Maven\bin\..&lt;br/&gt;
Java version: 1.7.0_80, vendor: Oracle Corporation&lt;br/&gt;
Java home: C:\Program Files\Java\jdk1.7.0_80\jre&lt;br/&gt;
Default locale: de_DE, platform encoding: Cp1252&lt;br/&gt;
OS name: &amp;quot;windows 8.1&amp;quot;, version: &amp;quot;6.3&amp;quot;, arch: &amp;quot;amd64&amp;quot;, family: &amp;quot;windows&amp;quot;</environment>
        <key id="12954656">WICKET-6133</key>
            <summary>Failing test SpringBeanWithGenericsTest in 7.3.0.0 SNAPSHOT</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bitstorm">Andrea Del Bene</assignee>
                                    <reporter username="tschoening">Thorsten Sch&#246;ning</reporter>
                        <labels>
                    </labels>
                <created>Wed, 30 Mar 2016 15:12:34 +0000</created>
                <updated>Wed, 16 Jan 2019 14:33:10 +0000</updated>
                            <resolved>Tue, 12 Apr 2016 12:17:34 +0000</resolved>
                                    <version>7.2.0</version>
                                    <fixVersion>7.3.0</fixVersion>
                    <fixVersion>8.0.0-M1</fixVersion>
                                    <component>wicket-spring</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15234923" author="bitstorm" created="Mon, 11 Apr 2016 11:43:22 +0000"  >&lt;p&gt;Hi,&lt;/p&gt;

&lt;p&gt;do you still have problems with this test case? I couldn&apos;t reproduce it yet.&lt;/p&gt;</comment>
                            <comment id="15234969" author="mgrigorov" created="Mon, 11 Apr 2016 12:19:40 +0000"  >&lt;p&gt;In the mailing lists Thorsten explained that the problem happens only on Windows.&lt;/p&gt;</comment>
                            <comment id="15235083" author="tschoening" created="Mon, 11 Apr 2016 13:26:59 +0000"  >&lt;p&gt;Yes, it happens on Windows and it still happens. I just updated my 7.3.0.0 branch some minutes ago with the same results like before:&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;Tests run: 7, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 0.512 sec &amp;lt;&amp;lt;&amp;lt; FAILURE! - in org.apache.wicket.spring.injection.annot.SpringBeanWithGenericsTestlistField(org.apache.wicket.spring.injection.annot.SpringBeanWithGenericsTest)
Time elapsed: 0.061 sec  &amp;lt;&amp;lt;&amp;lt; FAILURE!
java.lang.AssertionError: expected:&amp;lt;3&amp;gt; but was:&amp;lt;1&amp;gt;
        at org.junit.Assert.fail(Assert.java:88)
        at org.junit.Assert.failNotEquals(Assert.java:834)
        at org.junit.Assert.assertEquals(Assert.java:645)
        at org.junit.Assert.assertEquals(Assert.java:631)
        at org.apache.wicket.spring.injection.annot.SpringBeanWithGenericsTest.listField(SpringBeanWithGenericsTest.java:143)
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;My suggestion is as follows: First check if ConfigContextWithGenerics.getStrings is logically correct or not compared to the other methods and their naming scheme in this class and compared to the caller and what methods are actually called in SpringBeanWithGenericsTest, especially around line 142 &quot;page.getStringsList&quot; etc. Don&apos;t mind that it works on Linux, ask yourself if the naming scheme is correct or if my mentioned commit simply forgot to rename ConfigContextWithGenerics.getStrings.&lt;/p&gt;

&lt;p&gt;It&apos;s surely the latter, so the fact that it works anyway in your case can only mean that some &quot;magic&quot; behind the scenes is working &quot;by accident&quot; correctly on Linux, but doesn&apos;t on Windows at least most of the times in my JDK 1.7.0_80.&lt;/p&gt;

&lt;p&gt;I guess that there&apos;s some API around reflection/annotations used in your Spring glue or in Spring with non-deterministic iteration of fields and that whenever I see the error, ConfigContextWithGenerics.myList was found instead of ConfigContextWithGenerics.getStrings. Simply because that&apos;s the only field in the whole class with only exactly one element and the error message speaks of exactly one element. The return types of both methods are compatible, so this could be possible.&lt;/p&gt;</comment>
                            <comment id="15235096" author="bitstorm" created="Mon, 11 Apr 2016 13:33:14 +0000"  >&lt;p&gt;Thank you &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tschoening&quot; class=&quot;user-hover&quot; rel=&quot;tschoening&quot;&gt;tschoening&lt;/a&gt;! I was about to replay you that I succeeded in reproducing your problem. I started to see the problem when I applied your patch. Thank you for your suggestions, I will investigate the problem.&lt;/p&gt;</comment>
                            <comment id="15236919" author="jira-bot" created="Tue, 12 Apr 2016 09:34:49 +0000"  >&lt;p&gt;Commit a520f443ada300c0f99e5ad8bf3fb19dc60eb71f in wicket&apos;s branch refs/heads/wicket-7.x from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bitstorm&quot; class=&quot;user-hover&quot; rel=&quot;bitstorm&quot;&gt;bitstorm&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=a520f44&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=a520f44&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6133&quot; title=&quot;Failing test SpringBeanWithGenericsTest in 7.3.0.0 SNAPSHOT&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6133&quot;&gt;&lt;del&gt;WICKET-6133&lt;/del&gt;&lt;/a&gt; Failing test SpringBeanWithGenericsTest in 7.3.0.0 SNAPSHOT&lt;/p&gt;</comment>
                            <comment id="15236994" author="jira-bot" created="Tue, 12 Apr 2016 11:07:38 +0000"  >&lt;p&gt;Commit 9329aaea1fbfe2c6f517e53491a6f767b1702932 in wicket&apos;s branch refs/heads/master from &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bitstorm&quot; class=&quot;user-hover&quot; rel=&quot;bitstorm&quot;&gt;bitstorm&lt;/a&gt;&lt;br/&gt;
[ &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=9329aae&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=wicket.git;h=9329aae&lt;/a&gt; ]&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-6133&quot; title=&quot;Failing test SpringBeanWithGenericsTest in 7.3.0.0 SNAPSHOT&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-6133&quot;&gt;&lt;del&gt;WICKET-6133&lt;/del&gt;&lt;/a&gt; Failing test SpringBeanWithGenericsTest in 7.3.0.0 SNAPSHOT&lt;/p&gt;</comment>
                            <comment id="15237153" author="tschoening" created="Tue, 12 Apr 2016 13:30:07 +0000"  >&lt;p&gt;I can confirm the problem is fixed for me, thanks!&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310560">
                    <name>Problem/Incident</name>
                                            <outwardlinks description="causes">
                                        <issuelink>
            <issuekey id="13209917">WICKET-6631</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12796090" name="SpringBeanWithGenericsTest.java.patch" size="379" author="tschoening" created="Wed, 30 Mar 2016 15:15:55 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            9 years, 31 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2vemv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>