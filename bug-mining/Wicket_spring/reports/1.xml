<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:27:39 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[WICKET-613] Prototype scoped Spring beans</title>
                <link>https://issues.apache.org/jira/browse/WICKET-613</link>
                <project id="12310561" key="WICKET">Wicket</project>
                    <description>&lt;p&gt;I copied the following text from my discussion on wicket-user, and was asked to open an issue, so here it is:&lt;br/&gt;
&lt;a href=&quot;http://www.nabble.com/Prototype-scoped-Spring-beans-tf3849285.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.nabble.com/Prototype-scoped-Spring-beans-tf3849285.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;For a more complex form I wanted to use a &quot;stateful&quot; Springbean, to which I applied scope=&quot;prototype&quot;. The idea is to have one bean instance for every Form instance. I would access the bean with PropertyModels and direct method calls during construction (i.e. setting initial state from input parameters) and during events, which would alter the state. I inject the bean into the Form with @SpringBean annotation.&lt;/p&gt;

&lt;p&gt;This works somehow, but sometimes, especially after using the backbutton, I had the problem that the internal state was reset. So I analyzed the stack in  the constructor of the bean implementation, and found out that it was called twice during construction of the Form. First, during the super() call, and then again in the next line during a method call on that bean. I appended both stacktraces below. The  proxy itself does not change.&lt;/p&gt;

&lt;p&gt;This happens again after going back and e.g. submitting again. This results in a NPE, because the internal state is reset.&lt;/p&gt;

&lt;p&gt;I understand from reading the mailing list that the Wicket-Proxy does nothing but a lookup in the Application context, and does not know or care about spring scope.&lt;/p&gt;

&lt;p&gt;And here I&apos;m a little stuck. I am already considering to put the state into the Form, and make the Bean a singleton without any internal state. As that would mean some heavy refactoring, I would prefer a way where the Spring acces would work as I want. Or is this a wrong way altogether?&lt;/p&gt;</description>
                <environment>JDK 6, Jetty</environment>
        <key id="12370793">WICKET-613</key>
            <summary>Prototype scoped Spring beans</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ivaynberg">Igor Vaynberg</assignee>
                                    <reporter username="mindhaq">R&#252;diger Schulz</reporter>
                        <labels>
                    </labels>
                <created>Mon, 4 Jun 2007 00:19:57 +0000</created>
                <updated>Thu, 19 Jun 2008 17:00:40 +0000</updated>
                            <resolved>Thu, 19 Jun 2008 17:00:40 +0000</resolved>
                                    <version>1.3.0-beta1</version>
                                    <fixVersion>1.3.4</fixVersion>
                    <fixVersion>1.4-M3</fixVersion>
                                    <component>wicket-spring</component>
                        <due></due>
                            <votes>1</votes>
                                    <watches>2</watches>
                                                                                                                <comments>
                            <comment id="12501070" author="ehillenius" created="Mon, 4 Jun 2007 00:30:45 +0000"  >&lt;p&gt;Igor, do you mind looking into this one please? Cheers.&lt;/p&gt;</comment>
                            <comment id="12501250" author="mindhaq" created="Mon, 4 Jun 2007 15:54:07 +0000"  >&lt;p&gt;Another thread on this issue, also about session and request scoped beans:&lt;br/&gt;
&lt;a href=&quot;http://www.nabble.com/Injecting-session-scoped-beans-with-wicket-spring-annot-tf3851393.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.nabble.com/Injecting-session-scoped-beans-with-wicket-spring-annot-tf3851393.html&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12505653" author="ivaynberg" created="Mon, 18 Jun 2007 03:04:17 +0000"  >&lt;p&gt;removed failfast check as it caused an extra creation of a prototype bean instance upon injection&lt;/p&gt;</comment>
                            <comment id="12603068" author="ivaynberg" created="Fri, 6 Jun 2008 14:52:53 +0000"  >&lt;p&gt;from	Daniel Stoch&lt;br/&gt;
to	dev@wicket&lt;br/&gt;
date	Fri, Jun 6, 2008 at 3:16 AM&lt;br/&gt;
subject	&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-613&quot; title=&quot;Prototype scoped Spring beans&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-613&quot;&gt;&lt;del&gt;WICKET-613&lt;/del&gt;&lt;/a&gt;: Prototype scoped Spring beans - AnnotProxyFieldValueFactory regression&lt;/p&gt;

&lt;p&gt;There is a resolved issue &lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-613&quot; title=&quot;Prototype scoped Spring beans&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-613&quot;&gt;&lt;del&gt;WICKET-613&lt;/del&gt;&lt;/a&gt;&lt;br/&gt;
(&lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-613&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;https://issues.apache.org/jira/browse/WICKET-613&lt;/a&gt;), where Igor has&lt;br/&gt;
removed failfast check in AnnotProxyFieldValueFactory. But in all&lt;br/&gt;
actual Wicket versions (&amp;gt;1.3.0) this failfast check still exists. So I&lt;br/&gt;
have browsed SVN for AnnotProxyFieldValueFactory class changes:&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;revision 548178: &lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-613&quot; title=&quot;Prototype scoped Spring beans&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-613&quot;&gt;&lt;del&gt;WICKET-613&lt;/del&gt;&lt;/a&gt;: removed failfast check as it caused an&lt;br/&gt;
extra constructor invocation on prototype beans (by ivaynberg)&lt;/li&gt;
	&lt;li&gt;549055: backported the failFast mechanism from 2.0, all tests pass&lt;br/&gt;
now (by janne)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;The question is why this failfast mechanism was backported and what&lt;br/&gt;
about the resolution of issue &lt;a href=&quot;https://issues.apache.org/jira/browse/WICKET-613&quot; title=&quot;Prototype scoped Spring beans&quot; class=&quot;issue-link&quot; data-issue-key=&quot;WICKET-613&quot;&gt;&lt;del&gt;WICKET-613&lt;/del&gt;&lt;/a&gt;? I think it should be&lt;br/&gt;
reopened.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>42035</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            17 years, 25 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0kicv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>117791</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>