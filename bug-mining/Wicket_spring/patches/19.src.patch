diff --git a/wicket-spring/src/test/java/org/apache/wicket/spring/injection/annot/SpringBeanTest.java b/wicket-spring/src/test/java/org/apache/wicket/spring/injection/annot/SpringBeanTest.java
index da4feef77f..663aa4ce31 100644
--- a/wicket-spring/src/test/java/org/apache/wicket/spring/injection/annot/SpringBeanTest.java
+++ b/wicket-spring/src/test/java/org/apache/wicket/spring/injection/annot/SpringBeanTest.java
@@ -138,7 +138,7 @@ public class SpringBeanTest extends Assert
 
 		// with no name specified we get IllegalStateException
 		Page page = tester.startPage(new AnnotatedFieldInBehaviorPage());
-		TestBehavior behavior = (TestBehavior)page.getBehaviorById(0);
+		TestBehavior behavior = page.getBehaviors(TestBehavior.class).get(0);
 		assertNotNull(behavior.getBean());
 	}
 }
@@ -203,4 +203,4 @@ class AnnotatedFieldInBehaviorPage extends DummyHomePage
 	{
 		add(new TestBehavior());
 	}
-}
\ No newline at end of file
+}
