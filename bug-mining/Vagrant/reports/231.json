{"url":"https://api.github.com/repos/hashicorp/vagrant/issues/13655","repository_url":"https://api.github.com/repos/hashicorp/vagrant","labels_url":"https://api.github.com/repos/hashicorp/vagrant/issues/13655/labels{/name}","comments_url":"https://api.github.com/repos/hashicorp/vagrant/issues/13655/comments","events_url":"https://api.github.com/repos/hashicorp/vagrant/issues/13655/events","html_url":"https://github.com/hashicorp/vagrant/issues/13655","id":3016082716,"node_id":"I_kwDOAAdaUM6zxcUc","number":13655,"title":"private_network vagrant up error (undefined method `read_host_only_networks')","user":{"login":"upszot","id":23480423,"node_id":"MDQ6VXNlcjIzNDgwNDIz","avatar_url":"https://avatars.githubusercontent.com/u/23480423?v=4","gravatar_id":"","url":"https://api.github.com/users/upszot","html_url":"https://github.com/upszot","followers_url":"https://api.github.com/users/upszot/followers","following_url":"https://api.github.com/users/upszot/following{/other_user}","gists_url":"https://api.github.com/users/upszot/gists{/gist_id}","starred_url":"https://api.github.com/users/upszot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/upszot/subscriptions","organizations_url":"https://api.github.com/users/upszot/orgs","repos_url":"https://api.github.com/users/upszot/repos","events_url":"https://api.github.com/users/upszot/events{/privacy}","received_events_url":"https://api.github.com/users/upszot/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":25816,"node_id":"MDU6TGFiZWwyNTgxNg==","url":"https://api.github.com/repos/hashicorp/vagrant/labels/bug","name":"bug","color":"e11d21","default":true,"description":null},{"id":139180666,"node_id":"MDU6TGFiZWwxMzkxODA2NjY=","url":"https://api.github.com/repos/hashicorp/vagrant/labels/provider/virtualbox","name":"provider/virtualbox","color":"bfe5bf","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2025-04-24T05:50:49Z","updated_at":"2025-05-31T02:22:05Z","closed_at":"2025-04-30T20:58:12Z","author_association":"NONE","type":null,"active_lock_reason":"resolved","sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"\n### Debug output\n[>Vagrant up --debug  (full log)](https://gist.github.com/upszot/4c0d4932c1180b81ecd0bd7b02206c45)\n\nThe following is a portion of the vagrant up output:\n\n\n\n```vagrant  up\nBringing machine 'default' up with 'virtualbox' provider...\n==> default: Cloning VM...\n==> default: Matching MAC address for NAT networking...\n==> default: Checking if box 'ubuntu/jammy64' version '20231027.0.0' is up to date...\n==> default: Setting the name of the VM: VMPruebas\n==> default: Clearing any previously set network interfaces...\n==> default: Destroying VM and associated drives...\n/opt/vagrant/embedded/gems/gems/vagrant-2.4.5/plugins/providers/virtualbox/action/network.rb:362:in `hostonly_config': undefined method `read_host_only_networks' for an instance of VagrantPlugins::ProviderVirtualBox::Driver::Meta (NoMethodError)\n\n            hostif = @env[:machine].provider.driver.read_host_only_networks.detect { |interface|\n                                                   ^^^^^^^^^^^^^^^^^^^^^^^^\nDid you mean?  read_host_only_interfaces\n\tfrom /opt/vagrant/embedded/gems/gems/vagrant-2.4.5/plugins/providers/virtualbox/action/network.rb:119:in `block in call'\n ```\n\n\n### Expected behavior\n\nVagrant should have been able to bring up the Ubuntu virtual machine using VirtualBox without requiring the explicit specification of `virtualbox__intnet: true` in the private network configuration. In previous versions of Vagrant and VirtualBox, configuring a private network worked correctly without this additional option, creating a functional host-only network for communication between the host and the guest machine.\n\n\n\n### Actual behavior\n\nWhen running `vagrant up` with a standard private network configuration (for example, `config.vm.network \"private_network\", ip: \"192.168.56.2\"`), an error occurred that prevented the virtual machine from being brought up. The specific error was: `NoMethodError: undefined method 'read_host_only_networks' for an instance of VagrantPlugins::ProviderVirtualBox::Driver::Meta`. This suggests that Vagrant was unable to interact correctly with the VirtualBox host-only network configuration in the way it did previously. The workaround found was to add the `virtualbox__intnet: true` option to the private network configuration in the `Vagrantfile`.\n\n\n### Reproduction information \n\n#### Version History (Working vs. Issues)\n\n**Worked correctly with:**\n\n* Vagrant: 2.4.3-1.x86_64\n* VirtualBox: 7.0-7.0.24_167081_fedora40-1.x86_64\n\n**Issues were experienced with the following combinations:**\n\n* Vagrant: 2.4.4-1.x86_64\n    VirtualBox: 7.0-7.0.26_168464_fedora40-1.x86_64\n\n* Vagrant: 2.4.5-1.x86_64\n    VirtualBox: 7.0-7.0.26_168464_fedora40-1.x86_64\n\n* Vagrant: 2.4.5-1.x86_64\n    VirtualBox: 7.1-7.1.8_168469_fedora40-1.x86_64\n\n**Note:** This issue was also reproduced on another machine running Windows 11, using VirtualBox 7.0 + Vagrant 2.4.4 and VirtualBox 7.1 + Vagrant 2.4.5, yielding the same error.\n\n\n#### Host operating system\nFedora 40\n\n\n#### Guest operating system\n\nUbuntu 22.04 LTS (the box used is 'ubuntu/jammy64')\n\n#### Steps to reproduce\n\n1. Create a Vagrantfile with the following minimal configuration:\n   (Note: The IP address may vary, the important part is the basic private network configuration without virtualbox__intnet: true).\n\n3. Run the command vagrant up in the directory where the Vagrantfile was saved\n4. Observe the error NoMethodError: undefined method 'read_host_only_networks'\n#### Vagrantfile\n\n```ruby\nVagrant.configure(\"2\") do |config|\n  config.vm.box = \"ubuntu/jammy64\"\n  config.vm.network \"private_network\", ip: \"192.168.56.2\"\n  config.vm.provider \"virtualbox\" do |vb|\n    vb.name = \"test-vm\"\n  end\nend\n```\n\n\nWorkaround / Temporary Solution (Undesired)\nAs a temporary workaround to avoid this error, the private network configuration in the Vagrantfile can be modified by adding the virtualbox__intnet: true option. This forces Vagrant to configure the private network as an internal network in VirtualBox, which prevents the read_host_only_networks error.\n\nExample of Vagrantfile with the workaround:\n\n```ruby\nVagrant.configure(\"2\") do |config|\n  config.vm.box = \"ubuntu/jammy64\"\n  config.vm.network \"private_network\", ip: \"192.168.56.2\", virtualbox__intnet: true\n  config.vm.provider \"virtualbox\" do |vb|\n    vb.name = \"test-vm-fixed\"\n  end\nend\n```\n\nWhile this modification resolves the error and allows the virtual machine to be brought up, it is considered a workaround because the private network configuration should function without explicitly specifying the internal network type in VirtualBox.\n\n","closed_by":{"login":"chrisroberts","id":266674,"node_id":"MDQ6VXNlcjI2NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/266674?v=4","gravatar_id":"","url":"https://api.github.com/users/chrisroberts","html_url":"https://github.com/chrisroberts","followers_url":"https://api.github.com/users/chrisroberts/followers","following_url":"https://api.github.com/users/chrisroberts/following{/other_user}","gists_url":"https://api.github.com/users/chrisroberts/gists{/gist_id}","starred_url":"https://api.github.com/users/chrisroberts/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chrisroberts/subscriptions","organizations_url":"https://api.github.com/users/chrisroberts/orgs","repos_url":"https://api.github.com/users/chrisroberts/repos","events_url":"https://api.github.com/users/chrisroberts/events{/privacy}","received_events_url":"https://api.github.com/users/chrisroberts/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/hashicorp/vagrant/issues/13655/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/hashicorp/vagrant/issues/13655/timeline","performed_via_github_app":null,"state_reason":"completed"}