{"url":"https://api.github.com/repos/hashicorp/vagrant/issues/9984","repository_url":"https://api.github.com/repos/hashicorp/vagrant","labels_url":"https://api.github.com/repos/hashicorp/vagrant/issues/9984/labels{/name}","comments_url":"https://api.github.com/repos/hashicorp/vagrant/issues/9984/comments","events_url":"https://api.github.com/repos/hashicorp/vagrant/issues/9984/events","html_url":"https://github.com/hashicorp/vagrant/issues/9984","id":337911309,"node_id":"MDU6SXNzdWUzMzc5MTEzMDk=","number":9984,"title":"vagrant (2.1.2) crashes if used with WSL and hyper-v provider","user":{"login":"couchgott","id":1948953,"node_id":"MDQ6VXNlcjE5NDg5NTM=","avatar_url":"https://avatars.githubusercontent.com/u/1948953?v=4","gravatar_id":"","url":"https://api.github.com/users/couchgott","html_url":"https://github.com/couchgott","followers_url":"https://api.github.com/users/couchgott/followers","following_url":"https://api.github.com/users/couchgott/following{/other_user}","gists_url":"https://api.github.com/users/couchgott/gists{/gist_id}","starred_url":"https://api.github.com/users/couchgott/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/couchgott/subscriptions","organizations_url":"https://api.github.com/users/couchgott/orgs","repos_url":"https://api.github.com/users/couchgott/repos","events_url":"https://api.github.com/users/couchgott/events{/privacy}","received_events_url":"https://api.github.com/users/couchgott/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":218286867,"node_id":"MDU6TGFiZWwyMTgyODY4Njc=","url":"https://api.github.com/repos/hashicorp/vagrant/labels/host/windows","name":"host/windows","color":"d4c5f9","default":false,"description":null},{"id":610713628,"node_id":"MDU6TGFiZWw2MTA3MTM2Mjg=","url":"https://api.github.com/repos/hashicorp/vagrant/labels/WSL","name":"WSL","color":"666622","default":false,"description":null}],"state":"closed","locked":true,"assignee":{"login":"chrisroberts","id":266674,"node_id":"MDQ6VXNlcjI2NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/266674?v=4","gravatar_id":"","url":"https://api.github.com/users/chrisroberts","html_url":"https://github.com/chrisroberts","followers_url":"https://api.github.com/users/chrisroberts/followers","following_url":"https://api.github.com/users/chrisroberts/following{/other_user}","gists_url":"https://api.github.com/users/chrisroberts/gists{/gist_id}","starred_url":"https://api.github.com/users/chrisroberts/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chrisroberts/subscriptions","organizations_url":"https://api.github.com/users/chrisroberts/orgs","repos_url":"https://api.github.com/users/chrisroberts/repos","events_url":"https://api.github.com/users/chrisroberts/events{/privacy}","received_events_url":"https://api.github.com/users/chrisroberts/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"chrisroberts","id":266674,"node_id":"MDQ6VXNlcjI2NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/266674?v=4","gravatar_id":"","url":"https://api.github.com/users/chrisroberts","html_url":"https://github.com/chrisroberts","followers_url":"https://api.github.com/users/chrisroberts/followers","following_url":"https://api.github.com/users/chrisroberts/following{/other_user}","gists_url":"https://api.github.com/users/chrisroberts/gists{/gist_id}","starred_url":"https://api.github.com/users/chrisroberts/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chrisroberts/subscriptions","organizations_url":"https://api.github.com/users/chrisroberts/orgs","repos_url":"https://api.github.com/users/chrisroberts/repos","events_url":"https://api.github.com/users/chrisroberts/events{/privacy}","received_events_url":"https://api.github.com/users/chrisroberts/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/hashicorp/vagrant/milestones/34","html_url":"https://github.com/hashicorp/vagrant/milestone/34","labels_url":"https://api.github.com/repos/hashicorp/vagrant/milestones/34/labels","id":3318753,"node_id":"MDk6TWlsZXN0b25lMzMxODc1Mw==","number":34,"title":"2.1.3","description":"","creator":{"login":"chrisroberts","id":266674,"node_id":"MDQ6VXNlcjI2NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/266674?v=4","gravatar_id":"","url":"https://api.github.com/users/chrisroberts","html_url":"https://github.com/chrisroberts","followers_url":"https://api.github.com/users/chrisroberts/followers","following_url":"https://api.github.com/users/chrisroberts/following{/other_user}","gists_url":"https://api.github.com/users/chrisroberts/gists{/gist_id}","starred_url":"https://api.github.com/users/chrisroberts/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chrisroberts/subscriptions","organizations_url":"https://api.github.com/users/chrisroberts/orgs","repos_url":"https://api.github.com/users/chrisroberts/repos","events_url":"https://api.github.com/users/chrisroberts/events{/privacy}","received_events_url":"https://api.github.com/users/chrisroberts/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":50,"state":"closed","created_at":"2018-05-03T20:28:54Z","updated_at":"2018-08-29T21:45:11Z","due_on":null,"closed_at":"2018-08-29T21:45:11Z"},"comments":4,"created_at":"2018-07-03T13:57:09Z","updated_at":"2020-04-01T02:06:53Z","closed_at":"2018-07-18T23:37:08Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Vagrant version\r\n2.1.2\r\n\r\n### Host operating system\r\nWindows 10 (1803) / WSL (Ubuntu 16.04)\r\n\r\nconfig for WSL (besides installed vagrant)\r\n```\r\nexport VAGRANT_WSL_ENABLE_WINDOWS_ACCESS=\"1\"\r\nexport PATH=\"$HOME/bin:$HOME/.local/bin:$PATH\"\r\nexport PATH=\"$PATH:/mnt/c/Program\\ Files/Docker/Docker/resources/bin\"\r\nexport VAGRANT_DEFAULT_PROVIDER=hyperv\r\nalias docker=docker.exe\r\nalias docker-compose=docker-compose.exe\r\n```\r\n\r\n### Guest operating system\r\nany\r\n\r\n### Vagrantfile\r\n```ruby\r\nVagrant.configure(\"2\") do |config|\r\n  config.vm.box = \"centos/7\"\r\n  config.vm.provider \"hyperv\" do |h|\r\n    h.vm_integration_services = {\r\n      guest_service_interface: true,\r\n      CustomVMSRV: true\r\n    }\r\n  end  \r\nend\r\n```\r\n\r\n### Debug output\r\n```\r\nvagrant up\r\n\r\nBringing machine 'default' up with 'hyperv' provider...\r\n==> default: Verifying Hyper-V is enabled...\r\n/opt/vagrant/embedded/gems/2.1.2/gems/vagrant-2.1.2/lib/vagrant/util/platform.rb:395:in `wsl_to_windows_path': undefined method `match' for #<Pathname:0x000000000333a538> (NoMethodError)\r\n        from /opt/vagrant/embedded/gems/2.1.2/gems/vagrant-2.1.2/plugins/providers/hyperv/driver.rb:224:in `execute_powershell'\r\n        from /opt/vagrant/embedded/gems/2.1.2/gems/vagrant-2.1.2/plugins/providers/hyperv/driver.rb:47:in `execute'\r\n        from /opt/vagrant/embedded/gems/2.1.2/gems/vagrant-2.1.2/plugins/providers/hyperv/action/check_enabled.rb:15:in `call'\r\n        from /opt/vagrant/embedded/gems/2.1.2/gems/vagrant-2.1.2/lib/vagrant/action/warden.rb:34:in `call'\r\n        from /opt/vagrant/embedded/gems/2.1.2/gems/vagrant-2.1.2/lib/vagrant/action/builder.rb:116:in `call'\r\n        from /opt/vagrant/embedded/gems/2.1.2/gems/vagrant-2.1.2/lib/vagrant/action/runner.rb:66:in `block in run'\r\n        from /opt/vagrant/embedded/gems/2.1.2/gems/vagrant-2.1.2/lib/vagrant/util/busy.rb:19:in `busy'\r\n        from /opt/vagrant/embedded/gems/2.1.2/gems/vagrant-2.1.2/lib/vagrant/action/runner.rb:66:in `run'\r\n        from /opt/vagrant/embedded/gems/2.1.2/gems/vagrant-2.1.2/lib/vagrant/machine.rb:239:in `action_raw'\r\n        from /opt/vagrant/embedded/gems/2.1.2/gems/vagrant-2.1.2/lib/vagrant/machine.rb:208:in `block in action'\r\n        from /opt/vagrant/embedded/gems/2.1.2/gems/vagrant-2.1.2/lib/vagrant/environment.rb:598:in `lock'\r\n        from /opt/vagrant/embedded/gems/2.1.2/gems/vagrant-2.1.2/lib/vagrant/machine.rb:194:in `call'\r\n        from /opt/vagrant/embedded/gems/2.1.2/gems/vagrant-2.1.2/lib/vagrant/machine.rb:194:in `action'\r\n        from /opt/vagrant/embedded/gems/2.1.2/gems/vagrant-2.1.2/lib/vagrant/batch_action.rb:82:in `block (2 levels) in run'\r\n```\r\n\r\n### Expected behavior\r\nbringing up the guest\r\n\r\n### Actual behavior\r\nsee above. i just receive that error message\r\n\r\n### Steps to reproduce\r\n1. Install latest vagrant \r\n2. enable hyper-V as default provider (or use --provider=hyperv)\r\n3. add user to hyper-v administrator group at Host OS\r\n3. change into folder with vagrant file and try a vagrant up\r\n","closed_by":{"login":"chrisroberts","id":266674,"node_id":"MDQ6VXNlcjI2NjY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/266674?v=4","gravatar_id":"","url":"https://api.github.com/users/chrisroberts","html_url":"https://github.com/chrisroberts","followers_url":"https://api.github.com/users/chrisroberts/followers","following_url":"https://api.github.com/users/chrisroberts/following{/other_user}","gists_url":"https://api.github.com/users/chrisroberts/gists{/gist_id}","starred_url":"https://api.github.com/users/chrisroberts/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chrisroberts/subscriptions","organizations_url":"https://api.github.com/users/chrisroberts/orgs","repos_url":"https://api.github.com/users/chrisroberts/repos","events_url":"https://api.github.com/users/chrisroberts/events{/privacy}","received_events_url":"https://api.github.com/users/chrisroberts/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/hashicorp/vagrant/issues/9984/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/hashicorp/vagrant/issues/9984/timeline","performed_via_github_app":null,"state_reason":"completed"}