{"url":"https://api.github.com/repos/hashicorp/vagrant/issues/5377","repository_url":"https://api.github.com/repos/hashicorp/vagrant","labels_url":"https://api.github.com/repos/hashicorp/vagrant/issues/5377/labels{/name}","comments_url":"https://api.github.com/repos/hashicorp/vagrant/issues/5377/comments","events_url":"https://api.github.com/repos/hashicorp/vagrant/issues/5377/events","html_url":"https://github.com/hashicorp/vagrant/issues/5377","id":58531302,"node_id":"MDU6SXNzdWU1ODUzMTMwMg==","number":5377,"title":"Vagrant Mounting Fails: Unable to Connect To Upstart on Box Using Systemd","user":{"login":"Geraden07","id":5994067,"node_id":"MDQ6VXNlcjU5OTQwNjc=","avatar_url":"https://avatars.githubusercontent.com/u/5994067?v=4","gravatar_id":"","url":"https://api.github.com/users/Geraden07","html_url":"https://github.com/Geraden07","followers_url":"https://api.github.com/users/Geraden07/followers","following_url":"https://api.github.com/users/Geraden07/following{/other_user}","gists_url":"https://api.github.com/users/Geraden07/gists{/gist_id}","starred_url":"https://api.github.com/users/Geraden07/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Geraden07/subscriptions","organizations_url":"https://api.github.com/users/Geraden07/orgs","repos_url":"https://api.github.com/users/Geraden07/repos","events_url":"https://api.github.com/users/Geraden07/events{/privacy}","received_events_url":"https://api.github.com/users/Geraden07/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":25816,"node_id":"MDU6TGFiZWwyNTgxNg==","url":"https://api.github.com/repos/hashicorp/vagrant/labels/bug","name":"bug","color":"e11d21","default":true,"description":null},{"id":157557761,"node_id":"MDU6TGFiZWwxNTc1NTc3NjE=","url":"https://api.github.com/repos/hashicorp/vagrant/labels/guest/debian","name":"guest/debian","color":"5319e7","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2015-02-23T00:41:31Z","updated_at":"2020-04-07T02:13:42Z","closed_at":"2015-07-07T06:32:01Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"I am working with an Ubuntu 14.10 box. Initially it will boot fine, no errors whatsoever.\n\nIf I install systemd and change grub to use systemd instead of upstart, then what happens is the box boots normally right up until it hits the first mount (/vagrant). Then it fails due to a non-0 command return and does not attempt any further mounts that may have been configured, nor any provisioning.\n\nHowever the box is booted just fine and can be SSH'd into with no issues. Even the /vagrant mount shows up from within the VM just fine.\n\nDoing a 'vagrant up --debug' command, I see the following at the end:\n\n```\nc:/HashiCorp/Vagrant/embedded/gems/gems/vagrant-1.7.2/lib/vagrant/batch_action.rb:82:in block (2 levels) in run'\n INFO interface: error: The following SSH command responded with a non-zero exit status.\nVagrant assumes that this means the command failed!\n\n/sbin/initctl emit --no-wait vagrant-mounted MOUNTPOINT=/vagrant\n\nStdout from the command:\n\n\n\nStderr from the command:\n\nstdin: is not a tty\ninitctl: Unable to connect to Upstart: Failed to connect to socket /com/ubuntu/upstart: Connection refused\n\nThe following SSH command responded with a non-zero exit status.\nVagrant assumes that this means the command failed!\n\n/sbin/initctl emit --no-wait vagrant-mounted MOUNTPOINT=/vagrant\n\nStdout from the command:\n\n\n\nStderr from the command:\n\nstdin: is not a tty\ninitctl: Unable to connect to Upstart: Failed to connect to socket /com/ubuntu/upstart: Connection refused\n\n INFO interface: Machine: error-exit [\"Vagrant::Errors::VagrantError\", \"The following SSH command responded with a non-zero exit status.\\nVagrant assumes that t\nhis means the command failed!\\n\\n/sbin/initctl emit --no-wait vagrant-mounted MOUNTPOINT=/vagrant\\n\\nStdout from the command:\\n\\n\\n\\nStderr from the command:\\n\\\nnstdin: is not a tty\\ninitctl: Unable to connect to Upstart: Failed to connect to socket /com/ubuntu/upstart: Connection refused\\n\"]\n```\n\nVagrant doesn't seem to know to use systemd and not upstart. I know obviously vagrant CAN use systemd just fine because I've got other centos boxes which use it by default and they work just fine.\n","closed_by":{"login":"mitchellh","id":1299,"node_id":"MDQ6VXNlcjEyOTk=","avatar_url":"https://avatars.githubusercontent.com/u/1299?v=4","gravatar_id":"","url":"https://api.github.com/users/mitchellh","html_url":"https://github.com/mitchellh","followers_url":"https://api.github.com/users/mitchellh/followers","following_url":"https://api.github.com/users/mitchellh/following{/other_user}","gists_url":"https://api.github.com/users/mitchellh/gists{/gist_id}","starred_url":"https://api.github.com/users/mitchellh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mitchellh/subscriptions","organizations_url":"https://api.github.com/users/mitchellh/orgs","repos_url":"https://api.github.com/users/mitchellh/repos","events_url":"https://api.github.com/users/mitchellh/events{/privacy}","received_events_url":"https://api.github.com/users/mitchellh/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/hashicorp/vagrant/issues/5377/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/hashicorp/vagrant/issues/5377/timeline","performed_via_github_app":null,"state_reason":"completed"}