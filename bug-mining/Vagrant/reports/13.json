{"url":"https://api.github.com/repos/hashicorp/vagrant/issues/4658","repository_url":"https://api.github.com/repos/hashicorp/vagrant","labels_url":"https://api.github.com/repos/hashicorp/vagrant/issues/4658/labels{/name}","comments_url":"https://api.github.com/repos/hashicorp/vagrant/issues/4658/comments","events_url":"https://api.github.com/repos/hashicorp/vagrant/issues/4658/events","html_url":"https://github.com/hashicorp/vagrant/issues/4658","id":46124007,"node_id":"MDU6SXNzdWU0NjEyNDAwNw==","number":4658,"title":"Incorrect NFS exports file generated when using private network and DHCP","user":{"login":"jramnani","id":68455,"node_id":"MDQ6VXNlcjY4NDU1","avatar_url":"https://avatars.githubusercontent.com/u/68455?v=4","gravatar_id":"","url":"https://api.github.com/users/jramnani","html_url":"https://github.com/jramnani","followers_url":"https://api.github.com/users/jramnani/followers","following_url":"https://api.github.com/users/jramnani/following{/other_user}","gists_url":"https://api.github.com/users/jramnani/gists{/gist_id}","starred_url":"https://api.github.com/users/jramnani/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jramnani/subscriptions","organizations_url":"https://api.github.com/users/jramnani/orgs","repos_url":"https://api.github.com/users/jramnani/repos","events_url":"https://api.github.com/users/jramnani/events{/privacy}","received_events_url":"https://api.github.com/users/jramnani/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":25816,"node_id":"MDU6TGFiZWwyNTgxNg==","url":"https://api.github.com/repos/hashicorp/vagrant/labels/bug","name":"bug","color":"e11d21","default":true,"description":null},{"id":139180357,"node_id":"MDU6TGFiZWwxMzkxODAzNTc=","url":"https://api.github.com/repos/hashicorp/vagrant/labels/guest/freebsd","name":"guest/freebsd","color":"5319e7","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2014-10-17T17:33:22Z","updated_at":"2020-04-09T02:34:38Z","closed_at":"2014-10-23T16:12:04Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"If you use a private network with DHCP, Vagrant will generate an incorrect /etc/exports file on BSD and OS X hosts.\n\nGiven a host running OS X or BSD, using VirtualBox as the provider, and a Vagrantfile that looks like this:\n\n```\n# -*- mode: ruby; -*-\nVagrant.configure(\"2\") do |config|\n  config.vm.box = \"chef/freebsd-10.0\"\n  config.vm.network \"private_network\", type: \"dhcp\"\n  config.vm.synced_folder \".\", \"/vagrant\", type: \"nfs\"\nend\n```\n\nVagrant generates an /etc/exports file that looks like this:\n\n```\n\"/Users/username/tmp/freebsd10\" 0.0.0.0 -alldirs -mapall=500:10\n```\n\nThen the NFS synced folders do not mount in the guest, and you see nfsd errors in the host's syslog.  The command 'vagrant up' usually hangs while waiting for the NFS mount command in the guest.\n\nHere is the nfsd error on FreeBSD 10:\n\n```\nOct 17 15:53:09 packer-freebsd-10 mountd[1440]: bad exports list line /home/username/tmp/freebsd10 0.0.0.0 -alldirs -maproot\nOct 17 15:53:33 packer-freebsd-10 mountd[1479]: can't change attributes for /home/username/tmp/freebsd10: Invalid radix node head, rn: 0 0xfffff80002cec5000\n```\n\nHere is the nfsd error on OS X Mavericks 10.9.5:\n\n```\n10/17/14 10:05:56.199 AM sudo[20794]: username : TTY=ttys003 ; PWD=/Users/username/tmp/freebsd10 ; USER=root ; COMMAND=/sbin/nfsd restart\n10/17/14 10:05:56.223 AM nfsd[20800]: Can't change attributes for /Users/username/tmp/freebsd10.  See 'exports' man page.\n```\n\nI am able to fix the problem by changing the /etc/exports file to remove the IP address, 0.0.0.0.\n\n```\n\"/Users/username/tmp/freebsd10\" -alldirs -mapall=500:10\n```\n\nI can also fix the problem by assigning an IP address to the private network interface in the Vagrantfile.\n\nVagrant version: 1.6.5\nVirtualBox version: 4.3.6r91406\nHost OS version: OS X Mavericks 10.9.5\n","closed_by":{"login":"mitchellh","id":1299,"node_id":"MDQ6VXNlcjEyOTk=","avatar_url":"https://avatars.githubusercontent.com/u/1299?v=4","gravatar_id":"","url":"https://api.github.com/users/mitchellh","html_url":"https://github.com/mitchellh","followers_url":"https://api.github.com/users/mitchellh/followers","following_url":"https://api.github.com/users/mitchellh/following{/other_user}","gists_url":"https://api.github.com/users/mitchellh/gists{/gist_id}","starred_url":"https://api.github.com/users/mitchellh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mitchellh/subscriptions","organizations_url":"https://api.github.com/users/mitchellh/orgs","repos_url":"https://api.github.com/users/mitchellh/repos","events_url":"https://api.github.com/users/mitchellh/events{/privacy}","received_events_url":"https://api.github.com/users/mitchellh/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/hashicorp/vagrant/issues/4658/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/hashicorp/vagrant/issues/4658/timeline","performed_via_github_app":null,"state_reason":"completed"}