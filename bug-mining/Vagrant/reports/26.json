{"url":"https://api.github.com/repos/hashicorp/vagrant/issues/5531","repository_url":"https://api.github.com/repos/hashicorp/vagrant","labels_url":"https://api.github.com/repos/hashicorp/vagrant/issues/5531/labels{/name}","comments_url":"https://api.github.com/repos/hashicorp/vagrant/issues/5531/comments","events_url":"https://api.github.com/repos/hashicorp/vagrant/issues/5531/events","html_url":"https://github.com/hashicorp/vagrant/issues/5531","id":65003900,"node_id":"MDU6SXNzdWU2NTAwMzkwMA==","number":5531,"title":"Vagrant doesn't propagate `--no-color` option to ansisble provisioner","user":{"login":"marsam","id":65531,"node_id":"MDQ6VXNlcjY1NTMx","avatar_url":"https://avatars.githubusercontent.com/u/65531?v=4","gravatar_id":"","url":"https://api.github.com/users/marsam","html_url":"https://github.com/marsam","followers_url":"https://api.github.com/users/marsam/followers","following_url":"https://api.github.com/users/marsam/following{/other_user}","gists_url":"https://api.github.com/users/marsam/gists{/gist_id}","starred_url":"https://api.github.com/users/marsam/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/marsam/subscriptions","organizations_url":"https://api.github.com/users/marsam/orgs","repos_url":"https://api.github.com/users/marsam/repos","events_url":"https://api.github.com/users/marsam/events{/privacy}","received_events_url":"https://api.github.com/users/marsam/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":25816,"node_id":"MDU6TGFiZWwyNTgxNg==","url":"https://api.github.com/repos/hashicorp/vagrant/labels/bug","name":"bug","color":"e11d21","default":true,"description":null},{"id":78407309,"node_id":"MDU6TGFiZWw3ODQwNzMwOQ==","url":"https://api.github.com/repos/hashicorp/vagrant/labels/provisioner/ansible","name":"provisioner/ansible","color":"bfdadc","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2015-03-28T23:59:42Z","updated_at":"2020-04-08T02:05:02Z","closed_at":"2015-06-01T03:34:21Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"## Steps to reproduce\n1. Create a a Vagrantfile with ansible provisioner:\n\n``` ruby\n# Vagrantfile\nVagrant.configure(\"2\") do |config|\n  config.vm.box = \"ubuntu/trusty64\"\n  config.vm.provision \"ansible\" do |ansible|\n    ansible.playbook = \"playbook.yml\"\n  end\nend\n```\n\n``` yaml\n# playbook.yml\n- hosts: default\n  gather_facts: no\n  tasks:\n    - command: uname -a\n```\n1. Provision with `--no-color` option:\n\n![](http://i.imgur.com/f997JDS.png)\n\nThis error occur because `ANSIBLE_FORCE_COLOR=true` is [harcoded](https://github.com/mitchellh/vagrant/blob/8b8f2b26a6e736e4d77c49c7686c9f0a1a0c2eb2/plugins/provisioners/ansible/provisioner.rb#L71) in the provisioner\n","closed_by":{"login":"sethvargo","id":408570,"node_id":"MDQ6VXNlcjQwODU3MA==","avatar_url":"https://avatars.githubusercontent.com/u/408570?v=4","gravatar_id":"","url":"https://api.github.com/users/sethvargo","html_url":"https://github.com/sethvargo","followers_url":"https://api.github.com/users/sethvargo/followers","following_url":"https://api.github.com/users/sethvargo/following{/other_user}","gists_url":"https://api.github.com/users/sethvargo/gists{/gist_id}","starred_url":"https://api.github.com/users/sethvargo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sethvargo/subscriptions","organizations_url":"https://api.github.com/users/sethvargo/orgs","repos_url":"https://api.github.com/users/sethvargo/repos","events_url":"https://api.github.com/users/sethvargo/events{/privacy}","received_events_url":"https://api.github.com/users/sethvargo/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/hashicorp/vagrant/issues/5531/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/hashicorp/vagrant/issues/5531/timeline","performed_via_github_app":null,"state_reason":"completed"}