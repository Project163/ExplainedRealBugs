{"url":"https://api.github.com/repos/hashicorp/vagrant/issues/10170","repository_url":"https://api.github.com/repos/hashicorp/vagrant","labels_url":"https://api.github.com/repos/hashicorp/vagrant/issues/10170/labels{/name}","comments_url":"https://api.github.com/repos/hashicorp/vagrant/issues/10170/comments","events_url":"https://api.github.com/repos/hashicorp/vagrant/issues/10170/events","html_url":"https://github.com/hashicorp/vagrant/issues/10170","id":356602058,"node_id":"MDU6SXNzdWUzNTY2MDIwNTg=","number":10170,"title":"\"modinfo\" not found in $PATH","user":{"login":"deogracia","id":553342,"node_id":"MDQ6VXNlcjU1MzM0Mg==","avatar_url":"https://avatars.githubusercontent.com/u/553342?v=4","gravatar_id":"","url":"https://api.github.com/users/deogracia","html_url":"https://github.com/deogracia","followers_url":"https://api.github.com/users/deogracia/followers","following_url":"https://api.github.com/users/deogracia/following{/other_user}","gists_url":"https://api.github.com/users/deogracia/gists{/gist_id}","starred_url":"https://api.github.com/users/deogracia/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/deogracia/subscriptions","organizations_url":"https://api.github.com/users/deogracia/orgs","repos_url":"https://api.github.com/users/deogracia/repos","events_url":"https://api.github.com/users/deogracia/events{/privacy}","received_events_url":"https://api.github.com/users/deogracia/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":54082731,"node_id":"MDU6TGFiZWw1NDA4MjczMQ==","url":"https://api.github.com/repos/hashicorp/vagrant/labels/enhancement","name":"enhancement","color":"207de5","default":true,"description":null},{"id":140956646,"node_id":"MDU6TGFiZWwxNDA5NTY2NDY=","url":"https://api.github.com/repos/hashicorp/vagrant/labels/host/linux","name":"host/linux","color":"d4c5f9","default":false,"description":null}],"state":"closed","locked":true,"assignee":{"login":"jbonhag","id":6937257,"node_id":"MDQ6VXNlcjY5MzcyNTc=","avatar_url":"https://avatars.githubusercontent.com/u/6937257?v=4","gravatar_id":"","url":"https://api.github.com/users/jbonhag","html_url":"https://github.com/jbonhag","followers_url":"https://api.github.com/users/jbonhag/followers","following_url":"https://api.github.com/users/jbonhag/following{/other_user}","gists_url":"https://api.github.com/users/jbonhag/gists{/gist_id}","starred_url":"https://api.github.com/users/jbonhag/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jbonhag/subscriptions","organizations_url":"https://api.github.com/users/jbonhag/orgs","repos_url":"https://api.github.com/users/jbonhag/repos","events_url":"https://api.github.com/users/jbonhag/events{/privacy}","received_events_url":"https://api.github.com/users/jbonhag/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"jbonhag","id":6937257,"node_id":"MDQ6VXNlcjY5MzcyNTc=","avatar_url":"https://avatars.githubusercontent.com/u/6937257?v=4","gravatar_id":"","url":"https://api.github.com/users/jbonhag","html_url":"https://github.com/jbonhag","followers_url":"https://api.github.com/users/jbonhag/followers","following_url":"https://api.github.com/users/jbonhag/following{/other_user}","gists_url":"https://api.github.com/users/jbonhag/gists{/gist_id}","starred_url":"https://api.github.com/users/jbonhag/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jbonhag/subscriptions","organizations_url":"https://api.github.com/users/jbonhag/orgs","repos_url":"https://api.github.com/users/jbonhag/repos","events_url":"https://api.github.com/users/jbonhag/events{/privacy}","received_events_url":"https://api.github.com/users/jbonhag/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/hashicorp/vagrant/milestones/44","html_url":"https://github.com/hashicorp/vagrant/milestone/44","labels_url":"https://api.github.com/repos/hashicorp/vagrant/milestones/44/labels","id":4482321,"node_id":"MDk6TWlsZXN0b25lNDQ4MjMyMQ==","number":44,"title":"2.2.7","description":"","creator":{"login":"briancain","id":810277,"node_id":"MDQ6VXNlcjgxMDI3Nw==","avatar_url":"https://avatars.githubusercontent.com/u/810277?v=4","gravatar_id":"","url":"https://api.github.com/users/briancain","html_url":"https://github.com/briancain","followers_url":"https://api.github.com/users/briancain/followers","following_url":"https://api.github.com/users/briancain/following{/other_user}","gists_url":"https://api.github.com/users/briancain/gists{/gist_id}","starred_url":"https://api.github.com/users/briancain/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/briancain/subscriptions","organizations_url":"https://api.github.com/users/briancain/orgs","repos_url":"https://api.github.com/users/briancain/repos","events_url":"https://api.github.com/users/briancain/events{/privacy}","received_events_url":"https://api.github.com/users/briancain/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":44,"state":"closed","created_at":"2019-07-10T21:40:07Z","updated_at":"2020-01-30T19:14:57Z","due_on":null,"closed_at":"2020-01-30T19:14:57Z"},"comments":5,"created_at":"2018-09-03T21:31:51Z","updated_at":"2020-01-28T02:08:04Z","closed_at":"2019-11-06T21:10:32Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Vagrant version\r\nVagrant 2.1.4\r\n\r\n### Host operating system\r\n* lsb_release -a\r\n```\r\nNo LSB modules are available.\r\nDistributor ID:\tDevuan\r\nDescription:\tDevuan GNU/Linux 2.0 (ascii)\r\nRelease:\t2.0\r\nCodename:\tascii\r\n``` \r\n* cat /etc/debian_version\r\n```\r\n9\r\n```\r\n\r\n### Guest operating system\r\nDebian 9\r\n\r\n### Vagrantfile\r\n```ruby\r\nVagrant.configure(\"2\") do |config|\r\n  config.vm.box = \"debian/stretch64\"\r\n\r\n  config.vm.network \"private_network\", ip: \"192.168.63.10\"\r\n\r\n  config.vm.synced_folder \"/<REDACTED>/national\", \"/home/vagrant/national\", type: \"nfs\"\r\n\r\n  config.vm.provider \"virtualbox\" do |vb|\r\n\r\n    vb.name = \"Debian 9 multiusage\"\r\n  end\r\n\r\n  config.vm.provision \"shell\", inline: <<-SHELL\r\n    rm /var/lib/apt/lists/* -rf\r\n    apt-get update\r\n    apt-get upgrade -y\r\n    apt-get install -y vim htop curl wget\r\n  SHELL\r\nend\r\n```\r\n\r\n\r\n\r\n### Debug output\r\nhttps://gist.github.com/deogracia/0b99a3b4b8d06d7218de0fe47c40e531\r\n\r\n### Expected behavior\r\n* NFS should be configured\r\n* VM should be up\r\n\r\n### Actual behavior\r\n* vagrant up ends with an error message\r\n* VM is down\r\n\r\n### Steps to reproduce\r\n1. Use devuan\r\n2. Install Oracle VirtualBox from Oracle website\r\n3. Install vagrant from vagrantup website\r\n4. Use a minimal Vagrantfile with a NFS shared directory\r\n\r\n### References\r\n- GH-6304 : add use of modinfo with nfs capapbility\r\n\r\n### How I see this issue\r\n\r\n* modinfo lies in /sbin \r\n* /sbin is in $PATH only for root\r\n* Given the full path (/sbin/modinfo) of modinfo in plugins/hosts/linux/cap/nfs.rb: everything works fine\r\n```\r\nVagrant is currently configured to create VirtualBox synced folders with\r\nthe `SharedFoldersEnableSymlinksCreate` option enabled. If the Vagrant\r\nguest is not trusted, you may want to disable this option. For more\r\ninformation on this option, please refer to the VirtualBox manual:\r\n\r\n  https://www.virtualbox.org/manual/ch04.html#sharedfolders\r\n\r\nThis option can be disabled globally with an environment variable:\r\n\r\n  VAGRANT_DISABLE_VBOXSYMLINKCREATE=1\r\n\r\nor on a per folder basis within the Vagrantfile:\r\n\r\n  config.vm.synced_folder '/host/path', '/guest/path', SharedFoldersEnableSymlinksCreate: false\r\n==> default: Clearing any previously set network interfaces...\r\n==> default: Preparing network interfaces based on configuration...\r\n    default: Adapter 1: nat\r\n    default: Adapter 2: hostonly\r\n==> default: Forwarding ports...\r\n    default: 22 (guest) => 2222 (host) (adapter 1)\r\n==> default: Booting VM...\r\n==> default: Waiting for machine to boot. This may take a few minutes...\r\n    default: SSH address: 127.0.0.1:2222\r\n    default: SSH username: vagrant\r\n    default: SSH auth method: private key\r\n==> default: Machine booted and ready!\r\n==> default: Checking for guest additions in VM...\r\n==> default: Configuring and enabling network interfaces...\r\n==> default: Exporting NFS shared folders...\r\n==> default: Preparing to edit /etc/exports. Administrator privileges will be required...\r\n==> default: Mounting NFS shared folders...\r\n==> default: Mounting shared folders...\r\n    default: /vagrant => /<REDACTED>/debian9\r\n==> default: Machine already provisioned. Run `vagrant provision` or use the `--provision`\r\n==> default: flag to force provisioning. Provisioners marked to run always will still run.\r\n```\r\n * The warning about SharedFoldersEnableSymlinksCreate is new and didn't occur with vagrant 2.1.2 on chakralinux ( old and different OS crashed last week-end, but I got safe elsewhere)\r\n\r\nThanks for your awesome work everyone :D","closed_by":{"login":"jbonhag","id":6937257,"node_id":"MDQ6VXNlcjY5MzcyNTc=","avatar_url":"https://avatars.githubusercontent.com/u/6937257?v=4","gravatar_id":"","url":"https://api.github.com/users/jbonhag","html_url":"https://github.com/jbonhag","followers_url":"https://api.github.com/users/jbonhag/followers","following_url":"https://api.github.com/users/jbonhag/following{/other_user}","gists_url":"https://api.github.com/users/jbonhag/gists{/gist_id}","starred_url":"https://api.github.com/users/jbonhag/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jbonhag/subscriptions","organizations_url":"https://api.github.com/users/jbonhag/orgs","repos_url":"https://api.github.com/users/jbonhag/repos","events_url":"https://api.github.com/users/jbonhag/events{/privacy}","received_events_url":"https://api.github.com/users/jbonhag/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/hashicorp/vagrant/issues/10170/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/hashicorp/vagrant/issues/10170/timeline","performed_via_github_app":null,"state_reason":"completed"}