{"url":"https://api.github.com/repos/hashicorp/vagrant/issues/11932","repository_url":"https://api.github.com/repos/hashicorp/vagrant","labels_url":"https://api.github.com/repos/hashicorp/vagrant/issues/11932/labels{/name}","comments_url":"https://api.github.com/repos/hashicorp/vagrant/issues/11932/comments","events_url":"https://api.github.com/repos/hashicorp/vagrant/issues/11932/events","html_url":"https://github.com/hashicorp/vagrant/issues/11932","id":712616953,"node_id":"MDU6SXNzdWU3MTI2MTY5NTM=","number":11932,"title":"Vagrant is unable to execute Get-WindowsOptionalFeature Command","user":{"login":"lyderX05","id":69924216,"node_id":"MDQ6VXNlcjY5OTI0MjE2","avatar_url":"https://avatars.githubusercontent.com/u/69924216?v=4","gravatar_id":"","url":"https://api.github.com/users/lyderX05","html_url":"https://github.com/lyderX05","followers_url":"https://api.github.com/users/lyderX05/followers","following_url":"https://api.github.com/users/lyderX05/following{/other_user}","gists_url":"https://api.github.com/users/lyderX05/gists{/gist_id}","starred_url":"https://api.github.com/users/lyderX05/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lyderX05/subscriptions","organizations_url":"https://api.github.com/users/lyderX05/orgs","repos_url":"https://api.github.com/users/lyderX05/repos","events_url":"https://api.github.com/users/lyderX05/events{/privacy}","received_events_url":"https://api.github.com/users/lyderX05/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":140639873,"node_id":"MDU6TGFiZWwxNDA2Mzk4NzM=","url":"https://api.github.com/repos/hashicorp/vagrant/labels/provider/hyperv","name":"provider/hyperv","color":"bfe5bf","default":false,"description":null},{"id":218286867,"node_id":"MDU6TGFiZWwyMTgyODY4Njc=","url":"https://api.github.com/repos/hashicorp/vagrant/labels/host/windows","name":"host/windows","color":"d4c5f9","default":false,"description":null},{"id":283683436,"node_id":"MDU6TGFiZWwyODM2ODM0MzY=","url":"https://api.github.com/repos/hashicorp/vagrant/labels/has-pr","name":"has-pr","color":"fef2c0","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2020-10-01T08:23:55Z","updated_at":"2023-03-24T02:11:50Z","closed_at":"2023-02-22T01:14:05Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":"resolved","sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Vagrant version\r\n\r\nVagrant 2.2.9\r\n\r\n### Host operating system\r\n\r\nWindows\r\n\r\n### Guest operating system\r\n\r\nUbuntu/bionic 18.04\r\n\r\n### Vagrantfile\r\n\r\n```ruby\r\n\r\nVagrant.configure(\"2\") do |config|\r\n \r\n  config.vm.box = \"ubuntu/bionic64\"\r\n  config.vm.hostname = \"ubuntubase\"\r\n\r\n  config.vm.box_check_update = false\r\n\r\n  \r\n\r\n  config.vm.network \"forwarded_port\", guest: 80, host: 8050\r\n\r\n  config.vm.network \"private_network\", ip: \"192.168.33.10\"\r\n\r\n \r\n  config.vm.synced_folder \"./data\", \"/vagrant_data\"\r\n\r\n\r\n  config.vm.provider \"virtualbox\" do |vb|\r\n  #   # Display the VirtualBox GUI when booting the machine\r\n    vb.gui = false\r\n  #\r\n  #   # Customize the amount of memory on the VM:\r\n    vb.memory = \"5000\"\r\n    vb.cpus = 2\r\n  end\r\n\r\n  config.vm.provision \"shell\", inline: <<-SHELL\r\n    apt-get update\r\n    apt-get install -y apt-transport-https ca-certificates curl gnupg-agent software-properties-common\r\n    curl -fsSL https://download.docker.com/linux/ubuntu/gpg | apt-key add -\r\n    apt-key fingerprint 0EBFCD88\r\n    add-apt-repository \"deb [arch=amd64] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable\"\r\n    apt-get update\r\n    apt-get install -y docker-ce docker-ce-cli containerd.io\r\n  SHELL\r\nend\r\n\r\n```\r\n\r\nPlease ensure the Vagrantfile provided is a minimal Vagrantfile which contains\r\nonly the required configuration to reproduce the behavior. Please note that if\r\nyour Vagrantfile contains an excess of configuration unrelated the the reported\r\nissue, or is in a different format, we may be unable to assist with your issue.\r\nAlways start with a minimal Vagrantfile and include only the relevant configuration\r\nto reproduce the reported behavior.\r\n\r\n### Debug output\r\n\r\nhttps://gist.github.com/lyderX05/bb8e27c169916db5dece818fcbe1c963\r\n\r\n### Expected behavior\r\n\r\nDuring Debug it should resolve the get windows Microsoft hyper-v information.\r\n\r\n### Actual behavior\r\n\r\nUnable to get the details and showing below error:\r\n```powershell\r\n INFO subprocess: Starting process: [\"C:\\\\Windows\\\\System32\\\\WindowsPowerShell\\\\v1.0\\\\/powershell.EXE\", \"-NoLogo\", \"-NoProfile\", \"-NonInteractive\", \"-ExecutionPolicy\", \r\n\"Bypass\", \"-Command\", \"$(Get-WindowsOptionalFeature -FeatureName Microsoft-Hyper-V-Hypervisor).State\"]\r\n\r\n INFO subprocess: Command not in installer, restoring original environment...\r\n\r\nDEBUG subprocess: Selecting on IO\r\n\r\nDEBUG subprocess: stderr: Get-WindowsOptionalFeature : Parameter set cannot be resolved using the specified named parameters.\r\nAt line:1 char:3\r\n+ $(Get-WindowsOptionalFeature -FeatureName Microsoft-Hyper-V-Hyperviso ...\r\n+   ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\r\n    + CategoryInfo          : InvalidArgument: (:) [Get-WindowsOptionalFeature], ParameterBindingException\r\n    + FullyQualifiedErrorId : AmbiguousParameterSet,Microsoft.Dism.Commands.GetWindowsOptionalFeatureCommand\r\n \r\n\r\nDEBUG subprocess: Waiting for process to exit. Remaining to timeout: 31999\r\n\r\nDEBUG subprocess: Exit status: 0\r\n\r\n INFO subprocess: Starting process: [\"C:\\\\Windows\\\\System32\\\\WindowsPowerShell\\\\v1.0\\\\/powershell.EXE\", \"-NoLogo\", \"-NoProfile\", \"-NonInteractive\", \"-ExecutionPolicy\", \r\n\"Bypass\", \"-Command\", \"$(Get-WindowsFeature -FeatureName Microsoft-Hyper-V-Hypervisor).State\"]\r\n\r\n INFO subprocess: Command not in installer, restoring original environment...\r\n\r\nDEBUG subprocess: Selecting on IO\r\n\r\nDEBUG subprocess: stderr: Get-WindowsFeature : The term 'Get-WindowsFeature' is not recognized as the name of a cmdlet, function, script file, or operable program. Check \r\nthe spelling of the name, \r\nor if a path was included, verify that the path is correct and try again.\r\nAt line:1 char:3\r\n+ $(Get-WindowsFeature -FeatureName Microsoft-Hyper-V-Hypervisor).State\r\n+   ~~~~~~~~~~~~~~~~~~\r\n    + CategoryInfo          : ObjectNotFound: (Get-WindowsFeature:String) [], CommandNotFoundException\r\n    + FullyQualifiedErrorId : CommandNotFoundException\r\n```\r\n### Steps to reproduce\r\n\r\n1. Install vagrant on windows OS\r\n2. Run any vagrantfile, configure with basic configuration\r\n3. Debug the output you will see the result.","closed_by":{"login":"soapy1","id":976973,"node_id":"MDQ6VXNlcjk3Njk3Mw==","avatar_url":"https://avatars.githubusercontent.com/u/976973?v=4","gravatar_id":"","url":"https://api.github.com/users/soapy1","html_url":"https://github.com/soapy1","followers_url":"https://api.github.com/users/soapy1/followers","following_url":"https://api.github.com/users/soapy1/following{/other_user}","gists_url":"https://api.github.com/users/soapy1/gists{/gist_id}","starred_url":"https://api.github.com/users/soapy1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/soapy1/subscriptions","organizations_url":"https://api.github.com/users/soapy1/orgs","repos_url":"https://api.github.com/users/soapy1/repos","events_url":"https://api.github.com/users/soapy1/events{/privacy}","received_events_url":"https://api.github.com/users/soapy1/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/hashicorp/vagrant/issues/11932/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/hashicorp/vagrant/issues/11932/timeline","performed_via_github_app":null,"state_reason":"completed"}