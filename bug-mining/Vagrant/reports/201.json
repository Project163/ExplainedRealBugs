{"url":"https://api.github.com/repos/hashicorp/vagrant/issues/11287","repository_url":"https://api.github.com/repos/hashicorp/vagrant","labels_url":"https://api.github.com/repos/hashicorp/vagrant/issues/11287/labels{/name}","comments_url":"https://api.github.com/repos/hashicorp/vagrant/issues/11287/comments","events_url":"https://api.github.com/repos/hashicorp/vagrant/issues/11287/events","html_url":"https://github.com/hashicorp/vagrant/issues/11287","id":543292106,"node_id":"MDU6SXNzdWU1NDMyOTIxMDY=","number":11287,"title":"vagrant provision --provision-with name only accepts types, not names","user":{"login":"anon8675309","id":4683783,"node_id":"MDQ6VXNlcjQ2ODM3ODM=","avatar_url":"https://avatars.githubusercontent.com/u/4683783?v=4","gravatar_id":"","url":"https://api.github.com/users/anon8675309","html_url":"https://github.com/anon8675309","followers_url":"https://api.github.com/users/anon8675309/followers","following_url":"https://api.github.com/users/anon8675309/following{/other_user}","gists_url":"https://api.github.com/users/anon8675309/gists{/gist_id}","starred_url":"https://api.github.com/users/anon8675309/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/anon8675309/subscriptions","organizations_url":"https://api.github.com/users/anon8675309/orgs","repos_url":"https://api.github.com/users/anon8675309/repos","events_url":"https://api.github.com/users/anon8675309/events{/privacy}","received_events_url":"https://api.github.com/users/anon8675309/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":27205,"node_id":"MDU6TGFiZWwyNzIwNQ==","url":"https://api.github.com/repos/hashicorp/vagrant/labels/documentation","name":"documentation","color":"fef2c0","default":true,"description":null},{"id":867284247,"node_id":"MDU6TGFiZWw4NjcyODQyNDc=","url":"https://api.github.com/repos/hashicorp/vagrant/labels/task-small","name":"task-small","color":"d8dd3b","default":false,"description":""}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2019-12-28T23:20:56Z","updated_at":"2020-04-01T01:51:32Z","closed_at":"2020-01-07T17:18:27Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Vagrant version\r\nVagrant 2.2.6\r\n\r\n### Host operating system\r\nUbuntu 18.04 x64\r\n\r\n### Guest operating system\r\nUbuntu 18.04 x64\r\n\r\n### Vagrantfile\r\nAny Vagrantfile \r\n```ruby\r\nVagrant.configure(\"2\") do |config|\r\n  config.vm.box = \"generic/ubuntu1804\"\r\n  #config.vm.provision \"shell\", path: \"test.sh\", name: \"test.sh\"\r\nend\r\n```\r\n\r\n### Debug output\r\nhttps://gist.github.com/anon8675309/028b034f30726e4bdae89f5a141a2999\r\n\r\nThe punchline is just this:\r\n```\r\n$ # Attempt to provision by name\r\n$ vagrant provision --provision-with \"test.sh\"\r\n$ # Attempt to provision by type\r\n$ vagrant provision --provision-with \"shell\"\r\n==> default: Running provisioner: shell...\r\n    default: Running: script: test.sh\r\n$ # Confirm that the help text shows that --provision-with takes either type or name as an argument\r\n$ vagrant provision -h\r\nUsage: vagrant provision [vm-name] [--provision-with x,y,z]\r\n        --provision-with x,y,z       Enable only certain provisioners, by type or by name.\r\n-h, --help Print this help\r\n```\r\n\r\n### Expected behavior\r\nThe test.sh script should run when the name given to --provision-with matches the name in the Vagrantfile.\r\n\r\nIf this feature worked, it would be fantastic tool for iterating and debugging a provisioner that is not working as expected!  The work flow would be: snapshot, run provisioner (which will fail because writing scripts is hard), change script, restore snapshot, re-run provisioner.\r\n\r\nThe key here is the ability to just run one of the shell script, as opposed to running all the shell scripts.  My workaround is to keep editing the Vagrantfile to comment out the scripts which ran successfully and then re-run all of the file and shell provisioners.\r\n\r\n### Actual behavior\r\nThe test.sh script does not run.\r\n\r\n### Steps to reproduce\r\nSee gist link above\r\n\r\n### References\r\nI searched for this issue, expecting to find it, but I went through 5 pages of issues and was unable to find this having been reported.  I also noticed the the documentation on the web does not match the help text: https://www.vagrantup.com/docs/cli/provision.html The web documentation makes no mention of running it by name, then again the word \"type\" is nowhere to be found in that documentation either.\r\n\r\nIf this is a missing feature, then this ticket is just to update the help text to stop advertising the feature.","closed_by":{"login":"briancain","id":810277,"node_id":"MDQ6VXNlcjgxMDI3Nw==","avatar_url":"https://avatars.githubusercontent.com/u/810277?v=4","gravatar_id":"","url":"https://api.github.com/users/briancain","html_url":"https://github.com/briancain","followers_url":"https://api.github.com/users/briancain/followers","following_url":"https://api.github.com/users/briancain/following{/other_user}","gists_url":"https://api.github.com/users/briancain/gists{/gist_id}","starred_url":"https://api.github.com/users/briancain/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/briancain/subscriptions","organizations_url":"https://api.github.com/users/briancain/orgs","repos_url":"https://api.github.com/users/briancain/repos","events_url":"https://api.github.com/users/briancain/events{/privacy}","received_events_url":"https://api.github.com/users/briancain/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/hashicorp/vagrant/issues/11287/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/hashicorp/vagrant/issues/11287/timeline","performed_via_github_app":null,"state_reason":"completed"}