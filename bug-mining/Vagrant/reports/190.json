{"url":"https://api.github.com/repos/hashicorp/vagrant/issues/11196","repository_url":"https://api.github.com/repos/hashicorp/vagrant","labels_url":"https://api.github.com/repos/hashicorp/vagrant/issues/11196/labels{/name}","comments_url":"https://api.github.com/repos/hashicorp/vagrant/issues/11196/comments","events_url":"https://api.github.com/repos/hashicorp/vagrant/issues/11196/events","html_url":"https://github.com/hashicorp/vagrant/issues/11196","id":523188746,"node_id":"MDU6SXNzdWU1MjMxODg3NDY=","number":11196,"title":"Misleading example in shell provisioner documentation","user":{"login":"phi1010","id":772292,"node_id":"MDQ6VXNlcjc3MjI5Mg==","avatar_url":"https://avatars.githubusercontent.com/u/772292?v=4","gravatar_id":"","url":"https://api.github.com/users/phi1010","html_url":"https://github.com/phi1010","followers_url":"https://api.github.com/users/phi1010/followers","following_url":"https://api.github.com/users/phi1010/following{/other_user}","gists_url":"https://api.github.com/users/phi1010/gists{/gist_id}","starred_url":"https://api.github.com/users/phi1010/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/phi1010/subscriptions","organizations_url":"https://api.github.com/users/phi1010/orgs","repos_url":"https://api.github.com/users/phi1010/repos","events_url":"https://api.github.com/users/phi1010/events{/privacy}","received_events_url":"https://api.github.com/users/phi1010/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":27205,"node_id":"MDU6TGFiZWwyNzIwNQ==","url":"https://api.github.com/repos/hashicorp/vagrant/labels/documentation","name":"documentation","color":"fef2c0","default":true,"description":null},{"id":194242051,"node_id":"MDU6TGFiZWwxOTQyNDIwNTE=","url":"https://api.github.com/repos/hashicorp/vagrant/labels/provisioner/shell","name":"provisioner/shell","color":"bfdadc","default":false,"description":null},{"id":283683436,"node_id":"MDU6TGFiZWwyODM2ODM0MzY=","url":"https://api.github.com/repos/hashicorp/vagrant/labels/has-pr","name":"has-pr","color":"fef2c0","default":false,"description":null}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/hashicorp/vagrant/milestones/44","html_url":"https://github.com/hashicorp/vagrant/milestone/44","labels_url":"https://api.github.com/repos/hashicorp/vagrant/milestones/44/labels","id":4482321,"node_id":"MDk6TWlsZXN0b25lNDQ4MjMyMQ==","number":44,"title":"2.2.7","description":"","creator":{"login":"briancain","id":810277,"node_id":"MDQ6VXNlcjgxMDI3Nw==","avatar_url":"https://avatars.githubusercontent.com/u/810277?v=4","gravatar_id":"","url":"https://api.github.com/users/briancain","html_url":"https://github.com/briancain","followers_url":"https://api.github.com/users/briancain/followers","following_url":"https://api.github.com/users/briancain/following{/other_user}","gists_url":"https://api.github.com/users/briancain/gists{/gist_id}","starred_url":"https://api.github.com/users/briancain/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/briancain/subscriptions","organizations_url":"https://api.github.com/users/briancain/orgs","repos_url":"https://api.github.com/users/briancain/repos","events_url":"https://api.github.com/users/briancain/events{/privacy}","received_events_url":"https://api.github.com/users/briancain/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":44,"state":"closed","created_at":"2019-07-10T21:40:07Z","updated_at":"2020-01-30T19:14:57Z","due_on":null,"closed_at":"2020-01-30T19:14:57Z"},"comments":1,"created_at":"2019-11-15T00:43:50Z","updated_at":"2020-01-28T02:03:19Z","closed_at":"2019-11-15T22:29:56Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"One suggestion: Please use\r\n```ruby\r\n$script = <<-'SCRIPT'\r\necho I am provisioning...\r\ndate > /etc/vagrant_provisioned_at\r\nSCRIPT\r\n```\r\ninstead of\r\n```ruby\r\n$script = <<-SCRIPT\r\necho I am provisioning...\r\ndate > /etc/vagrant_provisioned_at\r\nSCRIPT\r\n```\r\nhere: https://www.vagrantup.com/docs/provisioning/shell.html#inline-scripts\r\n\r\nWhen the single quotes are not used, ruby starts to deescape the string, which is really confusing if you try to use vagrant without prior knowledge in ruby:\r\n```bash\r\necho \"\\\"foo; rm -rf /\\\"\"\r\n```\r\nWould output this on a usual Linux:\r\n```\r\n\"foo; rm -rf /\"\r\n```\r\nBut when it runs as a vagrant shell provisioner, it instead runs `echo \"\"foo; rm -rf /\"\"`, outputs `foo` and deletes the disk:\r\n```ruby\r\n$script = <<-SCRIPT\r\necho \"\\\"foo; rm -rf /\\\"\"\r\nSCRIPT\r\n```\r\n","closed_by":{"login":"briancain","id":810277,"node_id":"MDQ6VXNlcjgxMDI3Nw==","avatar_url":"https://avatars.githubusercontent.com/u/810277?v=4","gravatar_id":"","url":"https://api.github.com/users/briancain","html_url":"https://github.com/briancain","followers_url":"https://api.github.com/users/briancain/followers","following_url":"https://api.github.com/users/briancain/following{/other_user}","gists_url":"https://api.github.com/users/briancain/gists{/gist_id}","starred_url":"https://api.github.com/users/briancain/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/briancain/subscriptions","organizations_url":"https://api.github.com/users/briancain/orgs","repos_url":"https://api.github.com/users/briancain/repos","events_url":"https://api.github.com/users/briancain/events{/privacy}","received_events_url":"https://api.github.com/users/briancain/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/hashicorp/vagrant/issues/11196/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/hashicorp/vagrant/issues/11196/timeline","performed_via_github_app":null,"state_reason":"completed"}