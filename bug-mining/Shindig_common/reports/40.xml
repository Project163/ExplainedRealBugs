<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:34:27 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SHINDIG-1144] JSON response uses the key &quot;data&quot; instead of &quot;result &quot;, in violation of the spec</title>
                <link>https://issues.apache.org/jira/browse/SHINDIG-1144</link>
                <project id="12310741" key="SHINDIG">Shindig</project>
                    <description>&lt;p&gt;According to the JSON-RPC over HTTP spec at &lt;a href=&quot;http://groups.google.com/group/json-rpc/web/json-rpc-1-2-proposal?pli=1#response-procedure-return&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://groups.google.com/group/json-rpc/web/json-rpc-1-2-proposal?pli=1#response-procedure-return&lt;/a&gt; , a JSON-RPC response that did not return an error should use the key &quot;result&quot; in the returned JSON object rather than &quot;data&quot;.&lt;/p&gt;

&lt;p&gt;The Orkut JSON-RPC service at orkut.com/social/rpc exhibits this bug.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12432258">SHINDIG-1144</key>
            <summary>JSON response uses the key &quot;data&quot; instead of &quot;result &quot;, in violation of the spec</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="5" iconUrl="https://issues.apache.org/jira/images/icons/statuses/resolved.png" description="A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.">Resolved</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="kartik.vad@gmail.com">Kartick Vaddadi</reporter>
                        <labels>
                    </labels>
                <created>Wed, 5 Aug 2009 10:05:45 +0000</created>
                <updated>Mon, 14 Jun 2010 20:52:51 +0000</updated>
                            <resolved>Mon, 31 May 2010 05:19:05 +0000</resolved>
                                                    <fixVersion>2.0.0-RC2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="86400">24h</timeoriginalestimate>
                            <timeestimate seconds="86400">24h</timeestimate>
                                        <comments>
                            <comment id="12739575" author="adamwiner" created="Wed, 5 Aug 2009 15:56:43 +0000"  >&lt;p&gt;Note:  simply swapping &quot;result&quot; for &quot;data&quot; will have bad backwards compatibility repercussions:&lt;/p&gt;

&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Existing clients talking to Shindig-based servers using JSON-RPC to retrieve content will break&lt;/li&gt;
	&lt;li&gt;Cached Javascript expecting &quot;data&quot; will break (or Javascript downloaded during a rollout)&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;So, we need to be very careful in how we fix this.  It may be necessary to use two endpoints - a legacy endpoint with &quot;data&quot;, a new endpoint with &quot;result&quot;, and eventually disable the legacy endpoint.&lt;/p&gt;

&lt;p&gt;(BTW, the JSON RPC spec is relevant, but not the important spec here:  that&apos;s &lt;a href=&quot;http://www.opensocial.org/Technical-Resources/opensocial-spec-v09/RPC-Protocol.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.opensocial.org/Technical-Resources/opensocial-spec-v09/RPC-Protocol.html&lt;/a&gt; which also uses &quot;result&quot;).&lt;/p&gt;</comment>
                            <comment id="12872682" author="plindner" created="Thu, 27 May 2010 23:02:48 +0000"  >&lt;p&gt;CL that fixes this is here: &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://codereview.appspot.com/1360041/show&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://codereview.appspot.com/1360041/show&lt;/a&gt;&lt;/p&gt;
</comment>
                            <comment id="12873544" author="plindner" created="Mon, 31 May 2010 05:06:24 +0000"  >&lt;p&gt;this is committed.  PHP version still needs to be fixed..&lt;/p&gt;</comment>
                            <comment id="12873547" author="plindner" created="Mon, 31 May 2010 05:19:05 +0000"  >&lt;p&gt;fixed.&lt;/p&gt;</comment>
                            <comment id="12878685" author="tiago.silveira" created="Mon, 14 Jun 2010 18:35:06 +0000"  >&lt;p&gt;I think the current fix has a bug, in particular this patch here:&lt;br/&gt;
&lt;a href=&quot;http://codereview.appspot.com/1360041/patch/1/2&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://codereview.appspot.com/1360041/patch/1/2&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;When the response contains a &quot;result&quot; field, the object is passed normally to the upper layers, but when the response contains a &quot;data&quot; field, it isn&apos;t. If this reaches production, it will potentially break every gadget running on orkut that calls open social APIs.&lt;/p&gt;

&lt;p&gt;The error is caused by the sendResponse callback declared in JsonRpcContainer.prototype.requestData. It contains repeated access to result.data. First,&lt;/p&gt;

&lt;p&gt;result = result.result || result.data&lt;/p&gt;

&lt;p&gt;and then,&lt;/p&gt;

&lt;p&gt;var rawData = response.result || result.data;&lt;br/&gt;
var error = response.error;&lt;br/&gt;
var errorMessage = &quot;&quot;;&lt;/p&gt;

&lt;p&gt;Since the variable &quot;result&quot; was already modified at line 10348, &quot;rawData&quot; is always undefined at line 10367.&lt;/p&gt;</comment>
                            <comment id="12878706" author="mhermanto" created="Mon, 14 Jun 2010 19:15:26 +0000"  >&lt;p&gt;We think the problem has to do with a typo on this line &amp;#8211; var rawData = response.result || result.data; &lt;br/&gt;
It should corrected to &amp;#8211; var rawData = response.result || response.data; &lt;/p&gt;</comment>
                            <comment id="12878715" author="mhermanto" created="Mon, 14 Jun 2010 19:40:53 +0000"  >&lt;p&gt;Code review attached &amp;#8211; &lt;a href=&quot;http://codereview.appspot.com/1696041/show&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://codereview.appspot.com/1696041/show&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="12878739" author="plindner" created="Mon, 14 Jun 2010 20:52:51 +0000"  >&lt;p&gt;lgtm, applying patch&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12447059" name="shindig-fix-1144-3" size="633" author="mhermanto" created="Mon, 14 Jun 2010 19:38:26 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>174427</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            15 years, 23 weeks, 5 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i10qkv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>212440</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>