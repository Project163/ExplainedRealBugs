<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:34:30 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SHINDIG-1515] Why shindig uses &quot;Content-Type&quot; not &quot;Accept&quot; to determine the return info type</title>
                <link>https://issues.apache.org/jira/browse/SHINDIG-1515</link>
                <project id="12310741" key="SHINDIG">Shindig</project>
                    <description>&lt;p&gt;I checked the shindig code(common org.apache.shindig.protocol.DataServiceServlet), which is used to handle opensocial REST call.&lt;br/&gt;
The type of response is determined by &quot;Content-Type&quot; header, not &quot;Accept&quot; header.&lt;br/&gt;
From reading of http1.1(Content-Type : &lt;a href=&quot;http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.17&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.17&lt;/a&gt;, Accept : &lt;a href=&quot;http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.1&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.1&lt;/a&gt;),&lt;br/&gt;
my understanding is,&lt;br/&gt;
The &quot;Content-Type&quot; is used by server to tell the receiver the type of response, when it is added to response.&lt;br/&gt;
The &quot;Accept&quot; is used by request sender to tell server the type of response he expecting, when it is in request.&lt;br/&gt;
The &quot;Content-Type&quot; in request should be used to tell server the type of request&apos;s content.&lt;/p&gt;

&lt;p&gt;Is this a bug of shindig that it utilizes &quot;Content-Type&quot; not &quot;Accept&quot; to decide the response type?&lt;/p&gt;

&lt;p&gt;Or if there is any doc specifies this behavior, please send me the link.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12500612">SHINDIG-1515</key>
            <summary>Why shindig uses &quot;Content-Type&quot; not &quot;Accept&quot; to determine the return info type</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="hsaputra">Henry Saputra</assignee>
                                    <reporter username="hongtao2011">hongtao</reporter>
                        <labels>
                    </labels>
                <created>Mon, 7 Mar 2011 10:39:40 +0000</created>
                <updated>Thu, 29 Mar 2012 20:58:46 +0000</updated>
                            <resolved>Thu, 24 Mar 2011 07:07:03 +0000</resolved>
                                    <version>2.0.2</version>
                                    <fixVersion>2.5.0-beta1</fixVersion>
                                    <component>Java</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="13003814" author="hsaputra" created="Tue, 8 Mar 2011 05:33:49 +0000"  >&lt;p&gt;Updating my prev comment, looks like Shindig is using the same converter for handling request and response. Thats why Content-Type is used.&lt;/p&gt;

&lt;p&gt;I guess DataServiceServlet need to create separate bean converter for converting the response.&lt;/p&gt;</comment>
                            <comment id="13003826" author="hsaputra" created="Tue, 8 Mar 2011 06:11:18 +0000"  >&lt;p&gt;I dont see in the OpenSocial Core API or Core Data specs on how to get the format of the response for REST services if &quot;format&quot; parameter is not specified.&lt;br/&gt;
I believe the core data spec only specify that the default is json.&lt;/p&gt;

&lt;p&gt;I propose to add get converter for response and use these steps to determine the right converter:&lt;br/&gt;
1. Check for &quot;format&quot; request parameter and use it if available.&lt;br/&gt;
2. If it was not passed, Shindig will do courtesy to check Accept header and use the first one from the list that could be accepted if any.&lt;br/&gt;
3. Otherwise just use the json format as specified by the specs.&lt;/p&gt;

&lt;p&gt;Thoughts?&lt;/p&gt;</comment>
                            <comment id="13009297" author="hsaputra" created="Mon, 21 Mar 2011 19:02:28 +0000"  >&lt;p&gt;Add CR for fix to use &quot;format&quot; parameter to determine the return type based on OpenSocial Core API Server spec: &lt;a href=&quot;http://opensocial-resources.googlecode.com/svn/spec/1.1/Core-API-Server.xml#Request-Parameter-Format-Value&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://opensocial-resources.googlecode.com/svn/spec/1.1/Core-API-Server.xml#Request-Parameter-Format-Value&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Please review at:&lt;br/&gt;
&lt;a href=&quot;http://codereview.appspot.com/4282058/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://codereview.appspot.com/4282058/&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="13009737" author="hongtao2011" created="Tue, 22 Mar 2011 17:42:36 +0000"  >&lt;p&gt;Hi,&lt;br/&gt;
&lt;a href=&quot;http://codereview.appspot.com/4282058/patch/6002/14004&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://codereview.appspot.com/4282058/patch/6002/14004&lt;/a&gt;&lt;br/&gt;
Is above the final patch for this bug?&lt;br/&gt;
I find no code uses &quot;Accept&quot; header to decide the converter for response.&lt;/p&gt;

&lt;p&gt;The logic of the patch is, response converter is decided by format parameter, and is json if no format parameter specified.&lt;br/&gt;
Has shindig team decided not to use &quot;Accept&quot; header info?&lt;/p&gt;

&lt;p&gt;Regards,&lt;br/&gt;
Hongtao&lt;/p&gt;</comment>
                            <comment id="13009753" author="hsaputra" created="Tue, 22 Mar 2011 18:14:38 +0000"  >&lt;p&gt;The patch contain proposed change to separate logic to get converter for request and response. &lt;br/&gt;
For response, the change is to use&quot;format&quot; request parameter as defined in the OpenSocial Core API server spec.&lt;/p&gt;

&lt;p&gt;So with this change you can send POST request with Content-Type of XML but request return of format JSON by specifiying format=json in the URL parameter.&lt;/p&gt;</comment>
                            <comment id="13009994" author="hsaputra" created="Wed, 23 Mar 2011 04:47:20 +0000"  >&lt;p&gt;If its ok with you, I would like to close this case with the proposed patch so we have different converters for request and response.&lt;/p&gt;

&lt;p&gt;We will address reading from Accept header with &lt;a href=&quot;https://issues.apache.org/jira/browse/SHINDIG-1518&quot; title=&quot;REST servlet: read from HTTP Accept header to determine response converter when &amp;quot;format&amp;quot; request parameter is not specified&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SHINDIG-1518&quot;&gt;SHINDIG-1518&lt;/a&gt;. I will also try to see if we could include this in the OpenSocial spec itself.&lt;/p&gt;</comment>
                            <comment id="13010159" author="hongtao2011" created="Wed, 23 Mar 2011 14:53:35 +0000"  >&lt;p&gt;Thank you. I am ok with this solution.&lt;/p&gt;</comment>
                            <comment id="13010586" author="hsaputra" created="Thu, 24 Mar 2011 07:07:03 +0000"  >&lt;p&gt;Thanks. Its fixed with revision 1084860 at trunk.&lt;/p&gt;</comment>
                            <comment id="13241654" author="plindner" created="Thu, 29 Mar 2012 20:58:46 +0000"  >&lt;p&gt;part of 2.5.0-beta1 release.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>174733</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            13 years, 34 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i10zvz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>213948</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>