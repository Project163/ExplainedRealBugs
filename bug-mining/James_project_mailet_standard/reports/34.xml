<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 19:29:04 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[JAMES-1444] Using HasMailAttributeWithValueRegex matcher causes NPE during startup when JMX is enabled</title>
                <link>https://issues.apache.org/jira/browse/JAMES-1444</link>
                <project id="10411" key="JAMES">James Server</project>
                    <description>&lt;p&gt;When I use the following Mailet/Matcher, &lt;/p&gt;

&lt;p&gt;&amp;lt;mailet match=&quot;HasMailAttributeWithValueRegex=jDKIM.AUTHRESULT, fail&quot; class=&quot;Null&quot;/&amp;gt;&lt;/p&gt;

&lt;p&gt;I get a NullPointerException as below:&lt;br/&gt;
Caused by: java.lang.NullPointerException&lt;br/&gt;
        at org.apache.james.mailetcontainer.impl.jmx.MatcherManagement.getMatcherName(MatcherManagement.java:75)&lt;/p&gt;

&lt;p&gt;This does not happen when I use the HasMailAttributeWithValue matcher though.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12624907">JAMES-1444</key>
            <summary>Using HasMailAttributeWithValueRegex matcher causes NPE during startup when JMX is enabled</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="adhish">Adhish</reporter>
                        <labels>
                    </labels>
                <created>Thu, 20 Dec 2012 22:16:56 +0000</created>
                <updated>Wed, 8 Sep 2021 03:08:56 +0000</updated>
                            <resolved>Wed, 8 Sep 2021 03:08:56 +0000</resolved>
                                    <version>3.0-beta4</version>
                                                    <component>JMX</component>
                    <component>Matchers/Mailets (bundled)</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>2</watches>
                                                    <progress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="100">
                                    <originalProgress>
                                                    <row percentage="0" backgroundColor="#89afd7"/>
                                                    <row percentage="100" backgroundColor="transparent"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="100" backgroundColor="#51a825"/>
                                                    <row percentage="0" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                            <timeestimate seconds="0">0h</timeestimate>
                            <timespent seconds="1200">20m</timespent>
                                <comments>
                            <comment id="13537430" author="adhish" created="Thu, 20 Dec 2012 22:21:15 +0000"  >&lt;p&gt;I believe this is happening because HasMailAttributeWithValueRegex override the &quot;public void init (MatcherConfig conf) throws MessagingException&quot;  from GenericMatcher and does not call the super class init(MatcherConfig) method. &lt;/p&gt;

&lt;p&gt;Hence, the config value is never set in the base class. When JMX tries to call a method on that config (after calling getMatcherConfig() which returns a null), it will get a NullPointerException.&lt;/p&gt;

&lt;p&gt;HasMailAttributeWithValue does not override the init (MatcherConfig conf) method and it does not suffer from this issue. &lt;/p&gt;

&lt;p&gt;Perhaps you could add a call to super(conf) in the overridden method HasMailAttributeWithValueRegex to fix the issue.&lt;/p&gt;
</comment>
                            <comment id="13537431" author="adhish" created="Thu, 20 Dec 2012 22:21:32 +0000"  >&lt;p&gt;More detailed logs:&lt;/p&gt;

&lt;p&gt;INFO  22:13:04,950 | james.mailprocessor | Matcher HasMailAttributeWithValueRegex=jDKIM.AUTHRESULT, fail instantiated.&lt;br/&gt;
INFO  22:13:04,950 | james.mailprocessor | Mailet Null instantiated.&lt;br/&gt;
INFO  22:13:04,955 | james.mailprocessor | Matcher HostIsLocal instantiated.&lt;br/&gt;
INFO  22:13:04,977 | james.mailprocessor | Mailet Forward instantiated.&lt;br/&gt;
INFO  22:13:04,977 | james.mailprocessor | Matcher All instantiated.&lt;br/&gt;
INFO  22:13:04,979 | james.mailprocessor | Mailet Forward instantiated.&lt;br/&gt;
INFO  22:13:04,979 | james.mailprocessor | Matcher All instantiated.&lt;br/&gt;
INFO  22:13:04,980 | james.mailprocessor | Mailet ToProcessor instantiated.&lt;br/&gt;
Exception in thread &quot;main&quot; org.springframework.beans.factory.BeanCreationException: Error creating bean with name &apos;mailprocessor&apos;: Invocation of init method failed; nested exception is java.lang.NullPointerException&lt;br/&gt;
        at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:135)&lt;br/&gt;
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:394)&lt;br/&gt;
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1448)&lt;br/&gt;
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)&lt;br/&gt;
        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)&lt;br/&gt;
        at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)&lt;br/&gt;
        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)&lt;br/&gt;
        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)&lt;br/&gt;
        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)&lt;br/&gt;
        at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:585)&lt;br/&gt;
        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)&lt;br/&gt;
        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)&lt;br/&gt;
        at org.springframework.context.support.ClassPathXmlApplicationContext.&amp;lt;init&amp;gt;(ClassPathXmlApplicationContext.java:139)&lt;br/&gt;
        at org.springframework.context.support.ClassPathXmlApplicationContext.&amp;lt;init&amp;gt;(ClassPathXmlApplicationContext.java:93)&lt;br/&gt;
        at org.apache.james.container.spring.context.JamesServerApplicationContext.&amp;lt;init&amp;gt;(JamesServerApplicationContext.java:39)&lt;br/&gt;
        at org.apache.james.app.spring.JamesAppSpringMain.init(JamesAppSpringMain.java:61)&lt;br/&gt;
        at org.apache.james.app.spring.JamesAppSpringMain.main(JamesAppSpringMain.java:42)&lt;br/&gt;
Caused by: java.lang.NullPointerException&lt;br/&gt;
        at org.apache.james.mailetcontainer.impl.jmx.MatcherManagement.getMatcherName(MatcherManagement.java:75)&lt;br/&gt;
        at org.apache.james.mailetcontainer.impl.jmx.JMXStateMailetProcessorListener.registerMatchers(JMXStateMailetProcessorListener.java:149)&lt;br/&gt;
        at org.apache.james.mailetcontainer.impl.jmx.JMXStateMailetProcessorListener.registerMBeans(JMXStateMailetProcessorListener.java:106)&lt;br/&gt;
        at org.apache.james.mailetcontainer.impl.jmx.JMXStateMailetProcessorListener.&amp;lt;init&amp;gt;(JMXStateMailetProcessorListener.java:62)&lt;br/&gt;
        at org.apache.james.mailetcontainer.lib.AbstractStateMailetProcessor.init(AbstractStateMailetProcessor.java:123)&lt;br/&gt;
        at org.apache.james.mailetcontainer.impl.camel.CamelMailetProcessor.init(CamelMailetProcessor.java:101)&lt;br/&gt;
        at org.apache.james.mailetcontainer.impl.camel.CamelCompositeProcessor.createMailProcessor(CamelCompositeProcessor.java:103)&lt;br/&gt;
        at org.apache.james.mailetcontainer.lib.AbstractStateCompositeProcessor.init(AbstractStateCompositeProcessor.java:181)&lt;br/&gt;
        at org.apache.james.mailetcontainer.impl.camel.CamelCompositeProcessor.init(CamelCompositeProcessor.java:66)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)&lt;br/&gt;
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)&lt;br/&gt;
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)&lt;br/&gt;
        at java.lang.reflect.Method.invoke(Method.java:616)&lt;br/&gt;
        at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleElement.invoke(InitDestroyAnnotationBeanPostProcessor.java:346)&lt;br/&gt;
        at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMetadata.invokeInitMethods(InitDestroyAnnotationBeanPostProcessor.java:299)&lt;br/&gt;
        at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:132)&lt;br/&gt;
        ... 16 more&lt;/p&gt;</comment>
                            <comment id="13537730" author="eric@apache.org" created="Fri, 21 Dec 2012 07:35:04 +0000"  >&lt;p&gt;Hi Adhish,&lt;br/&gt;
Thx a lot for reporting.&lt;br/&gt;
I didn&apos;t try your proposal, but calling super when overriding sounds logical.&lt;br/&gt;
Maybe you can try your solution and upload here a patch. I will happily commit it.&lt;br/&gt;
Thx, Eric&lt;/p&gt;</comment>
                            <comment id="17409925" author="btellier" created="Sat, 4 Sep 2021 10:12:21 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/james-project/pull/633&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/james-project/pull/633&lt;/a&gt; fixes this...&lt;/p&gt;</comment>
                            <comment id="17411648" author="btellier" created="Wed, 8 Sep 2021 03:08:56 +0000"  >&lt;p&gt;&lt;a href=&quot;https://github.com/apache/james-project/pull/633&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/james-project/pull/633&lt;/a&gt; fixed this.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>301421</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            4 years, 9 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i16shz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>247749</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>