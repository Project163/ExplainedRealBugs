<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:54:33 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[TEZ-1424] Fixes to DAG text representation in debug mode</title>
                <link>https://issues.apache.org/jira/browse/TEZ-1424</link>
                <project id="12314426" key="TEZ">Apache Tez</project>
                    <description>&lt;p&gt;Several fixes required&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Don&apos;t log entire tokens, just the identifier should be enough&lt;/li&gt;
	&lt;li&gt;DAG ID (or unique number needs to be used). Otherwise we get only one file per session&lt;/li&gt;
	&lt;li&gt;This should not go into the local-directory - since that isn&apos;t accessible. Instead the log directory would be a better place.&lt;/li&gt;
&lt;/ul&gt;


&lt;p&gt;Marking as critical for 0.5.1 since this is very useful for debugging.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12734283">TEZ-1424</key>
            <summary>Fixes to DAG text representation in debug mode</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="rajesh.balamohan">Rajesh Balamohan</assignee>
                                    <reporter username="sseth">Siddharth Seth</reporter>
                        <labels>
                    </labels>
                <created>Thu, 14 Aug 2014 22:35:46 +0000</created>
                <updated>Sat, 8 Nov 2014 20:25:24 +0000</updated>
                            <resolved>Thu, 23 Oct 2014 22:36:21 +0000</resolved>
                                                    <fixVersion>0.5.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14174887" author="rajesh.balamohan" created="Fri, 17 Oct 2014 09:27:47 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sseth&quot; class=&quot;user-hover&quot; rel=&quot;sseth&quot;&gt;sseth&lt;/a&gt; - Can you please review?&lt;/p&gt;</comment>
                            <comment id="14177660" author="sseth" created="Mon, 20 Oct 2014 23:39:26 +0000"  >&lt;p&gt;Comments on the patch.&lt;/p&gt;
&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Rather than printing specific fields, I think it&apos;s better to print all fields except credentials. Can be done by walking the field descriptors. Walking the descriptors should allow this. That also ends up printing the name of the field correctly. e.g. Sleep jobname: &quot;initialmap&quot; - that&apos;s mixing the job name and the vertex name.&lt;/li&gt;
	&lt;li&gt;For the credentials itself, we should parse them out - print counts, as well as the Token Identifier (which gives type information - HDFS / session / etc).&lt;/li&gt;
	&lt;li&gt;&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;-    submittedDAGs.incrementAndGet();&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Accidental removal ? Also, the ordering is changed where we log the debug after starting the DAG.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14177716" author="sseth" created="Tue, 21 Oct 2014 00:37:13 +0000"  >&lt;p&gt;Also, we should move the dagViz generation out from a TEZ_GENERATE_DEBUG_ARTIFACTS check - so that it&apos;s generated always, and set TEZ_GENERATE_DEBUG_ARTIFACTS_DEFAULT to false.&lt;/p&gt;</comment>
                            <comment id="14177751" author="rajesh.balamohan" created="Tue, 21 Oct 2014 01:00:31 +0000"  >&lt;p&gt;As of now TEZ_GENERATE_DEBUG_ARTIFACTS is used for just checking dagViz.  If we plan to move dagViz out of TEZ_GENERATE_DEBUG_ARTIFACTS check, do we need TEZ_GENERATE_DEBUG_ARTIFACTS flag at all?  Or do we intend to use it for generating other artifacts later?&lt;/p&gt;</comment>
                            <comment id="14177764" author="sseth" created="Tue, 21 Oct 2014 01:10:57 +0000"  >&lt;p&gt;I&apos;m not sure if we&apos;ll be generating other artifacts in the future - potentially a simple DAG plan with payloads separated, or stuff on the task side. That can all live under this configuration. That seems like a better approach than generating the debug artifacts only when debug logging is enabled.&lt;/p&gt;</comment>
                            <comment id="14177946" author="rajesh.balamohan" created="Tue, 21 Oct 2014 04:55:32 +0000"  >&lt;p&gt;Addressing review comments.&lt;/p&gt;

&lt;p&gt;&amp;gt;&amp;gt;&lt;br/&gt;
the ordering is changed where we log the debug after starting the DAG&lt;br/&gt;
&amp;gt;&amp;gt;&lt;br/&gt;
Patch uses DAG_ID in the filename for correlating filename with the DAG.  If we have to use DagPlan, we need to provide some unique number in the filename.&lt;/p&gt;</comment>
                            <comment id="14179224" author="sseth" created="Tue, 21 Oct 2014 22:21:12 +0000"  >&lt;ul class=&quot;alternate&quot; type=&quot;square&quot;&gt;
	&lt;li&gt;Javadocs for TEZ_GENERATE_DEBUG_ARTIFACTS - to reflect the text plan being logged rather than the dag visualization.
&lt;blockquote&gt;&lt;p&gt;Patch uses DAG_ID in the filename for correlating filename with the DAG. If we have to use DagPlan, we need to provide some unique number in the filename.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Can we log this at the same place wher the dag visualization is generated in that case. That&apos;s before any signal is sent to start the DAG - which would make it less prone to being logeed after a potential failure.&lt;/p&gt;&lt;/li&gt;
	&lt;li&gt;In getCredentialsInfo, along with the service - it&apos;d be useful to log the KIND as well.&lt;/li&gt;
	&lt;li&gt;TextFormat.printField(entry.getKey(), entry.getValue(), sb); - this handles logging of fields a little better - with the name of the field getting logged correctly.&lt;br/&gt;
Also, credentials checking, instead of comparing the object, can be done using PB artifacts itself
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (descriptor.getNumber() != DAGProtos.DAGPlan.CREDENTIALS_BINARY_FIELD_NUMBER) {&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="14180976" author="rajesh.balamohan" created="Thu, 23 Oct 2014 03:38:09 +0000"  >&lt;p&gt;Addressing review comments.&lt;/p&gt;</comment>
                            <comment id="14181606" author="sseth" created="Thu, 23 Oct 2014 17:31:29 +0000"  >&lt;p&gt;+1. Looks good. Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=rajesh.balamohan&quot; class=&quot;user-hover&quot; rel=&quot;rajesh.balamohan&quot;&gt;rajesh.balamohan&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14182088" author="rajesh.balamohan" created="Thu, 23 Oct 2014 22:36:21 +0000"  >&lt;p&gt;Thanks &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sseth&quot; class=&quot;user-hover&quot; rel=&quot;sseth&quot;&gt;sseth&lt;/a&gt;. Committed to master and branch-0.5&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12703358">TEZ-974</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12721827">TEZ-1210</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12675453" name="TEZ-1424.1.patch" size="4478" author="rajesh.balamohan" created="Fri, 17 Oct 2014 09:27:47 +0000"/>
                            <attachment id="12676028" name="TEZ-1424.2.patch" size="7835" author="rajesh.balamohan" created="Tue, 21 Oct 2014 04:55:32 +0000"/>
                            <attachment id="12676520" name="TEZ-1424.3.patch" size="8026" author="rajesh.balamohan" created="Thu, 23 Oct 2014 03:38:09 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>412223</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            11 years, 4 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1ywz3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>412212</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12310320" key="com.atlassian.jira.plugin.system.customfieldtypes:multiversion">
                        <customfieldname>Target Version/s</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue id="12328742">0.5.2</customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                </customfields>
    </item>
</channel>
</rss>