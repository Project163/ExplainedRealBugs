<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:54:44 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[TEZ-3874] NPE in TezClientUtils when &quot;yarn.resourcemanager.zk-address&quot; is present in Configuration</title>
                <link>https://issues.apache.org/jira/browse/TEZ-3874</link>
                <project id="12314426" key="TEZ">Apache Tez</project>
                    <description>&lt;p&gt;&quot;yarn.resourcemanager.zk-address&quot; is deprecated in favor of &quot;hadoop.zk.address&quot; for Hadoop 2.9+.&lt;/p&gt;

&lt;p&gt;Configuration base class does&apos;t auto-translate the deprecation. Only YarnConfiguration applies the translation.&lt;/p&gt;

&lt;p&gt;In TezClientUtils.createFinalConfProtoForApp, a NPE is throw if &quot;yarn.resourcemanager.zk-address&quot; is present in the Configuration.&lt;/p&gt;

&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (Entry&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; entry : amConf) {
      PlanKeyValuePair.Builder kvp = PlanKeyValuePair.newBuilder();
      kvp.setKey(entry.getKey());
      kvp.setValue(amConf.get(entry.getKey()));
      builder.addConfKeyValues(kvp);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Even though Tez is not specifically looking for the deprecated property, &lt;tt&gt;amConf.get(entry.getKey())&lt;/tt&gt; will find it during the iteration, if it is in any of the merged xml property resources. &lt;/p&gt;

&lt;p&gt;&lt;tt&gt;amConf.get(entry.getKey())&lt;/tt&gt; will return null, and &lt;tt&gt;kvp.setValue(null)&lt;/tt&gt; will trigger NPE.&lt;/p&gt;

&lt;p&gt;Suggested solution is to change to: &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
YarnConfiguration wrappedConf = &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; YarnConfiguration(amConf);
&lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (Entry&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; entry : wrappedConf) {
      PlanKeyValuePair.Builder kvp = PlanKeyValuePair.newBuilder();
      kvp.setKey(entry.getKey());
      kvp.setValue(wrappedConf.get(entry.getKey()));
      builder.addConfKeyValues(kvp);
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</description>
                <environment></environment>
        <key id="13122959">TEZ-3874</key>
            <summary>NPE in TezClientUtils when &quot;yarn.resourcemanager.zk-address&quot; is present in Configuration</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="1" iconUrl="https://issues.apache.org/jira/images/icons/priorities/blocker.svg">Blocker</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="ewohlstadter">Eric Wohlstadter</assignee>
                                    <reporter username="ewohlstadter">Eric Wohlstadter</reporter>
                        <labels>
                    </labels>
                <created>Tue, 5 Dec 2017 18:48:29 +0000</created>
                <updated>Fri, 19 Apr 2019 19:21:09 +0000</updated>
                            <resolved>Fri, 9 Mar 2018 16:04:26 +0000</resolved>
                                    <version>0.9.1</version>
                                    <fixVersion>0.9.2</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="172800">48h</timeoriginalestimate>
                            <timeestimate seconds="172800">48h</timeestimate>
                                        <comments>
                            <comment id="16279036" author="ewohlstadter" created="Tue, 5 Dec 2017 18:52:58 +0000"  >&lt;p&gt;I&apos;m checking the code to see if we apply this pattern of iterating over Configuration properties in other places. &lt;/p&gt;</comment>
                            <comment id="16279483" author="tezqa" created="Wed, 6 Dec 2017 01:06:10 +0000"  >&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment&lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12900764/TEZ-3874.1.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12900764/TEZ-3874.1.patch&lt;/a&gt;&lt;br/&gt;
  against master revision cfede26.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 1 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  There were no new javadoc warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 3.0.1) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-TEZ-Build/2697//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-TEZ-Build/2697//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-TEZ-Build/2697//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-TEZ-Build/2697//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="16283744" author="jlowe" created="Fri, 8 Dec 2017 15:47:05 +0000"  >&lt;p&gt;Thanks for the report and patch!&lt;/p&gt;

&lt;p&gt;I suspect this will not be the last time something like this happens, and it is valid for a Configuration key to have a null value.  From my perspective the real bug here is that Tez assumes all configuration keys have non-null values, and that is not guaranteed.  I think the fix should skip copying any Configuration key/value pair where the value is null.&lt;/p&gt;</comment>
                            <comment id="16283953" author="ewohlstadter" created="Fri, 8 Dec 2017 18:08:36 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jlowe&quot; class=&quot;user-hover&quot; rel=&quot;jlowe&quot;&gt;jlowe&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;That makes sense to me. &lt;/p&gt;

&lt;p&gt;There is a difference here than with skipping null values. By wrapping with YarnConfiguration, the deprecationContext correctly handles translating &quot;yarn.resourcemanager.zk-address&quot;.&lt;/p&gt;

&lt;p&gt;Although, I don&apos;t think Tez uses that parameter anywhere. So skipping the null values is just as good and more general. &lt;/p&gt;

&lt;p&gt;I&apos;ll go ahead and change it how you suggested, unless I&apos;m wrong about not needing &quot;yarn.resourcemanager.zk-address&quot; anywhere in Tez.&lt;/p&gt;</comment>
                            <comment id="16284005" author="jlowe" created="Fri, 8 Dec 2017 18:39:43 +0000"  >&lt;p&gt;IIUC a YARN client should not need to know the RM&apos;s ZK address setting.  That setting is to inform the ResourceManager where it can find the ZooKeeper instance for handling failovers and electing new active instances.  Even if a client did try to access that value, they should be accessing it with the new key value.  The client code would be accessing the value most likely via YarnConfiguration.RM_ZK_ADDRESS which will trigger the YarnConfiguration class to load and invoke the static code block that adds the deprecated keys.  Therefore a client looking up the key directly, instead of trying to iterate values, will be automatically remapped to the new key.&lt;/p&gt;

&lt;p&gt;So bottom line is I think skipping null values is all we need to do here.&lt;/p&gt;</comment>
                            <comment id="16288349" author="aplusplus" created="Tue, 12 Dec 2017 22:04:08 +0000"  >&lt;p&gt;Move this to 0.9.2 as offline discussion with &lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ewohlstadter&quot; class=&quot;user-hover&quot; rel=&quot;ewohlstadter&quot;&gt;ewohlstadter&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="16338065" author="jlowe" created="Wed, 24 Jan 2018 18:56:32 +0000"  >&lt;p&gt;Thanks for updating the patch!&#160; The precommit build is having trouble posting to JIRA, but here&apos;s what it tried to say:&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;red&quot;&gt;-1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment&lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12907433/TEZ-3874.patch.2&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12907433/TEZ-3874.patch.2&lt;/a&gt;&lt;br/&gt;
  against master revision 3c7640d.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 3 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  There were no new javadoc warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;red&quot;&gt;-1 findbugs&lt;/font&gt;.  The patch appears to introduce 2 new Findbugs (version 3.0.1) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-TEZ-Build/2720//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-TEZ-Build/2720//testReport/&lt;/a&gt;&lt;br/&gt;
Findbugs warnings: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-TEZ-Build/2720//artifact/patchprocess/newPatchFindbugsWarningstez-api.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-TEZ-Build/2720//artifact/patchprocess/newPatchFindbugsWarningstez-api.html&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-TEZ-Build/2720//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-TEZ-Build/2720//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;The findbug warnings are about variables that are apparently constants but are not marked as such.  Other comments on the patch:&lt;/p&gt;

&lt;p&gt;TezClientUtils changed to use wildcard imports, and last I checked we preferred to not use wildcard importing.&lt;/p&gt;

&lt;p&gt;I&apos;m not sure we want to log a warning or even an info when this occurs.  As I mentioned above, null key values can do happen in practice, and it isn&apos;t necessarily an error when they do.  I would either remove the log messages or make them debug at best.  Otherwise I can see this spamming the user&apos;s logs with stuff they may not be able to fix themselves.&lt;/p&gt;

&lt;p&gt;Nit: There&apos;s a lot of places in the code that does essentially this:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
    &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; (Entry&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; entry : amConf) {
      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(TezUtils.notNullKvpWithValueReplacement(entry, amConf)) {
        PlanKeyValuePair.Builder kvp = PlanKeyValuePair.newBuilder();
        kvp.setKey(entry.getKey());
        kvp.setValue(amConf.get(entry.getKey()));
        builder.addConfKeyValues(kvp);
      } &lt;span class=&quot;code-keyword&quot;&gt;else&lt;/span&gt; {
        LOG.warn(NULL_KVP_REPLACEMENT_LOG_MSG, entry.getKey());
      }
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;and it would be good to factor out that as a utility method.&lt;/p&gt;

&lt;p&gt;The test should not catch all Exceptions and suppress them.  If the test causes some other exception to be thrown, like IllegalArgumentException, then suppressing it is not desired.  If we&apos;re testing to make sure an NPE isn&apos;t thrown then all we should do is call it &lt;em&gt;without catching&lt;/em&gt;.  The test framework will ensure the test is marked as failed if NPE or any other exception gets thrown out from the test method.&lt;/p&gt;

&lt;p&gt;Nit: IMHO the new notNullKvp methods are a bit overkill.  Most of the Precondition checks are unnecessary given where it&apos;s used, and this essentially boils down to a null check after we fetch a value.  Not a must-fix, just an opinion.  Once all the common conf-copying code is factored out, the need for these utility functions diminishes further.&lt;/p&gt;</comment>
                            <comment id="16383816" author="jlowe" created="Fri, 2 Mar 2018 17:01:22 +0000"  >&lt;p&gt;Thanks for updating the patch! Here&apos;s the QA report:&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;&lt;font color=&quot;#FF0000&quot;&gt;-1 overall&lt;/font&gt;. Here are the results of testing the latest attachment&lt;br/&gt;
 &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12912688/TEZ-3874.3.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12912688/TEZ-3874.3.patch&lt;/a&gt;&lt;br/&gt;
 against master revision bb40cf5.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#008000&quot;&gt;+1 @author&lt;/font&gt;. The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#008000&quot;&gt;+1 tests included&lt;/font&gt;. The patch appears to include 2 new or modified test files.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#008000&quot;&gt;+1 javac&lt;/font&gt;. The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#008000&quot;&gt;+1 javadoc&lt;/font&gt;. There were no new javadoc warning messages.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#008000&quot;&gt;+1 findbugs&lt;/font&gt;. The patch does not introduce any new Findbugs (version 3.0.1) warnings.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#008000&quot;&gt;+1 release audit&lt;/font&gt;. The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;&lt;font color=&quot;#FF0000&quot;&gt;-1 core tests&lt;/font&gt;. The patch failed these unit tests in :&lt;br/&gt;
 org.apache.tez.analyzer.TestAnalyzer&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-TEZ-Build/2732//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-TEZ-Build/2732//testReport/&lt;/a&gt;&lt;br/&gt;
 Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-TEZ-Build/2732//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-TEZ-Build/2732//console&lt;/a&gt;&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;Again I&apos;m not sure the notNullKvp method is worth the weight. I do not see the utility of a Precondition not null check vs. just letting it NPE on the line number where it is used. Both are going to throw an NPE and it will be obvious which is null for that line. And once we remove the Precondition null checks, the function boils down to:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; notNullKvpWithValueReplacement(Map.Entry&amp;lt;&lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;, &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt;&amp;gt; kvp, Configuration conf) {
    &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; key = kvp.getKey();
    &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; value = conf.get(key);
    &lt;span class=&quot;code-keyword&quot;&gt;return&lt;/span&gt; value != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;;
  }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;which IMHO is just not worth it. For example:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt;(TezUtils.notNullKvpWithValueReplacement(entry, amConf)) {
        PlanKeyValuePair.Builder kvp = PlanKeyValuePair.newBuilder();
        kvp.setKey(entry.getKey());
        kvp.setValue(amConf.get(entry.getKey()));
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;is equivalent to:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
      &lt;span class=&quot;code-object&quot;&gt;String&lt;/span&gt; val = amConf.get(entry.getKey());
      &lt;span class=&quot;code-keyword&quot;&gt;if&lt;/span&gt; (val != &lt;span class=&quot;code-keyword&quot;&gt;null&lt;/span&gt;) {
        PlanKeyValuePair.Builder kvp = PlanKeyValuePair.newBuilder();
        kvp.setKey(entry.getKey());
        kvp.setValue(val);
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;which is simpler to read and understand what&apos;s going on. As a bonus it avoids the double-lookup on the conf key in the common case where the value is not null.&lt;/p&gt;

&lt;p&gt;There&apos;s no need for the debug check before doing the debug logs. One main benefit of SLF4J&apos;s API vs. log4j is avoiding all the explicit log level checks if all we&apos;re doing is passing positional parameters for the message that don&apos;t need to be computed just for the log.&lt;/p&gt;

&lt;p&gt;I don&apos;t think it&apos;s worth exposing a public static for the debug log message. It&apos;s reaching cross-module and exposes potential reference outside of Tez.&lt;/p&gt;</comment>
                            <comment id="16389018" author="ewohlstadter" created="Wed, 7 Mar 2018 04:38:53 +0000"  >
&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment&lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12913265/TEZ-3874.5.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12913265/TEZ-3874.5.patch&lt;/a&gt;&lt;br/&gt;
  against master revision c34e46c.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 2 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  There were no new javadoc warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 3.0.1) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-TEZ-Build/2736//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-TEZ-Build/2736//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-TEZ-Build/2736//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-TEZ-Build/2736//console&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;This message is automatically generated.&lt;/p&gt;</comment>
                            <comment id="16389023" author="ewohlstadter" created="Wed, 7 Mar 2018 04:46:58 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=jlowe&quot; class=&quot;user-hover&quot; rel=&quot;jlowe&quot;&gt;jlowe&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Thanks again for the feedback. I think I&apos;ve addressed it &lt;a href=&quot;https://issues.apache.org/jira/browse/TEZ-3874&quot; title=&quot;NPE in TezClientUtils when &amp;quot;yarn.resourcemanager.zk-address&amp;quot; is present in Configuration&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TEZ-3874&quot;&gt;&lt;del&gt;TEZ-3874&lt;/del&gt;&lt;/a&gt;.5.patch.&#160;&lt;/p&gt;</comment>
                            <comment id="16389712" author="jlowe" created="Wed, 7 Mar 2018 15:42:22 +0000"  >&lt;p&gt;Thanks for updating the patch!  Looks much better overall, just one nit left.  testNotNullKvpWithValueReplacement is no longer testing Tez code.  It creates a mocked object and verifies the mock behaves properly, but that does not test anything from Tez.  The test along with MockKeyFailureConfiguration should be removed.&lt;/p&gt;

&lt;p&gt;+1 after that change.&lt;/p&gt;</comment>
                            <comment id="16393049" author="jlowe" created="Fri, 9 Mar 2018 15:58:17 +0000"  >&lt;p&gt;From precommit build:&lt;/p&gt;
&lt;hr /&gt;
&lt;p&gt;&lt;font color=&quot;green&quot;&gt;+1 overall&lt;/font&gt;.  Here are the results of testing the latest attachment&lt;br/&gt;
  &lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12913644/TEZ-3874.6.patch&quot; class=&quot;external-link&quot; rel=&quot;nofollow&quot;&gt;http://issues.apache.org/jira/secure/attachment/12913644/TEZ-3874.6.patch&lt;/a&gt;&lt;br/&gt;
  against master revision 82d73b3.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 @author&lt;/font&gt;.  The patch does not contain any @author tags.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 tests included&lt;/font&gt;.  The patch appears to include 2 new or modified test files.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javac&lt;/font&gt;.  The applied patch does not increase the total number of javac compiler warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 javadoc&lt;/font&gt;.  There were no new javadoc warning messages.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 findbugs&lt;/font&gt;.  The patch does not introduce any new Findbugs (version 3.0.1) warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 release audit&lt;/font&gt;.  The applied patch does not increase the total number of release audit warnings.&lt;/p&gt;

&lt;p&gt;    &lt;font color=&quot;green&quot;&gt;+1 core tests&lt;/font&gt;.  The patch passed unit tests in .&lt;/p&gt;

&lt;p&gt;Test results: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-TEZ-Build/2741//testReport/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-TEZ-Build/2741//testReport/&lt;/a&gt;&lt;br/&gt;
Console output: &lt;a href=&quot;https://builds.apache.org/job/PreCommit-TEZ-Build/2741//console&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/PreCommit-TEZ-Build/2741//console&lt;/a&gt;&lt;/p&gt;
&lt;hr /&gt;

&lt;p&gt;Committing this.&lt;/p&gt;</comment>
                            <comment id="16393060" author="jlowe" created="Fri, 9 Mar 2018 16:04:26 +0000"  >&lt;p&gt;Thanks, Eric!  I committed this to master.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                            <outwardlinks description="relates to">
                                        <issuelink>
            <issuekey id="13122953">HADOOP-15093</issuekey>
        </issuelink>
                            </outwardlinks>
                                                        </issuelinktype>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="13093006">HADOOP-14741</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12900764" name="TEZ-3874.1.patch" size="3735" author="ewohlstadter" created="Tue, 5 Dec 2017 23:32:42 +0000"/>
                            <attachment id="12912688" name="TEZ-3874.3.patch" size="10441" author="ewohlstadter" created="Thu, 1 Mar 2018 23:18:36 +0000"/>
                            <attachment id="12913263" name="TEZ-3874.4.patch" size="9600" author="ewohlstadter" created="Tue, 6 Mar 2018 20:49:06 +0000"/>
                            <attachment id="12913265" name="TEZ-3874.5.patch" size="9814" author="ewohlstadter" created="Tue, 6 Mar 2018 21:06:16 +0000"/>
                            <attachment id="12913644" name="TEZ-3874.6.patch" size="8870" author="ewohlstadter" created="Thu, 8 Mar 2018 18:29:29 +0000"/>
                            <attachment id="12907433" name="TEZ-3874.patch.2" size="13248" author="ewohlstadter" created="Wed, 24 Jan 2018 05:39:49 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>6.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310191" key="com.atlassian.jira.plugin.system.customfieldtypes:multicheckboxes">
                        <customfieldname>Hadoop Flags</customfieldname>
                        <customfieldvalues>
                                <customfieldvalue key="10343"><![CDATA[Reviewed]]></customfieldvalue>
    
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            7 years, 36 weeks, 1 day ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i3nkbj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>