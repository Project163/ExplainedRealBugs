<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 21:54:27 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[TEZ-345] Command line -D parameters no longer respected in the AM</title>
                <link>https://issues.apache.org/jira/browse/TEZ-345</link>
                <project id="12314426" key="TEZ">Apache Tez</project>
                    <description>&lt;p&gt;-D parameters specified at command line are no longer used in the AM (likely broken after &lt;a href=&quot;https://issues.apache.org/jira/browse/TEZ-323&quot; title=&quot;Start DAG after all services have started&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TEZ-323&quot;&gt;&lt;del&gt;TEZ-323&lt;/del&gt;&lt;/a&gt;) - specifically scheduler options like heartbeat time, reuse etc. This would have to be reconsiled with &lt;a href=&quot;https://issues.apache.org/jira/browse/TEZ-340&quot; title=&quot;[Umbrella] Support Tez Sessions&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TEZ-340&quot;&gt;&lt;del&gt;TEZ-340&lt;/del&gt;&lt;/a&gt;, &lt;a href=&quot;https://issues.apache.org/jira/browse/TEZ-341&quot; title=&quot;Allow DAG to be submitted to an AM after it has started&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TEZ-341&quot;&gt;&lt;del&gt;TEZ-341&lt;/del&gt;&lt;/a&gt; which would allow multiple DAGs to be submitted via a single AM.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12662033">TEZ-345</key>
            <summary>Command line -D parameters no longer respected in the AM</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="2" iconUrl="https://issues.apache.org/jira/images/icons/priorities/critical.svg">Critical</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="bikassaha">Bikas Saha</assignee>
                                    <reporter username="sseth">Siddharth Seth</reporter>
                        <labels>
                            <label>TEZ-0.2.0</label>
                    </labels>
                <created>Tue, 6 Aug 2013 04:58:14 +0000</created>
                <updated>Sun, 1 Dec 2013 20:20:37 +0000</updated>
                            <resolved>Wed, 7 Aug 2013 02:18:18 +0000</resolved>
                                                    <fixVersion>0.2.0</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="13730382" author="bikassaha" created="Tue, 6 Aug 2013 05:38:07 +0000"  >&lt;p&gt;Yes. That must be because the DAGplan brings in both the DAG specific and AM configurations. How can we separate AM configurations (scheduler option) from DAG configuration (slow start values of VertexScheduler)?&lt;/p&gt;</comment>
                            <comment id="13730433" author="sseth" created="Tue, 6 Aug 2013 06:32:46 +0000"  >&lt;p&gt;This really depends on where we&apos;re going with the AM. Will it run a single DAG at a time, or can it run multiple DAGs concurrently. Scheduling configuration should likely be DAG specific.&lt;br/&gt;
IAC, DAG configuration vs AM configuration is a useful distinction to have. As is, separating AM configuration from Client configuration and Runtime configuration. &lt;/p&gt;</comment>
                            <comment id="13731250" author="hitesh" created="Tue, 6 Aug 2013 20:53:06 +0000"  >&lt;p&gt;In createFinalAMConf, are we ignoring amConf being passed in as null? Also, as Sid mentioned earlier, we need a distinction on what configs are across DAGs and only pass those ones in to the AM.&lt;/p&gt;

&lt;p&gt;Missing debug level option to serialize amConf in text mode ( similar option exists for the dag plan )?&lt;/p&gt;

&lt;p&gt;s/DAGPlan.Builder jobBuilder/DAGPlan.Builder dagBuilder/ ?&lt;/p&gt;

&lt;p&gt;In &quot;DAGPlan createDag(Configuration dagConf)&quot;, can dagConf be null? If null, it seems like settings in the pb get ignored?&lt;/p&gt;

&lt;p&gt;Doing &quot;TezConfiguration conf = new TezConfiguration(new YarnConfiguration());&quot; inside the AM implies reliance on a tez-site.xml on the cluster which can potentially have different settings from the client and raising a question on what is the source of truth. Might be preferable to do &quot;Configuration conf = new YarnConfiguration()&quot; and change the code to just use Configuration in DAGAppMaster#main.&lt;/p&gt;

&lt;p&gt;Follow-up jira for a unit test?&lt;/p&gt;


</comment>
                            <comment id="13731252" author="hitesh" created="Tue, 6 Aug 2013 20:54:00 +0000"  >&lt;p&gt;Forgot to mention that we probably need to localize the conf for tasks too as the conf may affect task behavior. For example, at what interval, the container should ping back to the AM to ask for the next task. &lt;/p&gt;</comment>
                            <comment id="13731303" author="bikassaha" created="Tue, 6 Aug 2013 21:33:50 +0000"  >&lt;p&gt;The distinction is not clear now and should probably be postponed to a different jira.&lt;/p&gt;

&lt;p&gt;Debug is not needed here since the binary file is human readable as it consists of strings anyways.&lt;/p&gt;

&lt;p&gt;Fixed remaining comments and added conf to the task too as a local resource. Interestingly, the task has a defaultConf and a final conf. Not quite sure whats happening there. The change affects the defaultConf and that looks like the right place for it.&lt;/p&gt;

&lt;p&gt;Also changed DAGPlan to use new ConfigurationProto.&lt;/p&gt;

&lt;p&gt;This requires more of an e2e test since the TezClient is a producer and AM is a consumer and both need to work correctly for this to be verified. Existing e2e tests already cover that IMO.&lt;/p&gt;</comment>
                            <comment id="13731425" author="sseth" created="Tue, 6 Aug 2013 23:13:23 +0000"  >&lt;p&gt;Are we expecting the client to specify YARN configuration parameters (like RM address), or is the AM supposed to always pick it up from the deployed yarn-site.xml ?&lt;br/&gt;
Earlier, the client would specify this. Currently, it looks like yarn-site in the classpath is the source.&lt;/p&gt;</comment>
                            <comment id="13731476" author="bikassaha" created="Wed, 7 Aug 2013 00:15:10 +0000"  >&lt;p&gt;It should come from the cluster in which the app is running.&lt;/p&gt;</comment>
                            <comment id="13731492" author="bikassaha" created="Wed, 7 Aug 2013 00:37:56 +0000"  >&lt;p&gt;Patch directly transfer kv pair into conf instead of using the kv-pair-&amp;gt;map helper api&lt;/p&gt;</comment>
                            <comment id="13731563" author="hitesh" created="Wed, 7 Aug 2013 01:42:33 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=sseth&quot; class=&quot;user-hover&quot; rel=&quot;sseth&quot;&gt;sseth&lt;/a&gt; any recommendations on how to address yarn-site issues? Any overrides in yarn-site.xml on the client are not being pushed to the AM. Are overrides valid for hostnames/ports of services - would the cluster config be the better source of truth? For other things such as say configuring the no. of threads used by the client libs definitely need to be sorted out for a client to be able to run the AM with modified settings. &lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=bikassaha&quot; class=&quot;user-hover&quot; rel=&quot;bikassaha&quot;&gt;bikassaha&lt;/a&gt; apart from Sid&apos;s comment, mostly looks good. The tez configuration handling can be addressed in &lt;a href=&quot;https://issues.apache.org/jira/browse/TEZ-346&quot; title=&quot;AM should not use TezConfiguration objects&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TEZ-346&quot;&gt;&lt;del&gt;TEZ-346&lt;/del&gt;&lt;/a&gt;. &lt;/p&gt;
</comment>
                            <comment id="13731574" author="bikassaha" created="Wed, 7 Aug 2013 02:16:11 +0000"  >&lt;p&gt;Thanks. Will commit. It unlikely that we will be trying to override YARN params via Tez. If we need to then we can add a Key-Value map to the submitAPI in TezClient that will bring in specific overrides in a clean manner. Accepting a configuration object will bring in a lot of junk.&lt;/p&gt;</comment>
                            <comment id="13731576" author="bikassaha" created="Wed, 7 Aug 2013 02:18:18 +0000"  >&lt;p&gt;commit d9235851ca8956ef5dab877cd72c0b66100393ea&lt;br/&gt;
Author: Bikas Saha &amp;lt;bikas@apache.org&amp;gt;&lt;br/&gt;
Date:   Tue Aug 6 19:17:29 2013 -0700&lt;/p&gt;

&lt;p&gt;    &lt;a href=&quot;https://issues.apache.org/jira/browse/TEZ-345&quot; title=&quot;Command line -D parameters no longer respected in the AM&quot; class=&quot;issue-link&quot; data-issue-key=&quot;TEZ-345&quot;&gt;&lt;del&gt;TEZ-345&lt;/del&gt;&lt;/a&gt;. Command line -D parameters no longer respected in the AM (bikas)&lt;/p&gt;</comment>
                            <comment id="13731641" author="sseth" created="Wed, 7 Aug 2013 05:04:49 +0000"  >&lt;blockquote&gt;&lt;p&gt;Siddharth Seth any recommendations on how to address yarn-site issues? Any overrides in yarn-site.xml on the client are not being pushed to the AM. Are overrides valid for hostnames/ports of services - would the cluster config be the better source of truth? For other things such as say configuring the no. of threads used by the client libs definitely need to be sorted out for a client to be able to run the AM with modified settings.&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;The TezClient submit API accepts a config which is meant to be AM specific parameters. We should probably just copy all of it over. This could include junk - but it&apos;s left to the users of the API to specify AM configuration only. Their job suffers if there&apos;s junk. IAC, we can handle this if and when we need to change YARN settings in the AM.&lt;/p&gt;</comment>
                            <comment id="13732187" author="bikassaha" created="Wed, 7 Aug 2013 17:28:21 +0000"  >&lt;p&gt;I would much rather replace the configuration parameter in submitapplication with a map&amp;lt;string, string&amp;gt; to ensure users give me exactly the parameters they care for and not all the junk that gets loaded when a new configuration is created.&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12596412" name="TEZ-345.1.patch" size="10248" author="bikassaha" created="Tue, 6 Aug 2013 20:19:44 +0000"/>
                            <attachment id="12596429" name="TEZ-345.2.patch" size="19784" author="bikassaha" created="Tue, 6 Aug 2013 21:33:47 +0000"/>
                            <attachment id="12596470" name="TEZ-345.3.patch" size="19783" author="bikassaha" created="Wed, 7 Aug 2013 00:37:56 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>3.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>342037</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                    <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            12 years, 15 weeks, 3 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i1mzkv:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>342342</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    </customfields>
    </item>
</channel>
</rss>