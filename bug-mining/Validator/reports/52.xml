<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:13:04 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[VALIDATOR-308] Logical errors in util.Flags affecting check of multiple flags as well as flag 64</title>
                <link>https://issues.apache.org/jira/browse/VALIDATOR-308</link>
                <project id="12310494" key="VALIDATOR">Commons Validator</project>
                    <description>&lt;p&gt;I just came across Validator.util.Flags while trying to avoid writing my own flag class. Two errors caught my eye:&lt;/p&gt;

&lt;p&gt;1) Java uses two&apos;s complement representation for its signed primitives. Two important consequences: the highest order bit signifies a negative number; Long.MAX_VALUE is not the value that has all bits set. This affects flag.isOn(long) and flag.turnAllOn() .&lt;/p&gt;

&lt;p&gt;2) If I understand correctly, flag.isOn(long) is supposed to test if flag has ALL bits set which are also set in the long argument. Comparing against 0 is the wrong way to do this, even when correcting for the mistake from 1). By comparing against 0, the test merely checks if the two values have ANY bits in common, which is not what the method&apos;s documentation seems to imply.&lt;/p&gt;

&lt;p&gt;These cases don&apos;t seem to get much use, otherwise this would be a serious problem. (And already be fixed, is my guess.) But still, it is bad enough to completely ruin the day of anyone who happens to rely on these features, and the poor soul would rightly curse anyone who allowed them to persist in this wretched state.&lt;/p&gt;

&lt;p&gt;After submitting this, I can hopefully attach the patch I made. Actually there are two separate patches: one for the test, which illustrates the problems, and a very simple one for the Flags implementation, which fixes them.&lt;/p&gt;

&lt;p&gt;Cheerio! &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</description>
                <environment>&lt;p&gt;any; flawed logic is independent of environment&lt;/p&gt;</environment>
        <key id="12600726">VALIDATOR-308</key>
            <summary>Logical errors in util.Flags affecting check of multiple flags as well as flag 64</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="4" iconUrl="https://issues.apache.org/jira/images/icons/priorities/minor.svg">Minor</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="tilx">Til Boerner</reporter>
                        <labels>
                            <label>flags</label>
                            <label>patch</label>
                    </labels>
                <created>Mon, 30 Jul 2012 21:06:29 +0000</created>
                <updated>Tue, 13 Jan 2015 20:02:23 +0000</updated>
                            <resolved>Sun, 4 Jan 2015 04:45:59 +0000</resolved>
                                    <version>1.4.0 Release</version>
                                    <fixVersion>1.4.1 Release</fixVersion>
                                    <component>Framework</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                    <workratio workratioPercent="0"/>
                                    <progress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </progress>
                                    <aggregateprogress percentage="0">
                                    <originalProgress>
                                                    <row percentage="100" backgroundColor="#89afd7"/>
                                            </originalProgress>
                                                    <currentProgress>
                                                    <row percentage="0" backgroundColor="#51a825"/>
                                                    <row percentage="100" backgroundColor="#ec8e00"/>
                                            </currentProgress>
                            </aggregateprogress>
                                    <timeoriginalestimate seconds="900">0.25h</timeoriginalestimate>
                            <timeestimate seconds="900">0.25h</timeestimate>
                                        <comments>
                            <comment id="13425238" author="tilx" created="Mon, 30 Jul 2012 21:07:39 +0000"  >&lt;p&gt;Patches for tests and implementation of util.Flags&lt;/p&gt;</comment>
                            <comment id="14263755" author="sebb@apache.org" created="Sun, 4 Jan 2015 04:45:59 +0000"  >&lt;p&gt;Thanks!&lt;/p&gt;

&lt;p&gt;Patches applied with minor changes; used hex representation to show bits more explicitly.&lt;/p&gt;

&lt;p&gt;URL: &lt;a href=&quot;http://svn.apache.org/r1649290&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/r1649290&lt;/a&gt;&lt;br/&gt;
Log:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/VALIDATOR-308&quot; title=&quot;Logical errors in util.Flags affecting check of multiple flags as well as flag 64&quot; class=&quot;issue-link&quot; data-issue-key=&quot;VALIDATOR-308&quot;&gt;&lt;del&gt;VALIDATOR-308&lt;/del&gt;&lt;/a&gt; Logical errors in util.Flags affecting check of multiple flags as well as flag 64&lt;/p&gt;

&lt;p&gt;Modified:&lt;br/&gt;
    commons/proper/validator/trunk/RELEASE-NOTES.txt&lt;br/&gt;
    commons/proper/validator/trunk/src/changes/changes.xml&lt;br/&gt;
    commons/proper/validator/trunk/src/main/java/org/apache/commons/validator/util/Flags.java&lt;br/&gt;
    commons/proper/validator/trunk/src/test/java/org/apache/commons/validator/util/FlagsTest.java&lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12538413" name="flags_impl_patch.diff" size="692" author="tilx" created="Mon, 30 Jul 2012 21:07:38 +0000"/>
                            <attachment id="12538414" name="flags_test_patch.diff" size="995" author="tilx" created="Mon, 30 Jul 2012 21:07:38 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>2.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>292970</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 45 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0sphj:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>165606</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>