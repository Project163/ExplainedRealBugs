<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:12:52 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[VALIDATOR-220] EmailValidator fails with ArrayIndexOutOfBoundsException on domain names longer than 10 segments</title>
                <link>https://issues.apache.org/jira/browse/VALIDATOR-220</link>
                <project id="12310494" key="VALIDATOR">Commons Validator</project>
                    <description>&lt;p&gt;The EmailValidator class, specifically, the &quot;protected boolean isValidSymbolicDomain(String domain)&quot; method makes an assumption on the PERL RegEX rules, specifically, that no more than 10 domains/subdomains may be specified in an email address.  I.e. an email address of &quot;foo@bar.2.3.4.5.6.7.8.9.com&quot; is valid according to the EmailValidator whereas an email address of &quot;foo@bar.1.2.3.4.5.6.7.8.9.com&quot; causes isValidSymbolicDomain(String) to throw an ArrayIndexOutOfBoundsException because the &quot;domainSegment&quot; local variable is hard-coded to have a length of 10.  &lt;/p&gt;

&lt;p&gt;Whether or not this is due to a limitation in PERL w.r.t. the maximum number of allowed groupings, I do not know, but the RFC for email addresses does not appear to specify a maximum number.  Additionally, although I couldn&apos;t find it in the RFC, Wikipedia says that the maximum number of characters for the domain name is 255 - though I am very hesitant to cite/use Wikipedia as an official source...&lt;/p&gt;

&lt;p&gt;Granted, I&apos;ve never seen a domain name w/ more than 5 subdomain names, let alone 10, but it seems like it should be supported regardless.&lt;/p&gt;

&lt;p&gt;I&apos;d submit a patch, but I wanted to discuss possible courses of action and determine the &quot;right&quot; (or at least acceptable) one.  Possible solutions are:&lt;/p&gt;

&lt;p&gt;1.  check if the counter i in the for loop is &amp;gt; 10 and perform some action that stops the iterative process.&lt;br/&gt;
2.  if the max number of groupings in PERL RegEX is 10, maybe we shouldn&apos;t use RegEX to determine the groupings.&lt;br/&gt;
3.  if, per the RFC, the max number of domain name groupings is 10, then the code should check for this.&lt;/p&gt;

&lt;p&gt;Please let me know if you 1) have an alternative solution and 2) want me to code a/the fix.&lt;/p&gt;</description>
                <environment>&lt;p&gt;$ uname -a&lt;br/&gt;
Linux frisky 2.6.17-10-generic #2 SMP Tue Dec 5 22:28:26 UTC 2006 i686 GNU/Linux&lt;/p&gt;</environment>
        <key id="12360555">VALIDATOR-220</key>
            <summary>EmailValidator fails with ArrayIndexOutOfBoundsException on domain names longer than 10 segments</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="niallp">Niall Pemberton</assignee>
                                    <reporter username="icfantv">Adam Gordon</reporter>
                        <labels>
                    </labels>
                <created>Mon, 15 Jan 2007 18:54:17 +0000</created>
                <updated>Mon, 12 Nov 2007 19:25:29 +0000</updated>
                            <resolved>Thu, 1 Nov 2007 04:49:37 +0000</resolved>
                                    <version>1.3.0 Release</version>
                    <version>1.3.1 Release</version>
                                    <fixVersion>1.4.0 Release</fixVersion>
                                    <component>Framework</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>0</watches>
                                                                                                                <comments>
                            <comment id="12464975" author="niallp" created="Mon, 15 Jan 2007 20:44:07 +0000"  >&lt;p&gt;This is the same issue that was reported resolved for UrlValidator in &lt;a href=&quot;https://issues.apache.org/jira/browse/VALIDATOR-202&quot; title=&quot;URL Validator isValid method fails with java.lang.ArrayIndexOutOfBoundsException at org.apache.commons.validator.UrlValidator.isValidAuthority(UrlValidator.java:367)&quot; class=&quot;issue-link&quot; data-issue-key=&quot;VALIDATOR-202&quot;&gt;&lt;del&gt;VALIDATOR-202&lt;/del&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Currently the plan is to refactor the remaining validation routines into the new &quot;routines&quot; package, removing the dependency on Jakarata ORO (using JDK 1.4 built in regular expression support). As part of that I plan on creating a &quot;domain validator&quot; that both the Email and URL validators share. There have been a number of issues that have come up like this that get fixed in one of them but not the other - having a common &quot;domain validator&quot; should resolve this.&lt;/p&gt;</comment>
                            <comment id="12464991" author="icfantv" created="Mon, 15 Jan 2007 21:21:54 +0000"  >&lt;p&gt;Oh, excellent.  Thanks for the heads up.&lt;/p&gt;</comment>
                            <comment id="12539280" author="bens" created="Thu, 1 Nov 2007 04:49:37 +0000"  >&lt;p&gt;Resolving since the new EmailValidator is complete and is verified not to suffer from this issue.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12352337">VALIDATOR-202</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>198702</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 years, 4 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i0spyn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>165683</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>