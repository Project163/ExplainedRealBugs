<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:13:11 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[VALIDATOR-361] UrlValidator rejects new gTLDs with more than 4 characters, </title>
                <link>https://issues.apache.org/jira/browse/VALIDATOR-361</link>
                <project id="12310494" key="VALIDATOR">Commons Validator</project>
                    <description>&lt;p&gt;org.apache.commons.validator.UrlValidator#isValid rejects TLD more than 4 characters.(for example,  &lt;a href=&quot;http://hello.tokyo/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://hello.tokyo/&lt;/a&gt; )&lt;/p&gt;

&lt;p&gt;A lot of new gTLDs has more than 4 characters(  &lt;a href=&quot;http://www.icann.org/registries/listing.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://www.icann.org/registries/listing.html&lt;/a&gt; ), and these domains cannnot pass URL validation.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12781880">VALIDATOR-361</key>
            <summary>UrlValidator rejects new gTLDs with more than 4 characters, </summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="hiroyuki.ohnaka">Hiroyuki, Ohnaka</reporter>
                        <labels>
                    </labels>
                <created>Fri, 13 Mar 2015 18:10:15 +0000</created>
                <updated>Mon, 23 Nov 2015 23:24:36 +0000</updated>
                            <resolved>Thu, 5 Nov 2015 00:50:18 +0000</resolved>
                                    <version>1.4.1 Release</version>
                                    <fixVersion>1.5.0</fixVersion>
                                        <due></due>
                            <votes>1</votes>
                                    <watches>3</watches>
                                                                                                                <comments>
                            <comment id="14487677" author="sorin_postelnicu" created="Thu, 9 Apr 2015 17:12:13 +0000"  >&lt;p&gt;By inspecting the source code of DomainValidator (which is the common component for validating domain names, used by UrlValidator and EmailValidator), we can see the following possibilities for improvement:&lt;/p&gt;

&lt;p&gt;1) The list of generic TLDs is hard-coded in the source, which is not very feasible: Every time the list of generic TLDs is updated by ICANN, the commons-validator library needs to be updated.&lt;/p&gt;

&lt;p&gt;2) The class is defined as a singleton with a private constructor, so this makes it difficult for a programmer (encountering this problem) to subclass it and override the isValidGenericTld() to bypass the problem.&lt;/p&gt;

&lt;p&gt;3) The first and most simple improvement is to replace the private constructor with a protected constructor (similar to the one in EmailValidator):&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;    /**
     * Protected constructor &lt;span class=&quot;code-keyword&quot;&gt;for&lt;/span&gt; subclasses to use.
     *
     * @param allowLocal Should local addresses be considered valid?
     */
    &lt;span class=&quot;code-keyword&quot;&gt;protected&lt;/span&gt; DomainValidator(&lt;span class=&quot;code-object&quot;&gt;boolean&lt;/span&gt; allowLocal) {
       &lt;span class=&quot;code-keyword&quot;&gt;this&lt;/span&gt;.allowLocal = allowLocal;
    }
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;4) The next step for improvement would be to extract the hard-coded list of domains to a separate class called DomainValidatorGenericTldsLoader. Preferably this would be an interface, with the most simple implementation (DomainValidatorGenericTldsLoaderHardCodedImpl) being the current hard-coded list of values.&lt;/p&gt;

&lt;p&gt;5) The next step for improvement would be to extract the list of generic TLDs into a separate file (possibly a .txt file located in the classpath at /org/apache/commons/validator/routines/DomainValidatorGenericTLDs.txt), and then to load (and sort) the list of domains in another implementation of the DomainValidatorGenericTldsLoader interface, that will be called when DomainValidator is initialized.&lt;/p&gt;

&lt;p&gt;6) And finally, an extra possibility is also to replace the singleton pattern with a Dependency-Injection pattern, in which the DomainValidatorGenericTldsLoader is injected by the user of the DomainValidator, with the possibility to use any implementation (DomainValidatorGenericTldsLoaderHardCodedImpl, DomainValidatorGenericTldsLoaderTextFileImpl, or any custom implementation).&lt;/p&gt;</comment>
                            <comment id="14990827" author="sebb@apache.org" created="Thu, 5 Nov 2015 00:50:18 +0000"  >&lt;p&gt;The originally reported problem has long since been fixed in trunk.&lt;br/&gt;
Added a test case.&lt;/p&gt;

&lt;p&gt;As to configurability, see &lt;a href=&quot;https://issues.apache.org/jira/browse/VALIDATOR-341&quot; title=&quot;Make TLD list configurable&quot; class=&quot;issue-link&quot; data-issue-key=&quot;VALIDATOR-341&quot;&gt;&lt;del&gt;VALIDATOR-341&lt;/del&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;URL: &lt;a href=&quot;http://svn.apache.org/viewvc?rev=1712701&amp;amp;view=rev&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://svn.apache.org/viewvc?rev=1712701&amp;amp;view=rev&lt;/a&gt;&lt;br/&gt;
Log:&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/VALIDATOR-361&quot; title=&quot;UrlValidator rejects new gTLDs with more than 4 characters, &quot; class=&quot;issue-link&quot; data-issue-key=&quot;VALIDATOR-361&quot;&gt;&lt;del&gt;VALIDATOR-361&lt;/del&gt;&lt;/a&gt; UrlValidator rejects new gTLDs with more than 4 characters&lt;/p&gt;

&lt;p&gt;Modified:&lt;br/&gt;
    commons/proper/validator/trunk/src/changes/changes.xml&lt;br/&gt;
    commons/proper/validator/trunk/src/test/java/org/apache/commons/validator/routines/UrlValidatorTest.java&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="10030">
                    <name>Reference</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12736460">VALIDATOR-341</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 2 weeks, 2 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i26r2v:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>