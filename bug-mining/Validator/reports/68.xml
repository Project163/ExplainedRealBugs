<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Sat Nov 08 22:13:10 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF JIRA</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[VALIDATOR-376] EmailValidator says addresses such as x.y@gmail are valid although most mail apps will fail to send it</title>
                <link>https://issues.apache.org/jira/browse/VALIDATOR-376</link>
                <project id="12310494" key="VALIDATOR">Commons Validator</project>
                    <description>&lt;p&gt;The &lt;a href=&quot;https://issues.apache.org/jira/browse/VALIDATOR-273&quot; title=&quot;EmailValidator does not support mailboxes at TLDs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;VALIDATOR-273&quot;&gt;&lt;del&gt;VALIDATOR-273&lt;/del&gt;&lt;/a&gt; patch causes EmailValidator to allow addresses such as x.y@gmail. Unfortunately, this is causing us problems as none of the email apps we have tried will actually allow that email address to be sent. Although the RFCs may state it is valid, in practice it apparently isn&apos;t. Some sort of option is needed to allow providing just the domain to fail. As a consequence we have had to revert to a prior release of commons-validator.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12901201">VALIDATOR-376</key>
            <summary>EmailValidator says addresses such as x.y@gmail are valid although most mail apps will fail to send it</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="-1">Unassigned</assignee>
                                    <reporter username="rgoers">Ralph Goers</reporter>
                        <labels>
                    </labels>
                <created>Tue, 29 Sep 2015 00:46:23 +0000</created>
                <updated>Tue, 26 Jul 2016 09:32:23 +0000</updated>
                            <resolved>Sun, 25 Oct 2015 06:05:01 +0000</resolved>
                                    <version>1.4.1 Release</version>
                                    <fixVersion>1.5.0</fixVersion>
                                    <component>Routines</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="14934457" author="b.eckenfels" created="Tue, 29 Sep 2015 01:22:01 +0000"  >&lt;p&gt;I guess there are two options. When doing a  purely lexicographic validity check of email addresses the Validator needs a list of valid TLDs and a mechanism to update them. (either all TLDs or specifically the dotlessones: &lt;a href=&quot;https://tools.ietf.org/html/rfc7085#section-2.3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://tools.ietf.org/html/rfc7085#section-2.3&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;When doing network based validation it needs a way to deal with 127.0.53.53 (and similiar?) blacklist answers. In case of @gmail. the MX records are caused by  &lt;a href=&quot;https://icann.org/namecollision&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://icann.org/namecollision&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="14936432" author="ralph.goers@dslextreme.com" created="Wed, 30 Sep 2015 06:30:14 +0000"  >&lt;p&gt;So how could this be accomplished?  I&apos;m happy to write the code if I have some idea as to what the recommended way to fix this might be.&lt;/p&gt;</comment>
                            <comment id="14936447" author="b.eckenfels" created="Wed, 30 Sep 2015 06:51:05 +0000"  >&lt;p&gt;Ralph, in Validator itself I see 3 possibilities:&lt;/p&gt;

&lt;p&gt;A) revert &lt;a href=&quot;https://issues.apache.org/jira/browse/VALIDATOR-273&quot; title=&quot;EmailValidator does not support mailboxes at TLDs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;VALIDATOR-273&quot;&gt;&lt;del&gt;VALIDATOR-273&lt;/del&gt;&lt;/a&gt; or make it configurable if you want to accept dotless hosts. There are some valid but most wont encounter them in the wild&lt;br/&gt;
B) have a list of well known dotless hosts (see RFC above), the list needs to be maintained but missing entries are even less likely than A) to be encountered&lt;br/&gt;
C) have a list of all well known TLDs and verify email address against it. That list is more dynamic than B and not all TLDs are also dotless hosts, but its an additional check also usefull for the non-dotless case&lt;br/&gt;
D) accept that a purely syntax based check will not recognize all invalid addresses, a user entering x@gmail or x@aaaaaaaaaxxxx.com both could fool any more sophisticated whitelists. In your software looking up the address in DNS is a first step (and rejecting any unknown name or name which responds with 127.x.x.x). (Sending challenge mails is the second)&lt;/p&gt;

&lt;p&gt;Maybe implement b+c+d where b ships a default list and b+c allow a setter to load/refresh the lists. Applications can then chose to reload them or simply ship a resource.&lt;/p&gt;</comment>
                            <comment id="14936448" author="jochen@apache.org" created="Wed, 30 Sep 2015 06:52:44 +0000"  >&lt;p&gt;Gut reaction (and without validating feasability):&lt;/p&gt;

&lt;p&gt;Optionally perform a DNS lookup for MX records. Below you find an example, how a DNS lookup from the command line reveals a meaningful reply in the case of &quot;gmail.com&quot;, but not in the case of &quot;gmail&quot;.&lt;/p&gt;

&lt;p&gt;Important part: Make this optional. There are a multitude of scenarios, where DNS lookups will not be possible.&lt;/p&gt;

&lt;p&gt;-bash-3.2$ nslookup -type=mx gmail&lt;br/&gt;
Server:         85.214.7.22&lt;br/&gt;
Address:        85.214.7.22#53&lt;/p&gt;

&lt;p&gt;Non-authoritative answer:&lt;br/&gt;
gmail   mail exchanger = 10 your-dns-needs-immediate-attention.gmail.&lt;/p&gt;

&lt;p&gt;Authoritative answers can be found from:&lt;br/&gt;
your-dns-needs-immediate-attention.gmail        internet address = 127.0.53.53&lt;/p&gt;

&lt;p&gt;-bash-3.2$ nslookup -type=mx gmail.com&lt;br/&gt;
Server:         85.214.7.22&lt;br/&gt;
Address:        85.214.7.22#53&lt;/p&gt;

&lt;p&gt;Non-authoritative answer:&lt;br/&gt;
gmail.com       mail exchanger = 40 alt4.gmail-smtp-in.l.google.com.&lt;br/&gt;
gmail.com       mail exchanger = 10 alt1.gmail-smtp-in.l.google.com.&lt;br/&gt;
gmail.com       mail exchanger = 20 alt2.gmail-smtp-in.l.google.com.&lt;br/&gt;
gmail.com       mail exchanger = 30 alt3.gmail-smtp-in.l.google.com.&lt;br/&gt;
gmail.com       mail exchanger = 5 gmail-smtp-in.l.google.com.&lt;/p&gt;

&lt;p&gt;Authoritative answers can be found from:&lt;br/&gt;
alt3.gmail-smtp-in.l.google.com internet address = 173.194.72.27&lt;br/&gt;
alt1.gmail-smtp-in.l.google.com internet address = 74.125.68.26&lt;br/&gt;
alt2.gmail-smtp-in.l.google.com internet address = 74.125.23.26&lt;br/&gt;
alt4.gmail-smtp-in.l.google.com internet address = 74.125.25.26&lt;br/&gt;
gmail-smtp-in.l.google.com      internet address = 74.125.136.26&lt;/p&gt;
</comment>
                            <comment id="14936466" author="ralph.goers@dslextreme.com" created="Wed, 30 Sep 2015 07:02:54 +0000"  >&lt;p&gt;Jochen - Are you suggesting that the application verify the domain every time it has to deal with an email address? That seems like it could get pretty expensive to do. I would imagine it would more likely be handled by sending an email to the user to confirm their email address.&lt;/p&gt;

&lt;p&gt;I thought the point of EmailValidator was to verify that the syntax of an email address was correct. The issue is that although the RFC might say that just the domain is allowed that all the SMTP servers I have tried will fail to even accept the message with an address like that. So in the real world the syntax is correct in only a few cases.&lt;/p&gt;</comment>
                            <comment id="14936468" author="b.eckenfels" created="Wed, 30 Sep 2015 07:06:17 +0000"  >&lt;p&gt;Have to correct myself, EmailValidator is using DomainValidator and that one already checks for a hardcoded list of TLD and gmail is on it. It will be useable for emails in the future and the validator is allowed to accept it - it might even be used by millions .... so the case C) is there and the application should do D).&lt;/p&gt;

&lt;p&gt;I am not sure if it is a good idea to provide actual network accessing code, as you typically need retries, different policies and proxy support.&lt;/p&gt;</comment>
                            <comment id="14936470" author="ralph.goers@dslextreme.com" created="Wed, 30 Sep 2015 07:07:29 +0000"  >&lt;p&gt;Obviously there is a reason that &lt;a href=&quot;https://issues.apache.org/jira/browse/VALIDATOR-273&quot; title=&quot;EmailValidator does not support mailboxes at TLDs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;VALIDATOR-273&quot;&gt;&lt;del&gt;VALIDATOR-273&lt;/del&gt;&lt;/a&gt; was requested to be implemented. What I would prefer is that the default behavior of the isValid(String email) method be reverted back to the behavior prior to &lt;a href=&quot;https://issues.apache.org/jira/browse/VALIDATOR-273&quot; title=&quot;EmailValidator does not support mailboxes at TLDs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;VALIDATOR-273&quot;&gt;&lt;del&gt;VALIDATOR-273&lt;/del&gt;&lt;/a&gt; so that applications can easily migrate to the latest version. I would then suggest that the getInstance() method accept an additional boolean to enable the behavior that is currently implemented.&lt;/p&gt;</comment>
                            <comment id="14936479" author="jochen@apache.org" created="Wed, 30 Sep 2015 07:21:43 +0000"  >&lt;p&gt;Ralph: I am suggesting that we verify the domain &lt;b&gt;if the user requests it&lt;/b&gt;. That covers the &quot;expensive&quot; parts, IMO.&lt;/p&gt;</comment>
                            <comment id="14936483" author="ralph.goers@dslextreme.com" created="Wed, 30 Sep 2015 07:25:06 +0000"  >&lt;p&gt;OK - so are you saying that by default you would get the behavior that existed before &lt;a href=&quot;https://issues.apache.org/jira/browse/VALIDATOR-273&quot; title=&quot;EmailValidator does not support mailboxes at TLDs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;VALIDATOR-273&quot;&gt;&lt;del&gt;VALIDATOR-273&lt;/del&gt;&lt;/a&gt; was applied? If so, I agree with that. I ask because I think the fix that was applied there is going to actually break more applications than it helps.&lt;/p&gt;</comment>
                            <comment id="14936643" author="sebb@apache.org" created="Wed, 30 Sep 2015 09:46:09 +0000"  >&lt;p&gt;Note that version 1.4.1 has already been released.&lt;br/&gt;
So reverting to previous behaviour would be a functional change, and needs to be very well documented if it is considered OK to do.&lt;/p&gt;

&lt;p&gt;I am generally against adding network code to Validator runtime; that seems completely out of scope.&lt;br/&gt;
However it might be possible to add support for a user-provided callback to handle such cases.&lt;/p&gt;

&lt;p&gt;There&apos;s also the question of what the RFCs really say.&lt;br/&gt;
The example in &lt;a href=&quot;https://issues.apache.org/jira/browse/VALIDATOR-273&quot; title=&quot;EmailValidator does not support mailboxes at TLDs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;VALIDATOR-273&quot;&gt;&lt;del&gt;VALIDATOR-273&lt;/del&gt;&lt;/a&gt; used a country code, however the patch allowed all TLDs, including country-codes.&lt;br/&gt;
Was that correct? I had a brief look at RFC 5321 but the answer is not obvious.&lt;/p&gt;

&lt;p&gt;Also, just because one or more mail apps do not work with addresses such as x.y@gmail does not mean that such addresses are invalid.&lt;br/&gt;
It&apos;s not unknown for mail apps to make unwarranted assumptions about the format of mail addresses.&lt;/p&gt;</comment>
                            <comment id="14936722" author="ralph.goers@dslextreme.com" created="Wed, 30 Sep 2015 11:16:58 +0000"  >&lt;p&gt;1. IMO the change in &lt;a href=&quot;https://issues.apache.org/jira/browse/VALIDATOR-273&quot; title=&quot;EmailValidator does not support mailboxes at TLDs&quot; class=&quot;issue-link&quot; data-issue-key=&quot;VALIDATOR-273&quot;&gt;&lt;del&gt;VALIDATOR-273&lt;/del&gt;&lt;/a&gt; was a functional change and was not documented. What I am proposing is to revert the default behavior back so people can upgrade from old releases.&lt;br/&gt;
2. I shouldn&apos;t have said &quot;mail app&quot;. It isn&apos;t the mail apps but the smtp servers that are rejecting the email address. The mail apps do act a bit weird when this happens - in Mac mail I get a pop up that says the smtp server is unavailable and it asks me to try another. I know our exchange server is also refusing it but I don&apos;t know how that behaves.&lt;/p&gt;</comment>
                            <comment id="14939210" author="ralph.goers@dslextreme.com" created="Thu, 1 Oct 2015 03:12:19 +0000"  >&lt;p&gt;I have created a patch that reverts the behavior for the default case but still allows the current behavior.&lt;/p&gt;</comment>
                            <comment id="14942702" author="ralph.goers@dslextreme.com" created="Sun, 4 Oct 2015 16:29:34 +0000"  >&lt;p&gt;Has anyone reviewed the patch? I will assume it is OK for me to apply if I don&apos;t hear anything.&lt;/p&gt;</comment>
                            <comment id="14942837" author="sebb@apache.org" created="Sun, 4 Oct 2015 22:28:18 +0000"  >&lt;p&gt;I think this change needs to be documented in changes.xml/ReleaseNotes.&lt;br/&gt;
Although it is reverting to previous behaviour it is still a functional change which could affect some people.&lt;br/&gt;
We failed to be explicit about the change previously; we should not repeat the mistake.&lt;/p&gt;</comment>
                            <comment id="14942838" author="ralph.goers@dslextreme.com" created="Sun, 4 Oct 2015 22:33:44 +0000"  >&lt;p&gt;Two wrongs don&apos;t make a right &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/wink.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;

&lt;p&gt;That sounds reasonable to me.&lt;/p&gt;</comment>
                            <comment id="14971068" author="britter" created="Fri, 23 Oct 2015 14:24:24 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=ralph_goers%40dslextreme.com&quot; class=&quot;user-hover&quot; rel=&quot;ralph_goers@dslextreme.com&quot;&gt;ralph_goers@dslextreme.com&lt;/a&gt; go for it!&lt;/p&gt;</comment>
                            <comment id="14973066" author="ralph.goers@dslextreme.com" created="Sun, 25 Oct 2015 06:04:25 +0000"  >&lt;p&gt;The patch was applied and changes.xml updated.&lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310000">
                    <name>Duplicate</name>
                                                                <inwardlinks description="is duplicated by">
                                        <issuelink>
            <issuekey id="12907316">VALIDATOR-377</issuekey>
        </issuelink>
            <issuelink>
            <issuekey id="12992524">VALIDATOR-398</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                            <issuelinktype id="12310050">
                    <name>Regression</name>
                                                                <inwardlinks description="is broken by">
                                        <issuelink>
            <issuekey id="12414008">VALIDATOR-273</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                            <attachment id="12764528" name="VALIDATOR-376.patch" size="4712" author="rgoers" created="Thu, 1 Oct 2015 03:12:19 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[false]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            10 years, 3 weeks, 6 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2mdyn:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>