{"url":"https://api.github.com/repos/playframework/playframework/issues/7028","repository_url":"https://api.github.com/repos/playframework/playframework","labels_url":"https://api.github.com/repos/playframework/playframework/issues/7028/labels{/name}","comments_url":"https://api.github.com/repos/playframework/playframework/issues/7028/comments","events_url":"https://api.github.com/repos/playframework/playframework/issues/7028/events","html_url":"https://github.com/playframework/playframework/issues/7028","id":211679749,"node_id":"MDU6SXNzdWUyMTE2Nzk3NDk=","number":7028,"title":"[2.5.x]: FakeRequest has a query-string of at least size 1","user":{"login":"gokyo","id":6510179,"node_id":"MDQ6VXNlcjY1MTAxNzk=","avatar_url":"https://avatars.githubusercontent.com/u/6510179?v=4","gravatar_id":"","url":"https://api.github.com/users/gokyo","html_url":"https://github.com/gokyo","followers_url":"https://api.github.com/users/gokyo/followers","following_url":"https://api.github.com/users/gokyo/following{/other_user}","gists_url":"https://api.github.com/users/gokyo/gists{/gist_id}","starred_url":"https://api.github.com/users/gokyo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gokyo/subscriptions","organizations_url":"https://api.github.com/users/gokyo/orgs","repos_url":"https://api.github.com/users/gokyo/repos","events_url":"https://api.github.com/users/gokyo/events{/privacy}","received_events_url":"https://api.github.com/users/gokyo/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2017-03-03T12:50:17Z","updated_at":"2017-03-10T15:38:56Z","closed_at":"2017-03-10T15:38:56Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Regardless the `FakeRequest` object I am creating, its query-string has always a query-string of size 1, which is `Map( -> ArrayBuffer())`.\r\nI would have thought the query-string to be empty.\r\n\r\n### Play Version: 2.5.8\r\n### API: Scala\r\n### Operating System: MacOS 10.11.6\r\n### JDK: Java HotSpot(TM) 64-Bit Server VM (build 25.102-b14, mixed mode)\r\n\r\n### Expected Behavior\r\nWhen I create a `FakeRequest` object without parameters in the `uri`, I expect the query-string to be an empty map.\r\n\r\n### Actual Behavior\r\nThe `FakeRequest` object without parameters in the `uri` has instead this query-string:\r\n`Map( -> ArrayBuffer())`\r\n\r\n### Reproducible Test Case\r\n```\r\n      val params = Map(\r\n        \"client_id\" -> Seq(\"cid\"),\r\n        \"client_secret\" -> Seq(\"secret\")\r\n      )\r\n\r\n      val fakeReq1 = new FakeRequest (\r\n        method = \"POST\",\r\n        uri = \"/\",\r\n        headers = FakeHeaders(),\r\n        body = AnyContentAsFormUrlEncoded(params))\r\n\r\n      println (\"query-string: \" + fakeReq1.queryString)\r\n      // query-string: Map( -> ArrayBuffer())\r\n      println (\"query-string size: \" + fakeReq1.queryString.size)\r\n      // query-string size: 1\r\n\r\n\r\n      val fakeReq2 = new FakeRequest (\r\n        method = \"POST\",\r\n        uri = \"/\",\r\n        headers = FakeHeaders(),\r\n        body = AnyContentAsFormUrlEncoded(params)\r\n      ) {\r\n        // this is the workaround I used to make it working\r\n        override lazy val queryString: Map[String, Seq[String]] = Map.empty\r\n      }\r\n\r\n      println (\"query-string: \" + fakeReq2.queryString)\r\n      // query-string: Map()\r\n      println (\"query-string size: \" + fakeReq2.queryString.size)\r\n      // query-string size: 0\r\n```\r\n","closed_by":{"login":"marcospereira","id":4576,"node_id":"MDQ6VXNlcjQ1NzY=","avatar_url":"https://avatars.githubusercontent.com/u/4576?v=4","gravatar_id":"","url":"https://api.github.com/users/marcospereira","html_url":"https://github.com/marcospereira","followers_url":"https://api.github.com/users/marcospereira/followers","following_url":"https://api.github.com/users/marcospereira/following{/other_user}","gists_url":"https://api.github.com/users/marcospereira/gists{/gist_id}","starred_url":"https://api.github.com/users/marcospereira/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/marcospereira/subscriptions","organizations_url":"https://api.github.com/users/marcospereira/orgs","repos_url":"https://api.github.com/users/marcospereira/repos","events_url":"https://api.github.com/users/marcospereira/events{/privacy}","received_events_url":"https://api.github.com/users/marcospereira/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/playframework/playframework/issues/7028/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/playframework/playframework/issues/7028/timeline","performed_via_github_app":null,"state_reason":"completed"}