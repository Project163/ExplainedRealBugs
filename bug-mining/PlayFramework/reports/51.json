{"url":"https://api.github.com/repos/playframework/playframework/issues/4686","repository_url":"https://api.github.com/repos/playframework/playframework","labels_url":"https://api.github.com/repos/playframework/playframework/issues/4686/labels{/name}","comments_url":"https://api.github.com/repos/playframework/playframework/issues/4686/comments","events_url":"https://api.github.com/repos/playframework/playframework/issues/4686/events","html_url":"https://github.com/playframework/playframework/issues/4686","id":88910420,"node_id":"MDU6SXNzdWU4ODkxMDQyMA==","number":4686,"title":"Use Akka streams for WebSockets API","user":{"login":"jroper","id":105833,"node_id":"MDQ6VXNlcjEwNTgzMw==","avatar_url":"https://avatars.githubusercontent.com/u/105833?v=4","gravatar_id":"","url":"https://api.github.com/users/jroper","html_url":"https://github.com/jroper","followers_url":"https://api.github.com/users/jroper/followers","following_url":"https://api.github.com/users/jroper/following{/other_user}","gists_url":"https://api.github.com/users/jroper/gists{/gist_id}","starred_url":"https://api.github.com/users/jroper/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jroper/subscriptions","organizations_url":"https://api.github.com/users/jroper/orgs","repos_url":"https://api.github.com/users/jroper/repos","events_url":"https://api.github.com/users/jroper/events{/privacy}","received_events_url":"https://api.github.com/users/jroper/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":{"login":"jroper","id":105833,"node_id":"MDQ6VXNlcjEwNTgzMw==","avatar_url":"https://avatars.githubusercontent.com/u/105833?v=4","gravatar_id":"","url":"https://api.github.com/users/jroper","html_url":"https://github.com/jroper","followers_url":"https://api.github.com/users/jroper/followers","following_url":"https://api.github.com/users/jroper/following{/other_user}","gists_url":"https://api.github.com/users/jroper/gists{/gist_id}","starred_url":"https://api.github.com/users/jroper/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jroper/subscriptions","organizations_url":"https://api.github.com/users/jroper/orgs","repos_url":"https://api.github.com/users/jroper/repos","events_url":"https://api.github.com/users/jroper/events{/privacy}","received_events_url":"https://api.github.com/users/jroper/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"jroper","id":105833,"node_id":"MDQ6VXNlcjEwNTgzMw==","avatar_url":"https://avatars.githubusercontent.com/u/105833?v=4","gravatar_id":"","url":"https://api.github.com/users/jroper","html_url":"https://github.com/jroper","followers_url":"https://api.github.com/users/jroper/followers","following_url":"https://api.github.com/users/jroper/following{/other_user}","gists_url":"https://api.github.com/users/jroper/gists{/gist_id}","starred_url":"https://api.github.com/users/jroper/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jroper/subscriptions","organizations_url":"https://api.github.com/users/jroper/orgs","repos_url":"https://api.github.com/users/jroper/repos","events_url":"https://api.github.com/users/jroper/events{/privacy}","received_events_url":"https://api.github.com/users/jroper/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/playframework/playframework/milestones/28","html_url":"https://github.com/playframework/playframework/milestone/28","labels_url":"https://api.github.com/repos/playframework/playframework/milestones/28/labels","id":1170149,"node_id":"MDk6TWlsZXN0b25lMTE3MDE0OQ==","number":28,"title":"2.5.0","description":"","creator":{"login":"jroper","id":105833,"node_id":"MDQ6VXNlcjEwNTgzMw==","avatar_url":"https://avatars.githubusercontent.com/u/105833?v=4","gravatar_id":"","url":"https://api.github.com/users/jroper","html_url":"https://github.com/jroper","followers_url":"https://api.github.com/users/jroper/followers","following_url":"https://api.github.com/users/jroper/following{/other_user}","gists_url":"https://api.github.com/users/jroper/gists{/gist_id}","starred_url":"https://api.github.com/users/jroper/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jroper/subscriptions","organizations_url":"https://api.github.com/users/jroper/orgs","repos_url":"https://api.github.com/users/jroper/repos","events_url":"https://api.github.com/users/jroper/events{/privacy}","received_events_url":"https://api.github.com/users/jroper/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":104,"state":"closed","created_at":"2015-06-18T06:40:52Z","updated_at":"2016-03-06T23:27:23Z","due_on":null,"closed_at":"2016-03-06T23:27:23Z"},"comments":0,"created_at":"2015-06-17T04:42:40Z","updated_at":"2015-08-18T05:09:03Z","closed_at":"2015-08-18T05:09:03Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"This should be the minimum number of changes necessary to change the Play WebSocket API to use Akka streams.\n\nAlthough I haven't looked into it in detail, I guess this means that we would model a WebSocket as being a `Flow[In, Out, _]` instead of a tuple of an iteratee and enumerator.\n\nSo the changes should be as follows:\n- Change WebSocket API to model WebSockets using Flow\n- Modify Play Netty backend to convert the flow to an iteratee/enumerator pair, using the Play reactive streams support for iteratees/enumerators, before processing them as usual using the existing iteratee/enumerator code. **Note** this is obviously not the most performant way to do things, it would be better for Akka streams to sit directly on top of Netty, but the task of bridging Akka streams directly to Netty overlaps with request/response body handling, so should be done once for both requests/responses and websockets, so for now we should just do the minimum.\n- Provide deprecated iteratees/enumerators methods, for use by existing code/documentation/websockets actor, and update anything that needs to be updated to use that.\n- WebSockets tests should, for now, remain unchanged, a future task should be to update them to use Akka streams instead of iteratees.\n- The final part of implementing this is to create new issues for the next steps, eg, update Java API to use Akka streams, update documentation to use Akka streams, update WebSockets actor to use Akka streams, update WebSockets tests to use Akka streams, and use Akka streams Netty bridge rather than Iteratees in the backend implementation.\n","closed_by":{"login":"richdougherty","id":14750,"node_id":"MDQ6VXNlcjE0NzUw","avatar_url":"https://avatars.githubusercontent.com/u/14750?v=4","gravatar_id":"","url":"https://api.github.com/users/richdougherty","html_url":"https://github.com/richdougherty","followers_url":"https://api.github.com/users/richdougherty/followers","following_url":"https://api.github.com/users/richdougherty/following{/other_user}","gists_url":"https://api.github.com/users/richdougherty/gists{/gist_id}","starred_url":"https://api.github.com/users/richdougherty/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/richdougherty/subscriptions","organizations_url":"https://api.github.com/users/richdougherty/orgs","repos_url":"https://api.github.com/users/richdougherty/repos","events_url":"https://api.github.com/users/richdougherty/events{/privacy}","received_events_url":"https://api.github.com/users/richdougherty/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/playframework/playframework/issues/4686/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/playframework/playframework/issues/4686/timeline","performed_via_github_app":null,"state_reason":"completed"}