{"url":"https://api.github.com/repos/playframework/playframework/issues/7262","repository_url":"https://api.github.com/repos/playframework/playframework","labels_url":"https://api.github.com/repos/playframework/playframework/issues/7262/labels{/name}","comments_url":"https://api.github.com/repos/playframework/playframework/issues/7262/comments","events_url":"https://api.github.com/repos/playframework/playframework/issues/7262/events","html_url":"https://github.com/playframework/playframework/issues/7262","id":223282192,"node_id":"MDU6SXNzdWUyMjMyODIxOTI=","number":7262,"title":"JNDI binding of DataSource broken, depending on classpath ordering","user":{"login":"jroper","id":105833,"node_id":"MDQ6VXNlcjEwNTgzMw==","avatar_url":"https://avatars.githubusercontent.com/u/105833?v=4","gravatar_id":"","url":"https://api.github.com/users/jroper","html_url":"https://github.com/jroper","followers_url":"https://api.github.com/users/jroper/followers","following_url":"https://api.github.com/users/jroper/following{/other_user}","gists_url":"https://api.github.com/users/jroper/gists{/gist_id}","starred_url":"https://api.github.com/users/jroper/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jroper/subscriptions","organizations_url":"https://api.github.com/users/jroper/orgs","repos_url":"https://api.github.com/users/jroper/repos","events_url":"https://api.github.com/users/jroper/events{/privacy}","received_events_url":"https://api.github.com/users/jroper/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2017-04-21T05:39:39Z","updated_at":"2017-05-16T00:50:06Z","closed_at":"2017-05-16T00:50:06Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Play 2.6 introduces its own `jndi.properties` file, which contains these properties:\r\n\r\n```\r\njava.naming.factory.initial=tyrex.naming.MemoryContextFactory\r\njava.naming.provider.url=/\r\n```\r\n\r\nTyrex also provides its own `jndi.properties`, which contains these properties:\r\n\r\n```\r\njava.naming.factory.initial=tyrex.naming.MemoryContextFactory\r\njava.naming.provider.url=\r\n```\r\n\r\nNotice, the URL is blank, and a blank URL means that it's not saved anywhere, which will cause the JNDI provider to not work.\r\n\r\nBoth of these files will be loaded by JNDI, and due to the JDKs loading logic, whichever is loaded first will win.  So, if tyrex is loaded first, Play's JNDI will be broken.\r\n\r\nThe solution is to reinstate the old logic that Play used for JNDI, that is, to override the provider URL not by using `jndi.properties`, because that won't work, but to set it as a system property before JNDI first gets used.","closed_by":{"login":"gmethvin","id":171663,"node_id":"MDQ6VXNlcjE3MTY2Mw==","avatar_url":"https://avatars.githubusercontent.com/u/171663?v=4","gravatar_id":"","url":"https://api.github.com/users/gmethvin","html_url":"https://github.com/gmethvin","followers_url":"https://api.github.com/users/gmethvin/followers","following_url":"https://api.github.com/users/gmethvin/following{/other_user}","gists_url":"https://api.github.com/users/gmethvin/gists{/gist_id}","starred_url":"https://api.github.com/users/gmethvin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/gmethvin/subscriptions","organizations_url":"https://api.github.com/users/gmethvin/orgs","repos_url":"https://api.github.com/users/gmethvin/repos","events_url":"https://api.github.com/users/gmethvin/events{/privacy}","received_events_url":"https://api.github.com/users/gmethvin/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/playframework/playframework/issues/7262/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/playframework/playframework/issues/7262/timeline","performed_via_github_app":null,"state_reason":"completed"}