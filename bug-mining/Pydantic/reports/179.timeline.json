[{"id":3286959418,"node_id":"MDEyOkxhYmVsZWRFdmVudDMyODY5NTk0MTg=","url":"https://api.github.com/repos/pydantic/pydantic/issues/events/3286959418","actor":{"login":"pjbull","id":1799186,"node_id":"MDQ6VXNlcjE3OTkxODY=","avatar_url":"https://avatars.githubusercontent.com/u/1799186?v=4","gravatar_id":"","url":"https://api.github.com/users/pjbull","html_url":"https://github.com/pjbull","followers_url":"https://api.github.com/users/pjbull/followers","following_url":"https://api.github.com/users/pjbull/following{/other_user}","gists_url":"https://api.github.com/users/pjbull/gists{/gist_id}","starred_url":"https://api.github.com/users/pjbull/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pjbull/subscriptions","organizations_url":"https://api.github.com/users/pjbull/orgs","repos_url":"https://api.github.com/users/pjbull/repos","events_url":"https://api.github.com/users/pjbull/events{/privacy}","received_events_url":"https://api.github.com/users/pjbull/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2020-04-29T23:58:02Z","label":{"name":"feature request","color":"84b6eb"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/pydantic/pydantic/issues/comments/622040089","html_url":"https://github.com/pydantic/pydantic/issues/1458#issuecomment-622040089","issue_url":"https://api.github.com/repos/pydantic/pydantic/issues/1458","id":622040089,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMjA0MDA4OQ==","user":{"login":"samuelcolvin","id":4039449,"node_id":"MDQ6VXNlcjQwMzk0NDk=","avatar_url":"https://avatars.githubusercontent.com/u/4039449?v=4","gravatar_id":"","url":"https://api.github.com/users/samuelcolvin","html_url":"https://github.com/samuelcolvin","followers_url":"https://api.github.com/users/samuelcolvin/followers","following_url":"https://api.github.com/users/samuelcolvin/following{/other_user}","gists_url":"https://api.github.com/users/samuelcolvin/gists{/gist_id}","starred_url":"https://api.github.com/users/samuelcolvin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samuelcolvin/subscriptions","organizations_url":"https://api.github.com/users/samuelcolvin/orgs","repos_url":"https://api.github.com/users/samuelcolvin/repos","events_url":"https://api.github.com/users/samuelcolvin/events{/privacy}","received_events_url":"https://api.github.com/users/samuelcolvin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-04-30T18:57:14Z","updated_at":"2020-04-30T18:57:14Z","body":"I think we should emove the `if field.is_complex()` bit of `BaseSettings` and replace it with a universal validator `validate('*', pre=True)` which tries decoding JSON, but also in the case of lists supports comma separated lists.\r\n\r\nThat way you could easily override the validator if you so wished.\r\n\r\nI think this should be backwards compatible so could be done before v2. PR welcome.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/pydantic/pydantic/issues/comments/622040089/reactions","total_count":4,"+1":4,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"samuelcolvin","id":4039449,"node_id":"MDQ6VXNlcjQwMzk0NDk=","avatar_url":"https://avatars.githubusercontent.com/u/4039449?v=4","gravatar_id":"","url":"https://api.github.com/users/samuelcolvin","html_url":"https://github.com/samuelcolvin","followers_url":"https://api.github.com/users/samuelcolvin/followers","following_url":"https://api.github.com/users/samuelcolvin/following{/other_user}","gists_url":"https://api.github.com/users/samuelcolvin/gists{/gist_id}","starred_url":"https://api.github.com/users/samuelcolvin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samuelcolvin/subscriptions","organizations_url":"https://api.github.com/users/samuelcolvin/orgs","repos_url":"https://api.github.com/users/samuelcolvin/repos","events_url":"https://api.github.com/users/samuelcolvin/events{/privacy}","received_events_url":"https://api.github.com/users/samuelcolvin/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":3290903851,"node_id":"MDEyOkxhYmVsZWRFdmVudDMyOTA5MDM4NTE=","url":"https://api.github.com/repos/pydantic/pydantic/issues/events/3290903851","actor":{"login":"samuelcolvin","id":4039449,"node_id":"MDQ6VXNlcjQwMzk0NDk=","avatar_url":"https://avatars.githubusercontent.com/u/4039449?v=4","gravatar_id":"","url":"https://api.github.com/users/samuelcolvin","html_url":"https://github.com/samuelcolvin","followers_url":"https://api.github.com/users/samuelcolvin/followers","following_url":"https://api.github.com/users/samuelcolvin/following{/other_user}","gists_url":"https://api.github.com/users/samuelcolvin/gists{/gist_id}","starred_url":"https://api.github.com/users/samuelcolvin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samuelcolvin/subscriptions","organizations_url":"https://api.github.com/users/samuelcolvin/orgs","repos_url":"https://api.github.com/users/samuelcolvin/repos","events_url":"https://api.github.com/users/samuelcolvin/events{/privacy}","received_events_url":"https://api.github.com/users/samuelcolvin/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2020-04-30T18:57:22Z","label":{"name":"help wanted","color":"128A0C"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/pydantic/pydantic/issues/comments/622645364","html_url":"https://github.com/pydantic/pydantic/issues/1458#issuecomment-622645364","issue_url":"https://api.github.com/repos/pydantic/pydantic/issues/1458","id":622645364,"node_id":"MDEyOklzc3VlQ29tbWVudDYyMjY0NTM2NA==","user":{"login":"jayqi","id":2721979,"node_id":"MDQ6VXNlcjI3MjE5Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/2721979?v=4","gravatar_id":"","url":"https://api.github.com/users/jayqi","html_url":"https://github.com/jayqi","followers_url":"https://api.github.com/users/jayqi/followers","following_url":"https://api.github.com/users/jayqi/following{/other_user}","gists_url":"https://api.github.com/users/jayqi/gists{/gist_id}","starred_url":"https://api.github.com/users/jayqi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jayqi/subscriptions","organizations_url":"https://api.github.com/users/jayqi/orgs","repos_url":"https://api.github.com/users/jayqi/repos","events_url":"https://api.github.com/users/jayqi/events{/privacy}","received_events_url":"https://api.github.com/users/jayqi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-05-02T00:59:59Z","updated_at":"2020-05-02T01:16:05Z","body":"Hi @samuelcolvin, I took a stab at your suggested implementation of moving the json decoding out of the `_build_environ` method and into a universal validator. Here is what that looks like (before trying to add in any parsing of comma-separated lists):\r\n\r\n```python\r\nclass BaseSettings(BaseModel):\r\n\r\n    ...\r\n\r\n    @validator('*', pre=True)\r\n    def validate_env_vars(cls, v, config, field):\r\n        if isinstance(v, str) and field.is_complex():\r\n            try:\r\n                return config.json_loads(v)  # type: ignore\r\n            except ValueError as e:\r\n                raise SettingsError(f'error parsing JSON for \"{field}\"') from e\r\n        return v\r\n```\r\n\r\nUnfortunately, this implementation ran into a problem with two tests: [`test_nested_env_with_basemodel`](https://github.com/samuelcolvin/pydantic/blob/5067508eca6222b9315b1e38a30ddc975dee05e7/tests/test_settings.py#L56-L68) and [`test_nested_env_with_dict`](https://github.com/samuelcolvin/pydantic/blob/5067508eca6222b9315b1e38a30ddc975dee05e7/tests/test_settings.py#L71-L79). \r\n\r\nThese two tests have an field `top` that is an inner mapping with fields `apple` and `banana`. These two fields are specified in different places and stitched together: dict `{'apple': 'value'}` is passed into the constructor and the string `'{\"banana\": \"secret_value\"}'` is set as an environment variable. In the [previous implementation](https://github.com/samuelcolvin/pydantic/blob/5067508eca6222b9315b1e38a30ddc975dee05e7/pydantic/env_settings.py#L26-L31), everything happens inside `__init__`: `_build_environ` is run first, which decodes the banana json into a dict, and then they are stitched together with the `deep_update` function.  \r\n\r\nMoving the json decoding into a validator breaks this functionality because it runs after `__init__`. Because the banana mapping is still a string when `__init__` runs, `deep_update` isn't able to merge them and instead replaces the banana dict with the apple dict. \r\n\r\n## Option A: Drop support for merging nested objects\r\n\r\nOne option would be to drop support for merging nested objects. Complex environment variables seems like an unusual use case to start with, and needing to merge partially specified ones from different sources seems even more unusual. \r\n\r\nI discussed this with @pjbull and this is what we like the most: it would simplify the code and remove the need for a deep update (a shallow update would be enough). \r\n\r\n## Option B: Merging input streams after the universal decoding validator\r\n\r\nCurrently input streams are merged in `__init__` before running the validators. We could try an approach where the universal validator that does decoding runs on each of the input streams first, and then they get merged after. \r\n\r\nThis doesn't really fit into the existing flow very neatly and would involve making some part of the validation flow more complex.\r\n\r\n## Option C: Keeping decoding in _build_environ and use a different approach\r\n\r\nSuch as the approaches that @pjbull brainstormed. ","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/pydantic/pydantic/issues/comments/622645364/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jayqi","id":2721979,"node_id":"MDQ6VXNlcjI3MjE5Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/2721979?v=4","gravatar_id":"","url":"https://api.github.com/users/jayqi","html_url":"https://github.com/jayqi","followers_url":"https://api.github.com/users/jayqi/followers","following_url":"https://api.github.com/users/jayqi/following{/other_user}","gists_url":"https://api.github.com/users/jayqi/gists{/gist_id}","starred_url":"https://api.github.com/users/jayqi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jayqi/subscriptions","organizations_url":"https://api.github.com/users/jayqi/orgs","repos_url":"https://api.github.com/users/jayqi/repos","events_url":"https://api.github.com/users/jayqi/events{/privacy}","received_events_url":"https://api.github.com/users/jayqi/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":3294843859,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MzI5NDg0Mzg1OQ==","url":"https://api.github.com/repos/pydantic/pydantic/issues/events/3294843859","actor":{"login":"pjbull","id":1799186,"node_id":"MDQ6VXNlcjE3OTkxODY=","avatar_url":"https://avatars.githubusercontent.com/u/1799186?v=4","gravatar_id":"","url":"https://api.github.com/users/pjbull","html_url":"https://github.com/pjbull","followers_url":"https://api.github.com/users/pjbull/followers","following_url":"https://api.github.com/users/pjbull/following{/other_user}","gists_url":"https://api.github.com/users/pjbull/gists{/gist_id}","starred_url":"https://api.github.com/users/pjbull/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pjbull/subscriptions","organizations_url":"https://api.github.com/users/pjbull/orgs","repos_url":"https://api.github.com/users/pjbull/repos","events_url":"https://api.github.com/users/pjbull/events{/privacy}","received_events_url":"https://api.github.com/users/pjbull/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-05-02T00:59:59Z","performed_via_github_app":null},{"id":3294843860,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDMyOTQ4NDM4NjA=","url":"https://api.github.com/repos/pydantic/pydantic/issues/events/3294843860","actor":{"login":"pjbull","id":1799186,"node_id":"MDQ6VXNlcjE3OTkxODY=","avatar_url":"https://avatars.githubusercontent.com/u/1799186?v=4","gravatar_id":"","url":"https://api.github.com/users/pjbull","html_url":"https://github.com/pjbull","followers_url":"https://api.github.com/users/pjbull/followers","following_url":"https://api.github.com/users/pjbull/following{/other_user}","gists_url":"https://api.github.com/users/pjbull/gists{/gist_id}","starred_url":"https://api.github.com/users/pjbull/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pjbull/subscriptions","organizations_url":"https://api.github.com/users/pjbull/orgs","repos_url":"https://api.github.com/users/pjbull/repos","events_url":"https://api.github.com/users/pjbull/events{/privacy}","received_events_url":"https://api.github.com/users/pjbull/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-05-02T00:59:59Z","performed_via_github_app":null},{"id":3294843862,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MzI5NDg0Mzg2Mg==","url":"https://api.github.com/repos/pydantic/pydantic/issues/events/3294843862","actor":{"login":"samuelcolvin","id":4039449,"node_id":"MDQ6VXNlcjQwMzk0NDk=","avatar_url":"https://avatars.githubusercontent.com/u/4039449?v=4","gravatar_id":"","url":"https://api.github.com/users/samuelcolvin","html_url":"https://github.com/samuelcolvin","followers_url":"https://api.github.com/users/samuelcolvin/followers","following_url":"https://api.github.com/users/samuelcolvin/following{/other_user}","gists_url":"https://api.github.com/users/samuelcolvin/gists{/gist_id}","starred_url":"https://api.github.com/users/samuelcolvin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samuelcolvin/subscriptions","organizations_url":"https://api.github.com/users/samuelcolvin/orgs","repos_url":"https://api.github.com/users/samuelcolvin/repos","events_url":"https://api.github.com/users/samuelcolvin/events{/privacy}","received_events_url":"https://api.github.com/users/samuelcolvin/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-05-02T00:59:59Z","performed_via_github_app":null},{"id":3294843863,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDMyOTQ4NDM4NjM=","url":"https://api.github.com/repos/pydantic/pydantic/issues/events/3294843863","actor":{"login":"samuelcolvin","id":4039449,"node_id":"MDQ6VXNlcjQwMzk0NDk=","avatar_url":"https://avatars.githubusercontent.com/u/4039449?v=4","gravatar_id":"","url":"https://api.github.com/users/samuelcolvin","html_url":"https://github.com/samuelcolvin","followers_url":"https://api.github.com/users/samuelcolvin/followers","following_url":"https://api.github.com/users/samuelcolvin/following{/other_user}","gists_url":"https://api.github.com/users/samuelcolvin/gists{/gist_id}","starred_url":"https://api.github.com/users/samuelcolvin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samuelcolvin/subscriptions","organizations_url":"https://api.github.com/users/samuelcolvin/orgs","repos_url":"https://api.github.com/users/samuelcolvin/repos","events_url":"https://api.github.com/users/samuelcolvin/events{/privacy}","received_events_url":"https://api.github.com/users/samuelcolvin/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-05-02T00:59:59Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/pydantic/pydantic/issues/comments/637536890","html_url":"https://github.com/pydantic/pydantic/issues/1458#issuecomment-637536890","issue_url":"https://api.github.com/repos/pydantic/pydantic/issues/1458","id":637536890,"node_id":"MDEyOklzc3VlQ29tbWVudDYzNzUzNjg5MA==","user":{"login":"chbndrhnns","id":7534547,"node_id":"MDQ6VXNlcjc1MzQ1NDc=","avatar_url":"https://avatars.githubusercontent.com/u/7534547?v=4","gravatar_id":"","url":"https://api.github.com/users/chbndrhnns","html_url":"https://github.com/chbndrhnns","followers_url":"https://api.github.com/users/chbndrhnns/followers","following_url":"https://api.github.com/users/chbndrhnns/following{/other_user}","gists_url":"https://api.github.com/users/chbndrhnns/gists{/gist_id}","starred_url":"https://api.github.com/users/chbndrhnns/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chbndrhnns/subscriptions","organizations_url":"https://api.github.com/users/chbndrhnns/orgs","repos_url":"https://api.github.com/users/chbndrhnns/repos","events_url":"https://api.github.com/users/chbndrhnns/events{/privacy}","received_events_url":"https://api.github.com/users/chbndrhnns/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-06-02T13:19:03Z","updated_at":"2020-06-02T13:19:03Z","body":"I faced this issue today, as well. I wanted to parse something like this\r\n\r\n```\r\nREDIS_SENTINELS=192.168.0.1 192.168.0.2\r\n```\r\n\r\nusing such a settings class:\r\n\r\n```\r\nclass S(BaseSettings):\r\n   sentinels: List[str] = Field(..., env='REDIS_SENTINELS')\r\n\r\n    @validator('sentinels', pre=True)\r\n    def validate(cls, val):\r\n        return val.split(' ')\r\n```","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/pydantic/pydantic/issues/comments/637536890/reactions","total_count":4,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"chbndrhnns","id":7534547,"node_id":"MDQ6VXNlcjc1MzQ1NDc=","avatar_url":"https://avatars.githubusercontent.com/u/7534547?v=4","gravatar_id":"","url":"https://api.github.com/users/chbndrhnns","html_url":"https://github.com/chbndrhnns","followers_url":"https://api.github.com/users/chbndrhnns/followers","following_url":"https://api.github.com/users/chbndrhnns/following{/other_user}","gists_url":"https://api.github.com/users/chbndrhnns/gists{/gist_id}","starred_url":"https://api.github.com/users/chbndrhnns/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/chbndrhnns/subscriptions","organizations_url":"https://api.github.com/users/chbndrhnns/orgs","repos_url":"https://api.github.com/users/chbndrhnns/repos","events_url":"https://api.github.com/users/chbndrhnns/events{/privacy}","received_events_url":"https://api.github.com/users/chbndrhnns/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/pydantic/pydantic/issues/comments/668854708","html_url":"https://github.com/pydantic/pydantic/issues/1458#issuecomment-668854708","issue_url":"https://api.github.com/repos/pydantic/pydantic/issues/1458","id":668854708,"node_id":"MDEyOklzc3VlQ29tbWVudDY2ODg1NDcwOA==","user":{"login":"pikeas","id":686573,"node_id":"MDQ6VXNlcjY4NjU3Mw==","avatar_url":"https://avatars.githubusercontent.com/u/686573?v=4","gravatar_id":"","url":"https://api.github.com/users/pikeas","html_url":"https://github.com/pikeas","followers_url":"https://api.github.com/users/pikeas/followers","following_url":"https://api.github.com/users/pikeas/following{/other_user}","gists_url":"https://api.github.com/users/pikeas/gists{/gist_id}","starred_url":"https://api.github.com/users/pikeas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pikeas/subscriptions","organizations_url":"https://api.github.com/users/pikeas/orgs","repos_url":"https://api.github.com/users/pikeas/repos","events_url":"https://api.github.com/users/pikeas/events{/privacy}","received_events_url":"https://api.github.com/users/pikeas/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-04T22:24:42Z","updated_at":"2020-08-04T22:24:42Z","body":"Ditto, I'd like to validate a string env var and transform it into a valid submodel. For example, `MY_DB=user:pass@server?max_connections=100` -> a settings model containing a DB submodel with valid DSN and other settings. Currently, it seems I can only pass MY_DB as a stringified JSON object.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/pydantic/pydantic/issues/comments/668854708/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"pikeas","id":686573,"node_id":"MDQ6VXNlcjY4NjU3Mw==","avatar_url":"https://avatars.githubusercontent.com/u/686573?v=4","gravatar_id":"","url":"https://api.github.com/users/pikeas","html_url":"https://github.com/pikeas","followers_url":"https://api.github.com/users/pikeas/followers","following_url":"https://api.github.com/users/pikeas/following{/other_user}","gists_url":"https://api.github.com/users/pikeas/gists{/gist_id}","starred_url":"https://api.github.com/users/pikeas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pikeas/subscriptions","organizations_url":"https://api.github.com/users/pikeas/orgs","repos_url":"https://api.github.com/users/pikeas/repos","events_url":"https://api.github.com/users/pikeas/events{/privacy}","received_events_url":"https://api.github.com/users/pikeas/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/pydantic/pydantic/issues/comments/668865831","html_url":"https://github.com/pydantic/pydantic/issues/1458#issuecomment-668865831","issue_url":"https://api.github.com/repos/pydantic/pydantic/issues/1458","id":668865831,"node_id":"MDEyOklzc3VlQ29tbWVudDY2ODg2NTgzMQ==","user":{"login":"pjbull","id":1799186,"node_id":"MDQ6VXNlcjE3OTkxODY=","avatar_url":"https://avatars.githubusercontent.com/u/1799186?v=4","gravatar_id":"","url":"https://api.github.com/users/pjbull","html_url":"https://github.com/pjbull","followers_url":"https://api.github.com/users/pjbull/followers","following_url":"https://api.github.com/users/pjbull/following{/other_user}","gists_url":"https://api.github.com/users/pjbull/gists{/gist_id}","starred_url":"https://api.github.com/users/pjbull/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pjbull/subscriptions","organizations_url":"https://api.github.com/users/pjbull/orgs","repos_url":"https://api.github.com/users/pjbull/repos","events_url":"https://api.github.com/users/pjbull/events{/privacy}","received_events_url":"https://api.github.com/users/pjbull/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-04T22:56:36Z","updated_at":"2020-08-04T22:56:36Z","body":"Given the complexity of these potential use cases, I'm kind of liking something like proposal (1) in the first comment in this thread. I may have some time on Friday to implement if that approach is interesting","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/pydantic/pydantic/issues/comments/668865831/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"pjbull","id":1799186,"node_id":"MDQ6VXNlcjE3OTkxODY=","avatar_url":"https://avatars.githubusercontent.com/u/1799186?v=4","gravatar_id":"","url":"https://api.github.com/users/pjbull","html_url":"https://github.com/pjbull","followers_url":"https://api.github.com/users/pjbull/followers","following_url":"https://api.github.com/users/pjbull/following{/other_user}","gists_url":"https://api.github.com/users/pjbull/gists{/gist_id}","starred_url":"https://api.github.com/users/pjbull/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pjbull/subscriptions","organizations_url":"https://api.github.com/users/pjbull/orgs","repos_url":"https://api.github.com/users/pjbull/repos","events_url":"https://api.github.com/users/pjbull/events{/privacy}","received_events_url":"https://api.github.com/users/pjbull/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"tiangolo","id":1326112,"node_id":"MDQ6VXNlcjEzMjYxMTI=","avatar_url":"https://avatars.githubusercontent.com/u/1326112?v=4","gravatar_id":"","url":"https://api.github.com/users/tiangolo","html_url":"https://github.com/tiangolo","followers_url":"https://api.github.com/users/tiangolo/followers","following_url":"https://api.github.com/users/tiangolo/following{/other_user}","gists_url":"https://api.github.com/users/tiangolo/gists{/gist_id}","starred_url":"https://api.github.com/users/tiangolo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tiangolo/subscriptions","organizations_url":"https://api.github.com/users/tiangolo/orgs","repos_url":"https://api.github.com/users/tiangolo/repos","events_url":"https://api.github.com/users/tiangolo/events{/privacy}","received_events_url":"https://api.github.com/users/tiangolo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-08-17T17:32:38Z","updated_at":"2020-08-17T17:32:38Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/pydantic/pydantic/issues/1848","repository_url":"https://api.github.com/repos/pydantic/pydantic","labels_url":"https://api.github.com/repos/pydantic/pydantic/issues/1848/labels{/name}","comments_url":"https://api.github.com/repos/pydantic/pydantic/issues/1848/comments","events_url":"https://api.github.com/repos/pydantic/pydantic/issues/1848/events","html_url":"https://github.com/pydantic/pydantic/pull/1848","id":680405295,"node_id":"MDExOlB1bGxSZXF1ZXN0NDY4OTcwNzIy","number":1848,"title":"✨ Add types SpaceSeparated, CommaSeparated, CommaSeparatedStripped","user":{"login":"tiangolo","id":1326112,"node_id":"MDQ6VXNlcjEzMjYxMTI=","avatar_url":"https://avatars.githubusercontent.com/u/1326112?v=4","gravatar_id":"","url":"https://api.github.com/users/tiangolo","html_url":"https://github.com/tiangolo","followers_url":"https://api.github.com/users/tiangolo/followers","following_url":"https://api.github.com/users/tiangolo/following{/other_user}","gists_url":"https://api.github.com/users/tiangolo/gists{/gist_id}","starred_url":"https://api.github.com/users/tiangolo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tiangolo/subscriptions","organizations_url":"https://api.github.com/users/tiangolo/orgs","repos_url":"https://api.github.com/users/tiangolo/repos","events_url":"https://api.github.com/users/tiangolo/events{/privacy}","received_events_url":"https://api.github.com/users/tiangolo/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":2670567249,"node_id":"MDU6TGFiZWwyNjcwNTY3MjQ5","url":"https://api.github.com/repos/pydantic/pydantic/labels/awaiting%20author%20revision","name":"awaiting author revision","color":"7C5D12","default":false,"description":"awaiting changes from the PR author"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":13,"created_at":"2020-08-17T17:32:37Z","updated_at":"2021-06-26T02:59:52Z","closed_at":"2021-02-13T12:36:35Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":90194616,"node_id":"MDEwOlJlcG9zaXRvcnk5MDE5NDYxNg==","name":"pydantic","full_name":"pydantic/pydantic","private":false,"owner":{"login":"pydantic","id":110818415,"node_id":"O_kgDOBpr0bw","avatar_url":"https://avatars.githubusercontent.com/u/110818415?v=4","gravatar_id":"","url":"https://api.github.com/users/pydantic","html_url":"https://github.com/pydantic","followers_url":"https://api.github.com/users/pydantic/followers","following_url":"https://api.github.com/users/pydantic/following{/other_user}","gists_url":"https://api.github.com/users/pydantic/gists{/gist_id}","starred_url":"https://api.github.com/users/pydantic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pydantic/subscriptions","organizations_url":"https://api.github.com/users/pydantic/orgs","repos_url":"https://api.github.com/users/pydantic/repos","events_url":"https://api.github.com/users/pydantic/events{/privacy}","received_events_url":"https://api.github.com/users/pydantic/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/pydantic/pydantic","description":"Data validation using Python type hints","fork":false,"url":"https://api.github.com/repos/pydantic/pydantic","forks_url":"https://api.github.com/repos/pydantic/pydantic/forks","keys_url":"https://api.github.com/repos/pydantic/pydantic/keys{/key_id}","collaborators_url":"https://api.github.com/repos/pydantic/pydantic/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/pydantic/pydantic/teams","hooks_url":"https://api.github.com/repos/pydantic/pydantic/hooks","issue_events_url":"https://api.github.com/repos/pydantic/pydantic/issues/events{/number}","events_url":"https://api.github.com/repos/pydantic/pydantic/events","assignees_url":"https://api.github.com/repos/pydantic/pydantic/assignees{/user}","branches_url":"https://api.github.com/repos/pydantic/pydantic/branches{/branch}","tags_url":"https://api.github.com/repos/pydantic/pydantic/tags","blobs_url":"https://api.github.com/repos/pydantic/pydantic/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/pydantic/pydantic/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/pydantic/pydantic/git/refs{/sha}","trees_url":"https://api.github.com/repos/pydantic/pydantic/git/trees{/sha}","statuses_url":"https://api.github.com/repos/pydantic/pydantic/statuses/{sha}","languages_url":"https://api.github.com/repos/pydantic/pydantic/languages","stargazers_url":"https://api.github.com/repos/pydantic/pydantic/stargazers","contributors_url":"https://api.github.com/repos/pydantic/pydantic/contributors","subscribers_url":"https://api.github.com/repos/pydantic/pydantic/subscribers","subscription_url":"https://api.github.com/repos/pydantic/pydantic/subscription","commits_url":"https://api.github.com/repos/pydantic/pydantic/commits{/sha}","git_commits_url":"https://api.github.com/repos/pydantic/pydantic/git/commits{/sha}","comments_url":"https://api.github.com/repos/pydantic/pydantic/comments{/number}","issue_comment_url":"https://api.github.com/repos/pydantic/pydantic/issues/comments{/number}","contents_url":"https://api.github.com/repos/pydantic/pydantic/contents/{+path}","compare_url":"https://api.github.com/repos/pydantic/pydantic/compare/{base}...{head}","merges_url":"https://api.github.com/repos/pydantic/pydantic/merges","archive_url":"https://api.github.com/repos/pydantic/pydantic/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/pydantic/pydantic/downloads","issues_url":"https://api.github.com/repos/pydantic/pydantic/issues{/number}","pulls_url":"https://api.github.com/repos/pydantic/pydantic/pulls{/number}","milestones_url":"https://api.github.com/repos/pydantic/pydantic/milestones{/number}","notifications_url":"https://api.github.com/repos/pydantic/pydantic/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/pydantic/pydantic/labels{/name}","releases_url":"https://api.github.com/repos/pydantic/pydantic/releases{/id}","deployments_url":"https://api.github.com/repos/pydantic/pydantic/deployments","created_at":"2017-05-03T21:23:58Z","updated_at":"2025-11-09T17:32:47Z","pushed_at":"2025-11-09T09:36:17Z","git_url":"git://github.com/pydantic/pydantic.git","ssh_url":"git@github.com:pydantic/pydantic.git","clone_url":"https://github.com/pydantic/pydantic.git","svn_url":"https://github.com/pydantic/pydantic","homepage":"https://docs.pydantic.dev","size":327577,"stargazers_count":25701,"watchers_count":25701,"language":"Python","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":2306,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":512,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["hints","json-schema","parsing","pydantic","python","python310","python311","python312","python313","python39","validation"],"visibility":"public","forks":2306,"open_issues":512,"watchers":25701,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/pydantic/pydantic/pulls/1848","html_url":"https://github.com/pydantic/pydantic/pull/1848","diff_url":"https://github.com/pydantic/pydantic/pull/1848.diff","patch_url":"https://github.com/pydantic/pydantic/pull/1848.patch","merged_at":null},"body":"<!-- Thank you for your contribution! -->\r\n<!-- Unless your change is trivial, please create an issue to discuss the change before creating a PR -->\r\n<!-- See https://pydantic-docs.helpmanual.io/contributing/ for help on Contributing -->\r\n\r\n## Change Summary\r\n\r\n<!-- Please give a short summary of the changes. -->\r\n\r\n✨ Add types `SpaceSeparated`, `CommaSeparated`, `CommaSeparatedStripped`.\r\n\r\nThose would be especially useful for reading env vars that sometimes have problems embedding JSON strings with internal quotes.\r\n\r\nThe types are generic, so they can be used as standard types, like `List[str]`. The code is separated in implementation and type annotations so that it works correctly, Cython can compile it but types work correctly as if it was a generic `List`, with type checkers, `mypy`, editor completion, etc.\r\n\r\nI had to write the actual implementation inside of an `if not TYPE_CHECKING` block and declare the \"types\" in a subsequent `if TYPE_CHECKING` to make `mypy` happy.\r\n\r\n---\r\n\r\n~I want to confirm Cython can indeed handle it in CI before adding tests and docs.~ Cython works :heavy_check_mark: \r\n\r\n## Usage example\r\n\r\nA code-colored example is worth a thousand words or something, so...\r\n\r\nTake this file `settings.env`:\r\n\r\n```bash\r\n# ignore comment\r\nENVIRONMENT=\"production\"\r\nAPI_KEY=\"super-secret-key\"\r\nREDIS_ADDRESS=localhost:6379\r\nTIMEOUT_SECONDS=300\r\nCORS_ORIGINS=\"https://helpmanual.io, http://127.0.0.1:8000/\"\r\n```\r\n\r\n:point_up: Notice the `CORS_ORIGINS`, it's a **string** of values separated by commas and even an extra space (it's not a valid JSON-encoded payload inside a string, no quote escaping, etc).\r\n\r\nIt can now be read with this `Settings` class:\r\n\r\n```Python\r\nfrom pydantic import (\r\n    CommaSeparatedStripped,\r\n    BaseSettings,\r\n    RedisDsn,\r\n)\r\n\r\n\r\nclass Settings(BaseSettings):\r\n    environment: str = 'development'\r\n    api_key: str\r\n    redis_dsn: RedisDsn = 'redis://user:pass@localhost:6379/1'\r\n    timeout_seconds: int = 60\r\n    cors_origins: CommaSeparatedStripped[str] = []\r\n\r\n    class Config:\r\n        env_file = 'settings.env'\r\n        env_file_encoding = 'utf-8'\r\n\r\n\r\nprint(Settings().dict())\r\n```\r\n\r\n:point_up: Notice the `cors_origins: CommaSeparatedStripped[str] = []`. That will read the string of values separated by commas (even with space), parse it, convert it to a list, and validate its values with the internal type (type parameter).\r\n\r\n## Related issue number\r\n\r\nhttps://github.com/samuelcolvin/pydantic/issues/1458\r\n\r\n<!-- Are there any issues opened that will be resolved by merging this change? -->\r\n\r\n## Checklist\r\n\r\n* [x] Unit tests for the changes exist\r\n* [x] Tests pass on CI and coverage remains at 100%\r\n* [x] Documentation reflects the changes where applicable\r\n* [x] `changes/<pull request or issue id>-<github username>.md` file added describing change\r\n  (see [changes/README.md](https://github.com/samuelcolvin/pydantic/blob/master/changes/README.md) for details)\r\n","reactions":{"url":"https://api.github.com/repos/pydantic/pydantic/issues/1848/reactions","total_count":17,"+1":13,"-1":0,"laugh":0,"hooray":4,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/pydantic/pydantic/issues/1848/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/pydantic/pydantic/issues/comments/717294402","html_url":"https://github.com/pydantic/pydantic/issues/1458#issuecomment-717294402","issue_url":"https://api.github.com/repos/pydantic/pydantic/issues/1458","id":717294402,"node_id":"MDEyOklzc3VlQ29tbWVudDcxNzI5NDQwMg==","user":{"login":"zdens","id":35842917,"node_id":"MDQ6VXNlcjM1ODQyOTE3","avatar_url":"https://avatars.githubusercontent.com/u/35842917?v=4","gravatar_id":"","url":"https://api.github.com/users/zdens","html_url":"https://github.com/zdens","followers_url":"https://api.github.com/users/zdens/followers","following_url":"https://api.github.com/users/zdens/following{/other_user}","gists_url":"https://api.github.com/users/zdens/gists{/gist_id}","starred_url":"https://api.github.com/users/zdens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zdens/subscriptions","organizations_url":"https://api.github.com/users/zdens/orgs","repos_url":"https://api.github.com/users/zdens/repos","events_url":"https://api.github.com/users/zdens/events{/privacy}","received_events_url":"https://api.github.com/users/zdens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-27T14:45:31Z","updated_at":"2020-10-27T14:45:31Z","body":"hi all,\r\nI'm also faced with this issue today.\r\n\r\ntaking into account [this example](https://github.com/tiangolo/full-stack-fastapi-postgresql/blob/0.5.0/%7B%7Bcookiecutter.project_slug%7D%7D/backend/app/app/core/config.py), after almost a day of digging I realized that validator is not fired in case the class attribute is of List-type. If attribute type is str, for example, the attribute validator works just fine.\r\n\r\nI used this code:\r\n\r\n```python\r\nimport os\r\nfrom typing import List\r\nfrom pydantic import BaseSettings, validator\r\n\r\nos.environ['test_var'] = 'test_val'\r\n\r\n\r\nclass S1(BaseSettings):\r\n    test_var: str\r\n    \r\n    @validator('test_var', pre=True)\r\n    def val_func(cls, v):\r\n        print('this validator is called: {}'.format(v))\r\n        return v\r\n\r\nclass S2(BaseSettings):\r\n    test_var: List[str]\r\n\r\n    @validator('test_var', pre=True)\r\n    def val_func(cls, v):\r\n        print('this validator is called: {}'.format(v))\r\n        return [v]\r\n\r\n```\r\n\r\nand then instantiating `s1 = S1()` prints `this validator is called: test_val` while the code `s2 = S2()` throws errors and prints nothing:\r\n\r\n```\r\n>>> s2 = S2()\r\nTraceback (most recent call last):\r\n  File \"pydantic/env_settings.py\", line 118, in pydantic.env_settings.BaseSettings._build_environ\r\n  File \"/home/den/anaconda3/lib/python3.7/json/__init__.py\", line 348, in loads\r\n    return _default_decoder.decode(s)\r\n  File \"/home/den/anaconda3/lib/python3.7/json/decoder.py\", line 337, in decode\r\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\r\n  File \"/home/den/anaconda3/lib/python3.7/json/decoder.py\", line 355, in raw_decode\r\n    raise JSONDecodeError(\"Expecting value\", s, err.value) from None\r\njson.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)\r\nThe above exception was the direct cause of the following exception:\r\nTraceback (most recent call last):\r\n  File \"<input>\", line 1, in <module>\r\n  File \"pydantic/env_settings.py\", line 35, in pydantic.env_settings.BaseSettings.__init__\r\n  File \"pydantic/env_settings.py\", line 48, in pydantic.env_settings.BaseSettings._build_values\r\n  File \"pydantic/env_settings.py\", line 120, in pydantic.env_settings.BaseSettings._build_environ\r\npydantic.env_settings.SettingsError: error parsing JSON for \"test_var\"\r\n\r\n```\r\nis there any errors in my example code?","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/pydantic/pydantic/issues/comments/717294402/reactions","total_count":7,"+1":4,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":3},"performed_via_github_app":null,"event":"commented","actor":{"login":"zdens","id":35842917,"node_id":"MDQ6VXNlcjM1ODQyOTE3","avatar_url":"https://avatars.githubusercontent.com/u/35842917?v=4","gravatar_id":"","url":"https://api.github.com/users/zdens","html_url":"https://github.com/zdens","followers_url":"https://api.github.com/users/zdens/followers","following_url":"https://api.github.com/users/zdens/following{/other_user}","gists_url":"https://api.github.com/users/zdens/gists{/gist_id}","starred_url":"https://api.github.com/users/zdens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zdens/subscriptions","organizations_url":"https://api.github.com/users/zdens/orgs","repos_url":"https://api.github.com/users/zdens/repos","events_url":"https://api.github.com/users/zdens/events{/privacy}","received_events_url":"https://api.github.com/users/zdens/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/pydantic/pydantic/issues/comments/718781035","html_url":"https://github.com/pydantic/pydantic/issues/1458#issuecomment-718781035","issue_url":"https://api.github.com/repos/pydantic/pydantic/issues/1458","id":718781035,"node_id":"MDEyOklzc3VlQ29tbWVudDcxODc4MTAzNQ==","user":{"login":"jayqi","id":2721979,"node_id":"MDQ6VXNlcjI3MjE5Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/2721979?v=4","gravatar_id":"","url":"https://api.github.com/users/jayqi","html_url":"https://github.com/jayqi","followers_url":"https://api.github.com/users/jayqi/followers","following_url":"https://api.github.com/users/jayqi/following{/other_user}","gists_url":"https://api.github.com/users/jayqi/gists{/gist_id}","starred_url":"https://api.github.com/users/jayqi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jayqi/subscriptions","organizations_url":"https://api.github.com/users/jayqi/orgs","repos_url":"https://api.github.com/users/jayqi/repos","events_url":"https://api.github.com/users/jayqi/events{/privacy}","received_events_url":"https://api.github.com/users/jayqi/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-29T14:14:29Z","updated_at":"2020-10-29T14:14:29Z","body":"@zdens per some of the discussion earlier in the thread (kind of mixed in there with proposed changes), the reason you don't see the validator firing is because the code that is failing is the part that parses the environment variables, and that happens before the validators run. \r\n\r\nYour variable that is the list needs to be valid JSON, like this:\r\n\r\n```\r\nOPTIONS='[\"a\",\"b\",\"c\"]'\r\n```\r\n\r\nThat's why you see a `JSONDecodeError`.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/pydantic/pydantic/issues/comments/718781035/reactions","total_count":4,"+1":4,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jayqi","id":2721979,"node_id":"MDQ6VXNlcjI3MjE5Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/2721979?v=4","gravatar_id":"","url":"https://api.github.com/users/jayqi","html_url":"https://github.com/jayqi","followers_url":"https://api.github.com/users/jayqi/followers","following_url":"https://api.github.com/users/jayqi/following{/other_user}","gists_url":"https://api.github.com/users/jayqi/gists{/gist_id}","starred_url":"https://api.github.com/users/jayqi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jayqi/subscriptions","organizations_url":"https://api.github.com/users/jayqi/orgs","repos_url":"https://api.github.com/users/jayqi/repos","events_url":"https://api.github.com/users/jayqi/events{/privacy}","received_events_url":"https://api.github.com/users/jayqi/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":3936562857,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MzkzNjU2Mjg1Nw==","url":"https://api.github.com/repos/pydantic/pydantic/issues/events/3936562857","actor":{"login":"zdens","id":35842917,"node_id":"MDQ6VXNlcjM1ODQyOTE3","avatar_url":"https://avatars.githubusercontent.com/u/35842917?v=4","gravatar_id":"","url":"https://api.github.com/users/zdens","html_url":"https://github.com/zdens","followers_url":"https://api.github.com/users/zdens/followers","following_url":"https://api.github.com/users/zdens/following{/other_user}","gists_url":"https://api.github.com/users/zdens/gists{/gist_id}","starred_url":"https://api.github.com/users/zdens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zdens/subscriptions","organizations_url":"https://api.github.com/users/zdens/orgs","repos_url":"https://api.github.com/users/zdens/repos","events_url":"https://api.github.com/users/zdens/events{/privacy}","received_events_url":"https://api.github.com/users/zdens/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-10-29T14:14:29Z","performed_via_github_app":null},{"id":3936562863,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDM5MzY1NjI4NjM=","url":"https://api.github.com/repos/pydantic/pydantic/issues/events/3936562863","actor":{"login":"zdens","id":35842917,"node_id":"MDQ6VXNlcjM1ODQyOTE3","avatar_url":"https://avatars.githubusercontent.com/u/35842917?v=4","gravatar_id":"","url":"https://api.github.com/users/zdens","html_url":"https://github.com/zdens","followers_url":"https://api.github.com/users/zdens/followers","following_url":"https://api.github.com/users/zdens/following{/other_user}","gists_url":"https://api.github.com/users/zdens/gists{/gist_id}","starred_url":"https://api.github.com/users/zdens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zdens/subscriptions","organizations_url":"https://api.github.com/users/zdens/orgs","repos_url":"https://api.github.com/users/zdens/repos","events_url":"https://api.github.com/users/zdens/events{/privacy}","received_events_url":"https://api.github.com/users/zdens/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-10-29T14:14:29Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/pydantic/pydantic/issues/comments/718823825","html_url":"https://github.com/pydantic/pydantic/issues/1458#issuecomment-718823825","issue_url":"https://api.github.com/repos/pydantic/pydantic/issues/1458","id":718823825,"node_id":"MDEyOklzc3VlQ29tbWVudDcxODgyMzgyNQ==","user":{"login":"zdens","id":35842917,"node_id":"MDQ6VXNlcjM1ODQyOTE3","avatar_url":"https://avatars.githubusercontent.com/u/35842917?v=4","gravatar_id":"","url":"https://api.github.com/users/zdens","html_url":"https://github.com/zdens","followers_url":"https://api.github.com/users/zdens/followers","following_url":"https://api.github.com/users/zdens/following{/other_user}","gists_url":"https://api.github.com/users/zdens/gists{/gist_id}","starred_url":"https://api.github.com/users/zdens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zdens/subscriptions","organizations_url":"https://api.github.com/users/zdens/orgs","repos_url":"https://api.github.com/users/zdens/repos","events_url":"https://api.github.com/users/zdens/events{/privacy}","received_events_url":"https://api.github.com/users/zdens/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-10-29T15:19:26Z","updated_at":"2020-10-29T15:19:26Z","body":"@jayqi ,\r\nthank you for your reply!\r\nnow I understood why this thread has been started.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/pydantic/pydantic/issues/comments/718823825/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"zdens","id":35842917,"node_id":"MDQ6VXNlcjM1ODQyOTE3","avatar_url":"https://avatars.githubusercontent.com/u/35842917?v=4","gravatar_id":"","url":"https://api.github.com/users/zdens","html_url":"https://github.com/zdens","followers_url":"https://api.github.com/users/zdens/followers","following_url":"https://api.github.com/users/zdens/following{/other_user}","gists_url":"https://api.github.com/users/zdens/gists{/gist_id}","starred_url":"https://api.github.com/users/zdens/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/zdens/subscriptions","organizations_url":"https://api.github.com/users/zdens/orgs","repos_url":"https://api.github.com/users/zdens/repos","events_url":"https://api.github.com/users/zdens/events{/privacy}","received_events_url":"https://api.github.com/users/zdens/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":3936906724,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MzkzNjkwNjcyNA==","url":"https://api.github.com/repos/pydantic/pydantic/issues/events/3936906724","actor":{"login":"jayqi","id":2721979,"node_id":"MDQ6VXNlcjI3MjE5Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/2721979?v=4","gravatar_id":"","url":"https://api.github.com/users/jayqi","html_url":"https://github.com/jayqi","followers_url":"https://api.github.com/users/jayqi/followers","following_url":"https://api.github.com/users/jayqi/following{/other_user}","gists_url":"https://api.github.com/users/jayqi/gists{/gist_id}","starred_url":"https://api.github.com/users/jayqi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jayqi/subscriptions","organizations_url":"https://api.github.com/users/jayqi/orgs","repos_url":"https://api.github.com/users/jayqi/repos","events_url":"https://api.github.com/users/jayqi/events{/privacy}","received_events_url":"https://api.github.com/users/jayqi/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-10-29T15:19:27Z","performed_via_github_app":null},{"id":3936906728,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDM5MzY5MDY3Mjg=","url":"https://api.github.com/repos/pydantic/pydantic/issues/events/3936906728","actor":{"login":"jayqi","id":2721979,"node_id":"MDQ6VXNlcjI3MjE5Nzk=","avatar_url":"https://avatars.githubusercontent.com/u/2721979?v=4","gravatar_id":"","url":"https://api.github.com/users/jayqi","html_url":"https://github.com/jayqi","followers_url":"https://api.github.com/users/jayqi/followers","following_url":"https://api.github.com/users/jayqi/following{/other_user}","gists_url":"https://api.github.com/users/jayqi/gists{/gist_id}","starred_url":"https://api.github.com/users/jayqi/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jayqi/subscriptions","organizations_url":"https://api.github.com/users/jayqi/orgs","repos_url":"https://api.github.com/users/jayqi/repos","events_url":"https://api.github.com/users/jayqi/events{/privacy}","received_events_url":"https://api.github.com/users/jayqi/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-10-29T15:19:27Z","performed_via_github_app":null},{"actor":{"login":"sirex","id":297583,"node_id":"MDQ6VXNlcjI5NzU4Mw==","avatar_url":"https://avatars.githubusercontent.com/u/297583?v=4","gravatar_id":"","url":"https://api.github.com/users/sirex","html_url":"https://github.com/sirex","followers_url":"https://api.github.com/users/sirex/followers","following_url":"https://api.github.com/users/sirex/following{/other_user}","gists_url":"https://api.github.com/users/sirex/gists{/gist_id}","starred_url":"https://api.github.com/users/sirex/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sirex/subscriptions","organizations_url":"https://api.github.com/users/sirex/orgs","repos_url":"https://api.github.com/users/sirex/repos","events_url":"https://api.github.com/users/sirex/events{/privacy}","received_events_url":"https://api.github.com/users/sirex/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-01-30T18:23:14Z","updated_at":"2021-01-30T18:23:14Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/pydantic/pydantic/issues/2304","repository_url":"https://api.github.com/repos/pydantic/pydantic","labels_url":"https://api.github.com/repos/pydantic/pydantic/issues/2304/labels{/name}","comments_url":"https://api.github.com/repos/pydantic/pydantic/issues/2304/comments","events_url":"https://api.github.com/repos/pydantic/pydantic/issues/2304/events","html_url":"https://github.com/pydantic/pydantic/issues/2304","id":797498527,"node_id":"MDU6SXNzdWU3OTc0OTg1Mjc=","number":2304,"title":"Environment names for complex types","user":{"login":"sirex","id":297583,"node_id":"MDQ6VXNlcjI5NzU4Mw==","avatar_url":"https://avatars.githubusercontent.com/u/297583?v=4","gravatar_id":"","url":"https://api.github.com/users/sirex","html_url":"https://github.com/sirex","followers_url":"https://api.github.com/users/sirex/followers","following_url":"https://api.github.com/users/sirex/following{/other_user}","gists_url":"https://api.github.com/users/sirex/gists{/gist_id}","starred_url":"https://api.github.com/users/sirex/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sirex/subscriptions","organizations_url":"https://api.github.com/users/sirex/orgs","repos_url":"https://api.github.com/users/sirex/repos","events_url":"https://api.github.com/users/sirex/events{/privacy}","received_events_url":"https://api.github.com/users/sirex/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":597426504,"node_id":"MDU6TGFiZWw1OTc0MjY1MDQ=","url":"https://api.github.com/repos/pydantic/pydantic/labels/feature%20request","name":"feature request","color":"84b6eb","default":false,"description":""}],"state":"closed","locked":false,"assignee":{"login":"hramezani","id":3122442,"node_id":"MDQ6VXNlcjMxMjI0NDI=","avatar_url":"https://avatars.githubusercontent.com/u/3122442?v=4","gravatar_id":"","url":"https://api.github.com/users/hramezani","html_url":"https://github.com/hramezani","followers_url":"https://api.github.com/users/hramezani/followers","following_url":"https://api.github.com/users/hramezani/following{/other_user}","gists_url":"https://api.github.com/users/hramezani/gists{/gist_id}","starred_url":"https://api.github.com/users/hramezani/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hramezani/subscriptions","organizations_url":"https://api.github.com/users/hramezani/orgs","repos_url":"https://api.github.com/users/hramezani/repos","events_url":"https://api.github.com/users/hramezani/events{/privacy}","received_events_url":"https://api.github.com/users/hramezani/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"hramezani","id":3122442,"node_id":"MDQ6VXNlcjMxMjI0NDI=","avatar_url":"https://avatars.githubusercontent.com/u/3122442?v=4","gravatar_id":"","url":"https://api.github.com/users/hramezani","html_url":"https://github.com/hramezani","followers_url":"https://api.github.com/users/hramezani/followers","following_url":"https://api.github.com/users/hramezani/following{/other_user}","gists_url":"https://api.github.com/users/hramezani/gists{/gist_id}","starred_url":"https://api.github.com/users/hramezani/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/hramezani/subscriptions","organizations_url":"https://api.github.com/users/hramezani/orgs","repos_url":"https://api.github.com/users/hramezani/repos","events_url":"https://api.github.com/users/hramezani/events{/privacy}","received_events_url":"https://api.github.com/users/hramezani/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":4,"created_at":"2021-01-30T18:23:14Z","updated_at":"2023-04-29T10:02:57Z","closed_at":"2023-04-29T10:02:57Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":90194616,"node_id":"MDEwOlJlcG9zaXRvcnk5MDE5NDYxNg==","name":"pydantic","full_name":"pydantic/pydantic","private":false,"owner":{"login":"pydantic","id":110818415,"node_id":"O_kgDOBpr0bw","avatar_url":"https://avatars.githubusercontent.com/u/110818415?v=4","gravatar_id":"","url":"https://api.github.com/users/pydantic","html_url":"https://github.com/pydantic","followers_url":"https://api.github.com/users/pydantic/followers","following_url":"https://api.github.com/users/pydantic/following{/other_user}","gists_url":"https://api.github.com/users/pydantic/gists{/gist_id}","starred_url":"https://api.github.com/users/pydantic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pydantic/subscriptions","organizations_url":"https://api.github.com/users/pydantic/orgs","repos_url":"https://api.github.com/users/pydantic/repos","events_url":"https://api.github.com/users/pydantic/events{/privacy}","received_events_url":"https://api.github.com/users/pydantic/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/pydantic/pydantic","description":"Data validation using Python type hints","fork":false,"url":"https://api.github.com/repos/pydantic/pydantic","forks_url":"https://api.github.com/repos/pydantic/pydantic/forks","keys_url":"https://api.github.com/repos/pydantic/pydantic/keys{/key_id}","collaborators_url":"https://api.github.com/repos/pydantic/pydantic/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/pydantic/pydantic/teams","hooks_url":"https://api.github.com/repos/pydantic/pydantic/hooks","issue_events_url":"https://api.github.com/repos/pydantic/pydantic/issues/events{/number}","events_url":"https://api.github.com/repos/pydantic/pydantic/events","assignees_url":"https://api.github.com/repos/pydantic/pydantic/assignees{/user}","branches_url":"https://api.github.com/repos/pydantic/pydantic/branches{/branch}","tags_url":"https://api.github.com/repos/pydantic/pydantic/tags","blobs_url":"https://api.github.com/repos/pydantic/pydantic/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/pydantic/pydantic/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/pydantic/pydantic/git/refs{/sha}","trees_url":"https://api.github.com/repos/pydantic/pydantic/git/trees{/sha}","statuses_url":"https://api.github.com/repos/pydantic/pydantic/statuses/{sha}","languages_url":"https://api.github.com/repos/pydantic/pydantic/languages","stargazers_url":"https://api.github.com/repos/pydantic/pydantic/stargazers","contributors_url":"https://api.github.com/repos/pydantic/pydantic/contributors","subscribers_url":"https://api.github.com/repos/pydantic/pydantic/subscribers","subscription_url":"https://api.github.com/repos/pydantic/pydantic/subscription","commits_url":"https://api.github.com/repos/pydantic/pydantic/commits{/sha}","git_commits_url":"https://api.github.com/repos/pydantic/pydantic/git/commits{/sha}","comments_url":"https://api.github.com/repos/pydantic/pydantic/comments{/number}","issue_comment_url":"https://api.github.com/repos/pydantic/pydantic/issues/comments{/number}","contents_url":"https://api.github.com/repos/pydantic/pydantic/contents/{+path}","compare_url":"https://api.github.com/repos/pydantic/pydantic/compare/{base}...{head}","merges_url":"https://api.github.com/repos/pydantic/pydantic/merges","archive_url":"https://api.github.com/repos/pydantic/pydantic/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/pydantic/pydantic/downloads","issues_url":"https://api.github.com/repos/pydantic/pydantic/issues{/number}","pulls_url":"https://api.github.com/repos/pydantic/pydantic/pulls{/number}","milestones_url":"https://api.github.com/repos/pydantic/pydantic/milestones{/number}","notifications_url":"https://api.github.com/repos/pydantic/pydantic/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/pydantic/pydantic/labels{/name}","releases_url":"https://api.github.com/repos/pydantic/pydantic/releases{/id}","deployments_url":"https://api.github.com/repos/pydantic/pydantic/deployments","created_at":"2017-05-03T21:23:58Z","updated_at":"2025-11-09T17:32:47Z","pushed_at":"2025-11-09T09:36:17Z","git_url":"git://github.com/pydantic/pydantic.git","ssh_url":"git@github.com:pydantic/pydantic.git","clone_url":"https://github.com/pydantic/pydantic.git","svn_url":"https://github.com/pydantic/pydantic","homepage":"https://docs.pydantic.dev","size":327577,"stargazers_count":25701,"watchers_count":25701,"language":"Python","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":2306,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":512,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["hints","json-schema","parsing","pydantic","python","python310","python311","python312","python313","python39","validation"],"visibility":"public","forks":2306,"open_issues":512,"watchers":25701,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"### Checks\r\n\r\n* [x] I added a descriptive title to this issue\r\n* [x] I have searched (google, github) for similar issues and couldn't find anything\r\n* [x] I have read and followed [the docs](https://pydantic-docs.helpmanual.io/) and still think this feature/change is needed\r\n* [x] After submitting this, I commit to one of:\r\n    * Look through open issues and helped at least one other person\r\n    * Hit the \"watch\" button on this repo to receive notifications and I commit to help at least 2 people that ask questions in the future\r\n    * Implement a Pull Request for a confirmed bug\r\n\r\n<!-- Sorry to sound so draconian, but every second saved replying to issues is time spend improving pydantic :-) -->\r\n\r\n# Feature Request\r\n\r\nOutput of `python -c \"import pydantic.utils; print(pydantic.utils.version_info())\"`:\r\n```\r\n             pydantic version: 1.7.3\r\n            pydantic compiled: True\r\n                 install path: /tmp/pydantic-compex-env-names/env/lib/python3.9/site-packages/pydantic\r\n               python version: 3.9.1 (default, Dec 13 2020, 11:55:53)  [GCC 10.2.0]\r\n                     platform: Linux-5.10.7-3-MANJARO-x86_64-with-glibc2.32\r\n     optional deps. installed: []\r\n```\r\n<!-- or if you're using pydantic prior to v1.3, manually include: OS, python version and pydantic version -->\r\n\r\n<!-- Please read the [docs](https://pydantic-docs.helpmanual.io/) and search through issues to\r\nconfirm your feature hasn't been asked for before, or already implemented. -->\r\n\r\n<!-- Where possible please include a self-contained code snippet describing your feature request: -->\r\n\r\n```py\r\nfrom typing import Dict\r\nfrom pydantic import BaseModel, BaseSettings, Field\r\n\r\nclass Backend(BaseModel):\r\n    type: str = None\r\n    dsn: str = None\r\n\r\nclass Settings(BaseSettings):\r\n    backends: Dict[str, Backend] = Field(default_factory=dict)\r\n```\r\n\r\nIn order to manage these settings via envvars, nested components could be separated with `__`, like this:\r\n\r\n```sh\r\nBACKENDS__DEFAULT__TYPE=postgresql\r\nBACKENDS__DEFAULT__DSN=postgresql://localhost/db\r\n```\r\n\r\nIn order to remove `default` backend, following envvar could be set:\r\n\r\n```sh\r\nBACKENDS__DEFAULT=\r\n```\r\n\r\nOr list of dict keys could be given like this:\r\n\r\n```sh\r\nBACKENDS=default,sqlite\r\n```\r\n\r\nThis would remove all backends, except `default` and `sqlite`.\r\n\r\nI found similar [issue](https://github.com/samuelcolvin/pydantic/issues/1458) about adding custom value parsers, so this could be used for lists and also for overriding keys.","reactions":{"url":"https://api.github.com/repos/pydantic/pydantic/issues/2304/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/pydantic/pydantic/issues/2304/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/pydantic/pydantic/issues/comments/789051576","html_url":"https://github.com/pydantic/pydantic/issues/1458#issuecomment-789051576","issue_url":"https://api.github.com/repos/pydantic/pydantic/issues/1458","id":789051576,"node_id":"MDEyOklzc3VlQ29tbWVudDc4OTA1MTU3Ng==","user":{"login":"pmsoltani","id":25427031,"node_id":"MDQ6VXNlcjI1NDI3MDMx","avatar_url":"https://avatars.githubusercontent.com/u/25427031?v=4","gravatar_id":"","url":"https://api.github.com/users/pmsoltani","html_url":"https://github.com/pmsoltani","followers_url":"https://api.github.com/users/pmsoltani/followers","following_url":"https://api.github.com/users/pmsoltani/following{/other_user}","gists_url":"https://api.github.com/users/pmsoltani/gists{/gist_id}","starred_url":"https://api.github.com/users/pmsoltani/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pmsoltani/subscriptions","organizations_url":"https://api.github.com/users/pmsoltani/orgs","repos_url":"https://api.github.com/users/pmsoltani/repos","events_url":"https://api.github.com/users/pmsoltani/events{/privacy}","received_events_url":"https://api.github.com/users/pmsoltani/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-02T16:51:16Z","updated_at":"2021-03-02T16:51:16Z","body":"As a workaround (until something solid is implemented) I changed the following\r\n\r\n```python3\r\nCORS_ORIGINS: List[AnyHttpUrl] = Field(..., env=\"CORS_ORIGINS\")\r\n```\r\n\r\ninto this:\r\n\r\n```python3\r\nCORS_ORIGINS: Union[str, List[AnyHttpUrl]] = Field(..., env=\"CORS_ORIGINS\")\r\n```\r\n\r\nWhich, admittedly, is not elegant but enables pydantic to fire up the validator function:\r\n\r\n```python3\r\n@validator(\"CORS_ORIGINS\", pre=True)\r\n    def _assemble_cors_origins(cls, cors_origins):\r\n        if isinstance(cors_origins, str):\r\n            return [item.strip() for item in cors_origins.split(\",\")]\r\n        return cors_origins\r\n```\r\n\r\nMy `.env` file:\r\n\r\n```env\r\n# Use comma (,) to separate URLs\r\nCORS_ORIGINS=http://localhost:3000,http://localhost:8000\r\n```","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/pydantic/pydantic/issues/comments/789051576/reactions","total_count":41,"+1":33,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":6,"rocket":2,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"pmsoltani","id":25427031,"node_id":"MDQ6VXNlcjI1NDI3MDMx","avatar_url":"https://avatars.githubusercontent.com/u/25427031?v=4","gravatar_id":"","url":"https://api.github.com/users/pmsoltani","html_url":"https://github.com/pmsoltani","followers_url":"https://api.github.com/users/pmsoltani/followers","following_url":"https://api.github.com/users/pmsoltani/following{/other_user}","gists_url":"https://api.github.com/users/pmsoltani/gists{/gist_id}","starred_url":"https://api.github.com/users/pmsoltani/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pmsoltani/subscriptions","organizations_url":"https://api.github.com/users/pmsoltani/orgs","repos_url":"https://api.github.com/users/pmsoltani/repos","events_url":"https://api.github.com/users/pmsoltani/events{/privacy}","received_events_url":"https://api.github.com/users/pmsoltani/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/pydantic/pydantic/issues/comments/831292347","html_url":"https://github.com/pydantic/pydantic/issues/1458#issuecomment-831292347","issue_url":"https://api.github.com/repos/pydantic/pydantic/issues/1458","id":831292347,"node_id":"MDEyOklzc3VlQ29tbWVudDgzMTI5MjM0Nw==","user":{"login":"samuelcolvin","id":4039449,"node_id":"MDQ6VXNlcjQwMzk0NDk=","avatar_url":"https://avatars.githubusercontent.com/u/4039449?v=4","gravatar_id":"","url":"https://api.github.com/users/samuelcolvin","html_url":"https://github.com/samuelcolvin","followers_url":"https://api.github.com/users/samuelcolvin/followers","following_url":"https://api.github.com/users/samuelcolvin/following{/other_user}","gists_url":"https://api.github.com/users/samuelcolvin/gists{/gist_id}","starred_url":"https://api.github.com/users/samuelcolvin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samuelcolvin/subscriptions","organizations_url":"https://api.github.com/users/samuelcolvin/orgs","repos_url":"https://api.github.com/users/samuelcolvin/repos","events_url":"https://api.github.com/users/samuelcolvin/events{/privacy}","received_events_url":"https://api.github.com/users/samuelcolvin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-03T14:22:09Z","updated_at":"2021-05-03T14:22:09Z","body":"I've just discovered how annoying this can be myself while working on a github action for pydantic 🙈.\r\n\r\nI'd love someone to fix this, otherwise I will soon.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/pydantic/pydantic/issues/comments/831292347/reactions","total_count":11,"+1":2,"-1":0,"laugh":9,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"samuelcolvin","id":4039449,"node_id":"MDQ6VXNlcjQwMzk0NDk=","avatar_url":"https://avatars.githubusercontent.com/u/4039449?v=4","gravatar_id":"","url":"https://api.github.com/users/samuelcolvin","html_url":"https://github.com/samuelcolvin","followers_url":"https://api.github.com/users/samuelcolvin/followers","following_url":"https://api.github.com/users/samuelcolvin/following{/other_user}","gists_url":"https://api.github.com/users/samuelcolvin/gists{/gist_id}","starred_url":"https://api.github.com/users/samuelcolvin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samuelcolvin/subscriptions","organizations_url":"https://api.github.com/users/samuelcolvin/orgs","repos_url":"https://api.github.com/users/samuelcolvin/repos","events_url":"https://api.github.com/users/samuelcolvin/events{/privacy}","received_events_url":"https://api.github.com/users/samuelcolvin/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/pydantic/pydantic/issues/comments/831297951","html_url":"https://github.com/pydantic/pydantic/issues/1458#issuecomment-831297951","issue_url":"https://api.github.com/repos/pydantic/pydantic/issues/1458","id":831297951,"node_id":"MDEyOklzc3VlQ29tbWVudDgzMTI5Nzk1MQ==","user":{"login":"tiangolo","id":1326112,"node_id":"MDQ6VXNlcjEzMjYxMTI=","avatar_url":"https://avatars.githubusercontent.com/u/1326112?v=4","gravatar_id":"","url":"https://api.github.com/users/tiangolo","html_url":"https://github.com/tiangolo","followers_url":"https://api.github.com/users/tiangolo/followers","following_url":"https://api.github.com/users/tiangolo/following{/other_user}","gists_url":"https://api.github.com/users/tiangolo/gists{/gist_id}","starred_url":"https://api.github.com/users/tiangolo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tiangolo/subscriptions","organizations_url":"https://api.github.com/users/tiangolo/orgs","repos_url":"https://api.github.com/users/tiangolo/repos","events_url":"https://api.github.com/users/tiangolo/events{/privacy}","received_events_url":"https://api.github.com/users/tiangolo/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-03T14:30:11Z","updated_at":"2021-05-03T14:30:11Z","body":"I planned on working on https://github.com/samuelcolvin/pydantic/pull/1848 again soon (re-implement/finish it), but after finishing with https://github.com/samuelcolvin/pydantic/pull/2721","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/pydantic/pydantic/issues/comments/831297951/reactions","total_count":2,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":1},"performed_via_github_app":null,"event":"commented","actor":{"login":"tiangolo","id":1326112,"node_id":"MDQ6VXNlcjEzMjYxMTI=","avatar_url":"https://avatars.githubusercontent.com/u/1326112?v=4","gravatar_id":"","url":"https://api.github.com/users/tiangolo","html_url":"https://github.com/tiangolo","followers_url":"https://api.github.com/users/tiangolo/followers","following_url":"https://api.github.com/users/tiangolo/following{/other_user}","gists_url":"https://api.github.com/users/tiangolo/gists{/gist_id}","starred_url":"https://api.github.com/users/tiangolo/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tiangolo/subscriptions","organizations_url":"https://api.github.com/users/tiangolo/orgs","repos_url":"https://api.github.com/users/tiangolo/repos","events_url":"https://api.github.com/users/tiangolo/events{/privacy}","received_events_url":"https://api.github.com/users/tiangolo/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/pydantic/pydantic/issues/comments/831393227","html_url":"https://github.com/pydantic/pydantic/issues/1458#issuecomment-831393227","issue_url":"https://api.github.com/repos/pydantic/pydantic/issues/1458","id":831393227,"node_id":"MDEyOklzc3VlQ29tbWVudDgzMTM5MzIyNw==","user":{"login":"pjbull","id":1799186,"node_id":"MDQ6VXNlcjE3OTkxODY=","avatar_url":"https://avatars.githubusercontent.com/u/1799186?v=4","gravatar_id":"","url":"https://api.github.com/users/pjbull","html_url":"https://github.com/pjbull","followers_url":"https://api.github.com/users/pjbull/followers","following_url":"https://api.github.com/users/pjbull/following{/other_user}","gists_url":"https://api.github.com/users/pjbull/gists{/gist_id}","starred_url":"https://api.github.com/users/pjbull/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pjbull/subscriptions","organizations_url":"https://api.github.com/users/pjbull/orgs","repos_url":"https://api.github.com/users/pjbull/repos","events_url":"https://api.github.com/users/pjbull/events{/privacy}","received_events_url":"https://api.github.com/users/pjbull/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-05-03T16:56:32Z","updated_at":"2021-05-03T16:56:32Z","body":"🎉 I think that if #1848 goes in then we can check for those types here:\r\nhttps://github.com/samuelcolvin/pydantic/blob/42395056e18dfaa3ef299373374ab3b12bb196ac/pydantic/env_settings.py#L170-L174\r\n\r\nAnd then we can keep the JSON fallback behavior as well.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/pydantic/pydantic/issues/comments/831393227/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"pjbull","id":1799186,"node_id":"MDQ6VXNlcjE3OTkxODY=","avatar_url":"https://avatars.githubusercontent.com/u/1799186?v=4","gravatar_id":"","url":"https://api.github.com/users/pjbull","html_url":"https://github.com/pjbull","followers_url":"https://api.github.com/users/pjbull/followers","following_url":"https://api.github.com/users/pjbull/following{/other_user}","gists_url":"https://api.github.com/users/pjbull/gists{/gist_id}","starred_url":"https://api.github.com/users/pjbull/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pjbull/subscriptions","organizations_url":"https://api.github.com/users/pjbull/orgs","repos_url":"https://api.github.com/users/pjbull/repos","events_url":"https://api.github.com/users/pjbull/events{/privacy}","received_events_url":"https://api.github.com/users/pjbull/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/pydantic/pydantic/issues/comments/1003594753","html_url":"https://github.com/pydantic/pydantic/issues/1458#issuecomment-1003594753","issue_url":"https://api.github.com/repos/pydantic/pydantic/issues/1458","id":1003594753,"node_id":"IC_kwDOBWBCuM470aQB","user":{"login":"jooola","id":19195485,"node_id":"MDQ6VXNlcjE5MTk1NDg1","avatar_url":"https://avatars.githubusercontent.com/u/19195485?v=4","gravatar_id":"","url":"https://api.github.com/users/jooola","html_url":"https://github.com/jooola","followers_url":"https://api.github.com/users/jooola/followers","following_url":"https://api.github.com/users/jooola/following{/other_user}","gists_url":"https://api.github.com/users/jooola/gists{/gist_id}","starred_url":"https://api.github.com/users/jooola/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jooola/subscriptions","organizations_url":"https://api.github.com/users/jooola/orgs","repos_url":"https://api.github.com/users/jooola/repos","events_url":"https://api.github.com/users/jooola/events{/privacy}","received_events_url":"https://api.github.com/users/jooola/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-01-01T18:06:08Z","updated_at":"2022-01-01T18:06:08Z","body":"I suggest that this issue should also consider adding the ability to parse environment variables into dictionaries directly:\r\n\r\n```python\r\nimport os\r\nfrom typing import Optional, Dict\r\nfrom pydantic import BaseSettings, Field, validator\r\n\r\nos.environ[\"COLORS\"] = \"red:#FF0000,blue:#0000FF,green:#00FF00\"\r\n\r\n\r\nclass Example(BaseSettings):\r\n    colors: Optional[Dict[str, str]] = Field(None, env=\"COLORS\")\r\n\r\n    # Result would be:\r\n    colors = {\"red\": \"#FF0000\", \"blue\": \"#0000FF\", \"green\": \"#00FF00\"}\r\n\r\n```\r\n\r\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/pydantic/pydantic/issues/comments/1003594753/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jooola","id":19195485,"node_id":"MDQ6VXNlcjE5MTk1NDg1","avatar_url":"https://avatars.githubusercontent.com/u/19195485?v=4","gravatar_id":"","url":"https://api.github.com/users/jooola","html_url":"https://github.com/jooola","followers_url":"https://api.github.com/users/jooola/followers","following_url":"https://api.github.com/users/jooola/following{/other_user}","gists_url":"https://api.github.com/users/jooola/gists{/gist_id}","starred_url":"https://api.github.com/users/jooola/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jooola/subscriptions","organizations_url":"https://api.github.com/users/jooola/orgs","repos_url":"https://api.github.com/users/jooola/repos","events_url":"https://api.github.com/users/jooola/events{/privacy}","received_events_url":"https://api.github.com/users/jooola/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/pydantic/pydantic/issues/comments/1046135107","html_url":"https://github.com/pydantic/pydantic/issues/1458#issuecomment-1046135107","issue_url":"https://api.github.com/repos/pydantic/pydantic/issues/1458","id":1046135107,"node_id":"IC_kwDOBWBCuM4-WsFD","user":{"login":"filipe-cantarelli","id":1732098,"node_id":"MDQ6VXNlcjE3MzIwOTg=","avatar_url":"https://avatars.githubusercontent.com/u/1732098?v=4","gravatar_id":"","url":"https://api.github.com/users/filipe-cantarelli","html_url":"https://github.com/filipe-cantarelli","followers_url":"https://api.github.com/users/filipe-cantarelli/followers","following_url":"https://api.github.com/users/filipe-cantarelli/following{/other_user}","gists_url":"https://api.github.com/users/filipe-cantarelli/gists{/gist_id}","starred_url":"https://api.github.com/users/filipe-cantarelli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/filipe-cantarelli/subscriptions","organizations_url":"https://api.github.com/users/filipe-cantarelli/orgs","repos_url":"https://api.github.com/users/filipe-cantarelli/repos","events_url":"https://api.github.com/users/filipe-cantarelli/events{/privacy}","received_events_url":"https://api.github.com/users/filipe-cantarelli/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-02-20T01:01:11Z","updated_at":"2022-02-20T01:01:11Z","body":"It seems with the addition of `SecretsSettingsSource` the parsing code got a little bit duplicate. \r\n\r\nI think that now it makes more sense to follow Option 1 described by @pjbull, but also to delegate the whole parsing logic to the Field, i.e: `field.parse(value)`, instead of having the following code in all sources\r\n```\r\nif field.is_complex():\r\n          try:\r\n              secret_value = settings.__config__.json_loads(secret_value)\r\n          except ValueError as e:\r\n              raise SettingsError(f'error parsing JSON for \"{env_name}\"') from e\r\n```\r\n\r\nI could try this implementation if desired @samuelcolvin.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/pydantic/pydantic/issues/comments/1046135107/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"filipe-cantarelli","id":1732098,"node_id":"MDQ6VXNlcjE3MzIwOTg=","avatar_url":"https://avatars.githubusercontent.com/u/1732098?v=4","gravatar_id":"","url":"https://api.github.com/users/filipe-cantarelli","html_url":"https://github.com/filipe-cantarelli","followers_url":"https://api.github.com/users/filipe-cantarelli/followers","following_url":"https://api.github.com/users/filipe-cantarelli/following{/other_user}","gists_url":"https://api.github.com/users/filipe-cantarelli/gists{/gist_id}","starred_url":"https://api.github.com/users/filipe-cantarelli/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/filipe-cantarelli/subscriptions","organizations_url":"https://api.github.com/users/filipe-cantarelli/orgs","repos_url":"https://api.github.com/users/filipe-cantarelli/repos","events_url":"https://api.github.com/users/filipe-cantarelli/events{/privacy}","received_events_url":"https://api.github.com/users/filipe-cantarelli/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":6106608018,"node_id":"MEE_lADOBWBCuM4kU3DUzwAAAAFr-3GS","url":"https://api.github.com/repos/pydantic/pydantic/issues/events/6106608018","actor":{"login":"pjbull","id":1799186,"node_id":"MDQ6VXNlcjE3OTkxODY=","avatar_url":"https://avatars.githubusercontent.com/u/1799186?v=4","gravatar_id":"","url":"https://api.github.com/users/pjbull","html_url":"https://github.com/pjbull","followers_url":"https://api.github.com/users/pjbull/followers","following_url":"https://api.github.com/users/pjbull/following{/other_user}","gists_url":"https://api.github.com/users/pjbull/gists{/gist_id}","starred_url":"https://api.github.com/users/pjbull/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pjbull/subscriptions","organizations_url":"https://api.github.com/users/pjbull/orgs","repos_url":"https://api.github.com/users/pjbull/repos","events_url":"https://api.github.com/users/pjbull/events{/privacy}","received_events_url":"https://api.github.com/users/pjbull/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-02-20T01:01:11Z","performed_via_github_app":null},{"id":6106608019,"node_id":"SE_lADOBWBCuM4kU3DUzwAAAAFr-3GT","url":"https://api.github.com/repos/pydantic/pydantic/issues/events/6106608019","actor":{"login":"pjbull","id":1799186,"node_id":"MDQ6VXNlcjE3OTkxODY=","avatar_url":"https://avatars.githubusercontent.com/u/1799186?v=4","gravatar_id":"","url":"https://api.github.com/users/pjbull","html_url":"https://github.com/pjbull","followers_url":"https://api.github.com/users/pjbull/followers","following_url":"https://api.github.com/users/pjbull/following{/other_user}","gists_url":"https://api.github.com/users/pjbull/gists{/gist_id}","starred_url":"https://api.github.com/users/pjbull/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pjbull/subscriptions","organizations_url":"https://api.github.com/users/pjbull/orgs","repos_url":"https://api.github.com/users/pjbull/repos","events_url":"https://api.github.com/users/pjbull/events{/privacy}","received_events_url":"https://api.github.com/users/pjbull/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-02-20T01:01:11Z","performed_via_github_app":null},{"id":6106608021,"node_id":"MEE_lADOBWBCuM4kU3DUzwAAAAFr-3GV","url":"https://api.github.com/repos/pydantic/pydantic/issues/events/6106608021","actor":{"login":"samuelcolvin","id":4039449,"node_id":"MDQ6VXNlcjQwMzk0NDk=","avatar_url":"https://avatars.githubusercontent.com/u/4039449?v=4","gravatar_id":"","url":"https://api.github.com/users/samuelcolvin","html_url":"https://github.com/samuelcolvin","followers_url":"https://api.github.com/users/samuelcolvin/followers","following_url":"https://api.github.com/users/samuelcolvin/following{/other_user}","gists_url":"https://api.github.com/users/samuelcolvin/gists{/gist_id}","starred_url":"https://api.github.com/users/samuelcolvin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samuelcolvin/subscriptions","organizations_url":"https://api.github.com/users/samuelcolvin/orgs","repos_url":"https://api.github.com/users/samuelcolvin/repos","events_url":"https://api.github.com/users/samuelcolvin/events{/privacy}","received_events_url":"https://api.github.com/users/samuelcolvin/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2022-02-20T01:01:11Z","performed_via_github_app":null},{"id":6106608022,"node_id":"SE_lADOBWBCuM4kU3DUzwAAAAFr-3GW","url":"https://api.github.com/repos/pydantic/pydantic/issues/events/6106608022","actor":{"login":"samuelcolvin","id":4039449,"node_id":"MDQ6VXNlcjQwMzk0NDk=","avatar_url":"https://avatars.githubusercontent.com/u/4039449?v=4","gravatar_id":"","url":"https://api.github.com/users/samuelcolvin","html_url":"https://github.com/samuelcolvin","followers_url":"https://api.github.com/users/samuelcolvin/followers","following_url":"https://api.github.com/users/samuelcolvin/following{/other_user}","gists_url":"https://api.github.com/users/samuelcolvin/gists{/gist_id}","starred_url":"https://api.github.com/users/samuelcolvin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samuelcolvin/subscriptions","organizations_url":"https://api.github.com/users/samuelcolvin/orgs","repos_url":"https://api.github.com/users/samuelcolvin/repos","events_url":"https://api.github.com/users/samuelcolvin/events{/privacy}","received_events_url":"https://api.github.com/users/samuelcolvin/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2022-02-20T01:01:11Z","performed_via_github_app":null}]