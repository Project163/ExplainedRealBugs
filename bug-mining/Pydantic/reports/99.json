{"url":"https://api.github.com/repos/pydantic/pydantic/issues/1383","repository_url":"https://api.github.com/repos/pydantic/pydantic","labels_url":"https://api.github.com/repos/pydantic/pydantic/issues/1383/labels{/name}","comments_url":"https://api.github.com/repos/pydantic/pydantic/issues/1383/comments","events_url":"https://api.github.com/repos/pydantic/pydantic/issues/1383/events","html_url":"https://github.com/pydantic/pydantic/issues/1383","id":598010376,"node_id":"MDU6SXNzdWU1OTgwMTAzNzY=","number":1383,"title":"BaseModel.copy produces copy that modifies the original","user":{"login":"physicsrob","id":635208,"node_id":"MDQ6VXNlcjYzNTIwOA==","avatar_url":"https://avatars.githubusercontent.com/u/635208?v=4","gravatar_id":"","url":"https://api.github.com/users/physicsrob","html_url":"https://github.com/physicsrob","followers_url":"https://api.github.com/users/physicsrob/followers","following_url":"https://api.github.com/users/physicsrob/following{/other_user}","gists_url":"https://api.github.com/users/physicsrob/gists{/gist_id}","starred_url":"https://api.github.com/users/physicsrob/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/physicsrob/subscriptions","organizations_url":"https://api.github.com/users/physicsrob/orgs","repos_url":"https://api.github.com/users/physicsrob/repos","events_url":"https://api.github.com/users/physicsrob/events{/privacy}","received_events_url":"https://api.github.com/users/physicsrob/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":597426502,"node_id":"MDU6TGFiZWw1OTc0MjY1MDI=","url":"https://api.github.com/repos/pydantic/pydantic/labels/bug%20V1","name":"bug V1","color":"ee0701","default":false,"description":"Bug related to Pydantic V1.X"},{"id":1130010594,"node_id":"MDU6TGFiZWwxMTMwMDEwNTk0","url":"https://api.github.com/repos/pydantic/pydantic/labels/documentation","name":"documentation","color":"0a0aff","default":true,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2020-04-10T17:48:08Z","updated_at":"2020-04-15T21:58:57Z","closed_at":"2020-04-15T21:58:57Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"# Bug\r\n\r\nWhen copying a model, changing the value of an attribute on the copy updates the value of the attribute on the original.  This only happens if deep != True.  If this is expected behavior, I would suggest the documentation needs to be updated, because it's different than the intuition one would have for shallow copies of standard python objects.\r\n\r\nMy expectation of a shallow copy:  Modifying a mutable attribute on the child SHOULD modify the mutable attribute on the parent (the attribute should be the same object).  Setting the value of an attribute on the child, however, SHOULD NOT set the value on the original.\r\n\r\n\r\nOutput of `python -c \"import pydantic.utils; print(pydantic.utils.version_info())\"`:\r\n```\r\n             pydantic version: 1.4\r\n            pydantic compiled: True\r\n                 install path: /Users/rob/opt/anaconda3/envs/words_ml/lib/python3.8/site-packages/pydantic\r\n               python version: 3.8.2 (default, Mar 25 2020, 11:22:43)  [Clang 4.0.1 (tags/RELEASE_401/final)]\r\n                     platform: macOS-10.15.4-x86_64-i386-64bit\r\n     optional deps. installed: []\r\n```\r\n\r\nReproduction:\r\n```py\r\nfrom pydantic import BaseModel\r\nfrom typing import Optional, List\r\n\r\nclass X(BaseModel):\r\n    val: int\r\n\r\nx = X(val=1)\r\n\r\ny = x.copy()\r\ny.val= 2\r\n\r\nprint(f\"{x.val =}\") # x.val =2\r\nprint(f\"{y.val =}\") # y.val =2 -- setting the value on the copy also set the value on the original?\r\n\r\n\r\n# My expectation would be that the behavior would be similar to standard python objects:\r\nx = {'val': 1}\r\ny = x.copy()\r\ny['val'] = 2\r\nprint(f\"{x['val'] =}\") # x.val =1\r\nprint(f\"{y['val'] =}\") # y.val =2\r\n```\r\n","closed_by":{"login":"samuelcolvin","id":4039449,"node_id":"MDQ6VXNlcjQwMzk0NDk=","avatar_url":"https://avatars.githubusercontent.com/u/4039449?v=4","gravatar_id":"","url":"https://api.github.com/users/samuelcolvin","html_url":"https://github.com/samuelcolvin","followers_url":"https://api.github.com/users/samuelcolvin/followers","following_url":"https://api.github.com/users/samuelcolvin/following{/other_user}","gists_url":"https://api.github.com/users/samuelcolvin/gists{/gist_id}","starred_url":"https://api.github.com/users/samuelcolvin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samuelcolvin/subscriptions","organizations_url":"https://api.github.com/users/samuelcolvin/orgs","repos_url":"https://api.github.com/users/samuelcolvin/repos","events_url":"https://api.github.com/users/samuelcolvin/events{/privacy}","received_events_url":"https://api.github.com/users/samuelcolvin/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/pydantic/pydantic/issues/1383/reactions","total_count":4,"+1":4,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/pydantic/pydantic/issues/1383/timeline","performed_via_github_app":null,"state_reason":"completed"}