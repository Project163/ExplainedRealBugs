{"url":"https://api.github.com/repos/pydantic/pydantic/issues/3215","repository_url":"https://api.github.com/repos/pydantic/pydantic","labels_url":"https://api.github.com/repos/pydantic/pydantic/issues/3215/labels{/name}","comments_url":"https://api.github.com/repos/pydantic/pydantic/issues/3215/comments","events_url":"https://api.github.com/repos/pydantic/pydantic/issues/3215/events","html_url":"https://github.com/pydantic/pydantic/issues/3215","id":996522806,"node_id":"I_kwDOBWBCuM47Zbs2","number":3215,"title":"Throw descriptive exception for incorrectly defined validator fields.","user":{"login":"SunsetOrange","id":7814343,"node_id":"MDQ6VXNlcjc4MTQzNDM=","avatar_url":"https://avatars.githubusercontent.com/u/7814343?v=4","gravatar_id":"","url":"https://api.github.com/users/SunsetOrange","html_url":"https://github.com/SunsetOrange","followers_url":"https://api.github.com/users/SunsetOrange/followers","following_url":"https://api.github.com/users/SunsetOrange/following{/other_user}","gists_url":"https://api.github.com/users/SunsetOrange/gists{/gist_id}","starred_url":"https://api.github.com/users/SunsetOrange/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/SunsetOrange/subscriptions","organizations_url":"https://api.github.com/users/SunsetOrange/orgs","repos_url":"https://api.github.com/users/SunsetOrange/repos","events_url":"https://api.github.com/users/SunsetOrange/events{/privacy}","received_events_url":"https://api.github.com/users/SunsetOrange/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2021-09-14T23:40:58Z","updated_at":"2022-08-08T12:34:47Z","closed_at":"2022-08-08T12:34:47Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Discussed in https://github.com/samuelcolvin/pydantic/discussions/3129\r\n\r\n<div type='discussions-op-text'>\r\n\r\n<sup>Originally posted by **SunsetOrange** August 24, 2021</sup>\r\nI had been trying to locate a bug in my code for an hour or so, which I eventually narrowed down to an incorrectly defined custom validator decorator. I had placed multiple field strings into the decorator call, inside a list rather than as multiple args.\r\n\r\nMy own mistake, but Pydantic had been throwing a very unhelpful exception stating that my model was not hashable.\r\nThe exception was pointing at the class definition line, not the validator decorator.\r\n\r\n`Exception has occurred: TypeError unhashable type: 'list'`\r\n\r\nThis confused me greatly for a good while as I tried to find a possible location in the model and its super classes where a list was being used as a dictionary key. As this is a mistake that others could easily make (and I think I have made it in the past as well), it would be nice and helpful to output an exception that identifies the mistake and provides helpful feedback. Else wise, the source of the exception is difficult to identify.\r\n\r\nI proposing that the following code be added to class_validators.py at line 75.\r\n```\r\n    elif not all([isinstance(field, str) for field in fields]):\r\n        raise ConfigError(\r\n            \"validator fields should be passed as separate string args. Do not pass multiple fields as a list, etc. \"\r\n            \"E.g. usage should be `@validator('<field_name_1>', '<field_name_2>', ...)` \"\r\n            \"NOT `@validator(['<field_name_1>', '<field_name_2>', ...], ...)`\"\r\n        )\r\n```\r\n</div>","closed_by":{"login":"samuelcolvin","id":4039449,"node_id":"MDQ6VXNlcjQwMzk0NDk=","avatar_url":"https://avatars.githubusercontent.com/u/4039449?v=4","gravatar_id":"","url":"https://api.github.com/users/samuelcolvin","html_url":"https://github.com/samuelcolvin","followers_url":"https://api.github.com/users/samuelcolvin/followers","following_url":"https://api.github.com/users/samuelcolvin/following{/other_user}","gists_url":"https://api.github.com/users/samuelcolvin/gists{/gist_id}","starred_url":"https://api.github.com/users/samuelcolvin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samuelcolvin/subscriptions","organizations_url":"https://api.github.com/users/samuelcolvin/orgs","repos_url":"https://api.github.com/users/samuelcolvin/repos","events_url":"https://api.github.com/users/samuelcolvin/events{/privacy}","received_events_url":"https://api.github.com/users/samuelcolvin/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/pydantic/pydantic/issues/3215/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/pydantic/pydantic/issues/3215/timeline","performed_via_github_app":null,"state_reason":"completed"}