{"url":"https://api.github.com/repos/pydantic/pydantic/issues/1561","repository_url":"https://api.github.com/repos/pydantic/pydantic","labels_url":"https://api.github.com/repos/pydantic/pydantic/issues/1561/labels{/name}","comments_url":"https://api.github.com/repos/pydantic/pydantic/issues/1561/comments","events_url":"https://api.github.com/repos/pydantic/pydantic/issues/1561/events","html_url":"https://github.com/pydantic/pydantic/issues/1561","id":624705957,"node_id":"MDU6SXNzdWU2MjQ3MDU5NTc=","number":1561,"title":"Env settings in the config for a parent field apparently don`t work","user":{"login":"ojomio","id":6757091,"node_id":"MDQ6VXNlcjY3NTcwOTE=","avatar_url":"https://avatars.githubusercontent.com/u/6757091?v=4","gravatar_id":"","url":"https://api.github.com/users/ojomio","html_url":"https://github.com/ojomio","followers_url":"https://api.github.com/users/ojomio/followers","following_url":"https://api.github.com/users/ojomio/following{/other_user}","gists_url":"https://api.github.com/users/ojomio/gists{/gist_id}","starred_url":"https://api.github.com/users/ojomio/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ojomio/subscriptions","organizations_url":"https://api.github.com/users/ojomio/orgs","repos_url":"https://api.github.com/users/ojomio/repos","events_url":"https://api.github.com/users/ojomio/events{/privacy}","received_events_url":"https://api.github.com/users/ojomio/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":597426502,"node_id":"MDU6TGFiZWw1OTc0MjY1MDI=","url":"https://api.github.com/repos/pydantic/pydantic/labels/bug%20V1","name":"bug V1","color":"ee0701","default":false,"description":"Bug related to Pydantic V1.X"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2020-05-26T08:42:21Z","updated_at":"2020-09-06T15:51:41Z","closed_at":"2020-09-06T15:51:41Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"# Bug\r\n\r\nOutput of `python -c \"import pydantic.utils; print(pydantic.utils.version_info())\"`:\r\n```\r\n             pydantic version: 1.5.1\r\n            pydantic compiled: True\r\n                 install path: /home/yury/.cache/pypoetry/virtualenvs/chatbot-py3.6/lib/python3.6/site-packages/pydantic\r\n               python version: 3.6.9 (default, Apr 18 2020, 01:56:04)  [GCC 8.4.0]\r\n                     platform: Linux-5.3.0-51-generic-x86_64-with-Ubuntu-18.04-bionic\r\n     optional deps. installed: ['typing-extensions', 'email-validator']\r\n```\r\nIf I configure an alternative prefix for a field `foo` in the same class it gets into the field configuration, but whenever I set that in the descendant it doesn't seem to have effect\r\n```py\r\nIn [2]: from pydantic import AnyUrl, BaseSettings \r\nIn [4]: %set_env FOO=7                                                                                                                                                                                      \r\nenv: FOO=7\r\n\r\nIn [9]: class A(BaseSettings): \r\n   ...:     foo : int \r\n   ...:     class Config: \r\n   ...:         env_prefix = 'PREFIX_' \r\n   ...:         fields = { \r\n   ...:             'foo': {'env': ['FOO', 'PREFIX_FOO'],}, \r\n   ...:         } \r\n   ...:          \r\n   ...:                                                                                                                                                                                                     \r\nIn [10]: A().foo                                                                                                                                                                                            \r\nOut[10]: 7\r\n\r\nIn [11]: A.__fields__['foo'].field_info                                                                                                                                                                     \r\nOut[11]: FieldInfo(default=Ellipsis, extra={'env': ['FOO', 'PREFIX_FOO'], 'env_names': ['foo', 'prefix_foo']})\r\n\r\nIn [12]: class A(BaseSettings): \r\n    ...:     foo : int \r\n    ...:      \r\n                                                                                                                                                                                              \r\nIn [13]: class B(A): \r\n    ...:     class Config: \r\n    ...:         env_prefix = 'PREFIX_' \r\n    ...:         fields = { \r\n    ...:             'foo': {'env': ['FOO', 'PREFIX_FOO'],}, \r\n    ...:         } \r\n    ...:          \r\n    ...:          \r\n    ...:                                                                                                                                                                                                    \r\n\r\nIn [14]: B().foo                                                                                                                                                                                            \r\n---------------------------------------------------------------------------\r\nValidationError                           Traceback (most recent call last)\r\n<ipython-input-14-40329edc0228> in <module>\r\n----> 1 B().foo\r\n~/.cache/pypoetry/virtualenvs/chatbot-py3.6/lib/python3.6/site-packages/pydantic/env_settings.cpython-36m-x86_64-linux-gnu.so in pydantic.env_settings.BaseSettings.__init__()\r\n~/.cache/pypoetry/virtualenvs/chatbot-py3.6/lib/python3.6/site-packages/pydantic/main.cpython-36m-x86_64-linux-gnu.so in pydantic.main.BaseModel.__init__()\r\nValidationError: 1 validation error for B\r\nfoo\r\n  field required (type=value_error.missing)\r\n\r\nIn [15]: A.__fields__['foo']                                                                                                                                                                                \r\nOut[15]: ModelField(name='foo', type=int, required=True)\r\n\r\nIn [16]: A.__fields__['foo'].field_info                                                                                                                                                                     \r\nOut[16]: FieldInfo(default=Ellipsis, extra={'env_names': {'foo'}})\r\n\r\nIn [17]: B.__fields__['foo'].field_info                                                                                                                                                                     \r\nOut[17]: FieldInfo(default=Ellipsis, extra={'env_names': {'prefix_foo'}})\r\n```\r\n","closed_by":{"login":"samuelcolvin","id":4039449,"node_id":"MDQ6VXNlcjQwMzk0NDk=","avatar_url":"https://avatars.githubusercontent.com/u/4039449?v=4","gravatar_id":"","url":"https://api.github.com/users/samuelcolvin","html_url":"https://github.com/samuelcolvin","followers_url":"https://api.github.com/users/samuelcolvin/followers","following_url":"https://api.github.com/users/samuelcolvin/following{/other_user}","gists_url":"https://api.github.com/users/samuelcolvin/gists{/gist_id}","starred_url":"https://api.github.com/users/samuelcolvin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samuelcolvin/subscriptions","organizations_url":"https://api.github.com/users/samuelcolvin/orgs","repos_url":"https://api.github.com/users/samuelcolvin/repos","events_url":"https://api.github.com/users/samuelcolvin/events{/privacy}","received_events_url":"https://api.github.com/users/samuelcolvin/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/pydantic/pydantic/issues/1561/reactions","total_count":3,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/pydantic/pydantic/issues/1561/timeline","performed_via_github_app":null,"state_reason":"completed"}