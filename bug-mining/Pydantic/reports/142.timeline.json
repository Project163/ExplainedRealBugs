[{"id":4027006262,"node_id":"MDEyOkxhYmVsZWRFdmVudDQwMjcwMDYyNjI=","url":"https://api.github.com/repos/pydantic/pydantic/issues/events/4027006262","actor":{"login":"leovp","id":10929676,"node_id":"MDQ6VXNlcjEwOTI5Njc2","avatar_url":"https://avatars.githubusercontent.com/u/10929676?v=4","gravatar_id":"","url":"https://api.github.com/users/leovp","html_url":"https://github.com/leovp","followers_url":"https://api.github.com/users/leovp/followers","following_url":"https://api.github.com/users/leovp/following{/other_user}","gists_url":"https://api.github.com/users/leovp/gists{/gist_id}","starred_url":"https://api.github.com/users/leovp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leovp/subscriptions","organizations_url":"https://api.github.com/users/leovp/orgs","repos_url":"https://api.github.com/users/leovp/repos","events_url":"https://api.github.com/users/leovp/events{/privacy}","received_events_url":"https://api.github.com/users/leovp/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2020-11-23T10:51:38Z","label":{"name":"bug","color":"ee0701"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/pydantic/pydantic/issues/comments/732313514","html_url":"https://github.com/pydantic/pydantic/issues/2142#issuecomment-732313514","issue_url":"https://api.github.com/repos/pydantic/pydantic/issues/2142","id":732313514,"node_id":"MDEyOklzc3VlQ29tbWVudDczMjMxMzUxNA==","user":{"login":"leovp","id":10929676,"node_id":"MDQ6VXNlcjEwOTI5Njc2","avatar_url":"https://avatars.githubusercontent.com/u/10929676?v=4","gravatar_id":"","url":"https://api.github.com/users/leovp","html_url":"https://github.com/leovp","followers_url":"https://api.github.com/users/leovp/followers","following_url":"https://api.github.com/users/leovp/following{/other_user}","gists_url":"https://api.github.com/users/leovp/gists{/gist_id}","starred_url":"https://api.github.com/users/leovp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leovp/subscriptions","organizations_url":"https://api.github.com/users/leovp/orgs","repos_url":"https://api.github.com/users/leovp/repos","events_url":"https://api.github.com/users/leovp/events{/privacy}","received_events_url":"https://api.github.com/users/leovp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-23T17:35:25Z","updated_at":"2020-11-23T17:56:47Z","body":"https://github.com/samuelcolvin/pydantic/blob/31bc2435d7968fdf8d1f0c5c67f0f851c1bef54e/pydantic/main.py#L789\r\n\r\nAlright, I haven't looked really closely, but here's my guess: `getattr` here can never fallback to `_missing`, since `ModelField.default` is always there and has a value of `None` unless set explicitly:\r\nhttps://github.com/samuelcolvin/pydantic/blob/31bc2435d7968fdf8d1f0c5c67f0f851c1bef54e/pydantic/fields.py#L255\r\n\r\nUPD1: And here's where \"bar\" is created and gets the default value of `None`: https://github.com/samuelcolvin/pydantic/blob/31bc2435d7968fdf8d1f0c5c67f0f851c1bef54e/pydantic/fields.py#L308-L310\r\n\r\nUPD2: Is it a good idea to check `field.field_info.default` instead of `field.default`? In this particular case it has a correct value of `Ellipsis`, and you could special-case it while serialising the model.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/pydantic/pydantic/issues/comments/732313514/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"leovp","id":10929676,"node_id":"MDQ6VXNlcjEwOTI5Njc2","avatar_url":"https://avatars.githubusercontent.com/u/10929676?v=4","gravatar_id":"","url":"https://api.github.com/users/leovp","html_url":"https://github.com/leovp","followers_url":"https://api.github.com/users/leovp/followers","following_url":"https://api.github.com/users/leovp/following{/other_user}","gists_url":"https://api.github.com/users/leovp/gists{/gist_id}","starred_url":"https://api.github.com/users/leovp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leovp/subscriptions","organizations_url":"https://api.github.com/users/leovp/orgs","repos_url":"https://api.github.com/users/leovp/repos","events_url":"https://api.github.com/users/leovp/events{/privacy}","received_events_url":"https://api.github.com/users/leovp/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/pydantic/pydantic/issues/comments/732354574","html_url":"https://github.com/pydantic/pydantic/issues/2142#issuecomment-732354574","issue_url":"https://api.github.com/repos/pydantic/pydantic/issues/2142","id":732354574,"node_id":"MDEyOklzc3VlQ29tbWVudDczMjM1NDU3NA==","user":{"login":"PrettyWood","id":18406791,"node_id":"MDQ6VXNlcjE4NDA2Nzkx","avatar_url":"https://avatars.githubusercontent.com/u/18406791?v=4","gravatar_id":"","url":"https://api.github.com/users/PrettyWood","html_url":"https://github.com/PrettyWood","followers_url":"https://api.github.com/users/PrettyWood/followers","following_url":"https://api.github.com/users/PrettyWood/following{/other_user}","gists_url":"https://api.github.com/users/PrettyWood/gists{/gist_id}","starred_url":"https://api.github.com/users/PrettyWood/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PrettyWood/subscriptions","organizations_url":"https://api.github.com/users/PrettyWood/orgs","repos_url":"https://api.github.com/users/PrettyWood/repos","events_url":"https://api.github.com/users/PrettyWood/events{/privacy}","received_events_url":"https://api.github.com/users/PrettyWood/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-23T18:47:36Z","updated_at":"2020-11-23T18:47:36Z","body":"Hello @leovp and thanks for reporting :)\r\nYou're absolutely right! IMO the good fix would be to set `default = Ellipsis` when `required`\r\nWould you like to make a PR for this? If you want I can do it as well tonight for a `v1.7.3`.\r\nPlease tell me.\r\nCheers","author_association":"COLLABORATOR","reactions":{"url":"https://api.github.com/repos/pydantic/pydantic/issues/comments/732354574/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"PrettyWood","id":18406791,"node_id":"MDQ6VXNlcjE4NDA2Nzkx","avatar_url":"https://avatars.githubusercontent.com/u/18406791?v=4","gravatar_id":"","url":"https://api.github.com/users/PrettyWood","html_url":"https://github.com/PrettyWood","followers_url":"https://api.github.com/users/PrettyWood/followers","following_url":"https://api.github.com/users/PrettyWood/following{/other_user}","gists_url":"https://api.github.com/users/PrettyWood/gists{/gist_id}","starred_url":"https://api.github.com/users/PrettyWood/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PrettyWood/subscriptions","organizations_url":"https://api.github.com/users/PrettyWood/orgs","repos_url":"https://api.github.com/users/PrettyWood/repos","events_url":"https://api.github.com/users/PrettyWood/events{/privacy}","received_events_url":"https://api.github.com/users/PrettyWood/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":4029147711,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDAyOTE0NzcxMQ==","url":"https://api.github.com/repos/pydantic/pydantic/issues/events/4029147711","actor":{"login":"leovp","id":10929676,"node_id":"MDQ6VXNlcjEwOTI5Njc2","avatar_url":"https://avatars.githubusercontent.com/u/10929676?v=4","gravatar_id":"","url":"https://api.github.com/users/leovp","html_url":"https://github.com/leovp","followers_url":"https://api.github.com/users/leovp/followers","following_url":"https://api.github.com/users/leovp/following{/other_user}","gists_url":"https://api.github.com/users/leovp/gists{/gist_id}","starred_url":"https://api.github.com/users/leovp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leovp/subscriptions","organizations_url":"https://api.github.com/users/leovp/orgs","repos_url":"https://api.github.com/users/leovp/repos","events_url":"https://api.github.com/users/leovp/events{/privacy}","received_events_url":"https://api.github.com/users/leovp/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-11-23T18:47:36Z","performed_via_github_app":null},{"id":4029147719,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQwMjkxNDc3MTk=","url":"https://api.github.com/repos/pydantic/pydantic/issues/events/4029147719","actor":{"login":"leovp","id":10929676,"node_id":"MDQ6VXNlcjEwOTI5Njc2","avatar_url":"https://avatars.githubusercontent.com/u/10929676?v=4","gravatar_id":"","url":"https://api.github.com/users/leovp","html_url":"https://github.com/leovp","followers_url":"https://api.github.com/users/leovp/followers","following_url":"https://api.github.com/users/leovp/following{/other_user}","gists_url":"https://api.github.com/users/leovp/gists{/gist_id}","starred_url":"https://api.github.com/users/leovp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leovp/subscriptions","organizations_url":"https://api.github.com/users/leovp/orgs","repos_url":"https://api.github.com/users/leovp/repos","events_url":"https://api.github.com/users/leovp/events{/privacy}","received_events_url":"https://api.github.com/users/leovp/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-11-23T18:47:36Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/pydantic/pydantic/issues/comments/732370014","html_url":"https://github.com/pydantic/pydantic/issues/2142#issuecomment-732370014","issue_url":"https://api.github.com/repos/pydantic/pydantic/issues/2142","id":732370014,"node_id":"MDEyOklzc3VlQ29tbWVudDczMjM3MDAxNA==","user":{"login":"leovp","id":10929676,"node_id":"MDQ6VXNlcjEwOTI5Njc2","avatar_url":"https://avatars.githubusercontent.com/u/10929676?v=4","gravatar_id":"","url":"https://api.github.com/users/leovp","html_url":"https://github.com/leovp","followers_url":"https://api.github.com/users/leovp/followers","following_url":"https://api.github.com/users/leovp/following{/other_user}","gists_url":"https://api.github.com/users/leovp/gists{/gist_id}","starred_url":"https://api.github.com/users/leovp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leovp/subscriptions","organizations_url":"https://api.github.com/users/leovp/orgs","repos_url":"https://api.github.com/users/leovp/repos","events_url":"https://api.github.com/users/leovp/events{/privacy}","received_events_url":"https://api.github.com/users/leovp/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-23T19:17:19Z","updated_at":"2020-11-23T19:17:19Z","body":"@PrettyWood \r\nIt's 11PM where I live, so please go ahead :)","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/pydantic/pydantic/issues/comments/732370014/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"leovp","id":10929676,"node_id":"MDQ6VXNlcjEwOTI5Njc2","avatar_url":"https://avatars.githubusercontent.com/u/10929676?v=4","gravatar_id":"","url":"https://api.github.com/users/leovp","html_url":"https://github.com/leovp","followers_url":"https://api.github.com/users/leovp/followers","following_url":"https://api.github.com/users/leovp/following{/other_user}","gists_url":"https://api.github.com/users/leovp/gists{/gist_id}","starred_url":"https://api.github.com/users/leovp/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/leovp/subscriptions","organizations_url":"https://api.github.com/users/leovp/orgs","repos_url":"https://api.github.com/users/leovp/repos","events_url":"https://api.github.com/users/leovp/events{/privacy}","received_events_url":"https://api.github.com/users/leovp/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":4029255428,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NDAyOTI1NTQyOA==","url":"https://api.github.com/repos/pydantic/pydantic/issues/events/4029255428","actor":{"login":"PrettyWood","id":18406791,"node_id":"MDQ6VXNlcjE4NDA2Nzkx","avatar_url":"https://avatars.githubusercontent.com/u/18406791?v=4","gravatar_id":"","url":"https://api.github.com/users/PrettyWood","html_url":"https://github.com/PrettyWood","followers_url":"https://api.github.com/users/PrettyWood/followers","following_url":"https://api.github.com/users/PrettyWood/following{/other_user}","gists_url":"https://api.github.com/users/PrettyWood/gists{/gist_id}","starred_url":"https://api.github.com/users/PrettyWood/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PrettyWood/subscriptions","organizations_url":"https://api.github.com/users/PrettyWood/orgs","repos_url":"https://api.github.com/users/PrettyWood/repos","events_url":"https://api.github.com/users/PrettyWood/events{/privacy}","received_events_url":"https://api.github.com/users/PrettyWood/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2020-11-23T19:17:19Z","performed_via_github_app":null},{"id":4029255440,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDQwMjkyNTU0NDA=","url":"https://api.github.com/repos/pydantic/pydantic/issues/events/4029255440","actor":{"login":"PrettyWood","id":18406791,"node_id":"MDQ6VXNlcjE4NDA2Nzkx","avatar_url":"https://avatars.githubusercontent.com/u/18406791?v=4","gravatar_id":"","url":"https://api.github.com/users/PrettyWood","html_url":"https://github.com/PrettyWood","followers_url":"https://api.github.com/users/PrettyWood/followers","following_url":"https://api.github.com/users/PrettyWood/following{/other_user}","gists_url":"https://api.github.com/users/PrettyWood/gists{/gist_id}","starred_url":"https://api.github.com/users/PrettyWood/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PrettyWood/subscriptions","organizations_url":"https://api.github.com/users/PrettyWood/orgs","repos_url":"https://api.github.com/users/PrettyWood/repos","events_url":"https://api.github.com/users/PrettyWood/events{/privacy}","received_events_url":"https://api.github.com/users/PrettyWood/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2020-11-23T19:17:19Z","performed_via_github_app":null},{"id":4029793241,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDQwMjk3OTMyNDE=","url":"https://api.github.com/repos/pydantic/pydantic/issues/events/4029793241","actor":{"login":"PrettyWood","id":18406791,"node_id":"MDQ6VXNlcjE4NDA2Nzkx","avatar_url":"https://avatars.githubusercontent.com/u/18406791?v=4","gravatar_id":"","url":"https://api.github.com/users/PrettyWood","html_url":"https://github.com/PrettyWood","followers_url":"https://api.github.com/users/PrettyWood/followers","following_url":"https://api.github.com/users/PrettyWood/following{/other_user}","gists_url":"https://api.github.com/users/PrettyWood/gists{/gist_id}","starred_url":"https://api.github.com/users/PrettyWood/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PrettyWood/subscriptions","organizations_url":"https://api.github.com/users/PrettyWood/orgs","repos_url":"https://api.github.com/users/PrettyWood/repos","events_url":"https://api.github.com/users/PrettyWood/events{/privacy}","received_events_url":"https://api.github.com/users/PrettyWood/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"ee3ea6811d80efb58d8c86c4a4be5cb4cba988d2","commit_url":"https://api.github.com/repos/PrettyWood/pydantic/commits/ee3ea6811d80efb58d8c86c4a4be5cb4cba988d2","created_at":"2020-11-23T21:50:29Z","performed_via_github_app":null},{"actor":{"login":"PrettyWood","id":18406791,"node_id":"MDQ6VXNlcjE4NDA2Nzkx","avatar_url":"https://avatars.githubusercontent.com/u/18406791?v=4","gravatar_id":"","url":"https://api.github.com/users/PrettyWood","html_url":"https://github.com/PrettyWood","followers_url":"https://api.github.com/users/PrettyWood/followers","following_url":"https://api.github.com/users/PrettyWood/following{/other_user}","gists_url":"https://api.github.com/users/PrettyWood/gists{/gist_id}","starred_url":"https://api.github.com/users/PrettyWood/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PrettyWood/subscriptions","organizations_url":"https://api.github.com/users/PrettyWood/orgs","repos_url":"https://api.github.com/users/PrettyWood/repos","events_url":"https://api.github.com/users/PrettyWood/events{/privacy}","received_events_url":"https://api.github.com/users/PrettyWood/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-11-23T21:52:10Z","updated_at":"2020-11-23T21:52:10Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/pydantic/pydantic/issues/2143","repository_url":"https://api.github.com/repos/pydantic/pydantic","labels_url":"https://api.github.com/repos/pydantic/pydantic/issues/2143/labels{/name}","comments_url":"https://api.github.com/repos/pydantic/pydantic/issues/2143/comments","events_url":"https://api.github.com/repos/pydantic/pydantic/issues/2143/events","html_url":"https://github.com/pydantic/pydantic/pull/2143","id":749154079,"node_id":"MDExOlB1bGxSZXF1ZXN0NTI2MDE3OTgy","number":2143,"title":"fix: set right default value for required (optional) fields","user":{"login":"PrettyWood","id":18406791,"node_id":"MDQ6VXNlcjE4NDA2Nzkx","avatar_url":"https://avatars.githubusercontent.com/u/18406791?v=4","gravatar_id":"","url":"https://api.github.com/users/PrettyWood","html_url":"https://github.com/PrettyWood","followers_url":"https://api.github.com/users/PrettyWood/followers","following_url":"https://api.github.com/users/PrettyWood/following{/other_user}","gists_url":"https://api.github.com/users/PrettyWood/gists{/gist_id}","starred_url":"https://api.github.com/users/PrettyWood/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PrettyWood/subscriptions","organizations_url":"https://api.github.com/users/PrettyWood/orgs","repos_url":"https://api.github.com/users/PrettyWood/repos","events_url":"https://api.github.com/users/PrettyWood/events{/privacy}","received_events_url":"https://api.github.com/users/PrettyWood/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":597426502,"node_id":"MDU6TGFiZWw1OTc0MjY1MDI=","url":"https://api.github.com/repos/pydantic/pydantic/labels/bug%20V1","name":"bug V1","color":"ee0701","default":false,"description":"Bug related to Pydantic V1.X"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2020-11-23T21:52:10Z","updated_at":"2020-12-17T20:46:50Z","closed_at":"2020-11-30T17:55:51Z","author_association":"COLLABORATOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":90194616,"node_id":"MDEwOlJlcG9zaXRvcnk5MDE5NDYxNg==","name":"pydantic","full_name":"pydantic/pydantic","private":false,"owner":{"login":"pydantic","id":110818415,"node_id":"O_kgDOBpr0bw","avatar_url":"https://avatars.githubusercontent.com/u/110818415?v=4","gravatar_id":"","url":"https://api.github.com/users/pydantic","html_url":"https://github.com/pydantic","followers_url":"https://api.github.com/users/pydantic/followers","following_url":"https://api.github.com/users/pydantic/following{/other_user}","gists_url":"https://api.github.com/users/pydantic/gists{/gist_id}","starred_url":"https://api.github.com/users/pydantic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pydantic/subscriptions","organizations_url":"https://api.github.com/users/pydantic/orgs","repos_url":"https://api.github.com/users/pydantic/repos","events_url":"https://api.github.com/users/pydantic/events{/privacy}","received_events_url":"https://api.github.com/users/pydantic/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/pydantic/pydantic","description":"Data validation using Python type hints","fork":false,"url":"https://api.github.com/repos/pydantic/pydantic","forks_url":"https://api.github.com/repos/pydantic/pydantic/forks","keys_url":"https://api.github.com/repos/pydantic/pydantic/keys{/key_id}","collaborators_url":"https://api.github.com/repos/pydantic/pydantic/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/pydantic/pydantic/teams","hooks_url":"https://api.github.com/repos/pydantic/pydantic/hooks","issue_events_url":"https://api.github.com/repos/pydantic/pydantic/issues/events{/number}","events_url":"https://api.github.com/repos/pydantic/pydantic/events","assignees_url":"https://api.github.com/repos/pydantic/pydantic/assignees{/user}","branches_url":"https://api.github.com/repos/pydantic/pydantic/branches{/branch}","tags_url":"https://api.github.com/repos/pydantic/pydantic/tags","blobs_url":"https://api.github.com/repos/pydantic/pydantic/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/pydantic/pydantic/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/pydantic/pydantic/git/refs{/sha}","trees_url":"https://api.github.com/repos/pydantic/pydantic/git/trees{/sha}","statuses_url":"https://api.github.com/repos/pydantic/pydantic/statuses/{sha}","languages_url":"https://api.github.com/repos/pydantic/pydantic/languages","stargazers_url":"https://api.github.com/repos/pydantic/pydantic/stargazers","contributors_url":"https://api.github.com/repos/pydantic/pydantic/contributors","subscribers_url":"https://api.github.com/repos/pydantic/pydantic/subscribers","subscription_url":"https://api.github.com/repos/pydantic/pydantic/subscription","commits_url":"https://api.github.com/repos/pydantic/pydantic/commits{/sha}","git_commits_url":"https://api.github.com/repos/pydantic/pydantic/git/commits{/sha}","comments_url":"https://api.github.com/repos/pydantic/pydantic/comments{/number}","issue_comment_url":"https://api.github.com/repos/pydantic/pydantic/issues/comments{/number}","contents_url":"https://api.github.com/repos/pydantic/pydantic/contents/{+path}","compare_url":"https://api.github.com/repos/pydantic/pydantic/compare/{base}...{head}","merges_url":"https://api.github.com/repos/pydantic/pydantic/merges","archive_url":"https://api.github.com/repos/pydantic/pydantic/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/pydantic/pydantic/downloads","issues_url":"https://api.github.com/repos/pydantic/pydantic/issues{/number}","pulls_url":"https://api.github.com/repos/pydantic/pydantic/pulls{/number}","milestones_url":"https://api.github.com/repos/pydantic/pydantic/milestones{/number}","notifications_url":"https://api.github.com/repos/pydantic/pydantic/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/pydantic/pydantic/labels{/name}","releases_url":"https://api.github.com/repos/pydantic/pydantic/releases{/id}","deployments_url":"https://api.github.com/repos/pydantic/pydantic/deployments","created_at":"2017-05-03T21:23:58Z","updated_at":"2025-11-09T17:32:47Z","pushed_at":"2025-11-09T09:36:17Z","git_url":"git://github.com/pydantic/pydantic.git","ssh_url":"git@github.com:pydantic/pydantic.git","clone_url":"https://github.com/pydantic/pydantic.git","svn_url":"https://github.com/pydantic/pydantic","homepage":"https://docs.pydantic.dev","size":327577,"stargazers_count":25701,"watchers_count":25701,"language":"Python","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":2306,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":512,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["hints","json-schema","parsing","pydantic","python","python310","python311","python312","python313","python39","validation"],"visibility":"public","forks":2306,"open_issues":512,"watchers":25701,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/pydantic/pydantic/pulls/2143","html_url":"https://github.com/pydantic/pydantic/pull/2143","diff_url":"https://github.com/pydantic/pydantic/pull/2143.diff","patch_url":"https://github.com/pydantic/pydantic/pull/2143.patch","merged_at":"2020-11-30T17:55:51Z"},"body":"<!-- Thank you for your contribution! -->\r\n<!-- Unless your change is trivial, please create an issue to discuss the change before creating a PR -->\r\n<!-- See https://pydantic-docs.helpmanual.io/contributing/ for help on Contributing -->\r\n\r\n## Change Summary\r\nWhen a field was required, the default value was `None` and this would mess up with `dict(exclude_defaults=True)`.\r\nNow we set the default value as `Ellipsis` (`...`), which is actually the real default value needed to make a field required.\r\nThis was not caught before because of missing test for this usecase.\r\nBut I feel like the refacto that introduced the bug and this fix make the whole code clearer and more coherent\r\n\r\nℹ️ Bug introduced by refacto done in #1755 and added in v1.7.0\r\n\r\n## Related issue number\r\ncloses #2142\r\n<!-- Are there any issues opened that will be resolved by merging this change? -->\r\n\r\n## Checklist\r\n\r\n* [x] Unit tests for the changes exist\r\n* [x] Tests pass on CI and coverage remains at 100%\r\n* [ ] Documentation reflects the changes where applicable\r\n* [x] `changes/<pull request or issue id>-<github username>.md` file added describing change\r\n  (see [changes/README.md](https://github.com/samuelcolvin/pydantic/blob/master/changes/README.md) for details)\r\n","reactions":{"url":"https://api.github.com/repos/pydantic/pydantic/issues/2143/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/pydantic/pydantic/issues/2143/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":4053226664,"node_id":"MDExOkNsb3NlZEV2ZW50NDA1MzIyNjY2NA==","url":"https://api.github.com/repos/pydantic/pydantic/issues/events/4053226664","actor":{"login":"samuelcolvin","id":4039449,"node_id":"MDQ6VXNlcjQwMzk0NDk=","avatar_url":"https://avatars.githubusercontent.com/u/4039449?v=4","gravatar_id":"","url":"https://api.github.com/users/samuelcolvin","html_url":"https://github.com/samuelcolvin","followers_url":"https://api.github.com/users/samuelcolvin/followers","following_url":"https://api.github.com/users/samuelcolvin/following{/other_user}","gists_url":"https://api.github.com/users/samuelcolvin/gists{/gist_id}","starred_url":"https://api.github.com/users/samuelcolvin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samuelcolvin/subscriptions","organizations_url":"https://api.github.com/users/samuelcolvin/orgs","repos_url":"https://api.github.com/users/samuelcolvin/repos","events_url":"https://api.github.com/users/samuelcolvin/events{/privacy}","received_events_url":"https://api.github.com/users/samuelcolvin/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2020-11-30T17:55:51Z","state_reason":null,"performed_via_github_app":null},{"id":4053226783,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDQwNTMyMjY3ODM=","url":"https://api.github.com/repos/pydantic/pydantic/issues/events/4053226783","actor":{"login":"samuelcolvin","id":4039449,"node_id":"MDQ6VXNlcjQwMzk0NDk=","avatar_url":"https://avatars.githubusercontent.com/u/4039449?v=4","gravatar_id":"","url":"https://api.github.com/users/samuelcolvin","html_url":"https://github.com/samuelcolvin","followers_url":"https://api.github.com/users/samuelcolvin/followers","following_url":"https://api.github.com/users/samuelcolvin/following{/other_user}","gists_url":"https://api.github.com/users/samuelcolvin/gists{/gist_id}","starred_url":"https://api.github.com/users/samuelcolvin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samuelcolvin/subscriptions","organizations_url":"https://api.github.com/users/samuelcolvin/orgs","repos_url":"https://api.github.com/users/samuelcolvin/repos","events_url":"https://api.github.com/users/samuelcolvin/events{/privacy}","received_events_url":"https://api.github.com/users/samuelcolvin/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"c0ac53b7578b74dca8a10d12855f068499d82f0e","commit_url":"https://api.github.com/repos/pydantic/pydantic/commits/c0ac53b7578b74dca8a10d12855f068499d82f0e","created_at":"2020-11-30T17:55:52Z","performed_via_github_app":null},{"id":4053566396,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDQwNTM1NjYzOTY=","url":"https://api.github.com/repos/pydantic/pydantic/issues/events/4053566396","actor":{"login":"samuelcolvin","id":4039449,"node_id":"MDQ6VXNlcjQwMzk0NDk=","avatar_url":"https://avatars.githubusercontent.com/u/4039449?v=4","gravatar_id":"","url":"https://api.github.com/users/samuelcolvin","html_url":"https://github.com/samuelcolvin","followers_url":"https://api.github.com/users/samuelcolvin/followers","following_url":"https://api.github.com/users/samuelcolvin/following{/other_user}","gists_url":"https://api.github.com/users/samuelcolvin/gists{/gist_id}","starred_url":"https://api.github.com/users/samuelcolvin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samuelcolvin/subscriptions","organizations_url":"https://api.github.com/users/samuelcolvin/orgs","repos_url":"https://api.github.com/users/samuelcolvin/repos","events_url":"https://api.github.com/users/samuelcolvin/events{/privacy}","received_events_url":"https://api.github.com/users/samuelcolvin/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"9ae40a209f929e421736a69d093d01749861c772","commit_url":"https://api.github.com/repos/pydantic/pydantic/commits/9ae40a209f929e421736a69d093d01749861c772","created_at":"2020-11-30T19:21:38Z","performed_via_github_app":null},{"actor":{"login":"emreay-","id":6861956,"node_id":"MDQ6VXNlcjY4NjE5NTY=","avatar_url":"https://avatars.githubusercontent.com/u/6861956?v=4","gravatar_id":"","url":"https://api.github.com/users/emreay-","html_url":"https://github.com/emreay-","followers_url":"https://api.github.com/users/emreay-/followers","following_url":"https://api.github.com/users/emreay-/following{/other_user}","gists_url":"https://api.github.com/users/emreay-/gists{/gist_id}","starred_url":"https://api.github.com/users/emreay-/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/emreay-/subscriptions","organizations_url":"https://api.github.com/users/emreay-/orgs","repos_url":"https://api.github.com/users/emreay-/repos","events_url":"https://api.github.com/users/emreay-/events{/privacy}","received_events_url":"https://api.github.com/users/emreay-/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-01T14:39:10Z","updated_at":"2020-12-01T14:39:10Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/pydantic/pydantic/issues/2165","repository_url":"https://api.github.com/repos/pydantic/pydantic","labels_url":"https://api.github.com/repos/pydantic/pydantic/issues/2165/labels{/name}","comments_url":"https://api.github.com/repos/pydantic/pydantic/issues/2165/comments","events_url":"https://api.github.com/repos/pydantic/pydantic/issues/2165/events","html_url":"https://github.com/pydantic/pydantic/issues/2165","id":754452866,"node_id":"MDU6SXNzdWU3NTQ0NTI4NjY=","number":2165,"title":"Required field default value inconsistent (None vs. Ellipsis) between statically and dynamically created models with v1.7.3","user":{"login":"emreay-","id":6861956,"node_id":"MDQ6VXNlcjY4NjE5NTY=","avatar_url":"https://avatars.githubusercontent.com/u/6861956?v=4","gravatar_id":"","url":"https://api.github.com/users/emreay-","html_url":"https://github.com/emreay-","followers_url":"https://api.github.com/users/emreay-/followers","following_url":"https://api.github.com/users/emreay-/following{/other_user}","gists_url":"https://api.github.com/users/emreay-/gists{/gist_id}","starred_url":"https://api.github.com/users/emreay-/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/emreay-/subscriptions","organizations_url":"https://api.github.com/users/emreay-/orgs","repos_url":"https://api.github.com/users/emreay-/repos","events_url":"https://api.github.com/users/emreay-/events{/privacy}","received_events_url":"https://api.github.com/users/emreay-/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":597426502,"node_id":"MDU6TGFiZWw1OTc0MjY1MDI=","url":"https://api.github.com/repos/pydantic/pydantic/labels/bug%20V1","name":"bug V1","color":"ee0701","default":false,"description":"Bug related to Pydantic V1.X"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2020-12-01T14:39:10Z","updated_at":"2021-01-01T14:20:50Z","closed_at":"2021-01-01T14:20:50Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":90194616,"node_id":"MDEwOlJlcG9zaXRvcnk5MDE5NDYxNg==","name":"pydantic","full_name":"pydantic/pydantic","private":false,"owner":{"login":"pydantic","id":110818415,"node_id":"O_kgDOBpr0bw","avatar_url":"https://avatars.githubusercontent.com/u/110818415?v=4","gravatar_id":"","url":"https://api.github.com/users/pydantic","html_url":"https://github.com/pydantic","followers_url":"https://api.github.com/users/pydantic/followers","following_url":"https://api.github.com/users/pydantic/following{/other_user}","gists_url":"https://api.github.com/users/pydantic/gists{/gist_id}","starred_url":"https://api.github.com/users/pydantic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pydantic/subscriptions","organizations_url":"https://api.github.com/users/pydantic/orgs","repos_url":"https://api.github.com/users/pydantic/repos","events_url":"https://api.github.com/users/pydantic/events{/privacy}","received_events_url":"https://api.github.com/users/pydantic/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/pydantic/pydantic","description":"Data validation using Python type hints","fork":false,"url":"https://api.github.com/repos/pydantic/pydantic","forks_url":"https://api.github.com/repos/pydantic/pydantic/forks","keys_url":"https://api.github.com/repos/pydantic/pydantic/keys{/key_id}","collaborators_url":"https://api.github.com/repos/pydantic/pydantic/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/pydantic/pydantic/teams","hooks_url":"https://api.github.com/repos/pydantic/pydantic/hooks","issue_events_url":"https://api.github.com/repos/pydantic/pydantic/issues/events{/number}","events_url":"https://api.github.com/repos/pydantic/pydantic/events","assignees_url":"https://api.github.com/repos/pydantic/pydantic/assignees{/user}","branches_url":"https://api.github.com/repos/pydantic/pydantic/branches{/branch}","tags_url":"https://api.github.com/repos/pydantic/pydantic/tags","blobs_url":"https://api.github.com/repos/pydantic/pydantic/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/pydantic/pydantic/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/pydantic/pydantic/git/refs{/sha}","trees_url":"https://api.github.com/repos/pydantic/pydantic/git/trees{/sha}","statuses_url":"https://api.github.com/repos/pydantic/pydantic/statuses/{sha}","languages_url":"https://api.github.com/repos/pydantic/pydantic/languages","stargazers_url":"https://api.github.com/repos/pydantic/pydantic/stargazers","contributors_url":"https://api.github.com/repos/pydantic/pydantic/contributors","subscribers_url":"https://api.github.com/repos/pydantic/pydantic/subscribers","subscription_url":"https://api.github.com/repos/pydantic/pydantic/subscription","commits_url":"https://api.github.com/repos/pydantic/pydantic/commits{/sha}","git_commits_url":"https://api.github.com/repos/pydantic/pydantic/git/commits{/sha}","comments_url":"https://api.github.com/repos/pydantic/pydantic/comments{/number}","issue_comment_url":"https://api.github.com/repos/pydantic/pydantic/issues/comments{/number}","contents_url":"https://api.github.com/repos/pydantic/pydantic/contents/{+path}","compare_url":"https://api.github.com/repos/pydantic/pydantic/compare/{base}...{head}","merges_url":"https://api.github.com/repos/pydantic/pydantic/merges","archive_url":"https://api.github.com/repos/pydantic/pydantic/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/pydantic/pydantic/downloads","issues_url":"https://api.github.com/repos/pydantic/pydantic/issues{/number}","pulls_url":"https://api.github.com/repos/pydantic/pydantic/pulls{/number}","milestones_url":"https://api.github.com/repos/pydantic/pydantic/milestones{/number}","notifications_url":"https://api.github.com/repos/pydantic/pydantic/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/pydantic/pydantic/labels{/name}","releases_url":"https://api.github.com/repos/pydantic/pydantic/releases{/id}","deployments_url":"https://api.github.com/repos/pydantic/pydantic/deployments","created_at":"2017-05-03T21:23:58Z","updated_at":"2025-11-09T17:32:47Z","pushed_at":"2025-11-09T09:36:17Z","git_url":"git://github.com/pydantic/pydantic.git","ssh_url":"git@github.com:pydantic/pydantic.git","clone_url":"https://github.com/pydantic/pydantic.git","svn_url":"https://github.com/pydantic/pydantic","homepage":"https://docs.pydantic.dev","size":327577,"stargazers_count":25701,"watchers_count":25701,"language":"Python","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":2306,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":512,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["hints","json-schema","parsing","pydantic","python","python310","python311","python312","python313","python39","validation"],"visibility":"public","forks":2306,"open_issues":512,"watchers":25701,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"### Checks\r\n\r\n* [x] I added a descriptive title to this issue\r\n* [x] I have searched (google, github) for similar issues and couldn't find anything\r\n* [x] I have read and followed [the docs](https://pydantic-docs.helpmanual.io/) and still think this is a bug\r\n\r\n<!-- Sorry to sound so draconian, but every second saved replying to issues is time spend improving pydantic :-) -->\r\n\r\n# Bug\r\n\r\nOutput of `python -c \"import pydantic.utils; print(pydantic.utils.version_info())\"`:\r\n```\r\n             pydantic version: 1.7.3\r\n            pydantic compiled: True\r\n                 install path: /usr/local/lib/python3.8/site-packages/pydantic\r\n               python version: 3.8.6 (default, Nov 25 2020, 02:47:44)  [GCC 8.3.0]\r\n                     platform: Linux-5.6.0-1033-oem-x86_64-with-glibc2.2.5\r\n     optional deps. installed: []\r\n```\r\n<!-- or if you're using pydantic prior to v1.3, manually include: OS, python version and pydantic version -->\r\n\r\n<!-- Please read the [docs](https://pydantic-docs.helpmanual.io/) and search through issues to\r\nconfirm your bug hasn't already been reported. -->\r\n\r\n<!-- Where possible please include a self-contained code snippet describing your bug: -->\r\n\r\n```py\r\nfrom typing import Type, Dict\r\n\r\nimport pydantic.utils\r\nfrom pydantic import BaseModel, create_model\r\nfrom pydantic.fields import ModelField, UndefinedType\r\n\r\n\r\nclass A(BaseModel):\r\n    x: int\r\n    y: float\r\n    z: str\r\n\r\n\r\ndef dynamic_model():\r\n    return create_model(\"A\", x=(int, ...), y=(float, ...), z=(str, ...))\r\n\r\n\r\nDYNAMIC_MODEL = dynamic_model()\r\n\r\n\r\ndef get_field_name_to_pydantic_field(model_type: Type[BaseModel]) -> Dict[str, ModelField]:\r\n    return {field.name: field for field in model_type.__fields__.values()}\r\n\r\n\r\ndef assert_model_fields(mf1, mf2):\r\n    assert mf1.type_ is mf2.type_\r\n    assert mf1.name == mf2.name\r\n    assert mf1.default == mf2.default\r\n    assert mf1.required == mf2.required\r\n\r\n    if isinstance(mf1.field_info.default, UndefinedType):\r\n        assert isinstance(mf2.field_info.default, UndefinedType)\r\n    else:\r\n        assert mf1.field_info.default == mf2.field_info.default\r\n    assert mf1.field_info.const == mf2.field_info.const\r\n    assert mf1.field_info.extra == mf2.field_info.extra\r\n\r\n\r\ndef test_statically_and_dynamically_created_equivalent_models():\r\n    print(f\"\\n{pydantic.utils.version_info()}\")\r\n\r\n    print(\"\\nCreated statically:\")\r\n    for n, mf in get_field_name_to_pydantic_field(A).items():\r\n        print(n, mf, mf.default)\r\n\r\n    print(\"\\nCreated dynamically:\")\r\n    for n, mf in get_field_name_to_pydantic_field(DYNAMIC_MODEL).items():\r\n        print(n, mf, mf.default)\r\n\r\n    for field_name in A.__fields__:\r\n        assert_model_fields(A.__fields__[field_name], DYNAMIC_MODEL.__fields__[field_name])\r\n```\r\n\r\nThis bug _might_ be related to https://github.com/samuelcolvin/pydantic/issues/2142 and https://github.com/samuelcolvin/pydantic/commit/9ae40a209f929e421736a69d093d01749861c772 .\r\n\r\nIt seems `pydantic` sets the default value of a required field of a statically created model as `None`. This was the case until `v1.7.2` for the required fields of dynamically created models. However with the `v1.7.3` there seems to be an inconsistent behaviour where the default value for the required fields of dynamically created models are set to be `Ellipsis`. I'm not aware whether this was intentional, or consistent behaviour between statically and dynamically created models is sought after but I wanted to point that out in case it is a regression.\r\n\r\nHere's a dockerized version of the tests: https://github.com/emreay-/pydantic-default-value-inconsistency-test\r\n\r\nThe output for `pydantic==1.7.2` (warnings are pytest cache warnings):\r\n```\r\n=============================================================================================== test session starts ===============================================================================================\r\nplatform linux -- Python 3.8.6, pytest-6.1.2, py-1.9.0, pluggy-0.13.1\r\nrootdir: /\r\ncollected 1 item                                                                                                                                                                                                  \r\n\r\npydantic_default_issue.py \r\n             pydantic version: 1.7.2\r\n            pydantic compiled: True\r\n                 install path: /usr/local/lib/python3.8/site-packages/pydantic\r\n               python version: 3.8.6 (default, Nov 25 2020, 02:47:44)  [GCC 8.3.0]\r\n                     platform: Linux-5.6.0-1033-oem-x86_64-with-glibc2.2.5\r\n     optional deps. installed: []\r\n\r\nCreated statically:\r\nx name='x' type=int required=True None\r\ny name='y' type=float required=True None\r\nz name='z' type=str required=True None\r\n\r\nCreated dynamically:\r\nx name='x' type=int required=True None\r\ny name='y' type=float required=True None\r\nz name='z' type=str required=True None\r\n.\r\n\r\n========================================================================================== 1 passed, 2 warnings in 0.05s ==========================================================================================\r\n```\r\n\r\nThe output for `pydantic==1.7.3` (warnings are pytest cache warnings):\r\n```\r\n=============================================================================================== test session starts ===============================================================================================\r\nplatform linux -- Python 3.8.6, pytest-6.1.2, py-1.9.0, pluggy-0.13.1\r\nrootdir: /\r\ncollected 1 item                                                                                                                                                                                                  \r\n\r\npydantic_default_issue.py \r\n             pydantic version: 1.7.3\r\n            pydantic compiled: True\r\n                 install path: /usr/local/lib/python3.8/site-packages/pydantic\r\n               python version: 3.8.6 (default, Nov 25 2020, 02:47:44)  [GCC 8.3.0]\r\n                     platform: Linux-5.6.0-1033-oem-x86_64-with-glibc2.2.5\r\n     optional deps. installed: []\r\n\r\nCreated statically:\r\nx name='x' type=int required=True None\r\ny name='y' type=float required=True None\r\nz name='z' type=str required=True None\r\n\r\nCreated dynamically:\r\nx name='x' type=int required=True Ellipsis\r\ny name='y' type=float required=True Ellipsis\r\nz name='z' type=str required=True Ellipsis\r\nF\r\n\r\n==================================================================================================== FAILURES =====================================================================================================\r\n____________________________________________________________________________ test_statically_and_dynamically_created_equivalent_models ____________________________________________________________________________\r\n\r\n    def test_statically_and_dynamically_created_equivalent_models():\r\n        print(f\"\\n{pydantic.utils.version_info()}\")\r\n    \r\n        print(\"\\nCreated statically:\")\r\n        for n, mf in get_field_name_to_pydantic_field(A).items():\r\n            print(n, mf, mf.default)\r\n    \r\n        print(\"\\nCreated dynamically:\")\r\n        for n, mf in get_field_name_to_pydantic_field(DYNAMIC_MODEL).items():\r\n            print(n, mf, mf.default)\r\n    \r\n        for field_name in A.__fields__:\r\n>           assert_model_fields(A.__fields__[field_name], DYNAMIC_MODEL.__fields__[field_name])\r\n\r\npydantic_default_issue.py:51: \r\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\r\n\r\nmf1 = ModelField(name='x', type=int, required=True), mf2 = ModelField(name='x', type=int, required=True)\r\n\r\n    def assert_model_fields(mf1, mf2):\r\n        assert mf1.type_ is mf2.type_\r\n        assert mf1.name == mf2.name\r\n>       assert mf1.default == mf2.default\r\nE       AssertionError: assert None == Ellipsis\r\nE        +  where None = ModelField(name='x', type=int, required=True).default\r\nE        +  and   Ellipsis = ModelField(name='x', type=int, required=True).default\r\n\r\npydantic_default_issue.py:28: AssertionError\r\n============================================================================================= short test summary info =============================================================================================\r\nFAILED pydantic_default_issue.py::test_statically_and_dynamically_created_equivalent_models - AssertionError: assert None == Ellipsis\r\n========================================================================================== 1 failed, 3 warnings in 0.07s ==========================================================================================\r\n```","reactions":{"url":"https://api.github.com/repos/pydantic/pydantic/issues/2165/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/pydantic/pydantic/issues/2165/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"actor":{"login":"PrettyWood","id":18406791,"node_id":"MDQ6VXNlcjE4NDA2Nzkx","avatar_url":"https://avatars.githubusercontent.com/u/18406791?v=4","gravatar_id":"","url":"https://api.github.com/users/PrettyWood","html_url":"https://github.com/PrettyWood","followers_url":"https://api.github.com/users/PrettyWood/followers","following_url":"https://api.github.com/users/PrettyWood/following{/other_user}","gists_url":"https://api.github.com/users/PrettyWood/gists{/gist_id}","starred_url":"https://api.github.com/users/PrettyWood/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PrettyWood/subscriptions","organizations_url":"https://api.github.com/users/PrettyWood/orgs","repos_url":"https://api.github.com/users/PrettyWood/repos","events_url":"https://api.github.com/users/PrettyWood/events{/privacy}","received_events_url":"https://api.github.com/users/PrettyWood/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2020-12-02T00:25:49Z","updated_at":"2020-12-02T00:25:49Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/pydantic/pydantic/issues/2167","repository_url":"https://api.github.com/repos/pydantic/pydantic","labels_url":"https://api.github.com/repos/pydantic/pydantic/issues/2167/labels{/name}","comments_url":"https://api.github.com/repos/pydantic/pydantic/issues/2167/comments","events_url":"https://api.github.com/repos/pydantic/pydantic/issues/2167/events","html_url":"https://github.com/pydantic/pydantic/pull/2167","id":754828213,"node_id":"MDExOlB1bGxSZXF1ZXN0NTMwNjU3NDk0","number":2167,"title":"fix: required fields default value is the same for static and dynamic models","user":{"login":"PrettyWood","id":18406791,"node_id":"MDQ6VXNlcjE4NDA2Nzkx","avatar_url":"https://avatars.githubusercontent.com/u/18406791?v=4","gravatar_id":"","url":"https://api.github.com/users/PrettyWood","html_url":"https://github.com/PrettyWood","followers_url":"https://api.github.com/users/PrettyWood/followers","following_url":"https://api.github.com/users/PrettyWood/following{/other_user}","gists_url":"https://api.github.com/users/PrettyWood/gists{/gist_id}","starred_url":"https://api.github.com/users/PrettyWood/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/PrettyWood/subscriptions","organizations_url":"https://api.github.com/users/PrettyWood/orgs","repos_url":"https://api.github.com/users/PrettyWood/repos","events_url":"https://api.github.com/users/PrettyWood/events{/privacy}","received_events_url":"https://api.github.com/users/PrettyWood/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2020-12-02T00:25:49Z","updated_at":"2021-01-01T15:26:11Z","closed_at":"2021-01-01T14:20:50Z","author_association":"COLLABORATOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":90194616,"node_id":"MDEwOlJlcG9zaXRvcnk5MDE5NDYxNg==","name":"pydantic","full_name":"pydantic/pydantic","private":false,"owner":{"login":"pydantic","id":110818415,"node_id":"O_kgDOBpr0bw","avatar_url":"https://avatars.githubusercontent.com/u/110818415?v=4","gravatar_id":"","url":"https://api.github.com/users/pydantic","html_url":"https://github.com/pydantic","followers_url":"https://api.github.com/users/pydantic/followers","following_url":"https://api.github.com/users/pydantic/following{/other_user}","gists_url":"https://api.github.com/users/pydantic/gists{/gist_id}","starred_url":"https://api.github.com/users/pydantic/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pydantic/subscriptions","organizations_url":"https://api.github.com/users/pydantic/orgs","repos_url":"https://api.github.com/users/pydantic/repos","events_url":"https://api.github.com/users/pydantic/events{/privacy}","received_events_url":"https://api.github.com/users/pydantic/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/pydantic/pydantic","description":"Data validation using Python type hints","fork":false,"url":"https://api.github.com/repos/pydantic/pydantic","forks_url":"https://api.github.com/repos/pydantic/pydantic/forks","keys_url":"https://api.github.com/repos/pydantic/pydantic/keys{/key_id}","collaborators_url":"https://api.github.com/repos/pydantic/pydantic/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/pydantic/pydantic/teams","hooks_url":"https://api.github.com/repos/pydantic/pydantic/hooks","issue_events_url":"https://api.github.com/repos/pydantic/pydantic/issues/events{/number}","events_url":"https://api.github.com/repos/pydantic/pydantic/events","assignees_url":"https://api.github.com/repos/pydantic/pydantic/assignees{/user}","branches_url":"https://api.github.com/repos/pydantic/pydantic/branches{/branch}","tags_url":"https://api.github.com/repos/pydantic/pydantic/tags","blobs_url":"https://api.github.com/repos/pydantic/pydantic/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/pydantic/pydantic/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/pydantic/pydantic/git/refs{/sha}","trees_url":"https://api.github.com/repos/pydantic/pydantic/git/trees{/sha}","statuses_url":"https://api.github.com/repos/pydantic/pydantic/statuses/{sha}","languages_url":"https://api.github.com/repos/pydantic/pydantic/languages","stargazers_url":"https://api.github.com/repos/pydantic/pydantic/stargazers","contributors_url":"https://api.github.com/repos/pydantic/pydantic/contributors","subscribers_url":"https://api.github.com/repos/pydantic/pydantic/subscribers","subscription_url":"https://api.github.com/repos/pydantic/pydantic/subscription","commits_url":"https://api.github.com/repos/pydantic/pydantic/commits{/sha}","git_commits_url":"https://api.github.com/repos/pydantic/pydantic/git/commits{/sha}","comments_url":"https://api.github.com/repos/pydantic/pydantic/comments{/number}","issue_comment_url":"https://api.github.com/repos/pydantic/pydantic/issues/comments{/number}","contents_url":"https://api.github.com/repos/pydantic/pydantic/contents/{+path}","compare_url":"https://api.github.com/repos/pydantic/pydantic/compare/{base}...{head}","merges_url":"https://api.github.com/repos/pydantic/pydantic/merges","archive_url":"https://api.github.com/repos/pydantic/pydantic/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/pydantic/pydantic/downloads","issues_url":"https://api.github.com/repos/pydantic/pydantic/issues{/number}","pulls_url":"https://api.github.com/repos/pydantic/pydantic/pulls{/number}","milestones_url":"https://api.github.com/repos/pydantic/pydantic/milestones{/number}","notifications_url":"https://api.github.com/repos/pydantic/pydantic/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/pydantic/pydantic/labels{/name}","releases_url":"https://api.github.com/repos/pydantic/pydantic/releases{/id}","deployments_url":"https://api.github.com/repos/pydantic/pydantic/deployments","created_at":"2017-05-03T21:23:58Z","updated_at":"2025-11-09T17:32:47Z","pushed_at":"2025-11-09T09:36:17Z","git_url":"git://github.com/pydantic/pydantic.git","ssh_url":"git@github.com:pydantic/pydantic.git","clone_url":"https://github.com/pydantic/pydantic.git","svn_url":"https://github.com/pydantic/pydantic","homepage":"https://docs.pydantic.dev","size":327577,"stargazers_count":25701,"watchers_count":25701,"language":"Python","has_issues":true,"has_projects":false,"has_downloads":true,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":2306,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":512,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["hints","json-schema","parsing","pydantic","python","python310","python311","python312","python313","python39","validation"],"visibility":"public","forks":2306,"open_issues":512,"watchers":25701,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/pydantic/pydantic/pulls/2167","html_url":"https://github.com/pydantic/pydantic/pull/2167","diff_url":"https://github.com/pydantic/pydantic/pull/2167.diff","patch_url":"https://github.com/pydantic/pydantic/pull/2167.patch","merged_at":"2021-01-01T14:20:49Z"},"body":"<!-- Thank you for your contribution! -->\r\n<!-- Unless your change is trivial, please create an issue to discuss the change before creating a PR -->\r\n<!-- See https://pydantic-docs.helpmanual.io/contributing/ for help on Contributing -->\r\n\r\n## Change Summary\r\nI went a bit fast when fixing #2142.\r\nThe issue concerned the `exclude_defaults` param of `BaseModel.dict()` method. The bug appeared because `fields_defaults` has been [removed](https://github.com/samuelcolvin/pydantic/commit/4bc4230df6294c62667fc3779328019a28912147#diff-8708af8d26c26644976866f974e0b810b0940ede43ff487e457057d5a1f07999L218) recently.\r\nI fixed the behaviour by setting the default value to `...` (aka `Ellipsis`) when a field is required.\r\n\r\n**BUT** we now have a difference between statically created model and dynamically created model as shown in #2165.\r\n- For dynamic models where we set `x=(int, ...)`, we set the `value` to `...` so [here](https://github.com/samuelcolvin/pydantic/blob/master/pydantic/fields.py#L308) `value` will remain `Ellipsis` (aka `Required`... I didn't need to set it again)\r\nIt used to be `None` before\r\n- For static models, we set [in the metaclass](https://github.com/samuelcolvin/pydantic/blob/master/pydantic/main.py#L255) field value to `Undefined` by default, which will then be `None`.\r\n\r\n@samuelcolvin \r\nIMO the best solution would be to use `...` instead of `Undefined` by default in the metaclass but it would probably be a breaking change that could be done for v2 \r\nEDIT: Saw your [remark](https://github.com/samuelcolvin/pydantic/issues/990#issuecomment-558134788) in https://github.com/samuelcolvin/pydantic/issues/990. Glad we agree\r\n\r\nThis PR doesn't break anything and does what #2142 should have been\r\n\r\n## Related issue number\r\ncloses #2165\r\n\r\n## Checklist\r\n\r\n* [ ] Unit tests for the changes exist\r\n* [ ] Tests pass on CI and coverage remains at 100%\r\n* [ ] Documentation reflects the changes where applicable\r\n* [ ] `changes/<pull request or issue id>-<github username>.md` file added describing change\r\n  (see [changes/README.md](https://github.com/samuelcolvin/pydantic/blob/master/changes/README.md) for details)\r\n","reactions":{"url":"https://api.github.com/repos/pydantic/pydantic/issues/2167/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/pydantic/pydantic/issues/2167/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":4160987196,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDQxNjA5ODcxOTY=","url":"https://api.github.com/repos/pydantic/pydantic/issues/events/4160987196","actor":{"login":"samuelcolvin","id":4039449,"node_id":"MDQ6VXNlcjQwMzk0NDk=","avatar_url":"https://avatars.githubusercontent.com/u/4039449?v=4","gravatar_id":"","url":"https://api.github.com/users/samuelcolvin","html_url":"https://github.com/samuelcolvin","followers_url":"https://api.github.com/users/samuelcolvin/followers","following_url":"https://api.github.com/users/samuelcolvin/following{/other_user}","gists_url":"https://api.github.com/users/samuelcolvin/gists{/gist_id}","starred_url":"https://api.github.com/users/samuelcolvin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samuelcolvin/subscriptions","organizations_url":"https://api.github.com/users/samuelcolvin/orgs","repos_url":"https://api.github.com/users/samuelcolvin/repos","events_url":"https://api.github.com/users/samuelcolvin/events{/privacy}","received_events_url":"https://api.github.com/users/samuelcolvin/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"2f439eff0d2f9272aad00a13669ac54c1d00a216","commit_url":"https://api.github.com/repos/pydantic/pydantic/commits/2f439eff0d2f9272aad00a13669ac54c1d00a216","created_at":"2021-01-01T14:19:27Z","performed_via_github_app":null}]