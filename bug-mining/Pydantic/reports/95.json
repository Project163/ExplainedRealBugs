{"url":"https://api.github.com/repos/pydantic/pydantic/issues/866","repository_url":"https://api.github.com/repos/pydantic/pydantic","labels_url":"https://api.github.com/repos/pydantic/pydantic/issues/866/labels{/name}","comments_url":"https://api.github.com/repos/pydantic/pydantic/issues/866/comments","events_url":"https://api.github.com/repos/pydantic/pydantic/issues/866/events","html_url":"https://github.com/pydantic/pydantic/issues/866","id":502946744,"node_id":"MDU6SXNzdWU1MDI5NDY3NDQ=","number":866,"title":"Simplify setting dynamic default values","user":{"login":"valentincalomme","id":7288672,"node_id":"MDQ6VXNlcjcyODg2NzI=","avatar_url":"https://avatars.githubusercontent.com/u/7288672?v=4","gravatar_id":"","url":"https://api.github.com/users/valentincalomme","html_url":"https://github.com/valentincalomme","followers_url":"https://api.github.com/users/valentincalomme/followers","following_url":"https://api.github.com/users/valentincalomme/following{/other_user}","gists_url":"https://api.github.com/users/valentincalomme/gists{/gist_id}","starred_url":"https://api.github.com/users/valentincalomme/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/valentincalomme/subscriptions","organizations_url":"https://api.github.com/users/valentincalomme/orgs","repos_url":"https://api.github.com/users/valentincalomme/repos","events_url":"https://api.github.com/users/valentincalomme/events{/privacy}","received_events_url":"https://api.github.com/users/valentincalomme/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":597426504,"node_id":"MDU6TGFiZWw1OTc0MjY1MDQ=","url":"https://api.github.com/repos/pydantic/pydantic/labels/feature%20request","name":"feature request","color":"84b6eb","default":false,"description":""}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/pydantic/pydantic/milestones/2","html_url":"https://github.com/pydantic/pydantic/milestone/2","labels_url":"https://api.github.com/repos/pydantic/pydantic/milestones/2/labels","id":4856189,"node_id":"MDk6TWlsZXN0b25lNDg1NjE4OQ==","number":2,"title":"Version 2 Issues","description":"Issues/bugs to check before releasing V2.","creator":{"login":"samuelcolvin","id":4039449,"node_id":"MDQ6VXNlcjQwMzk0NDk=","avatar_url":"https://avatars.githubusercontent.com/u/4039449?v=4","gravatar_id":"","url":"https://api.github.com/users/samuelcolvin","html_url":"https://github.com/samuelcolvin","followers_url":"https://api.github.com/users/samuelcolvin/followers","following_url":"https://api.github.com/users/samuelcolvin/following{/other_user}","gists_url":"https://api.github.com/users/samuelcolvin/gists{/gist_id}","starred_url":"https://api.github.com/users/samuelcolvin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samuelcolvin/subscriptions","organizations_url":"https://api.github.com/users/samuelcolvin/orgs","repos_url":"https://api.github.com/users/samuelcolvin/repos","events_url":"https://api.github.com/users/samuelcolvin/events{/privacy}","received_events_url":"https://api.github.com/users/samuelcolvin/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":3,"closed_issues":140,"state":"closed","created_at":"2019-11-18T14:24:31Z","updated_at":"2025-04-23T12:25:25Z","due_on":null,"closed_at":"2023-07-10T13:39:21Z"},"comments":19,"created_at":"2019-10-05T10:35:53Z","updated_at":"2024-06-21T10:12:39Z","closed_at":"2020-03-04T16:37:25Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"# Feature Request\r\n\r\nPlease complete:\r\n* OS: Windows\r\n* Python version 3.7.4 (default, Aug  9 2019, 18:34:13) [MSC v.1915 64 bit (AMD64)]\r\n* Pydantic version: 0.30\r\n\r\n# Feature Request\r\n\r\nCurrently, if I want to have a dynamic default value, it has to be done the following way:\r\n\r\n```py\r\nfrom datetime import datetime\r\n\r\nfrom pydantic import BaseModel, validator\r\nfrom uuid import UUID, uuid4\r\n\r\nclass DemoModel(BaseModel):\r\n    ts: datetime = None\r\n    id: UUID = None\r\n\r\n    @validator('id', pre=True, always=True)\r\n    def set_id(cls, v):\r\n        return v or uuid4()\r\n\r\n    @validator('ts', pre=True, always=True)\r\n    def set_ts_now(cls, v):\r\n        return v or datetime.now()\r\n```\r\n\r\nThis is fine for cases where actual validation has to be provided, however, in many cases like the one portrayed below, this leads to unnecessary code, especially if there are multiple dynamically set values. For instance, a timestamp and an id.\r\n\r\nIt would be great to be able to replace this usage pattern by a pydantic field called `Dynamic` for instance such that one can pass a callable as a default value. This would look like this:\r\n\r\n```py\r\nfrom datetime import datetime\r\nfrom uuid import UUID, uuid4\r\n\r\nfrom pydantic import BaseModel, validator, Dynamic\r\n\r\nclass DemoModel(BaseModel):\r\n    ts: Dynamic[datetime] = datetime.now\r\n    id: Dynamic[UUID] = uuid4\r\n```\r\n\r\nI don't expect that this would need to modify any existing functionalities. Probably just a need to create some sort of wrapper.\r\n","closed_by":{"login":"samuelcolvin","id":4039449,"node_id":"MDQ6VXNlcjQwMzk0NDk=","avatar_url":"https://avatars.githubusercontent.com/u/4039449?v=4","gravatar_id":"","url":"https://api.github.com/users/samuelcolvin","html_url":"https://github.com/samuelcolvin","followers_url":"https://api.github.com/users/samuelcolvin/followers","following_url":"https://api.github.com/users/samuelcolvin/following{/other_user}","gists_url":"https://api.github.com/users/samuelcolvin/gists{/gist_id}","starred_url":"https://api.github.com/users/samuelcolvin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samuelcolvin/subscriptions","organizations_url":"https://api.github.com/users/samuelcolvin/orgs","repos_url":"https://api.github.com/users/samuelcolvin/repos","events_url":"https://api.github.com/users/samuelcolvin/events{/privacy}","received_events_url":"https://api.github.com/users/samuelcolvin/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/pydantic/pydantic/issues/866/reactions","total_count":35,"+1":34,"-1":0,"laugh":0,"hooray":1,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/pydantic/pydantic/issues/866/timeline","performed_via_github_app":null,"state_reason":"completed"}