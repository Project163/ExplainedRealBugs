{"url":"https://api.github.com/repos/pydantic/pydantic/issues/5595","repository_url":"https://api.github.com/repos/pydantic/pydantic","labels_url":"https://api.github.com/repos/pydantic/pydantic/issues/5595/labels{/name}","comments_url":"https://api.github.com/repos/pydantic/pydantic/issues/5595/comments","events_url":"https://api.github.com/repos/pydantic/pydantic/issues/5595/events","html_url":"https://github.com/pydantic/pydantic/issues/5595","id":1684586920,"node_id":"I_kwDOBWBCuM5kaMGo","number":5595,"title":"Unexpected `Sequence[str]` behavior","user":{"login":"lig","id":38705,"node_id":"MDQ6VXNlcjM4NzA1","avatar_url":"https://avatars.githubusercontent.com/u/38705?v=4","gravatar_id":"","url":"https://api.github.com/users/lig","html_url":"https://github.com/lig","followers_url":"https://api.github.com/users/lig/followers","following_url":"https://api.github.com/users/lig/following{/other_user}","gists_url":"https://api.github.com/users/lig/gists{/gist_id}","starred_url":"https://api.github.com/users/lig/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lig/subscriptions","organizations_url":"https://api.github.com/users/lig/orgs","repos_url":"https://api.github.com/users/lig/repos","events_url":"https://api.github.com/users/lig/events{/privacy}","received_events_url":"https://api.github.com/users/lig/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":5233082176,"node_id":"LA_kwDOBWBCuM8AAAABN-p_QA","url":"https://api.github.com/repos/pydantic/pydantic/labels/bug%20V2","name":"bug V2","color":"ee0701","default":false,"description":"Bug related to Pydantic V2"},{"id":6016046429,"node_id":"LA_kwDOBWBCuM8AAAABZpWVXQ","url":"https://api.github.com/repos/pydantic/pydantic/labels/pending","name":"pending","color":"8E4762","default":false,"description":"Is unconfirmed"}],"state":"closed","locked":false,"assignee":{"login":"lig","id":38705,"node_id":"MDQ6VXNlcjM4NzA1","avatar_url":"https://avatars.githubusercontent.com/u/38705?v=4","gravatar_id":"","url":"https://api.github.com/users/lig","html_url":"https://github.com/lig","followers_url":"https://api.github.com/users/lig/followers","following_url":"https://api.github.com/users/lig/following{/other_user}","gists_url":"https://api.github.com/users/lig/gists{/gist_id}","starred_url":"https://api.github.com/users/lig/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lig/subscriptions","organizations_url":"https://api.github.com/users/lig/orgs","repos_url":"https://api.github.com/users/lig/repos","events_url":"https://api.github.com/users/lig/events{/privacy}","received_events_url":"https://api.github.com/users/lig/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"lig","id":38705,"node_id":"MDQ6VXNlcjM4NzA1","avatar_url":"https://avatars.githubusercontent.com/u/38705?v=4","gravatar_id":"","url":"https://api.github.com/users/lig","html_url":"https://github.com/lig","followers_url":"https://api.github.com/users/lig/followers","following_url":"https://api.github.com/users/lig/following{/other_user}","gists_url":"https://api.github.com/users/lig/gists{/gist_id}","starred_url":"https://api.github.com/users/lig/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lig/subscriptions","organizations_url":"https://api.github.com/users/lig/orgs","repos_url":"https://api.github.com/users/lig/repos","events_url":"https://api.github.com/users/lig/events{/privacy}","received_events_url":"https://api.github.com/users/lig/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/pydantic/pydantic/milestones/2","html_url":"https://github.com/pydantic/pydantic/milestone/2","labels_url":"https://api.github.com/repos/pydantic/pydantic/milestones/2/labels","id":4856189,"node_id":"MDk6TWlsZXN0b25lNDg1NjE4OQ==","number":2,"title":"Version 2 Issues","description":"Issues/bugs to check before releasing V2.","creator":{"login":"samuelcolvin","id":4039449,"node_id":"MDQ6VXNlcjQwMzk0NDk=","avatar_url":"https://avatars.githubusercontent.com/u/4039449?v=4","gravatar_id":"","url":"https://api.github.com/users/samuelcolvin","html_url":"https://github.com/samuelcolvin","followers_url":"https://api.github.com/users/samuelcolvin/followers","following_url":"https://api.github.com/users/samuelcolvin/following{/other_user}","gists_url":"https://api.github.com/users/samuelcolvin/gists{/gist_id}","starred_url":"https://api.github.com/users/samuelcolvin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samuelcolvin/subscriptions","organizations_url":"https://api.github.com/users/samuelcolvin/orgs","repos_url":"https://api.github.com/users/samuelcolvin/repos","events_url":"https://api.github.com/users/samuelcolvin/events{/privacy}","received_events_url":"https://api.github.com/users/samuelcolvin/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":3,"closed_issues":140,"state":"closed","created_at":"2019-11-18T14:24:31Z","updated_at":"2025-04-23T12:25:25Z","due_on":null,"closed_at":"2023-07-10T13:39:21Z"},"comments":7,"created_at":"2023-04-26T09:02:04Z","updated_at":"2025-01-27T10:48:40Z","closed_at":"2023-05-03T15:13:27Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Initial Checks\r\n\r\n- [X] I confirm that I'm using Pydantic V2 installed directly from the `main` branch, or equivalent\r\n\r\n### Description\r\n\r\nConsider the following model class\r\n\r\n```python\r\nimport pydantic\r\nimport typing\r\n\r\nclass Model(pydantic.BaseModel):\r\n    str_sequence: typing.Sequence[str]\r\n    str_value: str\r\n```\r\n\r\nPassing correct values works as expected\r\n\r\n```python\r\nm = Model(str_sequence=['a', 'b', 'c'], str_value='abc')\r\nrepr(m)  # \"Model(str_sequence=['a', 'b', 'c'], str_value='abc')\"\r\n```\r\n\r\nPassing a list of strings into a string property fails as expected\r\n\r\n```python\r\nModel(str_sequence='abc', str_value=['a', 'b', 'c'])\r\n```\r\n```\r\npydantic_core._pydantic_core.ValidationError: 1 validation error for Model\r\nstr_value\r\n  Input should be a valid string [type=string_type, input_value=['a', 'b', 'c'], input_type=list]\r\n```\r\n\r\nPassing a string into a `Sequence[str]` property results in the `str` value being accepted as a valid `Sequence[str]` value\r\n\r\n```\r\nm = Model(str_sequence='abc', str_value='abc')\r\nrepr(m)\r\n\"Model(str_sequence='abc', str_value='abc')\"\r\n```\r\n\r\nThis doesn't match `list` behavior\r\n\r\n```python\r\nclass Model1(pydantic.BaseModel):\r\n    str_list: list[str]\r\n\r\nm1 = Model1(str_list='abc')\r\n```\r\n```\r\npydantic_core._pydantic_core.ValidationError: 1 validation error for Model1\r\nstr_list\r\n  Input should be a valid list [type=list_type, input_value='abc', input_type=str]\r\n```\r\n\r\nPydantic 1.10 also correctly raises a validation error in this case\r\n\r\n```python\r\n>>> import pydantic\r\n>>> import typing\r\n>>> class Model(pydantic.BaseModel):\r\n...     str_sequence: typing.Sequence[str]\r\n...     str_value: str\r\n... \r\n>>> m = Model(str_sequence='abc', str_value='abc')\r\nTraceback (most recent call last):\r\n  File \"<stdin>\", line 1, in <module>\r\n  File \"/home/lig/workspace/pydantic/pydantic1/pydantic/main.py\", line 341, in __init__\r\n    raise validation_error\r\npydantic.error_wrappers.ValidationError: 1 validation error for Model\r\nstr_sequence\r\n  value is not a valid sequence (type=type_error.sequence)\r\n```\r\n\r\n### Example Code\r\n\r\n```python\r\nfrom pydantic import BaseModel\r\nfrom typing import Sequence\r\n\r\nclass Model(BaseModel):\r\n    str_sequence: Sequence[str]\r\n    str_value: str\r\n\r\nm = Model(str_sequence='abc', str_value='abc')\r\nrepr(m)  # \"Model(str_sequence='abc', str_value='abc')\"\r\n```\r\n\r\n### Python, Pydantic & OS Version\r\n\r\n```Text\r\npydantic version: 2.0a3\r\n        pydantic-core version: 0.25.0 release build profile\r\n               python version: 3.10.11 (main, Apr  5 2023, 00:00:00) [GCC 13.0.1 20230404 (Red Hat 13.0.1-0)]\r\n                     platform: Linux-6.2.12-300.fc38.x86_64-x86_64-with-glibc2.37\r\n     optional deps. installed: ['devtools', 'email-validator', 'typing-extensions']\r\n```\r\n","closed_by":{"login":"samuelcolvin","id":4039449,"node_id":"MDQ6VXNlcjQwMzk0NDk=","avatar_url":"https://avatars.githubusercontent.com/u/4039449?v=4","gravatar_id":"","url":"https://api.github.com/users/samuelcolvin","html_url":"https://github.com/samuelcolvin","followers_url":"https://api.github.com/users/samuelcolvin/followers","following_url":"https://api.github.com/users/samuelcolvin/following{/other_user}","gists_url":"https://api.github.com/users/samuelcolvin/gists{/gist_id}","starred_url":"https://api.github.com/users/samuelcolvin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samuelcolvin/subscriptions","organizations_url":"https://api.github.com/users/samuelcolvin/orgs","repos_url":"https://api.github.com/users/samuelcolvin/repos","events_url":"https://api.github.com/users/samuelcolvin/events{/privacy}","received_events_url":"https://api.github.com/users/samuelcolvin/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/pydantic/pydantic/issues/5595/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/pydantic/pydantic/issues/5595/timeline","performed_via_github_app":null,"state_reason":"completed"}