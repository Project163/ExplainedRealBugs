{"url":"https://api.github.com/repos/pydantic/pydantic/issues/646","repository_url":"https://api.github.com/repos/pydantic/pydantic","labels_url":"https://api.github.com/repos/pydantic/pydantic/issues/646/labels{/name}","comments_url":"https://api.github.com/repos/pydantic/pydantic/issues/646/comments","events_url":"https://api.github.com/repos/pydantic/pydantic/issues/646/events","html_url":"https://github.com/pydantic/pydantic/issues/646","id":465935610,"node_id":"MDU6SXNzdWU0NjU5MzU2MTA=","number":646,"title":"Cannot produce schema containing Literal","user":{"login":"layday","id":31134424,"node_id":"MDQ6VXNlcjMxMTM0NDI0","avatar_url":"https://avatars.githubusercontent.com/u/31134424?v=4","gravatar_id":"","url":"https://api.github.com/users/layday","html_url":"https://github.com/layday","followers_url":"https://api.github.com/users/layday/followers","following_url":"https://api.github.com/users/layday/following{/other_user}","gists_url":"https://api.github.com/users/layday/gists{/gist_id}","starred_url":"https://api.github.com/users/layday/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/layday/subscriptions","organizations_url":"https://api.github.com/users/layday/orgs","repos_url":"https://api.github.com/users/layday/repos","events_url":"https://api.github.com/users/layday/events{/privacy}","received_events_url":"https://api.github.com/users/layday/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":597426502,"node_id":"MDU6TGFiZWw1OTc0MjY1MDI=","url":"https://api.github.com/repos/pydantic/pydantic/labels/bug%20V1","name":"bug V1","color":"ee0701","default":false,"description":"Bug related to Pydantic V1.X"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2019-07-09T18:57:22Z","updated_at":"2019-07-15T19:06:38Z","closed_at":"2019-07-15T19:06:38Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"<!-- Questions, Feature Requests, and Bug Reports are all welcome -->\r\n<!-- delete as applicable: -->\r\n#  Bug\r\n\r\nThought I'd give the new `Literal` a whirl and stumbled on this:\r\n\r\n```py\r\nIn [1]: import sys\r\n\r\nIn [2]: sys.platform, sys.version\r\nOut[2]:\r\n('darwin',\r\n '3.7.2 (default, Mar  1 2019, 12:15:59) \\n[Clang 5.0.2 (tags/RELEASE_502/final)]')\r\n\r\nIn [3]: import pydantic\r\n\r\nIn [4]: pydantic.VERSION\r\nOut[4]: StrictVersion ('0.30')\r\n\r\nIn [5]: from typing_extensions import Literal\r\n\r\nIn [6]: class Foo(pydantic.BaseModel):\r\n   ...:     bar: Literal['baz']\r\n   ...:\r\n\r\nIn [7]: Foo.schema()\r\n---------------------------------------------------------------------------\r\nTypeError                                 Traceback (most recent call last)\r\n<ipython-input-7-0d83fa816939> in <module>\r\n----> 1 Foo.schema()\r\n\r\n~/code/xyz/.venv/lib/python3.7/site-packages/pydantic/main.py in schema(cls, by_alias)\r\n    461         if cached is not None:\r\n    462             return cached\r\n--> 463         s = model_schema(cls, by_alias=by_alias)\r\n    464         cls._schema_cache[by_alias] = s\r\n    465         return s\r\n\r\n~/code/xyz/.venv/lib/python3.7/site-packages/pydantic/schema.py in model_schema(model, by_alias, ref_prefix)\r\n    233     model_name = model_name_map[model]\r\n    234     m_schema, m_definitions, nested_models = model_process_schema(\r\n--> 235         model, by_alias=by_alias, model_name_map=model_name_map, ref_prefix=ref_prefix\r\n    236     )\r\n    237     if model_name in nested_models:\r\n\r\n~/code/xyz/.venv/lib/python3.7/site-packages/pydantic/schema.py in model_process_schema(model, by_alias, model_name_map, ref_prefix, known_models)\r\n    551     known_models.add(model)\r\n    552     m_schema, m_definitions, nested_models = model_type_schema(\r\n--> 553         model, by_alias=by_alias, model_name_map=model_name_map, ref_prefix=ref_prefix, known_models=known_models\r\n    554     )\r\n    555     s.update(m_schema)\r\n\r\n~/code/xyz/.venv/lib/python3.7/site-packages/pydantic/schema.py in model_type_schema(model, by_alias, model_name_map, ref_prefix, known_models)\r\n    579         try:\r\n    580             f_schema, f_definitions, f_nested_models = field_schema(\r\n--> 581                 f, by_alias=by_alias, model_name_map=model_name_map, ref_prefix=ref_prefix, known_models=known_models\r\n    582             )\r\n    583         except SkipField as skip:\r\n\r\n~/code/xyz/.venv/lib/python3.7/site-packages/pydantic/schema.py in field_schema(field, by_alias, model_name_map, ref_prefix, known_models)\r\n    292         schema_overrides=schema_overrides,\r\n    293         ref_prefix=ref_prefix,\r\n--> 294         known_models=known_models or set(),\r\n    295     )\r\n    296     # $ref will only be returned when there are no schema_overrides\r\n\r\n~/code/xyz/.venv/lib/python3.7/site-packages/pydantic/schema.py in field_type_schema(field, by_alias, model_name_map, schema_overrides, ref_prefix, known_models)\r\n    522             schema_overrides=schema_overrides,\r\n    523             ref_prefix=ref_prefix,\r\n--> 524             known_models=known_models,\r\n    525         )\r\n    526         definitions.update(f_definitions)\r\n\r\n~/code/xyz/.venv/lib/python3.7/site-packages/pydantic/schema.py in field_singleton_schema(field, by_alias, model_name_map, schema_overrides, ref_prefix, known_models)\r\n    743     if field.schema is not None and field.schema.const:\r\n    744         f_schema['const'] = field.default\r\n--> 745     if issubclass(field.type_, Enum):\r\n    746         f_schema.update({'enum': [item.value for item in field.type_]})\r\n    747         # Don't return immediately, to allow adding specific types\r\n\r\nTypeError: issubclass() arg 1 must be a class\r\n```\r\n","closed_by":{"login":"samuelcolvin","id":4039449,"node_id":"MDQ6VXNlcjQwMzk0NDk=","avatar_url":"https://avatars.githubusercontent.com/u/4039449?v=4","gravatar_id":"","url":"https://api.github.com/users/samuelcolvin","html_url":"https://github.com/samuelcolvin","followers_url":"https://api.github.com/users/samuelcolvin/followers","following_url":"https://api.github.com/users/samuelcolvin/following{/other_user}","gists_url":"https://api.github.com/users/samuelcolvin/gists{/gist_id}","starred_url":"https://api.github.com/users/samuelcolvin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/samuelcolvin/subscriptions","organizations_url":"https://api.github.com/users/samuelcolvin/orgs","repos_url":"https://api.github.com/users/samuelcolvin/repos","events_url":"https://api.github.com/users/samuelcolvin/events{/privacy}","received_events_url":"https://api.github.com/users/samuelcolvin/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/pydantic/pydantic/issues/646/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/pydantic/pydantic/issues/646/timeline","performed_via_github_app":null,"state_reason":"completed"}