{"url":"https://api.github.com/repos/emilk/egui/issues/7051","repository_url":"https://api.github.com/repos/emilk/egui","labels_url":"https://api.github.com/repos/emilk/egui/issues/7051/labels{/name}","comments_url":"https://api.github.com/repos/emilk/egui/issues/7051/comments","events_url":"https://api.github.com/repos/emilk/egui/issues/7051/events","html_url":"https://github.com/emilk/egui/issues/7051","id":3066419241,"node_id":"I_kwDOCd2s2862xdgp","number":7051,"title":"text rotation doesn't respect anchor","user":{"login":"pmarks","id":45827,"node_id":"MDQ6VXNlcjQ1ODI3","avatar_url":"https://avatars.githubusercontent.com/u/45827?v=4","gravatar_id":"","url":"https://api.github.com/users/pmarks","html_url":"https://github.com/pmarks","followers_url":"https://api.github.com/users/pmarks/followers","following_url":"https://api.github.com/users/pmarks/following{/other_user}","gists_url":"https://api.github.com/users/pmarks/gists{/gist_id}","starred_url":"https://api.github.com/users/pmarks/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pmarks/subscriptions","organizations_url":"https://api.github.com/users/pmarks/orgs","repos_url":"https://api.github.com/users/pmarks/repos","events_url":"https://api.github.com/users/pmarks/events{/privacy}","received_events_url":"https://api.github.com/users/pmarks/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1191600517,"node_id":"MDU6TGFiZWwxMTkxNjAwNTE3","url":"https://api.github.com/repos/emilk/egui/labels/bug","name":"bug","color":"FBCA04","default":true,"description":"Something is broken"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2025-05-15T14:20:48Z","updated_at":"2025-06-15T23:42:02Z","closed_at":"2025-06-15T23:42:02Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"**Describe the bug**\n\nWhen rotating a TextShape, the center of rotation is the LEFT_TOP, regardless of the anchor used when creating the text with `egui::Shape::text`.  I think the more useful behavior is to rotate about the anchor point.  I can make a PR if folks agree that that is the right behavior.\n\n**To Reproduce**\n\n```rust \n        let pos = Pos2::new(1000.0, 1500.0);\n        let text = \"Sample Text\";\n\n        let label = ctx.fonts(|f| {\n            let mut t = egui::Shape::text(\n                f,\n                pos,\n                egui::Align2::RIGHT_CENTER,\n                text,\n                font.clone(),\n                color,\n            );\n\n            if let egui::epaint::Shape::Text(ts) = &mut t {\n                // No rotation\n                // ts.angle = 0.0;\n                // With rotation\n                ts.angle = -std::f32::consts::PI / 4.0;\n            };\n\n            t\n        });\n        let bb = label.visual_bounding_rect();\n        painter.add(label);\n        painter.add(egui::Shape::rect_stroke(\n            bb,\n            0.0,\n            (1.0, egui::Color32::DARK_RED),\n            egui::StrokeKind::Middle,\n        ));\n        painter.add(egui::Shape::circle_filled(\n            pos,\n            2.0,\n            egui::Color32::DARK_RED,\n        ));\n```\n\n\n**Expected behavior**\nI _think_ we should rotate about the anchor point. So in this example, the same point on the text would remain on top of the dot.  If not, a lot of complicated math gets pushed back onto the user in order to fix this.\n\n**Screenshots**\n\nBefore rotation:\n\n<img width=\"144\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/f591525c-fc46-43fa-8b0c-ea7930dc345f\" />\n\nAfter rotation:\n<img width=\"118\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/fd892b4f-07a3-4a1f-911e-d5db65dc334e\" />\n\n\n**Desktop (please complete the following information):**\n - OS: MacOS native, wgpu. \n\n**Additional context**\n<!-- Add any other context about the problem here. -->\n","closed_by":{"login":"emilk","id":1148717,"node_id":"MDQ6VXNlcjExNDg3MTc=","avatar_url":"https://avatars.githubusercontent.com/u/1148717?v=4","gravatar_id":"","url":"https://api.github.com/users/emilk","html_url":"https://github.com/emilk","followers_url":"https://api.github.com/users/emilk/followers","following_url":"https://api.github.com/users/emilk/following{/other_user}","gists_url":"https://api.github.com/users/emilk/gists{/gist_id}","starred_url":"https://api.github.com/users/emilk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/emilk/subscriptions","organizations_url":"https://api.github.com/users/emilk/orgs","repos_url":"https://api.github.com/users/emilk/repos","events_url":"https://api.github.com/users/emilk/events{/privacy}","received_events_url":"https://api.github.com/users/emilk/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/emilk/egui/issues/7051/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/emilk/egui/issues/7051/timeline","performed_via_github_app":null,"state_reason":"completed"}