{"url":"https://api.github.com/repos/emilk/egui/issues/2752","repository_url":"https://api.github.com/repos/emilk/egui","labels_url":"https://api.github.com/repos/emilk/egui/issues/2752/labels{/name}","comments_url":"https://api.github.com/repos/emilk/egui/issues/2752/comments","events_url":"https://api.github.com/repos/emilk/egui/issues/2752/events","html_url":"https://github.com/emilk/egui/issues/2752","id":1590431109,"node_id":"I_kwDOCd2s285ezA2F","number":2752,"title":"show_blocking_widget debug option makes the application hang","user":{"login":"YgorSouza","id":43298013,"node_id":"MDQ6VXNlcjQzMjk4MDEz","avatar_url":"https://avatars.githubusercontent.com/u/43298013?v=4","gravatar_id":"","url":"https://api.github.com/users/YgorSouza","html_url":"https://github.com/YgorSouza","followers_url":"https://api.github.com/users/YgorSouza/followers","following_url":"https://api.github.com/users/YgorSouza/following{/other_user}","gists_url":"https://api.github.com/users/YgorSouza/gists{/gist_id}","starred_url":"https://api.github.com/users/YgorSouza/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/YgorSouza/subscriptions","organizations_url":"https://api.github.com/users/YgorSouza/orgs","repos_url":"https://api.github.com/users/YgorSouza/repos","events_url":"https://api.github.com/users/YgorSouza/events{/privacy}","received_events_url":"https://api.github.com/users/YgorSouza/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1191600517,"node_id":"MDU6TGFiZWwxMTkxNjAwNTE3","url":"https://api.github.com/repos/emilk/egui/labels/bug","name":"bug","color":"FBCA04","default":true,"description":"Something is broken"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":1,"created_at":"2023-02-18T18:31:20Z","updated_at":"2023-02-28T19:52:38Z","closed_at":"2023-02-28T19:52:38Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"<!--\r\nFirst look if there is already a similar bug report. If there is, upvote the issue with ðŸ‘\r\n\r\nPlease also check if the bug is still present in latest master! Do so by adding the following lines to your Cargo.toml:\r\n\r\n\r\n[patch.crates-io]\r\negui = { git = \"https://github.com/emilk/egui\", branch = \"master\" }\r\n# if you're using eframe:\r\neframe = { git = \"https://github.com/emilk/egui\", branch = \"master\" }\r\n-->\r\n\r\n**Describe the bug**\r\n<!-- A clear and concise description of what the bug is. An image is good, a gif or movie is better! -->\r\nEnabling the `show_blocking_widget` option causes the application to hang. Observed both locally and on https://www.egui.rs/\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n1.  Go to <https://www.egui.rs/>\r\n2. Open Settings windows and expand the Debug collapsing header\r\n3. Check the last option \"Show what widget blocks the interaction of another widget\"\r\n4. The UI stops responding, without using any CPU\r\n\r\n**Expected behavior**\r\n<!-- A clear and concise description of what you expected to happen. -->\r\nThe debug option draws the overlapping rectangles and doesn't freeze the UI.\r\n\r\n**Screenshots**\r\n<!-- If applicable, add screenshots to help explain your problem. -->\r\n\r\n**Desktop (please complete the following information):**\r\n - OS: <!-- e.g. iOS --> Fedora 37\r\n - Browser <!-- e.g. chrome, safari --> Firefox\r\n - Version <!-- e.g. 22 -->110.0\r\n\r\n**Additional context**\r\n<!-- Add any other context about the problem here. -->\r\nThis is the code that runs when this option is enabled:\r\nhttps://github.com/emilk/egui/blob/7215fdfb7c7407b8085d53052582dac10124bdfc/crates/egui/src/context.rs#L587-L598\r\n\r\nThe problem seems to be that this code being called inside a `Context::write()` call, whereas both acquiring and using the layer painter requires some `Context::read()` and `Context::write()` calls, so it causes a deadlock.\r\n","closed_by":{"login":"emilk","id":1148717,"node_id":"MDQ6VXNlcjExNDg3MTc=","avatar_url":"https://avatars.githubusercontent.com/u/1148717?v=4","gravatar_id":"","url":"https://api.github.com/users/emilk","html_url":"https://github.com/emilk","followers_url":"https://api.github.com/users/emilk/followers","following_url":"https://api.github.com/users/emilk/following{/other_user}","gists_url":"https://api.github.com/users/emilk/gists{/gist_id}","starred_url":"https://api.github.com/users/emilk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/emilk/subscriptions","organizations_url":"https://api.github.com/users/emilk/orgs","repos_url":"https://api.github.com/users/emilk/repos","events_url":"https://api.github.com/users/emilk/events{/privacy}","received_events_url":"https://api.github.com/users/emilk/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/emilk/egui/issues/2752/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/emilk/egui/issues/2752/timeline","performed_via_github_app":null,"state_reason":"completed"}