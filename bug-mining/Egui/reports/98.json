{"url":"https://api.github.com/repos/emilk/egui/issues/4469","repository_url":"https://api.github.com/repos/emilk/egui","labels_url":"https://api.github.com/repos/emilk/egui/issues/4469/labels{/name}","comments_url":"https://api.github.com/repos/emilk/egui/issues/4469/comments","events_url":"https://api.github.com/repos/emilk/egui/issues/4469/events","html_url":"https://github.com/emilk/egui/issues/4469","id":2281139852,"node_id":"I_kwDOCd2s286H926M","number":4469,"title":"`with_position` method of ViewportBuilder does not seem to work on wayland","user":{"login":"XDream8","id":62709801,"node_id":"MDQ6VXNlcjYyNzA5ODAx","avatar_url":"https://avatars.githubusercontent.com/u/62709801?v=4","gravatar_id":"","url":"https://api.github.com/users/XDream8","html_url":"https://github.com/XDream8","followers_url":"https://api.github.com/users/XDream8/followers","following_url":"https://api.github.com/users/XDream8/following{/other_user}","gists_url":"https://api.github.com/users/XDream8/gists{/gist_id}","starred_url":"https://api.github.com/users/XDream8/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/XDream8/subscriptions","organizations_url":"https://api.github.com/users/XDream8/orgs","repos_url":"https://api.github.com/users/XDream8/repos","events_url":"https://api.github.com/users/XDream8/events{/privacy}","received_events_url":"https://api.github.com/users/XDream8/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1191600517,"node_id":"MDU6TGFiZWwxMTkxNjAwNTE3","url":"https://api.github.com/repos/emilk/egui/labels/bug","name":"bug","color":"FBCA04","default":true,"description":"Something is broken"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2024-05-06T15:24:03Z","updated_at":"2025-02-20T18:32:35Z","closed_at":"2025-02-20T18:32:35Z","author_association":"NONE","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"<!--\r\nFirst look if there is already a similar bug report. If there is, upvote the issue with ðŸ‘\r\n\r\nPlease also check if the bug is still present in latest master! Do so by adding the following lines to your Cargo.toml:\r\n\r\n\r\n[patch.crates-io]\r\negui = { git = \"https://github.com/emilk/egui\", branch = \"master\" }\r\n# if you're using eframe:\r\neframe = { git = \"https://github.com/emilk/egui\", branch = \"master\" }\r\n-->\r\n```toml\r\neframe = \"0.27.2\"\r\negui_extras = \"0.27.2\"\r\n```\r\n\r\n**Describe the bug**\r\n<!-- A clear and concise description of what the bug is. An image is good, a gif or movie is better! -->\r\nViewportBuilder's with_position method does not seem to work on sway/wayland\r\n\r\n**Desktop (please complete the following information):**\r\n - OS: Linux(Wayland, musl-libc)\r\n\r\n**Additional context**\r\n<!-- Add any other context about the problem here. -->\r\n\r\ncode:\r\n```rust\r\n(...)\r\n\r\n// UI part\r\npub fn run_ui(\r\n    config: &AppConfig,\r\n    header: Option<String>,\r\n    content: String,\r\n) -> Result<(), eframe::Error> {\r\n    let options = eframe::NativeOptions {\r\n        viewport: egui::ViewportBuilder::default()\r\n            .with_app_id(String::from(\"evilbee-notification\"))\r\n            .with_inner_size([\r\n                config.width.unwrap_or(160.0),\r\n                config.heigth.unwrap_or(120.0),\r\n            ])\r\n            .with_resizable(false)\r\n            .with_taskbar(false)\r\n            .with_decorations(true)\r\n            .with_position([0.0, 0.0])\r\n            .with_window_level(egui::WindowLevel::AlwaysOnTop),\r\n        ..Default::default()\r\n    };\r\n    eframe::run_native(\r\n        \"EvilBee Notification\",\r\n        options,\r\n        Box::new(|cc| {\r\n            // This gives us image support:\r\n            egui_extras::install_image_loaders(&cc.egui_ctx);\r\n\r\n            Box::new(EvilBeeUI {\r\n                header,\r\n                content,\r\n                timer: 0,\r\n            })\r\n        }),\r\n    )\r\n}\r\n\r\n(...)\r\n```\r\n\r\nalso when i try to access inner_rect and outer_rect information they return `None`\r\n```\r\n(...)\r\n\r\n                if let Some(inner_rect) = ctx.input(|i| i.viewport().inner_rect) {\r\n                    ui.label(format!(\r\n                        \"Inner Rect: Pos: {:?}, Size: {:?} (points)\",\r\n                        inner_rect.min,\r\n                        inner_rect.size()\r\n                    ));\r\n                }\r\n                if let Some(outer_rect) = ctx.input(|i| i.viewport().outer_rect) {\r\n                    ui.label(format!(\r\n                        \"Outer Rect: Pos: {:?}, Size: {:?} (points)\",\r\n                        outer_rect.min,\r\n                        outer_rect.size()\r\n                    ));\r\n                }\r\n\r\n(...)\r\n```","closed_by":{"login":"lucasmerlin","id":8009393,"node_id":"MDQ6VXNlcjgwMDkzOTM=","avatar_url":"https://avatars.githubusercontent.com/u/8009393?v=4","gravatar_id":"","url":"https://api.github.com/users/lucasmerlin","html_url":"https://github.com/lucasmerlin","followers_url":"https://api.github.com/users/lucasmerlin/followers","following_url":"https://api.github.com/users/lucasmerlin/following{/other_user}","gists_url":"https://api.github.com/users/lucasmerlin/gists{/gist_id}","starred_url":"https://api.github.com/users/lucasmerlin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lucasmerlin/subscriptions","organizations_url":"https://api.github.com/users/lucasmerlin/orgs","repos_url":"https://api.github.com/users/lucasmerlin/repos","events_url":"https://api.github.com/users/lucasmerlin/events{/privacy}","received_events_url":"https://api.github.com/users/lucasmerlin/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/emilk/egui/issues/4469/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/emilk/egui/issues/4469/timeline","performed_via_github_app":null,"state_reason":"completed"}