{"url":"https://api.github.com/repos/emilk/egui/issues/255","repository_url":"https://api.github.com/repos/emilk/egui","labels_url":"https://api.github.com/repos/emilk/egui/issues/255/labels{/name}","comments_url":"https://api.github.com/repos/emilk/egui/issues/255/comments","events_url":"https://api.github.com/repos/emilk/egui/issues/255/events","html_url":"https://github.com/emilk/egui/issues/255","id":841850613,"node_id":"MDU6SXNzdWU4NDE4NTA2MTM=","number":255,"title":"Let `Memory` store arbitrary data for custom widgets.","user":{"login":"optozorax","id":18114381,"node_id":"MDQ6VXNlcjE4MTE0Mzgx","avatar_url":"https://avatars.githubusercontent.com/u/18114381?v=4","gravatar_id":"","url":"https://api.github.com/users/optozorax","html_url":"https://github.com/optozorax","followers_url":"https://api.github.com/users/optozorax/followers","following_url":"https://api.github.com/users/optozorax/following{/other_user}","gists_url":"https://api.github.com/users/optozorax/gists{/gist_id}","starred_url":"https://api.github.com/users/optozorax/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/optozorax/subscriptions","organizations_url":"https://api.github.com/users/optozorax/orgs","repos_url":"https://api.github.com/users/optozorax/repos","events_url":"https://api.github.com/users/optozorax/events{/privacy}","received_events_url":"https://api.github.com/users/optozorax/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":1191600519,"node_id":"MDU6TGFiZWwxMTkxNjAwNTE5","url":"https://api.github.com/repos/emilk/egui/labels/feature","name":"feature","color":"a2eeef","default":false,"description":"New feature or request"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":11,"created_at":"2021-03-26T11:22:52Z","updated_at":"2021-04-12T20:40:46Z","closed_at":"2021-04-12T19:53:33Z","author_association":"CONTRIBUTOR","active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"**Is your feature request related to a problem? Please describe.**\r\nI have this widget:\r\n![image](https://user-images.githubusercontent.com/18114381/112620341-fabfb280-8e5a-11eb-9303-ef3922f23caa.png) ![image](https://user-images.githubusercontent.com/18114381/112620358-00b59380-8e5b-11eb-96f4-8ccd1581e46a.png)\r\n\r\nThis is the editor where the result can be previewed. And this widget has two states: `View` or `Edit`, this can be represented as `bool`. I believe this is more convenient to store this data in `egui::Memory` because this whole thing looks like some complicated widget that receives `&mut String`, and using this we can have the same benefits as other widgets have (able to serialize UI memory between runs). Also, creating custom memory and drag it into every function is quite inconvenient.\r\n\r\nI looking for the code of `CollapsingHeader`, because it has some bool state too (opened or not). And found that `Memory` [hard-coded](https://github.com/emilk/egui/blob/master/egui/src/memory.rs#L30) all data for collapsing headers and collapsing header [uses this](https://github.com/emilk/egui/blob/master/egui/src/containers/collapsing_header.rs#L27) private access. And, as I see there is no public interface to store data for a custom widget.\r\n\r\n**Describe the solution you'd like**\r\nFirst, we can provide an interface to store just a single `bool`, `i32`, `String` using enums for our id.\r\n\r\nBut a more scalable approach is using `HashMap` with `Box<dyn Any + ...>`. Using it, we can store arbitrary types for our `id`. And default widgets can be painlessly rewritten using it.\r\n\r\nWe also can require `Serialize` + `Deserialize` traits for all objects that should be stored in this type-map (under feature, of course).\r\n\r\nBut this type-map can possibly add visible runtime overhead comparing to current hard-coded maps.\r\n\r\n**Describe alternatives you've considered**\r\nNot allowing a user to store data in `egui::Memory`.\r\n\r\n**Additional context**\r\nI want to try to implement this feature by myself and open a Pull Request. What do you think?\r\n","closed_by":{"login":"emilk","id":1148717,"node_id":"MDQ6VXNlcjExNDg3MTc=","avatar_url":"https://avatars.githubusercontent.com/u/1148717?v=4","gravatar_id":"","url":"https://api.github.com/users/emilk","html_url":"https://github.com/emilk","followers_url":"https://api.github.com/users/emilk/followers","following_url":"https://api.github.com/users/emilk/following{/other_user}","gists_url":"https://api.github.com/users/emilk/gists{/gist_id}","starred_url":"https://api.github.com/users/emilk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/emilk/subscriptions","organizations_url":"https://api.github.com/users/emilk/orgs","repos_url":"https://api.github.com/users/emilk/repos","events_url":"https://api.github.com/users/emilk/events{/privacy}","received_events_url":"https://api.github.com/users/emilk/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/emilk/egui/issues/255/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/emilk/egui/issues/255/timeline","performed_via_github_app":null,"state_reason":"completed"}