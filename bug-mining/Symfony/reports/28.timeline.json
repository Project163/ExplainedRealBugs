[{"id":17248304063,"node_id":"LE_lADOAAb9Ss6yZOXLzwAAAAQEFDu_","url":"https://api.github.com/repos/symfony/symfony/issues/events/17248304063","actor":{"login":"ruudk","id":104180,"node_id":"MDQ6VXNlcjEwNDE4MA==","avatar_url":"https://avatars.githubusercontent.com/u/104180?v=4","gravatar_id":"","url":"https://api.github.com/users/ruudk","html_url":"https://github.com/ruudk","followers_url":"https://api.github.com/users/ruudk/followers","following_url":"https://api.github.com/users/ruudk/following{/other_user}","gists_url":"https://api.github.com/users/ruudk/gists{/gist_id}","starred_url":"https://api.github.com/users/ruudk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ruudk/subscriptions","organizations_url":"https://api.github.com/users/ruudk/orgs","repos_url":"https://api.github.com/users/ruudk/repos","events_url":"https://api.github.com/users/ruudk/events{/privacy}","received_events_url":"https://api.github.com/users/ruudk/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2025-04-14T12:41:59Z","label":{"name":"Bug","color":"e10c02"},"performed_via_github_app":null},{"id":17248304601,"node_id":"LE_lADOAAb9Ss6yZOXLzwAAAAQEFD3Z","url":"https://api.github.com/repos/symfony/symfony/issues/events/17248304601","actor":{"login":"carsonbot","id":13338611,"node_id":"MDQ6VXNlcjEzMzM4NjEx","avatar_url":"https://avatars.githubusercontent.com/u/13338611?v=4","gravatar_id":"","url":"https://api.github.com/users/carsonbot","html_url":"https://github.com/carsonbot","followers_url":"https://api.github.com/users/carsonbot/followers","following_url":"https://api.github.com/users/carsonbot/following{/other_user}","gists_url":"https://api.github.com/users/carsonbot/gists{/gist_id}","starred_url":"https://api.github.com/users/carsonbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/carsonbot/subscriptions","organizations_url":"https://api.github.com/users/carsonbot/orgs","repos_url":"https://api.github.com/users/carsonbot/repos","events_url":"https://api.github.com/users/carsonbot/events{/privacy}","received_events_url":"https://api.github.com/users/carsonbot/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2025-04-14T12:42:01Z","label":{"name":"Status: Needs Review","color":"ededed"},"performed_via_github_app":null},{"id":17248304734,"node_id":"LE_lADOAAb9Ss6yZOXLzwAAAAQEFD5e","url":"https://api.github.com/repos/symfony/symfony/issues/events/17248304734","actor":{"login":"carsonbot","id":13338611,"node_id":"MDQ6VXNlcjEzMzM4NjEx","avatar_url":"https://avatars.githubusercontent.com/u/13338611?v=4","gravatar_id":"","url":"https://api.github.com/users/carsonbot","html_url":"https://github.com/carsonbot","followers_url":"https://api.github.com/users/carsonbot/followers","following_url":"https://api.github.com/users/carsonbot/following{/other_user}","gists_url":"https://api.github.com/users/carsonbot/gists{/gist_id}","starred_url":"https://api.github.com/users/carsonbot/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/carsonbot/subscriptions","organizations_url":"https://api.github.com/users/carsonbot/orgs","repos_url":"https://api.github.com/users/carsonbot/repos","events_url":"https://api.github.com/users/carsonbot/events{/privacy}","received_events_url":"https://api.github.com/users/carsonbot/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2025-04-14T12:42:02Z","label":{"name":"Serializer","color":"DDDDDD"},"performed_via_github_app":null},{"id":17248306355,"node_id":"RTE_lADOAAb9Ss6yZOXLzwAAAAQEFESz","url":"https://api.github.com/repos/symfony/symfony/issues/events/17248306355","actor":{"login":"ruudk","id":104180,"node_id":"MDQ6VXNlcjEwNDE4MA==","avatar_url":"https://avatars.githubusercontent.com/u/104180?v=4","gravatar_id":"","url":"https://api.github.com/users/ruudk","html_url":"https://github.com/ruudk","followers_url":"https://api.github.com/users/ruudk/followers","following_url":"https://api.github.com/users/ruudk/following{/other_user}","gists_url":"https://api.github.com/users/ruudk/gists{/gist_id}","starred_url":"https://api.github.com/users/ruudk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ruudk/subscriptions","organizations_url":"https://api.github.com/users/ruudk/orgs","repos_url":"https://api.github.com/users/ruudk/repos","events_url":"https://api.github.com/users/ruudk/events{/privacy}","received_events_url":"https://api.github.com/users/ruudk/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"renamed","commit_id":null,"commit_url":null,"created_at":"2025-04-14T12:42:09Z","rename":{"from":"[Serializer] Discriminator is removed when #[Ignore] attribute used on unrelated method","to":"[Serializer] Discriminator is removed when `#[Ignore]` attribute used on unrelated method"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/symfony/symfony/issues/comments/2801602491","html_url":"https://github.com/symfony/symfony/issues/60214#issuecomment-2801602491","issue_url":"https://api.github.com/repos/symfony/symfony/issues/60214","id":2801602491,"node_id":"IC_kwDOAAb9Ss6m_Q-7","user":{"login":"ruudk","id":104180,"node_id":"MDQ6VXNlcjEwNDE4MA==","avatar_url":"https://avatars.githubusercontent.com/u/104180?v=4","gravatar_id":"","url":"https://api.github.com/users/ruudk","html_url":"https://github.com/ruudk","followers_url":"https://api.github.com/users/ruudk/followers","following_url":"https://api.github.com/users/ruudk/following{/other_user}","gists_url":"https://api.github.com/users/ruudk/gists{/gist_id}","starred_url":"https://api.github.com/users/ruudk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ruudk/subscriptions","organizations_url":"https://api.github.com/users/ruudk/orgs","repos_url":"https://api.github.com/users/ruudk/repos","events_url":"https://api.github.com/users/ruudk/events{/privacy}","received_events_url":"https://api.github.com/users/ruudk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-04-14T12:47:53Z","updated_at":"2025-04-14T12:47:53Z","body":"Seems to be related to:\nhttps://github.com/symfony/symfony/blob/d5b5581bf3681569f586f394e72e0799cead91aa/src/Symfony/Component/Serializer/Normalizer/AbstractNormalizer.php#L246-L247","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/symfony/symfony/issues/comments/2801602491/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ruudk","id":104180,"node_id":"MDQ6VXNlcjEwNDE4MA==","avatar_url":"https://avatars.githubusercontent.com/u/104180?v=4","gravatar_id":"","url":"https://api.github.com/users/ruudk","html_url":"https://github.com/ruudk","followers_url":"https://api.github.com/users/ruudk/followers","following_url":"https://api.github.com/users/ruudk/following{/other_user}","gists_url":"https://api.github.com/users/ruudk/gists{/gist_id}","starred_url":"https://api.github.com/users/ruudk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ruudk/subscriptions","organizations_url":"https://api.github.com/users/ruudk/orgs","repos_url":"https://api.github.com/users/ruudk/repos","events_url":"https://api.github.com/users/ruudk/events{/privacy}","received_events_url":"https://api.github.com/users/ruudk/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/symfony/symfony/issues/comments/2829970898","html_url":"https://github.com/symfony/symfony/issues/60214#issuecomment-2829970898","issue_url":"https://api.github.com/repos/symfony/symfony/issues/60214","id":2829970898,"node_id":"IC_kwDOAAb9Ss6ore3S","user":{"login":"alexdawn","id":12990914,"node_id":"MDQ6VXNlcjEyOTkwOTE0","avatar_url":"https://avatars.githubusercontent.com/u/12990914?v=4","gravatar_id":"","url":"https://api.github.com/users/alexdawn","html_url":"https://github.com/alexdawn","followers_url":"https://api.github.com/users/alexdawn/followers","following_url":"https://api.github.com/users/alexdawn/following{/other_user}","gists_url":"https://api.github.com/users/alexdawn/gists{/gist_id}","starred_url":"https://api.github.com/users/alexdawn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alexdawn/subscriptions","organizations_url":"https://api.github.com/users/alexdawn/orgs","repos_url":"https://api.github.com/users/alexdawn/repos","events_url":"https://api.github.com/users/alexdawn/events{/privacy}","received_events_url":"https://api.github.com/users/alexdawn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-04-25T10:03:35Z","updated_at":"2025-04-25T10:03:35Z","body":"I'm getting a similar issue though I don't think i'm even using the #[Ignore] tag, unless there is a vendor bundle using it?\n\non symfony/serializer v6.4.19. my discriminator is being removed and my deserialized objects are now empty of data.\n\nSame as @ruudk it is hitting the line [symfony/src/Symfony/Component/Serializer/Normalizer/AbstractNormalizer.php](https://github.com/symfony/symfony/blob/d5b5581bf3681569f586f394e72e0799cead91aa/src/Symfony/Component/Serializer/Normalizer/AbstractNormalizer.php#L246-L247)\n\nLines 246 to 247 in [d5b5581](https://github.com/symfony/symfony/commit/d5b5581bf3681569f586f394e72e0799cead91aa)\n\nwhich with the false value, it is now filtering out all data keys. Will try and find which bugfix introduced this issue as it was previously working for me on 6.4.*\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/symfony/symfony/issues/comments/2829970898/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"alexdawn","id":12990914,"node_id":"MDQ6VXNlcjEyOTkwOTE0","avatar_url":"https://avatars.githubusercontent.com/u/12990914?v=4","gravatar_id":"","url":"https://api.github.com/users/alexdawn","html_url":"https://github.com/alexdawn","followers_url":"https://api.github.com/users/alexdawn/followers","following_url":"https://api.github.com/users/alexdawn/following{/other_user}","gists_url":"https://api.github.com/users/alexdawn/gists{/gist_id}","starred_url":"https://api.github.com/users/alexdawn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alexdawn/subscriptions","organizations_url":"https://api.github.com/users/alexdawn/orgs","repos_url":"https://api.github.com/users/alexdawn/repos","events_url":"https://api.github.com/users/alexdawn/events{/privacy}","received_events_url":"https://api.github.com/users/alexdawn/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":17403885312,"node_id":"MEE_lADOAAb9Ss6yZOXLzwAAAAQNWjcA","url":"https://api.github.com/repos/symfony/symfony/issues/events/17403885312","actor":{"login":"ruudk","id":104180,"node_id":"MDQ6VXNlcjEwNDE4MA==","avatar_url":"https://avatars.githubusercontent.com/u/104180?v=4","gravatar_id":"","url":"https://api.github.com/users/ruudk","html_url":"https://github.com/ruudk","followers_url":"https://api.github.com/users/ruudk/followers","following_url":"https://api.github.com/users/ruudk/following{/other_user}","gists_url":"https://api.github.com/users/ruudk/gists{/gist_id}","starred_url":"https://api.github.com/users/ruudk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ruudk/subscriptions","organizations_url":"https://api.github.com/users/ruudk/orgs","repos_url":"https://api.github.com/users/ruudk/repos","events_url":"https://api.github.com/users/ruudk/events{/privacy}","received_events_url":"https://api.github.com/users/ruudk/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2025-04-25T10:03:36Z","performed_via_github_app":null},{"id":17403885319,"node_id":"SE_lADOAAb9Ss6yZOXLzwAAAAQNWjcH","url":"https://api.github.com/repos/symfony/symfony/issues/events/17403885319","actor":{"login":"ruudk","id":104180,"node_id":"MDQ6VXNlcjEwNDE4MA==","avatar_url":"https://avatars.githubusercontent.com/u/104180?v=4","gravatar_id":"","url":"https://api.github.com/users/ruudk","html_url":"https://github.com/ruudk","followers_url":"https://api.github.com/users/ruudk/followers","following_url":"https://api.github.com/users/ruudk/following{/other_user}","gists_url":"https://api.github.com/users/ruudk/gists{/gist_id}","starred_url":"https://api.github.com/users/ruudk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ruudk/subscriptions","organizations_url":"https://api.github.com/users/ruudk/orgs","repos_url":"https://api.github.com/users/ruudk/repos","events_url":"https://api.github.com/users/ruudk/events{/privacy}","received_events_url":"https://api.github.com/users/ruudk/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2025-04-25T10:03:36Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/symfony/symfony/issues/comments/2830034428","html_url":"https://github.com/symfony/symfony/issues/60214#issuecomment-2830034428","issue_url":"https://api.github.com/repos/symfony/symfony/issues/60214","id":2830034428,"node_id":"IC_kwDOAAb9Ss6oruX8","user":{"login":"alexdawn","id":12990914,"node_id":"MDQ6VXNlcjEyOTkwOTE0","avatar_url":"https://avatars.githubusercontent.com/u/12990914?v=4","gravatar_id":"","url":"https://api.github.com/users/alexdawn","html_url":"https://github.com/alexdawn","followers_url":"https://api.github.com/users/alexdawn/followers","following_url":"https://api.github.com/users/alexdawn/following{/other_user}","gists_url":"https://api.github.com/users/alexdawn/gists{/gist_id}","starred_url":"https://api.github.com/users/alexdawn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alexdawn/subscriptions","organizations_url":"https://api.github.com/users/alexdawn/orgs","repos_url":"https://api.github.com/users/alexdawn/repos","events_url":"https://api.github.com/users/alexdawn/events{/privacy}","received_events_url":"https://api.github.com/users/alexdawn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-04-25T10:28:55Z","updated_at":"2025-04-25T10:28:55Z","body":"Looking at my old commits and the composer.lock, I was running the deserializer with discriminator columns successfully on v6.4.9 however, my lasted commit if I downgrade from v6.4.19 to v6.4.9 that does not fix the issue, so the issue must come from another bundle?","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/symfony/symfony/issues/comments/2830034428/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"alexdawn","id":12990914,"node_id":"MDQ6VXNlcjEyOTkwOTE0","avatar_url":"https://avatars.githubusercontent.com/u/12990914?v=4","gravatar_id":"","url":"https://api.github.com/users/alexdawn","html_url":"https://github.com/alexdawn","followers_url":"https://api.github.com/users/alexdawn/followers","following_url":"https://api.github.com/users/alexdawn/following{/other_user}","gists_url":"https://api.github.com/users/alexdawn/gists{/gist_id}","starred_url":"https://api.github.com/users/alexdawn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/alexdawn/subscriptions","organizations_url":"https://api.github.com/users/alexdawn/orgs","repos_url":"https://api.github.com/users/alexdawn/repos","events_url":"https://api.github.com/users/alexdawn/events{/privacy}","received_events_url":"https://api.github.com/users/alexdawn/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":17405346313,"node_id":"SE_lADOAAb9Ss6yZOXLzwAAAAQNcIIJ","url":"https://api.github.com/repos/symfony/symfony/issues/events/17405346313","actor":{"login":"comma8600","id":209111137,"node_id":"U_kgDODHbIYQ","avatar_url":"https://avatars.githubusercontent.com/u/209111137?v=4","gravatar_id":"","url":"https://api.github.com/users/comma8600","html_url":"https://github.com/comma8600","followers_url":"https://api.github.com/users/comma8600/followers","following_url":"https://api.github.com/users/comma8600/following{/other_user}","gists_url":"https://api.github.com/users/comma8600/gists{/gist_id}","starred_url":"https://api.github.com/users/comma8600/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/comma8600/subscriptions","organizations_url":"https://api.github.com/users/comma8600/orgs","repos_url":"https://api.github.com/users/comma8600/repos","events_url":"https://api.github.com/users/comma8600/events{/privacy}","received_events_url":"https://api.github.com/users/comma8600/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2025-04-25T11:57:25Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/symfony/symfony/issues/comments/2900666670","html_url":"https://github.com/symfony/symfony/issues/60214#issuecomment-2900666670","issue_url":"https://api.github.com/repos/symfony/symfony/issues/60214","id":2900666670,"node_id":"IC_kwDOAAb9Ss6s5Kku","user":{"login":"ruudk","id":104180,"node_id":"MDQ6VXNlcjEwNDE4MA==","avatar_url":"https://avatars.githubusercontent.com/u/104180?v=4","gravatar_id":"","url":"https://api.github.com/users/ruudk","html_url":"https://github.com/ruudk","followers_url":"https://api.github.com/users/ruudk/followers","following_url":"https://api.github.com/users/ruudk/following{/other_user}","gists_url":"https://api.github.com/users/ruudk/gists{/gist_id}","starred_url":"https://api.github.com/users/ruudk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ruudk/subscriptions","organizations_url":"https://api.github.com/users/ruudk/orgs","repos_url":"https://api.github.com/users/ruudk/repos","events_url":"https://api.github.com/users/ruudk/events{/privacy}","received_events_url":"https://api.github.com/users/ruudk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-05-22T10:13:15Z","updated_at":"2025-05-22T10:13:15Z","body":"I have a new situation where it breaks and this is a minimal reproducer:\n\n```php\n#[\\Symfony\\Component\\Serializer\\Attribute\\DiscriminatorMap::__construct(\n    typeProperty: 'type',\n    mapping: [\n        'user' => UserActor::class,\n        'system' => SystemActor::class,\n    ],\n)]\nabstract readonly class Actor\n{\n    abstract public function equals(Actor $other) : bool;\n\n    #[\\Symfony\\Component\\Serializer\\Attribute\\Ignore]\n    public function isSystem() : bool\n    {\n        return $this instanceof SystemActor;\n    }\n\n    #[\\Symfony\\Component\\Serializer\\Attribute\\Ignore]\n    public function isUser() : bool\n    {\n        return $this instanceof UserActor;\n    }\n}\n\nfinal readonly class SystemActor extends Actor\n{\n    public function equals(Actor $other) : bool\n    {\n        return $other instanceof self;\n    }\n}\n\nfinal readonly class UserActor extends Actor\n{\n    public function __construct(\n        public int $userId,\n    ) {}\n\n    #[Override]\n    public function equals(Actor $other) : bool\n    {\n        if ( ! $other instanceof self) {\n            return false;\n        }\n\n        return $this->userId === $other->userId;\n    }\n}\n```\n\nI have the following test:\n\n```php\n#[Test]\n    public function it_should_serialize_system_actor() : void\n    {\n        // Arrange\n        $actor = new SystemActor();\n\n        // Act\n        $serialized = $this->serializer->serialize($actor, 'json');\n\n        // Assert\n        self::assertSame('{\"type\":\"system\"}', $serialized);\n\n        // Act\n        $deserialized = $this->serializer->deserialize($serialized, Actor::class, 'json');\n\n        // Assert\n        self::assertEquals($actor, $deserialized);\n    }\n\n    #[Test]\n    public function it_should_serialize_user_actor() : void\n    {\n        // Arrange\n        $actor = new UserActor(1);\n\n        // Act\n        $serialized = $this->serializer->serialize($actor, 'json');\n\n        // Assert\n        self::assertSame('{\"type\":\"user\",\"user_id\":1}', $serialized);\n\n        // Act\n        $deserialized = $this->serializer->deserialize($serialized, Actor::class, 'json');\n\n        // Assert\n        self::assertEquals($actor, $deserialized);\n    }\n```\n\nThe first one succeeds.\nThe second one fails: \n```\nFailed asserting that two strings are identical.\n--- Expected\n+++ Actual\n@@ @@\n-'{\"type\":\"user\",\"user_id\":1}'\n+'{\"user_id\":1}'\n```\n\nWhen I remove the `constructor` from `UserActor`, it does add `\"type\":\"user\"`.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/symfony/symfony/issues/comments/2900666670/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ruudk","id":104180,"node_id":"MDQ6VXNlcjEwNDE4MA==","avatar_url":"https://avatars.githubusercontent.com/u/104180?v=4","gravatar_id":"","url":"https://api.github.com/users/ruudk","html_url":"https://github.com/ruudk","followers_url":"https://api.github.com/users/ruudk/followers","following_url":"https://api.github.com/users/ruudk/following{/other_user}","gists_url":"https://api.github.com/users/ruudk/gists{/gist_id}","starred_url":"https://api.github.com/users/ruudk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ruudk/subscriptions","organizations_url":"https://api.github.com/users/ruudk/orgs","repos_url":"https://api.github.com/users/ruudk/repos","events_url":"https://api.github.com/users/ruudk/events{/privacy}","received_events_url":"https://api.github.com/users/ruudk/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/symfony/symfony/issues/comments/2900733275","html_url":"https://github.com/symfony/symfony/issues/60214#issuecomment-2900733275","issue_url":"https://api.github.com/repos/symfony/symfony/issues/60214","id":2900733275,"node_id":"IC_kwDOAAb9Ss6s5a1b","user":{"login":"ruudk","id":104180,"node_id":"MDQ6VXNlcjEwNDE4MA==","avatar_url":"https://avatars.githubusercontent.com/u/104180?v=4","gravatar_id":"","url":"https://api.github.com/users/ruudk","html_url":"https://github.com/ruudk","followers_url":"https://api.github.com/users/ruudk/followers","following_url":"https://api.github.com/users/ruudk/following{/other_user}","gists_url":"https://api.github.com/users/ruudk/gists{/gist_id}","starred_url":"https://api.github.com/users/ruudk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ruudk/subscriptions","organizations_url":"https://api.github.com/users/ruudk/orgs","repos_url":"https://api.github.com/users/ruudk/repos","events_url":"https://api.github.com/users/ruudk/events{/privacy}","received_events_url":"https://api.github.com/users/ruudk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-05-22T10:35:50Z","updated_at":"2025-05-22T10:38:01Z","body":"I think I know more why this happens. It seems that the ObjectNormalizer does correctly support the DiscriminatorMap together with Ignore. See: https://github.com/symfony/symfony/blob/cb084808343a10152d4ec69c658f75878d41d3d3/src/Symfony/Component/Serializer/Normalizer/ObjectNormalizer.php#L158-L171\n\nBut when you use constructor promoted properties (or just public properties) you're using the PropertyNormalizer, it does not override the `getAllowedAttributes` method, and relies on AbstractNormalizer:\nhttps://github.com/symfony/symfony/blob/cb084808343a10152d4ec69c658f75878d41d3d3/src/Symfony/Component/Serializer/Normalizer/AbstractNormalizer.php#L214-L251","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/symfony/symfony/issues/comments/2900733275/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ruudk","id":104180,"node_id":"MDQ6VXNlcjEwNDE4MA==","avatar_url":"https://avatars.githubusercontent.com/u/104180?v=4","gravatar_id":"","url":"https://api.github.com/users/ruudk","html_url":"https://github.com/ruudk","followers_url":"https://api.github.com/users/ruudk/followers","following_url":"https://api.github.com/users/ruudk/following{/other_user}","gists_url":"https://api.github.com/users/ruudk/gists{/gist_id}","starred_url":"https://api.github.com/users/ruudk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ruudk/subscriptions","organizations_url":"https://api.github.com/users/ruudk/orgs","repos_url":"https://api.github.com/users/ruudk/repos","events_url":"https://api.github.com/users/ruudk/events{/privacy}","received_events_url":"https://api.github.com/users/ruudk/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/symfony/symfony/issues/comments/2900774044","html_url":"https://github.com/symfony/symfony/issues/60214#issuecomment-2900774044","issue_url":"https://api.github.com/repos/symfony/symfony/issues/60214","id":2900774044,"node_id":"IC_kwDOAAb9Ss6s5kyc","user":{"login":"comma8600","id":209111137,"node_id":"U_kgDODHbIYQ","avatar_url":"https://avatars.githubusercontent.com/u/209111137?v=4","gravatar_id":"","url":"https://api.github.com/users/comma8600","html_url":"https://github.com/comma8600","followers_url":"https://api.github.com/users/comma8600/followers","following_url":"https://api.github.com/users/comma8600/following{/other_user}","gists_url":"https://api.github.com/users/comma8600/gists{/gist_id}","starred_url":"https://api.github.com/users/comma8600/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/comma8600/subscriptions","organizations_url":"https://api.github.com/users/comma8600/orgs","repos_url":"https://api.github.com/users/comma8600/repos","events_url":"https://api.github.com/users/comma8600/events{/privacy}","received_events_url":"https://api.github.com/users/comma8600/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-05-22T10:50:46Z","updated_at":"2025-05-22T10:50:46Z","body":"I think you are onto something though my example isn't using any constructor promotion or public properties. Possibly the readonly or the protected shared property? Is causing something similar to occur?\n\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/symfony/symfony/issues/comments/2900774044/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"comma8600","id":209111137,"node_id":"U_kgDODHbIYQ","avatar_url":"https://avatars.githubusercontent.com/u/209111137?v=4","gravatar_id":"","url":"https://api.github.com/users/comma8600","html_url":"https://github.com/comma8600","followers_url":"https://api.github.com/users/comma8600/followers","following_url":"https://api.github.com/users/comma8600/following{/other_user}","gists_url":"https://api.github.com/users/comma8600/gists{/gist_id}","starred_url":"https://api.github.com/users/comma8600/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/comma8600/subscriptions","organizations_url":"https://api.github.com/users/comma8600/orgs","repos_url":"https://api.github.com/users/comma8600/repos","events_url":"https://api.github.com/users/comma8600/events{/privacy}","received_events_url":"https://api.github.com/users/comma8600/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/symfony/symfony/issues/comments/2900782970","html_url":"https://github.com/symfony/symfony/issues/60214#issuecomment-2900782970","issue_url":"https://api.github.com/repos/symfony/symfony/issues/60214","id":2900782970,"node_id":"IC_kwDOAAb9Ss6s5m96","user":{"login":"ruudk","id":104180,"node_id":"MDQ6VXNlcjEwNDE4MA==","avatar_url":"https://avatars.githubusercontent.com/u/104180?v=4","gravatar_id":"","url":"https://api.github.com/users/ruudk","html_url":"https://github.com/ruudk","followers_url":"https://api.github.com/users/ruudk/followers","following_url":"https://api.github.com/users/ruudk/following{/other_user}","gists_url":"https://api.github.com/users/ruudk/gists{/gist_id}","starred_url":"https://api.github.com/users/ruudk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ruudk/subscriptions","organizations_url":"https://api.github.com/users/ruudk/orgs","repos_url":"https://api.github.com/users/ruudk/repos","events_url":"https://api.github.com/users/ruudk/events{/privacy}","received_events_url":"https://api.github.com/users/ruudk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-05-22T10:54:13Z","updated_at":"2025-05-22T10:54:13Z","body":"So far I cannot reproduce it in the Symfony project with a test so maybe it does has something to do with readonly indeed. Will try, thanks!","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/symfony/symfony/issues/comments/2900782970/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ruudk","id":104180,"node_id":"MDQ6VXNlcjEwNDE4MA==","avatar_url":"https://avatars.githubusercontent.com/u/104180?v=4","gravatar_id":"","url":"https://api.github.com/users/ruudk","html_url":"https://github.com/ruudk","followers_url":"https://api.github.com/users/ruudk/followers","following_url":"https://api.github.com/users/ruudk/following{/other_user}","gists_url":"https://api.github.com/users/ruudk/gists{/gist_id}","starred_url":"https://api.github.com/users/ruudk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ruudk/subscriptions","organizations_url":"https://api.github.com/users/ruudk/orgs","repos_url":"https://api.github.com/users/ruudk/repos","events_url":"https://api.github.com/users/ruudk/events{/privacy}","received_events_url":"https://api.github.com/users/ruudk/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/symfony/symfony/issues/comments/2900822614","html_url":"https://github.com/symfony/symfony/issues/60214#issuecomment-2900822614","issue_url":"https://api.github.com/repos/symfony/symfony/issues/60214","id":2900822614,"node_id":"IC_kwDOAAb9Ss6s5wpW","user":{"login":"ruudk","id":104180,"node_id":"MDQ6VXNlcjEwNDE4MA==","avatar_url":"https://avatars.githubusercontent.com/u/104180?v=4","gravatar_id":"","url":"https://api.github.com/users/ruudk","html_url":"https://github.com/ruudk","followers_url":"https://api.github.com/users/ruudk/followers","following_url":"https://api.github.com/users/ruudk/following{/other_user}","gists_url":"https://api.github.com/users/ruudk/gists{/gist_id}","starred_url":"https://api.github.com/users/ruudk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ruudk/subscriptions","organizations_url":"https://api.github.com/users/ruudk/orgs","repos_url":"https://api.github.com/users/ruudk/repos","events_url":"https://api.github.com/users/ruudk/events{/privacy}","received_events_url":"https://api.github.com/users/ruudk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-05-22T11:09:18Z","updated_at":"2025-05-22T11:09:18Z","body":"I just tested and removing `readonly` from the class and or properties does not make a difference.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/symfony/symfony/issues/comments/2900822614/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ruudk","id":104180,"node_id":"MDQ6VXNlcjEwNDE4MA==","avatar_url":"https://avatars.githubusercontent.com/u/104180?v=4","gravatar_id":"","url":"https://api.github.com/users/ruudk","html_url":"https://github.com/ruudk","followers_url":"https://api.github.com/users/ruudk/followers","following_url":"https://api.github.com/users/ruudk/following{/other_user}","gists_url":"https://api.github.com/users/ruudk/gists{/gist_id}","starred_url":"https://api.github.com/users/ruudk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ruudk/subscriptions","organizations_url":"https://api.github.com/users/ruudk/orgs","repos_url":"https://api.github.com/users/ruudk/repos","events_url":"https://api.github.com/users/ruudk/events{/privacy}","received_events_url":"https://api.github.com/users/ruudk/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/symfony/symfony/issues/comments/2900859641","html_url":"https://github.com/symfony/symfony/issues/60214#issuecomment-2900859641","issue_url":"https://api.github.com/repos/symfony/symfony/issues/60214","id":2900859641,"node_id":"IC_kwDOAAb9Ss6s55r5","user":{"login":"ruudk","id":104180,"node_id":"MDQ6VXNlcjEwNDE4MA==","avatar_url":"https://avatars.githubusercontent.com/u/104180?v=4","gravatar_id":"","url":"https://api.github.com/users/ruudk","html_url":"https://github.com/ruudk","followers_url":"https://api.github.com/users/ruudk/followers","following_url":"https://api.github.com/users/ruudk/following{/other_user}","gists_url":"https://api.github.com/users/ruudk/gists{/gist_id}","starred_url":"https://api.github.com/users/ruudk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ruudk/subscriptions","organizations_url":"https://api.github.com/users/ruudk/orgs","repos_url":"https://api.github.com/users/ruudk/repos","events_url":"https://api.github.com/users/ruudk/events{/privacy}","received_events_url":"https://api.github.com/users/ruudk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-05-22T11:22:16Z","updated_at":"2025-05-22T11:22:16Z","body":"I have the solution, we need to copy https://github.com/symfony/symfony/blob/cb084808343a10152d4ec69c658f75878d41d3d3/src/Symfony/Component/Serializer/Normalizer/ObjectNormalizer.php#L152-L174 to PropertyNormalizer and then it works as expected.\n\nI will create a PR.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/symfony/symfony/issues/comments/2900859641/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ruudk","id":104180,"node_id":"MDQ6VXNlcjEwNDE4MA==","avatar_url":"https://avatars.githubusercontent.com/u/104180?v=4","gravatar_id":"","url":"https://api.github.com/users/ruudk","html_url":"https://github.com/ruudk","followers_url":"https://api.github.com/users/ruudk/followers","following_url":"https://api.github.com/users/ruudk/following{/other_user}","gists_url":"https://api.github.com/users/ruudk/gists{/gist_id}","starred_url":"https://api.github.com/users/ruudk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ruudk/subscriptions","organizations_url":"https://api.github.com/users/ruudk/orgs","repos_url":"https://api.github.com/users/ruudk/repos","events_url":"https://api.github.com/users/ruudk/events{/privacy}","received_events_url":"https://api.github.com/users/ruudk/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":17770633822,"node_id":"REFE_lADOAAb9Ss6yZOXLzwAAAAQjNlpe","url":"https://api.github.com/repos/symfony/symfony/issues/events/17770633822","actor":{"login":"ruudk","id":104180,"node_id":"MDQ6VXNlcjEwNDE4MA==","avatar_url":"https://avatars.githubusercontent.com/u/104180?v=4","gravatar_id":"","url":"https://api.github.com/users/ruudk","html_url":"https://github.com/ruudk","followers_url":"https://api.github.com/users/ruudk/followers","following_url":"https://api.github.com/users/ruudk/following{/other_user}","gists_url":"https://api.github.com/users/ruudk/gists{/gist_id}","starred_url":"https://api.github.com/users/ruudk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ruudk/subscriptions","organizations_url":"https://api.github.com/users/ruudk/orgs","repos_url":"https://api.github.com/users/ruudk/repos","events_url":"https://api.github.com/users/ruudk/events{/privacy}","received_events_url":"https://api.github.com/users/ruudk/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"e016444904891379de49c0cf440e9b3f1752e094","commit_url":"https://api.github.com/repos/ruudk/symfony/commits/e016444904891379de49c0cf440e9b3f1752e094","created_at":"2025-05-22T11:29:09Z","performed_via_github_app":null},{"actor":{"login":"ruudk","id":104180,"node_id":"MDQ6VXNlcjEwNDE4MA==","avatar_url":"https://avatars.githubusercontent.com/u/104180?v=4","gravatar_id":"","url":"https://api.github.com/users/ruudk","html_url":"https://github.com/ruudk","followers_url":"https://api.github.com/users/ruudk/followers","following_url":"https://api.github.com/users/ruudk/following{/other_user}","gists_url":"https://api.github.com/users/ruudk/gists{/gist_id}","starred_url":"https://api.github.com/users/ruudk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ruudk/subscriptions","organizations_url":"https://api.github.com/users/ruudk/orgs","repos_url":"https://api.github.com/users/ruudk/repos","events_url":"https://api.github.com/users/ruudk/events{/privacy}","received_events_url":"https://api.github.com/users/ruudk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-05-22T11:29:38Z","updated_at":"2025-05-22T11:29:38Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/symfony/symfony/issues/60511","repository_url":"https://api.github.com/repos/symfony/symfony","labels_url":"https://api.github.com/repos/symfony/symfony/issues/60511/labels{/name}","comments_url":"https://api.github.com/repos/symfony/symfony/issues/60511/comments","events_url":"https://api.github.com/repos/symfony/symfony/issues/60511/events","html_url":"https://github.com/symfony/symfony/pull/60511","id":3083051393,"node_id":"PR_kwDOAAb9Ss6XNjSg","number":60511,"title":"[Serializer] Add support for discriminator map in property normalizer","user":{"login":"ruudk","id":104180,"node_id":"MDQ6VXNlcjEwNDE4MA==","avatar_url":"https://avatars.githubusercontent.com/u/104180?v=4","gravatar_id":"","url":"https://api.github.com/users/ruudk","html_url":"https://github.com/ruudk","followers_url":"https://api.github.com/users/ruudk/followers","following_url":"https://api.github.com/users/ruudk/following{/other_user}","gists_url":"https://api.github.com/users/ruudk/gists{/gist_id}","starred_url":"https://api.github.com/users/ruudk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ruudk/subscriptions","organizations_url":"https://api.github.com/users/ruudk/orgs","repos_url":"https://api.github.com/users/ruudk/repos","events_url":"https://api.github.com/users/ruudk/events{/privacy}","received_events_url":"https://api.github.com/users/ruudk/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":99939,"node_id":"MDU6TGFiZWw5OTkzOQ==","url":"https://api.github.com/repos/symfony/symfony/labels/Serializer","name":"Serializer","color":"DDDDDD","default":false,"description":null},{"id":100079,"node_id":"MDU6TGFiZWwxMDAwNzk=","url":"https://api.github.com/repos/symfony/symfony/labels/Bug","name":"Bug","color":"e10c02","default":false,"description":null},{"id":237550465,"node_id":"MDU6TGFiZWwyMzc1NTA0NjU=","url":"https://api.github.com/repos/symfony/symfony/labels/Status:%20Reviewed","name":"Status: Reviewed","color":"bfe5bf","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/symfony/symfony/milestones/30","html_url":"https://github.com/symfony/symfony/milestone/30","labels_url":"https://api.github.com/repos/symfony/symfony/milestones/30/labels","id":9433671,"node_id":"MI_kwDOAAb9Ss4Aj_JH","number":30,"title":"6.4","description":"https://symfony.com/releases/6.4","creator":{"login":"nicolas-grekas","id":243674,"node_id":"MDQ6VXNlcjI0MzY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/243674?v=4","gravatar_id":"","url":"https://api.github.com/users/nicolas-grekas","html_url":"https://github.com/nicolas-grekas","followers_url":"https://api.github.com/users/nicolas-grekas/followers","following_url":"https://api.github.com/users/nicolas-grekas/following{/other_user}","gists_url":"https://api.github.com/users/nicolas-grekas/gists{/gist_id}","starred_url":"https://api.github.com/users/nicolas-grekas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicolas-grekas/subscriptions","organizations_url":"https://api.github.com/users/nicolas-grekas/orgs","repos_url":"https://api.github.com/users/nicolas-grekas/repos","events_url":"https://api.github.com/users/nicolas-grekas/events{/privacy}","received_events_url":"https://api.github.com/users/nicolas-grekas/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":46,"closed_issues":1575,"state":"open","created_at":"2023-05-23T14:08:18Z","updated_at":"2025-11-09T12:12:06Z","due_on":"2026-11-30T08:00:00Z","closed_at":null},"comments":9,"created_at":"2025-05-22T11:29:37Z","updated_at":"2025-06-19T13:34:19Z","closed_at":"2025-06-19T13:05:21Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":458058,"node_id":"MDEwOlJlcG9zaXRvcnk0NTgwNTg=","name":"symfony","full_name":"symfony/symfony","private":false,"owner":{"login":"symfony","id":143937,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE0MzkzNw==","avatar_url":"https://avatars.githubusercontent.com/u/143937?v=4","gravatar_id":"","url":"https://api.github.com/users/symfony","html_url":"https://github.com/symfony","followers_url":"https://api.github.com/users/symfony/followers","following_url":"https://api.github.com/users/symfony/following{/other_user}","gists_url":"https://api.github.com/users/symfony/gists{/gist_id}","starred_url":"https://api.github.com/users/symfony/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/symfony/subscriptions","organizations_url":"https://api.github.com/users/symfony/orgs","repos_url":"https://api.github.com/users/symfony/repos","events_url":"https://api.github.com/users/symfony/events{/privacy}","received_events_url":"https://api.github.com/users/symfony/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/symfony/symfony","description":"The Symfony PHP framework","fork":false,"url":"https://api.github.com/repos/symfony/symfony","forks_url":"https://api.github.com/repos/symfony/symfony/forks","keys_url":"https://api.github.com/repos/symfony/symfony/keys{/key_id}","collaborators_url":"https://api.github.com/repos/symfony/symfony/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/symfony/symfony/teams","hooks_url":"https://api.github.com/repos/symfony/symfony/hooks","issue_events_url":"https://api.github.com/repos/symfony/symfony/issues/events{/number}","events_url":"https://api.github.com/repos/symfony/symfony/events","assignees_url":"https://api.github.com/repos/symfony/symfony/assignees{/user}","branches_url":"https://api.github.com/repos/symfony/symfony/branches{/branch}","tags_url":"https://api.github.com/repos/symfony/symfony/tags","blobs_url":"https://api.github.com/repos/symfony/symfony/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/symfony/symfony/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/symfony/symfony/git/refs{/sha}","trees_url":"https://api.github.com/repos/symfony/symfony/git/trees{/sha}","statuses_url":"https://api.github.com/repos/symfony/symfony/statuses/{sha}","languages_url":"https://api.github.com/repos/symfony/symfony/languages","stargazers_url":"https://api.github.com/repos/symfony/symfony/stargazers","contributors_url":"https://api.github.com/repos/symfony/symfony/contributors","subscribers_url":"https://api.github.com/repos/symfony/symfony/subscribers","subscription_url":"https://api.github.com/repos/symfony/symfony/subscription","commits_url":"https://api.github.com/repos/symfony/symfony/commits{/sha}","git_commits_url":"https://api.github.com/repos/symfony/symfony/git/commits{/sha}","comments_url":"https://api.github.com/repos/symfony/symfony/comments{/number}","issue_comment_url":"https://api.github.com/repos/symfony/symfony/issues/comments{/number}","contents_url":"https://api.github.com/repos/symfony/symfony/contents/{+path}","compare_url":"https://api.github.com/repos/symfony/symfony/compare/{base}...{head}","merges_url":"https://api.github.com/repos/symfony/symfony/merges","archive_url":"https://api.github.com/repos/symfony/symfony/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/symfony/symfony/downloads","issues_url":"https://api.github.com/repos/symfony/symfony/issues{/number}","pulls_url":"https://api.github.com/repos/symfony/symfony/pulls{/number}","milestones_url":"https://api.github.com/repos/symfony/symfony/milestones{/number}","notifications_url":"https://api.github.com/repos/symfony/symfony/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/symfony/symfony/labels{/name}","releases_url":"https://api.github.com/repos/symfony/symfony/releases{/id}","deployments_url":"https://api.github.com/repos/symfony/symfony/deployments","created_at":"2010-01-04T14:21:21Z","updated_at":"2025-11-09T22:15:44Z","pushed_at":"2025-11-08T16:31:14Z","git_url":"git://github.com/symfony/symfony.git","ssh_url":"git@github.com:symfony/symfony.git","clone_url":"https://github.com/symfony/symfony.git","svn_url":"https://github.com/symfony/symfony","homepage":"https://symfony.com","size":310286,"stargazers_count":30753,"watchers_count":30753,"language":"PHP","has_issues":true,"has_projects":true,"has_downloads":false,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":9739,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":776,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["bundle","framework","hacktoberfest","php","php-framework","symfony","symfony-bundle"],"visibility":"public","forks":9739,"open_issues":776,"watchers":30753,"default_branch":"7.4","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/symfony/symfony/pulls/60511","html_url":"https://github.com/symfony/symfony/pull/60511","diff_url":"https://github.com/symfony/symfony/pull/60511.diff","patch_url":"https://github.com/symfony/symfony/pull/60511.patch","merged_at":"2025-06-19T13:05:21Z"},"body":"| Q             | A\r\n| ------------- | ---\r\n| Branch?       | 6.4\r\n| Bug fix?      | yes\r\n| New feature?  | no \r\n| Deprecations? | no \r\n| Issues        | Fix #60214\r\n| License       | MIT\r\n\r\nCurrently it's not possible to serialize an object using the PropertyNormalizer when a DiscriminatorMap attribute is used.\r\n\r\nIt produces the following error:\r\n\r\n> Symfony\\Component\\Serializer\\Exception\\NotNormalizableValueException: Type property \"type\" not found\r\n> for the abstract object \"Symfony\\Component\\Serializer\\Tests\\Fixtures\\DummyMessageInterface\".\r\n\r\nThe ObjectNormalizer overrides the `getAllowedAttributes` from AbstractNormalizer and adds support for discriminators. But the PropertyNormalizer does not do this. Therefore it doesn't work.\r\n\r\nFor now, we copy the logic from ObjectNormalizer to PropertyNormalizer and the problem goes away.","reactions":{"url":"https://api.github.com/repos/symfony/symfony/issues/60511/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":1,"eyes":0},"timeline_url":"https://api.github.com/repos/symfony/symfony/issues/60511/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"url":"https://api.github.com/repos/symfony/symfony/issues/comments/2900878763","html_url":"https://github.com/symfony/symfony/issues/60214#issuecomment-2900878763","issue_url":"https://api.github.com/repos/symfony/symfony/issues/60214","id":2900878763,"node_id":"IC_kwDOAAb9Ss6s5-Wr","user":{"login":"ruudk","id":104180,"node_id":"MDQ6VXNlcjEwNDE4MA==","avatar_url":"https://avatars.githubusercontent.com/u/104180?v=4","gravatar_id":"","url":"https://api.github.com/users/ruudk","html_url":"https://github.com/ruudk","followers_url":"https://api.github.com/users/ruudk/followers","following_url":"https://api.github.com/users/ruudk/following{/other_user}","gists_url":"https://api.github.com/users/ruudk/gists{/gist_id}","starred_url":"https://api.github.com/users/ruudk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ruudk/subscriptions","organizations_url":"https://api.github.com/users/ruudk/orgs","repos_url":"https://api.github.com/users/ruudk/repos","events_url":"https://api.github.com/users/ruudk/events{/privacy}","received_events_url":"https://api.github.com/users/ruudk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-05-22T11:29:47Z","updated_at":"2025-05-22T11:29:47Z","body":"Created the PR:\n- https://github.com/symfony/symfony/pull/60511","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/symfony/symfony/issues/comments/2900878763/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ruudk","id":104180,"node_id":"MDQ6VXNlcjEwNDE4MA==","avatar_url":"https://avatars.githubusercontent.com/u/104180?v=4","gravatar_id":"","url":"https://api.github.com/users/ruudk","html_url":"https://github.com/ruudk","followers_url":"https://api.github.com/users/ruudk/followers","following_url":"https://api.github.com/users/ruudk/following{/other_user}","gists_url":"https://api.github.com/users/ruudk/gists{/gist_id}","starred_url":"https://api.github.com/users/ruudk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ruudk/subscriptions","organizations_url":"https://api.github.com/users/ruudk/orgs","repos_url":"https://api.github.com/users/ruudk/repos","events_url":"https://api.github.com/users/ruudk/events{/privacy}","received_events_url":"https://api.github.com/users/ruudk/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/symfony/symfony/issues/comments/2900896058","html_url":"https://github.com/symfony/symfony/issues/60214#issuecomment-2900896058","issue_url":"https://api.github.com/repos/symfony/symfony/issues/60214","id":2900896058,"node_id":"IC_kwDOAAb9Ss6s6Ck6","user":{"login":"comma8600","id":209111137,"node_id":"U_kgDODHbIYQ","avatar_url":"https://avatars.githubusercontent.com/u/209111137?v=4","gravatar_id":"","url":"https://api.github.com/users/comma8600","html_url":"https://github.com/comma8600","followers_url":"https://api.github.com/users/comma8600/followers","following_url":"https://api.github.com/users/comma8600/following{/other_user}","gists_url":"https://api.github.com/users/comma8600/gists{/gist_id}","starred_url":"https://api.github.com/users/comma8600/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/comma8600/subscriptions","organizations_url":"https://api.github.com/users/comma8600/orgs","repos_url":"https://api.github.com/users/comma8600/repos","events_url":"https://api.github.com/users/comma8600/events{/privacy}","received_events_url":"https://api.github.com/users/comma8600/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-05-22T11:36:42Z","updated_at":"2025-05-22T11:36:42Z","body":"Nice work though I'm guessing I must have a different issue as that did not help resolve my empty objects:\n\n```\nuse App\\DTO\\TDFDetailedRecord;\nuse App\\DTO\\TDFFooterRecord;\nuse App\\DTO\\TDFHeaderRecord;\nuse App\\DTO\\TDFRecordInterface;\nuse Symfony\\Bundle\\FrameworkBundle\\Test\\KernelTestCase;\nuse Symfony\\Component\\Serializer\\Encoder\\CsvEncoder;\nuse Symfony\\Component\\Serializer\\SerializerInterface;\n\nclass SerializationTDFRecordsTest extends KernelTestCase\n{\n    private SerializerInterface $serializer;\n\n    public function setUp(): void\n    {\n        self::bootKernel();\n        $container = self::getContainer();\n        $this->serializer = $container->get(SerializerInterface::class);\n    }\n\n    public function testHeaderCsv(): void\n    {\n        $data = 'c0,c1,c2,c3,c4' . PHP_EOL . 'H,foo,20210428,135055,000000';\n\n        $deserialized = $this->serializer->deserialize($data, TDFRecordInterface::class, 'csv', [\n            CsvEncoder::AS_COLLECTION_KEY => false // this option means a single row doesn't get wrapped in an additional array\n        ]);\n\n        $this->assertInstanceOf(TDFHeaderRecord::class, $deserialized);\n        $this->assertEquals('foo', $deserialized->getCode());\n    }\n\n\n    public function testFooterCsv(): void\n    {\n        $data = 'c0,c1,c2,c3,c4' . PHP_EOL\n            . 'T,foo,20210428,135055,000000';\n\n        $deserialized = $this->serializer->deserialize($data, TDFRecordInterface::class, 'csv', [\n            CsvEncoder::AS_COLLECTION_KEY => false // this option means a single row doesn't get wrapped in an additional array\n        ]);\n\n        $this->assertInstanceOf(TDFFooterRecord::class, $deserialized);\n        $this->assertEquals('foo', $deserialized->getCode());\n    }\n\n\n    public function testBodyCsv(): void\n    {\n        $data = 'c0,c1,c2,c3,c4,c5,c6,c7,c8,c9,c10,c11,c12' . PHP_EOL\n            . 'D,foo,\"bar\",\"baz\",\"x\",\"y\",\"z\",\"77\",\"20220913\",\"101811\",\"code\",\"postcode\",,,';\n\n        /** @var TDFDetailedRecord */\n        $deserialized = $this->serializer->deserialize($data, TDFRecordInterface::class, 'csv', [\n            CsvEncoder::AS_COLLECTION_KEY => false // this option means a single row doesn't get wrapped in an additional array\n        ]);\n\n        $this->assertInstanceOf(TDFDetailedRecord::class, $deserialized);\n        $this->assertEquals('foo', $deserialized->getCourierEventCode());\n    }\n}\n```","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/symfony/symfony/issues/comments/2900896058/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"comma8600","id":209111137,"node_id":"U_kgDODHbIYQ","avatar_url":"https://avatars.githubusercontent.com/u/209111137?v=4","gravatar_id":"","url":"https://api.github.com/users/comma8600","html_url":"https://github.com/comma8600","followers_url":"https://api.github.com/users/comma8600/followers","following_url":"https://api.github.com/users/comma8600/following{/other_user}","gists_url":"https://api.github.com/users/comma8600/gists{/gist_id}","starred_url":"https://api.github.com/users/comma8600/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/comma8600/subscriptions","organizations_url":"https://api.github.com/users/comma8600/orgs","repos_url":"https://api.github.com/users/comma8600/repos","events_url":"https://api.github.com/users/comma8600/events{/privacy}","received_events_url":"https://api.github.com/users/comma8600/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/symfony/symfony/issues/comments/2901236036","html_url":"https://github.com/symfony/symfony/issues/60214#issuecomment-2901236036","issue_url":"https://api.github.com/repos/symfony/symfony/issues/60214","id":2901236036,"node_id":"IC_kwDOAAb9Ss6s7VlE","user":{"login":"comma8600","id":209111137,"node_id":"U_kgDODHbIYQ","avatar_url":"https://avatars.githubusercontent.com/u/209111137?v=4","gravatar_id":"","url":"https://api.github.com/users/comma8600","html_url":"https://github.com/comma8600","followers_url":"https://api.github.com/users/comma8600/followers","following_url":"https://api.github.com/users/comma8600/following{/other_user}","gists_url":"https://api.github.com/users/comma8600/gists{/gist_id}","starred_url":"https://api.github.com/users/comma8600/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/comma8600/subscriptions","organizations_url":"https://api.github.com/users/comma8600/orgs","repos_url":"https://api.github.com/users/comma8600/repos","events_url":"https://api.github.com/users/comma8600/events{/privacy}","received_events_url":"https://api.github.com/users/comma8600/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-05-22T13:29:17Z","updated_at":"2025-05-22T13:30:29Z","body":"Ah ignore the above example I've got a much more minimal test where it is failing for:\n\nI've taken the existing symfony/symfony project 6.4 tag tests and added an identical test to the discriminator for json but swapping in the csv formatter:\n\n```php\n\n    private function serializerWithClassDiscriminatorCsv()\n    {\n        $classMetadataFactory = new ClassMetadataFactory(new AttributeLoader());\n\n        return new Serializer([new ObjectNormalizer($classMetadataFactory, null, null, new ReflectionExtractor(), new ClassDiscriminatorFromClassMetadata($classMetadataFactory))], ['csv' => new CsvEncoder()]);\n    }\n\n\n    public function testDeserializeAndSerializeInterfacedObjectsWithTheClassMetadataDiscriminatorResolverCsv()\n    {\n        $example = new DummyMessageNumberOne();\n        $example->one = 1;\n\n        $csvData = 'type,one,two' . PHP_EOL .'one,1,' . PHP_EOL;\n\n        $serializer = $this->serializerWithClassDiscriminatorCsv();\n        $deserialized = $serializer->deserialize($csvData, DummyMessageInterface::class, 'csv');\n        $this->assertEquals($example, $deserialized);\n\n        $serialized = $serializer->serialize($deserialized, 'csv');\n        $this->assertEquals($csvData, $serialized);\n    }\n```\n\ngive the result:\n```\n\nThere was 1 error:\n\n1) Symfony\\Component\\Serializer\\Tests\\SerializerTest::testDeserializeAndSerializeInterfacedObjectsWithTheClassMetadataDiscriminatorResolverCsv\nSymfony\\Component\\Serializer\\Exception\\NotNormalizableValueException: Type property \"type\" not found for the abstract object \"Symfony\\Component\\Serializer\\Tests\\Fixtures\\DummyMessageInterface\".\n\n/Users/alexdawn/projects/symfony/src/Symfony/Component/Serializer/Exception/NotNormalizableValueException.php:32\n/Users/alexdawn/projects/symfony/src/Symfony/Component/Serializer/Normalizer/AbstractObjectNormalizer.php:855\n/Users/alexdawn/projects/symfony/src/Symfony/Component/Serializer/Normalizer/AbstractObjectNormalizer.php:332\n/Users/alexdawn/projects/symfony/src/Symfony/Component/Serializer/Serializer.php:249\n/Users/alexdawn/projects/symfony/src/Symfony/Component/Serializer/Serializer.php:154\n/Users/alexdawn/projects/symfony/src/Symfony/Component/Serializer/Tests/SerializerTest.php:468\n```\n\nserialization works on the $example object and gives an identical string to the $csvData. It's just going the opposite directions which is failing","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/symfony/symfony/issues/comments/2901236036/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"comma8600","id":209111137,"node_id":"U_kgDODHbIYQ","avatar_url":"https://avatars.githubusercontent.com/u/209111137?v=4","gravatar_id":"","url":"https://api.github.com/users/comma8600","html_url":"https://github.com/comma8600","followers_url":"https://api.github.com/users/comma8600/followers","following_url":"https://api.github.com/users/comma8600/following{/other_user}","gists_url":"https://api.github.com/users/comma8600/gists{/gist_id}","starred_url":"https://api.github.com/users/comma8600/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/comma8600/subscriptions","organizations_url":"https://api.github.com/users/comma8600/orgs","repos_url":"https://api.github.com/users/comma8600/repos","events_url":"https://api.github.com/users/comma8600/events{/privacy}","received_events_url":"https://api.github.com/users/comma8600/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/symfony/symfony/issues/comments/2901246987","html_url":"https://github.com/symfony/symfony/issues/60214#issuecomment-2901246987","issue_url":"https://api.github.com/repos/symfony/symfony/issues/60214","id":2901246987,"node_id":"IC_kwDOAAb9Ss6s7YQL","user":{"login":"ruudk","id":104180,"node_id":"MDQ6VXNlcjEwNDE4MA==","avatar_url":"https://avatars.githubusercontent.com/u/104180?v=4","gravatar_id":"","url":"https://api.github.com/users/ruudk","html_url":"https://github.com/ruudk","followers_url":"https://api.github.com/users/ruudk/followers","following_url":"https://api.github.com/users/ruudk/following{/other_user}","gists_url":"https://api.github.com/users/ruudk/gists{/gist_id}","starred_url":"https://api.github.com/users/ruudk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ruudk/subscriptions","organizations_url":"https://api.github.com/users/ruudk/orgs","repos_url":"https://api.github.com/users/ruudk/repos","events_url":"https://api.github.com/users/ruudk/events{/privacy}","received_events_url":"https://api.github.com/users/ruudk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-05-22T13:32:38Z","updated_at":"2025-05-22T13:32:38Z","body":"I believe this is a different, but similar issue.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/symfony/symfony/issues/comments/2901246987/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ruudk","id":104180,"node_id":"MDQ6VXNlcjEwNDE4MA==","avatar_url":"https://avatars.githubusercontent.com/u/104180?v=4","gravatar_id":"","url":"https://api.github.com/users/ruudk","html_url":"https://github.com/ruudk","followers_url":"https://api.github.com/users/ruudk/followers","following_url":"https://api.github.com/users/ruudk/following{/other_user}","gists_url":"https://api.github.com/users/ruudk/gists{/gist_id}","starred_url":"https://api.github.com/users/ruudk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ruudk/subscriptions","organizations_url":"https://api.github.com/users/ruudk/orgs","repos_url":"https://api.github.com/users/ruudk/repos","events_url":"https://api.github.com/users/ruudk/events{/privacy}","received_events_url":"https://api.github.com/users/ruudk/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"comma8600","id":209111137,"node_id":"U_kgDODHbIYQ","avatar_url":"https://avatars.githubusercontent.com/u/209111137?v=4","gravatar_id":"","url":"https://api.github.com/users/comma8600","html_url":"https://github.com/comma8600","followers_url":"https://api.github.com/users/comma8600/followers","following_url":"https://api.github.com/users/comma8600/following{/other_user}","gists_url":"https://api.github.com/users/comma8600/gists{/gist_id}","starred_url":"https://api.github.com/users/comma8600/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/comma8600/subscriptions","organizations_url":"https://api.github.com/users/comma8600/orgs","repos_url":"https://api.github.com/users/comma8600/repos","events_url":"https://api.github.com/users/comma8600/events{/privacy}","received_events_url":"https://api.github.com/users/comma8600/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-05-22T13:51:04Z","updated_at":"2025-05-22T13:51:04Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/symfony/symfony/issues/60514","repository_url":"https://api.github.com/repos/symfony/symfony","labels_url":"https://api.github.com/repos/symfony/symfony/issues/60514/labels{/name}","comments_url":"https://api.github.com/repos/symfony/symfony/issues/60514/comments","events_url":"https://api.github.com/repos/symfony/symfony/issues/60514/events","html_url":"https://github.com/symfony/symfony/issues/60514","id":3083463149,"node_id":"I_kwDOAAb9Ss63yent","number":60514,"title":"Symfony Serializer deserialization is failing for a object with Discriminator for the csv encoder","user":{"login":"comma8600","id":209111137,"node_id":"U_kgDODHbIYQ","avatar_url":"https://avatars.githubusercontent.com/u/209111137?v=4","gravatar_id":"","url":"https://api.github.com/users/comma8600","html_url":"https://github.com/comma8600","followers_url":"https://api.github.com/users/comma8600/followers","following_url":"https://api.github.com/users/comma8600/following{/other_user}","gists_url":"https://api.github.com/users/comma8600/gists{/gist_id}","starred_url":"https://api.github.com/users/comma8600/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/comma8600/subscriptions","organizations_url":"https://api.github.com/users/comma8600/orgs","repos_url":"https://api.github.com/users/comma8600/repos","events_url":"https://api.github.com/users/comma8600/events{/privacy}","received_events_url":"https://api.github.com/users/comma8600/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":99939,"node_id":"MDU6TGFiZWw5OTkzOQ==","url":"https://api.github.com/repos/symfony/symfony/labels/Serializer","name":"Serializer","color":"DDDDDD","default":false,"description":null},{"id":100079,"node_id":"MDU6TGFiZWwxMDAwNzk=","url":"https://api.github.com/repos/symfony/symfony/labels/Bug","name":"Bug","color":"e10c02","default":false,"description":null},{"id":237003792,"node_id":"MDU6TGFiZWwyMzcwMDM3OTI=","url":"https://api.github.com/repos/symfony/symfony/labels/Status:%20Needs%20Review","name":"Status: Needs Review","color":"ededed","default":false,"description":null}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2025-05-22T13:51:02Z","updated_at":"2025-07-22T11:48:47Z","closed_at":"2025-07-22T11:48:46Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"repository":{"id":458058,"node_id":"MDEwOlJlcG9zaXRvcnk0NTgwNTg=","name":"symfony","full_name":"symfony/symfony","private":false,"owner":{"login":"symfony","id":143937,"node_id":"MDEyOk9yZ2FuaXphdGlvbjE0MzkzNw==","avatar_url":"https://avatars.githubusercontent.com/u/143937?v=4","gravatar_id":"","url":"https://api.github.com/users/symfony","html_url":"https://github.com/symfony","followers_url":"https://api.github.com/users/symfony/followers","following_url":"https://api.github.com/users/symfony/following{/other_user}","gists_url":"https://api.github.com/users/symfony/gists{/gist_id}","starred_url":"https://api.github.com/users/symfony/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/symfony/subscriptions","organizations_url":"https://api.github.com/users/symfony/orgs","repos_url":"https://api.github.com/users/symfony/repos","events_url":"https://api.github.com/users/symfony/events{/privacy}","received_events_url":"https://api.github.com/users/symfony/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/symfony/symfony","description":"The Symfony PHP framework","fork":false,"url":"https://api.github.com/repos/symfony/symfony","forks_url":"https://api.github.com/repos/symfony/symfony/forks","keys_url":"https://api.github.com/repos/symfony/symfony/keys{/key_id}","collaborators_url":"https://api.github.com/repos/symfony/symfony/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/symfony/symfony/teams","hooks_url":"https://api.github.com/repos/symfony/symfony/hooks","issue_events_url":"https://api.github.com/repos/symfony/symfony/issues/events{/number}","events_url":"https://api.github.com/repos/symfony/symfony/events","assignees_url":"https://api.github.com/repos/symfony/symfony/assignees{/user}","branches_url":"https://api.github.com/repos/symfony/symfony/branches{/branch}","tags_url":"https://api.github.com/repos/symfony/symfony/tags","blobs_url":"https://api.github.com/repos/symfony/symfony/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/symfony/symfony/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/symfony/symfony/git/refs{/sha}","trees_url":"https://api.github.com/repos/symfony/symfony/git/trees{/sha}","statuses_url":"https://api.github.com/repos/symfony/symfony/statuses/{sha}","languages_url":"https://api.github.com/repos/symfony/symfony/languages","stargazers_url":"https://api.github.com/repos/symfony/symfony/stargazers","contributors_url":"https://api.github.com/repos/symfony/symfony/contributors","subscribers_url":"https://api.github.com/repos/symfony/symfony/subscribers","subscription_url":"https://api.github.com/repos/symfony/symfony/subscription","commits_url":"https://api.github.com/repos/symfony/symfony/commits{/sha}","git_commits_url":"https://api.github.com/repos/symfony/symfony/git/commits{/sha}","comments_url":"https://api.github.com/repos/symfony/symfony/comments{/number}","issue_comment_url":"https://api.github.com/repos/symfony/symfony/issues/comments{/number}","contents_url":"https://api.github.com/repos/symfony/symfony/contents/{+path}","compare_url":"https://api.github.com/repos/symfony/symfony/compare/{base}...{head}","merges_url":"https://api.github.com/repos/symfony/symfony/merges","archive_url":"https://api.github.com/repos/symfony/symfony/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/symfony/symfony/downloads","issues_url":"https://api.github.com/repos/symfony/symfony/issues{/number}","pulls_url":"https://api.github.com/repos/symfony/symfony/pulls{/number}","milestones_url":"https://api.github.com/repos/symfony/symfony/milestones{/number}","notifications_url":"https://api.github.com/repos/symfony/symfony/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/symfony/symfony/labels{/name}","releases_url":"https://api.github.com/repos/symfony/symfony/releases{/id}","deployments_url":"https://api.github.com/repos/symfony/symfony/deployments","created_at":"2010-01-04T14:21:21Z","updated_at":"2025-11-09T22:15:44Z","pushed_at":"2025-11-08T16:31:14Z","git_url":"git://github.com/symfony/symfony.git","ssh_url":"git@github.com:symfony/symfony.git","clone_url":"https://github.com/symfony/symfony.git","svn_url":"https://github.com/symfony/symfony","homepage":"https://symfony.com","size":310286,"stargazers_count":30753,"watchers_count":30753,"language":"PHP","has_issues":true,"has_projects":true,"has_downloads":false,"has_wiki":false,"has_pages":false,"has_discussions":true,"forks_count":9739,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":776,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit","node_id":"MDc6TGljZW5zZTEz"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":false,"topics":["bundle","framework","hacktoberfest","php","php-framework","symfony","symfony-bundle"],"visibility":"public","forks":9739,"open_issues":776,"watchers":30753,"default_branch":"7.4","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"body":"I am having an issue with deserializing discriminated csv data, after some wrong directions believing it to do with the properties. I have created a minimal example by copying the existing discriminator test in the symfony project and changing it to the csv encoder, that shows even the minimal Dummy test classes while being able to be serialized to csv cannot then be deserialized.\n\nI believe this should work as the deserializer was working on an older version of symfony (see comments on the other ticket despite downgrading the serializer component it did not start working again, only when I reverted to the full composer.lock did it start working again)\n\n> Ah ignore the above example I've got a much more minimal test where it is failing for:\n> \n> I've taken the existing symfony/symfony project 6.4 tag tests and added an identical test to the discriminator for json but swapping in the csv formatter:\n> \n> ```php\n> \n>     private function serializerWithClassDiscriminatorCsv()\n>     {\n>         $classMetadataFactory = new ClassMetadataFactory(new AttributeLoader());\n> \n>         return new Serializer([new ObjectNormalizer($classMetadataFactory, null, null, new ReflectionExtractor(), new ClassDiscriminatorFromClassMetadata($classMetadataFactory))], ['csv' => new CsvEncoder()]);\n>     }\n> \n> \n>     public function testDeserializeAndSerializeInterfacedObjectsWithTheClassMetadataDiscriminatorResolverCsv()\n>     {\n>         $example = new DummyMessageNumberOne();\n>         $example->one = 1;\n> \n>         $csvData = 'type,one,two' . PHP_EOL .'one,1,' . PHP_EOL;\n> \n>         $serializer = $this->serializerWithClassDiscriminatorCsv();\n>         $deserialized = $serializer->deserialize($csvData, DummyMessageInterface::class, 'csv');\n>         $this->assertEquals($example, $deserialized);\n> \n>         $serialized = $serializer->serialize($deserialized, 'csv');\n>         $this->assertEquals($csvData, $serialized);\n>     }\n> ```\n> \n> give the result:\n> ```\n> \n> There was 1 error:\n> \n> 1) Symfony\\Component\\Serializer\\Tests\\SerializerTest::testDeserializeAndSerializeInterfacedObjectsWithTheClassMetadataDiscriminatorResolverCsv\n> Symfony\\Component\\Serializer\\Exception\\NotNormalizableValueException: Type property \"type\" not found for the abstract object \"Symfony\\Component\\Serializer\\Tests\\Fixtures\\DummyMessageInterface\".\n> \n> /Users/alexdawn/projects/symfony/src/Symfony/Component/Serializer/Exception/NotNormalizableValueException.php:32\n> /Users/alexdawn/projects/symfony/src/Symfony/Component/Serializer/Normalizer/AbstractObjectNormalizer.php:855\n> /Users/alexdawn/projects/symfony/src/Symfony/Component/Serializer/Normalizer/AbstractObjectNormalizer.php:332\n> /Users/alexdawn/projects/symfony/src/Symfony/Component/Serializer/Serializer.php:249\n> /Users/alexdawn/projects/symfony/src/Symfony/Component/Serializer/Serializer.php:154\n> /Users/alexdawn/projects/symfony/src/Symfony/Component/Serializer/Tests/SerializerTest.php:468\n> ```\n> \n> serialization works on the $example object and gives an identical string to the $csvData. It's just going the opposite directions which is failing \n\n _Originally posted by @comma8600 in [#60214](https://github.com/symfony/symfony/issues/60214#issuecomment-2901236036)_","reactions":{"url":"https://api.github.com/repos/symfony/symfony/issues/60514/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/symfony/symfony/issues/60514/timeline","performed_via_github_app":null,"state_reason":"completed"}},"event":"cross-referenced"},{"id":18184092680,"node_id":"REFE_lADOAAb9Ss6yZOXLzwAAAAQ72zwI","url":"https://api.github.com/repos/symfony/symfony/issues/events/18184092680","actor":{"login":"ruudk","id":104180,"node_id":"MDQ6VXNlcjEwNDE4MA==","avatar_url":"https://avatars.githubusercontent.com/u/104180?v=4","gravatar_id":"","url":"https://api.github.com/users/ruudk","html_url":"https://github.com/ruudk","followers_url":"https://api.github.com/users/ruudk/followers","following_url":"https://api.github.com/users/ruudk/following{/other_user}","gists_url":"https://api.github.com/users/ruudk/gists{/gist_id}","starred_url":"https://api.github.com/users/ruudk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ruudk/subscriptions","organizations_url":"https://api.github.com/users/ruudk/orgs","repos_url":"https://api.github.com/users/ruudk/repos","events_url":"https://api.github.com/users/ruudk/events{/privacy}","received_events_url":"https://api.github.com/users/ruudk/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"9dc98df939ef7f6031572a866801dafdd8452a5a","commit_url":"https://api.github.com/repos/ruudk/symfony/commits/9dc98df939ef7f6031572a866801dafdd8452a5a","created_at":"2025-06-17T07:03:04Z","performed_via_github_app":null},{"id":18228541895,"node_id":"REFE_lADOAAb9Ss6yZOXLzwAAAAQ-gXnH","url":"https://api.github.com/repos/symfony/symfony/issues/events/18228541895","actor":{"login":"ruudk","id":104180,"node_id":"MDQ6VXNlcjEwNDE4MA==","avatar_url":"https://avatars.githubusercontent.com/u/104180?v=4","gravatar_id":"","url":"https://api.github.com/users/ruudk","html_url":"https://github.com/ruudk","followers_url":"https://api.github.com/users/ruudk/followers","following_url":"https://api.github.com/users/ruudk/following{/other_user}","gists_url":"https://api.github.com/users/ruudk/gists{/gist_id}","starred_url":"https://api.github.com/users/ruudk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ruudk/subscriptions","organizations_url":"https://api.github.com/users/ruudk/orgs","repos_url":"https://api.github.com/users/ruudk/repos","events_url":"https://api.github.com/users/ruudk/events{/privacy}","received_events_url":"https://api.github.com/users/ruudk/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"ad5ce536e71bad0d60c02436fe2ad4dff6c3c54d","commit_url":"https://api.github.com/repos/ruudk/symfony/commits/ad5ce536e71bad0d60c02436fe2ad4dff6c3c54d","created_at":"2025-06-19T11:34:57Z","performed_via_github_app":null},{"id":18228607892,"node_id":"REFE_lADOAAb9Ss6yZOXLzwAAAAQ-gnuU","url":"https://api.github.com/repos/symfony/symfony/issues/events/18228607892","actor":{"login":"ruudk","id":104180,"node_id":"MDQ6VXNlcjEwNDE4MA==","avatar_url":"https://avatars.githubusercontent.com/u/104180?v=4","gravatar_id":"","url":"https://api.github.com/users/ruudk","html_url":"https://github.com/ruudk","followers_url":"https://api.github.com/users/ruudk/followers","following_url":"https://api.github.com/users/ruudk/following{/other_user}","gists_url":"https://api.github.com/users/ruudk/gists{/gist_id}","starred_url":"https://api.github.com/users/ruudk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ruudk/subscriptions","organizations_url":"https://api.github.com/users/ruudk/orgs","repos_url":"https://api.github.com/users/ruudk/repos","events_url":"https://api.github.com/users/ruudk/events{/privacy}","received_events_url":"https://api.github.com/users/ruudk/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"930d79289b70c819492c7a85a7361e7316fb4a15","commit_url":"https://api.github.com/repos/ruudk/symfony/commits/930d79289b70c819492c7a85a7361e7316fb4a15","created_at":"2025-06-19T11:38:55Z","performed_via_github_app":null},{"id":18229425877,"node_id":"REFE_lADOAAb9Ss6yZOXLzwAAAAQ-jvbV","url":"https://api.github.com/repos/symfony/symfony/issues/events/18229425877","actor":{"login":"ruudk","id":104180,"node_id":"MDQ6VXNlcjEwNDE4MA==","avatar_url":"https://avatars.githubusercontent.com/u/104180?v=4","gravatar_id":"","url":"https://api.github.com/users/ruudk","html_url":"https://github.com/ruudk","followers_url":"https://api.github.com/users/ruudk/followers","following_url":"https://api.github.com/users/ruudk/following{/other_user}","gists_url":"https://api.github.com/users/ruudk/gists{/gist_id}","starred_url":"https://api.github.com/users/ruudk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ruudk/subscriptions","organizations_url":"https://api.github.com/users/ruudk/orgs","repos_url":"https://api.github.com/users/ruudk/repos","events_url":"https://api.github.com/users/ruudk/events{/privacy}","received_events_url":"https://api.github.com/users/ruudk/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"703536cf52061c5794d90d3e292b862236495223","commit_url":"https://api.github.com/repos/ruudk/symfony/commits/703536cf52061c5794d90d3e292b862236495223","created_at":"2025-06-19T12:19:05Z","performed_via_github_app":null},{"id":18229879956,"node_id":"REFE_lADOAAb9Ss6yZOXLzwAAAAQ-leSU","url":"https://api.github.com/repos/symfony/symfony/issues/events/18229879956","actor":{"login":"ruudk","id":104180,"node_id":"MDQ6VXNlcjEwNDE4MA==","avatar_url":"https://avatars.githubusercontent.com/u/104180?v=4","gravatar_id":"","url":"https://api.github.com/users/ruudk","html_url":"https://github.com/ruudk","followers_url":"https://api.github.com/users/ruudk/followers","following_url":"https://api.github.com/users/ruudk/following{/other_user}","gists_url":"https://api.github.com/users/ruudk/gists{/gist_id}","starred_url":"https://api.github.com/users/ruudk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ruudk/subscriptions","organizations_url":"https://api.github.com/users/ruudk/orgs","repos_url":"https://api.github.com/users/ruudk/repos","events_url":"https://api.github.com/users/ruudk/events{/privacy}","received_events_url":"https://api.github.com/users/ruudk/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"f03696e9e278077e687cd7d765f6faa7894c76b4","commit_url":"https://api.github.com/repos/ruudk/symfony/commits/f03696e9e278077e687cd7d765f6faa7894c76b4","created_at":"2025-06-19T12:41:28Z","performed_via_github_app":null},{"id":18229882161,"node_id":"CE_lADOAAb9Ss6yZOXLzwAAAAQ-le0x","url":"https://api.github.com/repos/symfony/symfony/issues/events/18229882161","actor":{"login":"nicolas-grekas","id":243674,"node_id":"MDQ6VXNlcjI0MzY3NA==","avatar_url":"https://avatars.githubusercontent.com/u/243674?v=4","gravatar_id":"","url":"https://api.github.com/users/nicolas-grekas","html_url":"https://github.com/nicolas-grekas","followers_url":"https://api.github.com/users/nicolas-grekas/followers","following_url":"https://api.github.com/users/nicolas-grekas/following{/other_user}","gists_url":"https://api.github.com/users/nicolas-grekas/gists{/gist_id}","starred_url":"https://api.github.com/users/nicolas-grekas/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nicolas-grekas/subscriptions","organizations_url":"https://api.github.com/users/nicolas-grekas/orgs","repos_url":"https://api.github.com/users/nicolas-grekas/repos","events_url":"https://api.github.com/users/nicolas-grekas/events{/privacy}","received_events_url":"https://api.github.com/users/nicolas-grekas/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2025-06-19T12:41:36Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/symfony/symfony/issues/comments/2988015700","html_url":"https://github.com/symfony/symfony/issues/60214#issuecomment-2988015700","issue_url":"https://api.github.com/repos/symfony/symfony/issues/60214","id":2988015700,"node_id":"IC_kwDOAAb9Ss6yGYBU","user":{"login":"ruudk","id":104180,"node_id":"MDQ6VXNlcjEwNDE4MA==","avatar_url":"https://avatars.githubusercontent.com/u/104180?v=4","gravatar_id":"","url":"https://api.github.com/users/ruudk","html_url":"https://github.com/ruudk","followers_url":"https://api.github.com/users/ruudk/followers","following_url":"https://api.github.com/users/ruudk/following{/other_user}","gists_url":"https://api.github.com/users/ruudk/gists{/gist_id}","starred_url":"https://api.github.com/users/ruudk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ruudk/subscriptions","organizations_url":"https://api.github.com/users/ruudk/orgs","repos_url":"https://api.github.com/users/ruudk/repos","events_url":"https://api.github.com/users/ruudk/events{/privacy}","received_events_url":"https://api.github.com/users/ruudk/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2025-06-19T12:54:38Z","updated_at":"2025-06-19T12:54:38Z","body":"This will be solved with:\n- https://github.com/symfony/symfony/pull/60511","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/symfony/symfony/issues/comments/2988015700/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"ruudk","id":104180,"node_id":"MDQ6VXNlcjEwNDE4MA==","avatar_url":"https://avatars.githubusercontent.com/u/104180?v=4","gravatar_id":"","url":"https://api.github.com/users/ruudk","html_url":"https://github.com/ruudk","followers_url":"https://api.github.com/users/ruudk/followers","following_url":"https://api.github.com/users/ruudk/following{/other_user}","gists_url":"https://api.github.com/users/ruudk/gists{/gist_id}","starred_url":"https://api.github.com/users/ruudk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ruudk/subscriptions","organizations_url":"https://api.github.com/users/ruudk/orgs","repos_url":"https://api.github.com/users/ruudk/repos","events_url":"https://api.github.com/users/ruudk/events{/privacy}","received_events_url":"https://api.github.com/users/ruudk/received_events","type":"User","user_view_type":"public","site_admin":false}}]