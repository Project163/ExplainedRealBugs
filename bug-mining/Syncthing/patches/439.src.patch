diff --git a/lib/db/leveldb_transactions.go b/lib/db/leveldb_transactions.go
index 5415f56a3..c9151d28e 100644
--- a/lib/db/leveldb_transactions.go
+++ b/lib/db/leveldb_transactions.go
@@ -100,7 +100,7 @@ func (t readWriteTransaction) updateGlobal(folder, device []byte, file protocol.
 	var oldFile protocol.FileInfo
 	var hasOldFile bool
 	// Remove the device from the current version list
-	if svl != nil {
+	if len(svl) != 0 {
 		err = fl.UnmarshalXDR(svl)
 		if err != nil {
 			panic(err)
