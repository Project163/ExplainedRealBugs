diff --git a/lib/stun/stun.go b/lib/stun/stun.go
index 5f53f2299..e5bb54810 100644
--- a/lib/stun/stun.go
+++ b/lib/stun/stun.go
@@ -196,7 +196,6 @@ func (s *Service) runStunForServer(ctx context.Context, addr string) {
 	}
 
 	s.setNATType(natType)
-	s.setExternalAddress(extAddr, addr)
 	l.Debugf("%s detected NAT type: %s via %s", s, natType, addr)
 
 	// We can't punch through this one, so no point doing keepalives
@@ -206,6 +205,8 @@ func (s *Service) runStunForServer(ctx context.Context, addr string) {
 		return
 	}
 
+	s.setExternalAddress(extAddr, addr)
+
 	s.stunKeepAlive(ctx, addr, extAddr)
 }
 
