diff --git a/lib/upnp/upnp.go b/lib/upnp/upnp.go
index f8e4cf9e1..6031d1468 100644
--- a/lib/upnp/upnp.go
+++ b/lib/upnp/upnp.go
@@ -158,10 +158,11 @@ func discover(intf *net.Interface, deviceType string, timeout time.Duration, res
 	ssdp := &net.UDPAddr{IP: []byte{239, 255, 255, 250}, Port: 1900}
 
 	tpl := `M-SEARCH * HTTP/1.1
-Host: 239.255.255.250:1900
-St: %s
-Man: "ssdp:discover"
-Mx: %d
+HOST: 239.255.255.250:1900
+ST: %s
+MAN: "ssdp:discover"
+MX: %d
+USER-AGENT: syncthing/1.0
 
 `
 	searchStr := fmt.Sprintf(tpl, deviceType, timeout/time.Second)
