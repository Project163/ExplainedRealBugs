{"url":"https://api.github.com/repos/syncthing/syncthing/issues/987","repository_url":"https://api.github.com/repos/syncthing/syncthing","labels_url":"https://api.github.com/repos/syncthing/syncthing/issues/987/labels{/name}","comments_url":"https://api.github.com/repos/syncthing/syncthing/issues/987/comments","events_url":"https://api.github.com/repos/syncthing/syncthing/issues/987/events","html_url":"https://github.com/syncthing/syncthing/issues/987","id":49322283,"node_id":"MDU6SXNzdWU0OTMyMjI4Mw==","number":987,"title":"panic: leveldb/table: corruption on data-block","user":{"login":"wm57755775","id":9361590,"node_id":"MDQ6VXNlcjkzNjE1OTA=","avatar_url":"https://avatars.githubusercontent.com/u/9361590?v=4","gravatar_id":"","url":"https://api.github.com/users/wm57755775","html_url":"https://github.com/wm57755775","followers_url":"https://api.github.com/users/wm57755775/followers","following_url":"https://api.github.com/users/wm57755775/following{/other_user}","gists_url":"https://api.github.com/users/wm57755775/gists{/gist_id}","starred_url":"https://api.github.com/users/wm57755775/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/wm57755775/subscriptions","organizations_url":"https://api.github.com/users/wm57755775/orgs","repos_url":"https://api.github.com/users/wm57755775/repos","events_url":"https://api.github.com/users/wm57755775/events{/privacy}","received_events_url":"https://api.github.com/users/wm57755775/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":67767665,"node_id":"MDU6TGFiZWw2Nzc2NzY2NQ==","url":"https://api.github.com/repos/syncthing/syncthing/labels/bug","name":"bug","color":"d93f0b","default":true,"description":"A problem with current functionality, as opposed to missing functionality (enhancement)"},{"id":628314330,"node_id":"MDU6TGFiZWw2MjgzMTQzMzA=","url":"https://api.github.com/repos/syncthing/syncthing/labels/frozen-due-to-age","name":"frozen-due-to-age","color":"eeeeee","default":false,"description":"Issues closed and untouched for a long time, together with being locked for discussion"}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":18,"created_at":"2014-11-19T02:48:20Z","updated_at":"2017-06-16T21:11:12Z","closed_at":"2015-08-16T14:38:20Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Today, syncthing is stopped with panic log below.\n# \n\n[46CYY] 11:44:05 INFO: syncthing v0.10.6 (go1.3.3 windows-386 default) jenkins@build.syncthing.net 2014-11-18 12:24:42 UTC\n[46CYY] 11:44:05 INFO: My ID: 46CYY25-IKW6QLZ-3FXOHHD-2WRSQU3-CTWWWWF-J2F2NQS-RSJNNAS-ODOAJQL\n...\nPanic at 2014-11-19T11:44:06+09:00\npanic: leveldb/table: corruption on data-block (pos=16304): checksum mismatch [file=003777.ldb]\n\ngoroutine 16 [running]:\nruntime.panic(0x7e2d40, 0x12b8b9b0)\n    c:/go/src/pkg/runtime/panic.c:279 +0xe9\ngithub.com/syncthing/syncthing/internal/files.ldbCheckGlobals(0x11b00e00, 0x11ee73a8, 0x3, 0x8)\n    /home/jenkins/.jenkins/jobs/syncthing/workspace/src/github.com/syncthing/syncthing/internal/files/leveldb.go:1001 +0x9e9\ngithub.com/syncthing/syncthing/internal/files.NewSet(0x11b55958, 0x3, 0x11b00e00, 0x11b230f4)\n    /home/jenkins/.jenkins/jobs/syncthing/workspace/src/github.com/syncthing/syncthing/internal/files/set.go:56 +0x12f\ngithub.com/syncthing/syncthing/internal/model.(*Model).AddFolder(0x11b67860, 0x11b55958, 0x3, 0x11b55968, 0x6, 0x11b6a410, 0x2, 0x4, 0x0, 0x1e, ...)\n    /home/jenkins/.jenkins/jobs/syncthing/workspace/src/github.com/syncthing/syncthing/internal/model/model.go:984 +0x149\nmain.sanityCheckFolders(0x11b8e000, 0x11b67860)\n    /home/jenkins/.jenkins/jobs/syncthing/workspace/src/github.com/syncthing/syncthing/cmd/syncthing/main.go:637 +0x12f\nmain.syncthingMain()\n    /home/jenkins/.jenkins/jobs/syncthing/workspace/src/github.com/syncthing/syncthing/cmd/syncthing/main.go:482 +0x124d\nmain.main()\n    /home/jenkins/.jenkins/jobs/syncthing/workspace/src/github.com/syncthing/syncthing/cmd/syncthing/main.go:346 +0x1475\n\ngoroutine 19 [finalizer wait]:\nruntime.park(0x430130, 0xb792f8, 0xb77da9)\n    c:/go/src/pkg/runtime/proc.c:1369 +0x94\nruntime.parkunlock(0xb792f8, 0xb77da9)\n    c:/go/src/pkg/runtime/proc.c:1385 +0x3f\nrunfinq()\n    c:/go/src/pkg/runtime/mgc0.c:2644 +0xc5\nruntime.goexit()\n    c:/go/src/pkg/runtime/proc.c:1445\n\ngoroutine 20 [syscall]:\nos/signal.loop()\n    c:/go/src/pkg/os/signal/signal_unix.go:21 +0x24\ncreated by os/signal.init揃1\n    c:/go/src/pkg/os/signal/signal_unix.go:27 +0x37\n\ngoroutine 22 [select]:\ngithub.com/syncthing/syncthing/internal/events.(_Subscription).Poll(0x11b8c6e0, 0xf8475800, 0xd, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, ...)\n    /home/jenkins/.jenkins/jobs/syncthing/workspace/src/github.com/syncthing/syncthing/internal/events/events.go:176 +0x2df\ngithub.com/syncthing/syncthing/internal/events.(_BufferedSubscription).pollingLoop(0x11ae4b70)\n    /home/jenkins/.jenkins/jobs/syncthing/workspace/src/github.com/syncthing/syncthing/internal/events/events.go:208 +0x4a\ncreated by github.com/syncthing/syncthing/internal/events.NewBufferedSubscription\n    /home/jenkins/.jenkins/jobs/syncthing/workspace/src/github.com/syncthing/syncthing/internal/events/events.go:202 +0xfa\n\ngoroutine 23 [chan receive]:\nmain.trackCPUUsage()\n    /home/jenkins/.jenkins/jobs/syncthing/workspace/src/github.com/syncthing/syncthing/cmd/syncthing/gui_windows.go:46 +0x3b2\ncreated by main.init揃2\n    /home/jenkins/.jenkins/jobs/syncthing/workspace/src/github.com/syncthing/syncthing/cmd/syncthing/gui_windows.go:26 +0x28\n\ngoroutine 24 [chan receive]:\ngithub.com/syncthing/syncthing/internal/config.(*ConfigWrapper).Serve(0x11b8e000)\n    /home/jenkins/.jenkins/jobs/syncthing/workspace/src/github.com/syncthing/syncthing/internal/config/wrapper.go:88 +0x70\ncreated by github.com/syncthing/syncthing/internal/config.Wrap\n    /home/jenkins/.jenkins/jobs/syncthing/workspace/src/github.com/syncthing/syncthing/internal/config/wrapper.go:63 +0x9d\n\ngoroutine 25 [select]:\ngithub.com/syndtr/goleveldb/leveldb/util.(*BufferPool).drain(0x11b94000)\n    /home/jenkins/.jenkins/jobs/syncthing/workspace/src/github.com/syncthing/syncthing/Godeps/_workspace/src/github.com/syndtr/goleveldb/leveldb/util/buffer_pool.go:205 +0x181\ncreated by github.com/syndtr/goleveldb/leveldb/util.NewBufferPool\n    /home/jenkins/.jenkins/jobs/syncthing/workspace/src/github.com/syncthing/syncthing/Godeps/_workspace/src/github.com/syndtr/goleveldb/leveldb/util/buffer_pool.go:236 +0x192\n\ngoroutine 26 [select]:\ngithub.com/syndtr/goleveldb/leveldb.(*DB).compactionError(0x11b00e00)\n    /home/jenkins/.jenkins/jobs/syncthing/workspace/src/github.com/syncthing/syncthing/Godeps/_workspace/src/github.com/syndtr/goleveldb/leveldb/db_compaction.go:153 +0x1fd\ncreated by github.com/syndtr/goleveldb/leveldb.openDB\n    /home/jenkins/.jenkins/jobs/syncthing/workspace/src/github.com/syncthing/syncthing/Godeps/_workspace/src/github.com/syndtr/goleveldb/leveldb/db.go:126 +0x4ca\n\ngoroutine 27 [select]:\ngithub.com/syndtr/goleveldb/leveldb.(*DB).mpoolDrain(0x11b00e00)\n    /home/jenkins/.jenkins/jobs/syncthing/workspace/src/github.com/syncthing/syncthing/Godeps/_workspace/src/github.com/syndtr/goleveldb/leveldb/db_state.go:73 +0xe9\ncreated by github.com/syndtr/goleveldb/leveldb.openDB\n    /home/jenkins/.jenkins/jobs/syncthing/workspace/src/github.com/syncthing/syncthing/Godeps/_workspace/src/github.com/syndtr/goleveldb/leveldb/db.go:127 +0x4df\n\ngoroutine 29 [select]:\ngithub.com/syndtr/goleveldb/leveldb.(*DB).mCompaction(0x11b00e00)\n    /home/jenkins/.jenkins/jobs/syncthing/workspace/src/github.com/syncthing/syncthing/Godeps/_workspace/src/github.com/syndtr/goleveldb/leveldb/db_compaction.go:759 +0x1ca\ncreated by github.com/syndtr/goleveldb/leveldb.openDB\n    /home/jenkins/.jenkins/jobs/syncthing/workspace/src/github.com/syncthing/syncthing/Godeps/_workspace/src/github.com/syndtr/goleveldb/leveldb/db.go:131 +0x52e\n\ngoroutine 30 [select]:\ngithub.com/syndtr/goleveldb/leveldb.(*DB).jWriter(0x11b00e00)\n    /home/jenkins/.jenkins/jobs/syncthing/workspace/src/github.com/syncthing/syncthing/Godeps/_workspace/src/github.com/syndtr/goleveldb/leveldb/db_write.go:37 +0x123\ncreated by github.com/syndtr/goleveldb/leveldb.openDB\n    /home/jenkins/.jenkins/jobs/syncthing/workspace/src/github.com/syncthing/syncthing/Godeps/_workspace/src/github.com/syndtr/goleveldb/leveldb/db.go:132 +0x543\n\ngoroutine 31 [sleep]:\ntime.Sleep(0xd964b800, 0x45)\n    c:/go/src/pkg/runtime/time.goc:39 +0x3f\ngithub.com/syncthing/syncthing/internal/model.func揃023()\n    /home/jenkins/.jenkins/jobs/syncthing/workspace/src/github.com/syncthing/syncthing/internal/model/util.go:26 +0x5a\ncreated by github.com/syncthing/syncthing/internal/model.deadlockDetect\n    /home/jenkins/.jenkins/jobs/syncthing/workspace/src/github.com/syncthing/syncthing/internal/model/util.go:44 +0x8c\n\ngoroutine 48 [sleep]:\ntime.Sleep(0xd964b800, 0x45)\n    c:/go/src/pkg/runtime/time.goc:39 +0x3f\ngithub.com/syncthing/syncthing/internal/model.func揃023()\n    /home/jenkins/.jenkins/jobs/syncthing/workspace/src/github.com/syncthing/syncthing/internal/model/util.go:26 +0x5a\ncreated by github.com/syncthing/syncthing/internal/model.deadlockDetect\n    /home/jenkins/.jenkins/jobs/syncthing/workspace/src/github.com/syncthing/syncthing/internal/model/util.go:44 +0x8c\n\ngoroutine 49 [sleep]:\ntime.Sleep(0xd964b800, 0x45)\n    c:/go/src/pkg/runtime/time.goc:39 +0x3f\ngithub.com/syncthing/syncthing/internal/model.func揃023()\n    /home/jenkins/.jenkins/jobs/syncthing/workspace/src/github.com/syncthing/syncthing/internal/model/util.go:26 +0x5a\ncreated by github.com/syncthing/syncthing/internal/model.deadlockDetect\n    /home/jenkins/.jenkins/jobs/syncthing/workspace/src/github.com/syncthing/syncthing/internal/model/util.go:44 +0x8c\n","closed_by":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/987/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/syncthing/syncthing/issues/987/timeline","performed_via_github_app":null,"state_reason":"completed"}