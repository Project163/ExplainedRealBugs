{"url":"https://api.github.com/repos/syncthing/syncthing/issues/1786","repository_url":"https://api.github.com/repos/syncthing/syncthing","labels_url":"https://api.github.com/repos/syncthing/syncthing/issues/1786/labels{/name}","comments_url":"https://api.github.com/repos/syncthing/syncthing/issues/1786/comments","events_url":"https://api.github.com/repos/syncthing/syncthing/issues/1786/events","html_url":"https://github.com/syncthing/syncthing/issues/1786","id":74668407,"node_id":"MDU6SXNzdWU3NDY2ODQwNw==","number":1786,"title":"Too long file name prevents sync completion","user":{"login":"rkfg","id":184066,"node_id":"MDQ6VXNlcjE4NDA2Ng==","avatar_url":"https://avatars.githubusercontent.com/u/184066?v=4","gravatar_id":"","url":"https://api.github.com/users/rkfg","html_url":"https://github.com/rkfg","followers_url":"https://api.github.com/users/rkfg/followers","following_url":"https://api.github.com/users/rkfg/following{/other_user}","gists_url":"https://api.github.com/users/rkfg/gists{/gist_id}","starred_url":"https://api.github.com/users/rkfg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rkfg/subscriptions","organizations_url":"https://api.github.com/users/rkfg/orgs","repos_url":"https://api.github.com/users/rkfg/repos","events_url":"https://api.github.com/users/rkfg/events{/privacy}","received_events_url":"https://api.github.com/users/rkfg/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":67767667,"node_id":"MDU6TGFiZWw2Nzc2NzY2Nw==","url":"https://api.github.com/repos/syncthing/syncthing/labels/enhancement","name":"enhancement","color":"0e8a16","default":true,"description":"New features or improvements of some kind, as opposed to a problem (bug)"},{"id":169370104,"node_id":"MDU6TGFiZWwxNjkzNzAxMDQ=","url":"https://api.github.com/repos/syncthing/syncthing/labels/good%20first%20issue","name":"good first issue","color":"0052cc","default":true,"description":"Good starting points for new contributors"},{"id":628314330,"node_id":"MDU6TGFiZWw2MjgzMTQzMzA=","url":"https://api.github.com/repos/syncthing/syncthing/labels/frozen-due-to-age","name":"frozen-due-to-age","color":"eeeeee","default":false,"description":"Issues closed and untouched for a long time, together with being locked for discussion"}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":11,"created_at":"2015-05-09T13:00:16Z","updated_at":"2017-06-16T21:07:25Z","closed_at":"2015-05-10T18:44:56Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Today I've upgraded the program to 11.2 and this happened (probably not upgrade-related):\n\n```\n[NKCV4] 15:42:20 INFO: Puller (folder \"dina-dropbox\", file \"GREAT BRITAIN/Great Britain. Pictures/Great Britain - England, Wales/Достопримечательности Лондона « Экскурсионные туры в Лондон 2014 « Туры в Англию 2014 « Туристическая компания ВСЕВЕД ТРЕВЕЛ. Цены на отдых..html\"): dst create: open /home/user/Dropbox/GREAT BRITAIN/Great Britain. Pictures/Great Britain - England, Wales/.syncthing.Достопримечательности Лондона « Экскурсионные туры в Лондон 2014 « Туры в Англию 2014 « Туристическая компания ВСЕВЕД ТРЕВЕЛ. Цены на отдых..html: file name too long\n```\n\nThe file name is long enough but it doesn't violate any limitation of the source filesystem (ext4). However, on the target there's a prefix added, \".syncthing.\", until the file is fully transferred. Its name becomes too long and the puller stalls. A relatively simple solution would be to replace the filename with a temporary guaranteed to be non-existent name that's mapped to the real name via a hashmap. Then after the file is synced it's renamed to the real name.\n\nAnother potential (though not solvable IMHO) problem is that filenames on Windows (NTFS) are limited by 255 characters while on Linux (most of filesystems) it's 255 bytes. For ASCII filenames it's ok but anything outside of it (cyrillics etc.) could be problematic as 255 2-byte chars are effectively 510 bytes.\n","closed_by":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/1786/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/syncthing/syncthing/issues/1786/timeline","performed_via_github_app":null,"state_reason":"completed"}