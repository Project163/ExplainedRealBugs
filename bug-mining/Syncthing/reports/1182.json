{"url":"https://api.github.com/repos/syncthing/syncthing/issues/7196","repository_url":"https://api.github.com/repos/syncthing/syncthing","labels_url":"https://api.github.com/repos/syncthing/syncthing/issues/7196/labels{/name}","comments_url":"https://api.github.com/repos/syncthing/syncthing/issues/7196/comments","events_url":"https://api.github.com/repos/syncthing/syncthing/issues/7196/events","html_url":"https://github.com/syncthing/syncthing/issues/7196","id":766948053,"node_id":"MDU6SXNzdWU3NjY5NDgwNTM=","number":7196,"title":"relaysrv: allow to listen for requests on an IP address different to the external address","user":{"login":"nadiamoe","id":969721,"node_id":"MDQ6VXNlcjk2OTcyMQ==","avatar_url":"https://avatars.githubusercontent.com/u/969721?v=4","gravatar_id":"","url":"https://api.github.com/users/nadiamoe","html_url":"https://github.com/nadiamoe","followers_url":"https://api.github.com/users/nadiamoe/followers","following_url":"https://api.github.com/users/nadiamoe/following{/other_user}","gists_url":"https://api.github.com/users/nadiamoe/gists{/gist_id}","starred_url":"https://api.github.com/users/nadiamoe/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nadiamoe/subscriptions","organizations_url":"https://api.github.com/users/nadiamoe/orgs","repos_url":"https://api.github.com/users/nadiamoe/repos","events_url":"https://api.github.com/users/nadiamoe/events{/privacy}","received_events_url":"https://api.github.com/users/nadiamoe/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":67767667,"node_id":"MDU6TGFiZWw2Nzc2NzY2Nw==","url":"https://api.github.com/repos/syncthing/syncthing/labels/enhancement","name":"enhancement","color":"0e8a16","default":true,"description":"New features or improvements of some kind, as opposed to a problem (bug)"},{"id":628314330,"node_id":"MDU6TGFiZWw2MjgzMTQzMzA=","url":"https://api.github.com/repos/syncthing/syncthing/labels/frozen-due-to-age","name":"frozen-due-to-age","color":"eeeeee","default":false,"description":"Issues closed and untouched for a long time, together with being locked for discussion"},{"id":753433298,"node_id":"MDU6TGFiZWw3NTM0MzMyOTg=","url":"https://api.github.com/repos/syncthing/syncthing/labels/skip-changelog","name":"skip-changelog","color":"7fffb4","default":false,"description":"Bugs that have never been in a released stable version, and as such excluded from the release notes"}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/syncthing/syncthing/milestones/59","html_url":"https://github.com/syncthing/syncthing/milestone/59","labels_url":"https://api.github.com/repos/syncthing/syncthing/milestones/59/labels","id":6215237,"node_id":"MDk6TWlsZXN0b25lNjIxNTIzNw==","number":59,"title":"v1.13.0","description":"This release adds configuration options for min/max connections (see https://docs.syncthing.net/advanced/option-connection-limits.html) and moves the storage of pending devices/folders from the config to the database (see https://docs.syncthing.net/dev/rest.html#cluster-endpoints).","creator":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":45,"state":"closed","created_at":"2020-12-15T13:04:43Z","updated_at":"2021-02-02T16:05:22Z","due_on":"2021-02-02T08:00:00Z","closed_at":"2021-02-02T16:05:22Z"},"comments":17,"created_at":"2020-12-14T21:32:01Z","updated_at":"2022-02-06T07:02:26Z","closed_at":"2020-12-21T10:55:17Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"When trying to run a relay using the `syncthing/relaysrv` docker image on a multihomed server (e.g. Kubernetes), I get the following:\r\n\r\n```\r\n2020/12/14 21:21:41 main.go:138: strelaysrv v1.3.4 \"Fermium Flea\" (go1.13.8 linux-amd64) docker@syncthing.net 2020-01-14 07:01:03 UTC\r\n2020/12/14 21:21:41 main.go:144: Connection limit 838860\r\n2020/12/14 21:21:41 main.go:157: Failed to load keypair. Generating one, this might take a while...\r\n2020/12/14 21:21:41 main.go:183: ID: ZEHCSIS-ZBH4DQM-W6K75CQ-AACASFF-PTVRV3H-DDMZXJN-WQYBNZJ-6NAKVAH\r\n2020/12/14 21:21:41 main.go:233: URI: relay://212.129.50.60:22067/?id=ZEHCSIS-ZBH4DQM-W6K75CQ-AACASFF-PTVRV3H-DDMZXJN-WQYBNZJ-6NAKVAH&pingInterval=1m0s&networkTimeout=2m0s&sessionLimitBps=0&globalLimitBps=2099200&statusAddr=:22070&providedBy=Roberto Santalla (@rsroobre)\r\n2020/12/14 21:21:41 main.go:236: !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\n2020/12/14 21:21:41 main.go:237: !!  Joining default relay pools, this relay will be available for public use. !!\r\n2020/12/14 21:21:41 main.go:238: !!      Use the -pools=\"\" command line option to make the relay private.      !!\r\n2020/12/14 21:21:41 main.go:239: !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\r\n2020/12/14 21:21:41 pool.go:16: Joining https://relays.syncthing.net/endpoint\r\n2020/12/14 21:21:41 pool.go:45: https://relays.syncthing.net/endpoint failed to join due to IP address not matching external address. Aborting\r\n```\r\n\r\nIf I'm not mistaken, the last line is telling me the address in which I've set the relay server to listen is different from the IP my machine uses to make requests to the world. I think this is a fair use case for multihomed servers.\r\n\r\nIs there any possibility of removing this check? My relay server has been up & running publicly for several years, having to remove it because I'm migrating my server to K8s would deeply sadden me :(\r\n\r\nThanks in advance for your time","closed_by":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/7196/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/syncthing/syncthing/issues/7196/timeline","performed_via_github_app":null,"state_reason":"completed"}