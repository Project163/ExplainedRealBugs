[{"id":5400837751,"node_id":"LE_lADOAOCAEs48eiekzwAAAAFB6j53","url":"https://api.github.com/repos/syncthing/syncthing/issues/events/5400837751","actor":{"login":"MrEager","id":91851422,"node_id":"U_kgDOBXmKng","avatar_url":"https://avatars.githubusercontent.com/u/91851422?v=4","gravatar_id":"","url":"https://api.github.com/users/MrEager","html_url":"https://github.com/MrEager","followers_url":"https://api.github.com/users/MrEager/followers","following_url":"https://api.github.com/users/MrEager/following{/other_user}","gists_url":"https://api.github.com/users/MrEager/gists{/gist_id}","starred_url":"https://api.github.com/users/MrEager/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MrEager/subscriptions","organizations_url":"https://api.github.com/users/MrEager/orgs","repos_url":"https://api.github.com/users/MrEager/repos","events_url":"https://api.github.com/users/MrEager/events{/privacy}","received_events_url":"https://api.github.com/users/MrEager/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2021-10-04T01:38:38Z","label":{"name":"bug","color":"d93f0b"},"performed_via_github_app":null},{"id":5400837753,"node_id":"LE_lADOAOCAEs48eiekzwAAAAFB6j55","url":"https://api.github.com/repos/syncthing/syncthing/issues/events/5400837753","actor":{"login":"MrEager","id":91851422,"node_id":"U_kgDOBXmKng","avatar_url":"https://avatars.githubusercontent.com/u/91851422?v=4","gravatar_id":"","url":"https://api.github.com/users/MrEager","html_url":"https://github.com/MrEager","followers_url":"https://api.github.com/users/MrEager/followers","following_url":"https://api.github.com/users/MrEager/following{/other_user}","gists_url":"https://api.github.com/users/MrEager/gists{/gist_id}","starred_url":"https://api.github.com/users/MrEager/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/MrEager/subscriptions","organizations_url":"https://api.github.com/users/MrEager/orgs","repos_url":"https://api.github.com/users/MrEager/repos","events_url":"https://api.github.com/users/MrEager/events{/privacy}","received_events_url":"https://api.github.com/users/MrEager/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2021-10-04T01:38:38Z","label":{"name":"needs-triage","color":"ce23af"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/933187697","html_url":"https://github.com/syncthing/syncthing/issues/7988#issuecomment-933187697","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/7988","id":933187697,"node_id":"IC_kwDOAOCAEs43n1Bx","user":{"login":"tomasz1986","id":5626656,"node_id":"MDQ6VXNlcjU2MjY2NTY=","avatar_url":"https://avatars.githubusercontent.com/u/5626656?v=4","gravatar_id":"","url":"https://api.github.com/users/tomasz1986","html_url":"https://github.com/tomasz1986","followers_url":"https://api.github.com/users/tomasz1986/followers","following_url":"https://api.github.com/users/tomasz1986/following{/other_user}","gists_url":"https://api.github.com/users/tomasz1986/gists{/gist_id}","starred_url":"https://api.github.com/users/tomasz1986/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tomasz1986/subscriptions","organizations_url":"https://api.github.com/users/tomasz1986/orgs","repos_url":"https://api.github.com/users/tomasz1986/repos","events_url":"https://api.github.com/users/tomasz1986/events{/privacy}","received_events_url":"https://api.github.com/users/tomasz1986/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-10-04T06:34:55Z","updated_at":"2021-10-04T06:58:02Z","body":"You're 100% right. I've just tested this too.\r\n\r\n1. Trash Can changes the file's mtime and performs cleanup based on that.\r\n2. Staggered adds date to the filename and uses that for cleanup without changing the mtime.\r\n3. Simple should be same as Staggered, but it's actually same as Trash Can right now. Yet, it doesn't update the mtime, making the versioner base its decisions on the original mtime.\r\n\r\nIn my testing, I set the cleanup interval to `10` with the maximum age set to `30`. Next, I deleted a 6-month-old file, which was then send to `.stversions` on the other device. The file was wiped out from there almost immediately.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/933187697/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"tomasz1986","id":5626656,"node_id":"MDQ6VXNlcjU2MjY2NTY=","avatar_url":"https://avatars.githubusercontent.com/u/5626656?v=4","gravatar_id":"","url":"https://api.github.com/users/tomasz1986","html_url":"https://github.com/tomasz1986","followers_url":"https://api.github.com/users/tomasz1986/followers","following_url":"https://api.github.com/users/tomasz1986/following{/other_user}","gists_url":"https://api.github.com/users/tomasz1986/gists{/gist_id}","starred_url":"https://api.github.com/users/tomasz1986/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tomasz1986/subscriptions","organizations_url":"https://api.github.com/users/tomasz1986/orgs","repos_url":"https://api.github.com/users/tomasz1986/repos","events_url":"https://api.github.com/users/tomasz1986/events{/privacy}","received_events_url":"https://api.github.com/users/tomasz1986/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":5401899732,"node_id":"UNLE_lADOAOCAEs48eiekzwAAAAFB-nLU","url":"https://api.github.com/repos/syncthing/syncthing/issues/events/5401899732","actor":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"unlabeled","commit_id":null,"commit_url":null,"created_at":"2021-10-04T07:31:11Z","label":{"name":"needs-triage","color":"ce23af"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/964191866","html_url":"https://github.com/syncthing/syncthing/issues/7988#issuecomment-964191866","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/7988","id":964191866,"node_id":"IC_kwDOAOCAEs45eGZ6","user":{"login":"fbayerx","id":54805630,"node_id":"MDQ6VXNlcjU0ODA1NjMw","avatar_url":"https://avatars.githubusercontent.com/u/54805630?v=4","gravatar_id":"","url":"https://api.github.com/users/fbayerx","html_url":"https://github.com/fbayerx","followers_url":"https://api.github.com/users/fbayerx/followers","following_url":"https://api.github.com/users/fbayerx/following{/other_user}","gists_url":"https://api.github.com/users/fbayerx/gists{/gist_id}","starred_url":"https://api.github.com/users/fbayerx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fbayerx/subscriptions","organizations_url":"https://api.github.com/users/fbayerx/orgs","repos_url":"https://api.github.com/users/fbayerx/repos","events_url":"https://api.github.com/users/fbayerx/events{/privacy}","received_events_url":"https://api.github.com/users/fbayerx/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-09T14:16:57Z","updated_at":"2021-11-09T14:16:57Z","body":"> This could lead to a user deleting a file that was last modified greater than the \"Clean out after\" setting, and be unable to recover as the clean task removed it immediately on next run.\r\n\r\nThat is exactly what happend to me... Fortunately I was able to recover the files from an external source.\r\nI think this is a serious issue, because it is hard to detect while testing the versioning (it works with newer files) and could lead to preventable data loss.\r\n\r\nIs there a recommended workaround until the problem is fixed?","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/964191866/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"fbayerx","id":54805630,"node_id":"MDQ6VXNlcjU0ODA1NjMw","avatar_url":"https://avatars.githubusercontent.com/u/54805630?v=4","gravatar_id":"","url":"https://api.github.com/users/fbayerx","html_url":"https://github.com/fbayerx","followers_url":"https://api.github.com/users/fbayerx/followers","following_url":"https://api.github.com/users/fbayerx/following{/other_user}","gists_url":"https://api.github.com/users/fbayerx/gists{/gist_id}","starred_url":"https://api.github.com/users/fbayerx/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/fbayerx/subscriptions","organizations_url":"https://api.github.com/users/fbayerx/orgs","repos_url":"https://api.github.com/users/fbayerx/repos","events_url":"https://api.github.com/users/fbayerx/events{/privacy}","received_events_url":"https://api.github.com/users/fbayerx/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/964414401","html_url":"https://github.com/syncthing/syncthing/issues/7988#issuecomment-964414401","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/7988","id":964414401,"node_id":"IC_kwDOAOCAEs45e8vB","user":{"login":"tomasz1986","id":5626656,"node_id":"MDQ6VXNlcjU2MjY2NTY=","avatar_url":"https://avatars.githubusercontent.com/u/5626656?v=4","gravatar_id":"","url":"https://api.github.com/users/tomasz1986","html_url":"https://github.com/tomasz1986","followers_url":"https://api.github.com/users/tomasz1986/followers","following_url":"https://api.github.com/users/tomasz1986/following{/other_user}","gists_url":"https://api.github.com/users/tomasz1986/gists{/gist_id}","starred_url":"https://api.github.com/users/tomasz1986/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tomasz1986/subscriptions","organizations_url":"https://api.github.com/users/tomasz1986/orgs","repos_url":"https://api.github.com/users/tomasz1986/repos","events_url":"https://api.github.com/users/tomasz1986/events{/privacy}","received_events_url":"https://api.github.com/users/tomasz1986/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-11-09T18:21:12Z","updated_at":"2021-11-09T18:21:12Z","body":"> Is there a recommended workaround until the problem is fixed?\r\n\r\nThere is no workaround unless you re-implement the same logic using a custom script with external versioning. Otherwise, I'd suggest to switch to staggered for now (yes, it's not the same and can potentially use much more disk space, but it's definitely better than the unexpected early deletions).","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/964414401/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"tomasz1986","id":5626656,"node_id":"MDQ6VXNlcjU2MjY2NTY=","avatar_url":"https://avatars.githubusercontent.com/u/5626656?v=4","gravatar_id":"","url":"https://api.github.com/users/tomasz1986","html_url":"https://github.com/tomasz1986","followers_url":"https://api.github.com/users/tomasz1986/followers","following_url":"https://api.github.com/users/tomasz1986/following{/other_user}","gists_url":"https://api.github.com/users/tomasz1986/gists{/gist_id}","starred_url":"https://api.github.com/users/tomasz1986/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tomasz1986/subscriptions","organizations_url":"https://api.github.com/users/tomasz1986/orgs","repos_url":"https://api.github.com/users/tomasz1986/repos","events_url":"https://api.github.com/users/tomasz1986/events{/privacy}","received_events_url":"https://api.github.com/users/tomasz1986/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/1199921878","html_url":"https://github.com/syncthing/syncthing/issues/7988#issuecomment-1199921878","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/7988","id":1199921878,"node_id":"IC_kwDOAOCAEs5HhVrW","user":{"login":"tomasz1986","id":5626656,"node_id":"MDQ6VXNlcjU2MjY2NTY=","avatar_url":"https://avatars.githubusercontent.com/u/5626656?v=4","gravatar_id":"","url":"https://api.github.com/users/tomasz1986","html_url":"https://github.com/tomasz1986","followers_url":"https://api.github.com/users/tomasz1986/followers","following_url":"https://api.github.com/users/tomasz1986/following{/other_user}","gists_url":"https://api.github.com/users/tomasz1986/gists{/gist_id}","starred_url":"https://api.github.com/users/tomasz1986/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tomasz1986/subscriptions","organizations_url":"https://api.github.com/users/tomasz1986/orgs","repos_url":"https://api.github.com/users/tomasz1986/repos","events_url":"https://api.github.com/users/tomasz1986/events{/privacy}","received_events_url":"https://api.github.com/users/tomasz1986/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-07-29T20:26:33Z","updated_at":"2022-07-29T20:28:47Z","body":"Just for the record, the cleanup functionality hadn't originally been present in the Simple File Versioning at all. It was only added in https://github.com/syncthing/syncthing/pull/6884. However, it seems that the PR simply took out the Trashcan cleanup function, moved it to `lib/versioner/util.go`, and then re-used it as it was for Simple Versioning. This couldn't really work in practice, as the Trashcan cleanup is based on the fact that files have their mtime changed upon being moved to `.stversions`, and then they're cleaned up based on that changed mtime. In the case of Simple Versioning, there's no mtime change, so the Trashcan cleanup code is simply not suitable for it.\r\n\r\nI assume that one way to fix the issue could be to move the Trashcan cleanup function from `lib/versioner/util.go` back to `lib/versioner/trashcan.go`, and then move the Staggered cleanup function from `lib/versioner/staggered.go` to `lib/versioner/util.go` instead, so that it could be re-used for both Staggered and Simple Versioning. I think this should work fine, as both Simple and Staggered Versioning seem to use the same version filename scheme (i.e. adding dates to versioned file names instead of relying on mtime).","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/1199921878/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"tomasz1986","id":5626656,"node_id":"MDQ6VXNlcjU2MjY2NTY=","avatar_url":"https://avatars.githubusercontent.com/u/5626656?v=4","gravatar_id":"","url":"https://api.github.com/users/tomasz1986","html_url":"https://github.com/tomasz1986","followers_url":"https://api.github.com/users/tomasz1986/followers","following_url":"https://api.github.com/users/tomasz1986/following{/other_user}","gists_url":"https://api.github.com/users/tomasz1986/gists{/gist_id}","starred_url":"https://api.github.com/users/tomasz1986/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tomasz1986/subscriptions","organizations_url":"https://api.github.com/users/tomasz1986/orgs","repos_url":"https://api.github.com/users/tomasz1986/repos","events_url":"https://api.github.com/users/tomasz1986/events{/privacy}","received_events_url":"https://api.github.com/users/tomasz1986/received_events","type":"User","user_view_type":"public","site_admin":false}},{"actor":{"login":"er-pa","id":43787840,"node_id":"MDQ6VXNlcjQzNzg3ODQw","avatar_url":"https://avatars.githubusercontent.com/u/43787840?v=4","gravatar_id":"","url":"https://api.github.com/users/er-pa","html_url":"https://github.com/er-pa","followers_url":"https://api.github.com/users/er-pa/followers","following_url":"https://api.github.com/users/er-pa/following{/other_user}","gists_url":"https://api.github.com/users/er-pa/gists{/gist_id}","starred_url":"https://api.github.com/users/er-pa/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/er-pa/subscriptions","organizations_url":"https://api.github.com/users/er-pa/orgs","repos_url":"https://api.github.com/users/er-pa/repos","events_url":"https://api.github.com/users/er-pa/events{/privacy}","received_events_url":"https://api.github.com/users/er-pa/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-09-13T08:10:02Z","updated_at":"2022-09-13T08:10:02Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/8537","repository_url":"https://api.github.com/repos/syncthing/syncthing","labels_url":"https://api.github.com/repos/syncthing/syncthing/issues/8537/labels{/name}","comments_url":"https://api.github.com/repos/syncthing/syncthing/issues/8537/comments","events_url":"https://api.github.com/repos/syncthing/syncthing/issues/8537/events","html_url":"https://github.com/syncthing/syncthing/pull/8537","id":1371038513,"node_id":"PR_kwDOAOCAEs4-199e","number":8537,"title":"lib/versioner: Fix cleaning behaviour (fixes #7988)","user":{"login":"er-pa","id":43787840,"node_id":"MDQ6VXNlcjQzNzg3ODQw","avatar_url":"https://avatars.githubusercontent.com/u/43787840?v=4","gravatar_id":"","url":"https://api.github.com/users/er-pa","html_url":"https://github.com/er-pa","followers_url":"https://api.github.com/users/er-pa/followers","following_url":"https://api.github.com/users/er-pa/following{/other_user}","gists_url":"https://api.github.com/users/er-pa/gists{/gist_id}","starred_url":"https://api.github.com/users/er-pa/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/er-pa/subscriptions","organizations_url":"https://api.github.com/users/er-pa/orgs","repos_url":"https://api.github.com/users/er-pa/repos","events_url":"https://api.github.com/users/er-pa/events{/privacy}","received_events_url":"https://api.github.com/users/er-pa/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":628314330,"node_id":"MDU6TGFiZWw2MjgzMTQzMzA=","url":"https://api.github.com/repos/syncthing/syncthing/labels/frozen-due-to-age","name":"frozen-due-to-age","color":"eeeeee","default":false,"description":"Issues closed and untouched for a long time, together with being locked for discussion"}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/syncthing/syncthing/milestones/85","html_url":"https://github.com/syncthing/syncthing/milestone/85","labels_url":"https://api.github.com/repos/syncthing/syncthing/milestones/85/labels","id":8285880,"node_id":"MI_kwDOAOCAEs4Afm64","number":85,"title":"v1.22.0","description":"","creator":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":29,"state":"closed","created_at":"2022-08-10T06:42:22Z","updated_at":"2022-10-04T06:15:38Z","due_on":"2022-10-04T07:00:00Z","closed_at":"2022-10-04T06:15:38Z"},"comments":7,"created_at":"2022-09-13T08:10:02Z","updated_at":"2023-10-12T07:55:19Z","closed_at":"2022-09-13T17:20:05Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":14712850,"node_id":"MDEwOlJlcG9zaXRvcnkxNDcxMjg1MA==","name":"syncthing","full_name":"syncthing/syncthing","private":false,"owner":{"login":"syncthing","id":7628018,"node_id":"MDEyOk9yZ2FuaXphdGlvbjc2MjgwMTg=","avatar_url":"https://avatars.githubusercontent.com/u/7628018?v=4","gravatar_id":"","url":"https://api.github.com/users/syncthing","html_url":"https://github.com/syncthing","followers_url":"https://api.github.com/users/syncthing/followers","following_url":"https://api.github.com/users/syncthing/following{/other_user}","gists_url":"https://api.github.com/users/syncthing/gists{/gist_id}","starred_url":"https://api.github.com/users/syncthing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/syncthing/subscriptions","organizations_url":"https://api.github.com/users/syncthing/orgs","repos_url":"https://api.github.com/users/syncthing/repos","events_url":"https://api.github.com/users/syncthing/events{/privacy}","received_events_url":"https://api.github.com/users/syncthing/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/syncthing/syncthing","description":"Open Source Continuous File Synchronization","fork":false,"url":"https://api.github.com/repos/syncthing/syncthing","forks_url":"https://api.github.com/repos/syncthing/syncthing/forks","keys_url":"https://api.github.com/repos/syncthing/syncthing/keys{/key_id}","collaborators_url":"https://api.github.com/repos/syncthing/syncthing/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/syncthing/syncthing/teams","hooks_url":"https://api.github.com/repos/syncthing/syncthing/hooks","issue_events_url":"https://api.github.com/repos/syncthing/syncthing/issues/events{/number}","events_url":"https://api.github.com/repos/syncthing/syncthing/events","assignees_url":"https://api.github.com/repos/syncthing/syncthing/assignees{/user}","branches_url":"https://api.github.com/repos/syncthing/syncthing/branches{/branch}","tags_url":"https://api.github.com/repos/syncthing/syncthing/tags","blobs_url":"https://api.github.com/repos/syncthing/syncthing/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/syncthing/syncthing/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/syncthing/syncthing/git/refs{/sha}","trees_url":"https://api.github.com/repos/syncthing/syncthing/git/trees{/sha}","statuses_url":"https://api.github.com/repos/syncthing/syncthing/statuses/{sha}","languages_url":"https://api.github.com/repos/syncthing/syncthing/languages","stargazers_url":"https://api.github.com/repos/syncthing/syncthing/stargazers","contributors_url":"https://api.github.com/repos/syncthing/syncthing/contributors","subscribers_url":"https://api.github.com/repos/syncthing/syncthing/subscribers","subscription_url":"https://api.github.com/repos/syncthing/syncthing/subscription","commits_url":"https://api.github.com/repos/syncthing/syncthing/commits{/sha}","git_commits_url":"https://api.github.com/repos/syncthing/syncthing/git/commits{/sha}","comments_url":"https://api.github.com/repos/syncthing/syncthing/comments{/number}","issue_comment_url":"https://api.github.com/repos/syncthing/syncthing/issues/comments{/number}","contents_url":"https://api.github.com/repos/syncthing/syncthing/contents/{+path}","compare_url":"https://api.github.com/repos/syncthing/syncthing/compare/{base}...{head}","merges_url":"https://api.github.com/repos/syncthing/syncthing/merges","archive_url":"https://api.github.com/repos/syncthing/syncthing/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/syncthing/syncthing/downloads","issues_url":"https://api.github.com/repos/syncthing/syncthing/issues{/number}","pulls_url":"https://api.github.com/repos/syncthing/syncthing/pulls{/number}","milestones_url":"https://api.github.com/repos/syncthing/syncthing/milestones{/number}","notifications_url":"https://api.github.com/repos/syncthing/syncthing/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/syncthing/syncthing/labels{/name}","releases_url":"https://api.github.com/repos/syncthing/syncthing/releases{/id}","deployments_url":"https://api.github.com/repos/syncthing/syncthing/deployments","created_at":"2013-11-26T09:48:21Z","updated_at":"2025-11-09T22:23:05Z","pushed_at":"2025-11-04T08:20:50Z","git_url":"git://github.com/syncthing/syncthing.git","ssh_url":"git@github.com:syncthing/syncthing.git","clone_url":"https://github.com/syncthing/syncthing.git","svn_url":"https://github.com/syncthing/syncthing","homepage":"https://syncthing.net/","size":124346,"stargazers_count":77447,"watchers_count":77447,"language":"Go","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":4825,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":361,"license":{"key":"mpl-2.0","name":"Mozilla Public License 2.0","spdx_id":"MPL-2.0","url":"https://api.github.com/licenses/mpl-2.0","node_id":"MDc6TGljZW5zZTE0"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":true,"topics":["go","p2p","peer-to-peer","synchronization"],"visibility":"public","forks":4825,"open_issues":361,"watchers":77447,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/syncthing/syncthing/pulls/8537","html_url":"https://github.com/syncthing/syncthing/pull/8537","diff_url":"https://github.com/syncthing/syncthing/pull/8537.diff","patch_url":"https://github.com/syncthing/syncthing/pull/8537.patch","merged_at":"2022-09-13T17:20:05Z"},"body":"The [original Issue](https://github.com/syncthing/syncthing/issues/7988) described the root to this problem quite well in the comments.\r\n\r\nThe cleaning logic in util.go was used by Simple and Trashcan but only really suited Trashcan since it works based on mtimes which Simple does not set/change. \r\n\r\nThe cleaning logic in util.go was moved to trashcan.go. Staggered and Simple seemed to be able to benefit from the same base so util.go now has the base for those two with an added parameter which takes a function so it can still handle versioner-specific logic to decide which files to clean up. Simple now correctly cleans files based on the time-stamp in the file name in addition to cleaning files based on a maximum amount of versions to keep. The Archive function in Simple.go was also changed to get rid of duplicate code.\r\n\r\nAdditionally, the Trashcan test-case inside versioner_test.go ran tests for Trashcan as well as for Simple. This did not make much sense since, again, this works on changed mtimes inside the file information. The test-case was moved from versioner_test.go to trashcan_test.go to keep it clean and versioner-specific. And since Simple already had specific test-cases in simple_test.go I did not see a reason to create any more or different tests instead, the existing ones should suffice.\r\n\r\n### Testing\r\n\r\nI ran the versioner-specific test cases as well as ran some manual checks in a testenvironment for Simple's versioning specific (by f.e. manually adjusting the time-stamps in the file names). I did not manually test Staggered nor Trashcan since I did not alter the logic of those, I just moved it around a little. It all seems to work as it should now.","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/8537/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/syncthing/syncthing/issues/8537/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":7378659956,"node_id":"CE_lADOAOCAEs48eiekzwAAAAG3zWp0","url":"https://api.github.com/repos/syncthing/syncthing/issues/events/7378659956","actor":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"44bc209f4f6b76c8eeb74f6961611bcfb257d2a2","commit_url":"https://api.github.com/repos/syncthing/syncthing/commits/44bc209f4f6b76c8eeb74f6961611bcfb257d2a2","created_at":"2022-09-13T17:20:07Z","state_reason":null,"performed_via_github_app":null},{"id":7378672172,"node_id":"REFE_lADOAOCAEs48eiekzwAAAAG3zZos","url":"https://api.github.com/repos/syncthing/syncthing/issues/events/7378672172","actor":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"6e768a838775985a705ceb55d7b61c6470c160fe","commit_url":"https://api.github.com/repos/calmh/syncthing/commits/6e768a838775985a705ceb55d7b61c6470c160fe","created_at":"2022-09-13T17:21:55Z","performed_via_github_app":null},{"id":7383140747,"node_id":"MIE_lADOAOCAEs48eiekzwAAAAG4EcmL","url":"https://api.github.com/repos/syncthing/syncthing/issues/events/7383140747","actor":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"milestoned","commit_id":null,"commit_url":null,"created_at":"2022-09-14T07:51:40Z","milestone":{"title":"v1.22.0"},"performed_via_github_app":null},{"id":10628165623,"node_id":"LE_lADOAOCAEs48eiekzwAAAAJ5fO_3","url":"https://api.github.com/repos/syncthing/syncthing/issues/events/10628165623","actor":{"login":"st-review","id":16196517,"node_id":"MDQ6VXNlcjE2MTk2NTE3","avatar_url":"https://avatars.githubusercontent.com/u/16196517?v=4","gravatar_id":"","url":"https://api.github.com/users/st-review","html_url":"https://github.com/st-review","followers_url":"https://api.github.com/users/st-review/followers","following_url":"https://api.github.com/users/st-review/following{/other_user}","gists_url":"https://api.github.com/users/st-review/gists{/gist_id}","starred_url":"https://api.github.com/users/st-review/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/st-review/subscriptions","organizations_url":"https://api.github.com/users/st-review/orgs","repos_url":"https://api.github.com/users/st-review/repos","events_url":"https://api.github.com/users/st-review/events{/privacy}","received_events_url":"https://api.github.com/users/st-review/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2023-10-12T07:55:10Z","label":{"name":"frozen-due-to-age","color":"eeeeee"},"performed_via_github_app":null},{"id":10628165725,"node_id":"LOE_lADOAOCAEs48eiekzwAAAAJ5fPBd","url":"https://api.github.com/repos/syncthing/syncthing/issues/events/10628165725","actor":{"login":"syncthing","id":7628018,"node_id":"MDEyOk9yZ2FuaXphdGlvbjc2MjgwMTg=","avatar_url":"https://avatars.githubusercontent.com/u/7628018?v=4","gravatar_id":"","url":"https://api.github.com/users/syncthing","html_url":"https://github.com/syncthing","followers_url":"https://api.github.com/users/syncthing/followers","following_url":"https://api.github.com/users/syncthing/following{/other_user}","gists_url":"https://api.github.com/users/syncthing/gists{/gist_id}","starred_url":"https://api.github.com/users/syncthing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/syncthing/subscriptions","organizations_url":"https://api.github.com/users/syncthing/orgs","repos_url":"https://api.github.com/users/syncthing/repos","events_url":"https://api.github.com/users/syncthing/events{/privacy}","received_events_url":"https://api.github.com/users/syncthing/received_events","type":"Organization","user_view_type":"public","site_admin":false},"event":"locked","commit_id":null,"commit_url":null,"created_at":"2023-10-12T07:55:10Z","lock_reason":null,"performed_via_github_app":null}]