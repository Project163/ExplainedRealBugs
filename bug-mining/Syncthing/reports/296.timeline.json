[{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/117270475","html_url":"https://github.com/syncthing/syncthing/issues/2012#issuecomment-117270475","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/2012","id":117270475,"node_id":"MDEyOklzc3VlQ29tbWVudDExNzI3MDQ3NQ==","user":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-06-30T17:28:06Z","updated_at":"2015-06-30T17:28:06Z","body":"We filter out permissions bits not in 0777, so that causes this. It should probably be fixed - grepping for 0777 or 0666 in places is probably a good start. Need to make sure it's covered by IgnoredPermissions and Windows etc\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/117270475/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":344485749,"node_id":"MDEyOkxhYmVsZWRFdmVudDM0NDQ4NTc0OQ==","url":"https://api.github.com/repos/syncthing/syncthing/issues/events/344485749","actor":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2015-06-30T17:28:51Z","label":{"name":"bug","color":"fc2929"},"performed_via_github_app":null},{"id":344485750,"node_id":"MDEyOkxhYmVsZWRFdmVudDM0NDQ4NTc1MA==","url":"https://api.github.com/repos/syncthing/syncthing/issues/events/344485750","actor":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2015-06-30T17:28:51Z","label":{"name":"help-wanted","color":"5319e7"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/117616144","html_url":"https://github.com/syncthing/syncthing/issues/2012#issuecomment-117616144","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/2012","id":117616144,"node_id":"MDEyOklzc3VlQ29tbWVudDExNzYxNjE0NA==","user":{"login":"brgmnn","id":1955273,"node_id":"MDQ6VXNlcjE5NTUyNzM=","avatar_url":"https://avatars.githubusercontent.com/u/1955273?v=4","gravatar_id":"","url":"https://api.github.com/users/brgmnn","html_url":"https://github.com/brgmnn","followers_url":"https://api.github.com/users/brgmnn/followers","following_url":"https://api.github.com/users/brgmnn/following{/other_user}","gists_url":"https://api.github.com/users/brgmnn/gists{/gist_id}","starred_url":"https://api.github.com/users/brgmnn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brgmnn/subscriptions","organizations_url":"https://api.github.com/users/brgmnn/orgs","repos_url":"https://api.github.com/users/brgmnn/repos","events_url":"https://api.github.com/users/brgmnn/events{/privacy}","received_events_url":"https://api.github.com/users/brgmnn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-07-01T11:21:14Z","updated_at":"2015-07-01T11:21:14Z","body":"I've had a little play around with two nodes and as a temporary fix setting the \"Ignore Permissions\" flag on the machine receiving the files and writing the wrong permissions seems to work.\n\nI've looked through the code and tried a few things like removing the masking from rwfolder.go and walk.go however I don't think either case is right. It seems that when syncing permissions the permissions we really care about are user/group/other read/write/execute permissions and not necessarily the other permissions like setgid or setuid. In my case I would want setgid and setuid to be set to the default values on the system, however others might want them synced across machines. What is the correct behaviour here? As at the moment all those values are set off as opposed to their default values. \n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/117616144/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"brgmnn","id":1955273,"node_id":"MDQ6VXNlcjE5NTUyNzM=","avatar_url":"https://avatars.githubusercontent.com/u/1955273?v=4","gravatar_id":"","url":"https://api.github.com/users/brgmnn","html_url":"https://github.com/brgmnn","followers_url":"https://api.github.com/users/brgmnn/followers","following_url":"https://api.github.com/users/brgmnn/following{/other_user}","gists_url":"https://api.github.com/users/brgmnn/gists{/gist_id}","starred_url":"https://api.github.com/users/brgmnn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brgmnn/subscriptions","organizations_url":"https://api.github.com/users/brgmnn/orgs","repos_url":"https://api.github.com/users/brgmnn/repos","events_url":"https://api.github.com/users/brgmnn/events{/privacy}","received_events_url":"https://api.github.com/users/brgmnn/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/117618301","html_url":"https://github.com/syncthing/syncthing/issues/2012#issuecomment-117618301","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/2012","id":117618301,"node_id":"MDEyOklzc3VlQ29tbWVudDExNzYxODMwMQ==","user":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-07-01T11:26:24Z","updated_at":"2015-07-01T11:26:24Z","body":"> In my case I would want setgid and setuid to be set to the default values on the system, however others might want them synced across machines.\n\nI don't think there is a system default other than \"off\", is there? I think we should sync these bits when we can. However, since we don't sync user or group ownership we can't successfully sync an existing tree structure set up like this. It should however be fine to chgrp it afterwards, and if we do sync the setgid flags the group should continue to be correct.\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/117618301/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/117639613","html_url":"https://github.com/syncthing/syncthing/issues/2012#issuecomment-117639613","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/2012","id":117639613,"node_id":"MDEyOklzc3VlQ29tbWVudDExNzYzOTYxMw==","user":{"login":"brgmnn","id":1955273,"node_id":"MDQ6VXNlcjE5NTUyNzM=","avatar_url":"https://avatars.githubusercontent.com/u/1955273?v=4","gravatar_id":"","url":"https://api.github.com/users/brgmnn","html_url":"https://github.com/brgmnn","followers_url":"https://api.github.com/users/brgmnn/followers","following_url":"https://api.github.com/users/brgmnn/following{/other_user}","gists_url":"https://api.github.com/users/brgmnn/gists{/gist_id}","starred_url":"https://api.github.com/users/brgmnn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brgmnn/subscriptions","organizations_url":"https://api.github.com/users/brgmnn/orgs","repos_url":"https://api.github.com/users/brgmnn/repos","events_url":"https://api.github.com/users/brgmnn/events{/privacy}","received_events_url":"https://api.github.com/users/brgmnn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-07-01T12:24:23Z","updated_at":"2015-07-01T12:24:23Z","body":"It varies I think but on Linux if the `setgid` bit is set on a folder, then newly created subfolders of that folder inherit the `setgid` bit. So the default value for `setgid` is off unless the parent folder has `setgid` on.\n\nI think not syncing the user or group ownership is probably correct, as otherwise there's a whole host of issues opened up like running Syncthing under different users on each node or the same user with different groups.\n\nI'm not sure which other file mode bits should be synced apart from the permissions. There's quite a few[1] but some like `ModeDir` I don't think need to be explicitly synced. I would also add that in my use case I actually don't want `setgid` to be synced, I just want it to assume the correct default value when folders are created by Syncthing.\n\nI think the reason that I get the desired behaviour with \"Ignore Permissions\" on is that Syncthing no longer calls `os.Chmod` on files (in rwfolder.go). A reasonable fix might be to OR in the local files `setgid` bit with the file permissions received from the block protocol. That way the default value for `setgid` would be preserved.\n\nIf you opt to add in syncing of all filemode bits, it might be an idea to add an option to ignore those extra file mode bits, just like you can ignore permissions.\n\nI'll test adding in an OR of the local files `setgid` bit and see if it fixes things.\n\n[1] https://golang.org/src/os/types.go\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/117639613/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"brgmnn","id":1955273,"node_id":"MDQ6VXNlcjE5NTUyNzM=","avatar_url":"https://avatars.githubusercontent.com/u/1955273?v=4","gravatar_id":"","url":"https://api.github.com/users/brgmnn","html_url":"https://github.com/brgmnn","followers_url":"https://api.github.com/users/brgmnn/followers","following_url":"https://api.github.com/users/brgmnn/following{/other_user}","gists_url":"https://api.github.com/users/brgmnn/gists{/gist_id}","starred_url":"https://api.github.com/users/brgmnn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brgmnn/subscriptions","organizations_url":"https://api.github.com/users/brgmnn/orgs","repos_url":"https://api.github.com/users/brgmnn/repos","events_url":"https://api.github.com/users/brgmnn/events{/privacy}","received_events_url":"https://api.github.com/users/brgmnn/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/117776531","html_url":"https://github.com/syncthing/syncthing/issues/2012#issuecomment-117776531","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/2012","id":117776531,"node_id":"MDEyOklzc3VlQ29tbWVudDExNzc3NjUzMQ==","user":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-07-01T18:11:50Z","updated_at":"2015-07-01T18:16:52Z","body":"Yeah... As I see it,\n\n```\nModeDir  // \"read only\", in that it's set on directories and otherwise not\nModeAppend  // requires chattr on Linux, no idea about others, anyway probably not compatibly with us\nModeExclusive // ??? no idea\nModeTemporary  // ??? no idea\nModeSymlink  // as ModeDir, already handled\nModeDevice  // we don't sync device nodes\nModeNamedPipe  // likewise\nModeSocket  // likewise\nModeSetuid  // should be inluded in the synced set\nModeSetgid  // should be inluded in the synced set\nModeCharDevice  // don't sync devices\nModeSticky  // should be inluded in the synced set\n```\n\nso thats ModeSetuid, ModeSetgid and ModeSticky to handle. We should probably declare a constant\n\n```\npermBits := os.ModePerm | os.ModeSetuid | os.ModeSetgid | os.ModeSticky\n```\n\nand use that to mask out the bits we want. Also need to check that these bits are inside the first twelve bits (https://github.com/syncthing/specs/blob/master/BEPv1.md#fields-1) or they need to be remapped. \n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/117776531/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/118079431","html_url":"https://github.com/syncthing/syncthing/issues/2012#issuecomment-118079431","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/2012","id":118079431,"node_id":"MDEyOklzc3VlQ29tbWVudDExODA3OTQzMQ==","user":{"login":"brgmnn","id":1955273,"node_id":"MDQ6VXNlcjE5NTUyNzM=","avatar_url":"https://avatars.githubusercontent.com/u/1955273?v=4","gravatar_id":"","url":"https://api.github.com/users/brgmnn","html_url":"https://github.com/brgmnn","followers_url":"https://api.github.com/users/brgmnn/followers","following_url":"https://api.github.com/users/brgmnn/following{/other_user}","gists_url":"https://api.github.com/users/brgmnn/gists{/gist_id}","starred_url":"https://api.github.com/users/brgmnn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brgmnn/subscriptions","organizations_url":"https://api.github.com/users/brgmnn/orgs","repos_url":"https://api.github.com/users/brgmnn/repos","events_url":"https://api.github.com/users/brgmnn/events{/privacy}","received_events_url":"https://api.github.com/users/brgmnn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-07-02T16:05:28Z","updated_at":"2015-07-02T16:05:28Z","body":"I agree that those are the only three file mode bits that it makes sense to sync.\n\nI still think that the \"Ignore Permissions\" flag should be effectively three choices now: sync all permissions, sync only user permissions (no setuid/setgid/sticky) and ignore all permissions. Alternatively only expose the \"don't sync setuid/gid/sticky\" as an advanced option. What are your thoughts?\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/118079431/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"brgmnn","id":1955273,"node_id":"MDQ6VXNlcjE5NTUyNzM=","avatar_url":"https://avatars.githubusercontent.com/u/1955273?v=4","gravatar_id":"","url":"https://api.github.com/users/brgmnn","html_url":"https://github.com/brgmnn","followers_url":"https://api.github.com/users/brgmnn/followers","following_url":"https://api.github.com/users/brgmnn/following{/other_user}","gists_url":"https://api.github.com/users/brgmnn/gists{/gist_id}","starred_url":"https://api.github.com/users/brgmnn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brgmnn/subscriptions","organizations_url":"https://api.github.com/users/brgmnn/orgs","repos_url":"https://api.github.com/users/brgmnn/repos","events_url":"https://api.github.com/users/brgmnn/events{/privacy}","received_events_url":"https://api.github.com/users/brgmnn/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/118165853","html_url":"https://github.com/syncthing/syncthing/issues/2012#issuecomment-118165853","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/2012","id":118165853,"node_id":"MDEyOklzc3VlQ29tbWVudDExODE2NTg1Mw==","user":{"login":"jorangreef","id":413206,"node_id":"MDQ6VXNlcjQxMzIwNg==","avatar_url":"https://avatars.githubusercontent.com/u/413206?v=4","gravatar_id":"","url":"https://api.github.com/users/jorangreef","html_url":"https://github.com/jorangreef","followers_url":"https://api.github.com/users/jorangreef/followers","following_url":"https://api.github.com/users/jorangreef/following{/other_user}","gists_url":"https://api.github.com/users/jorangreef/gists{/gist_id}","starred_url":"https://api.github.com/users/jorangreef/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jorangreef/subscriptions","organizations_url":"https://api.github.com/users/jorangreef/orgs","repos_url":"https://api.github.com/users/jorangreef/repos","events_url":"https://api.github.com/users/jorangreef/events{/privacy}","received_events_url":"https://api.github.com/users/jorangreef/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-07-02T20:55:27Z","updated_at":"2015-07-02T20:55:27Z","body":"I noticed that Unison: `does not synchronize the setuid and setgid bits, for security.`\n\nhttp://www.cis.upenn.edu/~bcpierce/unison/download/releases/stable/unison-manual.html#caveats\n\nNo more explanation is given. What security implications would syncing setuid and setgid have?\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/118165853/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"jorangreef","id":413206,"node_id":"MDQ6VXNlcjQxMzIwNg==","avatar_url":"https://avatars.githubusercontent.com/u/413206?v=4","gravatar_id":"","url":"https://api.github.com/users/jorangreef","html_url":"https://github.com/jorangreef","followers_url":"https://api.github.com/users/jorangreef/followers","following_url":"https://api.github.com/users/jorangreef/following{/other_user}","gists_url":"https://api.github.com/users/jorangreef/gists{/gist_id}","starred_url":"https://api.github.com/users/jorangreef/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jorangreef/subscriptions","organizations_url":"https://api.github.com/users/jorangreef/orgs","repos_url":"https://api.github.com/users/jorangreef/repos","events_url":"https://api.github.com/users/jorangreef/events{/privacy}","received_events_url":"https://api.github.com/users/jorangreef/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/118171192","html_url":"https://github.com/syncthing/syncthing/issues/2012#issuecomment-118171192","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/2012","id":118171192,"node_id":"MDEyOklzc3VlQ29tbWVudDExODE3MTE5Mg==","user":{"login":"AudriusButkevicius","id":1144861,"node_id":"MDQ6VXNlcjExNDQ4NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1144861?v=4","gravatar_id":"","url":"https://api.github.com/users/AudriusButkevicius","html_url":"https://github.com/AudriusButkevicius","followers_url":"https://api.github.com/users/AudriusButkevicius/followers","following_url":"https://api.github.com/users/AudriusButkevicius/following{/other_user}","gists_url":"https://api.github.com/users/AudriusButkevicius/gists{/gist_id}","starred_url":"https://api.github.com/users/AudriusButkevicius/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AudriusButkevicius/subscriptions","organizations_url":"https://api.github.com/users/AudriusButkevicius/orgs","repos_url":"https://api.github.com/users/AudriusButkevicius/repos","events_url":"https://api.github.com/users/AudriusButkevicius/events{/privacy}","received_events_url":"https://api.github.com/users/AudriusButkevicius/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-07-02T21:17:39Z","updated_at":"2015-07-02T21:17:39Z","body":"Bob the evil guy has a non-root account on machine A\nBob shares a folder with machine A which he can access from a non-privileged account.\nBecause A is syncing setuid setgid bits, it needs to run Syncthing as root.\nBob places a malicious binary with locally setuid/setgid bit set in the share which gets synced, this way getting a malicious binary on machine A, which he now can run under root privileges with a non-privileged account.\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/118171192/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"AudriusButkevicius","id":1144861,"node_id":"MDQ6VXNlcjExNDQ4NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1144861?v=4","gravatar_id":"","url":"https://api.github.com/users/AudriusButkevicius","html_url":"https://github.com/AudriusButkevicius","followers_url":"https://api.github.com/users/AudriusButkevicius/followers","following_url":"https://api.github.com/users/AudriusButkevicius/following{/other_user}","gists_url":"https://api.github.com/users/AudriusButkevicius/gists{/gist_id}","starred_url":"https://api.github.com/users/AudriusButkevicius/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AudriusButkevicius/subscriptions","organizations_url":"https://api.github.com/users/AudriusButkevicius/orgs","repos_url":"https://api.github.com/users/AudriusButkevicius/repos","events_url":"https://api.github.com/users/AudriusButkevicius/events{/privacy}","received_events_url":"https://api.github.com/users/AudriusButkevicius/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/118185966","html_url":"https://github.com/syncthing/syncthing/issues/2012#issuecomment-118185966","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/2012","id":118185966,"node_id":"MDEyOklzc3VlQ29tbWVudDExODE4NTk2Ng==","user":{"login":"brgmnn","id":1955273,"node_id":"MDQ6VXNlcjE5NTUyNzM=","avatar_url":"https://avatars.githubusercontent.com/u/1955273?v=4","gravatar_id":"","url":"https://api.github.com/users/brgmnn","html_url":"https://github.com/brgmnn","followers_url":"https://api.github.com/users/brgmnn/followers","following_url":"https://api.github.com/users/brgmnn/following{/other_user}","gists_url":"https://api.github.com/users/brgmnn/gists{/gist_id}","starred_url":"https://api.github.com/users/brgmnn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brgmnn/subscriptions","organizations_url":"https://api.github.com/users/brgmnn/orgs","repos_url":"https://api.github.com/users/brgmnn/repos","events_url":"https://api.github.com/users/brgmnn/events{/privacy}","received_events_url":"https://api.github.com/users/brgmnn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-07-02T22:38:39Z","updated_at":"2015-07-02T22:38:39Z","body":"Hmm that's a fair enough security issue but surely running Syncthing as root is already not safe? Also you don't need to be root to set setuid, setgid or the sticky bit (on Debian linux anyway) so you could sync them with Syncthing running in a non-root account. You're right though it still opens the possibility of a user executing code as another user.\n\nThat said, I'm honestly struggling to think of a good use-case for syncing these file modes. They're just rarely used and for me anyway I use them for specific setups on a machine with multiple users on that machine.\n\nSeeing as Unison don't sync them, perhaps it's best Syncthing also doesn't sync them. Though the issue of Syncthing forcing them all off as opposed to their default value is still a bug that I would like to fix.\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/118185966/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"brgmnn","id":1955273,"node_id":"MDQ6VXNlcjE5NTUyNzM=","avatar_url":"https://avatars.githubusercontent.com/u/1955273?v=4","gravatar_id":"","url":"https://api.github.com/users/brgmnn","html_url":"https://github.com/brgmnn","followers_url":"https://api.github.com/users/brgmnn/followers","following_url":"https://api.github.com/users/brgmnn/following{/other_user}","gists_url":"https://api.github.com/users/brgmnn/gists{/gist_id}","starred_url":"https://api.github.com/users/brgmnn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brgmnn/subscriptions","organizations_url":"https://api.github.com/users/brgmnn/orgs","repos_url":"https://api.github.com/users/brgmnn/repos","events_url":"https://api.github.com/users/brgmnn/events{/privacy}","received_events_url":"https://api.github.com/users/brgmnn/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/118226537","html_url":"https://github.com/syncthing/syncthing/issues/2012#issuecomment-118226537","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/2012","id":118226537,"node_id":"MDEyOklzc3VlQ29tbWVudDExODIyNjUzNw==","user":{"login":"dcarosone","id":11495017,"node_id":"MDQ6VXNlcjExNDk1MDE3","avatar_url":"https://avatars.githubusercontent.com/u/11495017?v=4","gravatar_id":"","url":"https://api.github.com/users/dcarosone","html_url":"https://github.com/dcarosone","followers_url":"https://api.github.com/users/dcarosone/followers","following_url":"https://api.github.com/users/dcarosone/following{/other_user}","gists_url":"https://api.github.com/users/dcarosone/gists{/gist_id}","starred_url":"https://api.github.com/users/dcarosone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dcarosone/subscriptions","organizations_url":"https://api.github.com/users/dcarosone/orgs","repos_url":"https://api.github.com/users/dcarosone/repos","events_url":"https://api.github.com/users/dcarosone/events{/privacy}","received_events_url":"https://api.github.com/users/dcarosone/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-07-03T04:10:40Z","updated_at":"2015-07-03T04:10:40Z","body":"The issue here is _not_ to sync the set-id bits. The issue is to\n_avoid removing them_ (with chmod) after they're added automatically\nby the filesystem on creation of new directories, because the\ncontaining directory has setgid.\n\nIn the use case in question, it's perfectly fine to have setgid dirs\non host A, and not on host B:\n\n**Host A** will be a shared fileserver, where many users create files\nunder their own UIDs. On A:\n- relevant users are members of a unix group for access to the data\n- the directories will be group-writable, so users can add files\n- directories are setgid, so that new files added will also have that\n  group set\n- new directories made will also be made with setgid, so that the\n  behaviour propagates.\n\nThese semantics do vary by unix variant (and filesystem type), but are\ngenerally a SYSV-ism that has been broadly adopted.\n\n**Host B** will be the personal workstation/laptop of one of said\nusers, who runs syncthing. Files there will all be owned by that user.\n\nThe problem here is that, when a new directory gets created on B and\nsent to A via syncthing, syncthing on A will try to chmod it, and\nclobber the setgid bit.  Then other directories and files created\ninside there won't have the right group membership. They will have the\ndefault group of the user running syncthing, and other users won't be\nable to work with those files or add more.\n\nSo perhaps syncthing just needs to include setgid in the list of\nallowed permissions when masking _for directories only_.  We don't\nwant to be creating setgid (or setuid) files.\n\nHowever, all that said, the workaround is simply to set\nIgnorePermissions on Host A, because in addition to the above, there\nis _another_ problem. When files on A are not owned by the user\nrunning syncthing, syncthing can't change their modes or mtimes, and\nwill complain about 'folder not making progress'. Setting\nIgnorePermissions avoids both problems.\n\nWhen I first saw this issue, I wondered why I hadn't seen it, since\nI'm user B in this scenario, but I already had IgnorePermissions set. \n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/118226537/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"dcarosone","id":11495017,"node_id":"MDQ6VXNlcjExNDk1MDE3","avatar_url":"https://avatars.githubusercontent.com/u/11495017?v=4","gravatar_id":"","url":"https://api.github.com/users/dcarosone","html_url":"https://github.com/dcarosone","followers_url":"https://api.github.com/users/dcarosone/followers","following_url":"https://api.github.com/users/dcarosone/following{/other_user}","gists_url":"https://api.github.com/users/dcarosone/gists{/gist_id}","starred_url":"https://api.github.com/users/dcarosone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dcarosone/subscriptions","organizations_url":"https://api.github.com/users/dcarosone/orgs","repos_url":"https://api.github.com/users/dcarosone/repos","events_url":"https://api.github.com/users/dcarosone/events{/privacy}","received_events_url":"https://api.github.com/users/dcarosone/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/118278863","html_url":"https://github.com/syncthing/syncthing/issues/2012#issuecomment-118278863","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/2012","id":118278863,"node_id":"MDEyOklzc3VlQ29tbWVudDExODI3ODg2Mw==","user":{"login":"brgmnn","id":1955273,"node_id":"MDQ6VXNlcjE5NTUyNzM=","avatar_url":"https://avatars.githubusercontent.com/u/1955273?v=4","gravatar_id":"","url":"https://api.github.com/users/brgmnn","html_url":"https://github.com/brgmnn","followers_url":"https://api.github.com/users/brgmnn/followers","following_url":"https://api.github.com/users/brgmnn/following{/other_user}","gists_url":"https://api.github.com/users/brgmnn/gists{/gist_id}","starred_url":"https://api.github.com/users/brgmnn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brgmnn/subscriptions","organizations_url":"https://api.github.com/users/brgmnn/orgs","repos_url":"https://api.github.com/users/brgmnn/repos","events_url":"https://api.github.com/users/brgmnn/events{/privacy}","received_events_url":"https://api.github.com/users/brgmnn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-07-03T08:45:53Z","updated_at":"2015-07-03T08:45:53Z","body":"Yes thank you @dcarosone you've perfectly described the problem and my usecase, better than I could have! I also currently work around this issue by marking the folder on my server with \"Ignore Permissions\".\n\nThe place where this will be a problem is when syncing a folder where you do want to preserve the permissions. An example might be a bash scripts directory where the files are marked executable. Now a user will have to manually update the files as executable again on the server **Host B**.\n\nI think the fix is, when syncing a folder with permissions on, don't mask out the setgid bit on directories locally. I'm trying to think if there's a good reason to do the same for sticky or setuid. Neither of them are inherited? So I don't think there will be a problem exactly like this one.\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/118278863/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"brgmnn","id":1955273,"node_id":"MDQ6VXNlcjE5NTUyNzM=","avatar_url":"https://avatars.githubusercontent.com/u/1955273?v=4","gravatar_id":"","url":"https://api.github.com/users/brgmnn","html_url":"https://github.com/brgmnn","followers_url":"https://api.github.com/users/brgmnn/followers","following_url":"https://api.github.com/users/brgmnn/following{/other_user}","gists_url":"https://api.github.com/users/brgmnn/gists{/gist_id}","starred_url":"https://api.github.com/users/brgmnn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brgmnn/subscriptions","organizations_url":"https://api.github.com/users/brgmnn/orgs","repos_url":"https://api.github.com/users/brgmnn/repos","events_url":"https://api.github.com/users/brgmnn/events{/privacy}","received_events_url":"https://api.github.com/users/brgmnn/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":347205866,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MzQ3MjA1ODY2","url":"https://api.github.com/repos/syncthing/syncthing/issues/events/347205866","actor":{"login":"dcarosone","id":11495017,"node_id":"MDQ6VXNlcjExNDk1MDE3","avatar_url":"https://avatars.githubusercontent.com/u/11495017?v=4","gravatar_id":"","url":"https://api.github.com/users/dcarosone","html_url":"https://github.com/dcarosone","followers_url":"https://api.github.com/users/dcarosone/followers","following_url":"https://api.github.com/users/dcarosone/following{/other_user}","gists_url":"https://api.github.com/users/dcarosone/gists{/gist_id}","starred_url":"https://api.github.com/users/dcarosone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dcarosone/subscriptions","organizations_url":"https://api.github.com/users/dcarosone/orgs","repos_url":"https://api.github.com/users/dcarosone/repos","events_url":"https://api.github.com/users/dcarosone/events{/privacy}","received_events_url":"https://api.github.com/users/dcarosone/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2015-07-03T08:45:53Z","performed_via_github_app":null},{"id":347205867,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDM0NzIwNTg2Nw==","url":"https://api.github.com/repos/syncthing/syncthing/issues/events/347205867","actor":{"login":"dcarosone","id":11495017,"node_id":"MDQ6VXNlcjExNDk1MDE3","avatar_url":"https://avatars.githubusercontent.com/u/11495017?v=4","gravatar_id":"","url":"https://api.github.com/users/dcarosone","html_url":"https://github.com/dcarosone","followers_url":"https://api.github.com/users/dcarosone/followers","following_url":"https://api.github.com/users/dcarosone/following{/other_user}","gists_url":"https://api.github.com/users/dcarosone/gists{/gist_id}","starred_url":"https://api.github.com/users/dcarosone/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dcarosone/subscriptions","organizations_url":"https://api.github.com/users/dcarosone/orgs","repos_url":"https://api.github.com/users/dcarosone/repos","events_url":"https://api.github.com/users/dcarosone/events{/privacy}","received_events_url":"https://api.github.com/users/dcarosone/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2015-07-03T08:45:53Z","performed_via_github_app":null},{"id":347240391,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDM0NzI0MDM5MQ==","url":"https://api.github.com/repos/syncthing/syncthing/issues/events/347240391","actor":{"login":"brgmnn","id":1955273,"node_id":"MDQ6VXNlcjE5NTUyNzM=","avatar_url":"https://avatars.githubusercontent.com/u/1955273?v=4","gravatar_id":"","url":"https://api.github.com/users/brgmnn","html_url":"https://github.com/brgmnn","followers_url":"https://api.github.com/users/brgmnn/followers","following_url":"https://api.github.com/users/brgmnn/following{/other_user}","gists_url":"https://api.github.com/users/brgmnn/gists{/gist_id}","starred_url":"https://api.github.com/users/brgmnn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brgmnn/subscriptions","organizations_url":"https://api.github.com/users/brgmnn/orgs","repos_url":"https://api.github.com/users/brgmnn/repos","events_url":"https://api.github.com/users/brgmnn/events{/privacy}","received_events_url":"https://api.github.com/users/brgmnn/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"37d0ee75446a28bd32ea920d252dc9ca1aeb51e3","commit_url":"https://api.github.com/repos/brgmnn/syncthing/commits/37d0ee75446a28bd32ea920d252dc9ca1aeb51e3","created_at":"2015-07-03T09:28:20Z","performed_via_github_app":null},{"actor":{"login":"brgmnn","id":1955273,"node_id":"MDQ6VXNlcjE5NTUyNzM=","avatar_url":"https://avatars.githubusercontent.com/u/1955273?v=4","gravatar_id":"","url":"https://api.github.com/users/brgmnn","html_url":"https://github.com/brgmnn","followers_url":"https://api.github.com/users/brgmnn/followers","following_url":"https://api.github.com/users/brgmnn/following{/other_user}","gists_url":"https://api.github.com/users/brgmnn/gists{/gist_id}","starred_url":"https://api.github.com/users/brgmnn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brgmnn/subscriptions","organizations_url":"https://api.github.com/users/brgmnn/orgs","repos_url":"https://api.github.com/users/brgmnn/repos","events_url":"https://api.github.com/users/brgmnn/events{/privacy}","received_events_url":"https://api.github.com/users/brgmnn/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-07-03T09:37:15Z","updated_at":"2015-07-03T09:37:15Z","source":{"type":"issue","issue":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/2022","repository_url":"https://api.github.com/repos/syncthing/syncthing","labels_url":"https://api.github.com/repos/syncthing/syncthing/issues/2022/labels{/name}","comments_url":"https://api.github.com/repos/syncthing/syncthing/issues/2022/comments","events_url":"https://api.github.com/repos/syncthing/syncthing/issues/2022/events","html_url":"https://github.com/syncthing/syncthing/pull/2022","id":92835975,"node_id":"MDExOlB1bGxSZXF1ZXN0MzkxNjAyMTA=","number":2022,"title":"Preserve setgid bit on local directores (fixes #2012)","user":{"login":"brgmnn","id":1955273,"node_id":"MDQ6VXNlcjE5NTUyNzM=","avatar_url":"https://avatars.githubusercontent.com/u/1955273?v=4","gravatar_id":"","url":"https://api.github.com/users/brgmnn","html_url":"https://github.com/brgmnn","followers_url":"https://api.github.com/users/brgmnn/followers","following_url":"https://api.github.com/users/brgmnn/following{/other_user}","gists_url":"https://api.github.com/users/brgmnn/gists{/gist_id}","starred_url":"https://api.github.com/users/brgmnn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brgmnn/subscriptions","organizations_url":"https://api.github.com/users/brgmnn/orgs","repos_url":"https://api.github.com/users/brgmnn/repos","events_url":"https://api.github.com/users/brgmnn/events{/privacy}","received_events_url":"https://api.github.com/users/brgmnn/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":628314330,"node_id":"MDU6TGFiZWw2MjgzMTQzMzA=","url":"https://api.github.com/repos/syncthing/syncthing/labels/frozen-due-to-age","name":"frozen-due-to-age","color":"eeeeee","default":false,"description":"Issues closed and untouched for a long time, together with being locked for discussion"}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":13,"created_at":"2015-07-03T09:37:15Z","updated_at":"2017-06-16T21:06:19Z","closed_at":"2015-07-04T17:37:21Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"draft":false,"repository":{"id":14712850,"node_id":"MDEwOlJlcG9zaXRvcnkxNDcxMjg1MA==","name":"syncthing","full_name":"syncthing/syncthing","private":false,"owner":{"login":"syncthing","id":7628018,"node_id":"MDEyOk9yZ2FuaXphdGlvbjc2MjgwMTg=","avatar_url":"https://avatars.githubusercontent.com/u/7628018?v=4","gravatar_id":"","url":"https://api.github.com/users/syncthing","html_url":"https://github.com/syncthing","followers_url":"https://api.github.com/users/syncthing/followers","following_url":"https://api.github.com/users/syncthing/following{/other_user}","gists_url":"https://api.github.com/users/syncthing/gists{/gist_id}","starred_url":"https://api.github.com/users/syncthing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/syncthing/subscriptions","organizations_url":"https://api.github.com/users/syncthing/orgs","repos_url":"https://api.github.com/users/syncthing/repos","events_url":"https://api.github.com/users/syncthing/events{/privacy}","received_events_url":"https://api.github.com/users/syncthing/received_events","type":"Organization","user_view_type":"public","site_admin":false},"html_url":"https://github.com/syncthing/syncthing","description":"Open Source Continuous File Synchronization","fork":false,"url":"https://api.github.com/repos/syncthing/syncthing","forks_url":"https://api.github.com/repos/syncthing/syncthing/forks","keys_url":"https://api.github.com/repos/syncthing/syncthing/keys{/key_id}","collaborators_url":"https://api.github.com/repos/syncthing/syncthing/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/syncthing/syncthing/teams","hooks_url":"https://api.github.com/repos/syncthing/syncthing/hooks","issue_events_url":"https://api.github.com/repos/syncthing/syncthing/issues/events{/number}","events_url":"https://api.github.com/repos/syncthing/syncthing/events","assignees_url":"https://api.github.com/repos/syncthing/syncthing/assignees{/user}","branches_url":"https://api.github.com/repos/syncthing/syncthing/branches{/branch}","tags_url":"https://api.github.com/repos/syncthing/syncthing/tags","blobs_url":"https://api.github.com/repos/syncthing/syncthing/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/syncthing/syncthing/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/syncthing/syncthing/git/refs{/sha}","trees_url":"https://api.github.com/repos/syncthing/syncthing/git/trees{/sha}","statuses_url":"https://api.github.com/repos/syncthing/syncthing/statuses/{sha}","languages_url":"https://api.github.com/repos/syncthing/syncthing/languages","stargazers_url":"https://api.github.com/repos/syncthing/syncthing/stargazers","contributors_url":"https://api.github.com/repos/syncthing/syncthing/contributors","subscribers_url":"https://api.github.com/repos/syncthing/syncthing/subscribers","subscription_url":"https://api.github.com/repos/syncthing/syncthing/subscription","commits_url":"https://api.github.com/repos/syncthing/syncthing/commits{/sha}","git_commits_url":"https://api.github.com/repos/syncthing/syncthing/git/commits{/sha}","comments_url":"https://api.github.com/repos/syncthing/syncthing/comments{/number}","issue_comment_url":"https://api.github.com/repos/syncthing/syncthing/issues/comments{/number}","contents_url":"https://api.github.com/repos/syncthing/syncthing/contents/{+path}","compare_url":"https://api.github.com/repos/syncthing/syncthing/compare/{base}...{head}","merges_url":"https://api.github.com/repos/syncthing/syncthing/merges","archive_url":"https://api.github.com/repos/syncthing/syncthing/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/syncthing/syncthing/downloads","issues_url":"https://api.github.com/repos/syncthing/syncthing/issues{/number}","pulls_url":"https://api.github.com/repos/syncthing/syncthing/pulls{/number}","milestones_url":"https://api.github.com/repos/syncthing/syncthing/milestones{/number}","notifications_url":"https://api.github.com/repos/syncthing/syncthing/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/syncthing/syncthing/labels{/name}","releases_url":"https://api.github.com/repos/syncthing/syncthing/releases{/id}","deployments_url":"https://api.github.com/repos/syncthing/syncthing/deployments","created_at":"2013-11-26T09:48:21Z","updated_at":"2025-11-09T19:28:36Z","pushed_at":"2025-11-04T08:20:50Z","git_url":"git://github.com/syncthing/syncthing.git","ssh_url":"git@github.com:syncthing/syncthing.git","clone_url":"https://github.com/syncthing/syncthing.git","svn_url":"https://github.com/syncthing/syncthing","homepage":"https://syncthing.net/","size":124346,"stargazers_count":77445,"watchers_count":77445,"language":"Go","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"has_discussions":false,"forks_count":4825,"mirror_url":null,"archived":false,"disabled":false,"open_issues_count":361,"license":{"key":"mpl-2.0","name":"Mozilla Public License 2.0","spdx_id":"MPL-2.0","url":"https://api.github.com/licenses/mpl-2.0","node_id":"MDc6TGljZW5zZTE0"},"allow_forking":true,"is_template":false,"web_commit_signoff_required":true,"topics":["go","p2p","peer-to-peer","synchronization"],"visibility":"public","forks":4825,"open_issues":361,"watchers":77445,"default_branch":"main","permissions":{"admin":false,"maintain":false,"push":false,"triage":false,"pull":true}},"pull_request":{"url":"https://api.github.com/repos/syncthing/syncthing/pulls/2022","html_url":"https://github.com/syncthing/syncthing/pull/2022","diff_url":"https://github.com/syncthing/syncthing/pull/2022.diff","patch_url":"https://github.com/syncthing/syncthing/pull/2022.patch","merged_at":"2015-07-04T17:37:21Z"},"body":"This is a tentative fix for #2012, I've updated `handleDir()` in \"rwfolder.go\" to get the current value of the `setgid` bit of a directory and add that to the permissions used in `os.chmod`. I've tested this locally on my machine (running CentOS 6.5) between two Syncthing instances and it works, the `setgid` bit is now preserved locally on a machine.\n\nI'm not sure if I've correctly handled the error of `Lstat` when creating a new directory, also I haven't tested this on non-linux.\n\nI think this is probably the best way of resolving #2012, thoughts?\n","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/2022/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/syncthing/syncthing/issues/2022/timeline","performed_via_github_app":null,"state_reason":null}},"event":"cross-referenced"},{"id":347361904,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDM0NzM2MTkwNA==","url":"https://api.github.com/repos/syncthing/syncthing/issues/events/347361904","actor":{"login":"brgmnn","id":1955273,"node_id":"MDQ6VXNlcjE5NTUyNzM=","avatar_url":"https://avatars.githubusercontent.com/u/1955273?v=4","gravatar_id":"","url":"https://api.github.com/users/brgmnn","html_url":"https://github.com/brgmnn","followers_url":"https://api.github.com/users/brgmnn/followers","following_url":"https://api.github.com/users/brgmnn/following{/other_user}","gists_url":"https://api.github.com/users/brgmnn/gists{/gist_id}","starred_url":"https://api.github.com/users/brgmnn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brgmnn/subscriptions","organizations_url":"https://api.github.com/users/brgmnn/orgs","repos_url":"https://api.github.com/users/brgmnn/repos","events_url":"https://api.github.com/users/brgmnn/events{/privacy}","received_events_url":"https://api.github.com/users/brgmnn/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"f5a82ea38a0b2c2c332ee056c3715b03f0f5c114","commit_url":"https://api.github.com/repos/brgmnn/syncthing/commits/f5a82ea38a0b2c2c332ee056c3715b03f0f5c114","created_at":"2015-07-03T12:29:04Z","performed_via_github_app":null},{"id":347537425,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDM0NzUzNzQyNQ==","url":"https://api.github.com/repos/syncthing/syncthing/issues/events/347537425","actor":{"login":"brgmnn","id":1955273,"node_id":"MDQ6VXNlcjE5NTUyNzM=","avatar_url":"https://avatars.githubusercontent.com/u/1955273?v=4","gravatar_id":"","url":"https://api.github.com/users/brgmnn","html_url":"https://github.com/brgmnn","followers_url":"https://api.github.com/users/brgmnn/followers","following_url":"https://api.github.com/users/brgmnn/following{/other_user}","gists_url":"https://api.github.com/users/brgmnn/gists{/gist_id}","starred_url":"https://api.github.com/users/brgmnn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brgmnn/subscriptions","organizations_url":"https://api.github.com/users/brgmnn/orgs","repos_url":"https://api.github.com/users/brgmnn/repos","events_url":"https://api.github.com/users/brgmnn/events{/privacy}","received_events_url":"https://api.github.com/users/brgmnn/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"1f519e6cac259a81d746d973a4a03f7b31846079","commit_url":"https://api.github.com/repos/brgmnn/syncthing/commits/1f519e6cac259a81d746d973a4a03f7b31846079","created_at":"2015-07-03T17:14:05Z","performed_via_github_app":null},{"id":347744986,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDM0Nzc0NDk4Ng==","url":"https://api.github.com/repos/syncthing/syncthing/issues/events/347744986","actor":{"login":"brgmnn","id":1955273,"node_id":"MDQ6VXNlcjE5NTUyNzM=","avatar_url":"https://avatars.githubusercontent.com/u/1955273?v=4","gravatar_id":"","url":"https://api.github.com/users/brgmnn","html_url":"https://github.com/brgmnn","followers_url":"https://api.github.com/users/brgmnn/followers","following_url":"https://api.github.com/users/brgmnn/following{/other_user}","gists_url":"https://api.github.com/users/brgmnn/gists{/gist_id}","starred_url":"https://api.github.com/users/brgmnn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brgmnn/subscriptions","organizations_url":"https://api.github.com/users/brgmnn/orgs","repos_url":"https://api.github.com/users/brgmnn/repos","events_url":"https://api.github.com/users/brgmnn/events{/privacy}","received_events_url":"https://api.github.com/users/brgmnn/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"3fe1673ce9af7377c03f22fed6a11c4635a58ccd","commit_url":"https://api.github.com/repos/brgmnn/syncthing/commits/3fe1673ce9af7377c03f22fed6a11c4635a58ccd","created_at":"2015-07-04T08:01:53Z","performed_via_github_app":null},{"id":347857442,"node_id":"MDExOkNsb3NlZEV2ZW50MzQ3ODU3NDQy","url":"https://api.github.com/repos/syncthing/syncthing/issues/events/347857442","actor":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"3fe1673ce9af7377c03f22fed6a11c4635a58ccd","commit_url":"https://api.github.com/repos/syncthing/syncthing/commits/3fe1673ce9af7377c03f22fed6a11c4635a58ccd","created_at":"2015-07-04T17:37:24Z","state_reason":null,"performed_via_github_app":null},{"id":347857443,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDM0Nzg1NzQ0Mw==","url":"https://api.github.com/repos/syncthing/syncthing/issues/events/347857443","actor":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"e9545c4961d0caad5fb2d975794750a45b13e4af","commit_url":"https://api.github.com/repos/syncthing/syncthing/commits/e9545c4961d0caad5fb2d975794750a45b13e4af","created_at":"2015-07-04T17:37:24Z","performed_via_github_app":null},{"id":1127513074,"node_id":"MDEyOkxhYmVsZWRFdmVudDExMjc1MTMwNzQ=","url":"https://api.github.com/repos/syncthing/syncthing/issues/events/1127513074","actor":{"login":"st-review","id":16196517,"node_id":"MDQ6VXNlcjE2MTk2NTE3","avatar_url":"https://avatars.githubusercontent.com/u/16196517?v=4","gravatar_id":"","url":"https://api.github.com/users/st-review","html_url":"https://github.com/st-review","followers_url":"https://api.github.com/users/st-review/followers","following_url":"https://api.github.com/users/st-review/following{/other_user}","gists_url":"https://api.github.com/users/st-review/gists{/gist_id}","starred_url":"https://api.github.com/users/st-review/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/st-review/subscriptions","organizations_url":"https://api.github.com/users/st-review/orgs","repos_url":"https://api.github.com/users/st-review/repos","events_url":"https://api.github.com/users/st-review/events{/privacy}","received_events_url":"https://api.github.com/users/st-review/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2017-06-16T21:06:21Z","label":{"name":"frozen-due-to-age","color":"c2e0c6"},"performed_via_github_app":null},{"id":1127513080,"node_id":"MDExOkxvY2tlZEV2ZW50MTEyNzUxMzA4MA==","url":"https://api.github.com/repos/syncthing/syncthing/issues/events/1127513080","actor":{"login":"syncthing","id":7628018,"node_id":"MDEyOk9yZ2FuaXphdGlvbjc2MjgwMTg=","avatar_url":"https://avatars.githubusercontent.com/u/7628018?v=4","gravatar_id":"","url":"https://api.github.com/users/syncthing","html_url":"https://github.com/syncthing","followers_url":"https://api.github.com/users/syncthing/followers","following_url":"https://api.github.com/users/syncthing/following{/other_user}","gists_url":"https://api.github.com/users/syncthing/gists{/gist_id}","starred_url":"https://api.github.com/users/syncthing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/syncthing/subscriptions","organizations_url":"https://api.github.com/users/syncthing/orgs","repos_url":"https://api.github.com/users/syncthing/repos","events_url":"https://api.github.com/users/syncthing/events{/privacy}","received_events_url":"https://api.github.com/users/syncthing/received_events","type":"Organization","user_view_type":"public","site_admin":false},"event":"locked","commit_id":null,"commit_url":null,"created_at":"2017-06-16T21:06:22Z","lock_reason":null,"performed_via_github_app":null}]