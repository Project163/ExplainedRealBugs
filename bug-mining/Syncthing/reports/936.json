{"url":"https://api.github.com/repos/syncthing/syncthing/issues/5791","repository_url":"https://api.github.com/repos/syncthing/syncthing","labels_url":"https://api.github.com/repos/syncthing/syncthing/issues/5791/labels{/name}","comments_url":"https://api.github.com/repos/syncthing/syncthing/issues/5791/comments","events_url":"https://api.github.com/repos/syncthing/syncthing/issues/5791/events","html_url":"https://github.com/syncthing/syncthing/issues/5791","id":455899262,"node_id":"MDU6SXNzdWU0NTU4OTkyNjI=","number":5791,"title":"Puller complains about invalid filenames which are long gone","user":{"login":"bka2004","id":28824494,"node_id":"MDQ6VXNlcjI4ODI0NDk0","avatar_url":"https://avatars.githubusercontent.com/u/28824494?v=4","gravatar_id":"","url":"https://api.github.com/users/bka2004","html_url":"https://github.com/bka2004","followers_url":"https://api.github.com/users/bka2004/followers","following_url":"https://api.github.com/users/bka2004/following{/other_user}","gists_url":"https://api.github.com/users/bka2004/gists{/gist_id}","starred_url":"https://api.github.com/users/bka2004/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/bka2004/subscriptions","organizations_url":"https://api.github.com/users/bka2004/orgs","repos_url":"https://api.github.com/users/bka2004/repos","events_url":"https://api.github.com/users/bka2004/events{/privacy}","received_events_url":"https://api.github.com/users/bka2004/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":67767665,"node_id":"MDU6TGFiZWw2Nzc2NzY2NQ==","url":"https://api.github.com/repos/syncthing/syncthing/labels/bug","name":"bug","color":"d93f0b","default":true,"description":"A problem with current functionality, as opposed to missing functionality (enhancement)"},{"id":628314330,"node_id":"MDU6TGFiZWw2MjgzMTQzMzA=","url":"https://api.github.com/repos/syncthing/syncthing/labels/frozen-due-to-age","name":"frozen-due-to-age","color":"eeeeee","default":false,"description":"Issues closed and untouched for a long time, together with being locked for discussion"}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/syncthing/syncthing/milestones/36","html_url":"https://github.com/syncthing/syncthing/milestone/36","labels_url":"https://api.github.com/repos/syncthing/syncthing/milestones/36/labels","id":4301629,"node_id":"MDk6TWlsZXN0b25lNDMwMTYyOQ==","number":36,"title":"v1.2.0","description":"","creator":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":64,"state":"closed","created_at":"2019-05-10T07:12:15Z","updated_at":"2019-07-09T06:30:26Z","due_on":"2019-07-09T07:00:00Z","closed_at":"2019-07-09T06:30:26Z"},"comments":0,"created_at":"2019-06-13T18:49:55Z","updated_at":"2020-06-13T07:02:33Z","closed_at":"2019-06-14T06:48:21Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"When I started using syncthing with my Home Folder, it contained some files with a colon in the filename. Linux client didn’t have any problems, but the windows client complained about invalid filenames. That’s perfectly fine and I just renamed the files and rescanned the folder.\r\n\r\nBut although the problematic files are gone now, the windows client still complains about those invalid filenames and says “out of sync” and lists the old filenames in the “out of sync” list.\r\n\r\nI'm using syncthing 1.1.4 on both sides.\r\n\r\nI tried to reproduce this today, and that’s what happened:\r\n\r\nOn linux I created a file with a colon in a directory which is ignored on the windows side:\r\n[root@frogstar .syncthing-config]# echo \"bla\" > 'test:file'\r\n\r\nSyncthing on linux picked up the file.\r\n\r\nOn windows I unignored the directory, and after waiting a bit, I queried the DB on windows:\r\n\r\n```\r\nbka@bka-pc:/mnt/c/Windows/System32$ curl -X GET -H \"X-API-Key: xxx\" 'http://localhost:8384/rest/db/file?folder=msrcl-kvcnd&file=.syncthing-config\\test:file'\r\n{\r\n  \"availability\": [\r\n    {\r\n      \"id\": \"EFZZSVQ-POIBRPK-WEQTLFL-CB6VS4T-MFI4LJF-XVPQMJU-MKZZKX5-PPFVXQT\",\r\n      \"fromTemporary\": false\r\n    }\r\n  ],\r\n  \"global\": {\r\n    \"deleted\": false,\r\n    \"ignored\": false,\r\n    \"invalid\": false,\r\n    \"localFlags\": 0,\r\n    \"modified\": \"2019-06-12T20:25:30.271290366+02:00\",\r\n    \"modifiedBy\": \"EFZZSVQ\",\r\n    \"mustRescan\": false,\r\n    \"name\": \".syncthing-config\\\\test:file\",\r\n    \"noPermissions\": false,\r\n    \"numBlocks\": 1,\r\n    \"permissions\": \"0644\",\r\n    \"sequence\": 1234849,\r\n    \"size\": 4,\r\n    \"type\": 0,\r\n    \"version\": [\r\n      \"EFZZSVQ:1\"\r\n    ]\r\n  },\r\n  \"local\": {\r\n    \"deleted\": true,\r\n    \"ignored\": false,\r\n    \"invalid\": false,\r\n    \"localFlags\": 0,\r\n    \"modified\": \"2019-06-12T20:25:30.271290366+02:00\",\r\n    \"modifiedBy\": \"Y2UU6DH\",\r\n    \"mustRescan\": false,\r\n    \"name\": \".syncthing-config\\\\test:file\",\r\n    \"noPermissions\": false,\r\n    \"numBlocks\": 0,\r\n    \"permissions\": \"0\",\r\n    \"sequence\": 2199918,\r\n    \"size\": 0,\r\n    \"type\": 0,\r\n    \"version\": [\r\n      \"Y2UU6DH:1\"\r\n    ]\r\n  }\r\n}\r\n```\r\n\r\nI renamed the file on linux:\r\n\r\n```\r\n[root@frogstar .syncthing-config]# mv test\\:file test_file\r\n```\r\n\r\nThe file now got sync’ed to windows with the new name and again I queried the DB:\r\n\r\n```\r\nbka@bka-pc:/mnt/c/Windows/System32$ curl -X GET -H \"X-API-Key: xxx\" 'http://localhost:8384/rest/db/file?folder=msrcl-kvcnd&file=.syncthing-config\\test:file'\r\n{\r\n  \"availability\": [\r\n    {\r\n      \"id\": \"EFZZSVQ-POIBRPK-WEQTLFL-CB6VS4T-MFI4LJF-XVPQMJU-MKZZKX5-PPFVXQT\",\r\n      \"fromTemporary\": false\r\n    }\r\n  ],\r\n  \"global\": {\r\n    \"deleted\": true,\r\n    \"ignored\": false,\r\n    \"invalid\": false,\r\n    \"localFlags\": 0,\r\n    \"modified\": \"2019-06-12T20:25:30.271290366+02:00\",\r\n    \"modifiedBy\": \"EFZZSVQ\",\r\n    \"mustRescan\": false,\r\n    \"name\": \".syncthing-config\\\\test:file\",\r\n    \"noPermissions\": false,\r\n    \"numBlocks\": 0,\r\n    \"permissions\": \"0\",\r\n    \"sequence\": 1248581,\r\n    \"size\": 0,\r\n    \"type\": 0,\r\n    \"version\": [\r\n      \"EFZZSVQ:2\"\r\n    ]\r\n  },\r\n  \"local\": {\r\n    \"deleted\": true,\r\n    \"ignored\": false,\r\n    \"invalid\": false,\r\n    \"localFlags\": 0,\r\n    \"modified\": \"2019-06-12T20:25:30.271290366+02:00\",\r\n    \"modifiedBy\": \"Y2UU6DH\",\r\n    \"mustRescan\": false,\r\n    \"name\": \".syncthing-config\\\\test:file\",\r\n    \"noPermissions\": false,\r\n    \"numBlocks\": 0,\r\n    \"permissions\": \"0\",\r\n    \"sequence\": 2199918,\r\n    \"size\": 0,\r\n    \"type\": 0,\r\n    \"version\": [\r\n      \"Y2UU6DH:1\"\r\n    ]\r\n  }\r\n}\r\n```\r\n\r\nAnd again the GUI shows one more out-of-sync item named “test:file”.\r\n","closed_by":{"login":"imsodin","id":15955093,"node_id":"MDQ6VXNlcjE1OTU1MDkz","avatar_url":"https://avatars.githubusercontent.com/u/15955093?v=4","gravatar_id":"","url":"https://api.github.com/users/imsodin","html_url":"https://github.com/imsodin","followers_url":"https://api.github.com/users/imsodin/followers","following_url":"https://api.github.com/users/imsodin/following{/other_user}","gists_url":"https://api.github.com/users/imsodin/gists{/gist_id}","starred_url":"https://api.github.com/users/imsodin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imsodin/subscriptions","organizations_url":"https://api.github.com/users/imsodin/orgs","repos_url":"https://api.github.com/users/imsodin/repos","events_url":"https://api.github.com/users/imsodin/events{/privacy}","received_events_url":"https://api.github.com/users/imsodin/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/5791/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/syncthing/syncthing/issues/5791/timeline","performed_via_github_app":null,"state_reason":"completed"}