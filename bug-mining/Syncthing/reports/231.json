{"url":"https://api.github.com/repos/syncthing/syncthing/issues/1295","repository_url":"https://api.github.com/repos/syncthing/syncthing","labels_url":"https://api.github.com/repos/syncthing/syncthing/issues/1295/labels{/name}","comments_url":"https://api.github.com/repos/syncthing/syncthing/issues/1295/comments","events_url":"https://api.github.com/repos/syncthing/syncthing/issues/1295/events","html_url":"https://github.com/syncthing/syncthing/issues/1295","id":55391650,"node_id":"MDU6SXNzdWU1NTM5MTY1MA==","number":1295,"title":"File / Dir name length and Windows","user":{"login":"RafiKueng","id":937466,"node_id":"MDQ6VXNlcjkzNzQ2Ng==","avatar_url":"https://avatars.githubusercontent.com/u/937466?v=4","gravatar_id":"","url":"https://api.github.com/users/RafiKueng","html_url":"https://github.com/RafiKueng","followers_url":"https://api.github.com/users/RafiKueng/followers","following_url":"https://api.github.com/users/RafiKueng/following{/other_user}","gists_url":"https://api.github.com/users/RafiKueng/gists{/gist_id}","starred_url":"https://api.github.com/users/RafiKueng/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/RafiKueng/subscriptions","organizations_url":"https://api.github.com/users/RafiKueng/orgs","repos_url":"https://api.github.com/users/RafiKueng/repos","events_url":"https://api.github.com/users/RafiKueng/events{/privacy}","received_events_url":"https://api.github.com/users/RafiKueng/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":67767667,"node_id":"MDU6TGFiZWw2Nzc2NzY2Nw==","url":"https://api.github.com/repos/syncthing/syncthing/labels/enhancement","name":"enhancement","color":"0e8a16","default":true,"description":"New features or improvements of some kind, as opposed to a problem (bug)"},{"id":628314330,"node_id":"MDU6TGFiZWw2MjgzMTQzMzA=","url":"https://api.github.com/repos/syncthing/syncthing/labels/frozen-due-to-age","name":"frozen-due-to-age","color":"eeeeee","default":false,"description":"Issues closed and untouched for a long time, together with being locked for discussion"}],"state":"closed","locked":true,"assignee":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":5,"created_at":"2015-01-25T01:29:48Z","updated_at":"2017-06-16T21:09:40Z","closed_at":"2015-04-08T12:12:25Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"This is not really a bug in syncthing, but one in windows / ntfs to be aware of and (maybe) to work around:\n\nPathnames in NTFS are usually restricted to 256 chars (260-4: 'C:\\' in the beginning and \\NULL at the end; it's complicated, see [1] and [2]):\n\n> \"In the Windows API (with some exceptions discussed in the following paragraphs), the maximum length for a path is MAX_PATH, which is defined as 260 characters.\" [2]\n\nSo a perfect valid `long255charfilename.ext` with 255 chars won't be synced, because the creation of the temp file `~syncthing~.long255charfilename.ext.tmp` fails in the sync target (the one receiving the file) [3]\n\nIf I read the docs [2] correctly, there are \"extended-length path for a maximum total path length of 32,767 characters\". So all you should have to do is to prefix your paths with \"\\\\?\\\" if using the proper api calls. But be aware that the conversion of '/' to '\\' wont work anymore and relative path using dots neither  (Again, all according to the docs, I did not test this, since I don't have a win machine set up for dev at the moment)\n\nA side effect would then probably be, that those files won't be accessible in windows explorer and certain applications.. But the files are there and applications with proper long file name support should be able to read them. Thats what I would propose as the best way to handle it.\n\n[1] http://stackoverflow.com/questions/265769/maximum-filename-length-in-ntfs-windows-xp-and-windows-vista\n[2] https://msdn.microsoft.com/en-us/library/aa365247.aspx\n[3] The error message: (running on win8.1 x64)\n\n```\n[NLXEG] 23:43:22 INFO: Puller (folder \"documents\", file \"Uni\\\\Lectures\\\\INI410 - The Neurobiology of Consciousness - Daniel Kiper, Alex Gamma (Daniel Koch, Heather Berlin) - HS2008\\\\Lecture Sildes\\\\Lect 10 - Conclusions to Consciousness from Split-Brain Patients and Agnosias [Dr. H. Berlin].pdf\"):\ndst create: open s='D:\\data\\Documents\\Uni\\Lectures\\INI410 - The Neurobiology of Consciousness - Daniel Kiper, Alex Gamma (Daniel Koch, Heather Berlin) - HS2008\\Lecture Sildes\\~syncthing~.Lect 10 - Conclusions to Consciousness from Split-Brain Patients and Agnosias [Dr. H. Berlin].pdf.tmp': Das System kann den angegebenen Pfad nicht finden.\n```\n","closed_by":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/1295/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/syncthing/syncthing/issues/1295/timeline","performed_via_github_app":null,"state_reason":"completed"}