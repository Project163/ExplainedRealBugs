{"url":"https://api.github.com/repos/syncthing/syncthing/issues/6994","repository_url":"https://api.github.com/repos/syncthing/syncthing","labels_url":"https://api.github.com/repos/syncthing/syncthing/issues/6994/labels{/name}","comments_url":"https://api.github.com/repos/syncthing/syncthing/issues/6994/comments","events_url":"https://api.github.com/repos/syncthing/syncthing/issues/6994/events","html_url":"https://github.com/syncthing/syncthing/issues/6994","id":705094170,"node_id":"MDU6SXNzdWU3MDUwOTQxNzA=","number":6994,"title":"\"panic: filling Blocks: leveldb: snapshot released\" on folder save","user":{"login":"tomasz1986","id":5626656,"node_id":"MDQ6VXNlcjU2MjY2NTY=","avatar_url":"https://avatars.githubusercontent.com/u/5626656?v=4","gravatar_id":"","url":"https://api.github.com/users/tomasz1986","html_url":"https://github.com/tomasz1986","followers_url":"https://api.github.com/users/tomasz1986/followers","following_url":"https://api.github.com/users/tomasz1986/following{/other_user}","gists_url":"https://api.github.com/users/tomasz1986/gists{/gist_id}","starred_url":"https://api.github.com/users/tomasz1986/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tomasz1986/subscriptions","organizations_url":"https://api.github.com/users/tomasz1986/orgs","repos_url":"https://api.github.com/users/tomasz1986/repos","events_url":"https://api.github.com/users/tomasz1986/events{/privacy}","received_events_url":"https://api.github.com/users/tomasz1986/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":67767665,"node_id":"MDU6TGFiZWw2Nzc2NzY2NQ==","url":"https://api.github.com/repos/syncthing/syncthing/labels/bug","name":"bug","color":"d93f0b","default":true,"description":"A problem with current functionality, as opposed to missing functionality (enhancement)"},{"id":628314330,"node_id":"MDU6TGFiZWw2MjgzMTQzMzA=","url":"https://api.github.com/repos/syncthing/syncthing/labels/frozen-due-to-age","name":"frozen-due-to-age","color":"eeeeee","default":false,"description":"Issues closed and untouched for a long time, together with being locked for discussion"},{"id":2043110077,"node_id":"MDU6TGFiZWwyMDQzMTEwMDc3","url":"https://api.github.com/repos/syncthing/syncthing/labels/needs-triage","name":"needs-triage","color":"ce23af","default":false,"description":"New issues needed to be validated"}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/syncthing/syncthing/milestones/55","html_url":"https://github.com/syncthing/syncthing/milestone/55","labels_url":"https://api.github.com/repos/syncthing/syncthing/milestones/55/labels","id":5880778,"node_id":"MDk6TWlsZXN0b25lNTg4MDc3OA==","number":55,"title":"v1.11.0","description":"This release adds the `sendFullIndexOnUpgrade` option to control whether all index data is resent when an upgrade is detected, equivalent to starting Syncthing with `--reset-deltas`. This (`sendFullIndexOnUpgrade=true`) used to be the behavior in previous versions, but is mainly useful as a troubleshooting step and causes high database churn. The new default is `false`.","creator":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":36,"state":"closed","created_at":"2020-09-15T17:43:50Z","updated_at":"2020-11-03T10:11:12Z","due_on":"2020-11-03T08:00:00Z","closed_at":"2020-11-03T10:11:12Z"},"comments":0,"created_at":"2020-09-20T11:36:01Z","updated_at":"2021-09-26T07:02:22Z","closed_at":"2020-09-25T09:27:45Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Following https://forum.syncthing.net/t/panic-filling-blocks-leveldb-snapshot-released/15638. This happened when I was trying to save changes to a folder using the Web GUI.\r\n\r\nSyncthing version is `v1.10.0-rc.2` (x86-32). The OS is Windows 10 Enterprise 2016 LTSB x86. Not sure if of any significance, but the file system is NTFS, encrypted with BitLocker, and with NTFS compression enabled.\r\n\r\n```\r\n[7LDIB] 11:56:48 WARNING: Fatal error: ghgck-scplg Get(xxx): filling Blocks: leveldb: snapshot released\r\nPanic at 2020-09-20T11:56:48+09:00\r\npanic: filling Blocks: leveldb: snapshot released\r\n\r\ngoroutine 486054 [running]:\r\ngithub.com/syncthing/syncthing/lib/db.fatalError(0x1599140, 0x13d425b0, 0x175f79e0, 0x5f, 0x1258e540)\r\n\tgithub.com/syncthing/syncthing/lib/db/set.go:535 +0x1e1\r\ngithub.com/syncthing/syncthing/lib/db.(*FileSet).Snapshot.func1(0x1599140, 0x13d425b0, 0x175f79e0, 0x5f)\r\n\tgithub.com/syncthing/syncthing/lib/db/set.go:149 +0x43\r\ngithub.com/syncthing/syncthing/lib/db.(*Snapshot).Get(0x15018d60, 0xffffffff, 0xffffffff, 0xffffffff, 0xffffffff, 0xffffffff, 0xffffffff, 0xffffffff, 0xffffffff, 0x131fb6d0, ...)\r\n\tgithub.com/syncthing/syncthing/lib/db/set.go:241 +0x3ab\r\ngithub.com/syncthing/syncthing/lib/model.cFiler.CurrentFile(0x15018d60, 0x131fb6d0, 0x4e, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, 0x0, ...)\r\n\tgithub.com/syncthing/syncthing/lib/model/folder.go:1153 +0x65\r\ngithub.com/syncthing/syncthing/lib/scanner.(*walker).walkRegular(0x1411ff80, 0x15a2fc0, 0x15018da0, 0x131fb6d0, 0x4e, 0x15abae0, 0x1668a1c8, 0x14c28cc0, 0x0, 0x0)\r\n\tgithub.com/syncthing/syncthing/lib/scanner/walk.go:332 +0x5c\r\ngithub.com/syncthing/syncthing/lib/scanner.(*walker).handleItem(0x1411ff80, 0x15a2fc0, 0x15018da0, 0x131fb6d0, 0x4e, 0x15abae0, 0x1668a1c8, 0x14c28cc0, 0x14c28d00, 0x0, ...)\r\n\tgithub.com/syncthing/syncthing/lib/scanner/walk.go:325 +0x1a3\r\ngithub.com/syncthing/syncthing/lib/scanner.(*walker).walkAndHashFiles.func1(0x131fb6d0, 0x4e, 0x15abae0, 0x1668a1c8, 0x0, 0x0, 0x0, 0x0)\r\n\tgithub.com/syncthing/syncthing/lib/scanner/walk.go:268 +0xae2\r\ngithub.com/syncthing/syncthing/lib/fs.(*MtimeFS).Walk.func1(0x131fb6d0, 0x4e, 0x15abae0, 0x1668a1c8, 0x0, 0x0, 0x8f198b, 0x1668a1c8)\r\n\tgithub.com/syncthing/syncthing/lib/fs/mtimefs.go:124 +0x71\r\ngithub.com/syncthing/syncthing/lib/fs.(*walkFilesystem).walk(0x14958fa8, 0x131fb6d0, 0x4e, 0x15abae0, 0x1668a1c8, 0x155f63e0, 0x14155f50, 0x0, 0x0)\r\n\tgithub.com/syncthing/syncthing/lib/fs/walkfs.go:80 +0x13e\r\ngithub.com/syncthing/syncthing/lib/fs.(*walkFilesystem).walk(0x14958fa8, 0x14b6e000, 0x43, 0x15abae0, 0x154cf548, 0x155f63e0, 0x14155f50, 0x0, 0x0)\r\n\tgithub.com/syncthing/syncthing/lib/fs/walkfs.go:112 +0x458\r\ngithub.com/syncthing/syncthing/lib/fs.(*walkFilesystem).walk(0x14958fa8, 0x14c29040, 0x39, 0x15abae0, 0x154ce508, 0x155f63e0, 0x14155f50, 0x0, 0x0)\r\n\tgithub.com/syncthing/syncthing/lib/fs/walkfs.go:112 +0x458\r\ngithub.com/syncthing/syncthing/lib/fs.(*walkFilesystem).walk(0x14958fa8, 0x12a36840, 0xd, 0x15abae0, 0x154ce410, 0x155f63e0, 0x14155f50, 0x0, 0x0)\r\n\tgithub.com/syncthing/syncthing/lib/fs/walkfs.go:112 +0x458\r\ngithub.com/syncthing/syncthing/lib/fs.(*walkFilesystem).walk(0x14958fa8, 0x12d06f1, 0x1, 0x15abae0, 0x154ce2f8, 0x155f63e0, 0x14155f50, 0x0, 0x0)\r\n\tgithub.com/syncthing/syncthing/lib/fs/walkfs.go:112 +0x458\r\ngithub.com/syncthing/syncthing/lib/fs.(*walkFilesystem).Walk(0x14958fa8, 0x12d06f1, 0x1, 0x155f63e0, 0x0, 0x155f63e0)\r\n\tgithub.com/syncthing/syncthing/lib/fs/walkfs.go:135 +0xe5\r\ngithub.com/syncthing/syncthing/lib/fs.(*caseFilesystem).Walk(0x151692e0, 0x12d06f1, 0x1, 0x155f63e0, 0x34cd, 0x1ae2300)\r\n\tgithub.com/syncthing/syncthing/lib/fs/casefs.go:273 +0x88\r\ngithub.com/syncthing/syncthing/lib/fs.(*MtimeFS).Walk(0x15018dc0, 0x12d06f1, 0x1, 0x1248e900, 0x14c28d00, 0x1248e900)\r\n\tgithub.com/syncthing/syncthing/lib/fs/mtimefs.go:110 +0x6c\r\ngithub.com/syncthing/syncthing/lib/scanner.(*walker).walk.func1(0x1411ff80, 0x15a2fc0, 0x15018da0, 0x14c28cc0, 0x14c28d00)\r\n\tgithub.com/syncthing/syncthing/lib/scanner/walk.go:114 +0x1bf\r\ncreated by github.com/syncthing/syncthing/lib/scanner.(*walker).walk\r\n\tgithub.com/syncthing/syncthing/lib/scanner/walk.go:111 +0x13e\r\n```\r\n\r\n[panic-20200920-115648.log](https://github.com/syncthing/syncthing/files/5251591/panic-20200920-115648.log)\r\n","closed_by":{"login":"imsodin","id":15955093,"node_id":"MDQ6VXNlcjE1OTU1MDkz","avatar_url":"https://avatars.githubusercontent.com/u/15955093?v=4","gravatar_id":"","url":"https://api.github.com/users/imsodin","html_url":"https://github.com/imsodin","followers_url":"https://api.github.com/users/imsodin/followers","following_url":"https://api.github.com/users/imsodin/following{/other_user}","gists_url":"https://api.github.com/users/imsodin/gists{/gist_id}","starred_url":"https://api.github.com/users/imsodin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imsodin/subscriptions","organizations_url":"https://api.github.com/users/imsodin/orgs","repos_url":"https://api.github.com/users/imsodin/repos","events_url":"https://api.github.com/users/imsodin/events{/privacy}","received_events_url":"https://api.github.com/users/imsodin/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/6994/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/syncthing/syncthing/issues/6994/timeline","performed_via_github_app":null,"state_reason":"completed"}