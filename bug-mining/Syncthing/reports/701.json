{"url":"https://api.github.com/repos/syncthing/syncthing/issues/4475","repository_url":"https://api.github.com/repos/syncthing/syncthing","labels_url":"https://api.github.com/repos/syncthing/syncthing/issues/4475/labels{/name}","comments_url":"https://api.github.com/repos/syncthing/syncthing/issues/4475/comments","events_url":"https://api.github.com/repos/syncthing/syncthing/issues/4475/events","html_url":"https://github.com/syncthing/syncthing/issues/4475","id":269906693,"node_id":"MDU6SXNzdWUyNjk5MDY2OTM=","number":4475,"title":"Discovering new files in a deleted directory does not resurrect the directory","user":{"login":"rkfg","id":184066,"node_id":"MDQ6VXNlcjE4NDA2Ng==","avatar_url":"https://avatars.githubusercontent.com/u/184066?v=4","gravatar_id":"","url":"https://api.github.com/users/rkfg","html_url":"https://github.com/rkfg","followers_url":"https://api.github.com/users/rkfg/followers","following_url":"https://api.github.com/users/rkfg/following{/other_user}","gists_url":"https://api.github.com/users/rkfg/gists{/gist_id}","starred_url":"https://api.github.com/users/rkfg/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rkfg/subscriptions","organizations_url":"https://api.github.com/users/rkfg/orgs","repos_url":"https://api.github.com/users/rkfg/repos","events_url":"https://api.github.com/users/rkfg/events{/privacy}","received_events_url":"https://api.github.com/users/rkfg/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":67767665,"node_id":"MDU6TGFiZWw2Nzc2NzY2NQ==","url":"https://api.github.com/repos/syncthing/syncthing/labels/bug","name":"bug","color":"d93f0b","default":true,"description":"A problem with current functionality, as opposed to missing functionality (enhancement)"},{"id":628314330,"node_id":"MDU6TGFiZWw2MjgzMTQzMzA=","url":"https://api.github.com/repos/syncthing/syncthing/labels/frozen-due-to-age","name":"frozen-due-to-age","color":"eeeeee","default":false,"description":"Issues closed and untouched for a long time, together with being locked for discussion"}],"state":"closed","locked":true,"assignee":{"login":"imsodin","id":15955093,"node_id":"MDQ6VXNlcjE1OTU1MDkz","avatar_url":"https://avatars.githubusercontent.com/u/15955093?v=4","gravatar_id":"","url":"https://api.github.com/users/imsodin","html_url":"https://github.com/imsodin","followers_url":"https://api.github.com/users/imsodin/followers","following_url":"https://api.github.com/users/imsodin/following{/other_user}","gists_url":"https://api.github.com/users/imsodin/gists{/gist_id}","starred_url":"https://api.github.com/users/imsodin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imsodin/subscriptions","organizations_url":"https://api.github.com/users/imsodin/orgs","repos_url":"https://api.github.com/users/imsodin/repos","events_url":"https://api.github.com/users/imsodin/events{/privacy}","received_events_url":"https://api.github.com/users/imsodin/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"imsodin","id":15955093,"node_id":"MDQ6VXNlcjE1OTU1MDkz","avatar_url":"https://avatars.githubusercontent.com/u/15955093?v=4","gravatar_id":"","url":"https://api.github.com/users/imsodin","html_url":"https://github.com/imsodin","followers_url":"https://api.github.com/users/imsodin/followers","following_url":"https://api.github.com/users/imsodin/following{/other_user}","gists_url":"https://api.github.com/users/imsodin/gists{/gist_id}","starred_url":"https://api.github.com/users/imsodin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imsodin/subscriptions","organizations_url":"https://api.github.com/users/imsodin/orgs","repos_url":"https://api.github.com/users/imsodin/repos","events_url":"https://api.github.com/users/imsodin/events{/privacy}","received_events_url":"https://api.github.com/users/imsodin/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/syncthing/syncthing/milestones/16","html_url":"https://github.com/syncthing/syncthing/milestone/16","labels_url":"https://api.github.com/repos/syncthing/syncthing/milestones/16/labels","id":2954274,"node_id":"MDk6TWlsZXN0b25lMjk1NDI3NA==","number":16,"title":"v0.14.42","description":"","creator":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":7,"state":"closed","created_at":"2017-12-03T19:55:31Z","updated_at":"2018-01-15T14:28:05Z","due_on":"2017-12-26T08:00:00Z","closed_at":"2017-12-25T07:01:52Z"},"comments":22,"created_at":"2017-10-31T10:25:41Z","updated_at":"2018-12-08T07:01:57Z","closed_at":"2017-12-07T08:42:09Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"So for some unknown reason the puller gets stuck on some directory being unable to delete it. The directory was deleted on the remote device (don't know when exactly, maybe yesterday) but can't be removed on the local one. Here's the log:\r\n\r\n```\r\n[xxxx] 2017/10/31 13:10:51.599131 logfs.go:61: DEBUG: mtimefs.go:55 basic /home/dina/Dropbox/ Lstat . {0xc4203e21a0} <nil>\r\n[xxxx] 2017/10/31 13:10:51.599188 logfs.go:61: DEBUG: mtimefs.go:55 basic /home/dina/Dropbox/ Lstat моё {0xc4203e2270} <nil>\r\n[xxxx] 2017/10/31 13:10:51.599230 rwfolder.go:570: DEBUG: Deleting dir моё/МедСправки орто\r\n[xxxx] 2017/10/31 13:10:51.599326 logfs.go:55: DEBUG: <autogenerated>:1 basic /home/dina/Dropbox/ DirNames моё/МедСправки орто [Справка.bmp Выписка1.bmp Thumbs.db Выписка2.bmp Акт.bmp] <nil>\r\n[xxxx] 2017/10/31 13:10:51.599353 logfs.go:115: DEBUG: <autogenerated>:1 basic /home/dina/Dropbox/ Stat моё {0xc4203e2340} <nil>\r\n[xxxx] 2017/10/31 13:10:51.599385 logfs.go:97: DEBUG: <autogenerated>:1 basic /home/dina/Dropbox/ Remove моё/МедСправки орто remove /home/dina/Dropbox/моё/МедСправки орто: directory not empty\r\n[xxxx] 2017/10/31 13:10:51.599399 logfs.go:61: DEBUG: mtimefs.go:55 basic /home/dina/Dropbox/ Lstat моё/МедСправки орто {0xc4203e2410} <nil>\r\n[xxxx] 2017/10/31 13:10:51.599426 rwfolder.go:1675: INFO: Puller (folder \"dina-dropbox\", file \"моё/МедСправки орто\"): delete dir: remove /home/dina/Dropbox/моё/МедСправки орто: directory not empty\r\n[xxxx] 2017/10/31 13:10:51.599454 rwfolder.go:227: DEBUG: sendReceiveFolder/dina-dropbox@0xc420087400 changed 1\r\n[xxxx] 2017/10/31 13:10:51.599466 rwfolder.go:325: DEBUG: sendReceiveFolder/dina-dropbox@0xc420087400 c 1 p 16\r\n[xxxx] 2017/10/31 13:10:51.629165 logfs.go:61: DEBUG: mtimefs.go:55 basic /home/dina/Dropbox/ Lstat . {0xc42148a0d0} <nil>\r\n[xxxx] 2017/10/31 13:10:51.629228 logfs.go:61: DEBUG: mtimefs.go:55 basic /home/dina/Dropbox/ Lstat моё {0xc42148a4e0} <nil>\r\n[xxxx] 2017/10/31 13:10:51.629289 rwfolder.go:570: DEBUG: Deleting dir моё/МедСправки орто\r\n[xxxx] 2017/10/31 13:10:51.629371 logfs.go:55: DEBUG: <autogenerated>:1 basic /home/dina/Dropbox/ DirNames моё/МедСправки орто [Справка.bmp Выписка1.bmp Thumbs.db Выписка2.bmp Акт.bmp] <nil>\r\n[xxxx] 2017/10/31 13:10:51.629406 logfs.go:115: DEBUG: <autogenerated>:1 basic /home/dina/Dropbox/ Stat моё {0xc42148a5b0} <nil>\r\n[xxxx] 2017/10/31 13:10:51.629437 logfs.go:97: DEBUG: <autogenerated>:1 basic /home/dina/Dropbox/ Remove моё/МедСправки орто remove /home/dina/Dropbox/моё/МедСправки орто: directory not empty\r\n[xxxx] 2017/10/31 13:10:51.629458 logfs.go:61: DEBUG: mtimefs.go:55 basic /home/dina/Dropbox/ Lstat моё/МедСправки орто {0xc42148a680} <nil>\r\n[xxxx] 2017/10/31 13:10:51.629503 rwfolder.go:227: DEBUG: sendReceiveFolder/dina-dropbox@0xc420087400 changed 1\r\n[xxxx] 2017/10/31 13:10:51.629518 rwfolder.go:325: DEBUG: sendReceiveFolder/dina-dropbox@0xc420087400 c 1 p 16\r\n[xxxx] 2017/10/31 13:10:51.656975 logfs.go:61: DEBUG: mtimefs.go:55 basic /home/dina/Dropbox/ Lstat . {0xc42148a750} <nil>\r\n[xxxx] 2017/10/31 13:10:51.657036 logfs.go:61: DEBUG: mtimefs.go:55 basic /home/dina/Dropbox/ Lstat моё {0xc42148a820} <nil>\r\n[xxxx] 2017/10/31 13:10:51.657110 rwfolder.go:570: DEBUG: Deleting dir моё/МедСправки орто\r\n[xxxx] 2017/10/31 13:10:51.657216 logfs.go:55: DEBUG: <autogenerated>:1 basic /home/dina/Dropbox/ DirNames моё/МедСправки орто [Справка.bmp Выписка1.bmp Thumbs.db Выписка2.bmp Акт.bmp] <nil>\r\n[xxxx] 2017/10/31 13:10:51.657265 logfs.go:115: DEBUG: <autogenerated>:1 basic /home/dina/Dropbox/ Stat моё {0xc420cbe000} <nil>\r\n[xxxx] 2017/10/31 13:10:51.657314 logfs.go:97: DEBUG: <autogenerated>:1 basic /home/dina/Dropbox/ Remove моё/МедСправки орто remove /home/dina/Dropbox/моё/МедСправки орто: directory not empty\r\n[xxxx] 2017/10/31 13:10:51.657330 logfs.go:61: DEBUG: mtimefs.go:55 basic /home/dina/Dropbox/ Lstat моё/МедСправки орто {0xc420cbe0d0} <nil>\r\n[xxxx] 2017/10/31 13:10:51.657376 rwfolder.go:227: DEBUG: sendReceiveFolder/dina-dropbox@0xc420087400 changed 1\r\n[xxxx] 2017/10/31 13:10:51.657399 rwfolder.go:264: INFO: Folder dina-dropbox isn't making progress. Pausing puller for 1m0s.\r\n[xxxx] 2017/10/31 13:10:51.657412 rwfolder.go:265: DEBUG: sendReceiveFolder/dina-dropbox@0xc420087400 next pull in 1m0s\r\n[xxxx] 2017/10/31 13:10:51.687779 progressemitter.go:240: DEBUG: progress emitter: bytes completed for dina-dropbox: 0\r\n```\r\n\r\nThe sync progress is stuck seemingly forever. Of course I can remove the directory, rescan and it'll work again for some days or weeks only to get stuck on another directory again. This happens regularly but I see no pattern as that happens to another Syncthing user, I only provide the server. The directories and files are renamed and deleted pretty often, not always there's a connection to the server, sometimes Syncthing disconnects and never reconnects again though Internet is working fine (subject to other issue). It's pretty long-standing now, I remember this happening even a year ago.\r\n\r\n### Version Information\r\n\r\nSyncthing Version: v0.14.40-rc.4 (server), 0.14.39 (client)\r\nOS Version: Debian Jessie (server), Ubuntu 14.04 (client)\r\nBrowser Version: Chrome latest","closed_by":{"login":"st-review","id":16196517,"node_id":"MDQ6VXNlcjE2MTk2NTE3","avatar_url":"https://avatars.githubusercontent.com/u/16196517?v=4","gravatar_id":"","url":"https://api.github.com/users/st-review","html_url":"https://github.com/st-review","followers_url":"https://api.github.com/users/st-review/followers","following_url":"https://api.github.com/users/st-review/following{/other_user}","gists_url":"https://api.github.com/users/st-review/gists{/gist_id}","starred_url":"https://api.github.com/users/st-review/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/st-review/subscriptions","organizations_url":"https://api.github.com/users/st-review/orgs","repos_url":"https://api.github.com/users/st-review/repos","events_url":"https://api.github.com/users/st-review/events{/privacy}","received_events_url":"https://api.github.com/users/st-review/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/4475/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/syncthing/syncthing/issues/4475/timeline","performed_via_github_app":null,"state_reason":"completed"}