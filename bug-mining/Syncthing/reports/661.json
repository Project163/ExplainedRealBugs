{"url":"https://api.github.com/repos/syncthing/syncthing/issues/4321","repository_url":"https://api.github.com/repos/syncthing/syncthing","labels_url":"https://api.github.com/repos/syncthing/syncthing/issues/4321/labels{/name}","comments_url":"https://api.github.com/repos/syncthing/syncthing/issues/4321/comments","events_url":"https://api.github.com/repos/syncthing/syncthing/issues/4321/events","html_url":"https://github.com/syncthing/syncthing/issues/4321","id":252027613,"node_id":"MDU6SXNzdWUyNTIwMjc2MTM=","number":4321,"title":"syncthing v0.14.37-rc.2: folder error: failed to check available storage space","user":{"login":"ckeen","id":336017,"node_id":"MDQ6VXNlcjMzNjAxNw==","avatar_url":"https://avatars.githubusercontent.com/u/336017?v=4","gravatar_id":"","url":"https://api.github.com/users/ckeen","html_url":"https://github.com/ckeen","followers_url":"https://api.github.com/users/ckeen/followers","following_url":"https://api.github.com/users/ckeen/following{/other_user}","gists_url":"https://api.github.com/users/ckeen/gists{/gist_id}","starred_url":"https://api.github.com/users/ckeen/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/ckeen/subscriptions","organizations_url":"https://api.github.com/users/ckeen/orgs","repos_url":"https://api.github.com/users/ckeen/repos","events_url":"https://api.github.com/users/ckeen/events{/privacy}","received_events_url":"https://api.github.com/users/ckeen/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":628314330,"node_id":"MDU6TGFiZWw2MjgzMTQzMzA=","url":"https://api.github.com/repos/syncthing/syncthing/labels/frozen-due-to-age","name":"frozen-due-to-age","color":"eeeeee","default":false,"description":"Issues closed and untouched for a long time, together with being locked for discussion"}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2017-08-22T17:10:56Z","updated_at":"2018-09-10T07:01:51Z","closed_at":"2017-08-22T18:14:04Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":" - what happened,\r\n\r\nUpon startup syncthing pauses shares with the above error message which can also be found in the logs (one is attached). Resuming is not possible as they will get stopped again with the same error message. Storage space is plenty on this device and on the other nodes which are running the same version albeit on other Oses.\r\n\r\n - what you expected to happen instead, and\r\n\r\nNormal starup.\r\n\r\n - any steps to reproduce the problem.\r\n\r\nI am not sure whether this is easily reproducable or whether it is the specific version or OS combination. I am willing to debug this further with directions.\r\n\r\nThe log file has been edited so that keys and share names have been renamed/removed. Otherwise it is provided as is.\r\n\r\n\r\n\r\n### Version Information\r\n\r\nSyncthing Version: v0.14.37-rc.2\r\nOS Version: OpenBSD 6.1-current\r\nBrowser Version: N/A\r\n\r\n### Logfile\r\n\r\n[NPNSQ] 18:51:53 INFO: syncthing v0.14.37-rc.2 \"Dysprosium Dragonfly\" (go1.9rc2 openbsd-amd64) teamcity@build.syncthing.net 2017-08-22 06:48:25 UTC\r\n[NPNSQ] 18:51:53 INFO: My ID: xxxxxxxx\r\n[NPNSQ] 18:51:54 INFO: Single thread SHA256 performance is 47 MB/s using minio/sha256-simd (41 MB/s using crypto/sha256).\r\n[NPNSQ] 18:51:55 INFO: Hashing performance with weak hash is 40.15 MB/s\r\n[NPNSQ] 18:51:55 INFO: Hashing performance without weak hash is 45.48 MB/s\r\n[NPNSQ] 18:51:55 INFO: Weak hash enabled, as it has an acceptable performance impact.\r\n[NPNSQ] 18:51:55 VERBOSE: Starting up (/home/ckeen/.config/syncthing)\r\n[NPNSQ] 18:51:56 INFO: Starting deadlock detector with 20m0s timeout\r\n[NPNSQ] 18:51:56 INFO: Ready to synchronize \"foo\" (readwrite)\r\n[NPNSQ] 18:51:56 INFO: Ready to synchronize default (readwrite)\r\n[NPNSQ] 18:51:56 INFO: Ready to synchronize bar (readwrite)\r\n[NPNSQ] 18:51:56 WARNING: Stopping folder \"foo\" - failed to check available storage space\r\n[NPNSQ] 18:51:56 INFO: Stopping folder \"foo\" due to error: failed to check available storage space\r\n[NPNSQ] 18:51:56 INFO: Failed initial scan (rw) of \"foo\"\r\n[NPNSQ] 18:51:56 VERBOSE: Folder \"foo\" is now error\r\n[NPNSQ] 18:51:56 WARNING: Stopping folder default - failed to check available storage space\r\n[NPNSQ] 18:51:56 INFO: Stopping folder default due to error: failed to check available storage space\r\n[NPNSQ] 18:51:56 INFO: Failed initial scan (rw) of default\r\n[NPNSQ] 18:51:56 VERBOSE: Folder \"default\" is now error\r\n[NPNSQ] 18:51:56 WARNING: Stopping folder bar - failed to check available storage space\r\n[NPNSQ] 18:51:56 INFO: Stopping folder bar due to error: failed to check available storage space\r\n[NPNSQ] 18:51:56 INFO: Failed initial scan (rw) of bar\r\n[NPNSQ] 18:51:56 VERBOSE: Folder \"bar\" is now error\r\n[NPNSQ] 18:51:56 INFO: Send rate is unlimited, receive rate is unlimited\r\n[NPNSQ] 18:51:56 INFO: Rate limits do not apply to LAN connections\r\n[NPNSQ] 18:51:56 INFO: Using discovery server https://discovery-v4-2.syncthing.net/v2/?id=xxx\r\n[NPNSQ] 18:51:56 INFO: Using discovery server https://discovery-v4-3.syncthing.net/v2/?id=xxx\r\n[NPNSQ] 18:51:56 INFO: Using discovery server https://discovery-v4-4.syncthing.net/v2/?id=xxx\r\n[NPNSQ] 18:51:56 INFO: Using discovery server https://discovery-v6-2.syncthing.net/v2/?id=xxx\r\n[NPNSQ] 18:51:56 INFO: Using discovery server https://discovery-v6-3.syncthing.net/v2/?id=xxx\r\n[NPNSQ] 18:51:56 INFO: Using discovery server https://discovery-v6-4.syncthing.net/v2/?id=xxx\r\n[NPNSQ] 18:51:56 INFO: TCP listener (0.0.0.0:22000) starting\r\n[NPNSQ] 18:51:56 VERBOSE: Discovered device XXX at [tcp://192.168.178.20:22000]\r\n[NPNSQ] 18:51:56 INFO: GUI and API listening on 127.0.0.1:8384\r\n[NPNSQ] 18:51:56 INFO: Access the GUI via the following URL: http://127.0.0.1:8384/\r\n[NPNSQ] 18:51:56 INFO: Device XXX is \"baz\" at [dynamic]\r\n[NPNSQ] 18:51:56 INFO: Device XXX is \"quux\" at [dynamic]\r\n[NPNSQ] 18:51:56 INFO: Device XXX is \"localhost\" at [dynamic]\r\n[NPNSQ] 18:51:56 INFO: Device XXX is \"bar\" at [dynamic]\r\n[NPNSQ] 18:51:56 INFO: Device XXX is \"me\" at [dynamic]\r\n[NPNSQ] 18:51:56 INFO: Anonymous usage reporting is always enabled for candidate releases.\r\n[NPNSQ] 18:51:56 INFO: Automatic upgrade is always enabled for candidate releases.\r\n[NPNSQ] 18:51:56 VERBOSE: Startup complete\r\n[NPNSQ] 18:51:56 INFO: Starting usage reporting\r\n[NPNSQ] 18:51:57 INFO: Skipping pull of \"foo\" due to folder error: failed to check available storage space\r\n[NPNSQ] 18:51:57 INFO: Skipping pull of bar due to folder error: failed to check available storage space\r\n[NPNSQ] 18:51:57 INFO: Skipping pull of default due to folder error: failed to check available storage space\r\n[NPNSQ] 18:52:07 INFO: Skipping pull of \"foo\" due to folder error: failed to check available storage space\r\n[NPNSQ] 18:52:07 INFO: Joined relay relay://51.15.52.244:22067\r\n[NPNSQ] 18:52:07 INFO: Skipping pull of default due to folder error: failed to check available storage space\r\n[NPNSQ] 18:52:07 INFO: Skipping pull of bar due to folder error: failed to check available storage space\r\n[NPNSQ] 18:52:07 INFO: Detected 0 NAT devices\r\n[NPNSQ] 18:52:10 INFO: set tcp 192.168.178.24:46700->192.168.178.20:22000: protocol not available\r\n[NPNSQ] 18:52:11 INFO: Established secure connection to XXX at 192.168.178.24:46700-192.168.178.20:22000 (tcp-client) (TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305)\r\n[NPNSQ] 18:52:11 INFO: Device XXX client is \"syncthing v0.14.37-rc.2\" named \"quux\"\r\n[NPNSQ] 18:52:11 INFO: Skipping pull of bar due to folder error: failed to check available storage space\r\n[NPNSQ] 18:52:11 INFO: Skipping pull of default due to folder error: failed to check available storage space\r\n[NPNSQ] 18:52:11 INFO: Skipping pull of \"foo\" due to folder error: failed to check available storage space\r\n[NPNSQ] 18:52:13 VERBOSE: Summary for folder \"default\" is map[globalFiles:3604 needDirectories:1136 inSyncFiles:0 needFiles:3604 sequence:10598 needSymlinks:1 localDirectories:0 localSymlinks:0 globalBytes:2002212482 localBytes:0 state:error globalDirectories:1136 inSyncBytes:0 version:10598 localFiles:0 needBytes:2002212482 localDeleted:0 error:failed to check available storage space globalSymlinks:1 needDeletes:0 globalDeleted:1552]\r\n[NPNSQ] 18:52:13 VERBOSE: Completion for folder \"default\" on device XXX is 100%\r\n[NPNSQ] 18:52:13 VERBOSE: Summary for folder \"bar\" is map[localSymlinks:0 localBytes:0 globalFiles:56 globalSymlinks:0 globalBytes:357916046 needBytes:357916046 state:error globalDirectories:4 needDirectories:4 sequence:104 needFiles:56 error:failed to check available storage space localDeleted:0 globalDeleted:16 needDeletes:0 localFiles:0 localDirectories:0 needSymlinks:0 inSyncBytes:0 inSyncFiles:0 version:104]\r\n[NPNSQ] 18:52:13 VERBOSE: Completion for folder \"bar\" on device XXX is 100%\r\n[NPNSQ] 18:52:13 VERBOSE: Summary for folder \"m59k9-mvdrj\" is map[globalBytes:14863233 globalDirectories:0 localDeleted:0 inSyncBytes:0 localBytes:0 localFiles:0 globalSymlinks:0 localSymlinks:0 version:47 needDeletes:0 globalDeleted:11 needSymlinks:0 globalFiles:1 needBytes:14863233 inSyncFiles:0 error:failed to check available storage space localDirectories:0 needDirectories:0 sequence:47 needFiles:1 state:error]\r\n[NPNSQ] 18:52:13 VERBOSE: Completion for folder \"m59k9-mvdrj\" on device XXX is 100%\r\n[NPNSQ] 18:52:16 VERBOSE: Listen address dynamic+https://relays.syncthing.net/endpoint resolution has changed: lan addresses: [relay://51.15.52.244:22067/?id=XXX&pingInterval=1m0s&networkTimeout=2m0s&sessionLimitBps=0&globalLimitBps=0&statusAddr=:22070&providedBy=] wan addresses: [relay://51.15.52.244:22067/?id=XXX&pingInterval=1m0s&networkTimeout=2m0s&sessionLimitBps=0&globalLimitBps=0&statusAddr=:22070&providedBy=]\r\n[NPNSQ] 18:52:21 INFO: Skipping pull of \"foo\" due to folder error: failed to check available storage space\r\n[NPNSQ] 18:52:21 INFO: Skipping pull of default due to folder error: failed to check available storage space\r\n[NPNSQ] 18:52:21 INFO: Skipping pull of bar due to folder error: failed to check available storage space\r\n[NPNSQ] 18:52:31 INFO: Skipping pull of \"foo\" due to folder error: failed to check available storage space\r\n[NPNSQ] 18:52:31 INFO: Skipping pull of bar due to folder error: failed to check available storage space\r\n[NPNSQ] 18:52:31 INFO: Skipping pull of default due to folder error: failed to check available storage space\r\n[NPNSQ] 18:52:41 INFO: Skipping pull of default due to folder error: failed to check available storage space\r\n[NPNSQ] 18:52:41 INFO: Skipping pull of \"foo\" due to folder error: failed to check available storage space\r\n[NPNSQ] 18:52:41 INFO: Skipping pull of bar due to folder error: failed to check available storage space\r\n\r\n\r\n","closed_by":{"login":"st-review","id":16196517,"node_id":"MDQ6VXNlcjE2MTk2NTE3","avatar_url":"https://avatars.githubusercontent.com/u/16196517?v=4","gravatar_id":"","url":"https://api.github.com/users/st-review","html_url":"https://github.com/st-review","followers_url":"https://api.github.com/users/st-review/followers","following_url":"https://api.github.com/users/st-review/following{/other_user}","gists_url":"https://api.github.com/users/st-review/gists{/gist_id}","starred_url":"https://api.github.com/users/st-review/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/st-review/subscriptions","organizations_url":"https://api.github.com/users/st-review/orgs","repos_url":"https://api.github.com/users/st-review/repos","events_url":"https://api.github.com/users/st-review/events{/privacy}","received_events_url":"https://api.github.com/users/st-review/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/4321/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/syncthing/syncthing/issues/4321/timeline","performed_via_github_app":null,"state_reason":"completed"}