[{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/275176454","html_url":"https://github.com/syncthing/syncthing/issues/3933#issuecomment-275176454","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/3933","id":275176454,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NTE3NjQ1NA==","user":{"login":"imsodin","id":15955093,"node_id":"MDQ6VXNlcjE1OTU1MDkz","avatar_url":"https://avatars.githubusercontent.com/u/15955093?v=4","gravatar_id":"","url":"https://api.github.com/users/imsodin","html_url":"https://github.com/imsodin","followers_url":"https://api.github.com/users/imsodin/followers","following_url":"https://api.github.com/users/imsodin/following{/other_user}","gists_url":"https://api.github.com/users/imsodin/gists{/gist_id}","starred_url":"https://api.github.com/users/imsodin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imsodin/subscriptions","organizations_url":"https://api.github.com/users/imsodin/orgs","repos_url":"https://api.github.com/users/imsodin/repos","events_url":"https://api.github.com/users/imsodin/events{/privacy}","received_events_url":"https://api.github.com/users/imsodin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-25T17:35:54Z","updated_at":"2017-01-25T17:35:54Z","body":"Actually, filtering isn't enough. The ping events suppress any \"real\" events after only 15min. Either ping events should be filtered out in \"syncthing-core\" (i.e. not GUI) or ensuring that the call returns after a minute should be done by other means than subscribing to ping events.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/275176454/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"imsodin","id":15955093,"node_id":"MDQ6VXNlcjE1OTU1MDkz","avatar_url":"https://avatars.githubusercontent.com/u/15955093?v=4","gravatar_id":"","url":"https://api.github.com/users/imsodin","html_url":"https://github.com/imsodin","followers_url":"https://api.github.com/users/imsodin/followers","following_url":"https://api.github.com/users/imsodin/following{/other_user}","gists_url":"https://api.github.com/users/imsodin/gists{/gist_id}","starred_url":"https://api.github.com/users/imsodin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imsodin/subscriptions","organizations_url":"https://api.github.com/users/imsodin/orgs","repos_url":"https://api.github.com/users/imsodin/repos","events_url":"https://api.github.com/users/imsodin/events{/privacy}","received_events_url":"https://api.github.com/users/imsodin/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/275176983","html_url":"https://github.com/syncthing/syncthing/issues/3933#issuecomment-275176983","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/3933","id":275176983,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NTE3Njk4Mw==","user":{"login":"canton7","id":568104,"node_id":"MDQ6VXNlcjU2ODEwNA==","avatar_url":"https://avatars.githubusercontent.com/u/568104?v=4","gravatar_id":"","url":"https://api.github.com/users/canton7","html_url":"https://github.com/canton7","followers_url":"https://api.github.com/users/canton7/followers","following_url":"https://api.github.com/users/canton7/following{/other_user}","gists_url":"https://api.github.com/users/canton7/gists{/gist_id}","starred_url":"https://api.github.com/users/canton7/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/canton7/subscriptions","organizations_url":"https://api.github.com/users/canton7/orgs","repos_url":"https://api.github.com/users/canton7/repos","events_url":"https://api.github.com/users/canton7/events{/privacy}","received_events_url":"https://api.github.com/users/canton7/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-25T17:37:45Z","updated_at":"2017-01-25T17:38:03Z","body":"... the background to adding the ping events in is that otherwise the http request sits there for ages, before being terminated by the browser / a reverse proxy / anti-malware / etc. At that point the GUI thinks that everything's fallen over and shows the red \"Syncthing is not functioning properly\" dialog which can't be dismissed.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/275176983/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"canton7","id":568104,"node_id":"MDQ6VXNlcjU2ODEwNA==","avatar_url":"https://avatars.githubusercontent.com/u/568104?v=4","gravatar_id":"","url":"https://api.github.com/users/canton7","html_url":"https://github.com/canton7","followers_url":"https://api.github.com/users/canton7/followers","following_url":"https://api.github.com/users/canton7/following{/other_user}","gists_url":"https://api.github.com/users/canton7/gists{/gist_id}","starred_url":"https://api.github.com/users/canton7/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/canton7/subscriptions","organizations_url":"https://api.github.com/users/canton7/orgs","repos_url":"https://api.github.com/users/canton7/repos","events_url":"https://api.github.com/users/canton7/events{/privacy}","received_events_url":"https://api.github.com/users/canton7/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/275177907","html_url":"https://github.com/syncthing/syncthing/issues/3933#issuecomment-275177907","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/3933","id":275177907,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NTE3NzkwNw==","user":{"login":"canton7","id":568104,"node_id":"MDQ6VXNlcjU2ODEwNA==","avatar_url":"https://avatars.githubusercontent.com/u/568104?v=4","gravatar_id":"","url":"https://api.github.com/users/canton7","html_url":"https://github.com/canton7","followers_url":"https://api.github.com/users/canton7/followers","following_url":"https://api.github.com/users/canton7/following{/other_user}","gists_url":"https://api.github.com/users/canton7/gists{/gist_id}","starred_url":"https://api.github.com/users/canton7/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/canton7/subscriptions","organizations_url":"https://api.github.com/users/canton7/orgs","repos_url":"https://api.github.com/users/canton7/repos","events_url":"https://api.github.com/users/canton7/events{/privacy}","received_events_url":"https://api.github.com/users/canton7/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-25T17:40:50Z","updated_at":"2017-01-25T17:40:50Z","body":"It sounds like it's wrong that `/events/disk` is a blocking (long-polling) call? Instead it should return straight away if there are no events?","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/275177907/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"canton7","id":568104,"node_id":"MDQ6VXNlcjU2ODEwNA==","avatar_url":"https://avatars.githubusercontent.com/u/568104?v=4","gravatar_id":"","url":"https://api.github.com/users/canton7","html_url":"https://github.com/canton7","followers_url":"https://api.github.com/users/canton7/followers","following_url":"https://api.github.com/users/canton7/following{/other_user}","gists_url":"https://api.github.com/users/canton7/gists{/gist_id}","starred_url":"https://api.github.com/users/canton7/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/canton7/subscriptions","organizations_url":"https://api.github.com/users/canton7/orgs","repos_url":"https://api.github.com/users/canton7/repos","events_url":"https://api.github.com/users/canton7/events{/privacy}","received_events_url":"https://api.github.com/users/canton7/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/275179416","html_url":"https://github.com/syncthing/syncthing/issues/3933#issuecomment-275179416","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/3933","id":275179416,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NTE3OTQxNg==","user":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-25T17:46:02Z","updated_at":"2017-01-25T17:46:12Z","body":"If it's an event endpoint, it should behave like the other event endpoint. The bug seems to be that the code that reads it doesn't parse events like we do with the regular endpoint. ","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/275179416/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/275179716","html_url":"https://github.com/syncthing/syncthing/issues/3933#issuecomment-275179716","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/3933","id":275179716,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NTE3OTcxNg==","user":{"login":"canton7","id":568104,"node_id":"MDQ6VXNlcjU2ODEwNA==","avatar_url":"https://avatars.githubusercontent.com/u/568104?v=4","gravatar_id":"","url":"https://api.github.com/users/canton7","html_url":"https://github.com/canton7","followers_url":"https://api.github.com/users/canton7/followers","following_url":"https://api.github.com/users/canton7/following{/other_user}","gists_url":"https://api.github.com/users/canton7/gists{/gist_id}","starred_url":"https://api.github.com/users/canton7/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/canton7/subscriptions","organizations_url":"https://api.github.com/users/canton7/orgs","repos_url":"https://api.github.com/users/canton7/repos","events_url":"https://api.github.com/users/canton7/events{/privacy}","received_events_url":"https://api.github.com/users/canton7/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-25T17:47:04Z","updated_at":"2017-01-25T17:47:04Z","body":"Well, the code that reads it wants to fetch a list of the 25 most recent disk events. The issue that @imsodin mentioned is that if these events occur infrequently, the event subscription fills up with pings, which displace the disk events.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/275179716/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"canton7","id":568104,"node_id":"MDQ6VXNlcjU2ODEwNA==","avatar_url":"https://avatars.githubusercontent.com/u/568104?v=4","gravatar_id":"","url":"https://api.github.com/users/canton7","html_url":"https://github.com/canton7","followers_url":"https://api.github.com/users/canton7/followers","following_url":"https://api.github.com/users/canton7/following{/other_user}","gists_url":"https://api.github.com/users/canton7/gists{/gist_id}","starred_url":"https://api.github.com/users/canton7/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/canton7/subscriptions","organizations_url":"https://api.github.com/users/canton7/orgs","repos_url":"https://api.github.com/users/canton7/repos","events_url":"https://api.github.com/users/canton7/events{/privacy}","received_events_url":"https://api.github.com/users/canton7/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":936540775,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50OTM2NTQwNzc1","url":"https://api.github.com/repos/syncthing/syncthing/issues/events/936540775","actor":{"login":"imsodin","id":15955093,"node_id":"MDQ6VXNlcjE1OTU1MDkz","avatar_url":"https://avatars.githubusercontent.com/u/15955093?v=4","gravatar_id":"","url":"https://api.github.com/users/imsodin","html_url":"https://github.com/imsodin","followers_url":"https://api.github.com/users/imsodin/followers","following_url":"https://api.github.com/users/imsodin/following{/other_user}","gists_url":"https://api.github.com/users/imsodin/gists{/gist_id}","starred_url":"https://api.github.com/users/imsodin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imsodin/subscriptions","organizations_url":"https://api.github.com/users/imsodin/orgs","repos_url":"https://api.github.com/users/imsodin/repos","events_url":"https://api.github.com/users/imsodin/events{/privacy}","received_events_url":"https://api.github.com/users/imsodin/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2017-01-25T17:47:04Z","performed_via_github_app":null},{"id":936540776,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDkzNjU0MDc3Ng==","url":"https://api.github.com/repos/syncthing/syncthing/issues/events/936540776","actor":{"login":"imsodin","id":15955093,"node_id":"MDQ6VXNlcjE1OTU1MDkz","avatar_url":"https://avatars.githubusercontent.com/u/15955093?v=4","gravatar_id":"","url":"https://api.github.com/users/imsodin","html_url":"https://github.com/imsodin","followers_url":"https://api.github.com/users/imsodin/followers","following_url":"https://api.github.com/users/imsodin/following{/other_user}","gists_url":"https://api.github.com/users/imsodin/gists{/gist_id}","starred_url":"https://api.github.com/users/imsodin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imsodin/subscriptions","organizations_url":"https://api.github.com/users/imsodin/orgs","repos_url":"https://api.github.com/users/imsodin/repos","events_url":"https://api.github.com/users/imsodin/events{/privacy}","received_events_url":"https://api.github.com/users/imsodin/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2017-01-25T17:47:04Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/275180283","html_url":"https://github.com/syncthing/syncthing/issues/3933#issuecomment-275180283","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/3933","id":275180283,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NTE4MDI4Mw==","user":{"login":"canton7","id":568104,"node_id":"MDQ6VXNlcjU2ODEwNA==","avatar_url":"https://avatars.githubusercontent.com/u/568104?v=4","gravatar_id":"","url":"https://api.github.com/users/canton7","html_url":"https://github.com/canton7","followers_url":"https://api.github.com/users/canton7/followers","following_url":"https://api.github.com/users/canton7/following{/other_user}","gists_url":"https://api.github.com/users/canton7/gists{/gist_id}","starred_url":"https://api.github.com/users/canton7/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/canton7/subscriptions","organizations_url":"https://api.github.com/users/canton7/orgs","repos_url":"https://api.github.com/users/canton7/repos","events_url":"https://api.github.com/users/canton7/events{/privacy}","received_events_url":"https://api.github.com/users/canton7/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-25T17:49:07Z","updated_at":"2017-01-27T15:18:41Z","body":"~~Also, looking at the code, [this wait](https://github.com/syncthing/syncthing/blob/master/lib/events/events.go#L327) will surely cause issues when two subscribers are fetching events at the same time, since one subscriber can lock out the other?~~","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/275180283/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"canton7","id":568104,"node_id":"MDQ6VXNlcjU2ODEwNA==","avatar_url":"https://avatars.githubusercontent.com/u/568104?v=4","gravatar_id":"","url":"https://api.github.com/users/canton7","html_url":"https://github.com/canton7","followers_url":"https://api.github.com/users/canton7/followers","following_url":"https://api.github.com/users/canton7/following{/other_user}","gists_url":"https://api.github.com/users/canton7/gists{/gist_id}","starred_url":"https://api.github.com/users/canton7/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/canton7/subscriptions","organizations_url":"https://api.github.com/users/canton7/orgs","repos_url":"https://api.github.com/users/canton7/repos","events_url":"https://api.github.com/users/canton7/events{/privacy}","received_events_url":"https://api.github.com/users/canton7/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/275183151","html_url":"https://github.com/syncthing/syncthing/issues/3933#issuecomment-275183151","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/3933","id":275183151,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NTE4MzE1MQ==","user":{"login":"AudriusButkevicius","id":1144861,"node_id":"MDQ6VXNlcjExNDQ4NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1144861?v=4","gravatar_id":"","url":"https://api.github.com/users/AudriusButkevicius","html_url":"https://github.com/AudriusButkevicius","followers_url":"https://api.github.com/users/AudriusButkevicius/followers","following_url":"https://api.github.com/users/AudriusButkevicius/following{/other_user}","gists_url":"https://api.github.com/users/AudriusButkevicius/gists{/gist_id}","starred_url":"https://api.github.com/users/AudriusButkevicius/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AudriusButkevicius/subscriptions","organizations_url":"https://api.github.com/users/AudriusButkevicius/orgs","repos_url":"https://api.github.com/users/AudriusButkevicius/repos","events_url":"https://api.github.com/users/AudriusButkevicius/events{/privacy}","received_events_url":"https://api.github.com/users/AudriusButkevicius/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-25T17:58:53Z","updated_at":"2017-01-25T17:58:53Z","body":"It's also sad that the pings might replace the list of 25 last items or whatever.\r\nI'd rather somehow ignored timeouts/non-200s for that endpoint and leave it was it was?","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/275183151/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"AudriusButkevicius","id":1144861,"node_id":"MDQ6VXNlcjExNDQ4NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1144861?v=4","gravatar_id":"","url":"https://api.github.com/users/AudriusButkevicius","html_url":"https://github.com/AudriusButkevicius","followers_url":"https://api.github.com/users/AudriusButkevicius/followers","following_url":"https://api.github.com/users/AudriusButkevicius/following{/other_user}","gists_url":"https://api.github.com/users/AudriusButkevicius/gists{/gist_id}","starred_url":"https://api.github.com/users/AudriusButkevicius/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AudriusButkevicius/subscriptions","organizations_url":"https://api.github.com/users/AudriusButkevicius/orgs","repos_url":"https://api.github.com/users/AudriusButkevicius/repos","events_url":"https://api.github.com/users/AudriusButkevicius/events{/privacy}","received_events_url":"https://api.github.com/users/AudriusButkevicius/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/275184021","html_url":"https://github.com/syncthing/syncthing/issues/3933#issuecomment-275184021","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/3933","id":275184021,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NTE4NDAyMQ==","user":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-25T18:01:54Z","updated_at":"2017-01-25T18:02:00Z","body":"I don't understand what you guys are even talking about. The event subscription code is the same as for the normal endpoint. It handles multiple readers just fine without them blocking each other. The disk subscription has a buffer of 1000 events, like the normal endpoint. If the javascript side only looks at the last 25 and doesn't look at the event type, then it's buggy and needs fixing, no?","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/275184021/reactions","total_count":1,"+1":0,"-1":0,"laugh":0,"hooray":1,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/275184766","html_url":"https://github.com/syncthing/syncthing/issues/3933#issuecomment-275184766","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/3933","id":275184766,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NTE4NDc2Ng==","user":{"login":"AudriusButkevicius","id":1144861,"node_id":"MDQ6VXNlcjExNDQ4NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1144861?v=4","gravatar_id":"","url":"https://api.github.com/users/AudriusButkevicius","html_url":"https://github.com/AudriusButkevicius","followers_url":"https://api.github.com/users/AudriusButkevicius/followers","following_url":"https://api.github.com/users/AudriusButkevicius/following{/other_user}","gists_url":"https://api.github.com/users/AudriusButkevicius/gists{/gist_id}","starred_url":"https://api.github.com/users/AudriusButkevicius/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AudriusButkevicius/subscriptions","organizations_url":"https://api.github.com/users/AudriusButkevicius/orgs","repos_url":"https://api.github.com/users/AudriusButkevicius/repos","events_url":"https://api.github.com/users/AudriusButkevicius/events{/privacy}","received_events_url":"https://api.github.com/users/AudriusButkevicius/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-25T18:04:40Z","updated_at":"2017-01-25T18:04:40Z","body":"Sure, my argument is that if you had syncthing running for days, and no changes happened within the last 1000 minutes, you'd have no clue what the changes were (even though technically you should be able to)","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/275184766/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"AudriusButkevicius","id":1144861,"node_id":"MDQ6VXNlcjExNDQ4NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1144861?v=4","gravatar_id":"","url":"https://api.github.com/users/AudriusButkevicius","html_url":"https://github.com/AudriusButkevicius","followers_url":"https://api.github.com/users/AudriusButkevicius/followers","following_url":"https://api.github.com/users/AudriusButkevicius/following{/other_user}","gists_url":"https://api.github.com/users/AudriusButkevicius/gists{/gist_id}","starred_url":"https://api.github.com/users/AudriusButkevicius/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AudriusButkevicius/subscriptions","organizations_url":"https://api.github.com/users/AudriusButkevicius/orgs","repos_url":"https://api.github.com/users/AudriusButkevicius/repos","events_url":"https://api.github.com/users/AudriusButkevicius/events{/privacy}","received_events_url":"https://api.github.com/users/AudriusButkevicius/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/275185488","html_url":"https://github.com/syncthing/syncthing/issues/3933#issuecomment-275185488","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/3933","id":275185488,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NTE4NTQ4OA==","user":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-25T18:07:07Z","updated_at":"2017-01-25T18:07:07Z","body":"That's fair. But then the right solution to that problem is not an event endpoint, but some sort of persisted log of recent actions that can be retrieved. The event system is not that.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/275185488/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/275189936","html_url":"https://github.com/syncthing/syncthing/issues/3933#issuecomment-275189936","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/3933","id":275189936,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NTE4OTkzNg==","user":{"login":"canton7","id":568104,"node_id":"MDQ6VXNlcjU2ODEwNA==","avatar_url":"https://avatars.githubusercontent.com/u/568104?v=4","gravatar_id":"","url":"https://api.github.com/users/canton7","html_url":"https://github.com/canton7","followers_url":"https://api.github.com/users/canton7/followers","following_url":"https://api.github.com/users/canton7/following{/other_user}","gists_url":"https://api.github.com/users/canton7/gists{/gist_id}","starred_url":"https://api.github.com/users/canton7/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/canton7/subscriptions","organizations_url":"https://api.github.com/users/canton7/orgs","repos_url":"https://api.github.com/users/canton7/repos","events_url":"https://api.github.com/users/canton7/events{/privacy}","received_events_url":"https://api.github.com/users/canton7/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-25T18:23:40Z","updated_at":"2017-01-25T18:23:40Z","body":"I was playing about with the idea of scrapping the Ping events, and instead having a timeout (specified in a query parameter) when someone wants to fetch events. So someone can say \"give me all disk events, or wait for X seconds if there aren't any available right now\". \r\n\r\nUnfortunately my go-foo and knowledge of channels isn't up to it, at least tonight.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/275189936/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"canton7","id":568104,"node_id":"MDQ6VXNlcjU2ODEwNA==","avatar_url":"https://avatars.githubusercontent.com/u/568104?v=4","gravatar_id":"","url":"https://api.github.com/users/canton7","html_url":"https://github.com/canton7","followers_url":"https://api.github.com/users/canton7/followers","following_url":"https://api.github.com/users/canton7/following{/other_user}","gists_url":"https://api.github.com/users/canton7/gists{/gist_id}","starred_url":"https://api.github.com/users/canton7/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/canton7/subscriptions","organizations_url":"https://api.github.com/users/canton7/orgs","repos_url":"https://api.github.com/users/canton7/repos","events_url":"https://api.github.com/users/canton7/events{/privacy}","received_events_url":"https://api.github.com/users/canton7/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/275191021","html_url":"https://github.com/syncthing/syncthing/issues/3933#issuecomment-275191021","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/3933","id":275191021,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NTE5MTAyMQ==","user":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-25T18:27:46Z","updated_at":"2017-01-25T18:39:31Z","body":"Yeah the `bufferedSubscription` doesn't have a timeout concept unfortunately, because the `sync.Cond` doesn't. The non-buffered one does because it's channel based and there it's easy to timeout.\r\n\r\nOtherwise I'd be fine with your idea. The timeout would be in the hands of the client, and we can simply return with a `204 No Content` when it expires, or something like that. I'm sure it's doable to add a timeout to the bufferedSubscription API. Worst case I could imagine the `pollingLoop` using a shorter timeout in it's `s.sub.Poll` and broadcasting on the `cond` on every loop.\r\n\r\nThe waiting `Since` calls would then wake up, check if they have reached their deadline or if they got any new events, and proceed accordingly.\r\n\r\nIf existing clients are fine with a call returning no events this could be backwards compatible, if we default a missing `?timeout=` parameter to 60s.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/275191021/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/275248191","html_url":"https://github.com/syncthing/syncthing/issues/3933#issuecomment-275248191","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/3933","id":275248191,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NTI0ODE5MQ==","user":{"login":"canton7","id":568104,"node_id":"MDQ6VXNlcjU2ODEwNA==","avatar_url":"https://avatars.githubusercontent.com/u/568104?v=4","gravatar_id":"","url":"https://api.github.com/users/canton7","html_url":"https://github.com/canton7","followers_url":"https://api.github.com/users/canton7/followers","following_url":"https://api.github.com/users/canton7/following{/other_user}","gists_url":"https://api.github.com/users/canton7/gists{/gist_id}","starred_url":"https://api.github.com/users/canton7/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/canton7/subscriptions","organizations_url":"https://api.github.com/users/canton7/orgs","repos_url":"https://api.github.com/users/canton7/repos","events_url":"https://api.github.com/users/canton7/events{/privacy}","received_events_url":"https://api.github.com/users/canton7/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-25T22:07:49Z","updated_at":"2017-01-27T15:19:05Z","body":"I think returning an empty json array with a 200 would be better for compatibility, and is semantically fine as well (\"no events\" is a perfectly correct answer, and I'm doesn't need a special status code). \r\n\r\nYeah signalling that cond be an option: not the neatest, but not terrible. ~~I'm really wary of holding the lock while waiting for the timeout though: I'm fairly sure I could lock out one subscriber by making a request with 'since' set to a very large number?~~","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/275248191/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"canton7","id":568104,"node_id":"MDQ6VXNlcjU2ODEwNA==","avatar_url":"https://avatars.githubusercontent.com/u/568104?v=4","gravatar_id":"","url":"https://api.github.com/users/canton7","html_url":"https://github.com/canton7","followers_url":"https://api.github.com/users/canton7/followers","following_url":"https://api.github.com/users/canton7/following{/other_user}","gists_url":"https://api.github.com/users/canton7/gists{/gist_id}","starred_url":"https://api.github.com/users/canton7/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/canton7/subscriptions","organizations_url":"https://api.github.com/users/canton7/orgs","repos_url":"https://api.github.com/users/canton7/repos","events_url":"https://api.github.com/users/canton7/events{/privacy}","received_events_url":"https://api.github.com/users/canton7/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/275249386","html_url":"https://github.com/syncthing/syncthing/issues/3933#issuecomment-275249386","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/3933","id":275249386,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NTI0OTM4Ng==","user":{"login":"imsodin","id":15955093,"node_id":"MDQ6VXNlcjE1OTU1MDkz","avatar_url":"https://avatars.githubusercontent.com/u/15955093?v=4","gravatar_id":"","url":"https://api.github.com/users/imsodin","html_url":"https://github.com/imsodin","followers_url":"https://api.github.com/users/imsodin/followers","following_url":"https://api.github.com/users/imsodin/following{/other_user}","gists_url":"https://api.github.com/users/imsodin/gists{/gist_id}","starred_url":"https://api.github.com/users/imsodin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imsodin/subscriptions","organizations_url":"https://api.github.com/users/imsodin/orgs","repos_url":"https://api.github.com/users/imsodin/repos","events_url":"https://api.github.com/users/imsodin/events{/privacy}","received_events_url":"https://api.github.com/users/imsodin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-25T22:12:17Z","updated_at":"2017-01-25T22:12:17Z","body":"`cond.Wait()` does not lock. It releases the lock until it returns due to `cond.Broadcast()`. So multiple waiting requests can be there at the same time.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/275249386/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"imsodin","id":15955093,"node_id":"MDQ6VXNlcjE1OTU1MDkz","avatar_url":"https://avatars.githubusercontent.com/u/15955093?v=4","gravatar_id":"","url":"https://api.github.com/users/imsodin","html_url":"https://github.com/imsodin","followers_url":"https://api.github.com/users/imsodin/followers","following_url":"https://api.github.com/users/imsodin/following{/other_user}","gists_url":"https://api.github.com/users/imsodin/gists{/gist_id}","starred_url":"https://api.github.com/users/imsodin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imsodin/subscriptions","organizations_url":"https://api.github.com/users/imsodin/orgs","repos_url":"https://api.github.com/users/imsodin/repos","events_url":"https://api.github.com/users/imsodin/events{/privacy}","received_events_url":"https://api.github.com/users/imsodin/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/275249500","html_url":"https://github.com/syncthing/syncthing/issues/3933#issuecomment-275249500","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/3933","id":275249500,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NTI0OTUwMA==","user":{"login":"nrm21","id":15898046,"node_id":"MDQ6VXNlcjE1ODk4MDQ2","avatar_url":"https://avatars.githubusercontent.com/u/15898046?v=4","gravatar_id":"","url":"https://api.github.com/users/nrm21","html_url":"https://github.com/nrm21","followers_url":"https://api.github.com/users/nrm21/followers","following_url":"https://api.github.com/users/nrm21/following{/other_user}","gists_url":"https://api.github.com/users/nrm21/gists{/gist_id}","starred_url":"https://api.github.com/users/nrm21/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nrm21/subscriptions","organizations_url":"https://api.github.com/users/nrm21/orgs","repos_url":"https://api.github.com/users/nrm21/repos","events_url":"https://api.github.com/users/nrm21/events{/privacy}","received_events_url":"https://api.github.com/users/nrm21/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-25T22:12:43Z","updated_at":"2017-01-25T22:14:10Z","body":"Sorry guys jumping in late here (and sorry if stating obvious).\r\n\r\nAudrius is right.  Even if you filtered on \"type\": \"LocalChangeDetected\" instead of \"Ping\", It still wouldn't solve the problem that if you did nothing for days the (1000 entry size https://github.com/syncthing/syncthing/blob/master/cmd/syncthing/main.go#L587) buffer would fill up with ping events causing all valid changes to be forgotten.\r\n\r\nThan again maybe that's acceptable if those events are so old by then... or not.  I suspect it would be up to user tolerance for such behavior.\r\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/275249500/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"nrm21","id":15898046,"node_id":"MDQ6VXNlcjE1ODk4MDQ2","avatar_url":"https://avatars.githubusercontent.com/u/15898046?v=4","gravatar_id":"","url":"https://api.github.com/users/nrm21","html_url":"https://github.com/nrm21","followers_url":"https://api.github.com/users/nrm21/followers","following_url":"https://api.github.com/users/nrm21/following{/other_user}","gists_url":"https://api.github.com/users/nrm21/gists{/gist_id}","starred_url":"https://api.github.com/users/nrm21/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nrm21/subscriptions","organizations_url":"https://api.github.com/users/nrm21/orgs","repos_url":"https://api.github.com/users/nrm21/repos","events_url":"https://api.github.com/users/nrm21/events{/privacy}","received_events_url":"https://api.github.com/users/nrm21/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/275303276","html_url":"https://github.com/syncthing/syncthing/issues/3933#issuecomment-275303276","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/3933","id":275303276,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NTMwMzI3Ng==","user":{"login":"nrm21","id":15898046,"node_id":"MDQ6VXNlcjE1ODk4MDQ2","avatar_url":"https://avatars.githubusercontent.com/u/15898046?v=4","gravatar_id":"","url":"https://api.github.com/users/nrm21","html_url":"https://github.com/nrm21","followers_url":"https://api.github.com/users/nrm21/followers","following_url":"https://api.github.com/users/nrm21/following{/other_user}","gists_url":"https://api.github.com/users/nrm21/gists{/gist_id}","starred_url":"https://api.github.com/users/nrm21/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nrm21/subscriptions","organizations_url":"https://api.github.com/users/nrm21/orgs","repos_url":"https://api.github.com/users/nrm21/repos","events_url":"https://api.github.com/users/nrm21/events{/privacy}","received_events_url":"https://api.github.com/users/nrm21/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-26T04:04:47Z","updated_at":"2017-01-26T04:16:38Z","body":"Ok so... now later at home I can digest this further.\r\n\r\nAt the risk of sounding stupid, can someone explain to me why the disk sub needs to subscribe to ping again?  Is it just so that the disk sub times out after a min from the REST API call if no other thing happens?\r\n\r\nI don't recall this being an issue before now.  Are you saying Trayzor or ST-android or some other thing now needs to call the API and hangs when there is no activity?\r\n\r\n-----\r\n\r\nAs for fixing, how about we just make the disk sub queue 10,000 instead of 1,000 and just filter the ping events and allow the file activity to time out after 166.67 hours (almost a week assuming no activity and 1 ping event per minute for 10,000 minutes).\r\n\r\nThat might be the easiest thing, unless there are memory issues with 10k queue length.  And surely noone's going to complain about missing entries in their global log a week after the fact (assuming their client is up that long AND has had less than 25 entries of activity) right?  After all, it already starts clearing out after 25 newer entries anyway.\r\n\r\nOr maybe 5k length or some other compromise.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/275303276/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"nrm21","id":15898046,"node_id":"MDQ6VXNlcjE1ODk4MDQ2","avatar_url":"https://avatars.githubusercontent.com/u/15898046?v=4","gravatar_id":"","url":"https://api.github.com/users/nrm21","html_url":"https://github.com/nrm21","followers_url":"https://api.github.com/users/nrm21/followers","following_url":"https://api.github.com/users/nrm21/following{/other_user}","gists_url":"https://api.github.com/users/nrm21/gists{/gist_id}","starred_url":"https://api.github.com/users/nrm21/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nrm21/subscriptions","organizations_url":"https://api.github.com/users/nrm21/orgs","repos_url":"https://api.github.com/users/nrm21/repos","events_url":"https://api.github.com/users/nrm21/events{/privacy}","received_events_url":"https://api.github.com/users/nrm21/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/275322878","html_url":"https://github.com/syncthing/syncthing/issues/3933#issuecomment-275322878","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/3933","id":275322878,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NTMyMjg3OA==","user":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-26T07:20:06Z","updated_at":"2017-01-26T07:20:06Z","body":"The problem is that when there are no disk events, the call to fetch disk events can take an arbitrarily long time. At some point, *something* will timeout - the tcp connection, an intermediary proxy, etc. When that happens, the GUI Javascript gets an HTTP error and interprets this as a Syncthing failure, popping up the red \"woops, looks like Syncthing is in trouble\" modal.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/275322878/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/275334741","html_url":"https://github.com/syncthing/syncthing/issues/3933#issuecomment-275334741","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/3933","id":275334741,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NTMzNDc0MQ==","user":{"login":"imsodin","id":15955093,"node_id":"MDQ6VXNlcjE1OTU1MDkz","avatar_url":"https://avatars.githubusercontent.com/u/15955093?v=4","gravatar_id":"","url":"https://api.github.com/users/imsodin","html_url":"https://github.com/imsodin","followers_url":"https://api.github.com/users/imsodin/followers","following_url":"https://api.github.com/users/imsodin/following{/other_user}","gists_url":"https://api.github.com/users/imsodin/gists{/gist_id}","starred_url":"https://api.github.com/users/imsodin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imsodin/subscriptions","organizations_url":"https://api.github.com/users/imsodin/orgs","repos_url":"https://api.github.com/users/imsodin/repos","events_url":"https://api.github.com/users/imsodin/events{/privacy}","received_events_url":"https://api.github.com/users/imsodin/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-26T08:42:04Z","updated_at":"2017-01-26T08:42:04Z","body":"Anything speaking against calmh's and canton7's version (broadcast in every poll loop with shortened interval, test for timeout and return empty list when timed out)? Seems easy to do and much cleaner than reporting meaningless ping events just to ensure graceful returns, suppressing meaningful information in the process.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/275334741/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"imsodin","id":15955093,"node_id":"MDQ6VXNlcjE1OTU1MDkz","avatar_url":"https://avatars.githubusercontent.com/u/15955093?v=4","gravatar_id":"","url":"https://api.github.com/users/imsodin","html_url":"https://github.com/imsodin","followers_url":"https://api.github.com/users/imsodin/followers","following_url":"https://api.github.com/users/imsodin/following{/other_user}","gists_url":"https://api.github.com/users/imsodin/gists{/gist_id}","starred_url":"https://api.github.com/users/imsodin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imsodin/subscriptions","organizations_url":"https://api.github.com/users/imsodin/orgs","repos_url":"https://api.github.com/users/imsodin/repos","events_url":"https://api.github.com/users/imsodin/events{/privacy}","received_events_url":"https://api.github.com/users/imsodin/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/275346162","html_url":"https://github.com/syncthing/syncthing/issues/3933#issuecomment-275346162","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/3933","id":275346162,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NTM0NjE2Mg==","user":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-26T09:41:45Z","updated_at":"2017-01-26T09:41:45Z","body":"It reduces sleep so drives up CPU & energy usage a bit when otherwise idle. If there's a more elegant solution that would be nice. But otherwise no, I think.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/275346162/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/275351468","html_url":"https://github.com/syncthing/syncthing/issues/3933#issuecomment-275351468","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/3933","id":275351468,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NTM1MTQ2OA==","user":{"login":"canton7","id":568104,"node_id":"MDQ6VXNlcjU2ODEwNA==","avatar_url":"https://avatars.githubusercontent.com/u/568104?v=4","gravatar_id":"","url":"https://api.github.com/users/canton7","html_url":"https://github.com/canton7","followers_url":"https://api.github.com/users/canton7/followers","following_url":"https://api.github.com/users/canton7/following{/other_user}","gists_url":"https://api.github.com/users/canton7/gists{/gist_id}","starred_url":"https://api.github.com/users/canton7/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/canton7/subscriptions","organizations_url":"https://api.github.com/users/canton7/orgs","repos_url":"https://api.github.com/users/canton7/repos","events_url":"https://api.github.com/users/canton7/events{/privacy}","received_events_url":"https://api.github.com/users/canton7/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-26T10:07:17Z","updated_at":"2017-01-26T10:07:17Z","body":"I've got a working POC which doesn't kick off the broadcast periodically, but is hacky in other respects. I'll link it shortly.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/275351468/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"canton7","id":568104,"node_id":"MDQ6VXNlcjU2ODEwNA==","avatar_url":"https://avatars.githubusercontent.com/u/568104?v=4","gravatar_id":"","url":"https://api.github.com/users/canton7","html_url":"https://github.com/canton7","followers_url":"https://api.github.com/users/canton7/followers","following_url":"https://api.github.com/users/canton7/following{/other_user}","gists_url":"https://api.github.com/users/canton7/gists{/gist_id}","starred_url":"https://api.github.com/users/canton7/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/canton7/subscriptions","organizations_url":"https://api.github.com/users/canton7/orgs","repos_url":"https://api.github.com/users/canton7/repos","events_url":"https://api.github.com/users/canton7/events{/privacy}","received_events_url":"https://api.github.com/users/canton7/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/275353777","html_url":"https://github.com/syncthing/syncthing/issues/3933#issuecomment-275353777","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/3933","id":275353777,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NTM1Mzc3Nw==","user":{"login":"canton7","id":568104,"node_id":"MDQ6VXNlcjU2ODEwNA==","avatar_url":"https://avatars.githubusercontent.com/u/568104?v=4","gravatar_id":"","url":"https://api.github.com/users/canton7","html_url":"https://github.com/canton7","followers_url":"https://api.github.com/users/canton7/followers","following_url":"https://api.github.com/users/canton7/following{/other_user}","gists_url":"https://api.github.com/users/canton7/gists{/gist_id}","starred_url":"https://api.github.com/users/canton7/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/canton7/subscriptions","organizations_url":"https://api.github.com/users/canton7/orgs","repos_url":"https://api.github.com/users/canton7/repos","events_url":"https://api.github.com/users/canton7/events{/privacy}","received_events_url":"https://api.github.com/users/canton7/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-26T10:19:20Z","updated_at":"2017-01-26T10:19:20Z","body":"Here we go: https://github.com/syncthing/syncthing/compare/master...canton7:feature/event-timeout. I don't know whether it's a sensible approach, and there's still a TODO, but I'll PR it if you want.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/275353777/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"canton7","id":568104,"node_id":"MDQ6VXNlcjU2ODEwNA==","avatar_url":"https://avatars.githubusercontent.com/u/568104?v=4","gravatar_id":"","url":"https://api.github.com/users/canton7","html_url":"https://github.com/canton7","followers_url":"https://api.github.com/users/canton7/followers","following_url":"https://api.github.com/users/canton7/following{/other_user}","gists_url":"https://api.github.com/users/canton7/gists{/gist_id}","starred_url":"https://api.github.com/users/canton7/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/canton7/subscriptions","organizations_url":"https://api.github.com/users/canton7/orgs","repos_url":"https://api.github.com/users/canton7/repos","events_url":"https://api.github.com/users/canton7/events{/privacy}","received_events_url":"https://api.github.com/users/canton7/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/275356032","html_url":"https://github.com/syncthing/syncthing/issues/3933#issuecomment-275356032","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/3933","id":275356032,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NTM1NjAzMg==","user":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-26T10:30:16Z","updated_at":"2017-01-26T10:30:55Z","body":"@canton7 Unfortunately, no. The difference is that the send on the channel is not a broadcast, it only reaches one receiver. So this fails if there are two callers of `Since()` both waiting, on the same subscription, which is an entirely possible situation.\r\n\r\nClosing the channel would be a broadcast, but then you'd need to create a new channel afterwards and handle locking around that and so on.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/275356032/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":937547274,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50OTM3NTQ3Mjc0","url":"https://api.github.com/repos/syncthing/syncthing/issues/events/937547274","actor":{"login":"canton7","id":568104,"node_id":"MDQ6VXNlcjU2ODEwNA==","avatar_url":"https://avatars.githubusercontent.com/u/568104?v=4","gravatar_id":"","url":"https://api.github.com/users/canton7","html_url":"https://github.com/canton7","followers_url":"https://api.github.com/users/canton7/followers","following_url":"https://api.github.com/users/canton7/following{/other_user}","gists_url":"https://api.github.com/users/canton7/gists{/gist_id}","starred_url":"https://api.github.com/users/canton7/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/canton7/subscriptions","organizations_url":"https://api.github.com/users/canton7/orgs","repos_url":"https://api.github.com/users/canton7/repos","events_url":"https://api.github.com/users/canton7/events{/privacy}","received_events_url":"https://api.github.com/users/canton7/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2017-01-26T10:30:16Z","performed_via_github_app":null},{"id":937547275,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDkzNzU0NzI3NQ==","url":"https://api.github.com/repos/syncthing/syncthing/issues/events/937547275","actor":{"login":"canton7","id":568104,"node_id":"MDQ6VXNlcjU2ODEwNA==","avatar_url":"https://avatars.githubusercontent.com/u/568104?v=4","gravatar_id":"","url":"https://api.github.com/users/canton7","html_url":"https://github.com/canton7","followers_url":"https://api.github.com/users/canton7/followers","following_url":"https://api.github.com/users/canton7/following{/other_user}","gists_url":"https://api.github.com/users/canton7/gists{/gist_id}","starred_url":"https://api.github.com/users/canton7/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/canton7/subscriptions","organizations_url":"https://api.github.com/users/canton7/orgs","repos_url":"https://api.github.com/users/canton7/repos","events_url":"https://api.github.com/users/canton7/events{/privacy}","received_events_url":"https://api.github.com/users/canton7/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2017-01-26T10:30:16Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/275356820","html_url":"https://github.com/syncthing/syncthing/issues/3933#issuecomment-275356820","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/3933","id":275356820,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NTM1NjgyMA==","user":{"login":"canton7","id":568104,"node_id":"MDQ6VXNlcjU2ODEwNA==","avatar_url":"https://avatars.githubusercontent.com/u/568104?v=4","gravatar_id":"","url":"https://api.github.com/users/canton7","html_url":"https://github.com/canton7","followers_url":"https://api.github.com/users/canton7/followers","following_url":"https://api.github.com/users/canton7/following{/other_user}","gists_url":"https://api.github.com/users/canton7/gists{/gist_id}","starred_url":"https://api.github.com/users/canton7/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/canton7/subscriptions","organizations_url":"https://api.github.com/users/canton7/orgs","repos_url":"https://api.github.com/users/canton7/repos","events_url":"https://api.github.com/users/canton7/events{/privacy}","received_events_url":"https://api.github.com/users/canton7/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-26T10:34:08Z","updated_at":"2017-01-26T10:34:16Z","body":"That's why it sends to the channel in a loop, following the approach [discussed here](http://stackoverflow.com/a/41731499/1086121). It's hacky.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/275356820/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"canton7","id":568104,"node_id":"MDQ6VXNlcjU2ODEwNA==","avatar_url":"https://avatars.githubusercontent.com/u/568104?v=4","gravatar_id":"","url":"https://api.github.com/users/canton7","html_url":"https://github.com/canton7","followers_url":"https://api.github.com/users/canton7/followers","following_url":"https://api.github.com/users/canton7/following{/other_user}","gists_url":"https://api.github.com/users/canton7/gists{/gist_id}","starred_url":"https://api.github.com/users/canton7/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/canton7/subscriptions","organizations_url":"https://api.github.com/users/canton7/orgs","repos_url":"https://api.github.com/users/canton7/repos","events_url":"https://api.github.com/users/canton7/events{/privacy}","received_events_url":"https://api.github.com/users/canton7/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/275359710","html_url":"https://github.com/syncthing/syncthing/issues/3933#issuecomment-275359710","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/3933","id":275359710,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NTM1OTcxMA==","user":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-26T10:48:58Z","updated_at":"2017-01-26T10:53:36Z","body":"Uuh, yeah, ok. My head hurts slightly from trying to sort out what will happen with the buffered channel and the loop and multiple waiters in various conditions, but I guess it might work. There are lots of other details to talk about, but do file a PR then. :)\r\n\r\nPerhaps encapsulate this behavior in a `sync.TimeoutCond` that we can add some tests on, and that otherwise looks very similar to the normal `Cond` API-wise, to the \"user\" in `bufferedSubscription`.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/275359710/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/275361167","html_url":"https://github.com/syncthing/syncthing/issues/3933#issuecomment-275361167","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/3933","id":275361167,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NTM2MTE2Nw==","user":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-26T10:56:10Z","updated_at":"2017-01-26T10:56:10Z","body":"There is also https://godoc.org/github.com/luci/luci-go/common/sync/cancelcond but it looks like it wakes up everyone when anyone's timeout expires. That seems unnecessary to me.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/275361167/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/275472904","html_url":"https://github.com/syncthing/syncthing/issues/3933#issuecomment-275472904","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/3933","id":275472904,"node_id":"MDEyOklzc3VlQ29tbWVudDI3NTQ3MjkwNA==","user":{"login":"nrm21","id":15898046,"node_id":"MDQ6VXNlcjE1ODk4MDQ2","avatar_url":"https://avatars.githubusercontent.com/u/15898046?v=4","gravatar_id":"","url":"https://api.github.com/users/nrm21","html_url":"https://github.com/nrm21","followers_url":"https://api.github.com/users/nrm21/followers","following_url":"https://api.github.com/users/nrm21/following{/other_user}","gists_url":"https://api.github.com/users/nrm21/gists{/gist_id}","starred_url":"https://api.github.com/users/nrm21/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nrm21/subscriptions","organizations_url":"https://api.github.com/users/nrm21/orgs","repos_url":"https://api.github.com/users/nrm21/repos","events_url":"https://api.github.com/users/nrm21/events{/privacy}","received_events_url":"https://api.github.com/users/nrm21/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2017-01-26T18:39:25Z","updated_at":"2017-01-26T18:39:25Z","body":"Guys aren't we over engineering a bit?\r\n\r\nWhy not just:\r\nleave ping events as is,\r\nmake buffer bigger,\r\nfilter to not show pings in GUI,\r\nand allow valid events to be flushed out eventually (after a few days)?\r\n\r\nWouldn't that be acceptable?  I'm pretty sure the global log isn't intended to be a canonical permanent forever store of who wrote to what file?  Just sort of a, \"this is what happened in the last few hours/days\" thing (kinda like a bandwidth graph on a router interface, where data gets discarded after it gets stale).","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/275472904/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"nrm21","id":15898046,"node_id":"MDQ6VXNlcjE1ODk4MDQ2","avatar_url":"https://avatars.githubusercontent.com/u/15898046?v=4","gravatar_id":"","url":"https://api.github.com/users/nrm21","html_url":"https://github.com/nrm21","followers_url":"https://api.github.com/users/nrm21/followers","following_url":"https://api.github.com/users/nrm21/following{/other_user}","gists_url":"https://api.github.com/users/nrm21/gists{/gist_id}","starred_url":"https://api.github.com/users/nrm21/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/nrm21/subscriptions","organizations_url":"https://api.github.com/users/nrm21/orgs","repos_url":"https://api.github.com/users/nrm21/repos","events_url":"https://api.github.com/users/nrm21/events{/privacy}","received_events_url":"https://api.github.com/users/nrm21/received_events","type":"User","user_view_type":"public","site_admin":false}}]