{"url":"https://api.github.com/repos/syncthing/syncthing/issues/7466","repository_url":"https://api.github.com/repos/syncthing/syncthing","labels_url":"https://api.github.com/repos/syncthing/syncthing/issues/7466/labels{/name}","comments_url":"https://api.github.com/repos/syncthing/syncthing/issues/7466/comments","events_url":"https://api.github.com/repos/syncthing/syncthing/issues/7466/events","html_url":"https://github.com/syncthing/syncthing/issues/7466","id":830895234,"node_id":"MDU6SXNzdWU4MzA4OTUyMzQ=","number":7466,"title":"Receive-encrypted fails after a while: file with empty block list","user":{"login":"Z3r0byte","id":8726909,"node_id":"MDQ6VXNlcjg3MjY5MDk=","avatar_url":"https://avatars.githubusercontent.com/u/8726909?v=4","gravatar_id":"","url":"https://api.github.com/users/Z3r0byte","html_url":"https://github.com/Z3r0byte","followers_url":"https://api.github.com/users/Z3r0byte/followers","following_url":"https://api.github.com/users/Z3r0byte/following{/other_user}","gists_url":"https://api.github.com/users/Z3r0byte/gists{/gist_id}","starred_url":"https://api.github.com/users/Z3r0byte/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Z3r0byte/subscriptions","organizations_url":"https://api.github.com/users/Z3r0byte/orgs","repos_url":"https://api.github.com/users/Z3r0byte/repos","events_url":"https://api.github.com/users/Z3r0byte/events{/privacy}","received_events_url":"https://api.github.com/users/Z3r0byte/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":67767665,"node_id":"MDU6TGFiZWw2Nzc2NzY2NQ==","url":"https://api.github.com/repos/syncthing/syncthing/labels/bug","name":"bug","color":"d93f0b","default":true,"description":"A problem with current functionality, as opposed to missing functionality (enhancement)"},{"id":628314330,"node_id":"MDU6TGFiZWw2MjgzMTQzMzA=","url":"https://api.github.com/repos/syncthing/syncthing/labels/frozen-due-to-age","name":"frozen-due-to-age","color":"eeeeee","default":false,"description":"Issues closed and untouched for a long time, together with being locked for discussion"}],"state":"closed","locked":true,"assignee":{"login":"imsodin","id":15955093,"node_id":"MDQ6VXNlcjE1OTU1MDkz","avatar_url":"https://avatars.githubusercontent.com/u/15955093?v=4","gravatar_id":"","url":"https://api.github.com/users/imsodin","html_url":"https://github.com/imsodin","followers_url":"https://api.github.com/users/imsodin/followers","following_url":"https://api.github.com/users/imsodin/following{/other_user}","gists_url":"https://api.github.com/users/imsodin/gists{/gist_id}","starred_url":"https://api.github.com/users/imsodin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imsodin/subscriptions","organizations_url":"https://api.github.com/users/imsodin/orgs","repos_url":"https://api.github.com/users/imsodin/repos","events_url":"https://api.github.com/users/imsodin/events{/privacy}","received_events_url":"https://api.github.com/users/imsodin/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"imsodin","id":15955093,"node_id":"MDQ6VXNlcjE1OTU1MDkz","avatar_url":"https://avatars.githubusercontent.com/u/15955093?v=4","gravatar_id":"","url":"https://api.github.com/users/imsodin","html_url":"https://github.com/imsodin","followers_url":"https://api.github.com/users/imsodin/followers","following_url":"https://api.github.com/users/imsodin/following{/other_user}","gists_url":"https://api.github.com/users/imsodin/gists{/gist_id}","starred_url":"https://api.github.com/users/imsodin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imsodin/subscriptions","organizations_url":"https://api.github.com/users/imsodin/orgs","repos_url":"https://api.github.com/users/imsodin/repos","events_url":"https://api.github.com/users/imsodin/events{/privacy}","received_events_url":"https://api.github.com/users/imsodin/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/syncthing/syncthing/milestones/62","html_url":"https://github.com/syncthing/syncthing/milestone/62","labels_url":"https://api.github.com/repos/syncthing/syncthing/milestones/62/labels","id":6443170,"node_id":"MDk6TWlsZXN0b25lNjQ0MzE3MA==","number":62,"title":"v1.15.0","description":"This release fixes a vulnerability where Syncthing and the relay server can crash due to malformed relay protocol messages (CVE-2021-21404); see https://github.com/syncthing/syncthing/security/advisories/GHSA-x462-89pf-6r5h.\r\n\r\nThis release updates the CLI to use subcommands and adds the subcommands `cli` (previously standalone `stcli` utility) and `decrypt` (for offline verifying and decrypting encrypted folders).\r\n\r\nWith this release we invite everyone to test the \"untrusted (encrypted) devices\" feature. You should not use it yet on important production data. Thus UI controls are hidden behind a feature flag. For more information, visit: \r\nhttps://forum.syncthing.net/t/testing-untrusted-encrypted-devices/16470","creator":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":88,"state":"closed","created_at":"2021-02-17T10:21:38Z","updated_at":"2021-04-29T20:05:04Z","due_on":"2021-04-06T07:00:00Z","closed_at":"2021-04-06T06:17:01Z"},"comments":2,"created_at":"2021-03-13T13:06:26Z","updated_at":"2022-08-11T07:17:11Z","closed_at":"2021-03-13T15:57:38Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Does your log mention database corruption?\r\nNo\r\n\r\n### Include required information\r\nI have a setup of two machines and one untrusted server all running 1.14.0. I have enabled the untrusted feature flag on all machines.  \r\nWhen syncing between the two trusted machines, everything goes fine and both machines indicate they're up to date. But, when syncing with the untrusted server using the receive-encrypted type, all connections start failing. I am syncing two folders and for both folders these kind of error messages start appearing on the untrusted server:\r\n`[J47TR] 13:37:50 INFO: Connection to BWYS6XV-XXXXXXXXXXXXXXXXXXXXXXX-RP6EJAB at 141.xxx.xxx.xxx:22000-xxx.xxx.xxx.xxx:5068/tcp-client/TLS1.3-TLS_CHACHA20_POLY1305_SHA256 closed: protocol error: index update: \"9.syncthing-enc/45/F31BH51JPLO2N7T7MJ03AQ56Q0IIM1CTNE9A38NRNAOIU19NB5LGKF093B6M6D4U6SP5LKTN5NFA9GHN1PK4SK8LFD0K1R9R9S0CQKQQ86T1D7P1HG415P20JD299GNPTJPD54QSP0DKMF9T9D4SRO116INLTOC7DMIKUN1F6AED4D2P27NG\": file with empty block list`\r\n\r\nI have tried pausing one folder to see if it was an error specific to one folder, but neither are able to fully sync after a couple of hundred MB's. I also tried changing the pull order of the folders, but to no avail. Removing and re adding the folders also did not work. Since the filename is encrypted, I also don't know what folder exactly it is getting stuck on. It does keep giving the same error with the same file name.\r\n\r\nIf there is any additional information needed, let me know and I'll try my best to give it to you.","closed_by":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/7466/reactions","total_count":2,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/syncthing/syncthing/issues/7466/timeline","performed_via_github_app":null,"state_reason":"completed"}