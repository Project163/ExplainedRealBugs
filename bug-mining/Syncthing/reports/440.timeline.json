[{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/203283935","html_url":"https://github.com/syncthing/syncthing/issues/2915#issuecomment-203283935","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/2915","id":203283935,"node_id":"MDEyOklzc3VlQ29tbWVudDIwMzI4MzkzNQ==","user":{"login":"pandian912","id":1931157,"node_id":"MDQ6VXNlcjE5MzExNTc=","avatar_url":"https://avatars.githubusercontent.com/u/1931157?v=4","gravatar_id":"","url":"https://api.github.com/users/pandian912","html_url":"https://github.com/pandian912","followers_url":"https://api.github.com/users/pandian912/followers","following_url":"https://api.github.com/users/pandian912/following{/other_user}","gists_url":"https://api.github.com/users/pandian912/gists{/gist_id}","starred_url":"https://api.github.com/users/pandian912/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pandian912/subscriptions","organizations_url":"https://api.github.com/users/pandian912/orgs","repos_url":"https://api.github.com/users/pandian912/repos","events_url":"https://api.github.com/users/pandian912/events{/privacy}","received_events_url":"https://api.github.com/users/pandian912/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-03-30T07:13:48Z","updated_at":"2016-03-30T07:13:48Z","body":"syncthing-inotify version 0.6.8\nsyncthing 0.12.21\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/203283935/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"pandian912","id":1931157,"node_id":"MDQ6VXNlcjE5MzExNTc=","avatar_url":"https://avatars.githubusercontent.com/u/1931157?v=4","gravatar_id":"","url":"https://api.github.com/users/pandian912","html_url":"https://github.com/pandian912","followers_url":"https://api.github.com/users/pandian912/followers","following_url":"https://api.github.com/users/pandian912/following{/other_user}","gists_url":"https://api.github.com/users/pandian912/gists{/gist_id}","starred_url":"https://api.github.com/users/pandian912/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pandian912/subscriptions","organizations_url":"https://api.github.com/users/pandian912/orgs","repos_url":"https://api.github.com/users/pandian912/repos","events_url":"https://api.github.com/users/pandian912/events{/privacy}","received_events_url":"https://api.github.com/users/pandian912/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/203295102","html_url":"https://github.com/syncthing/syncthing/issues/2915#issuecomment-203295102","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/2915","id":203295102,"node_id":"MDEyOklzc3VlQ29tbWVudDIwMzI5NTEwMg==","user":{"login":"AudriusButkevicius","id":1144861,"node_id":"MDQ6VXNlcjExNDQ4NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1144861?v=4","gravatar_id":"","url":"https://api.github.com/users/AudriusButkevicius","html_url":"https://github.com/AudriusButkevicius","followers_url":"https://api.github.com/users/AudriusButkevicius/followers","following_url":"https://api.github.com/users/AudriusButkevicius/following{/other_user}","gists_url":"https://api.github.com/users/AudriusButkevicius/gists{/gist_id}","starred_url":"https://api.github.com/users/AudriusButkevicius/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AudriusButkevicius/subscriptions","organizations_url":"https://api.github.com/users/AudriusButkevicius/orgs","repos_url":"https://api.github.com/users/AudriusButkevicius/repos","events_url":"https://api.github.com/users/AudriusButkevicius/events{/privacy}","received_events_url":"https://api.github.com/users/AudriusButkevicius/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-03-30T07:37:10Z","updated_at":"2016-03-30T07:37:10Z","body":"And whats the issue?\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/203295102/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"AudriusButkevicius","id":1144861,"node_id":"MDQ6VXNlcjExNDQ4NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1144861?v=4","gravatar_id":"","url":"https://api.github.com/users/AudriusButkevicius","html_url":"https://github.com/AudriusButkevicius","followers_url":"https://api.github.com/users/AudriusButkevicius/followers","following_url":"https://api.github.com/users/AudriusButkevicius/following{/other_user}","gists_url":"https://api.github.com/users/AudriusButkevicius/gists{/gist_id}","starred_url":"https://api.github.com/users/AudriusButkevicius/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AudriusButkevicius/subscriptions","organizations_url":"https://api.github.com/users/AudriusButkevicius/orgs","repos_url":"https://api.github.com/users/AudriusButkevicius/repos","events_url":"https://api.github.com/users/AudriusButkevicius/events{/privacy}","received_events_url":"https://api.github.com/users/AudriusButkevicius/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/203313269","html_url":"https://github.com/syncthing/syncthing/issues/2915#issuecomment-203313269","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/2915","id":203313269,"node_id":"MDEyOklzc3VlQ29tbWVudDIwMzMxMzI2OQ==","user":{"login":"AudriusButkevicius","id":1144861,"node_id":"MDQ6VXNlcjExNDQ4NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1144861?v=4","gravatar_id":"","url":"https://api.github.com/users/AudriusButkevicius","html_url":"https://github.com/AudriusButkevicius","followers_url":"https://api.github.com/users/AudriusButkevicius/followers","following_url":"https://api.github.com/users/AudriusButkevicius/following{/other_user}","gists_url":"https://api.github.com/users/AudriusButkevicius/gists{/gist_id}","starred_url":"https://api.github.com/users/AudriusButkevicius/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AudriusButkevicius/subscriptions","organizations_url":"https://api.github.com/users/AudriusButkevicius/orgs","repos_url":"https://api.github.com/users/AudriusButkevicius/repos","events_url":"https://api.github.com/users/AudriusButkevicius/events{/privacy}","received_events_url":"https://api.github.com/users/AudriusButkevicius/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-03-30T08:15:26Z","updated_at":"2016-03-30T08:16:21Z","body":"inotify aggregates changes, and scans a directory layer up if it finds it more appropriate to do so.\nIf you want to discuss this behaviour, you should probably do that in the inotify repo and not here.\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/203313269/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"AudriusButkevicius","id":1144861,"node_id":"MDQ6VXNlcjExNDQ4NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1144861?v=4","gravatar_id":"","url":"https://api.github.com/users/AudriusButkevicius","html_url":"https://github.com/AudriusButkevicius","followers_url":"https://api.github.com/users/AudriusButkevicius/followers","following_url":"https://api.github.com/users/AudriusButkevicius/following{/other_user}","gists_url":"https://api.github.com/users/AudriusButkevicius/gists{/gist_id}","starred_url":"https://api.github.com/users/AudriusButkevicius/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AudriusButkevicius/subscriptions","organizations_url":"https://api.github.com/users/AudriusButkevicius/orgs","repos_url":"https://api.github.com/users/AudriusButkevicius/repos","events_url":"https://api.github.com/users/AudriusButkevicius/events{/privacy}","received_events_url":"https://api.github.com/users/AudriusButkevicius/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":607886616,"node_id":"MDExOkNsb3NlZEV2ZW50NjA3ODg2NjE2","url":"https://api.github.com/repos/syncthing/syncthing/issues/events/607886616","actor":{"login":"AudriusButkevicius","id":1144861,"node_id":"MDQ6VXNlcjExNDQ4NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1144861?v=4","gravatar_id":"","url":"https://api.github.com/users/AudriusButkevicius","html_url":"https://github.com/AudriusButkevicius","followers_url":"https://api.github.com/users/AudriusButkevicius/followers","following_url":"https://api.github.com/users/AudriusButkevicius/following{/other_user}","gists_url":"https://api.github.com/users/AudriusButkevicius/gists{/gist_id}","starred_url":"https://api.github.com/users/AudriusButkevicius/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AudriusButkevicius/subscriptions","organizations_url":"https://api.github.com/users/AudriusButkevicius/orgs","repos_url":"https://api.github.com/users/AudriusButkevicius/repos","events_url":"https://api.github.com/users/AudriusButkevicius/events{/privacy}","received_events_url":"https://api.github.com/users/AudriusButkevicius/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2016-03-30T08:16:23Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/203318668","html_url":"https://github.com/syncthing/syncthing/issues/2915#issuecomment-203318668","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/2915","id":203318668,"node_id":"MDEyOklzc3VlQ29tbWVudDIwMzMxODY2OA==","user":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-03-30T08:24:48Z","updated_at":"2016-03-30T08:24:48Z","body":"Probably the root cause here is that `t` is unknown, so a scan request of that will result in a scan of the containing directory. This is necessary and by design, but could possibly be optimized somehow...\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/203318668/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/203328913","html_url":"https://github.com/syncthing/syncthing/issues/2915#issuecomment-203328913","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/2915","id":203328913,"node_id":"MDEyOklzc3VlQ29tbWVudDIwMzMyODkxMw==","user":{"login":"AudriusButkevicius","id":1144861,"node_id":"MDQ6VXNlcjExNDQ4NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1144861?v=4","gravatar_id":"","url":"https://api.github.com/users/AudriusButkevicius","html_url":"https://github.com/AudriusButkevicius","followers_url":"https://api.github.com/users/AudriusButkevicius/followers","following_url":"https://api.github.com/users/AudriusButkevicius/following{/other_user}","gists_url":"https://api.github.com/users/AudriusButkevicius/gists{/gist_id}","starred_url":"https://api.github.com/users/AudriusButkevicius/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AudriusButkevicius/subscriptions","organizations_url":"https://api.github.com/users/AudriusButkevicius/orgs","repos_url":"https://api.github.com/users/AudriusButkevicius/repos","events_url":"https://api.github.com/users/AudriusButkevicius/events{/privacy}","received_events_url":"https://api.github.com/users/AudriusButkevicius/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-03-30T08:53:16Z","updated_at":"2016-03-30T08:53:16Z","body":"Not sure what that would bring to the table though. If a file is already scanned, it should only be a stat() call which is cheap. If it's not scanned, you probably want it scanned anyway.\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/203328913/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"AudriusButkevicius","id":1144861,"node_id":"MDQ6VXNlcjExNDQ4NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1144861?v=4","gravatar_id":"","url":"https://api.github.com/users/AudriusButkevicius","html_url":"https://github.com/AudriusButkevicius","followers_url":"https://api.github.com/users/AudriusButkevicius/followers","following_url":"https://api.github.com/users/AudriusButkevicius/following{/other_user}","gists_url":"https://api.github.com/users/AudriusButkevicius/gists{/gist_id}","starred_url":"https://api.github.com/users/AudriusButkevicius/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AudriusButkevicius/subscriptions","organizations_url":"https://api.github.com/users/AudriusButkevicius/orgs","repos_url":"https://api.github.com/users/AudriusButkevicius/repos","events_url":"https://api.github.com/users/AudriusButkevicius/events{/privacy}","received_events_url":"https://api.github.com/users/AudriusButkevicius/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/203344671","html_url":"https://github.com/syncthing/syncthing/issues/2915#issuecomment-203344671","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/2915","id":203344671,"node_id":"MDEyOklzc3VlQ29tbWVudDIwMzM0NDY3MQ==","user":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-03-30T09:30:12Z","updated_at":"2016-03-30T09:30:12Z","body":"I think currently, for all unknown entries, we scan the (closest known) parent instead. We need to that when asked to scan foo/bar/baz if we don't know about foo/bar (must scan foo/bar before foo/bar/baz), but if we know about the parent we should be fine just scanning the unknown file directly... Needs some  investigation.\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/203344671/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/203431475","html_url":"https://github.com/syncthing/syncthing/issues/2915#issuecomment-203431475","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/2915","id":203431475,"node_id":"MDEyOklzc3VlQ29tbWVudDIwMzQzMTQ3NQ==","user":{"login":"pandian912","id":1931157,"node_id":"MDQ6VXNlcjE5MzExNTc=","avatar_url":"https://avatars.githubusercontent.com/u/1931157?v=4","gravatar_id":"","url":"https://api.github.com/users/pandian912","html_url":"https://github.com/pandian912","followers_url":"https://api.github.com/users/pandian912/followers","following_url":"https://api.github.com/users/pandian912/following{/other_user}","gists_url":"https://api.github.com/users/pandian912/gists{/gist_id}","starred_url":"https://api.github.com/users/pandian912/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pandian912/subscriptions","organizations_url":"https://api.github.com/users/pandian912/orgs","repos_url":"https://api.github.com/users/pandian912/repos","events_url":"https://api.github.com/users/pandian912/events{/privacy}","received_events_url":"https://api.github.com/users/pandian912/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-03-30T13:26:29Z","updated_at":"2016-03-30T13:26:29Z","body":"yeah scanning just the unknown file was the expected behaviour, atleast thats what I understood from the doc.\n\nThe scenario is I have a huge directory where files get added often. I want the newly added files synced across to other boxes. I don't want a full scan for every new file added.\n\nIn this case full scan is very costly potentially taking several minutes, so I would prefer if just the new file is added to index and synced across.\n\nEven if inotify missed notifying about a new file, those files will be eventually handled via the periodic scan which is done every 2/3 hours. But doing a full scan for every new file added is not what is expected.\n\nThe doc does not clearly say what happens when a new file is requested to be scanned.\nhttps://docs.syncthing.net/rest/db-scan-post.html\natleast this qualifies as a documentation bug/improvement.\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/203431475/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"pandian912","id":1931157,"node_id":"MDQ6VXNlcjE5MzExNTc=","avatar_url":"https://avatars.githubusercontent.com/u/1931157?v=4","gravatar_id":"","url":"https://api.github.com/users/pandian912","html_url":"https://github.com/pandian912","followers_url":"https://api.github.com/users/pandian912/followers","following_url":"https://api.github.com/users/pandian912/following{/other_user}","gists_url":"https://api.github.com/users/pandian912/gists{/gist_id}","starred_url":"https://api.github.com/users/pandian912/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pandian912/subscriptions","organizations_url":"https://api.github.com/users/pandian912/orgs","repos_url":"https://api.github.com/users/pandian912/repos","events_url":"https://api.github.com/users/pandian912/events{/privacy}","received_events_url":"https://api.github.com/users/pandian912/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/203432852","html_url":"https://github.com/syncthing/syncthing/issues/2915#issuecomment-203432852","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/2915","id":203432852,"node_id":"MDEyOklzc3VlQ29tbWVudDIwMzQzMjg1Mg==","user":{"login":"pandian912","id":1931157,"node_id":"MDQ6VXNlcjE5MzExNTc=","avatar_url":"https://avatars.githubusercontent.com/u/1931157?v=4","gravatar_id":"","url":"https://api.github.com/users/pandian912","html_url":"https://github.com/pandian912","followers_url":"https://api.github.com/users/pandian912/followers","following_url":"https://api.github.com/users/pandian912/following{/other_user}","gists_url":"https://api.github.com/users/pandian912/gists{/gist_id}","starred_url":"https://api.github.com/users/pandian912/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pandian912/subscriptions","organizations_url":"https://api.github.com/users/pandian912/orgs","repos_url":"https://api.github.com/users/pandian912/repos","events_url":"https://api.github.com/users/pandian912/events{/privacy}","received_events_url":"https://api.github.com/users/pandian912/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-03-30T13:29:18Z","updated_at":"2016-03-30T13:29:18Z","body":"@AudriusButkevicius inotify makes a scan api call with the required sub filled in.\nI dont see any issue with inotify.\nrather syncthing does a full scan instead of scanning just the files in the sub list\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/203432852/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"pandian912","id":1931157,"node_id":"MDQ6VXNlcjE5MzExNTc=","avatar_url":"https://avatars.githubusercontent.com/u/1931157?v=4","gravatar_id":"","url":"https://api.github.com/users/pandian912","html_url":"https://github.com/pandian912","followers_url":"https://api.github.com/users/pandian912/followers","following_url":"https://api.github.com/users/pandian912/following{/other_user}","gists_url":"https://api.github.com/users/pandian912/gists{/gist_id}","starred_url":"https://api.github.com/users/pandian912/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pandian912/subscriptions","organizations_url":"https://api.github.com/users/pandian912/orgs","repos_url":"https://api.github.com/users/pandian912/repos","events_url":"https://api.github.com/users/pandian912/events{/privacy}","received_events_url":"https://api.github.com/users/pandian912/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":608259730,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NjA4MjU5NzMw","url":"https://api.github.com/repos/syncthing/syncthing/issues/events/608259730","actor":{"login":"AudriusButkevicius","id":1144861,"node_id":"MDQ6VXNlcjExNDQ4NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1144861?v=4","gravatar_id":"","url":"https://api.github.com/users/AudriusButkevicius","html_url":"https://github.com/AudriusButkevicius","followers_url":"https://api.github.com/users/AudriusButkevicius/followers","following_url":"https://api.github.com/users/AudriusButkevicius/following{/other_user}","gists_url":"https://api.github.com/users/AudriusButkevicius/gists{/gist_id}","starred_url":"https://api.github.com/users/AudriusButkevicius/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AudriusButkevicius/subscriptions","organizations_url":"https://api.github.com/users/AudriusButkevicius/orgs","repos_url":"https://api.github.com/users/AudriusButkevicius/repos","events_url":"https://api.github.com/users/AudriusButkevicius/events{/privacy}","received_events_url":"https://api.github.com/users/AudriusButkevicius/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2016-03-30T13:29:18Z","performed_via_github_app":null},{"id":608259731,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDYwODI1OTczMQ==","url":"https://api.github.com/repos/syncthing/syncthing/issues/events/608259731","actor":{"login":"AudriusButkevicius","id":1144861,"node_id":"MDQ6VXNlcjExNDQ4NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1144861?v=4","gravatar_id":"","url":"https://api.github.com/users/AudriusButkevicius","html_url":"https://github.com/AudriusButkevicius","followers_url":"https://api.github.com/users/AudriusButkevicius/followers","following_url":"https://api.github.com/users/AudriusButkevicius/following{/other_user}","gists_url":"https://api.github.com/users/AudriusButkevicius/gists{/gist_id}","starred_url":"https://api.github.com/users/AudriusButkevicius/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AudriusButkevicius/subscriptions","organizations_url":"https://api.github.com/users/AudriusButkevicius/orgs","repos_url":"https://api.github.com/users/AudriusButkevicius/repos","events_url":"https://api.github.com/users/AudriusButkevicius/events{/privacy}","received_events_url":"https://api.github.com/users/AudriusButkevicius/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2016-03-30T13:29:18Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/203435372","html_url":"https://github.com/syncthing/syncthing/issues/2915#issuecomment-203435372","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/2915","id":203435372,"node_id":"MDEyOklzc3VlQ29tbWVudDIwMzQzNTM3Mg==","user":{"login":"AudriusButkevicius","id":1144861,"node_id":"MDQ6VXNlcjExNDQ4NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1144861?v=4","gravatar_id":"","url":"https://api.github.com/users/AudriusButkevicius","html_url":"https://github.com/AudriusButkevicius","followers_url":"https://api.github.com/users/AudriusButkevicius/followers","following_url":"https://api.github.com/users/AudriusButkevicius/following{/other_user}","gists_url":"https://api.github.com/users/AudriusButkevicius/gists{/gist_id}","starred_url":"https://api.github.com/users/AudriusButkevicius/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AudriusButkevicius/subscriptions","organizations_url":"https://api.github.com/users/AudriusButkevicius/orgs","repos_url":"https://api.github.com/users/AudriusButkevicius/repos","events_url":"https://api.github.com/users/AudriusButkevicius/events{/privacy}","received_events_url":"https://api.github.com/users/AudriusButkevicius/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-03-30T13:34:04Z","updated_at":"2016-03-30T13:34:04Z","body":"So improving the docs/functionality etc is a fair point hence reopening, though I don't understand how scanning a specific file will help you skip some large directory which is under the watched tree.\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/203435372/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"AudriusButkevicius","id":1144861,"node_id":"MDQ6VXNlcjExNDQ4NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1144861?v=4","gravatar_id":"","url":"https://api.github.com/users/AudriusButkevicius","html_url":"https://github.com/AudriusButkevicius","followers_url":"https://api.github.com/users/AudriusButkevicius/followers","following_url":"https://api.github.com/users/AudriusButkevicius/following{/other_user}","gists_url":"https://api.github.com/users/AudriusButkevicius/gists{/gist_id}","starred_url":"https://api.github.com/users/AudriusButkevicius/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AudriusButkevicius/subscriptions","organizations_url":"https://api.github.com/users/AudriusButkevicius/orgs","repos_url":"https://api.github.com/users/AudriusButkevicius/repos","events_url":"https://api.github.com/users/AudriusButkevicius/events{/privacy}","received_events_url":"https://api.github.com/users/AudriusButkevicius/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":608267097,"node_id":"MDEzOlJlb3BlbmVkRXZlbnQ2MDgyNjcwOTc=","url":"https://api.github.com/repos/syncthing/syncthing/issues/events/608267097","actor":{"login":"AudriusButkevicius","id":1144861,"node_id":"MDQ6VXNlcjExNDQ4NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1144861?v=4","gravatar_id":"","url":"https://api.github.com/users/AudriusButkevicius","html_url":"https://github.com/AudriusButkevicius","followers_url":"https://api.github.com/users/AudriusButkevicius/followers","following_url":"https://api.github.com/users/AudriusButkevicius/following{/other_user}","gists_url":"https://api.github.com/users/AudriusButkevicius/gists{/gist_id}","starred_url":"https://api.github.com/users/AudriusButkevicius/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AudriusButkevicius/subscriptions","organizations_url":"https://api.github.com/users/AudriusButkevicius/orgs","repos_url":"https://api.github.com/users/AudriusButkevicius/repos","events_url":"https://api.github.com/users/AudriusButkevicius/events{/privacy}","received_events_url":"https://api.github.com/users/AudriusButkevicius/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"reopened","commit_id":null,"commit_url":null,"created_at":"2016-03-30T13:34:04Z","state_reason":null,"performed_via_github_app":null},{"id":608267356,"node_id":"MDEyOkxhYmVsZWRFdmVudDYwODI2NzM1Ng==","url":"https://api.github.com/repos/syncthing/syncthing/issues/events/608267356","actor":{"login":"AudriusButkevicius","id":1144861,"node_id":"MDQ6VXNlcjExNDQ4NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1144861?v=4","gravatar_id":"","url":"https://api.github.com/users/AudriusButkevicius","html_url":"https://github.com/AudriusButkevicius","followers_url":"https://api.github.com/users/AudriusButkevicius/followers","following_url":"https://api.github.com/users/AudriusButkevicius/following{/other_user}","gists_url":"https://api.github.com/users/AudriusButkevicius/gists{/gist_id}","starred_url":"https://api.github.com/users/AudriusButkevicius/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AudriusButkevicius/subscriptions","organizations_url":"https://api.github.com/users/AudriusButkevicius/orgs","repos_url":"https://api.github.com/users/AudriusButkevicius/repos","events_url":"https://api.github.com/users/AudriusButkevicius/events{/privacy}","received_events_url":"https://api.github.com/users/AudriusButkevicius/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2016-03-30T13:34:15Z","label":{"name":"enhancement","color":"009800"},"performed_via_github_app":null},{"id":608267477,"node_id":"MDE1Ok1pbGVzdG9uZWRFdmVudDYwODI2NzQ3Nw==","url":"https://api.github.com/repos/syncthing/syncthing/issues/events/608267477","actor":{"login":"AudriusButkevicius","id":1144861,"node_id":"MDQ6VXNlcjExNDQ4NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1144861?v=4","gravatar_id":"","url":"https://api.github.com/users/AudriusButkevicius","html_url":"https://github.com/AudriusButkevicius","followers_url":"https://api.github.com/users/AudriusButkevicius/followers","following_url":"https://api.github.com/users/AudriusButkevicius/following{/other_user}","gists_url":"https://api.github.com/users/AudriusButkevicius/gists{/gist_id}","starred_url":"https://api.github.com/users/AudriusButkevicius/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AudriusButkevicius/subscriptions","organizations_url":"https://api.github.com/users/AudriusButkevicius/orgs","repos_url":"https://api.github.com/users/AudriusButkevicius/repos","events_url":"https://api.github.com/users/AudriusButkevicius/events{/privacy}","received_events_url":"https://api.github.com/users/AudriusButkevicius/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"milestoned","commit_id":null,"commit_url":null,"created_at":"2016-03-30T13:34:20Z","milestone":{"title":"Unplanned (Contributions Welcome)"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/203548277","html_url":"https://github.com/syncthing/syncthing/issues/2915#issuecomment-203548277","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/2915","id":203548277,"node_id":"MDEyOklzc3VlQ29tbWVudDIwMzU0ODI3Nw==","user":{"login":"plouj","id":282428,"node_id":"MDQ6VXNlcjI4MjQyOA==","avatar_url":"https://avatars.githubusercontent.com/u/282428?v=4","gravatar_id":"","url":"https://api.github.com/users/plouj","html_url":"https://github.com/plouj","followers_url":"https://api.github.com/users/plouj/followers","following_url":"https://api.github.com/users/plouj/following{/other_user}","gists_url":"https://api.github.com/users/plouj/gists{/gist_id}","starred_url":"https://api.github.com/users/plouj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/plouj/subscriptions","organizations_url":"https://api.github.com/users/plouj/orgs","repos_url":"https://api.github.com/users/plouj/repos","events_url":"https://api.github.com/users/plouj/events{/privacy}","received_events_url":"https://api.github.com/users/plouj/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-03-30T17:46:16Z","updated_at":"2016-03-30T17:46:16Z","body":"I think this can only happen if you do something like the following:\n- start syncthing and let it do a full scan\n- create a new huge directory\n- start syncthing-inotify\n- touch a file within the huge directory\n\nSo my suggestion is just to wait and let syncthing scan all of the new\nfiles so that it knows about them. Afterwards further new files won't cause\nST to rescan everything. This doesn't seem like a typical use case and it\nwill be handled better once inotify is integrated into ST, which will have\nthe effect of starting syncthing-inotify as early as possible.\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/203548277/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"plouj","id":282428,"node_id":"MDQ6VXNlcjI4MjQyOA==","avatar_url":"https://avatars.githubusercontent.com/u/282428?v=4","gravatar_id":"","url":"https://api.github.com/users/plouj","html_url":"https://github.com/plouj","followers_url":"https://api.github.com/users/plouj/followers","following_url":"https://api.github.com/users/plouj/following{/other_user}","gists_url":"https://api.github.com/users/plouj/gists{/gist_id}","starred_url":"https://api.github.com/users/plouj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/plouj/subscriptions","organizations_url":"https://api.github.com/users/plouj/orgs","repos_url":"https://api.github.com/users/plouj/repos","events_url":"https://api.github.com/users/plouj/events{/privacy}","received_events_url":"https://api.github.com/users/plouj/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/203890818","html_url":"https://github.com/syncthing/syncthing/issues/2915#issuecomment-203890818","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/2915","id":203890818,"node_id":"MDEyOklzc3VlQ29tbWVudDIwMzg5MDgxOA==","user":{"login":"pandian912","id":1931157,"node_id":"MDQ6VXNlcjE5MzExNTc=","avatar_url":"https://avatars.githubusercontent.com/u/1931157?v=4","gravatar_id":"","url":"https://api.github.com/users/pandian912","html_url":"https://github.com/pandian912","followers_url":"https://api.github.com/users/pandian912/followers","following_url":"https://api.github.com/users/pandian912/following{/other_user}","gists_url":"https://api.github.com/users/pandian912/gists{/gist_id}","starred_url":"https://api.github.com/users/pandian912/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pandian912/subscriptions","organizations_url":"https://api.github.com/users/pandian912/orgs","repos_url":"https://api.github.com/users/pandian912/repos","events_url":"https://api.github.com/users/pandian912/events{/privacy}","received_events_url":"https://api.github.com/users/pandian912/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-03-31T11:37:28Z","updated_at":"2016-03-31T11:37:28Z","body":"@plouj  All files are created and scanned previously with syncthing.\nTo add more details, syncthing root has 25000+ files which are already scanned and synced and inotify is started.\n\nNow when a new file is created\n1) inotify sends a scan api call with the sub containing only the new file.\n2) syncthing does a full scan of the root which takes 5 to 10 seconds and a spike in cpu utilisation (http://pastebin.com/YP0jT4Fj) whenever a new file is added.\n\nThe above happens whenever a new file is created.\nI agree its not a typical use case but i see no reason why syncthing shouldn't handle this.\nSyncthing recieves an api call with file list specified with sub, syncthing should limit itself to scanning the list of files provided in the api call and scan the parent directory only if its not already scanned as pointed by @calmh \n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/203890818/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"pandian912","id":1931157,"node_id":"MDQ6VXNlcjE5MzExNTc=","avatar_url":"https://avatars.githubusercontent.com/u/1931157?v=4","gravatar_id":"","url":"https://api.github.com/users/pandian912","html_url":"https://github.com/pandian912","followers_url":"https://api.github.com/users/pandian912/followers","following_url":"https://api.github.com/users/pandian912/following{/other_user}","gists_url":"https://api.github.com/users/pandian912/gists{/gist_id}","starred_url":"https://api.github.com/users/pandian912/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pandian912/subscriptions","organizations_url":"https://api.github.com/users/pandian912/orgs","repos_url":"https://api.github.com/users/pandian912/repos","events_url":"https://api.github.com/users/pandian912/events{/privacy}","received_events_url":"https://api.github.com/users/pandian912/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":609660369,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NjA5NjYwMzY5","url":"https://api.github.com/repos/syncthing/syncthing/issues/events/609660369","actor":{"login":"plouj","id":282428,"node_id":"MDQ6VXNlcjI4MjQyOA==","avatar_url":"https://avatars.githubusercontent.com/u/282428?v=4","gravatar_id":"","url":"https://api.github.com/users/plouj","html_url":"https://github.com/plouj","followers_url":"https://api.github.com/users/plouj/followers","following_url":"https://api.github.com/users/plouj/following{/other_user}","gists_url":"https://api.github.com/users/plouj/gists{/gist_id}","starred_url":"https://api.github.com/users/plouj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/plouj/subscriptions","organizations_url":"https://api.github.com/users/plouj/orgs","repos_url":"https://api.github.com/users/plouj/repos","events_url":"https://api.github.com/users/plouj/events{/privacy}","received_events_url":"https://api.github.com/users/plouj/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2016-03-31T11:37:28Z","performed_via_github_app":null},{"id":609660370,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDYwOTY2MDM3MA==","url":"https://api.github.com/repos/syncthing/syncthing/issues/events/609660370","actor":{"login":"plouj","id":282428,"node_id":"MDQ6VXNlcjI4MjQyOA==","avatar_url":"https://avatars.githubusercontent.com/u/282428?v=4","gravatar_id":"","url":"https://api.github.com/users/plouj","html_url":"https://github.com/plouj","followers_url":"https://api.github.com/users/plouj/followers","following_url":"https://api.github.com/users/plouj/following{/other_user}","gists_url":"https://api.github.com/users/plouj/gists{/gist_id}","starred_url":"https://api.github.com/users/plouj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/plouj/subscriptions","organizations_url":"https://api.github.com/users/plouj/orgs","repos_url":"https://api.github.com/users/plouj/repos","events_url":"https://api.github.com/users/plouj/events{/privacy}","received_events_url":"https://api.github.com/users/plouj/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2016-03-31T11:37:28Z","performed_via_github_app":null},{"id":609660371,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NjA5NjYwMzcx","url":"https://api.github.com/repos/syncthing/syncthing/issues/events/609660371","actor":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2016-03-31T11:37:28Z","performed_via_github_app":null},{"id":609660372,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDYwOTY2MDM3Mg==","url":"https://api.github.com/repos/syncthing/syncthing/issues/events/609660372","actor":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2016-03-31T11:37:28Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/203894270","html_url":"https://github.com/syncthing/syncthing/issues/2915#issuecomment-203894270","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/2915","id":203894270,"node_id":"MDEyOklzc3VlQ29tbWVudDIwMzg5NDI3MA==","user":{"login":"plouj","id":282428,"node_id":"MDQ6VXNlcjI4MjQyOA==","avatar_url":"https://avatars.githubusercontent.com/u/282428?v=4","gravatar_id":"","url":"https://api.github.com/users/plouj","html_url":"https://github.com/plouj","followers_url":"https://api.github.com/users/plouj/followers","following_url":"https://api.github.com/users/plouj/following{/other_user}","gists_url":"https://api.github.com/users/plouj/gists{/gist_id}","starred_url":"https://api.github.com/users/plouj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/plouj/subscriptions","organizations_url":"https://api.github.com/users/plouj/orgs","repos_url":"https://api.github.com/users/plouj/repos","events_url":"https://api.github.com/users/plouj/events{/privacy}","received_events_url":"https://api.github.com/users/plouj/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-03-31T11:45:21Z","updated_at":"2016-03-31T11:45:21Z","body":"Ah, I was a little confused before, but I get it now. Yeah, we definitely\nshould only scan the new items in this case. I can work on it. This should\nbe easy to test with an integration test as well.\nOn Mar 31, 2016 07:37, \"pandian912\" notifications@github.com wrote:\n\n> @plouj https://github.com/plouj All files are created and scanned\n> previously with syncthing.\n> To add more details, syncthing root has 25000+ files which are already\n> scanned and synced and inotify is started.\n> \n> Now when a new file is created\n> 1) inotify sends a scan api call with the sub containing only the new file.\n> 2) syncthing does a full scan of the root which takes 5 to 10 seconds and\n> a spike in cpu utilisation (http://pastebin.com/YP0jT4Fj) whenever a new\n> file is added.\n> \n> The above happens whenever a new file is created.\n> I agree its not a typical use case but i see no reason why syncthing\n> shouldn't handle this.\n> Syncthing recieves an api call with file list specified with sub,\n> syncthing should limit itself to scanning the list of files provided in the\n> api call and scan the parent directory only if its not already scanned as\n> pointed by @calmh https://github.com/calmh\n> \n> â€”\n> You are receiving this because you were mentioned.\n> Reply to this email directly or view it on GitHub\n> https://github.com/syncthing/syncthing/issues/2915#issuecomment-203890818\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/203894270/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"plouj","id":282428,"node_id":"MDQ6VXNlcjI4MjQyOA==","avatar_url":"https://avatars.githubusercontent.com/u/282428?v=4","gravatar_id":"","url":"https://api.github.com/users/plouj","html_url":"https://github.com/plouj","followers_url":"https://api.github.com/users/plouj/followers","following_url":"https://api.github.com/users/plouj/following{/other_user}","gists_url":"https://api.github.com/users/plouj/gists{/gist_id}","starred_url":"https://api.github.com/users/plouj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/plouj/subscriptions","organizations_url":"https://api.github.com/users/plouj/orgs","repos_url":"https://api.github.com/users/plouj/repos","events_url":"https://api.github.com/users/plouj/events{/privacy}","received_events_url":"https://api.github.com/users/plouj/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":609669780,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NjA5NjY5Nzgw","url":"https://api.github.com/repos/syncthing/syncthing/issues/events/609669780","actor":{"login":"plouj","id":282428,"node_id":"MDQ6VXNlcjI4MjQyOA==","avatar_url":"https://avatars.githubusercontent.com/u/282428?v=4","gravatar_id":"","url":"https://api.github.com/users/plouj","html_url":"https://github.com/plouj","followers_url":"https://api.github.com/users/plouj/followers","following_url":"https://api.github.com/users/plouj/following{/other_user}","gists_url":"https://api.github.com/users/plouj/gists{/gist_id}","starred_url":"https://api.github.com/users/plouj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/plouj/subscriptions","organizations_url":"https://api.github.com/users/plouj/orgs","repos_url":"https://api.github.com/users/plouj/repos","events_url":"https://api.github.com/users/plouj/events{/privacy}","received_events_url":"https://api.github.com/users/plouj/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2016-03-31T11:45:22Z","performed_via_github_app":null},{"id":609669781,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDYwOTY2OTc4MQ==","url":"https://api.github.com/repos/syncthing/syncthing/issues/events/609669781","actor":{"login":"plouj","id":282428,"node_id":"MDQ6VXNlcjI4MjQyOA==","avatar_url":"https://avatars.githubusercontent.com/u/282428?v=4","gravatar_id":"","url":"https://api.github.com/users/plouj","html_url":"https://github.com/plouj","followers_url":"https://api.github.com/users/plouj/followers","following_url":"https://api.github.com/users/plouj/following{/other_user}","gists_url":"https://api.github.com/users/plouj/gists{/gist_id}","starred_url":"https://api.github.com/users/plouj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/plouj/subscriptions","organizations_url":"https://api.github.com/users/plouj/orgs","repos_url":"https://api.github.com/users/plouj/repos","events_url":"https://api.github.com/users/plouj/events{/privacy}","received_events_url":"https://api.github.com/users/plouj/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2016-03-31T11:45:22Z","performed_via_github_app":null},{"id":609669782,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NjA5NjY5Nzgy","url":"https://api.github.com/repos/syncthing/syncthing/issues/events/609669782","actor":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2016-03-31T11:45:22Z","performed_via_github_app":null},{"id":609669783,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDYwOTY2OTc4Mw==","url":"https://api.github.com/repos/syncthing/syncthing/issues/events/609669783","actor":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2016-03-31T11:45:22Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/203910458","html_url":"https://github.com/syncthing/syncthing/issues/2915#issuecomment-203910458","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/2915","id":203910458,"node_id":"MDEyOklzc3VlQ29tbWVudDIwMzkxMDQ1OA==","user":{"login":"pandian912","id":1931157,"node_id":"MDQ6VXNlcjE5MzExNTc=","avatar_url":"https://avatars.githubusercontent.com/u/1931157?v=4","gravatar_id":"","url":"https://api.github.com/users/pandian912","html_url":"https://github.com/pandian912","followers_url":"https://api.github.com/users/pandian912/followers","following_url":"https://api.github.com/users/pandian912/following{/other_user}","gists_url":"https://api.github.com/users/pandian912/gists{/gist_id}","starred_url":"https://api.github.com/users/pandian912/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pandian912/subscriptions","organizations_url":"https://api.github.com/users/pandian912/orgs","repos_url":"https://api.github.com/users/pandian912/repos","events_url":"https://api.github.com/users/pandian912/events{/privacy}","received_events_url":"https://api.github.com/users/pandian912/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-03-31T12:35:00Z","updated_at":"2016-03-31T12:35:00Z","body":"I think the change needs to go into \nlib/model.go \nfunc unifySubs()\n\nThe function should recursively go through the file path removing one hierarchy per recursion till it finds the already scanned directory or till it finds the filepath.Separator and then return the filepath in the previous recursion.\n\nAFAIK it should not return nil unless the sub list is nil\n\nThis is based on the assumption that scanner.Walker can accept Subs which are not already indexed.\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/203910458/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"pandian912","id":1931157,"node_id":"MDQ6VXNlcjE5MzExNTc=","avatar_url":"https://avatars.githubusercontent.com/u/1931157?v=4","gravatar_id":"","url":"https://api.github.com/users/pandian912","html_url":"https://github.com/pandian912","followers_url":"https://api.github.com/users/pandian912/followers","following_url":"https://api.github.com/users/pandian912/following{/other_user}","gists_url":"https://api.github.com/users/pandian912/gists{/gist_id}","starred_url":"https://api.github.com/users/pandian912/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pandian912/subscriptions","organizations_url":"https://api.github.com/users/pandian912/orgs","repos_url":"https://api.github.com/users/pandian912/repos","events_url":"https://api.github.com/users/pandian912/events{/privacy}","received_events_url":"https://api.github.com/users/pandian912/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/204384028","html_url":"https://github.com/syncthing/syncthing/issues/2915#issuecomment-204384028","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/2915","id":204384028,"node_id":"MDEyOklzc3VlQ29tbWVudDIwNDM4NDAyOA==","user":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-04-01T12:43:34Z","updated_at":"2016-04-01T12:43:34Z","body":"@plouj No need to be that heavy handed, there are unit tests on unifySubs. I think the rule should simply be that we can scan whatever asked for as long as we know of the parent already.\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/204384028/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":611217404,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NjExMjE3NDA0","url":"https://api.github.com/repos/syncthing/syncthing/issues/events/611217404","actor":{"login":"plouj","id":282428,"node_id":"MDQ6VXNlcjI4MjQyOA==","avatar_url":"https://avatars.githubusercontent.com/u/282428?v=4","gravatar_id":"","url":"https://api.github.com/users/plouj","html_url":"https://github.com/plouj","followers_url":"https://api.github.com/users/plouj/followers","following_url":"https://api.github.com/users/plouj/following{/other_user}","gists_url":"https://api.github.com/users/plouj/gists{/gist_id}","starred_url":"https://api.github.com/users/plouj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/plouj/subscriptions","organizations_url":"https://api.github.com/users/plouj/orgs","repos_url":"https://api.github.com/users/plouj/repos","events_url":"https://api.github.com/users/plouj/events{/privacy}","received_events_url":"https://api.github.com/users/plouj/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2016-04-01T12:43:34Z","performed_via_github_app":null},{"id":611217405,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDYxMTIxNzQwNQ==","url":"https://api.github.com/repos/syncthing/syncthing/issues/events/611217405","actor":{"login":"plouj","id":282428,"node_id":"MDQ6VXNlcjI4MjQyOA==","avatar_url":"https://avatars.githubusercontent.com/u/282428?v=4","gravatar_id":"","url":"https://api.github.com/users/plouj","html_url":"https://github.com/plouj","followers_url":"https://api.github.com/users/plouj/followers","following_url":"https://api.github.com/users/plouj/following{/other_user}","gists_url":"https://api.github.com/users/plouj/gists{/gist_id}","starred_url":"https://api.github.com/users/plouj/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/plouj/subscriptions","organizations_url":"https://api.github.com/users/plouj/orgs","repos_url":"https://api.github.com/users/plouj/repos","events_url":"https://api.github.com/users/plouj/events{/privacy}","received_events_url":"https://api.github.com/users/plouj/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2016-04-01T12:43:34Z","performed_via_github_app":null}]