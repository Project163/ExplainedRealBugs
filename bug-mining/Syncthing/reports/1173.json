{"url":"https://api.github.com/repos/syncthing/syncthing/issues/7075","repository_url":"https://api.github.com/repos/syncthing/syncthing","labels_url":"https://api.github.com/repos/syncthing/syncthing/issues/7075/labels{/name}","comments_url":"https://api.github.com/repos/syncthing/syncthing/issues/7075/comments","events_url":"https://api.github.com/repos/syncthing/syncthing/issues/7075/events","html_url":"https://github.com/syncthing/syncthing/issues/7075","id":733704363,"node_id":"MDU6SXNzdWU3MzM3MDQzNjM=","number":7075,"title":"Invalid names are allowed and \"auto accepted\" in folder root path on Windows","user":{"login":"tomasz1986","id":5626656,"node_id":"MDQ6VXNlcjU2MjY2NTY=","avatar_url":"https://avatars.githubusercontent.com/u/5626656?v=4","gravatar_id":"","url":"https://api.github.com/users/tomasz1986","html_url":"https://github.com/tomasz1986","followers_url":"https://api.github.com/users/tomasz1986/followers","following_url":"https://api.github.com/users/tomasz1986/following{/other_user}","gists_url":"https://api.github.com/users/tomasz1986/gists{/gist_id}","starred_url":"https://api.github.com/users/tomasz1986/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/tomasz1986/subscriptions","organizations_url":"https://api.github.com/users/tomasz1986/orgs","repos_url":"https://api.github.com/users/tomasz1986/repos","events_url":"https://api.github.com/users/tomasz1986/events{/privacy}","received_events_url":"https://api.github.com/users/tomasz1986/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":67767665,"node_id":"MDU6TGFiZWw2Nzc2NzY2NQ==","url":"https://api.github.com/repos/syncthing/syncthing/labels/bug","name":"bug","color":"d93f0b","default":true,"description":"A problem with current functionality, as opposed to missing functionality (enhancement)"},{"id":628314330,"node_id":"MDU6TGFiZWw2MjgzMTQzMzA=","url":"https://api.github.com/repos/syncthing/syncthing/labels/frozen-due-to-age","name":"frozen-due-to-age","color":"eeeeee","default":false,"description":"Issues closed and untouched for a long time, together with being locked for discussion"}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/syncthing/syncthing/milestones/58","html_url":"https://github.com/syncthing/syncthing/milestone/58","labels_url":"https://api.github.com/repos/syncthing/syncthing/milestones/58/labels","id":6122062,"node_id":"MDk6TWlsZXN0b25lNjEyMjA2Mg==","number":58,"title":"v1.12.1","description":"","creator":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":40,"state":"closed","created_at":"2020-11-18T12:53:43Z","updated_at":"2021-01-06T08:05:54Z","due_on":"2021-01-05T08:00:00Z","closed_at":"2021-01-06T08:05:54Z"},"comments":0,"created_at":"2020-10-31T12:02:49Z","updated_at":"2021-11-26T07:02:36Z","closed_at":"2020-11-25T21:52:49Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Despite https://github.com/syncthing/syncthing/commit/df99237a7f5462e5cd316a7133d3de0ff24d9952, https://github.com/syncthing/syncthing/commit/9e0b924d57dd6d296472d6af39878437dd7e10bb, https://github.com/syncthing/syncthing/commit/e6b1f67ecfcc53e51300c496ec138123dfd56686, and https://github.com/syncthing/syncthing/commit/fb3281b6476a21d4b918c98359d8885d72c62c71, Syncthing still happily accepts and creates invalid names in the folder root path.\r\n\r\n![image](https://user-images.githubusercontent.com/5626656/97778593-96563b00-1bbb-11eb-8a77-9eb11d8a5f6e.png)\r\n\r\nThis may not be a huge problem by itself, but it actually is when such a folder is automatically pushed to other devices, which are set to \"auto accept\" folders from Device A. Right now, Syncthing will accept and create such folders on those devices. Even without sharing, this is still an issue though, because such a folder created using the Web GUI is undeletable with normal means (such as Windows Explorer, etc.).\r\n\r\nHow to reproduce:\r\n\r\n1. Set Device B to \"Auto Accept\" folders from Device A.\r\n2. Create a folder called \"LPT0\" using the Web GUI on Device A.\r\n3. The folder with invalid name gets created by Syncthing on Device B.\r\n\r\nRelated: https://github.com/syncthing/syncthing/commit/1e71b0093626a00867725813bebc733e967f5353.\r\n\r\nTested with `main` (`v1.11.0-rc.3.dev.7.gdeafe4ca`).\r\n\r\n**Edit**: Apparently, the problem seems to be limited only to `LPT0` and `COM0`. Trying to use other names like `LPT1` and `COM1` results in Syncthing failing to create the folder. Yet, it still pushes the non-existent folder to Device B.","closed_by":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/7075/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/syncthing/syncthing/issues/7075/timeline","performed_via_github_app":null,"state_reason":"completed"}