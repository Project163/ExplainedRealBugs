{"url":"https://api.github.com/repos/syncthing/syncthing/issues/5445","repository_url":"https://api.github.com/repos/syncthing/syncthing","labels_url":"https://api.github.com/repos/syncthing/syncthing/issues/5445/labels{/name}","comments_url":"https://api.github.com/repos/syncthing/syncthing/issues/5445/comments","events_url":"https://api.github.com/repos/syncthing/syncthing/issues/5445/events","html_url":"https://github.com/syncthing/syncthing/issues/5445","id":398369603,"node_id":"MDU6SXNzdWUzOTgzNjk2MDM=","number":5445,"title":"User/group ownership following parent dir","user":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":67767667,"node_id":"MDU6TGFiZWw2Nzc2NzY2Nw==","url":"https://api.github.com/repos/syncthing/syncthing/labels/enhancement","name":"enhancement","color":"0e8a16","default":true,"description":"New features or improvements of some kind, as opposed to a problem (bug)"},{"id":628314330,"node_id":"MDU6TGFiZWw2MjgzMTQzMzA=","url":"https://api.github.com/repos/syncthing/syncthing/labels/frozen-due-to-age","name":"frozen-due-to-age","color":"eeeeee","default":false,"description":"Issues closed and untouched for a long time, together with being locked for discussion"}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/syncthing/syncthing/milestones/31","html_url":"https://github.com/syncthing/syncthing/milestone/31","labels_url":"https://api.github.com/repos/syncthing/syncthing/milestones/31/labels","id":3972102,"node_id":"MDk6TWlsZXN0b25lMzk3MjEwMg==","number":31,"title":"v1.1.0","description":"","creator":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":51,"state":"closed","created_at":"2019-01-15T07:46:41Z","updated_at":"2019-03-05T15:51:16Z","due_on":"2019-03-05T08:00:00Z","closed_at":"2019-03-05T15:51:16Z"},"comments":5,"created_at":"2019-01-11T16:51:02Z","updated_at":"2020-04-22T07:02:35Z","closed_at":"2019-01-25T08:52:26Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Syncing ownership is an oft requested feature (#1329). It's also complex to do it right, which is why that issue languishes without action.\r\n\r\nOne common use case is to synchronize user home directories, or similar structures where a single *folder* might contain multiple directory hierarchies of files, each with a specific user/group owner. A simple way to handle such a case is to enable copying of user/group from the parent directory. That is, if we are creating `foo/bar/baz`, at the final stage where we set the permissions etc we look up the ownership of `foo/bar` and apply those to `foo/bar/baz`. This means that assuming `/home/jb/` is already in place and we are syncing `/home/`, anything under `/home/jb` will get the right ownership.\r\n\r\nThis scheme becomes just a checkbox similar to \"ignore permissions\"; no protocol changes are required. There is no need to have the same uid/gid across systems. The setting is device local only.\r\n\r\nCreating a new user in this scheme requires doing it on both sides, to get the ownership info propagated. I'm OK with that. If this is missed, one can simply do a `chown -R` on the destination side, and the ownership will be preserved from that point onwards.\r\n\r\nThe situation on Windows might be more complex, but on the other hand the whole ownership issue is less important to begin with as ACLs are inherited and contain much of the same information.\r\n\r\nOn linux the process will need `CAP_FOWNER` (I think) which is something we should document that the user needs to sort out.","closed_by":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/5445/reactions","total_count":4,"+1":3,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/syncthing/syncthing/issues/5445/timeline","performed_via_github_app":null,"state_reason":"completed"}