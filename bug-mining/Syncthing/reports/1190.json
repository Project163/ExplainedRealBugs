{"url":"https://api.github.com/repos/syncthing/syncthing/issues/7280","repository_url":"https://api.github.com/repos/syncthing/syncthing","labels_url":"https://api.github.com/repos/syncthing/syncthing/issues/7280/labels{/name}","comments_url":"https://api.github.com/repos/syncthing/syncthing/issues/7280/comments","events_url":"https://api.github.com/repos/syncthing/syncthing/issues/7280/events","html_url":"https://github.com/syncthing/syncthing/issues/7280","id":785842454,"node_id":"MDU6SXNzdWU3ODU4NDI0NTQ=","number":7280,"title":"Stopped folder not synchronizing after a rescan","user":{"login":"acolomb","id":6996887,"node_id":"MDQ6VXNlcjY5OTY4ODc=","avatar_url":"https://avatars.githubusercontent.com/u/6996887?v=4","gravatar_id":"","url":"https://api.github.com/users/acolomb","html_url":"https://github.com/acolomb","followers_url":"https://api.github.com/users/acolomb/followers","following_url":"https://api.github.com/users/acolomb/following{/other_user}","gists_url":"https://api.github.com/users/acolomb/gists{/gist_id}","starred_url":"https://api.github.com/users/acolomb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/acolomb/subscriptions","organizations_url":"https://api.github.com/users/acolomb/orgs","repos_url":"https://api.github.com/users/acolomb/repos","events_url":"https://api.github.com/users/acolomb/events{/privacy}","received_events_url":"https://api.github.com/users/acolomb/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":67767665,"node_id":"MDU6TGFiZWw2Nzc2NzY2NQ==","url":"https://api.github.com/repos/syncthing/syncthing/labels/bug","name":"bug","color":"d93f0b","default":true,"description":"A problem with current functionality, as opposed to missing functionality (enhancement)"},{"id":628314330,"node_id":"MDU6TGFiZWw2MjgzMTQzMzA=","url":"https://api.github.com/repos/syncthing/syncthing/labels/frozen-due-to-age","name":"frozen-due-to-age","color":"eeeeee","default":false,"description":"Issues closed and untouched for a long time, together with being locked for discussion"}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/syncthing/syncthing/milestones/61","html_url":"https://github.com/syncthing/syncthing/milestone/61","labels_url":"https://api.github.com/repos/syncthing/syncthing/milestones/61/labels","id":6390092,"node_id":"MDk6TWlsZXN0b25lNjM5MDA5Mg==","number":61,"title":"v1.14.0","description":"This release adds configurable device and folder defaults.\r\n\r\nThe output format of the [/rest/db/browse endpoint](https://docs.syncthing.net/rest/db-browse-get.html) has changed.","creator":{"login":"imsodin","id":15955093,"node_id":"MDQ6VXNlcjE1OTU1MDkz","avatar_url":"https://avatars.githubusercontent.com/u/15955093?v=4","gravatar_id":"","url":"https://api.github.com/users/imsodin","html_url":"https://github.com/imsodin","followers_url":"https://api.github.com/users/imsodin/followers","following_url":"https://api.github.com/users/imsodin/following{/other_user}","gists_url":"https://api.github.com/users/imsodin/gists{/gist_id}","starred_url":"https://api.github.com/users/imsodin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imsodin/subscriptions","organizations_url":"https://api.github.com/users/imsodin/orgs","repos_url":"https://api.github.com/users/imsodin/repos","events_url":"https://api.github.com/users/imsodin/events{/privacy}","received_events_url":"https://api.github.com/users/imsodin/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":76,"state":"closed","created_at":"2021-02-03T18:59:12Z","updated_at":"2021-03-02T12:44:15Z","due_on":"2021-03-02T08:00:00Z","closed_at":"2021-03-02T12:44:15Z"},"comments":3,"created_at":"2021-01-14T09:48:49Z","updated_at":"2022-01-15T07:02:25Z","closed_at":"2021-01-14T12:29:02Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Seen on Syncthing v1.12.1, Windows 10 64 bit.\r\n\r\nWhen a folder is not available when starting Syncthing (e.g. on removable storage), it will be in the \"Stopped\" state with an appropriate error message \"folder path missing\".  If the physical path becomes available again, a (manual or timed) rescan will usually suffice to get it back into a working state.\r\n\r\nHowever, when a remote device made changes to the folder while it was stopped, the rescan will lead to an \"Out of Sync\" state and the changes are not pulled from a remote device.  They are correctly listed as out of sync items.  Further rescans do not help, only pausing and unpausing the folder makes it work again.\r\n\r\nI expect it to become \"Up to Date\" again after triggering a rescan.  It used to be like that, so looks like a regression in the recently reworked remote index handling.\r\n\r\n### Steps to reproduce\r\n\r\n1. Stop Synchthing on the local device, which mutually shares a folder with a remote device.\r\n2. Move the shared folder path somewhere else so ST won't find it anymoe.\r\n3. Create a new file in the folder on the remote side.\r\n4. Start local ST again and find the folder \"Stopped\" and a warning notification.\r\n5. Wait for the remote device to be connected again.\r\n6. Move the shared folder back into its original location.\r\n7. Press the \"Rescan\" button on the local folder. (Optionally dismiss the notification first.)\r\n8. Find the folder in \"Out of Sync\" state, with the new file listed among unsynchronized items.\r\n9. To fix, pause and then unpause the folder.  Watch it syncing properly and pulling the new file.","closed_by":{"login":"acolomb","id":6996887,"node_id":"MDQ6VXNlcjY5OTY4ODc=","avatar_url":"https://avatars.githubusercontent.com/u/6996887?v=4","gravatar_id":"","url":"https://api.github.com/users/acolomb","html_url":"https://github.com/acolomb","followers_url":"https://api.github.com/users/acolomb/followers","following_url":"https://api.github.com/users/acolomb/following{/other_user}","gists_url":"https://api.github.com/users/acolomb/gists{/gist_id}","starred_url":"https://api.github.com/users/acolomb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/acolomb/subscriptions","organizations_url":"https://api.github.com/users/acolomb/orgs","repos_url":"https://api.github.com/users/acolomb/repos","events_url":"https://api.github.com/users/acolomb/events{/privacy}","received_events_url":"https://api.github.com/users/acolomb/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/7280/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/syncthing/syncthing/issues/7280/timeline","performed_via_github_app":null,"state_reason":"completed"}