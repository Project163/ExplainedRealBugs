{"url":"https://api.github.com/repos/syncthing/syncthing/issues/5674","repository_url":"https://api.github.com/repos/syncthing/syncthing","labels_url":"https://api.github.com/repos/syncthing/syncthing/issues/5674/labels{/name}","comments_url":"https://api.github.com/repos/syncthing/syncthing/issues/5674/comments","events_url":"https://api.github.com/repos/syncthing/syncthing/issues/5674/events","html_url":"https://github.com/syncthing/syncthing/issues/5674","id":438358629,"node_id":"MDU6SXNzdWU0MzgzNTg2Mjk=","number":5674,"title":"panic: close of closed channel","user":{"login":"rahrah","id":638442,"node_id":"MDQ6VXNlcjYzODQ0Mg==","avatar_url":"https://avatars.githubusercontent.com/u/638442?v=4","gravatar_id":"","url":"https://api.github.com/users/rahrah","html_url":"https://github.com/rahrah","followers_url":"https://api.github.com/users/rahrah/followers","following_url":"https://api.github.com/users/rahrah/following{/other_user}","gists_url":"https://api.github.com/users/rahrah/gists{/gist_id}","starred_url":"https://api.github.com/users/rahrah/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rahrah/subscriptions","organizations_url":"https://api.github.com/users/rahrah/orgs","repos_url":"https://api.github.com/users/rahrah/repos","events_url":"https://api.github.com/users/rahrah/events{/privacy}","received_events_url":"https://api.github.com/users/rahrah/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":67767665,"node_id":"MDU6TGFiZWw2Nzc2NzY2NQ==","url":"https://api.github.com/repos/syncthing/syncthing/labels/bug","name":"bug","color":"d93f0b","default":true,"description":"A problem with current functionality, as opposed to missing functionality (enhancement)"},{"id":628314330,"node_id":"MDU6TGFiZWw2MjgzMTQzMzA=","url":"https://api.github.com/repos/syncthing/syncthing/labels/frozen-due-to-age","name":"frozen-due-to-age","color":"eeeeee","default":false,"description":"Issues closed and untouched for a long time, together with being locked for discussion"},{"id":753433298,"node_id":"MDU6TGFiZWw3NTM0MzMyOTg=","url":"https://api.github.com/repos/syncthing/syncthing/labels/skip-changelog","name":"skip-changelog","color":"7fffb4","default":false,"description":"Bugs that have never been in a released stable version, and as such excluded from the release notes"}],"state":"closed","locked":true,"assignee":{"login":"imsodin","id":15955093,"node_id":"MDQ6VXNlcjE1OTU1MDkz","avatar_url":"https://avatars.githubusercontent.com/u/15955093?v=4","gravatar_id":"","url":"https://api.github.com/users/imsodin","html_url":"https://github.com/imsodin","followers_url":"https://api.github.com/users/imsodin/followers","following_url":"https://api.github.com/users/imsodin/following{/other_user}","gists_url":"https://api.github.com/users/imsodin/gists{/gist_id}","starred_url":"https://api.github.com/users/imsodin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imsodin/subscriptions","organizations_url":"https://api.github.com/users/imsodin/orgs","repos_url":"https://api.github.com/users/imsodin/repos","events_url":"https://api.github.com/users/imsodin/events{/privacy}","received_events_url":"https://api.github.com/users/imsodin/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"imsodin","id":15955093,"node_id":"MDQ6VXNlcjE1OTU1MDkz","avatar_url":"https://avatars.githubusercontent.com/u/15955093?v=4","gravatar_id":"","url":"https://api.github.com/users/imsodin","html_url":"https://github.com/imsodin","followers_url":"https://api.github.com/users/imsodin/followers","following_url":"https://api.github.com/users/imsodin/following{/other_user}","gists_url":"https://api.github.com/users/imsodin/gists{/gist_id}","starred_url":"https://api.github.com/users/imsodin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imsodin/subscriptions","organizations_url":"https://api.github.com/users/imsodin/orgs","repos_url":"https://api.github.com/users/imsodin/repos","events_url":"https://api.github.com/users/imsodin/events{/privacy}","received_events_url":"https://api.github.com/users/imsodin/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/syncthing/syncthing/milestones/34","html_url":"https://github.com/syncthing/syncthing/milestone/34","labels_url":"https://api.github.com/repos/syncthing/syncthing/milestones/34/labels","id":4270596,"node_id":"MDk6TWlsZXN0b25lNDI3MDU5Ng==","number":34,"title":"v1.1.4","description":"","creator":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":59,"state":"closed","created_at":"2019-04-29T19:40:08Z","updated_at":"2019-06-04T05:39:10Z","due_on":"2019-06-04T07:00:00Z","closed_at":"2019-06-04T05:39:10Z"},"comments":1,"created_at":"2019-04-29T14:55:44Z","updated_at":"2020-04-29T07:02:35Z","closed_at":"2019-04-29T15:53:03Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Hi,\r\n\r\nI'm using syncthing from git (amongst others on other nodes).  I'm getting:\r\n\r\npanic: close of closed channel\r\n\r\non a moderately reproducible basis.  I did a git bisect between:\r\n\r\n`3bea59b0d9eb9168619811e822ddf421db5b811b`\r\n\r\nand\r\n\r\n`0ca1f26ff8c01bf7d93ffdb4d375db32863ec215`\r\n\r\nThe commit that introduced these panics was:\r\n\r\n`04b927104fe2983875016fe565c352ee9517036a`\r\n\r\nThe subsequent changes made after this perhaps make the panic more difficult to trigger, but reliable enough for a git bisection.\r\n\r\nI'm running the github version on Linux x86_64:\r\nLinux Kernel: 4.19.30\r\nDistro: Slackware current\r\nglibc: 2.29\r\nGo: 1.12.4\r\nsyncthing v1.1.2-rc.1+23-g0ca1f26f \"Erbium Earthworm\" (go1.12.4 linux-amd64)\r\n\r\nSyncthing cluster: 6 devices, including android, virtualised win10, and macosx.  All other systems are running release versions.\r\n\r\nSteps to reproduce the problem.\r\n1) Compile syncthing.\r\n2) Start syncthing.\r\n3) Connect to cluster (already up).\r\n4) Kill syncthing on Mac or Android, then restart.\r\n5) Panic appears on Linux client.\r\n\r\nSorry if bug reports should only be against releases.\r\n\r\nThanks for syncthing.  A very lovely bit of coding.\r\n\r\n===Rich\r\n","closed_by":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/5674/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/syncthing/syncthing/issues/5674/timeline","performed_via_github_app":null,"state_reason":"completed"}