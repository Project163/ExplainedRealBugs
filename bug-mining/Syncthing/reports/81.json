{"url":"https://api.github.com/repos/syncthing/syncthing/issues/805","repository_url":"https://api.github.com/repos/syncthing/syncthing","labels_url":"https://api.github.com/repos/syncthing/syncthing/issues/805/labels{/name}","comments_url":"https://api.github.com/repos/syncthing/syncthing/issues/805/comments","events_url":"https://api.github.com/repos/syncthing/syncthing/issues/805/events","html_url":"https://github.com/syncthing/syncthing/issues/805","id":45240600,"node_id":"MDU6SXNzdWU0NTI0MDYwMA==","number":805,"title":"panic: too many open files (REST API?)","user":{"login":"Zillode","id":14169,"node_id":"MDQ6VXNlcjE0MTY5","avatar_url":"https://avatars.githubusercontent.com/u/14169?v=4","gravatar_id":"","url":"https://api.github.com/users/Zillode","html_url":"https://github.com/Zillode","followers_url":"https://api.github.com/users/Zillode/followers","following_url":"https://api.github.com/users/Zillode/following{/other_user}","gists_url":"https://api.github.com/users/Zillode/gists{/gist_id}","starred_url":"https://api.github.com/users/Zillode/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Zillode/subscriptions","organizations_url":"https://api.github.com/users/Zillode/orgs","repos_url":"https://api.github.com/users/Zillode/repos","events_url":"https://api.github.com/users/Zillode/events{/privacy}","received_events_url":"https://api.github.com/users/Zillode/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":628314330,"node_id":"MDU6TGFiZWw2MjgzMTQzMzA=","url":"https://api.github.com/repos/syncthing/syncthing/labels/frozen-due-to-age","name":"frozen-due-to-age","color":"eeeeee","default":false,"description":"Issues closed and untouched for a long time, together with being locked for discussion"}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2014-10-08T13:02:09Z","updated_at":"2017-06-16T21:12:04Z","closed_at":"2014-10-13T17:34:37Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"1) I'm unsure but I think my external tool (https://github.com/Zillode/syncthing-inotify/) caused this by not properly performing the HTTP requests. I think I fixed it via (https://github.com/Zillode/syncthing-inotify/commit/9dd2a2fd4ba1a9e9b7551ef3ea253885903bba1f and my -incoming- pull request) but it isn't running long enough to retrigger the bug.\n\n2) If this is not due to the REST API, it might be related to https://github.com/syncthing/syncthing/issues/587\n\nThe log is big so I've put it online at http://wilma.vub.ac.be/~lhoste/private/panic-20141008-121902.log (will be deleted when issue is closed)\n\n```\n[45W46] 12:04:17 WARNING: multicast interfaces: netlink rib: too many open files\n[45W46] 12:04:17 WARNING: Broadcast: interface addresses: netlink rib: too many open files\n[45W46] 12:18:49 WARNING: Broadcast: interface addresses: netlink rib: too many open files\npanic: open /home/____/.config/syncthing/index/030242.log: too many open files\n...\n\ngoroutine 2592 [IO wait, 57 minutes]:\nnet.runtime_pollWait(0x7f3e31f8dd20, 0x72, 0x0)\n    /usr/local/go/src/pkg/runtime/netpoll.goc:146 +0x66\nnet.(*pollDesc).Wait(0xc20b06fb80, 0x72, 0x0, 0x0)\n    /usr/local/go/src/pkg/net/fd_poll_runtime.go:84 +0x46\nnet.(*pollDesc).WaitRead(0xc20b06fb80, 0x0, 0x0)\n    /usr/local/go/src/pkg/net/fd_poll_runtime.go:89 +0x42\nnet.(*netFD).Read(0xc20b06fb20, 0xc209cf4000, 0x1000, 0x1000, 0x0, 0x7f3e4e3233c8, 0xb)\n    /usr/local/go/src/pkg/net/fd_unix.go:242 +0x34c\nnet.(*conn).Read(0xc2090834a0, 0xc209cf4000, 0x1000, 0x1000, 0x0, 0x0, 0x0)\n    /usr/local/go/src/pkg/net/net.go:122 +0xe7\nbufio.(*Reader).Read(0xc20afedaa0, 0xc209cf4000, 0x1000, 0x1000, 0x1000, 0x0, 0x0)\n    /usr/local/go/src/pkg/bufio/bufio.go:165 +0x13b\nmain.(*WrappedConnection).Read(0xc2084053e0, 0xc209cf4000, 0x1000, 0x1000, 0x0, 0x0, 0x0)\n    /data/Sync-Projects/golang-workspace/src/github.com/syncthing/syncthing/cmd/syncthing/tls.go:146 +0x77\nnet/http.(*liveSwitchReader).Read(0xc209858f28, 0xc209cf4000, 0x1000, 0x1000, 0xf4a, 0x0, 0x0)\n    /usr/local/go/src/pkg/net/http/server.go:206 +0xaf\nio.(*LimitedReader).Read(0xc208405400, 0xc209cf4000, 0x1000, 0x1000, 0x1d, 0x0, 0x0)\n    /usr/local/go/src/pkg/io/io.go:399 +0xd0\nbufio.(*Reader).fill(0xc20afedb00)\n    /usr/local/go/src/pkg/bufio/bufio.go:97 +0x1b3\nbufio.(*Reader).ReadSlice(0xc20afedb00, 0x44650a, 0x0, 0x0, 0x0, 0x0, 0x0)\n    /usr/local/go/src/pkg/bufio/bufio.go:298 +0x22c\nbufio.(*Reader).ReadLine(0xc20afedb00, 0x0, 0x0, 0x0, 0x445100, 0x0, 0x0)\n    /usr/local/go/src/pkg/bufio/bufio.go:326 +0x69\nnet/textproto.(*Reader).readLineSlice(0xc208992990, 0x0, 0x0, 0x0, 0x0, 0x0)\n    /usr/local/go/src/pkg/net/textproto/reader.go:55 +0x9d\nnet/textproto.(*Reader).ReadLine(0xc208992990, 0x0, 0x0, 0x0, 0x0)\n    /usr/local/go/src/pkg/net/textproto/reader.go:36 +0x4e\nnet/http.ReadRequest(0xc20afedb00, 0xc20950eea0, 0x0, 0x0)\n    /usr/local/go/src/pkg/net/http/request.go:556 +0xc7\nnet/http.(*conn).readRequest(0xc209858f00, 0x0, 0x0, 0x0)\n    /usr/local/go/src/pkg/net/http/server.go:577 +0x276\nnet/http.(*conn).serve(0xc209858f00)\n    /usr/local/go/src/pkg/net/http/server.go:1132 +0x61e\ncreated by net/http.(*Server).Serve\n    /usr/local/go/src/pkg/net/http/server.go:1721 +0x313\n...\n```\n","closed_by":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/805/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/syncthing/syncthing/issues/805/timeline","performed_via_github_app":null,"state_reason":"completed"}