[{"id":4527261487,"node_id":"MDEyOkxhYmVsZWRFdmVudDQ1MjcyNjE0ODc=","url":"https://api.github.com/repos/syncthing/syncthing/issues/events/4527261487","actor":{"login":"imsodin","id":15955093,"node_id":"MDQ6VXNlcjE1OTU1MDkz","avatar_url":"https://avatars.githubusercontent.com/u/15955093?v=4","gravatar_id":"","url":"https://api.github.com/users/imsodin","html_url":"https://github.com/imsodin","followers_url":"https://api.github.com/users/imsodin/followers","following_url":"https://api.github.com/users/imsodin/following{/other_user}","gists_url":"https://api.github.com/users/imsodin/gists{/gist_id}","starred_url":"https://api.github.com/users/imsodin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imsodin/subscriptions","organizations_url":"https://api.github.com/users/imsodin/orgs","repos_url":"https://api.github.com/users/imsodin/repos","events_url":"https://api.github.com/users/imsodin/events{/privacy}","received_events_url":"https://api.github.com/users/imsodin/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2021-03-30T12:28:29Z","label":{"name":"bug","color":"d93f0b"},"performed_via_github_app":null},{"id":4527261489,"node_id":"MDEyOkxhYmVsZWRFdmVudDQ1MjcyNjE0ODk=","url":"https://api.github.com/repos/syncthing/syncthing/issues/events/4527261489","actor":{"login":"imsodin","id":15955093,"node_id":"MDQ6VXNlcjE1OTU1MDkz","avatar_url":"https://avatars.githubusercontent.com/u/15955093?v=4","gravatar_id":"","url":"https://api.github.com/users/imsodin","html_url":"https://github.com/imsodin","followers_url":"https://api.github.com/users/imsodin/followers","following_url":"https://api.github.com/users/imsodin/following{/other_user}","gists_url":"https://api.github.com/users/imsodin/gists{/gist_id}","starred_url":"https://api.github.com/users/imsodin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imsodin/subscriptions","organizations_url":"https://api.github.com/users/imsodin/orgs","repos_url":"https://api.github.com/users/imsodin/repos","events_url":"https://api.github.com/users/imsodin/events{/privacy}","received_events_url":"https://api.github.com/users/imsodin/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2021-03-30T12:28:29Z","label":{"name":"needs-triage","color":"ce23af"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/810478941","html_url":"https://github.com/syncthing/syncthing/issues/7533#issuecomment-810478941","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/7533","id":810478941,"node_id":"MDEyOklzc3VlQ29tbWVudDgxMDQ3ODk0MQ==","user":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-30T18:23:43Z","updated_at":"2021-03-30T18:26:34Z","body":"I don't think leaking version vectors is acceptable as it essentially lists the device IDs of everyone in the cluster. A single entry with the sum of the other version values should work I think (but I didn't think deeply about it...). :)","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/810478941/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":4530082288,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDQ1MzAwODIyODg=","url":"https://api.github.com/repos/syncthing/syncthing/issues/events/4530082288","actor":{"login":"imsodin","id":15955093,"node_id":"MDQ6VXNlcjE1OTU1MDkz","avatar_url":"https://avatars.githubusercontent.com/u/15955093?v=4","gravatar_id":"","url":"https://api.github.com/users/imsodin","html_url":"https://github.com/imsodin","followers_url":"https://api.github.com/users/imsodin/followers","following_url":"https://api.github.com/users/imsodin/following{/other_user}","gists_url":"https://api.github.com/users/imsodin/gists{/gist_id}","starred_url":"https://api.github.com/users/imsodin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imsodin/subscriptions","organizations_url":"https://api.github.com/users/imsodin/orgs","repos_url":"https://api.github.com/users/imsodin/repos","events_url":"https://api.github.com/users/imsodin/events{/privacy}","received_events_url":"https://api.github.com/users/imsodin/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"8a4bc99c514f21575c3f012dab4832a3148a3e5a","commit_url":"https://api.github.com/repos/imsodin/syncthing/commits/8a4bc99c514f21575c3f012dab4832a3148a3e5a","created_at":"2021-03-30T20:05:06Z","performed_via_github_app":null},{"id":4532499131,"node_id":"MDExOkNsb3NlZEV2ZW50NDUzMjQ5OTEzMQ==","url":"https://api.github.com/repos/syncthing/syncthing/issues/events/4532499131","actor":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"0dcd9794d4315efcad42d9d6f850e806defd889e","commit_url":"https://api.github.com/repos/syncthing/syncthing/commits/0dcd9794d4315efcad42d9d6f850e806defd889e","created_at":"2021-03-31T06:59:17Z","state_reason":null,"performed_via_github_app":null},{"id":4554780197,"node_id":"MDE1Ok1pbGVzdG9uZWRFdmVudDQ1NTQ3ODAxOTc=","url":"https://api.github.com/repos/syncthing/syncthing/issues/events/4554780197","actor":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"milestoned","commit_id":null,"commit_url":null,"created_at":"2021-04-06T06:29:55Z","milestone":{"title":"v1.15.1"},"performed_via_github_app":null},{"id":4706751549,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDQ3MDY3NTE1NDk=","url":"https://api.github.com/repos/syncthing/syncthing/issues/events/4706751549","actor":{"login":"greatroar","id":61184462,"node_id":"MDQ6VXNlcjYxMTg0NDYy","avatar_url":"https://avatars.githubusercontent.com/u/61184462?v=4","gravatar_id":"","url":"https://api.github.com/users/greatroar","html_url":"https://github.com/greatroar","followers_url":"https://api.github.com/users/greatroar/followers","following_url":"https://api.github.com/users/greatroar/following{/other_user}","gists_url":"https://api.github.com/users/greatroar/gists{/gist_id}","starred_url":"https://api.github.com/users/greatroar/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/greatroar/subscriptions","organizations_url":"https://api.github.com/users/greatroar/orgs","repos_url":"https://api.github.com/users/greatroar/repos","events_url":"https://api.github.com/users/greatroar/events{/privacy}","received_events_url":"https://api.github.com/users/greatroar/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"ffda116c3924b8a4b754649bf7be4fa8f829f379","commit_url":"https://api.github.com/repos/greatroar/syncthing/commits/ffda116c3924b8a4b754649bf7be4fa8f829f379","created_at":"2021-05-08T07:25:37Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/984484926","html_url":"https://github.com/syncthing/syncthing/issues/7533#issuecomment-984484926","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/7533","id":984484926,"node_id":"IC_kwDOAOCAEs46rgw-","user":{"login":"klimkiewicz","id":214600,"node_id":"MDQ6VXNlcjIxNDYwMA==","avatar_url":"https://avatars.githubusercontent.com/u/214600?v=4","gravatar_id":"","url":"https://api.github.com/users/klimkiewicz","html_url":"https://github.com/klimkiewicz","followers_url":"https://api.github.com/users/klimkiewicz/followers","following_url":"https://api.github.com/users/klimkiewicz/following{/other_user}","gists_url":"https://api.github.com/users/klimkiewicz/gists{/gist_id}","starred_url":"https://api.github.com/users/klimkiewicz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/klimkiewicz/subscriptions","organizations_url":"https://api.github.com/users/klimkiewicz/orgs","repos_url":"https://api.github.com/users/klimkiewicz/repos","events_url":"https://api.github.com/users/klimkiewicz/events{/privacy}","received_events_url":"https://api.github.com/users/klimkiewicz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-12-02T10:14:47Z","updated_at":"2021-12-02T10:14:47Z","body":"@imsodin  - I think the problem still exists, although it's harder to trigger. I have three devices:\r\n\r\n  TrustedA <-> Untrusted <-> TrustedB\r\n\r\nTrustedA talks to Untrusted only, and TrustedB talks to Untrusted only (TrustedA & TrustedB don't talk to each other).\r\n\r\nFirst TrustedA & TrustedB are both in sync. Let's say they only track FileA. The version vector for the file (on both machines) looks sth like: {{TrustedA, 1638435678}, {TrustedB, 1638435170}}. Untrusted sees the vector as {1, 3276870848} (sum of counters of TrustedA & TrustedB). They now both go offline and we modify the file on both machines.\r\n\r\nTrustedA now has vector of {{TrustedA, 1638435766}, {TrustedB, 1638435170}}. Untrusted vector is {1, 3276870936}.\r\nTrustedB now has vector of {{TrustedA, 1638435678}, {TrustedB, 1638435740}}. Untrusted vector is {1, 3276871418}.\r\n\r\n(Sorry for these big timestamps, but they're actual values from debugging session). Note how latest modification is on TrustedA but the biggest untrusted vector is the one from TrustedB.\r\n\r\nNow TrustedA sends IndexUpdate to Untrusted, and the latest version on Untrusted becomes {1, 3276870936}. Untrusted doesn't fetch the file from TrustedA yet, but instead TrustedB connects and sends its IndexUpdate to Untrusted and the latest version on Untrusted becomes {1, 3276871418}. Untrusted fetches the file from TrustedB and sends IndexUpdate to TrustedA. **But** TrustedA is not convinced by this IndexUpdate, as it thinks it has the latest version (according to \"unencrypted\" latest modification date of the file) and so it expects Untrusted to fetch its version of the file. And it shows \"Syncing...\" message until another change on the file occurs. I hope the above is somewhat clear ;).\r\n\r\nIt seems to me the sum of version counters is not the correct approach here. The maximum value from the version vector would probably work, but it leaks the latest modification date of the file, so that may be problematic too (although this can be inferred from the network communication rather easily as well).\r\n\r\nWhat do you think? Thanks!","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/984484926/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"klimkiewicz","id":214600,"node_id":"MDQ6VXNlcjIxNDYwMA==","avatar_url":"https://avatars.githubusercontent.com/u/214600?v=4","gravatar_id":"","url":"https://api.github.com/users/klimkiewicz","html_url":"https://github.com/klimkiewicz","followers_url":"https://api.github.com/users/klimkiewicz/followers","following_url":"https://api.github.com/users/klimkiewicz/following{/other_user}","gists_url":"https://api.github.com/users/klimkiewicz/gists{/gist_id}","starred_url":"https://api.github.com/users/klimkiewicz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/klimkiewicz/subscriptions","organizations_url":"https://api.github.com/users/klimkiewicz/orgs","repos_url":"https://api.github.com/users/klimkiewicz/repos","events_url":"https://api.github.com/users/klimkiewicz/events{/privacy}","received_events_url":"https://api.github.com/users/klimkiewicz/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":5704749008,"node_id":"MEE_lADOAOCAEs4yVYeizwAAAAFUB4_Q","url":"https://api.github.com/repos/syncthing/syncthing/issues/events/5704749008","actor":{"login":"imsodin","id":15955093,"node_id":"MDQ6VXNlcjE1OTU1MDkz","avatar_url":"https://avatars.githubusercontent.com/u/15955093?v=4","gravatar_id":"","url":"https://api.github.com/users/imsodin","html_url":"https://github.com/imsodin","followers_url":"https://api.github.com/users/imsodin/followers","following_url":"https://api.github.com/users/imsodin/following{/other_user}","gists_url":"https://api.github.com/users/imsodin/gists{/gist_id}","starred_url":"https://api.github.com/users/imsodin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imsodin/subscriptions","organizations_url":"https://api.github.com/users/imsodin/orgs","repos_url":"https://api.github.com/users/imsodin/repos","events_url":"https://api.github.com/users/imsodin/events{/privacy}","received_events_url":"https://api.github.com/users/imsodin/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2021-12-02T10:14:47Z","performed_via_github_app":null},{"id":5704749014,"node_id":"SE_lADOAOCAEs4yVYeizwAAAAFUB4_W","url":"https://api.github.com/repos/syncthing/syncthing/issues/events/5704749014","actor":{"login":"imsodin","id":15955093,"node_id":"MDQ6VXNlcjE1OTU1MDkz","avatar_url":"https://avatars.githubusercontent.com/u/15955093?v=4","gravatar_id":"","url":"https://api.github.com/users/imsodin","html_url":"https://github.com/imsodin","followers_url":"https://api.github.com/users/imsodin/followers","following_url":"https://api.github.com/users/imsodin/following{/other_user}","gists_url":"https://api.github.com/users/imsodin/gists{/gist_id}","starred_url":"https://api.github.com/users/imsodin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imsodin/subscriptions","organizations_url":"https://api.github.com/users/imsodin/orgs","repos_url":"https://api.github.com/users/imsodin/repos","events_url":"https://api.github.com/users/imsodin/events{/privacy}","received_events_url":"https://api.github.com/users/imsodin/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2021-12-02T10:14:47Z","performed_via_github_app":null},{"id":7169259086,"node_id":"LE_lADOAOCAEs4yVYeizwAAAAGrUjZO","url":"https://api.github.com/repos/syncthing/syncthing/issues/events/7169259086","actor":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2022-08-11T07:16:01Z","label":{"name":"frozen-due-to-age","color":"eeeeee"},"performed_via_github_app":null},{"id":7169259136,"node_id":"LOE_lADOAOCAEs4yVYeizwAAAAGrUjaA","url":"https://api.github.com/repos/syncthing/syncthing/issues/events/7169259136","actor":{"login":"syncthing","id":7628018,"node_id":"MDEyOk9yZ2FuaXphdGlvbjc2MjgwMTg=","avatar_url":"https://avatars.githubusercontent.com/u/7628018?v=4","gravatar_id":"","url":"https://api.github.com/users/syncthing","html_url":"https://github.com/syncthing","followers_url":"https://api.github.com/users/syncthing/followers","following_url":"https://api.github.com/users/syncthing/following{/other_user}","gists_url":"https://api.github.com/users/syncthing/gists{/gist_id}","starred_url":"https://api.github.com/users/syncthing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/syncthing/subscriptions","organizations_url":"https://api.github.com/users/syncthing/orgs","repos_url":"https://api.github.com/users/syncthing/repos","events_url":"https://api.github.com/users/syncthing/events{/privacy}","received_events_url":"https://api.github.com/users/syncthing/received_events","type":"Organization","user_view_type":"public","site_admin":false},"event":"locked","commit_id":null,"commit_url":null,"created_at":"2022-08-11T07:16:01Z","lock_reason":null,"performed_via_github_app":null},{"id":12098066583,"node_id":"REFE_lADOAOCAEs4yVYeizwAAAALRGdiX","url":"https://api.github.com/repos/syncthing/syncthing/issues/events/12098066583","actor":{"login":"FaceAce1","id":31513433,"node_id":"MDQ6VXNlcjMxNTEzNDMz","avatar_url":"https://avatars.githubusercontent.com/u/31513433?v=4","gravatar_id":"","url":"https://api.github.com/users/FaceAce1","html_url":"https://github.com/FaceAce1","followers_url":"https://api.github.com/users/FaceAce1/followers","following_url":"https://api.github.com/users/FaceAce1/following{/other_user}","gists_url":"https://api.github.com/users/FaceAce1/gists{/gist_id}","starred_url":"https://api.github.com/users/FaceAce1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/FaceAce1/subscriptions","organizations_url":"https://api.github.com/users/FaceAce1/orgs","repos_url":"https://api.github.com/users/FaceAce1/repos","events_url":"https://api.github.com/users/FaceAce1/events{/privacy}","received_events_url":"https://api.github.com/users/FaceAce1/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"0dcd9794d4315efcad42d9d6f850e806defd889e","commit_url":"https://api.github.com/repos/FaceAce1/syncthing/commits/0dcd9794d4315efcad42d9d6f850e806defd889e","created_at":"2024-03-13T05:39:54Z","performed_via_github_app":null}]