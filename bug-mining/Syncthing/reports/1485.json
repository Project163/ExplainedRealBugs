{"url":"https://api.github.com/repos/syncthing/syncthing/issues/9519","repository_url":"https://api.github.com/repos/syncthing/syncthing","labels_url":"https://api.github.com/repos/syncthing/syncthing/issues/9519/labels{/name}","comments_url":"https://api.github.com/repos/syncthing/syncthing/issues/9519/comments","events_url":"https://api.github.com/repos/syncthing/syncthing/issues/9519/events","html_url":"https://github.com/syncthing/syncthing/issues/9519","id":2266117621,"node_id":"I_kwDOAOCAEs6HEjX1","number":9519,"title":"Expand Prometheus Metrics to state device/folder names","user":{"login":"simonmicro","id":24966116,"node_id":"MDQ6VXNlcjI0OTY2MTE2","avatar_url":"https://avatars.githubusercontent.com/u/24966116?v=4","gravatar_id":"","url":"https://api.github.com/users/simonmicro","html_url":"https://github.com/simonmicro","followers_url":"https://api.github.com/users/simonmicro/followers","following_url":"https://api.github.com/users/simonmicro/following{/other_user}","gists_url":"https://api.github.com/users/simonmicro/gists{/gist_id}","starred_url":"https://api.github.com/users/simonmicro/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/simonmicro/subscriptions","organizations_url":"https://api.github.com/users/simonmicro/orgs","repos_url":"https://api.github.com/users/simonmicro/repos","events_url":"https://api.github.com/users/simonmicro/events{/privacy}","received_events_url":"https://api.github.com/users/simonmicro/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":67767667,"node_id":"MDU6TGFiZWw2Nzc2NzY2Nw==","url":"https://api.github.com/repos/syncthing/syncthing/labels/enhancement","name":"enhancement","color":"0e8a16","default":true,"description":"New features or improvements of some kind, as opposed to a problem (bug)"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2024-04-26T16:24:15Z","updated_at":"2025-05-31T15:09:24Z","closed_at":"2025-05-31T15:09:24Z","author_association":"NONE","type":{"id":818061,"node_id":"IT_kwDOAHRk8s4ADHuN","name":"Feature","description":"A request, idea, or new functionality","color":"blue","created_at":"2024-01-25T10:48:46Z","updated_at":"2024-10-08T08:58:51Z","is_enabled":true},"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Feature description\n\nCurrently, metrics like:\r\n\r\n- syncthing_protocol_recv_bytes_total\r\n- syncthing_model_folder_processed_bytes_total\r\n\r\nState only the object ids as label to be scraped. I would welcome the addition of the clear-text values as labels in addition to the ids.\n\n### Problem or use case\n\nAfter scraping a Syncthing server using Prometheus, I can display the metrics with tools like Grafana. Sadly, I can only display the unresolved ids of the folders / devices inside the UI, as no further information is available.\r\n\r\nThis leads to problems that alerts cannot contain easy-to-interepret descriptions - for admins to decide if they want to start investigation. In addition, admins cannot interpret e.g. if spikes in traffic are legitimate (as the device is only visible as ID) in Grafana, which makes anomaly-investigations harder.\r\n\r\nFinally, with growing numbers of devices and folders connected to an instance (for me `>40` folders / `>8` devices) the metrics get more and more hard to read - pie charts containing statistics about specific folders in comparison to each other are just unreadable.\r\n\r\nHere are some samples (blue = mask for privacy):\r\n\r\n![Screenshot from 2024-04-26 18-18-52](https://github.com/syncthing/syncthing/assets/24966116/f1faa737-9dde-42aa-b79d-5db5476493ca)\r\n![Screenshot from 2024-04-26 18-19-03](https://github.com/syncthing/syncthing/assets/24966116/1d621cab-2287-4ac2-bb80-4e3eb250c8bc)\r\n\n\n### Alternatives or workarounds\n\n- Write an own exporter to scrape Syncthing-metrics and label them with the metadata available over the api.\r\n- Relabel all ids by hand in the Prometheus config?","closed_by":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/9519/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/syncthing/syncthing/issues/9519/timeline","performed_via_github_app":null,"state_reason":"completed"}