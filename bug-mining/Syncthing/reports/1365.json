{"url":"https://api.github.com/repos/syncthing/syncthing/issues/8859","repository_url":"https://api.github.com/repos/syncthing/syncthing","labels_url":"https://api.github.com/repos/syncthing/syncthing/issues/8859/labels{/name}","comments_url":"https://api.github.com/repos/syncthing/syncthing/issues/8859/comments","events_url":"https://api.github.com/repos/syncthing/syncthing/issues/8859/events","html_url":"https://github.com/syncthing/syncthing/issues/8859","id":1659778523,"node_id":"I_kwDOAOCAEs5i7jXb","number":8859,"title":"Incorrect handling of path for auto accepted folder","user":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":67767665,"node_id":"MDU6TGFiZWw2Nzc2NzY2NQ==","url":"https://api.github.com/repos/syncthing/syncthing/labels/bug","name":"bug","color":"d93f0b","default":true,"description":"A problem with current functionality, as opposed to missing functionality (enhancement)"},{"id":628314330,"node_id":"MDU6TGFiZWw2MjgzMTQzMzA=","url":"https://api.github.com/repos/syncthing/syncthing/labels/frozen-due-to-age","name":"frozen-due-to-age","color":"eeeeee","default":false,"description":"Issues closed and untouched for a long time, together with being locked for discussion"}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/syncthing/syncthing/milestones/93","html_url":"https://github.com/syncthing/syncthing/milestone/93","labels_url":"https://api.github.com/repos/syncthing/syncthing/milestones/93/labels","id":9249433,"node_id":"MI_kwDOAOCAEs4AjSKZ","number":93,"title":"v1.23.5","description":"","creator":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":17,"state":"closed","created_at":"2023-04-05T13:34:11Z","updated_at":"2023-06-06T07:47:53Z","due_on":"2023-06-06T07:00:00Z","closed_at":"2023-06-06T07:47:53Z"},"comments":0,"created_at":"2023-04-09T07:14:28Z","updated_at":"2024-04-10T18:44:51Z","closed_at":"2023-04-11T11:07:31Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"There's a problem in the logic for auto-accepted folders. The idea is that the folder should be placed in a subdirectory to the \"default folder path\", with the subdirectory name generated from the folder label or ID, in that order. We ensure that this path doesn't exist before starting to use it. However,\r\n\r\n1. if the label (or sanitised ID) is empty, Syncthing will try to use the default folder path itself\r\n2. if we're auto-accepting multiple folders at the same time, we might add two or more with the same path, because the folder path isn't created until later when the folder is started.\r\n\r\nBy default, the default folder path is the user home directory which is very likely to already exist (or Syncthing is likely to be unable to create it), and if it's something else it's guaranteed to exist once a folder has been accepted. This should make point one a fairly rare problem \"in the wild\". Point two is a problem only when multiple folders with identical labels are shared simultaneously.","closed_by":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/8859/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/syncthing/syncthing/issues/8859/timeline","performed_via_github_app":null,"state_reason":"completed"}