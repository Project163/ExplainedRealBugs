[{"id":788804847,"node_id":"MDEyOkxhYmVsZWRFdmVudDc4ODgwNDg0Nw==","url":"https://api.github.com/repos/syncthing/syncthing/issues/events/788804847","actor":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2016-09-14T08:50:23Z","label":{"name":"bug","color":"fc2929"},"performed_via_github_app":null},{"id":788804908,"node_id":"MDE1Ok1pbGVzdG9uZWRFdmVudDc4ODgwNDkwOA==","url":"https://api.github.com/repos/syncthing/syncthing/issues/events/788804908","actor":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"milestoned","commit_id":null,"commit_url":null,"created_at":"2016-09-14T08:50:25Z","milestone":{"title":"Planned"},"performed_via_github_app":null},{"id":788910630,"node_id":"MDEzOkFzc2lnbmVkRXZlbnQ3ODg5MTA2MzA=","url":"https://api.github.com/repos/syncthing/syncthing/issues/events/788910630","actor":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"assigned","commit_id":null,"commit_url":null,"created_at":"2016-09-14T10:20:31Z","assignee":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"performed_via_github_app":null},{"id":789704050,"node_id":"MDExOkNsb3NlZEV2ZW50Nzg5NzA0MDUw","url":"https://api.github.com/repos/syncthing/syncthing/issues/events/789704050","actor":{"login":"st-review","id":16196517,"node_id":"MDQ6VXNlcjE2MTk2NTE3","avatar_url":"https://avatars.githubusercontent.com/u/16196517?v=4","gravatar_id":"","url":"https://api.github.com/users/st-review","html_url":"https://github.com/st-review","followers_url":"https://api.github.com/users/st-review/followers","following_url":"https://api.github.com/users/st-review/following{/other_user}","gists_url":"https://api.github.com/users/st-review/gists{/gist_id}","starred_url":"https://api.github.com/users/st-review/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/st-review/subscriptions","organizations_url":"https://api.github.com/users/st-review/orgs","repos_url":"https://api.github.com/users/st-review/repos","events_url":"https://api.github.com/users/st-review/events{/privacy}","received_events_url":"https://api.github.com/users/st-review/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"da0b7cc7f2a3db160513631b0af2704dfe9a1767","commit_url":"https://api.github.com/repos/syncthing/syncthing/commits/da0b7cc7f2a3db160513631b0af2704dfe9a1767","created_at":"2016-09-14T19:39:00Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/258619243","html_url":"https://github.com/syncthing/syncthing/issues/3596#issuecomment-258619243","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/3596","id":258619243,"node_id":"MDEyOklzc3VlQ29tbWVudDI1ODYxOTI0Mw==","user":{"login":"AudriusButkevicius","id":1144861,"node_id":"MDQ6VXNlcjExNDQ4NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1144861?v=4","gravatar_id":"","url":"https://api.github.com/users/AudriusButkevicius","html_url":"https://github.com/AudriusButkevicius","followers_url":"https://api.github.com/users/AudriusButkevicius/followers","following_url":"https://api.github.com/users/AudriusButkevicius/following{/other_user}","gists_url":"https://api.github.com/users/AudriusButkevicius/gists{/gist_id}","starred_url":"https://api.github.com/users/AudriusButkevicius/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AudriusButkevicius/subscriptions","organizations_url":"https://api.github.com/users/AudriusButkevicius/orgs","repos_url":"https://api.github.com/users/AudriusButkevicius/repos","events_url":"https://api.github.com/users/AudriusButkevicius/events{/privacy}","received_events_url":"https://api.github.com/users/AudriusButkevicius/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-05T15:35:18Z","updated_at":"2016-11-05T15:35:18Z","body":"So this now deadlocks with Availability(). Even tho both use RLocks, if any Lock() is in the queue on either of the locks, the other side can't get an RLock() hence cannot release the other lock and cause a deadlock.\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/258619243/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"AudriusButkevicius","id":1144861,"node_id":"MDQ6VXNlcjExNDQ4NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1144861?v=4","gravatar_id":"","url":"https://api.github.com/users/AudriusButkevicius","html_url":"https://github.com/AudriusButkevicius","followers_url":"https://api.github.com/users/AudriusButkevicius/followers","following_url":"https://api.github.com/users/AudriusButkevicius/following{/other_user}","gists_url":"https://api.github.com/users/AudriusButkevicius/gists{/gist_id}","starred_url":"https://api.github.com/users/AudriusButkevicius/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AudriusButkevicius/subscriptions","organizations_url":"https://api.github.com/users/AudriusButkevicius/orgs","repos_url":"https://api.github.com/users/AudriusButkevicius/repos","events_url":"https://api.github.com/users/AudriusButkevicius/events{/privacy}","received_events_url":"https://api.github.com/users/AudriusButkevicius/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/258619526","html_url":"https://github.com/syncthing/syncthing/issues/3596#issuecomment-258619526","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/3596","id":258619526,"node_id":"MDEyOklzc3VlQ29tbWVudDI1ODYxOTUyNg==","user":{"login":"AudriusButkevicius","id":1144861,"node_id":"MDQ6VXNlcjExNDQ4NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1144861?v=4","gravatar_id":"","url":"https://api.github.com/users/AudriusButkevicius","html_url":"https://github.com/AudriusButkevicius","followers_url":"https://api.github.com/users/AudriusButkevicius/followers","following_url":"https://api.github.com/users/AudriusButkevicius/following{/other_user}","gists_url":"https://api.github.com/users/AudriusButkevicius/gists{/gist_id}","starred_url":"https://api.github.com/users/AudriusButkevicius/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AudriusButkevicius/subscriptions","organizations_url":"https://api.github.com/users/AudriusButkevicius/orgs","repos_url":"https://api.github.com/users/AudriusButkevicius/repos","events_url":"https://api.github.com/users/AudriusButkevicius/events{/privacy}","received_events_url":"https://api.github.com/users/AudriusButkevicius/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-05T15:39:59Z","updated_at":"2016-11-05T15:42:58Z","body":"For example:\n\n```\npanic: deadlock detected at pmut\n===pmut===\nnot held (writer)\nat model\\model.go:2075 goid: 2990 for 5m4.651425s (reader)\nat model\\model.go:2075 goid: 3013 for 5m4.8314353s (reader)\nat model\\model.go:2075 goid: 3010 for 5m4.7704319s (reader)\nat model\\model.go:2075 goid: 2991 for 5m4.6704261s (reader)\n===fmut===\nnot held (writer)\nat model\\model.go:399 goid: 2950 for 5m4.527418s (reader)\nat model\\model.go:399 goid: 3189 for 5m4.5374185s (reader)\n```\n\nAll R holders of pmut are at the same place.\nAll R holders of fmut are in the same place.\n\n```\ngoroutine 2990 [semacquire, 5 minutes]: holds R on pmut\nsync.runtime_Semacquire(0xc04393ea5c)\n    c:/go/src/runtime/sema.go:47 +0x37\nsync.(*RWMutex).RLock(0xc04393ea50)\n    c:/go/src/sync/rwmutex.go:43 +0x64\ngithub.com/syncthing/syncthing/lib/sync.(*loggedRWMutex).RLock(0xc04393ea50)\n    c:/jenkins/workspace/syncthing-windows/src/github.com/syncthing/syncthing/lib/sync/sync.go:152 +0x49\ngithub.com/syncthing/syncthing/lib/model.(*Model).Availability(0xc042056140, 0xc0422ae670, 0xd, 0xc04272d600, 0x17, 0xc042c15fb0, 0x1, 0x1, 0x120000, 0x20000, ...)\n    c:/jenkins/workspace/syncthing-windows/src/github.com/syncthing/syncthing/lib/model/model.go:2078 +0xd7\ngithub.com/syncthing/syncthing/lib/model.(*rwFolder).pullerRoutine(0xc04274b400, 0xc042bba4e0, 0xc042bba600)\n    c:/jenkins/workspace/syncthing-windows/src/github.com/syncthing/syncthing/lib/model/rwfolder.go:1192 +0x23f\ngithub.com/syncthing/syncthing/lib/model.(*rwFolder).pullerIteration.func3(0xc04274b400, 0xc042bba4e0, 0xc042bba600, 0xe94580, 0xc043ced810)\n    c:/jenkins/workspace/syncthing-windows/src/github.com/syncthing/syncthing/lib/model/rwfolder.go:367 +0x46\ncreated by github.com/syncthing/syncthing/lib/model.(*rwFolder).pullerIteration\n    c:/jenkins/workspace/syncthing-windows/src/github.com/syncthing/syncthing/lib/model/rwfolder.go:369 +0x618\n\n\ngoroutine 3189 [semacquire, 6 minutes]: holds R on fmut\nsync.runtime_Semacquire(0xc04393eaac)\n    c:/go/src/runtime/sema.go:47 +0x37\nsync.(*RWMutex).RLock(0xc04393eaa0)\n    c:/go/src/sync/rwmutex.go:43 +0x64\ngithub.com/syncthing/syncthing/lib/sync.(*loggedRWMutex).RLock(0xc04393eaa0)\n    c:/jenkins/workspace/syncthing-windows/src/github.com/syncthing/syncthing/lib/sync/sync.go:152 +0x49\ngithub.com/syncthing/syncthing/lib/model.(*Model).ConnectionStats(0xc042056140, 0x4386b8)\n    c:/jenkins/workspace/syncthing-windows/src/github.com/syncthing/syncthing/lib/model/model.go:400 +0x79\nmain.(*apiService).getSystemConnections(0xc0422f0c00, 0xe94f80, 0xc045a48dd0, 0xc04397e960)\n    c:/jenkins/workspace/syncthing-windows/src/github.com/syncthing/syncthing/cmd/syncthing/gui.go:706 +0x3b\nmain.(*apiService).(main.getSystemConnections)-fm(0xe94f80, 0xc045a48dd0, 0xc04397e960)\n    c:/jenkins/workspace/syncthing-windows/src/github.com/syncthing/syncthing/cmd/syncthing/gui.go:248 +0x4f\n```\n\nYet then you have:\n\n```\ngoroutine 78 [semacquire, 5 minutes]:\nsync.runtime_Semacquire(0xc04393ea58)\n    c:/go/src/runtime/sema.go:47 +0x37\nsync.(*RWMutex).Lock(0xc04393ea50)\n    c:/go/src/sync/rwmutex.go:91 +0x9f\ngithub.com/syncthing/syncthing/lib/sync.(*loggedRWMutex).Lock(0xc04393ea50)\n    c:/jenkins/workspace/syncthing-windows/src/github.com/syncthing/syncthing/lib/sync/sync.go:118 +0x8c\ngithub.com/syncthing/syncthing/lib/model.(*Model).deviceStatRef(0xc042056140, 0xc336372d063fc8c8, 0xf3f38480a604cb77, 0xa06eef9f4b40482, 0xb8d6fd041d31ee53, 0x0)\n    c:/jenkins/workspace/syncthing-windows/src/github.com/syncthing/syncthing/lib/model/model.go:1329 +0x62\ngithub.com/syncthing/syncthing/lib/model.(*Model).deviceWasSeen(0xc042056140, 0xc336372d063fc8c8, 0xf3f38480a604cb77, 0xa06eef9f4b40482, 0xb8d6fd041d31ee53)\n    c:/jenkins/workspace/syncthing-windows/src/github.com/syncthing/syncthing/lib/model/model.go:1342 +0x4f\ngithub.com/syncthing/syncthing/lib/model.(*Model).ConnectedTo(0xc042056140, 0xc336372d063fc8c8, 0xf3f38480a604cb77, 0xa06eef9f4b40482, 0xb8d6fd041d31ee53, 0x1)\n    c:/jenkins/workspace/syncthing-windows/src/github.com/syncthing/syncthing/lib/model/model.go:1115 +0xf8\ngithub.com/syncthing/syncthing/lib/model.(*rwFolder).pullerIteration.func6(0xe98420, 0xc044d3a690, 0xc044d3a690)\n    c:/jenkins/workspace/syncthing-windows/src/github.com/syncthing/syncthing/lib/model/rwfolder.go:451 +0x394\ngithub.com/syncthing/syncthing/lib/db.nativeFileIterator.func1(0xe98420, 0xc044d3a5b0, 0x44)\n    c:/jenkins/workspace/syncthing-windows/src/github.com/syncthing/syncthing/lib/db/set.go:358 +0x1ac\ngithub.com/syncthing/syncthing/lib/db.(*Instance).withNeed(0xc042126cc0, 0xc04480e4d8, 0x4, 0x8, 0xc0425f3450, 0x20, 0x20, 0x59e0ce00, 0xc04480e500)\n    c:/jenkins/workspace/syncthing-windows/src/github.com/syncthing/syncthing/lib/db/leveldb_dbinstance.go:509 +0xae2\ngithub.com/syncthing/syncthing/lib/db.(*FileSet).WithNeed(0xc042158640, 0xffffffffffffffff, 0xffffffffffffffff, 0xffffffffffffffff, 0xffffffffffffffff, 0xc042ec2f30)\n    c:/jenkins/workspace/syncthing-windows/src/github.com/syncthing/syncthing/lib/db/set.go:201 +0x20c\ngithub.com/syncthing/syncthing/lib/model.(*rwFolder).pullerIteration(0xc043c957c0, 0xc0437e7680, 0x3)\n    c:/jenkins/workspace/syncthing-windows/src/github.com/syncthing/syncthing/lib/model/rwfolder.go:460 +0x9c3\ngithub.com/syncthing/syncthing/lib/model.(*rwFolder).Serve(0xc043c957c0)\n```\n\nwhich is trying to get a W Lock on fmut, which is preventing routine 2990 from getting RLock on fmut (as W Lock is first in line), and eventually releasing RLock on pmut.\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/258619526/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"AudriusButkevicius","id":1144861,"node_id":"MDQ6VXNlcjExNDQ4NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1144861?v=4","gravatar_id":"","url":"https://api.github.com/users/AudriusButkevicius","html_url":"https://github.com/AudriusButkevicius","followers_url":"https://api.github.com/users/AudriusButkevicius/followers","following_url":"https://api.github.com/users/AudriusButkevicius/following{/other_user}","gists_url":"https://api.github.com/users/AudriusButkevicius/gists{/gist_id}","starred_url":"https://api.github.com/users/AudriusButkevicius/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AudriusButkevicius/subscriptions","organizations_url":"https://api.github.com/users/AudriusButkevicius/orgs","repos_url":"https://api.github.com/users/AudriusButkevicius/repos","events_url":"https://api.github.com/users/AudriusButkevicius/events{/privacy}","received_events_url":"https://api.github.com/users/AudriusButkevicius/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/258619679","html_url":"https://github.com/syncthing/syncthing/issues/3596#issuecomment-258619679","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/3596","id":258619679,"node_id":"MDEyOklzc3VlQ29tbWVudDI1ODYxOTY3OQ==","user":{"login":"canton7","id":568104,"node_id":"MDQ6VXNlcjU2ODEwNA==","avatar_url":"https://avatars.githubusercontent.com/u/568104?v=4","gravatar_id":"","url":"https://api.github.com/users/canton7","html_url":"https://github.com/canton7","followers_url":"https://api.github.com/users/canton7/followers","following_url":"https://api.github.com/users/canton7/following{/other_user}","gists_url":"https://api.github.com/users/canton7/gists{/gist_id}","starred_url":"https://api.github.com/users/canton7/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/canton7/subscriptions","organizations_url":"https://api.github.com/users/canton7/orgs","repos_url":"https://api.github.com/users/canton7/repos","events_url":"https://api.github.com/users/canton7/events{/privacy}","received_events_url":"https://api.github.com/users/canton7/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-05T15:42:37Z","updated_at":"2016-11-05T15:42:37Z","body":"> If a goroutine holds a RWMutex for reading, it must not expect this or any other goroutine to be able to also take the read lock until the first read lock is released. In particular, this prohibits recursive read locking. This is to ensure that the lock eventually becomes available; a blocked Lock call excludes new readers from acquiring the lock. \n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/258619679/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"canton7","id":568104,"node_id":"MDQ6VXNlcjU2ODEwNA==","avatar_url":"https://avatars.githubusercontent.com/u/568104?v=4","gravatar_id":"","url":"https://api.github.com/users/canton7","html_url":"https://github.com/canton7","followers_url":"https://api.github.com/users/canton7/followers","following_url":"https://api.github.com/users/canton7/following{/other_user}","gists_url":"https://api.github.com/users/canton7/gists{/gist_id}","starred_url":"https://api.github.com/users/canton7/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/canton7/subscriptions","organizations_url":"https://api.github.com/users/canton7/orgs","repos_url":"https://api.github.com/users/canton7/repos","events_url":"https://api.github.com/users/canton7/events{/privacy}","received_events_url":"https://api.github.com/users/canton7/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/258619822","html_url":"https://github.com/syncthing/syncthing/issues/3596#issuecomment-258619822","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/3596","id":258619822,"node_id":"MDEyOklzc3VlQ29tbWVudDI1ODYxOTgyMg==","user":{"login":"AudriusButkevicius","id":1144861,"node_id":"MDQ6VXNlcjExNDQ4NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1144861?v=4","gravatar_id":"","url":"https://api.github.com/users/AudriusButkevicius","html_url":"https://github.com/AudriusButkevicius","followers_url":"https://api.github.com/users/AudriusButkevicius/followers","following_url":"https://api.github.com/users/AudriusButkevicius/following{/other_user}","gists_url":"https://api.github.com/users/AudriusButkevicius/gists{/gist_id}","starred_url":"https://api.github.com/users/AudriusButkevicius/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AudriusButkevicius/subscriptions","organizations_url":"https://api.github.com/users/AudriusButkevicius/orgs","repos_url":"https://api.github.com/users/AudriusButkevicius/repos","events_url":"https://api.github.com/users/AudriusButkevicius/events{/privacy}","received_events_url":"https://api.github.com/users/AudriusButkevicius/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-05T15:44:45Z","updated_at":"2016-11-05T15:44:45Z","body":"Right, which makes it even easier to understand.\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/258619822/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"AudriusButkevicius","id":1144861,"node_id":"MDQ6VXNlcjExNDQ4NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1144861?v=4","gravatar_id":"","url":"https://api.github.com/users/AudriusButkevicius","html_url":"https://github.com/AudriusButkevicius","followers_url":"https://api.github.com/users/AudriusButkevicius/followers","following_url":"https://api.github.com/users/AudriusButkevicius/following{/other_user}","gists_url":"https://api.github.com/users/AudriusButkevicius/gists{/gist_id}","starred_url":"https://api.github.com/users/AudriusButkevicius/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AudriusButkevicius/subscriptions","organizations_url":"https://api.github.com/users/AudriusButkevicius/orgs","repos_url":"https://api.github.com/users/AudriusButkevicius/repos","events_url":"https://api.github.com/users/AudriusButkevicius/events{/privacy}","received_events_url":"https://api.github.com/users/AudriusButkevicius/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/258619875","html_url":"https://github.com/syncthing/syncthing/issues/3596#issuecomment-258619875","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/3596","id":258619875,"node_id":"MDEyOklzc3VlQ29tbWVudDI1ODYxOTg3NQ==","user":{"login":"AudriusButkevicius","id":1144861,"node_id":"MDQ6VXNlcjExNDQ4NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1144861?v=4","gravatar_id":"","url":"https://api.github.com/users/AudriusButkevicius","html_url":"https://github.com/AudriusButkevicius","followers_url":"https://api.github.com/users/AudriusButkevicius/followers","following_url":"https://api.github.com/users/AudriusButkevicius/following{/other_user}","gists_url":"https://api.github.com/users/AudriusButkevicius/gists{/gist_id}","starred_url":"https://api.github.com/users/AudriusButkevicius/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AudriusButkevicius/subscriptions","organizations_url":"https://api.github.com/users/AudriusButkevicius/orgs","repos_url":"https://api.github.com/users/AudriusButkevicius/repos","events_url":"https://api.github.com/users/AudriusButkevicius/events{/privacy}","received_events_url":"https://api.github.com/users/AudriusButkevicius/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-11-05T15:45:31Z","updated_at":"2016-11-05T15:45:31Z","body":"Yet this works:\n\n```\npackage main\n\nimport(\n    \"fmt\"\n    \"sync\"\n    \"time\"\n)\n\nfunc main(){\n    var a sync.RWMutex\n    var b sync.RWMutex\n\n    go func() {\n        a.RLock()\n        time.Sleep(100 * time.Millisecond)\n        b.RLock()\n        fmt.Println(\"Got all\")\n    }()\n\n    b.RLock()\n    time.Sleep(100 * time.Millisecond)\n    a.RLock()\n\n    fmt.Println(\"main got all\")\n\n    time.Sleep(time.Second)\n}\n```\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/258619875/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"AudriusButkevicius","id":1144861,"node_id":"MDQ6VXNlcjExNDQ4NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1144861?v=4","gravatar_id":"","url":"https://api.github.com/users/AudriusButkevicius","html_url":"https://github.com/AudriusButkevicius","followers_url":"https://api.github.com/users/AudriusButkevicius/followers","following_url":"https://api.github.com/users/AudriusButkevicius/following{/other_user}","gists_url":"https://api.github.com/users/AudriusButkevicius/gists{/gist_id}","starred_url":"https://api.github.com/users/AudriusButkevicius/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AudriusButkevicius/subscriptions","organizations_url":"https://api.github.com/users/AudriusButkevicius/orgs","repos_url":"https://api.github.com/users/AudriusButkevicius/repos","events_url":"https://api.github.com/users/AudriusButkevicius/events{/privacy}","received_events_url":"https://api.github.com/users/AudriusButkevicius/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1342427881,"node_id":"MDEyOkxhYmVsZWRFdmVudDEzNDI0Mjc4ODE=","url":"https://api.github.com/repos/syncthing/syncthing/issues/events/1342427881","actor":{"login":"st-review","id":16196517,"node_id":"MDQ6VXNlcjE2MTk2NTE3","avatar_url":"https://avatars.githubusercontent.com/u/16196517?v=4","gravatar_id":"","url":"https://api.github.com/users/st-review","html_url":"https://github.com/st-review","followers_url":"https://api.github.com/users/st-review/followers","following_url":"https://api.github.com/users/st-review/following{/other_user}","gists_url":"https://api.github.com/users/st-review/gists{/gist_id}","starred_url":"https://api.github.com/users/st-review/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/st-review/subscriptions","organizations_url":"https://api.github.com/users/st-review/orgs","repos_url":"https://api.github.com/users/st-review/repos","events_url":"https://api.github.com/users/st-review/events{/privacy}","received_events_url":"https://api.github.com/users/st-review/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2017-11-15T07:22:15Z","label":{"name":"frozen-due-to-age","color":"eeeeee"},"performed_via_github_app":null},{"id":1342427884,"node_id":"MDExOkxvY2tlZEV2ZW50MTM0MjQyNzg4NA==","url":"https://api.github.com/repos/syncthing/syncthing/issues/events/1342427884","actor":{"login":"syncthing","id":7628018,"node_id":"MDEyOk9yZ2FuaXphdGlvbjc2MjgwMTg=","avatar_url":"https://avatars.githubusercontent.com/u/7628018?v=4","gravatar_id":"","url":"https://api.github.com/users/syncthing","html_url":"https://github.com/syncthing","followers_url":"https://api.github.com/users/syncthing/followers","following_url":"https://api.github.com/users/syncthing/following{/other_user}","gists_url":"https://api.github.com/users/syncthing/gists{/gist_id}","starred_url":"https://api.github.com/users/syncthing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/syncthing/subscriptions","organizations_url":"https://api.github.com/users/syncthing/orgs","repos_url":"https://api.github.com/users/syncthing/repos","events_url":"https://api.github.com/users/syncthing/events{/privacy}","received_events_url":"https://api.github.com/users/syncthing/received_events","type":"Organization","user_view_type":"public","site_admin":false},"event":"locked","commit_id":null,"commit_url":null,"created_at":"2017-11-15T07:22:15Z","lock_reason":null,"performed_via_github_app":null}]