{"url":"https://api.github.com/repos/syncthing/syncthing/issues/1871","repository_url":"https://api.github.com/repos/syncthing/syncthing","labels_url":"https://api.github.com/repos/syncthing/syncthing/issues/1871/labels{/name}","comments_url":"https://api.github.com/repos/syncthing/syncthing/issues/1871/comments","events_url":"https://api.github.com/repos/syncthing/syncthing/issues/1871/events","html_url":"https://github.com/syncthing/syncthing/issues/1871","id":80432304,"node_id":"MDU6SXNzdWU4MDQzMjMwNA==","number":1871,"title":"Make syncthing honor the ignorePermissions/FlagNoPermBits settings","user":{"login":"mogwa1","id":4405330,"node_id":"MDQ6VXNlcjQ0MDUzMzA=","avatar_url":"https://avatars.githubusercontent.com/u/4405330?v=4","gravatar_id":"","url":"https://api.github.com/users/mogwa1","html_url":"https://github.com/mogwa1","followers_url":"https://api.github.com/users/mogwa1/followers","following_url":"https://api.github.com/users/mogwa1/following{/other_user}","gists_url":"https://api.github.com/users/mogwa1/gists{/gist_id}","starred_url":"https://api.github.com/users/mogwa1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mogwa1/subscriptions","organizations_url":"https://api.github.com/users/mogwa1/orgs","repos_url":"https://api.github.com/users/mogwa1/repos","events_url":"https://api.github.com/users/mogwa1/events{/privacy}","received_events_url":"https://api.github.com/users/mogwa1/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":628314330,"node_id":"MDU6TGFiZWw2MjgzMTQzMzA=","url":"https://api.github.com/repos/syncthing/syncthing/labels/frozen-due-to-age","name":"frozen-due-to-age","color":"eeeeee","default":false,"description":"Issues closed and untouched for a long time, together with being locked for discussion"}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2015-05-25T07:35:23Z","updated_at":"2017-06-16T21:07:02Z","closed_at":"2015-05-26T14:29:28Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"(Re-submitted this issue to the correct repository.)\nThis is a suspected bug that I ran into while trying to solve issue #1339.\n\nWhat the code should be doing is:\n- According to https://forum.syncthing.net/t/v0-8-10-ignore-permissions/263/3, the ignorePermissions flag should only be picked up on the server where a new file is created. If ignorePermissions is set on that server, the FlagNoPermBits is added to the file flags.\n- On the receiving side, the file flags should be checked for FlagNoPermBits. If this bit is set, the default permissions for that OS should be used.\n\nHowever, what is happening in the code (at least to my limited knowledge) is:\n- The FlagNoPermBits is set correctly on the server where the new file is created.\n- On the receiving end, the ignorePermissions setting (belonging to the share) is used instead of checking whether the FlagNoPermBits are set on the files which are being received.\n- This will give the same results as the intended behaviour except when you have a mixture of ignorePermissions settings on the servers. In that case, you will get very unpredictable permission settings.\n","closed_by":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/1871/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/syncthing/syncthing/issues/1871/timeline","performed_via_github_app":null,"state_reason":"completed"}