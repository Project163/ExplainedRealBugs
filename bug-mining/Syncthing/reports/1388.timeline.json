[{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/420098951","html_url":"https://github.com/syncthing/syncthing/issues/5175#issuecomment-420098951","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/5175","id":420098951,"node_id":"MDEyOklzc3VlQ29tbWVudDQyMDA5ODk1MQ==","user":{"login":"h1z1","id":17220053,"node_id":"MDQ6VXNlcjE3MjIwMDUz","avatar_url":"https://avatars.githubusercontent.com/u/17220053?v=4","gravatar_id":"","url":"https://api.github.com/users/h1z1","html_url":"https://github.com/h1z1","followers_url":"https://api.github.com/users/h1z1/followers","following_url":"https://api.github.com/users/h1z1/following{/other_user}","gists_url":"https://api.github.com/users/h1z1/gists{/gist_id}","starred_url":"https://api.github.com/users/h1z1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/h1z1/subscriptions","organizations_url":"https://api.github.com/users/h1z1/orgs","repos_url":"https://api.github.com/users/h1z1/repos","events_url":"https://api.github.com/users/h1z1/events{/privacy}","received_events_url":"https://api.github.com/users/h1z1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-09-10T23:52:55Z","updated_at":"2018-09-10T23:52:55Z","body":"Unless it were completely optional - and default off - that kind of data would indicate what kind of hardware is behind a node.  See #5160","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/420098951/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"h1z1","id":17220053,"node_id":"MDQ6VXNlcjE3MjIwMDUz","avatar_url":"https://avatars.githubusercontent.com/u/17220053?v=4","gravatar_id":"","url":"https://api.github.com/users/h1z1","html_url":"https://github.com/h1z1","followers_url":"https://api.github.com/users/h1z1/followers","following_url":"https://api.github.com/users/h1z1/following{/other_user}","gists_url":"https://api.github.com/users/h1z1/gists{/gist_id}","starred_url":"https://api.github.com/users/h1z1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/h1z1/subscriptions","organizations_url":"https://api.github.com/users/h1z1/orgs","repos_url":"https://api.github.com/users/h1z1/repos","events_url":"https://api.github.com/users/h1z1/events{/privacy}","received_events_url":"https://api.github.com/users/h1z1/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/420157414","html_url":"https://github.com/syncthing/syncthing/issues/5175#issuecomment-420157414","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/5175","id":420157414,"node_id":"MDEyOklzc3VlQ29tbWVudDQyMDE1NzQxNA==","user":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-09-11T06:06:02Z","updated_at":"2018-09-11T06:06:02Z","body":"It can also reveal aspects about the data being synced. Iâ€™m not proposing to send these metrics somewhere, merely making them available for the user. ","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/420157414/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/420226275","html_url":"https://github.com/syncthing/syncthing/issues/5175#issuecomment-420226275","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/5175","id":420226275,"node_id":"MDEyOklzc3VlQ29tbWVudDQyMDIyNjI3NQ==","user":{"login":"h1z1","id":17220053,"node_id":"MDQ6VXNlcjE3MjIwMDUz","avatar_url":"https://avatars.githubusercontent.com/u/17220053?v=4","gravatar_id":"","url":"https://api.github.com/users/h1z1","html_url":"https://github.com/h1z1","followers_url":"https://api.github.com/users/h1z1/followers","following_url":"https://api.github.com/users/h1z1/following{/other_user}","gists_url":"https://api.github.com/users/h1z1/gists{/gist_id}","starred_url":"https://api.github.com/users/h1z1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/h1z1/subscriptions","organizations_url":"https://api.github.com/users/h1z1/orgs","repos_url":"https://api.github.com/users/h1z1/repos","events_url":"https://api.github.com/users/h1z1/events{/privacy}","received_events_url":"https://api.github.com/users/h1z1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-09-11T10:30:01Z","updated_at":"2018-09-11T10:30:01Z","body":"Is that not what prometheus would enable?","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/420226275/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"h1z1","id":17220053,"node_id":"MDQ6VXNlcjE3MjIwMDUz","avatar_url":"https://avatars.githubusercontent.com/u/17220053?v=4","gravatar_id":"","url":"https://api.github.com/users/h1z1","html_url":"https://github.com/h1z1","followers_url":"https://api.github.com/users/h1z1/followers","following_url":"https://api.github.com/users/h1z1/following{/other_user}","gists_url":"https://api.github.com/users/h1z1/gists{/gist_id}","starred_url":"https://api.github.com/users/h1z1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/h1z1/subscriptions","organizations_url":"https://api.github.com/users/h1z1/orgs","repos_url":"https://api.github.com/users/h1z1/repos","events_url":"https://api.github.com/users/h1z1/events{/privacy}","received_events_url":"https://api.github.com/users/h1z1/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/420286145","html_url":"https://github.com/syncthing/syncthing/issues/5175#issuecomment-420286145","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/5175","id":420286145,"node_id":"MDEyOklzc3VlQ29tbWVudDQyMDI4NjE0NQ==","user":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-09-11T14:04:30Z","updated_at":"2018-09-11T14:04:30Z","body":"\"Enable\" as in for anyone who can talk to the REST API, sure. If the enemy has your API key you have already lost.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/420286145/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1839333930,"node_id":"MDEyOkxhYmVsZWRFdmVudDE4MzkzMzM5MzA=","url":"https://api.github.com/repos/syncthing/syncthing/issues/events/1839333930","actor":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2018-09-11T18:57:08Z","label":{"name":"enhancement","color":"0e8a16"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/420489112","html_url":"https://github.com/syncthing/syncthing/issues/5175#issuecomment-420489112","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/5175","id":420489112,"node_id":"MDEyOklzc3VlQ29tbWVudDQyMDQ4OTExMg==","user":{"login":"h1z1","id":17220053,"node_id":"MDQ6VXNlcjE3MjIwMDUz","avatar_url":"https://avatars.githubusercontent.com/u/17220053?v=4","gravatar_id":"","url":"https://api.github.com/users/h1z1","html_url":"https://github.com/h1z1","followers_url":"https://api.github.com/users/h1z1/followers","following_url":"https://api.github.com/users/h1z1/following{/other_user}","gists_url":"https://api.github.com/users/h1z1/gists{/gist_id}","starred_url":"https://api.github.com/users/h1z1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/h1z1/subscriptions","organizations_url":"https://api.github.com/users/h1z1/orgs","repos_url":"https://api.github.com/users/h1z1/repos","events_url":"https://api.github.com/users/h1z1/events{/privacy}","received_events_url":"https://api.github.com/users/h1z1/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2018-09-12T02:17:45Z","updated_at":"2018-09-12T02:17:45Z","body":"Completely agree which is why the stats shouldn't be enabled by default :)","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/420489112/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"h1z1","id":17220053,"node_id":"MDQ6VXNlcjE3MjIwMDUz","avatar_url":"https://avatars.githubusercontent.com/u/17220053?v=4","gravatar_id":"","url":"https://api.github.com/users/h1z1","html_url":"https://github.com/h1z1","followers_url":"https://api.github.com/users/h1z1/followers","following_url":"https://api.github.com/users/h1z1/following{/other_user}","gists_url":"https://api.github.com/users/h1z1/gists{/gist_id}","starred_url":"https://api.github.com/users/h1z1/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/h1z1/subscriptions","organizations_url":"https://api.github.com/users/h1z1/orgs","repos_url":"https://api.github.com/users/h1z1/repos","events_url":"https://api.github.com/users/h1z1/events{/privacy}","received_events_url":"https://api.github.com/users/h1z1/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/467357375","html_url":"https://github.com/syncthing/syncthing/issues/5175#issuecomment-467357375","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/5175","id":467357375,"node_id":"MDEyOklzc3VlQ29tbWVudDQ2NzM1NzM3NQ==","user":{"login":"otbutz","id":22315436,"node_id":"MDQ6VXNlcjIyMzE1NDM2","avatar_url":"https://avatars.githubusercontent.com/u/22315436?v=4","gravatar_id":"","url":"https://api.github.com/users/otbutz","html_url":"https://github.com/otbutz","followers_url":"https://api.github.com/users/otbutz/followers","following_url":"https://api.github.com/users/otbutz/following{/other_user}","gists_url":"https://api.github.com/users/otbutz/gists{/gist_id}","starred_url":"https://api.github.com/users/otbutz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/otbutz/subscriptions","organizations_url":"https://api.github.com/users/otbutz/orgs","repos_url":"https://api.github.com/users/otbutz/repos","events_url":"https://api.github.com/users/otbutz/events{/privacy}","received_events_url":"https://api.github.com/users/otbutz/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-02-26T09:08:49Z","updated_at":"2019-02-26T09:08:49Z","body":">     * General database stats: time per get/set operation. (Timing iterations is trickier.)\r\n\r\nhttps://godoc.org/github.com/syndtr/goleveldb/leveldb#DBStats ?","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/467357375/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"otbutz","id":22315436,"node_id":"MDQ6VXNlcjIyMzE1NDM2","avatar_url":"https://avatars.githubusercontent.com/u/22315436?v=4","gravatar_id":"","url":"https://api.github.com/users/otbutz","html_url":"https://github.com/otbutz","followers_url":"https://api.github.com/users/otbutz/followers","following_url":"https://api.github.com/users/otbutz/following{/other_user}","gists_url":"https://api.github.com/users/otbutz/gists{/gist_id}","starred_url":"https://api.github.com/users/otbutz/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/otbutz/subscriptions","organizations_url":"https://api.github.com/users/otbutz/orgs","repos_url":"https://api.github.com/users/otbutz/repos","events_url":"https://api.github.com/users/otbutz/events{/privacy}","received_events_url":"https://api.github.com/users/otbutz/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/513530016","html_url":"https://github.com/syncthing/syncthing/issues/5175#issuecomment-513530016","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/5175","id":513530016,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMzUzMDAxNg==","user":{"login":"arl","id":476650,"node_id":"MDQ6VXNlcjQ3NjY1MA==","avatar_url":"https://avatars.githubusercontent.com/u/476650?v=4","gravatar_id":"","url":"https://api.github.com/users/arl","html_url":"https://github.com/arl","followers_url":"https://api.github.com/users/arl/followers","following_url":"https://api.github.com/users/arl/following{/other_user}","gists_url":"https://api.github.com/users/arl/gists{/gist_id}","starred_url":"https://api.github.com/users/arl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arl/subscriptions","organizations_url":"https://api.github.com/users/arl/orgs","repos_url":"https://api.github.com/users/arl/repos","events_url":"https://api.github.com/users/arl/events{/privacy}","received_events_url":"https://api.github.com/users/arl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-21T07:17:47Z","updated_at":"2019-07-21T07:17:47Z","body":"I'd like to tackle this issue.\r\n\r\nSo from what I understand:\r\n\r\nExposing a local Prometheus HTTP endpoint, disabled by default, and maybe a script to run a Prometheus instance in a local docker container.\r\n\r\nI don't know the code base really well but metrics being a transversal issue, a separate package could propose a simple api to create gauge, counters, etc. Then the core syncthing code would call that package when and where in need of instrumentation.\r\n\r\nDoes somebody has something else in mind? \r\nIs it the right place to discuss this?","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/513530016/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"arl","id":476650,"node_id":"MDQ6VXNlcjQ3NjY1MA==","avatar_url":"https://avatars.githubusercontent.com/u/476650?v=4","gravatar_id":"","url":"https://api.github.com/users/arl","html_url":"https://github.com/arl","followers_url":"https://api.github.com/users/arl/followers","following_url":"https://api.github.com/users/arl/following{/other_user}","gists_url":"https://api.github.com/users/arl/gists{/gist_id}","starred_url":"https://api.github.com/users/arl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arl/subscriptions","organizations_url":"https://api.github.com/users/arl/orgs","repos_url":"https://api.github.com/users/arl/repos","events_url":"https://api.github.com/users/arl/events{/privacy}","received_events_url":"https://api.github.com/users/arl/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/513531273","html_url":"https://github.com/syncthing/syncthing/issues/5175#issuecomment-513531273","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/5175","id":513531273,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMzUzMTI3Mw==","user":{"login":"AudriusButkevicius","id":1144861,"node_id":"MDQ6VXNlcjExNDQ4NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1144861?v=4","gravatar_id":"","url":"https://api.github.com/users/AudriusButkevicius","html_url":"https://github.com/AudriusButkevicius","followers_url":"https://api.github.com/users/AudriusButkevicius/followers","following_url":"https://api.github.com/users/AudriusButkevicius/following{/other_user}","gists_url":"https://api.github.com/users/AudriusButkevicius/gists{/gist_id}","starred_url":"https://api.github.com/users/AudriusButkevicius/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AudriusButkevicius/subscriptions","organizations_url":"https://api.github.com/users/AudriusButkevicius/orgs","repos_url":"https://api.github.com/users/AudriusButkevicius/repos","events_url":"https://api.github.com/users/AudriusButkevicius/events{/privacy}","received_events_url":"https://api.github.com/users/AudriusButkevicius/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-21T07:39:03Z","updated_at":"2019-07-21T07:39:03Z","body":"Prometheus does not make it easy for it to be consumed by anything else than prometheus tho.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/513531273/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"AudriusButkevicius","id":1144861,"node_id":"MDQ6VXNlcjExNDQ4NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1144861?v=4","gravatar_id":"","url":"https://api.github.com/users/AudriusButkevicius","html_url":"https://github.com/AudriusButkevicius","followers_url":"https://api.github.com/users/AudriusButkevicius/followers","following_url":"https://api.github.com/users/AudriusButkevicius/following{/other_user}","gists_url":"https://api.github.com/users/AudriusButkevicius/gists{/gist_id}","starred_url":"https://api.github.com/users/AudriusButkevicius/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AudriusButkevicius/subscriptions","organizations_url":"https://api.github.com/users/AudriusButkevicius/orgs","repos_url":"https://api.github.com/users/AudriusButkevicius/repos","events_url":"https://api.github.com/users/AudriusButkevicius/events{/privacy}","received_events_url":"https://api.github.com/users/AudriusButkevicius/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/513539358","html_url":"https://github.com/syncthing/syncthing/issues/5175#issuecomment-513539358","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/5175","id":513539358,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMzUzOTM1OA==","user":{"login":"arl","id":476650,"node_id":"MDQ6VXNlcjQ3NjY1MA==","avatar_url":"https://avatars.githubusercontent.com/u/476650?v=4","gravatar_id":"","url":"https://api.github.com/users/arl","html_url":"https://github.com/arl","followers_url":"https://api.github.com/users/arl/followers","following_url":"https://api.github.com/users/arl/following{/other_user}","gists_url":"https://api.github.com/users/arl/gists{/gist_id}","starred_url":"https://api.github.com/users/arl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arl/subscriptions","organizations_url":"https://api.github.com/users/arl/orgs","repos_url":"https://api.github.com/users/arl/repos","events_url":"https://api.github.com/users/arl/events{/privacy}","received_events_url":"https://api.github.com/users/arl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-21T09:47:10Z","updated_at":"2019-07-21T09:47:10Z","body":"> Prometheus does not make it easy for it to be consumed by anything else than prometheus tho.\r\n\r\nYes I guess you're right. I believe you are referring to the the fact that metrics are _pulled_ by the prom server, as opposed to other instrumentation stacks, which require clients to _push_ their own metrics to the server.\r\n\r\nHowever a prometheus server is very easily set up and running, scraping the metrics of a local syncthing instance is trivial, has its own (somewhat basic but nonetheless powerful) UI served locally.\r\nIf the objective of this issue is to have a kind of support/dev bundle one can use without prior knowledge of metrics it could be the right tool for the job, but I'm sure there are others. This is the one I know best though.\r\n\r\n@AudriusButkevicius do you have something else in mind?","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/513539358/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"arl","id":476650,"node_id":"MDQ6VXNlcjQ3NjY1MA==","avatar_url":"https://avatars.githubusercontent.com/u/476650?v=4","gravatar_id":"","url":"https://api.github.com/users/arl","html_url":"https://github.com/arl","followers_url":"https://api.github.com/users/arl/followers","following_url":"https://api.github.com/users/arl/following{/other_user}","gists_url":"https://api.github.com/users/arl/gists{/gist_id}","starred_url":"https://api.github.com/users/arl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arl/subscriptions","organizations_url":"https://api.github.com/users/arl/orgs","repos_url":"https://api.github.com/users/arl/repos","events_url":"https://api.github.com/users/arl/events{/privacy}","received_events_url":"https://api.github.com/users/arl/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":2497961601,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50MjQ5Nzk2MTYwMQ==","url":"https://api.github.com/repos/syncthing/syncthing/issues/events/2497961601","actor":{"login":"AudriusButkevicius","id":1144861,"node_id":"MDQ6VXNlcjExNDQ4NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1144861?v=4","gravatar_id":"","url":"https://api.github.com/users/AudriusButkevicius","html_url":"https://github.com/AudriusButkevicius","followers_url":"https://api.github.com/users/AudriusButkevicius/followers","following_url":"https://api.github.com/users/AudriusButkevicius/following{/other_user}","gists_url":"https://api.github.com/users/AudriusButkevicius/gists{/gist_id}","starred_url":"https://api.github.com/users/AudriusButkevicius/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AudriusButkevicius/subscriptions","organizations_url":"https://api.github.com/users/AudriusButkevicius/orgs","repos_url":"https://api.github.com/users/AudriusButkevicius/repos","events_url":"https://api.github.com/users/AudriusButkevicius/events{/privacy}","received_events_url":"https://api.github.com/users/AudriusButkevicius/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2019-07-21T09:47:11Z","performed_via_github_app":null},{"id":2497961602,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDI0OTc5NjE2MDI=","url":"https://api.github.com/repos/syncthing/syncthing/issues/events/2497961602","actor":{"login":"AudriusButkevicius","id":1144861,"node_id":"MDQ6VXNlcjExNDQ4NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1144861?v=4","gravatar_id":"","url":"https://api.github.com/users/AudriusButkevicius","html_url":"https://github.com/AudriusButkevicius","followers_url":"https://api.github.com/users/AudriusButkevicius/followers","following_url":"https://api.github.com/users/AudriusButkevicius/following{/other_user}","gists_url":"https://api.github.com/users/AudriusButkevicius/gists{/gist_id}","starred_url":"https://api.github.com/users/AudriusButkevicius/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AudriusButkevicius/subscriptions","organizations_url":"https://api.github.com/users/AudriusButkevicius/orgs","repos_url":"https://api.github.com/users/AudriusButkevicius/repos","events_url":"https://api.github.com/users/AudriusButkevicius/events{/privacy}","received_events_url":"https://api.github.com/users/AudriusButkevicius/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2019-07-21T09:47:11Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/513539851","html_url":"https://github.com/syncthing/syncthing/issues/5175#issuecomment-513539851","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/5175","id":513539851,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMzUzOTg1MQ==","user":{"login":"AudriusButkevicius","id":1144861,"node_id":"MDQ6VXNlcjExNDQ4NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1144861?v=4","gravatar_id":"","url":"https://api.github.com/users/AudriusButkevicius","html_url":"https://github.com/AudriusButkevicius","followers_url":"https://api.github.com/users/AudriusButkevicius/followers","following_url":"https://api.github.com/users/AudriusButkevicius/following{/other_user}","gists_url":"https://api.github.com/users/AudriusButkevicius/gists{/gist_id}","starred_url":"https://api.github.com/users/AudriusButkevicius/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AudriusButkevicius/subscriptions","organizations_url":"https://api.github.com/users/AudriusButkevicius/orgs","repos_url":"https://api.github.com/users/AudriusButkevicius/repos","events_url":"https://api.github.com/users/AudriusButkevicius/events{/privacy}","received_events_url":"https://api.github.com/users/AudriusButkevicius/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-21T09:55:25Z","updated_at":"2019-07-21T09:55:25Z","body":"I think it's ok to have prometheus support, but I think we shouls wrap prometheus in our own library, and expose N minutes of last scrapes so we could draw charts in the UI of what was happening on the device in last N minutes.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/513539851/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"AudriusButkevicius","id":1144861,"node_id":"MDQ6VXNlcjExNDQ4NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1144861?v=4","gravatar_id":"","url":"https://api.github.com/users/AudriusButkevicius","html_url":"https://github.com/AudriusButkevicius","followers_url":"https://api.github.com/users/AudriusButkevicius/followers","following_url":"https://api.github.com/users/AudriusButkevicius/following{/other_user}","gists_url":"https://api.github.com/users/AudriusButkevicius/gists{/gist_id}","starred_url":"https://api.github.com/users/AudriusButkevicius/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AudriusButkevicius/subscriptions","organizations_url":"https://api.github.com/users/AudriusButkevicius/orgs","repos_url":"https://api.github.com/users/AudriusButkevicius/repos","events_url":"https://api.github.com/users/AudriusButkevicius/events{/privacy}","received_events_url":"https://api.github.com/users/AudriusButkevicius/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/513539995","html_url":"https://github.com/syncthing/syncthing/issues/5175#issuecomment-513539995","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/5175","id":513539995,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMzUzOTk5NQ==","user":{"login":"AudriusButkevicius","id":1144861,"node_id":"MDQ6VXNlcjExNDQ4NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1144861?v=4","gravatar_id":"","url":"https://api.github.com/users/AudriusButkevicius","html_url":"https://github.com/AudriusButkevicius","followers_url":"https://api.github.com/users/AudriusButkevicius/followers","following_url":"https://api.github.com/users/AudriusButkevicius/following{/other_user}","gists_url":"https://api.github.com/users/AudriusButkevicius/gists{/gist_id}","starred_url":"https://api.github.com/users/AudriusButkevicius/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AudriusButkevicius/subscriptions","organizations_url":"https://api.github.com/users/AudriusButkevicius/orgs","repos_url":"https://api.github.com/users/AudriusButkevicius/repos","events_url":"https://api.github.com/users/AudriusButkevicius/events{/privacy}","received_events_url":"https://api.github.com/users/AudriusButkevicius/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-21T09:57:41Z","updated_at":"2019-07-21T09:57:41Z","body":"Potentially use something like https://github.com/prometheus/prom2json in terms of the format we return, so that it's easy to embed into the UI.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/513539995/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"AudriusButkevicius","id":1144861,"node_id":"MDQ6VXNlcjExNDQ4NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1144861?v=4","gravatar_id":"","url":"https://api.github.com/users/AudriusButkevicius","html_url":"https://github.com/AudriusButkevicius","followers_url":"https://api.github.com/users/AudriusButkevicius/followers","following_url":"https://api.github.com/users/AudriusButkevicius/following{/other_user}","gists_url":"https://api.github.com/users/AudriusButkevicius/gists{/gist_id}","starred_url":"https://api.github.com/users/AudriusButkevicius/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AudriusButkevicius/subscriptions","organizations_url":"https://api.github.com/users/AudriusButkevicius/orgs","repos_url":"https://api.github.com/users/AudriusButkevicius/repos","events_url":"https://api.github.com/users/AudriusButkevicius/events{/privacy}","received_events_url":"https://api.github.com/users/AudriusButkevicius/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/513543462","html_url":"https://github.com/syncthing/syncthing/issues/5175#issuecomment-513543462","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/5175","id":513543462,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMzU0MzQ2Mg==","user":{"login":"arl","id":476650,"node_id":"MDQ6VXNlcjQ3NjY1MA==","avatar_url":"https://avatars.githubusercontent.com/u/476650?v=4","gravatar_id":"","url":"https://api.github.com/users/arl","html_url":"https://github.com/arl","followers_url":"https://api.github.com/users/arl/followers","following_url":"https://api.github.com/users/arl/following{/other_user}","gists_url":"https://api.github.com/users/arl/gists{/gist_id}","starred_url":"https://api.github.com/users/arl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arl/subscriptions","organizations_url":"https://api.github.com/users/arl/orgs","repos_url":"https://api.github.com/users/arl/repos","events_url":"https://api.github.com/users/arl/events{/privacy}","received_events_url":"https://api.github.com/users/arl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-21T10:52:10Z","updated_at":"2019-07-21T10:52:10Z","body":"Ok so to sum it up, and to so ensure I got the idea.\r\n\r\nAny syncthing code that wishes to produce some metrics would do so by using the API provided by a new `metrics` sub-package. For client code of this API, metrics are format-agnostic, I mean they are just counter, gauges, etc. they are _not_ prometheus counters, gauges, etc...\r\n\r\n### Metrics production:\r\nUsing the package should be as simple as creating a metric of a specific type (list of types TDB), let's say a `metric.Counter`, and calling some methods over that counter instance (examples would be `Counter.Add(n int)` or `Counter.Increment()`.\r\n\r\nMetrics being disabled by default, `metrics.Counter` (and friends) could be interfaces, so by default a no-op implementation of `metrics.Counter` and friends would be used.\r\n\r\nTo enable/disable metrics, you'd have to restart syncthing.\r\n\r\n### Metrics consumption:\r\n\r\nWhen metrics are enabled, syncthing would both expose:\r\n1) a standard prometheus HTTP endpoint (standard as in directly scrap-able by a prom server).\r\n2) a JSON _mini time-serie_ of the last N minutes of scrapes. This is part is ATM less clear to me.  \r\nOverall how do you envision the interaction with the UI? I mean, would the UI periodically request the last N minutes or would it be a one time thing?","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/513543462/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"arl","id":476650,"node_id":"MDQ6VXNlcjQ3NjY1MA==","avatar_url":"https://avatars.githubusercontent.com/u/476650?v=4","gravatar_id":"","url":"https://api.github.com/users/arl","html_url":"https://github.com/arl","followers_url":"https://api.github.com/users/arl/followers","following_url":"https://api.github.com/users/arl/following{/other_user}","gists_url":"https://api.github.com/users/arl/gists{/gist_id}","starred_url":"https://api.github.com/users/arl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arl/subscriptions","organizations_url":"https://api.github.com/users/arl/orgs","repos_url":"https://api.github.com/users/arl/repos","events_url":"https://api.github.com/users/arl/events{/privacy}","received_events_url":"https://api.github.com/users/arl/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/513546175","html_url":"https://github.com/syncthing/syncthing/issues/5175#issuecomment-513546175","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/5175","id":513546175,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMzU0NjE3NQ==","user":{"login":"AudriusButkevicius","id":1144861,"node_id":"MDQ6VXNlcjExNDQ4NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1144861?v=4","gravatar_id":"","url":"https://api.github.com/users/AudriusButkevicius","html_url":"https://github.com/AudriusButkevicius","followers_url":"https://api.github.com/users/AudriusButkevicius/followers","following_url":"https://api.github.com/users/AudriusButkevicius/following{/other_user}","gists_url":"https://api.github.com/users/AudriusButkevicius/gists{/gist_id}","starred_url":"https://api.github.com/users/AudriusButkevicius/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AudriusButkevicius/subscriptions","organizations_url":"https://api.github.com/users/AudriusButkevicius/orgs","repos_url":"https://api.github.com/users/AudriusButkevicius/repos","events_url":"https://api.github.com/users/AudriusButkevicius/events{/privacy}","received_events_url":"https://api.github.com/users/AudriusButkevicius/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-21T11:38:08Z","updated_at":"2019-07-21T11:38:39Z","body":"This is a very generic dump of thoughts:\r\n\r\nI am not sure how we should structure the code.\r\nMy gut says dependency injection, as lib/syncthing is now a thing, and keeping it a library without any global state is a nice, so perhaps we should inject some sort of metrics provider and push it down where needed, or start pushing down context.WithValue everywhere (again, this is a larger change), where components would check presence of subcomponents if they are around and act on them.  This would make fixing logging and other global things in the future easier.\r\n\r\nIt would be nice to be able to toggle most settings without requiring a restart. I guess we could do `metrics.Init(config.Wrapper)` or `config.OnChange(metrics.SetEnabled)` (somewhere in cmd/syncthing before moving to lib/syncthing) to do that if we really wanted to, and keeping it global is still something we'd want to do.\r\n\r\nAs for the actual exposure, it would be nice to show transfer rates for folders over time and simillar things.\r\nWe could have a mini timeseries as you say, which we'd have to poll periodically to receive updates, or we could create a new event subscription (like we have for disk events), where we do time based rather than count based retention, and publish new events as we receive recordings on the counters and gauges. This way a page refresh can get \"all the events available\" which will be last N seconds of points, and subscribe from there. We'd have to make sure that certain things tick often enough to have some starting data, or we write a library in a way which allows the gauges to query the current value from a reporter, oppose to the reporter reporting when the value changes, when we could check the reporters once a second.\r\n\r\nAlternatively, we could do some mini timeseries plus followup from websocket magic or something along those lines.\r\n\r\nI think we'll still concepts like labels, as you'll want to track per folder, per device or per folder per device metrics, so we need to add some additional dimensions.\r\nI guess this could be just part of the metric name, but given we're piggy backing on prometheus, it would make sense to keep supporting that.\r\n\r\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/513546175/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"AudriusButkevicius","id":1144861,"node_id":"MDQ6VXNlcjExNDQ4NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1144861?v=4","gravatar_id":"","url":"https://api.github.com/users/AudriusButkevicius","html_url":"https://github.com/AudriusButkevicius","followers_url":"https://api.github.com/users/AudriusButkevicius/followers","following_url":"https://api.github.com/users/AudriusButkevicius/following{/other_user}","gists_url":"https://api.github.com/users/AudriusButkevicius/gists{/gist_id}","starred_url":"https://api.github.com/users/AudriusButkevicius/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AudriusButkevicius/subscriptions","organizations_url":"https://api.github.com/users/AudriusButkevicius/orgs","repos_url":"https://api.github.com/users/AudriusButkevicius/repos","events_url":"https://api.github.com/users/AudriusButkevicius/events{/privacy}","received_events_url":"https://api.github.com/users/AudriusButkevicius/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/513552688","html_url":"https://github.com/syncthing/syncthing/issues/5175#issuecomment-513552688","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/5175","id":513552688,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMzU1MjY4OA==","user":{"login":"arl","id":476650,"node_id":"MDQ6VXNlcjQ3NjY1MA==","avatar_url":"https://avatars.githubusercontent.com/u/476650?v=4","gravatar_id":"","url":"https://api.github.com/users/arl","html_url":"https://github.com/arl","followers_url":"https://api.github.com/users/arl/followers","following_url":"https://api.github.com/users/arl/following{/other_user}","gists_url":"https://api.github.com/users/arl/gists{/gist_id}","starred_url":"https://api.github.com/users/arl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arl/subscriptions","organizations_url":"https://api.github.com/users/arl/orgs","repos_url":"https://api.github.com/users/arl/repos","events_url":"https://api.github.com/users/arl/events{/privacy}","received_events_url":"https://api.github.com/users/arl/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-21T13:04:27Z","updated_at":"2019-07-21T13:04:27Z","body":"> My gut says dependency injection, as lib/syncthing is now a thing, and keeping it a library without any global state is a nice, so perhaps we should inject some sort of metrics provider and push it down where needed,\r\n\r\nOk\r\n\r\n> It would be nice to be able to toggle most settings without requiring a restart. I guess we could do `metrics.Init(config.Wrapper)` or `config.OnChange(metrics.SetEnabled)` (somewhere in cmd/syncthing before moving to lib/syncthing) to do that if we really wanted to, and keeping it global is still something we'd want to do.\r\n\r\nGot it.\r\n\r\n> I think we'll still concepts like labels, as you'll want to track per folder, per device or per folder per device metrics, so we need to add some additional dimensions.\r\n> I guess this could be just part of the metric name, but given we're piggy backing on prometheus, it would make sense to keep supporting that.\r\n\r\nYes, that makes sense.\r\n\r\n### Very basic roadmap\r\n\r\nThanks for the briefing. It will probably take some time, that's why I wanted to establish a very basic roadmap and start to split the task into smaller ones.\r\n\r\n - To start off, I'm gonna code the `metrics` creation/production API, with in mind the fact that it could be enabled/disabled at runtime. IMHO it should be thought, as far as possible, as an autonomous package, and be TSDB-agnostic from the outside. \r\n - Then I'll see to integrate it with the rest of the syncthing code, be it with dependency injection or other means.\r\n - At this point the _standard_ prometheus endpoint would be up and running, producing no metrics yet.\r\n - I'll then use the API to instrument some part of the code.\r\n - Finally I'll tackle the second endpoint (the one that will be used by the UI).\r\n\r\nThere are probably a bunch of holes, but this is a start...\r\nThere's something to keep in mind for all subtasks, it's the fact that the feature should be enabled/disabled at runtime. \r\n\r\nSee you around, I'm sure I'll have many other questions.\r\nFeel free to issue any objection, doubts, advise regarding the roadmap.","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/513552688/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"arl","id":476650,"node_id":"MDQ6VXNlcjQ3NjY1MA==","avatar_url":"https://avatars.githubusercontent.com/u/476650?v=4","gravatar_id":"","url":"https://api.github.com/users/arl","html_url":"https://github.com/arl","followers_url":"https://api.github.com/users/arl/followers","following_url":"https://api.github.com/users/arl/following{/other_user}","gists_url":"https://api.github.com/users/arl/gists{/gist_id}","starred_url":"https://api.github.com/users/arl/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/arl/subscriptions","organizations_url":"https://api.github.com/users/arl/orgs","repos_url":"https://api.github.com/users/arl/repos","events_url":"https://api.github.com/users/arl/events{/privacy}","received_events_url":"https://api.github.com/users/arl/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/513553466","html_url":"https://github.com/syncthing/syncthing/issues/5175#issuecomment-513553466","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/5175","id":513553466,"node_id":"MDEyOklzc3VlQ29tbWVudDUxMzU1MzQ2Ng==","user":{"login":"AudriusButkevicius","id":1144861,"node_id":"MDQ6VXNlcjExNDQ4NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1144861?v=4","gravatar_id":"","url":"https://api.github.com/users/AudriusButkevicius","html_url":"https://github.com/AudriusButkevicius","followers_url":"https://api.github.com/users/AudriusButkevicius/followers","following_url":"https://api.github.com/users/AudriusButkevicius/following{/other_user}","gists_url":"https://api.github.com/users/AudriusButkevicius/gists{/gist_id}","starred_url":"https://api.github.com/users/AudriusButkevicius/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AudriusButkevicius/subscriptions","organizations_url":"https://api.github.com/users/AudriusButkevicius/orgs","repos_url":"https://api.github.com/users/AudriusButkevicius/repos","events_url":"https://api.github.com/users/AudriusButkevicius/events{/privacy}","received_events_url":"https://api.github.com/users/AudriusButkevicius/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2019-07-21T13:14:24Z","updated_at":"2019-07-21T13:14:24Z","body":"I think the enabling disabling at runtime is a fairly trivial problem once you have the rest solved, you can just make counter.Add noop etc.","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/513553466/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"AudriusButkevicius","id":1144861,"node_id":"MDQ6VXNlcjExNDQ4NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1144861?v=4","gravatar_id":"","url":"https://api.github.com/users/AudriusButkevicius","html_url":"https://github.com/AudriusButkevicius","followers_url":"https://api.github.com/users/AudriusButkevicius/followers","following_url":"https://api.github.com/users/AudriusButkevicius/following{/other_user}","gists_url":"https://api.github.com/users/AudriusButkevicius/gists{/gist_id}","starred_url":"https://api.github.com/users/AudriusButkevicius/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AudriusButkevicius/subscriptions","organizations_url":"https://api.github.com/users/AudriusButkevicius/orgs","repos_url":"https://api.github.com/users/AudriusButkevicius/repos","events_url":"https://api.github.com/users/AudriusButkevicius/events{/privacy}","received_events_url":"https://api.github.com/users/AudriusButkevicius/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/800680012","html_url":"https://github.com/syncthing/syncthing/issues/5175#issuecomment-800680012","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/5175","id":800680012,"node_id":"MDEyOklzc3VlQ29tbWVudDgwMDY4MDAxMg==","user":{"login":"lapo-luchini","id":420454,"node_id":"MDQ6VXNlcjQyMDQ1NA==","avatar_url":"https://avatars.githubusercontent.com/u/420454?v=4","gravatar_id":"","url":"https://api.github.com/users/lapo-luchini","html_url":"https://github.com/lapo-luchini","followers_url":"https://api.github.com/users/lapo-luchini/followers","following_url":"https://api.github.com/users/lapo-luchini/following{/other_user}","gists_url":"https://api.github.com/users/lapo-luchini/gists{/gist_id}","starred_url":"https://api.github.com/users/lapo-luchini/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lapo-luchini/subscriptions","organizations_url":"https://api.github.com/users/lapo-luchini/orgs","repos_url":"https://api.github.com/users/lapo-luchini/repos","events_url":"https://api.github.com/users/lapo-luchini/events{/privacy}","received_events_url":"https://api.github.com/users/lapo-luchini/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2021-03-16T23:30:18Z","updated_at":"2021-03-16T23:30:18Z","body":"There seems to be an existing external [Syncthing exporter](https://github.com/f100024/syncthing_exporter), converting current data from API to Prometheus format.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/800680012/reactions","total_count":1,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"lapo-luchini","id":420454,"node_id":"MDQ6VXNlcjQyMDQ1NA==","avatar_url":"https://avatars.githubusercontent.com/u/420454?v=4","gravatar_id":"","url":"https://api.github.com/users/lapo-luchini","html_url":"https://github.com/lapo-luchini","followers_url":"https://api.github.com/users/lapo-luchini/followers","following_url":"https://api.github.com/users/lapo-luchini/following{/other_user}","gists_url":"https://api.github.com/users/lapo-luchini/gists{/gist_id}","starred_url":"https://api.github.com/users/lapo-luchini/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lapo-luchini/subscriptions","organizations_url":"https://api.github.com/users/lapo-luchini/orgs","repos_url":"https://api.github.com/users/lapo-luchini/repos","events_url":"https://api.github.com/users/lapo-luchini/events{/privacy}","received_events_url":"https://api.github.com/users/lapo-luchini/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/1361241534","html_url":"https://github.com/syncthing/syncthing/issues/5175#issuecomment-1361241534","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/5175","id":1361241534,"node_id":"IC_kwDOAOCAEs5RIuW-","user":{"login":"mmokrejs","id":3297852,"node_id":"MDQ6VXNlcjMyOTc4NTI=","avatar_url":"https://avatars.githubusercontent.com/u/3297852?v=4","gravatar_id":"","url":"https://api.github.com/users/mmokrejs","html_url":"https://github.com/mmokrejs","followers_url":"https://api.github.com/users/mmokrejs/followers","following_url":"https://api.github.com/users/mmokrejs/following{/other_user}","gists_url":"https://api.github.com/users/mmokrejs/gists{/gist_id}","starred_url":"https://api.github.com/users/mmokrejs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mmokrejs/subscriptions","organizations_url":"https://api.github.com/users/mmokrejs/orgs","repos_url":"https://api.github.com/users/mmokrejs/repos","events_url":"https://api.github.com/users/mmokrejs/events{/privacy}","received_events_url":"https://api.github.com/users/mmokrejs/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2022-12-21T12:15:44Z","updated_at":"2022-12-21T12:24:36Z","body":"I would appreaciate if the statistics collected the delays and timeouts. Note, my system has set European timezone GMT+1 on OpenWRT router but the `1.19.2` syncthing daemon has evidently got the timezone wrong. Then the timepoint is set to the past (`2022-12-20 17:22:35` vs. `2022-12-20 17:13:53.112136263 +0000 UTC`):\r\n\r\n```\r\n2022-12-20 17:22:35 Connection loop\r\n2022-12-20 17:22:35 negative cache entry for MYSHARE at global@https://discovery.syncthing.net/v2/ valid until 2022-12-20 17:13:53.112136263 +0000 UTC m=+62.514170461 or 2022-12-20 18:12:17.112141383 +0000 UTC m=+3566.514175421\r\n2022-12-20 17:22:35 negative cache entry for MYSHARE at global@https://discovery-v4.syncthing.net/v2/ valid until 2022-12-20 17:13:53.112157223 +0000 UTC m=+62.514191421 or 2022-12-20 18:12:53.112160583 +0000 UTC m=+3602.514194621\r\n2022-12-20 17:22:35 negative cache entry for MYSHARE at global@https://discovery-v6.syncthing.net/v2/ valid until 2022-12-20 17:13:52.17705582 +0000 UTC m=+61.579090178 or 2022-12-20 18:12:52.17706414 +0000 UTC m=+3601.579098178\r\n...\r\n2022-12-21 12:12:47 negative cache entry for ANOTHERSHARE at global@https://discovery.syncthing.net/v2/ valid until 2022-12-21 11:26:47.663077835 +0000 UTC m=+57691.051910007 or 2022-12-21 12:25:24.663086475 +0000 UTC m=+61208.051918647\r\n2022-12-21 12:12:47 negative cache entry for ANOTHERSHARE at global@https://discovery-v4.syncthing.net/v2/ valid until 2022-12-21 11:26:47.663123435 +0000 UTC m=+57691.051955607 or 2022-12-21 12:25:47.663130635 +0000 UTC m=+61231.051962807\r\n2022-12-21 12:12:47 negative cache entry for ANOTHERSHARE at global@https://discovery-v6.syncthing.net/v2/ valid until 2022-12-21 11:26:47.663158955 +0000 UTC m=+57691.051991127 or 2022-12-21 12:25:47.663165195 +0000 UTC m=+61231.051997367\r\n```\r\n\r\nThere is no GUI settings entry nor config file entry to ensure syncthing knows local timezone.\r\n\r\nDefinitely, the connection attempts via IPv6 are just useless in my situation and just slowering the speed because my upstream WAN network does not support it. But, provided the routers kernel and syncthing binary supports IPv6 it still sttempts the connection and keeps track of locally annouced IPv6 addresses.","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/1361241534/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"mmokrejs","id":3297852,"node_id":"MDQ6VXNlcjMyOTc4NTI=","avatar_url":"https://avatars.githubusercontent.com/u/3297852?v=4","gravatar_id":"","url":"https://api.github.com/users/mmokrejs","html_url":"https://github.com/mmokrejs","followers_url":"https://api.github.com/users/mmokrejs/followers","following_url":"https://api.github.com/users/mmokrejs/following{/other_user}","gists_url":"https://api.github.com/users/mmokrejs/gists{/gist_id}","starred_url":"https://api.github.com/users/mmokrejs/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mmokrejs/subscriptions","organizations_url":"https://api.github.com/users/mmokrejs/orgs","repos_url":"https://api.github.com/users/mmokrejs/repos","events_url":"https://api.github.com/users/mmokrejs/events{/privacy}","received_events_url":"https://api.github.com/users/mmokrejs/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":10011871257,"node_id":"CE_lADOAOCAEs4VYUuQzwAAAAJUwQgZ","url":"https://api.github.com/repos/syncthing/syncthing/issues/events/10011871257","actor":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"b9c08d3814685bc8c4a322756e042b9852e321b4","commit_url":"https://api.github.com/repos/syncthing/syncthing/commits/b9c08d3814685bc8c4a322756e042b9852e321b4","created_at":"2023-08-04T17:57:40Z","state_reason":null,"performed_via_github_app":null},{"id":10043125435,"node_id":"REFE_lADOAOCAEs4VYUuQzwAAAAJWne67","url":"https://api.github.com/repos/syncthing/syncthing/issues/events/10043125435","actor":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"99086c40de95737575481da73972cd83970401ce","commit_url":"https://api.github.com/repos/calmh/syncthing/commits/99086c40de95737575481da73972cd83970401ce","created_at":"2023-08-09T07:01:15Z","performed_via_github_app":null},{"id":10168444429,"node_id":"MIE_lADOAOCAEs4VYUuQzwAAAAJeFiYN","url":"https://api.github.com/repos/syncthing/syncthing/issues/events/10168444429","actor":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"milestoned","commit_id":null,"commit_url":null,"created_at":"2023-08-23T10:31:24Z","milestone":{"title":"v1.24.0"},"performed_via_github_app":null},{"id":11619813146,"node_id":"REFE_lADOAOCAEs4VYUuQzwAAAAK0mEca","url":"https://api.github.com/repos/syncthing/syncthing/issues/events/11619813146","actor":{"login":"AndiDog","id":1376043,"node_id":"MDQ6VXNlcjEzNzYwNDM=","avatar_url":"https://avatars.githubusercontent.com/u/1376043?v=4","gravatar_id":"","url":"https://api.github.com/users/AndiDog","html_url":"https://github.com/AndiDog","followers_url":"https://api.github.com/users/AndiDog/followers","following_url":"https://api.github.com/users/AndiDog/following{/other_user}","gists_url":"https://api.github.com/users/AndiDog/gists{/gist_id}","starred_url":"https://api.github.com/users/AndiDog/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AndiDog/subscriptions","organizations_url":"https://api.github.com/users/AndiDog/orgs","repos_url":"https://api.github.com/users/AndiDog/repos","events_url":"https://api.github.com/users/AndiDog/events{/privacy}","received_events_url":"https://api.github.com/users/AndiDog/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"b9c08d3814685bc8c4a322756e042b9852e321b4","commit_url":"https://api.github.com/repos/AndiDog/syncthing/commits/b9c08d3814685bc8c4a322756e042b9852e321b4","created_at":"2024-01-28T12:19:31Z","performed_via_github_app":null},{"id":13751365663,"node_id":"LE_lADOAOCAEs4VYUuQzwAAAAMzpTAf","url":"https://api.github.com/repos/syncthing/syncthing/issues/events/13751365663","actor":{"login":"st-review","id":16196517,"node_id":"MDQ6VXNlcjE2MTk2NTE3","avatar_url":"https://avatars.githubusercontent.com/u/16196517?v=4","gravatar_id":"","url":"https://api.github.com/users/st-review","html_url":"https://github.com/st-review","followers_url":"https://api.github.com/users/st-review/followers","following_url":"https://api.github.com/users/st-review/following{/other_user}","gists_url":"https://api.github.com/users/st-review/gists{/gist_id}","starred_url":"https://api.github.com/users/st-review/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/st-review/subscriptions","organizations_url":"https://api.github.com/users/st-review/orgs","repos_url":"https://api.github.com/users/st-review/repos","events_url":"https://api.github.com/users/st-review/events{/privacy}","received_events_url":"https://api.github.com/users/st-review/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2024-08-03T18:44:22Z","label":{"name":"frozen-due-to-age","color":"eeeeee"},"performed_via_github_app":null},{"id":13751365684,"node_id":"LOE_lADOAOCAEs4VYUuQzwAAAAMzpTA0","url":"https://api.github.com/repos/syncthing/syncthing/issues/events/13751365684","actor":{"login":"syncthing","id":7628018,"node_id":"MDEyOk9yZ2FuaXphdGlvbjc2MjgwMTg=","avatar_url":"https://avatars.githubusercontent.com/u/7628018?v=4","gravatar_id":"","url":"https://api.github.com/users/syncthing","html_url":"https://github.com/syncthing","followers_url":"https://api.github.com/users/syncthing/followers","following_url":"https://api.github.com/users/syncthing/following{/other_user}","gists_url":"https://api.github.com/users/syncthing/gists{/gist_id}","starred_url":"https://api.github.com/users/syncthing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/syncthing/subscriptions","organizations_url":"https://api.github.com/users/syncthing/orgs","repos_url":"https://api.github.com/users/syncthing/repos","events_url":"https://api.github.com/users/syncthing/events{/privacy}","received_events_url":"https://api.github.com/users/syncthing/received_events","type":"Organization","user_view_type":"public","site_admin":false},"event":"locked","commit_id":null,"commit_url":null,"created_at":"2024-08-03T18:44:22Z","lock_reason":null,"performed_via_github_app":null}]