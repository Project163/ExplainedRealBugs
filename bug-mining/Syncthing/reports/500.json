{"url":"https://api.github.com/repos/syncthing/syncthing/issues/3338","repository_url":"https://api.github.com/repos/syncthing/syncthing","labels_url":"https://api.github.com/repos/syncthing/syncthing/issues/3338/labels{/name}","comments_url":"https://api.github.com/repos/syncthing/syncthing/issues/3338/comments","events_url":"https://api.github.com/repos/syncthing/syncthing/issues/3338/events","html_url":"https://github.com/syncthing/syncthing/issues/3338","id":162102178,"node_id":"MDU6SXNzdWUxNjIxMDIxNzg=","number":3338,"title":"Syncthing runs into encfs file name length limit","user":{"login":"afiskon","id":800352,"node_id":"MDQ6VXNlcjgwMDM1Mg==","avatar_url":"https://avatars.githubusercontent.com/u/800352?v=4","gravatar_id":"","url":"https://api.github.com/users/afiskon","html_url":"https://github.com/afiskon","followers_url":"https://api.github.com/users/afiskon/followers","following_url":"https://api.github.com/users/afiskon/following{/other_user}","gists_url":"https://api.github.com/users/afiskon/gists{/gist_id}","starred_url":"https://api.github.com/users/afiskon/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/afiskon/subscriptions","organizations_url":"https://api.github.com/users/afiskon/orgs","repos_url":"https://api.github.com/users/afiskon/repos","events_url":"https://api.github.com/users/afiskon/events{/privacy}","received_events_url":"https://api.github.com/users/afiskon/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":628314330,"node_id":"MDU6TGFiZWw2MjgzMTQzMzA=","url":"https://api.github.com/repos/syncthing/syncthing/labels/frozen-due-to-age","name":"frozen-due-to-age","color":"eeeeee","default":false,"description":"Issues closed and untouched for a long time, together with being locked for discussion"}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":19,"created_at":"2016-06-24T08:44:30Z","updated_at":"2017-06-25T08:13:05Z","closed_at":"2016-06-25T06:43:04Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### Version Information\n\nSyncthing Version: v0.13.7\nOS Version: Ubuntu 14.04 (also affects Windows, MacOS, etc)\n### Steps to reproduce the problem\n\nThis bug can be reproduced in different environments. Please don't get an impression that only Linux users are affected.\n\nHere is an example how to reproduce an issue:\n1. Install Ununtu 14.04 LTS, enable home directory encryption using EncFS. EncFS has a serious limit on maximum file name length which will help us to reproduce an issue.\n2. Install Syncthing\n3. Create a file with long enough name (close to FS limits) in Sync directory, for instance: `/home/eax/Sync/books/by_topic/papers-redbook/0032 - ARIES- A Transaction Recovery Method Supporting Fine-Granularity Locking and Partial Rollbacks Using Write-Ahead Logging.pdf`\n4. Sync with second machine that doesn't use EncFS\n5. Delete Syncthing, clear Sync directory\n6. Re-Install Syncthing, try to sync with second machine\n### What you expected to happen\n\nAll files sync successfully.\n### What actually happened\n\nSyncthing doesn't sync some files. In log there are multiple error messages like this:\n\n```\n[TQISY] 10:29:46 INFO: Puller: final: open /home/eax/Sync/books/by_topic/papers-redbook/.syncthing.032 - ARIES- A Transaction Recovery Method Supporting Fine-Granularity Locking and Partial Rollbacks Using Write-Ahead Logging.pdf.tmp: file name too long \n```\n### Suggestion\n\nTemp file name is longer than original file name and thus doesn't satisfy filesystem limits. Perhaps instead of `.syncthing.(full file name).tmp` you could use `.syncthing.(sha256 of file name).tmp`.\n","closed_by":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/3338/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/syncthing/syncthing/issues/3338/timeline","performed_via_github_app":null,"state_reason":"completed"}