{"url":"https://api.github.com/repos/syncthing/syncthing/issues/5641","repository_url":"https://api.github.com/repos/syncthing/syncthing","labels_url":"https://api.github.com/repos/syncthing/syncthing/issues/5641/labels{/name}","comments_url":"https://api.github.com/repos/syncthing/syncthing/issues/5641/comments","events_url":"https://api.github.com/repos/syncthing/syncthing/issues/5641/events","html_url":"https://github.com/syncthing/syncthing/issues/5641","id":430636219,"node_id":"MDU6SXNzdWU0MzA2MzYyMTk=","number":5641,"title":"Syncthing gets stuck in a high CPU \"Failed Files\" state - Possibly a symlink issue?","user":{"login":"pineapplemachine","id":7266412,"node_id":"MDQ6VXNlcjcyNjY0MTI=","avatar_url":"https://avatars.githubusercontent.com/u/7266412?v=4","gravatar_id":"","url":"https://api.github.com/users/pineapplemachine","html_url":"https://github.com/pineapplemachine","followers_url":"https://api.github.com/users/pineapplemachine/followers","following_url":"https://api.github.com/users/pineapplemachine/following{/other_user}","gists_url":"https://api.github.com/users/pineapplemachine/gists{/gist_id}","starred_url":"https://api.github.com/users/pineapplemachine/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/pineapplemachine/subscriptions","organizations_url":"https://api.github.com/users/pineapplemachine/orgs","repos_url":"https://api.github.com/users/pineapplemachine/repos","events_url":"https://api.github.com/users/pineapplemachine/events{/privacy}","received_events_url":"https://api.github.com/users/pineapplemachine/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":67767665,"node_id":"MDU6TGFiZWw2Nzc2NzY2NQ==","url":"https://api.github.com/repos/syncthing/syncthing/labels/bug","name":"bug","color":"d93f0b","default":true,"description":"A problem with current functionality, as opposed to missing functionality (enhancement)"},{"id":628314330,"node_id":"MDU6TGFiZWw2MjgzMTQzMzA=","url":"https://api.github.com/repos/syncthing/syncthing/labels/frozen-due-to-age","name":"frozen-due-to-age","color":"eeeeee","default":false,"description":"Issues closed and untouched for a long time, together with being locked for discussion"}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/syncthing/syncthing/milestones/34","html_url":"https://github.com/syncthing/syncthing/milestone/34","labels_url":"https://api.github.com/repos/syncthing/syncthing/milestones/34/labels","id":4270596,"node_id":"MDk6TWlsZXN0b25lNDI3MDU5Ng==","number":34,"title":"v1.1.4","description":"","creator":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":59,"state":"closed","created_at":"2019-04-29T19:40:08Z","updated_at":"2019-06-04T05:39:10Z","due_on":"2019-06-04T07:00:00Z","closed_at":"2019-06-04T05:39:10Z"},"comments":9,"created_at":"2019-04-08T20:11:35Z","updated_at":"2020-04-10T07:02:35Z","closed_at":"2019-04-10T14:22:29Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Syncthing Version: v1.1.1\r\nOS Version: Windows 7 & OSX 10.9 & Ubuntu 18.04\r\n\r\n# What I did\r\n\r\nI've set up Syncthing on three machines - my desktop and my laptop that I need to sync files between, and a dedicated AWS EC2 instance for backups and so that stuff still get synced if both of my computers aren't on at the same time. (They usually aren't.)\r\n\r\nFirst I set it up on the AWS instance, then I set it up on my Macbook. I set things synchronizing and after a couple of hiccups I had a couple folders duplicated on the dedicated server. (Per hiccups: Syncing slows down massively when the GUI is open?? I mean, I get why this could happen, but some kind of notice in the GUI would have been really helpful, I spent like an hour troubleshooting why network would be having problems that could explain the slow transfer rate when in fact it all had to do with the GUI.)\r\n\r\nThen I set it up on Windows. I have been using Dropbox up to now, and the reason I'm setting up Syncthing is because Dropbox is ending support for my Macbook's OS. This means that all the files I need to sync were already being synchronized by Dropbox. I shared the smaller of the two folders I've been trying out with Syncthing between all the devices and everything was great. Syncthing recognized right away that everything was already synchronized. Then I shared the larger one and things were fine at first, but then my Macbook and the AWS instance both started getting confused.\r\n\r\n# What happened next\r\n\r\nExcept for when I pause the larger folder being shared, both my Macbook and the AWS instance are reporting very high CPU usage. The GUI shows the folder in a \"Failed Files\" state. Syncthing seemed to be repeatedly scanning the folder. I did _not_ have this problem when sharing the folder from my Macbook with the AWS instance, this issue only occurred after adding my Windows machine to the bunch.\r\n\r\n# The log\r\n\r\nHere is a portion of the very noisy log from syncthing on OSX. The log's frequent mention of symlinks is the reason why I suspect the issue to be connected to symlinks.\r\n\r\n```\r\n[NDTXR] 23:08:59 INFO: Puller (folder \"Projects\" (mxwe3-xw9bp), file \"PyDwarf/df/libs/SDL_ttf.framework/Headers/SDL_ttf.h\"): checking parent dirs: traverses symlink: PyDwarf/df/libs/SDL_ttf.framework/Headers\r\n[NDTXR] 23:08:59 INFO: Puller (folder \"Projects\" (mxwe3-xw9bp), file \"PyDwarf/df/libs/SDL_ttf.framework/Resources/Info.plist\"): checking parent dirs: traverses symlink: PyDwarf/df/libs/SDL_ttf.framework/Resources\r\n[NDTXR] 23:08:59 INFO: Puller (folder \"Projects\" (mxwe3-xw9bp), file \"PyDwarf/df/libs/SDL_ttf.framework/Versions/Current/Headers/SDL_ttf.h\"): checking parent dirs: traverses symlink: PyDwarf/df/libs/SDL_ttf.framework/Versions/Current\r\n[NDTXR] 23:08:59 INFO: Puller (folder \"Projects\" (mxwe3-xw9bp), file \"PyDwarf/df/libs/SDL_ttf.framework/Versions/Current/Resources/Info.plist\"): checking parent dirs: traverses symlink: PyDwarf/df/libs/SDL_ttf.framework/Versions/Current\r\n[NDTXR] 23:08:59 INFO: Puller (folder \"Projects\" (mxwe3-xw9bp), file \"PyDwarf/df/libs/SDL.framework/Versions/Current/Headers/SDL_syswm.h\"): checking parent dirs: traverses symlink: PyDwarf/df/libs/SDL.framework/Versions/Current\r\n[NDTXR] 23:08:59 INFO: Puller (folder \"Projects\" (mxwe3-xw9bp), file \"rust/hello_world/target/debug/hello_world.dSYM/Contents/Resources/DWARF/hello_world-149ec8b9da1f89ba\"): checking parent dirs: traverses symlink: rust/hello_world/target/debug/hello_world.dSYM\r\n[NDTXR] 23:08:59 INFO: Puller (folder \"Projects\" (mxwe3-xw9bp), file \"rust/hello_world/target/debug/hello_world.dSYM/Contents/Info.plist\"): checking parent dirs: traverses symlink: rust/hello_world/target/debug/hello_world.dSYM\r\n```\r\n","closed_by":{"login":"imsodin","id":15955093,"node_id":"MDQ6VXNlcjE1OTU1MDkz","avatar_url":"https://avatars.githubusercontent.com/u/15955093?v=4","gravatar_id":"","url":"https://api.github.com/users/imsodin","html_url":"https://github.com/imsodin","followers_url":"https://api.github.com/users/imsodin/followers","following_url":"https://api.github.com/users/imsodin/following{/other_user}","gists_url":"https://api.github.com/users/imsodin/gists{/gist_id}","starred_url":"https://api.github.com/users/imsodin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imsodin/subscriptions","organizations_url":"https://api.github.com/users/imsodin/orgs","repos_url":"https://api.github.com/users/imsodin/repos","events_url":"https://api.github.com/users/imsodin/events{/privacy}","received_events_url":"https://api.github.com/users/imsodin/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/5641/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/syncthing/syncthing/issues/5641/timeline","performed_via_github_app":null,"state_reason":"completed"}