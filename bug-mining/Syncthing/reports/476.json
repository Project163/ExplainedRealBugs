{"url":"https://api.github.com/repos/syncthing/syncthing/issues/3182","repository_url":"https://api.github.com/repos/syncthing/syncthing","labels_url":"https://api.github.com/repos/syncthing/syncthing/issues/3182/labels{/name}","comments_url":"https://api.github.com/repos/syncthing/syncthing/issues/3182/comments","events_url":"https://api.github.com/repos/syncthing/syncthing/issues/3182/events","html_url":"https://github.com/syncthing/syncthing/issues/3182","id":156720232,"node_id":"MDU6SXNzdWUxNTY3MjAyMzI=","number":3182,"title":"Sort out http caching strategy","user":{"login":"canton7","id":568104,"node_id":"MDQ6VXNlcjU2ODEwNA==","avatar_url":"https://avatars.githubusercontent.com/u/568104?v=4","gravatar_id":"","url":"https://api.github.com/users/canton7","html_url":"https://github.com/canton7","followers_url":"https://api.github.com/users/canton7/followers","following_url":"https://api.github.com/users/canton7/following{/other_user}","gists_url":"https://api.github.com/users/canton7/gists{/gist_id}","starred_url":"https://api.github.com/users/canton7/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/canton7/subscriptions","organizations_url":"https://api.github.com/users/canton7/orgs","repos_url":"https://api.github.com/users/canton7/repos","events_url":"https://api.github.com/users/canton7/events{/privacy}","received_events_url":"https://api.github.com/users/canton7/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":628314330,"node_id":"MDU6TGFiZWw2MjgzMTQzMzA=","url":"https://api.github.com/repos/syncthing/syncthing/labels/frozen-due-to-age","name":"frozen-due-to-age","color":"eeeeee","default":false,"description":"Issues closed and untouched for a long time, together with being locked for discussion"}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2016-05-25T10:51:47Z","updated_at":"2017-06-16T21:00:48Z","closed_at":"2016-05-30T13:54:58Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Copied from IRC.\n\nReading everything I can find on http caching, I'm pretty sure that our caching headers are letting browsers cache anything they like for as long as they like (they'll make up some heuristic on when to revalidate based on the last-modified). I _think_ we need max-age=0 and must-revalidate in order to force the browser to revalidate on every request (it will still send if-modified-since).\n\nAlternatively, we could set / to never cache, and use cache busting from within angular...\n\n... or maybe you should use no-cache, although apparently browsers have started treating that like no-store (i.e. no caching at all).\n\nAlso, it looks like chrome caches rest responses which result in an error (I've got some 403 CSRF errors here, which have been cached), as no headers were returned with them.\n","closed_by":{"login":"st-review","id":16196517,"node_id":"MDQ6VXNlcjE2MTk2NTE3","avatar_url":"https://avatars.githubusercontent.com/u/16196517?v=4","gravatar_id":"","url":"https://api.github.com/users/st-review","html_url":"https://github.com/st-review","followers_url":"https://api.github.com/users/st-review/followers","following_url":"https://api.github.com/users/st-review/following{/other_user}","gists_url":"https://api.github.com/users/st-review/gists{/gist_id}","starred_url":"https://api.github.com/users/st-review/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/st-review/subscriptions","organizations_url":"https://api.github.com/users/st-review/orgs","repos_url":"https://api.github.com/users/st-review/repos","events_url":"https://api.github.com/users/st-review/events{/privacy}","received_events_url":"https://api.github.com/users/st-review/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/3182/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/syncthing/syncthing/issues/3182/timeline","performed_via_github_app":null,"state_reason":"completed"}