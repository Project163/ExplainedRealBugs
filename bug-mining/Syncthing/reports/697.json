{"url":"https://api.github.com/repos/syncthing/syncthing/issues/4542","repository_url":"https://api.github.com/repos/syncthing/syncthing","labels_url":"https://api.github.com/repos/syncthing/syncthing/issues/4542/labels{/name}","comments_url":"https://api.github.com/repos/syncthing/syncthing/issues/4542/comments","events_url":"https://api.github.com/repos/syncthing/syncthing/issues/4542/events","html_url":"https://github.com/syncthing/syncthing/issues/4542","id":276267170,"node_id":"MDU6SXNzdWUyNzYyNjcxNzA=","number":4542,"title":"Support OneDrive folders on recent Windows 10","user":{"login":"jarppiko","id":23549925,"node_id":"MDQ6VXNlcjIzNTQ5OTI1","avatar_url":"https://avatars.githubusercontent.com/u/23549925?v=4","gravatar_id":"","url":"https://api.github.com/users/jarppiko","html_url":"https://github.com/jarppiko","followers_url":"https://api.github.com/users/jarppiko/followers","following_url":"https://api.github.com/users/jarppiko/following{/other_user}","gists_url":"https://api.github.com/users/jarppiko/gists{/gist_id}","starred_url":"https://api.github.com/users/jarppiko/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jarppiko/subscriptions","organizations_url":"https://api.github.com/users/jarppiko/orgs","repos_url":"https://api.github.com/users/jarppiko/repos","events_url":"https://api.github.com/users/jarppiko/events{/privacy}","received_events_url":"https://api.github.com/users/jarppiko/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":67767667,"node_id":"MDU6TGFiZWw2Nzc2NzY2Nw==","url":"https://api.github.com/repos/syncthing/syncthing/labels/enhancement","name":"enhancement","color":"0e8a16","default":true,"description":"New features or improvements of some kind, as opposed to a problem (bug)"},{"id":628314330,"node_id":"MDU6TGFiZWw2MjgzMTQzMzA=","url":"https://api.github.com/repos/syncthing/syncthing/labels/frozen-due-to-age","name":"frozen-due-to-age","color":"eeeeee","default":false,"description":"Issues closed and untouched for a long time, together with being locked for discussion"}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/syncthing/syncthing/milestones/16","html_url":"https://github.com/syncthing/syncthing/milestone/16","labels_url":"https://api.github.com/repos/syncthing/syncthing/milestones/16/labels","id":2954274,"node_id":"MDk6TWlsZXN0b25lMjk1NDI3NA==","number":16,"title":"v0.14.42","description":"","creator":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":7,"state":"closed","created_at":"2017-12-03T19:55:31Z","updated_at":"2018-01-15T14:28:05Z","due_on":"2017-12-26T08:00:00Z","closed_at":"2017-12-25T07:01:52Z"},"comments":24,"created_at":"2017-11-23T05:03:51Z","updated_at":"2018-11-27T07:02:16Z","closed_at":"2017-11-26T07:51:28Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Syncthing (v0.14.40) does not work with Onedrive on Windows 10 Fall Creator Update (version 1709) properly in some cases. \r\n\r\nIn Win 10 Fall Creators Update, Microsoft changed how Onedrive operates NTFS filesystem. Now OneDrive creates [reparsepoints](https://msdn.microsoft.com/en-us/library/windows/desktop/aa365503(v=vs.85).aspx) (an NTFS feature). Syncthing forum user \"geeksquad\" explained it [here](https://forum.syncthing.net/t/folder-path-missing-even-the-path-exists-onedrive-win10-fall-creators-update/10913/4). It seems Syncthing is refusing to recognize a OneDrive directory using _reparsepoints_ and reports an error message \"folder path missing\". \r\n\r\n> [ZEER7] 12:49:24 WARNING: Creating folder marker: folder path missing\r\n> [ZEER7] 12:49:24 INFO: Restarted folder \"EXAMPLE\" (xxxxx-yyyyy) (readwrite)\r\n> [ZEER7] 12:49:24 INFO: Connection to WJXMAFI closed: reading length: read tcp 192.168.1.2:51413->192.168.1.3:22000: use of closed network connection\r\n> [ZEER7] 12:49:24 WARNING: Error on folder \"EXAMPLE\" (xxxxx-yyyyy): folder path missing\r\n> [ZEER7] 12:49:24 INFO: Failed initial scan of readwrite folder \"EXAMPLE\" (xxxxx-yyyyy)\r\n\r\nI have 2 OneDrive synced directories on a same computer synced with Syncthing to a Linux server. Based on my experiments the following factors may impact on the success of getting Syncthing to sync a OneDrive folder: \r\n\r\n1. I have OneDrive Business and standard OneDrive folders and only the ordinary OneDrive folder syncs properly. There might or might not be a issue related to Onedrive Business. \r\n2.  In case of the (standard) OneDrive, the synced folder is not the root OneDrive folder, but a folder under the Onedrive root folder. Syncthing syncs this folder under the OneDrive root folder OK.\r\n3. In the case of the OneDrive Business folder, I am trying to sync the OneDrive Business root folder, but after updating to Win10 Fall Creators Update, Syncthing stopped syncing this folder. \r\n4. Syncthing does not sync properly any OneDrive or OneDrive Business folder IF _Files On-demand_ feature has been enabled on the OneDrive. Microsoft introduced this feature in Win 10 Fall Creators Update and it is enabled by default. I have disabled it manually. \r\n\r\n### Version Information\r\n\r\nSyncthing Version: v0.14.40 Win 64-bit\r\nOS Version: Windows 10 Fall Creator Update (Version >= 1709 )\r\n\r\n","closed_by":{"login":"st-review","id":16196517,"node_id":"MDQ6VXNlcjE2MTk2NTE3","avatar_url":"https://avatars.githubusercontent.com/u/16196517?v=4","gravatar_id":"","url":"https://api.github.com/users/st-review","html_url":"https://github.com/st-review","followers_url":"https://api.github.com/users/st-review/followers","following_url":"https://api.github.com/users/st-review/following{/other_user}","gists_url":"https://api.github.com/users/st-review/gists{/gist_id}","starred_url":"https://api.github.com/users/st-review/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/st-review/subscriptions","organizations_url":"https://api.github.com/users/st-review/orgs","repos_url":"https://api.github.com/users/st-review/repos","events_url":"https://api.github.com/users/st-review/events{/privacy}","received_events_url":"https://api.github.com/users/st-review/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/4542/reactions","total_count":2,"+1":2,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/syncthing/syncthing/issues/4542/timeline","performed_via_github_app":null,"state_reason":"completed"}