[{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/165214798","html_url":"https://github.com/syncthing/syncthing/issues/2589#issuecomment-165214798","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/2589","id":165214798,"node_id":"MDEyOklzc3VlQ29tbWVudDE2NTIxNDc5OA==","user":{"login":"AudriusButkevicius","id":1144861,"node_id":"MDQ6VXNlcjExNDQ4NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1144861?v=4","gravatar_id":"","url":"https://api.github.com/users/AudriusButkevicius","html_url":"https://github.com/AudriusButkevicius","followers_url":"https://api.github.com/users/AudriusButkevicius/followers","following_url":"https://api.github.com/users/AudriusButkevicius/following{/other_user}","gists_url":"https://api.github.com/users/AudriusButkevicius/gists{/gist_id}","starred_url":"https://api.github.com/users/AudriusButkevicius/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AudriusButkevicius/subscriptions","organizations_url":"https://api.github.com/users/AudriusButkevicius/orgs","repos_url":"https://api.github.com/users/AudriusButkevicius/repos","events_url":"https://api.github.com/users/AudriusButkevicius/events{/privacy}","received_events_url":"https://api.github.com/users/AudriusButkevicius/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-12-16T19:09:49Z","updated_at":"2015-12-16T19:09:49Z","body":"It's a garbage collected language, so its fairly hard to leak stuff. I think using 120MB of RAM for all DB caches and bells and whitles is reasonable. There are things you could disable which could make it better (for example scanning progress which has to hold metadata about files in memory, ignore pattern cache) but you will either loose features or increase cpu load. Also, you can read about the GOGC environment variable and set that to something lower.\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/165214798/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"AudriusButkevicius","id":1144861,"node_id":"MDQ6VXNlcjExNDQ4NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1144861?v=4","gravatar_id":"","url":"https://api.github.com/users/AudriusButkevicius","html_url":"https://github.com/AudriusButkevicius","followers_url":"https://api.github.com/users/AudriusButkevicius/followers","following_url":"https://api.github.com/users/AudriusButkevicius/following{/other_user}","gists_url":"https://api.github.com/users/AudriusButkevicius/gists{/gist_id}","starred_url":"https://api.github.com/users/AudriusButkevicius/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AudriusButkevicius/subscriptions","organizations_url":"https://api.github.com/users/AudriusButkevicius/orgs","repos_url":"https://api.github.com/users/AudriusButkevicius/repos","events_url":"https://api.github.com/users/AudriusButkevicius/events{/privacy}","received_events_url":"https://api.github.com/users/AudriusButkevicius/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":493855541,"node_id":"MDExOkNsb3NlZEV2ZW50NDkzODU1NTQx","url":"https://api.github.com/repos/syncthing/syncthing/issues/events/493855541","actor":{"login":"AudriusButkevicius","id":1144861,"node_id":"MDQ6VXNlcjExNDQ4NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1144861?v=4","gravatar_id":"","url":"https://api.github.com/users/AudriusButkevicius","html_url":"https://github.com/AudriusButkevicius","followers_url":"https://api.github.com/users/AudriusButkevicius/followers","following_url":"https://api.github.com/users/AudriusButkevicius/following{/other_user}","gists_url":"https://api.github.com/users/AudriusButkevicius/gists{/gist_id}","starred_url":"https://api.github.com/users/AudriusButkevicius/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AudriusButkevicius/subscriptions","organizations_url":"https://api.github.com/users/AudriusButkevicius/orgs","repos_url":"https://api.github.com/users/AudriusButkevicius/repos","events_url":"https://api.github.com/users/AudriusButkevicius/events{/privacy}","received_events_url":"https://api.github.com/users/AudriusButkevicius/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":null,"commit_url":null,"created_at":"2015-12-16T19:09:50Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/165332097","html_url":"https://github.com/syncthing/syncthing/issues/2589#issuecomment-165332097","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/2589","id":165332097,"node_id":"MDEyOklzc3VlQ29tbWVudDE2NTMzMjA5Nw==","user":{"login":"indrora","id":470584,"node_id":"MDQ6VXNlcjQ3MDU4NA==","avatar_url":"https://avatars.githubusercontent.com/u/470584?v=4","gravatar_id":"","url":"https://api.github.com/users/indrora","html_url":"https://github.com/indrora","followers_url":"https://api.github.com/users/indrora/followers","following_url":"https://api.github.com/users/indrora/following{/other_user}","gists_url":"https://api.github.com/users/indrora/gists{/gist_id}","starred_url":"https://api.github.com/users/indrora/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/indrora/subscriptions","organizations_url":"https://api.github.com/users/indrora/orgs","repos_url":"https://api.github.com/users/indrora/repos","events_url":"https://api.github.com/users/indrora/events{/privacy}","received_events_url":"https://api.github.com/users/indrora/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-12-17T04:08:00Z","updated_at":"2015-12-17T04:08:00Z","body":"I expressed myself poorly -- after several hours, this value balloons to nearly 200MB and gets OOM killed by my VPS. It explicitly happens when I have a short scan interval set on folders.\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/165332097/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"indrora","id":470584,"node_id":"MDQ6VXNlcjQ3MDU4NA==","avatar_url":"https://avatars.githubusercontent.com/u/470584?v=4","gravatar_id":"","url":"https://api.github.com/users/indrora","html_url":"https://github.com/indrora","followers_url":"https://api.github.com/users/indrora/followers","following_url":"https://api.github.com/users/indrora/following{/other_user}","gists_url":"https://api.github.com/users/indrora/gists{/gist_id}","starred_url":"https://api.github.com/users/indrora/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/indrora/subscriptions","organizations_url":"https://api.github.com/users/indrora/orgs","repos_url":"https://api.github.com/users/indrora/repos","events_url":"https://api.github.com/users/indrora/events{/privacy}","received_events_url":"https://api.github.com/users/indrora/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/165374977","html_url":"https://github.com/syncthing/syncthing/issues/2589#issuecomment-165374977","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/2589","id":165374977,"node_id":"MDEyOklzc3VlQ29tbWVudDE2NTM3NDk3Nw==","user":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-12-17T07:47:28Z","updated_at":"2015-12-17T07:47:28Z","body":"Unfortunately, usage up to a couple of hundred megs even for smallish loads is fairly normal. However, my instances seem to stick at ~100 MB for about 5-10 times the amount of files. Are you running the 32 bit version? The GC there is (I think...) still less efficient than amd64. If you haven't already, do set GOGC=25 or so to enforce a slightly stricter GC as well.\n\nBut as Audrius says; we most likely don't have leaks. We do however have memory usage that goes up and down depending on what's going on.\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/165374977/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/165386233","html_url":"https://github.com/syncthing/syncthing/issues/2589#issuecomment-165386233","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/2589","id":165386233,"node_id":"MDEyOklzc3VlQ29tbWVudDE2NTM4NjIzMw==","user":{"login":"AudriusButkevicius","id":1144861,"node_id":"MDQ6VXNlcjExNDQ4NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1144861?v=4","gravatar_id":"","url":"https://api.github.com/users/AudriusButkevicius","html_url":"https://github.com/AudriusButkevicius","followers_url":"https://api.github.com/users/AudriusButkevicius/followers","following_url":"https://api.github.com/users/AudriusButkevicius/following{/other_user}","gists_url":"https://api.github.com/users/AudriusButkevicius/gists{/gist_id}","starred_url":"https://api.github.com/users/AudriusButkevicius/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AudriusButkevicius/subscriptions","organizations_url":"https://api.github.com/users/AudriusButkevicius/orgs","repos_url":"https://api.github.com/users/AudriusButkevicius/repos","events_url":"https://api.github.com/users/AudriusButkevicius/events{/privacy}","received_events_url":"https://api.github.com/users/AudriusButkevicius/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-12-17T08:50:08Z","updated_at":"2015-12-17T08:50:51Z","body":"And as I've expressed, disabling scan progress iindicators would help reduce memory usage during a scan at the cost of not showing the percentage.\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/165386233/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"AudriusButkevicius","id":1144861,"node_id":"MDQ6VXNlcjExNDQ4NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1144861?v=4","gravatar_id":"","url":"https://api.github.com/users/AudriusButkevicius","html_url":"https://github.com/AudriusButkevicius","followers_url":"https://api.github.com/users/AudriusButkevicius/followers","following_url":"https://api.github.com/users/AudriusButkevicius/following{/other_user}","gists_url":"https://api.github.com/users/AudriusButkevicius/gists{/gist_id}","starred_url":"https://api.github.com/users/AudriusButkevicius/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AudriusButkevicius/subscriptions","organizations_url":"https://api.github.com/users/AudriusButkevicius/orgs","repos_url":"https://api.github.com/users/AudriusButkevicius/repos","events_url":"https://api.github.com/users/AudriusButkevicius/events{/privacy}","received_events_url":"https://api.github.com/users/AudriusButkevicius/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/165515812","html_url":"https://github.com/syncthing/syncthing/issues/2589#issuecomment-165515812","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/2589","id":165515812,"node_id":"MDEyOklzc3VlQ29tbWVudDE2NTUxNTgxMg==","user":{"login":"indrora","id":470584,"node_id":"MDQ6VXNlcjQ3MDU4NA==","avatar_url":"https://avatars.githubusercontent.com/u/470584?v=4","gravatar_id":"","url":"https://api.github.com/users/indrora","html_url":"https://github.com/indrora","followers_url":"https://api.github.com/users/indrora/followers","following_url":"https://api.github.com/users/indrora/following{/other_user}","gists_url":"https://api.github.com/users/indrora/gists{/gist_id}","starred_url":"https://api.github.com/users/indrora/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/indrora/subscriptions","organizations_url":"https://api.github.com/users/indrora/orgs","repos_url":"https://api.github.com/users/indrora/repos","events_url":"https://api.github.com/users/indrora/events{/privacy}","received_events_url":"https://api.github.com/users/indrora/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-12-17T17:06:06Z","updated_at":"2015-12-17T17:06:06Z","body":"I'm on amd64.\n\nWhat I'm seeing smells like a leak. Memory usage just goes up. When I manually scan, I can regularly see (on an unchanged filesystem) higher memory usage after a scan. If not showing scan indicators alleviates memory load **after** the scan has completed, then that's a _leak_. \n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/165515812/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"indrora","id":470584,"node_id":"MDQ6VXNlcjQ3MDU4NA==","avatar_url":"https://avatars.githubusercontent.com/u/470584?v=4","gravatar_id":"","url":"https://api.github.com/users/indrora","html_url":"https://github.com/indrora","followers_url":"https://api.github.com/users/indrora/followers","following_url":"https://api.github.com/users/indrora/following{/other_user}","gists_url":"https://api.github.com/users/indrora/gists{/gist_id}","starred_url":"https://api.github.com/users/indrora/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/indrora/subscriptions","organizations_url":"https://api.github.com/users/indrora/orgs","repos_url":"https://api.github.com/users/indrora/repos","events_url":"https://api.github.com/users/indrora/events{/privacy}","received_events_url":"https://api.github.com/users/indrora/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/165524207","html_url":"https://github.com/syncthing/syncthing/issues/2589#issuecomment-165524207","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/2589","id":165524207,"node_id":"MDEyOklzc3VlQ29tbWVudDE2NTUyNDIwNw==","user":{"login":"canton7","id":568104,"node_id":"MDQ6VXNlcjU2ODEwNA==","avatar_url":"https://avatars.githubusercontent.com/u/568104?v=4","gravatar_id":"","url":"https://api.github.com/users/canton7","html_url":"https://github.com/canton7","followers_url":"https://api.github.com/users/canton7/followers","following_url":"https://api.github.com/users/canton7/following{/other_user}","gists_url":"https://api.github.com/users/canton7/gists{/gist_id}","starred_url":"https://api.github.com/users/canton7/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/canton7/subscriptions","organizations_url":"https://api.github.com/users/canton7/orgs","repos_url":"https://api.github.com/users/canton7/repos","events_url":"https://api.github.com/users/canton7/events{/privacy}","received_events_url":"https://api.github.com/users/canton7/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-12-17T17:39:26Z","updated_at":"2015-12-17T17:39:26Z","body":"I don't know exactly how Go's GC works, but it's not uncommon for GC'd languages to gradually consume more and more memory until there's actually some memory pressure, at which point they'll trigger a collection.\n","author_association":"CONTRIBUTOR","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/165524207/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"canton7","id":568104,"node_id":"MDQ6VXNlcjU2ODEwNA==","avatar_url":"https://avatars.githubusercontent.com/u/568104?v=4","gravatar_id":"","url":"https://api.github.com/users/canton7","html_url":"https://github.com/canton7","followers_url":"https://api.github.com/users/canton7/followers","following_url":"https://api.github.com/users/canton7/following{/other_user}","gists_url":"https://api.github.com/users/canton7/gists{/gist_id}","starred_url":"https://api.github.com/users/canton7/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/canton7/subscriptions","organizations_url":"https://api.github.com/users/canton7/orgs","repos_url":"https://api.github.com/users/canton7/repos","events_url":"https://api.github.com/users/canton7/events{/privacy}","received_events_url":"https://api.github.com/users/canton7/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/165543421","html_url":"https://github.com/syncthing/syncthing/issues/2589#issuecomment-165543421","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/2589","id":165543421,"node_id":"MDEyOklzc3VlQ29tbWVudDE2NTU0MzQyMQ==","user":{"login":"AudriusButkevicius","id":1144861,"node_id":"MDQ6VXNlcjExNDQ4NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1144861?v=4","gravatar_id":"","url":"https://api.github.com/users/AudriusButkevicius","html_url":"https://github.com/AudriusButkevicius","followers_url":"https://api.github.com/users/AudriusButkevicius/followers","following_url":"https://api.github.com/users/AudriusButkevicius/following{/other_user}","gists_url":"https://api.github.com/users/AudriusButkevicius/gists{/gist_id}","starred_url":"https://api.github.com/users/AudriusButkevicius/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AudriusButkevicius/subscriptions","organizations_url":"https://api.github.com/users/AudriusButkevicius/orgs","repos_url":"https://api.github.com/users/AudriusButkevicius/repos","events_url":"https://api.github.com/users/AudriusButkevicius/events{/privacy}","received_events_url":"https://api.github.com/users/AudriusButkevicius/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2015-12-17T18:40:41Z","updated_at":"2015-12-17T18:41:57Z","body":"Well, we have no control over when the memory gets freed, so it's just the runtime defering the GC scan until sometime later, and not a leak. \n\nA constant growth of 5MB per scan will not be collected.\nBy default GC kicks in every time we double in memory (GOGC=100).\nIf the runtime itself takes 120MB, a GC will only kick in at the point we reach 240MB, by which time we might have already been OOM killed.\n\nAs calmh said, set GOGC=1 (gc everytime memory growth increases by a percent) and you should see it freed much earlier, but make sure to put ice on the cpu as it will probably spend most of its time crawling trying to find what to free rather than doing anything useful. I guess you have to find a value which works for you.\n\nI am not sure how Go GC behaves with memory preassure, but I think it simply doesn't care given you are getting OOM killed.\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/165543421/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"AudriusButkevicius","id":1144861,"node_id":"MDQ6VXNlcjExNDQ4NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1144861?v=4","gravatar_id":"","url":"https://api.github.com/users/AudriusButkevicius","html_url":"https://github.com/AudriusButkevicius","followers_url":"https://api.github.com/users/AudriusButkevicius/followers","following_url":"https://api.github.com/users/AudriusButkevicius/following{/other_user}","gists_url":"https://api.github.com/users/AudriusButkevicius/gists{/gist_id}","starred_url":"https://api.github.com/users/AudriusButkevicius/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AudriusButkevicius/subscriptions","organizations_url":"https://api.github.com/users/AudriusButkevicius/orgs","repos_url":"https://api.github.com/users/AudriusButkevicius/repos","events_url":"https://api.github.com/users/AudriusButkevicius/events{/privacy}","received_events_url":"https://api.github.com/users/AudriusButkevicius/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/170425697","html_url":"https://github.com/syncthing/syncthing/issues/2589#issuecomment-170425697","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/2589","id":170425697,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MDQyNTY5Nw==","user":{"login":"Stebalien","id":310393,"node_id":"MDQ6VXNlcjMxMDM5Mw==","avatar_url":"https://avatars.githubusercontent.com/u/310393?v=4","gravatar_id":"","url":"https://api.github.com/users/Stebalien","html_url":"https://github.com/Stebalien","followers_url":"https://api.github.com/users/Stebalien/followers","following_url":"https://api.github.com/users/Stebalien/following{/other_user}","gists_url":"https://api.github.com/users/Stebalien/gists{/gist_id}","starred_url":"https://api.github.com/users/Stebalien/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Stebalien/subscriptions","organizations_url":"https://api.github.com/users/Stebalien/orgs","repos_url":"https://api.github.com/users/Stebalien/repos","events_url":"https://api.github.com/users/Stebalien/events{/privacy}","received_events_url":"https://api.github.com/users/Stebalien/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-11T03:46:07Z","updated_at":"2016-01-11T03:46:07Z","body":"> It's a garbage collected language, so its fairly hard to leak stuff.\n\nThis is couldn't be further from the truth. While one generally you can never really loose track of memory in a GCed system, you can easily accidentally hold on to references that you should let go of. For example, you can spawn a go routine, capture some state, and then hang forever. Basically, nothing will be freed while it could be used (even if it never is). This is actually a _huge_ problem in JavaScript.\n\nThere's no reason memory usage should increase over time. After starting up and connecting, memory usage should flatten out fairly quickly in a steady state. However, this is clearly not the case. On my machine, syncthing started out at 35MB and then slowly grew to over 90MB in a few hours which is well over double. This is a leak; there is nothing to debate. Unless the number of go routines is growing over time (this should be checked), there's probably some data structure somewhere that's growing linearly. Are you doing any sort of in-memory logging/event recording?\n\n> I am not sure how Go GC behaves with memory preassure, but I think it simply doesn't care given you are getting OOM killed.\n\nOn linux at least, there isn't really any concept of memory pressure.\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/170425697/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Stebalien","id":310393,"node_id":"MDQ6VXNlcjMxMDM5Mw==","avatar_url":"https://avatars.githubusercontent.com/u/310393?v=4","gravatar_id":"","url":"https://api.github.com/users/Stebalien","html_url":"https://github.com/Stebalien","followers_url":"https://api.github.com/users/Stebalien/followers","following_url":"https://api.github.com/users/Stebalien/following{/other_user}","gists_url":"https://api.github.com/users/Stebalien/gists{/gist_id}","starred_url":"https://api.github.com/users/Stebalien/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Stebalien/subscriptions","organizations_url":"https://api.github.com/users/Stebalien/orgs","repos_url":"https://api.github.com/users/Stebalien/repos","events_url":"https://api.github.com/users/Stebalien/events{/privacy}","received_events_url":"https://api.github.com/users/Stebalien/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/170450970","html_url":"https://github.com/syncthing/syncthing/issues/2589#issuecomment-170450970","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/2589","id":170450970,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MDQ1MDk3MA==","user":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-11T07:07:32Z","updated_at":"2016-01-11T14:28:53Z","body":"> On my machine, syncthing started out at 35MB and then slowly grew to over 90MB in a few hours which is well over double. This is a leak; there is nothing to debate.\n\nNo, this is fairly normal. And it also depends on how you measure this growth. You can set down the GOGC env variable to 25 or so (from the default of 100) to trigger earlier GC (at 25% growth instead of the 100% growth that is default). Also memory pressure is relevant, as the mechanism Go uses to free memory back to the OS is to indicate it as not in use using `madvise`. The pages are still allocated to the process, but Linux is free to throw them away if needed.\n\n90 MB is a perfectly cromulent level for things to flatten out at. If you'd say it continues to grow slowly but linearly from there, then yes we have a problem. However you'd probably not be the only one to see that.\n\nBut run it and let it run for a while with\n\n`STNORESTART=1 GODEBUG=gctrace=1 syncthing`\n\nand we should see what's going on, if there's some funny business. For comparison, my \"production\" syncthing that's currently been running for about two weeks idles at 83 MB. This is a bit less than what it starts out at (it peaks at ~200 MB or so):\n\n```\n[jb@anto-syncer ~]$ ps auxwww | egrep 'USER|syncth'\nUSER       PID %CPU %MEM   SZ  RSS TT       S    START  TIME COMMAND\njb       12631  0.0  0.3 173644 83512 ?        S   Dec 29 49:40 /home/jb/bin/syncthing\n```\n\nWith your proposed leak rate from above, it should be rather larger after two weeks. That's not to say something _can't_ be leaking, but we need the trace as mentioned to see it, in that case.\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/170450970/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":511197965,"node_id":"MDEzOlJlb3BlbmVkRXZlbnQ1MTExOTc5NjU=","url":"https://api.github.com/repos/syncthing/syncthing/issues/events/511197965","actor":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"reopened","commit_id":null,"commit_url":null,"created_at":"2016-01-11T15:04:03Z","state_reason":null,"performed_via_github_app":null},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/170580704","html_url":"https://github.com/syncthing/syncthing/issues/2589#issuecomment-170580704","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/2589","id":170580704,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MDU4MDcwNA==","user":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-11T15:04:47Z","updated_at":"2016-01-11T15:04:47Z","body":"Actually, staring at the gctrace and forcing continuous reconnects by restarting another instance of syncthing, there is a gradual increase I can't obviously explain. @Stebalien are you seeing a lot of reconnects going on for some reason?\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/170580704/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":511198703,"node_id":"MDE0Ok1lbnRpb25lZEV2ZW50NTExMTk4NzAz","url":"https://api.github.com/repos/syncthing/syncthing/issues/events/511198703","actor":{"login":"Stebalien","id":310393,"node_id":"MDQ6VXNlcjMxMDM5Mw==","avatar_url":"https://avatars.githubusercontent.com/u/310393?v=4","gravatar_id":"","url":"https://api.github.com/users/Stebalien","html_url":"https://github.com/Stebalien","followers_url":"https://api.github.com/users/Stebalien/followers","following_url":"https://api.github.com/users/Stebalien/following{/other_user}","gists_url":"https://api.github.com/users/Stebalien/gists{/gist_id}","starred_url":"https://api.github.com/users/Stebalien/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Stebalien/subscriptions","organizations_url":"https://api.github.com/users/Stebalien/orgs","repos_url":"https://api.github.com/users/Stebalien/repos","events_url":"https://api.github.com/users/Stebalien/events{/privacy}","received_events_url":"https://api.github.com/users/Stebalien/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"mentioned","commit_id":null,"commit_url":null,"created_at":"2016-01-11T15:04:47Z","performed_via_github_app":null},{"id":511198704,"node_id":"MDE1OlN1YnNjcmliZWRFdmVudDUxMTE5ODcwNA==","url":"https://api.github.com/repos/syncthing/syncthing/issues/events/511198704","actor":{"login":"Stebalien","id":310393,"node_id":"MDQ6VXNlcjMxMDM5Mw==","avatar_url":"https://avatars.githubusercontent.com/u/310393?v=4","gravatar_id":"","url":"https://api.github.com/users/Stebalien","html_url":"https://github.com/Stebalien","followers_url":"https://api.github.com/users/Stebalien/followers","following_url":"https://api.github.com/users/Stebalien/following{/other_user}","gists_url":"https://api.github.com/users/Stebalien/gists{/gist_id}","starred_url":"https://api.github.com/users/Stebalien/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Stebalien/subscriptions","organizations_url":"https://api.github.com/users/Stebalien/orgs","repos_url":"https://api.github.com/users/Stebalien/repos","events_url":"https://api.github.com/users/Stebalien/events{/privacy}","received_events_url":"https://api.github.com/users/Stebalien/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"subscribed","commit_id":null,"commit_url":null,"created_at":"2016-01-11T15:04:47Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/170589613","html_url":"https://github.com/syncthing/syncthing/issues/2589#issuecomment-170589613","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/2589","id":170589613,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MDU4OTYxMw==","user":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-11T15:36:39Z","updated_at":"2016-01-11T15:36:39Z","body":"sendIndexes aren't properly terminated on connection close:\n\n```\ngoroutine 5765 [select, 1 minutes]:\ngithub.com/syncthing/syncthing/lib/events.(*Subscription).Poll(0xc8201b0120, 0xdf8475800, 0x0, 0x0, 0xffffffff00000000, 0x0, 0x0, 0x0, 0x0, 0x0, ...)\n    /Users/jb/src/github.com/syncthing/syncthing/lib/events/events.go:210 +0x4dc\ngithub.com/syncthing/syncthing/lib/model.sendIndexes(0xf85248, 0xc820114390, 0xc820471ec0, 0x2d, 0xc8204dc580, 0xc8204724b0)\n    /Users/jb/src/github.com/syncthing/syncthing/lib/model/model.go:1085 +0x63c\ncreated by github.com/syncthing/syncthing/lib/model.(*Model).AddConnection\n    /Users/jb/src/github.com/syncthing/syncthing/lib/model/model.go:1000 +0x540\n```\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/170589613/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":511237805,"node_id":"MDE3OlJlbmFtZWRUaXRsZUV2ZW50NTExMjM3ODA1","url":"https://api.github.com/repos/syncthing/syncthing/issues/events/511237805","actor":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"renamed","commit_id":null,"commit_url":null,"created_at":"2016-01-11T15:37:18Z","rename":{"from":"Gradual memory leaks... somewhere?","to":"Disconnects leak goroutines (sendIndexes)"},"performed_via_github_app":null},{"id":511240457,"node_id":"MDEyOkxhYmVsZWRFdmVudDUxMTI0MDQ1Nw==","url":"https://api.github.com/repos/syncthing/syncthing/issues/events/511240457","actor":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2016-01-11T15:39:35Z","label":{"name":"bug","color":"fc2929"},"performed_via_github_app":null},{"id":511240510,"node_id":"MDE1Ok1pbGVzdG9uZWRFdmVudDUxMTI0MDUxMA==","url":"https://api.github.com/repos/syncthing/syncthing/issues/events/511240510","actor":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"milestoned","commit_id":null,"commit_url":null,"created_at":"2016-01-11T15:39:37Z","milestone":{"title":"Planned"},"performed_via_github_app":null},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/170590971","html_url":"https://github.com/syncthing/syncthing/issues/2589#issuecomment-170590971","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/2589","id":170590971,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MDU5MDk3MQ==","user":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-11T15:41:38Z","updated_at":"2016-01-11T15:41:38Z","body":"These get cleaned up when there _is_ an index update to send and they notice that the connection is gone. But in an idle state where there are no changes anywhere but a lot of disconnects/connects they can accumulate.\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/170590971/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/170592297","html_url":"https://github.com/syncthing/syncthing/issues/2589#issuecomment-170592297","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/2589","id":170592297,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MDU5MjI5Nw==","user":{"login":"AudriusButkevicius","id":1144861,"node_id":"MDQ6VXNlcjExNDQ4NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1144861?v=4","gravatar_id":"","url":"https://api.github.com/users/AudriusButkevicius","html_url":"https://github.com/AudriusButkevicius","followers_url":"https://api.github.com/users/AudriusButkevicius/followers","following_url":"https://api.github.com/users/AudriusButkevicius/following{/other_user}","gists_url":"https://api.github.com/users/AudriusButkevicius/gists{/gist_id}","starred_url":"https://api.github.com/users/AudriusButkevicius/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AudriusButkevicius/subscriptions","organizations_url":"https://api.github.com/users/AudriusButkevicius/orgs","repos_url":"https://api.github.com/users/AudriusButkevicius/repos","events_url":"https://api.github.com/users/AudriusButkevicius/events{/privacy}","received_events_url":"https://api.github.com/users/AudriusButkevicius/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-11T15:46:43Z","updated_at":"2016-01-11T15:46:43Z","body":"There is a nice tool which processes panics and shows where most of the routines are at which could help is spot more if these if they exist. I know relays were leaking stuff too, that should be fixed now.\n","author_association":"MEMBER","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/170592297/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"AudriusButkevicius","id":1144861,"node_id":"MDQ6VXNlcjExNDQ4NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1144861?v=4","gravatar_id":"","url":"https://api.github.com/users/AudriusButkevicius","html_url":"https://github.com/AudriusButkevicius","followers_url":"https://api.github.com/users/AudriusButkevicius/followers","following_url":"https://api.github.com/users/AudriusButkevicius/following{/other_user}","gists_url":"https://api.github.com/users/AudriusButkevicius/gists{/gist_id}","starred_url":"https://api.github.com/users/AudriusButkevicius/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AudriusButkevicius/subscriptions","organizations_url":"https://api.github.com/users/AudriusButkevicius/orgs","repos_url":"https://api.github.com/users/AudriusButkevicius/repos","events_url":"https://api.github.com/users/AudriusButkevicius/events{/privacy}","received_events_url":"https://api.github.com/users/AudriusButkevicius/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/170596284","html_url":"https://github.com/syncthing/syncthing/issues/2589#issuecomment-170596284","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/2589","id":170596284,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MDU5NjI4NA==","user":{"login":"indrora","id":470584,"node_id":"MDQ6VXNlcjQ3MDU4NA==","avatar_url":"https://avatars.githubusercontent.com/u/470584?v=4","gravatar_id":"","url":"https://api.github.com/users/indrora","html_url":"https://github.com/indrora","followers_url":"https://api.github.com/users/indrora/followers","following_url":"https://api.github.com/users/indrora/following{/other_user}","gists_url":"https://api.github.com/users/indrora/gists{/gist_id}","starred_url":"https://api.github.com/users/indrora/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/indrora/subscriptions","organizations_url":"https://api.github.com/users/indrora/orgs","repos_url":"https://api.github.com/users/indrora/repos","events_url":"https://api.github.com/users/indrora/events{/privacy}","received_events_url":"https://api.github.com/users/indrora/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-11T16:00:10Z","updated_at":"2016-01-11T16:00:10Z","body":"This is especially true if you've got an android device in the cluster, which will tend to leave connections in a half-open state (awaits TCP timeout) due to cellular networks being bad. I had a similar problem in ZNC, which got very confused. \n\nMy cluster consists of two laptops, a phone and a VPS. The VPS instance always has the most memory usage, usually in the 200MB range. The phone regularly gets the second highest usage at ~150MB. The phone eventually will flush out and go to an idle of ~50MB, but will slowly grow again over a few hours.\n\nOn January 11, 2016 8:42:04 AM MST, Jakob Borg notifications@github.com wrote:\n\n> These get cleaned up when there _is_ an index update to send and they\n> notice that the connection is gone. But in an idle state where there\n> are no changes anywhere but a lot of disconnects/connects they can\n> accumulate.\n> \n> ---\n> \n> Reply to this email directly or view it on GitHub:\n> https://github.com/syncthing/syncthing/issues/2589#issuecomment-170590971\n\n## \n\nSent from my Android device with K-9 Mail. Please excuse my brevity.\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/170596284/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"indrora","id":470584,"node_id":"MDQ6VXNlcjQ3MDU4NA==","avatar_url":"https://avatars.githubusercontent.com/u/470584?v=4","gravatar_id":"","url":"https://api.github.com/users/indrora","html_url":"https://github.com/indrora","followers_url":"https://api.github.com/users/indrora/followers","following_url":"https://api.github.com/users/indrora/following{/other_user}","gists_url":"https://api.github.com/users/indrora/gists{/gist_id}","starred_url":"https://api.github.com/users/indrora/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/indrora/subscriptions","organizations_url":"https://api.github.com/users/indrora/orgs","repos_url":"https://api.github.com/users/indrora/repos","events_url":"https://api.github.com/users/indrora/events{/privacy}","received_events_url":"https://api.github.com/users/indrora/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":511387630,"node_id":"MDExOkNsb3NlZEV2ZW50NTExMzg3NjMw","url":"https://api.github.com/repos/syncthing/syncthing/issues/events/511387630","actor":{"login":"AudriusButkevicius","id":1144861,"node_id":"MDQ6VXNlcjExNDQ4NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1144861?v=4","gravatar_id":"","url":"https://api.github.com/users/AudriusButkevicius","html_url":"https://github.com/AudriusButkevicius","followers_url":"https://api.github.com/users/AudriusButkevicius/followers","following_url":"https://api.github.com/users/AudriusButkevicius/following{/other_user}","gists_url":"https://api.github.com/users/AudriusButkevicius/gists{/gist_id}","starred_url":"https://api.github.com/users/AudriusButkevicius/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AudriusButkevicius/subscriptions","organizations_url":"https://api.github.com/users/AudriusButkevicius/orgs","repos_url":"https://api.github.com/users/AudriusButkevicius/repos","events_url":"https://api.github.com/users/AudriusButkevicius/events{/privacy}","received_events_url":"https://api.github.com/users/AudriusButkevicius/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"closed","commit_id":"acdddc0b794c825000a7c85b76444b024a307433","commit_url":"https://api.github.com/repos/syncthing/syncthing/commits/acdddc0b794c825000a7c85b76444b024a307433","created_at":"2016-01-11T17:34:55Z","state_reason":null,"performed_via_github_app":null},{"id":511387636,"node_id":"MDE1OlJlZmVyZW5jZWRFdmVudDUxMTM4NzYzNg==","url":"https://api.github.com/repos/syncthing/syncthing/issues/events/511387636","actor":{"login":"AudriusButkevicius","id":1144861,"node_id":"MDQ6VXNlcjExNDQ4NjE=","avatar_url":"https://avatars.githubusercontent.com/u/1144861?v=4","gravatar_id":"","url":"https://api.github.com/users/AudriusButkevicius","html_url":"https://github.com/AudriusButkevicius","followers_url":"https://api.github.com/users/AudriusButkevicius/followers","following_url":"https://api.github.com/users/AudriusButkevicius/following{/other_user}","gists_url":"https://api.github.com/users/AudriusButkevicius/gists{/gist_id}","starred_url":"https://api.github.com/users/AudriusButkevicius/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/AudriusButkevicius/subscriptions","organizations_url":"https://api.github.com/users/AudriusButkevicius/orgs","repos_url":"https://api.github.com/users/AudriusButkevicius/repos","events_url":"https://api.github.com/users/AudriusButkevicius/events{/privacy}","received_events_url":"https://api.github.com/users/AudriusButkevicius/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"referenced","commit_id":"7427b9de35fc228d438aff2b819a6634036e2c97","commit_url":"https://api.github.com/repos/syncthing/syncthing/commits/7427b9de35fc228d438aff2b819a6634036e2c97","created_at":"2016-01-11T17:34:55Z","performed_via_github_app":null},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/170655212","html_url":"https://github.com/syncthing/syncthing/issues/2589#issuecomment-170655212","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/2589","id":170655212,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MDY1NTIxMg==","user":{"login":"Stebalien","id":310393,"node_id":"MDQ6VXNlcjMxMDM5Mw==","avatar_url":"https://avatars.githubusercontent.com/u/310393?v=4","gravatar_id":"","url":"https://api.github.com/users/Stebalien","html_url":"https://github.com/Stebalien","followers_url":"https://api.github.com/users/Stebalien/followers","following_url":"https://api.github.com/users/Stebalien/following{/other_user}","gists_url":"https://api.github.com/users/Stebalien/gists{/gist_id}","starred_url":"https://api.github.com/users/Stebalien/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Stebalien/subscriptions","organizations_url":"https://api.github.com/users/Stebalien/orgs","repos_url":"https://api.github.com/users/Stebalien/repos","events_url":"https://api.github.com/users/Stebalien/events{/privacy}","received_events_url":"https://api.github.com/users/Stebalien/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-11T19:07:56Z","updated_at":"2016-01-11T19:07:56Z","body":"> Are you seeing a lot of reconnects going on for some reason?\n\nI haven't checked but this seems likely; my android phone is a part of my cluster.\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/170655212/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"Stebalien","id":310393,"node_id":"MDQ6VXNlcjMxMDM5Mw==","avatar_url":"https://avatars.githubusercontent.com/u/310393?v=4","gravatar_id":"","url":"https://api.github.com/users/Stebalien","html_url":"https://github.com/Stebalien","followers_url":"https://api.github.com/users/Stebalien/followers","following_url":"https://api.github.com/users/Stebalien/following{/other_user}","gists_url":"https://api.github.com/users/Stebalien/gists{/gist_id}","starred_url":"https://api.github.com/users/Stebalien/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Stebalien/subscriptions","organizations_url":"https://api.github.com/users/Stebalien/orgs","repos_url":"https://api.github.com/users/Stebalien/repos","events_url":"https://api.github.com/users/Stebalien/events{/privacy}","received_events_url":"https://api.github.com/users/Stebalien/received_events","type":"User","user_view_type":"public","site_admin":false}},{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/170660516","html_url":"https://github.com/syncthing/syncthing/issues/2589#issuecomment-170660516","issue_url":"https://api.github.com/repos/syncthing/syncthing/issues/2589","id":170660516,"node_id":"MDEyOklzc3VlQ29tbWVudDE3MDY2MDUxNg==","user":{"login":"indrora","id":470584,"node_id":"MDQ6VXNlcjQ3MDU4NA==","avatar_url":"https://avatars.githubusercontent.com/u/470584?v=4","gravatar_id":"","url":"https://api.github.com/users/indrora","html_url":"https://github.com/indrora","followers_url":"https://api.github.com/users/indrora/followers","following_url":"https://api.github.com/users/indrora/following{/other_user}","gists_url":"https://api.github.com/users/indrora/gists{/gist_id}","starred_url":"https://api.github.com/users/indrora/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/indrora/subscriptions","organizations_url":"https://api.github.com/users/indrora/orgs","repos_url":"https://api.github.com/users/indrora/repos","events_url":"https://api.github.com/users/indrora/events{/privacy}","received_events_url":"https://api.github.com/users/indrora/received_events","type":"User","user_view_type":"public","site_admin":false},"created_at":"2016-01-11T19:20:32Z","updated_at":"2016-01-11T19:20:32Z","body":"When I pause my phone on my VPS and relegate my phone to WiFi only, RAM usage stays consistent. This confirms that the interaction of Android devices (or other devices on a cellfi connection) that move between networks regularly causes half open or idle connections to eat memory.\n\nOn January 11, 2016 12:08:25 PM MST, Steven Allen notifications@github.com wrote:\n\n> > Are you seeing a lot of reconnects going on for some reason?\n> \n> I haven't checked but this seems likely; my android phone is a part of\n> my cluster.\n> \n> ---\n> \n> Reply to this email directly or view it on GitHub:\n> https://github.com/syncthing/syncthing/issues/2589#issuecomment-170655212\n\n## \n\nSent from my Android device with K-9 Mail. Please excuse my brevity.\n","author_association":"NONE","reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/comments/170660516/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"performed_via_github_app":null,"event":"commented","actor":{"login":"indrora","id":470584,"node_id":"MDQ6VXNlcjQ3MDU4NA==","avatar_url":"https://avatars.githubusercontent.com/u/470584?v=4","gravatar_id":"","url":"https://api.github.com/users/indrora","html_url":"https://github.com/indrora","followers_url":"https://api.github.com/users/indrora/followers","following_url":"https://api.github.com/users/indrora/following{/other_user}","gists_url":"https://api.github.com/users/indrora/gists{/gist_id}","starred_url":"https://api.github.com/users/indrora/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/indrora/subscriptions","organizations_url":"https://api.github.com/users/indrora/orgs","repos_url":"https://api.github.com/users/indrora/repos","events_url":"https://api.github.com/users/indrora/events{/privacy}","received_events_url":"https://api.github.com/users/indrora/received_events","type":"User","user_view_type":"public","site_admin":false}},{"id":1127508814,"node_id":"MDEyOkxhYmVsZWRFdmVudDExMjc1MDg4MTQ=","url":"https://api.github.com/repos/syncthing/syncthing/issues/events/1127508814","actor":{"login":"st-review","id":16196517,"node_id":"MDQ6VXNlcjE2MTk2NTE3","avatar_url":"https://avatars.githubusercontent.com/u/16196517?v=4","gravatar_id":"","url":"https://api.github.com/users/st-review","html_url":"https://github.com/st-review","followers_url":"https://api.github.com/users/st-review/followers","following_url":"https://api.github.com/users/st-review/following{/other_user}","gists_url":"https://api.github.com/users/st-review/gists{/gist_id}","starred_url":"https://api.github.com/users/st-review/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/st-review/subscriptions","organizations_url":"https://api.github.com/users/st-review/orgs","repos_url":"https://api.github.com/users/st-review/repos","events_url":"https://api.github.com/users/st-review/events{/privacy}","received_events_url":"https://api.github.com/users/st-review/received_events","type":"User","user_view_type":"public","site_admin":false},"event":"labeled","commit_id":null,"commit_url":null,"created_at":"2017-06-16T21:03:31Z","label":{"name":"frozen-due-to-age","color":"c2e0c6"},"performed_via_github_app":null},{"id":1127508816,"node_id":"MDExOkxvY2tlZEV2ZW50MTEyNzUwODgxNg==","url":"https://api.github.com/repos/syncthing/syncthing/issues/events/1127508816","actor":{"login":"syncthing","id":7628018,"node_id":"MDEyOk9yZ2FuaXphdGlvbjc2MjgwMTg=","avatar_url":"https://avatars.githubusercontent.com/u/7628018?v=4","gravatar_id":"","url":"https://api.github.com/users/syncthing","html_url":"https://github.com/syncthing","followers_url":"https://api.github.com/users/syncthing/followers","following_url":"https://api.github.com/users/syncthing/following{/other_user}","gists_url":"https://api.github.com/users/syncthing/gists{/gist_id}","starred_url":"https://api.github.com/users/syncthing/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/syncthing/subscriptions","organizations_url":"https://api.github.com/users/syncthing/orgs","repos_url":"https://api.github.com/users/syncthing/repos","events_url":"https://api.github.com/users/syncthing/events{/privacy}","received_events_url":"https://api.github.com/users/syncthing/received_events","type":"Organization","user_view_type":"public","site_admin":false},"event":"locked","commit_id":null,"commit_url":null,"created_at":"2017-06-16T21:03:32Z","lock_reason":null,"performed_via_github_app":null}]