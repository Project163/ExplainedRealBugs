{"url":"https://api.github.com/repos/syncthing/syncthing/issues/6823","repository_url":"https://api.github.com/repos/syncthing/syncthing","labels_url":"https://api.github.com/repos/syncthing/syncthing/issues/6823/labels{/name}","comments_url":"https://api.github.com/repos/syncthing/syncthing/issues/6823/comments","events_url":"https://api.github.com/repos/syncthing/syncthing/issues/6823/events","html_url":"https://github.com/syncthing/syncthing/issues/6823","id":653809618,"node_id":"MDU6SXNzdWU2NTM4MDk2MTg=","number":6823,"title":"Syncthing 1.7.0 performs UPnP with NAT traversal disabled","user":{"login":"sgr78","id":68032548,"node_id":"MDQ6VXNlcjY4MDMyNTQ4","avatar_url":"https://avatars.githubusercontent.com/u/68032548?v=4","gravatar_id":"","url":"https://api.github.com/users/sgr78","html_url":"https://github.com/sgr78","followers_url":"https://api.github.com/users/sgr78/followers","following_url":"https://api.github.com/users/sgr78/following{/other_user}","gists_url":"https://api.github.com/users/sgr78/gists{/gist_id}","starred_url":"https://api.github.com/users/sgr78/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/sgr78/subscriptions","organizations_url":"https://api.github.com/users/sgr78/orgs","repos_url":"https://api.github.com/users/sgr78/repos","events_url":"https://api.github.com/users/sgr78/events{/privacy}","received_events_url":"https://api.github.com/users/sgr78/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":67767665,"node_id":"MDU6TGFiZWw2Nzc2NzY2NQ==","url":"https://api.github.com/repos/syncthing/syncthing/labels/bug","name":"bug","color":"d93f0b","default":true,"description":"A problem with current functionality, as opposed to missing functionality (enhancement)"},{"id":628314330,"node_id":"MDU6TGFiZWw2MjgzMTQzMzA=","url":"https://api.github.com/repos/syncthing/syncthing/labels/frozen-due-to-age","name":"frozen-due-to-age","color":"eeeeee","default":false,"description":"Issues closed and untouched for a long time, together with being locked for discussion"}],"state":"closed","locked":true,"assignee":{"login":"imsodin","id":15955093,"node_id":"MDQ6VXNlcjE1OTU1MDkz","avatar_url":"https://avatars.githubusercontent.com/u/15955093?v=4","gravatar_id":"","url":"https://api.github.com/users/imsodin","html_url":"https://github.com/imsodin","followers_url":"https://api.github.com/users/imsodin/followers","following_url":"https://api.github.com/users/imsodin/following{/other_user}","gists_url":"https://api.github.com/users/imsodin/gists{/gist_id}","starred_url":"https://api.github.com/users/imsodin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imsodin/subscriptions","organizations_url":"https://api.github.com/users/imsodin/orgs","repos_url":"https://api.github.com/users/imsodin/repos","events_url":"https://api.github.com/users/imsodin/events{/privacy}","received_events_url":"https://api.github.com/users/imsodin/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"imsodin","id":15955093,"node_id":"MDQ6VXNlcjE1OTU1MDkz","avatar_url":"https://avatars.githubusercontent.com/u/15955093?v=4","gravatar_id":"","url":"https://api.github.com/users/imsodin","html_url":"https://github.com/imsodin","followers_url":"https://api.github.com/users/imsodin/followers","following_url":"https://api.github.com/users/imsodin/following{/other_user}","gists_url":"https://api.github.com/users/imsodin/gists{/gist_id}","starred_url":"https://api.github.com/users/imsodin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imsodin/subscriptions","organizations_url":"https://api.github.com/users/imsodin/orgs","repos_url":"https://api.github.com/users/imsodin/repos","events_url":"https://api.github.com/users/imsodin/events{/privacy}","received_events_url":"https://api.github.com/users/imsodin/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/syncthing/syncthing/milestones/51","html_url":"https://github.com/syncthing/syncthing/milestone/51","labels_url":"https://api.github.com/repos/syncthing/syncthing/milestones/51/labels","id":5546853,"node_id":"MDk6TWlsZXN0b25lNTU0Njg1Mw==","number":51,"title":"v1.8.0","description":"This release:\r\n\r\n- adds the experimental `copyRangeMethod` config on folders, for use on filesystems with copy-on-write support. Please see https://docs.syncthing.net/advanced/folder-copyrangemethod.html for details.\r\n\r\n- adds TCP hole punching, used to establish high performance TCP connections in certain NAT scenarios where only relay or QUIC connections could be used previously.\r\n\r\n- adds a configuration to file versioning for how often to run cleanup. This defaults to once an hour, but is configurable from very frequently to never.","creator":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":71,"state":"closed","created_at":"2020-06-16T13:44:35Z","updated_at":"2020-08-11T09:10:41Z","due_on":"2020-08-18T07:00:00Z","closed_at":"2020-08-11T09:10:41Z"},"comments":3,"created_at":"2020-07-09T06:48:20Z","updated_at":"2021-07-14T07:02:33Z","closed_at":"2020-07-14T06:16:10Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"- Syncthing Version: 1.7.0\r\n- Browser: Any\r\n- What Happens:\r\n>Syncthing Settings --> Connections Tab\r\n>Sync Protocol Listen Address: default\r\n>Unticked/Disabled: Enable NAT Traversal, Global Discovery, Enable Relaying\r\n>Ticked/Enabled: Local Discovery\r\nSyncthing whilst only Local Discovery is enabled will use UPNP and commit port forwarding as If nothing was enforced (Only Local Discovery enabed) .\r\n\r\n - What you expected to happen instead:\r\nSetting only Local Discovery and keeping Disabled Enable NAT Traversal, Global Discovery, Enable Relaying\r\nSyncthing was only limited within the bounds of internal network and never acted on Its own and/or tried to open any outside ports (port forward).\r\n\r\nThis issue happens on all Syncthing 1.7.0 flavours (Linux, Android etc)\r\nAll devices are mass opening ports by means of UPNP with outside world even though ONLY Local Discovery is the only setting enabled.\r\n\r\nDisabling Completely TCP in \"Sync Protocol Listen Address\" and having only quic enabled\r\nmeaning: Sync Protocol Listen Address: From default To quic://0.0.0.0:22000 or quic://10.11.10.xx \r\nthus specifying ONLY quick mitigates Issue of forced port forwarding/opening outside ports/use of UPNP even though \"Local Discovery\" is the only setting in Enabled state.\r\n\r\nWhat’s the point of having a “Local Discovery” setting if It keeps port forwarding/opening outside ports/uses UPNP.\r\n\r\n - any steps to reproduce the problem:\r\n>Clean Install Syncthing (I did this twice)\r\n>Syncthing Settings --> Connections Tab\r\n>Sync Protocol Listen Address: default\r\n>Unticked/Disabled: Enable NAT Traversal, Global Discovery, Enable Relaying\r\n>Ticked/Enabled: Local Discovery\r\n>Restart If necessary Syncthing and observe for any open ports","closed_by":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/6823/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/syncthing/syncthing/issues/6823/timeline","performed_via_github_app":null,"state_reason":"completed"}