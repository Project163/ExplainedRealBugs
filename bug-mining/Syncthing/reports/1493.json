{"url":"https://api.github.com/repos/syncthing/syncthing/issues/10240","repository_url":"https://api.github.com/repos/syncthing/syncthing","labels_url":"https://api.github.com/repos/syncthing/syncthing/issues/10240/labels{/name}","comments_url":"https://api.github.com/repos/syncthing/syncthing/issues/10240/comments","events_url":"https://api.github.com/repos/syncthing/syncthing/issues/10240/events","html_url":"https://github.com/syncthing/syncthing/issues/10240","id":3314835747,"node_id":"I_kwDOAOCAEs7FlGEj","number":10240,"title":"'syncthing upgrade' fails if lockfile does not exist","user":{"login":"GermanCoding","id":4279661,"node_id":"MDQ6VXNlcjQyNzk2NjE=","avatar_url":"https://avatars.githubusercontent.com/u/4279661?v=4","gravatar_id":"","url":"https://api.github.com/users/GermanCoding","html_url":"https://github.com/GermanCoding","followers_url":"https://api.github.com/users/GermanCoding/followers","following_url":"https://api.github.com/users/GermanCoding/following{/other_user}","gists_url":"https://api.github.com/users/GermanCoding/gists{/gist_id}","starred_url":"https://api.github.com/users/GermanCoding/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/GermanCoding/subscriptions","organizations_url":"https://api.github.com/users/GermanCoding/orgs","repos_url":"https://api.github.com/users/GermanCoding/repos","events_url":"https://api.github.com/users/GermanCoding/events{/privacy}","received_events_url":"https://api.github.com/users/GermanCoding/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":67767665,"node_id":"MDU6TGFiZWw2Nzc2NzY2NQ==","url":"https://api.github.com/repos/syncthing/syncthing/labels/bug","name":"bug","color":"d93f0b","default":true,"description":"A problem with current functionality, as opposed to missing functionality (enhancement)"}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/syncthing/syncthing/milestones/123","html_url":"https://github.com/syncthing/syncthing/milestone/123","labels_url":"https://api.github.com/repos/syncthing/syncthing/milestones/123/labels","id":13477220,"node_id":"MI_kwDOAOCAEs4AzaVk","number":123,"title":"v2.0.1","description":"","creator":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":8,"state":"closed","created_at":"2025-08-12T16:44:28Z","updated_at":"2025-08-15T13:11:28Z","due_on":"2025-08-26T07:00:00Z","closed_at":"2025-08-15T13:11:28Z"},"comments":0,"created_at":"2025-08-12T15:34:50Z","updated_at":"2025-08-12T16:44:58Z","closed_at":"2025-08-12T16:44:58Z","author_association":"CONTRIBUTOR","type":{"id":818058,"node_id":"IT_kwDOAHRk8s4ADHuK","name":"Bug","description":"An unexpected problem or behavior","color":"red","created_at":"2024-01-25T10:48:46Z","updated_at":"2024-07-26T10:15:52Z","is_enabled":true},"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"### What happened?\n\nNoticed the following failure in CI:\n\n```\nRunning Syncthing upgrade...\n2025/08/12 15:19:54 INFO: Upgrade available (current \"v2.0.0-rc.23\" < latest \"v2.0.0\")\n2025/08/12 15:19:54 WARNING: Upgrade: open C:\\Users\\runneradmin\\AppData\\Local\\Syncthing\\syncthing.lock: The system cannot find the path specified.\nSyncthing upgrade failed with exit code 1.\n```\n\nThe CI simply does `syncthing upgrade` without any syncthing being installed, e.g. there is no config, no lockfile, nothing. In this case, it appears that syncthing fails to upgrade, as it expects the lockfile to already exist.\n\n### Syncthing version\n\nv2.0.0-rc.23\n\n### Platform & operating system\n\nWindows amd64\n\n### Browser version\n\n_No response_\n\n### Relevant log output\n\n```shell\n2025/08/12 15:19:54 INFO: Upgrade available (current \"v2.0.0-rc.23\" < latest \"v2.0.0\")\n2025/08/12 15:19:54 WARNING: Upgrade: open C:\\Users\\runneradmin\\AppData\\Local\\Syncthing\\syncthing.lock: The system cannot find the path specified.\n```","closed_by":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/10240/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/syncthing/syncthing/issues/10240/timeline","performed_via_github_app":null,"state_reason":"completed"}