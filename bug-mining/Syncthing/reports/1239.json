{"url":"https://api.github.com/repos/syncthing/syncthing/issues/7594","repository_url":"https://api.github.com/repos/syncthing/syncthing","labels_url":"https://api.github.com/repos/syncthing/syncthing/issues/7594/labels{/name}","comments_url":"https://api.github.com/repos/syncthing/syncthing/issues/7594/comments","events_url":"https://api.github.com/repos/syncthing/syncthing/issues/7594/events","html_url":"https://github.com/syncthing/syncthing/issues/7594","id":865934912,"node_id":"MDU6SXNzdWU4NjU5MzQ5MTI=","number":7594,"title":"Consider removing support for TLS <1.3 on sync connections","user":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":67767667,"node_id":"MDU6TGFiZWw2Nzc2NzY2Nw==","url":"https://api.github.com/repos/syncthing/syncthing/labels/enhancement","name":"enhancement","color":"0e8a16","default":true,"description":"New features or improvements of some kind, as opposed to a problem (bug)"},{"id":628314330,"node_id":"MDU6TGFiZWw2MjgzMTQzMzA=","url":"https://api.github.com/repos/syncthing/syncthing/labels/frozen-due-to-age","name":"frozen-due-to-age","color":"eeeeee","default":false,"description":"Issues closed and untouched for a long time, together with being locked for discussion"}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/syncthing/syncthing/milestones/65","html_url":"https://github.com/syncthing/syncthing/milestone/65","labels_url":"https://api.github.com/repos/syncthing/syncthing/milestones/65/labels","id":6699525,"node_id":"MDk6TWlsZXN0b25lNjY5OTUyNQ==","number":65,"title":"v1.17.0","description":"This release deprecates TLS 1.2 for sync connections; other side should be Syncthing 1.3.0 or newer, or see [insecureAllowOldTLSVersions](https://docs.syncthing.net/advanced/option-insecure-allow-old-tls-versions.html).","creator":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"open_issues":0,"closed_issues":58,"state":"closed","created_at":"2021-04-26T13:40:14Z","updated_at":"2021-06-01T14:11:34Z","due_on":"2021-06-01T07:00:00Z","closed_at":"2021-06-01T14:11:34Z"},"comments":7,"created_at":"2021-04-23T09:34:13Z","updated_at":"2022-08-11T07:15:04Z","closed_at":"2021-04-26T08:04:42Z","author_association":"MEMBER","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Historically we've been fairly aggressive about adopting and then mandating secure crypto on the connection. TLS 1.2 is still alive and well, but we have a lot of cipher suite magic to ensure we get a secure connection. We could remove all that, simplifying our TLS config, and say that sync connections (*not* GUI/API connections) are now TLS 1.3 only.\r\n\r\nThe oldest Syncthing release that understands TLS 1.3 is 1.3.0 from October 1, 2019. By current data.s.n measurements we have ~94.6% of the population on 1.3.0 or newer. I would expect that those who do run old versions probably do that for a reason and probably do it somewhat consistently as well (that is, old talking to old rather than old talking to newest). Connections to older devices will be break with `Listen (BEP/tcp): TLS handshake: tls: client offered only unsupported versions: [303]`. (\"303\" is TLS 1.2, the other side will say the same but about \"304\" (TLS 1.3) instead.)\r\n\r\nI'm not aware of any non-Syncthing BEP implementations we would need to be compatible with.\r\n\r\nNonetheless it would be the first intentional compatibility break for a long time, and in theory would require a Syncthing 2.0 release. (I *don't* think we should do a 2.0, because that would imply incompatibility with 1.3.0+ as well.) We could also retain the TLS 1.2 uglyness hidden behind a feature flag or environment var as a bailout for a while.\r\n\r\nref #7593","closed_by":{"login":"imsodin","id":15955093,"node_id":"MDQ6VXNlcjE1OTU1MDkz","avatar_url":"https://avatars.githubusercontent.com/u/15955093?v=4","gravatar_id":"","url":"https://api.github.com/users/imsodin","html_url":"https://github.com/imsodin","followers_url":"https://api.github.com/users/imsodin/followers","following_url":"https://api.github.com/users/imsodin/following{/other_user}","gists_url":"https://api.github.com/users/imsodin/gists{/gist_id}","starred_url":"https://api.github.com/users/imsodin/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/imsodin/subscriptions","organizations_url":"https://api.github.com/users/imsodin/orgs","repos_url":"https://api.github.com/users/imsodin/repos","events_url":"https://api.github.com/users/imsodin/events{/privacy}","received_events_url":"https://api.github.com/users/imsodin/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/7594/reactions","total_count":2,"+1":1,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":1,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/syncthing/syncthing/issues/7594/timeline","performed_via_github_app":null,"state_reason":"completed"}