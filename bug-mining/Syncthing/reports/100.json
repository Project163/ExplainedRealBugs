{"url":"https://api.github.com/repos/syncthing/syncthing/issues/917","repository_url":"https://api.github.com/repos/syncthing/syncthing","labels_url":"https://api.github.com/repos/syncthing/syncthing/issues/917/labels{/name}","comments_url":"https://api.github.com/repos/syncthing/syncthing/issues/917/comments","events_url":"https://api.github.com/repos/syncthing/syncthing/issues/917/events","html_url":"https://github.com/syncthing/syncthing/issues/917","id":47044739,"node_id":"MDU6SXNzdWU0NzA0NDczOQ==","number":917,"title":"When clicking adding new device: panic 2014/10/28 17:01:41 http: panic serving 127.0.0.1:40289: runtime error: invalid memory address or nil pointer dereference","user":{"login":"lordfolken","id":407371,"node_id":"MDQ6VXNlcjQwNzM3MQ==","avatar_url":"https://avatars.githubusercontent.com/u/407371?v=4","gravatar_id":"","url":"https://api.github.com/users/lordfolken","html_url":"https://github.com/lordfolken","followers_url":"https://api.github.com/users/lordfolken/followers","following_url":"https://api.github.com/users/lordfolken/following{/other_user}","gists_url":"https://api.github.com/users/lordfolken/gists{/gist_id}","starred_url":"https://api.github.com/users/lordfolken/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lordfolken/subscriptions","organizations_url":"https://api.github.com/users/lordfolken/orgs","repos_url":"https://api.github.com/users/lordfolken/repos","events_url":"https://api.github.com/users/lordfolken/events{/privacy}","received_events_url":"https://api.github.com/users/lordfolken/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":67767665,"node_id":"MDU6TGFiZWw2Nzc2NzY2NQ==","url":"https://api.github.com/repos/syncthing/syncthing/labels/bug","name":"bug","color":"d93f0b","default":true,"description":"A problem with current functionality, as opposed to missing functionality (enhancement)"},{"id":628314330,"node_id":"MDU6TGFiZWw2MjgzMTQzMzA=","url":"https://api.github.com/repos/syncthing/syncthing/labels/frozen-due-to-age","name":"frozen-due-to-age","color":"eeeeee","default":false,"description":"Issues closed and untouched for a long time, together with being locked for discussion"}],"state":"closed","locked":true,"assignee":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"assignees":[{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false}],"milestone":null,"comments":1,"created_at":"2014-10-28T16:03:12Z","updated_at":"2017-06-16T21:11:32Z","closed_at":"2014-10-28T19:40:08Z","author_association":"NONE","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Hi, \n\nI have removed both the sync directory and the config directory and recieve the following panic when trying to add a new device via the web dialog. Commit is current: 08e7ada242cfda59ea4bd9f421bda39cbb236bfa\n\n[monitor] 17:01:34 INFO: Starting syncthing\n17:01:34 INFO: Generating RSA key and certificate...\n[II7S5] 17:01:35 INFO: syncthing v0.10.4 (go1.3.2 linux-amd64 default) folken@work-node 2014-10-27 14:05:16 UTC\n[II7S5] 17:01:35 INFO: My ID: II7S5L5-RH3HH3D-SGPNI5J-G5BV5KI-S4GYBIY-IY4IO3V-DBD6JAW-KGYTYAN\n[II7S5] 17:01:35 INFO: No config file; starting with empty defaults\n[II7S5] 17:01:35 INFO: Edit /home/folken/.config/syncthing/config.xml to taste or use the GUI\n[II7S5] 17:01:35 INFO: Starting web GUI on http://127.0.0.1:8080/\n[II7S5] 17:01:35 INFO: Loading HTTPS certificate: open /home/folken/.config/syncthing/https-cert.pem: no such file or directory\n[II7S5] 17:01:35 INFO: Creating new HTTPS certificate\n[II7S5] 17:01:35 INFO: Generating RSA key and certificate...\n2014/10/28 17:01:41 http: panic serving 127.0.0.1:40289: runtime error: invalid memory address or nil pointer dereference\ngoroutine 64 [running]:\nnet/http.func·011()\n    /usr/lib/go/src/pkg/net/http/server.go:1100 +0xb7\nruntime.panic(0x926b00, 0xd30dd3)\n    /usr/lib/go/src/pkg/runtime/panic.c:248 +0x18d\ngithub.com/syncthing/syncthing/internal/discover.(_Discoverer).All(0x0, 0x9b9b10)\n    /home/folken/src/github.com/syncthing/syncthing/internal/discover/discover.go:173 +0x2cb\nmain.restGetDiscovery(0x7f52a4716b50, 0xc2086ed040, 0xc2088621a0)\n    /home/folken/src/github.com/syncthing/syncthing/cmd/syncthing/gui.go:456 +0x88\nnet/http.HandlerFunc.ServeHTTP(0xabd5c8, 0x7f52a4716b50, 0xc2086ed040, 0xc2088621a0)\n    /usr/lib/go/src/pkg/net/http/server.go:1235 +0x40\nnet/http.(_ServeMux).ServeHTTP(0xc208023f80, 0x7f52a4716b50, 0xc2086ed040, 0xc2088621a0)\n    /usr/lib/go/src/pkg/net/http/server.go:1511 +0x1a3\nmain.func·002(0x7f52a4716b50, 0xc2086ed040, 0xc2088621a0)\n    /home/folken/src/github.com/syncthing/syncthing/cmd/syncthing/gui.go:176 +0xcd\nnet/http.HandlerFunc.ServeHTTP(0xc2086247a0, 0x7f52a4716b50, 0xc2086ed040, 0xc2088621a0)\n    /usr/lib/go/src/pkg/net/http/server.go:1235 +0x40\nmain.func·004(0x7f52a4716b50, 0xc2086ed040, 0xc2088621a0)\n    /home/folken/src/github.com/syncthing/syncthing/cmd/syncthing/gui.go:205 +0xad\nnet/http.HandlerFunc.ServeHTTP(0xc208001540, 0x7f52a4716b50, 0xc2086ed040, 0xc2088621a0)\n    /usr/lib/go/src/pkg/net/http/server.go:1235 +0x40\nnet/http.(_ServeMux).ServeHTTP(0xc2080fe060, 0x7f52a4716b50, 0xc2086ed040, 0xc2088621a0)\n    /usr/lib/go/src/pkg/net/http/server.go:1511 +0x1a3\nmain.func·010(0x7f52a4716b50, 0xc2086ed040, 0xc2088621a0)\n    /home/folken/src/github.com/syncthing/syncthing/cmd/syncthing/gui_csrf.go:64 +0x3e8\nnet/http.HandlerFunc.ServeHTTP(0xc20810d5e0, 0x7f52a4716b50, 0xc2086ed040, 0xc2088621a0)\n    /usr/lib/go/src/pkg/net/http/server.go:1235 +0x40\nmain.func·005(0x7f52a4716b50, 0xc2086ed040, 0xc2088621a0)\n    /home/folken/src/github.com/syncthing/syncthing/cmd/syncthing/gui.go:212 +0xb0\nnet/http.HandlerFunc.ServeHTTP(0xc208000e80, 0x7f52a4716b50, 0xc2086ed040, 0xc2088621a0)\n    /usr/lib/go/src/pkg/net/http/server.go:1235 +0x40\nnet/http.serverHandler.ServeHTTP(0xc208004480, 0x7f52a4716b50, 0xc2086ed040, 0xc2088621a0)\n    /usr/lib/go/src/pkg/net/http/server.go:1673 +0x19f\nnet/http.(_conn).serve(0xc208046300)\n    /usr/lib/go/src/pkg/net/http/server.go:1174 +0xa7e\ncreated by net/http.(_Server).Serve\n    /usr/lib/go/src/pkg/net/http/server.go:1721 +0x313\n2014/10/28 17:01:41 http: panic serving 127.0.0.1:40303: runtime error: invalid memory address or nil pointer dereference\ngoroutine 71 [running]:\nnet/http.func·011()\n    /usr/lib/go/src/pkg/net/http/server.go:1100 +0xb7\nruntime.panic(0x926b00, 0xd30dd3)\n    /usr/lib/go/src/pkg/runtime/panic.c:248 +0x18d\ngithub.com/syncthing/syncthing/internal/discover.(_Discoverer).All(0x0, 0x9b9b10)\n    /home/folken/src/github.com/syncthing/syncthing/internal/discover/discover.go:173 +0x2cb\nmain.restGetDiscovery(0x7f52a4716b50, 0xc208048be0, 0xc208862340)\n    /home/folken/src/github.com/syncthing/syncthing/cmd/syncthing/gui.go:456 +0x88\nnet/http.HandlerFunc.ServeHTTP(0xabd5c8, 0x7f52a4716b50, 0xc208048be0, 0xc208862340)\n    /usr/lib/go/src/pkg/net/http/server.go:1235 +0x40\nnet/http.(_ServeMux).ServeHTTP(0xc208023f80, 0x7f52a4716b50, 0xc208048be0, 0xc208862340)\n    /usr/lib/go/src/pkg/net/http/server.go:1511 +0x1a3\nmain.func·002(0x7f52a4716b50, 0xc208048be0, 0xc208862340)\n    /home/folken/src/github.com/syncthing/syncthing/cmd/syncthing/gui.go:176 +0xcd\nnet/http.HandlerFunc.ServeHTTP(0xc2086247a0, 0x7f52a4716b50, 0xc208048be0, 0xc208862340)\n    /usr/lib/go/src/pkg/net/http/server.go:1235 +0x40\nmain.func·004(0x7f52a4716b50, 0xc208048be0, 0xc208862340)\n    /home/folken/src/github.com/syncthing/syncthing/cmd/syncthing/gui.go:205 +0xad\nnet/http.HandlerFunc.ServeHTTP(0xc208001540, 0x7f52a4716b50, 0xc208048be0, 0xc208862340)\n    /usr/lib/go/src/pkg/net/http/server.go:1235 +0x40\nnet/http.(_ServeMux).ServeHTTP(0xc2080fe060, 0x7f52a4716b50, 0xc208048be0, 0xc208862340)\n    /usr/lib/go/src/pkg/net/http/server.go:1511 +0x1a3\nmain.func·010(0x7f52a4716b50, 0xc208048be0, 0xc208862340)\n    /home/folken/src/github.com/syncthing/syncthing/cmd/syncthing/gui_csrf.go:64 +0x3e8\nnet/http.HandlerFunc.ServeHTTP(0xc20810d5e0, 0x7f52a4716b50, 0xc208048be0, 0xc208862340)\n    /usr/lib/go/src/pkg/net/http/server.go:1235 +0x40\nmain.func·005(0x7f52a4716b50, 0xc208048be0, 0xc208862340)\n    /home/folken/src/github.com/syncthing/syncthing/cmd/syncthing/gui.go:212 +0xb0\nnet/http.HandlerFunc.ServeHTTP(0xc208000e80, 0x7f52a4716b50, 0xc208048be0, 0xc208862340)\n    /usr/lib/go/src/pkg/net/http/server.go:1235 +0x40\nnet/http.serverHandler.ServeHTTP(0xc208004480, 0x7f52a4716b50, 0xc208048be0, 0xc208862340)\n    /usr/lib/go/src/pkg/net/http/server.go:1673 +0x19f\nnet/http.(_conn).serve(0xc2088c0280)\n    /usr/lib/go/src/pkg/net/http/server.go:1174 +0xa7e\ncreated by net/http.(_Server).Serve\n    /usr/lib/go/src/pkg/net/http/server.go:1721 +0x313\n2014/10/28 17:01:41 http: panic serving 127.0.0.1:40304: runtime error: invalid memory address or nil pointer dereference\ngoroutine 63 [running]:\nnet/http.func·011()\n    /usr/lib/go/src/pkg/net/http/server.go:1100 +0xb7\nruntime.panic(0x926b00, 0xd30dd3)\n    /usr/lib/go/src/pkg/runtime/panic.c:248 +0x18d\ngithub.com/syncthing/syncthing/internal/discover.(_Discoverer).All(0x0, 0x9b9b10)\n    /home/folken/src/github.com/syncthing/syncthing/internal/discover/discover.go:173 +0x2cb\nmain.restGetDiscovery(0x7f52a4716b50, 0xc208776a00, 0xc208714000)\n    /home/folken/src/github.com/syncthing/syncthing/cmd/syncthing/gui.go:456 +0x88\nnet/http.HandlerFunc.ServeHTTP(0xabd5c8, 0x7f52a4716b50, 0xc208776a00, 0xc208714000)\n    /usr/lib/go/src/pkg/net/http/server.go:1235 +0x40\nnet/http.(_ServeMux).ServeHTTP(0xc208023f80, 0x7f52a4716b50, 0xc208776a00, 0xc208714000)\n    /usr/lib/go/src/pkg/net/http/server.go:1511 +0x1a3\nmain.func·002(0x7f52a4716b50, 0xc208776a00, 0xc208714000)\n    /home/folken/src/github.com/syncthing/syncthing/cmd/syncthing/gui.go:176 +0xcd\nnet/http.HandlerFunc.ServeHTTP(0xc2086247a0, 0x7f52a4716b50, 0xc208776a00, 0xc208714000)\n    /usr/lib/go/src/pkg/net/http/server.go:1235 +0x40\nmain.func·004(0x7f52a4716b50, 0xc208776a00, 0xc208714000)\n    /home/folken/src/github.com/syncthing/syncthing/cmd/syncthing/gui.go:205 +0xad\nnet/http.HandlerFunc.ServeHTTP(0xc208001540, 0x7f52a4716b50, 0xc208776a00, 0xc208714000)\n    /usr/lib/go/src/pkg/net/http/server.go:1235 +0x40\nnet/http.(_ServeMux).ServeHTTP(0xc2080fe060, 0x7f52a4716b50, 0xc208776a00, 0xc208714000)\n    /usr/lib/go/src/pkg/net/http/server.go:1511 +0x1a3\nmain.func·010(0x7f52a4716b50, 0xc208776a00, 0xc208714000)\n    /home/folken/src/github.com/syncthing/syncthing/cmd/syncthing/gui_csrf.go:64 +0x3e8\nnet/http.HandlerFunc.ServeHTTP(0xc20810d5e0, 0x7f52a4716b50, 0xc208776a00, 0xc208714000)\n    /usr/lib/go/src/pkg/net/http/server.go:1235 +0x40\nmain.func·005(0x7f52a4716b50, 0xc208776a00, 0xc208714000)\n    /home/folken/src/github.com/syncthing/syncthing/cmd/syncthing/gui.go:212 +0xb0\nnet/http.HandlerFunc.ServeHTTP(0xc208000e80, 0x7f52a4716b50, 0xc208776a00, 0xc208714000)\n    /usr/lib/go/src/pkg/net/http/server.go:1235 +0x40\nnet/http.serverHandler.ServeHTTP(0xc208004480, 0x7f52a4716b50, 0xc208776a00, 0xc208714000)\n    /usr/lib/go/src/pkg/net/http/server.go:1673 +0x19f\nnet/http.(_conn).serve(0xc208046500)\n    /usr/lib/go/src/pkg/net/http/server.go:1174 +0xa7e\ncreated by net/http.(*Server).Serve\n    /usr/lib/go/src/pkg/net/http/server.go:1721 +0x313\n","closed_by":{"login":"calmh","id":125426,"node_id":"MDQ6VXNlcjEyNTQyNg==","avatar_url":"https://avatars.githubusercontent.com/u/125426?v=4","gravatar_id":"","url":"https://api.github.com/users/calmh","html_url":"https://github.com/calmh","followers_url":"https://api.github.com/users/calmh/followers","following_url":"https://api.github.com/users/calmh/following{/other_user}","gists_url":"https://api.github.com/users/calmh/gists{/gist_id}","starred_url":"https://api.github.com/users/calmh/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/calmh/subscriptions","organizations_url":"https://api.github.com/users/calmh/orgs","repos_url":"https://api.github.com/users/calmh/repos","events_url":"https://api.github.com/users/calmh/events{/privacy}","received_events_url":"https://api.github.com/users/calmh/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/917/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/syncthing/syncthing/issues/917/timeline","performed_via_github_app":null,"state_reason":"completed"}