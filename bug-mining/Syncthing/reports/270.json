{"url":"https://api.github.com/repos/syncthing/syncthing/issues/1831","repository_url":"https://api.github.com/repos/syncthing/syncthing","labels_url":"https://api.github.com/repos/syncthing/syncthing/issues/1831/labels{/name}","comments_url":"https://api.github.com/repos/syncthing/syncthing/issues/1831/comments","events_url":"https://api.github.com/repos/syncthing/syncthing/issues/1831/events","html_url":"https://github.com/syncthing/syncthing/issues/1831","id":77588960,"node_id":"MDU6SXNzdWU3NzU4ODk2MA==","number":1831,"title":"Automatically set upnpLeaseMinutes to 0 on OnlyPermanentLeasesSupported","user":{"login":"Zillode","id":14169,"node_id":"MDQ6VXNlcjE0MTY5","avatar_url":"https://avatars.githubusercontent.com/u/14169?v=4","gravatar_id":"","url":"https://api.github.com/users/Zillode","html_url":"https://github.com/Zillode","followers_url":"https://api.github.com/users/Zillode/followers","following_url":"https://api.github.com/users/Zillode/following{/other_user}","gists_url":"https://api.github.com/users/Zillode/gists{/gist_id}","starred_url":"https://api.github.com/users/Zillode/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Zillode/subscriptions","organizations_url":"https://api.github.com/users/Zillode/orgs","repos_url":"https://api.github.com/users/Zillode/repos","events_url":"https://api.github.com/users/Zillode/events{/privacy}","received_events_url":"https://api.github.com/users/Zillode/received_events","type":"User","user_view_type":"public","site_admin":false},"labels":[{"id":67767667,"node_id":"MDU6TGFiZWw2Nzc2NzY2Nw==","url":"https://api.github.com/repos/syncthing/syncthing/labels/enhancement","name":"enhancement","color":"0e8a16","default":true,"description":"New features or improvements of some kind, as opposed to a problem (bug)"},{"id":628314330,"node_id":"MDU6TGFiZWw2MjgzMTQzMzA=","url":"https://api.github.com/repos/syncthing/syncthing/labels/frozen-due-to-age","name":"frozen-due-to-age","color":"eeeeee","default":false,"description":"Issues closed and untouched for a long time, together with being locked for discussion"}],"state":"closed","locked":true,"assignee":null,"assignees":[],"milestone":null,"comments":3,"created_at":"2015-05-18T09:52:56Z","updated_at":"2017-06-16T21:07:14Z","closed_at":"2015-05-21T10:50:49Z","author_association":"CONTRIBUTOR","type":null,"active_lock_reason":null,"sub_issues_summary":{"total":0,"completed":0,"percent_completed":0},"issue_dependencies_summary":{"blocked_by":0,"total_blocked_by":0,"blocking":0,"total_blocking":0},"body":"Based on https://forum.syncthing.net/t/failed-to-set-upnp-port-mapping/2764/6\n\n```\n[BHGBH] 2015/05/18 09:23:34.194211 main.go:466: INFO: syncthing v0.11.5 (go1.4.2 windows-amd64 default) unknown-user@syncthing-builder 2015-05-15 08:46:47 UTC\n[BHGBH] 2015/05/18 09:23:34.197212 main.go:467: INFO: My ID: BHGBHX2-5BWXI2P-FEH5NTT-5W5JXBF-JQFGQ7H-7LOPDDR-R65LEVD-HY5BCQX\n[BHGBH] 2015/05/18 09:23:34.200212 main.go:740: INFO: Database block cache capacity 63300 KiB\n[BHGBH] 2015/05/18 09:23:35.089263 main.go:795: INFO: Starting web GUI on http://127.0.0.1:8384/\n[BHGBH] 2015/05/18 09:23:37.309390 main.go:870: INFO: Starting local discovery announcements\n[BHGBH] 2015/05/18 09:23:37.317390 discover.go:131: INFO: Local discovery over IPv6 unavailable\n[BHGBH] 2015/05/18 09:23:37.317390 main.go:875: INFO: Starting global discovery announcements\n[BHGBH] 2015/05/18 09:23:37.319390 main.go:646: OK: Ready to synchronize Dokumente (read-write)\n[BHGBH] 2015/05/18 09:23:37.320390 main.go:646: OK: Ready to synchronize KamS (read-write)\n[BHGBH] 2015/05/18 09:23:37.320390 main.go:646: OK: Ready to synchronize WaRB (read-write)\n[BHGBH] 2015/05/18 09:23:37.320390 main.go:646: OK: Ready to synchronize WaRV (read-write)\n[BHGBH] 2015/05/18 09:23:37.320390 main.go:646: OK: Ready to synchronize 2015 (read-write)\n[BHGBH] 2015/05/18 09:23:37.320390 main.go:646: OK: Ready to synchronize Bilder (read-write)\n[BHGBH] 2015/05/18 09:23:37.320390 main.go:646: OK: Ready to synchronize Richard (read-write)\n[BHGBH] 2015/05/18 09:23:37.320390 main.go:646: OK: Ready to synchronize Videos_Privat (read-write)\n[BHGBH] 2015/05/18 09:23:37.320390 main.go:646: OK: Ready to synchronize WaSB (read-write)\n[BHGBH] 2015/05/18 09:23:37.320390 main.go:646: OK: Ready to synchronize WaSV (read-write)\n[BHGBH] 2015/05/18 09:23:37.320390 main.go:646: OK: Ready to synchronize Wichtig (read-write)\n[BHGBH] 2015/05/18 09:23:37.320390 main.go:646: OK: Ready to synchronize KamR (read-write)\n[BHGBH] 2015/05/18 09:23:37.320390 main.go:646: OK: Ready to synchronize Musik (read-write)\n[BHGBH] 2015/05/18 09:23:37.321390 main.go:662: INFO: Device BHGBHX2-5BWXI2P-FEH5NTT-5W5JXBF-JQFGQ7H-7LOPDDR-R65LEVD-HY5BCQX is \"Leni\" at [dynamic]\n[BHGBH] 2015/05/18 09:23:37.321390 main.go:662: INFO: Device LP75RYS-OYBFMRF-XZR4Y3W-NXZW4Y4-UGVX64H-IUIFRXL-OEHVP33-55K4IQP is \"Server\" at [dynamic]\n[BHGBH] 2015/05/18 09:23:37.321390 main.go:662: INFO: Device NICMCM3-NSXK7FL-32TFLJO-AIXOELQ-A2OGDF5-KNVKJXI-ZJCNW3U-45RGSQE is \"Handy Ric\" at [dynamic]\n[BHGBH] 2015/05/18 09:23:37.321390 main.go:662: INFO: Device RRW7XTO-4FHQU4K-JDYJRSU-IZT3GK4-PMRAGOA-V3DF6GS-NBPS6OA-ZWZZPQA is \"Handy Syli\" at [dynamic]\n[BHGBH] 2015/05/18 09:23:37.322390 usage_report.go:144: INFO: Starting usage reporting\n[BHGBH] 2015/05/18 09:23:37.330391 upnp.go:171: DEBUG: Starting discovery of device type urn:schemas-upnp-org:device:InternetGatewayDevice:1 on {B096932C-A245-4F1E-B974-2C6583964162}\n[BHGBH] 2015/05/18 09:23:37.334391 upnp.go:171: DEBUG: Starting discovery of device type urn:schemas-upnp-org:device:InternetGatewayDevice:2 on {B096932C-A245-4F1E-B974-2C6583964162}\n[BHGBH] 2015/05/18 09:23:37.341391 upnp.go:190: DEBUG: Sending search request for device type urn:schemas-upnp-org:device:InternetGatewayDevice:1 on {B096932C-A245-4F1E-B974-2C6583964162}\n[BHGBH] 2015/05/18 09:23:37.352392 upnp.go:190: DEBUG: Sending search request for device type urn:schemas-upnp-org:device:InternetGatewayDevice:2 on {B096932C-A245-4F1E-B974-2C6583964162}\n[BHGBH] 2015/05/18 09:23:37.358392 rwfolder.go:275: INFO: Completed initial scan (rw) of folder Wichtig\n[BHGBH] 2015/05/18 09:23:37.358392 upnp.go:200: DEBUG: Listening for UPnP response for device type urn:schemas-upnp-org:device:InternetGatewayDevice:1 on {B096932C-A245-4F1E-B974-2C6583964162}\n[BHGBH] 2015/05/18 09:23:37.364393 rwfolder.go:275: INFO: Completed initial scan (rw) of folder WaRB\n[BHGBH] 2015/05/18 09:23:37.368393 rwfolder.go:275: INFO: Completed initial scan (rw) of folder Musik\n[BHGBH] 2015/05/18 09:23:37.370393 rwfolder.go:275: INFO: Completed initial scan (rw) of folder KamR\n[BHGBH] 2015/05/18 09:23:37.373393 rwfolder.go:275: INFO: Completed initial scan (rw) of folder KamS\n[BHGBH] 2015/05/18 09:23:37.373393 upnp.go:227: DEBUG: Handling UPnP response:\n\nHTTP/1.1 200 OK\n\nST: urn:schemas-upnp-org:device:InternetGatewayDevice:1\n\nLOCATION: http://192.168.1.1:5000/Public_UPNP_gatedesc.xml\n\nSERVER: Linux/2.6.12, UPnP/1.0, NETGEAR-UPNP/1.0\n\nEXT:\n\nCACHE-CONTROL: max-age=3600\n\nUSN: uuid:656f09aa-320e-8a03-365e-af5f6f66a317::urn:schemas-upnp-org:device:InternetGatewayDevice:1\n\n[BHGBH] 2015/05/18 09:23:37.373393 upnp.go:200: DEBUG: Listening for UPnP response for device type urn:schemas-upnp-org:device:InternetGatewayDevice:2 on {B096932C-A245-4F1E-B974-2C6583964162}\n[BHGBH] 2015/05/18 09:23:37.376393 rwfolder.go:275: INFO: Completed initial scan (rw) of folder Richard\n[BHGBH] 2015/05/18 09:23:37.521402 rwfolder.go:275: INFO: Completed initial scan (rw) of folder WaRV\n[BHGBH] 2015/05/18 09:23:37.597406 rwfolder.go:275: INFO: Completed initial scan (rw) of folder WaSB\n[BHGBH] 2015/05/18 09:23:37.654409 rwfolder.go:275: INFO: Completed initial scan (rw) of folder WaSV\n[BHGBH] 2015/05/18 09:23:37.689411 upnp.go:398: DEBUG: [http://192.168.1.1:5000/Public_UPNP_gatedesc.xml] Found urn:schemas-upnp-org:service:WANIPConnection:1 with URL http://192.168.1.1:5000/Public_UPNP_C3\n[BHGBH] 2015/05/18 09:23:37.689411 upnp.go:398: DEBUG: [http://192.168.1.1:5000/Public_UPNP_gatedesc.xml] Found urn:schemas-upnp-org:service:WANPPPConnection:1 with URL http://192.168.1.1:5000/Public_UPNP_C5\n[BHGBH] 2015/05/18 09:23:37.700412 upnp.go:122: DEBUG: UPnP discovery result 656f09aa-320e-8a03-365e-af5f6f66a317 with services:\n[BHGBH] 2015/05/18 09:23:37.700412 upnp.go:124: DEBUG: * [urn:upnp-org:serviceId:WANIPConn1] http://192.168.1.1:5000/Public_UPNP_C3\n[BHGBH] 2015/05/18 09:23:37.700412 upnp.go:124: DEBUG: * [urn:upnp-org:serviceId:WANPPPConn1] http://192.168.1.1:5000/Public_UPNP_C5\n[BHGBH] 2015/05/18 09:23:37.750415 rwfolder.go:275: INFO: Completed initial scan (rw) of folder 2015\n[BHGBH] 2015/05/18 09:23:37.826419 rwfolder.go:275: INFO: Completed initial scan (rw) of folder Videos_Privat\n[BHGBH] 2015/05/18 09:23:38.494457 rwfolder.go:275: INFO: Completed initial scan (rw) of folder Dokumente\n[BHGBH] 2015/05/18 09:23:41.227614 rwfolder.go:275: INFO: Completed initial scan (rw) of folder Bilder\n[BHGBH] 2015/05/18 09:23:47.341963 upnp.go:221: DEBUG: Discovery for device type urn:schemas-upnp-org:device:InternetGatewayDevice:1 on {B096932C-A245-4F1E-B974-2C6583964162} finished.\n[BHGBH] 2015/05/18 09:23:47.352964 upnp.go:221: DEBUG: Discovery for device type urn:schemas-upnp-org:device:InternetGatewayDevice:2 on {B096932C-A245-4F1E-B974-2C6583964162} finished.\n[BHGBH] 2015/05/18 09:23:47.352964 upnp.go:460: DEBUG: SOAP Request URL: http://192.168.1.1:5000/Public_UPNP_C3\n[BHGBH] 2015/05/18 09:23:47.352964 upnp.go:461: DEBUG: SOAP Action:\n[BHGBH] 2015/05/18 09:23:47.352964 upnp.go:462: DEBUG: SOAP Request:\n\n<?xml version=\"1.0\" ?>\n\n\n\n32945\nTCP\n22000\n192.168.1.6\n1\nsyncthing-32945\n3600\n\n[BHGBH] 2015/05/18 09:23:47.358964 upnp.go:475: DEBUG: SOAP Response:\n\ns:Client\n\nUPnPError\n\n725\n\nOnlyPermanentLeasesSupported\n\n[BHGBH] 2015/05/18 09:23:47.358964 upnp.go:460: DEBUG: SOAP Request URL: http://192.168.1.1:5000/Public_UPNP_C3\n[BHGBH] 2015/05/18 09:23:47.358964 upnp.go:461: DEBUG: SOAP Action:\n[BHGBH] 2015/05/18 09:23:47.358964 upnp.go:462: DEBUG: SOAP Request:\n\n<?xml version=\"1.0\" ?>\n\n\n\n8712\nTCP\n22000\n192.168.1.6\n1\nsyncthing-8712\n3600\n\n[BHGBH] 2015/05/18 09:23:47.363965 upnp.go:475: DEBUG: SOAP Response:\n\ns:Client\n\nUPnPError\n\n725\n\nOnlyPermanentLeasesSupported\n\n[BHGBH] 2015/05/18 09:23:47.363965 upnp.go:460: DEBUG: SOAP Request URL: http://192.168.1.1:5000/Public_UPNP_C3\n[BHGBH] 2015/05/18 09:23:47.363965 upnp.go:461: DEBUG: SOAP Action:\n[BHGBH] 2015/05/18 09:23:47.363965 upnp.go:462: DEBUG: SOAP Request:\n\n<?xml version=\"1.0\" ?>\n\n\n\n64156\nTCP\n22000\n192.168.1.6\n1\nsyncthing-64156\n3600\n\n[BHGBH] 2015/05/18 09:23:47.373965 upnp.go:475: DEBUG: SOAP Response:\n\ns:Client\n\nUPnPError\n\n725\n\nOnlyPermanentLeasesSupported\n\n[BHGBH] 2015/05/18 09:23:47.373965 upnp.go:460: DEBUG: SOAP Request URL: http://192.168.1.1:5000/Public_UPNP_C3\n[BHGBH] 2015/05/18 09:23:47.373965 upnp.go:461: DEBUG: SOAP Action:\n[BHGBH] 2015/05/18 09:23:47.373965 upnp.go:462: DEBUG: SOAP Request:\n\n<?xml version=\"1.0\" ?>\n\n\n\n8564\nTCP\n22000\n192.168.1.6\n1\nsyncthing-8564\n3600\n\n[BHGBH] 2015/05/18 09:23:47.386966 upnp.go:475: DEBUG: SOAP Response:\n\ns:Client\n\nUPnPError\n\n725\n\nOnlyPermanentLeasesSupported\n\n[BHGBH] 2015/05/18 09:23:47.386966 upnp.go:460: DEBUG: SOAP Request URL: http://192.168.1.1:5000/Public_UPNP_C3\n[BHGBH] 2015/05/18 09:23:47.386966 upnp.go:461: DEBUG: SOAP Action:\n[BHGBH] 2015/05/18 09:23:47.386966 upnp.go:462: DEBUG: SOAP Request:\n\n<?xml version=\"1.0\" ?>\n\n\n\n38606\nTCP\n22000\n192.168.1.6\n1\nsyncthing-38606\n3600\n\n[BHGBH] 2015/05/18 09:23:47.391966 upnp.go:475: DEBUG: SOAP Response:\n\ns:Client\n\nUPnPError\n\n725\n\nOnlyPermanentLeasesSupported\n\n[BHGBH] 2015/05/18 09:23:47.391966 upnp.go:460: DEBUG: SOAP Request URL: http://192.168.1.1:5000/Public_UPNP_C3\n[BHGBH] 2015/05/18 09:23:47.391966 upnp.go:461: DEBUG: SOAP Action:\n[BHGBH] 2015/05/18 09:23:47.391966 upnp.go:462: DEBUG: SOAP Request:\n\n<?xml version=\"1.0\" ?>\n\n\n\n32585\nTCP\n22000\n192.168.1.6\n1\nsyncthing-32585\n3600\n\n[BHGBH] 2015/05/18 09:23:47.395967 upnp.go:475: DEBUG: SOAP Response:\n\ns:Client\n\nUPnPError\n\n725\n\nOnlyPermanentLeasesSupported\n\n[BHGBH] 2015/05/18 09:23:47.395967 upnp.go:460: DEBUG: SOAP Request URL: http://192.168.1.1:5000/Public_UPNP_C3\n[BHGBH] 2015/05/18 09:23:47.395967 upnp.go:461: DEBUG: SOAP Action:\n[BHGBH] 2015/05/18 09:23:47.395967 upnp.go:462: DEBUG: SOAP Request:\n\n<?xml version=\"1.0\" ?>\n\n\n\n50071\nTCP\n22000\n192.168.1.6\n1\nsyncthing-50071\n3600\n\n[BHGBH] 2015/05/18 09:23:47.473971 upnp.go:475: DEBUG: SOAP Response:\n\ns:Client\n\nUPnPError\n\n725\n\nOnlyPermanentLeasesSupported\n\n[BHGBH] 2015/05/18 09:23:47.473971 upnp.go:460: DEBUG: SOAP Request URL: http://192.168.1.1:5000/Public_UPNP_C3\n[BHGBH] 2015/05/18 09:23:47.473971 upnp.go:461: DEBUG: SOAP Action:\n[BHGBH] 2015/05/18 09:23:47.473971 upnp.go:462: DEBUG: SOAP Request:\n\n<?xml version=\"1.0\" ?>\n\n\n\n5649\nTCP\n22000\n192.168.1.6\n1\nsyncthing-5649\n3600\n\n[BHGBH] 2015/05/18 09:23:47.477971 upnp.go:475: DEBUG: SOAP Response:\n\ns:Client\n\nUPnPError\n\n725\n\nOnlyPermanentLeasesSupported\n\n[BHGBH] 2015/05/18 09:23:47.477971 upnp.go:460: DEBUG: SOAP Request URL: http://192.168.1.1:5000/Public_UPNP_C3\n[BHGBH] 2015/05/18 09:23:47.477971 upnp.go:461: DEBUG: SOAP Action:\n[BHGBH] 2015/05/18 09:23:47.477971 upnp.go:462: DEBUG: SOAP Request:\n\n<?xml version=\"1.0\" ?>\n\n\n\n57290\nTCP\n22000\n192.168.1.6\n1\nsyncthing-57290\n3600\n\n[BHGBH] 2015/05/18 09:23:47.481971 upnp.go:475: DEBUG: SOAP Response:\n\ns:Client\n\nUPnPError\n\n725\n\nOnlyPermanentLeasesSupported\n\n[BHGBH] 2015/05/18 09:23:47.481971 upnp.go:460: DEBUG: SOAP Request URL: http://192.168.1.1:5000/Public_UPNP_C3\n[BHGBH] 2015/05/18 09:23:47.481971 upnp.go:461: DEBUG: SOAP Action:\n[BHGBH] 2015/05/18 09:23:47.481971 upnp.go:462: DEBUG: SOAP Request:\n\n<?xml version=\"1.0\" ?>\n\n\n\n37341\nTCP\n22000\n192.168.1.6\n1\nsyncthing-37341\n3600\n\n[BHGBH] 2015/05/18 09:23:47.485972 upnp.go:475: DEBUG: SOAP Response:\n\ns:Client\n\nUPnPError\n\n725\n\nOnlyPermanentLeasesSupported\n\n[BHGBH] 2015/05/18 09:23:47.485972 upnpsvc.go:74: WARNING: Failed to set UPnP port mapping: external port 0 on device 'WNDR4500 (Gateway)' (192.168.1.1).\n```\n\n> You should open config.xml in syncthing's home folder and change upnpLeaseMinutes to 30.\n\nShould we automate this?\n","closed_by":{"login":"Zillode","id":14169,"node_id":"MDQ6VXNlcjE0MTY5","avatar_url":"https://avatars.githubusercontent.com/u/14169?v=4","gravatar_id":"","url":"https://api.github.com/users/Zillode","html_url":"https://github.com/Zillode","followers_url":"https://api.github.com/users/Zillode/followers","following_url":"https://api.github.com/users/Zillode/following{/other_user}","gists_url":"https://api.github.com/users/Zillode/gists{/gist_id}","starred_url":"https://api.github.com/users/Zillode/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Zillode/subscriptions","organizations_url":"https://api.github.com/users/Zillode/orgs","repos_url":"https://api.github.com/users/Zillode/repos","events_url":"https://api.github.com/users/Zillode/events{/privacy}","received_events_url":"https://api.github.com/users/Zillode/received_events","type":"User","user_view_type":"public","site_admin":false},"reactions":{"url":"https://api.github.com/repos/syncthing/syncthing/issues/1831/reactions","total_count":0,"+1":0,"-1":0,"laugh":0,"hooray":0,"confused":0,"heart":0,"rocket":0,"eyes":0},"timeline_url":"https://api.github.com/repos/syncthing/syncthing/issues/1831/timeline","performed_via_github_app":null,"state_reason":"completed"}