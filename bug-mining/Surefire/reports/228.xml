<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 07:09:00 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SUREFIRE-720] Toolchain is ignored</title>
                <link>https://issues.apache.org/jira/browse/SUREFIRE-720</link>
                <project id="12317927" key="SUREFIRE">Maven Surefire (Moved to GitHub Issues)</project>
                    <description>&lt;p&gt;The following debug output demonstrates the problem:&lt;br/&gt;
...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Toolchain in compiler-plugin: JDK&lt;span class=&quot;error&quot;&gt;&amp;#91;C:/Users/alex/Software/jdk1.5.0_22&amp;#93;&lt;/span&gt;&lt;br/&gt;
...&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;INFO&amp;#93;&lt;/span&gt; Toolchain in surefire-plugin: JDK&lt;span class=&quot;error&quot;&gt;&amp;#91;C:/Users/alex/Software/jdk1.5.0_22&amp;#93;&lt;/span&gt;&lt;br/&gt;
&lt;span class=&quot;error&quot;&gt;&amp;#91;WARNING&amp;#93;&lt;/span&gt; Toolchains are ignored, &apos;executable&apos; parameter is set to C:\Users\alex\Software\jdk1.6.0_19\jre\bin\java&lt;br/&gt;
Forking command line: cmd.exe /X /C &quot;C:\Users\alex\Software\jdk1.6.0_19\jre\bin\java -jar &lt;br/&gt;
...&lt;/p&gt;

&lt;p&gt;Compiler plugin uses proper JDK, while Surefire falls back to default. The problem is not reproducible with Surefire 2.6 and 2.5.&lt;/p&gt;</description>
                <environment>Apache Maven 3.0.3 (r1075438; 2011-02-28 18:31:09+0100)&lt;br/&gt;
Maven home: C:\Users\alex\Software\apache-maven-3.0.3\bin\..&lt;br/&gt;
Java version: 1.6.0_19, vendor: Sun Microsystems Inc.&lt;br/&gt;
Java home: C:\Users\alex\Software\jdk1.6.0_19\jre&lt;br/&gt;
Default locale: en_US, platform encoding: Cp1252&lt;br/&gt;
OS name: &amp;quot;windows 7&amp;quot;, version: &amp;quot;6.1&amp;quot;, arch: &amp;quot;x86&amp;quot;, family: &amp;quot;windows&amp;quot;&lt;br/&gt;
</environment>
        <key id="12809699">SUREFIRE-720</key>
            <summary>Toolchain is ignored</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="5">Cannot Reproduce</resolution>
                                        <assignee username="tibordigana">Tibor Digana</assignee>
                                    <reporter username="kitaev">Jun</reporter>
                        <labels>
                    </labels>
                <created>Fri, 1 Apr 2011 16:31:50 +0000</created>
                <updated>Fri, 4 Jul 2025 07:15:40 +0000</updated>
                            <resolved>Sat, 2 Dec 2017 19:23:06 +0000</resolved>
                                    <version>2.7</version>
                    <version>2.7.1</version>
                    <version>2.7.2</version>
                    <version>2.8</version>
                                    <fixVersion>2.9</fixVersion>
                                    <component>Maven Surefire Plugin</component>
                        <due></due>
                            <votes>2</votes>
                                    <watches>8</watches>
                                                                                                                <comments>
                            <comment id="14454947" author="kitaev" created="Fri, 1 Apr 2011 16:33:33 +0000"  >&lt;p&gt;My Surefire plugin configuration is (within profile, in pom.xml): &lt;/p&gt;


&lt;p&gt;    &amp;lt;profile&amp;gt;&lt;br/&gt;
      &amp;lt;id&amp;gt;sqljet.tests&amp;lt;/id&amp;gt;&lt;br/&gt;
      &amp;lt;activation&amp;gt;&amp;lt;activeByDefault&amp;gt;true&amp;lt;/activeByDefault&amp;gt;&amp;lt;/activation&amp;gt;&lt;br/&gt;
      &amp;lt;build&amp;gt;&lt;br/&gt;
      &amp;lt;plugins&amp;gt;&lt;br/&gt;
      &amp;lt;plugin&amp;gt;&lt;br/&gt;
        &amp;lt;groupId&amp;gt;org.apache.maven.plugins&amp;lt;/groupId&amp;gt;&lt;br/&gt;
        &amp;lt;artifactId&amp;gt;maven-surefire-plugin&amp;lt;/artifactId&amp;gt;&lt;br/&gt;
        &amp;lt;version&amp;gt;2.8&amp;lt;/version&amp;gt;&lt;br/&gt;
        &amp;lt;configuration&amp;gt;&lt;br/&gt;
          &amp;lt;test&amp;gt;OpenScopeTest&amp;lt;/test&amp;gt;&lt;br/&gt;
          &amp;lt;systemPropertyVariables&amp;gt;&lt;br/&gt;
            &amp;lt;SQLJET_TESTS_LOGGING&amp;gt;false&amp;lt;/SQLJET_TESTS_LOGGING&amp;gt;&lt;br/&gt;
            &amp;lt;SqlJetBtreeTableTest.DELETE_COPY&amp;gt;true&amp;lt;/SqlJetBtreeTableTest.DELETE_COPY&amp;gt;&lt;br/&gt;
            &amp;lt;SqlJetBtreeTableTest.REPEATS_COUNT&amp;gt;100&amp;lt;/SqlJetBtreeTableTest.REPEATS_COUNT&amp;gt;&lt;br/&gt;
          &amp;lt;/systemPropertyVariables&amp;gt;&lt;br/&gt;
        &amp;lt;/configuration&amp;gt;&lt;br/&gt;
      &amp;lt;/plugin&amp;gt;&lt;br/&gt;
      &amp;lt;/plugins&amp;gt;&lt;br/&gt;
      &amp;lt;/build&amp;gt;      &lt;br/&gt;
    &amp;lt;/profile&amp;gt;&lt;/p&gt;</comment>
                            <comment id="14454855" author="krosenvold" created="Mon, 11 Apr 2011 09:36:07 +0000"  >&lt;p&gt;The output indicates that the &quot;jvm&quot; property is being picked up somewhere. Please create a minimal test-project to reproduce and attach to this issue.&lt;/p&gt;</comment>
                            <comment id="14454856" author="krosenvold" created="Tue, 19 Apr 2011 16:10:30 +0000"  >&lt;p&gt;Feel free to reopen with a minimal testcase projectt&lt;/p&gt;</comment>
                            <comment id="14454900" author="rmuller@xiam.nl" created="Tue, 10 May 2011 06:25:49 +0000"  >&lt;p&gt;See attached test case. The toolchain configuration is &quot;standard&quot;, like &lt;a href=&quot;http://maven.apache.org/guides/mini/guide-using-toolchains.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://maven.apache.org/guides/mini/guide-using-toolchains.html&lt;/a&gt;&lt;br/&gt;
surefire 2.5 works good, 2.6 - 2.8 fails.&lt;br/&gt;
The problem is:&lt;br/&gt;
if ( getJvm() != null )&lt;br/&gt;
{&lt;br/&gt;
  getLog().warn( &quot;Toolchains are ignored, &apos;executable&apos; parameter is set to &quot; + getJvm() );&lt;br/&gt;
}&lt;br/&gt;
The JVM is already set, so the toolchain is not used &lt;/p&gt;

&lt;p&gt;Kind regards,&lt;br/&gt;
Ronald&lt;/p&gt;</comment>
                            <comment id="14454984" author="rmuller@xiam.nl" created="Tue, 10 May 2011 06:26:26 +0000"  >&lt;p&gt;The test case ...&lt;/p&gt;</comment>
                            <comment id="14455005" author="krosenvold" created="Tue, 10 May 2011 14:21:12 +0000"  >&lt;p&gt;Fixed in r1101609. I do not know how to make a proper IT for this, but the test-project was added as part of this commit.&lt;/p&gt;</comment>
                            <comment id="15931448" author="ralph.goers@dslextreme.com" created="Sat, 18 Mar 2017 22:55:01 +0000"  >&lt;p&gt;It appears a regression error happened. From what I can tell the last version to work with toolchains was 2.13. Every version I tried after that doesn&apos;t work.  For a test project you can use the log4j-java9 module in &lt;a href=&quot;https://git-wip-us.apache.org/repos/asf/logging-log4j2.git&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf/logging-log4j2.git&lt;/a&gt;.&lt;/p&gt;</comment>
                            <comment id="16235232" author="thosch" created="Thu, 2 Nov 2017 06:04:36 +0000"  >&lt;p&gt;Can confirm this bug is still present in 2.20&lt;/p&gt;</comment>
                            <comment id="16235233" author="thosch" created="Thu, 2 Nov 2017 06:04:37 +0000"  >&lt;p&gt;Can confirm this bug is still present in 2.20&lt;/p&gt;</comment>
                            <comment id="16275720" author="tibor17" created="Sat, 2 Dec 2017 19:20:56 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thomas.scheffler%40epost.de&quot; class=&quot;user-hover&quot; rel=&quot;thomas.scheffler@epost.de&quot;&gt;thomas.scheffler@epost.de&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=thosch&quot; class=&quot;user-hover&quot; rel=&quot;thosch&quot;&gt;thosch&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=yagee&quot; class=&quot;user-hover&quot; rel=&quot;yagee&quot;&gt;yagee&lt;/a&gt;&lt;br/&gt;
This should be user error because we have IT with toolchains.xml and it works.&lt;br/&gt;
You don&apos;t have config parameter toolchains, see this for more info:&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/maven-surefire/blob/master/surefire-integration-tests/src/test/java/org/apache/maven/surefire/its/Java9FullApiIT.java#L80&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/blob/master/surefire-integration-tests/src/test/java/org/apache/maven/surefire/its/Java9FullApiIT.java#L80&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/maven-surefire/blob/master/surefire-integration-tests/src/test/resources/java9-full-api/pom.xml#L109&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/blob/master/surefire-integration-tests/src/test/resources/java9-full-api/pom.xml#L109&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/maven-surefire/blob/master/surefire-integration-tests/pom.xml#L111&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/blob/master/surefire-integration-tests/pom.xml#L111&lt;/a&gt;&lt;br/&gt;
&lt;a href=&quot;https://github.com/apache/maven-surefire/blob/master/surefire-setup-integration-tests/src/main/resources/toolchains.xml&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/blob/master/surefire-setup-integration-tests/src/main/resources/toolchains.xml&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="16395154" author="volkert" created="Mon, 12 Mar 2018 12:26:16 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tibor17&quot; class=&quot;user-hover&quot; rel=&quot;tibor17&quot;&gt;tibor17&lt;/a&gt; I encountered this issue&#160;when I had the&#160;&lt;b&gt;forkCount&lt;/b&gt; parameter configured in the configuration section. I&apos;ve reproduced this in versions 2.20.1 and 2.21.0 of the Maven Surefire Plugin, running Maven itself on JDK 8 and requiring a JDK 9 toolchain in the POM.&lt;/p&gt;

&lt;p&gt;The following appears in the log after the build phase, seemingly confirming that Surefire is acknowledging and&#160;will use the configured toolchain:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
[INFO] Toolchain in maven-surefire-plugin: JDK[/usr/java/jdk-9.0.1]&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Yet the test phase fails with an&#160;&lt;b&gt;UnsupportedClassVersionError&lt;/b&gt;, since the test class that Surefire tries to run was compiled with JDK 9 (1.9), yet Surefire tries to run it using the JDK version on which Maven itself is running, which is JDK 8. With the forkCount parameter, Surefire seems to be behaving as if there&#160;are no Toolchains configured in the POM at all.&lt;/p&gt;

&lt;p&gt;Presumably, there is a bug in Maven causing forkCount to fork from the process (and JDK) running Maven, instead of spawning a JVM using the JDK specified as the required toolchain and forking from there.&lt;/p&gt;

&lt;p&gt;Just in case, I&apos;m sharing the entire Maven Surefire configuration from our project below.&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;plugin&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.apache.maven.plugins&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;maven-surefire-plugin&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;configuration&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;useSystemClassLoader&amp;gt;&lt;/span&gt;false&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/useSystemClassLoader&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;perCoreThreadCount&amp;gt;&lt;/span&gt;false&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/perCoreThreadCount&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;forkCount&amp;gt;&lt;/span&gt;2.0C&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/forkCount&amp;gt;&lt;/span&gt; &lt;span class=&quot;code-tag&quot;&gt;&lt;span class=&quot;code-comment&quot;&gt;&amp;lt;!-- FIXME: this option apparently breaks toolchains. --&amp;gt;&lt;/span&gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;reuseForks&amp;gt;&lt;/span&gt;true&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/reuseForks&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;threadCount&amp;gt;&lt;/span&gt;20&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/threadCount&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/configuration&amp;gt;&lt;/span&gt;
&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/plugin&amp;gt;&lt;/span&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Should this issue be reopend, or would you like me to create a separate issue for this instead?&lt;/p&gt;

&lt;p&gt;Thank you in advance for looking into this.&lt;/p&gt;</comment>
                            <comment id="16395576" author="tibor17" created="Mon, 12 Mar 2018 17:46:01 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=volkert&quot; class=&quot;user-hover&quot; rel=&quot;volkert&quot;&gt;volkert&lt;/a&gt;&lt;br/&gt;
If you use &lt;tt&gt;forkCount&lt;/tt&gt; this will happen. It&apos;s actually designed so because we are selecting what classes are supposed to be a valid test and these are spread out over the runtime JVMs. Therefore discovery of the classes is done within plugin&apos;s JVM however the execution is done in JDK9.&lt;br/&gt;
Try similar case with JDK 7 and JDK8 with older versions of the plugin and I guess you will end up with same problem because it was always designed like this.&lt;br/&gt;
I remember this issue in past but it is not possible to fix it now. We have to make certain redesign inside and this must be done in several versions like 3.0.0-M1 - 3.0.0-M2. After these redesign steps we would be capable to fix this as well.&lt;/p&gt;</comment>
                            <comment id="16396746" author="volkert" created="Tue, 13 Mar 2018 09:44:28 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=tibor17&quot; class=&quot;user-hover&quot; rel=&quot;tibor17&quot;&gt;tibor17&lt;/a&gt;&lt;br/&gt;
Thanks for clarifying this. So if this issue is limited to the test class discovery/distribution step and the actual tests are still run using the configured JDK toolchain, am I right to conclude that making sure that Maven itself always runs on the latest available JDK (or at least on the most recent JDK version that you have configured in your toolchains.xml) would be a full-proof workaround for this limitation?&lt;/p&gt;

&lt;p&gt;Anyway, it might be a good idea to emphasize this current limitation in the documentation, since I couldn&apos;t find any info about this on-line when I ran into it. &lt;/p&gt;

&lt;p&gt;Also, is there already an improvement issue or feature request in JIRA to fix this specific limitation as part of such a future redesign effort of Maven?&lt;/p&gt;

&lt;p&gt;Thanks. &lt;img class=&quot;emoticon&quot; src=&quot;https://issues.apache.org/jira/images/icons/emoticons/smile.png&quot; height=&quot;16&quot; width=&quot;16&quot; align=&quot;absmiddle&quot; alt=&quot;&quot; border=&quot;0&quot;/&gt;&lt;/p&gt;</comment>
                            <comment id="17994112" author="olamy" created="Fri, 4 Jul 2025 07:15:40 +0000"  >&lt;p&gt;This project has moved from Jira to GitHub Issues. This issue was migrated to &lt;a href=&quot;https://github.com/apache/maven-surefire/issues/1862&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;apache/maven-surefire#1862&lt;/a&gt;. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                            <attachment id="12719785" name="SurefireToolchains.zip" size="3383" author="rmuller@xiam.nl" created="Tue, 10 May 2011 06:26:26 +0000"/>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>1.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2bgpz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>