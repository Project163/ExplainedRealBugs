<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 07:17:29 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SUREFIRE-1869] Classloader.getResource() doesn&apos;t encode blanks with forkCount=0</title>
                <link>https://issues.apache.org/jira/browse/SUREFIRE-1869</link>
                <project id="12317927" key="SUREFIRE">Maven Surefire (Moved to GitHub Issues)</project>
                    <description>&lt;p&gt;We found this bug when running cucumber tests, having project paths with spaces and forkCount set to 0 (see &lt;a href=&quot;https://github.com/cucumber/cucumber-jvm/issues/2196&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/cucumber/cucumber-jvm/issues/2196&lt;/a&gt; for the but report there). A minimal reproducing example would be&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
$ pwd
/home/rene/Projects/path with space/classpath test&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
$ tree
.
&#9500;&#9472;&#9472; pom.xml
&#9492;&#9472;&#9472; src
    &#9492;&#9472;&#9472; test
        &#9492;&#9472;&#9472; java
            &#9492;&#9472;&#9472; ClassPathTest.java&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
$ cat src/test/java/ClassPathTest.java
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.io.IOException;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.net.URI;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; java.net.URISyntaxException;
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;ClassPathTest {
  &lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void testClassPath() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; IOException, URISyntaxException {
    URI uri = ClassPathTest.&lt;span class=&quot;code-keyword&quot;&gt;class.&lt;/span&gt;getClassLoader()
      .getResources(&lt;span class=&quot;code-quote&quot;&gt;&quot;.&quot;&lt;/span&gt;)
      .nextElement()
      .toURI();
      &lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(uri);
  }
}&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
$ mvn clean test -DforkCount=0
...
[INFO] --- maven-surefire-plugin:2.20:test (&lt;span class=&quot;code-keyword&quot;&gt;default&lt;/span&gt;-test) @ ClassPathTest ---
[WARNING] useSystemClassloader setting has no effect when not forking
[INFO] Running ClassPathTest
[ERROR] Tests run: 1, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 0.002 s &amp;lt;&amp;lt;&amp;lt; FAILURE! - in ClassPathTest
[ERROR] ClassPathTest.testClassPath()  Time elapsed: 0.001 s  &amp;lt;&amp;lt;&amp;lt; FAILURE!
java.net.URISyntaxException: Illegal character in path at index 29: file:/home/rene/Projects/path with space/classpath test/target/test-classes/
	at java.net.URI$Parser.fail(URI.java:2848)
	at java.net.URI$Parser.checkChars(URI.java:3021)
	at java.net.URI$Parser.parseHierarchical(URI.java:3105)
	at java.net.URI$Parser.parse(URI.java:3053)
	at java.net.URI.&amp;lt;init&amp;gt;(URI.java:588)
	at java.net.URL.toURI(URL.java:964)
	at ClassPathTest.testClassPath(ClassPathTest.java:13)
...
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Last working version of surefire is 2.19.1. The build does not contain any additional dependencies and relies on pojo test execution. The same problem also happens when running tests with junit, junit vintage or junit platform.&lt;/p&gt;</description>
                <environment></environment>
        <key id="13348341">SUREFIRE-1869</key>
            <summary>Classloader.getResource() doesn&apos;t encode blanks with forkCount=0</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="sjaranowski">Slawomir Jaranowski</assignee>
                                    <reporter username="rkraneis">Ren&#233; Kraneis</reporter>
                        <labels>
                    </labels>
                <created>Tue, 29 Dec 2020 18:57:26 +0000</created>
                <updated>Fri, 4 Jul 2025 07:37:56 +0000</updated>
                            <resolved>Sun, 9 Jan 2022 08:05:50 +0000</resolved>
                                    <version>2.20</version>
                    <version>2.22.2</version>
                    <version>3.0.0-M5</version>
                                    <fixVersion>3.0.0-M6</fixVersion>
                                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="17256221" author="mpkorstanje" created="Wed, 30 Dec 2020 01:32:49 +0000"  >&lt;p&gt;Worth nothing that:&lt;/p&gt;

&lt;p&gt;1. The test case only fails when running tests in-process. The test case does not fail when forking the jvm. It is the inconsistency that is surprising. I would consider the later result to be the more correct one.&lt;/p&gt;

&lt;p&gt;2. This happens because the isolated class loader urls are constructed from the absolute path here:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/maven-surefire/blob/master/surefire-booter/src/main/java/org/apache/maven/surefire/booter/Classpath.java#L149&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/blob/master/surefire-booter/src/main/java/org/apache/maven/surefire/booter/Classpath.java#L149&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
 classLoader.addURL( &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File( classPathElement ).toURL() );&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;And then turned into URLS here:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/apache/maven-surefire/blob/master/surefire-booter/src/main/java/org/apache/maven/surefire/booter/Classpath.java#L149&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/apache/maven-surefire/blob/master/surefire-booter/src/main/java/org/apache/maven/surefire/booter/Classpath.java#L149&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&#160;&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
classLoader.addURL( &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File( classPathElement ).toURL() );&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Following &lt;a href=&quot;https://bugs.openjdk.java.net/browse/JDK-6227069&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://bugs.openjdk.java.net/browse/JDK-6227069&lt;/a&gt; this should probably be:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;
classLoader.addURL( &lt;span class=&quot;code-keyword&quot;&gt;new&lt;/span&gt; File( classPathElement ).toURI().toURL() );&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="17995282" author="olamy" created="Fri, 4 Jul 2025 07:37:56 +0000"  >&lt;p&gt;This project has moved from Jira to GitHub Issues. This issue was migrated to &lt;a href=&quot;https://github.com/apache/maven-surefire/issues/2964&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;apache/maven-surefire#2964&lt;/a&gt;. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|z0lwtk:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>