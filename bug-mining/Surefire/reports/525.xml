<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 07:14:07 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SUREFIRE-1305] surefire fails on parallel tests when newline character is in test description</title>
                <link>https://issues.apache.org/jira/browse/SUREFIRE-1305</link>
                <project id="12317927" key="SUREFIRE">Maven Surefire (Moved to GitHub Issues)</project>
                    <description>&lt;p&gt;zohhak runner may create test description with newline character in it. it runs without any problem with surefire and non-parallel build and with parallel build when there is no newline char in the description. furthermore it runs fine with plain junit in parallel mode&lt;/p&gt;

&lt;ul&gt;
	&lt;li&gt;original issue was reported here: &lt;a href=&quot;https://github.com/piotrturski/zohhak/issues/14&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/piotrturski/zohhak/issues/14&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;project that reproduces the issue: &lt;a href=&quot;https://github.com/christophpickl/zohhak_parallel_bug&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/christophpickl/zohhak_parallel_bug&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;working parallel junit tests without surefire: &lt;a href=&quot;https://github.com/piotrturski/zohhak/commit/806aafc8e09fd843753d2940991f3ca0edd5120d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://github.com/piotrturski/zohhak/commit/806aafc8e09fd843753d2940991f3ca0edd5120d&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
                <environment></environment>
        <key id="13021940">SUREFIRE-1305</key>
            <summary>surefire fails on parallel tests when newline character is in test description</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="tibordigana">Tibor Digana</assignee>
                                    <reporter username="piotr.turski">Piotr Turski</reporter>
                        <labels>
                    </labels>
                <created>Sat, 19 Nov 2016 14:54:58 +0000</created>
                <updated>Fri, 4 Jul 2025 07:26:57 +0000</updated>
                            <resolved>Fri, 2 Dec 2016 01:53:36 +0000</resolved>
                                    <version>2.19.1</version>
                                    <fixVersion>2.20</fixVersion>
                                    <component>Junit 4.7+ (parallel) support</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>4</watches>
                                                                                                                <comments>
                            <comment id="15681670" author="tibor17" created="Sun, 20 Nov 2016 19:06:38 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=piotr.turski&quot; class=&quot;user-hover&quot; rel=&quot;piotr.turski&quot;&gt;piotr.turski&lt;/a&gt;&lt;br/&gt;
Can you check it out with Version 2.19.2-SNAPSHOT?&lt;br/&gt;
Method &lt;tt&gt;#rethrowAnyTestMechanismFailures()&lt;/tt&gt; changed and I think it should not throw NPE.&lt;/p&gt;</comment>
                            <comment id="15681920" author="piotr.turski" created="Sun, 20 Nov 2016 22:10:29 +0000"  >&lt;p&gt;still a bug but a bit different output. i took the project that reproduces the issue, added:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-xml&quot;&gt;   &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;pluginRepositories&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;pluginRepository&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;id&amp;gt;&lt;/span&gt;apache.snapshots&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/id&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;url&amp;gt;&lt;/span&gt;http://repository.apache.org/snapshots/&lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/url&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/pluginRepository&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;code-tag&quot;&gt;&amp;lt;/pluginRepositories&amp;gt;&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;and changed version to&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt; &amp;lt;version&amp;gt;2.19.2-SNAPSHOT&amp;lt;/version&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;and after running tests:&lt;/p&gt;
&lt;div class=&quot;preformatted panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;preformattedContent panelContent&quot;&gt;
&lt;pre&gt;[INFO] Scanning for projects...
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building playground 1.0-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-resources-plugin:2.5:resources (default-resources) @ playground ---
[debug] execute contextualize
[INFO] Using &apos;UTF-8&apos; encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /xxxxxxxxx/zohhak_parallel_bug/src/main/resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.5.1:compile (default-compile) @ playground ---
[INFO] No sources to compile
[INFO] 
[INFO] --- maven-resources-plugin:2.5:testResources (default-testResources) @ playground ---
[debug] execute contextualize
[INFO] Using &apos;UTF-8&apos; encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /xxxxxxxx/zohhak_parallel_bug/src/test/resources
[INFO] 
[INFO] --- maven-compiler-plugin:3.5.1:testCompile (default-testCompile) @ playground ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-surefire-plugin:2.19.2-SNAPSHOT:test (default-test) @ playground ---
[INFO] 
[INFO] -------------------------------------------------------
[INFO]  T E S T S
[INFO] -------------------------------------------------------
[INFO] Running testMethod
[INFO] Tests run: 0, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0 s - in testMethod
[INFO] 
[INFO] Results:
[INFO] 
[INFO] Tests run: 0, Failures: 0, Errors: 0, Skipped: 0
[INFO] 
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 2.240s
[INFO] Finished at: Sun Nov 20 23:01:58 CET 2016
[INFO] Final Memory: 11M/303M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-surefire-plugin:2.19.2-SNAPSHOT:test (default-test) on project playground: Execution default-test of goal org.apache.maven.plugins:maven-surefire-plugin:2.19.2-SNAPSHOT:test failed: There was an error in the forked process
[ERROR] org.apache.maven.surefire.testset.TestSetFailedException: Test mechanism :: null
[ERROR] at org.apache.maven.surefire.common.junit4.JUnit4RunListener.rethrowAnyTestMechanismFailures(JUnit4RunListener.java:210)
[ERROR] at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.createRequestAndRun(JUnitCoreWrapper.java:138)
[ERROR] at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.executeEager(JUnitCoreWrapper.java:107)
[ERROR] at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.execute(JUnitCoreWrapper.java:83)
[ERROR] at org.apache.maven.surefire.junitcore.JUnitCoreWrapper.execute(JUnitCoreWrapper.java:75)
[ERROR] at org.apache.maven.surefire.junitcore.JUnitCoreProvider.invoke(JUnitCoreProvider.java:157)
[ERROR] at org.apache.maven.surefire.booter.ForkedBooter.invokeProviderInSameClassLoader(ForkedBooter.java:300)
[ERROR] at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:251)
[ERROR] at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:130)
[ERROR] Caused by: java.lang.NullPointerException
[ERROR] at org.apache.maven.surefire.junitcore.ConcurrentRunListener.testStarting(ConcurrentRunListener.java:134)
[ERROR] at org.apache.maven.surefire.common.junit4.JUnit4RunListener.testStarted(JUnit4RunListener.java:93)
[ERROR] at org.junit.runner.notification.SynchronizedRunListener.testStarted(SynchronizedRunListener.java:49)
[ERROR] at org.junit.runner.notification.RunNotifier$3.notifyListener(RunNotifier.java:121)
[ERROR] at org.junit.runner.notification.RunNotifier$SafeNotifier.run(RunNotifier.java:72)
[ERROR] at org.junit.runner.notification.RunNotifier.fireTestStarted(RunNotifier.java:118)
[ERROR] at org.apache.maven.surefire.common.junit4.Notifier.fireTestStarted(Notifier.java:100)
[ERROR] at org.junit.internal.runners.model.EachTestNotifier.fireTestStarted(EachTestNotifier.java:42)
[ERROR] at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:323)
[ERROR] at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:78)
[ERROR] at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:57)
[ERROR] at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
[ERROR] at org.apache.maven.surefire.junitcore.pc.Scheduler$1.run(Scheduler.java:393)
[ERROR] at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
[ERROR] at java.util.concurrent.FutureTask.run(FutureTask.java:266)
[ERROR] at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)
[ERROR] at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)
[ERROR] at java.lang.Thread.run(Thread.java:745)
[ERROR] -&amp;gt; [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/PluginExecutionException

Process finished with exit code 1

&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;</comment>
                            <comment id="15682426" author="tibor17" created="Mon, 21 Nov 2016 03:59:10 +0000"  >&lt;p&gt;&lt;a href=&quot;https://issues.apache.org/jira/secure/ViewProfile.jspa?name=piotr.turski&quot; class=&quot;user-hover&quot; rel=&quot;piotr.turski&quot;&gt;piotr.turski&lt;/a&gt;&lt;br/&gt;
I guess the custom runner does not satisfy the interface of &lt;tt&gt;Description&lt;/tt&gt;. We have to extract method and class from it which is important to run method and/or class in parallel.&lt;br/&gt;
Try to attach Surefire source, run it in debug mode and debug classes &lt;tt&gt;ConcurrentRunListener&lt;/tt&gt; and &lt;tt&gt;JUnitCoreRunListener&lt;/tt&gt;. There is no &lt;tt&gt;TestSet&lt;/tt&gt; for &lt;tt&gt;Description&lt;/tt&gt;. Is the runner mutating the description?&lt;/p&gt;

&lt;p&gt;You should debug the method &lt;tt&gt;fillTestCountMap&lt;/tt&gt; in class &lt;tt&gt;JUnitCoreRunListener&lt;/tt&gt;. Either the class name does not come to the map &lt;tt&gt;classMethodCounts&lt;/tt&gt; or the description of class was mutated before &lt;tt&gt;ConcurrentRunListener#testStarting()&lt;/tt&gt;.&lt;br/&gt;
The JUnit description must be parsed successfully in &lt;tt&gt;JUnit4RunListener#testStarted( Description description )&lt;/tt&gt;.&lt;/p&gt;</comment>
                            <comment id="15691771" author="piotr.turski" created="Thu, 24 Nov 2016 00:29:36 +0000"  >&lt;p&gt;any links to documentation on what&apos;s the interface of `Description`? what exactly should be satisfied? if it runs correctly in non-parallel model, shouldn&apos;t it also work in parallel mode?&lt;/p&gt;

&lt;blockquote&gt;&lt;p&gt;Is the runner mutating the description?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;mutating? runner creates it. it creates parameterized tests.&lt;/p&gt;

&lt;p&gt;is there a simple way to run surefire programatically inside IDE? or how does surefire-team run tests for the surefire itself?&lt;/p&gt;</comment>
                            <comment id="15694866" author="tibor17" created="Fri, 25 Nov 2016 05:13:10 +0000"  >&lt;blockquote&gt;
&lt;p&gt;is there a simple way to run surefire programatically inside IDE? or how does surefire-team run tests for the surefire itself?&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Here is a hint in documentation:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://maven.apache.org/surefire/maven-surefire-plugin/examples/debugging.html&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://maven.apache.org/surefire/maven-surefire-plugin/examples/debugging.html&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;It would be more simple for you to debug tests within Maven process and not in forked JVM. To do so add &lt;tt&gt;&amp;lt;forkCount&amp;gt;0&amp;lt;/forkCount&amp;gt;&lt;/tt&gt; in Surefire plugin configuration and debug afterwards.&lt;/p&gt;</comment>
                            <comment id="15713724" author="tibor17" created="Fri, 2 Dec 2016 01:53:36 +0000"  >&lt;p&gt;&lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=maven-surefire.git;a=commit;h=c2a7d4b7f28b0fb5456b9871fd87cbac5c70cbd3&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=maven-surefire.git;a=commit;h=c2a7d4b7f28b0fb5456b9871fd87cbac5c70cbd3&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15713836" author="hudson" created="Fri, 2 Dec 2016 02:49:53 +0000"  >&lt;p&gt;SUCCESS: Integrated in Jenkins build maven-surefire #1649 (See &lt;a href=&quot;https://builds.apache.org/job/maven-surefire/1649/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/maven-surefire/1649/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1305&quot; title=&quot;surefire fails on parallel tests when newline character is in test description&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1305&quot;&gt;&lt;del&gt;SUREFIRE-1305&lt;/del&gt;&lt;/a&gt; surefire fails on parallel tests when newline character (tibor17: rev c2a7d4b7f28b0fb5456b9871fd87cbac5c70cbd3)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) surefire-providers/common-junit4/src/main/java/org/apache/maven/surefire/common/junit4/JUnit4RunListener.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="15718770" author="tibor17" created="Sat, 3 Dec 2016 21:30:52 +0000"  >&lt;p&gt;&lt;a href=&quot;https://git-wip-us.apache.org/repos/asf?p=maven-surefire.git;a=commit;h=d7bf6ce49043a3301494fdd26c538afad4e1938d&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://git-wip-us.apache.org/repos/asf?p=maven-surefire.git;a=commit;h=d7bf6ce49043a3301494fdd26c538afad4e1938d&lt;/a&gt;&lt;/p&gt;</comment>
                            <comment id="15718920" author="hudson" created="Sat, 3 Dec 2016 23:27:50 +0000"  >&lt;p&gt;SUCCESS: Integrated in Jenkins build maven-surefire #1652 (See &lt;a href=&quot;https://builds.apache.org/job/maven-surefire/1652/&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;https://builds.apache.org/job/maven-surefire/1652/&lt;/a&gt;)&lt;br/&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-1305&quot; title=&quot;surefire fails on parallel tests when newline character is in test description&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-1305&quot;&gt;&lt;del&gt;SUREFIRE-1305&lt;/del&gt;&lt;/a&gt; surefire fails on parallel tests when newline character (tibor17: rev d7bf6ce49043a3301494fdd26c538afad4e1938d)&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;(edit) surefire-providers/common-junit4/src/main/java/org/apache/maven/surefire/common/junit4/JUnit4RunListener.java&lt;/li&gt;
	&lt;li&gt;(edit) surefire-providers/common-junit4/src/main/java/org/apache/maven/surefire/common/junit4/JUnit4StackTraceWriter.java&lt;/li&gt;
	&lt;li&gt;(add) surefire-api/src/main/java/org/apache/maven/surefire/util/internal/TestClassMethodNameUtils.java&lt;/li&gt;
&lt;/ul&gt;
</comment>
                            <comment id="17994709" author="olamy" created="Fri, 4 Jul 2025 07:26:57 +0000"  >&lt;p&gt;This project has moved from Jira to GitHub Issues. This issue was migrated to &lt;a href=&quot;https://github.com/apache/maven-surefire/issues/2377&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;apache/maven-surefire#2377&lt;/a&gt;. &lt;/p&gt;</comment>
                    </comments>
                    <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i36jbz:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>