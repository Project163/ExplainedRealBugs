<!-- 
RSS generated by JIRA (8.20.10#820010-sha1:ace47f9899e9ee25d7157d59aa17ab06aee30d3d) at Wed Nov 12 07:09:38 UTC 2025

It is possible to restrict the fields that are returned in this document by specifying the 'field' parameter in your request.
For example, to request only the issue key and summary append 'field=key&field=summary' to the URL of your request.
-->
<rss version="0.92" >
<channel>
    <title>ASF Jira</title>
    <link>https://issues.apache.org/jira</link>
    <description>This file is an XML representation of an issue</description>
    <language>en-uk</language>    <build-info>
        <version>8.20.10</version>
        <build-number>820010</build-number>
        <build-date>22-06-2022</build-date>
    </build-info>


<item>
            <title>[SUREFIRE-747] Parallel method execution skips Tests</title>
                <link>https://issues.apache.org/jira/browse/SUREFIRE-747</link>
                <project id="12317927" key="SUREFIRE">Maven Surefire (Moved to GitHub Issues)</project>
                    <description>&lt;p&gt;Here is a simple testcase.&lt;/p&gt;

&lt;p&gt;POM file:&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;			&amp;lt;plugin&amp;gt;
				&amp;lt;artifactId&amp;gt;maven-surefire-plugin&amp;lt;/artifactId&amp;gt;
				&amp;lt;version&amp;gt;2.8.2-SNAPSHOT&amp;lt;/version&amp;gt;
				&amp;lt;configuration&amp;gt;
					&amp;lt;includes&amp;gt;
						&amp;lt;include&amp;gt;**/TestSuite.java&amp;lt;/include&amp;gt;
					&amp;lt;/includes&amp;gt;
					&amp;lt;parallel&amp;gt;methods&amp;lt;/parallel&amp;gt;
				&amp;lt;/configuration&amp;gt;
			&amp;lt;/plugin&amp;gt;
		&amp;lt;/plugins&amp;gt;
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;TestSuite.java&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.junit.runner.RunWith;
&lt;span class=&quot;code-keyword&quot;&gt;import&lt;/span&gt; org.junit.runners.Suite;

@RunWith(Suite.class)
@Suite.SuiteClasses(
{
	ParallelTest.class,
	ParallelTest2.class
})
&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;TestSuite
{
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ParallelTest.java&lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;code-keyword&quot;&gt;class &lt;/span&gt;ParallelTest
{
	&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; ParallelTest()
	{
		&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;ParallelTest.constructor&quot;&lt;/span&gt;);
	}
	
	@Before
	&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void setUp()
	{
		&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;ParallelTest.setUp&quot;&lt;/span&gt;);
	}

	@After
	&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void tearDown()
	{
		&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;ParallelTest.tearDown&quot;&lt;/span&gt;);
	}

	@Test
	&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void first() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; InterruptedException
	{
		&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;begin ParallelTest.first&quot;&lt;/span&gt;);
		&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.sleep(1000);
		&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;end ParallelTest.first&quot;&lt;/span&gt;);
	}

	@Test
	&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void second() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; InterruptedException
	{
		&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;begin ParallelTest.second&quot;&lt;/span&gt;);
		&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.sleep(1000);
		&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;end ParallelTest.second&quot;&lt;/span&gt;);
	}

	@Test
	&lt;span class=&quot;code-keyword&quot;&gt;public&lt;/span&gt; void third() &lt;span class=&quot;code-keyword&quot;&gt;throws&lt;/span&gt; InterruptedException
	{
		&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;begin ParallelTest.third&quot;&lt;/span&gt;);
		&lt;span class=&quot;code-object&quot;&gt;Thread&lt;/span&gt;.sleep(1000);
		&lt;span class=&quot;code-object&quot;&gt;System&lt;/span&gt;.out.println(&lt;span class=&quot;code-quote&quot;&gt;&quot;end ParallelTest.third&quot;&lt;/span&gt;);
	}
}
&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ParallelTest2.java is identical except that log output contains ParallelTest2 instead of ParallelTest.&lt;/p&gt;

&lt;p&gt;Actual Output:&lt;/p&gt;

&lt;blockquote&gt;
&lt;p&gt;Concurrency config is parallel=&apos;methods&apos;, perCoreThreadCount=true, threadCount=2, useUnlimitedThreads=false&lt;br/&gt;
Running com.holdmyspot.health.server.ParallelTest&lt;br/&gt;
ParallelTest.constructor&lt;br/&gt;
ParallelTest.setUp&lt;br/&gt;
begin ParallelTest.first&lt;br/&gt;
end ParallelTest.first&lt;br/&gt;
ParallelTest.tearDown&lt;br/&gt;
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.014 sec&lt;br/&gt;
Running com.holdmyspot.health.server.ParallelTest2&lt;br/&gt;
ParallelTest2.constructor&lt;br/&gt;
ParallelTest2.setUp&lt;br/&gt;
begin ParallelTest2.first&lt;br/&gt;
end ParallelTest2.first&lt;br/&gt;
ParallelTest2.tearDown&lt;br/&gt;
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 1.014 sec&lt;/p&gt;

&lt;p&gt;Results :&lt;/p&gt;

&lt;p&gt;Tests run: 2, Failures: 0, Errors: 0, Skipped: 0&lt;/p&gt;&lt;/blockquote&gt;

&lt;p&gt;Problem: methods second() and third() are never run for either ParallelTest or ParallelTest2.&lt;/p&gt;</description>
                <environment></environment>
        <key id="12810252">SUREFIRE-747</key>
            <summary>Parallel method execution skips Tests</summary>
                <type id="1" iconUrl="https://issues.apache.org/jira/secure/viewavatar?size=xsmall&amp;avatarId=21133&amp;avatarType=issuetype">Bug</type>
                                            <priority id="3" iconUrl="https://issues.apache.org/jira/images/icons/priorities/major.svg">Major</priority>
                        <status id="6" iconUrl="https://issues.apache.org/jira/images/icons/statuses/closed.png" description="The issue is considered finished, the resolution is correct. Issues which are not closed can be reopened.">Closed</status>
                    <statusCategory id="3" key="done" colorName="green"/>
                                    <resolution id="1">Fixed</resolution>
                                        <assignee username="krosenvold">Kristian Rosenvold</assignee>
                                    <reporter username="cowwoc">Gili</reporter>
                        <labels>
                    </labels>
                <created>Wed, 15 Jun 2011 23:24:30 +0000</created>
                <updated>Fri, 4 Jul 2025 07:16:25 +0000</updated>
                            <resolved>Sat, 26 Nov 2011 03:35:07 +0000</resolved>
                                    <version>2.8</version>
                    <version>2.8.1</version>
                                                    <component>Junit 4.7+ (parallel) support</component>
                        <due></due>
                            <votes>0</votes>
                                    <watches>1</watches>
                                                                                                                <comments>
                            <comment id="14454924" author="cowwoc" created="Thu, 16 Jun 2011 08:18:08 +0000"  >&lt;p&gt;Also, the tests don&apos;t actually run in parallel. I believe this justifies raising the priority of this bug...&lt;/p&gt;</comment>
                            <comment id="14454905" author="krosenvold" created="Thu, 16 Jun 2011 08:47:09 +0000"  >&lt;p&gt;It&apos;s the combination of the TestSuite and &quot;methods&quot; parallel that does not work. &quot;methods&quot; without the TestSuite works fine (Change include pattern to   &lt;/p&gt;
&lt;div class=&quot;code panel&quot; style=&quot;border-width: 1px;&quot;&gt;&lt;div class=&quot;codeContent panelContent&quot;&gt;
&lt;pre class=&quot;code-java&quot;&gt;**/Parallel*.java&lt;/pre&gt;
&lt;/div&gt;&lt;/div&gt;
&lt;p&gt; to verify this.&lt;/p&gt;
</comment>
                            <comment id="14455010" author="cowwoc" created="Thu, 16 Jun 2011 13:13:38 +0000"  >&lt;p&gt;Agreed but I&apos;ve yet to see parallel methods work properly. When I remove the TestSuite and run it against my actual unit tests I am running into a whole bunch of problems involving slf4j on the one hand, and problems making HTTP requests on the other. Now, it could very well be that slf4j and my HTTP test framework are at fault but I&apos;ve seen enough stuff broken in parallel methods to believe that the problem lies there. In fact, I remember running 2.8.1 (not 2.8.2-SNAPSHOT) and getting back a negative value for total test time. This seems to be fixed in 2.8.2-SNAPSHOT.&lt;/p&gt;

&lt;p&gt;I&apos;ll try providing testcases for all these cases but you need to do some serious testing on your end as well. Something is fundamentally broken here.&lt;/p&gt;</comment>
                            <comment id="14455028" author="krosenvold" created="Thu, 16 Jun 2011 13:46:42 +0000"  >&lt;p&gt;If you had bothered to check the surefire source code, which you obviously haven&apos;t, you&apos;d see that it&apos;s fairly well tested code. The parallel stuff too. But you found a bug with Suite and methods parallel, which you incidentally reported quite well; thanks for the report; those two are simply not going to work in combination as-is (I&apos;m unsure about &lt;b&gt;all&lt;/b&gt; the parallel stuff and the suite, you&apos;re the first person I&apos;ve seen trying it out).&lt;/p&gt;

&lt;p&gt;Due to some design issues in the Http stack itself, http-clients are typically some of the first failure signs of non-threadsafe code. That is &lt;b&gt;your&lt;/b&gt; code, which is probably the only thing &quot;fundamentally broken&quot; in this context. &lt;/p&gt;

&lt;p&gt;But please be assured that any relevant failing test cases you supply will be examined promptly. &lt;/p&gt;</comment>
                            <comment id="14455040" author="cowwoc" created="Sun, 19 Jun 2011 00:25:21 +0000"  >&lt;p&gt;Hi Kristan,&lt;/p&gt;

&lt;p&gt;Sorry if I ruffled some feathers. I&apos;ve tracked down two bugs so far:&lt;/p&gt;

&lt;p&gt;1. slf4j&apos;s initialization was not thread-safe: &lt;a href=&quot;http://bugzilla.slf4j.org/show_bug.cgi?id=176&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://bugzilla.slf4j.org/show_bug.cgi?id=176&lt;/a&gt;&lt;br/&gt;
2. guice&apos;s servlet module was not thread-safe: &lt;a href=&quot;http://code.google.com/p/google-guice/issues/detail?id=635&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;http://code.google.com/p/google-guice/issues/detail?id=635&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;There is at least one bug that seems to be Surefire-specific. &quot;Time elapsed&quot; is always wrong. Sometimes I get negative values:&lt;/p&gt;

&lt;p&gt;&quot;Tests run: 12, Failures: 5, Errors: 0, Skipped: 0, Time elapsed: -1,058,443.657 sec &amp;lt;&amp;lt;&amp;lt; FAILURE!&quot;&lt;/p&gt;

&lt;p&gt;Sometimes I get positive values that are too large:&lt;/p&gt;

&lt;p&gt;&quot;Tests run: 12, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 25.522 sec&quot;&lt;/p&gt;

&lt;p&gt;I know for a fact the tests only ran for 2.2 seconds because I logged the time at the beginning and end of each test.&lt;/p&gt;</comment>
                            <comment id="14455132" author="krosenvold" created="Sat, 26 Nov 2011 03:35:07 +0000"  >&lt;p&gt;I&apos;m closing this issue, since I created a separate issue &lt;a href=&quot;https://issues.apache.org/jira/browse/SUREFIRE-797&quot; title=&quot;Parallel junit does not run in parallel when a Suite is used at the top level&quot; class=&quot;issue-link&quot; data-issue-key=&quot;SUREFIRE-797&quot;&gt;&lt;del&gt;SUREFIRE-797&lt;/del&gt;&lt;/a&gt; for parallel not working with suite, which may actually be a JUnit issue. The issue of reported run-time has been fixed in other issues. &lt;/p&gt;

&lt;p&gt;When reporting issues, please bear in mind that someone will be fixing these issues, and the more un-related gripes you attach to each issue, the harder it becomes to actually resolve the issue. So if you report issues, generally try to report one distinct issue per problem.&lt;/p&gt;

&lt;p&gt;Thank you for the report, I&apos;d be very interested to hear if you can get &quot;parallel&quot; to work with a suite using just regular junit.&lt;/p&gt;</comment>
                            <comment id="17994152" author="olamy" created="Fri, 4 Jul 2025 07:16:25 +0000"  >&lt;p&gt;This project has moved from Jira to GitHub Issues. This issue was migrated to &lt;a href=&quot;https://github.com/apache/maven-surefire/issues/1813&quot; class=&quot;external-link&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;apache/maven-surefire#1813&lt;/a&gt;. &lt;/p&gt;</comment>
                    </comments>
                <issuelinks>
                            <issuelinktype id="12310260">
                    <name>Related</name>
                                                                <inwardlinks description="is related to">
                                        <issuelink>
            <issuekey id="12810246">SUREFIRE-797</issuekey>
        </issuelink>
                            </inwardlinks>
                                    </issuelinktype>
                    </issuelinks>
                <attachments>
                    </attachments>
                <subtasks>
                    </subtasks>
                <customfields>
                                                                            <customfield id="customfield_12310310" key="com.atlassian.jira.toolkit:attachments">
                        <customfieldname>Attachment count</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0.0</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        <customfield id="customfield_12314020" key="com.atlassian.jira.plugins.jira-development-integration-plugin:devsummary">
                        <customfieldname>Development</customfieldname>
                        <customfieldvalues>
                            
                        </customfieldvalues>
                    </customfield>
                                                                                                                        <customfield id="customfield_12313422" key="com.atlassian.jirafisheyeplugin:jobcheckbox">
                        <customfieldname>Enable Automatic Patch Review</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue><![CDATA[no_permission]]></customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <customfield id="customfield_12310420" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Global Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                        <customfield id="customfield_12312521" key="com.atlassian.jira.toolkit:LastCommentDate">
                        <customfieldname>Last public comment date</customfieldname>
                        <customfieldvalues>
                            18 weeks, 4 days ago
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                <customfield id="customfield_12311820" key="com.pyxis.greenhopper.jira:gh-lexo-rank">
                        <customfieldname>Rank</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>0|i2bdb3:</customfieldvalue>

                        </customfieldvalues>
                    </customfield>
                                                                <customfield id="customfield_12310920" key="com.pyxis.greenhopper.jira:gh-global-rank">
                        <customfieldname>Rank (Obsolete)</customfieldname>
                        <customfieldvalues>
                            <customfieldvalue>9223372036854775807</customfieldvalue>
                        </customfieldvalues>
                    </customfield>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            </customfields>
    </item>
</channel>
</rss>